/*! For license information please see main.f4414168.js.LICENSE.txt */
(()=>{var e={881:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),o=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case i:case s:case a:case A:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case h:case p:case l:return e;default:return t}}case o:return t}}}n=Symbol.for("react.module.reference")},186:(e,t,n)=>{"use strict";n(881)},503:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Date.now||function(){return+new Date},r=1e3,o={},i=1;t.core={effect:{Animate:{requestAnimationFrame:function(){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame,t=!!e;if(e&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(e.toString())&&(t=!1),t)return function(t,n){e(t,n)};var n={},r=1,o=null,i=+new Date;return function(e,t){var a=r++;return n[a]=e,null===o&&(o=setInterval((function(){var e=+new Date,t=n;for(var r in n={},t)t.hasOwnProperty(r)&&(t[r](e),i=e);e-i>2500&&(clearInterval(o),o=null)}),1e3/60)),a}}(),stop:function(e){var t=null!=o[e];return t&&(o[e]=null),t},isRunning:function(e){return null!=o[e]},start:function(e,a,s,l,c,u){var d=n(),A=d,f=0,p=0,h=i++;if(u||(u=document.body),h%20===0){var g={};for(var m in o)g[m]=!0;o=g}var y=function(i){var g=!0!==i,m=n();if(!o[h]||a&&!a(h))return o[h]=null,void(s&&s(60-p/((m-d)/r),h,!1));if(g)for(var v=Math.round((m-A)/16.666666666666668)-1,b=0;b<Math.min(v,4);b++)y(!0),p++;l&&(f=(m-d)/l)>1&&(f=1);var C=c?c(f):f;!1!==e(C,m,g)&&1!==f||!g?g&&(A=m,t.core.effect.Animate.requestAnimationFrame(y,u)):(o[h]=null,s&&s(60-p/((m-d)/r),h,1===f||null==l))};return o[h]=!0,t.core.effect.Animate.requestAnimationFrame(y,u),h}}}}},206:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(968),i=function(){function e(e,t){var n=this;if(this.options={},this.browserHasPerspectiveProperty=!1,this.browserHasTransformProperty=!0,this.eventHandlers=[],!e)throw new Error("No Content Element specified!");if(this.content=e,this.container=e.parentNode,!this.container)throw new Error("No Parent Container for Content! Please wrap Content Element in a Container.");this.options=r({},this.options,t),this.scroller=new o.Scroller((function(e,t,r){n.render(e,t,r)}),t);var i=document.createElement("div"),a=this.getVendorPrefix();this.content.style[a+"TransformOrigin"]="left top",this.transformProperty=a+"Transform",this.browserHasTransformProperty=void 0!==i.style[this.transformProperty];var s=a+"Perspective";this.browserHasPerspectiveProperty=void 0!==i.style[s],this.bindEvents(),this.reflow()}return e.prototype.getVendorPrefix=function(){var e,t=document.documentElement.style;window.opera&&"[object Opera]"===Object.prototype.toString.call(window.opera)?e="presto":"MozAppearance"in t?e="gecko":"WebkitAppearance"in t?e="webkit":"string"===typeof navigator.cpuClass&&(e="trident");return{trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[e]},e.prototype.render=function(e,t,n){this.browserHasPerspectiveProperty?this.content.style[this.transformProperty]="translate3d("+-e+"px,"+-t+"px,0) scale("+n+")":this.browserHasTransformProperty?this.content.style[this.transformProperty]="translate("+-e+"px,"+-t+"px) scale("+n+")":(this.content.style.marginLeft=e?-e/n+"px":"",this.content.style.marginTop=t?-t/n+"px":"",this.content.style.zoom=n||"")},e.prototype.reflow=function(){this.scroller.setDimensions(this.container.clientWidth,this.container.clientHeight,this.content.offsetWidth,this.content.offsetHeight);var e=this.container.getBoundingClientRect();this.scroller.setPosition(e.left+this.container.clientLeft,e.top+this.container.clientTop)},e.prototype.bindEvents=function(){var e=this;if(this.eventHandlers.push({event:"resize",handler:function(){return e.reflow()},forElem:window}),"ontouchstart"in window){this.eventHandlers.push({event:"touchstart",handler:function(t){t.touches[0]&&t.touches[0].target&&t.touches[0].target.tagName.match(/input|textarea|select/i)||(e.reflow(),e.scroller.doTouchStart(t.touches,t.timeStamp))},forElem:this.container},{event:"touchmove",handler:function(t){t.preventDefault(),e.scroller.doTouchMove(t.touches,t.timeStamp,t.scale)},forElem:this.container},{event:"touchend",handler:function(t){return e.scroller.doTouchEnd(t.timeStamp)},forElem:this.container},{event:"touchcancel",handler:function(t){return e.scroller.doTouchEnd(t.timeStamp)},forElem:this.container})}else{var t=!1;this.eventHandlers.push({event:"mousedown",handler:function(n){n.target.tagName.match(/input|textarea|select/i)||(e.scroller.doTouchStart([{pageX:n.pageX,pageY:n.pageY}],n.timeStamp),t=!0,e.reflow(),n.preventDefault())},forElem:this.container},{event:"mousemove",handler:function(n){t&&(e.scroller.doTouchMove([{pageX:n.pageX,pageY:n.pageY}],n.timeStamp),t=!0)},forElem:document},{event:"mouseup",handler:function(n){t&&(e.scroller.doTouchEnd(n.timeStamp),t=!1)},forElem:document},{event:"mousewheel",handler:function(t){e.options.zooming&&(e.scroller.doMouseZoom(t.wheelDelta,t.timeStamp,t.pageX,t.pageY),t.preventDefault())},forElem:this.container})}return this.eventHandlers.forEach((function(e){e.forElem.addEventListener(e.event,e.handler,!1)}))},e.prototype.getScroller=function(){return this.scroller},e.prototype.destroy=function(){return this.eventHandlers.forEach((function(e){e.forElem.removeEventListener(e.event,e.handler,!1)}))},e}();t.EasyScroller=i},968:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(503),i=function(){function e(e,t){this.__isSingleTouch=!1,this.__isTracking=!1,this.__didDecelerationComplete=!1,this.__isGesturing=!1,this.__isDragging=!1,this.__isDecelerating=!1,this.__isAnimating=!1,this.__interruptedAnimation=!1,this.__initialTouchLeft=null,this.__initialTouchTop=null,this.__initialTouches=null,this.__lastScale=1,this.__enableScrollX=!0,this.__enableScrollY=!0,this.__clientLeft=0,this.__clientTop=0,this.__clientWidth=0,this.__clientHeight=0,this.__contentWidth=0,this.__contentHeight=0,this.__snapWidth=100,this.__snapHeight=100,this.__refreshHeight=null,this.__refreshActive=!1,this.__refreshActivate=null,this.__refreshDeactivate=null,this.__refreshStart=null,this.__zoomLevel=1,this.__zoomLevelStart=this.__zoomLevel,this.__scrollLeft=0,this.__scrollTop=0,this.__maxScrollLeft=0,this.__maxScrollTop=0,this.__scheduledLeft=0,this.__scheduledTop=0,this.__scheduledZoom=0,this.__lastTouchLeft=null,this.__lastTouchTop=null,this.__lastTouchMove=null,this.__positions=null,this.__minDecelerationScrollLeft=null,this.__minDecelerationScrollTop=null,this.__maxDecelerationScrollLeft=null,this.__maxDecelerationScrollTop=null,this.__decelerationVelocityX=null,this.__decelerationVelocityY=null,this.__callback=function(e,t,n){},this.__zoomComplete=function(){},this.options={scrollingX:!0,scrollingY:!0,animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,zoomLevel:1,minZoom:.5,maxZoom:3,speedMultiplier:1,scrollingComplete:function(){},penetrationDeceleration:.03,penetrationAcceleration:.08},this.__callback=e,this.options=r({},this.options,t),t.zoomLevel&&t.zoomLevel>=this.options.minZoom&&t.zoomLevel<=this.options.maxZoom&&(this.__zoomLevel=t.zoomLevel,this.__zoomLevelStart=this.__zoomLevel)}return e.prototype.easeOutCubic=function(e){return Math.pow(e-1,3)+1},e.prototype.easeInOutCubic=function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},e.prototype.setDimensions=function(e,t,n,r){e===+e&&(this.__clientWidth=e),t===+t&&(this.__clientHeight=t),n===+n&&(this.__contentWidth=n),r===+r&&(this.__contentHeight=r),this.__computeScrollMax(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0)},e.prototype.setPosition=function(e,t){this.__clientLeft=e||0,this.__clientTop=t||0},e.prototype.setSnapSize=function(e,t){this.__snapWidth=e,this.__snapHeight=t},e.prototype.activatePullToRefresh=function(e,t,n,r){this.__refreshHeight=e,this.__refreshActivate=t,this.__refreshDeactivate=n,this.__refreshStart=r},e.prototype.triggerPullToRefresh=function(){this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0),this.__refreshStart&&this.__refreshStart()},e.prototype.finishPullToRefresh=function(){this.__refreshActive=!1,this.__refreshDeactivate&&this.__refreshDeactivate(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0)},e.prototype.getValues=function(){return{left:this.__scrollLeft,top:this.__scrollTop,zoom:this.__zoomLevel}},e.prototype.getScrollMax=function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},e.prototype.zoomTo=function(e,t,n,r,i){if(!this.options.zooming)throw new Error("Zooming is not enabled!");i&&(this.__zoomComplete=i),this.__isDecelerating&&(o.core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=!1);var a=this.__zoomLevel;null==n&&(n=this.__clientWidth/2),null==r&&(r=this.__clientHeight/2),e=Math.max(Math.min(e,this.options.maxZoom),this.options.minZoom),this.__computeScrollMax(e);var s=(n+this.__scrollLeft)*e/a-n,l=(r+this.__scrollTop)*e/a-r;s>this.__maxScrollLeft?s=this.__maxScrollLeft:s<0&&(s=0),l>this.__maxScrollTop?l=this.__maxScrollTop:l<0&&(l=0),this.__publish(s,l,e,t)},e.prototype.zoomBy=function(e,t,n,r,o){this.zoomTo(this.__zoomLevel*e,t,n,r,o)},e.prototype.scrollTo=function(e,t,n,r){if(this.__isDecelerating&&(o.core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=!1),null!=r&&r!==this.__zoomLevel){if(!this.options.zooming)throw new Error("Zooming is not enabled!");e*=r,t*=r,this.__computeScrollMax(r)}else r=this.__zoomLevel;this.options.scrollingX?this.options.paging?e=Math.round(e/this.__clientWidth)*this.__clientWidth:this.options.snapping&&(e=Math.round(e/this.__snapWidth)*this.__snapWidth):e=this.__scrollLeft,this.options.scrollingY?this.options.paging?t=Math.round(t/this.__clientHeight)*this.__clientHeight:this.options.snapping&&(t=Math.round(t/this.__snapHeight)*this.__snapHeight):t=this.__scrollTop,e=Math.max(Math.min(this.__maxScrollLeft,e),0),t=Math.max(Math.min(this.__maxScrollTop,t),0),e===this.__scrollLeft&&t===this.__scrollTop&&(n=!1),this.__isTracking||this.__publish(e,t,r,n)},e.prototype.scrollBy=function(e,t,n){var r=this.__isAnimating?this.__scheduledLeft:this.__scrollLeft,o=this.__isAnimating?this.__scheduledTop:this.__scrollTop;this.scrollTo(r+(e||0),o+(t||0),n)},e.prototype.doMouseZoom=function(e,t,n,r){var o=e>0?.97:1.03;return this.zoomTo(this.__zoomLevel*o,!1,n-this.__clientLeft,r-this.__clientTop)},e.prototype.doTouchStart=function(e,t){if(null==e.length)throw new Error("Invalid touch list: "+e);if(t instanceof Date&&(t=t.valueOf()),"number"!==typeof t)throw new Error("Invalid timestamp value: "+t);var n,r;this.__interruptedAnimation=!0,this.__isDecelerating&&(o.core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=!1,this.__interruptedAnimation=!0),this.__isAnimating&&(o.core.effect.Animate.stop(this.__isAnimating),this.__isAnimating=!1,this.__interruptedAnimation=!0);var i=1===e.length;i?(n=e[0].pageX,r=e[0].pageY):(n=Math.abs(e[0].pageX+e[1].pageX)/2,r=Math.abs(e[0].pageY+e[1].pageY)/2),this.__initialTouchLeft=n,this.__initialTouchTop=r,this.__initialTouches=e,this.__zoomLevelStart=this.__zoomLevel,this.__lastTouchLeft=n,this.__lastTouchTop=r,this.__lastTouchMove=t,this.__lastScale=1,this.__enableScrollX=!i&&this.options.scrollingX,this.__enableScrollY=!i&&this.options.scrollingY,this.__isTracking=!0,this.__didDecelerationComplete=!1,this.__isDragging=!i,this.__isSingleTouch=i,this.__positions=[]},e.prototype.doTouchMove=function(e,t,n){if(null==e.length)throw new Error("Invalid touch list: "+e);if(t instanceof Date&&(t=t.valueOf()),"number"!==typeof t)throw new Error("Invalid timestamp value: "+t);if(this.__isTracking){var r,o;2===e.length?(r=Math.abs(e[0].pageX+e[1].pageX)/2,o=Math.abs(e[0].pageY+e[1].pageY)/2,!n&&this.options.zooming&&(n=this.__getScale(this.__initialTouches,e))):(r=e[0].pageX,o=e[0].pageY);var i=this.__positions;if(this.__isDragging){var a=r-this.__lastTouchLeft,s=o-this.__lastTouchTop,l=this.__scrollLeft,c=this.__scrollTop,u=this.__zoomLevel;if(null!=n&&this.options.zooming){var d=u;if(u=u/this.__lastScale*n,d!==(u=Math.max(Math.min(u,this.options.maxZoom),this.options.minZoom))){var A=r-this.__clientLeft,f=o-this.__clientTop;l=(A+l)*u/d-A,c=(f+c)*u/d-f,this.__computeScrollMax(u)}}if(this.__enableScrollX){l-=a*this.options.speedMultiplier;var p=this.__maxScrollLeft;(l>p||l<0)&&(this.options.bouncing?l+=a/2*this.options.speedMultiplier:l=l>p?p:0)}if(this.__enableScrollY){c-=s*this.options.speedMultiplier;var h=this.__maxScrollTop;(c>h||c<0)&&(this.options.bouncing?(c+=s/2*this.options.speedMultiplier,this.__enableScrollX||null==this.__refreshHeight||(!this.__refreshActive&&c<=-this.__refreshHeight?(this.__refreshActive=!0,this.__refreshActivate&&this.__refreshActivate()):this.__refreshActive&&c>-this.__refreshHeight&&(this.__refreshActive=!1,this.__refreshDeactivate&&this.__refreshDeactivate()))):c=c>h?h:0)}i.length>60&&i.splice(0,30),i.push(l,c,t),this.__publish(l,c,u)}else{var g=this.options.locking?3:0,m=Math.abs(r-this.__initialTouchLeft),y=Math.abs(o-this.__initialTouchTop);this.__enableScrollX=this.options.scrollingX&&m>=g,this.__enableScrollY=this.options.scrollingY&&y>=g,i.push(this.__scrollLeft,this.__scrollTop,t),this.__isDragging=(this.__enableScrollX||this.__enableScrollY)&&(m>=5||y>=5),this.__isDragging&&(this.__interruptedAnimation=!1)}this.__lastTouchLeft=r,this.__lastTouchTop=o,this.__lastTouchMove=t,this.__lastScale=n}},e.prototype.doTouchEnd=function(e){if(e instanceof Date&&(e=e.valueOf()),"number"!==typeof e)throw new Error("Invalid timestamp value: "+e);if(this.__isTracking){if(this.__isTracking=!1,this.__isDragging)if(this.__isDragging=!1,this.__isSingleTouch&&this.options.animating&&e-this.__lastTouchMove<=100){for(var t=this.__positions,n=t.length-1,r=n,o=n;o>0&&t[o]>this.__lastTouchMove-100;o-=3)r=o;if(r!==n){var i=t[n]-t[r],a=this.__scrollLeft-t[r-2],s=this.__scrollTop-t[r-1];this.__decelerationVelocityX=a/i*(1e3/60),this.__decelerationVelocityY=s/i*(1e3/60);var l=this.options.paging||this.options.snapping?4:1;Math.abs(this.__decelerationVelocityX)>l||Math.abs(this.__decelerationVelocityY)>l?this.__refreshActive||this.__startDeceleration(e):this.options.scrollingComplete()}else this.options.scrollingComplete()}else e-this.__lastTouchMove>100&&this.options.scrollingComplete();this.__isDecelerating||(this.__refreshActive&&this.__refreshStart?(this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0),this.__refreshStart&&this.__refreshStart()):((this.__interruptedAnimation||this.__isDragging)&&this.options.scrollingComplete(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0,this.__zoomLevel),this.__refreshActive&&(this.__refreshActive=!1,this.__refreshDeactivate&&this.__refreshDeactivate()))),this.__positions.length=0}},e.prototype.__publish=function(e,t,n,r){var i=this,a=this.__isAnimating;if(a&&(o.core.effect.Animate.stop(a),this.__isAnimating=!1),r&&this.options.animating){this.__scheduledLeft=e,this.__scheduledTop=t,this.__scheduledZoom=n;var s=this.__scrollLeft,l=this.__scrollTop,c=this.__zoomLevel,u=e-s,d=t-l,A=n-c;this.__isAnimating=o.core.effect.Animate.start((function(e,t,n){n&&(i.__scrollLeft=s+u*e,i.__scrollTop=l+d*e,i.__zoomLevel=c+A*e,i.__callback&&i.__callback(i.__scrollLeft,i.__scrollTop,i.__zoomLevel))}),(function(e){return i.__isAnimating===e}),(function(e,t,n){t===i.__isAnimating&&(i.__isAnimating=!1),(i.__didDecelerationComplete||n)&&i.options.scrollingComplete(),i.options.zooming&&(i.__computeScrollMax(),i.__zoomComplete&&(i.__zoomComplete(),i.__zoomComplete=null))}),this.options.animationDuration,a?this.easeOutCubic:this.easeInOutCubic)}else this.__scheduledLeft=this.__scrollLeft=e,this.__scheduledTop=this.__scrollTop=t,this.__scheduledZoom=this.__zoomLevel=n,this.__callback&&this.__callback(e,t,n),this.options.zooming&&(this.__computeScrollMax(),this.__zoomComplete&&(this.__zoomComplete(),this.__zoomComplete=null))},e.prototype.__computeScrollMax=function(e){void 0===e&&(e=this.__zoomLevel),this.__maxScrollLeft=Math.max(this.__contentWidth*e-this.__clientWidth,0),this.__maxScrollTop=Math.max(this.__contentHeight*e-this.__clientHeight,0)},e.prototype.__startDeceleration=function(e){var t=this;if(this.options.paging){var n=Math.max(Math.min(this.__scrollLeft,this.__maxScrollLeft),0),r=Math.max(Math.min(this.__scrollTop,this.__maxScrollTop),0),i=this.__clientWidth,a=this.__clientHeight;this.__minDecelerationScrollLeft=Math.floor(n/i)*i,this.__minDecelerationScrollTop=Math.floor(r/a)*a,this.__maxDecelerationScrollLeft=Math.ceil(n/i)*i,this.__maxDecelerationScrollTop=Math.ceil(r/a)*a}else this.__minDecelerationScrollLeft=0,this.__minDecelerationScrollTop=0,this.__maxDecelerationScrollLeft=this.__maxScrollLeft,this.__maxDecelerationScrollTop=this.__maxScrollTop;var s=this.options.snapping?4:.001;this.__isDecelerating=o.core.effect.Animate.start((function(e,n,r){t.__stepThroughDeceleration(r)}),(function(){var e=Math.abs(t.__decelerationVelocityX)>=s||Math.abs(t.__decelerationVelocityY)>=s;return e||(t.__didDecelerationComplete=!0),e}),(function(e,n,r){t.__isDecelerating=!1,t.__didDecelerationComplete&&t.options.scrollingComplete(),t.scrollTo(t.__scrollLeft,t.__scrollTop,t.options.snapping)}))},e.prototype.__stepThroughDeceleration=function(e){var t=this.__scrollLeft+this.__decelerationVelocityX,n=this.__scrollTop+this.__decelerationVelocityY;if(!this.options.bouncing){var r=Math.max(Math.min(this.__maxDecelerationScrollLeft,t),this.__minDecelerationScrollLeft);r!==t&&(t=r,this.__decelerationVelocityX=0);var o=Math.max(Math.min(this.__maxDecelerationScrollTop,n),this.__minDecelerationScrollTop);o!==n&&(n=o,this.__decelerationVelocityY=0)}if(e?this.__publish(t,n,this.__zoomLevel):(this.__scrollLeft=t,this.__scrollTop=n),!this.options.paging){this.__decelerationVelocityX*=.95,this.__decelerationVelocityY*=.95}if(this.options.bouncing){var i=0,a=0,s=this.options.penetrationDeceleration,l=this.options.penetrationAcceleration;t<this.__minDecelerationScrollLeft?i=this.__minDecelerationScrollLeft-t:t>this.__maxDecelerationScrollLeft&&(i=this.__maxDecelerationScrollLeft-t),n<this.__minDecelerationScrollTop?a=this.__minDecelerationScrollTop-n:n>this.__maxDecelerationScrollTop&&(a=this.__maxDecelerationScrollTop-n),0!==i&&(i*this.__decelerationVelocityX<=0?this.__decelerationVelocityX+=i*s:this.__decelerationVelocityX=i*l),0!==a&&(a*this.__decelerationVelocityY<=0?this.__decelerationVelocityY+=a*s:this.__decelerationVelocityY=a*l)}},e.prototype.__getDistance=function(e,t){var n=t.pageX-e.pageX,r=t.pageY-e.pageY;return Math.sqrt(n*n+r*r)},e.prototype.__getScale=function(e,t){return e.length>=2&&t.length>=2?this.__getDistance(t[0],t[1])/this.__getDistance(e[0],e[1]):1},e}();t.Scroller=i},152:(e,t,n)=>{"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(206)),r(n(968))},240:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},a=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var r,o=t.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!o&&!i)return!1;for(r in e);return"undefined"===typeof r||t.call(e,r)},s=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(o)return o(e,n).value}return e[n]};e.exports=function e(){var t,n,r,o,c,u,d=arguments[0],A=1,f=arguments.length,p=!1;for("boolean"===typeof d&&(p=d,d=arguments[1]||{},A=2),(null==d||"object"!==typeof d&&"function"!==typeof d)&&(d={});A<f;++A)if(null!=(t=arguments[A]))for(n in t)r=l(d,n),d!==(o=l(t,n))&&(p&&o&&(a(o)||(c=i(o)))?(c?(c=!1,u=r&&i(r)?r:[]):u=r&&a(r)?r:{},s(d,{name:n,newValue:e(p,u,o)})):"undefined"!==typeof o&&s(d,{name:n,newValue:o}));return d}},122:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!==o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!==o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;0!==o--;){var a=i[o];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}},219:(e,t,n)=>{"use strict";var r=n(763),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||o}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,A=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var o=f(n);o&&o!==p&&e(t,o,r)}var a=u(n);d&&(a=a.concat(d(n)));for(var s=l(t),h=l(n),g=0;g<a.length;++g){var m=a[g];if(!i[m]&&(!r||!r[m])&&(!h||!h[m])&&(!s||!s[m])){var y=A(n,m);try{c(t,m,y)}catch(v){}}}}return t}},983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,A=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,h=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function C(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case i:case s:case a:case f:return e;default:switch(e=e&&e.$$typeof){case c:case A:case g:case h:case l:return e;default:return t}}case o:return t}}}function I(e){return C(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=A,t.Fragment=i,t.Lazy=g,t.Memo=h,t.Portal=o,t.Profiler=s,t.StrictMode=a,t.Suspense=f,t.isAsyncMode=function(e){return I(e)||C(e)===u},t.isConcurrentMode=I,t.isContextConsumer=function(e){return C(e)===c},t.isContextProvider=function(e){return C(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return C(e)===A},t.isFragment=function(e){return C(e)===i},t.isLazy=function(e){return C(e)===g},t.isMemo=function(e){return C(e)===h},t.isPortal=function(e){return C(e)===o},t.isProfiler=function(e){return C(e)===s},t.isStrictMode=function(e){return C(e)===a},t.isSuspense=function(e){return C(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===d||e===s||e===a||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===h||e.$$typeof===l||e.$$typeof===c||e.$$typeof===A||e.$$typeof===y||e.$$typeof===v||e.$$typeof===b||e.$$typeof===m)},t.typeOf=C},763:(e,t,n)=>{"use strict";e.exports=n(983)},805:(e,t)=>{"use strict";function n(e){return"object"!==typeof e||"toString"in e?e:Object.prototype.toString.call(e).slice(8,-1)}Object.defineProperty(t,"__esModule",{value:!0});var r="object"===typeof process&&!0;function o(e,t){if(!e){if(r)throw new Error("Invariant failed");throw new Error(t())}}t.invariant=o;var i=Object.prototype.hasOwnProperty,a=Array.prototype.splice,s=Object.prototype.toString;function l(e){return s.call(e).slice(8,-1)}var c=Object.assign||function(e,t){return u(t).forEach((function(n){i.call(t,n)&&(e[n]=t[n])})),e},u="function"===typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function d(e){return Array.isArray(e)?c(e.constructor(e.length),e):"Map"===l(e)?new Map(e):"Set"===l(e)?new Set(e):e&&"object"===typeof e?c(Object.create(Object.getPrototypeOf(e)),e):e}var A=function(){function e(){this.commands=c({},f),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var n=this,r="function"===typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(r)||o(!Array.isArray(r),(function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."})),o("object"===typeof r&&null!==r,(function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(n.commands).join(", ")+"."}));var a=e;return u(r).forEach((function(t){if(i.call(n.commands,t)){var o=e===a;a=n.commands[t](r[t],a,r,e),o&&n.isEquals(a,e)&&(a=e)}else{var s="Map"===l(e)?n.update(e.get(t),r[t]):n.update(e[t],r[t]),c="Map"===l(a)?a.get(t):a[t];n.isEquals(s,c)&&("undefined"!==typeof s||i.call(e,t))||(a===e&&(a=d(e)),"Map"===l(a)?a.set(t,s):a[t]=s)}})),a},e}();t.Context=A;var f={$push:function(e,t,n){return h(t,n,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,n){return h(t,n,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,r,i){return function(e,t){o(Array.isArray(e),(function(){return"Expected $splice target to be an array; got "+n(e)})),m(t.$splice)}(t,r),e.forEach((function(e){m(e),t===i&&e.length&&(t=d(i)),a.apply(t,e)})),t},$set:function(e,t,n){return function(e){o(1===Object.keys(e).length,(function(){return"Cannot have more than one key in an object with $set"}))}(n),e},$toggle:function(e,t){g(e,"$toggle");var n=e.length?d(t):t;return e.forEach((function(e){n[e]=!t[e]})),n},$unset:function(e,t,n,r){return g(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(t,e)&&(t===r&&(t=d(r)),delete t[e])})),t},$add:function(e,t,n,r){return y(t,"$add"),g(e,"$add"),"Map"===l(t)?e.forEach((function(e){var n=e[0],o=e[1];t===r&&t.get(n)!==o&&(t=d(r)),t.set(n,o)})):e.forEach((function(e){t!==r||t.has(e)||(t=d(r)),t.add(e)})),t},$remove:function(e,t,n,r){return y(t,"$remove"),g(e,"$remove"),e.forEach((function(e){t===r&&t.has(e)&&(t=d(r)),t.delete(e)})),t},$merge:function(e,t,r,i){var a,s;return a=t,o((s=e)&&"object"===typeof s,(function(){return"update(): $merge expects a spec of type 'object'; got "+n(s)})),o(a&&"object"===typeof a,(function(){return"update(): $merge expects a target of type 'object'; got "+n(a)})),u(e).forEach((function(n){e[n]!==t[n]&&(t===i&&(t=d(i)),t[n]=e[n])})),t},$apply:function(e,t){var r;return o("function"===typeof(r=e),(function(){return"update(): expected spec of $apply to be a function; got "+n(r)+"."})),e(t)}},p=new A;function h(e,t,r){o(Array.isArray(e),(function(){return"update(): expected target of "+n(r)+" to be an array; got "+n(e)+"."})),g(t[r],r)}function g(e,t){o(Array.isArray(e),(function(){return"update(): expected spec of "+n(t)+" to be an array; got "+n(e)+". Did you forget to wrap your parameter in an array?"}))}function m(e){o(Array.isArray(e),(function(){return"update(): expected spec of $splice to be an array of arrays; got "+n(e)+". Did you forget to wrap your parameters in an array?"}))}function y(e,t){var r=l(e);o("Map"===r||"Set"===r,(function(){return"update(): "+n(t)+" expects a target of type Set or Map; got "+n(r)}))}t.isEquals=p.update.isEquals,t.extend=p.extend,t.default=p.update,t.default.default=e.exports=c(t.default,t)},403:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,o=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,l=/^\s+|\s+$/g,c="";function u(e){return e?e.replace(l,c):c}e.exports=function(e,l){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var d=1,A=1;function f(e){var t=e.match(n);t&&(d+=t.length);var r=e.lastIndexOf("\n");A=~r?e.length-r:A+e.length}function p(){var e={line:d,column:A};return function(t){return t.position=new h(e),v(),t}}function h(e){this.start=e,this.end={line:d,column:A},this.source=l.source}h.prototype.content=e;var g=[];function m(t){var n=new Error(l.source+":"+d+":"+A+": "+t);if(n.reason=t,n.filename=l.source,n.line=d,n.column=A,n.source=e,!l.silent)throw n;g.push(n)}function y(t){var n=t.exec(e);if(n){var r=n[0];return f(r),e=e.slice(r.length),n}}function v(){y(r)}function b(e){var t;for(e=e||[];t=C();)!1!==t&&e.push(t);return e}function C(){var t=p();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;c!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,c===e.charAt(n-1))return m("End of comment missing");var r=e.slice(2,n-2);return A+=2,f(r),e=e.slice(n),A+=2,t({type:"comment",comment:r})}}function I(){var e=p(),n=y(o);if(n){if(C(),!y(i))return m("property missing ':'");var r=y(a),l=e({type:"declaration",property:u(n[0].replace(t,c)),value:r?u(r[0].replace(t,c)):c});return y(s),l}}return v(),function(){var e,t=[];for(b(t);e=I();)!1!==e&&(t.push(e),b(t));return t}()}},730:(e,t,n)=>{"use strict";var r=n(43),o=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function h(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new h(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new h(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new h(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new h(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new h(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new h(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function v(e,t,n,r){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(p,e)||!d.call(f,e)&&(A.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new h(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,y);g[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),I=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),_=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),Q=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O,F=Object.assign;function N(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var L=!1;function U(e,t){if(!e||L)return"";L=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var l="\n"+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{L=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?N(e):""}function G(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case I:return"Portal";case B:return"Profiler";case x:return"StrictMode";case D:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case w:return(e._context.displayName||"Context")+".Provider";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case Q:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function W(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function Ae(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function he(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=he(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Ce(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,Ee=null,xe=null;function Be(e){if(e=bo(e)){if("function"!==typeof Ie)throw Error(i(280));var t=e.stateNode;t&&(t=Io(t),Ie(e.stateNode,e.type,t))}}function we(e){Ee?xe?xe.push(e):xe=[e]:Ee=e}function _e(){if(Ee){var e=Ee,t=xe;if(xe=Ee=null,Be(e),t)for(e=0;e<t.length;e++)Be(t[e])}}function Se(e,t){return e(t)}function De(){}var Te=!1;function ke(e,t,n){if(Te)return e(t,n);Te=!0;try{return Se(e,t,n)}finally{Te=!1,(null!==Ee||null!==xe)&&(De(),_e())}}function Qe(e,t){var n=e.stateNode;if(null===n)return null;var r=Io(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Me=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Me=!1}function Pe(e,t,n,r,o,i,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Fe=null,Ne=!1,Le=null,Ue={onError:function(e){Oe=!0,Fe=e}};function Ge(e,t,n,r,o,i,a,s,l){Oe=!1,Fe=null,Pe.apply(Ue,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(je(e)!==e)throw Error(i(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return He(o),e;if(a===r)return He(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ye=o.unstable_scheduleCallback,Xe=o.unstable_cancelCallback,We=o.unstable_shouldYield,Ke=o.unstable_requestPaint,Je=o.unstable_now,Ze=o.unstable_getCurrentPriorityLevel,$e=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function At(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~o;0!==s?r=dt(s):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~o)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ht(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Ct,It,Et,xt,Bt,wt=!1,_t=[],St=null,Dt=null,Tt=null,kt=new Map,Qt=new Map,Mt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qt.delete(t.pointerId)}}function Ot(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=bo(t))&&It(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Ft(e){var t=vo(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Bt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Nt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bo(n))&&It(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Lt(e,t,n){Nt(e)&&n.delete(t)}function Ut(){wt=!1,null!==St&&Nt(St)&&(St=null),null!==Dt&&Nt(Dt)&&(Dt=null),null!==Tt&&Nt(Tt)&&(Tt=null),kt.forEach(Lt),Qt.forEach(Lt)}function Gt(e,t){e.blockedOn===t&&(e.blockedOn=null,wt||(wt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ut)))}function jt(e){function t(t){return Gt(t,e)}if(0<_t.length){Gt(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==St&&Gt(St,e),null!==Dt&&Gt(Dt,e),null!==Tt&&Gt(Tt,e),kt.forEach(t),Qt.forEach(t),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Mt.shift()}var zt=b.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,n,r){var o=vt,i=zt.transition;zt.transition=null;try{vt=1,Yt(e,t,n,r)}finally{vt=o,zt.transition=i}}function qt(e,t,n,r){var o=vt,i=zt.transition;zt.transition=null;try{vt=4,Yt(e,t,n,r)}finally{vt=o,zt.transition=i}}function Yt(e,t,n,r){if(Ht){var o=Wt(e,t,n,r);if(null===o)Hr(e,t,r,Xt,n),Pt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return St=Ot(St,e,t,n,r,o),!0;case"dragenter":return Dt=Ot(Dt,e,t,n,r,o),!0;case"mouseover":return Tt=Ot(Tt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return kt.set(i,Ot(kt.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Qt.set(i,Ot(Qt.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==o;){var i=bo(o);if(null!==i&&Ct(i),null===(i=Wt(e,t,n,r))&&Hr(e,t,r,Xt,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Xt=null;function Wt(e,t,n,r){if(Xt=null,null!==(e=vo(e=Ce(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,o="value"in Jt?Jt.value:Jt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return $t=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=F({},cn,{view:0,detail:0}),An=on(dn),fn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),hn=on(F({},fn,{dataTransfer:0})),gn=on(F({},dn,{relatedTarget:0})),mn=on(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=on(yn),bn=on(F({},cn,{data:0})),Cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Bn(){return xn}var wn=F({},dn,{key:function(e){if(e.key){var t=Cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=on(wn),Sn=on(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=on(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bn})),Tn=on(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qn=on(kn),Mn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Pn=null;u&&"documentMode"in document&&(Pn=document.documentMode);var On=u&&"TextEvent"in window&&!Pn,Fn=u&&(!Rn||Pn&&8<Pn&&11>=Pn),Nn=String.fromCharCode(32),Ln=!1;function Un(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Vn(e,t,n,r){we(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Yn=null;function Xn(e){Nr(e,0)}function Wn(e){if(Y(Co(e)))return e}function Kn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Zn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Yn=qn=null)}function nr(e){if("value"===e.propertyName&&Wn(Yn)){var t=[];Vn(t,Yn,e,Ce(e)),ke(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Wn(Yn)}function ir(e,t){if("click"===e)return Wn(t)}function ar(e,t){if("input"===e||"change"===e)return Wn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Ar(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=Ar(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=ur(n,i);var a=ur(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,mr=null,yr=null,vr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=qr(mr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function Cr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ir={animationend:Cr("Animation","AnimationEnd"),animationiteration:Cr("Animation","AnimationIteration"),animationstart:Cr("Animation","AnimationStart"),transitionend:Cr("Transition","TransitionEnd")},Er={},xr={};function Br(e){if(Er[e])return Er[e];if(!Ir[e])return e;var t,n=Ir[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return Er[e]=n[t];return e}u&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);var wr=Br("animationend"),_r=Br("animationiteration"),Sr=Br("animationstart"),Dr=Br("transitionend"),Tr=new Map,kr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(e,t){Tr.set(e,t),l(t,[e])}for(var Mr=0;Mr<kr.length;Mr++){var Rr=kr[Mr];Qr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Qr(wr,"onAnimationEnd"),Qr(_r,"onAnimationIteration"),Qr(Sr,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(Dr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,s,l,c){if(Ge.apply(this,arguments),Oe){if(!Oe)throw Error(i(198));var u=Fe;Oe=!1,Fe=null,Ne||(Ne=!0,Le=u)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;Fr(o,s,c),i=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;Fr(o,s,c),i=l}}}if(Ne)throw e=Le,Ne=!1,Le=null,e}function Lr(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Gr="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Gr]){e[Gr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Gr]||(t[Gr]=!0,Ur("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Kt(t)){case 1:var o=Vt;break;case 4:o=qt;break;default:o=Yt}n=o.bind(null,t,n,e),o=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=vo(s)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}s=s.parentNode}}r=r.return}ke((function(){var r=i,o=Ce(n),a=[];e:{var s=Tr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=_n;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Dn;break;case wr:case _r:case Sr:l=mn;break;case Dr:l=Tn;break;case"scroll":l=An;break;case"wheel":l=Qn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Sn}var u=0!==(4&t),d=!u&&"scroll"===e,A=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var h=(f=p).stateNode;if(5===f.tag&&null!==h&&(f=h,null!==A&&(null!=(h=Qe(p,A))&&u.push(Vr(p,h,f)))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,o),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vo(c)&&!c[ho])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vo(c):null)&&(c!==(d=je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,h="onMouseLeave",A="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Sn,h="onPointerLeave",A="onPointerEnter",p="pointer"),d=null==l?s:Co(l),f=null==c?s:Co(c),(s=new u(h,p+"leave",l,n,o)).target=d,s.relatedTarget=f,h=null,vo(o)===r&&((u=new u(A,p+"enter",c,n,o)).target=f,u.relatedTarget=d,h=u),d=h,l&&c)e:{for(A=c,p=0,f=u=l;f;f=Yr(f))p++;for(f=0,h=A;h;h=Yr(h))f++;for(;0<p-f;)u=Yr(u),p--;for(;0<f-p;)A=Yr(A),f--;for(;p--;){if(u===A||null!==A&&u===A.alternate)break e;u=Yr(u),A=Yr(A)}u=null}else u=null;null!==l&&Xr(a,s,l,u,!1),null!==c&&null!==d&&Xr(a,d,c,u,!0)}if("select"===(l=(s=r?Co(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Kn;else if(Hn(s))if(Jn)g=ar;else{g=or;var m=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ir);switch(g&&(g=g(e,r))?Vn(a,g,n,o):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?Co(r):window,e){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(gr=m,mr=r,yr=null);break;case"focusout":yr=mr=gr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,br(a,n,o);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":br(a,n,o)}var y;if(Rn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else jn?Un(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Fn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==v?"onCompositionEnd"===v&&jn&&(y=en()):(Zt="value"in(Jt=o)?Jt.value:Jt.textContent,jn=!0)),0<(m=qr(r,v)).length&&(v=new bn(v,e,null,n,o),a.push({event:v,listeners:m}),y?v.data=y:null!==(y=Gn(n))&&(v.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return Gn(t);case"keypress":return 32!==t.which?null:(Ln=!0,Nn);case"textInput":return(e=t.data)===Nn&&Ln?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Rn&&Un(e,t)?(e=en(),$t=Zt=Jt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(o=new bn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=y))}Nr(a,t)}))}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Qe(e,n))&&r.unshift(Vr(e,i,o)),null!=(i=Qe(e,t))&&r.push(Vr(e,i,o))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=Qe(n,i))&&a.unshift(Vr(n,l,s)):o||null!=(l=Qe(n,i))&&a.push(Vr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Wr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Wr,"\n").replace(Kr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(i(425))}function $r(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout((function(){throw e}))}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);jt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Ao=Math.random().toString(36).slice(2),fo="__reactFiber$"+Ao,po="__reactProps$"+Ao,ho="__reactContainer$"+Ao,go="__reactEvents$"+Ao,mo="__reactListeners$"+Ao,yo="__reactHandles$"+Ao;function vo(e){var t=e[fo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ho]||n[fo]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[fo])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function bo(e){return!(e=e[fo]||e[ho])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Co(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Io(e){return e[po]||null}var Eo=[],xo=-1;function Bo(e){return{current:e}}function wo(e){0>xo||(e.current=Eo[xo],Eo[xo]=null,xo--)}function _o(e,t){xo++,Eo[xo]=e.current,e.current=t}var So={},Do=Bo(So),To=Bo(!1),ko=So;function Qo(e,t){var n=e.type.contextTypes;if(!n)return So;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Mo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ro(){wo(To),wo(Do)}function Po(e,t,n){if(Do.current!==So)throw Error(i(168));_o(Do,t),_o(To,n)}function Oo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,z(e)||"Unknown",o));return F({},n,r)}function Fo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||So,ko=Do.current,_o(Do,e),_o(To,To.current),!0}function No(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Oo(e,t,ko),r.__reactInternalMemoizedMergedChildContext=e,wo(To),wo(Do),_o(Do,e)):wo(To),_o(To,n)}var Lo=null,Uo=!1,Go=!1;function jo(e){null===Lo?Lo=[e]:Lo.push(e)}function zo(){if(!Go&&null!==Lo){Go=!0;var e=0,t=vt;try{var n=Lo;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Lo=null,Uo=!1}catch(o){throw null!==Lo&&(Lo=Lo.slice(e+1)),Ye($e,zo),o}finally{vt=t,Go=!1}}return null}var Ho=[],Vo=0,qo=null,Yo=0,Xo=[],Wo=0,Ko=null,Jo=1,Zo="";function $o(e,t){Ho[Vo++]=Yo,Ho[Vo++]=qo,qo=e,Yo=t}function ei(e,t,n){Xo[Wo++]=Jo,Xo[Wo++]=Zo,Xo[Wo++]=Ko,Ko=e;var r=Jo;e=Zo;var o=32-at(r)-1;r&=~(1<<o),n+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Jo=1<<32-at(t)+o|n<<o|r,Zo=i+e}else Jo=1<<i|n<<o|r,Zo=e}function ti(e){null!==e.return&&($o(e,1),ei(e,1,0))}function ni(e){for(;e===qo;)qo=Ho[--Vo],Ho[Vo]=null,Yo=Ho[--Vo],Ho[Vo]=null;for(;e===Ko;)Ko=Xo[--Wo],Xo[Wo]=null,Zo=Xo[--Wo],Xo[Wo]=null,Jo=Xo[--Wo],Xo[Wo]=null}var ri=null,oi=null,ii=!1,ai=null;function si(e,t){var n=kc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function li(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,oi=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ko?{id:Jo,overflow:Zo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=kc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,oi=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var n=t;if(!li(e,t)){if(ci(e))throw Error(i(418));t=co(n.nextSibling);var r=ri;t&&li(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function Ai(e){if(e!==ri)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(ci(e))throw fi(),Error(i(418));for(;t;)si(e,t),t=co(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=ri?co(e.stateNode.nextSibling):null;return!0}function fi(){for(var e=oi;e;)e=co(e.nextSibling)}function pi(){oi=ri=null,ii=!1}function hi(e){null===ai?ai=[e]:ai.push(e)}var gi=b.ReactCurrentBatchConfig;function mi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===Q&&vi(i)===t.type)?((r=o(t,n.props)).ref=mi(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=mi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Nc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Pc(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function A(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case C:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=mi(e,null,t),n.return=e,n;case I:return(t=Nc(t,e.mode,n)).return=e,t;case Q:return A(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Pc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case C:return n.key===o?c(e,t,n,r):null;case I:return n.key===o?u(e,t,n,r):null;case Q:return f(e,t,(o=n._init)(n._payload),r)}if(te(n)||P(n))return null!==o?null:d(e,t,n,r,null);yi(e,n)}return null}function p(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case C:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case I:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case Q:return p(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||P(r))return d(t,e=e.get(n)||null,r,o,null);yi(t,r)}return null}function h(o,i,s,l){for(var c=null,u=null,d=i,h=i=0,g=null;null!==d&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var m=f(o,d,s[h],l);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(o,d),i=a(m,i,h),null===u?c=m:u.sibling=m,u=m,d=g}if(h===s.length)return n(o,d),ii&&$o(o,h),c;if(null===d){for(;h<s.length;h++)null!==(d=A(o,s[h],l))&&(i=a(d,i,h),null===u?c=d:u.sibling=d,u=d);return ii&&$o(o,h),c}for(d=r(o,d);h<s.length;h++)null!==(g=p(d,o,h,s[h],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?h:g.key),i=a(g,i,h),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(o,e)})),ii&&$o(o,h),c}function g(o,s,l,c){var u=P(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,h=s,g=s=0,m=null,y=l.next();null!==h&&!y.done;g++,y=l.next()){h.index>g?(m=h,h=null):m=h.sibling;var v=f(o,h,y.value,c);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(o,h),s=a(v,s,g),null===d?u=v:d.sibling=v,d=v,h=m}if(y.done)return n(o,h),ii&&$o(o,g),u;if(null===h){for(;!y.done;g++,y=l.next())null!==(y=A(o,y.value,c))&&(s=a(y,s,g),null===d?u=y:d.sibling=y,d=y);return ii&&$o(o,g),u}for(h=r(o,h);!y.done;g++,y=l.next())null!==(y=p(h,o,g,y.value,c))&&(e&&null!==y.alternate&&h.delete(null===y.key?g:y.key),s=a(y,s,g),null===d?u=y:d.sibling=y,d=y);return e&&h.forEach((function(e){return t(o,e)})),ii&&$o(o,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case C:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===E){if(7===u.tag){n(r,u.sibling),(i=o(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===Q&&vi(c)===u.type){n(r,u.sibling),(i=o(u,a.props)).ref=mi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===E?((i=Pc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Rc(a.type,a.key,a.props,null,r.mode,l)).ref=mi(r,i,a),l.return=r,r=l)}return s(r);case I:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=o(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Nc(a,r.mode,l)).return=r,r=i}return s(r);case Q:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return h(r,i,a,l);if(P(a))return g(r,i,a,l);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,a)).return=r,r=i):(n(r,i),(i=Fc(a,r.mode,l)).return=r,r=i),s(r)):n(r,i)}}var Ci=bi(!0),Ii=bi(!1),Ei=Bo(null),xi=null,Bi=null,wi=null;function _i(){wi=Bi=xi=null}function Si(e){var t=Ei.current;wo(Ei),e._currentValue=t}function Di(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ti(e,t){xi=e,wi=Bi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vs=!0),e.firstContext=null)}function ki(e){var t=e._currentValue;if(wi!==e)if(e={context:e,memoizedValue:t,next:null},null===Bi){if(null===xi)throw Error(i(308));Bi=e,xi.dependencies={lanes:0,firstContext:e}}else Bi=Bi.next=e;return t}var Qi=null;function Mi(e){null===Qi?Qi=[e]:Qi.push(e)}function Ri(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Mi(t)):(n.next=o.next,o.next=n),t.interleaved=n,Pi(e,r)}function Pi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oi=!1;function Fi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ni(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Li(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Sl)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Pi(e,n)}return null===(o=r.interleaved)?(t.next=t,Mi(r)):(t.next=o.next,o.next=t),r.interleaved=t,Pi(e,n)}function Gi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function ji(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zi(e,t,n,r){var o=e.updateQueue;Oi=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=o.baseState;for(a=0,u=c=l=null,s=i;;){var A=s.lane,f=s.eventTime;if((r&A)===A){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,h=s;switch(A=t,f=n,h.tag){case 1:if("function"===typeof(p=h.payload)){d=p.call(f,d,A);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(A="function"===typeof(p=h.payload)?p.call(f,d,A):p)||void 0===A)break e;d=F({},d,A);break e;case 2:Oi=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(A=o.effects)?o.effects=[s]:A.push(s))}else f={eventTime:f,lane:A,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=A;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(A=s).next,A.next=null,o.lastBaseUpdate=A,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Ol|=a,e.lanes=a,e.memoizedState=d}}function Hi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var Vi={},qi=Bo(Vi),Yi=Bo(Vi),Xi=Bo(Vi);function Wi(e){if(e===Vi)throw Error(i(174));return e}function Ki(e,t){switch(_o(Xi,t),_o(Yi,e),_o(qi,Vi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}wo(qi),_o(qi,t)}function Ji(){wo(qi),wo(Yi),wo(Xi)}function Zi(e){Wi(Xi.current);var t=Wi(qi.current),n=le(t,e.type);t!==n&&(_o(Yi,e),_o(qi,n))}function $i(e){Yi.current===e&&(wo(qi),wo(Yi))}var ea=Bo(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var oa=b.ReactCurrentDispatcher,ia=b.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,da=!1,Aa=0,fa=0;function pa(){throw Error(i(321))}function ha(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,o,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?$a:es,e=n(r,o),da){a=0;do{if(da=!1,Aa=0,25<=a)throw Error(i(301));a+=1,ca=la=null,t.updateQueue=null,oa.current=ts,e=n(r,o)}while(da)}if(oa.current=Za,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(i(300));return e}function ma(){var e=0!==Aa;return Aa=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function va(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(i(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function ba(e,t){return"function"===typeof t?t(e):t}function Ca(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=la,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}r.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var A={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=A,s=r):c=c.next=A,sa.lanes|=d,Ol|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(vs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,sa.lanes|=a,Ol|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ia(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);sr(a,t.memoizedState)||(vs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ea(){}function xa(e,t){var n=sa,r=va(),o=t(),a=!sr(r.memoizedState,o);if(a&&(r.memoizedState=o,vs=!0),r=r.queue,Oa(_a.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,ka(9,wa.bind(null,n,r,o,t),void 0,null),null===Dl)throw Error(i(349));0!==(30&aa)||Ba(n,t,o)}return o}function Ba(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function wa(e,t,n,r){t.value=n,t.getSnapshot=r,Sa(t)&&Da(e)}function _a(e,t,n){return n((function(){Sa(t)&&Da(e)}))}function Sa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Da(e){var t=Pi(e,1);null!==t&&nc(t,e,1,-1)}function Ta(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Xa.bind(null,sa,e),[t.memoizedState,e]}function ka(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Qa(){return va().memoizedState}function Ma(e,t,n,r){var o=ya();sa.flags|=e,o.memoizedState=ka(1|t,n,void 0,void 0===r?null:r)}function Ra(e,t,n,r){var o=va();r=void 0===r?null:r;var i=void 0;if(null!==la){var a=la.memoizedState;if(i=a.destroy,null!==r&&ha(r,a.deps))return void(o.memoizedState=ka(t,n,i,r))}sa.flags|=e,o.memoizedState=ka(1|t,n,i,r)}function Pa(e,t){return Ma(8390656,8,e,t)}function Oa(e,t){return Ra(2048,8,e,t)}function Fa(e,t){return Ra(4,2,e,t)}function Na(e,t){return Ra(4,4,e,t)}function La(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4,4,La.bind(null,t,e),n)}function Ga(){}function ja(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ha(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function za(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ha(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,vs=!0),e.memoizedState=n):(sr(n,t)||(n=ht(),sa.lanes|=n,Ol|=n,e.baseState=!0),t)}function Va(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{vt=n,ia.transition=r}}function qa(){return va().memoizedState}function Ya(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wa(e))Ka(t,n);else if(null!==(n=Ri(e,t,n,r))){nc(n,e,r,ec()),Ja(n,t,r)}}function Xa(e,t,n){var r=tc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wa(e))Ka(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(o.next=o,Mi(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=Ri(e,t,o,r))&&(nc(n,e,r,o=ec()),Ja(n,t,r))}}function Wa(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ka(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Za={readContext:ki,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},$a={readContext:ki,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:ki,useEffect:Pa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4194308,4,La.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ya.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ta,useDebugValue:Ga,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ta(!1),t=e[0];return e=Va.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,o=ya();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Dl)throw Error(i(349));0!==(30&aa)||Ba(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,Pa(_a.bind(null,r,a,e),[e]),r.flags|=2048,ka(9,wa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Dl.identifierPrefix;if(ii){var n=Zo;t=":"+t+"R"+(n=(Jo&~(1<<32-at(Jo)-1)).toString(32)+n),0<(n=Aa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:ki,useCallback:ja,useContext:ki,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:Fa,useLayoutEffect:Na,useMemo:za,useReducer:Ca,useRef:Qa,useState:function(){return Ca(ba)},useDebugValue:Ga,useDeferredValue:function(e){return Ha(va(),la.memoizedState,e)},useTransition:function(){return[Ca(ba)[0],va().memoizedState]},useMutableSource:Ea,useSyncExternalStore:xa,useId:qa,unstable_isNewReconciler:!1},ts={readContext:ki,useCallback:ja,useContext:ki,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:Fa,useLayoutEffect:Na,useMemo:za,useReducer:Ia,useRef:Qa,useState:function(){return Ia(ba)},useDebugValue:Ga,useDeferredValue:function(e){var t=va();return null===la?t.memoizedState=e:Ha(t,la.memoizedState,e)},useTransition:function(){return[Ia(ba)[0],va().memoizedState]},useMutableSource:Ea,useSyncExternalStore:xa,useId:qa,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),i=Li(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,o))&&(nc(t,e,o,r),Gi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),i=Li(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,o))&&(nc(t,e,o,r),Gi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),o=Li(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Ui(e,o,r))&&(nc(t,e,r,n),Gi(t,e,r))}};function is(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(o,i))}function as(e,t,n){var r=!1,o=So,i=t.contextType;return"object"===typeof i&&null!==i?i=ki(i):(o=Mo(t)?ko:Do.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Qo(e,o):So),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Fi(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=ki(i):(i=Mo(t)?ko:Do.current,o.context=Qo(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(rs(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&os.enqueueReplaceState(o,o.state,null),zi(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var As="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Li(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=r),ds(0,t)},n}function ps(e,t,n){(n=Li(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function hs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new As;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Bc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ms(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Li(-1,1)).tag=2,Ui(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var ys=b.ReactCurrentOwner,vs=!1;function bs(e,t,n,r){t.child=null===e?Ii(t,null,n,r):Ci(t,e.child,n,r)}function Cs(e,t,n,r,o){n=n.render;var i=t.ref;return Ti(t,o),r=ga(e,t,n,r,i,o),n=ma(),null===e||vs?(ii&&n&&ti(t),t.flags|=1,bs(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hs(e,t,o))}function Is(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Qc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Es(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Hs(e,t,o)}return t.flags|=1,(e=Mc(i,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(vs=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,Hs(e,t,o);0!==(131072&e.flags)&&(vs=!0)}}return ws(e,t,n,r,o)}function xs(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_o(Ml,Ql),Ql|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_o(Ml,Ql),Ql|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,_o(Ml,Ql),Ql|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,_o(Ml,Ql),Ql|=r;return bs(e,t,o,n),t.child}function Bs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ws(e,t,n,r,o){var i=Mo(n)?ko:Do.current;return i=Qo(t,i),Ti(t,o),n=ga(e,t,n,r,i,o),r=ma(),null===e||vs?(ii&&r&&ti(t),t.flags|=1,bs(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hs(e,t,o))}function _s(e,t,n,r,o){if(Mo(n)){var i=!0;Fo(t)}else i=!1;if(Ti(t,o),null===t.stateNode)zs(e,t),as(t,n,r),ls(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ki(c):c=Qo(t,c=Mo(n)?ko:Do.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,a,r,c),Oi=!1;var A=t.memoizedState;a.state=A,zi(t,r,a,o),l=t.memoizedState,s!==r||A!==l||To.current||Oi?("function"===typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Oi||is(t,n,s,r,A,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ni(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),a.props=c,d=t.pendingProps,A=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=ki(l):l=Qo(t,l=Mo(n)?ko:Do.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||A!==l)&&ss(t,a,r,l),Oi=!1,A=t.memoizedState,a.state=A,zi(t,r,a,o);var p=t.memoizedState;s!==d||A!==p||To.current||Oi?("function"===typeof f&&(rs(t,n,f,r),p=t.memoizedState),(c=Oi||is(t,n,c,r,A,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),r=!1)}return Ss(e,t,n,r,i,o)}function Ss(e,t,n,r,o,i){Bs(e,t);var a=0!==(128&t.flags);if(!r&&!a)return o&&No(t,n,!1),Hs(e,t,i);r=t.stateNode,ys.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ci(t,e.child,null,i),t.child=Ci(t,null,s,i)):bs(e,t,s,i),t.memoizedState=r.state,o&&No(t,n,!0),t.child}function Ds(e){var t=e.stateNode;t.pendingContext?Po(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Po(0,t.context,!1),Ki(e,t.containerInfo)}function Ts(e,t,n,r,o){return pi(),hi(o),t.flags|=256,bs(e,t,n,r),t.child}var ks,Qs,Ms,Rs,Ps={dehydrated:null,treeContext:null,retryLane:0};function Os(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,o=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),_o(ea,1&a),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,s?(o=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Oc(l,o,0,null),e=Pc(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Os(n),t.memoizedState=Ps,e):Ns(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,o,a,s){if(n)return 256&t.flags?(t.flags&=-257,Ls(e,t,s,r=us(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=Oc({mode:"visible",children:r.children},o,0,null),(a=Pc(a,o,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Ci(t,e.child,null,s),t.child.memoizedState=Os(s),t.memoizedState=Ps,a);if(0===(1&t.mode))return Ls(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,Ls(e,t,s,r=us(a=Error(i(419)),r,void 0))}if(l=0!==(s&e.childLanes),vs||l){if(null!==(r=Dl)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==a.retryLane&&(a.retryLane=o,Pi(e,o),nc(r,e,o,-1))}return hc(),Ls(e,t,s,r=us(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=co(o.nextSibling),ri=t,ii=!0,ai=null,null!==e&&(Xo[Wo++]=Jo,Xo[Wo++]=Zo,Xo[Wo++]=Ko,Jo=e.id,Zo=e.overflow,Ko=t),t=Ns(t,r.children),t.flags|=4096,t)}(e,t,l,o,r,a,n);if(s){s=o.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Mc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Mc(r,s):(s=Pc(s,l,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,l=null===(l=e.child.memoizedState)?Os(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ps,o}return e=(s=e.child).sibling,o=Mc(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Ns(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ls(e,t,n,r){return null!==r&&hi(r),Ci(t,e.child,null,n),(e=Ns(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Di(e.return,t,n)}function Gs(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function js(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_o(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Gs(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ta(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Gs(t,!0,n,null,i);break;case"together":Gs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vs(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ys(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Mo(t.type)&&Ro(),qs(t),null;case 3:return r=t.stateNode,Ji(),wo(To),wo(Do),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ai(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(ac(ai),ai=null))),Qs(e,t),qs(t),null;case 5:$i(t);var o=Wi(Xi.current);if(n=t.type,null!==e&&null!=t.stateNode)Ms(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return qs(t),null}if(e=Wi(qi.current),Ai(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fo]=t,r[po]=a,e=0!==(1&t.mode),n){case"dialog":Lr("cancel",r),Lr("close",r);break;case"iframe":case"object":case"embed":Lr("load",r);break;case"video":case"audio":for(o=0;o<Pr.length;o++)Lr(Pr[o],r);break;case"source":Lr("error",r);break;case"img":case"image":case"link":Lr("error",r),Lr("load",r);break;case"details":Lr("toggle",r);break;case"input":K(r,a),Lr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Lr("invalid",r);break;case"textarea":oe(r,a),Lr("invalid",r)}for(var l in ye(n,a),o=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),o=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Lr("scroll",r)}switch(n){case"input":q(r),$(r,a,!0);break;case"textarea":q(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=$r)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fo]=t,e[po]=r,ks(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Lr("cancel",e),Lr("close",e),o=r;break;case"iframe":case"object":case"embed":Lr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Pr.length;o++)Lr(Pr[o],e);o=r;break;case"source":Lr("error",e),o=r;break;case"img":case"image":case"link":Lr("error",e),Lr("load",e),o=r;break;case"details":Lr("toggle",e),o=r;break;case"input":K(e,r),o=W(e,r),Lr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=F({},r,{value:void 0}),Lr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Lr("invalid",e)}for(a in ye(n,o),c=o)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&Ae(e,u):"number"===typeof u&&Ae(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Lr("scroll",e):null!=u&&v(e,a,u,l))}switch(n){case"input":q(e),$(e,r,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Rs(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Wi(Xi.current),Wi(qi.current),Ai(t)){if(r=t.stateNode,n=t.memoizedProps,r[fo]=t,(a=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fo]=t,t.stateNode=r}return qs(t),null;case 13:if(wo(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))fi(),pi(),t.flags|=98560,a=!1;else if(a=Ai(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[fo]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),a=!1}else null!==ai&&(ac(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Rl&&(Rl=3):hc())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return Ji(),Qs(e,t),null===e&&jr(t.stateNode.containerInfo),qs(t),null;case 10:return Si(t.type._context),qs(t),null;case 19:if(wo(ea),null===(a=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Vs(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Vs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _o(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>jl&&(t.flags|=128,r=!0,Vs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ii)return qs(t),null}else 2*Je()-a.renderingStartTime>jl&&1073741824!==n&&(t.flags|=128,r=!0,Vs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=ea.current,_o(ea,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ql)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Xs(e,t){switch(ni(t),t.tag){case 1:return Mo(t.type)&&Ro(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ji(),wo(To),wo(Do),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $i(t),null;case 13:if(wo(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return wo(ea),null;case 4:return Ji(),null;case 10:return Si(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}ks=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qs=function(){},Ms=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Wi(qi.current);var i,a=null;switch(n){case"input":o=W(e,o),r=W(e,r),a=[];break;case"select":o=F({},o,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":o=re(e,o),r=re(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in ye(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Lr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Rs=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ws=!1,Ks=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){xc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&el(t,n,i)}o=o.next}while(o!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fo],delete t[po],delete t[go],delete t[mo],delete t[yo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function Al(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:Ks||$s(n,t);case 6:var r=ul,o=dl;ul=null,Al(e,t,n),dl=o,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),jt(e)):lo(ul,n.stateNode));break;case 4:r=ul,o=dl,ul=n.stateNode.containerInfo,dl=!0,Al(e,t,n),ul=r,dl=o;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),o=o.next}while(o!==r)}Al(e,t,n);break;case 1:if(!Ks&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){xc(n,t,s)}Al(e,t,n);break;case 21:Al(e,t,n);break;case 22:1&n.mode?(Ks=(r=Ks)||null!==n.memoizedState,Al(e,t,n),Ks=r):Al(e,t,n);break;default:Al(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Sc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));fl(a,s,o),ul=null,dl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(u){xc(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hl(t,e),ml(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){xc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){xc(e,e.return,g)}}break;case 1:hl(t,e),ml(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(hl(t,e),ml(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var o=e.stateNode;try{Ae(o,"")}catch(g){xc(e,e.return,g)}}if(4&r&&null!=(o=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(o,a),ve(l,s);var u=ve(l,a);for(s=0;s<c.length;s+=2){var d=c[s],A=c[s+1];"style"===d?ge(o,A):"dangerouslySetInnerHTML"===d?de(o,A):"children"===d?Ae(o,A):v(o,d,A,u)}switch(l){case"input":Z(o,a);break;case"textarea":ie(o,a);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(o,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[po]=a}catch(g){xc(e,e.return,g)}}break;case 6:if(hl(t,e),ml(e),4&r){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(g){xc(e,e.return,g)}}break;case 3:if(hl(t,e),ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(g){xc(e,e.return,g)}break;case 4:default:hl(t,e),ml(e);break;case 13:hl(t,e),ml(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Gl=Je())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ks=(u=Ks)||d,hl(t,e),Ks=u):hl(t,e),ml(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Zs=e,d=e.child;null!==d;){for(A=Zs=d;null!==Zs;){switch(p=(f=Zs).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:$s(f,f.return);var h=f.stateNode;if("function"===typeof h.componentWillUnmount){r=f,n=f.return;try{t=r,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(g){xc(r,n,g)}}break;case 5:$s(f,f.return);break;case 22:if(null!==f.memoizedState){Cl(A);continue}}null!==p?(p.return=f,Zs=p):Cl(A)}d=d.sibling}e:for(d=null,A=e;;){if(5===A.tag){if(null===d){d=A;try{o=A.stateNode,u?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=A.stateNode,s=void 0!==(c=A.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=he("display",s))}catch(g){xc(e,e.return,g)}}}else if(6===A.tag){if(null===d)try{A.stateNode.nodeValue=u?"":A.memoizedProps}catch(g){xc(e,e.return,g)}}else if((22!==A.tag&&23!==A.tag||null===A.memoizedState||A===e)&&null!==A.child){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;null===A.sibling;){if(null===A.return||A.return===e)break e;d===A&&(d=null),A=A.return}d===A&&(d=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:hl(t,e),ml(e),4&r&&pl(e);case 21:}}function ml(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(Ae(o,""),r.flags&=-33),cl(e,sl(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(i(161))}}catch(s){xc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Zs=e,vl(e,t,n)}function vl(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var o=Zs,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Ws;if(!a){var s=o.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=Ws;var c=Ks;if(Ws=a,(Ks=l)&&!c)for(Zs=o;null!==Zs;)l=(a=Zs).child,22===a.tag&&null!==a.memoizedState?Il(o):null!==l?(l.return=a,Zs=l):Il(o);for(;null!==i;)Zs=i,vl(i,t,n),i=i.sibling;Zs=o,Ws=s,Ks=c}bl(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,Zs=i):bl(e)}}function bl(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ks||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ks)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Hi(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hi(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var A=d.dehydrated;null!==A&&jt(A)}}}break;default:throw Error(i(163))}Ks||512&t.flags&&ol(t)}catch(f){xc(t,t.return,f)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function Cl(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function Il(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){xc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(l){xc(t,o,l)}}var i=t.return;try{ol(t)}catch(l){xc(t,i,l)}break;case 5:var a=t.return;try{ol(t)}catch(l){xc(t,a,l)}}}catch(l){xc(t,t.return,l)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var El,xl=Math.ceil,Bl=b.ReactCurrentDispatcher,wl=b.ReactCurrentOwner,_l=b.ReactCurrentBatchConfig,Sl=0,Dl=null,Tl=null,kl=0,Ql=0,Ml=Bo(0),Rl=0,Pl=null,Ol=0,Fl=0,Nl=0,Ll=null,Ul=null,Gl=0,jl=1/0,zl=null,Hl=!1,Vl=null,ql=null,Yl=!1,Xl=null,Wl=0,Kl=0,Jl=null,Zl=-1,$l=0;function ec(){return 0!==(6&Sl)?Je():-1!==Zl?Zl:Zl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Sl)&&0!==kl?kl&-kl:null!==gi.transition?(0===$l&&($l=ht()),$l):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function nc(e,t,n,r){if(50<Kl)throw Kl=0,Jl=null,Error(i(185));mt(e,n,r),0!==(2&Sl)&&e===Dl||(e===Dl&&(0===(2&Sl)&&(Fl|=n),4===Rl&&sc(e,kl)),rc(e,r),1===n&&0===Sl&&0===(1&t.mode)&&(jl=Je()+500,Uo&&zo()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),s=1<<a,l=o[a];-1===l?0!==(s&n)&&0===(s&r)||(o[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=At(e,e===Dl?kl:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Uo=!0,jo(e)}(lc.bind(null,e)):jo(lc.bind(null,e)),ao((function(){0===(6&Sl)&&zo()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Dc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Zl=-1,$l=0,0!==(6&Sl))throw Error(i(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=At(e,e===Dl?kl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var o=Sl;Sl|=2;var a=pc();for(Dl===e&&kl===t||(zl=null,jl=Je()+500,Ac(e,t));;)try{yc();break}catch(l){fc(e,l)}_i(),Bl.current=a,Sl=o,null!==Tl?t=0:(Dl=null,kl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t)throw n=Pl,Ac(e,0),sc(e,r),rc(e,Je()),n;if(6===t)sc(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!sr(i(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=gc(e,r))&&(0!==(a=pt(e))&&(r=a,t=ic(e,a))),1===t))throw n=Pl,Ac(e,0),sc(e,r),rc(e,Je()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Cc(e,Ul,zl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Gl+500-Je())){if(0!==At(e,0))break;if(((o=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(Cc.bind(null,e,Ul,zl),t);break}Cc(e,Ul,zl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>o&&(o=s),r&=~a}if(r=o,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xl(r/1960))-r)){e.timeoutHandle=ro(Cc.bind(null,e,Ul,zl),r);break}Cc(e,Ul,zl);break;default:throw Error(i(329))}}}return rc(e,Je()),e.callbackNode===n?oc.bind(null,e):null}function ic(e,t){var n=Ll;return e.current.memoizedState.isDehydrated&&(Ac(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function sc(e,t){for(t&=~Nl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Sl))throw Error(i(327));Ic();var t=At(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Pl,Ac(e,0),sc(e,t),rc(e,Je()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cc(e,Ul,zl),rc(e,Je()),null}function cc(e,t){var n=Sl;Sl|=1;try{return e(t)}finally{0===(Sl=n)&&(jl=Je()+500,Uo&&zo())}}function uc(e){null!==Xl&&0===Xl.tag&&0===(6&Sl)&&Ic();var t=Sl;Sl|=1;var n=_l.transition,r=vt;try{if(_l.transition=null,vt=1,e)return e()}finally{vt=r,_l.transition=n,0===(6&(Sl=t))&&zo()}}function dc(){Ql=Ml.current,wo(Ml)}function Ac(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Tl)for(n=Tl.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ro();break;case 3:Ji(),wo(To),wo(Do),ra();break;case 5:$i(r);break;case 4:Ji();break;case 13:case 19:wo(ea);break;case 10:Si(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Dl=e,Tl=e=Mc(e.current,null),kl=Ql=t,Rl=0,Pl=null,Nl=Fl=Ol=0,Ul=Ll=null,null!==Qi){for(t=0;t<Qi.length;t++)if(null!==(r=(n=Qi[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}Qi=null}return e}function fc(e,t){for(;;){var n=Tl;try{if(_i(),oa.current=Za,ua){for(var r=sa.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=sa=null,da=!1,Aa=0,wl.current=null,null===n||null===n.return){Rl=1,Pl=t,Tl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=kl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,A=d.tag;if(0===(1&d.mode)&&(0===A||11===A||15===A)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ms(p,s,l,0,t),1&p.mode&&hs(a,u,t),c=u;var h=(t=p).updateQueue;if(null===h){var g=new Set;g.add(c),t.updateQueue=g}else h.add(c);break e}if(0===(1&t)){hs(a,u,t),hc();break e}c=Error(i(426))}else if(ii&&1&l.mode){var m=gs(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),ms(m,s,l,0,t),hi(cs(c,l));break e}}a=c=cs(c,l),4!==Rl&&(Rl=2),null===Ll?Ll=[a]:Ll.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,ji(a,fs(0,c,t));break e;case 1:l=c;var y=a.type,v=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===ql||!ql.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t,ji(a,ps(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function pc(){var e=Bl.current;return Bl.current=Za,null===e?Za:e}function hc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Dl||0===(268435455&Ol)&&0===(268435455&Fl)||sc(Dl,kl)}function gc(e,t){var n=Sl;Sl|=2;var r=pc();for(Dl===e&&kl===t||(zl=null,Ac(e,t));;)try{mc();break}catch(o){fc(e,o)}if(_i(),Sl=n,Bl.current=r,null!==Tl)throw Error(i(261));return Dl=null,kl=0,Rl}function mc(){for(;null!==Tl;)vc(Tl)}function yc(){for(;null!==Tl&&!We();)vc(Tl)}function vc(e){var t=El(e.alternate,e,Ql);e.memoizedProps=e.pendingProps,null===t?bc(e):Tl=t,wl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ys(n,t,Ql)))return void(Tl=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Rl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Rl&&(Rl=5)}function Cc(e,t,n){var r=vt,o=_l.transition;try{_l.transition=null,vt=1,function(e,t,n,r){do{Ic()}while(null!==Xl);if(0!==(6&Sl))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===Dl&&(Tl=Dl=null,kl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Dc(tt,(function(){return Ic(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=_l.transition,_l.transition=null;var s=vt;vt=1;var l=Sl;Sl|=4,wl.current=null,function(e,t){if(eo=Ht,fr(e=Ar())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(C){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,A=e,f=null;t:for(;;){for(var p;A!==n||0!==o&&3!==A.nodeType||(l=s+o),A!==a||0!==r&&3!==A.nodeType||(c=s+r),3===A.nodeType&&(s+=A.nodeValue.length),null!==(p=A.firstChild);)f=A,A=p;for(;;){if(A===e)break t;if(f===n&&++u===o&&(l=s),f===a&&++d===r&&(c=s),null!==(p=A.nextSibling))break;f=(A=f).parentNode}A=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Ht=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var h=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==h){var g=h.memoizedProps,m=h.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(C){xc(t,t.return,C)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}h=tl,tl=!1}(e,n),gl(n,e),pr(to),Ht=!!eo,to=eo=null,e.current=n,yl(n,e,o),Ke(),Sl=l,vt=s,_l.transition=a}else e.current=n;if(Yl&&(Yl=!1,Xl=e,Wl=o),a=e.pendingLanes,0===a&&(ql=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&Wl)&&0!==e.tag&&Ic(),a=e.pendingLanes,0!==(1&a)?e===Jl?Kl++:(Kl=0,Jl=e):Kl=0,zo()}(e,t,n,r)}finally{_l.transition=o,vt=r}return null}function Ic(){if(null!==Xl){var e=bt(Wl),t=_l.transition,n=vt;try{if(_l.transition=null,vt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Wl=0,0!==(6&Sl))throw Error(i(331));var o=Sl;for(Sl|=4,Zs=e.current;null!==Zs;){var a=Zs,s=a.child;if(0!==(16&Zs.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zs=u;null!==Zs;){var d=Zs;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var A=d.child;if(null!==A)A.return=d,Zs=A;else for(;null!==Zs;){var f=(d=Zs).sibling,p=d.return;if(il(d),d===u){Zs=null;break}if(null!==f){f.return=p,Zs=f;break}Zs=p}}}var h=a.alternate;if(null!==h){var g=h.child;if(null!==g){h.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}Zs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(a=Zs).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Zs=y;break e}Zs=a.return}}var v=e.current;for(Zs=v;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=v;null!==Zs;){if(0!==(2048&(l=Zs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(I){xc(l,l.return,I)}if(l===s){Zs=null;break e}var C=l.sibling;if(null!==C){C.return=l.return,Zs=C;break e}Zs=l.return}}if(Sl=o,zo(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(I){}r=!0}return r}finally{vt=n,_l.transition=t}}return!1}function Ec(e,t,n){e=Ui(e,t=fs(0,t=cs(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function xc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Ui(t,e=ps(t,e=cs(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Bc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Dl===e&&(kl&n)===n&&(4===Rl||3===Rl&&(130023424&kl)===kl&&500>Je()-Gl?Ac(e,0):Nl|=n),rc(e,t)}function wc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Pi(e,t))&&(mt(e,t,n),rc(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),wc(e,n)}function Sc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),wc(e,n)}function Dc(e,t){return Ye(e,t)}function Tc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kc(e,t,n,r){return new Tc(e,t,n,r)}function Qc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=kc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,o,a){var s=2;if(r=e,"function"===typeof e)Qc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Pc(n.children,o,a,t);case x:s=8,o|=8;break;case B:return(e=kc(12,n,t,2|o)).elementType=B,e.lanes=a,e;case D:return(e=kc(13,n,t,o)).elementType=D,e.lanes=a,e;case T:return(e=kc(19,n,t,o)).elementType=T,e.lanes=a,e;case M:return Oc(n,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:s=10;break e;case _:s=9;break e;case S:s=11;break e;case k:s=14;break e;case Q:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=kc(s,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Pc(e,t,n,r){return(e=kc(7,e,r,t)).lanes=n,e}function Oc(e,t,n,r){return(e=kc(22,e,r,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=kc(6,e,null,t)).lanes=n,e}function Nc(e,t,n){return(t=kc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,o,i,a,s,l){return e=new Lc(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=kc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fi(i),e}function Gc(e){if(!e)return So;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Mo(n))return Oo(e,n,t)}return t}function jc(e,t,n,r,o,i,a,s,l){return(e=Uc(n,r,!0,e,0,i,0,s,l)).context=Gc(null),n=e.current,(i=Li(r=ec(),o=tc(n))).callback=void 0!==t&&null!==t?t:null,Ui(n,i,o),e.current.lanes=o,mt(e,o,r),rc(e,r),e}function zc(e,t,n,r){var o=t.current,i=ec(),a=tc(o);return n=Gc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Li(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ui(o,t,a))&&(nc(e,o,a,i),Gi(e,o,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||To.current)vs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vs=!1,function(e,t,n){switch(t.tag){case 3:Ds(t),pi();break;case 5:Zi(t);break;case 1:Mo(t.type)&&Fo(t);break;case 4:Ki(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;_o(Ei,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_o(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(_o(ea,1&ea.current),null!==(e=Hs(e,t,n))?e.sibling:null);_o(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return js(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),_o(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,xs(e,t,n)}return Hs(e,t,n)}(e,t,n);vs=0!==(131072&e.flags)}else vs=!1,ii&&0!==(1048576&t.flags)&&ei(t,Yo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zs(e,t),e=t.pendingProps;var o=Qo(t,Do.current);Ti(t,n),o=ga(null,t,r,e,o,n);var a=ma();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mo(r)?(a=!0,Fo(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Fi(t),o.updater=os,t.stateNode=o,o._reactInternals=t,ls(t,r,e,n),t=Ss(null,t,r,!0,a,n)):(t.tag=0,ii&&a&&ti(t),bs(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zs(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Qc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===S)return 11;if(e===k)return 14}return 2}(r),e=ns(r,e),o){case 0:t=ws(null,t,r,e,n);break e;case 1:t=_s(null,t,r,e,n);break e;case 11:t=Cs(null,t,r,e,n);break e;case 14:t=Is(null,t,r,ns(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,ws(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 1:return r=t.type,o=t.pendingProps,_s(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 3:e:{if(Ds(t),null===e)throw Error(i(387));r=t.pendingProps,o=(a=t.memoizedState).element,Ni(e,t),zi(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ts(e,t,r,n,o=cs(Error(i(423)),t));break e}if(r!==o){t=Ts(e,t,r,n,o=cs(Error(i(424)),t));break e}for(oi=co(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,ai=null,n=Ii(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===o){t=Hs(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return Zi(t),null===e&&ui(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==a&&no(r,a)&&(t.flags|=32),Bs(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&ui(t),null;case 13:return Fs(e,t,n);case 4:return Ki(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ci(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Cs(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,_o(Ei,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===o.children&&!To.current){t=Hs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Li(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Di(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Di(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}bs(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ti(t,n),r=r(o=ki(o)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return o=ns(r=t.type,t.pendingProps),Is(e,t,r,o=ns(r.type,o),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ns(r,o),zs(e,t),t.tag=1,Mo(r)?(e=!0,Fo(t)):e=!1,Ti(t,n),as(t,r,o),ls(t,r,o,n),Ss(null,t,r,!0,e,n);case 19:return js(e,t,n);case 22:return xs(e,t,n)}throw Error(i(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Wc(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function $c(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof o){var s=o;o=function(){var e=Hc(a);s.call(e)}}zc(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=Hc(a);i.call(e)}}var a=jc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[ho]=a.current,jr(8===e.nodeType?e.parentNode:e),uc(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=Hc(l);s.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[ho]=l.current,jr(8===e.nodeType?e.parentNode:e),uc((function(){zc(t,l,n,r)})),l}(n,t,e,o,r);return Hc(a)}Wc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));zc(e,t,null,null)},Wc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){zc(null,e,null,null)})),t[ho]=null}},Wc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Ft(e)}},Ct=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Je()),0===(6&Sl)&&(jl=Je()+500,zo()))}break;case 13:uc((function(){var t=Pi(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),qc(e,1)}},It=function(e){if(13===e.tag){var t=Pi(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),n=Pi(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},xt=function(){return vt},Bt=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},Ie=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Io(r);if(!o)throw Error(i(90));Y(r),Z(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Se=cc,De=uc;var eu={usingClientEntryPoint:!1,Events:[bo,Co,Io,we,_e,cc]},tu={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{ot=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Kc(e))throw Error(i(299));var n=!1,r="",o=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,o),e[ho]=t.current,jr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(i(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,a="",s=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=jc(t,null,e,1,null!=n?n:null,o,0,a,s),e[ho]=t.current,jr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Wc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(i(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc((function(){$c(null,null,e,!1,(function(){e._reactRootContainer=null,e[ho]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.H=r.createRoot,r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var b=v.prototype=new y;b.constructor=v,h(b,m.prototype),b.isPureReactComponent=!0;var C=Array.isArray,I=Object.prototype.hasOwnProperty,E={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function B(e,t,r){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)I.call(t,o)&&!x.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:n,type:e,key:a,ref:s,props:i,_owner:E.current}}function w(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function D(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+S(l,0):i,C(a)?(o="",null!=e&&(o=e.replace(_,"$&/")+"/"),D(a,t,o,"",(function(e){return e}))):null!=a&&(w(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(_,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",C(e))for(var c=0;c<e.length;c++){var u=i+S(s=e[c],c);l+=D(s,t,o,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=D(s=s.value,t,o,u=i+S(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],o=0;return D(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function k(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var Q={current:null},M={transition:null},R={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:M,ReactCurrentOwner:E};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!w(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=o,t.Profiler=a,t.PureComponent=v,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=h({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=E.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)I.call(t,c)&&!x.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=B,t.createFactory=function(e){var t=B.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=w,t.lazy=function(e){return{$$typeof:A,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return Q.current.useCallback(e,t)},t.useContext=function(e){return Q.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return Q.current.useDeferredValue(e)},t.useEffect=function(e,t){return Q.current.useEffect(e,t)},t.useId=function(){return Q.current.useId()},t.useImperativeHandle=function(e,t,n){return Q.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return Q.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return Q.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return Q.current.useMemo(e,t)},t.useReducer=function(e,t,n){return Q.current.useReducer(e,t,n)},t.useRef=function(e){return Q.current.useRef(e)},t.useState=function(e){return Q.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return Q.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return Q.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,A=null,f=3,p=!1,h=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function C(e){if(g=!1,b(e),!h)if(null!==r(c))h=!0,M(I);else{var t=r(u);null!==t&&R(C,t.startTime-e)}}function I(e,n){h=!1,g&&(g=!1,y(w),w=-1),p=!0;var i=f;try{for(b(n),A=r(c);null!==A&&(!(A.expirationTime>n)||e&&!D());){var a=A.callback;if("function"===typeof a){A.callback=null,f=A.priorityLevel;var s=a(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?A.callback=s:A===r(c)&&o(c),b(n)}else o(c);A=r(c)}if(null!==A)var l=!0;else{var d=r(u);null!==d&&R(C,d.startTime-n),l=!1}return l}finally{A=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,x=!1,B=null,w=-1,_=5,S=-1;function D(){return!(t.unstable_now()-S<_)}function T(){if(null!==B){var e=t.unstable_now();S=e;var n=!0;try{n=B(!0,e)}finally{n?E():(x=!1,B=null)}}else x=!1}if("function"===typeof v)E=function(){v(T)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,Q=k.port2;k.port1.onmessage=T,E=function(){Q.postMessage(null)}}else E=function(){m(T,0)};function M(e){B=e,x||(x=!0,E())}function R(e,n){w=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||p||(h=!0,M(I))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(y(w),w=-1):g=!0,R(C,i-a))):(e.sortIndex=s,n(c,e),h||p||(h=!0,M(I))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},222:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(403));t.default=function(e,t){var n=null;if(!e||"string"!==typeof e)return n;var r=(0,o.default)(e),i="function"===typeof t;return r.forEach((function(e){if("declaration"===e.type){var r=e.property,o=e.value;i?t(r,o,e):o&&((n=n||{})[r]=o)}})),n}},4:e=>{e.exports=XMLHttpRequest},261:(e,t,n)=>{e.exports=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){return o(t[a][1][e]||e)}),c,c.exports,e,t,n,r)}return n[a].exports}for(var i=void 0,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";var r=e("./utils"),o=e("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,o,a,s,l,c,u=[],d=0,A=e.length,f=A,p="string"!==r.getTypeOf(e);d<e.length;)f=A-d,o=p?(t=e[d++],n=d<A?e[d++]:0,d<A?e[d++]:0):(t=e.charCodeAt(d++),n=d<A?e.charCodeAt(d++):0,d<A?e.charCodeAt(d++):0),a=t>>2,s=(3&t)<<4|n>>4,l=1<f?(15&n)<<2|o>>6:64,c=2<f?63&o:64,u.push(i.charAt(a)+i.charAt(s)+i.charAt(l)+i.charAt(c));return u.join("")},n.decode=function(e){var t,n,r,a,s,l,c=0,u=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var A,f=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===i.charAt(64)&&f--,e.charAt(e.length-2)===i.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(A=o.uint8array?new Uint8Array(0|f):new Array(0|f);c<e.length;)t=i.indexOf(e.charAt(c++))<<2|(a=i.indexOf(e.charAt(c++)))>>4,n=(15&a)<<4|(s=i.indexOf(e.charAt(c++)))>>2,r=(3&s)<<6|(l=i.indexOf(e.charAt(c++))),A[u++]=t,64!==s&&(A[u++]=n),64!==l&&(A[u++]=r);return A}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),o=e("./stream/DataWorker"),i=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function s(e,t,n,r,o){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=o}s.prototype={getContentWorker:function(){var e=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new i).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),o=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var i=o,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^i[255&(e^t[s])];return~e}(0|t,e,e.length,0):function(e,t,n,r){var i=o,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^i[255&(e^t.charCodeAt(s))];return~e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,o=e("pako"),i=e("./utils"),a=e("./stream/GenericWorker"),s=r?"uint8array":"array";function l(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",i.inherits(l,a),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(i.transformTo(s,e.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function o(e,t,n,o,a,u){var d,A,f=e.file,p=e.compression,h=u!==s.utf8encode,g=i.transformTo("string",u(f.name)),m=i.transformTo("string",s.utf8encode(f.name)),y=f.comment,v=i.transformTo("string",u(y)),b=i.transformTo("string",s.utf8encode(y)),C=m.length!==f.name.length,I=b.length!==y.length,E="",x="",B="",w=f.dir,_=f.date,S={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(S.crc32=e.crc32,S.compressedSize=e.compressedSize,S.uncompressedSize=e.uncompressedSize);var D=0;t&&(D|=8),h||!C&&!I||(D|=2048);var T=0,k=0;w&&(T|=16),"UNIX"===a?(k=798,T|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(f.unixPermissions,w)):(k=20,T|=function(e){return 63&(e||0)}(f.dosPermissions)),d=_.getUTCHours(),d<<=6,d|=_.getUTCMinutes(),d<<=5,d|=_.getUTCSeconds()/2,A=_.getUTCFullYear()-1980,A<<=4,A|=_.getUTCMonth()+1,A<<=5,A|=_.getUTCDate(),C&&(x=r(1,1)+r(l(g),4)+m,E+="up"+r(x.length,2)+x),I&&(B=r(1,1)+r(l(v),4)+b,E+="uc"+r(B.length,2)+B);var Q="";return Q+="\n\0",Q+=r(D,2),Q+=p.magic,Q+=r(d,2),Q+=r(A,2),Q+=r(S.crc32,4),Q+=r(S.compressedSize,4),Q+=r(S.uncompressedSize,4),Q+=r(g.length,2),Q+=r(E.length,2),{fileRecord:c.LOCAL_FILE_HEADER+Q+g+E,dirRecord:c.CENTRAL_FILE_HEADER+r(k,2)+Q+r(v.length,2)+"\0\0\0\0"+r(T,4)+r(o,4)+g+E+v}}var i=e("../utils"),a=e("../stream/GenericWorker"),s=e("../utf8"),l=e("../crc32"),c=e("../signature");function u(e,t,n,r){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(u,a),u.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=o(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=o(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return c.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,o=function(e,t,n,o,a){var s=i.transformTo("string",a(o));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(s.length,2)+s}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:o,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},u.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},u.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),o=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var i=new o(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,n){a++;var o=function(e,t){var n=e||t,o=r[n];if(!o)throw new Error(n+" is not a valid compression method !");return o}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(o,s).withStreamInfo("file",{name:e,dir:l,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(i)})),i.entriesCount=a}catch(e){i.error(e)}return i}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),o=e("./external"),i=e("./utf8"),a=e("./zipEntries"),s=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new o.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),l.isNode&&l.isStream(e)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new a(t);return n.load(e),n})).then((function(e){var n=[o.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var i=0;i<r.length;i++)n.push(c(r[i]));return o.Promise.all(n)})).then((function(e){for(var o=e.shift(),i=o.files,a=0;a<i.length;a++){var s=i[a],l=s.fileNameStr,c=r.resolve(s.fileNameStr);n.file(c,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),s.dir||(n.file(c).unsafeOriginalName=l)}return o.zipComment.length&&(n.comment=o.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),o=e("../stream/GenericWorker");function i(e,t){o.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(i,o),i.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},i.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function o(e,t,n){r.call(this,t),this._helper=e;var o=this;e.on("data",(function(e,t){o.push(e)||o._helper.pause(),n&&n(t)})).on("error",(function(e){o.emit("error",e)})).on("end",(function(){o.push(null)}))}e("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},t.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,o=i.getTypeOf(t),s=i.extend(n||{},l);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=h(e)),s.createFolders&&(r=p(e))&&g.call(this,r,!0);var d="string"===o&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!d),(t instanceof c&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",o="string");var m=null;m=t instanceof c||t instanceof a?t:A.isNode&&A.isStream(t)?new f(e,t):i.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var y=new u(e,m,s);this.files[e]=y}var o=e("./utf8"),i=e("./utils"),a=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),u=e("./zipObject"),d=e("./generate"),A=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},h=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=h(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function m(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(m(e)){var o=e;return this.filter((function(e,t){return!t.dir&&o.test(e)}))}var i=this.files[this.root+e];return i&&!i.dir?i:null},folder:function(e){if(!e)return this;if(m(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=g.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=i.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");i.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=d.generateWorker(this,n,r)}catch(e){(t=new a("error")).error(e)}return new s(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function o(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(o,r),o.prototype.byteAt=function(e){return this.data[this.zero+e]},o.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),o=e.charCodeAt(3),i=this.length-4;0<=i;--i)if(this.data[i]===t&&this.data[i+1]===n&&this.data[i+2]===r&&this.data[i+3]===o)return i-this.zero;return-1},o.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),o=e.charCodeAt(3),i=this.readData(4);return t===i[0]&&n===i[1]&&r===i[2]&&o===i[3]},o.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function o(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=o},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function o(e){r.call(this,e)}e("../utils").inherits(o,r),o.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function o(e){r.call(this,e)}e("../utils").inherits(o,r),o.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},o.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},o.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},o.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function o(e){r.call(this,e)}e("../utils").inherits(o,r),o.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),o=e("../support"),i=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||o.uint8array?"nodebuffer"===t?new s(e):o.uint8array?new l(r.transformTo("uint8array",e)):new i(r.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK\x03\x04",n.CENTRAL_FILE_HEADER="PK\x01\x02",n.CENTRAL_DIRECTORY_END="PK\x05\x06",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),o=e("../utils");function i(e){r.call(this,"ConvertWorker to "+e),this.destType=e}o.inherits(i,r),i.prototype.processChunk=function(e){this.push({data:o.transformTo(this.destType,e.data),meta:e.meta})},t.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),o=e("../crc32");function i(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(i,r),i.prototype.processChunk=function(e){this.streamInfo.crc32=o(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),o=e("./GenericWorker");function i(e){o.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(i,o),i.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}o.prototype.processChunk.call(this,e)},t.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),o=e("./GenericWorker");function i(e){o.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(i,o),i.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){"use strict";var r=e("../utils"),o=e("./ConvertWorker"),i=e("./GenericWorker"),a=e("../base64"),s=e("../support"),l=e("../external"),c=null;if(s.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function u(e,t){return new l.Promise((function(n,o){var i=[],s=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",(function(e,n){i.push(e),t&&t(n)})).on("error",(function(e){i=[],o(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return a.encode(t);default:return r.transformTo(e,t)}}(l,function(e,t){var n,r=0,o=null,i=0;for(n=0;n<t.length;n++)i+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(o=new Uint8Array(i),n=0;n<t.length;n++)o.set(t[n],r),r+=t[n].length;return o;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(s,i),c);n(e)}catch(e){o(e)}i=[]})).resume()}))}function d(e,t,n){var a=t;switch(t){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=t,this._mimeType=n,r.checkSupport(a),this._worker=e.pipe(new o(a)),e.lock()}catch(e){this._worker=new i("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return u(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){r.delay(t,arguments,n)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(r),n.blob=0===o.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),o=e("./support"),i=e("./nodejsUtils"),a=e("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){a.call(this,"utf-8 decode"),this.leftOver=null}function u(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(e){return o.nodebuffer?i.newBufferFrom(e,"utf-8"):function(e){var t,n,r,i,a,s=e.length,l=0;for(i=0;i<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=o.uint8array?new Uint8Array(l):new Array(l),i=a=0;a<l;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t}(e)},n.utf8decode=function(e){return o.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,o,i,a=e.length,l=new Array(2*a);for(t=n=0;t<a;)if((o=e[t++])<128)l[n++]=o;else if(4<(i=s[o]))l[n++]=65533,t+=i-1;else{for(o&=2===i?31:3===i?15:7;1<i&&t<a;)o=o<<6|63&e[t++],i--;1<i?l[n++]=65533:o<65536?l[n++]=o:(o-=65536,l[n++]=55296|o>>10&1023,l[n++]=56320|1023&o)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(e=r.transformTo(o.uint8array?"uint8array":"array",e))},r.inherits(c,a),c.prototype.processChunk=function(e){var t=r.transformTo(o.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var i=t;(t=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),t.set(i,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}(t),l=t;a!==t.length&&(o.uint8array?(l=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(l=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:n.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(u,a),u.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),o=e("./base64"),i=e("./nodejsUtils"),a=e("./external");function s(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(t,r){n.checkSupport("blob");try{return new Blob([t],{type:r})}catch(e){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return o.append(t),o.getBlob(r)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,n){var r=[],o=0,i=e.length;if(i<=n)return String.fromCharCode.apply(null,e);for(;o<i;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(o,Math.min(o+n,i)))):r.push(String.fromCharCode.apply(null,e.subarray(o,Math.min(o+n,i)))),o+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,i.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var t=65536,r=n.getTypeOf(e),o=!0;if("uint8array"===r?o=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(o=c.applyCanBeUsed.nodebuffer),o)for(;1<t;)try{return c.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function d(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=u;var A={};A.string={string:s,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return A.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,i.allocBuffer(e.length))}},A.array={string:u,array:s,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(e)}},A.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:s,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(new Uint8Array(e))}},A.uint8array={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:s,nodebuffer:function(e){return i.newBufferFrom(e)}},A.nodebuffer={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return A.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:s},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return A[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var o=t[r];"."===o||""===o&&0!==r&&r!==t.length-1||(".."===o?n.pop():n.push(o))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&i.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,i,s,c){return a.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new a.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var u=n.getTypeOf(t);return u?("arraybuffer"===u?t=n.transformTo("uint8array",t):"string"===u&&(c?t=o.decode(t):i&&!0!==s&&(t=function(e){return l(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):a.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),o=e("./utils"),i=e("./signature"),a=e("./zipEntry"),s=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(t)+", expected "+o.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=o.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,i.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),o=e("./utils"),i=e("./compressedObject"),a=e("./crc32"),s=e("./utf8"),l=e("./compressions"),c=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,o=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<o;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(o)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=o.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var i=o.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var o=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),a=e("./utf8"),s=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var i=!this._dataBinary;i&&!r&&(t=t.pipe(new a.Utf8EncodeWorker)),!i&&r&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new o(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof l?this._data:new i(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)r.prototype[c[d]]=u;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(u),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==o&&f(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return i.reject(e,r)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function A(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}var a=p((function(){t(o,r)}));"error"===a.status&&r(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(o);return this.state!==l?d(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){i.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=p(A,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=s,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:i.resolve(new this(o),e)},c.reject=function(e){var t=new this(o);return i.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,l=-1,c=new this(o);++l<n;)u(e[l],l);return c;function u(e,o){t.resolve(e).then((function(e){a[o]=e,++s!==n||r||(r=!0,i.resolve(c,a))}),(function(e){r||(r=!0,i.reject(c,e))}))}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a,s=-1,l=new this(o);++s<n;)a=e[s],t.resolve(a).then((function(e){r||(r=!0,i.resolve(l,e))}),(function(e){r||(r=!0,i.reject(l,e))}));return l}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),o=e("./utils/common"),i=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString,c=0,u=-1,d=0,A=8;function f(e){if(!(this instanceof f))return new f(e);this.options=o.assign({level:u,method:A,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(a[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var p;if(p="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,p))!==c)throw new Error(a[n]);this._dict_set=!0}}function p(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}f.prototype.push=function(e,t){var n,a,s=this.strm,u=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=i.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new o.Buf8(u),s.next_out=0,s.avail_out=u),1!==(n=r.deflate(s,a))&&n!==c)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(i.buf2binstring(o.shrinkBuf(s.output,s.next_out))):this.onData(o.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==a||(this.onEnd(c),!(s.avail_out=0))},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=f,n.deflate=p,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,p(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),o=e("./utils/common"),i=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function A(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}d.prototype.push=function(e,t){var n,s,l,c,d,A,f=this.strm,p=this.options.chunkSize,h=this.options.dictionary,g=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?f.input=i.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new o.Buf8(p),f.next_out=0,f.avail_out=p),(n=r.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&h&&(A="string"==typeof h?i.string2buf(h):"[object ArrayBuffer]"===u.call(h)?new Uint8Array(h):h,n=r.inflateSetDictionary(this.strm,A)),n===a.Z_BUF_ERROR&&!0===g&&(n=a.Z_OK,g=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&n!==a.Z_STREAM_END&&(0!==f.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=i.utf8border(f.output,f.next_out),c=f.next_out-l,d=i.buf2string(f.output,l),f.next_out=c,f.avail_out=p-c,c&&o.arraySet(f.output,f.output,l,c,0),this.onData(d)):this.onData(o.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((0<f.avail_in||0===f.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(f.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=A,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,A(e,t)},n.ungzip=A},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,o){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),o);else for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){var t,n,r,o,i,a;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),t=o=0,n=e.length;t<n;t++)i=e[t],a.set(i,o),o+=i.length;return a}},i={arraySet:function(e,t,n,r,o){for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,i))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),o=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(e,t){if(t<65537&&(e.subarray&&i||!e.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,n.string2buf=function(e){var t,n,o,i,a,s=e.length,l=0;for(i=0;i<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(o=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(o-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),i=a=0;a<l;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(o=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(o-56320),i++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,o=t.length;n<o;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,o,i,s=t||e.length,c=new Array(2*s);for(n=r=0;n<s;)if((o=e[n++])<128)c[r++]=o;else if(4<(i=a[o]))c[r++]=65533,n+=i-1;else{for(o&=2===i?31:3===i?15:7;1<i&&n<s;)o=o<<6|63&e[n++],i--;1<i?c[r++]=65533:o<65536?c[r++]=o:(o-=65536,c[r++]=55296|o>>10&1023,c[r++]=56320|1023&o)}return l(c,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var o=65535&e,i=e>>>16&65535,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;i=i+(o=o+t[r++]|0)|0,--a;);o%=65521,i%=65521}return o|i<<16}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,o){var i=r,a=o+n;e^=-1;for(var s=o;s<a;s++)e=e>>>8^i[255&(e^t[s])];return~e}},{}],46:[function(e,t,n){"use strict";var r,o=e("../utils/common"),i=e("./trees"),a=e("./adler32"),s=e("./crc32"),l=e("./messages"),c=0,u=4,d=0,A=-2,f=-1,p=4,h=2,g=8,m=9,y=286,v=30,b=19,C=2*y+1,I=15,E=3,x=258,B=x+E+1,w=42,_=113,S=1,D=2,T=3,k=4;function Q(e,t){return e.msg=l[t],t}function M(e){return(e<<1)-(4<e?9:0)}function R(e){for(var t=e.length;0<=--t;)e[t]=0}function P(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(o.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function O(e,t){i._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,P(e.strm)}function F(e,t){e.pending_buf[e.pending++]=t}function N(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function L(e,t){var n,r,o=e.max_chain_length,i=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-B?e.strstart-(e.w_size-B):0,c=e.window,u=e.w_mask,d=e.prev,A=e.strstart+x,f=c[i+a-1],p=c[i+a];e.prev_length>=e.good_match&&(o>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(n=t)+a]===p&&c[n+a-1]===f&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<A);if(r=x-(A-i),i=A-x,a<r){if(e.match_start=t,s<=(a=r))break;f=c[i+a-1],p=c[i+a]}}}while((t=d[t&u])>l&&0!=--o);return a<=e.lookahead?a:e.lookahead}function U(e){var t,n,r,i,l,c,u,d,A,f,p=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-B)){for(o.arraySet(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,t=n=e.hash_size;r=e.head[--t],e.head[t]=p<=r?r-p:0,--n;);for(t=n=p;r=e.prev[--t],e.prev[t]=p<=r?r-p:0,--n;);i+=p}if(0===e.strm.avail_in)break;if(c=e.strm,u=e.window,d=e.strstart+e.lookahead,f=void 0,(A=i)<(f=c.avail_in)&&(f=A),n=0===f?0:(c.avail_in-=f,o.arraySet(u,c.input,c.next_in,f,d),1===c.state.wrap?c.adler=a(c.adler,u,f,d):2===c.state.wrap&&(c.adler=s(c.adler,u,f,d)),c.next_in+=f,c.total_in+=f,f),e.lookahead+=n,e.lookahead+e.insert>=E)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+E-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<E)););}while(e.lookahead<B&&0!==e.strm.avail_in)}function G(e,t){for(var n,r;;){if(e.lookahead<B){if(U(e),e.lookahead<B&&t===c)return S;if(0===e.lookahead)break}if(n=0,e.lookahead>=E&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-B&&(e.match_length=L(e,n)),e.match_length>=E)if(r=i._tr_tally(e,e.strstart-e.match_start,e.match_length-E),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=E){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(O(e,!1),0===e.strm.avail_out))return S}return e.insert=e.strstart<E-1?e.strstart:E-1,t===u?(O(e,!0),0===e.strm.avail_out?T:k):e.last_lit&&(O(e,!1),0===e.strm.avail_out)?S:D}function j(e,t){for(var n,r,o;;){if(e.lookahead<B){if(U(e),e.lookahead<B&&t===c)return S;if(0===e.lookahead)break}if(n=0,e.lookahead>=E&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=E-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-B&&(e.match_length=L(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===E&&4096<e.strstart-e.match_start)&&(e.match_length=E-1)),e.prev_length>=E&&e.match_length<=e.prev_length){for(o=e.strstart+e.lookahead-E,r=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-E),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=E-1,e.strstart++,r&&(O(e,!1),0===e.strm.avail_out))return S}else if(e.match_available){if((r=i._tr_tally(e,0,e.window[e.strstart-1]))&&O(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return S}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<E-1?e.strstart:E-1,t===u?(O(e,!0),0===e.strm.avail_out?T:k):e.last_lit&&(O(e,!1),0===e.strm.avail_out)?S:D}function z(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*C),this.dyn_dtree=new o.Buf16(2*(2*v+1)),this.bl_tree=new o.Buf16(2*(2*b+1)),R(this.dyn_ltree),R(this.dyn_dtree),R(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(I+1),this.heap=new o.Buf16(2*y+1),R(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*y+1),R(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function V(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=h,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?w:_,e.adler=2===t.wrap?0:1,t.last_flush=c,i._tr_init(t),d):Q(e,A)}function q(e){var t=V(e);return t===d&&function(e){e.window_size=2*e.w_size,R(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=E-1,e.match_available=0,e.ins_h=0}(e.state),t}function Y(e,t,n,r,i,a){if(!e)return A;var s=1;if(t===f&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),i<1||m<i||n!==g||r<8||15<r||t<0||9<t||a<0||p<a)return Q(e,A);8===r&&(r=9);var l=new H;return(e.state=l).strm=e,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+E-1)/E),l.window=new o.Buf8(2*l.w_size),l.head=new o.Buf16(l.hash_size),l.prev=new o.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new o.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=n,q(e)}r=[new z(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(U(e),0===e.lookahead&&t===c)return S;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,O(e,!1),0===e.strm.avail_out))return S;if(e.strstart-e.block_start>=e.w_size-B&&(O(e,!1),0===e.strm.avail_out))return S}return e.insert=0,t===u?(O(e,!0),0===e.strm.avail_out?T:k):(e.strstart>e.block_start&&(O(e,!1),e.strm.avail_out),S)})),new z(4,4,8,4,G),new z(4,5,16,8,G),new z(4,6,32,32,G),new z(4,4,16,16,j),new z(8,16,32,32,j),new z(8,16,128,128,j),new z(8,32,128,256,j),new z(32,128,258,1024,j),new z(32,258,258,4096,j)],n.deflateInit=function(e,t){return Y(e,t,g,15,8,0)},n.deflateInit2=Y,n.deflateReset=q,n.deflateResetKeep=V,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?A:(e.state.gzhead=t,d):A},n.deflate=function(e,t){var n,o,a,l;if(!e||!e.state||5<t||t<0)return e?Q(e,A):A;if(o=e.state,!e.output||!e.input&&0!==e.avail_in||666===o.status&&t!==u)return Q(e,0===e.avail_out?-5:A);if(o.strm=e,n=o.last_flush,o.last_flush=t,o.status===w)if(2===o.wrap)e.adler=0,F(o,31),F(o,139),F(o,8),o.gzhead?(F(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),F(o,255&o.gzhead.time),F(o,o.gzhead.time>>8&255),F(o,o.gzhead.time>>16&255),F(o,o.gzhead.time>>24&255),F(o,9===o.level?2:2<=o.strategy||o.level<2?4:0),F(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(F(o,255&o.gzhead.extra.length),F(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=s(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(F(o,0),F(o,0),F(o,0),F(o,0),F(o,0),F(o,9===o.level?2:2<=o.strategy||o.level<2?4:0),F(o,3),o.status=_);else{var f=g+(o.w_bits-8<<4)<<8;f|=(2<=o.strategy||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(f|=32),f+=31-f%31,o.status=_,N(o,f),0!==o.strstart&&(N(o,e.adler>>>16),N(o,65535&e.adler)),e.adler=1}if(69===o.status)if(o.gzhead.extra){for(a=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),P(e),a=o.pending,o.pending!==o.pending_buf_size));)F(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),P(e),a=o.pending,o.pending===o.pending_buf_size)){l=1;break}l=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,F(o,l)}while(0!==l);o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),0===l&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),P(e),a=o.pending,o.pending===o.pending_buf_size)){l=1;break}l=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,F(o,l)}while(0!==l);o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),0===l&&(o.status=103)}else o.status=103;if(103===o.status&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&P(e),o.pending+2<=o.pending_buf_size&&(F(o,255&e.adler),F(o,e.adler>>8&255),e.adler=0,o.status=_)):o.status=_),0!==o.pending){if(P(e),0===e.avail_out)return o.last_flush=-1,d}else if(0===e.avail_in&&M(t)<=M(n)&&t!==u)return Q(e,-5);if(666===o.status&&0!==e.avail_in)return Q(e,-5);if(0!==e.avail_in||0!==o.lookahead||t!==c&&666!==o.status){var p=2===o.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(U(e),0===e.lookahead)){if(t===c)return S;break}if(e.match_length=0,n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(O(e,!1),0===e.strm.avail_out))return S}return e.insert=0,t===u?(O(e,!0),0===e.strm.avail_out?T:k):e.last_lit&&(O(e,!1),0===e.strm.avail_out)?S:D}(o,t):3===o.strategy?function(e,t){for(var n,r,o,a,s=e.window;;){if(e.lookahead<=x){if(U(e),e.lookahead<=x&&t===c)return S;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=E&&0<e.strstart&&(r=s[o=e.strstart-1])===s[++o]&&r===s[++o]&&r===s[++o]){a=e.strstart+x;do{}while(r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&o<a);e.match_length=x-(a-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=E?(n=i._tr_tally(e,1,e.match_length-E),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(O(e,!1),0===e.strm.avail_out))return S}return e.insert=0,t===u?(O(e,!0),0===e.strm.avail_out?T:k):e.last_lit&&(O(e,!1),0===e.strm.avail_out)?S:D}(o,t):r[o.level].func(o,t);if(p!==T&&p!==k||(o.status=666),p===S||p===T)return 0===e.avail_out&&(o.last_flush=-1),d;if(p===D&&(1===t?i._tr_align(o):5!==t&&(i._tr_stored_block(o,0,0,!1),3===t&&(R(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),P(e),0===e.avail_out))return o.last_flush=-1,d}return t!==u?d:o.wrap<=0?1:(2===o.wrap?(F(o,255&e.adler),F(o,e.adler>>8&255),F(o,e.adler>>16&255),F(o,e.adler>>24&255),F(o,255&e.total_in),F(o,e.total_in>>8&255),F(o,e.total_in>>16&255),F(o,e.total_in>>24&255)):(N(o,e.adler>>>16),N(o,65535&e.adler)),P(e),0<o.wrap&&(o.wrap=-o.wrap),0!==o.pending?d:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==w&&69!==t&&73!==t&&91!==t&&103!==t&&t!==_&&666!==t?Q(e,A):(e.state=null,t===_?Q(e,-3):d):A},n.deflateSetDictionary=function(e,t){var n,r,i,s,l,c,u,f,p=t.length;if(!e||!e.state)return A;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==w||n.lookahead)return A;for(1===s&&(e.adler=a(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===s&&(R(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new o.Buf8(n.w_size),o.arraySet(f,t,p-n.w_size,n.w_size,0),t=f,p=n.w_size),l=e.avail_in,c=e.next_in,u=e.input,e.avail_in=p,e.next_in=0,e.input=t,U(n);n.lookahead>=E;){for(r=n.strstart,i=n.lookahead-(E-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+E-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--i;);n.strstart=r,n.lookahead=E-1,U(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=E-1,n.match_available=0,e.next_in=c,e.input=u,e.avail_in=l,n.wrap=s,d},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,o,i,a,s,l,c,u,d,A,f,p,h,g,m,y,v,b,C,I,E,x,B,w;n=e.state,r=e.next_in,B=e.input,o=r+(e.avail_in-5),i=e.next_out,w=e.output,a=i-(t-e.avail_out),s=i+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,A=n.window,f=n.hold,p=n.bits,h=n.lencode,g=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{p<15&&(f+=B[r++]<<p,p+=8,f+=B[r++]<<p,p+=8),v=h[f&m];t:for(;;){if(f>>>=b=v>>>24,p-=b,0===(b=v>>>16&255))w[i++]=65535&v;else{if(!(16&b)){if(0==(64&b)){v=h[(65535&v)+(f&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}C=65535&v,(b&=15)&&(p<b&&(f+=B[r++]<<p,p+=8),C+=f&(1<<b)-1,f>>>=b,p-=b),p<15&&(f+=B[r++]<<p,p+=8,f+=B[r++]<<p,p+=8),v=g[f&y];n:for(;;){if(f>>>=b=v>>>24,p-=b,!(16&(b=v>>>16&255))){if(0==(64&b)){v=g[(65535&v)+(f&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(I=65535&v,p<(b&=15)&&(f+=B[r++]<<p,(p+=8)<b&&(f+=B[r++]<<p,p+=8)),l<(I+=f&(1<<b)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=b,p-=b,(b=i-a)<I){if(u<(b=I-b)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(x=A,(E=0)===d){if(E+=c-b,b<C){for(C-=b;w[i++]=A[E++],--b;);E=i-I,x=w}}else if(d<b){if(E+=c+d-b,(b-=d)<C){for(C-=b;w[i++]=A[E++],--b;);if(E=0,d<C){for(C-=b=d;w[i++]=A[E++],--b;);E=i-I,x=w}}}else if(E+=d-b,b<C){for(C-=b;w[i++]=A[E++],--b;);E=i-I,x=w}for(;2<C;)w[i++]=x[E++],w[i++]=x[E++],w[i++]=x[E++],C-=3;C&&(w[i++]=x[E++],1<C&&(w[i++]=x[E++]))}else{for(E=i-I;w[i++]=w[E++],w[i++]=w[E++],w[i++]=w[E++],2<(C-=3););C&&(w[i++]=w[E++],1<C&&(w[i++]=w[E++]))}break}}break}}while(r<o&&i<s);r-=C=p>>3,f&=(1<<(p-=C<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<o?o-r+5:5-(r-o),e.avail_out=i<s?s-i+257:257-(i-s),n.hold=f,n.bits=p}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),o=e("./adler32"),i=e("./crc32"),a=e("./inffast"),s=e("./inftrees"),l=1,c=2,u=0,d=-2,A=1,f=852,p=592;function h(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function m(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=A,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(f),t.distcode=t.distdyn=new r.Buf32(p),t.sane=1,t.back=-1,u):d}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,m(e)):d}function v(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?d:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,y(e))):d}function b(e,t){var n,r;return e?(r=new g,(e.state=r).window=null,(n=v(e,t))!==u&&(e.state=null),n):d}var C,I,E=!0;function x(e){if(E){var t;for(C=new r.Buf32(512),I=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(l,e.lens,0,288,C,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(c,e.lens,0,32,I,0,e.work,{bits:5}),E=!1}e.lencode=C,e.lenbits=9,e.distcode=I,e.distbits=5}function B(e,t,n,o){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),o>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(o<(i=a.wsize-a.wnext)&&(i=o),r.arraySet(a.window,t,n-o,i,a.wnext),(o-=i)?(r.arraySet(a.window,t,n-o,o,0),a.wnext=o,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}n.inflateReset=y,n.inflateReset2=v,n.inflateResetKeep=m,n.inflateInit=function(e){return b(e,15)},n.inflateInit2=b,n.inflate=function(e,t){var n,f,p,g,m,y,v,b,C,I,E,w,_,S,D,T,k,Q,M,R,P,O,F,N,L=0,U=new r.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;12===(n=e.state).mode&&(n.mode=13),m=e.next_out,p=e.output,v=e.avail_out,g=e.next_in,f=e.input,y=e.avail_in,b=n.hold,C=n.bits,I=y,E=v,O=u;e:for(;;)switch(n.mode){case A:if(0===n.wrap){n.mode=13;break}for(;C<16;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}if(2&n.wrap&&35615===b){U[n.check=0]=255&b,U[1]=b>>>8&255,n.check=i(n.check,U,2,0),C=b=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&b)<<8)+(b>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&b)){e.msg="unknown compression method",n.mode=30;break}if(C-=4,P=8+(15&(b>>>=4)),0===n.wbits)n.wbits=P;else if(P>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<P,e.adler=n.check=1,n.mode=512&b?10:12,C=b=0;break;case 2:for(;C<16;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}if(n.flags=b,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=b>>8&1),512&n.flags&&(U[0]=255&b,U[1]=b>>>8&255,n.check=i(n.check,U,2,0)),C=b=0,n.mode=3;case 3:for(;C<32;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}n.head&&(n.head.time=b),512&n.flags&&(U[0]=255&b,U[1]=b>>>8&255,U[2]=b>>>16&255,U[3]=b>>>24&255,n.check=i(n.check,U,4,0)),C=b=0,n.mode=4;case 4:for(;C<16;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}n.head&&(n.head.xflags=255&b,n.head.os=b>>8),512&n.flags&&(U[0]=255&b,U[1]=b>>>8&255,n.check=i(n.check,U,2,0)),C=b=0,n.mode=5;case 5:if(1024&n.flags){for(;C<16;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}n.length=b,n.head&&(n.head.extra_len=b),512&n.flags&&(U[0]=255&b,U[1]=b>>>8&255,n.check=i(n.check,U,2,0)),C=b=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(y<(w=n.length)&&(w=y),w&&(n.head&&(P=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,f,g,w,P)),512&n.flags&&(n.check=i(n.check,f,w,g)),y-=w,g+=w,n.length-=w),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===y)break e;for(w=0;P=f[g+w++],n.head&&P&&n.length<65536&&(n.head.name+=String.fromCharCode(P)),P&&w<y;);if(512&n.flags&&(n.check=i(n.check,f,w,g)),y-=w,g+=w,P)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===y)break e;for(w=0;P=f[g+w++],n.head&&P&&n.length<65536&&(n.head.comment+=String.fromCharCode(P)),P&&w<y;);if(512&n.flags&&(n.check=i(n.check,f,w,g)),y-=w,g+=w,P)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;C<16;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}if(b!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}C=b=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;C<32;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}e.adler=n.check=h(b),C=b=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=m,e.avail_out=v,e.next_in=g,e.avail_in=y,n.hold=b,n.bits=C,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){b>>>=7&C,C-=7&C,n.mode=27;break}for(;C<3;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}switch(n.last=1&b,C-=1,3&(b>>>=1)){case 0:n.mode=14;break;case 1:if(x(n),n.mode=20,6!==t)break;b>>>=2,C-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}b>>>=2,C-=2;break;case 14:for(b>>>=7&C,C-=7&C;C<32;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}if((65535&b)!=(b>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&b,C=b=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(w=n.length){if(y<w&&(w=y),v<w&&(w=v),0===w)break e;r.arraySet(p,f,g,w,m),y-=w,g+=w,v-=w,m+=w,n.length-=w;break}n.mode=12;break;case 17:for(;C<14;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}if(n.nlen=257+(31&b),b>>>=5,C-=5,n.ndist=1+(31&b),b>>>=5,C-=5,n.ncode=4+(15&b),b>>>=4,C-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;C<3;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}n.lens[G[n.have++]]=7&b,b>>>=3,C-=3}for(;n.have<19;)n.lens[G[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,F={bits:n.lenbits},O=s(0,n.lens,0,19,n.lencode,0,n.work,F),n.lenbits=F.bits,O){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;T=(L=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,k=65535&L,!((D=L>>>24)<=C);){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}if(k<16)b>>>=D,C-=D,n.lens[n.have++]=k;else{if(16===k){for(N=D+2;C<N;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}if(b>>>=D,C-=D,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}P=n.lens[n.have-1],w=3+(3&b),b>>>=2,C-=2}else if(17===k){for(N=D+3;C<N;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}C-=D,P=0,w=3+(7&(b>>>=D)),b>>>=3,C-=3}else{for(N=D+7;C<N;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}C-=D,P=0,w=11+(127&(b>>>=D)),b>>>=7,C-=7}if(n.have+w>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;w--;)n.lens[n.have++]=P}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,F={bits:n.lenbits},O=s(l,n.lens,0,n.nlen,n.lencode,0,n.work,F),n.lenbits=F.bits,O){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,F={bits:n.distbits},O=s(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,F),n.distbits=F.bits,O){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=y&&258<=v){e.next_out=m,e.avail_out=v,e.next_in=g,e.avail_in=y,n.hold=b,n.bits=C,a(e,E),m=e.next_out,p=e.output,v=e.avail_out,g=e.next_in,f=e.input,y=e.avail_in,b=n.hold,C=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;T=(L=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,k=65535&L,!((D=L>>>24)<=C);){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}if(T&&0==(240&T)){for(Q=D,M=T,R=k;T=(L=n.lencode[R+((b&(1<<Q+M)-1)>>Q)])>>>16&255,k=65535&L,!(Q+(D=L>>>24)<=C);){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}b>>>=Q,C-=Q,n.back+=Q}if(b>>>=D,C-=D,n.back+=D,n.length=k,0===T){n.mode=26;break}if(32&T){n.back=-1,n.mode=12;break}if(64&T){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&T,n.mode=22;case 22:if(n.extra){for(N=n.extra;C<N;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}n.length+=b&(1<<n.extra)-1,b>>>=n.extra,C-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;T=(L=n.distcode[b&(1<<n.distbits)-1])>>>16&255,k=65535&L,!((D=L>>>24)<=C);){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}if(0==(240&T)){for(Q=D,M=T,R=k;T=(L=n.distcode[R+((b&(1<<Q+M)-1)>>Q)])>>>16&255,k=65535&L,!(Q+(D=L>>>24)<=C);){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}b>>>=Q,C-=Q,n.back+=Q}if(b>>>=D,C-=D,n.back+=D,64&T){e.msg="invalid distance code",n.mode=30;break}n.offset=k,n.extra=15&T,n.mode=24;case 24:if(n.extra){for(N=n.extra;C<N;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}n.offset+=b&(1<<n.extra)-1,b>>>=n.extra,C-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===v)break e;if(w=E-v,n.offset>w){if((w=n.offset-w)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}_=w>n.wnext?(w-=n.wnext,n.wsize-w):n.wnext-w,w>n.length&&(w=n.length),S=n.window}else S=p,_=m-n.offset,w=n.length;for(v<w&&(w=v),v-=w,n.length-=w;p[m++]=S[_++],--w;);0===n.length&&(n.mode=21);break;case 26:if(0===v)break e;p[m++]=n.length,v--,n.mode=21;break;case 27:if(n.wrap){for(;C<32;){if(0===y)break e;y--,b|=f[g++]<<C,C+=8}if(E-=v,e.total_out+=E,n.total+=E,E&&(e.adler=n.check=n.flags?i(n.check,p,E,m-E):o(n.check,p,E,m-E)),E=v,(n.flags?b:h(b))!==n.check){e.msg="incorrect data check",n.mode=30;break}C=b=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;C<32;){if(0===y)break e;y--,b+=f[g++]<<C,C+=8}if(b!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}C=b=0}n.mode=29;case 29:O=1;break e;case 30:O=-3;break e;case 31:return-4;default:return d}return e.next_out=m,e.avail_out=v,e.next_in=g,e.avail_in=y,n.hold=b,n.bits=C,(n.wsize||E!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&B(e,e.output,e.next_out,E-e.avail_out)?(n.mode=31,-4):(I-=e.avail_in,E-=e.avail_out,e.total_in+=I,e.total_out+=E,n.total+=E,n.wrap&&E&&(e.adler=n.check=n.flags?i(n.check,p,E,e.next_out-E):o(n.check,p,E,e.next_out-E)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==I&&0===E||4===t)&&O===u&&(O=-5),O)},n.inflateEnd=function(e){if(!e||!e.state)return d;var t=e.state;return t.window&&(t.window=null),e.state=null,u},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?d:((n.head=t).done=!1,u):d},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?d:11===n.mode&&o(1,t,r,0)!==n.check?-3:B(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,u):d},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,c,u,d,A){var f,p,h,g,m,y,v,b,C,I=A.bits,E=0,x=0,B=0,w=0,_=0,S=0,D=0,T=0,k=0,Q=0,M=null,R=0,P=new r.Buf16(16),O=new r.Buf16(16),F=null,N=0;for(E=0;E<=15;E++)P[E]=0;for(x=0;x<l;x++)P[t[n+x]]++;for(_=I,w=15;1<=w&&0===P[w];w--);if(w<_&&(_=w),0===w)return c[u++]=20971520,c[u++]=20971520,A.bits=1,0;for(B=1;B<w&&0===P[B];B++);for(_<B&&(_=B),E=T=1;E<=15;E++)if(T<<=1,(T-=P[E])<0)return-1;if(0<T&&(0===e||1!==w))return-1;for(O[1]=0,E=1;E<15;E++)O[E+1]=O[E]+P[E];for(x=0;x<l;x++)0!==t[n+x]&&(d[O[t[n+x]]++]=x);if(y=0===e?(M=F=d,19):1===e?(M=o,R-=257,F=i,N-=257,256):(M=a,F=s,-1),E=B,m=u,D=x=Q=0,h=-1,g=(k=1<<(S=_))-1,1===e&&852<k||2===e&&592<k)return 1;for(;;){for(v=E-D,C=d[x]<y?(b=0,d[x]):d[x]>y?(b=F[N+d[x]],M[R+d[x]]):(b=96,0),f=1<<E-D,B=p=1<<S;c[m+(Q>>D)+(p-=f)]=v<<24|b<<16|C,0!==p;);for(f=1<<E-1;Q&f;)f>>=1;if(0!==f?(Q&=f-1,Q+=f):Q=0,x++,0==--P[E]){if(E===w)break;E=t[n+d[x]]}if(_<E&&(Q&g)!==h){for(0===D&&(D=_),m+=B,T=1<<(S=E-D);S+D<w&&!((T-=P[S+D])<=0);)S++,T<<=1;if(k+=1<<S,1===e&&852<k||2===e&&592<k)return 1;c[h=Q&g]=_<<24|S<<16|m-u}}return 0!==Q&&(c[m+Q]=E-D<<24|64<<16),A.bits=_,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common"),o=0,i=1;function a(e){for(var t=e.length;0<=--t;)e[t]=0}var s=0,l=29,c=256,u=c+1+l,d=30,A=19,f=2*u+1,p=15,h=16,g=7,m=256,y=16,v=17,b=18,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],x=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=new Array(2*(u+2));a(B);var w=new Array(2*d);a(w);var _=new Array(512);a(_);var S=new Array(256);a(S);var D=new Array(l);a(D);var T,k,Q,M=new Array(d);function R(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}function P(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function O(e){return e<256?_[e]:_[256+(e>>>7)]}function F(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function N(e,t,n){e.bi_valid>h-n?(e.bi_buf|=t<<e.bi_valid&65535,F(e,e.bi_buf),e.bi_buf=t>>h-e.bi_valid,e.bi_valid+=n-h):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function L(e,t,n){N(e,n[2*t],n[2*t+1])}function U(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function G(e,t,n){var r,o,i=new Array(p+1),a=0;for(r=1;r<=p;r++)i[r]=a=a+n[r-1]<<1;for(o=0;o<=t;o++){var s=e[2*o+1];0!==s&&(e[2*o]=U(i[s]++,s))}}function j(e){var t;for(t=0;t<u;t++)e.dyn_ltree[2*t]=0;for(t=0;t<d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<A;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*m]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function z(e){8<e.bi_valid?F(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function H(e,t,n,r){var o=2*t,i=2*n;return e[o]<e[i]||e[o]===e[i]&&r[t]<=r[n]}function V(e,t,n){for(var r=e.heap[n],o=n<<1;o<=e.heap_len&&(o<e.heap_len&&H(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!H(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r}function q(e,t,n){var r,o,i,a,s=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],o=e.pending_buf[e.l_buf+s],s++,0===r?L(e,o,t):(L(e,(i=S[o])+c+1,t),0!==(a=C[i])&&N(e,o-=D[i],a),L(e,i=O(--r),n),0!==(a=I[i])&&N(e,r-=M[i],a)),s<e.last_lit;);L(e,m,t)}function Y(e,t){var n,r,o,i=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=f,n=0;n<l;n++)0!==i[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(o=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[o]=0,e.opt_len--,s&&(e.static_len-=a[2*o+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)V(e,i,n);for(o=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],V(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*o]=i[2*n]+i[2*r],e.depth[o]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=o,e.heap[1]=o++,V(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,o,i,a,s,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,A=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,g=t.stat_desc.max_length,m=0;for(i=0;i<=p;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<f;n++)g<(i=l[2*l[2*(r=e.heap[n])+1]+1]+1)&&(i=g,m++),l[2*r+1]=i,c<r||(e.bl_count[i]++,a=0,h<=r&&(a=A[r-h]),s=l[2*r],e.opt_len+=s*(i+a),d&&(e.static_len+=s*(u[2*r+1]+a)));if(0!==m){do{for(i=g-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[g]--,m-=2}while(0<m);for(i=g;0!==i;i--)for(r=e.bl_count[i];0!==r;)c<(o=e.heap[--n])||(l[2*o+1]!==i&&(e.opt_len+=(i-l[2*o+1])*l[2*o],l[2*o+1]=i),r--)}}(e,t),G(i,c,e.bl_count)}function X(e,t,n){var r,o,i=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=a,a=t[2*(r+1)+1],++s<l&&o===a||(s<c?e.bl_tree[2*o]+=s:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[2*y]++):s<=10?e.bl_tree[2*v]++:e.bl_tree[2*b]++,i=o,c=(s=0)===a?(l=138,3):o===a?(l=6,3):(l=7,4))}function W(e,t,n){var r,o,i=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),r=0;r<=n;r++)if(o=a,a=t[2*(r+1)+1],!(++s<l&&o===a)){if(s<c)for(;L(e,o,e.bl_tree),0!=--s;);else 0!==o?(o!==i&&(L(e,o,e.bl_tree),s--),L(e,y,e.bl_tree),N(e,s-3,2)):s<=10?(L(e,v,e.bl_tree),N(e,s-3,3)):(L(e,b,e.bl_tree),N(e,s-11,7));i=o,c=(s=0)===a?(l=138,3):o===a?(l=6,3):(l=7,4)}}a(M);var K=!1;function J(e,t,n,o){N(e,(s<<1)+(o?1:0),3),function(e,t,n,o){z(e),o&&(F(e,n),F(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}n._tr_init=function(e){K||(function(){var e,t,n,r,o,i=new Array(p+1);for(r=n=0;r<l-1;r++)for(D[r]=n,e=0;e<1<<C[r];e++)S[n++]=r;for(S[n-1]=r,r=o=0;r<16;r++)for(M[r]=o,e=0;e<1<<I[r];e++)_[o++]=r;for(o>>=7;r<d;r++)for(M[r]=o<<7,e=0;e<1<<I[r]-7;e++)_[256+o++]=r;for(t=0;t<=p;t++)i[t]=0;for(e=0;e<=143;)B[2*e+1]=8,e++,i[8]++;for(;e<=255;)B[2*e+1]=9,e++,i[9]++;for(;e<=279;)B[2*e+1]=7,e++,i[7]++;for(;e<=287;)B[2*e+1]=8,e++,i[8]++;for(G(B,u+1,i),e=0;e<d;e++)w[2*e+1]=5,w[2*e]=U(e,5);T=new R(B,C,c+1,u,p),k=new R(w,I,0,d,p),Q=new R(new Array(0),E,0,A,g)}(),K=!0),e.l_desc=new P(e.dyn_ltree,T),e.d_desc=new P(e.dyn_dtree,k),e.bl_desc=new P(e.bl_tree,Q),e.bi_buf=0,e.bi_valid=0,j(e)},n._tr_stored_block=J,n._tr_flush_block=function(e,t,n,r){var a,s,l=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return o;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return i;for(t=32;t<c;t++)if(0!==e.dyn_ltree[2*t])return i;return o}(e)),Y(e,e.l_desc),Y(e,e.d_desc),l=function(e){var t;for(X(e,e.dyn_ltree,e.l_desc.max_code),X(e,e.dyn_dtree,e.d_desc.max_code),Y(e,e.bl_desc),t=A-1;3<=t&&0===e.bl_tree[2*x[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==t?J(e,t,n,r):4===e.strategy||s===a?(N(e,2+(r?1:0),3),q(e,B,w)):(N(e,4+(r?1:0),3),function(e,t,n,r){var o;for(N(e,t-257,5),N(e,n-1,5),N(e,r-4,4),o=0;o<r;o++)N(e,e.bl_tree[2*x[o]+1],3);W(e,e.dyn_ltree,t-1),W(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),q(e,e.dyn_ltree,e.dyn_dtree)),j(e),r&&z(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(S[n]+c+1)]++,e.dyn_dtree[2*O(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){N(e,2,3),L(e,m,B),function(e){16===e.bi_valid?(F(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var n,r,o,i,a=1,s={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,n="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){A(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(i="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",f,!1):e.attachEvent("onmessage",f),function(t){e.postMessage(i+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){A(e.data)},function(e){o.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){A(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(A,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var o={callback:e,args:t};return s[a]=o,n(a),a++},u.clearImmediate=d}function d(e){delete s[e]}function A(e){if(l)setTimeout(A,0,e);else{var n=s[e];if(n){l=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{d(e),l=!1}}}}function f(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&A(+t.data.slice(i.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},530:function(e,t,n){var r;e=n.nmd(e),function(){var o,i="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",l=16,c=32,u=64,d=128,A=256,f=1/0,p=9007199254740991,h=NaN,g=4294967295,m=[["ary",d],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",u],["rearg",A]],y="[object Arguments]",v="[object Array]",b="[object Boolean]",C="[object Date]",I="[object Error]",E="[object Function]",x="[object GeneratorFunction]",B="[object Map]",w="[object Number]",_="[object Object]",S="[object Promise]",D="[object RegExp]",T="[object Set]",k="[object String]",Q="[object Symbol]",M="[object WeakMap]",R="[object ArrayBuffer]",P="[object DataView]",O="[object Float32Array]",F="[object Float64Array]",N="[object Int8Array]",L="[object Int16Array]",U="[object Int32Array]",G="[object Uint8Array]",j="[object Uint8ClampedArray]",z="[object Uint16Array]",H="[object Uint32Array]",V=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,Y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,X=/&(?:amp|lt|gt|quot|#39);/g,W=/[&<>"']/g,K=RegExp(X.source),J=RegExp(W.source),Z=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oe=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(oe.source),ae=/^\s+/,se=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,de=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ae=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,he=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,ve=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,Ce=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ie=/($^)/,Ee=/['\n\r\u2028\u2029\\]/g,xe="\\ud800-\\udfff",Be="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",we="\\u2700-\\u27bf",_e="a-z\\xdf-\\xf6\\xf8-\\xff",Se="A-Z\\xc0-\\xd6\\xd8-\\xde",De="\\ufe0e\\ufe0f",Te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ke="['\u2019]",Qe="["+xe+"]",Me="["+Te+"]",Re="["+Be+"]",Pe="\\d+",Oe="["+we+"]",Fe="["+_e+"]",Ne="[^"+xe+Te+Pe+we+_e+Se+"]",Le="\\ud83c[\\udffb-\\udfff]",Ue="[^"+xe+"]",Ge="(?:\\ud83c[\\udde6-\\uddff]){2}",je="[\\ud800-\\udbff][\\udc00-\\udfff]",ze="["+Se+"]",He="\\u200d",Ve="(?:"+Fe+"|"+Ne+")",qe="(?:"+ze+"|"+Ne+")",Ye="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Xe="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",We="(?:"+Re+"|"+Le+")"+"?",Ke="["+De+"]?",Je=Ke+We+("(?:"+He+"(?:"+[Ue,Ge,je].join("|")+")"+Ke+We+")*"),Ze="(?:"+[Oe,Ge,je].join("|")+")"+Je,$e="(?:"+[Ue+Re+"?",Re,Ge,je,Qe].join("|")+")",et=RegExp(ke,"g"),tt=RegExp(Re,"g"),nt=RegExp(Le+"(?="+Le+")|"+$e+Je,"g"),rt=RegExp([ze+"?"+Fe+"+"+Ye+"(?="+[Me,ze,"$"].join("|")+")",qe+"+"+Xe+"(?="+[Me,ze+Ve,"$"].join("|")+")",ze+"?"+Ve+"+"+Ye,ze+"+"+Xe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pe,Ze].join("|"),"g"),ot=RegExp("["+He+xe+Be+De+"]"),it=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,at=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],st=-1,lt={};lt[O]=lt[F]=lt[N]=lt[L]=lt[U]=lt[G]=lt[j]=lt[z]=lt[H]=!0,lt[y]=lt[v]=lt[R]=lt[b]=lt[P]=lt[C]=lt[I]=lt[E]=lt[B]=lt[w]=lt[_]=lt[D]=lt[T]=lt[k]=lt[M]=!1;var ct={};ct[y]=ct[v]=ct[R]=ct[P]=ct[b]=ct[C]=ct[O]=ct[F]=ct[N]=ct[L]=ct[U]=ct[B]=ct[w]=ct[_]=ct[D]=ct[T]=ct[k]=ct[Q]=ct[G]=ct[j]=ct[z]=ct[H]=!0,ct[I]=ct[E]=ct[M]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},dt=parseFloat,At=parseInt,ft="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,pt="object"==typeof self&&self&&self.Object===Object&&self,ht=ft||pt||Function("return this")(),gt=t&&!t.nodeType&&t,mt=gt&&e&&!e.nodeType&&e,yt=mt&&mt.exports===gt,vt=yt&&ft.process,bt=function(){try{var e=mt&&mt.require&&mt.require("util").types;return e||vt&&vt.binding&&vt.binding("util")}catch(t){}}(),Ct=bt&&bt.isArrayBuffer,It=bt&&bt.isDate,Et=bt&&bt.isMap,xt=bt&&bt.isRegExp,Bt=bt&&bt.isSet,wt=bt&&bt.isTypedArray;function _t(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function St(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}function Dt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Tt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function kt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Qt(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function Mt(e,t){return!!(null==e?0:e.length)&&zt(e,t,0)>-1}function Rt(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}function Pt(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function Ot(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function Ft(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function Nt(e,t,n,r){var o=null==e?0:e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function Lt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ut=Yt("length");function Gt(e,t,n){var r;return n(e,(function(e,n,o){if(t(e,n,o))return r=n,!1})),r}function jt(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function zt(e,t,n){return t===t?function(e,t,n){var r=n-1,o=e.length;for(;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):jt(e,Vt,n)}function Ht(e,t,n,r){for(var o=n-1,i=e.length;++o<i;)if(r(e[o],t))return o;return-1}function Vt(e){return e!==e}function qt(e,t){var n=null==e?0:e.length;return n?Kt(e,t)/n:h}function Yt(e){return function(t){return null==t?o:t[e]}}function Xt(e){return function(t){return null==e?o:e[t]}}function Wt(e,t,n,r,o){return o(e,(function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)})),n}function Kt(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);a!==o&&(n=n===o?a:n+a)}return n}function Jt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Zt(e){return e?e.slice(0,gn(e)+1).replace(ae,""):e}function $t(e){return function(t){return e(t)}}function en(e,t){return Pt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&zt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&zt(t,e[n],0)>-1;);return n}var on=Xt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=Xt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+ut[e]}function ln(e){return ot.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function dn(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n];a!==t&&a!==s||(e[n]=s,i[o++]=n)}return i}function An(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function pn(e){return ln(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):Ut(e)}function hn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function gn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var mn=Xt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n=(t=null==t?ht:yn.defaults(ht.Object(),t,yn.pick(ht,at))).Array,r=t.Date,se=t.Error,xe=t.Function,Be=t.Math,we=t.Object,_e=t.RegExp,Se=t.String,De=t.TypeError,Te=n.prototype,ke=xe.prototype,Qe=we.prototype,Me=t["__core-js_shared__"],Re=ke.toString,Pe=Qe.hasOwnProperty,Oe=0,Fe=function(){var e=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ne=Qe.toString,Le=Re.call(we),Ue=ht._,Ge=_e("^"+Re.call(Pe).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=yt?t.Buffer:o,ze=t.Symbol,He=t.Uint8Array,Ve=je?je.allocUnsafe:o,qe=un(we.getPrototypeOf,we),Ye=we.create,Xe=Qe.propertyIsEnumerable,We=Te.splice,Ke=ze?ze.isConcatSpreadable:o,Je=ze?ze.iterator:o,Ze=ze?ze.toStringTag:o,$e=function(){try{var e=Ai(we,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==ht.clearTimeout&&t.clearTimeout,ot=r&&r.now!==ht.Date.now&&r.now,ut=t.setTimeout!==ht.setTimeout&&t.setTimeout,ft=Be.ceil,pt=Be.floor,gt=we.getOwnPropertySymbols,mt=je?je.isBuffer:o,vt=t.isFinite,bt=Te.join,Ut=un(we.keys,we),Xt=Be.max,vn=Be.min,bn=r.now,Cn=t.parseInt,In=Be.random,En=Te.reverse,xn=Ai(t,"DataView"),Bn=Ai(t,"Map"),wn=Ai(t,"Promise"),_n=Ai(t,"Set"),Sn=Ai(t,"WeakMap"),Dn=Ai(we,"create"),Tn=Sn&&new Sn,kn={},Qn=Ni(xn),Mn=Ni(Bn),Rn=Ni(wn),Pn=Ni(_n),On=Ni(Sn),Fn=ze?ze.prototype:o,Nn=Fn?Fn.valueOf:o,Ln=Fn?Fn.toString:o;function Un(e){if(ts(e)&&!Ha(e)&&!(e instanceof Hn)){if(e instanceof zn)return e;if(Pe.call(e,"__wrapped__"))return Li(e)}return new zn(e)}var Gn=function(){function e(){}return function(t){if(!es(t))return{};if(Ye)return Ye(t);e.prototype=t;var n=new e;return e.prototype=o,n}}();function jn(){}function zn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function Hn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Vn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Yn;++t<n;)this.add(e[t])}function Wn(e){var t=this.__data__=new qn(e);this.size=t.size}function Kn(e,t){var n=Ha(e),r=!n&&za(e),o=!n&&!r&&Xa(e),i=!n&&!r&&!o&&cs(e),a=n||r||o||i,s=a?Jt(e.length,Se):[],l=s.length;for(var c in e)!t&&!Pe.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vi(c,l))||s.push(c);return s}function Jn(e){var t=e.length;return t?e[Xr(0,t-1)]:o}function Zn(e,t){return Pi(To(e),sr(t,0,e.length))}function $n(e){return Pi(To(e))}function er(e,t,n){(n!==o&&!Ua(e[t],n)||n===o&&!(t in e))&&ir(e,t,n)}function tr(e,t,n){var r=e[t];Pe.call(e,t)&&Ua(r,n)&&(n!==o||t in e)||ir(e,t,n)}function nr(e,t){for(var n=e.length;n--;)if(Ua(e[n][0],t))return n;return-1}function rr(e,t,n,r){return Ar(e,(function(e,o,i){t(r,e,n(e),i)})),r}function or(e,t){return e&&ko(t,ks(t),e)}function ir(e,t,n){"__proto__"==t&&$e?$e(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ar(e,t){for(var r=-1,i=t.length,a=n(i),s=null==e;++r<i;)a[r]=s?o:ws(e,t[r]);return a}function sr(e,t,n){return e===e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=e>=t?e:t)),e}function lr(e,t,n,r,i,a){var s,l=1&t,c=2&t,u=4&t;if(n&&(s=i?n(e,r,i,a):n(e)),s!==o)return s;if(!es(e))return e;var d=Ha(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Pe.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return To(e,s)}else{var A=hi(e),f=A==E||A==x;if(Xa(e))return xo(e,l);if(A==_||A==y||f&&!i){if(s=c||f?{}:mi(e),!l)return c?function(e,t){return ko(e,pi(e),t)}(e,function(e,t){return e&&ko(t,Qs(t),e)}(s,e)):function(e,t){return ko(e,fi(e),t)}(e,or(s,e))}else{if(!ct[A])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case R:return Bo(e);case b:case C:return new r(+e);case P:return function(e,t){var n=t?Bo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case O:case F:case N:case L:case U:case G:case j:case z:case H:return wo(e,n);case B:return new r;case w:case k:return new r(e);case D:return function(e){var t=new e.constructor(e.source,he.exec(e));return t.lastIndex=e.lastIndex,t}(e);case T:return new r;case Q:return o=e,Nn?we(Nn.call(o)):{}}var o}(e,A,l)}}a||(a=new Wn);var p=a.get(e);if(p)return p;a.set(e,s),as(e)?e.forEach((function(r){s.add(lr(r,t,n,r,e,a))})):ns(e)&&e.forEach((function(r,o){s.set(o,lr(r,t,n,o,e,a))}));var h=d?o:(u?c?ii:oi:c?Qs:ks)(e);return Dt(h||e,(function(r,o){h&&(r=e[o=r]),tr(s,o,lr(r,t,n,o,e,a))})),s}function cr(e,t,n){var r=n.length;if(null==e)return!r;for(e=we(e);r--;){var i=n[r],a=t[i],s=e[i];if(s===o&&!(i in e)||!a(s))return!1}return!0}function ur(e,t,n){if("function"!=typeof e)throw new De(i);return ki((function(){e.apply(o,n)}),t)}function dr(e,t,n,r){var o=-1,i=Mt,a=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=Pt(t,$t(n))),r?(i=Rt,a=!1):t.length>=200&&(i=tn,a=!1,t=new Xn(t));e:for(;++o<s;){var u=e[o],d=null==n?u:n(u);if(u=r||0!==u?u:0,a&&d===d){for(var A=c;A--;)if(t[A]===d)continue e;l.push(u)}else i(t,d,r)||l.push(u)}return l}Un.templateSettings={escape:Z,evaluate:$,interpolate:ee,variable:"",imports:{_:Un}},Un.prototype=jn.prototype,Un.prototype.constructor=Un,zn.prototype=Gn(jn.prototype),zn.prototype.constructor=zn,Hn.prototype=Gn(jn.prototype),Hn.prototype.constructor=Hn,Vn.prototype.clear=function(){this.__data__=Dn?Dn(null):{},this.size=0},Vn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Vn.prototype.get=function(e){var t=this.__data__;if(Dn){var n=t[e];return n===a?o:n}return Pe.call(t,e)?t[e]:o},Vn.prototype.has=function(e){var t=this.__data__;return Dn?t[e]!==o:Pe.call(t,e)},Vn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Dn&&t===o?a:t,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(e){var t=this.__data__,n=nr(t,e);return!(n<0)&&(n==t.length-1?t.pop():We.call(t,n,1),--this.size,!0)},qn.prototype.get=function(e){var t=this.__data__,n=nr(t,e);return n<0?o:t[n][1]},qn.prototype.has=function(e){return nr(this.__data__,e)>-1},qn.prototype.set=function(e,t){var n=this.__data__,r=nr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Yn.prototype.clear=function(){this.size=0,this.__data__={hash:new Vn,map:new(Bn||qn),string:new Vn}},Yn.prototype.delete=function(e){var t=ui(this,e).delete(e);return this.size-=t?1:0,t},Yn.prototype.get=function(e){return ui(this,e).get(e)},Yn.prototype.has=function(e){return ui(this,e).has(e)},Yn.prototype.set=function(e,t){var n=ui(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Xn.prototype.add=Xn.prototype.push=function(e){return this.__data__.set(e,a),this},Xn.prototype.has=function(e){return this.__data__.has(e)},Wn.prototype.clear=function(){this.__data__=new qn,this.size=0},Wn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Wn.prototype.get=function(e){return this.__data__.get(e)},Wn.prototype.has=function(e){return this.__data__.has(e)},Wn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof qn){var r=n.__data__;if(!Bn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Yn(r)}return n.set(e,t),this.size=n.size,this};var Ar=Ro(br),fr=Ro(Cr,!0);function pr(e,t){var n=!0;return Ar(e,(function(e,r,o){return n=!!t(e,r,o)})),n}function hr(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],s=t(a);if(null!=s&&(l===o?s===s&&!ls(s):n(s,l)))var l=s,c=a}return c}function gr(e,t){var n=[];return Ar(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}function mr(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=yi),o||(o=[]);++i<a;){var s=e[i];t>0&&n(s)?t>1?mr(s,t-1,n,r,o):Ot(o,s):r||(o[o.length]=s)}return o}var yr=Po(),vr=Po(!0);function br(e,t){return e&&yr(e,t,ks)}function Cr(e,t){return e&&vr(e,t,ks)}function Ir(e,t){return Qt(t,(function(t){return Ja(e[t])}))}function Er(e,t){for(var n=0,r=(t=bo(t,e)).length;null!=e&&n<r;)e=e[Fi(t[n++])];return n&&n==r?e:o}function xr(e,t,n){var r=t(e);return Ha(e)?r:Ot(r,n(e))}function Br(e){return null==e?e===o?"[object Undefined]":"[object Null]":Ze&&Ze in we(e)?function(e){var t=Pe.call(e,Ze),n=e[Ze];try{e[Ze]=o;var r=!0}catch(a){}var i=Ne.call(e);r&&(t?e[Ze]=n:delete e[Ze]);return i}(e):function(e){return Ne.call(e)}(e)}function wr(e,t){return e>t}function _r(e,t){return null!=e&&Pe.call(e,t)}function Sr(e,t){return null!=e&&t in we(e)}function Dr(e,t,r){for(var i=r?Rt:Mt,a=e[0].length,s=e.length,l=s,c=n(s),u=1/0,d=[];l--;){var A=e[l];l&&t&&(A=Pt(A,$t(t))),u=vn(A.length,u),c[l]=!r&&(t||a>=120&&A.length>=120)?new Xn(l&&A):o}A=e[0];var f=-1,p=c[0];e:for(;++f<a&&d.length<u;){var h=A[f],g=t?t(h):h;if(h=r||0!==h?h:0,!(p?tn(p,g):i(d,g,r))){for(l=s;--l;){var m=c[l];if(!(m?tn(m,g):i(e[l],g,r)))continue e}p&&p.push(g),d.push(h)}}return d}function Tr(e,t,n){var r=null==(e=Si(e,t=bo(t,e)))?e:e[Fi(Ki(t))];return null==r?o:_t(r,e,n)}function kr(e){return ts(e)&&Br(e)==y}function Qr(e,t,n,r,i){return e===t||(null==e||null==t||!ts(e)&&!ts(t)?e!==e&&t!==t:function(e,t,n,r,i,a){var s=Ha(e),l=Ha(t),c=s?v:hi(e),u=l?v:hi(t),d=(c=c==y?_:c)==_,A=(u=u==y?_:u)==_,f=c==u;if(f&&Xa(e)){if(!Xa(t))return!1;s=!0,d=!1}if(f&&!d)return a||(a=new Wn),s||cs(e)?ni(e,t,n,r,i,a):function(e,t,n,r,o,i,a){switch(n){case P:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R:return!(e.byteLength!=t.byteLength||!i(new He(e),new He(t)));case b:case C:case w:return Ua(+e,+t);case I:return e.name==t.name&&e.message==t.message;case D:case k:return e==t+"";case B:var s=cn;case T:var l=1&r;if(s||(s=An),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=ni(s(e),s(t),r,o,i,a);return a.delete(e),u;case Q:if(Nn)return Nn.call(e)==Nn.call(t)}return!1}(e,t,c,n,r,i,a);if(!(1&n)){var p=d&&Pe.call(e,"__wrapped__"),h=A&&Pe.call(t,"__wrapped__");if(p||h){var g=p?e.value():e,m=h?t.value():t;return a||(a=new Wn),i(g,m,n,r,a)}}if(!f)return!1;return a||(a=new Wn),function(e,t,n,r,i,a){var s=1&n,l=oi(e),c=l.length,u=oi(t),d=u.length;if(c!=d&&!s)return!1;var A=c;for(;A--;){var f=l[A];if(!(s?f in t:Pe.call(t,f)))return!1}var p=a.get(e),h=a.get(t);if(p&&h)return p==t&&h==e;var g=!0;a.set(e,t),a.set(t,e);var m=s;for(;++A<c;){var y=e[f=l[A]],v=t[f];if(r)var b=s?r(v,y,f,t,e,a):r(y,v,f,e,t,a);if(!(b===o?y===v||i(y,v,n,r,a):b)){g=!1;break}m||(m="constructor"==f)}if(g&&!m){var C=e.constructor,I=t.constructor;C==I||!("constructor"in e)||!("constructor"in t)||"function"==typeof C&&C instanceof C&&"function"==typeof I&&I instanceof I||(g=!1)}return a.delete(e),a.delete(t),g}(e,t,n,r,i,a)}(e,t,n,r,Qr,i))}function Mr(e,t,n,r){var i=n.length,a=i,s=!r;if(null==e)return!a;for(e=we(e);i--;){var l=n[i];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){var c=(l=n[i])[0],u=e[c],d=l[1];if(s&&l[2]){if(u===o&&!(c in e))return!1}else{var A=new Wn;if(r)var f=r(u,d,c,e,t,A);if(!(f===o?Qr(d,u,3,r,A):f))return!1}}return!0}function Rr(e){return!(!es(e)||(t=e,Fe&&Fe in t))&&(Ja(e)?Ge:ye).test(Ni(e));var t}function Pr(e){return"function"==typeof e?e:null==e?rl:"object"==typeof e?Ha(e)?Gr(e[0],e[1]):Ur(e):Al(e)}function Or(e){if(!xi(e))return Ut(e);var t=[];for(var n in we(e))Pe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Fr(e){if(!es(e))return function(e){var t=[];if(null!=e)for(var n in we(e))t.push(n);return t}(e);var t=xi(e),n=[];for(var r in e)("constructor"!=r||!t&&Pe.call(e,r))&&n.push(r);return n}function Nr(e,t){return e<t}function Lr(e,t){var r=-1,o=qa(e)?n(e.length):[];return Ar(e,(function(e,n,i){o[++r]=t(e,n,i)})),o}function Ur(e){var t=di(e);return 1==t.length&&t[0][2]?wi(t[0][0],t[0][1]):function(n){return n===e||Mr(n,e,t)}}function Gr(e,t){return Ci(e)&&Bi(t)?wi(Fi(e),t):function(n){var r=ws(n,e);return r===o&&r===t?_s(n,e):Qr(t,r,3)}}function jr(e,t,n,r,i){e!==t&&yr(t,(function(a,s){if(i||(i=new Wn),es(a))!function(e,t,n,r,i,a,s){var l=Di(e,n),c=Di(t,n),u=s.get(c);if(u)return void er(e,n,u);var d=a?a(l,c,n+"",e,t,s):o,A=d===o;if(A){var f=Ha(c),p=!f&&Xa(c),h=!f&&!p&&cs(c);d=c,f||p||h?Ha(l)?d=l:Ya(l)?d=To(l):p?(A=!1,d=xo(c,!0)):h?(A=!1,d=wo(c,!0)):d=[]:os(c)||za(c)?(d=l,za(l)?d=ms(l):es(l)&&!Ja(l)||(d=mi(c))):A=!1}A&&(s.set(c,d),i(d,c,r,a,s),s.delete(c));er(e,n,d)}(e,t,s,n,jr,r,i);else{var l=r?r(Di(e,s),a,s+"",e,t,i):o;l===o&&(l=a),er(e,s,l)}}),Qs)}function zr(e,t){var n=e.length;if(n)return vi(t+=t<0?n:0,n)?e[t]:o}function Hr(e,t,n){t=t.length?Pt(t,(function(e){return Ha(e)?function(t){return Er(t,1===e.length?e[0]:e)}:e})):[rl];var r=-1;t=Pt(t,$t(ci()));var o=Lr(e,(function(e,n,o){var i=Pt(t,(function(t){return t(e)}));return{criteria:i,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(o,(function(e,t){return function(e,t,n){var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;for(;++r<a;){var l=_o(o[r],i[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Vr(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=Er(e,a);n(s,a)&&$r(i,bo(a,e),s)}return i}function qr(e,t,n,r){var o=r?Ht:zt,i=-1,a=t.length,s=e;for(e===t&&(t=To(t)),n&&(s=Pt(e,$t(n)));++i<a;)for(var l=0,c=t[i],u=n?n(c):c;(l=o(s,u,l,r))>-1;)s!==e&&We.call(s,l,1),We.call(e,l,1);return e}function Yr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;vi(o)?We.call(e,o,1):Ao(e,o)}}return e}function Xr(e,t){return e+pt(In()*(t-e+1))}function Wr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=pt(t/2))&&(e+=e)}while(t);return n}function Kr(e,t){return Qi(_i(e,t,rl),e+"")}function Jr(e){return Jn(Us(e))}function Zr(e,t){var n=Us(e);return Pi(n,sr(t,0,n.length))}function $r(e,t,n,r){if(!es(e))return e;for(var i=-1,a=(t=bo(t,e)).length,s=a-1,l=e;null!=l&&++i<a;){var c=Fi(t[i]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=s){var d=l[c];(u=r?r(d,c,l):o)===o&&(u=es(d)?d:vi(t[i+1])?[]:{})}tr(l,c,u),l=l[c]}return e}var eo=Tn?function(e,t){return Tn.set(e,t),e}:rl,to=$e?function(e,t){return $e(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:rl;function no(e){return Pi(Us(e))}function ro(e,t,r){var o=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=n(i);++o<i;)a[o]=e[o+t];return a}function oo(e,t){var n;return Ar(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n}function io(e,t,n){var r=0,o=null==e?r:e.length;if("number"==typeof t&&t===t&&o<=2147483647){for(;r<o;){var i=r+o>>>1,a=e[i];null!==a&&!ls(a)&&(n?a<=t:a<t)?r=i+1:o=i}return o}return ao(e,t,rl,n)}function ao(e,t,n,r){var i=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!==t,l=null===t,c=ls(t),u=t===o;i<a;){var d=pt((i+a)/2),A=n(e[d]),f=A!==o,p=null===A,h=A===A,g=ls(A);if(s)var m=r||h;else m=u?h&&(r||f):l?h&&f&&(r||!p):c?h&&f&&!p&&(r||!g):!p&&!g&&(r?A<=t:A<t);m?i=d+1:a=d}return vn(a,4294967294)}function so(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ua(s,l)){var l=s;i[o++]=0===a?0:a}}return i}function lo(e){return"number"==typeof e?e:ls(e)?h:+e}function co(e){if("string"==typeof e)return e;if(Ha(e))return Pt(e,co)+"";if(ls(e))return Ln?Ln.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function uo(e,t,n){var r=-1,o=Mt,i=e.length,a=!0,s=[],l=s;if(n)a=!1,o=Rt;else if(i>=200){var c=t?null:Ko(e);if(c)return An(c);a=!1,o=tn,l=new Xn}else l=t?[]:s;e:for(;++r<i;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,a&&d===d){for(var A=l.length;A--;)if(l[A]===d)continue e;t&&l.push(d),s.push(u)}else o(l,d,n)||(l!==s&&l.push(d),s.push(u))}return s}function Ao(e,t){return null==(e=Si(e,t=bo(t,e)))||delete e[Fi(Ki(t))]}function fo(e,t,n,r){return $r(e,t,n(Er(e,t)),r)}function po(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?ro(e,r?0:i,r?i+1:o):ro(e,r?i+1:0,r?o:i)}function ho(e,t){var n=e;return n instanceof Hn&&(n=n.value()),Ft(t,(function(e,t){return t.func.apply(t.thisArg,Ot([e],t.args))}),n)}function go(e,t,r){var o=e.length;if(o<2)return o?uo(e[0]):[];for(var i=-1,a=n(o);++i<o;)for(var s=e[i],l=-1;++l<o;)l!=i&&(a[i]=dr(a[i]||s,e[l],t,r));return uo(mr(a,1),t,r)}function mo(e,t,n){for(var r=-1,i=e.length,a=t.length,s={};++r<i;){var l=r<a?t[r]:o;n(s,e[r],l)}return s}function yo(e){return Ya(e)?e:[]}function vo(e){return"function"==typeof e?e:rl}function bo(e,t){return Ha(e)?e:Ci(e,t)?[e]:Oi(ys(e))}var Co=Kr;function Io(e,t,n){var r=e.length;return n=n===o?r:n,!t&&n>=r?e:ro(e,t,n)}var Eo=nt||function(e){return ht.clearTimeout(e)};function xo(e,t){if(t)return e.slice();var n=e.length,r=Ve?Ve(n):new e.constructor(n);return e.copy(r),r}function Bo(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function wo(e,t){var n=t?Bo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function _o(e,t){if(e!==t){var n=e!==o,r=null===e,i=e===e,a=ls(e),s=t!==o,l=null===t,c=t===t,u=ls(t);if(!l&&!u&&!a&&e>t||a&&s&&c&&!l&&!u||r&&s&&c||!n&&c||!i)return 1;if(!r&&!a&&!u&&e<t||u&&n&&i&&!r&&!a||l&&n&&i||!s&&i||!c)return-1}return 0}function So(e,t,r,o){for(var i=-1,a=e.length,s=r.length,l=-1,c=t.length,u=Xt(a-s,0),d=n(c+u),A=!o;++l<c;)d[l]=t[l];for(;++i<s;)(A||i<a)&&(d[r[i]]=e[i]);for(;u--;)d[l++]=e[i++];return d}function Do(e,t,r,o){for(var i=-1,a=e.length,s=-1,l=r.length,c=-1,u=t.length,d=Xt(a-l,0),A=n(d+u),f=!o;++i<d;)A[i]=e[i];for(var p=i;++c<u;)A[p+c]=t[c];for(;++s<l;)(f||i<a)&&(A[p+r[s]]=e[i++]);return A}function To(e,t){var r=-1,o=e.length;for(t||(t=n(o));++r<o;)t[r]=e[r];return t}function ko(e,t,n,r){var i=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var l=t[a],c=r?r(n[l],e[l],l,n,e):o;c===o&&(c=e[l]),i?ir(n,l,c):tr(n,l,c)}return n}function Qo(e,t){return function(n,r){var o=Ha(n)?St:rr,i=t?t():{};return o(n,e,ci(r,2),i)}}function Mo(e){return Kr((function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,s=i>2?n[2]:o;for(a=e.length>3&&"function"==typeof a?(i--,a):o,s&&bi(n[0],n[1],s)&&(a=i<3?o:a,i=1),t=we(t);++r<i;){var l=n[r];l&&e(t,l,r,a)}return t}))}function Ro(e,t){return function(n,r){if(null==n)return n;if(!qa(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=we(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function Po(e){return function(t,n,r){for(var o=-1,i=we(t),a=r(t),s=a.length;s--;){var l=a[e?s:++o];if(!1===n(i[l],l,i))break}return t}}function Oo(e){return function(t){var n=ln(t=ys(t))?hn(t):o,r=n?n[0]:t.charAt(0),i=n?Io(n,1).join(""):t.slice(1);return r[e]()+i}}function Fo(e){return function(t){return Ft(Js(zs(t).replace(et,"")),e,"")}}function No(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Gn(e.prototype),r=e.apply(n,t);return es(r)?r:n}}function Lo(e){return function(t,n,r){var i=we(t);if(!qa(t)){var a=ci(n,3);t=ks(t),n=function(e){return a(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[a?t[s]:s]:o}}function Uo(e){return ri((function(t){var n=t.length,r=n,a=zn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new De(i);if(a&&!l&&"wrapper"==si(s))var l=new zn([],!0)}for(r=l?r:n;++r<n;){var c=si(s=t[r]),u="wrapper"==c?ai(s):o;l=u&&Ii(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[si(u[0])].apply(l,u[3]):1==s.length&&Ii(s)?l[c]():l.thru(s)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&Ha(r))return l.plant(r).value();for(var o=0,i=n?t[o].apply(this,e):r;++o<n;)i=t[o].call(this,i);return i}}))}function Go(e,t,r,i,a,s,l,c,u,A){var f=t&d,p=1&t,h=2&t,g=24&t,m=512&t,y=h?o:No(e);return function d(){for(var v=arguments.length,b=n(v),C=v;C--;)b[C]=arguments[C];if(g)var I=li(d),E=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,I);if(i&&(b=So(b,i,a,g)),s&&(b=Do(b,s,l,g)),v-=E,g&&v<A){var x=dn(b,I);return Xo(e,t,Go,d.placeholder,r,b,x,c,u,A-v)}var B=p?r:this,w=h?B[e]:e;return v=b.length,c?b=function(e,t){var n=e.length,r=vn(t.length,n),i=To(e);for(;r--;){var a=t[r];e[r]=vi(a,n)?i[a]:o}return e}(b,c):m&&v>1&&b.reverse(),f&&u<v&&(b.length=u),this&&this!==ht&&this instanceof d&&(w=y||No(w)),w.apply(B,b)}}function jo(e,t){return function(n,r){return function(e,t,n,r){return br(e,(function(e,o,i){t(r,n(e),o,i)})),r}(n,e,t(r),{})}}function zo(e,t){return function(n,r){var i;if(n===o&&r===o)return t;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=co(n),r=co(r)):(n=lo(n),r=lo(r)),i=e(n,r)}return i}}function Ho(e){return ri((function(t){return t=Pt(t,$t(ci())),Kr((function(n){var r=this;return e(t,(function(e){return _t(e,r,n)}))}))}))}function Vo(e,t){var n=(t=t===o?" ":co(t)).length;if(n<2)return n?Wr(t,e):t;var r=Wr(t,ft(e/pn(t)));return ln(t)?Io(hn(r),0,e).join(""):r.slice(0,e)}function qo(e){return function(t,r,i){return i&&"number"!=typeof i&&bi(t,r,i)&&(r=i=o),t=fs(t),r===o?(r=t,t=0):r=fs(r),function(e,t,r,o){for(var i=-1,a=Xt(ft((t-e)/(r||1)),0),s=n(a);a--;)s[o?a:++i]=e,e+=r;return s}(t,r,i=i===o?t<r?1:-1:fs(i),e)}}function Yo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=gs(t),n=gs(n)),e(t,n)}}function Xo(e,t,n,r,i,a,s,l,d,A){var f=8&t;t|=f?c:u,4&(t&=~(f?u:c))||(t&=-4);var p=[e,t,i,f?a:o,f?s:o,f?o:a,f?o:s,l,d,A],h=n.apply(o,p);return Ii(e)&&Ti(h,p),h.placeholder=r,Mi(h,e,t)}function Wo(e){var t=Be[e];return function(e,n){if(e=gs(e),(n=null==n?0:vn(ps(n),292))&&vt(e)){var r=(ys(e)+"e").split("e");return+((r=(ys(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ko=_n&&1/An(new _n([,-0]))[1]==f?function(e){return new _n(e)}:ll;function Jo(e){return function(t){var n=hi(t);return n==B?cn(t):n==T?fn(t):function(e,t){return Pt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Zo(e,t,r,a,f,p,h,g){var m=2&t;if(!m&&"function"!=typeof e)throw new De(i);var y=a?a.length:0;if(y||(t&=-97,a=f=o),h=h===o?h:Xt(ps(h),0),g=g===o?g:ps(g),y-=f?f.length:0,t&u){var v=a,b=f;a=f=o}var C=m?o:ai(e),I=[e,t,r,a,f,v,b,p,h,g];if(C&&function(e,t){var n=e[1],r=t[1],o=n|r,i=o<131,a=r==d&&8==n||r==d&&n==A&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!i&&!a)return e;1&r&&(e[2]=t[2],o|=1&n?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?So(c,l,t[4]):l,e[4]=c?dn(e[3],s):t[4]}(l=t[5])&&(c=e[5],e[5]=c?Do(c,l,t[6]):l,e[6]=c?dn(e[5],s):t[6]);(l=t[7])&&(e[7]=l);r&d&&(e[8]=null==e[8]?t[8]:vn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=o}(I,C),e=I[0],t=I[1],r=I[2],a=I[3],f=I[4],!(g=I[9]=I[9]===o?m?0:e.length:Xt(I[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)E=8==t||t==l?function(e,t,r){var i=No(e);return function a(){for(var s=arguments.length,l=n(s),c=s,u=li(a);c--;)l[c]=arguments[c];var d=s<3&&l[0]!==u&&l[s-1]!==u?[]:dn(l,u);return(s-=d.length)<r?Xo(e,t,Go,a.placeholder,o,l,d,o,o,r-s):_t(this&&this!==ht&&this instanceof a?i:e,this,l)}}(e,t,g):t!=c&&33!=t||f.length?Go.apply(o,I):function(e,t,r,o){var i=1&t,a=No(e);return function t(){for(var s=-1,l=arguments.length,c=-1,u=o.length,d=n(u+l),A=this&&this!==ht&&this instanceof t?a:e;++c<u;)d[c]=o[c];for(;l--;)d[c++]=arguments[++s];return _t(A,i?r:this,d)}}(e,t,r,a);else var E=function(e,t,n){var r=1&t,o=No(e);return function t(){return(this&&this!==ht&&this instanceof t?o:e).apply(r?n:this,arguments)}}(e,t,r);return Mi((C?eo:Ti)(E,I),e,t)}function $o(e,t,n,r){return e===o||Ua(e,Qe[n])&&!Pe.call(r,n)?t:e}function ei(e,t,n,r,i,a){return es(e)&&es(t)&&(a.set(t,e),jr(e,t,o,ei,a),a.delete(t)),e}function ti(e){return os(e)?o:e}function ni(e,t,n,r,i,a){var s=1&n,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(e),d=a.get(t);if(u&&d)return u==t&&d==e;var A=-1,f=!0,p=2&n?new Xn:o;for(a.set(e,t),a.set(t,e);++A<l;){var h=e[A],g=t[A];if(r)var m=s?r(g,h,A,t,e,a):r(h,g,A,e,t,a);if(m!==o){if(m)continue;f=!1;break}if(p){if(!Lt(t,(function(e,t){if(!tn(p,t)&&(h===e||i(h,e,n,r,a)))return p.push(t)}))){f=!1;break}}else if(h!==g&&!i(h,g,n,r,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function ri(e){return Qi(_i(e,o,Vi),e+"")}function oi(e){return xr(e,ks,fi)}function ii(e){return xr(e,Qs,pi)}var ai=Tn?function(e){return Tn.get(e)}:ll;function si(e){for(var t=e.name+"",n=kn[t],r=Pe.call(kn,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}function li(e){return(Pe.call(Un,"placeholder")?Un:e).placeholder}function ci(){var e=Un.iteratee||ol;return e=e===ol?Pr:e,arguments.length?e(arguments[0],arguments[1]):e}function ui(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function di(e){for(var t=ks(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Bi(o)]}return t}function Ai(e,t){var n=function(e,t){return null==e?o:e[t]}(e,t);return Rr(n)?n:o}var fi=gt?function(e){return null==e?[]:(e=we(e),Qt(gt(e),(function(t){return Xe.call(e,t)})))}:hl,pi=gt?function(e){for(var t=[];e;)Ot(t,fi(e)),e=qe(e);return t}:hl,hi=Br;function gi(e,t,n){for(var r=-1,o=(t=bo(t,e)).length,i=!1;++r<o;){var a=Fi(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&$a(o)&&vi(a,o)&&(Ha(e)||za(e))}function mi(e){return"function"!=typeof e.constructor||xi(e)?{}:Gn(qe(e))}function yi(e){return Ha(e)||za(e)||!!(Ke&&e&&e[Ke])}function vi(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t}function bi(e,t,n){if(!es(n))return!1;var r=typeof t;return!!("number"==r?qa(n)&&vi(t,n.length):"string"==r&&t in n)&&Ua(n[t],e)}function Ci(e,t){if(Ha(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ls(e))||(ne.test(e)||!te.test(e)||null!=t&&e in we(t))}function Ii(e){var t=si(e),n=Un[t];if("function"!=typeof n||!(t in Hn.prototype))return!1;if(e===n)return!0;var r=ai(n);return!!r&&e===r[0]}(xn&&hi(new xn(new ArrayBuffer(1)))!=P||Bn&&hi(new Bn)!=B||wn&&hi(wn.resolve())!=S||_n&&hi(new _n)!=T||Sn&&hi(new Sn)!=M)&&(hi=function(e){var t=Br(e),n=t==_?e.constructor:o,r=n?Ni(n):"";if(r)switch(r){case Qn:return P;case Mn:return B;case Rn:return S;case Pn:return T;case On:return M}return t});var Ei=Me?Ja:gl;function xi(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Qe)}function Bi(e){return e===e&&!es(e)}function wi(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==o||e in we(n)))}}function _i(e,t,r){return t=Xt(t===o?e.length-1:t,0),function(){for(var o=arguments,i=-1,a=Xt(o.length-t,0),s=n(a);++i<a;)s[i]=o[t+i];i=-1;for(var l=n(t+1);++i<t;)l[i]=o[i];return l[t]=r(s),_t(e,this,l)}}function Si(e,t){return t.length<2?e:Er(e,ro(t,0,-1))}function Di(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ti=Ri(eo),ki=ut||function(e,t){return ht.setTimeout(e,t)},Qi=Ri(to);function Mi(e,t,n){var r=t+"";return Qi(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Dt(m,(function(n){var r="_."+n[0];t&n[1]&&!Mt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(ue):[]}(r),n)))}function Ri(e){var t=0,n=0;return function(){var r=bn(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(o,arguments)}}function Pi(e,t){var n=-1,r=e.length,i=r-1;for(t=t===o?r:t;++n<t;){var a=Xr(n,i),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Oi=function(e){var t=Ra(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,o){t.push(r?o.replace(fe,"$1"):n||e)})),t}));function Fi(e){if("string"==typeof e||ls(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ni(e){if(null!=e){try{return Re.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Li(e){if(e instanceof Hn)return e.clone();var t=new zn(e.__wrapped__,e.__chain__);return t.__actions__=To(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ui=Kr((function(e,t){return Ya(e)?dr(e,mr(t,1,Ya,!0)):[]})),Gi=Kr((function(e,t){var n=Ki(t);return Ya(n)&&(n=o),Ya(e)?dr(e,mr(t,1,Ya,!0),ci(n,2)):[]})),ji=Kr((function(e,t){var n=Ki(t);return Ya(n)&&(n=o),Ya(e)?dr(e,mr(t,1,Ya,!0),o,n):[]}));function zi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:ps(n);return o<0&&(o=Xt(r+o,0)),jt(e,ci(t,3),o)}function Hi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==o&&(i=ps(n),i=n<0?Xt(r+i,0):vn(i,r-1)),jt(e,ci(t,3),i,!0)}function Vi(e){return(null==e?0:e.length)?mr(e,1):[]}function qi(e){return e&&e.length?e[0]:o}var Yi=Kr((function(e){var t=Pt(e,yo);return t.length&&t[0]===e[0]?Dr(t):[]})),Xi=Kr((function(e){var t=Ki(e),n=Pt(e,yo);return t===Ki(n)?t=o:n.pop(),n.length&&n[0]===e[0]?Dr(n,ci(t,2)):[]})),Wi=Kr((function(e){var t=Ki(e),n=Pt(e,yo);return(t="function"==typeof t?t:o)&&n.pop(),n.length&&n[0]===e[0]?Dr(n,o,t):[]}));function Ki(e){var t=null==e?0:e.length;return t?e[t-1]:o}var Ji=Kr(Zi);function Zi(e,t){return e&&e.length&&t&&t.length?qr(e,t):e}var $i=ri((function(e,t){var n=null==e?0:e.length,r=ar(e,t);return Yr(e,Pt(t,(function(e){return vi(e,n)?+e:e})).sort(_o)),r}));function ea(e){return null==e?e:En.call(e)}var ta=Kr((function(e){return uo(mr(e,1,Ya,!0))})),na=Kr((function(e){var t=Ki(e);return Ya(t)&&(t=o),uo(mr(e,1,Ya,!0),ci(t,2))})),ra=Kr((function(e){var t=Ki(e);return t="function"==typeof t?t:o,uo(mr(e,1,Ya,!0),o,t)}));function oa(e){if(!e||!e.length)return[];var t=0;return e=Qt(e,(function(e){if(Ya(e))return t=Xt(e.length,t),!0})),Jt(t,(function(t){return Pt(e,Yt(t))}))}function ia(e,t){if(!e||!e.length)return[];var n=oa(e);return null==t?n:Pt(n,(function(e){return _t(t,o,e)}))}var aa=Kr((function(e,t){return Ya(e)?dr(e,t):[]})),sa=Kr((function(e){return go(Qt(e,Ya))})),la=Kr((function(e){var t=Ki(e);return Ya(t)&&(t=o),go(Qt(e,Ya),ci(t,2))})),ca=Kr((function(e){var t=Ki(e);return t="function"==typeof t?t:o,go(Qt(e,Ya),o,t)})),ua=Kr(oa);var da=Kr((function(e){var t=e.length,n=t>1?e[t-1]:o;return n="function"==typeof n?(e.pop(),n):o,ia(e,n)}));function Aa(e){var t=Un(e);return t.__chain__=!0,t}function fa(e,t){return t(e)}var pa=ri((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return ar(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Hn&&vi(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:fa,args:[i],thisArg:o}),new zn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(o),e}))):this.thru(i)}));var ha=Qo((function(e,t,n){Pe.call(e,n)?++e[n]:ir(e,n,1)}));var ga=Lo(zi),ma=Lo(Hi);function ya(e,t){return(Ha(e)?Dt:Ar)(e,ci(t,3))}function va(e,t){return(Ha(e)?Tt:fr)(e,ci(t,3))}var ba=Qo((function(e,t,n){Pe.call(e,n)?e[n].push(t):ir(e,n,[t])}));var Ca=Kr((function(e,t,r){var o=-1,i="function"==typeof t,a=qa(e)?n(e.length):[];return Ar(e,(function(e){a[++o]=i?_t(t,e,r):Tr(e,t,r)})),a})),Ia=Qo((function(e,t,n){ir(e,n,t)}));function Ea(e,t){return(Ha(e)?Pt:Lr)(e,ci(t,3))}var xa=Qo((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Ba=Kr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&bi(e,t[0],t[1])?t=[]:n>2&&bi(t[0],t[1],t[2])&&(t=[t[0]]),Hr(e,mr(t,1),[])})),wa=ot||function(){return ht.Date.now()};function _a(e,t,n){return t=n?o:t,t=e&&null==t?e.length:t,Zo(e,d,o,o,o,o,t)}function Sa(e,t){var n;if("function"!=typeof t)throw new De(i);return e=ps(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}var Da=Kr((function(e,t,n){var r=1;if(n.length){var o=dn(n,li(Da));r|=c}return Zo(e,r,t,n,o)})),Ta=Kr((function(e,t,n){var r=3;if(n.length){var o=dn(n,li(Ta));r|=c}return Zo(t,r,e,n,o)}));function ka(e,t,n){var r,a,s,l,c,u,d=0,A=!1,f=!1,p=!0;if("function"!=typeof e)throw new De(i);function h(t){var n=r,i=a;return r=a=o,d=t,l=e.apply(i,n)}function g(e){var n=e-u;return u===o||n>=t||n<0||f&&e-d>=s}function m(){var e=wa();if(g(e))return y(e);c=ki(m,function(e){var n=t-(e-u);return f?vn(n,s-(e-d)):n}(e))}function y(e){return c=o,p&&r?h(e):(r=a=o,l)}function v(){var e=wa(),n=g(e);if(r=arguments,a=this,u=e,n){if(c===o)return function(e){return d=e,c=ki(m,t),A?h(e):l}(u);if(f)return Eo(c),c=ki(m,t),h(u)}return c===o&&(c=ki(m,t)),l}return t=gs(t)||0,es(n)&&(A=!!n.leading,s=(f="maxWait"in n)?Xt(gs(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),v.cancel=function(){c!==o&&Eo(c),d=0,r=u=a=c=o},v.flush=function(){return c===o?l:y(wa())},v}var Qa=Kr((function(e,t){return ur(e,1,t)})),Ma=Kr((function(e,t,n){return ur(e,gs(t)||0,n)}));function Ra(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new De(i);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Ra.Cache||Yn),n}function Pa(e){if("function"!=typeof e)throw new De(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ra.Cache=Yn;var Oa=Co((function(e,t){var n=(t=1==t.length&&Ha(t[0])?Pt(t[0],$t(ci())):Pt(mr(t,1),$t(ci()))).length;return Kr((function(r){for(var o=-1,i=vn(r.length,n);++o<i;)r[o]=t[o].call(this,r[o]);return _t(e,this,r)}))})),Fa=Kr((function(e,t){var n=dn(t,li(Fa));return Zo(e,c,o,t,n)})),Na=Kr((function(e,t){var n=dn(t,li(Na));return Zo(e,u,o,t,n)})),La=ri((function(e,t){return Zo(e,A,o,o,o,t)}));function Ua(e,t){return e===t||e!==e&&t!==t}var Ga=Yo(wr),ja=Yo((function(e,t){return e>=t})),za=kr(function(){return arguments}())?kr:function(e){return ts(e)&&Pe.call(e,"callee")&&!Xe.call(e,"callee")},Ha=n.isArray,Va=Ct?$t(Ct):function(e){return ts(e)&&Br(e)==R};function qa(e){return null!=e&&$a(e.length)&&!Ja(e)}function Ya(e){return ts(e)&&qa(e)}var Xa=mt||gl,Wa=It?$t(It):function(e){return ts(e)&&Br(e)==C};function Ka(e){if(!ts(e))return!1;var t=Br(e);return t==I||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!os(e)}function Ja(e){if(!es(e))return!1;var t=Br(e);return t==E||t==x||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Za(e){return"number"==typeof e&&e==ps(e)}function $a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function es(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ts(e){return null!=e&&"object"==typeof e}var ns=Et?$t(Et):function(e){return ts(e)&&hi(e)==B};function rs(e){return"number"==typeof e||ts(e)&&Br(e)==w}function os(e){if(!ts(e)||Br(e)!=_)return!1;var t=qe(e);if(null===t)return!0;var n=Pe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Re.call(n)==Le}var is=xt?$t(xt):function(e){return ts(e)&&Br(e)==D};var as=Bt?$t(Bt):function(e){return ts(e)&&hi(e)==T};function ss(e){return"string"==typeof e||!Ha(e)&&ts(e)&&Br(e)==k}function ls(e){return"symbol"==typeof e||ts(e)&&Br(e)==Q}var cs=wt?$t(wt):function(e){return ts(e)&&$a(e.length)&&!!lt[Br(e)]};var us=Yo(Nr),ds=Yo((function(e,t){return e<=t}));function As(e){if(!e)return[];if(qa(e))return ss(e)?hn(e):To(e);if(Je&&e[Je])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Je]());var t=hi(e);return(t==B?cn:t==T?An:Us)(e)}function fs(e){return e?(e=gs(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function ps(e){var t=fs(e),n=t%1;return t===t?n?t-n:t:0}function hs(e){return e?sr(ps(e),0,g):0}function gs(e){if("number"==typeof e)return e;if(ls(e))return h;if(es(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=es(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Zt(e);var n=me.test(e);return n||ve.test(e)?At(e.slice(2),n?2:8):ge.test(e)?h:+e}function ms(e){return ko(e,Qs(e))}function ys(e){return null==e?"":co(e)}var vs=Mo((function(e,t){if(xi(t)||qa(t))ko(t,ks(t),e);else for(var n in t)Pe.call(t,n)&&tr(e,n,t[n])})),bs=Mo((function(e,t){ko(t,Qs(t),e)})),Cs=Mo((function(e,t,n,r){ko(t,Qs(t),e,r)})),Is=Mo((function(e,t,n,r){ko(t,ks(t),e,r)})),Es=ri(ar);var xs=Kr((function(e,t){e=we(e);var n=-1,r=t.length,i=r>2?t[2]:o;for(i&&bi(t[0],t[1],i)&&(r=1);++n<r;)for(var a=t[n],s=Qs(a),l=-1,c=s.length;++l<c;){var u=s[l],d=e[u];(d===o||Ua(d,Qe[u])&&!Pe.call(e,u))&&(e[u]=a[u])}return e})),Bs=Kr((function(e){return e.push(o,ei),_t(Rs,o,e)}));function ws(e,t,n){var r=null==e?o:Er(e,t);return r===o?n:r}function _s(e,t){return null!=e&&gi(e,t,Sr)}var Ss=jo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ne.call(t)),e[t]=n}),el(rl)),Ds=jo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ne.call(t)),Pe.call(e,t)?e[t].push(n):e[t]=[n]}),ci),Ts=Kr(Tr);function ks(e){return qa(e)?Kn(e):Or(e)}function Qs(e){return qa(e)?Kn(e,!0):Fr(e)}var Ms=Mo((function(e,t,n){jr(e,t,n)})),Rs=Mo((function(e,t,n,r){jr(e,t,n,r)})),Ps=ri((function(e,t){var n={};if(null==e)return n;var r=!1;t=Pt(t,(function(t){return t=bo(t,e),r||(r=t.length>1),t})),ko(e,ii(e),n),r&&(n=lr(n,7,ti));for(var o=t.length;o--;)Ao(n,t[o]);return n}));var Os=ri((function(e,t){return null==e?{}:function(e,t){return Vr(e,t,(function(t,n){return _s(e,n)}))}(e,t)}));function Fs(e,t){if(null==e)return{};var n=Pt(ii(e),(function(e){return[e]}));return t=ci(t),Vr(e,n,(function(e,n){return t(e,n[0])}))}var Ns=Jo(ks),Ls=Jo(Qs);function Us(e){return null==e?[]:en(e,ks(e))}var Gs=Fo((function(e,t,n){return t=t.toLowerCase(),e+(n?js(t):t)}));function js(e){return Ks(ys(e).toLowerCase())}function zs(e){return(e=ys(e))&&e.replace(Ce,on).replace(tt,"")}var Hs=Fo((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Vs=Fo((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),qs=Oo("toLowerCase");var Ys=Fo((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Xs=Fo((function(e,t,n){return e+(n?" ":"")+Ks(t)}));var Ws=Fo((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ks=Oo("toUpperCase");function Js(e,t,n){return e=ys(e),(t=n?o:t)===o?function(e){return it.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(de)||[]}(e):e.match(t)||[]}var Zs=Kr((function(e,t){try{return _t(e,o,t)}catch(n){return Ka(n)?n:new se(n)}})),$s=ri((function(e,t){return Dt(t,(function(t){t=Fi(t),ir(e,t,Da(e[t],e))})),e}));function el(e){return function(){return e}}var tl=Uo(),nl=Uo(!0);function rl(e){return e}function ol(e){return Pr("function"==typeof e?e:lr(e,1))}var il=Kr((function(e,t){return function(n){return Tr(n,e,t)}})),al=Kr((function(e,t){return function(n){return Tr(e,n,t)}}));function sl(e,t,n){var r=ks(t),o=Ir(t,r);null!=n||es(t)&&(o.length||!r.length)||(n=t,t=e,e=this,o=Ir(t,ks(t)));var i=!(es(n)&&"chain"in n)||!!n.chain,a=Ja(e);return Dt(o,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__);return(n.__actions__=To(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Ot([this.value()],arguments))})})),e}function ll(){}var cl=Ho(Pt),ul=Ho(kt),dl=Ho(Lt);function Al(e){return Ci(e)?Yt(Fi(e)):function(e){return function(t){return Er(t,e)}}(e)}var fl=qo(),pl=qo(!0);function hl(){return[]}function gl(){return!1}var ml=zo((function(e,t){return e+t}),0),yl=Wo("ceil"),vl=zo((function(e,t){return e/t}),1),bl=Wo("floor");var Cl=zo((function(e,t){return e*t}),1),Il=Wo("round"),El=zo((function(e,t){return e-t}),0);return Un.after=function(e,t){if("function"!=typeof t)throw new De(i);return e=ps(e),function(){if(--e<1)return t.apply(this,arguments)}},Un.ary=_a,Un.assign=vs,Un.assignIn=bs,Un.assignInWith=Cs,Un.assignWith=Is,Un.at=Es,Un.before=Sa,Un.bind=Da,Un.bindAll=$s,Un.bindKey=Ta,Un.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ha(e)?e:[e]},Un.chain=Aa,Un.chunk=function(e,t,r){t=(r?bi(e,t,r):t===o)?1:Xt(ps(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var a=0,s=0,l=n(ft(i/t));a<i;)l[s++]=ro(e,a,a+=t);return l},Un.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o},Un.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],o=e;o--;)t[o-1]=arguments[o];return Ot(Ha(r)?To(r):[r],mr(t,1))},Un.cond=function(e){var t=null==e?0:e.length,n=ci();return e=t?Pt(e,(function(e){if("function"!=typeof e[1])throw new De(i);return[n(e[0]),e[1]]})):[],Kr((function(n){for(var r=-1;++r<t;){var o=e[r];if(_t(o[0],this,n))return _t(o[1],this,n)}}))},Un.conforms=function(e){return function(e){var t=ks(e);return function(n){return cr(n,e,t)}}(lr(e,1))},Un.constant=el,Un.countBy=ha,Un.create=function(e,t){var n=Gn(e);return null==t?n:or(n,t)},Un.curry=function e(t,n,r){var i=Zo(t,8,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},Un.curryRight=function e(t,n,r){var i=Zo(t,l,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},Un.debounce=ka,Un.defaults=xs,Un.defaultsDeep=Bs,Un.defer=Qa,Un.delay=Ma,Un.difference=Ui,Un.differenceBy=Gi,Un.differenceWith=ji,Un.drop=function(e,t,n){var r=null==e?0:e.length;return r?ro(e,(t=n||t===o?1:ps(t))<0?0:t,r):[]},Un.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ro(e,0,(t=r-(t=n||t===o?1:ps(t)))<0?0:t):[]},Un.dropRightWhile=function(e,t){return e&&e.length?po(e,ci(t,3),!0,!0):[]},Un.dropWhile=function(e,t){return e&&e.length?po(e,ci(t,3),!0):[]},Un.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&bi(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=ps(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:ps(r))<0&&(r+=i),r=n>r?0:hs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Un.filter=function(e,t){return(Ha(e)?Qt:gr)(e,ci(t,3))},Un.flatMap=function(e,t){return mr(Ea(e,t),1)},Un.flatMapDeep=function(e,t){return mr(Ea(e,t),f)},Un.flatMapDepth=function(e,t,n){return n=n===o?1:ps(n),mr(Ea(e,t),n)},Un.flatten=Vi,Un.flattenDeep=function(e){return(null==e?0:e.length)?mr(e,f):[]},Un.flattenDepth=function(e,t){return(null==e?0:e.length)?mr(e,t=t===o?1:ps(t)):[]},Un.flip=function(e){return Zo(e,512)},Un.flow=tl,Un.flowRight=nl,Un.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r},Un.functions=function(e){return null==e?[]:Ir(e,ks(e))},Un.functionsIn=function(e){return null==e?[]:Ir(e,Qs(e))},Un.groupBy=ba,Un.initial=function(e){return(null==e?0:e.length)?ro(e,0,-1):[]},Un.intersection=Yi,Un.intersectionBy=Xi,Un.intersectionWith=Wi,Un.invert=Ss,Un.invertBy=Ds,Un.invokeMap=Ca,Un.iteratee=ol,Un.keyBy=Ia,Un.keys=ks,Un.keysIn=Qs,Un.map=Ea,Un.mapKeys=function(e,t){var n={};return t=ci(t,3),br(e,(function(e,r,o){ir(n,t(e,r,o),e)})),n},Un.mapValues=function(e,t){var n={};return t=ci(t,3),br(e,(function(e,r,o){ir(n,r,t(e,r,o))})),n},Un.matches=function(e){return Ur(lr(e,1))},Un.matchesProperty=function(e,t){return Gr(e,lr(t,1))},Un.memoize=Ra,Un.merge=Ms,Un.mergeWith=Rs,Un.method=il,Un.methodOf=al,Un.mixin=sl,Un.negate=Pa,Un.nthArg=function(e){return e=ps(e),Kr((function(t){return zr(t,e)}))},Un.omit=Ps,Un.omitBy=function(e,t){return Fs(e,Pa(ci(t)))},Un.once=function(e){return Sa(2,e)},Un.orderBy=function(e,t,n,r){return null==e?[]:(Ha(t)||(t=null==t?[]:[t]),Ha(n=r?o:n)||(n=null==n?[]:[n]),Hr(e,t,n))},Un.over=cl,Un.overArgs=Oa,Un.overEvery=ul,Un.overSome=dl,Un.partial=Fa,Un.partialRight=Na,Un.partition=xa,Un.pick=Os,Un.pickBy=Fs,Un.property=Al,Un.propertyOf=function(e){return function(t){return null==e?o:Er(e,t)}},Un.pull=Ji,Un.pullAll=Zi,Un.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?qr(e,t,ci(n,2)):e},Un.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?qr(e,t,o,n):e},Un.pullAt=$i,Un.range=fl,Un.rangeRight=pl,Un.rearg=La,Un.reject=function(e,t){return(Ha(e)?Qt:gr)(e,Pa(ci(t,3)))},Un.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=ci(t,3);++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}return Yr(e,o),n},Un.rest=function(e,t){if("function"!=typeof e)throw new De(i);return Kr(e,t=t===o?t:ps(t))},Un.reverse=ea,Un.sampleSize=function(e,t,n){return t=(n?bi(e,t,n):t===o)?1:ps(t),(Ha(e)?Zn:Zr)(e,t)},Un.set=function(e,t,n){return null==e?e:$r(e,t,n)},Un.setWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:$r(e,t,n,r)},Un.shuffle=function(e){return(Ha(e)?$n:no)(e)},Un.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&bi(e,t,n)?(t=0,n=r):(t=null==t?0:ps(t),n=n===o?r:ps(n)),ro(e,t,n)):[]},Un.sortBy=Ba,Un.sortedUniq=function(e){return e&&e.length?so(e):[]},Un.sortedUniqBy=function(e,t){return e&&e.length?so(e,ci(t,2)):[]},Un.split=function(e,t,n){return n&&"number"!=typeof n&&bi(e,t,n)&&(t=n=o),(n=n===o?g:n>>>0)?(e=ys(e))&&("string"==typeof t||null!=t&&!is(t))&&!(t=co(t))&&ln(e)?Io(hn(e),0,n):e.split(t,n):[]},Un.spread=function(e,t){if("function"!=typeof e)throw new De(i);return t=null==t?0:Xt(ps(t),0),Kr((function(n){var r=n[t],o=Io(n,0,t);return r&&Ot(o,r),_t(e,this,o)}))},Un.tail=function(e){var t=null==e?0:e.length;return t?ro(e,1,t):[]},Un.take=function(e,t,n){return e&&e.length?ro(e,0,(t=n||t===o?1:ps(t))<0?0:t):[]},Un.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ro(e,(t=r-(t=n||t===o?1:ps(t)))<0?0:t,r):[]},Un.takeRightWhile=function(e,t){return e&&e.length?po(e,ci(t,3),!1,!0):[]},Un.takeWhile=function(e,t){return e&&e.length?po(e,ci(t,3)):[]},Un.tap=function(e,t){return t(e),e},Un.throttle=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new De(i);return es(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),ka(e,t,{leading:r,maxWait:t,trailing:o})},Un.thru=fa,Un.toArray=As,Un.toPairs=Ns,Un.toPairsIn=Ls,Un.toPath=function(e){return Ha(e)?Pt(e,Fi):ls(e)?[e]:To(Oi(ys(e)))},Un.toPlainObject=ms,Un.transform=function(e,t,n){var r=Ha(e),o=r||Xa(e)||cs(e);if(t=ci(t,4),null==n){var i=e&&e.constructor;n=o?r?new i:[]:es(e)&&Ja(i)?Gn(qe(e)):{}}return(o?Dt:br)(e,(function(e,r,o){return t(n,e,r,o)})),n},Un.unary=function(e){return _a(e,1)},Un.union=ta,Un.unionBy=na,Un.unionWith=ra,Un.uniq=function(e){return e&&e.length?uo(e):[]},Un.uniqBy=function(e,t){return e&&e.length?uo(e,ci(t,2)):[]},Un.uniqWith=function(e,t){return t="function"==typeof t?t:o,e&&e.length?uo(e,o,t):[]},Un.unset=function(e,t){return null==e||Ao(e,t)},Un.unzip=oa,Un.unzipWith=ia,Un.update=function(e,t,n){return null==e?e:fo(e,t,vo(n))},Un.updateWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:fo(e,t,vo(n),r)},Un.values=Us,Un.valuesIn=function(e){return null==e?[]:en(e,Qs(e))},Un.without=aa,Un.words=Js,Un.wrap=function(e,t){return Fa(vo(t),e)},Un.xor=sa,Un.xorBy=la,Un.xorWith=ca,Un.zip=ua,Un.zipObject=function(e,t){return mo(e||[],t||[],tr)},Un.zipObjectDeep=function(e,t){return mo(e||[],t||[],$r)},Un.zipWith=da,Un.entries=Ns,Un.entriesIn=Ls,Un.extend=bs,Un.extendWith=Cs,sl(Un,Un),Un.add=ml,Un.attempt=Zs,Un.camelCase=Gs,Un.capitalize=js,Un.ceil=yl,Un.clamp=function(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=(n=gs(n))===n?n:0),t!==o&&(t=(t=gs(t))===t?t:0),sr(gs(e),t,n)},Un.clone=function(e){return lr(e,4)},Un.cloneDeep=function(e){return lr(e,5)},Un.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:o)},Un.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:o)},Un.conformsTo=function(e,t){return null==t||cr(e,t,ks(t))},Un.deburr=zs,Un.defaultTo=function(e,t){return null==e||e!==e?t:e},Un.divide=vl,Un.endsWith=function(e,t,n){e=ys(e),t=co(t);var r=e.length,i=n=n===o?r:sr(ps(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Un.eq=Ua,Un.escape=function(e){return(e=ys(e))&&J.test(e)?e.replace(W,an):e},Un.escapeRegExp=function(e){return(e=ys(e))&&ie.test(e)?e.replace(oe,"\\$&"):e},Un.every=function(e,t,n){var r=Ha(e)?kt:pr;return n&&bi(e,t,n)&&(t=o),r(e,ci(t,3))},Un.find=ga,Un.findIndex=zi,Un.findKey=function(e,t){return Gt(e,ci(t,3),br)},Un.findLast=ma,Un.findLastIndex=Hi,Un.findLastKey=function(e,t){return Gt(e,ci(t,3),Cr)},Un.floor=bl,Un.forEach=ya,Un.forEachRight=va,Un.forIn=function(e,t){return null==e?e:yr(e,ci(t,3),Qs)},Un.forInRight=function(e,t){return null==e?e:vr(e,ci(t,3),Qs)},Un.forOwn=function(e,t){return e&&br(e,ci(t,3))},Un.forOwnRight=function(e,t){return e&&Cr(e,ci(t,3))},Un.get=ws,Un.gt=Ga,Un.gte=ja,Un.has=function(e,t){return null!=e&&gi(e,t,_r)},Un.hasIn=_s,Un.head=qi,Un.identity=rl,Un.includes=function(e,t,n,r){e=qa(e)?e:Us(e),n=n&&!r?ps(n):0;var o=e.length;return n<0&&(n=Xt(o+n,0)),ss(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&zt(e,t,n)>-1},Un.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:ps(n);return o<0&&(o=Xt(r+o,0)),zt(e,t,o)},Un.inRange=function(e,t,n){return t=fs(t),n===o?(n=t,t=0):n=fs(n),function(e,t,n){return e>=vn(t,n)&&e<Xt(t,n)}(e=gs(e),t,n)},Un.invoke=Ts,Un.isArguments=za,Un.isArray=Ha,Un.isArrayBuffer=Va,Un.isArrayLike=qa,Un.isArrayLikeObject=Ya,Un.isBoolean=function(e){return!0===e||!1===e||ts(e)&&Br(e)==b},Un.isBuffer=Xa,Un.isDate=Wa,Un.isElement=function(e){return ts(e)&&1===e.nodeType&&!os(e)},Un.isEmpty=function(e){if(null==e)return!0;if(qa(e)&&(Ha(e)||"string"==typeof e||"function"==typeof e.splice||Xa(e)||cs(e)||za(e)))return!e.length;var t=hi(e);if(t==B||t==T)return!e.size;if(xi(e))return!Or(e).length;for(var n in e)if(Pe.call(e,n))return!1;return!0},Un.isEqual=function(e,t){return Qr(e,t)},Un.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:o)?n(e,t):o;return r===o?Qr(e,t,o,n):!!r},Un.isError=Ka,Un.isFinite=function(e){return"number"==typeof e&&vt(e)},Un.isFunction=Ja,Un.isInteger=Za,Un.isLength=$a,Un.isMap=ns,Un.isMatch=function(e,t){return e===t||Mr(e,t,di(t))},Un.isMatchWith=function(e,t,n){return n="function"==typeof n?n:o,Mr(e,t,di(t),n)},Un.isNaN=function(e){return rs(e)&&e!=+e},Un.isNative=function(e){if(Ei(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rr(e)},Un.isNil=function(e){return null==e},Un.isNull=function(e){return null===e},Un.isNumber=rs,Un.isObject=es,Un.isObjectLike=ts,Un.isPlainObject=os,Un.isRegExp=is,Un.isSafeInteger=function(e){return Za(e)&&e>=-9007199254740991&&e<=p},Un.isSet=as,Un.isString=ss,Un.isSymbol=ls,Un.isTypedArray=cs,Un.isUndefined=function(e){return e===o},Un.isWeakMap=function(e){return ts(e)&&hi(e)==M},Un.isWeakSet=function(e){return ts(e)&&"[object WeakSet]"==Br(e)},Un.join=function(e,t){return null==e?"":bt.call(e,t)},Un.kebabCase=Hs,Un.last=Ki,Un.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=ps(n))<0?Xt(r+i,0):vn(i,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):jt(e,Vt,i,!0)},Un.lowerCase=Vs,Un.lowerFirst=qs,Un.lt=us,Un.lte=ds,Un.max=function(e){return e&&e.length?hr(e,rl,wr):o},Un.maxBy=function(e,t){return e&&e.length?hr(e,ci(t,2),wr):o},Un.mean=function(e){return qt(e,rl)},Un.meanBy=function(e,t){return qt(e,ci(t,2))},Un.min=function(e){return e&&e.length?hr(e,rl,Nr):o},Un.minBy=function(e,t){return e&&e.length?hr(e,ci(t,2),Nr):o},Un.stubArray=hl,Un.stubFalse=gl,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=Cl,Un.nth=function(e,t){return e&&e.length?zr(e,ps(t)):o},Un.noConflict=function(){return ht._===this&&(ht._=Ue),this},Un.noop=ll,Un.now=wa,Un.pad=function(e,t,n){e=ys(e);var r=(t=ps(t))?pn(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return Vo(pt(o),n)+e+Vo(ft(o),n)},Un.padEnd=function(e,t,n){e=ys(e);var r=(t=ps(t))?pn(e):0;return t&&r<t?e+Vo(t-r,n):e},Un.padStart=function(e,t,n){e=ys(e);var r=(t=ps(t))?pn(e):0;return t&&r<t?Vo(t-r,n)+e:e},Un.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Cn(ys(e).replace(ae,""),t||0)},Un.random=function(e,t,n){if(n&&"boolean"!=typeof n&&bi(e,t,n)&&(t=n=o),n===o&&("boolean"==typeof t?(n=t,t=o):"boolean"==typeof e&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=fs(e),t===o?(t=e,e=0):t=fs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=In();return vn(e+i*(t-e+dt("1e-"+((i+"").length-1))),t)}return Xr(e,t)},Un.reduce=function(e,t,n){var r=Ha(e)?Ft:Wt,o=arguments.length<3;return r(e,ci(t,4),n,o,Ar)},Un.reduceRight=function(e,t,n){var r=Ha(e)?Nt:Wt,o=arguments.length<3;return r(e,ci(t,4),n,o,fr)},Un.repeat=function(e,t,n){return t=(n?bi(e,t,n):t===o)?1:ps(t),Wr(ys(e),t)},Un.replace=function(){var e=arguments,t=ys(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Un.result=function(e,t,n){var r=-1,i=(t=bo(t,e)).length;for(i||(i=1,e=o);++r<i;){var a=null==e?o:e[Fi(t[r])];a===o&&(r=i,a=n),e=Ja(a)?a.call(e):a}return e},Un.round=Il,Un.runInContext=e,Un.sample=function(e){return(Ha(e)?Jn:Jr)(e)},Un.size=function(e){if(null==e)return 0;if(qa(e))return ss(e)?pn(e):e.length;var t=hi(e);return t==B||t==T?e.size:Or(e).length},Un.snakeCase=Ys,Un.some=function(e,t,n){var r=Ha(e)?Lt:oo;return n&&bi(e,t,n)&&(t=o),r(e,ci(t,3))},Un.sortedIndex=function(e,t){return io(e,t)},Un.sortedIndexBy=function(e,t,n){return ao(e,t,ci(n,2))},Un.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=io(e,t);if(r<n&&Ua(e[r],t))return r}return-1},Un.sortedLastIndex=function(e,t){return io(e,t,!0)},Un.sortedLastIndexBy=function(e,t,n){return ao(e,t,ci(n,2),!0)},Un.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=io(e,t,!0)-1;if(Ua(e[n],t))return n}return-1},Un.startCase=Xs,Un.startsWith=function(e,t,n){return e=ys(e),n=null==n?0:sr(ps(n),0,e.length),t=co(t),e.slice(n,n+t.length)==t},Un.subtract=El,Un.sum=function(e){return e&&e.length?Kt(e,rl):0},Un.sumBy=function(e,t){return e&&e.length?Kt(e,ci(t,2)):0},Un.template=function(e,t,n){var r=Un.templateSettings;n&&bi(e,t,n)&&(t=o),e=ys(e),t=Cs({},t,r,$o);var i,a,s=Cs({},t.imports,r.imports,$o),l=ks(s),c=en(s,l),u=0,d=t.interpolate||Ie,A="__p += '",f=_e((t.escape||Ie).source+"|"+d.source+"|"+(d===ee?pe:Ie).source+"|"+(t.evaluate||Ie).source+"|$","g"),p="//# sourceURL="+(Pe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++st+"]")+"\n";e.replace(f,(function(t,n,r,o,s,l){return r||(r=o),A+=e.slice(u,l).replace(Ee,sn),n&&(i=!0,A+="' +\n__e("+n+") +\n'"),s&&(a=!0,A+="';\n"+s+";\n__p += '"),r&&(A+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),A+="';\n";var h=Pe.call(t,"variable")&&t.variable;if(h){if(Ae.test(h))throw new se("Invalid `variable` option passed into `_.template`")}else A="with (obj) {\n"+A+"\n}\n";A=(a?A.replace(V,""):A).replace(q,"$1").replace(Y,"$1;"),A="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+A+"return __p\n}";var g=Zs((function(){return xe(l,p+"return "+A).apply(o,c)}));if(g.source=A,Ka(g))throw g;return g},Un.times=function(e,t){if((e=ps(e))<1||e>p)return[];var n=g,r=vn(e,g);t=ci(t),e-=g;for(var o=Jt(r,t);++n<e;)t(n);return o},Un.toFinite=fs,Un.toInteger=ps,Un.toLength=hs,Un.toLower=function(e){return ys(e).toLowerCase()},Un.toNumber=gs,Un.toSafeInteger=function(e){return e?sr(ps(e),-9007199254740991,p):0===e?e:0},Un.toString=ys,Un.toUpper=function(e){return ys(e).toUpperCase()},Un.trim=function(e,t,n){if((e=ys(e))&&(n||t===o))return Zt(e);if(!e||!(t=co(t)))return e;var r=hn(e),i=hn(t);return Io(r,nn(r,i),rn(r,i)+1).join("")},Un.trimEnd=function(e,t,n){if((e=ys(e))&&(n||t===o))return e.slice(0,gn(e)+1);if(!e||!(t=co(t)))return e;var r=hn(e);return Io(r,0,rn(r,hn(t))+1).join("")},Un.trimStart=function(e,t,n){if((e=ys(e))&&(n||t===o))return e.replace(ae,"");if(!e||!(t=co(t)))return e;var r=hn(e);return Io(r,nn(r,hn(t))).join("")},Un.truncate=function(e,t){var n=30,r="...";if(es(t)){var i="separator"in t?t.separator:i;n="length"in t?ps(t.length):n,r="omission"in t?co(t.omission):r}var a=(e=ys(e)).length;if(ln(e)){var s=hn(e);a=s.length}if(n>=a)return e;var l=n-pn(r);if(l<1)return r;var c=s?Io(s,0,l).join(""):e.slice(0,l);if(i===o)return c+r;if(s&&(l+=c.length-l),is(i)){if(e.slice(l).search(i)){var u,d=c;for(i.global||(i=_e(i.source,ys(he.exec(i))+"g")),i.lastIndex=0;u=i.exec(d);)var A=u.index;c=c.slice(0,A===o?l:A)}}else if(e.indexOf(co(i),l)!=l){var f=c.lastIndexOf(i);f>-1&&(c=c.slice(0,f))}return c+r},Un.unescape=function(e){return(e=ys(e))&&K.test(e)?e.replace(X,mn):e},Un.uniqueId=function(e){var t=++Oe;return ys(e)+t},Un.upperCase=Ws,Un.upperFirst=Ks,Un.each=ya,Un.eachRight=va,Un.first=qi,sl(Un,function(){var e={};return br(Un,(function(t,n){Pe.call(Un.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Un.VERSION="4.17.21",Dt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Un[e].placeholder=Un})),Dt(["drop","take"],(function(e,t){Hn.prototype[e]=function(n){n=n===o?1:Xt(ps(n),0);var r=this.__filtered__&&!t?new Hn(this):this.clone();return r.__filtered__?r.__takeCount__=vn(n,r.__takeCount__):r.__views__.push({size:vn(n,g),type:e+(r.__dir__<0?"Right":"")}),r},Hn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Dt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Hn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ci(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Dt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Hn.prototype[e]=function(){return this[n](1).value()[0]}})),Dt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Hn.prototype[e]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(rl)},Hn.prototype.find=function(e){return this.filter(e).head()},Hn.prototype.findLast=function(e){return this.reverse().find(e)},Hn.prototype.invokeMap=Kr((function(e,t){return"function"==typeof e?new Hn(this):this.map((function(n){return Tr(n,e,t)}))})),Hn.prototype.reject=function(e){return this.filter(Pa(ci(e)))},Hn.prototype.slice=function(e,t){e=ps(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Hn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o&&(n=(t=ps(t))<0?n.dropRight(-t):n.take(t-e)),n)},Hn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hn.prototype.toArray=function(){return this.take(g)},br(Hn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Un[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);i&&(Un.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,l=t instanceof Hn,c=s[0],u=l||Ha(t),d=function(e){var t=i.apply(Un,Ot([e],s));return r&&A?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var A=this.__chain__,f=!!this.__actions__.length,p=a&&!A,h=l&&!f;if(!a&&u){t=h?t:new Hn(this);var g=e.apply(t,s);return g.__actions__.push({func:fa,args:[d],thisArg:o}),new zn(g,A)}return p&&h?e.apply(this,s):(g=this.thru(d),p?r?g.value()[0]:g.value():g)})})),Dt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Te[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Un.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(Ha(o)?o:[],e)}return this[n]((function(n){return t.apply(Ha(n)?n:[],e)}))}})),br(Hn.prototype,(function(e,t){var n=Un[t];if(n){var r=n.name+"";Pe.call(kn,r)||(kn[r]=[]),kn[r].push({name:t,func:n})}})),kn[Go(o,2).name]=[{name:"wrapper",func:o}],Hn.prototype.clone=function(){var e=new Hn(this.__wrapped__);return e.__actions__=To(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=To(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=To(this.__views__),e},Hn.prototype.reverse=function(){if(this.__filtered__){var e=new Hn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ha(e),r=t<0,o=n?e.length:0,i=function(e,t,n){var r=-1,o=n.length;for(;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=vn(t,e+a);break;case"takeRight":e=Xt(e,t-a)}}return{start:e,end:t}}(0,o,this.__views__),a=i.start,s=i.end,l=s-a,c=r?s:a-1,u=this.__iteratees__,d=u.length,A=0,f=vn(l,this.__takeCount__);if(!n||!r&&o==l&&f==l)return ho(e,this.__actions__);var p=[];e:for(;l--&&A<f;){for(var h=-1,g=e[c+=t];++h<d;){var m=u[h],y=m.iteratee,v=m.type,b=y(g);if(2==v)g=b;else if(!b){if(1==v)continue e;break e}}p[A++]=g}return p},Un.prototype.at=pa,Un.prototype.chain=function(){return Aa(this)},Un.prototype.commit=function(){return new zn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===o&&(this.__values__=As(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?o:this.__values__[this.__index__++]}},Un.prototype.plant=function(e){for(var t,n=this;n instanceof jn;){var r=Li(n);r.__index__=0,r.__values__=o,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Un.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hn){var t=e;return this.__actions__.length&&(t=new Hn(this)),(t=t.reverse()).__actions__.push({func:fa,args:[ea],thisArg:o}),new zn(t,this.__chain__)}return this.thru(ea)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return ho(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,Je&&(Un.prototype[Je]=function(){return this}),Un}();ht._=yn,(r=function(){return yn}.call(t,n,t,e))===o||(e.exports=r)}.call(this)},862:()=>{},46:()=>{}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};n.r(e),n.d(e,{VERSION:()=>Hl,after:()=>bd,all:()=>Ud,allKeys:()=>nu,any:()=>Gd,assign:()=>bu,before:()=>Cd,bind:()=>ld,bindAll:()=>dd,chain:()=>od,chunk:()=>EA,clone:()=>xu,collect:()=>Rd,compact:()=>AA,compose:()=>vd,constant:()=>Nc,contains:()=>jd,countBy:()=>nA,create:()=>Eu,debounce:()=>gd,default:()=>wA,defaults:()=>Cu,defer:()=>pd,delay:()=>fd,detect:()=>kd,difference:()=>pA,drop:()=>uA,each:()=>Md,escape:()=>qu,every:()=>Ud,extend:()=>vu,extendOwn:()=>bu,filter:()=>Nd,find:()=>kd,findIndex:()=>Bd,findKey:()=>Ed,findLastIndex:()=>wd,findWhere:()=>Qd,first:()=>cA,flatten:()=>fA,foldl:()=>Od,foldr:()=>Fd,forEach:()=>Md,functions:()=>mu,get:()=>Du,groupBy:()=>eA,has:()=>Tu,head:()=>cA,identity:()=>ku,include:()=>jd,includes:()=>jd,indexBy:()=>tA,indexOf:()=>Dd,initial:()=>lA,inject:()=>Od,intersection:()=>yA,invert:()=>gu,invoke:()=>zd,isArguments:()=>Pc,isArray:()=>Qc,isArrayBuffer:()=>Ec,isBoolean:()=>pc,isDataView:()=>kc,isDate:()=>vc,isElement:()=>hc,isEmpty:()=>Xc,isEqual:()=>tu,isError:()=>Cc,isFinite:()=>Oc,isFunction:()=>wc,isMap:()=>uu,isMatch:()=>Wc,isNaN:()=>Fc,isNull:()=>Ac,isNumber:()=>yc,isObject:()=>dc,isRegExp:()=>bc,isSet:()=>Au,isString:()=>mc,isSymbol:()=>Ic,isTypedArray:()=>Hc,isUndefined:()=>fc,isWeakMap:()=>du,isWeakSet:()=>fu,iteratee:()=>Ou,keys:()=>Yc,last:()=>dA,lastIndexOf:()=>Td,map:()=>Rd,mapObject:()=>Nu,matcher:()=>Qu,matches:()=>Qu,max:()=>qd,memoize:()=>Ad,methods:()=>mu,min:()=>Yd,mixin:()=>BA,negate:()=>yd,noop:()=>Lu,now:()=>zu,object:()=>CA,omit:()=>sA,once:()=>Id,pairs:()=>hu,partial:()=>sd,partition:()=>rA,pick:()=>aA,pluck:()=>Hd,property:()=>Mu,propertyOf:()=>Uu,random:()=>ju,range:()=>IA,reduce:()=>Od,reduceRight:()=>Fd,reject:()=>Ld,rest:()=>uA,restArguments:()=>uc,result:()=>td,sample:()=>Kd,select:()=>Nd,shuffle:()=>Jd,size:()=>oA,some:()=>Gd,sortBy:()=>Zd,sortedIndex:()=>_d,tail:()=>uA,take:()=>cA,tap:()=>Bu,template:()=>ed,templateSettings:()=>Xu,throttle:()=>hd,times:()=>Gu,toArray:()=>Wd,toPath:()=>wu,transpose:()=>vA,unescape:()=>Yu,union:()=>mA,uniq:()=>gA,unique:()=>gA,uniqueId:()=>rd,unzip:()=>vA,values:()=>pu,where:()=>Vd,without:()=>hA,wrap:()=>md,zip:()=>bA});var t={};n.r(t),n.d(t,{addChild:()=>TA,assignAttributes:()=>NA,clearInternalNodes:()=>GA,createNode:()=>kA,deleteANode:()=>QA,getInternals:()=>RA,getNodeByName:()=>FA,getNodes:()=>OA,getRootNode:()=>PA,getTips:()=>MA,graftANode:()=>DA,isLeafNode:()=>LA,selectAllDescendants:()=>jA,updateKeyName:()=>UA});var r={};n.r(r),n.d(r,{default:()=>qA,loadAnnotations:()=>VA,parseAnnotations:()=>HA});var o={};n.r(o),n.d(o,{pathToRoot:()=>nf,reroot:()=>ef,rootpath:()=>tf});var i={};n.r(i),n.d(i,{alignTips:()=>yf,css_classes:()=>hf,internalNames:()=>gf,layoutHandler:()=>Cf,nodeBubbleSize:()=>vf,nodeSpan:()=>Ef,predefined_selecters:()=>xf,radial:()=>mf,selectionCallback:()=>Bf,selectionLabel:()=>If,shiftTip:()=>bf});var a={};n.r(a),n.d(a,{defNodeLabel:()=>Nf,drawNode:()=>_f,hasHiddenNodes:()=>Rf,internalLabel:()=>Ff,isNodeCollapsed:()=>Pf,nodeCssSelectors:()=>Of,nodeLabel:()=>Lf,nodeNotshown:()=>Mf,nodeSpan:()=>Tf,nodeVisible:()=>Qf,reclassNode:()=>kf,shiftTip:()=>wf,showInternalName:()=>Df,updateHasHiddenNodes:()=>Sf});var s={};n.r(s),n.d(s,{cladeCssSelectors:()=>Uf,updateCollapsedClades:()=>Gf});var l={};n.r(l),n.d(l,{drawEdge:()=>jf,edgeCssSelectors:()=>Yf,edgeVisible:()=>qf,initializeEdgeLabels:()=>Hf,placeAlongAnEdge:()=>Xf,reclassEdge:()=>zf,syncEdgeLabels:()=>Vf});var c={};n.r(c),n.d(c,{countUpdate:()=>ep,d3PhylotreeAddEventListener:()=>rp,d3PhylotreeEventListener:()=>np,d3PhylotreeSvgRotate:()=>ip,d3PhylotreeSvgTranslate:()=>op,d3PhylotreeTriggerLayout:()=>tp,rescale:()=>Zf,resizeSvg:()=>Jf,toggleCollapse:()=>Kf,triggerRefresh:()=>$f});var u={};n.r(u),n.d(u,{addCustomMenu:()=>lp,getSelection:()=>up,modifySelection:()=>cp,nodeDropdownMenu:()=>sp,selectAllDescendants:()=>dp,selectionCallback:()=>Ap});var d={};n.r(d),n.d(d,{boolean:()=>uv,booleanish:()=>dv,commaOrSpaceSeparated:()=>gv,commaSeparated:()=>hv,number:()=>fv,overloadedBoolean:()=>Av,spaceSeparated:()=>pv});var A={};n.r(A),n.d(A,{attentionMarkers:()=>eC,contentInitial:()=>Xb,disable:()=>tC,document:()=>Yb,flow:()=>Kb,flowInitial:()=>Wb,insideSpan:()=>$b,string:()=>Jb,text:()=>Zb});var f={};n.r(f),n.d(f,{atomicHet:()=>WO,atomicSequence:()=>YO,bundleElementImpl:()=>JO,bundleGenerator:()=>ZO,defaultBondTest:()=>qO,spheres:()=>KO,water:()=>XO});var p={};n.r(p),n.d(p,{all:()=>oF,atoms:()=>cF,bondedAtomicPairs:()=>fF,chains:()=>aF,none:()=>rF,querySelection:()=>AF,residues:()=>iF,rings:()=>dF});var h={};n.r(h),n.d(h,{exceptBy:()=>AU,expandProperty:()=>pU,includeConnected:()=>hU,includeSurroundings:()=>cU,intersectBy:()=>dU,querySelection:()=>uU,surroundingLigands:()=>mU,union:()=>fU,wholeResidues:()=>oU});var g={};n.r(g),n.d(g,{areIntersectedBy:()=>SU,first:()=>BU,getCurrentStructureProperties:()=>wU,isConnectedTo:()=>TU,pick:()=>xU,withSameAtomProperties:()=>_U,within:()=>DU});var m={};n.r(m),n.d(m,{intersect:()=>QU,merge:()=>kU});var y={};n.r(y),n.d(y,{atomCount:()=>MU,countQuery:()=>RU,propertySet:()=>PU});var v={};n.r(v),n.d(v,{DeflateData:()=>QH,Download:()=>TH,DownloadBlob:()=>kH,ImportJson:()=>qH,ImportString:()=>VH,LazyVolume:()=>XH,ParseBlob:()=>PH,ParseCcp4:()=>jH,ParseCif:()=>OH,ParseCube:()=>FH,ParseDsn6:()=>zH,ParseDx:()=>HH,ParseJson:()=>YH,ParsePly:()=>GH,ParsePrmtop:()=>LH,ParsePsf:()=>NH,ParseTop:()=>UH,RawData:()=>MH,ReadFile:()=>RH});var b={};n.r(b),n.d(b,{CreateGroup:()=>WH});var C={};n.r(C),n.d(C,{CoordinatesFromDcd:()=>y1,CoordinatesFromNctraj:()=>C1,CoordinatesFromTrr:()=>b1,CoordinatesFromXtc:()=>v1,CustomModelProperties:()=>e2,CustomStructureProperties:()=>n2,ModelFromTrajectory:()=>L1,MultiStructureSelectionFromExpression:()=>Y1,ShapeFromPly:()=>o2,StructureComplexElement:()=>Z1,StructureComplexElementTypes:()=>K1,StructureComponent:()=>$1,StructureFromModel:()=>G1,StructureFromTrajectory:()=>U1,StructureSelectionFromBundle:()=>W1,StructureSelectionFromExpression:()=>q1,StructureSelectionFromScript:()=>X1,TopologyFromPrmtop:()=>E1,TopologyFromPsf:()=>I1,TopologyFromTop:()=>x1,TrajectoryFromBlob:()=>w1,TrajectoryFromCifCore:()=>O1,TrajectoryFromCube:()=>P1,TrajectoryFromGRO:()=>T1,TrajectoryFromMOL:()=>Q1,TrajectoryFromMOL2:()=>R1,TrajectoryFromMmCif:()=>S1,TrajectoryFromModelAndCoordinates:()=>B1,TrajectoryFromPDB:()=>D1,TrajectoryFromSDF:()=>M1,TrajectoryFromXYZ:()=>k1,TransformStructureConformation:()=>V1});var I={};n.r(I),n.d(I,{AssignColorVolume:()=>g2,VolumeFromCcp4:()=>u2,VolumeFromCube:()=>A2,VolumeFromDensityServerCif:()=>p2,VolumeFromDsn6:()=>d2,VolumeFromDx:()=>f2,VolumeFromSegmentationCif:()=>h2,VolumeTransform:()=>m2});var E={};n.r(E),n.d(E,{BoxShape3D:()=>V9,getBoxMesh:()=>q9});var x={};n.r(x),n.d(x,{ClippingStructureRepresentation3DFromBundle:()=>p7,ClippingStructureRepresentation3DFromScript:()=>f7,EmissiveStructureRepresentation3DFromBundle:()=>u7,EmissiveStructureRepresentation3DFromScript:()=>c7,ExplodeStructureRepresentation3D:()=>r7,ModelUnitcell3D:()=>v7,OverpaintStructureRepresentation3DFromBundle:()=>a7,OverpaintStructureRepresentation3DFromScript:()=>i7,ShapeRepresentation3D:()=>y7,SpinStructureRepresentation3D:()=>o7,StructureBoundingBox3D:()=>b7,StructureRepresentation3D:()=>t7,StructureSelectionsAngle3D:()=>I7,StructureSelectionsDihedral3D:()=>E7,StructureSelectionsDistance3D:()=>C7,StructureSelectionsLabel3D:()=>x7,StructureSelectionsOrientation3D:()=>B7,StructureSelectionsPlane3D:()=>w7,SubstanceStructureRepresentation3DFromBundle:()=>A7,SubstanceStructureRepresentation3DFromScript:()=>d7,ThemeStrengthRepresentation3D:()=>h7,TransparencyStructureRepresentation3DFromBundle:()=>l7,TransparencyStructureRepresentation3DFromScript:()=>s7,UnwindStructureAssemblyRepresentation3D:()=>n7,VolumeRepresentation3D:()=>m7,VolumeRepresentation3DHelpers:()=>g7});var B={};n.r(B),n.d(B,{ApplyAction:()=>gie,ClearHighlights:()=>Eie,Highlight:()=>Iie,RemoveObject:()=>mie,SetCurrentObject:()=>pie,Snapshots:()=>xie,SyncBehaviors:()=>fie,ToggleExpanded:()=>yie,ToggleVisibility:()=>vie,Update:()=>hie,registerDefault:()=>Aie,setSubtreeVisibility:()=>bie});var w={};n.r(w),n.d(w,{SyncRepresentationToCanvas:()=>wie,SyncStructureRepresentation3DState:()=>_ie,UpdateRepresentationVisibility:()=>Sie,registerDefault:()=>Bie});var _={};n.r(_),n.d(_,{Focus:()=>Mie,OrientAxes:()=>Rie,Reset:()=>kie,ResetAxes:()=>Pie,SetSnapshot:()=>Qie,registerDefault:()=>Tie});var S={};n.r(S),n.d(S,{Canvas3DSetSettings:()=>pce,registerDefault:()=>fce});var D={};n.r(D),n.d(D,{DefaultFocusLociBindings:()=>Bce,DefaultLociLabelProvider:()=>xce,DefaultSelectLociBindings:()=>Cce,FocusLoci:()=>_ce,HighlightLoci:()=>bce,SelectLoci:()=>Ece});var T={};n.r(T),n.d(T,{CameraAxisHelper:()=>Fce,CameraControls:()=>Uce,DefaultClickResetCameraOnEmpty:()=>Qce,DefaultClickResetCameraOnEmptySelectMode:()=>Mce,DefaultFocusLociBindings:()=>Rce,FocusLoci:()=>Oce});var k={};n.r(k),n.d(k,{AccessibleSurfaceArea:()=>nue,BestDatabaseSequenceMapping:()=>Aue,CrossLinkRestraint:()=>Oue,Interactions:()=>iue,SecondaryStructure:()=>aue,StructureInfo:()=>Gce,ValenceModel:()=>sue});var Q={};n.r(Q),n.d(Q,{AddTrajectory:()=>wde,DownloadStructure:()=>Cde,EnableModelCustomProps:()=>xde,EnableStructureCustomProps:()=>Bde,LoadTrajectory:()=>_de,PdbDownloadProvider:()=>bde,UpdateTrajectory:()=>Ede});var M={};n.r(M),n.d(M,{DownloadFile:()=>cme,OpenFiles:()=>lme});var R={};n.r(R),n.d(R,{AssignColorVolume:()=>C_e,DownloadDensity:()=>b_e});var P={};n.r(P),n.d(P,{FILE:()=>qSe,HTML:()=>WSe,TEXT:()=>XSe,URL:()=>YSe});var O,F=n(43),N=n.t(F,2),L=n(391),U=n(950),G=n.t(U,2);function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(O||(O={}));const z="popstate";function H(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function V(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function q(e,t){return{usr:e.state,key:e.key,idx:t}}function Y(e,t,n,r){return void 0===n&&(n=null),j({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?W(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function X(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function W(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function K(e,t,n,r){void 0===r&&(r={});let{window:o=document.defaultView,v5Compat:i=!1}=r,a=o.history,s=O.Pop,l=null,c=u();function u(){return(a.state||{idx:null}).idx}function d(){s=O.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:s,location:f.location,delta:t})}function A(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:X(e);return n=n.replace(/ $/,"%20"),H(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,a.replaceState(j({},a.state,{idx:c}),""));let f={get action(){return s},get location(){return e(o,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(z,d),l=e,()=>{o.removeEventListener(z,d),l=null}},createHref:e=>t(o,e),createURL:A,encodeLocation(e){let t=A(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s=O.Push;let r=Y(f.location,e,t);n&&n(r,e),c=u()+1;let d=q(r,c),A=f.createHref(r);try{a.pushState(d,"",A)}catch(PF){if(PF instanceof DOMException&&"DataCloneError"===PF.name)throw PF;o.location.assign(A)}i&&l&&l({action:s,location:f.location,delta:1})},replace:function(e,t){s=O.Replace;let r=Y(f.location,e,t);n&&n(r,e),c=u();let o=q(r,c),d=f.createHref(r);a.replaceState(o,"",d),i&&l&&l({action:s,location:f.location,delta:0})},go:e=>a.go(e)};return f}var J;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(J||(J={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function Z(e,t,n){return void 0===n&&(n="/"),$(e,t,n,!1)}function $(e,t,n,r){let o=fe(("string"===typeof t?W(t):t).pathname||"/",n);if(null==o)return null;let i=ee(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let a=null;for(let s=0;null==a&&s<i.length;++s){let e=Ae(o);a=ue(i[s],e,r)}return a}function ee(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let o=(e,o,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};a.relativePath.startsWith("/")&&(H(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=ye([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(H(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),ee(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:ce(s,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of te(e.path))o(e,t,r);else o(e,t)})),t}function te(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return o?[i,""]:[i];let a=te(r.join("/")),s=[];return s.push(...a.map((e=>""===e?i:[i,e].join("/")))),o&&s.push(...a),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const ne=/^:[\w-]+$/,re=3,oe=2,ie=1,ae=10,se=-2,le=e=>"*"===e;function ce(e,t){let n=e.split("/"),r=n.length;return n.some(le)&&(r+=se),t&&(r+=oe),n.filter((e=>!le(e))).reduce(((e,t)=>e+(ne.test(t)?re:""===t?ie:ae)),r)}function ue(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,o={},i="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=de({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=de({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(o,u.params),a.push({params:o,pathname:ye([i,u.pathname]),pathnameBase:ve(ye([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=ye([i,u.pathnameBase]))}return a}function de(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);V("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let i=new RegExp(o,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),s=o.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:o}=t;if("*"===r){let e=s[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=o&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:i,pathnameBase:a,pattern:e}}function Ae(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(PF){return V(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+PF+")."),e}}function fe(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function pe(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function he(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function ge(e,t){let n=he(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function me(e,t,n,r){let o;void 0===r&&(r=!1),"string"===typeof e?o=W(e):(o=j({},e),H(!o.pathname||!o.pathname.includes("?"),pe("?","pathname","search",o)),H(!o.pathname||!o.pathname.includes("#"),pe("#","pathname","hash",o)),H(!o.search||!o.search.includes("#"),pe("#","search","hash",o)));let i,a=""===e||""===o.pathname,s=a?"/":o.pathname;if(null==s)i=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:o=""}="string"===typeof e?W(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:be(r),hash:Ce(o)}}(o,i),c=s&&"/"!==s&&s.endsWith("/"),u=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const ye=e=>e.join("/").replace(/\/\/+/g,"/"),ve=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),be=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Ce=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function Ie(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const Ee=["post","put","patch","delete"],xe=(new Set(Ee),["get",...Ee]);new Set(xe),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Be(){return Be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Be.apply(this,arguments)}const we=F.createContext(null);const _e=F.createContext(null);const Se=F.createContext(null);const De=F.createContext(null);const Te=F.createContext({outlet:null,matches:[],isDataRoute:!1});const ke=F.createContext(null);function Qe(){return null!=F.useContext(De)}function Me(){return Qe()||H(!1),F.useContext(De).location}function Re(e){F.useContext(Se).static||F.useLayoutEffect(e)}function Pe(){let{isDataRoute:e}=F.useContext(Te);return e?function(){let{router:e}=Ve(ze.UseNavigateStable),t=Ye(He.UseNavigateStable),n=F.useRef(!1);Re((()=>{n.current=!0}));let r=F.useCallback((function(r,o){void 0===o&&(o={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Be({fromRouteId:t},o)))}),[e,t]);return r}():function(){Qe()||H(!1);let e=F.useContext(we),{basename:t,future:n,navigator:r}=F.useContext(Se),{matches:o}=F.useContext(Te),{pathname:i}=Me(),a=JSON.stringify(ge(o,n.v7_relativeSplatPath)),s=F.useRef(!1);Re((()=>{s.current=!0}));let l=F.useCallback((function(n,o){if(void 0===o&&(o={}),!s.current)return;if("number"===typeof n)return void r.go(n);let l=me(n,JSON.parse(a),i,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:ye([t,l.pathname])),(o.replace?r.replace:r.push)(l,o.state,o)}),[t,r,a,i,e]);return l}()}function Oe(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=F.useContext(Se),{matches:o}=F.useContext(Te),{pathname:i}=Me(),a=JSON.stringify(ge(o,r.v7_relativeSplatPath));return F.useMemo((()=>me(e,JSON.parse(a),i,"path"===n)),[e,a,i,n])}function Fe(e,t,n,r){Qe()||H(!1);let{navigator:o}=F.useContext(Se),{matches:i}=F.useContext(Te),a=i[i.length-1],s=a?a.params:{},l=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let c,u=Me();if(t){var d;let e="string"===typeof t?W(t):t;"/"===l||(null==(d=e.pathname)?void 0:d.startsWith(l))||H(!1),c=e}else c=u;let A=c.pathname||"/",f=A;if("/"!==l){let e=l.replace(/^\//,"").split("/");f="/"+A.replace(/^\//,"").split("/").slice(e.length).join("/")}let p=Z(e,{pathname:f});let h=je(p&&p.map((e=>Object.assign({},e,{params:Object.assign({},s,e.params),pathname:ye([l,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ye([l,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),i,n,r);return t&&h?F.createElement(De.Provider,{value:{location:Be({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:O.Pop}},h):h}function Ne(){let e=function(){var e;let t=F.useContext(ke),n=qe(He.UseRouteError),r=Ye(He.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=Ie(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},t),n?F.createElement("pre",{style:o},n):null,null)}const Le=F.createElement(Ne,null);class Ue extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?F.createElement(Te.Provider,{value:this.props.routeContext},F.createElement(ke.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ge(e){let{routeContext:t,match:n,children:r}=e,o=F.useContext(we);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(Te.Provider,{value:t},r)}function je(e,t,n,r){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var i;if(null==(i=n)||!i.errors)return null;e=n.matches}let a=e,s=null==(o=n)?void 0:o.errors;if(null!=s){let e=a.findIndex((e=>e.route.id&&void 0!==(null==s?void 0:s[e.route.id])));e>=0||H(!1),a=a.slice(0,Math.min(a.length,e+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let e=a[u];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=u),e.route.id){let{loaderData:t,errors:r}=n,o=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||o){l=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}return a.reduceRight(((e,r,o)=>{let i,u=!1,d=null,A=null;n&&(i=s&&r.route.id?s[r.route.id]:void 0,d=r.route.errorElement||Le,l&&(c<0&&0===o?(!function(e,t){t||Xe[e]||(Xe[e]=!0)}("route-fallback",!1),u=!0,A=null):c===o&&(u=!0,A=r.route.hydrateFallbackElement||null)));let f=t.concat(a.slice(0,o+1)),p=()=>{let t;return t=i?d:u?A:r.route.Component?F.createElement(r.route.Component,null):r.route.element?r.route.element:e,F.createElement(Ge,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?F.createElement(Ue,{location:n.location,revalidation:n.revalidation,component:d,error:i,children:p(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):p()}),null)}var ze=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ze||{}),He=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(He||{});function Ve(e){let t=F.useContext(we);return t||H(!1),t}function qe(e){let t=F.useContext(_e);return t||H(!1),t}function Ye(e){let t=function(){let e=F.useContext(Te);return e||H(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||H(!1),n.route.id}const Xe={};N.startTransition;function We(e){H(!1)}function Ke(e){let{basename:t="/",children:n=null,location:r,navigationType:o=O.Pop,navigator:i,static:a=!1,future:s}=e;Qe()&&H(!1);let l=t.replace(/^\/*/,"/"),c=F.useMemo((()=>({basename:l,navigator:i,static:a,future:Be({v7_relativeSplatPath:!1},s)})),[l,s,i,a]);"string"===typeof r&&(r=W(r));let{pathname:u="/",search:d="",hash:A="",state:f=null,key:p="default"}=r,h=F.useMemo((()=>{let e=fe(u,l);return null==e?null:{location:{pathname:e,search:d,hash:A,state:f,key:p},navigationType:o}}),[l,u,d,A,f,p,o]);return null==h?null:F.createElement(Se.Provider,{value:c},F.createElement(De.Provider,{children:n,value:h}))}function Je(e){let{children:t,location:n}=e;return Fe(Ze(t),n)}new Promise((()=>{}));F.Component;function Ze(e,t){void 0===t&&(t=[]);let n=[];return F.Children.forEach(e,((e,r)=>{if(!F.isValidElement(e))return;let o=[...t,r];if(e.type===F.Fragment)return void n.push.apply(n,Ze(e.props.children,o));e.type!==We&&H(!1),e.props.index&&e.props.children&&H(!1);let i={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=Ze(e.props.children,o)),n.push(i)})),n}function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$e.apply(this,arguments)}function et(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const tt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(l0e){}new Map;const nt=N.startTransition;G.flushSync,N.useId;function rt(e){let{basename:t,children:n,future:r,window:o}=e,i=F.useRef();var a;null==i.current&&(i.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),K((function(e,t){let{pathname:n,search:r,hash:o}=e.location;return Y("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:X(t)}),null,a)));let s=i.current,[l,c]=F.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},d=F.useCallback((e=>{u&&nt?nt((()=>c(e))):c(e)}),[c,u]);return F.useLayoutEffect((()=>s.listen(d)),[s,d]),F.createElement(Ke,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:s,future:r})}const ot="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,it=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,at=F.forwardRef((function(e,t){let n,{onClick:r,relative:o,reloadDocument:i,replace:a,state:s,target:l,to:c,preventScrollReset:u,unstable_viewTransition:d}=e,A=et(e,tt),{basename:f}=F.useContext(Se),p=!1;if("string"===typeof c&&it.test(c)&&(n=c,ot))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),n=fe(t.pathname,f);t.origin===e.origin&&null!=n?c=n+t.search+t.hash:p=!0}catch(l0e){}let h=function(e,t){let{relative:n}=void 0===t?{}:t;Qe()||H(!1);let{basename:r,navigator:o}=F.useContext(Se),{hash:i,pathname:a,search:s}=Oe(e,{relative:n}),l=a;return"/"!==r&&(l="/"===a?r:ye([r,a])),o.createHref({pathname:l,search:s,hash:i})}(c,{relative:o}),g=function(e,t){let{target:n,replace:r,state:o,preventScrollReset:i,relative:a,unstable_viewTransition:s}=void 0===t?{}:t,l=Pe(),c=Me(),u=Oe(e,{relative:a});return F.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:X(c)===X(u);l(e,{replace:n,state:o,preventScrollReset:i,relative:a,unstable_viewTransition:s})}}),[c,l,u,r,o,n,e,i,a,s])}(c,{replace:a,state:s,target:l,preventScrollReset:u,relative:o,unstable_viewTransition:d});return F.createElement("a",$e({},A,{href:n||h,onClick:p||i?r:function(e){r&&r(e),e.defaultPrevented||g(e)},ref:t,target:l}))}));var st,lt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(st||(st={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(lt||(lt={}));var ct=n(579);const ut=e=>{const[t,n]=(0,F.useState)(!1);return(0,ct.jsxs)("div",{className:"navbar",children:[e.pageId?(0,ct.jsx)("div",{className:"nav-links",children:(0,ct.jsx)(at,{to:"/",children:(0,ct.jsx)("h1",{className:"logo",children:e.pageId})})}):(0,ct.jsx)("div",{className:"nav-links",children:(0,ct.jsx)(at,{to:"/",children:(0,ct.jsx)("h1",{className:"logo",children:"EzSEA"})})}),(0,ct.jsxs)("ul",{className:t?"nav-links-mobile":"nav-links",onClick:()=>n(!1),children:[(0,ct.jsx)(at,{to:"/about",className:"about",children:(0,ct.jsx)("li",{children:"About"})}),(0,ct.jsx)(at,{to:"/help",className:"help",children:(0,ct.jsx)("li",{children:"Help"})})]})]})},dt=(0,F.createContext)(),At=e=>{let{children:t}=e;const[n,r]=(0,F.useState)(""),[o,i]=(0,F.useState)(0),[a,s]=(0,F.useState)({}),[l,c]=(0,F.useState)(11);return(0,ct.jsx)(dt.Provider,{value:{scrollPosition:n,setScrollPosition:r,seqLength:o,setSeqLength:i,logoContent:a,setLogoContent:s,logoAlphabet:l,setLogoAlphabet:c},children:t})};var ft=Array.prototype.slice;function pt(e){return e}var ht=1,gt=2,mt=3,yt=4,vt=1e-6;function bt(e){return"translate("+e+",0)"}function Ct(e){return"translate(0,"+e+")"}function It(e){return t=>+e(t)}function Et(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function xt(){return!this.__axis}function Bt(e,t){var n=[],r=null,o=null,i=6,a=6,s=3,l="undefined"!==typeof window&&window.devicePixelRatio>1?0:.5,c=e===ht||e===yt?-1:1,u=e===yt||e===gt?"x":"y",d=e===ht||e===mt?bt:Ct;function A(A){var f=null==r?t.ticks?t.ticks.apply(t,n):t.domain():r,p=null==o?t.tickFormat?t.tickFormat.apply(t,n):pt:o,h=Math.max(i,0)+s,g=t.range(),m=+g[0]+l,y=+g[g.length-1]+l,v=(t.bandwidth?Et:It)(t.copy(),l),b=A.selection?A.selection():A,C=b.selectAll(".domain").data([null]),I=b.selectAll(".tick").data(f,t).order(),E=I.exit(),x=I.enter().append("g").attr("class","tick"),B=I.select("line"),w=I.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),I=I.merge(x),B=B.merge(x.append("line").attr("stroke","currentColor").attr(u+"2",c*i)),w=w.merge(x.append("text").attr("fill","currentColor").attr(u,c*h).attr("dy",e===ht?"0em":e===mt?"0.71em":"0.32em")),A!==b&&(C=C.transition(A),I=I.transition(A),B=B.transition(A),w=w.transition(A),E=E.transition(A).attr("opacity",vt).attr("transform",(function(e){return isFinite(e=v(e))?d(e+l):this.getAttribute("transform")})),x.attr("opacity",vt).attr("transform",(function(e){var t=this.parentNode.__axis;return d((t&&isFinite(t=t(e))?t:v(e))+l)}))),E.remove(),C.attr("d",e===yt||e===gt?a?"M"+c*a+","+m+"H"+l+"V"+y+"H"+c*a:"M"+l+","+m+"V"+y:a?"M"+m+","+c*a+"V"+l+"H"+y+"V"+c*a:"M"+m+","+l+"H"+y),I.attr("opacity",1).attr("transform",(function(e){return d(v(e)+l)})),B.attr(u+"2",c*i),w.attr(u,c*h).text(p),b.filter(xt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===gt?"start":e===yt?"end":"middle"),b.each((function(){this.__axis=v}))}return A.scale=function(e){return arguments.length?(t=e,A):t},A.ticks=function(){return n=ft.call(arguments),A},A.tickArguments=function(e){return arguments.length?(n=null==e?[]:ft.call(e),A):n.slice()},A.tickValues=function(e){return arguments.length?(r=null==e?null:ft.call(e),A):r&&r.slice()},A.tickFormat=function(e){return arguments.length?(o=e,A):o},A.tickSize=function(e){return arguments.length?(i=a=+e,A):i},A.tickSizeInner=function(e){return arguments.length?(i=+e,A):i},A.tickSizeOuter=function(e){return arguments.length?(a=+e,A):a},A.tickPadding=function(e){return arguments.length?(s=+e,A):s},A.offset=function(e){return arguments.length?(l=+e,A):l},A}var wt={value:()=>{}};function _t(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new St(r)}function St(e){this._=e}function Dt(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function Tt(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=wt,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}St.prototype=_t.prototype={constructor:St,on:function(e,t){var n,r=this._,o=function(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}(e+"",r),i=-1,a=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++i<a;)if(n=(e=o[i]).type)r[n]=Tt(r[n],e.name,t);else if(null==t)for(n in r)r[n]=Tt(r[n],e.name,null);return this}for(;++i<a;)if((n=(e=o[i]).type)&&(n=Dt(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new St(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};const kt=_t;function Qt(){}function Mt(e){return null==e?Qt:function(){return this.querySelector(e)}}function Rt(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Pt(){return[]}function Ot(e){return null==e?Pt:function(){return this.querySelectorAll(e)}}function Ft(e){return function(){return this.matches(e)}}function Nt(e){return function(t){return t.matches(e)}}var Lt=Array.prototype.find;function Ut(){return this.firstElementChild}var Gt=Array.prototype.filter;function jt(){return this.children}function zt(e){return new Array(e.length)}function Ht(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Vt(e,t,n,r,o,i){for(var a,s=0,l=t.length,c=i.length;s<c;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new Ht(e,i[s]);for(;s<l;++s)(a=t[s])&&(o[s]=a)}function qt(e,t,n,r,o,i,a){var s,l,c,u=new Map,d=t.length,A=i.length,f=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(f[s]=c=a.call(l,l.__data__,s,t)+"",u.has(c)?o[s]=l:u.set(c,l));for(s=0;s<A;++s)c=a.call(e,i[s],s,i)+"",(l=u.get(c))?(r[s]=l,l.__data__=i[s],u.delete(c)):n[s]=new Ht(e,i[s]);for(s=0;s<d;++s)(l=t[s])&&u.get(f[s])===l&&(o[s]=l)}function Yt(e){return e.__data__}function Xt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}Ht.prototype={constructor:Ht,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var Wt="http://www.w3.org/1999/xhtml";const Kt={svg:"http://www.w3.org/2000/svg",xhtml:Wt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jt(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Kt.hasOwnProperty(t)?{space:Kt[t],local:e}:e}function Zt(e){return function(){this.removeAttribute(e)}}function $t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function en(e,t){return function(){this.setAttribute(e,t)}}function tn(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function nn(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function rn(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function on(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function an(e){return function(){this.style.removeProperty(e)}}function sn(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ln(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function cn(e,t){return e.style.getPropertyValue(t)||on(e).getComputedStyle(e,null).getPropertyValue(t)}function un(e){return function(){delete this[e]}}function dn(e,t){return function(){this[e]=t}}function An(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function fn(e){return e.trim().split(/^|\s+/)}function pn(e){return e.classList||new hn(e)}function hn(e){this._node=e,this._names=fn(e.getAttribute("class")||"")}function gn(e,t){for(var n=pn(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function mn(e,t){for(var n=pn(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function yn(e){return function(){gn(this,e)}}function vn(e){return function(){mn(this,e)}}function bn(e,t){return function(){(t.apply(this,arguments)?gn:mn)(this,e)}}function Cn(){this.textContent=""}function In(e){return function(){this.textContent=e}}function En(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function xn(){this.innerHTML=""}function Bn(e){return function(){this.innerHTML=e}}function wn(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function _n(){this.nextSibling&&this.parentNode.appendChild(this)}function Sn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Dn(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Wt&&t.documentElement.namespaceURI===Wt?t.createElement(e):t.createElementNS(n,e)}}function Tn(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function kn(e){var t=Jt(e);return(t.local?Tn:Dn)(t)}function Qn(){return null}function Mn(){var e=this.parentNode;e&&e.removeChild(this)}function Rn(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pn(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function On(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function Fn(e,t,n){return function(){var r,o=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var a=0,s=o.length;a<s;++a)if((r=o[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=t);this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function Nn(e,t,n){var r=on(e),o=r.CustomEvent;"function"===typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Ln(e,t){return function(){return Nn(this,e,t)}}function Un(e,t){return function(){return Nn(this,e,t.apply(this,arguments))}}hn.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Gn=[null];function jn(e,t){this._groups=e,this._parents=t}function zn(){return new jn([[document.documentElement]],Gn)}jn.prototype=zn.prototype={constructor:jn,select:function(e){"function"!==typeof e&&(e=Mt(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a,s=t[o],l=s.length,c=r[o]=new Array(l),u=0;u<l;++u)(i=s[u])&&(a=e.call(i,i.__data__,u,s))&&("__data__"in i&&(a.__data__=i.__data__),c[u]=a);return new jn(r,this._parents)},selectAll:function(e){e="function"===typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:Rt(t)}}(e):Ot(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a,s=t[i],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(e.call(a,a.__data__,c,s)),o.push(a));return new jn(r,o)},selectChild:function(e){return this.select(null==e?Ut:function(e){return function(){return Lt.call(this.children,e)}}("function"===typeof e?e:Nt(e)))},selectChildren:function(e){return this.selectAll(null==e?jt:function(e){return function(){return Gt.call(this.children,e)}}("function"===typeof e?e:Nt(e)))},filter:function(e){"function"!==typeof e&&(e=Ft(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,l=r[o]=[],c=0;c<s;++c)(i=a[c])&&e.call(i,i.__data__,c,a)&&l.push(i);return new jn(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Yt);var n=t?qt:Vt,r=this._parents,o=this._groups;"function"!==typeof e&&(e=function(e){return function(){return e}}(e));for(var i=o.length,a=new Array(i),s=new Array(i),l=new Array(i),c=0;c<i;++c){var u=r[c],d=o[c],A=d.length,f=Rt(e.call(u,u&&u.__data__,c,r)),p=f.length,h=s[c]=new Array(p),g=a[c]=new Array(p);n(u,d,h,g,l[c]=new Array(A),f,t);for(var m,y,v=0,b=0;v<p;++v)if(m=h[v]){for(v>=b&&(b=v+1);!(y=g[b])&&++b<p;);m._next=y||null}}return(a=new jn(a,r))._enter=s,a._exit=l,a},enter:function(){return new jn(this._enter||this._groups.map(zt),this._parents)},exit:function(){return new jn(this._exit||this._groups.map(zt),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return r="function"===typeof e?e(r):r.append(e+""),null!=t&&(o=t(o)),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){if(!(e instanceof jn))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l,c=t[s],u=n[s],d=c.length,A=a[s]=new Array(d),f=0;f<d;++f)(l=c[f]||u[f])&&(A[f]=l);for(;s<r;++s)a[s]=t[s];return new jn(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Xt);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a,s=n[i],l=s.length,c=o[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new jn(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],a=0,s=i.length;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this},attr:function(e,t){var n=Jt(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?$t:Zt:"function"===typeof t?n.local?rn:nn:n.local?tn:en)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?an:"function"===typeof t?ln:sn)(e,t,null==n?"":n)):cn(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?un:"function"===typeof t?An:dn)(e,t)):this.node()[e]},classed:function(e,t){var n=fn(e+"");if(arguments.length<2){for(var r=pn(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"===typeof t?bn:t?yn:vn)(n,t))},text:function(e){return arguments.length?this.each(null==e?Cn:("function"===typeof e?En:In)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?xn:("function"===typeof e?wn:Bn)(e)):this.node().innerHTML},raise:function(){return this.each(_n)},lower:function(){return this.each(Sn)},append:function(e){var t="function"===typeof e?e:kn(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:kn(e),r=null==t?Qn:"function"===typeof t?t:Mt(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Mn)},clone:function(e){return this.select(e?Pn:Rn)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=i.length;if(!(arguments.length<2)){for(s=t?Fn:On,r=0;r<a;++r)this.each(s(i[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?Un:Ln)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],i=0,a=o.length;i<a;++i)(r=o[i])&&(yield r)}};const Hn=zn;function Vn(e){return"string"===typeof e?new jn([[document.querySelector(e)]],[document.documentElement]):new jn([[e]],Gn)}function qn(e){e.preventDefault(),e.stopImmediatePropagation()}function Yn(e){var t=e.document.documentElement,n=Vn(e).on("dragstart.drag",qn,!0);"onselectstart"in t?n.on("selectstart.drag",qn,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Xn(e,t){var n=e.document.documentElement,r=Vn(e).on("dragstart.drag",null);t&&(r.on("click.drag",qn,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Wn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Kn(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Jn(){}var Zn=.7,$n=1/Zn,er="\\s*([+-]?\\d+)\\s*",tr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",nr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rr=/^#([0-9a-f]{3,8})$/,or=new RegExp("^rgb\\("+[er,er,er]+"\\)$"),ir=new RegExp("^rgb\\("+[nr,nr,nr]+"\\)$"),ar=new RegExp("^rgba\\("+[er,er,er,tr]+"\\)$"),sr=new RegExp("^rgba\\("+[nr,nr,nr,tr]+"\\)$"),lr=new RegExp("^hsl\\("+[tr,nr,nr]+"\\)$"),cr=new RegExp("^hsla\\("+[tr,nr,nr,tr]+"\\)$"),ur={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function dr(){return this.rgb().formatHex()}function Ar(){return this.rgb().formatRgb()}function fr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?pr(t):3===n?new mr(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?hr(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?hr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=or.exec(e))?new mr(t[1],t[2],t[3],1):(t=ir.exec(e))?new mr(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ar.exec(e))?hr(t[1],t[2],t[3],t[4]):(t=sr.exec(e))?hr(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=lr.exec(e))?Cr(t[1],t[2]/100,t[3]/100,1):(t=cr.exec(e))?Cr(t[1],t[2]/100,t[3]/100,t[4]):ur.hasOwnProperty(e)?pr(ur[e]):"transparent"===e?new mr(NaN,NaN,NaN,0):null}function pr(e){return new mr(e>>16&255,e>>8&255,255&e,1)}function hr(e,t,n,r){return r<=0&&(e=t=n=NaN),new mr(e,t,n,r)}function gr(e,t,n,r){return 1===arguments.length?function(e){return e instanceof Jn||(e=fr(e)),e?new mr((e=e.rgb()).r,e.g,e.b,e.opacity):new mr}(e):new mr(e,t,n,null==r?1:r)}function mr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function yr(){return"#"+br(this.r)+br(this.g)+br(this.b)}function vr(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function br(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Cr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Er(e,t,n,r)}function Ir(e){if(e instanceof Er)return new Er(e.h,e.s,e.l,e.opacity);if(e instanceof Jn||(e=fr(e)),!e)return new Er;if(e instanceof Er)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,s=i-o,l=(i+o)/2;return s?(a=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=l<.5?i+o:2-i-o,a*=60):s=l>0&&l<1?0:a,new Er(a,s,l,e.opacity)}function Er(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function xr(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Br(e,t,n,r,o){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*n+(1+3*e+3*i-3*a)*r+a*o)/6}Wn(Jn,fr,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:dr,formatHex:dr,formatHsl:function(){return Ir(this).formatHsl()},formatRgb:Ar,toString:Ar}),Wn(mr,gr,Kn(Jn,{brighter:function(e){return e=null==e?$n:Math.pow($n,e),new mr(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Zn:Math.pow(Zn,e),new mr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yr,formatHex:yr,formatRgb:vr,toString:vr})),Wn(Er,(function(e,t,n,r){return 1===arguments.length?Ir(e):new Er(e,t,n,null==r?1:r)}),Kn(Jn,{brighter:function(e){return e=null==e?$n:Math.pow($n,e),new Er(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Zn:Math.pow(Zn,e),new Er(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new mr(xr(e>=240?e-240:e+120,o,r),xr(e,o,r),xr(e<120?e+240:e-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const wr=e=>()=>e;function _r(e,t){return function(n){return e+n*t}}function Sr(e){return 1===(e=+e)?Dr:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):wr(isNaN(t)?n:t)}}function Dr(e,t){var n=t-e;return n?_r(e,n):wr(isNaN(e)?t:e)}const Tr=function e(t){var n=Sr(t);function r(e,t){var r=n((e=gr(e)).r,(t=gr(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),a=Dr(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=i(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function kr(e){return function(t){var n,r,o=t.length,i=new Array(o),a=new Array(o),s=new Array(o);for(n=0;n<o;++n)r=gr(t[n]),i[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return i=e(i),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=i(e),r.g=a(e),r.b=s(e),r+""}}}kr((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],i=e[r+1],a=r>0?e[r-1]:2*o-i,s=r<t-1?e[r+2]:2*i-o;return Br((n-r/t)*t,a,o,i,s)}})),kr((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],i=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return Br((n-r/t)*t,o,i,a,s)}}));function Qr(e,t){var n,r=t?t.length:0,o=e?Math.min(r,e.length):0,i=new Array(o),a=new Array(r);for(n=0;n<o;++n)i[n]=Ur(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<o;++n)a[n]=i[n](e);return a}}function Mr(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Rr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Pr(e,t){var n,r={},o={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=Ur(e[n],t[n]):o[n]=t[n];return function(e){for(n in r)o[n]=r[n](e);return o}}var Or=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fr=new RegExp(Or.source,"g");function Nr(e,t){var n,r,o,i=Or.lastIndex=Fr.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=Or.exec(e))&&(r=Fr.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Rr(n,r)})),i=Fr.lastIndex;return i<t.length&&(o=t.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function Lr(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,o=t.slice();return function(i){for(n=0;n<r;++n)o[n]=e[n]*(1-i)+t[n]*i;return o}}function Ur(e,t){var n,r=typeof t;return null==t||"boolean"===r?wr(t):("number"===r?Rr:"string"===r?(n=fr(t))?(t=n,Tr):Nr:t instanceof fr?Tr:t instanceof Date?Mr:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?Lr:Array.isArray(t)?Qr:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Pr:Rr)(e,t)}function Gr(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}var jr,zr,Hr=0,Vr=0,qr=0,Yr=1e3,Xr=0,Wr=0,Kr=0,Jr="object"===typeof performance&&performance.now?performance:Date,Zr="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function $r(){return Wr||(Zr(eo),Wr=Jr.now()+Kr)}function eo(){Wr=0}function to(){this._call=this._time=this._next=null}function no(e,t,n){var r=new to;return r.restart(e,t,n),r}function ro(){Wr=(Xr=Jr.now())+Kr,Hr=Vr=0;try{!function(){$r(),++Hr;for(var e,t=jr;t;)(e=Wr-t._time)>=0&&t._call.call(null,e),t=t._next;--Hr}()}finally{Hr=0,function(){var e,t,n=jr,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:jr=t);zr=e,io(r)}(),Wr=0}}function oo(){var e=Jr.now(),t=e-Xr;t>Yr&&(Kr-=t,Xr=e)}function io(e){Hr||(Vr&&(Vr=clearTimeout(Vr)),e-Wr>24?(e<1/0&&(Vr=setTimeout(ro,e-Jr.now()-Kr)),qr&&(qr=clearInterval(qr))):(qr||(Xr=Jr.now(),qr=setInterval(oo,Yr)),Hr=1,Zr(ro)))}function ao(e,t,n){var r=new to;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}to.prototype=no.prototype={constructor:to,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?$r():+n)+(null==t?0:+t),this._next||zr===this||(zr?zr._next=this:jr=this,zr=this),this._call=e,this._time=n,io()},stop:function(){this._call&&(this._call=null,this._time=1/0,io())}};var so=kt("start","end","cancel","interrupt"),lo=[],co=0,uo=1,Ao=2,fo=3,po=4,ho=5,go=6;function mo(e,t,n,r,o,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(e){n.state=uo,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(i){var c,u,d,A;if(n.state!==uo)return l();for(c in o)if((A=o[c]).name===n.name){if(A.state===fo)return ao(a);A.state===po?(A.state=go,A.timer.stop(),A.on.call("interrupt",e,e.__data__,A.index,A.group),delete o[c]):+c<t&&(A.state=go,A.timer.stop(),A.on.call("cancel",e,e.__data__,A.index,A.group),delete o[c])}if(ao((function(){n.state===fo&&(n.state=po,n.timer.restart(s,n.delay,n.time),s(i))})),n.state=Ao,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ao){for(n.state=fo,r=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(A=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=A);r.length=u+1}}function s(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=ho,1),i=-1,a=r.length;++i<a;)r[i].call(e,o);n.state===ho&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=go,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=no(i,0,n.time)}(e,n,{name:t,index:r,group:o,on:so,tween:lo,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:co})}function yo(e,t){var n=bo(e,t);if(n.state>co)throw new Error("too late; already scheduled");return n}function vo(e,t){var n=bo(e,t);if(n.state>fo)throw new Error("too late; already running");return n}function bo(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Co(e,t){var n,r,o,i=e.__transition,a=!0;if(i){for(o in t=null==t?null:t+"",i)(n=i[o]).name===t?(r=n.state>Ao&&n.state<ho,n.state=go,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]):a=!1;a&&delete e.__transition}}var Io,Eo=180/Math.PI,xo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bo(e,t,n,r,o,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Eo,skewX:Math.atan(l)*Eo,scaleX:a,scaleY:s}}function wo(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(i,a){var s=[],l=[];return i=e(i),a=e(a),function(e,r,o,i,a,s){if(e!==o||r!==i){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:Rr(e,o)},{i:l-2,x:Rr(r,i)})}else(o||i)&&a.push("translate("+o+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,s,l),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(o(n)+"rotate(",null,r)-2,x:Rr(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(i.rotate,a.rotate,s,l),function(e,t,n,i){e!==t?i.push({i:n.push(o(n)+"skewX(",null,r)-2,x:Rr(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(i.skewX,a.skewX,s,l),function(e,t,n,r,i,a){if(e!==n||t!==r){var s=i.push(o(i)+"scale(",null,",",null,")");a.push({i:s-4,x:Rr(e,n)},{i:s-2,x:Rr(t,r)})}else 1===n&&1===r||i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,s,l),i=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var _o=wo((function(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?xo:Bo(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),So=wo((function(e){return null==e?xo:(Io||(Io=document.createElementNS("http://www.w3.org/2000/svg","g")),Io.setAttribute("transform",e),(e=Io.transform.baseVal.consolidate())?Bo((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):xo)}),", ",")",")");function Do(e,t){var n,r;return function(){var o=vo(this,e),i=o.tween;if(i!==n)for(var a=0,s=(r=n=i).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}o.tween=r}}function To(e,t,n){var r,o;if("function"!==typeof n)throw new Error;return function(){var i=vo(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:t,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===t){o[l]=s;break}l===c&&o.push(s)}i.tween=o}}function ko(e,t,n){var r=e._id;return e.each((function(){var e=vo(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return bo(e,r).value[t]}}function Qo(e,t){var n;return("number"===typeof t?Rr:t instanceof fr?Tr:(n=fr(t))?(t=n,Tr):Nr)(e,t)}function Mo(e){return function(){this.removeAttribute(e)}}function Ro(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Po(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function Oo(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function Fo(e,t,n){var r,o,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,l));this.removeAttribute(e)}}function No(e,t,n){var r,o,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}function Lo(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return o._value=t,o}function Uo(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return o._value=t,o}function Go(e,t){return function(){yo(this,e).delay=+t.apply(this,arguments)}}function jo(e,t){return t=+t,function(){yo(this,e).delay=t}}function zo(e,t){return function(){vo(this,e).duration=+t.apply(this,arguments)}}function Ho(e,t){return t=+t,function(){vo(this,e).duration=t}}var Vo=Hn.prototype.constructor;function qo(e){return function(){this.style.removeProperty(e)}}var Yo=0;function Xo(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Wo(){return++Yo}var Ko=Hn.prototype;Xo.prototype=function(e){return Hn().transition(e)}.prototype={constructor:Xo,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Mt(e));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var s,l,c=r[a],u=c.length,d=i[a]=new Array(u),A=0;A<u;++A)(s=c[A])&&(l=e.call(s,s.__data__,A,c))&&("__data__"in s&&(l.__data__=s.__data__),d[A]=l,mo(d[A],t,n,A,d,bo(s,n)));return new Xo(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Ot(e));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var l,c=r[s],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var A,f=e.call(l,l.__data__,d,c),p=bo(l,n),h=0,g=f.length;h<g;++h)(A=f[h])&&mo(A,t,n,h,f,p);i.push(f),a.push(l)}return new Xo(i,a,t,n)},filter:function(e){"function"!==typeof e&&(e=Ft(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,l=r[o]=[],c=0;c<s;++c)(i=a[c])&&e.call(i,i.__data__,c,a)&&l.push(i);return new Xo(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l,c=t[s],u=n[s],d=c.length,A=a[s]=new Array(d),f=0;f<d;++f)(l=c[f]||u[f])&&(A[f]=l);for(;s<r;++s)a[s]=t[s];return new Xo(a,this._parents,this._name,this._id)},selection:function(){return new Vo(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Wo(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=bo(a,t);mo(a,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Xo(r,this._parents,e,n)},call:Ko.call,nodes:Ko.nodes,node:Ko.node,size:Ko.size,empty:Ko.empty,each:Ko.each,on:function(e,t){var n=this._id;return arguments.length<2?bo(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?yo:vo;return function(){var a=i(this,e),s=a.on;s!==r&&(o=(r=s).copy()).on(t,n),a.on=o}}(n,e,t))},attr:function(e,t){var n=Jt(e),r="transform"===n?So:Qo;return this.attrTween(e,"function"===typeof t?(n.local?No:Fo)(n,r,ko(this,"attr."+e,t)):null==t?(n.local?Ro:Mo)(n):(n.local?Oo:Po)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=Jt(e);return this.tween(n,(r.local?Lo:Uo)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?_o:Qo;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var i=cn(this,e),a=(this.style.removeProperty(e),cn(this,e));return i===a?null:i===n&&a===r?o:o=t(n=i,r=a)}}(e,r)).on("end.style."+e,qo(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,o,i;return function(){var a=cn(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=cn(this,e)),a===l?null:a===r&&l===o?i:(o=l,i=t(r=a,s))}}(e,r,ko(this,"style."+e,t))).each(function(e,t){var n,r,o,i,a="style."+t,s="end."+a;return function(){var l=vo(this,e),c=l.on,u=null==l.value[a]?i||(i=qo(t)):void 0;c===n&&o===u||(r=(n=c).copy()).on(s,o=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,i=n+"";return function(){var a=cn(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,i,n)),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(ko(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=bo(this.node(),n).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?Do:To)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Go:jo)(t,e)):bo(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?zo:Ho)(t,e)):bo(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){vo(this,e).ease=t}}(t,e)):bo(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;vo(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise((function(i,a){var s={value:a},l={value:function(){0===--o&&i()}};n.each((function(){var n=vo(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===o&&i()}))},[Symbol.iterator]:Ko[Symbol.iterator]};var Jo={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Zo(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Hn.prototype.interrupt=function(e){return this.each((function(){Co(this,e)}))},Hn.prototype.transition=function(e){var t,n;e instanceof Xo?(t=e._id,e=e._name):(t=Wo(),(n=Jo).time=$r(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,c=0;c<l;++c)(a=s[c])&&mo(a,e,t,c,s,n||Zo(a,t));return new Xo(r,this._parents,e,t)};const $o=e=>()=>e;function ei(e,t){let{sourceEvent:n,target:r,selection:o,mode:i,dispatch:a}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},selection:{value:o,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function ti(e){e.preventDefault(),e.stopImmediatePropagation()}var ni={name:"drag"},ri={name:"space"},oi={name:"handle"},ii={name:"center"};const{abs:ai,max:si,min:li}=Math;function ci(e){return[+e[0],+e[1]]}function ui(e){return[ci(e[0]),ci(e[1])]}var di={name:"x",handles:["w","e"].map(vi),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Ai={name:"y",handles:["n","s"].map(vi),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},fi={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(vi),input:function(e){return null==e?null:ui(e)},output:function(e){return e}},pi={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},hi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},gi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},mi={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},yi={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function vi(e){return{type:e}}function bi(e){return!e.ctrlKey&&!e.button}function Ci(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Ii(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ei(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function xi(){return Bi(fi)}function Bi(e){var t,n=Ci,r=bi,o=Ii,i=!0,a=kt("start","brush","end"),s=6;function l(t){var n=t.property("__brush",h).selectAll(".overlay").data([vi("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",pi.overlay).merge(n).each((function(){var e=Ei(this).extent;Vn(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])})),t.selectAll(".selection").data([vi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",pi.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(e.handles,(function(e){return e.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(e){return"handle handle--"+e.type})).attr("cursor",(function(e){return pi[e.type]})),t.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",A).filter(o).on("touchstart.brush",A).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var e=Vn(this),t=Ei(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",(function(e){return"e"===e.type[e.type.length-1]?t[1][0]-s/2:t[0][0]-s/2})).attr("y",(function(e){return"s"===e.type[0]?t[1][1]-s/2:t[0][1]-s/2})).attr("width",(function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+s:s})).attr("height",(function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+s:s}))):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(e,t,n){var r=e.__brush.emitter;return!r||n&&r.clean?new d(e,t,n):r}function d(e,t,n){this.that=e,this.args=t,this.state=e.__brush,this.active=0,this.clean=n}function A(n){if((!t||n.touches)&&r.apply(this,arguments)){var o,a,s,l,d,A,f,p,h,g,m,y=this,v=n.target.__data__.type,b="selection"===(i&&n.metaKey?v="overlay":v)?ni:i&&n.altKey?ii:oi,C=e===Ai?null:mi[v],I=e===di?null:yi[v],E=Ei(y),x=E.extent,B=E.selection,w=x[0][0],_=x[0][1],S=x[1][0],D=x[1][1],T=0,k=0,Q=C&&I&&i&&n.shiftKey,M=Array.from(n.touches||[n],(e=>{const t=e.identifier;return(e=Gr(e,y)).point0=e.slice(),e.identifier=t,e}));if("overlay"===v){B&&(h=!0);const t=[M[0],M[1]||M[0]];E.selection=B=[[o=e===Ai?w:li(t[0][0],t[1][0]),s=e===di?_:li(t[0][1],t[1][1])],[d=e===Ai?S:si(t[0][0],t[1][0]),f=e===di?D:si(t[0][1],t[1][1])]],M.length>1&&L()}else o=B[0][0],s=B[0][1],d=B[1][0],f=B[1][1];a=o,l=s,A=d,p=f;var R=Vn(y).attr("pointer-events","none"),P=R.selectAll(".overlay").attr("cursor",pi[v]);Co(y);var O=u(y,arguments,!0).beforestart();if(n.touches)O.moved=N,O.ended=U;else{var F=Vn(n.view).on("mousemove.brush",N,!0).on("mouseup.brush",U,!0);i&&F.on("keydown.brush",(function(e){switch(e.keyCode){case 16:Q=C&&I;break;case 18:b===oi&&(C&&(d=A-T*C,o=a+T*C),I&&(f=p-k*I,s=l+k*I),b=ii,L());break;case 32:b!==oi&&b!==ii||(C<0?d=A-T:C>0&&(o=a-T),I<0?f=p-k:I>0&&(s=l-k),b=ri,P.attr("cursor",pi.selection),L());break;default:return}ti(e)}),!0).on("keyup.brush",(function(e){switch(e.keyCode){case 16:Q&&(g=m=Q=!1,L());break;case 18:b===ii&&(C<0?d=A:C>0&&(o=a),I<0?f=p:I>0&&(s=l),b=oi,L());break;case 32:b===ri&&(e.altKey?(C&&(d=A-T*C,o=a+T*C),I&&(f=p-k*I,s=l+k*I),b=ii):(C<0?d=A:C>0&&(o=a),I<0?f=p:I>0&&(s=l),b=oi),P.attr("cursor",pi[v]),L());break;default:return}ti(e)}),!0),Yn(n.view)}c.call(y),O.start(n,b.name)}function N(e){for(const t of e.changedTouches||[e])for(const e of M)e.identifier===t.identifier&&(e.cur=Gr(t,y));if(Q&&!g&&!m&&1===M.length){const e=M[0];ai(e.cur[0]-e[0])>ai(e.cur[1]-e[1])?m=!0:g=!0}for(const t of M)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);h=!0,ti(e),L(e)}function L(e){const t=M[0],n=t.point0;var r;switch(T=t[0]-n[0],k=t[1]-n[1],b){case ri:case ni:C&&(T=si(w-o,li(S-d,T)),a=o+T,A=d+T),I&&(k=si(_-s,li(D-f,k)),l=s+k,p=f+k);break;case oi:M[1]?(C&&(a=si(w,li(S,M[0][0])),A=si(w,li(S,M[1][0])),C=1),I&&(l=si(_,li(D,M[0][1])),p=si(_,li(D,M[1][1])),I=1)):(C<0?(T=si(w-o,li(S-o,T)),a=o+T,A=d):C>0&&(T=si(w-d,li(S-d,T)),a=o,A=d+T),I<0?(k=si(_-s,li(D-s,k)),l=s+k,p=f):I>0&&(k=si(_-f,li(D-f,k)),l=s,p=f+k));break;case ii:C&&(a=si(w,li(S,o-T*C)),A=si(w,li(S,d+T*C))),I&&(l=si(_,li(D,s-k*I)),p=si(_,li(D,f+k*I)))}A<a&&(C*=-1,r=o,o=d,d=r,r=a,a=A,A=r,v in hi&&P.attr("cursor",pi[v=hi[v]])),p<l&&(I*=-1,r=s,s=f,f=r,r=l,l=p,p=r,v in gi&&P.attr("cursor",pi[v=gi[v]])),E.selection&&(B=E.selection),g&&(a=B[0][0],A=B[1][0]),m&&(l=B[0][1],p=B[1][1]),B[0][0]===a&&B[0][1]===l&&B[1][0]===A&&B[1][1]===p||(E.selection=[[a,l],[A,p]],c.call(y),O.brush(e,b.name))}function U(e){if(function(e){e.stopImmediatePropagation()}(e),e.touches){if(e.touches.length)return;t&&clearTimeout(t),t=setTimeout((function(){t=null}),500)}else Xn(e.view,h),F.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);R.attr("pointer-events","all"),P.attr("cursor",pi.overlay),E.selection&&(B=E.selection),function(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}(B)&&(E.selection=null,c.call(y)),O.end(e,b.name)}}function f(e){u(this,arguments).moved(e)}function p(e){u(this,arguments).ended(e)}function h(){var t=this.__brush||{selection:null};return t.extent=ui(n.apply(this,arguments)),t.dim=e,t}return l.move=function(t,n){t.tween?t.on("start.brush",(function(e){u(this,arguments).beforestart().start(e)})).on("interrupt.brush end.brush",(function(e){u(this,arguments).end(e)})).tween("brush",(function(){var t=this,r=t.__brush,o=u(t,arguments),i=r.selection,a=e.input("function"===typeof n?n.apply(this,arguments):n,r.extent),s=Ur(i,a);function l(e){r.selection=1===e&&null===a?null:s(e),c.call(t),o.brush()}return null!==i&&null!==a?l:l(1)})):t.each((function(){var t=this,r=arguments,o=t.__brush,i=e.input("function"===typeof n?n.apply(t,r):n,o.extent),a=u(t,r).beforestart();Co(t),o.selection=null===i?null:i,c.call(t),a.start().brush().end()}))},l.clear=function(e){l.move(e,null)},d.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(e,t){return this.starting?(this.starting=!1,this.emit("start",e,t)):this.emit("brush",e),this},brush:function(e,t){return this.emit("brush",e,t),this},end:function(e,t){return 0===--this.active&&(delete this.state.emitter,this.emit("end",e,t)),this},emit:function(t,n,r){var o=Vn(this.that).datum();a.call(t,this.that,new ei(t,{sourceEvent:n,target:l,selection:e.output(this.state.selection),mode:r,dispatch:a}),o)}},l.extent=function(e){return arguments.length?(n="function"===typeof e?e:$o(ui(e)),l):n},l.filter=function(e){return arguments.length?(r="function"===typeof e?e:$o(!!e),l):r},l.touchable=function(e){return arguments.length?(o="function"===typeof e?e:$o(!!e),l):o},l.handleSize=function(e){return arguments.length?(s=+e,l):s},l.keyModifiers=function(e){return arguments.length?(i=!!e,l):i},l.on=function(){var e=a.on.apply(a,arguments);return e===a?l:e},l}function wi(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function _i(e){return(e=wi(Math.abs(e)))?e[1]:NaN}var Si,Di=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ti(e){if(!(t=Di.exec(e)))throw new Error("invalid format: "+e);var t;return new ki({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function ki(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Qi(e,t){var n=wi(e,t);if(!n)return e+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}Ti.prototype=ki.prototype,ki.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Mi={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Qi(100*e,t),r:Qi,s:function(e,t){var n=wi(e,t);if(!n)return e+"";var r=n[0],o=n[1],i=o-(Si=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,a=r.length;return i===a?r:i>a?r+new Array(i-a+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+wi(e,Math.max(0,t+i-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ri(e){return e}var Pi,Oi,Fi,Ni=Array.prototype.map,Li=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Ui(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Ri:(t=Ni.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var o=e.length,i=[],a=0,s=t[0],l=0;o>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),i.push(e.substring(o-=s,o+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return i.reverse().join(n)}),o=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?Ri:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Ni.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=Ti(e)).fill,n=e.align,d=e.sign,A=e.symbol,f=e.zero,p=e.width,h=e.comma,g=e.precision,m=e.trim,y=e.type;"n"===y?(h=!0,y="g"):Mi[y]||(void 0===g&&(g=12),m=!0,y="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var v="$"===A?o:"#"===A&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===A?i:/[%p]/.test(y)?l:"",C=Mi[y],I=/[defgprs%]/.test(y);function E(e){var o,i,l,A=v,E=b;if("c"===y)E=C(e)+E,e="";else{var x=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:C(Math.abs(e),g),m&&(e=function(e){e:for(var t,n=e.length,r=1,o=-1;r<n;++r)switch(e[r]){case".":o=t=r;break;case"0":0===o&&(o=r),t=r;break;default:if(!+e[r])break e;o>0&&(o=0)}return o>0?e.slice(0,o)+e.slice(t+1):e}(e)),x&&0===+e&&"+"!==d&&(x=!1),A=(x?"("===d?d:c:"-"===d||"("===d?"":d)+A,E=("s"===y?Li[8+Si/3]:"")+E+(x&&"("===d?")":""),I)for(o=-1,i=e.length;++o<i;)if(48>(l=e.charCodeAt(o))||l>57){E=(46===l?a+e.slice(o+1):e.slice(o))+E,e=e.slice(0,o);break}}h&&!f&&(e=r(e,1/0));var B=A.length+e.length+E.length,w=B<p?new Array(p-B+1).join(t):"";switch(h&&f&&(e=r(w+e,w.length?p-E.length:1/0),w=""),n){case"<":e=A+e+E+w;break;case"=":e=A+w+e+E;break;case"^":e=w.slice(0,B=w.length>>1)+A+e+E+w.slice(B);break;default:e=w+A+e+E}return s(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),E.toString=function(){return e+""},E}return{format:d,formatPrefix:function(e,t){var n=d(((e=Ti(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(_i(t)/3))),o=Math.pow(10,-r),i=Li[8+r/3];return function(e){return n(o*e)+i}}}}function Gi(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function ji(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=Hi)):void 0===t&&(t=zi);for(var n,r,o,i,a,s=new Yi(e),l=[s];n=l.pop();)if((o=t(n.data))&&(a=(o=Array.from(o)).length))for(n.children=o,i=a-1;i>=0;--i)l.push(r=o[i]=new Yi(o[i])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(qi)}function zi(e){return e.children}function Hi(e){return Array.isArray(e)?e[1]:null}function Vi(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function qi(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function Yi(e){this.data=e,this.depth=this.height=0,this.parent=null}!function(e){Pi=Ui(e),Oi=Pi.format,Fi=Pi.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]}),Yi.prototype=ji.prototype={constructor:Yi,count:function(){return this.eachAfter(Gi)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,o,i=this,a=[i],s=[],l=-1;i=a.pop();)if(s.push(i),n=i.children)for(r=0,o=n.length;r<o;++r)a.push(n[r]);for(;i=s.pop();)e.call(t,i,++l,this);return this},eachBefore:function(e,t){for(var n,r,o=this,i=[o],a=-1;o=i.pop();)if(e.call(t,o,++a,this),n=o.children)for(r=n.length-1;r>=0;--r)i.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,o=r&&r.length;--o>=0;)n+=r[o].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),o=null;e=n.pop(),t=r.pop();for(;e===t;)o=e,e=n.pop(),t=r.pop();return o}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var o=r.length;e!==n;)r.splice(o,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return ji(this).eachBefore(Vi)},[Symbol.iterator]:function*(){var e,t,n,r,o=this,i=[o];do{for(e=i.reverse(),i=[];o=e.pop();)if(yield o,t=o.children)for(n=0,r=t.length;n<r;++n)i.push(t[n])}while(i.length)}};var Xi=Math.sqrt(50),Wi=Math.sqrt(10),Ki=Math.sqrt(2);function Ji(e,t,n){var r=(t-e)/Math.max(0,n),o=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,o);return o>=0?(i>=Xi?10:i>=Wi?5:i>=Ki?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(i>=Xi?10:i>=Wi?5:i>=Ki?2:1)}function Zi(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $i(e){let t=e,n=e;function r(e,t,r,o){for(null==r&&(r=0),null==o&&(o=e.length);r<o;){const i=r+o>>>1;n(e[i],t)<0?r=i+1:o=i}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>Zi(e(t),n)}(e)),{left:r,center:function(e,n,o,i){null==o&&(o=0),null==i&&(i=e.length);const a=r(e,n,o,i-1);return a>o&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,o){for(null==r&&(r=0),null==o&&(o=e.length);r<o;){const i=r+o>>>1;n(e[i],t)>0?o=i:r=i+1}return r}}}const ea=$i(Zi),ta=ea.right,na=(ea.left,$i((function(e){return null===e?NaN:+e})).center,ta);function ra(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function oa(e){return+e}var ia=[0,1];function aa(e){return e}function sa(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function la(e,t,n){var r=e[0],o=e[1],i=t[0],a=t[1];return o<r?(r=sa(o,r),i=n(a,i)):(r=sa(r,o),i=n(i,a)),function(e){return i(r(e))}}function ca(e,t,n){var r=Math.min(e.length,t.length)-1,o=new Array(r),i=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)o[a]=sa(e[a],e[a+1]),i[a]=n(t[a],t[a+1]);return function(t){var n=na(e,t,1,r)-1;return i[n](o[n](t))}}function ua(){var e,t,n,r,o,i,a=ia,s=ia,l=Ur,c=aa;function u(){var e=Math.min(a.length,s.length);return c!==aa&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?ca:la,o=i=null,d}function d(t){return null==t||isNaN(t=+t)?n:(o||(o=r(a.map(e),s,l)))(e(c(t)))}return d.invert=function(n){return c(t((i||(i=r(s,a.map(e),Rr)))(n)))},d.domain=function(e){return arguments.length?(a=Array.from(e,oa),u()):a.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),l=ra,u()},d.clamp=function(e){return arguments.length?(c=!!e||aa,u()):c!==aa},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}function da(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Aa(e,t,n,r){var o,i=function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/o;return i>=Xi?o*=10:i>=Wi?o*=5:i>=Ki&&(o*=2),t<e?-o:o}(e,t,n);switch((r=Ti(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(o=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(_i(t)/3)))-_i(Math.abs(e)))}(i,a))||(r.precision=o),Fi(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,_i(t)-_i(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=function(e){return Math.max(0,-_i(Math.abs(e)))}(i))||(r.precision=o-2*("%"===r.type))}return Oi(r)}function fa(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,o,i,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(o=e,e=t,t=o),0===(a=Ji(e,t,n))||!isFinite(a))return[];if(a>0){let n=Math.round(e/a),r=Math.round(t/a);for(n*a<e&&++n,r*a>t&&--r,i=new Array(o=r-n+1);++s<o;)i[s]=(n+s)*a}else{a=-a;let n=Math.round(e*a),r=Math.round(t*a);for(n/a<e&&++n,r/a>t&&--r,i=new Array(o=r-n+1);++s<o;)i[s]=(n+s)/a}return r&&i.reverse(),i}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Aa(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,o,i=t(),a=0,s=i.length-1,l=i[a],c=i[s],u=10;for(c<l&&(o=l,l=c,c=o,o=a,a=s,s=o);u-- >0;){if((o=Ji(l,c,n))===r)return i[a]=l,i[s]=c,t(i);if(o>0)l=Math.floor(l/o)*o,c=Math.ceil(c/o)*o;else{if(!(o<0))break;l=Math.ceil(l*o)/o,c=Math.floor(c*o)/o}r=o}return e},e}function pa(){var e=ua()(aa,aa);return e.copy=function(){return t=e,pa().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},da.apply(e,arguments),fa(e)}const ha=Math.PI,ga=2*ha,ma=1e-6,ya=ga-ma;function va(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ba(){return new va}va.prototype=ba.prototype={constructor:va,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,o,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+o)+","+(this._y1=+i)},arcTo:function(e,t,n,r,o){e=+e,t=+t,n=+n,r=+r,o=+o;var i=this._x1,a=this._y1,s=n-e,l=r-t,c=i-e,u=a-t,d=c*c+u*u;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>ma)if(Math.abs(u*s-l*c)>ma&&o){var A=n-i,f=r-a,p=s*s+l*l,h=A*A+f*f,g=Math.sqrt(p),m=Math.sqrt(d),y=o*Math.tan((ha-Math.acos((p+d-h)/(2*g*m)))/2),v=y/m,b=y/g;Math.abs(v-1)>ma&&(this._+="L"+(e+v*c)+","+(t+v*u)),this._+="A"+o+","+o+",0,0,"+ +(u*A>c*f)+","+(this._x1=e+b*s)+","+(this._y1=t+b*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,o,i){e=+e,t=+t,i=!!i;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=e+a,c=t+s,u=1^i,d=i?r-o:o-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>ma||Math.abs(this._y1-c)>ma)&&(this._+="L"+l+","+c),n&&(d<0&&(d=d%ga+ga),d>ya?this._+="A"+n+","+n+",0,1,"+u+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):d>ma&&(this._+="A"+n+","+n+",0,"+ +(d>=ha)+","+u+","+(this._x1=e+n*Math.cos(o))+","+(this._y1=t+n*Math.sin(o))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const Ca=ba;Array.prototype.slice;function Ia(e){return function(){return e}}function Ea(e){this._context=e}function xa(e){return new Ea(e)}function Ba(e){return e[0]}function wa(e){return e[1]}function _a(e,t){var n=Ia(!0),r=null,o=xa,i=null;function a(a){var s,l,c,u=(a=function(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}(a)).length,d=!1;for(null==r&&(i=o(c=Ca())),s=0;s<=u;++s)!(s<u&&n(l=a[s],s,a))===d&&((d=!d)?i.lineStart():i.lineEnd()),d&&i.point(+e(l,s,a),+t(l,s,a));if(c)return i=null,c+""||null}return e="function"===typeof e?e:void 0===e?Ba:Ia(e),t="function"===typeof t?t:void 0===t?wa:Ia(t),a.x=function(t){return arguments.length?(e="function"===typeof t?t:Ia(+t),a):e},a.y=function(e){return arguments.length?(t="function"===typeof e?e:Ia(+e),a):t},a.defined=function(e){return arguments.length?(n="function"===typeof e?e:Ia(!!e),a):n},a.curve=function(e){return arguments.length?(o=e,null!=r&&(i=o(r)),a):o},a.context=function(e){return arguments.length?(null==e?r=i=null:i=o(r=e),a):r},a}function Sa(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Da(e){this._context=e}function Ta(e){return new Da(e)}function ka(e,t){this._context=e,this._t=t}Ea.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},Da.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Sa(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Sa(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ka.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Qa=new Date,Ma=new Date;function Ra(e,t,n,r){function o(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return o.floor=function(t){return e(t=new Date(+t)),t},o.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},o.round=function(e){var t=o(e),n=o.ceil(e);return e-t<n-e?t:n},o.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},o.range=function(n,r,i){var a,s=[];if(n=o.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return s;do{s.push(a=new Date(+n)),t(n,i),e(n)}while(a<n&&n<r);return s},o.filter=function(n){return Ra((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(o.count=function(t,r){return Qa.setTime(+t),Ma.setTime(+r),e(Qa),e(Ma),Math.floor(n(Qa,Ma))},o.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?o.filter(r?function(t){return r(t)%e===0}:function(t){return o.count(0,t)%e===0}):o:null}),o}const Pa=6e4,Oa=864e5,Fa=6048e5;function Na(e){return Ra((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/Fa}))}var La=Na(0),Ua=Na(1),Ga=Na(2),ja=Na(3),za=Na(4),Ha=Na(5),Va=Na(6),qa=(La.range,Ua.range,Ga.range,ja.range,za.range,Ha.range,Va.range,Ra((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Oa}),(function(e){return e.getUTCDate()-1})));const Ya=qa;qa.range;function Xa(e){return Ra((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Pa)/Fa}))}var Wa=Xa(0),Ka=Xa(1),Ja=Xa(2),Za=Xa(3),$a=Xa(4),es=Xa(5),ts=Xa(6),ns=(Wa.range,Ka.range,Ja.range,Za.range,$a.range,es.range,ts.range,Ra((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Pa)/Oa),(e=>e.getDate()-1)));const rs=ns;ns.range;var os=Ra((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));os.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ra((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};const is=os;os.range;var as=Ra((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));as.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ra((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};const ss=as;as.range;function ls(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function cs(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function us(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var ds,As,fs={"-":"",_:" ",0:"0"},ps=/^\s*\d+/,hs=/^%/,gs=/[\\^$*+?|[\]().{}]/g;function ms(e,t,n){var r=e<0?"-":"",o=(r?-e:e)+"",i=o.length;return r+(i<n?new Array(n-i+1).join(t)+o:o)}function ys(e){return e.replace(gs,"\\$&")}function vs(e){return new RegExp("^(?:"+e.map(ys).join("|")+")","i")}function bs(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function Cs(e,t,n){var r=ps.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Is(e,t,n){var r=ps.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Es(e,t,n){var r=ps.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function xs(e,t,n){var r=ps.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Bs(e,t,n){var r=ps.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ws(e,t,n){var r=ps.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function _s(e,t,n){var r=ps.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ss(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ds(e,t,n){var r=ps.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Ts(e,t,n){var r=ps.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ks(e,t,n){var r=ps.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Qs(e,t,n){var r=ps.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Ms(e,t,n){var r=ps.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Rs(e,t,n){var r=ps.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Ps(e,t,n){var r=ps.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Os(e,t,n){var r=ps.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Fs(e,t,n){var r=ps.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ns(e,t,n){var r=hs.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Ls(e,t,n){var r=ps.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Us(e,t,n){var r=ps.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Gs(e,t){return ms(e.getDate(),t,2)}function js(e,t){return ms(e.getHours(),t,2)}function zs(e,t){return ms(e.getHours()%12||12,t,2)}function Hs(e,t){return ms(1+rs.count(is(e),e),t,3)}function Vs(e,t){return ms(e.getMilliseconds(),t,3)}function qs(e,t){return Vs(e,t)+"000"}function Ys(e,t){return ms(e.getMonth()+1,t,2)}function Xs(e,t){return ms(e.getMinutes(),t,2)}function Ws(e,t){return ms(e.getSeconds(),t,2)}function Ks(e){var t=e.getDay();return 0===t?7:t}function Js(e,t){return ms(Wa.count(is(e)-1,e),t,2)}function Zs(e){var t=e.getDay();return t>=4||0===t?$a(e):$a.ceil(e)}function $s(e,t){return e=Zs(e),ms($a.count(is(e),e)+(4===is(e).getDay()),t,2)}function el(e){return e.getDay()}function tl(e,t){return ms(Ka.count(is(e)-1,e),t,2)}function nl(e,t){return ms(e.getFullYear()%100,t,2)}function rl(e,t){return ms((e=Zs(e)).getFullYear()%100,t,2)}function ol(e,t){return ms(e.getFullYear()%1e4,t,4)}function il(e,t){var n=e.getDay();return ms((e=n>=4||0===n?$a(e):$a.ceil(e)).getFullYear()%1e4,t,4)}function al(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ms(t/60|0,"0",2)+ms(t%60,"0",2)}function sl(e,t){return ms(e.getUTCDate(),t,2)}function ll(e,t){return ms(e.getUTCHours(),t,2)}function cl(e,t){return ms(e.getUTCHours()%12||12,t,2)}function ul(e,t){return ms(1+Ya.count(ss(e),e),t,3)}function dl(e,t){return ms(e.getUTCMilliseconds(),t,3)}function Al(e,t){return dl(e,t)+"000"}function fl(e,t){return ms(e.getUTCMonth()+1,t,2)}function pl(e,t){return ms(e.getUTCMinutes(),t,2)}function hl(e,t){return ms(e.getUTCSeconds(),t,2)}function gl(e){var t=e.getUTCDay();return 0===t?7:t}function ml(e,t){return ms(La.count(ss(e)-1,e),t,2)}function yl(e){var t=e.getUTCDay();return t>=4||0===t?za(e):za.ceil(e)}function vl(e,t){return e=yl(e),ms(za.count(ss(e),e)+(4===ss(e).getUTCDay()),t,2)}function bl(e){return e.getUTCDay()}function Cl(e,t){return ms(Ua.count(ss(e)-1,e),t,2)}function Il(e,t){return ms(e.getUTCFullYear()%100,t,2)}function El(e,t){return ms((e=yl(e)).getUTCFullYear()%100,t,2)}function xl(e,t){return ms(e.getUTCFullYear()%1e4,t,4)}function Bl(e,t){var n=e.getUTCDay();return ms((e=n>=4||0===n?za(e):za.ceil(e)).getUTCFullYear()%1e4,t,4)}function wl(){return"+0000"}function _l(){return"%"}function Sl(e){return+e}function Dl(e){return Math.floor(+e/1e3)}!function(e){ds=function(e){var t=e.dateTime,n=e.date,r=e.time,o=e.periods,i=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,c=vs(o),u=bs(o),d=vs(i),A=bs(i),f=vs(a),p=bs(a),h=vs(s),g=bs(s),m=vs(l),y=bs(l),v={a:function(e){return a[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Gs,e:Gs,f:qs,g:rl,G:il,H:js,I:zs,j:Hs,L:Vs,m:Ys,M:Xs,p:function(e){return o[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Sl,s:Dl,S:Ws,u:Ks,U:Js,V:$s,w:el,W:tl,x:null,X:null,y:nl,Y:ol,Z:al,"%":_l},b={a:function(e){return a[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:sl,e:sl,f:Al,g:El,G:Bl,H:ll,I:cl,j:ul,L:dl,m:fl,M:pl,p:function(e){return o[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Sl,s:Dl,S:hl,u:gl,U:ml,V:vl,w:bl,W:Cl,x:null,X:null,y:Il,Y:xl,Z:wl,"%":_l},C={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=A.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return x(e,t,n,r)},d:ks,e:ks,f:Fs,g:_s,G:ws,H:Ms,I:Ms,j:Qs,L:Os,m:Ts,M:Rs,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:Ds,Q:Ls,s:Us,S:Ps,u:Is,U:Es,V:xs,w:Cs,W:Bs,x:function(e,t,r){return x(e,n,t,r)},X:function(e,t,n){return x(e,r,t,n)},y:_s,Y:ws,Z:Ss,"%":Ns};function I(e,t){return function(n){var r,o,i,a=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(o=fs[r=e.charAt(++s)])?r=e.charAt(++s):o="e"===r?" ":"0",(i=t[r])&&(r=i(n,o)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function E(e,t){return function(n){var r,o,i=us(1900,void 0,1);if(x(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(o=(r=cs(us(i.y,0,1))).getUTCDay(),r=o>4||0===o?Ua.ceil(r):Ua(r),r=Ya.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(o=(r=ls(us(i.y,0,1))).getDay(),r=o>4||0===o?Ka.ceil(r):Ka(r),r=rs.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),o="Z"in i?cs(us(i.y,0,1)).getUTCDay():ls(us(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(o+5)%7:i.w+7*i.U-(o+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,cs(i)):ls(i)}}function x(e,t,n,r){for(var o,i,a=0,s=t.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(o=t.charCodeAt(a++))){if(o=t.charAt(a++),!(i=C[o in fs?t.charAt(a++):o])||(r=i(e,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}return v.x=I(n,v),v.X=I(r,v),v.c=I(t,v),b.x=I(n,b),b.X=I(r,b),b.c=I(t,b),{format:function(e){var t=I(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=E(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=I(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=E(e+="",!0);return t.toString=function(){return e},t}}}(e),ds.format,As=ds.parse,ds.utcFormat,ds.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Tl(e){return((e=Math.exp(e))+1/e)/2}const kl=function e(t,n,r){function o(e,o){var i,a,s=e[0],l=e[1],c=e[2],u=o[0],d=o[1],A=o[2],f=u-s,p=d-l,h=f*f+p*p;if(h<1e-12)a=Math.log(A/c)/t,i=function(e){return[s+e*f,l+e*p,c*Math.exp(t*e*a)]};else{var g=Math.sqrt(h),m=(A*A-c*c+r*h)/(2*c*n*g),y=(A*A-c*c-r*h)/(2*A*n*g),v=Math.log(Math.sqrt(m*m+1)-m),b=Math.log(Math.sqrt(y*y+1)-y);a=(b-v)/t,i=function(e){var r=e*a,o=Tl(v),i=c/(n*g)*(o*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+v)-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[s+i*f,l+i*p,c*o/Tl(t*r+v)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4),Ql=e=>()=>e;function Ml(e,t){let{sourceEvent:n,target:r,transform:o,dispatch:i}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Rl(e,t,n){this.k=e,this.x=t,this.y=n}Rl.prototype={constructor:Rl,scale:function(e){return 1===e?this:new Rl(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Rl(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Pl=new Rl(1,0,0);function Ol(e){e.stopImmediatePropagation()}function Fl(e){e.preventDefault(),e.stopImmediatePropagation()}function Nl(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function Ll(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Ul(){return this.__zoom||Pl}function Gl(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function jl(){return navigator.maxTouchPoints||"ontouchstart"in this}function zl(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}Rl.prototype;var Hl="1.13.7",Vl="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},ql=Array.prototype,Yl=Object.prototype,Xl="undefined"!==typeof Symbol?Symbol.prototype:null,Wl=ql.push,Kl=ql.slice,Jl=Yl.toString,Zl=Yl.hasOwnProperty,$l="undefined"!==typeof ArrayBuffer,ec="undefined"!==typeof DataView,tc=Array.isArray,nc=Object.keys,rc=Object.create,oc=$l&&ArrayBuffer.isView,ic=isNaN,ac=isFinite,sc=!{toString:null}.propertyIsEnumerable("toString"),lc=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],cc=Math.pow(2,53)-1;function uc(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),o=0;o<n;o++)r[o]=arguments[o+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var i=Array(t+1);for(o=0;o<t;o++)i[o]=arguments[o];return i[t]=r,e.apply(this,i)}}function dc(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function Ac(e){return null===e}function fc(e){return void 0===e}function pc(e){return!0===e||!1===e||"[object Boolean]"===Jl.call(e)}function hc(e){return!(!e||1!==e.nodeType)}function gc(e){var t="[object "+e+"]";return function(e){return Jl.call(e)===t}}const mc=gc("String"),yc=gc("Number"),vc=gc("Date"),bc=gc("RegExp"),Cc=gc("Error"),Ic=gc("Symbol"),Ec=gc("ArrayBuffer");var xc=gc("Function"),Bc=Vl.document&&Vl.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof Bc&&(xc=function(e){return"function"==typeof e||!1});const wc=xc,_c=gc("Object");var Sc=ec&&(!/\[native code\]/.test(String(DataView))||_c(new DataView(new ArrayBuffer(8)))),Dc="undefined"!==typeof Map&&_c(new Map),Tc=gc("DataView");const kc=Sc?function(e){return null!=e&&wc(e.getInt8)&&Ec(e.buffer)}:Tc,Qc=tc||gc("Array");function Mc(e,t){return null!=e&&Zl.call(e,t)}var Rc=gc("Arguments");!function(){Rc(arguments)||(Rc=function(e){return Mc(e,"callee")})}();const Pc=Rc;function Oc(e){return!Ic(e)&&ac(e)&&!isNaN(parseFloat(e))}function Fc(e){return yc(e)&&ic(e)}function Nc(e){return function(){return e}}function Lc(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=cc}}function Uc(e){return function(t){return null==t?void 0:t[e]}}const Gc=Uc("byteLength"),jc=Lc(Gc);var zc=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const Hc=$l?function(e){return oc?oc(e)&&!kc(e):jc(e)&&zc.test(Jl.call(e))}:Nc(!1),Vc=Uc("length");function qc(e,t){t=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(e){return!0===t[e]},push:function(n){return t[n]=!0,e.push(n)}}}(t);var n=lc.length,r=e.constructor,o=wc(r)&&r.prototype||Yl,i="constructor";for(Mc(e,i)&&!t.contains(i)&&t.push(i);n--;)(i=lc[n])in e&&e[i]!==o[i]&&!t.contains(i)&&t.push(i)}function Yc(e){if(!dc(e))return[];if(nc)return nc(e);var t=[];for(var n in e)Mc(e,n)&&t.push(n);return sc&&qc(e,t),t}function Xc(e){if(null==e)return!0;var t=Vc(e);return"number"==typeof t&&(Qc(e)||mc(e)||Pc(e))?0===t:0===Vc(Yc(e))}function Wc(e,t){var n=Yc(t),r=n.length;if(null==e)return!r;for(var o=Object(e),i=0;i<r;i++){var a=n[i];if(t[a]!==o[a]||!(a in o))return!1}return!0}function Kc(e){return e instanceof Kc?e:this instanceof Kc?void(this._wrapped=e):new Kc(e)}function Jc(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Gc(e))}Kc.VERSION=Hl,Kc.prototype.value=function(){return this._wrapped},Kc.prototype.valueOf=Kc.prototype.toJSON=Kc.prototype.value,Kc.prototype.toString=function(){return String(this._wrapped)};var Zc="[object DataView]";function $c(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var o=typeof e;return("function"===o||"object"===o||"object"==typeof t)&&eu(e,t,n,r)}function eu(e,t,n,r){e instanceof Kc&&(e=e._wrapped),t instanceof Kc&&(t=t._wrapped);var o=Jl.call(e);if(o!==Jl.call(t))return!1;if(Sc&&"[object Object]"==o&&kc(e)){if(!kc(t))return!1;o=Zc}switch(o){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return Xl.valueOf.call(e)===Xl.valueOf.call(t);case"[object ArrayBuffer]":case Zc:return eu(Jc(e),Jc(t),n,r)}var i="[object Array]"===o;if(!i&&Hc(e)){if(Gc(e)!==Gc(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;i=!0}if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(wc(a)&&a instanceof a&&wc(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}r=r||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return r[l]===t;if(n.push(e),r.push(t),i){if((l=e.length)!==t.length)return!1;for(;l--;)if(!$c(e[l],t[l],n,r))return!1}else{var c,u=Yc(e);if(l=u.length,Yc(t).length!==l)return!1;for(;l--;)if(!Mc(t,c=u[l])||!$c(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0}function tu(e,t){return $c(e,t)}function nu(e){if(!dc(e))return[];var t=[];for(var n in e)t.push(n);return sc&&qc(e,t),t}function ru(e){var t=Vc(e);return function(n){if(null==n)return!1;var r=nu(n);if(Vc(r))return!1;for(var o=0;o<t;o++)if(!wc(n[e[o]]))return!1;return e!==lu||!wc(n[ou])}}var ou="forEach",iu=["clear","delete"],au=["get","has","set"],su=iu.concat(ou,au),lu=iu.concat(au),cu=["add"].concat(iu,ou,"has");const uu=Dc?ru(su):gc("Map"),du=Dc?ru(lu):gc("WeakMap"),Au=Dc?ru(cu):gc("Set"),fu=gc("WeakSet");function pu(e){for(var t=Yc(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=e[t[o]];return r}function hu(e){for(var t=Yc(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=[t[o],e[t[o]]];return r}function gu(e){for(var t={},n=Yc(e),r=0,o=n.length;r<o;r++)t[e[n[r]]]=n[r];return t}function mu(e){var t=[];for(var n in e)wc(e[n])&&t.push(n);return t.sort()}function yu(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var o=1;o<r;o++)for(var i=arguments[o],a=e(i),s=a.length,l=0;l<s;l++){var c=a[l];t&&void 0!==n[c]||(n[c]=i[c])}return n}}const vu=yu(nu),bu=yu(Yc),Cu=yu(nu,!0);function Iu(e){if(!dc(e))return{};if(rc)return rc(e);var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}function Eu(e,t){var n=Iu(e);return t&&bu(n,t),n}function xu(e){return dc(e)?Qc(e)?e.slice():vu({},e):e}function Bu(e,t){return t(e),e}function wu(e){return Qc(e)?e:[e]}function _u(e){return Kc.toPath(e)}function Su(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0}function Du(e,t,n){var r=Su(e,_u(t));return fc(r)?n:r}function Tu(e,t){for(var n=(t=_u(t)).length,r=0;r<n;r++){var o=t[r];if(!Mc(e,o))return!1;e=e[o]}return!!n}function ku(e){return e}function Qu(e){return e=bu({},e),function(t){return Wc(t,e)}}function Mu(e){return e=_u(e),function(t){return Su(t,e)}}function Ru(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)}}return function(){return e.apply(t,arguments)}}function Pu(e,t,n){return null==e?ku:wc(e)?Ru(e,t,n):dc(e)&&!Qc(e)?Qu(e):Mu(e)}function Ou(e,t){return Pu(e,t,1/0)}function Fu(e,t,n){return Kc.iteratee!==Ou?Kc.iteratee(e,t):Pu(e,t,n)}function Nu(e,t,n){t=Fu(t,n);for(var r=Yc(e),o=r.length,i={},a=0;a<o;a++){var s=r[a];i[s]=t(e[s],s,e)}return i}function Lu(){}function Uu(e){return null==e?Lu:function(t){return Du(e,t)}}function Gu(e,t,n){var r=Array(Math.max(0,e));t=Ru(t,n,1);for(var o=0;o<e;o++)r[o]=t(o);return r}function ju(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}Kc.toPath=wu,Kc.iteratee=Ou;const zu=Date.now||function(){return(new Date).getTime()};function Hu(e){var t=function(t){return e[t]},n="(?:"+Yc(e).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(o,t):e}}const Vu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},qu=Hu(Vu),Yu=Hu(gu(Vu)),Xu=Kc.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Wu=/(.)^/,Ku={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Ju=/\\|'|\r|\n|\u2028|\u2029/g;function Zu(e){return"\\"+Ku[e]}var $u=/^\s*(\w|\$)+\s*$/;function ed(e,t,n){!t&&n&&(t=n),t=Cu({},t,Kc.templateSettings);var r=RegExp([(t.escape||Wu).source,(t.interpolate||Wu).source,(t.evaluate||Wu).source].join("|")+"|$","g"),o=0,i="__p+='";e.replace(r,(function(t,n,r,a,s){return i+=e.slice(o,s).replace(Ju,Zu),o=s+t.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?i+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(i+="';\n"+a+"\n__p+='"),t})),i+="';\n";var a,s=t.variable;if(s){if(!$u.test(s))throw new Error("variable is not a bare identifier: "+s)}else i="with(obj||{}){\n"+i+"}\n",s="obj";i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{a=new Function(s,"_",i)}catch(l0e){throw l0e.source=i,l0e}var l=function(e){return a.call(this,e,Kc)};return l.source="function("+s+"){\n"+i+"}",l}function td(e,t,n){var r=(t=_u(t)).length;if(!r)return wc(n)?n.call(e):n;for(var o=0;o<r;o++){var i=null==e?void 0:e[t[o]];void 0===i&&(i=n,o=r),e=wc(i)?i.call(e):i}return e}var nd=0;function rd(e){var t=++nd+"";return e?e+t:t}function od(e){var t=Kc(e);return t._chain=!0,t}function id(e,t,n,r,o){if(!(r instanceof t))return e.apply(n,o);var i=Iu(e.prototype),a=e.apply(i,o);return dc(a)?a:i}var ad=uc((function(e,t){var n=ad.placeholder,r=function(){for(var o=0,i=t.length,a=Array(i),s=0;s<i;s++)a[s]=t[s]===n?arguments[o++]:t[s];for(;o<arguments.length;)a.push(arguments[o++]);return id(e,r,this,this,a)};return r}));ad.placeholder=Kc;const sd=ad,ld=uc((function(e,t,n){if(!wc(e))throw new TypeError("Bind must be called on a function");var r=uc((function(o){return id(e,r,t,this,n.concat(o))}));return r})),cd=Lc(Vc);function ud(e,t,n,r){if(r=r||[],t||0===t){if(t<=0)return r.concat(e)}else t=1/0;for(var o=r.length,i=0,a=Vc(e);i<a;i++){var s=e[i];if(cd(s)&&(Qc(s)||Pc(s)))if(t>1)ud(s,t-1,n,r),o=r.length;else for(var l=0,c=s.length;l<c;)r[o++]=s[l++];else n||(r[o++]=s)}return r}const dd=uc((function(e,t){var n=(t=ud(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=ld(e[r],e)}return e}));function Ad(e,t){var n=function(r){var o=n.cache,i=""+(t?t.apply(this,arguments):r);return Mc(o,i)||(o[i]=e.apply(this,arguments)),o[i]};return n.cache={},n}const fd=uc((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),pd=sd(fd,Kc,1);function hd(e,t,n){var r,o,i,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:zu(),r=null,a=e.apply(o,i),r||(o=i=null)},c=function(){var c=zu();s||!1!==n.leading||(s=c);var u=t-(c-s);return o=this,i=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),s=c,a=e.apply(o,i),r||(o=i=null)):r||!1===n.trailing||(r=setTimeout(l,u)),a};return c.cancel=function(){clearTimeout(r),s=0,r=o=i=null},c}function gd(e,t,n){var r,o,i,a,s,l=function(){var c=zu()-o;t>c?r=setTimeout(l,t-c):(r=null,n||(a=e.apply(s,i)),r||(i=s=null))},c=uc((function(c){return s=this,i=c,o=zu(),r||(r=setTimeout(l,t),n&&(a=e.apply(s,i))),a}));return c.cancel=function(){clearTimeout(r),r=i=s=null},c}function md(e,t){return sd(t,e)}function yd(e){return function(){return!e.apply(this,arguments)}}function vd(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function bd(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function Cd(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}const Id=sd(Cd,2);function Ed(e,t,n){t=Fu(t,n);for(var r,o=Yc(e),i=0,a=o.length;i<a;i++)if(t(e[r=o[i]],r,e))return r}function xd(e){return function(t,n,r){n=Fu(n,r);for(var o=Vc(t),i=e>0?0:o-1;i>=0&&i<o;i+=e)if(n(t[i],i,t))return i;return-1}}const Bd=xd(1),wd=xd(-1);function _d(e,t,n,r){for(var o=(n=Fu(n,r,1))(t),i=0,a=Vc(e);i<a;){var s=Math.floor((i+a)/2);n(e[s])<o?i=s+1:a=s}return i}function Sd(e,t,n){return function(r,o,i){var a=0,s=Vc(r);if("number"==typeof i)e>0?a=i>=0?i:Math.max(i+s,a):s=i>=0?Math.min(i+1,s):i+s+1;else if(n&&i&&s)return r[i=n(r,o)]===o?i:-1;if(o!==o)return(i=t(Kl.call(r,a,s),Fc))>=0?i+a:-1;for(i=e>0?a:s-1;i>=0&&i<s;i+=e)if(r[i]===o)return i;return-1}}const Dd=Sd(1,Bd,_d),Td=Sd(-1,wd);function kd(e,t,n){var r=(cd(e)?Bd:Ed)(e,t,n);if(void 0!==r&&-1!==r)return e[r]}function Qd(e,t){return kd(e,Qu(t))}function Md(e,t,n){var r,o;if(t=Ru(t,n),cd(e))for(r=0,o=e.length;r<o;r++)t(e[r],r,e);else{var i=Yc(e);for(r=0,o=i.length;r<o;r++)t(e[i[r]],i[r],e)}return e}function Rd(e,t,n){t=Fu(t,n);for(var r=!cd(e)&&Yc(e),o=(r||e).length,i=Array(o),a=0;a<o;a++){var s=r?r[a]:a;i[a]=t(e[s],s,e)}return i}function Pd(e){return function(t,n,r,o){var i=arguments.length>=3;return function(t,n,r,o){var i=!cd(t)&&Yc(t),a=(i||t).length,s=e>0?0:a-1;for(o||(r=t[i?i[s]:s],s+=e);s>=0&&s<a;s+=e){var l=i?i[s]:s;r=n(r,t[l],l,t)}return r}(t,Ru(n,o,4),r,i)}}const Od=Pd(1),Fd=Pd(-1);function Nd(e,t,n){var r=[];return t=Fu(t,n),Md(e,(function(e,n,o){t(e,n,o)&&r.push(e)})),r}function Ld(e,t,n){return Nd(e,yd(Fu(t)),n)}function Ud(e,t,n){t=Fu(t,n);for(var r=!cd(e)&&Yc(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(!t(e[a],a,e))return!1}return!0}function Gd(e,t,n){t=Fu(t,n);for(var r=!cd(e)&&Yc(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(t(e[a],a,e))return!0}return!1}function jd(e,t,n,r){return cd(e)||(e=pu(e)),("number"!=typeof n||r)&&(n=0),Dd(e,t,n)>=0}const zd=uc((function(e,t,n){var r,o;return wc(t)?o=t:(t=_u(t),r=t.slice(0,-1),t=t[t.length-1]),Rd(e,(function(e){var i=o;if(!i){if(r&&r.length&&(e=Su(e,r)),null==e)return;i=e[t]}return null==i?i:i.apply(e,n)}))}));function Hd(e,t){return Rd(e,Mu(t))}function Vd(e,t){return Nd(e,Qu(t))}function qd(e,t,n){var r,o,i=-1/0,a=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,l=(e=cd(e)?e:pu(e)).length;s<l;s++)null!=(r=e[s])&&r>i&&(i=r);else t=Fu(t,n),Md(e,(function(e,n,r){((o=t(e,n,r))>a||o===-1/0&&i===-1/0)&&(i=e,a=o)}));return i}function Yd(e,t,n){var r,o,i=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,l=(e=cd(e)?e:pu(e)).length;s<l;s++)null!=(r=e[s])&&r<i&&(i=r);else t=Fu(t,n),Md(e,(function(e,n,r){((o=t(e,n,r))<a||o===1/0&&i===1/0)&&(i=e,a=o)}));return i}var Xd=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Wd(e){return e?Qc(e)?Kl.call(e):mc(e)?e.match(Xd):cd(e)?Rd(e,ku):pu(e):[]}function Kd(e,t,n){if(null==t||n)return cd(e)||(e=pu(e)),e[ju(e.length-1)];var r=Wd(e),o=Vc(r);t=Math.max(Math.min(t,o),0);for(var i=o-1,a=0;a<t;a++){var s=ju(a,i),l=r[a];r[a]=r[s],r[s]=l}return r.slice(0,t)}function Jd(e){return Kd(e,1/0)}function Zd(e,t,n){var r=0;return t=Fu(t,n),Hd(Rd(e,(function(e,n,o){return{value:e,index:r++,criteria:t(e,n,o)}})).sort((function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index})),"value")}function $d(e,t){return function(n,r,o){var i=t?[[],[]]:{};return r=Fu(r,o),Md(n,(function(t,o){var a=r(t,o,n);e(i,t,a)})),i}}const eA=$d((function(e,t,n){Mc(e,n)?e[n].push(t):e[n]=[t]})),tA=$d((function(e,t,n){e[n]=t})),nA=$d((function(e,t,n){Mc(e,n)?e[n]++:e[n]=1})),rA=$d((function(e,t,n){e[n?0:1].push(t)}),!0);function oA(e){return null==e?0:cd(e)?e.length:Yc(e).length}function iA(e,t,n){return t in n}const aA=uc((function(e,t){var n={},r=t[0];if(null==e)return n;wc(r)?(t.length>1&&(r=Ru(r,t[1])),t=nu(e)):(r=iA,t=ud(t,!1,!1),e=Object(e));for(var o=0,i=t.length;o<i;o++){var a=t[o],s=e[a];r(s,a,e)&&(n[a]=s)}return n})),sA=uc((function(e,t){var n,r=t[0];return wc(r)?(r=yd(r),t.length>1&&(n=t[1])):(t=Rd(ud(t,!1,!1),String),r=function(e,n){return!jd(t,n)}),aA(e,r,n)}));function lA(e,t,n){return Kl.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function cA(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:lA(e,e.length-t)}function uA(e,t,n){return Kl.call(e,null==t||n?1:t)}function dA(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:uA(e,Math.max(0,e.length-t))}function AA(e){return Nd(e,Boolean)}function fA(e,t){return ud(e,t,!1)}const pA=uc((function(e,t){return t=ud(t,!0,!0),Nd(e,(function(e){return!jd(t,e)}))})),hA=uc((function(e,t){return pA(e,t)}));function gA(e,t,n,r){pc(t)||(r=n,n=t,t=!1),null!=n&&(n=Fu(n,r));for(var o=[],i=[],a=0,s=Vc(e);a<s;a++){var l=e[a],c=n?n(l,a,e):l;t&&!n?(a&&i===c||o.push(l),i=c):n?jd(i,c)||(i.push(c),o.push(l)):jd(o,l)||o.push(l)}return o}const mA=uc((function(e){return gA(ud(e,!0,!0))}));function yA(e){for(var t=[],n=arguments.length,r=0,o=Vc(e);r<o;r++){var i=e[r];if(!jd(t,i)){var a;for(a=1;a<n&&jd(arguments[a],i);a++);a===n&&t.push(i)}}return t}function vA(e){for(var t=e&&qd(e,Vc).length||0,n=Array(t),r=0;r<t;r++)n[r]=Hd(e,r);return n}const bA=uc(vA);function CA(e,t){for(var n={},r=0,o=Vc(e);r<o;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n}function IA(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),o=Array(r),i=0;i<r;i++,e+=n)o[i]=e;return o}function EA(e,t){if(null==t||t<1)return[];for(var n=[],r=0,o=e.length;r<o;)n.push(Kl.call(e,r,r+=t));return n}function xA(e,t){return e._chain?Kc(t).chain():t}function BA(e){return Md(mu(e),(function(t){var n=Kc[t]=e[t];Kc.prototype[t]=function(){var e=[this._wrapped];return Wl.apply(e,arguments),xA(this,n.apply(Kc,e))}})),Kc}Md(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=ql[e];Kc.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),xA(this,n)}})),Md(["concat","join","slice"],(function(e){var t=ql[e];Kc.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),xA(this,e)}}));const wA=Kc;var _A=BA(e);_A._=_A;const SA=function(e,t){var n;return parseString(e,(function(e,t){n=t["nex:nexml"].trees[0].tree.map((function(e){var t=e.node.map((e=>e.$)),n=t.reduce((function(e,t){return t.edges=[],t.name=t.id,e[t.id]=t,e}),{}),r=t.filter((e=>e.root)),o=r>0?r[0].id:t[0].id;return n[o].name="root",e.edge.map((e=>e.$)).forEach((function(e){n[e.source].edges.push(e)})),function e(t,r){if(t.edges){var o=Hd(t.edges,"target");t.children=pu(aA(n,o)),t.children.forEach((function(e,n){e.attribute=t.edges[n].length||""})),t.children.forEach(e),t.annotation=""}}(n[o]),n[o]}))})),n};function DA(e,t,n,r){let o=this.nodes.descendants();if(e.parent){if(o.indexOf(e)>=0){let o=e.parent.children.indexOf(e),i={name:n,parent:e.parent,attribute:r?r[2]:null,original_child_order:e.original_child_order},a={name:t,parent:i,attribute:r?r[1]:null,original_child_order:2};i.children=[e,a],e.parent.children[o]=i,e.parent=i,e.attribute=r?r[0]:null,e.original_child_order=1}}return this}function TA(e,t){return e.children?e.children.push(t):e.children=[t],e}function kA(e,t){return{data:{name:e,attribute:t?t[1]:null},parent:""}}function QA(e){let t=this.nodes.descendants();if("number"!=typeof e)return this.deleteANode(t.indexOf(e));if(e>0&&e<t.length){let n=t[e];if(n.parent){let r=n.parent.children.indexOf(n);r>=0&&(t.splice(e,1),n.children&&n.children.forEach((function(e){e.original_child_order=n.parent.children.length,n.parent.children.push(e),e.parent=n.parent})),n.parent.children.length>2?n.parent.children.splice(r,1):n.parent.parent?(n.parent.parent.children[n.parent.parent.children.indexOf(n.parent)]=n.parent.children[1-r],n.parent.children[1-r].parent=n.parent.parent,t.splice(t.indexOf(n.parent),1)):(t.splice(0,1),t.parent=null,delete t.data.attribute,delete t.data.annotation,delete t.data.original_child_order,t.name="root",t.data.name="root"))}}return this}function MA(){return Nd(this.nodes.descendants(),(e=>!Tu(e,"children")))}function RA(){return Nd(this.nodes.descendants(),(e=>Tu(e,"children")))}function PA(){return this.nodes}function OA(){return this.nodes}function FA(e){return Nd(this.nodes.descendants(),(t=>t.data.name==e))[0]}function NA(e){Md(this.nodes.descendants(),(function(t){t.data&&t.data.name in e&&(t.annotations=e[t.data.name])}))}function LA(e){return!Tu(e,"children")}function UA(e,t){return this.nodes.each((function(n){e in n&&(t&&(n[t]=n[e]),delete n[e])})),this}function GA(e){e||this.nodes.each((e=>{LA(e)||(e[this.selection_attribute_name]=!1,e.data.traits||(e.data.traits={}),e.data.traits[this.selection_attribute_name]=e[this.selection_attribute_name])}))}function jA(e,t,n){let r=[];return function o(i){LA(i)?t&&i!=e&&r.push(i):(n&&i!=e&&r.push(i),i.children.forEach(o))}(e),r}const zA=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=/^-?\d+(\.\d+)?$/;let r=t.left_delimiter||"{",o=t.right_delimiter||"}",i=[];function a(){let e=i[i.length-1];"children"in e||(e.children=[]),i.push({name:null}),e.children.push(i[i.length-1]),i[i.length-1].original_child_order=e.children.length}function s(){let e=i.pop();e.name=u,"children"in e?e.bootstrap_values=u:e.name=u,e.attribute=d,"["==r&&A.includes("&&NHX")?A.split(":").slice(1).forEach((t=>{const[r,o]=t.split("=");e[r]=n.test(o)?+o:o})):e.annotation=A,u="",d="",A=""}function l(t){return{json:null,error:"Unexpected '"+e[t]+"' in '"+e.substring(t-20,t+1)+"[ERROR HERE]"+e.substring(t+1,t+20)+"'"}}let c=0,u="",d="",A="",f=null,p={"'":1,'"':1},h={name:"root"};i.push(h);for(var g=/\s/,m=0;m<e.length;m++)try{var y=e[m];switch(c){case 0:"("==y&&(a(),c=1);break;case 1:case 3:if(":"==y)c=3;else if(","==y||")"==y)try{s(),c=1,","==y&&a()}catch(l0e){return l(m)}else if("("==y){if(u.length>0)return l(m);a()}else{if(y in p){if(1==c&&0===u.length&&0===d.length&&0===A.length){c=2,f=y;continue}return l(m)}if(y==r){if(A.length)return l(m);c=4}else if(3==c)d+=y;else{if(g.test(y))continue;if(";"==y){m=e.length;break}u+=y}}break;case 2:if(y==f){if(m<e.length-1&&e[m+1]==f){m++,u+=f;continue}f=0,c=1;continue}u+=y;break;case 4:if(y==o)c=3;else{if(y==r)return l(m);A+=y}}}catch(l0e){return l(m)}return 1!=i.length?l(e.length-1):{json:h,error:null}};function HA(e){let t=e,n=t.toUpperCase().indexOf("BEGIN DATA;"),r=t.slice(n);if(r.length<2)return"";n=r.toUpperCase().indexOf("END;");let o=r.slice(0,n);r=Rd(o.split(";"),(e=>e.trim()));let i=Nd(r,(e=>e.toUpperCase().startsWith("DIMENSION")));i=i[0].split(" "),i=CA(Rd(uA(i),(e=>e.split("="))));let a=Nd(r,(e=>e.toUpperCase().startsWith("FORMAT")));a=a[0].split(" "),a=CA(Rd(uA(a),(e=>e.split("=")))),a.symbols=Ld(a.symbols.split(""),(e=>'"'==e));let s=Nd(r,(e=>e.toUpperCase().startsWith("MATRIX")));return s=s[0].split("\n"),s=CA(Rd(uA(s),(e=>AA(e.split(" "))))),s=Nu(s,((e,t)=>"?"==e?a.symbols:Array(e))),{dimensions:i,format:a,matrix:s}}function VA(e,t,n){Md(e.getTips(),(e=>{e.data.test=n.matrix[e.data.name]}))}function qA(e){let t=e,n=t.toUpperCase().indexOf("BEGIN TREES;"),r=t.slice(n);if(r.length<2)return"";n=r.toUpperCase().indexOf("END;");let o=r.slice(0,n).split("\n");return o=Nd(o,(e=>e.trim().toUpperCase().startsWith("TREE"))),zA(o[0])}function YA(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);t["@attributes"][r.nodeName]=r.nodeValue}}}else 3==e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes()&&1===e.childNodes.length&&3===e.childNodes[0].nodeType)t=e.childNodes[0].nodeValue;else if(e.hasChildNodes())for(var o=0;o<e.childNodes.length;o++){var i=e.childNodes.item(o),a=i.nodeName;if("undefined"==typeof t[a])t[a]=YA(i);else{if("undefined"==typeof t[a].push){var s=t[a];t[a]=[],t[a].push(s)}t[a].push(YA(i))}}return t}const XA=function(e,t){var n;return(n=(e=YA(e)).phyloxml.phylogeny.clade).name="root",function e(t,n){t.clade&&(t.clade.forEach(e),t.children=t.clade,delete t.clade),t.annotation=1,t.attribute="0.01",t.branch_length&&(t.attribute=t.branch_length),t.taxonomy&&(t.name=t.taxonomy.scientific_name),t.annotation=""}(n),{json:n,error:null}};var WA={nexml:SA,phyloxml:XA,nexus:qA,nwk:zA,nhx:zA,beast:function(e,t){t.left_delimiter="[",t.right_delimiter="]";const n=zA(e,t);return function e(t){if(t.annotation){t.beast={};const e=t.annotation.split(/=|,|{|}/).filter((e=>e));for(var n=0;n<e.length;n+=2){let r=e[n].replace(/&|%/g,"");/[a-df-zA-DF-Z]+/.test(e[n+2])?t.beast[r]=+e[n+1]:(t.beast[r]=[+e[n+1],+e[n+2]],n++)}}t.annotation=void 0,t.children&&t.children.forEach(e)}(n.json),n}};const KA=WA;var JA=n(530);function ZA(e,t,n){let r,o,i,a=[e],s=[];for(;e=a.pop();)if((!n||!n(e))&&(s.push(e),r=e.children,r))for(o=0,i=r.length;o<i;++o)a.push(r[o]);for(;e=s.pop();)t(e);return e}function $A(e,t){let n=e.data;if("attribute"in n&&n.attribute&&n.attribute.length){t>0&&(n.attribute=String(t));let e=parseFloat(n.attribute);if(!isNaN(e))return Math.max(0,e)}if("root"==n.name)return 0;console.warn("Undefined branch length at "+n.name+"!")}function ef(e,t){if(!(e instanceof ji))throw new Error("node needs to be an instance of a d3.hierarchy node!");let n=this.nodes.copy();if(t=void 0!==t?t:.5,e.parent){var r=ji({name:"new_root"});r.children=[e.copy()],r.data.__mapped_bl=void 0,n.each((e=>{e.data.__mapped_bl=this.branch_length_accessor(e)})),this.setBranchLength((e=>e.data.__mapped_bl));let i,a=e,s=e.parent,l=void 0===e.data.__mapped_bl?void 0:e.data.__mapped_bl*t;var o;if(i=s.data.__mapped_bl,s.data.__mapped_bl=void 0===e.data.__mapped_bl?void 0:e.data.__mapped_bl-l,e.data.__mapped_bl=l,s.parent){for(r.children.push(s);s.parent;){o=s.children.indexOf(a),s.parent.parent?s.children.splice(o,1,s.parent):s.children.splice(o,1);let e=s.parent.data.__mapped_bl;void 0!==e&&(s.parent.data.__mapped_bl=i,i=e),a=s,s=s.parent}o=s.children.indexOf(a),s.children.splice(o,1)}else o=s.children.indexOf(a),s.children.splice(o,1),i=s.data.__mapped_bl,a=r;if(1==s.children.length)i&&(s.children[0].data.__mapped_bl+=i),a.children=a.children.concat(s.children);else{let t=new ji({name:"__reroot_top_clade",__mapped_bl:i});bu(r.children[0],e),t.data.__mapped_bl=i,t.children=s.children.map((function(e){return e.parent=t,e})),t.parent=a,a.children.push(t)}}if(this.update(r),this.traverse_and_compute((e=>{Md(e.children,(t=>{t.parent=e}))}),"pre-order"),!fc(this.display)){let e=this.display.options;Vn(this.display.container).select("svg").remove();let t=this.display.selection_attribute_name;delete this.display;let n=this.render(e);n.selectionLabel(t),n.update(),Vn(n.container).node().appendChild(n.show()),Vn(this.display.container).dispatch("reroot")}return this}function tf(e,t){if(e=e||"attribute",t=t||"y_scaled","parent"in this){let n=parseFloat(this[e]);this[t]=this.parent[t]+(isNaN(n)?.1:n)}else this[t]=0;return this[t]}function nf(e){let t=[];for(;e;)t.push(e),e=e.parent;return t}function rf(e){return e.y}function of(e){return e.x}function af(e,t,n){return{x:n+e*Math.sin(t),y:n+e*Math.cos(t)}}function sf(e,t,n,r,o,i){e.radius=t*(e.radius+n),e.angle=2*Math.PI*e.x*o[0]/i[0];let a=af(e.radius,e.angle,r);return e.x=a.x,e.y=a.y,e}function lf(e,t){var n=af(t[0].radius,t[0].angle,e),r=af(t[0].radius,t[1].angle,e);return"M "+rf(n)+","+of(n)+" A "+t[0].radius+","+t[0].radius+" 0,0, "+(t[1].angle>t[0].angle?1:0)+" "+rf(r)+","+of(r)+" L "+rf(t[1])+","+of(t[1])}function cf(e,t,n){var r=af(e.target.radius+(e.source.radius-e.target.radius)*t,e.target.angle,n);return{x:rf(r),y:of(r)}}var uf=_a().x((function(e){return rf(e)})).y((function(e){return of(e)})).curve((function(e){return new ka(e,0)}));function df(e,t){return{x:rf(e.target)+(rf(e.source)-rf(e.target))*t,y:of(e.target)}}const Af=uf;function ff(e){return e.tag||!1}function pf(e,t){return e[t]||!1}const hf={"tree-container":"phylotree-container","tree-scale-bar":"tree-scale-bar",node:"node","internal-node":"internal-node","tagged-node":"node-tagged","selected-node":"node-selected","collapsed-node":"node-collapsed","root-node":"root-node",branch:"branch","selected-branch":"branch-selected","tagged-branch":"branch-tagged","tree-selection-brush":"tree-selection-brush","branch-tracer":"branch-tracer",clade:"clade",node_text:"phylotree-node-text"};function gf(e){return arguments.length?(this.options["internal-names"]=e,this):this.options["internal-names"]}function mf(e){return arguments.length?(this.options["is-radial"]=e,this):this.options["is-radial"]}function yf(e){return arguments.length?(this.options["align-tips"]=e,this):this.options["align-tips"]}function vf(e){return this.options["draw-size-bubbles"]&&this.options["bubble-styler"]?this.options["bubble-styler"](e):this.options["draw-size-bubbles"]?this.relative_nodeSpan(e)*this.scales[0]*.25:0}function bf(e){return this.options["is-radial"]?[("end"==e.text_align?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:(this.options["right-to-left"],[this.right_most_leaf-e.screen_x,0])}function Cf(e){return arguments.length?(this.layout_listener_handler=e,this):this.layout_listener_handler}function If(e){return arguments.length?(this.selection_attribute_name=e,this.syncEdgeLabels(),this):this.selection_attribute_name}function Ef(e){return arguments.length?(Ef="string"==typeof e&&"equal"==e?function(e){return 1}:e,this):Ef}var xf={all:e=>!0,none:e=>!1,"all-leaf-nodes":e=>LA(e.target),"all-internal-nodes":e=>!LA(e.target)};function Bf(e){return e?(this.selectionCallback=e,this):this.selectionCallback}function wf(e){return this.radial()?[("end"==e.text_align?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:(this.options["right-to-left"],[this.right_most_leaf-e.screen_x,0])}function _f(e,t,n){e=Vn(e);var r=LA(t);r&&(e=e.attr("data-node-name",t.data.name));var o=e.selectAll("text").data([t]),i=e.selectAll("line");if(r||this.showInternalName(t)&&!Pf(t))if(o=o.enter().append("text").classed(this.css_classes.node_text,!0).merge(o).on("click",(e=>{this.handle_node_click(t,e)})).attr("dy",(e=>.33*this.shown_font_size)).text((e=>this.options["show-labels"]?this._nodeLabel(e):"")).style("font-size",(e=>this.ensure_size_is_in_px(this.shown_font_size))),o=this.radial()?o.attr("transform",(e=>this.d3PhylotreeSvgRotate(e.text_angle)+this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(e):null))).attr("text-anchor",(e=>e.text_align)):o.attr("text-anchor","start").attr("transform",(e=>"right-to-left"==this.options.layout?this.d3PhylotreeSvgTranslate([-20,0]):this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(e):null))),this.alignTips()?(i=i.data([t]),n?i=i.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(i).attr("x1",(e=>("end"==e.text_align?-1:1)*this.nodeBubbleSize(t))).attr("x2",0).attr("y1",0).attr("y2",0).attr("x2",(e=>"right-to-left"==this.options.layout?e.screen_x:this.shiftTip(e)[0])).attr("transform",(e=>this.d3PhylotreeSvgRotate(e.text_angle))).attr("x2",(e=>"right-to-left"==this.options.layout?e.screen_x:this.shiftTip(e)[0])).attr("transform",(e=>this.d3PhylotreeSvgRotate(e.text_angle))):(i=i.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(i).attr("x1",(e=>("end"==e.text_align?-1:1)*this.nodeBubbleSize(t))).attr("y2",0).attr("y1",0).attr("x2",(e=>this.shiftTip(e)[0])),i.attr("transform",(e=>this.d3PhylotreeSvgRotate(e.text_angle))))):i.remove(),this.options["draw-size-bubbles"]){var a=this.nodeBubbleSize(t);e.selectAll("circle").data([a]).enter().append("circle").attr("r",(function(e){return e})),this.shown_font_size>=5&&(o=o.attr("dx",(e=>("end"==e.text_align?-1:1)*((this.alignTips()?0:a)+.33*this.shown_font_size))))}else this.shown_font_size>=5&&(o=o.attr("dx",(e=>("end"==e.text_align?-1:1)*this.shown_font_size*.33)));if(!r){let n=e.selectAll("circle").data([t]).enter().append("circle"),r=this.node_circle_size()(t);r>0?n.merge(n).attr("r",(e=>Math.min(.75*this.shown_font_size,r))).on("click",(e=>{this.handle_node_click(t,e)})):n.remove()}return this.node_styler&&this.node_styler(e,t),t}function Sf(){let e=this.phylotree.nodes.descendants();for(let t=e.length-1;t>=0;t-=1)LA(e[t])?e[t].hasHiddenNodes=e[t].notshown:e[t].hasHiddenNodes=e[t].children.reduce((function(e,t){return t.notshown||e}),!1);return this}function Df(e){const t=this.internalNames();return!!t&&("function"===typeof t?t(e):t)}function Tf(e){return arguments.length?(this.nodeSpan="string"==typeof e&&"equal"==e?function(e){return 1}:e,this):this.nodeSpan}function kf(e){let t=hf[LA(e)?"node":"internal-node"];return ff(e)&&(t+=" "+hf["tagged-node"]),pf(e,this.selection_attribute_name)&&(t+=" "+hf["selected-node"]),e.parent||(t+=" "+hf["root-node"]),(Pf(e)||Rf(e))&&(t+=" "+hf["collapsed-node"]),t}function Qf(e){return!(e.hidden||e.notshown)}function Mf(e){return e.notshown}function Rf(e){return e.hasHiddenNodes||!1}function Pf(e){return e.collapsed||!1}function Of(e){return[e.node,e["internal-node"],e["collapsed-node"],e["tagged-node"],e["root-node"]].reduce((function(e,t,n,r){return e+"g."+t+(n<r.length-1?",":"")}),"")}function Ff(e,t){this.phylotree.clearInternalNodes(t);for(var n=this.phylotree.nodes.descendants().length-1;n>=0;n--){var r=this.phylotree.nodes.descendants()[n];LA(r)||pf(r,this.selection_attribute_name)||(r[this.selection_attribute_name]=e(r.children))}this.modifySelection(((e,t)=>(LA(e.target),e.target[this.selection_attribute_name])))}function Nf(e){return LA(e=e.data)?e.name||"":this.showInternalName(e)?e.name:""}function Lf(e){return arguments.length?(this._nodeLabel=e||Nf,this.update(),this):this._nodeLabel}function Uf(e){return[e.clade].reduce((function(e,t,n,r){return e+"path."+t+(n<r.length-1?",":"")}),"")}function Gf(e){let t=this.svg.selectAll("."+this.css_classes["tree-container"]);var n=0;let r,o=t.selectAll(Uf(this.css_classes)).data(this.phylotree.nodes.descendants().filter(Pf),(function(e){return e.id||(e.id=++n)})),i=function(){};this.radial()?(i=_a().curve(Ta).y((function(e){return e[0]})).x((function(e){return e[1]})),r=function(e,t,n,r,o){return t?[n.screen_y+(e[0]-r)/50,n.screen_x+(e[1]-o)/50]:[n.screen_y,n.screen_x]}):(i=_a().y((function(e){return e[0]})).x((function(e){return e[1]})).curve(Ta),r=function(e,t,n,r,o){return t?[n.screen_y+(e[0]-r)/50,n.screen_x+(e[1]-o)/50]:[n.screen_y,n.screen_x]}),o.exit().each((function(e){e.collapsed_clade=null})).remove(),e?o.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(o).attr("d",(function(e){if(e.collapsed_clade)return e.collapsed_clade;let t=e.collapsed[0][0],n=e.collapsed[0][1];return i(e.collapsed.map((function(o,i){return r(o,i,e,t,n)})))})).attr("d",(function(e){return e.collapsed_clade=i(e.collapsed)})):o.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(o).attr("d",(function(e){return e.collapsed_clade?e.collapsed_clade:e.collapsed_clade=i(e.collapsed)}))}function jf(e,t,n){e=(e=Vn(e)).attr("class",(e=>this.reclassEdge(e))).on("click",(e=>{this.modifySelection([t.target],this.selection_attribute_name),this.update()}));let r=this.draw_branch([t.source,t.target]);n?(e.datum().existing_path&&(e=e.attr("d",(function(e){return e.existing_path}))),e=e.attr("d",r)):e=e.attr("d",r),t.existing_path=r;var o=this.phylotree.branch_length_accessor(t.target);if(void 0!==o){var i=e.selectAll("title");i.empty()&&(i=e.append("title")),i.text("Length = "+o)}else e.selectAll("title").remove();return this.edge_styler&&this.edge_styler(e,t,n),this.phylotree}function zf(e){let t=hf.branch;return ff(e)&&(t+=" "+hf["tagged-branch"]),pf(e,this.selection_attribute_name)&&(t+=" "+hf["selected-branch"]),t}function Hf(){this.links.forEach((e=>{e.target.data.annotation&&(e.target[e.target.data.annotation]=e.target.data.annotation)}))}function Vf(){if(this.links.forEach((e=>{e[this.selection_attribute_name]=e.target[this.selection_attribute_name]||!1,e.tag=e.target.tag||!1})),this.countHandler()){let e={};e[this.selection_attribute_name]=this.links.reduce(((e,t)=>e+(t[this.selection_attribute_name]?1:0)),0),e.tagged=this.links.reduce((function(e,t){return e+(ff(t)?1:0)}),0),this.countUpdate(this,e,this.countHandler())}}function qf(e){return!(e.target.hidden||e.target.notshown)}function Yf(e){return[e.branch,e["selected-branch"],e["tagged-branch"]].reduce((function(e,t,n,r){return e+"path."+t+(n<r.length-1?",":"")}),"")}function Xf(e,t){return this.edge_placer(e,t)}let Wf="phylotree.event";function Kf(e){if(e.collapsed){e.collapsed=!1;let t=function(e){LA(e)||e.collapsed||e.children.forEach(t),e.hidden=!1};t(e)}else e.collapsed=!0;return this.placenodes(),this}function Jf(e,t,n){let r=this.size;if(this.radial()){let e=this.pad_width(),n="fit-to-size"!=this.options["top-bottom-spacing"]?this.pad_height():0;r=[r[1]+2*e,r[0]+2*e+n],t&&t.selectAll("."+hf["tree-container"]).attr("transform","translate ("+e+","+(e+n)+")")}else r=[r[0]+("fit-to-size"!=this.options["top-bottom-spacing"]?this.pad_height():0),r[1]+("fit-to-size"!=this.options["left-right-spacing"]?this.pad_width():0)];return t&&(n&&(t=t.transition(100)),t.attr("height",r[0]).attr("width",r[1])),this.size=r,r}function Zf(e,t){(t=t||"y_scaled")in this&&(this[t]*=e)}function $f(e){var t=new CustomEvent(Wf,{detail:["refresh",e]});document.dispatchEvent(t)}function ep(e,t){var n=new CustomEvent(Wf,{detail:["countUpdate",t,e.countHandler()]});document.dispatchEvent(n)}function tp(e){var t=new CustomEvent(Wf,{detail:["layout",e,e.layoutHandler()]});document.dispatchEvent(t)}function np(e){switch(e.detail[0]){case"refresh":e.detail[1].refresh();break;case"countUpdate":case"layout":e.detail[2](e.detail[1])}return!0}function rp(){document.addEventListener(Wf,np,!1)}function op(e){return!e||null===e[0]&&null===e[1]?"":"translate ("+(null!==e[0]?e[0]:0)+","+(null!==e[1]?e[1]:0)+") "}function ip(e){return null!==e?"rotate ("+e+") ":""}let ap="d3_layout_phylotree_context_menu";function sp(e,t,n,r,o){let i=Vn(t).select("#"+ap);if(i.empty()&&(i=Vn(t).append("div").attr("id",ap).attr("class","dropdown-menu").attr("role","menu")),i.selectAll("a").remove(),i.selectAll("h6").remove(),i.selectAll("div").remove(),e){if(!Gd([Boolean(e.menu_items),r.hide,r.selectable,r.collapsible])||!r["show-menu"])return;LA(e)||(r.collapsible&&(i.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(Pf(e)?"Expand Subtree":"Collapse Subtree").on("click",(t=>{i.style("display","none"),this.toggleCollapse(e).update()})),r.selectable&&(i.append("div").attr("class","dropdown-divider"),i.append("h6").attr("class","dropdown-header").text("Toggle selection"))),r.selectable&&(i.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All descendant branches").on("click",(function(t){i.style("display","none"),n.modifySelection(n.selectAllDescendants(e,!0,!0))})),i.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All terminal branches").on("click",(function(t){i.style("display","none"),n.modifySelection(n.selectAllDescendants(e,!0,!1))})),i.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All internal branches").on("click",(function(t){i.style("display","none"),n.modifySelection(n.selectAllDescendants(e,!1,!0))})))),e.parent&&(r.selectable&&(i.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Incident branch").on("click",(function(t){i.style("display","none"),n.modifySelection([e])})),i.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Path to root").on("click",(t=>{i.style("display","none"),this.modifySelection(this.phylotree.pathToRoot(e))})),(r.reroot||r.hide)&&i.append("div").attr("class","dropdown-divider")),r.reroot&&i.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Reroot on this node").on("click",(t=>{i.style("display","none"),this.phylotree.reroot(e),this.update()})),r.hide&&i.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Hide this "+(LA(e)?"node":"subtree")).on("click",(t=>{i.style("display","none"),this.modifySelection([e],"notshown",!0,!0).updateHasHiddenNodes().update()}))),Rf(e)&&i.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Show all descendant nodes").on("click",(function(t){i.style("display","none"),n.modifySelection(n.selectAllDescendants(e,!0,!0),"notshown",!0,!0,"false").updateHasHiddenNodes().update()}));var a=[];if("menu_items"in e&&"object"===typeof e.menu_items&&e.menu_items.forEach((function(t){3==t.length&&(t[2]&&!t[2](e)||a.push([t[0],t[1]]))})),a.length){Gd([r.hide,r.selectable,r.collapsible])&&i.append("div").attr("class","dropdown-divider"),a.forEach((function(t){i.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(t[0](e)).on("click",sd(t[1],e))}))}let s=document.querySelector(t).getBoundingClientRect();i.style("position","absolute").style("left",o.clientX-s.x+12+"px").style("top",o.clientY-s.y+"px").style("display","block")}else i.style("display","none")}function lp(e,t,n,r){"menu_items"in e||(e.menu_items=[]),e.menu_items.some((function(e){return e[0]==t&&e[1]==n&&e[2]==r}))||e.menu_items.push([t,n,r])}function cp(e,t,n,r,o){if(t=t||this.selection_attribute_name,o=o||"toggle",this.options["restricted-selectable"].length){if(!jd(Yc(xf),e))return;e=xf[e]}if(!this.options["restricted-selectable"]&&!this.options.selectable||this.options["binary-selectable"])this.options["binary-selectable"]&&("function"===typeof e?this.links.forEach((function(n){var r=e(n);n[t]=n[t]||!1,n[t]!=r&&(n[t]=r,a=!0,n.target[t]=r),this.options["attribute-list"].forEach((function(e){e!=t&&!0===n[t]&&(n[e]=!1,n.target[e]=!1)}))})):(e.forEach((function(e){var n;n=!e[t],e[t]!=n&&(e[t]=n,a=!0)})),this.links.forEach((function(e){e[t]=e.target[t],this.options["attribute-list"].forEach((function(n){n!=t&&!0!==e[t]&&(e[n]=!1,e.target[n]=!1)}))}))),a&&(r||$f(this),this.countHandler()&&((i={})[t]=this.links.reduce((function(e,n){return e+(n[t]?1:0)}),0),this.countUpdate(this,i,this.countHandler())),n&&this.placenodes()));else{var i,a=!1;"function"===typeof e?this.links.forEach((function(n){let r=e(n);n[t]=n[t]||!1,n[t]!=r&&(n[t]=r,a=!0,n.target[t]=r)})):(e.forEach((function(e){var n;switch(o){case"true":n=!0;break;case"false":n=!1;break;default:n=!e[t]}e[t]!=n&&(e[t]=n,a=!0)})),this.links.forEach((function(e){e[t]=e.target[t]}))),a&&(r||$f(this),this.countHandler&&((i={})[t]=this.links.reduce((function(e,n){return e+(n[t]?1:0)}),0),ep(this,i,this.countHandler)),n&&this.placenodes())}return this.selectionCallback&&"tag"!=t&&this.selectionCallback(this.getSelection()),this.refresh(),this.update(),this}function up(){return this.nodes.filter((e=>e[this.selection_attribute_name]))}function dp(e,t,n){let r=[];return function o(i){LA(i)?t&&i!=e&&r.push(i):(n&&i!=e&&r.push(i),i.children.forEach(o))}(e),r}function Ap(e){return e?(this.selectionCallback=e,this):this.selectionCallback}function fp(e){return function(){return e}}class pp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.css_classes=hf,this.phylotree=e,this.container=t.container,this.separation=function(e,t){return 0},this._nodeLabel=this.defNodeLabel,this.svg=null,this.selectionCallback=null,this.scales=[1,1],this.size=[1,1],this.fixed_width=[14,30],this.scale_bar_font_size=12,this.draw_branch=Af,this.draw_scale_bar=null,this.edge_placer=df,this.count_listener_handler=function(){},this.layout_listener_handler=function(){},this.node_styler=void 0,this.edge_styler=void 0,this.selection_attribute_name="selected",this.right_most_leaf=0,this.label_width=0,this.radial_center=0,this.radius=1,this.radius_pad_for_bubbles=0,this.rescale_nodeSpan=1,this.relative_nodeSpan=function(e){return this.nodeSpan(e)/this.rescale_nodeSpan};let n={layout:"left-to-right",logger:console,branches:"step",scaling:!0,bootstrap:!1,"color-fill":!0,"font-size":14,"internal-names":!1,selectable:!0,"restricted-selectable":!1,collapsible:!0,"left-right-spacing":"fixed-step","top-bottom-spacing":"fixed-step","left-offset":0,"show-scale":"top","draw-size-bubbles":!1,"bubble-styler":this.radius_pad_for_bubbles,"binary-selectable":!1,"is-radial":!1,"attribute-list":[],"max-radius":768,"annular-limit":.38196601125010515,compression:.2,"align-tips":!1,"maximum-per-node-spacing":100,"minimum-per-node-spacing":2,"maximum-per-level-spacing":100,"minimum-per-level-spacing":10,node_circle_size:fp(3),transitions:null,brush:!0,reroot:!0,hide:!0,"label-nodes-with-name":!1,zoom:!1,"show-menu":!0,"show-labels":!0,"node-styler":null,"edge-styler":null,"node-span":null};this.ensure_size_is_in_px=function(e){return"number"===typeof e?e+"px":e},this.options=Cu(t,n),this.font_size=this.options["font-size"],this.offsets=[0,this.font_size/2],this.shown_font_size=this.font_size,this.width=this.options.width||800,this.height=this.options.height||600,this.node_styler=this.options["node-styler"],this.edge_styler=this.options["edge-styler"],this.nodeSpan=this.options["node-span"],this.nodeSpan||(this.nodeSpan=function(e){return 1}),this.rescale_nodeSpan=this.phylotree.nodes.children.map((e=>{if(LA(e)||this.showInternalName(e))return this.nodeSpan(e)})).reduce((function(e,t){return Math.min(t,e||1e200)}),null)||1,this.initialize_svg(this.container),this.links=this.phylotree.nodes.links(),this.initializeEdgeLabels(),this.update(),rp()}pad_height(){return this.draw_scale_bar?this.scale_bar_font_size+25:0}pad_width(){this.label_width=this._label_width(this.shown_font_size);const e=this.options["show-labels"]?this.label_width:0;return this.offsets[1]+this.options["left-offset"]+e}collapse_node(e){Pf(e)||(e.collapsed=!0)}set_size(e){if(!arguments.length)return this.size;let t=e;return"fixed-step"!=this.options["top-bottom-spacing"]&&(this.size[0]=t[0]),"fixed-step"!=this.options["left-right-spacing"]&&(this.size[1]=t[1]),this}initialize_svg(e){var t;return this.svg!==e&&(Vn(e).select("svg").remove(),this.svg=(t="svg",Vn(kn(t).call(document.documentElement))).attr("width",this.width).attr("height",this.height),this.set_size([this.height,this.width]),"phylotree-container"==this.css_classes["tree-container"]&&(this.svg.selectAll("*").remove(),this.svg.append("defs")),Vn(this.container).on("click",(e=>{this.handle_node_click(null)}),!0)),this}update_layout(e,t){t&&(this.nodes=ji(e),this.nodes.each((function(e){e.id=null}))),this.update(),this.syncEdgeLabels()}update(e){var t=this;this.placenodes(),e=this.transitions(e);let n=0,r=this.svg.selectAll("."+hf["tree-container"]).data([0]);if(r=r.enter().append("g").attr("class",hf["tree-container"]).merge(r).attr("transform",(e=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()]))),this.draw_scale_bar){let e=this.svg.selectAll("."+hf["tree-scale-bar"]).data([0]);e.enter().append("g").attr("class",hf["tree-scale-bar"]).style("font-size",this.ensure_size_is_in_px(this.scale_bar_font_size)).merge(e).attr("transform",(e=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()-10]))).call(this.draw_scale_bar),e.selectAll("text").style("text-anchor","end")}else this.svg.selectAll("."+hf["tree-scale-bar"]).remove();r=this.svg.selectAll("."+hf["tree-container"]).data([0]),this.updateCollapsedClades(e);let o=r.selectAll(Yf(hf)).data(this.links.filter(qf),(e=>e.target.id||(e.target.id=++n)));o.exit().remove(),o=o.enter().insert("path",":first-child").merge(o).each((function(n){t.drawEdge(this,n,e)}));let i=r.selectAll(Of(hf)).data(this.phylotree.nodes.descendants().filter(Qf),(e=>e.id||(e.id=++n)));if(i.exit().remove(),i=i.enter().append("g").attr("class",this.reclassNode).merge(i).attr("transform",(e=>{const t="right-to-left"==this.options.layout&&LA(e);return e.screen_x=rf(e),e.screen_y=of(e),this.d3PhylotreeSvgTranslate([t?0:e.screen_x,e.screen_y])})).each((function(n){t.drawNode(this,n,e)})).attr("transform",(e=>{if(!fc(e.screen_x)&&!fc(e.screen_y))return"translate("+e.screen_x+","+e.screen_y+")"})),this.options["label-nodes-with-name"]&&(i=i.attr("id",(e=>"node-"+e.name))),this.resizeSvg(this.phylotree,this.svg,e),this.options.brush){var a=r.selectAll("."+hf["tree-selection-brush"]).data([0]).enter().insert("g",":first-child").attr("class",hf["tree-selection-brush"]),s=xi().on("brush",((e,t)=>{var n=e.selection,r=this.links.filter(qf).filter(((e,t)=>e.source.screen_x>=n[0][0]&&e.source.screen_x<=n[1][0]&&e.source.screen_y>=n[0][1]&&e.source.screen_y<=n[1][1]&&e.target.screen_x>=n[0][0]&&e.target.screen_x<=n[1][0]&&e.target.screen_y>=n[0][1]&&e.target.screen_y<=n[1][1])).map((e=>e.target));this.modifySelection(this.phylotree.links.map((e=>e.target)),"tag",!1,r.length>0,"false"),this.modifySelection(r,"tag",!1,!1,"true")})).on("end",(()=>{}));a.call(s)}if(this.syncEdgeLabels(),this.options.zoom){let e=function(){var e,t,n,r=Nl,o=Ll,i=zl,a=Gl,s=jl,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=kl,A=kt("start","zoom","end"),f=500,p=150,h=0,g=10;function m(e){e.property("__zoom",Ul).on("wheel.zoom",x).on("mousedown.zoom",B).on("dblclick.zoom",w).filter(s).on("touchstart.zoom",_).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Rl(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new Rl(e.k,r,o)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function C(e,t,n,r){e.on("start.zoom",(function(){I(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){I(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,i=arguments,a=I(e,i).event(r),s=o.apply(e,i),l=null==n?b(s):"function"===typeof n?n.apply(e,i):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=e.__zoom,A="function"===typeof t?t.apply(e,i):t,f=d(u.invert(l).concat(c/u.k),A.invert(l).concat(c/A.k));return function(e){if(1===e)e=A;else{var t=f(e),n=c/t[2];e=new Rl(n,l[0]-t[0]*n,l[1]-t[1]*n)}a.zoom(null,e)}}))}function I(e,t,n){return!n&&e.__zooming||new E(e,t)}function E(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function x(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(r.apply(this,arguments)){var s=I(this,n).event(e),u=this.__zoom,d=Math.max(l[0],Math.min(l[1],u.k*Math.pow(2,a.apply(this,arguments)))),A=Gr(e);if(s.wheel)s.mouse[0][0]===A[0]&&s.mouse[0][1]===A[1]||(s.mouse[1]=u.invert(s.mouse[0]=A)),clearTimeout(s.wheel);else{if(u.k===d)return;s.mouse=[A,u.invert(A)],Co(this),s.start()}Fl(e),s.wheel=setTimeout((function(){s.wheel=null,s.end()}),p),s.zoom("mouse",i(v(y(u,d),s.mouse[0],s.mouse[1]),s.extent,c))}}function B(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];if(!n&&r.apply(this,arguments)){var s=I(this,o,!0).event(e),l=Vn(e.view).on("mousemove.zoom",(function(e){if(Fl(e),!s.moved){var t=e.clientX-A,n=e.clientY-f;s.moved=t*t+n*n>h}s.event(e).zoom("mouse",i(v(s.that.__zoom,s.mouse[0]=Gr(e,d),s.mouse[1]),s.extent,c))}),!0).on("mouseup.zoom",(function(e){l.on("mousemove.zoom mouseup.zoom",null),Xn(e.view,s.moved),Fl(e),s.event(e).end()}),!0),u=Gr(e,d),d=e.currentTarget,A=e.clientX,f=e.clientY;Yn(e.view),Ol(e),s.mouse=[u,this.__zoom.invert(u)],Co(this),s.start()}}function w(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(r.apply(this,arguments)){var s=this.__zoom,l=Gr(e.changedTouches?e.changedTouches[0]:e,this),d=s.invert(l),A=s.k*(e.shiftKey?.5:2),f=i(v(y(s,A),l,d),o.apply(this,n),c);Fl(e),u>0?Vn(this).transition().duration(u).call(C,f,l,e):Vn(this).call(m.transform,f,l,e)}}function _(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];if(r.apply(this,arguments)){var s,l,c,u,d=n.touches,A=d.length,p=I(this,i,n.changedTouches.length===A).event(n);for(Ol(n),l=0;l<A;++l)u=[u=Gr(c=d[l],this),this.__zoom.invert(u),c.identifier],p.touch0?p.touch1||p.touch0[2]===u[2]||(p.touch1=u,p.taps=0):(p.touch0=u,s=!0,p.taps=1+!!e);e&&(e=clearTimeout(e)),s&&(p.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),f)),Co(this),p.start())}}function S(e){if(this.__zooming){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o,a,s,l,u=I(this,n).event(e),d=e.changedTouches,A=d.length;for(Fl(e),o=0;o<A;++o)s=Gr(a=d[o],this),u.touch0&&u.touch0[2]===a.identifier?u.touch0[0]=s:u.touch1&&u.touch1[2]===a.identifier&&(u.touch1[0]=s);if(a=u.that.__zoom,u.touch1){var f=u.touch0[0],p=u.touch0[1],h=u.touch1[0],g=u.touch1[1],m=(m=h[0]-f[0])*m+(m=h[1]-f[1])*m,b=(b=g[0]-p[0])*b+(b=g[1]-p[1])*b;a=y(a,Math.sqrt(m/b)),s=[(f[0]+h[0])/2,(f[1]+h[1])/2],l=[(p[0]+g[0])/2,(p[1]+g[1])/2]}else{if(!u.touch0)return;s=u.touch0[0],l=u.touch0[1]}u.zoom("touch",i(v(a,s,l),u.extent,c))}}function D(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];if(this.__zooming){var a,s,l=I(this,o).event(e),c=e.changedTouches,u=c.length;for(Ol(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),f),a=0;a<u;++a)s=c[a],l.touch0&&l.touch0[2]===s.identifier?delete l.touch0:l.touch1&&l.touch1[2]===s.identifier&&delete l.touch1;if(l.touch1&&!l.touch0&&(l.touch0=l.touch1,delete l.touch1),l.touch0)l.touch0[1]=this.__zoom.invert(l.touch0[0]);else if(l.end(),2===l.taps&&(s=Gr(s,this),Math.hypot(t[0]-s[0],t[1]-s[1])<g)){var d=Vn(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return m.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",Ul),e!==o?C(e,t,n,r):o.interrupt().each((function(){I(this,arguments).event(r).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()}))},m.scaleBy=function(e,t,n,r){m.scaleTo(e,(function(){return this.__zoom.k*("function"===typeof t?t.apply(this,arguments):t)}),n,r)},m.scaleTo=function(e,t,n,r){m.transform(e,(function(){var e=o.apply(this,arguments),r=this.__zoom,a=null==n?b(e):"function"===typeof n?n.apply(this,arguments):n,s=r.invert(a),l="function"===typeof t?t.apply(this,arguments):t;return i(v(y(r,l),a,s),e,c)}),n,r)},m.translateBy=function(e,t,n,r){m.transform(e,(function(){return i(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),o.apply(this,arguments),c)}),null,r)},m.translateTo=function(e,t,n,r,a){m.transform(e,(function(){var e=o.apply(this,arguments),a=this.__zoom,s=null==r?b(e):"function"===typeof r?r.apply(this,arguments):r;return i(Pl.translate(s[0],s[1]).scale(a.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,c)}),r,a)},E.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Vn(this.that).datum();A.call(e,this.that,new Ml(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:A}),t)}},m.wheelDelta=function(e){return arguments.length?(a="function"===typeof e?e:Ql(+e),m):a},m.filter=function(e){return arguments.length?(r="function"===typeof e?e:Ql(!!e),m):r},m.touchable=function(e){return arguments.length?(s="function"===typeof e?e:Ql(!!e),m):s},m.extent=function(e){return arguments.length?(o="function"===typeof e?e:Ql([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):o},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(e){return arguments.length?(i=e,m):i},m.duration=function(e){return arguments.length?(u=+e,m):u},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=A.on.apply(A,arguments);return e===A?m:e},m.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,m):Math.sqrt(h)},m.tapDistance=function(e){return arguments.length?(g=+e,m):g},m}().scaleExtent([.1,10]).on("zoom",(e=>{Vn("."+hf["tree-container"]).attr("transform",(t=>e.transform)),Vn("."+hf["tree-scale-bar"]).attr("transform",(t=>{let n=e.transform;return n.y-=10,n}))}));this.svg.call(e)}return this}_handle_single_node_layout(e){let t=this.nodeSpan(e)/this.rescale_nodeSpan;this.x=e.x=this.x+this.separation(this.last_node,e)+.5*(this.last_span+t),this._extents[1][1]=Math.max(this._extents[1][1],e.y),this._extents[1][0]=Math.min(this._extents[1][0],e.y-.5*t),this.is_under_collapsed_parent?this._extents[0][1]=Math.max(this._extents[0][1],this.save_x+(e.x-this.save_x)*this.options.compression+this.save_span+(.5*t+this.separation(this.last_node,e))*this.options.compression):this._extents[0][1]=Math.max(this._extents[0][1],this.x+.5*t+this.separation(this.last_node,e)),this.last_node=e,this.last_span=t}tree_layout(e){if(Mf(e))return;let t=LA(e);e.text_angle=null,e.text_align=null,e.radius=null,e.angle=null;let n=!1;if(e.parent)if(this.do_scaling){if(n)return 0;if(e.y=this.phylotree.branch_length_accessor(e),"undefined"===typeof e.y)return n=!0,0;e.y+=e.parent.y}else e.y=t?this.max_depth:e.depth;else this.x=0,e.y=0,this.last_node=null,this.last_span=0,this._extents=[[0,0],[0,0]];if(t&&this._handle_single_node_layout(e),!t)if(Pf(e)&&!this.is_under_collapsed_parent){if(this.save_x=this.x,this.save_span=.5*this.last_span,this.is_under_collapsed_parent=!0,this.process_internal_node(e),this.is_under_collapsed_parent=!1,"number"===typeof e.x){e.x=this.save_x+(e.x-this.save_x)*this.options.compression+this.save_span,e.collapsed=[[e.x,e.y]];var r=t=>{t.hidden=!0,LA(t)?(this.x=t.x=this.save_x+(t.x-this.save_x)*this.options.compression+this.save_span,e.collapsed.push([t.x,t.y])):t.children.map(r)};this.x=this.save_x,r(e),e.collapsed.splice(1,0,[this.save_x,e.y]),e.collapsed.push([this.x,e.y]),e.collapsed.push([e.x,e.y]),e.hidden=!1}}else this.process_internal_node(e);return e.x}process_internal_node(e){let t=0;if(this.showInternalName(e)){let t=e.children.length/2|0,n=0,r=!1;for(let o=0;o<e.children.length;o++){"number"==typeof this.tree_layout(e.children[o])&&n++,n>=t&&!r&&(this._handle_single_node_layout(e),r=!0)}0==n?(e.notshown=!0,e.x=void 0):r||this._handle_single_node_layout(e)}else e.x=e.children.map(this.tree_layout.bind(this)).reduce(((e,n)=>"number"==typeof n?e+n:(t+=1,e)),0),t==e.children.length?(e.notshown=!0,e.x=void 0):e.x/=e.children.length-t}do_lr(e){if(this.radial()&&e&&(this.offsets[1]=0),"fixed-step"==this.options["left-right-spacing"])this.size[1]=this.max_depth*this.fixed_width[1],this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"])/this._extents[1][1],this.label_width=this._label_width(this.shown_font_size),this.radial()&&(this.label_width*=2);else{this.label_width=this._label_width(this.shown_font_size),e=!0;let t=this.size[1]-this.offsets[1]-this.options["left-offset"];.5*t<this.label_width&&(this.shown_font_size*=.5*t/this.label_width,this.label_width=.5*t),this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"]-this.label_width)/this._extents[1][1]}}placenodes(){this._extents=[[0,0],[0,0]],this.x=0,this.last_span=0,this.last_node=null,this.last_span=0,this.save_x=this.x,this.save_span=.5*this.last_span,this.do_scaling=this.options.scaling;this.is_under_collapsed_parent=!1,this.max_depth=1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes,this.do_scaling),this.max_depth=function(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let o of e)null!=(o=t(o,++r,e))&&(n<o||void 0===n&&o>=o)&&(n=o)}return n}(this.phylotree.nodes.descendants(),(e=>e.depth)),this.do_scaling;let e=!1;if(this.draw_scale_bar=this.options["show-scale"]&&this.do_scaling,this.offsets[1]=Math.max(this.font_size,-this._extents[1][0]*this.fixed_width[0]),"fixed-step"==this.options["top-bottom-spacing"]?(this.size[0]=this._extents[0][1]*this.fixed_width[0],this.scales[0]=this.fixed_width[0]):(this.scales[0]=(this.size[0]-this.pad_height())/this._extents[0][1],e=!0),this.shown_font_size=Math.min(this.font_size,this.scales[0]),this.radial()){this.draw_branch=sd(lf,this.radial_center),this.edge_placer=cf;let t=null,n=null,r=null,o=0,i=this._extents[0][1]*this.scales[0],a=function(e,t,n,r,o){return o=o||0,Math.sqrt((t-e)*(t-e)+2*(e+o)*(t+o)*(1-Math.cos(n-r)))},s=0;this.phylotree.nodes.each((e=>{let t=e.x*this.scales[0];e.angle=2*Math.PI*t/i,e.text_angle=e.angle-Math.PI/2,e.text_angle=e.text_angle>0&&e.text_angle<Math.PI,e.text_align=e.text_angle?"end":"start",e.text_angle=(e.text_angle?180:0)+180*e.angle/Math.PI})),this.do_lr(e),this.phylotree.nodes.each((e=>{e.radius=e.y*this.scales[1]/this.size[1],s=Math.max(e.radius,s)}));let l=0;this.phylotree.nodes.each((e=>{if(!e.children){let i=e.x*this.scales[0];if(null!==t){let c=i-n,u=a(e.radius,r,e.angle,t,l),d=u>0?c/u:10*this.options["max-radius"];if(d>this.options["max-radius"]){let n=c/this.options["max-radius"],i=e.radius+r,a=e.radius*r-(n*n-(r-e.radius)*(r-e.radius))/2/(1-Math.cos(t-e.angle)),u=Math.sqrt(i*i-4*a);l=Math.min(this.options["annular-limit"]*s,(-i+u)/2),o=this.options["max-radius"]}else o=Math.max(o,d)}t=e.angle,n=i,r=e.radius}})),this.radius=Math.min(this.options["max-radius"],Math.max(i/2/Math.PI,o)),e&&(this.radius=Math.min(this.radius,.5*(Math.min(i,this._extents[1][1]*this.scales[1])-this.label_width)-this.radius*l)),this.radial_center=this.radius_pad_for_bubbles=this.radius,this.draw_branch=sd(lf,this.radial_center);let c=1;l&&(c=s/(s+l),this.radius*=c),this.phylotree.nodes.each((e=>{if(sf(e,this.radius,l,this.radial_center,this.scales,this.size),s=Math.max(s,e.radius),this.options["draw-size-bubbles"]?this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,e.radius+this.nodeBubbleSize(e)):this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,e.radius),e.collapsed){e.collapsed=e.collapsed.map((e=>{let t={};return t.x=e[0],t.y=e[1],t=sf(t,this.radius,l,this.radial_center,this.scales,this.size),[t.x,t.y]}));let t=e.collapsed[1];e.collapsed=e.collapsed.filter((function(n,r){return r<3||r>e.collapsed.length-4||Math.sqrt(Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2))>3&&(t=n,!0)}))}})),this.size[0]=this.radial_center+this.radius/c,this.size[1]=this.radial_center+this.radius/c}else this.do_lr(),this.draw_branch=Af,this.edge_placer=df,this.right_most_leaf=0,this.phylotree.nodes.each((e=>{if(e.x*=this.scales[0],e.y*=.8*this.scales[1],"right-to-left"==this.options.layout&&(e.y=this._extents[1][1]*this.scales[1]-e.y),LA(e)&&(this.right_most_leaf=Math.max(this.right_most_leaf,e.y+this.nodeBubbleSize(e))),e.collapsed){e.collapsed.forEach((e=>{e[0]*=this.scales[0],e[1]*=.8*this.scales[1]}));let t=e.collapsed[1][0];e.collapsed=e.collapsed.filter((function(n,r){return r<3||r>e.collapsed.length-4||n[0]-t>3&&(t=n[0],!0)}))}}));if(this.draw_scale_bar){let e,t;if(this.radial()){if(t=Math.min(this.radius/5,50),e=Math.pow(10,Math.ceil(Math.log(this._extents[1][1]*t/this.radius)/Math.log(10))),t=e*(this.radius/this._extents[1][1]),t<30){let n=Math.ceil(30/t);t*=n,e*=n}}else e=this._extents[1][1],t=this.size[1]-this.offsets[1]-this.options["left-offset"]-this.shown_font_size;let n=pa().domain([0,e]).range([0,t]),r=Oi(".2f");if(this.draw_scale_bar=function(e){return Bt(ht,e)}().scale(n).tickFormat((function(e){return 0===e?"":r(e)})),this.radial())this.draw_scale_bar.tickValues([e]);else{let e=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},o=n.ticks();o=o.length>1?o[1]:o[0],this.draw_scale_bar.ticks(Math.min(10,e(t/(this.shown_font_size*r(o).length*2),0)))}}else this.draw_scale_bar=null;return this}spacing_x(e,t){return arguments.length?(this.fixed_width[0]!=e&&e>=this.options["minimum-per-node-spacing"]&&e<=this.options["maximum-per-node-spacing"]&&(this.fixed_width[0]=e,t||this.placenodes()),this):this.fixed_width[0]}spacing_y(e,t){return arguments.length?(this.fixed_width[1]!=e&&e>=this.options["minimum-per-level-spacing"]&&e<=this.options["maximum-per-level-spacing"]&&(this.fixed_width[1]=e,t||this.placenodes()),this):this.fixed_width[1]}_label_width(e){e=e||this.shown_font_size;let t=0;return this.phylotree.nodes.descendants().filter(Qf).forEach((n=>{let r=12+this._nodeLabel(n).length*e*.8;null!==n.angle&&(r*=Math.max(Math.abs(Math.cos(n.angle)),Math.abs(Math.sin(n.angle)))),t=Math.max(r,t)})),t}font_size(e){return arguments.length?(this.font_size=void 0===e?12:e,this):this.font_size}scale_bar_font_size(e){return arguments.length?(this.scale_bar_font_size=void 0===e?12:e,this):this.scale_bar_font_size}node_circle_size(e,t){return arguments.length?(this.options.node_circle_size=fp(void 0===e?3:e),this):this.options.node_circle_size}css(e){if(0===arguments.length)return this.css_classes;if(arguments.length>2){var t={};return t[e[0]]=e[1],this.css(t)}for(var n in hf)n in e&&e[n]!=hf[n]&&(hf[n]=e[n]);return this}transitions(e){return void 0!==e?e:null!==this.options.transitions?this.options.transitions:this.phylotree.nodes.descendants().length<=300}css_classes(e,t){if(!arguments.length)return this.css_classes;let n=!1;for(var r in hf)r in e&&e[r]!=this.css_classes[r]&&(n=!0,this.css_classes[r]=e[r]);return t&&n&&this.layout(),this}layout(e){return this.svg?(this.svg.selectAll("."+this.css_classes["tree-container"]+",."+this.css_classes["tree-scale-bar"]+",."+this.css_classes["tree-selection-brush"]),this.d3PhylotreeTriggerLayout(this),this.update()):(this.d3PhylotreeTriggerLayout(this),this)}handle_node_click(e,t){this.nodeDropdownMenu(e,this.container,this,this.options,t)}refresh(){if(this.svg){let e=this.svg.selectAll("."+this.css_classes["tree-container"]).selectAll(Yf(this.css_classes)).attr("class",this.reclassEdge.bind(this));this.edge_styler&&e.each((e=>{this.edge_styler(Vn(this),e)}))}return this}countHandler(e){return arguments.length?(this.count_listener_handler=e,this):this.count_listener_handler}style_nodes(e){return arguments.length?(this.node_styler=e,this):this.node_styler}style_edges(e){return arguments.length?(this.edge_styler=e.bind(this),this):this.edge_styler}itemSelected(e,t){return e[t]||!1}show(){return this.svg.node()}}vu(pp.prototype,s),vu(pp.prototype,a),vu(pp.prototype,l),vu(pp.prototype,c),vu(pp.prototype,u),vu(pp.prototype,i);const hp=pp;let gp=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.newick_string="",this.nodes=[],this.links=[],this.parsed_tags=[],this.partitions=[],this.branch_length_accessor=$A,this.branch_length=$A,this.logger=t.logger||console,this.selection_attribute_name="selected";var n=t.type||void 0,r=[],o=this;if(mc(n))n in KA?r=KA[n](e,t):o.logger.error("type "+n+" not in registry! Available types are "+Yc(KA));else if(wc(n))try{r=n(e,t)}catch(l0e){o.logger.error("Could not parse custom format!")}else"root"==e.name?r={json:e,error:null}:"string"!=typeof e?r=e:"application/xml"==e.contentType?r=XA(e):(this.newick_string=e,r=zA(e,t));if(r.json){o.nodes=ji(r.json);let e={};o.nodes.each((t=>{t.data.annotation&&(e[t.data.annotation]=!0)})),o.parsed_tags=Object.keys(e)}else o.nodes=[];return o.links=o.nodes.links(),this.hasBranchLengths()||(console.warn("Phylotree User Warning : NO BRANCH LENGTHS DETECTED, SETTING ALL LENGTHS TO 1"),this.setBranchLength((e=>1))),o}json(e){var t=0;this.traverse_and_compute((function(e){e.json_export_index=t++}),e);var n=new Array(t);return t=0,this.traverse_and_compute((function(e){let r=xu(e);delete r.json_export_index,e.parent&&(r.parent=e.parent.json_export_index),e.children&&(r.children=Rd(e.children,(function(e){return e.json_export_index}))),n[t++]=r}),e),this.traverse_and_compute((function(e){delete e.json_export_index}),e),JSON.stringify(n)}traverse_and_compute(e,t,n,r){return t="pre-order"==(t=t||"post-order")?function(t){!function(e,t,n){let r,o,i=[e];for(;e=i.pop();)if((!n||!n(e))&&(t(e),r=e.children,r))for(o=r.length-1;o>=0;--o)i.push(r[o])}(t,e,r)}:"in-order"==t?function(t){!function(e,t,n){let r,o,i,a,s=[e];do{for(r=s.reverse(),s=[];e=r.pop();)if((!n||!n(e))&&(t(e),o=e.children,o))for(i=0,a=o.length;i<a;++i)s.push(o[i])}while(s.length)}(t,e,r)}:function(t){fc(t)||ZA(t,e,r)},t(n||this.nodes),this}get_parsed_tags(){return this.parsed_tags}update(e){this.nodes=e}render(e){return this.display=new hp(this,e),this.display}};gp.prototype.isLeafNode=LA,gp.prototype.selectAllDescendants=jA,gp.prototype.mrca=function(e){var t;return e=e.map((function(e){return"string"==typeof e?e:e.data.name})),this.traverse_and_compute((function(n){n.children?n.parent?(n.data.mrca=mA(...n.descendants().map((e=>e.data.mrca))),t||n.data.mrca.length!=e.length||(t=n)):t||(t=n):n.data.mrca=yA([n.data.name],e)})),t},gp.prototype.hasBranchLengths=function(){let e=this.branch_length;return!!e&&Ud(this.nodes.descendants(),(function(t){return!t.parent||!fc(e(t))}))},gp.prototype.getBranchLengths=function(){let e=this.branch_length;return Rd(this.nodes.descendants(),(t=>e(t)))},gp.prototype.branchName=function(e){return arguments.length?(this.nodeLabel=e,this):this.nodeLabel},gp.prototype.normalizeBranchLengths=function(e){let t=this.branch_length,n=Rd(this.nodes.descendants(),(function(e){return t(e)?t(e):null}));const r=qd(n),o=Yd(n);return Md(this.nodes.descendants(),(e=>{let n=t(e);n&&t(e,function(e){return(e-o)/(r-o)}(n))})),this},gp.prototype.scaleBranchLengths=function(e){let t=this.branch_length;return Md(this.nodes.descendants(),(n=>{let r=t(n);r&&t(n,e(r))})),this},gp.prototype.getNewick=function(e,t){let n=this;e||(e=e=>"");let r=[];return e=e||"",function t(o){if(o.notshown)return;if(LA(o)||(r.push("("),o.children.forEach((function(e,n){n&&r.push(","),t(e)})),r.push(")")),"root"!==o.data.name){const e=o.data.name.replaceAll("'","''");/\W/.test(e)?r.push("'"+e+"'"):r.push(e)}r.push(e(o));let i=n.branch_length_accessor(o);void 0!==i&&r.push(":"+i)}(t||this.nodes),r.join("")+";"},gp.prototype.resortChildren=function(e,t,n){return this.nodes.sum((function(e){return e.value})).sort(e),this.display&&(this.display.update_layout(this.nodes),this.display.update()),this},gp.prototype.setBranchLength=function(e){return arguments.length?(this.branch_length_accessor=e||$A,this):this.branch_length_accessor},gp.prototype.maxParsimony=function(e,t){const n=sd((function(e,t){if(t.mp=[[0,0],[!1,!1]],LA(t))t.mp[1][0]=t.mp[1][1]=t[e]||!1,t.mp[0][0]=t.mp[1][0]?1:0,t.mp[0][1]=1-t.mp[0][0];else{t.children.forEach(n);var r=t.children.reduce((function(e,t){return t.mp[0][0]+e}),0),o=t.children.reduce((function(e,t){return t.mp[0][1]+e}),0);t[e]?(t.mp[0][0]=o+1,t.mp[1][0]=!0,t.mp[0][1]=o,t.mp[1][1]=!0):(r<o+1?(t.mp[0][0]=r,t.mp[1][0]=!1):(t.mp[0][0]=o+1,t.mp[1][0]=!0),o<r+1?(t.mp[0][1]=o,t.mp[1][1]=!0):(t.mp[0][1]=r+1,t.mp[1][1]=!1))}}),t);n(this.nodes),this.nodes.each((e=>{e.parent?e.mp=e.mp[1][e.parent.mp?1:0]:e.mp=e.mp[1][e.mp[0][0]<e.mp[0][1]?0:1]})),this.display.modifySelection(((e,n)=>LA(e.target)?e.target[t]:e.target.mp))},gp.prototype.getTipLengths=function(){let e=Rd(this.getTips(),(e=>({name:e.data.name,length:parseFloat(e.data.attribute)})));return e=Zd(e,(e=>-e.length)),e},gp.prototype.leftChildRightSibling=function(e){ZA(e,(function(e){e.children&&(e.children[0].data.multiway_parent=e,e.children[1].data.multiway_parent=e.parent)}));let t=JA.map(e.descendants(),(e=>{let t=e.data.multiway_parent,n="unknown";return t&&(n=t.data.name),{source:e.data.multiway_parent,target:e,name:n}}));return t},vu(gp.prototype,t),vu(gp.prototype,o),vu(gp.prototype,r);As("%Y%m%d");var mp,yp;!function(e){e.create=function(e){return e},e.has=function(e,t){return 0!==(e&t)},e.hasAll=function(e,t){return!!t&&(e&t)===t}}(mp||(mp={})),function(e){e.create=function(){return{current:[],offset:0,capacity:arguments.length>0&&void 0!==arguments[0]?arguments[0]:512,chunks:[]}},e.getString=function(e){return e.chunks.length?(e.offset>0&&(e.chunks[e.chunks.length]=e.current.length===e.offset?e.current.join(""):e.current.slice(0,e.offset).join("")),e.chunks.join("")):e.current.length===e.offset?e.current.join(""):e.current.splice(0,e.offset).join("")},e.getSize=function(e){let t=0;for(const n of e.chunks)t+=n.length;for(let n=0;n<e.offset;n++)t+=e.current[n].length;return t},e.getChunks=function(e){return e.offset>0&&(e.current.length===e.offset?e.chunks[e.chunks.length]=e.current.join(""):e.chunks[e.chunks.length]=e.current.slice(0,e.offset).join(""),e.offset=0),e.chunks};const t=[];function n(e,n){n>0&&r(e,t[n])}function r(e,t){e.offset===e.capacity&&(e.chunks[e.chunks.length]=e.current.join(""),e.offset=0),e.current[e.offset++]=t}!function(){let e="";for(let n=0;n<512;n++)t[n]=e,e+=" "}(),e.newline=function(e){r(e,"\n")},e.whitespace=n,e.whitespace1=function(e){r(e," ")},e.write=function(e,t){t&&(e.offset===e.capacity&&(e.chunks[e.chunks.length]=e.current.join(""),e.offset=0),e.current[e.offset++]=t)},e.writeSafe=r,e.writePadLeft=function(e,t,o){if(!t)return void n(e,o);n(e,o-t.length),r(e,t)},e.writePadRight=function(e,t,o){if(!t)return void n(e,o);const i=o-t.length;r(e,t),n(e,i)},e.writeInteger=function(e,t){r(e,""+t)},e.writeIntegerAndSpace=function(e,t){r(e,t+" ")},e.writeIntegerPadLeft=function(e,t,o){const i=""+t;n(e,o-i.length),r(e,i)},e.writeIntegerPadRight=function(e,t,o){const i=""+t,a=o-i.length;r(e,i),n(e,a)},e.writeFloat=function(e,t,n){r(e,""+Math.round(n*t)/n)},e.writeFloatPadLeft=function(e,t,o,i){const a=""+Math.round(o*t)/o;n(e,i-a.length),r(e,a)},e.writeFloatPadRight=function(e,t,o,i){const a=""+Math.round(o*t)/o,s=i-a.length;r(e,a),n(e,s)}}(yp||(yp={}));const vp=function(){if("undefined"!==typeof window&&window.performance){const e=window.performance;return()=>e.now()}return"undefined"!==typeof process&&"undefined"!==process.hrtime&&"function"===typeof process.hrtime?()=>{const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:Date.now?()=>Date.now():()=>+new Date}();function bp(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(isNaN(e))return"n/a";const n=Math.floor(e/36e5),r=Math.floor(e/6e4%60),o=Math.floor(e/1e3%60);let i=Math.floor(e%1e3).toString();for(;i.length<3;)i="0"+i;for(;!t&&i.length>1&&"0"===i[i.length-1];)i=i.substr(0,i.length-1);return n>0?`${n}h${r}m${o}.${i}s`:r>0?`${r}m${o}.${i}s`:o>0?`${o}.${i}s`:`${e.toFixed(0)}ms`}var Cp,Ip,Ep;function xp(e,t){return e-t}function Bp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER,n=e;return()=>{const e=n;return n=(n+1)%t,e}}!function(e){const t="undefined"!==typeof btoa?btoa:e=>Buffer.from(e).toString("base64"),n=[];e.create22=function(){let e=+new Date+vp();for(let t=0;t<16;t++)n[t]=String.fromCharCode((e+255*Math.random())%255|0),e=Math.floor(e/255);return t(n.join("")).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22)},e.createv4=function(){let e=+new Date+vp();const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}));return t},e.is=function(e){return"string"===typeof e}}(Cp||(Cp={})),function(e){class t{has(e){return!1}forEach(e,t){return t}constructor(){this.size=0}}class n{has(e){return e===this.idx}forEach(e,t){return e(this.idx,t),t}constructor(e){this.idx=e,this.size=1}}class r{has(e){return e<this.length&&!!this.mask[e]}_forEach(e,t){for(let n=0;n<this.length;n++)this.mask[n]&&e(n,t)}forEach(e,t){return this._forEach(e,t),t}constructor(e,t){this.mask=e,this.size=t,this.length=e.length}}class o{has(e){return!0}_forEach(e,t){for(let n=0;n<this.size;n++)e(n,t)}forEach(e,t){return this._forEach(e,t),t}constructor(e){this.size=e}}class i{has(e){return this.set.has(e)}_forEach(e,t){for(const n of this.flatten())e(n,t)}flatten(){if(this._flat)return this._flat;const e=new Int32Array(this.size);let t=0;return this.set.forEach((n=>e[t++]=n)),function(e){Array.prototype.sort.call(e,xp)}(e),this._flat=e,this._flat}forEach(e,t){return this._forEach(e,t),t}constructor(e){this.set=e,this._flat=void 0,this.size=e.size}}function a(e){return new i(e)}function s(e,t){return new r(e,t)}e.always=function(e){return new o(e)},e.never=new t,e.ofSet=a,e.singleton=function(e){return new n(e)},e.ofUniqueIndices=function(e){const a=e.length;if(0===a)return new t;if(1===a)return new n(e[0]);let s=0;for(const t of e)t>s&&(s=t);if(a===s)return new o(a);if(a/s<1/12){const t=new Set;for(const n of e)t.add(n);return new i(t)}const l=new Int8Array(s+1);for(const t of e)l[t]=1;return new r(l,e.length)},e.ofMask=s,e.hasAny=function(e,t){for(const n of t)if(e.has(n))return!0;return!1},e.complement=function(e,t){let n=0,r=0;if(t.forEach((t=>{e.has(t)||(n++,t>r&&(r=t))})),n/r<1/12){const n=new Set;return t.forEach((t=>{e.has(t)||n.add(t)})),a(n)}{const o=new Uint8Array(r+1);return t.forEach((t=>{e.has(t)||(o[t]=1)})),s(o,n)}}}(Ip||(Ip={})),function(e){e.create=function(e){return{ref:e}},e.set=function(e,t){return e.ref=t,e}}(Ep||(Ep={}));const wp=Bp(0,2147483647);var _p,Sp;!function(e){e.create=function(e,t){return{id:wp(),version:0,value:e,metadata:t}},e.withValue=function(e,t){return{id:e.id,version:e.version+1,value:t,metadata:e.metadata}}}(_p||(_p={})),function(e){function t(e,t){return Ep.set(e,_p.withValue(e.ref,t))}e.create=function(e,t){return Ep.create(_p.create(e,t))},e.update=t,e.set=function(e,t){return Ep.set(e,t)},e.updateIfChanged=function(e,n){return e.ref.value!==n?t(e,n):e}}(Sp||(Sp={}));const Dp=function(){};function Tp(e,t){const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const kp=Object.prototype.hasOwnProperty;function Qp(e,t){if(e===t)return!0;const n=Array.isArray(e),r=Array.isArray(t);if(n&&r){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Qp(e[n],t[n]))return!1;return!0}if(n!==r)return!1;if(e&&t&&"object"===typeof e&&"object"===typeof t){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;const r=e instanceof Date,o=t instanceof Date;if(r&&o)return e.getTime()===t.getTime();if(r!==o)return!1;const i=e instanceof RegExp,a=t instanceof RegExp;if(i&&a)return e.toString()===t.toString();if(i!==a)return!1;for(let e=0;e<n.length;e++)if(!kp.call(t,n[e]))return!1;for(let s=0;s<n.length;s++)if(!Qp(e[n[s]],t[n[s]]))return!1;return!0}return!1}function Mp(e,t){if(e===t)return!0;const n=Array.isArray(e),r=Array.isArray(t);return n&&r?function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;++n)if(e[n]!==t[n])return!1;return!0}(e,t):n===r&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&Rp(e,t))}function Rp(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e);if(Object.keys(t).length!==n.length)return!1;for(const r of n)if(!kp.call(e,r)||e[r]!==t[r])return!1;return!0}function Pp(e,t){return void 0!==e?e:t}Object.assign;const Op=Math.PI/2,Fp=Math.PI/180;function Np(e){return e*Fp}function Lp(e){return e/Fp}function Up(e){return 0!==e&&0===(e&e-1)}function Gp(e,t){return e*t}function jp(e,t,n){return(e-t)/(n-t)}function zp(e,t,n){return Math.max(t,Math.min(n,e))}function Hp(e){return zp(e,0,1)}function Vp(e,t,n){return e+(t-e)*n}function qp(e,t,n,r,o,i){const a=(n-e)*i,s=(r-t)*i,l=o*o;return(2*t-2*n+a+s)*(o*l)+(-3*t+3*n-2*a-s)*l+a*o+t}function Yp(e,t,n,r){const o=1-r;return o*o*e+2*o*r*t+r*r*n}function Xp(e,t,n){return(n=Hp(jp(n,e,t)))*n*(3-2*n)}function Wp(){return Wp.zero()}function Kp(){return Kp.zero()}function Jp(e){return e}function Zp(e,t,n,r){return{label:e,description:n,list:r,type:t}}function $p(e,t,n){const r={};for(const o in e){let i=e[o];i=Jp.saturate(i,t),i=Jp.darken(i,-n),r[o]=i}return r}!function(e){function t(){const e=[.1,0,0];return e[0]=0,e}function n(e,t){const[n,r,o]=t,i=Math.sqrt(r*r+o*o);let a=(Lp(Math.atan2(o,r))+360)%360;return 0===Math.round(1e4*i)&&(a=Number.NaN),e[0]=a,e[1]=i,e[2]=n,e}function r(e,t,n){return e[0]=t[0]-a*n,e[1]=t[1],e[2]=t[2],e}e.zero=t,e.create=function(e,n,r){const o=t();return o[0]=e,o[1]=n,o[2]=r,o},e.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},e.distance=function(e,t){const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)},e.fromColor=function(e,t){const[n,r,o]=Jp.toRgb(t),[i,a,u]=function(e,t,n){e=g(e),t=g(t),n=g(n);const r=m((.4124564*e+.3575761*t+.1804375*n)/s),o=m((.2126729*e+.7151522*t+.072175*n)/l),i=m((.0193339*e+.119192*t+.9503041*n)/c);return[r,o,i]}(n,r,o),d=116*a-16;return e[0]=d<0?0:d,e[1]=500*(i-a),e[2]=200*(a-u),e},e.fromHcl=function(e,t){return Kp.toLab(e,t)},e.toColor=function(e){let t=(e[0]+16)/116,n=isNaN(e[1])?t:t+e[1]/500,r=isNaN(e[2])?t:t-e[2]/200;t=l*h(t),n=s*h(n),r=c*h(r);const o=p(3.2404542*n-1.5371385*t-.4985314*r),i=p(-.969266*n+1.8760108*t+.041556*r),a=p(.0556434*n-.2040259*t+1.0572252*r);return Jp.fromRgb(Math.round(zp(o,0,255)),Math.round(zp(i,0,255)),Math.round(zp(a,0,255)))},e.toHcl=n,e.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.darken=r,e.lighten=function(e,t,n){return r(e,t,-n)};const o=[0,0,0];function i(e,t,r){return n(o,t),Kp.toLab(e,Kp.saturate(o,o,r))}e.saturate=i,e.desaturate=function(e,t,n){return i(e,t,-n)};const a=18,s=.95047,l=1,c=1.08883,u=.137931034,d=.206896552,A=.12841855,f=.008856452;function p(e){return 255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function h(e){return e>d?e*e*e:A*(e-u)}function g(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function m(e){return e>f?Math.pow(e,1/3):e/A+u}}(Wp||(Wp={})),function(e){function t(){const e=[.1,0,0];return e[0]=0,e}e.zero=t,e.create=function(e,n,r){const o=t();return o[0]=e,o[1]=n,o[2]=r,o},e.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},e.hasHue=function(e){return!isNaN(e[0])};const n=[0,0,0];e.fromColor=function(e,t){return Wp.toHcl(e,Wp.fromColor(n,t))},e.fromLab=function(e,t){return Wp.toHcl(e,t)};const r=[0,0,0];function o(e,t){let[n,r,o]=t;return isNaN(n)&&(n=0),n=Np(n),e[0]=o,e[1]=Math.cos(n)*r,e[2]=Math.sin(n)*r,e}function i(e,t,n){return e[0]=t[0],e[1]=Math.max(0,t[1]+l*n),e[2]=t[2],e}e.toColor=function(e){return Wp.toColor(o(r,e))},e.toLab=o,e.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.saturate=i,e.desaturate=function(e,t,n){return i(e,t,-n)};const a=[0,0,0];function s(e,t,n){return o(a,t),Wp.toHcl(e,Wp.darken(a,a,n))}e.darken=s,e.lighten=function(e,t,n){return s(e,t,-n)};const l=18}(Kp||(Kp={})),function(e){function t(e,t,n){return e<<16|t<<8|n}function n(e,t,n){return 255*e<<16|255*t<<8|255*n}function r(e){const t=e>>16&255;return t!==(e>>8&255)||t!==(255&e)}e.toStyle=function(e){return`rgb(${e>>16&255}, ${e>>8&255}, ${255&e})`},e.toHexStyle=function(e){return"#"+("000000"+e.toString(16)).slice(-6)},e.toHexString=function(e){return"0x"+("000000"+e.toString(16)).slice(-6)},e.toRgbString=function(t){return`RGB: ${e.toRgb(t).join(", ")}`},e.toRgb=function(e){return[e>>16&255,e>>8&255,255&e]},e.toRgbNormalized=function(e){return[(e>>16&255)/255,(e>>8&255)/255,(255&e)/255]},e.fromHexStyle=function(e){return parseInt(e.replace("#","0x"))},e.fromHexString=function(e){return parseInt(e)},e.fromRgb=t,e.fromNormalizedRgb=n,e.fromArray=function(e,n){return t(e[n],e[n+1],e[n+2])},e.fromNormalizedArray=function(e,t){return n(e[t],e[t+1],e[t+2])},e.toArray=function(e,t,n){return t[n]=e>>16&255,t[n+1]=e>>8&255,t[n+2]=255&e,t},e.toArrayNormalized=function(e,t,n){return t[n]=(e>>16&255)/255,t[n+1]=(e>>8&255)/255,t[n+2]=(255&e)/255,t},e.toVec3=function(e,t){return e[0]=t>>16&255,e[1]=t>>8&255,e[2]=255&t,e},e.toVec3Normalized=function(e,t){return e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},e.interpolate=function(e,t,n){const r=e>>16&255,o=e>>8&255,i=255&e;return r+((t>>16&255)-r)*n<<16|o+((t>>8&255)-o)*n<<8|i+((255&t)-i)*n},e.hasHue=r;const o=[0,0,0];function i(e,t){return r(e)?(Kp.fromColor(o,e),Kp.toColor(Kp.saturate(o,o,t))):e}e.saturate=i,e.desaturate=function(e,t){return i(e,-t)};const a=[0,0,0];function s(e,t){return Wp.fromColor(a,e),Wp.toColor(Wp.darken(a,a,t))}function l(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function c(e){return.2126*l((e>>16&255)/255)+.7152*l((e>>8&255)/255)+.0722*l((255&e)/255)}function u(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function d(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}e.darken=s,e.lighten=function(e,t){return s(e,-t)},e.luminance=c,e.contrast=function(e,t){const n=c(e),r=c(t);return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},e.sRGBToLinear=function(e){return n(u((e>>16&255)/255),u((e>>8&255)/255),u((255&e)/255))},e.linearToSRGB=function(e){return n(d((e>>16&255)/255),d((e>>8&255)/255),d((255&e)/255))}}(Jp||(Jp={}));function eh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return e.replace(/([a-z\xE0-\xFF])([A-Z\xC0\xDF])/g,`$1${t}$2`)}function th(e){return rh(eh(e))}const nh=e=>e.toUpperCase();function rh(e){return e.toLowerCase().replace(/^\w|\s\w/g,nh)}function oh(e){return e.replace(/_/g," ")}function ih(e){return e.replace(/-/g," ")}function ah(e){return rh(eh(oh(ih(e))))}function sh(e,t,n,r){const o=r.length;if(o>n-t)return!1;for(let i=0;i<o;i++)if(e.charCodeAt(t+i)!==r.charCodeAt(i))return!1;return!0}function lh(e){return e.replace(/<\/?[^>]+>/g,"")}function ch(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const uh={"orange-red":Zp("Orange-Red","sequential","Orange-Red, sequential color scheme from ColorBrewer 2.0",[16775148,16705736,16635038,16628612,16551257,15689032,14102559,11730944,8323072]),"purple-blue":Zp("Purple-Blue","sequential","Purple-Blue, sequential color scheme from ColorBrewer 2.0",[16775163,15525874,13685222,10927579,7645647,3576e3,356528,285325,145496]),"blue-purple":Zp("Blue-Purple","sequential","Blue-Purple, sequential color scheme from ColorBrewer 2.0",[16252157,14740724,12571622,10403034,9213638,9202609,8929693,8458108,5046347]),oranges:Zp("Oranges","sequential","",[16774635,16705230,16634018,16625259,16616764,15821075,14239745,10892803,8333060]),"blue-green":Zp("Blue-Green","sequential","",[16252157,15070713,13429990,10082505,6734500,4304502,2329413,27948,17435]),"yellow-orange-brown":Zp("Yellow-Orange-Brown","sequential","",[16777189,16775100,16704401,16696399,16685353,15495188,13388802,10040324,6694150]),"yellow-green":Zp("Yellow-Green","sequential","",[16777189,16252089,14282915,11394446,7915129,4303709,2327619,26679,17705]),reds:Zp("Reds","sequential","",[16774640,16703698,16563105,16552562,16476746,15678252,13309981,10817301,6750221]),"red-purple":Zp("Red-Purple","sequential","",[16775155,16638173,16565696,16424885,16214177,14496919,11403646,7995767,4784234]),greens:Zp("Greens","sequential","",[16252149,15070688,13101504,10607003,7652470,4303709,2329413,27948,17435]),"yellow-green-blue":Zp("Yellow-Green-Blue","sequential","",[16777177,15595697,13101492,8375739,4306628,1937856,2252456,2438292,531800]),purples:Zp("Purples","sequential","",[16579581,15724021,14342891,12369372,10394312,8420794,6967715,5515151,4128893]),"green-blue":Zp("Green-Blue","sequential","",[16252144,14742491,13429701,11066805,8113348,5157843,2854078,551084,540801]),greys:Zp("Greys","sequential","",[16777215,15790320,14277081,12434877,9868950,7566195,5395026,2434341,0]),"yellow-orange-red":Zp("Yellow-Orange-Red","sequential","",[16777164,16772512,16701814,16691788,16616764,16535082,14883356,12386342,8388646]),"purple-red":Zp("Purple-Red","sequential","",[16250105,15196655,13941210,13210823,14640560,15149450,13505110,9961539,6750239]),blues:Zp("Blues","sequential","",[16251903,14609399,13032431,10406625,7057110,4362950,2191797,545180,536683]),"purple-blue-green":Zp("Purple-Blue-Green","sequential","",[16775163,15524592,13685222,10927579,6793679,3576e3,164234,93273,83510]),spectral:Zp("Spectral","diverging","",[10355010,13975119,16018755,16625249,16703627,16777151,15136152,11263396,6734501,3311805,6180770]),"red-yellow-green":Zp("Red-Yellow-Green","diverging","",[10813478,14102567,16018755,16625249,16703627,16777151,14282635,10934634,6733155,1742928,26679]),"red-blue":Zp("Red-Blue","diverging","",[6750239,11671595,14049357,16033154,16636871,16250871,13755888,9618910,4428739,2188972,340065]),"pink-yellow-green":Zp("Pink-Yellow-Green","diverging","",[9306450,12917629,14579630,15840986,16638191,16250871,15136208,12116358,8371265,5083681,2581529]),"purple-green":Zp("Purple-Green","diverging","",[4194379,7744131,10055851,12756431,15193320,16250871,14282963,10935200,5942881,1800247,17435]),"red-yellow-blue":Zp("Red-Yellow-Blue","diverging","Red-Yellow-Blue, diverging color scheme from ColorBrewer 2.0",[10813478,14102567,16018755,16625249,16703632,16777151,14742520,11262441,7646673,4552116,3225237]),"brown-white-green":Zp("Brown-White-Green","diverging","",[5517317,9195786,12550445,14664317,16181443,16119285,13101797,8441281,3512207,91742,15408]),"red-grey":Zp("Red-Grey","diverging","",[6750239,11671595,14049357,16033154,16636871,16777215,14737632,12237498,8882055,5066061,1710618]),"orange-purple":Zp("Orange-Purple","diverging","",[8338184,11753478,14713364,16627811,16703670,16250871,14211819,11709394,8418220,5515144,2949195]),"set-2":Zp("Set-2","qualitative","",[6734501,16551266,9281739,15174339,10934356,16767279,15058068,11776947]),accent:Zp("Accent","qualitative","",[8374655,12496596,16629894,16777113,3697840,15729279,12540695,6710886]),"set-1":Zp("Set-1","qualitative","",[14948892,3636920,5091146,9981603,16744192,16777011,10901032,16220607,10066329]),"set-3":Zp("Set-3","qualitative","",[9294791,16777139,12499674,16482418,8434131,16626786,11787881,16567781,14277081,12353725,13429701,16772463]),"dark-2":Zp("Dark-2","qualitative","",[1810039,14245634,7696563,15149450,6727198,15117058,10909213,6710886]),paired:Zp("Paired","qualitative","",[10931939,2062516,11722634,3383340,16489113,14883356,16629615,16744192,13284054,6962586,16777113,11622696]),"pastel-2":Zp("Pastel-2","qualitative","",[11789005,16633260,13358568,16042724,15136201,16773806,15852236,13421772]),"pastel-1":Zp("Pastel-1","qualitative","",[16495790,11783651,13429701,14601188,16701862,16777164,15063229,16636652,15921906]),"many-distinct":Zp("Many-Distinct","qualitative","",[1810039,14245634,7696563,15149450,6727198,15117058,10909213,6710886,14948892,3636920,5091146,9981603,16744192,16777011,10901032,16220607,10066329,6734501,16551266,9281739,15174339,10934356,16767279,15058068,11776947]),magma:Zp("Magma","sequential","Perceptually uniform shades of black-red-white",[4329332,4853881,5378684,5903742,6363263,6888576,7413633,7938689,8463745,8988801,9513600,10038655,10563454,11088508,11613562,12138360,12728949,13254258,13714030,14239338,14699366,15094114,15489119,15753309,16017499,16216411,16350045,16483424,16551523,16619368,16621934,16689780,16692091,16694402,16696969,16633746,16636058,16638371,16575148,16577461,16514239]),inferno:Zp("Inferno","sequential","Perceptually uniform shades of black-red-yellow",[4721514,5246316,5771373,6296430,6821486,7346542,7871597,8396651,8921450,9446504,9971557,10496610,10956127,11481435,12006486,12466258,12926285,13386056,13780802,14241085,14570295,14965297,15229227,15558693,15757342,15956248,16154897,16288267,16421638,16489734,16492043,16494612,16496926,16368426,16305463,16111429,15982678,15853928,15856253,16119953,16580260]),plasma:Zp("Plasma","sequential","Perceptually uniform shades of blue-red-yellow",[1771148,2426257,3081365,3671193,4195228,4784799,5308834,5833124,6357158,6815911,7340200,7864744,8324007,8783782,9309348,9769377,10164126,10624154,11018902,11413393,11808141,12137352,12466307,12795519,13124730,13453685,13717361,14046573,14309992,14573668,14837344,15035483,15299159,15497299,15695438,15893834,16091974,16224833,16357693,16425017,16557877,16625457,16627245,16629289,16631334,16567845,16438820,16310052,16115494,15921190,15726625]),viridis:Zp("Viridis","sequential","Perceptually uniform shades of blue-green-yellow",[4524123,4656994,4658793,4726127,4727668,4663929,4599933,4535937,4406404,4276870,4081800,3952010,3822475,3627148,3497356,3302029,3172237,3042446,2912654,2782862,2652814,2523022,2393229,2328973,2198924,2069132,2004874,2005897,2007175,2139525,2337154,2666111,3060348,3520376,4045684,4570991,5227369,5883748,6605661,7392854,8180303,8967495,9819967,10672695,11525166,12443174,13295646,14148121,15000344,15852828,16639780]),cividis:Zp("Cividis","sequential","Perceptually uniform shades of blue-green-yellow, should look effectively identical to colorblind and non-colorblind users",[11367,12400,537456,1455727,2046574,2571629,3031404,3425388,3754092,4148075,4476779,4805227,5133932,5396844,5725549,5988462,6317166,6580079,6843249,7171698,7434867,7697781,7960951,8289656,8618104,8881272,9209976,9538679,9867127,10195830,10524533,10853235,11181938,11510640,11839343,12168045,12497002,12891240,13219941,13548642,13943134,14271834,14666326,14995025,15389516,15718470,16112703,16507190,16639799]),twilight:Zp("Twilight","sequential","Perceptually uniform shades of white-blue-black-red-white, cyclic",[14670305,14211037,13554648,12766675,11847630,10993866,10139847,9351365,8628419,8036290,7509952,7048895,6718653,6519739,6386105,6252470,6184114,6181293,6112935,6044831,5976470,5777291,5447293,5052270,4592479,4067665,3674181,3281211,3150646,3543352,4067644,4657728,5379141,6166345,6953549,7741007,8463184,9120336,9777743,10304079,10830671,11291984,11687762,12083541,12348505,12613471,12878439,13077872,13211771,13411209,13545111,13809830,14074293,14338756,14537169,14735067,14801121]),turbo:Zp("Turbo","sequential","Improved (smooth) rainbow colormap for visualization",[4866485,4872413,4354034,3770361,3120629,2667241,2475736,2611140,3073454,3928216,5109892,6487408,8126047,9829201,11531332,13167162,14605618,15780908,16693543,16753699,16748063,16741916,16146200,15026195,13644558,12198408,10818563,9833728]),rainbow:Zp("Rainbow","sequential","",[3367393,3516485,16383744,15501073,12526114]),"red-white-blue":Zp("Red-White-Blue","diverging","",[12526114,16777215,3367393])},dh=Object.keys(uh).map((e=>[e,uh[e].label,rh(uh[e].type)])),Ah=dh.filter((e=>"diverging"===uh[e[0]].type||"sequential"===uh[e[0]].type)),fh=dh.filter((e=>"qualitative"===uh[e[0]].type));function ph(e){return e in uh?uh[e]:(console.warn(`unknown color list named '${e}'`),uh["red-yellow-blue"])}function hh(e){return{kind:"table-legend",table:e}}var gh;function mh(e,t,n){return e[t]-e[n]}function yh(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function vh(e,t,n,r){const o=n+r>>1;return t(e,n,r)>0?t(e,n,o)>0?t(e,o,r)>0?o:r:n:t(e,r,o)>0?t(e,o,n)>0?o:n:r}function bh(e,t,n){const{cmp:r,swap:o,data:i,parts:a}=e;let s=t+1,l=n;for(o(i,t,vh(i,r,t,n));r(i,l,t)>0;)--l;for(let c=t+1;c<=l;c++){const e=r(i,c,t);if(e>0){for(o(i,c,l),--l;r(i,l,t)>0;)--l;c--}else 0===e&&(o(i,c,s),s++)}for(let c=t;c<s;c++)o(i,c,t+l-c);a[0]=l-s+t+1,a[1]=l}function Ch(e,t,n){let{data:r,cmp:o,swap:i}=e;for(let a=t+1;a<=n;a++){let e=a-1;for(;e>=t&&o(r,e,e+1)>0;)i(r,e,e+1),e-=1}}function Ih(e,t,n){const{parts:r}=e;for(;t<n;){if(n-t<16)return void Ch(e,t,n);bh(e,t,n);const o=r[0],i=r[1];o-t<n-i?(Ih(e,t,o-1),t=i+1):(Ih(e,i+1,n),n=o-1)}}function Eh(e,t,n,r){let o=n+1,i=r;yh(e,n,vh(e,mh,n,r));const a=e[n];for(;e[i]>a;)--i;for(let s=n+1;s<=i;s++){const t=e[s];if(t>a){for(yh(e,s,i),--i;e[i]>a;)--i;s--}else t===a&&(yh(e,s,o),++o)}for(let s=n;s<o;s++)yh(e,s,n+i-s);t[0]=i-o+n+1,t[1]=i}function xh(e,t,n){for(let r=t+1;r<=n;r++){const n=e[r];let o=r-1;for(;o>=t&&e[o]>n;)e[o+1]=e[o],o-=1;e[o+1]=n}}function Bh(e,t,n,r){for(;n<r;){if(r-n<16)return void xh(e,n,r);Eh(e,t,n,r);const o=t[0],i=t[1];o-n<r-i?(Bh(e,t,n,o-1),n=i+1):(Bh(e,t,i+1,r),r=o-1)}}function wh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mh;return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:mh;r===mh?Bh(e,[0,0],t,n-1):Ih({data:e,cmp:r,swap:yh,parts:[0,0]},t,n-1);return e}(e,0,e.length,t)}function _h(e,t,n,r,o){return Ih({data:e,cmp:r,swap:o,parts:[0,0]},t,n-1),e}function Sh(e,t,n){return e[t].key<e[n].key?-1:1}function Dh(e,t,n){const r=n&&n.start||0,o=n&&n.end||e.length;if(o-r<=0)throw new Error("Can only bucket non-empty collections.");return function(e,t,n,r,o){const i=new Map,a=[];let s=t(e[0]),l=!0;for(let f=r;f<o;f++){const n=t(e[f]);if(i.has(n))i.get(n).count++,s!==n&&(l=!1);else{const e={key:n,count:1,offset:f};i.set(n,e),a[a.length]=e}s=n}const c=new Int32Array(a.length+1);c[a.length]=o;let u=!0;if(n)for(let f=1,p=a.length;f<p;f++)if(a[f-1].key>a[f].key){u=!1;break}if(l&&u){for(let e=0;e<a.length;e++)c[e]=a[e].offset;return c}n&&!u&&_h(a,0,a.length,Sh,yh);let d=0;for(let f=0;f<a.length;f++){const e=a[f];e.offset=d,d+=e.count}const A=new Int32Array(o-r);for(let f=r;f<o;f++){const n=t(e[f]);A[i.get(n).offset++]=e[f]}for(let f=0,p=A.length;f<p;f++)e[f+r]=A[f];c[0]=r;for(let f=1;f<a.length;f++)c[f]=a[f-1].offset+r;return c}(e,t,!(!n||!n.sort),r,o)}!function(e){function t(e){const t=e.growBy*e.elementSize;e.currentSize=t,e.currentIndex=0,e.currentChunk=new e.ctor(t),e.allocatedSize+=t,e.chunks[e.chunks.length]=e.currentChunk}function n(e,t){const{ctor:n,chunks:r,currentIndex:o}=e;if(!r.length)return new n(0);if(1===r.length&&(t||o===e.allocatedSize))return r[0];let i=0;for(let c=0,u=r.length-1;c<u;c++)i+=r[c].length;i+=e.currentIndex;const a=new n(i);let s=0;if(a.buffer)for(let c=0,u=r.length-1;c<u;c++)a.set(r[c],s),s+=r[c].length;else for(let c=0,u=r.length-1;c<u;c++){const e=r[c];for(let t=0,n=e.length;t<n;t++)a[s+t]=e[t];s+=e.length}const l=r[r.length-1];if(a.buffer&&o>=e.currentSize)a.set(l,s);else for(let c=0,u=l.length;c<u;c++)a[s+c]=l[c];return a}e.is=function(e){return e.creator&&e.chunkSize},e.add4=function(e,n,r,o,i){e.currentIndex>=e.currentSize&&t(e);const a=e.currentChunk,s=e.currentIndex;return a[s]=n,a[s+1]=r,a[s+2]=o,a[s+3]=i,e.currentIndex+=4,e.elementCount++},e.add3=function(e,n,r,o){e.currentIndex>=e.currentSize&&t(e);const i=e.currentChunk,a=e.currentIndex;return i[a]=n,i[a+1]=r,i[a+2]=o,e.currentIndex+=3,e.elementCount++},e.add2=function(e,n,r){e.currentIndex>=e.currentSize&&t(e);const o=e.currentChunk,i=e.currentIndex;return o[i]=n,o[i+1]=r,e.currentIndex+=2,e.elementCount++},e.add=function(e,n){return e.currentIndex>=e.currentSize&&t(e),e.currentChunk[e.currentIndex]=n,e.currentIndex+=1,e.elementCount++},e.addRepeat=function(e,n,r){for(let o=0;o<n;o++)e.currentIndex>=e.currentSize&&t(e),e.currentChunk[e.currentIndex++]=r,e.elementCount++;return e.elementCount},e.addMany=function(e,n){const{elementSize:r}=e;for(let o=0,i=n.length;o<i;o+=r){e.currentIndex>=e.currentSize&&t(e);const{currentChunk:i}=e;for(let t=0;t<r;t++)i[e.currentIndex++]=n[o+t];e.elementCount++}return e.elementCount},e.compact=function(e){return n(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])},e._compact=n,e.create=function(e,t,n,r){const o={ctor:e,elementSize:t,growBy:Math.max(1,Math.ceil(n)),allocatedSize:0,elementCount:0,currentSize:0,currentChunk:void 0,currentIndex:0,chunks:[]};if("undefined"===typeof r)return o;if("number"===typeof r)return o.currentChunk=new e(r*t),o.allocatedSize=r*t,o.currentSize=o.currentChunk.length,o.chunks[0]=o.currentChunk,o;const i=r;if(i.length%t!==0)throw new Error("initialChunk length must be a multiple of the element size.");return o.currentChunk=i,o.allocatedSize=i.length,o.currentSize=i.length,o.chunks[0]=i,o}}(gh||(gh={}));class Th{createGroup(e,t){const n=this.id++,r=[e];return this.groups[n]=r,{id:n,keys:r,value:t}}add(e,t){const n=this.getHash(t);if(this.byHash.has(n)){const r=this.byHash.get(n);for(let n=0,i=r.length;n<i;n++){const o=r[n];if(this.areEqual(t,o.value))return o.keys[o.keys.length]=e,o.value}const o=this.createGroup(e,t);return r[r.length]=o,o.value}{const r=this.createGroup(e,t);return this.byHash.set(n,[r]),r.value}}constructor(e,t){this.getHash=e,this.areEqual=t,this.id=0,this.byHash=new Map,this.groups=[]}}function kh(e){let t=e^e>>4;return t=(3735928559^t)+(t<<5),t^=t>>11,t}function Qh(e,t){let n=23;return n=31*n+e|0,n=31*n+t|0,n^=n>>4,n=(3735928559^n)+(n<<5),n^=n>>11,n}function Mh(e){let t=0;for(let n=0,r=e.length;n<r;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}function Rh(e,t){return(e+t)*(e+t+1)/2+t}function Ph(e,t){return e<t?Rh(e,t):Rh(t,e)}function Oh(e,t){const n=Math.floor((Math.sqrt(8*t+1)-1)/2),r=t-(n*n+n)/2;return e[0]=n-r,e[1]=r,e}function Fh(e){let t=2166136261;for(let n=0,r=e.length;n<r;++n)t^=e[n],t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}function Nh(e,t){return{start:t&&"undefined"!==typeof t.start?Math.max(Math.min(t.start,e-1),0):0,end:t&&"undefined"!==typeof t.end?Math.min(t.end,e):e}}function Lh(e,t){const n=t&&"undefined"!==typeof t.array?t.array:Array,{start:r,end:o}=Nh(e,t);return{array:new n(o-r),start:r,end:o}}function Uh(e,t,n){const{array:r,start:o}=Lh(e,n);return function(e,t,n){for(let r=0,o=t.length;r<o;r++)t[r]=e(n+r);return t}(t,r,o)}function Gh(e){return!!e.buffer&&"number"===typeof e.byteLength&&"number"===typeof e.BYTES_PER_ELEMENT}function jh(e,t){const{constructor:n,buffer:r,length:o,byteOffset:i,BYTES_PER_ELEMENT:a}=e,{start:s,end:l}=Nh(o,t);return 0===s&&l===o?e:new n(r,i+a*s,Math.min(o,l-s))}const zh=1e-6;function Hh(e,t,n){return Math.abs(e-t)<=n}const Vh=isFinite;function qh(){return qh.zero()}function Yh(){return Yh.zero()}function Xh(){return Xh.zero()}function Wh(){return Wh.zero()}function Kh(){return Kh.zero()}function Jh(e){return Object.keys(e)}function Zh(e){throw new Error("unreachable")}function $h(e){return"function"===typeof(null===e||void 0===e?void 0:e.then)}function eg(){return eg.zero()}var tg;function ng(e,t,n){for(;t<n&&32===e.charCodeAt(t);)t++;return rg(e,t,n)}function rg(e,t,n){let r=t,o=0,i=1;for(45===e.charCodeAt(r)?(i=-1,++r):43===e.charCodeAt(r)&&++r;r<n;r++){const t=e.charCodeAt(r)-48;if(t>9||t<0)return i*o|0;o=10*o+t|0}return i*o}function og(e,t,n,r){return 43===t.charCodeAt(n)&&n++,e*Math.pow(10,rg(t,n,r))}function ig(e,t,n){let r=t,o=1,i=0,a=0,s=1;for(45===e.charCodeAt(r)?(o=-1,++r):43===e.charCodeAt(r)&&++r;r<n;){let t=e.charCodeAt(r)-48;if(!(t>=0&&t<10)){if(-2===t){for(++r;r<n;){if(t=e.charCodeAt(r)-48,!(t>=0&&t<10))return 53===t||21===t?og(o*(i+a/s),e,r+1,n):o*(i+a/s);a=10*a+t,s*=10,++r}return o*(i+a/s)}if(53===t||21===t)return og(o*i,e,r+1,n);break}i=10*i+t,++r}return o*i}!function(e){function t(){const e=[.1,0,0];return e[0]=0,e}function n(e,n,r){const o=t();return o[0]=e,o[1]=n,o[2]=r,o}function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function o(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function i(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function a(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function s(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function l(e){const t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function c(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function u(e,t){const n=t[0],r=t[1],o=t[2];let i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i),e}function d(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function A(e,t,n){const r=t[0],o=t[1],i=t[2],a=n[0],s=n[1],l=n[2];return e[0]=o*l-i*s,e[1]=i*a-r*l,e[2]=r*s-o*a,e}e.zero=t,e.clone=function(e){const n=t();return n[0]=e[0],n[1]=e[1],n[2]=e[2],n},e.isFinite=function(e){return Vh(e[0])&&Vh(e[1])&&Vh(e[2])},e.hasNaN=function(e){return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])},e.setNaN=function(e){return e[0]=NaN,e[1]=NaN,e[2]=NaN,e},e.fromObj=function(e){return n(e.x,e.y,e.z)},e.toObj=function(e){return{x:e[0],y:e[1],z:e[2]}},e.fromArray=function(e,t,n){return e[0]=t[n+0],e[1]=t[n+1],e[2]=t[n+2],e},e.toArray=function(e,t,n){return t[n+0]=e[0],t[n+1]=e[1],t[n+2]=e[2],t},e.create=n,e.ofArray=function(e){const n=t();return n[0]=e[0],n[1]=e[1],n[2]=e[2],n},e.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},e.copy=r,e.add=o,e.sub=i,e.mul=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},e.scale=a,e.scaleAndAdd=s,e.scaleAndSub=function(e,t,n,r){return e[0]=t[0]-n[0]*r,e[1]=t[1]-n[1]*r,e[2]=t[2]-n[2]*r,e},e.addScalar=function(e,t,n){return e[0]=t[0]+n,e[1]=t[1]+n,e[2]=t[2]+n,e},e.subScalar=function(e,t,n){return e[0]=t[0]-n,e[1]=t[1]-n,e[2]=t[2]-n,e},e.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},e.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},e.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},e.trunc=function(e,t){return e[0]=Math.trunc(t[0]),e[1]=Math.trunc(t[1]),e[2]=Math.trunc(t[2]),e},e.abs=function(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e},e.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},e.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},e.clamp=function(e,t,n,r){return e[0]=Math.max(n[0],Math.min(r[0],t[0])),e[1]=Math.max(n[1],Math.min(r[1],t[1])),e[2]=Math.max(n[2],Math.min(r[2],t[2])),e},e.distance=function(e,t){const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)},e.squaredDistance=function(e,t){const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return n*n+r*r+o*o},e.magnitude=function(e){const t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},e.squaredMagnitude=l,e.setMagnitude=function(e,t,n){return a(e,u(e,t),n)},e.negate=c,e.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},e.normalize=u,e.dot=d,e.cross=A,e.lerp=function(e,t,n,r){const o=t[0],i=t[1],a=t[2];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e};const f=t();function p(e,t){const n=Math.sqrt(l(e)*l(t));if(0===n)return Math.PI/2;const r=d(e,t)/n;return Math.acos(zp(r,-1,1))}e.slerp=function(e,t,n,r){const i=zp(d(t,n),-1,1),l=Math.acos(i)*r;return s(f,n,t,-i),u(f,f),o(e,a(e,t,Math.cos(l)),a(f,f,Math.sin(l)))},e.hermite=function(e,t,n,r,o,i){const a=i*i,s=a*(2*i-3)+1,l=a*(i-2)+i,c=a*(i-1),u=a*(3-2*i);return e[0]=t[0]*s+n[0]*l+r[0]*c+o[0]*u,e[1]=t[1]*s+n[1]*l+r[1]*c+o[1]*u,e[2]=t[2]*s+n[2]*l+r[2]*c+o[2]*u,e},e.bezier=function(e,t,n,r,o,i){const a=1-i,s=a*a,l=i*i,c=s*a,u=3*i*s,d=3*l*a,A=l*i;return e[0]=t[0]*c+n[0]*u+r[0]*d+o[0]*A,e[1]=t[1]*c+n[1]*u+r[1]*d+o[1]*A,e[2]=t[2]*c+n[2]*u+r[2]*d+o[2]*A,e},e.quadraticBezier=function(e,t,n,r,o){return e[0]=Yp(t[0],n[0],r[0],o),e[1]=Yp(t[1],n[1],r[1],o),e[2]=Yp(t[2],n[2],r[2],o),e},e.spline=function(e,t,n,r,o,i,a){return e[0]=qp(t[0],n[0],r[0],o[0],i,a),e[1]=qp(t[1],n[1],r[1],o[1],i,a),e[2]=qp(t[2],n[2],r[2],o[2],i,a),e},e.random=function(e,t){const n=2*Math.random()*Math.PI,r=2*Math.random()-1,o=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*o,e[1]=Math.sin(n)*o,e[2]=r*t,e},e.transformMat4=function(e,t,n){const r=t[0],o=t[1],i=t[2],a=1/(n[3]*r+n[7]*o+n[11]*i+n[15]||1);return e[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])*a,e[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])*a,e[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])*a,e},e.transformDirection=function(e,t,n){const r=t[0],o=t[1],i=t[2];return e[0]=n[0]*r+n[4]*o+n[8]*i,e[1]=n[1]*r+n[5]*o+n[9]*i,e[2]=n[2]*r+n[6]*o+n[10]*i,u(e,e)},e.transformMat4Offset=function(e,t,n,r,o,i){const a=t[0+o],s=t[1+o],l=t[2+o],c=1/(n[3+i]*a+n[7+i]*s+n[11+i]*l+n[15+i]||1);return e[0+r]=(n[0+i]*a+n[4+i]*s+n[8+i]*l+n[12+i])*c,e[1+r]=(n[1+i]*a+n[5+i]*s+n[9+i]*l+n[13+i])*c,e[2+r]=(n[2+i]*a+n[6+i]*s+n[10+i]*l+n[14+i])*c,e},e.transformDirectionOffset=function(e,t,n,r,o,i){const a=t[0+o],s=t[1+o],l=t[2+o];e[0+r]=n[0+i]*a+n[4+i]*s+n[8+i]*l,e[1+r]=n[1+i]*a+n[5+i]*s+n[9+i]*l,e[2+r]=n[2+i]*a+n[6+i]*s+n[10+i]*l;const c=Math.hypot(e[0+r],e[1+r],e[2+r]);return c>0&&(e[0+r]/=c,e[1+r]/=c,e[2+r]/=c),e},e.transformMat3=function(e,t,n){const r=t[0],o=t[1],i=t[2];return e[0]=r*n[0]+o*n[3]+i*n[6],e[1]=r*n[1]+o*n[4]+i*n[7],e[2]=r*n[2]+o*n[5]+i*n[8],e},e.transformQuat=function(e,t,n){const r=t[0],o=t[1],i=t[2],a=n[0],s=n[1],l=n[2],c=n[3],u=c*r+s*i-l*o,d=c*o+l*r-a*i,A=c*i+a*o-s*r,f=-a*r-s*o-l*i;return e[0]=u*c+f*-a+d*-l-A*-s,e[1]=d*c+f*-s+A*-a-u*-l,e[2]=A*c+f*-l+u*-s-d*-a,e},e.angle=p;const h=t(),g=t(),m=t(),y=t(),v=t(),b=t(),C=t();e.dihedralAngle=function(e,t,n,r){i(h,e,t),i(g,n,t),i(m,t,n),i(y,r,n),A(v,h,g),A(b,m,y);const o=p(v,b);return A(C,v,b),d(g,C)>0?o:-o},e.directionFromSpherical=function(t,n,r,o){return e.set(t,o*Math.cos(r)*Math.sin(n),o*Math.sin(r)*Math.sin(n),o*Math.cos(n))},e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.equals=function(e,t){const n=e[0],r=e[1],o=e[2],i=t[0],a=t[1],s=t[2];return Math.abs(n-i)<=zh*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=zh*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-s)<=zh*Math.max(1,Math.abs(o),Math.abs(s))};const I=t();e.makeRotation=function(t,n,r){const o=p(n,r);if(Math.abs(o)<1e-4)return Yh.setIdentity(t);if(Math.abs(o-Math.PI)<zh)return Yh.fromScaling(t,e.negUnit);const i=A(I,n,r);return Yh.fromRotation(t,o,i)},e.isZero=function(e){return 0===e[0]&&0===e[1]&&0===e[2]},e.projectPointOnVector=function(e,t,n,r){return i(e,t,r),o(e,a(e,n,d(n,e)/l(n)),r)};const E=t();function x(e,t,n){return a(e,n,d(n,t)/l(n))}e.projectPointOnPlane=function(e,t,n,r){return u(E,n),i(e,t,r),i(e,t,a(E,E,d(e,E)))},e.projectOnVector=x;const B=t();e.projectOnPlane=function(e,t,n){return x(B,t,n),i(e,t,B)},e.orthogonalize=function(e,t,n){return u(e,A(e,A(e,t,n),t))},e.matchDirection=function(e,t,n){return d(t,n)>0?r(e,t):c(e,r(e,t)),e};const w=t(),_=t();e.triangleNormal=function(e,t,n,r){return i(w,n,t),i(_,r,t),u(e,A(e,w,_))},e.toString=function(e,t){return`[${e[0].toPrecision(t)} ${e[1].toPrecision(t)} ${e[2].toPrecision(t)}]`},e.origin=n(0,0,0),e.unit=n(1,1,1),e.negUnit=n(-1,-1,-1),e.unitX=n(1,0,0),e.unitY=n(0,1,0),e.unitZ=n(0,0,1),e.negUnitX=n(-1,0,0),e.negUnitY=n(0,-1,0),e.negUnitZ=n(0,0,-1)}(qh||(qh={})),function(e){function t(){const e=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return e[0]=0,e}function n(){const e=t();return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function r(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function o(e){for(let t=0;t<16;t++)e[t]=0;return e}e.zero=t,e.identity=n,e.setIdentity=r,e.setZero=o,e.ofRows=function(e){const n=t();for(let t=0;t<4;t++){const r=e[t];for(let e=0;e<4;e++)n[4*e+t]=r[e]}return n};const i=n();function a(e,t,n){for(let r=0;r<16;r++)if(Math.abs(e[r]-t[r])>n)return!1;return!0}function s(e,t,n,r){e[4*n+t]=r}function l(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function c(e,t){const n=t[0]+t[5]+t[10];let r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function u(e,t){const n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],A=t[10],f=t[11],p=t[12],h=t[13],g=t[14],m=t[15],y=n*s-r*a,v=n*l-o*a,b=n*c-i*a,C=r*l-o*s,I=r*c-i*s,E=o*c-i*l,x=u*h-d*p,B=u*g-A*p,w=u*m-f*p,_=d*g-A*h,S=d*m-f*h,D=A*m-f*g;let T=y*D-v*S+b*_+C*w-I*B+E*x;return!!T&&(T=1/T,e[0]=(s*D-l*S+c*_)*T,e[1]=(o*S-r*D-i*_)*T,e[2]=(h*E-g*I+m*C)*T,e[3]=(A*I-d*E-f*C)*T,e[4]=(l*w-a*D-c*B)*T,e[5]=(n*D-o*w+i*B)*T,e[6]=(g*b-p*E-m*v)*T,e[7]=(u*E-A*b+f*v)*T,e[8]=(a*S-s*w+c*x)*T,e[9]=(r*w-n*S-i*x)*T,e[10]=(p*I-h*b+m*y)*T,e[11]=(d*b-u*I-f*y)*T,e[12]=(s*B-a*_-l*x)*T,e[13]=(n*_-r*B+o*x)*T,e[14]=(h*v-p*C-g*y)*T,e[15]=(u*C-d*v+A*y)*T,!0)}function d(e,t,n){const r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],A=t[9],f=t[10],p=t[11],h=t[12],g=t[13],m=t[14],y=t[15];let v=n[0],b=n[1],C=n[2],I=n[3];return e[0]=v*r+b*s+C*d+I*h,e[1]=v*o+b*l+C*A+I*g,e[2]=v*i+b*c+C*f+I*m,e[3]=v*a+b*u+C*p+I*y,v=n[4],b=n[5],C=n[6],I=n[7],e[4]=v*r+b*s+C*d+I*h,e[5]=v*o+b*l+C*A+I*g,e[6]=v*i+b*c+C*f+I*m,e[7]=v*a+b*u+C*p+I*y,v=n[8],b=n[9],C=n[10],I=n[11],e[8]=v*r+b*s+C*d+I*h,e[9]=v*o+b*l+C*A+I*g,e[10]=v*i+b*c+C*f+I*m,e[11]=v*a+b*u+C*p+I*y,v=n[12],b=n[13],C=n[14],I=n[15],e[12]=v*r+b*s+C*d+I*h,e[13]=v*o+b*l+C*A+I*g,e[14]=v*i+b*c+C*f+I*m,e[15]=v*a+b*u+C*p+I*y,e}function A(e,t,n){let o=n[0],i=n[1],a=n[2],s=Math.sqrt(o*o+i*i+a*a);if(Math.abs(s)<zh)return r(e);s=1/s,o*=s,i*=s,a*=s;const l=Math.sin(t),c=Math.cos(t),u=1-c;return e[0]=o*o*u+c,e[1]=i*o*u+a*l,e[2]=a*o*u-i*l,e[3]=0,e[4]=o*i*u-a*l,e[5]=i*i*u+c,e[6]=a*i*u+o*l,e[7]=0,e[8]=o*a*u+i*l,e[9]=i*a*u-o*l,e[10]=a*a*u+c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}e.isIdentity=function(e,t){return a(e,i,"undefined"===typeof t?zh:t)},e.hasNaN=function(e){for(let t=0;t<16;t++)if(isNaN(e[t]))return!0;return!1},e.areEqual=a,e.setValue=s,e.getValue=function(e,t,n){return e[4*n+t]},e.toArray=function(e,t,n){return t[n+0]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=e[3],t[n+4]=e[4],t[n+5]=e[5],t[n+6]=e[6],t[n+7]=e[7],t[n+8]=e[8],t[n+9]=e[9],t[n+10]=e[10],t[n+11]=e[11],t[n+12]=e[12],t[n+13]=e[13],t[n+14]=e[14],t[n+15]=e[15],t},e.fromArray=function(e,t,n){return e[0]=t[n+0],e[1]=t[n+1],e[2]=t[n+2],e[3]=t[n+3],e[4]=t[n+4],e[5]=t[n+5],e[6]=t[n+6],e[7]=t[n+7],e[8]=t[n+8],e[9]=t[n+9],e[10]=t[n+10],e[11]=t[n+11],e[12]=t[n+12],e[13]=t[n+13],e[14]=t[n+14],e[15]=t[n+15],e},e.fromBasis=function(e,t,n,r){return o(e),s(e,0,0,t[0]),s(e,1,0,t[1]),s(e,2,0,t[2]),s(e,0,1,n[0]),s(e,1,1,n[1]),s(e,2,1,n[2]),s(e,0,2,r[0]),s(e,1,2,r[1]),s(e,2,2,r[2]),s(e,3,3,1),e},e.copy=l,e.clone=function(e){return l(t(),e)},e.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},e.getScaling=function(e,t){const n=t[0],r=t[1],o=t[2],i=t[4],a=t[5],s=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.sqrt(n*n+r*r+o*o),e[1]=Math.sqrt(i*i+a*a+s*s),e[2]=Math.sqrt(l*l+c*c+u*u),e},e.getRotation=c,e.extractRotation=function(e,t){const n=1/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),r=1/Math.sqrt(t[4]*t[4]+t[5]*t[5]+t[6]*t[6]),o=1/Math.sqrt(t[8]*t[8]+t[9]*t[9]+t[10]*t[10]);return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=0,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=0,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.transpose=function(e,t){if(e===t){const n=t[1],r=t[2],o=t[3],i=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=o,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},e.tryInvert=u,e.invert=function(e,t){return u(e,t)||console.warn("non-invertible matrix.",t),e},e.mul=d,e.mulOffset=function(e,t,n,r,o,i){const a=t[0+o],s=t[1+o],l=t[2+o],c=t[3+o],u=t[4+o],d=t[5+o],A=t[6+o],f=t[7+o],p=t[8+o],h=t[9+o],g=t[10+o],m=t[11+o],y=t[12+o],v=t[13+o],b=t[14+o],C=t[15+o];let I=n[0+i],E=n[1+i],x=n[2+i],B=n[3+i];return e[0+r]=I*a+E*u+x*p+B*y,e[1+r]=I*s+E*d+x*h+B*v,e[2+r]=I*l+E*A+x*g+B*b,e[3+r]=I*c+E*f+x*m+B*C,I=n[4+i],E=n[5+i],x=n[6+i],B=n[7+i],e[4+r]=I*a+E*u+x*p+B*y,e[5+r]=I*s+E*d+x*h+B*v,e[6+r]=I*l+E*A+x*g+B*b,e[7+r]=I*c+E*f+x*m+B*C,I=n[8+i],E=n[9+i],x=n[10+i],B=n[11+i],e[8+r]=I*a+E*u+x*p+B*y,e[9+r]=I*s+E*d+x*h+B*v,e[10+r]=I*l+E*A+x*g+B*b,e[11+r]=I*c+E*f+x*m+B*C,I=n[12+i],E=n[13+i],x=n[14+i],B=n[15+i],e[12+r]=I*a+E*u+x*p+B*y,e[13+r]=I*s+E*d+x*h+B*v,e[14+r]=I*l+E*A+x*g+B*b,e[15+r]=I*c+E*f+x*m+B*C,e},e.mul3=function(e,t,n,r){return d(e,d(e,t,n),r)},e.translate=function(e,t,n){const r=n[0],o=n[1],i=n[2];let a,s,l,c,u,d,A,f,p,h,g,m;return t===e?(e[12]=t[0]*r+t[4]*o+t[8]*i+t[12],e[13]=t[1]*r+t[5]*o+t[9]*i+t[13],e[14]=t[2]*r+t[6]*o+t[10]*i+t[14],e[15]=t[3]*r+t[7]*o+t[11]*i+t[15]):(a=t[0],s=t[1],l=t[2],c=t[3],u=t[4],d=t[5],A=t[6],f=t[7],p=t[8],h=t[9],g=t[10],m=t[11],e[0]=a,e[1]=s,e[2]=l,e[3]=c,e[4]=u,e[5]=d,e[6]=A,e[7]=f,e[8]=p,e[9]=h,e[10]=g,e[11]=m,e[12]=a*r+u*o+p*i+t[12],e[13]=s*r+d*o+h*i+t[13],e[14]=l*r+A*o+g*i+t[14],e[15]=c*r+f*o+m*i+t[15]),e},e.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},e.setTranslation=function(e,t){return e[12]=t[0],e[13]=t[1],e[14]=t[2],e},e.setAxes=function(e,t,n,r){return e[0]=n[0],e[4]=n[1],e[8]=n[2],e[1]=r[0],e[5]=r[1],e[9]=r[2],e[2]=t[0],e[6]=t[1],e[10]=t[2],e},e.rotate=function(e,t,r,o){let i=o[0],a=o[1],s=o[2],l=Math.sqrt(i*i+a*a+s*s);if(Math.abs(l)<zh)return n();l=1/l,i*=l,a*=l,s*=l;const c=Math.sin(r),u=Math.cos(r),d=1-u,A=t[0],f=t[1],p=t[2],h=t[3],g=t[4],m=t[5],y=t[6],v=t[7],b=t[8],C=t[9],I=t[10],E=t[11],x=i*i*d+u,B=a*i*d+s*c,w=s*i*d-a*c,_=i*a*d-s*c,S=a*a*d+u,D=s*a*d+i*c,T=i*s*d+a*c,k=a*s*d-i*c,Q=s*s*d+u;return e[0]=A*x+g*B+b*w,e[1]=f*x+m*B+C*w,e[2]=p*x+y*B+I*w,e[3]=h*x+v*B+E*w,e[4]=A*_+g*S+b*D,e[5]=f*_+m*S+C*D,e[6]=p*_+y*S+I*D,e[7]=h*_+v*S+E*D,e[8]=A*T+g*k+b*Q,e[9]=f*T+m*k+C*Q,e[10]=p*T+y*k+I*Q,e[11]=h*T+v*k+E*Q,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e},e.fromRotation=A,e.scale=function(e,t,n){const r=n[0],o=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.scaleUniformly=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromUniformScaling=function(e,t){return e[0]=t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromMat3=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[4]=t[3],e[5]=t[4],e[6]=t[5],e[8]=t[6],e[9]=t[7],e[10]=t[8],e},e.compose=function(e,t,n,r){const[o,i,a,s]=n,l=o+o,c=i+i,u=a+a,d=o*l,A=o*c,f=o*u,p=i*c,h=i*u,g=a*u,m=s*l,y=s*c,v=s*u,[b,C,I]=r;return e[0]=(1-(p+g))*b,e[1]=(A+v)*b,e[2]=(f-y)*b,e[3]=0,e[4]=(A-v)*C,e[5]=(1-(d+g))*C,e[6]=(h+m)*C,e[7]=0,e[8]=(f+y)*I,e[9]=(h-m)*I,e[10]=(1-(d+p))*I,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e};const f=[0,0,0],p=t();function h(e){const t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],A=e[11],f=e[12],p=e[13],h=e[14],g=e[15];return(t*a-n*i)*(d*g-A*h)-(t*s-r*i)*(u*g-A*p)+(t*l-o*i)*(u*h-d*p)+(n*s-r*a)*(c*g-A*f)-(n*l-o*a)*(c*h-d*f)+(r*l-o*s)*(c*p-u*f)}e.decompose=function(e,t,n,r){let o=qh.magnitude(qh.set(f,e[0],e[1],e[2]));const i=qh.magnitude(qh.set(f,e[4],e[5],e[6])),a=qh.magnitude(qh.set(f,e[8],e[9],e[10]));h(e)<0&&(o=-o),t[0]=e[12],t[1]=e[13],t[2]=e[14],l(p,e);const s=1/o,u=1/i,d=1/a;return p[0]*=s,p[1]*=s,p[2]*=s,p[4]*=u,p[5]*=u,p[6]*=u,p[8]*=d,p[9]*=d,p[10]*=d,c(n,p),r[0]=o,r[1]=i,r[2]=a,e},e.makeTable=function(e){let t="";for(let n=0;n<4;n++){for(let r=0;r<4;r++)t+=e[4*r+n].toString(),r<3&&(t+=" ");n<3&&(t+="\n")}return t},e.determinant=h,e.isRotationAndTranslation=function(e,t){return function(e,t){const n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],A=e[10],f=e[11],p=e[15];if(!Hh(p,1,t)||!Hh(i,0,t)||!Hh(c,0,t)||!Hh(f,0,t))return!1;if(!Hh(Math.abs(n*(s*A-l*d)-r*(a*A-l*u)+o*(a*d-s*u)),1,t))return!1;return!0}(e,"undefined"!==typeof t?t:zh)},e.isTranslationAndUniformScaling=function(e,t){return function(e,t){const n=e[0];return Hh(e[1],0,t)&&Hh(e[2],0,t)&&Hh(e[3],0,t)&&Hh(e[4],0,t)&&Hh(e[5],n,t)&&Hh(e[6],0,t)&&Hh(e[7],0,t)&&Hh(e[8],0,t)&&Hh(e[9],0,t)&&Hh(e[10],n,t)&&Hh(e[11],0,t)&&Hh(e[15],1,t)}(e,"undefined"!==typeof t?t:zh)},e.fromQuat=function(e,t){const n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,s=r+r,l=o+o,c=n*a,u=r*a,d=r*s,A=o*a,f=o*s,p=o*l,h=i*a,g=i*s,m=i*l;return e[0]=1-d-p,e[1]=u+m,e[2]=A-g,e[3]=0,e[4]=u-m,e[5]=1-c-p,e[6]=f+h,e[7]=0,e[8]=A+g,e[9]=f-h,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromEuler=function(e,t,n){const r=t[0],o=t[1],i=t[2],a=Math.cos(r),s=Math.sin(r),l=Math.cos(o),c=Math.sin(o),u=Math.cos(i),d=Math.sin(i);if("XYZ"===n){const t=a*u,n=a*d,r=s*u,o=s*d;e[0]=l*u,e[4]=-l*d,e[8]=c,e[1]=n+r*c,e[5]=t-o*c,e[9]=-s*l,e[2]=o-t*c,e[6]=r+n*c,e[10]=a*l}else if("YXZ"===n){const t=l*u,n=l*d,r=c*u,o=c*d;e[0]=t+o*s,e[4]=r*s-n,e[8]=a*c,e[1]=a*d,e[5]=a*u,e[9]=-s,e[2]=n*s-r,e[6]=o+t*s,e[10]=a*l}else if("ZXY"===n){const t=l*u,n=l*d,r=c*u,o=c*d;e[0]=t-o*s,e[4]=-a*d,e[8]=r+n*s,e[1]=n+r*s,e[5]=a*u,e[9]=o-t*s,e[2]=-a*c,e[6]=s,e[10]=a*l}else if("ZYX"===n){const t=a*u,n=a*d,r=s*u,o=s*d;e[0]=l*u,e[4]=r*c-n,e[8]=t*c+o,e[1]=l*d,e[5]=o*c+t,e[9]=n*c-r,e[2]=-c,e[6]=s*l,e[10]=a*l}else if("YZX"===n){const t=a*l,n=a*c,r=s*l,o=s*c;e[0]=l*u,e[4]=o-t*d,e[8]=r*d+n,e[1]=d,e[5]=a*u,e[9]=-s*u,e[2]=-c*u,e[6]=n*d+r,e[10]=t-o*d}else if("XZY"===n){const t=a*l,n=a*c,r=s*l,o=s*c;e[0]=l*u,e[4]=-d,e[8]=c*u,e[1]=t*d+o,e[5]=a*u,e[9]=n*d-r,e[2]=r*d-n,e[6]=s*u,e[10]=o*d+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.perspective=function(e,t,n,r,o,i,a){const s=2*i/(n-t),l=2*i/(r-o),c=(n+t)/(n-t),u=(r+o)/(r-o),d=-(a+i)/(a-i),A=-2*a*i/(a-i);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=c,e[9]=u,e[10]=d,e[11]=-1,e[12]=0,e[13]=0,e[14]=A,e[15]=0,e},e.ortho=function(e,t,n,r,o,i,a){const s=1/(n-t),l=1/(r-o),c=1/(a-i),u=(n+t)*s,d=(r+o)*l,A=(a+i)*c;return e[0]=2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=-2*c,e[11]=0,e[12]=-u,e[13]=-d,e[14]=-A,e[15]=1,e},e.lookAt=function(e,t,n,o){let i,a,s,l,c,u,d,A,f,p;const h=t[0],g=t[1],m=t[2],y=o[0],v=o[1],b=o[2],C=n[0],I=n[1],E=n[2];return Math.abs(h-C)<zh&&Math.abs(g-I)<zh&&Math.abs(m-E)<zh?r(e):(d=h-C,A=g-I,f=m-E,p=1/Math.sqrt(d*d+A*A+f*f),d*=p,A*=p,f*=p,i=v*f-b*A,a=b*d-y*f,s=y*A-v*d,p=Math.sqrt(i*i+a*a+s*s),p?(p=1/p,i*=p,a*=p,s*=p):(i=0,a=0,s=0),l=A*s-f*a,c=f*i-d*s,u=d*a-A*i,p=Math.sqrt(l*l+c*c+u*u),p?(p=1/p,l*=p,c*=p,u*=p):(l=0,c=0,u=0),e[0]=i,e[1]=l,e[2]=d,e[3]=0,e[4]=a,e[5]=c,e[6]=A,e[7]=0,e[8]=s,e[9]=u,e[10]=f,e[11]=0,e[12]=-(i*h+a*g+s*m),e[13]=-(l*h+c*g+u*m),e[14]=-(d*h+A*g+f*m),e[15]=1,e)},e.targetTo=function(e,t,n,r){const o=t[0],i=t[1],a=t[2],s=r[0],l=r[1],c=r[2];let u=o-n[0],d=i-n[1],A=a-n[2],f=u*u+d*d+A*A;f>0&&(f=1/Math.sqrt(f),u*=f,d*=f,A*=f);let p=l*A-c*d,h=c*u-s*A,g=s*d-l*u;return f=p*p+h*h+g*g,f>0&&(f=1/Math.sqrt(f),p*=f,h*=f,g*=f),e[0]=p,e[1]=h,e[2]=g,e[3]=0,e[4]=d*g-A*h,e[5]=A*p-u*g,e[6]=u*h-d*p,e[7]=0,e[8]=u,e[9]=d,e[10]=A,e[11]=0,e[12]=o,e[13]=i,e[14]=a,e[15]=1,e},e.fromPermutation=function(e,t){o(e);for(let n=0;n<4;n++){s(e,n,t[n],1)}return e},e.getMaxScaleOnAxis=function(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))};const g=[1,0,0],m=[0,1,0],y=[0,0,1];e.rotX90=A(t(),Np(90),g),e.rotX180=A(t(),Np(180),g),e.rotY90=A(t(),Np(90),m),e.rotY180=A(t(),Np(180),m),e.rotY270=A(t(),Np(270),m),e.rotZ90=A(t(),Np(90),y),e.rotZ180=A(t(),Np(180),y),e.rotXY90=d(t(),e.rotX90,e.rotY90),e.rotZY90=d(t(),e.rotZ90,e.rotY90),e.rotZYZ90=d(t(),e.rotZY90,e.rotZ90),e.rotZ90X180=d(t(),e.rotZ90,e.rotX180),e.rotY90Z180=d(t(),e.rotY90,e.rotZ180),e.id=n()}(Yh||(Yh={})),function(e){function t(){const e=[.1,0,0,0,0,0,0,0,0];return e[0]=0,e}function n(){const e=t();return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}e.zero=t,e.identity=n,e.setIdentity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.toArray=function(e,t,n){return t[n+0]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=e[3],t[n+4]=e[4],t[n+5]=e[5],t[n+6]=e[6],t[n+7]=e[7],t[n+8]=e[8],t},e.fromArray=function(e,t,n){return e[0]=t[n+0],e[1]=t[n+1],e[2]=t[n+2],e[3]=t[n+3],e[4]=t[n+4],e[5]=t[n+5],e[6]=t[n+6],e[7]=t[n+7],e[8]=t[n+8],e},e.fromColumns=function(e,t,n,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=n[0],e[4]=n[1],e[5]=n[2],e[6]=r[0],e[7]=r[1],e[8]=r[2],e},e.fromMat4=r;const o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];e.fromEuler=function(e,t,n){return Yh.fromEuler(o,t,n),r(e,o)},e.create=function(e,n,r,o,i,a,s,l,c){const u=t();return u[0]=e,u[1]=n,u[2]=r,u[3]=o,u[4]=i,u[5]=a,u[6]=s,u[7]=l,u[8]=c,u};const i=n();function a(e,t,n){for(let r=0;r<9;r++)if(Math.abs(e[r]-t[r])>n)return!1;return!0}function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function l(e,t){if(e===t){const n=t[1],r=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function c(e,t){const n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=u*a-s*c,A=-u*i+s*l,f=c*i-a*l;let p=n*d+r*A+o*f;return p?(p=1/p,e[0]=d*p,e[1]=(-u*r+o*c)*p,e[2]=(s*r-o*a)*p,e[3]=A*p,e[4]=(u*n-o*l)*p,e[5]=(-s*n+o*i)*p,e[6]=f*p,e[7]=(-c*n+r*l)*p,e[8]=(a*n-r*i)*p,e):(console.warn("non-invertible matrix.",t),e)}function u(e){const t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*(c*i-a*l)+n*(-c*o+a*s)+r*(l*o-i*s)}function d(e){return e[0]+e[4]+e[8]}function A(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function f(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}e.isIdentity=function(e,t){return a(e,i,"undefined"===typeof t?zh:t)},e.hasNaN=function(e){for(let t=0;t<9;t++)if(isNaN(e[t]))return!0;return!1},e.clone=function(e){return s(t(),e)},e.areEqual=a,e.setValue=function(e,t,n,r){e[3*n+t]=r},e.getValue=function(e,t,n){return e[3*n+t]},e.copy=s,e.transpose=l,e.invert=c,e.symmtricFromUpper=function(e,t){return e===t?(e[3]=t[1],e[6]=t[2],e[7]=t[5]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[1],e[4]=t[4],e[5]=t[5],e[6]=t[2],e[7]=t[5],e[8]=t[8]),e},e.symmtricFromLower=function(e,t){return e===t?(e[1]=t[3],e[2]=t[6],e[5]=t[7]):(e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[3],e[4]=t[4],e[5]=t[7],e[6]=t[6],e[7]=t[7],e[8]=t[8]),e},e.determinant=u,e.trace=d,e.sub=A,e.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},e.mul=function(e,t,n){const r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],A=n[0],f=n[1],p=n[2],h=n[3],g=n[4],m=n[5],y=n[6],v=n[7],b=n[8];return e[0]=A*r+f*a+p*c,e[1]=A*o+f*s+p*u,e[2]=A*i+f*l+p*d,e[3]=h*r+g*a+m*c,e[4]=h*o+g*s+m*u,e[5]=h*i+g*l+m*d,e[6]=y*r+v*a+b*c,e[7]=y*o+v*s+b*u,e[8]=y*i+v*l+b*d,e},e.subScalar=function(e,t,n){return e[0]=t[0]-n,e[1]=t[1]-n,e[2]=t[2]-n,e[3]=t[3]-n,e[4]=t[4]-n,e[5]=t[5]-n,e[6]=t[6]-n,e[7]=t[7]-n,e[8]=t[8]-n,e},e.addScalar=function(e,t,n){return e[0]=t[0]+n,e[1]=t[1]+n,e[2]=t[2]+n,e[3]=t[3]+n,e[4]=t[4]+n,e[5]=t[5]+n,e[6]=t[6]+n,e[7]=t[7]+n,e[8]=t[8]+n,e},e.mulScalar=f;const p=Math.PI/3,h=t();e.symmetricEigenvalues=function(t,n){const r=n[1]*n[1]+n[2]*n[2]+n[5]*n[5];if(0===r)t[0]=n[0],t[1]=n[4],t[2]=n[8];else{const o=d(n)/3,i=n[0]-o,a=n[4]-o,s=n[8]-o,l=i*i+a*a+s*s+2*r,c=Math.sqrt(l/6);f(h,e.Identity,o),A(h,n,h),f(h,h,1/c);const g=u(h)/2,m=g<=-1?p:g>=1?0:Math.acos(g)/3;t[0]=o+2*c*Math.cos(m),t[2]=o+2*c*Math.cos(m+2*p),t[1]=3*o-t[0]-t[2]}return t};const g=[.1,0,0],m=[.1,0,0],y=[.1,0,0],v=[.1,0,0],b=[.1,0,0],C=[.1,0,0];e.eigenvector=function(e,t,n){qh.set(g,t[0]-n,t[1],t[2]),qh.set(m,t[1],t[4]-n,t[5]),qh.set(y,t[2],t[5],t[8]-n),qh.cross(v,g,m),qh.cross(b,g,y),qh.cross(C,m,y);const r=qh.dot(v,v),o=qh.dot(b,b),i=qh.dot(C,C);let a=r,s=0;return o>a&&(a=o,s=1),i>a&&(s=2),0===s?qh.scale(e,v,1/Math.sqrt(r)):1===s?qh.scale(e,b,1/Math.sqrt(o)):qh.scale(e,C,1/Math.sqrt(i)),e},e.directionTransform=function(e,t){return r(e,t),c(e,e),l(e,e),e},e.Identity=n(),e.innerProduct=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]+e[4]*t[4]+e[5]*t[5]+e[6]*t[6]+e[7]*t[7]+e[8]*t[8]}}(Xh||(Xh={})),function(e){function t(){const e=[.1,0];return e[0]=0,e}e.zero=t,e.clone=function(e){const n=t();return n[0]=e[0],n[1]=e[1],n},e.create=function(e,n){const r=t();return r[0]=e,r[1]=n,r},e.hasNaN=function(e){return isNaN(e[0])||isNaN(e[1])},e.toArray=function(e,t,n){return t[n+0]=e[0],t[n+1]=e[1],t},e.fromArray=function(e,t,n){return e[0]=t[n+0],e[1]=t[n+1],e},e.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},e.set=function(e,t,n){return e[0]=t,e[1]=n,e},e.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},e.sub=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},e.mul=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},e.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},e.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},e.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},e.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},e.distance=function(e,t){const n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},e.squaredDistance=function(e,t){const n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},e.magnitude=function(e){const t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},e.squaredMagnitude=function(e){const t=e[0],n=e[1];return t*t+n*n},e.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},e.areEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]},e.toString=function(e,t){return`[${e[0].toPrecision(t)} ${e[1].toPrecision(t)}}]`}}(Wh||(Wh={})),function(e){function t(){const e=[.1,0,0,0];return e[0]=0,e}function n(e,t){return e[0]=t.center[0],e[1]=t.center[1],e[2]=t.center[2],e[3]=t.radius,e}e.zero=t,e.clone=function(e){const n=t();return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},e.create=function(e,n,r,o){const i=t();return i[0]=e,i[1]=n,i[2]=r,i[3]=o,i},e.fromSphere=n,e.ofSphere=function(e){return n(t(),e)},e.hasNaN=function(e){return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])||isNaN(e[3])},e.toArray=function(e,t,n){return t[n+0]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=e[3],t},e.fromArray=function(e,t,n){return e[0]=t[n+0],e[1]=t[n+1],e[2]=t[n+2],e[3]=t[n+3],e},e.toVec3Array=function(e,t,n){t[n+0]=e[0],t[n+1]=e[1],t[n+2]=e[2]},e.fromVec3Array=function(e,t,n){return e[0]=t[n+0],e[1]=t[n+1],e[2]=t[n+2],e[3]=0,e},e.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},e.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},e.distance=function(e,t){const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return Math.sqrt(n*n+r*r+o*o+i*i)},e.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[4]=t[4]*n,e},e.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},e.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},e.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},e.squaredDistance=function(e,t){const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return n*n+r*r+o*o+i*i},e.norm=function(e){const t=e[0],n=e[1],r=e[2],o=e[3];return Math.sqrt(t*t+n*n+r*r+o*o)},e.squaredNorm=function(e){const t=e[0],n=e[1],r=e[2],o=e[3];return t*t+n*n+r*r+o*o},e.transformMat4=function(e,t,n){const r=t[0],o=t[1],i=t[2],a=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,e[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,e[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,e[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,e},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.equals=function(e,t){const n=e[0],r=e[1],o=e[2],i=e[3],a=t[0],s=t[1],l=t[2],c=t[3];return Math.abs(n-a)<=zh*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=zh*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-l)<=zh*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-c)<=zh*Math.max(1,Math.abs(i),Math.abs(c))},e.toString=function(e,t){return`[${e[0].toPrecision(t)} ${e[1].toPrecision(t)} ${e[2].toPrecision(t)}  ${e[3].toPrecision(t)}]`}}(Kh||(Kh={})),function(e){function t(){const e=[.1,0,0,0];return e[0]=0,e}function n(){const e=t();return e[3]=1,e}function r(e,t,n){n*=.5;const r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function o(e,t,n,r){const o=t[0],i=t[1],a=t[2],s=t[3];let l,c,u,d,A,f=n[0],p=n[1],h=n[2],g=n[3];return c=o*f+i*p+a*h+s*g,c<0&&(c=-c,f=-f,p=-p,h=-h,g=-g),1-c>1e-6?(l=Math.acos(c),u=Math.sin(l),d=Math.sin((1-r)*l)/u,A=Math.sin(r*l)/u):(d=1-r,A=r),e[0]=d*o+A*f,e[1]=d*i+A*p,e[2]=d*a+A*h,e[3]=d*s+A*g,e}function i(e,t){const n=t[0]+t[4]+t[8];let r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{let n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);const o=(n+1)%3,i=(n+2)%3;r=Math.sqrt(t[3*n+n]-t[3*o+o]-t[3*i+i]+1),e[n]=.5*r,r=.5/r,e[3]=(t[3*o+i]-t[3*i+o])*r,e[o]=(t[3*o+n]+t[3*n+o])*r,e[i]=(t[3*i+n]+t[3*n+i])*r}return e}e.zero=t,e.identity=n,e.setIdentity=function(e){e[0]=0,e[1]=0,e[2]=0,e[3]=1},e.hasNaN=function(e){return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])||isNaN(e[3])},e.create=function(e,t,r,o){const i=n();return i[0]=e,i[1]=t,i[2]=r,i[3]=o,i},e.setAxisAngle=r,e.getAxisAngle=function(e,t){const n=2*Math.acos(t[3]),r=Math.sin(n/2);return 0!==r?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n},e.multiply=function(e,t,n){const r=t[0],o=t[1],i=t[2],a=t[3],s=n[0],l=n[1],c=n[2],u=n[3];return e[0]=r*u+a*s+o*c-i*l,e[1]=o*u+a*l+i*s-r*c,e[2]=i*u+a*c+r*l-o*s,e[3]=a*u-r*s-o*l-i*c,e},e.rotateX=function(e,t,n){n*=.5;const r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=o*l+i*s,e[2]=i*l-o*s,e[3]=a*l-r*s,e},e.rotateY=function(e,t,n){n*=.5;const r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-i*s,e[1]=o*l+a*s,e[2]=i*l+r*s,e[3]=a*l-o*s,e},e.rotateZ=function(e,t,n){n*=.5;const r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*s,e[1]=o*l-r*s,e[2]=i*l+a*s,e[3]=a*l-i*s,e},e.calculateW=function(e,t){const n=t[0],r=t[1],o=t[2];return e[0]=n,e[1]=r,e[2]=o,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),e},e.slerp=o,e.invert=function(e,t){const n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-o*s,e[3]=i*s,e},e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.fromMat3=i,e.fromEuler=function(e,t,n){const[r,o,i]=t,a=Math.cos(r/2),s=Math.cos(o/2),l=Math.cos(i/2),c=Math.sin(r/2),u=Math.sin(o/2),d=Math.sin(i/2);switch(n){case"XYZ":e[0]=c*s*l+a*u*d,e[1]=a*u*l-c*s*d,e[2]=a*s*d+c*u*l,e[3]=a*s*l-c*u*d;break;case"YXZ":e[0]=c*s*l+a*u*d,e[1]=a*u*l-c*s*d,e[2]=a*s*d-c*u*l,e[3]=a*s*l+c*u*d;break;case"ZXY":e[0]=c*s*l-a*u*d,e[1]=a*u*l+c*s*d,e[2]=a*s*d+c*u*l,e[3]=a*s*l-c*u*d;break;case"ZYX":e[0]=c*s*l-a*u*d,e[1]=a*u*l+c*s*d,e[2]=a*s*d-c*u*l,e[3]=a*s*l+c*u*d;break;case"YZX":e[0]=c*s*l+a*u*d,e[1]=a*u*l+c*s*d,e[2]=a*s*d-c*u*l,e[3]=a*s*l-c*u*d;break;case"XZY":e[0]=c*s*l-a*u*d,e[1]=a*u*l-c*s*d,e[2]=a*s*d+c*u*l,e[3]=a*s*l+c*u*d;break;default:Zh()}return e};const a=[0,0,0];function s(e,t){const n=t[0],r=t[1],o=t[2],i=t[3];let a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=r*a,e[2]=o*a,e[3]=i*a),e}e.fromUnitVec3=function(e,t,n){let r=qh.dot(t,n)+1;return r<zh?(r=0,Math.abs(t[0])>Math.abs(t[2])?qh.set(a,-t[1],t[0],0):qh.set(a,0,-t[2],t[1])):qh.cross(a,t,n),e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=r,s(e,e),e},e.clone=function(e){const n=t();return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},e.toArray=function(e,t,n){return t[n+0]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=e[3],t},e.fromArray=function(e,t,n){return e[0]=t[n+0],e[1]=t[n+1],e[2]=t[n+2],e[3]=t[n+3],e},e.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.equals=function(e,t){const n=e[0],r=e[1],o=e[2],i=e[3],a=t[0],s=t[1],l=t[2],c=t[3];return Math.abs(n-a)<=zh*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=zh*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-l)<=zh*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-c)<=zh*Math.max(1,Math.abs(i),Math.abs(c))},e.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},e.normalize=s;const l=[0,0,0],c=[1,0,0],u=[0,1,0];e.rotationTo=function(e,t,n){const o=qh.dot(t,n);return o<-.999999?(qh.cross(l,c,t),qh.magnitude(l)<1e-6&&qh.cross(l,u,t),qh.normalize(l,l),r(e,l,Math.PI),e):o>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(qh.cross(l,t,n),e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=1+o,s(e,e))};const d=t(),A=t();e.sqlerp=function(e,t,n,r,i,a){return o(d,t,i,a),o(A,n,r,a),o(e,d,A,2*a*(1-a)),e};const f=[0,0,0,0,0,0,0,0,0];e.setAxes=function(e,t,n,r){return f[0]=n[0],f[3]=n[1],f[6]=n[2],f[1]=r[0],f[4]=r[1],f[7]=r[2],f[2]=-t[0],f[5]=-t[1],f[8]=-t[2],s(e,i(e,f))},e.toString=function(e,t){return`[${e[0].toPrecision(t)} ${e[1].toPrecision(t)} ${e[2].toPrecision(t)}  ${e[3].toPrecision(t)}]`},e.Identity=n()}(eg||(eg={})),function(e){function t(e,t,o){const i=function(e,t,n){const r=[];for(let i=0;i<t.length;i++)r[i]=t[t.length-i-1];const o=[1];for(let i=1;i<e.length;i++)o[i]=e[r[i-1]];return{dimensions:e,axisOrderFastToSlow:r,axisOrderSlowToFast:t,accessDimensions:o,defaultCtor:n||Float64Array}}(e,t,o),{get:a,set:s,add:l,dataOffset:c,getCoords:u}=n(i);return{rank:e.length,dimensions:e,axisOrderSlowToFast:t,create:r(i),get:a,set:s,add:l,dataOffset:c,getCoords:u}}function n(e){const{dimensions:t,axisOrderFastToSlow:n}=e;switch(t.length){case 1:return{get:(e,t)=>e[t],set:(e,t,n)=>e[t]=n,add:(e,t,n)=>e[t]+=n,dataOffset:e=>e,getCoords:(e,t)=>(t[0]=e,t)};case 2:if(0===n[0]&&1===n[1]){const e=t[0];return{get:(t,n,r)=>t[r*e+n],set:(t,n,r,o)=>t[r*e+n]=o,add:(t,n,r,o)=>t[r*e+n]+=o,dataOffset:(t,n)=>n*e+t,getCoords:(t,n)=>(n[0]=t%e,n[1]=Math.floor(t/e),n)}}if(1===n[0]&&0===n[1]){const e=t[1];return{get:(t,n,r)=>t[n*e+r],set:(t,n,r,o)=>t[n*e+r]=o,add:(t,n,r,o)=>t[n*e+r]+=o,dataOffset:(t,n)=>t*e+n,getCoords:(t,n)=>(n[0]=Math.floor(t/e),n[1]=t%e,n)}}throw new Error("bad axis order");case 3:if(0===n[0]&&1===n[1]&&2===n[2]){const e=t[0],n=t[1],r=e*n;return{get:(t,n,o,i)=>t[n+o*e+i*r],set:(t,n,o,i,a)=>t[n+o*e+i*r]=a,add:(t,n,o,i,a)=>t[n+o*e+i*r]+=a,dataOffset:(t,n,o)=>t+n*e+o*r,getCoords:(t,r)=>{const o=Math.floor(t/e);return r[0]=t%e,r[1]=o%n,r[2]=Math.floor(o/n),r}}}if(0===n[0]&&2===n[1]&&1===n[2]){const e=t[0],n=t[2],r=e*n;return{get:(t,n,o,i)=>t[n+i*e+o*r],set:(t,n,o,i,a)=>t[n+i*e+o*r]=a,add:(t,n,o,i,a)=>t[n+i*e+o*r]+=a,dataOffset:(t,n,o)=>t+o*e+n*r,getCoords:(t,r)=>{const o=Math.floor(t/e);return r[0]=t%e,r[1]=Math.floor(o/n),r[2]=o%n,r}}}if(1===n[0]&&0===n[1]&&2===n[2]){const e=t[1],n=t[0],r=e*n;return{get:(t,n,o,i)=>t[o+n*e+i*r],set:(t,n,o,i,a)=>t[o+n*e+i*r]=a,add:(t,n,o,i,a)=>t[o+n*e+i*r]+=a,dataOffset:(t,n,o)=>n+t*e+o*r,getCoords:(t,r)=>{const o=Math.floor(t/e);return r[0]=o%n,r[1]=t%e,r[2]=Math.floor(o/n),r}}}if(1===n[0]&&2===n[1]&&0===n[2]){const e=t[1],n=t[2],r=e*n;return{get:(t,n,o,i)=>t[o+i*e+n*r],set:(t,n,o,i,a)=>t[o+i*e+n*r]=a,add:(t,n,o,i,a)=>t[o+i*e+n*r]+=a,dataOffset:(t,n,o)=>n+o*e+t*r,getCoords:(t,r)=>{const o=Math.floor(t/e);return r[0]=Math.floor(o/n),r[1]=t%e,r[2]=o%n,r}}}if(2===n[0]&&0===n[1]&&1===n[2]){const e=t[2],n=t[0],r=e*n;return{get:(t,n,o,i)=>t[i+n*e+o*r],set:(t,n,o,i,a)=>t[i+n*e+o*r]=a,add:(t,n,o,i,a)=>t[i+n*e+o*r]+=a,dataOffset:(t,n,o)=>o+t*e+n*r,getCoords:(t,r)=>{const o=Math.floor(t/e);return r[0]=o%n,r[1]=Math.floor(o/n),r[2]=t%e,r}}}if(2===n[0]&&1===n[1]&&0===n[2]){const e=t[2],n=t[1],r=e*n;return{get:(t,n,o,i)=>t[i+o*e+n*r],set:(t,n,o,i,a)=>t[i+o*e+n*r]=a,add:(t,n,o,i,a)=>t[i+o*e+n*r]+=a,dataOffset:(t,n,o)=>o+n*e+t*r,getCoords:(t,r)=>{const o=Math.floor(t/e);return r[0]=Math.floor(o/n),r[1]=o%n,r[2]=t%e,r}}}throw new Error("bad axis order");default:return{get:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t[o(e,r)]},set:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t[o(e,r)]=r[r.length-1]},add:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t[o(e,r)]+=r[r.length-1]},dataOffset:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o(e,n)},getCoords:(t,n)=>function(e,t,n){const{dimensions:r,axisOrderFastToSlow:o}=e,i=r.length;let a=t;for(let s=0;s<i;s++){const e=r[o[s]];n[o[s]]=a%e,a=Math.floor(a/e)}return n[o[i+1]]=a,n}(e,t,n)}}}function r(e){const{dimensions:t}=e;let n=1;for(let r=0,o=t.length;r<o;r++)n*=t[r];return t=>new(t||e.defaultCtor)(n)}function o(e,t){const{accessDimensions:n,axisOrderFastToSlow:r}=e,o=n.length-1;let i=n[o]*t[r[o]];for(let a=o-1;a>=0;a--)i=(i+t[r[a]])*n[a];return i}function i(e,t){const n=[];for(let r=0;r<e.length;r++)n[r]=e[t[r]];return n}e.create=function(e,t){return{space:e,data:t}},e.Space=t,e.Data1=function(e){return e},e.Vector=function(e,n){return t([e],[0],n)},e.ColumnMajorMatrix=function(e,n,r){return t([e,n],[1,0],r)},e.RowMajorMatrix=function(e,n,r){return t([e,n],[0,1],r)},e.toMat4=function(e,t,n){if(2!==t.rank)throw new Error("Invalid tensor rank");const r=Math.min(4,t.dimensions[0]),o=Math.min(4,t.dimensions[1]);for(let i=0;i<r;i++)for(let r=0;r<o;r++)Yh.setValue(e,i,r,t.get(n,i,r));return e},e.toMat3=function(e,t,n){if(2!==t.rank)throw new Error("Invalid tensor rank");const r=Math.min(3,t.dimensions[0]),o=Math.min(3,t.dimensions[1]);for(let i=0;i<r;i++)for(let r=0;r<o;r++)Xh.setValue(e,i,r,t.get(n,i,r));return e},e.toVec3=function(e,t,n){if(1!==t.rank)throw new Error("Invalid tensor rank");const r=Math.min(3,t.dimensions[0]);for(let o=0;o<r;o++)e[o]=n[o];return e},e.toVec4=function(e,t,n){if(1!==t.rank)throw new Error("Invalid tensor rank");const r=Math.min(4,t.dimensions[0]);for(let o=0;o<r;o++)e[o]=n[o];return e},e.areEqualExact=function(e,t){const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0},e.invertAxisOrder=function(e){const t=[];for(let n=0;n<e.length;n++)t[n]=e[e.length-n-1];return t},e.convertToCanonicalAxisIndicesFastToSlow=function(e){const t=new Int32Array(e.length);for(let n=0;n<e.length;n++)t[e[n]]=n;return e=>i(e,t)},e.convertToCanonicalAxisIndicesSlowToFast=function(e){const t=new Int32Array(e.length);for(let n=0;n<e.length;n++)t[e[e.length-n-1]]=n;return e=>i(e,t)}}(tg||(tg={}));var ag,sg,lg,cg;function ug(e,t,n,r){return{schema:n,__array:void 0,isDefined:0===r,rowCount:t,value:t=>e,valueKind:e=>r,toArray:n=>{const{array:r}=Lh(t,n);for(let t=0,o=r.length;t<o;t++)r[t]=e;return r},areValuesEqual:(e,t)=>!0}}function dg(e){let{value:t,valueKind:n,areValuesEqual:r,rowCount:o,schema:i}=e;return{schema:i,__array:void 0,isDefined:!0,rowCount:o,value:t,valueKind:n||(e=>0),toArray:e=>{const{array:n,start:r}=Lh(o,e);for(let o=0,i=n.length;o<i;o++)n[o]=t(o+r);return n},areValuesEqual:r||((e,n)=>t(e)===t(n))}}function Ag(e){let{array:t,schema:n,valueKind:r}=e;const o=t.length,i=n.T,a="str"===n.valueType?"lowercase"===n.transform?e=>{const n=t[e];return"string"===typeof n?n.toLowerCase():`${null!==n&&void 0!==n?n:i}`.toLowerCase()}:"uppercase"===n.transform?e=>{const n=t[e];return"string"===typeof n?n.toUpperCase():`${null!==n&&void 0!==n?n:i}`.toUpperCase()}:e=>{const n=t[e];return"string"===typeof n?n:`${null!==n&&void 0!==n?n:i}`}:e=>t[e],s=Gh(t);return{schema:n,__array:t,isDefined:!0,rowCount:o,value:a,valueKind:r||(e=>0),toArray:"str"===n.valueType?"lowercase"===n.transform?e=>{const{start:n,end:r}=Nh(o,e),a=new(e&&"undefined"!==typeof e.array?e.array:t.constructor)(r-n);for(let o=0,s=r-n;o<s;o++){const e=t[n+o];a[o]="string"===typeof e?e.toLowerCase():`${null!==e&&void 0!==e?e:i}`.toLowerCase()}return a}:"uppercase"===n.transform?e=>{const{start:n,end:r}=Nh(o,e),a=new(e&&"undefined"!==typeof e.array?e.array:t.constructor)(r-n);for(let o=0,s=r-n;o<s;o++){const e=t[n+o];a[o]="string"===typeof e?e.toUpperCase():`${null!==e&&void 0!==e?e:i}`.toUpperCase()}return a}:e=>{const{start:n,end:r}=Nh(o,e),a=new(e&&"undefined"!==typeof e.array?e.array:t.constructor)(r-n);for(let o=0,s=r-n;o<s;o++){const e=t[n+o];a[o]="string"===typeof e?e:`${null!==e&&void 0!==e?e:i}`}return a}:s?e=>jh(t,e):e=>{const{start:n,end:r}=Nh(o,e);if(0===n&&r===t.length)return t;const i=new(e&&"undefined"!==typeof e.array?e.array:t.constructor)(r-n);for(let o=0,a=r-n;o<a;o++)i[o]=t[n+o];return i},areValuesEqual:(e,n)=>t[e]===t[n]}}function fg(e,t,n){return 0===e.rowCount||n&&function(e,t){if(e.length!==t)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==n)return!1;return!0}(t,e.rowCount)?e:e.__array&&typeof e.value(0)===typeof e.__array[0]?function(e,t){const n=e.__array,r=new n.constructor(t.length);for(let i=0,a=t.length;i<a;i++)r[i]=n[t[i]];const o=e.valueKind;return Ag({array:r,schema:e.schema,valueKind:e=>o(t[e])})}(e,t):function(e,t){const n=e.value,r=e.valueKind,o=e.areValuesEqual,i=e=>n(t[e]),a=t.length;return{schema:e.schema,__array:void 0,isDefined:e.isDefined,rowCount:a,value:i,valueKind:e=>r(t[e]),toArray:e=>{const{array:r}=Lh(a,e);for(let o=0,i=r.length;o<i;o++)r[o]=n(t[o]);return r},areValuesEqual:(e,n)=>o(t[e],t[n])}}(e,t)}!function(e){let t;function n(e,t){return ug(t.T,e,t,1)}function r(e){return dg(e)}!function(e){function t(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.float;return{"@type":"tensor",T:t.create(),space:t,valueType:"tensor",baseType:n}}e.str={"@type":"str",T:"",valueType:"str"},e.ustr={"@type":"str",T:"",valueType:"str",transform:"uppercase"},e.lstr={"@type":"str",T:"",valueType:"str",transform:"lowercase"},e.int={"@type":"int",T:0,valueType:"int"},e.coord={"@type":"coord",T:0,valueType:"float"},e.float={"@type":"float",T:0,valueType:"float"},e.Str=function(e){var t;return{"@type":"str",T:null!==(t=null===e||void 0===e?void 0:e.defaultValue)&&void 0!==t?t:"",transform:null===e||void 0===e?void 0:e.transform,valueType:"str"}},e.Int=function(){return{"@type":"int",T:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,valueType:"int"}},e.Float=function(){return{"@type":"float",T:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,valueType:"float"}},e.Tensor=t,e.Vector=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.float;return t(tg.Vector(n,"int"===r["@type"]?Int32Array:Float64Array),r)},e.Matrix=function(n,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.float;return t(tg.ColumnMajorMatrix(n,r,"int"===o["@type"]?Int32Array:Float64Array),o)},e.Aliased=function(e){return e},e.List=function(e,t){return{"@type":"list",T:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],separator:e,itemParse:t,valueType:"list"}}}(t=e.Schema||(e.Schema={})),e.is=function(e){return!!e&&!!e.schema&&!!e.value},e.ValueKind={Present:0,NotPresent:1,Unknown:2},e.Undefined=n,e.ofConst=function(e,t,n){return ug(e,t,n,0)},e.ofLambda=r,e.range=function(e,n){return r({value:t=>t+e,rowCount:Math.max(n-e+1,0),schema:t.int})},e.ofArray=function(e){return Ag(e)},e.ofIntArray=function(e){return Ag({array:e,schema:t.int})},e.ofFloatArray=function(e){return Ag({array:e,schema:t.float})},e.ofStringArray=function(e){return Ag({array:e,schema:t.str})},e.ofStringAliasArray=function(e){return Ag({array:e,schema:t.Aliased(t.str)})},e.ofStringListArray=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return Ag({array:e,schema:t.List(n,(e=>e))})},e.ofIntTokens=function(e){const{count:n,data:r,indices:o}=e;return dg({value:e=>rg(r,o[2*e],o[2*e+1])||0,rowCount:n,schema:t.int})},e.ofFloatTokens=function(e){const{count:n,data:r,indices:o}=e;return dg({value:e=>ig(r,o[2*e],o[2*e+1])||0,rowCount:n,schema:t.float})},e.ofStringTokens=function(e){const{count:n,data:r,indices:o}=e;return dg({value:e=>{const t=r.substring(o[2*e],o[2*e+1]);return"."===t||"?"===t?"":t},rowCount:n,schema:t.str})},e.window=function(e,t,n){return function(e,t,n){return e.isDefined?0===t&&n===e.rowCount?e:e.__array&&Gh(e.__array)?function(e,t,n){const r=jh(e.__array,{start:t,end:n}),o=e.valueKind;return Ag({array:r,schema:e.schema,valueKind:e=>o(t+e)})}(e,t,n):function(e,t,n){const r=e.value,o=e.valueKind,i=e.areValuesEqual,a=0===t?r:e=>r(e+t),s=n-t;return{schema:e.schema,__array:void 0,isDefined:e.isDefined,rowCount:s,value:a,valueKind:0===t?o:e=>o(e+t),toArray:e=>{const{array:n}=Lh(s,e);for(let o=0,i=n.length;o<i;o++)n[o]=r(o+t);return n},areValuesEqual:0===t?i:(e,n)=>i(e+t,n+t)}}(e,t,n):ag.Undefined(n-t,e.schema)}(e,t,n)},e.view=function(e,t){return fg(e,t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])},e.createFirstIndexMap=function(e){return function(e){const t=new Map;for(let n=0,r=e.rowCount;n<r;n++){const r=e.value(n);t.has(r)||t.set(e.value(n),n)}return t}(e)},e.createIndexer=function(e){return function(e){const t=new Map;for(let n=0,r=e.rowCount;n<r;n++){const r=e.value(n);t.has(r)||t.set(e.value(n),n)}return e=>t.has(e)?t.get(e):-1}(e)},e.mapToArray=function(e,t,n){return function(e,t,n){const r=new n(e.rowCount);for(let o=0,i=e.rowCount;o<i;o++)r[o]=t(e.value(o));return r}(e,t,n||Array)},e.areEqual=function(e,t){return function(e,t){return e===t||e.rowCount===t.rowCount&&e.isDefined===t.isDefined&&e.schema.valueType===t.schema.valueType&&(e.__array&&t.__array?function(e,t){const n=e.__array,r=t.__array;for(let o=0,i=e.rowCount;o<i;o++)if(n[o]!==r[o])return!1;return!0}(e,t):function(e,t){const n=e.value,r=t.value;for(let o=0,i=e.rowCount;o<i;o++)if(n(o)!==r(o))return!1;return!0}(e,t))}(e,t)},e.indicesOf=function(e,t){return function(e,t){const n=[],r=e.value;for(let o=0,i=e.rowCount;o<i;o++)t(r(o))&&(n[n.length]=o);return n}(e,t)},e.asArrayColumn=function(e,t){return e.__array?e:e.isDefined?Ag({array:e.toArray({array:t}),schema:e.schema,valueKind:e.valueKind}):n(e.rowCount,e.schema)},e.copyToArray=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e.isDefined)return;const r=e.__array;if(r)for(let o=0,i=r.length;o<i;o++)t[n+o]=r[o];else for(let o=0,i=e.rowCount;o<i;o++)t[n+o]=e.value(o)},e.isIdentity=function(e){for(let t=0,n=e.rowCount;t<n;t++)if(t!==e.value(t))return!1;return!0}}(ag||(ag={})),function(e){function t(e,t,n){const r=Object.create(null),o=Object.keys(t);r._rowCount=n.length,r._columns=o,r._schema=t;for(const i of o)r[i]=ag.view(e[i],n);return r}function n(e,t){const n=Object.create(null),{_columns:r}=e;for(let o=0;o<r.length;o++){const i=r[o];n[i]=e[i].value(t)}return n}e.is=function(e){return e&&"number"===typeof e._rowCount&&!!e._columns&&!!e._schema},e.pickColumns=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Object.create(null),o=Object.keys(e);r._rowCount=t._rowCount,r._columns=o,r._schema=e;for(const i of o)if(t[i])r[i]=t[i];else{if(!n[i])throw Error(`Cannot find column '${i}'.`);r[i]=n[i]}return r},e.ofColumns=function(e,t){const n=Object.keys(t);return{_rowCount:t[n[0]].rowCount,_columns:n,_schema:e,...t}},e.ofPartialColumns=function(e,t,n){const r=Object.create(null),o=Object.keys(e);r._rowCount=n,r._columns=o,r._schema=e;for(const i of o)r[i]=i in t?t[i]:ag.Undefined(n,e[i]);return r},e.ofUndefinedColumns=function(e,t){const n=Object.create(null),r=Object.keys(e);n._rowCount=t,n._columns=r,n._schema=e;for(const o of r)n[o]=ag.Undefined(t,e[o]);return n},e.ofRows=function(e,t){const n=Object.create(null),r=t.length,o=Object.keys(e);n._rowCount=r,n._columns=o,n._schema=e;for(const i of o)n[i]=ag.ofLambda({rowCount:r,schema:e[i],value:e=>t[e][i],valueKind:e=>"undefined"===typeof t[e][i]?1:0});return n},e.ofArrays=function(e,t){var n;const r=Object.create(null),o=Object.keys(e);r._rowCount=0,r._columns=o,r._schema=e;for(const i of o)"undefined"!==typeof t[i]?(r[i]=ag.ofArray({array:t[i],schema:e[i]}),r._rowCount=null===(n=t[i])||void 0===n?void 0:n.length):r[i]=ag.Undefined(r._rowCount,e[i]);return r},e.view=t,e.pick=function(e,n,r){const o=[];for(let t=0,i=e._rowCount;t<i;++t)r(t)&&o.push(t);return t(e,n,o)},e.window=function(e,t,n,r){if(0===n&&r===e._rowCount)return e;const o=Object.create(null),i=Object.keys(t);o._rowCount=r-n,o._columns=i,o._schema=t;for(const a of i)o[a]=ag.window(e[a],n,r);return o},e.concat=function(e,t){const n=Object.create(null),r=Object.keys(t);n._rowCount=0;for(const a of e)n._rowCount+=a._rowCount;const o={};for(const a of r)o[a]=new Array(n._rowCount);n._columns=r,n._schema=t;let i=0;for(const a of e){for(const e of r)ag.copyToArray(a[e],o[e],i);i+=a._rowCount}for(const a of r)n[a]=ag.ofArray({array:o[a],schema:t[a]});return n},e.columnToArray=function(e,t,n){e[t]=ag.asArrayColumn(e[t],n)},e.sort=function(e,t){const n=new Int32Array(e._rowCount);for(let i=0,a=n.length;i<a;i++)n[i]=i;wh(n,((e,n,r)=>t(n,r)));let r=!0;for(let i=0,a=n.length;i<a;i++)if(n[i]!==i){r=!1;break}if(r)return e;const o=Object.create(null);o._rowCount=e._rowCount,o._columns=e._columns,o._schema=e._schema;for(const i of e._columns)o[i]=ag.view(e[i],n,!1);return o},e.areEqual=function(e,t){if(e._rowCount!==t._rowCount)return!1;if(e._columns.length!==t._columns.length)return!1;for(const n of e._columns)if(!t[n])return!1;for(const n of e._columns)if(!ag.areEqual(e[n],t[n]))return!1;return!0},e.getRow=n,e.pickRow=function(e,t){for(let r=0,o=e._rowCount;r<o;++r)if(t(r))return n(e,r)},e.getRows=function(e){const t=[],{_rowCount:r}=e;for(let o=0;o<r;o++)t[o]=n(e,o);return t},e.toArrays=function(e){const t={},{_columns:n}=e;for(let r=0;r<n.length;r++){const o=n[r];t[o]=e[o].toArray()}return t},e.formatToString=function(e){const t=yp.create(),{_columns:n,_rowCount:r}=e;let o=1;yp.write(t,"|");for(let i=0;i<n.length;i++)yp.write(t,n[i]),yp.write(t,"|"),o+=n[i].length+1;yp.newline(t),yp.write(t,new Array(o+1).join("-")),yp.newline(t);for(let i=0;i<r;i++){yp.write(t,"|");for(let r=0;r<n.length;r++){const o=e[n[r]];0===o.valueKind(i)?(yp.write(t,o.value(i)),yp.write(t,"|")):yp.write(t,".|")}yp.newline(t)}return yp.getString(t)}}(sg||(sg={})),function(e){e.ofTables=function(e,t,n){const r=Object.keys(n),o=Object.create(null),i=[];o._name=e,o._tableNames=i,o._schema=t;for(const a of r)sg.is(n[a])&&(o[a]=n[a],i[i.length]=a);return o},e.getTablesAsRows=function(e){const t={};for(const n of e._tableNames)t[n]=sg.getRows(e[n]);return t}}(lg||(lg={}));function pg(e,t){for(let n=0,r=e.length;n<r;n++)if(t(e[n]))return e[n]}function hg(e){if(Array.from)return Array.from(e);const t=[];for(;;){const{done:n,value:r}=e.next();if(n)break;t[t.length]=r}return t}function gg(e,t,n){const r=t-e+1,o=n?new n(r):new Int32Array(r);for(let i=0;i<r;i++)o[i]=i+e;return o}function mg(e,t){const n=new(function(e){const t=e.constructor;if(!t)throw new Error("data does not define a constructor and it should");return t}(e))(t.length);for(let r=0,o=t.length;r<o;r++)n[r]=e[t[r]];return n}!function(e){e.Zero=0;const{_int32:t,_float64:n,_int32_1:r,_float64_1:o}=function(){const e=new ArrayBuffer(8),t=new ArrayBuffer(8);return{_int32:new Int32Array(e),_float64:new Float64Array(e),_int32_1:new Int32Array(t),_float64_1:new Float64Array(t)}}();e.is=function(e){return"number"===typeof e},e.create=function(e,r){return t[0]=e,t[1]=r,n[0]},e.diff=function(e){return n[0]=e,t[1]-t[0]},e.fst=function(e){return n[0]=e,t[0]},e.snd=function(e){return n[0]=e,t[1]},e.areEqual=function(e,i){return n[0]=e,o[0]=i,t[0]===r[0]&&t[1]===r[1]},e.compare=function(e,i){n[0]=e,o[0]=i;const a=t[0]-r[0];return 0!==a?a:t[1]-r[1]},e.compareInArray=function(e,i,a){n[0]=e[i],o[0]=e[a];const s=t[0]-r[0];return 0!==s?s:t[1]-r[1]},e.hashCode=function(e){return n[0]=e,Qh(t[0],t[1])},e.toString=function(e){return n[0]=e,`(${t[0]}, ${t[1]})`}}(cg||(cg={}));const yg=cg.Zero;function vg(e,t){return t<e?cg.create(e,e):cg.create(e,t+1)}function bg(e,t){return t<=e?cg.create(e,e):cg.create(e,t)}function Cg(e){return e<0?cg.create(0,0):cg.create(0,e)}const Ig=cg.is,Eg=cg.fst,xg=cg.snd,Bg=cg.fst;function wg(e){return cg.snd(e)-1}const _g=cg.diff,Sg=cg.hashCode,Dg=cg.toString;function Tg(e,t){return cg.fst(e)<=t&&t<cg.snd(e)}function kg(e,t){const n=Eg(e);return t>=n&&t<xg(e)?t-n:-1}function Qg(e,t){return cg.fst(e)+t}const Mg=cg.areEqual;function Rg(e,t){const n=_g(e),r=_g(t);return 0===n&&0===r||n>0&&r>0&&wg(e)>=Bg(t)&&Bg(e)<=wg(t)}function Pg(e,t){return _g(e)?!_g(t)||Eg(e)<=Eg(t)&&xg(e)>=xg(t):0===_g(t)}function Og(e,t){const n=Eg(e);if(t<=n)return 0;const r=xg(e);return t>=r?r-n:t-n}function Fg(e,t,n){const r=Eg(n),o=Eg(e);if(t<=r+o)return r;const i=xg(n);return t>=i+o?i:t-o}function Ng(e,t,n){return bg(Og(e,t),Og(e,n+1))}function Lg(e,t){return Rg(e,t)?bg(Math.max(Eg(e),Eg(t)),Math.min(xg(e),xg(t))):yg}function Ug(e,t){return _g(Ng(e,Bg(t),wg(t)))}var Gg;!function(e){e.Empty=yg,e.ofSingleton=e=>vg(e,e),e.ofRange=vg,e.ofBounds=bg,e.ofLength=Cg,e.is=Ig,e.has=Tg,e.indexOf=kg,e.getAt=Qg,e.start=Eg,e.end=xg,e.min=Bg,e.max=wg,e.size=_g,e.hashCode=Sg,e.toString=Dg,e.areEqual=Mg,e.areIntersecting=Rg,e.isSubInterval=Pg,e.findPredecessorIndex=Og,e.findPredecessorIndexInInterval=Fg,e.findRange=Ng,e.intersectionSize=Ug,e.intersect=Lg}(Gg||(Gg={}));const jg=[];function zg(e){return[e]}function Hg(e){return e}function Vg(e){return wh(e),e}function qg(e,t){if(t<e)return[];const n=new Int32Array(t-e+1);for(let r=e;r<=t;r++)n[r-e]=r;return n}function Yg(e){return e&&(Array.isArray(e)||!!e.buffer)}function Xg(e){return e[e.length-1]-e[0]+1===e.length}function Wg(e){return e[0]}function Kg(e){return e[e.length-1]+1}function Jg(e){return e[0]}function Zg(e){return e[e.length-1]}function $g(e){return e.length}function em(e){const t=e.length;return t?t>2?function(e,t,n,r){let o=23;return o=31*o+e|0,o=31*o+t|0,o=31*o+n|0,o=31*o+r|0,o^=o>>4,o=(3735928559^o)+(o<<5),o^=o>>11,o}(t,e[0],e[t-1],e[t>>1]):function(e,t,n){let r=23;return r=31*r+e|0,r=31*r+t|0,r=31*r+n|0,r^=r>>4,r=(3735928559^r)+(r<<5),r^=r>>11,r}(t,e[0],e[t-1]):0}function tm(e){const t=e.length;return t>5?`[${e[0]}, ${e[1]}, ..., ${e[t-1]}], length ${t}`:`[${e.join(", ")}]`}function nm(e,t){const n=e.length;return 0===n?-1:e[0]<=t&&t<=e[n-1]?um(e,t,0,n):-1}function rm(e,t,n){return om(e,t,Gg.start(n),Gg.end(n))}function om(e,t,n,r){return 0===e.length||r<=n?-1:e[n]<=t&&t<=e[r-1]?um(e,t,n,r):-1}function im(e,t){return nm(e,t)>=0}function am(e,t){if(e===t)return!0;let n=e.length;if(n!==t.length||e[0]!==t[0]||e[n-1]!==t[n-1])return!1;if(Xg(e))return!0;n--;for(let r=1;r<n;r++)if(e[r]!==t[r])return!1;return!0}function sm(e,t){const n=e.length;return t<=e[0]?0:t>e[n-1]?n:dm(e,t,0,n)}function lm(e,t,n){const r=Gg.start(n),o=Gg.end(n),i=e[r];return t<=i?r:o>r&&t>e[o-1]?o:t-i<=11?function(e,t,n,r){for(let o=n;o<r;o++)if(t<=e[o])return o;return r}(e,t,r+1,o):dm(e,t,r,o)}function cm(e,t,n){return Gg.ofBounds(sm(e,t),sm(e,n+1))}function um(e,t,n,r){let o=n,i=r-1;for(;o<=i;){if(o+11>i){for(let n=o;n<=i;n++)if(t===e[n])return n;return-1}const n=o+i>>1,r=e[n];if(t<r)i=n-1;else{if(!(t>r))return n;o=n+1}}return-1}function dm(e,t,n,r){let o=n,i=r-1;for(;o<i;){if(o+11>i){for(let n=o;n<=i;n++)if(t<=e[n])return n;return i+1}const n=o+i>>1,r=e[n];if(t<r)i=n-1;else{if(!(t>r))return n;o=n+1}}return o>i?i+1:e[o]>=t?o:o+1}function Am(e,t){if(e===t)return!0;let{startI:n,startJ:r,endI:o,endJ:i}=Im(e,t);for(;n<o&&r<i;){const o=e[n],i=t[r];if(o<i)n++;else{if(!(o>i))return!0;r++}}return!1}function fm(e,t){if(e===t)return!0;const n=t.length;let{startI:r,startJ:o,endI:i,endJ:a}=Im(e,t);if(a-o<n||i-r<n)return!1;let s=0;for(;r<i&&o<a;){const n=e[r],i=t[o];n<i?r++:n>i?o++:(r++,o++,s++)}return s===n}function pm(e,t){if(e===t)return e;const n=e.length,r=t.length;if(0===n)return t;if(0===r)return e;if(e[0]>t[0])return pm(t,e);const{startI:o,startJ:i,endI:a,endJ:s}=Im(e,t),l=gm(e,t,o,i,a,s);if(l===n&&l===r||l===r)return e;if(l===n)return t;const c=new Int32Array(n+r-l);let u=0,d=0,A=0;for(u=0;u<o;u++)c[A++]=e[u];for(;d<s&&e[o]>t[d];)c[A++]=t[d++];for(;u<a&&d<s;){const n=e[u],r=t[d];n<r?(c[A++]=n,u++):n>r?(c[A++]=r,d++):(c[A++]=n,u++,d++)}for(;u<a;u++)c[A++]=e[u];for(;d<s;d++)c[A++]=t[d];for(;u<n;u++)c[A++]=e[u];for(;d<r;d++)c[A++]=t[d];return c}function hm(e,t){if(e===t)return $g(e);const{startI:n,startJ:r,endI:o,endJ:i}=Im(e,t);return gm(e,t,n,r,o,i)}function gm(e,t,n,r,o,i){let a=n,s=r,l=0;for(;a<o&&s<i;){const n=e[a],r=t[s];n<r?a++:n>r?s++:(a++,s++,l++)}return l}function mm(e,t){if(e===t)return e;const{startI:n,startJ:r,endI:o,endJ:i}=Im(e,t),a=gm(e,t,n,r,o,i),s=e.length,l=t.length;if(!a)return jg;if(a===s&&a===l||a===l)return t;if(a===s)return e;const c=new Int32Array(a);let u=0,d=n,A=r;for(;d<o&&A<i;){const n=e[d],r=t[A];n<r?d++:(n>r||(c[u++]=n,d++),A++)}return c}function ym(e,t){if(e===t)return jg;const n=e.length,{startI:r,startJ:o,endI:i,endJ:a}=Im(e,t);let s=r,l=o,c=0;for(;s<i&&l<a;){const n=e[s],r=t[l];n<r?s++:n>r?l++:(s++,l++,c++)}if(!c)return e;if(c>=n)return jg;const u=new Int32Array(n-c);let d=0;for(let A=0;A<r;A++)u[d++]=e[A];for(s=r,l=o;s<i&&l<a;){const n=e[s],r=t[l];n<r?(u[d++]=n,s++):(n>r||s++,l++)}for(;s<n;s++)u[d++]=e[s];return u}function vm(e){if(e.length<2)return e;let t=1;for(let o=0,i=e.length-1;o<i;o++)e[o]!==e[o+1]&&t++;if(t===e.length)return e;const n=new Int32Array(t);let r=0;for(let o=0,i=e.length-1;o<i;o++)e[o]!==e[o+1]&&(n[r++]=e[o]);return n[r]=e[e.length-1],n}function bm(e,t){if(am(e,t))return gg(0,e.length-1);const{startI:n,startJ:r,endI:o,endJ:i}=Im(e,t);let a=n,s=r,l=0;for(;a<o&&s<i;){const n=e[a],r=t[s];n<r?a++:n>r?s++:(a++,s++,l++)}const c=e.length;if(!l)return jg;if(l===c)return gg(0,e.length-1);const u=new Int32Array(l);let d=0;for(a=n,s=r;a<o&&s<i;){const n=e[a],r=t[s];n<r?a++:(n>r||(u[d++]=a,a++),s++)}return u}const Cm={startI:0,startJ:0,endI:0,endJ:0};function Im(e,t){const n=e.length,r=t.length,o=n/r;return n>=128||r>=128||o<=.34||o>=2.99?(Cm.startI=sm(e,Wg(t)),Cm.startJ=sm(t,Wg(e)),Cm.endI=sm(e,Kg(t)),Cm.endJ=sm(t,Kg(e))):(Cm.startI=0,Cm.startJ=0,Cm.endI=n,Cm.endJ=r),Cm}var Em;!function(e){e.Empty=jg,e.ofUnsortedArray=Vg,e.ofSingleton=zg,e.ofSortedArray=Hg,e.ofRange=qg,e.ofBounds=(e,t)=>qg(e,t-1),e.is=Yg,e.isRange=Xg,e.has=im,e.indexOf=nm,e.indexOfInInterval=rm,e.indexOfInRange=om,e.start=Wg,e.end=Kg,e.min=Jg,e.max=Zg,e.size=$g,e.hashCode=em,e.toString=tm,e.areEqual=am,e.areIntersecting=Am,e.isSubset=fm,e.union=pm,e.intersect=mm,e.subtract=ym,e.findPredecessorIndex=sm,e.findPredecessorIndexInInterval=lm,e.findRange=cm,e.intersectionSize=hm,e.deduplicate=vm,e.indicesOf=bm}(Em||(Em={}));const xm=Gg.Empty,Bm=Gg.ofSingleton,wm=Gg.ofRange,_m=Gg.ofBounds;function Sm(e){return e.length?Em.isRange(e)?Gg.ofRange(e[0],e[e.length-1]):e:xm}function Dm(e){return Gg.is(e)?Gg.size(e):Em.size(e)}function Tm(e,t){return Gg.is(e)?Gg.has(e,t):Em.has(e,t)}function km(e,t){return Gg.is(e)?Gg.indexOf(e,t):Em.indexOf(e,t)}function Qm(e,t){return Gg.is(e)?Gg.getAt(e,t):e[t]}function Mm(e){return Gg.is(e)?Gg.min(e):Em.min(e)}function Rm(e){return Gg.is(e)?Gg.max(e):Em.max(e)}function Pm(e){return Gg.is(e)?Gg.start(e):Em.start(e)}function Om(e){return Gg.is(e)?Gg.end(e):Em.end(e)}function Fm(e){return Gg.is(e)?Gg.hashCode(e):Em.hashCode(e)}function Nm(e,t){return Gg.is(e)?Gg.is(t)?Gg.areEqual(e,t):Xm(e,t):Gg.is(t)?Xm(t,e):Em.areEqual(e,t)}function Lm(e,t){return Gg.is(e)?Gg.is(t)?Gg.areIntersecting(e,t):Wm(t,e):Gg.is(t)?Wm(e,t):Em.areIntersecting(e,t)}function Um(e,t){return Gg.is(e)?Gg.is(t)?Gg.isSubInterval(e,t):function(e,t){const n=Gg.min(e),r=Gg.max(e);if(r-n+1===0)return!1;const o=Em.min(t),i=Em.max(t);return o>=n&&i<=r}(e,t):Gg.is(t)?function(e,t){const n=Gg.min(t),r=Gg.max(t);if(r-n+1===0)return!0;const o=Em.min(e),i=Em.max(e);if(n<o||r>i)return!1;const a=Em.findRange(e,n,r);return Gg.size(a)===Gg.size(t)}(e,t):Em.isSubset(e,t)}function Gm(e,t){return Gg.is(e)?Gg.findPredecessorIndex(e,t):Em.findPredecessorIndex(e,t)}function jm(e,t,n){return Gg.is(e)?Gg.findPredecessorIndexInInterval(e,t,n):Em.findPredecessorIndexInInterval(e,t,n)}function zm(e,t,n){return Gg.is(e)?Gg.findRange(e,t,n):Em.findRange(e,t,n)}function Hm(e,t){return Gg.is(e)?Gg.is(t)?Gg.intersectionSize(e,t):Jm(t,e):Gg.is(t)?Jm(e,t):Em.intersectionSize(e,t)}function Vm(e,t){return Gg.is(e)?Gg.is(t)?function(e,t){if(Gg.areEqual(e,t))return e;const n=Gg.size(e),r=Gg.size(t);if(!r)return e;if(!n)return t;const o=Gg.min(e),i=Gg.min(t);if(function(e,t){const n=Dm(e),r=Dm(t);return 0===n&&0===r||n>0&&r>0&&Rm(e)>=Mm(t)&&Mm(e)<=Rm(t)}(e,t))return Gg.ofRange(Math.min(o,i),Math.max(Gg.max(e),Gg.max(t)));let a,s,l,c;o<i?(a=n,s=o,l=r,c=i):(a=r,s=i,l=n,c=o);const u=new Int32Array(n+r);for(let d=0;d<a;d++)u[d]=d+s;for(let d=0;d<l;d++)u[d+a]=d+c;return Sm(u)}(e,t):Km(t,e):Gg.is(t)?Km(e,t):Sm(Em.union(e,t))}function qm(e,t){return Gg.is(e)?Gg.is(t)?Gg.intersect(e,t):Zm(t,e):Gg.is(t)?Zm(e,t):Sm(Em.intersect(e,t))}function Ym(e,t){return Gg.is(e)?Gg.is(t)?function(e,t){if(Gg.areEqual(e,t))return xm;if(!Gg.areIntersecting(e,t))return e;const n=Gg.min(e),r=Gg.max(e),o=Gg.min(t),i=Gg.max(t);if(r<n||i<o)return e;if(Gg.isSubInterval(t,e))return xm;if(Gg.isSubInterval(e,t)){const e=o-n,t=r-i;if(e<=0)return Gg.ofRange(i+1,i+t);if(t<=0)return Gg.ofRange(n,n+e-1);const a=new Int32Array(e+t);let s=0;for(let r=0;r<e;r++)a[s++]=n+r;for(let n=1;n<=t;n++)a[s++]=i+n;return Sm(a)}return n<o?Gg.ofRange(n,o-1):Gg.ofRange(i+1,r)}(e,t):function(e,t){const n=Gg.min(e),r=Gg.max(e);if(r<n)return e;const o=r-n+1,i=Em.findRange(t,n,r),a=Gg.start(i),s=Gg.end(i),l=s-a;if(0===l)return e;const c=o-l;if(c<=0)return xm;const u=new Int32Array(c),d=t.length-1,A=t[Math.min(a,d)],f=t[Math.min(s,d)];let p=0;for(let h=n;h<A;h++)u[p++]=h;for(let h=A;h<=f;h++)Em.indexOfInInterval(t,h,i)<0&&(u[p++]=h);for(let h=f+1;h<=r;h++)u[p++]=h;return Sm(u)}(e,t):Gg.is(t)?function(e,t){const n=Gg.min(t),r=Gg.max(t);if(r<n)return e;const o=Em.findRange(e,n,r),i=Gg.start(o),a=Gg.end(o),s=e.length-(a-i);if(s<=0)return xm;if(s===e.length)return e;const l=new Int32Array(s);let c=0;for(let u=0;u<i;u++)l[c++]=e[u];for(let u=a,d=e.length;u<d;u++)l[c++]=e[u];return Sm(l)}(e,t):Sm(Em.subtract(e,t))}function Xm(e,t){return Gg.size(e)===Em.size(t)&&Gg.start(e)===Em.start(t)&&Gg.end(e)===Em.end(t)}function Wm(e,t){return 0!==e.length&&0!==Gg.size(Em.findRange(e,Gg.min(t),Gg.max(t)))}function Km(e,t){const n=Gg.size(t);if(!n)return e;if(function(e,t){return Dm(e)?!Dm(t)||Mm(e)<=Mm(t)&&Rm(e)>=Rm(t):0===Dm(t)}(t,e))return t;const r=Gg.min(t),o=Gg.max(t),i=Em.findRange(e,r,o),a=Gg.start(i),s=Gg.end(i),l=new Int32Array(a+(e.length-s)+n);let c=0;for(let u=0;u<a;u++)l[c++]=e[u];for(let u=r;u<=o;u++)l[c++]=u;for(let u=s,d=e.length;u<d;u++)l[c++]=e[u];return Sm(l)}function Jm(e,t){if(!Gg.size(t))return 0;const n=Em.findRange(e,Gg.min(t),Gg.max(t));return Gg.end(n)-Gg.start(n)}function Zm(e,t){if(!Gg.size(t))return xm;const n=Em.findRange(e,Gg.min(t),Gg.max(t)),r=Gg.start(n),o=Gg.end(n),i=o-r;if(!i)return xm;if(i===e.length)return e;const a=new Int32Array(i);let s=0;for(let l=r;l<o;l++)a[s++]=e[l];return Sm(a)}function $m(e,t,n){if(t===n)return e;const r=Dm(e),o=t.length,i=n.length;if(0===r||0===o||0===i)return xm;const a=Em.findPredecessorIndex(n,t[Mm(e)]),s=Em.findPredecessorIndex(n,t[Rm(e)]+1);let l=0,c=0,u=0,d=a;for(;u<r&&d<s;){const r=t[Qm(e,u)],o=n[d];r<o?u++:(r>o||(l++,u++),d++)}if(0===l)return xm;if(l===o&&l===i)return e;const A=new Int32Array(l);for(c=0,u=0,d=a;u<r&&d<s;){const r=t[Qm(e,u)],o=n[d];r<o?u++:(r>o||(A[c++]=d,u++),d++)}return Sm(A)}var ey,ty,ny,ry;function oy(e){const t=Em.ofSortedArray(e),n=Em.max(t),r=new Int32Array(n);for(let o=0,i=e.length-1;o<i;o++)for(let t=e[o],n=e[o+1];t<n;t++)r[t]=o;return{offsets:t,index:r,count:e.length-1}}function iy(e,t){const n=Gg.start(t),r=new Int32Array(e.length+1);for(let o=0,i=e.length;o<i;o++)r[o]=e[o]-n;return r[e.length]=Gg.end(t)-n,oy(r)}function ay(e){let{count:t}=e;return t}function sy(e,t){let{index:n}=e;return n[t]}function ly(e,t,n){let{offsets:r}=e;const o=n>=ey.max(r)?-1:ey.findPredecessorIndex(r,n-1);return ey.findRange(t,ey.getAt(r,o),ey.getAt(r,o+1)-1)}!function(e){e.Empty=xm,e.ofSingleton=Bm,e.ofRange=wm,e.ofBounds=_m,e.ofSortedArray=Sm,e.has=Tm,e.indexOf=km,e.getAt=Qm,e.min=Mm,e.max=Rm,e.start=Pm,e.end=Om,e.size=Dm,e.hashCode=Fm,e.areEqual=Nm,e.areIntersecting=Lm,e.isSubset=Um,e.union=Vm,e.intersect=qm,e.indexedIntersect=$m,e.subtract=Ym,e.findPredecessorIndex=Gm,e.findPredecessorIndexInInterval=jm,e.findRange=zm,e.intersectionSize=Hm,e.forEach=function(e,t,n){return function(e,t,n){if(Gg.is(e)){const r=Gg.min(e);for(let o=r,i=Gg.max(e);o<=i;o++)t(o,o-r,n)}else for(let r=0,o=e.length;r<o;r++)t(e[r],r,n);return n}(e,t,n)},e.forEachSegment=function(e,t,n,r){return function(e,t,n,r){if(Gg.is(e)){let o=0;for(let i=Gg.min(e),a=Gg.max(e);i<=a;i++){const e=t(i);let s=i+1;for(;s<a&&t(s)===e;)s++;i=s-1,n(e,o,r),o++}}else{let o=0;for(let i=0,a=e.length;i<a;i++){const s=t(e[i]);let l=i+1;for(;l<a&&t(e[l])===s;)l++;i=l-1,n(s,o,r),o++}}return r}(e,t,n,r)},e.isInterval=function(e){return Gg.is(e)},e.isSortedArray=function(e){return!Gg.is(e)},e.toArray=function(t){const n=[];return e.forEach(t,(e=>n.push(e))),n},e.toString=function(e){return function(e){return Gg.is(e)?Gg.toString(e):Em.toString(e)}(e)}}(ey||(ey={}));class cy{move(){for(;this.hasNext;){if(this.updateValue()){this.value.index=this.segmentMin++,this.hasNext=this.segmentMax>=this.segmentMin&&Gg.size(this.setRange)>0;break}this.updateSegmentRange()}return this.value}updateValue(){const e=this.segments[this.segmentMin+1],t=ey.findPredecessorIndexInInterval(this.set,e,this.setRange);return this.value.start=Gg.start(this.setRange),this.value.end=t,this.setRange=Gg.ofBounds(t,Gg.end(this.setRange)),t>this.value.start}updateSegmentRange(){const e=Gg.min(this.setRange),t=Gg.max(this.setRange);t<e?this.hasNext=!1:(this.segmentMin=this.segmentMap[ey.getAt(this.set,e)],this.segmentMax=this.segmentMap[ey.getAt(this.set,t)],this.hasNext=this.segmentMax>=this.segmentMin)}setSegment(e){this.setRange=Gg.ofBounds(e.start,e.end),this.updateSegmentRange()}constructor(e,t,n,r){this.segments=e,this.segmentMap=t,this.set=n,this.segmentMin=0,this.segmentMax=0,this.setRange=Gg.Empty,this.value={index:0,start:0,end:0},this.hasNext=!1,this.setRange=r,this.updateSegmentRange()}}function uy(e,t,n){const r="undefined"!==typeof n?Gg.ofBounds(n.start,n.end):Gg.ofBounds(0,ey.size(t));return new cy(e.offsets,e.index,t,r)}!function(e){e.create=oy,e.ofOffsets=iy,e.count=ay,e.getSegment=sy,e.projectValue=ly,e.transientSegments=uy}(ty||(ty={}));class dy{remove(e){const{prev:t,next:n}=this,r=t[e],o=n[e];r>=0&&(n[r]=o,t[e]=-1),o>=0&&(t[o]=r,n[e]=-1),e===this.head&&(this.head=r<0?o:r)}has(e){return this.prev[e]>=0||this.next[e]>=0||this.head===e}constructor(e){this.head=e>0?0:-1,this.prev=new Int32Array(e),this.next=new Int32Array(e);for(let t=0;t<e;t++)this.next[t]=t+1,this.prev[t]=t-1;this.prev[0]=-1,this.next[e-1]=-1}}!function(e){function t(){return new Map}e.Empty=new Map,e.keyArray=function(e){return hg(e.keys())},e.Mutable=t,e.asImmutable=function(e){return e},e.copy=function(e){const n=t(),r=e.keys();for(;;){const{done:t,value:o}=r.next();if(t)break;n.set(o,e.get(o))}return n},e.addFrom=function(e,t){const n=t.keys();for(;;){const{done:r,value:o}=n.next();if(r)break;e.set(o,t.get(o))}return e}}(ny||(ny={}));class Ay{move(){return++this.index,this.lastValue=this.xs[this.index],this.hasNext=this.index<this.length-1,this.lastValue}constructor(e){this.xs=[],this.index=-1,this.length=0,this.hasNext=!1,this.length=e.length,this.hasNext=e.length>0,this.xs=e,this.index=-1,this.lastValue=e.length>0?e[0]:void 0}}class fy{move(){return++this.value,this.hasNext=this.value<this.max,this.value}constructor(e,t){this.max=t,this.value=0,this.hasNext=!1,this.value=e-1,this.hasNext=t>=e}}class py{move(){return this.hasNext=!1,this.value}constructor(e){this.value=e,this.hasNext=!0}}class hy{move(){const e=this.f(this.base.move());return this.hasNext=this.base.hasNext,e}constructor(e,t){this.base=e,this.f=t,this.hasNext=!1,this.hasNext=e.hasNext}}class gy{move(){const e=this.next;return this.hasNext=this.findNext(),e}findNext(){for(;this.base.hasNext;)if(this.next=this.base.move(),this.p(this.next))return!0;return!1}constructor(e,t){this.base=e,this.p=t,this.hasNext=this.findNext()}}!function(e){e.Empty=new fy(0,-1),e.Array=function(e){return new Ay(e)},e.Value=function(e){return new py(e)},e.Range=function(e,t){return new fy(e,t)},e.map=function(e,t){return new hy(e,t)},e.filter=function(e,t){return new gy(e,t)},e.forEach=function(e,t,n){for(;e.hasNext;){if(t(e.move(),n))return n}return n}}(ry||(ry={}));const my={domain:[0,1],reverse:!1,listOrName:"red-yellow-blue",minLabel:"",maxLabel:""};var yy;function vy(e){return e.svg?(0,ct.jsx)("span",{className:"msp-icon msp-material-icon"+(e.inline?" msp-icon-inline":""),title:e.title,style:e.style,children:(0,ct.jsx)(e.svg,{})}):null}!function(e){e.create=function(e){const{domain:t,reverse:n,listOrName:r}={...my,...e},o="string"===typeof r?ph(r).list:r,i=n?o.slice().reverse():o,a=i.length-1;let s=0,l=0,c=0;function u(e,t){l=e,c=t,s=c-l||1}u(t[0],t[1]);const d=Pp(e.minLabel,l.toString()),A=Pp(e.maxLabel,c.toString());let f;const p=i.every((e=>Array.isArray(e)));if(p){const e=[...i];e.sort(((e,t)=>e[1]-t[1]));const t=e.map((e=>e[0])),n=Em.ofSortedArray(e.map((e=>e[1]))),r=t.length-1;f=e=>{const o=zp((e-l)/s,0,1),i=Em.findPredecessorIndex(n,o);if(0===i)return t[l];if(i>r)return t[r];const a=n[i-1],c=zp((o-a)/(n[i]-a),0,1);return Jp.interpolate(t[i-1],t[i],c)}}else f=e=>{const t=Math.min(i.length-1,Math.max(0,(e-l)/s*a)),n=Math.floor(t),r=i[n],o=i[Math.ceil(t)];return Jp.interpolate(r,o,t-n)};return{color:f,colorToArray:(e,t,n)=>{Jp.toArray(f(e),t,n)},normalizedColorToArray:(e,t,n)=>{Jp.toArrayNormalized(f(e),t,n)},setDomain:u,get legend(){return function(e,t,n){return{kind:"scale-legend",minLabel:e,maxLabel:t,colors:n}}(d,A,i)}}}}(yy||(yy={}));const by=(0,ct.jsx)("circle",{r:"6px",id:"circle-left",cy:"12px",cx:"8px",strokeWidth:"1px"}),Cy=(0,ct.jsx)("circle",{r:"6px",id:"circle-right",cy:"12px",cx:"16px",strokeWidth:"1px"});(0,ct.jsxs)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:[(0,ct.jsxs)("defs",{children:[by,Cy]}),(0,ct.jsxs)("g",{children:[(0,ct.jsx)("use",{href:"#circle-left",className:"msp-shape-filled"}),(0,ct.jsx)("use",{href:"#circle-right",className:"msp-shape-filled"}),(0,ct.jsx)("use",{href:"#circle-left",className:"msp-shape-empty"})]})]});(0,ct.jsxs)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:[(0,ct.jsxs)("defs",{children:[by,Cy,(0,ct.jsxs)("mask",{id:"mask-left",children:[(0,ct.jsx)("use",{href:"#circle-left",fill:"white",stroke:"white"}),(0,ct.jsx)("use",{href:"#circle-right",fill:"black",strokeWidth:"0px",stroke:"white"})]})]}),(0,ct.jsxs)("g",{children:[(0,ct.jsx)("use",{href:"#circle-left",className:"msp-shape-filled",mask:"url(#mask-left)"}),(0,ct.jsx)("use",{href:"#circle-right",className:"msp-shape-empty"})]})]});(0,ct.jsxs)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:[(0,ct.jsxs)("defs",{children:[by,Cy,(0,ct.jsx)("clipPath",{id:"clip-left",children:(0,ct.jsx)("use",{href:"#circle-right"})})]}),(0,ct.jsxs)("g",{children:[(0,ct.jsx)("use",{href:"#circle-left",className:"msp-shape-filled",clipPath:"url(#clip-left)"}),(0,ct.jsx)("use",{href:"#circle-left",className:"msp-shape-empty"}),(0,ct.jsx)("use",{href:"#circle-right",className:"msp-shape-empty"})]})]});(0,ct.jsxs)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:[(0,ct.jsxs)("defs",{children:[by,Cy]}),(0,ct.jsxs)("g",{children:[(0,ct.jsx)("use",{href:"#circle-left",className:"msp-shape-empty"}),(0,ct.jsx)("use",{href:"#circle-right",className:"msp-shape-filled"})]})]});(0,ct.jsx)("svg",{width:"17px",height:"17px",viewBox:"0 0 299.463 299.463",strokeWidth:"6px",children:(0,ct.jsx)("g",{children:(0,ct.jsx)("path",{d:"M256.851,173.832v-48.201c22.916-4.918,34.151-30.668,22.556-50.771c-11.547-20.004-39.486-23.251-55.242-5.844 l-41.746-24.106C189.618,22.603,172.861,0,149.734,0c-23.132,0-39.881,22.609-32.685,44.911L75.305,69.016 C59.522,51.586,31.597,54.88,20.061,74.863c-11.63,20.163-0.298,45.862,22.557,50.769v48.2 c-22.821,4.898-34.195,30.591-22.556,50.771c11.529,19.972,39.454,23.285,55.242,5.845l41.746,24.106 c-7.199,22.308,9.559,44.911,32.685,44.911c23.132,0,39.88-22.609,32.685-44.911l41.745-24.106 c15.817,17.469,43.73,14.099,55.242-5.844c0,0,0-0.001,0.001-0.002c4.587-7.953,5.805-17.213,3.431-26.076 C279.392,185.657,269.129,176.461,256.851,173.832z M249.62,72.088c20.568,0,27.428,27.191,10.008,37.239 c-0.003,0.002-0.006,0.003-0.009,0.005c-10.04,5.81-22.85,1.762-27.877-8.475C225.206,87.548,234.938,72.088,249.62,72.088z M149.734,14.4c11.005,0,19.958,8.954,19.958,19.959c0,11.127-9.077,19.958-19.958,19.958c-10.95,0-19.958-8.9-19.958-19.958 C129.776,23.354,138.729,14.4,149.734,14.4z M39.84,109.328c-17.451-10.067-10.534-37.24,10.01-37.24 c15.311,0,24.922,16.653,17.251,29.942C61.681,111.397,49.517,114.925,39.84,109.328z M59.802,224.702 c-9.535,5.503-21.768,2.229-27.268-7.298c-7.639-13.242,1.887-29.945,17.236-29.945c0.013,0,0.027,0,0.04,0 C70.07,187.48,77.49,214.469,59.802,224.702z M149.734,285.062c-11.005,0-19.958-8.954-19.958-19.958 c0-11.127,9.077-19.958,19.958-19.958c10.954,0,19.958,8.903,19.958,19.958C169.693,276.109,160.74,285.062,149.734,285.062z M216.953,217.982l-41.727,24.095c-13.778-15.22-37.459-14.94-50.983,0l-41.728-24.096c6.196-19.289-5.541-39.835-25.498-44.149 V125.63c19.752-4.268,31.762-24.65,25.498-44.149l41.727-24.095c13.629,15.055,37.32,15.093,50.983,0l41.728,24.096 c-6.196,19.29,5.534,39.835,25.498,44.149v48.202C222.61,178.123,210.721,198.581,216.953,217.982z M266.935,217.404 c-5.501,9.528-17.732,12.802-27.261,7.302c-17.682-10.23-10.301-37.247,10.032-37.247 C264.984,187.459,274.602,204.112,266.935,217.404z"})})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",strokeWidth:"0.1px",children:(0,ct.jsx)("path",{d:"M21,16.5C21,16.88 20.79,17.21 20.47,17.38L12.57,21.82C12.41,21.94 12.21,22 12,22C11.79,22 11.59,21.94 11.43,21.82L3.53,17.38C3.21,17.21 3,16.88 3,16.5V7.5C3,7.12 3.21,6.79 3.53,6.62L11.43,2.18C11.59,2.06 11.79,2 12,2C12.21,2 12.41,2.06 12.57,2.18L20.47,6.62C20.79,6.79 21,7.12 21,7.5V16.5M12,4.15L6.04,7.5L12,10.85L17.96,7.5L12,4.15M5,15.91L11,19.29V12.58L5,9.21V15.91M19,15.91V9.21L13,12.58V19.29L19,15.91Z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",strokeWidth:"0.1px",children:(0,ct.jsx)("path",{d:"M17,22V20H20V17H22V20.5C22,20.89 21.84,21.24 21.54,21.54C21.24,21.84 20.89,22 20.5,22H17M7,22H3.5C3.11,22 2.76,21.84 2.46,21.54C2.16,21.24 2,20.89 2,20.5V17H4V20H7V22M17,2H20.5C20.89,2 21.24,2.16 21.54,2.46C21.84,2.76 22,3.11 22,3.5V7H20V4H17V2M7,2V4H4V7H2V3.5C2,3.11 2.16,2.76 2.46,2.46C2.76,2.16 3.11,2 3.5,2H7M13,17.25L17,14.95V10.36L13,12.66V17.25M12,10.92L16,8.63L12,6.28L8,8.63L12,10.92M7,14.95L11,17.25V12.66L7,10.36V14.95M18.23,7.59C18.73,7.91 19,8.34 19,8.91V15.23C19,15.8 18.73,16.23 18.23,16.55L12.75,19.73C12.25,20.05 11.75,20.05 11.25,19.73L5.77,16.55C5.27,16.23 5,15.8 5,15.23V8.91C5,8.34 5.27,7.91 5.77,7.59L11.25,4.41C11.5,4.28 11.75,4.22 12,4.22C12.25,4.22 12.5,4.28 12.75,4.41L18.23,7.59Z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",strokeWidth:"0.1px",children:(0,ct.jsx)("path",{d:"M16,4L9,8.04V15.96L16,20L23,15.96V8.04M16,6.31L19.8,8.5L16,10.69L12.21,8.5M0,7V9H7V7M11,10.11L15,12.42V17.11L11,14.81M21,10.11V14.81L17,17.11V12.42M2,11V13H7V11M4,15V17H7V15"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",strokeWidth:"0.1px",children:(0,ct.jsx)("path",{fill:"currentColor",d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",strokeWidth:"0.1px",children:(0,ct.jsx)("path",{fill:"currentColor",d:"M20,11H23V13H20V11M1,11H4V13H1V11M13,1V4H11V1H13M4.92,3.5L7.05,5.64L5.63,7.05L3.5,4.93L4.92,3.5M16.95,5.63L19.07,3.5L20.5,4.93L18.37,7.05L16.95,5.63M12,6A6,6 0 0,1 18,12C18,14.22 16.79,16.16 15,17.2V19A1,1 0 0,1 14,20H10A1,1 0 0,1 9,19V17.2C7.21,16.16 6,14.22 6,12A6,6 0 0,1 12,6M14,21V22A1,1 0 0,1 13,23H11A1,1 0 0,1 10,22V21H14M11,18H13V15.87C14.73,15.43 16,13.86 16,12A4,4 0 0,0 12,8A4,4 0 0,0 8,12C8,13.86 9.27,15.43 11,15.87V18Z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{fill:"currentColor",d:"M7.5,5.6L5,7L6.4,4.5L5,2L7.5,3.4L10,2L8.6,4.5L10,7L7.5,5.6M19.5,15.4L22,14L20.6,16.5L22,19L19.5,17.6L17,19L18.4,16.5L17,14L19.5,15.4M22,2L20.6,4.5L22,7L19.5,5.6L17,7L18.4,4.5L17,2L19.5,3.4L22,2M13.34,12.78L15.78,10.34L13.66,8.22L11.22,10.66L13.34,12.78M14.37,7.29L16.71,9.63C17.1,10 17.1,10.65 16.71,11.04L5.04,22.71C4.65,23.1 4,23.1 3.63,22.71L1.29,20.37C0.9,20 0.9,19.35 1.29,18.96L12.96,7.29C13.35,6.9 14,6.9 14.37,7.29Z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",strokeWidth:"0.1px",children:(0,ct.jsx)("path",{d:"M3 17.25V21H6.75L17.81 9.93L14.06 6.18L3 17.25M22.61 18.36L18.36 22.61L13.16 17.41L14.93 15.64L15.93 16.64L18.4 14.16L19.82 15.58L18.36 17L19.42 18L20.84 16.6L22.61 18.36M6.61 10.83L1.39 5.64L5.64 1.39L7.4 3.16L4.93 5.64L6 6.7L8.46 4.22L9.88 5.64L8.46 7.05L9.46 8.05L6.61 10.83M20.71 7C21.1 6.61 21.1 6 20.71 5.59L18.37 3.29C18 2.9 17.35 2.9 16.96 3.29L15.12 5.12L18.87 8.87L20.71 7Z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3h7zM7 9H4V5h3v4zm10 6h3v4h-3v-4zm0-10h3v4h-3V5z"})});const Iy=(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})});function Ey(){return Iy}const xy=(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"})});function By(){return xy}const wy=(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M7 10l5 5 5-5z"})});function _y(){return wy}const Sy=(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M10 17l5-5-5-5v10z"})});function Dy(){return Sy}const Ty=(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"})});function ky(){return Ty}(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M6 13c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0-8c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm-3 .5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM6 5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm15 5.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM14 7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0-3.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm-11 10c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm7 7c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm0-17c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM10 7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0 5.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm8 .5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0-8c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0-4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm3 8.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM14 17c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm-4-12c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0 8.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm4-4.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-4c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"})});const Qy=(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M15 7v12.97l-4.21-1.81-.79-.34-.79.34L5 19.97V7h10m4-6H8.99C7.89 1 7 1.9 7 3h10c1.1 0 2 .9 2 2v13l2 1V3c0-1.1-.9-2-2-2zm-4 4H5c-1.1 0-2 .9-2 2v16l7-3 7 3V7c0-1.1-.9-2-2-2z"})});function My(){return Qy}(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34a.9959.9959 0 00-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M22.61 18.99l-9.08-9.08c.93-2.34.45-5.1-1.44-7C9.79.61 6.21.4 3.66 2.26L7.5 6.11 6.08 7.52 2.25 3.69C.39 6.23.6 9.82 2.9 12.11c1.86 1.86 4.57 2.35 6.89 1.48l9.11 9.11c.39.39 1.02.39 1.41 0l2.3-2.3c.4-.38.4-1.01 0-1.41zm-3 1.6l-9.46-9.46c-.61.45-1.29.72-2 .82-1.36.2-2.79-.21-3.83-1.25C3.37 9.76 2.93 8.5 3 7.26l3.09 3.09 4.24-4.24-3.09-3.09c1.24-.07 2.49.37 3.44 1.31 1.08 1.08 1.49 2.57 1.24 3.96-.12.71-.42 1.37-.88 1.96l9.45 9.45-.88.89z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M14.25 2.26l-.08-.04-.01.02C13.46 2.09 12.74 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-4.75-3.31-8.72-7.75-9.74zM19.41 9h-7.99l2.71-4.7c2.4.66 4.35 2.42 5.28 4.7zM13.1 4.08L10.27 9l-1.15 2L6.4 6.3C7.84 4.88 9.82 4 12 4c.37 0 .74.03 1.1.08zM5.7 7.09L8.54 12l1.15 2H4.26C4.1 13.36 4 12.69 4 12c0-1.85.64-3.55 1.7-4.91zM4.59 15h7.98l-2.71 4.7c-2.4-.67-4.34-2.42-5.27-4.7zm6.31 4.91L14.89 13l2.72 4.7C16.16 19.12 14.18 20 12 20c-.38 0-.74-.04-1.1-.09zm7.4-3l-4-6.91h5.43c.17.64.27 1.31.27 2 0 1.85-.64 3.55-1.7 4.91z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M9.4 10.5l4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.85-6.32 2.25l3.66 6.35.06-.1zM21.54 9c-.92-2.92-3.15-5.26-6-6.34L11.88 9h9.66zm.26 1h-7.49l.29.5 4.76 8.25C21 16.97 22 14.61 22 12c0-.69-.07-1.35-.2-2zM8.54 12l-3.9-6.75C3.01 7.03 2 9.39 2 12c0 .69.07 1.35.2 2h7.49l-1.15-2zm-6.08 3c.92 2.92 3.15 5.26 6 6.34L12.12 15H2.46zm11.27 0l-3.9 6.76c.7.15 1.42.24 2.17.24 2.4 0 4.6-.85 6.32-2.25l-3.66-6.35-.93 1.6z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm-7 7H3v4c0 1.1.9 2 2 2h4v-2H5v-4zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2V5zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2zm0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4z"})});const Ry=(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})});function Py(){return Ry}const Oy=(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})});function Fy(){return Oy}const Ny=(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})});function Ly(){return Ny}(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4H8c-1.1 0-1.99.9-1.99 2L6 21c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V11l-6-6zM8 21V7h6v5h5v9H8z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M3 5v4h2V5h4V3H5c-1.1 0-2 .9-2 2zm2 10H3v4c0 1.1.9 2 2 2h4v-2H5v-4zm14 4h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4zm0-16h-4v2h4v4h2V5c0-1.1-.9-2-2-2z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5.04-6.71l-2.75 3.54-1.96-2.36L6.5 17h11l-3.54-4.71z"})});const Uy=(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"})});function Gy(){return Uy}(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",strokeWidth:"0.1px",children:(0,ct.jsx)("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm2 4v-2H3c0 1.1.89 2 2 2zM3 9h2V7H3v2zm12 12h2v-2h-2v2zm4-18H9c-1.11 0-2 .9-2 2v10c0 1.1.89 2 2 2h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12H9V5h10v10zm-8 6h2v-2h-2v2zm-4 0h2v-2H7v2z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})});const jy=(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"})});function zy(){return jy}(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M12 5.69l5 4.5V18h-2v-6H9v6H7v-7.81l5-4.5M12 3L2 12h3v8h6v-6h2v6h6v-8h3L12 3z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M19.5 9.5c-1.03 0-1.9.62-2.29 1.5h-2.92c-.39-.88-1.26-1.5-2.29-1.5s-1.9.62-2.29 1.5H6.79c-.39-.88-1.26-1.5-2.29-1.5C3.12 9.5 2 10.62 2 12s1.12 2.5 2.5 2.5c1.03 0 1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5s1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5 1.38 0 2.5-1.12 2.5-2.5s-1.12-2.5-2.5-2.5z"})});const Hy=(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})});function Vy(){return Hy}(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2zm-7 6l-4 4h3v6h2v-6h3l-4-4z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M8 5v14l11-7z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M19 13H5v-2h14v2z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",strokeWidth:"0.1px",children:(0,ct.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm2 16H5V5h11.17L19 7.83V19zm-7-7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zM6 6h9v4H6z"})});(0,ct.jsxs)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:[(0,ct.jsx)("circle",{cx:"7",cy:"14",r:"3"}),(0,ct.jsx)("circle",{cx:"11",cy:"6",r:"3"}),(0,ct.jsx)("circle",{cx:"16.6",cy:"17.6",r:"3"})]});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M6 6h12v12H6z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M4 6h16v2H4zm2-4h12v2H6zm14 8H4c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2zm0 10H4v-8h16v8zm-10-7.27v6.53L16 16z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M21 4H7V2H5v20h2v-8h14l-2-5zm-6 5c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5-.59 1.22-1.42 2.27-2.41 3.12l1.41 1.41c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l1.65 1.65C10.66 6.09 11.32 6 12 6zm-1.07 1.14L13 9.21c.57.25 1.03.71 1.28 1.28l2.07 2.07c.08-.34.14-.7.14-1.07C16.5 9.01 14.48 7 12 7c-.37 0-.72.05-1.07.14zM2.01 3.87l2.68 2.68C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.98-.29 4.32-.82l3.42 3.42 1.41-1.41L3.42 2.45 2.01 3.87zm7.5 7.5l2.61 2.61c-.04.01-.08.02-.12.02-1.38 0-2.5-1.12-2.5-2.5 0-.05.01-.08.01-.13zm-3.4-3.4l1.75 1.75c-.23.55-.36 1.15-.36 1.78 0 2.48 2.02 4.5 4.5 4.5.63 0 1.23-.13 1.77-.36l.98.98c-.88.24-1.8.38-2.75.38-3.79 0-7.17-2.13-8.82-5.5.7-1.43 1.72-2.61 2.93-3.53z"})}),(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M4 4h16v12H5.17L4 17.17zm0-2c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm2 10h8v2H6zm0-3h12v2H6zm0-3h12v2H6z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10H7v-2h10z"})});(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7z"})});const qy=(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})});function Yy(){return qy}(0,ct.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:(0,ct.jsx)("path",{d:"M 9.64 7.64 c 0.23 -0.5 0.36 -1.05 0.36 -1.64 c 0 -2.21 -1.79 -4 -4 -4 S 2 3.79 2 6 s 1.79 4 4 4 c 0.59 0 1.14 -0.13 1.64 -0.36 L 10 12 l -2.36 2.36 C 7.14 14.13 6.59 14 6 14 c -2.21 0 -4 1.79 -4 4 s 1.79 4 4 4 s 4 -1.79 4 -4 c 0 -0.59 -0.13 -1.14 -0.36 -1.64 L 12 14 l 7 7 h 3 v -1 L 9.64 7.64 Z M 6 8 c -1.1 0 -2 -0.89 -2 -2 s 0.9 -2 2 -2 s 2 0.89 2 2 s -0.9 2 -2 2 Z m 0 12 c -1.1 0 -2 -0.89 -2 -2 s 0.9 -2 2 -2 s 2 0.89 2 2 s -0.9 2 -2 2 Z m 6 -7.5 c -0.28 0 -0.5 -0.22 -0.5 -0.5 s 0.22 -0.5 0.5 -0.5 s 0.5 0.22 0.5 0.5 s -0.22 0.5 -0.5 0.5 Z M 19 3 l -6 6 l 2 2 l 7 -7 V 3 Z"})});class Xy extends F.Component{constructor(){super(...arguments),this.state={isExpanded:!!this.props.initialExpanded},this.headerClicked=()=>{this.props.onHeaderClick?this.props.onHeaderClick():this.setState({isExpanded:!this.state.isExpanded})}}render(){let e=this.props.hideOffset?"msp-control-group-children":"msp-control-group-children msp-control-offset";return this.props.childrenClassName&&(e+=" "+this.props.childrenClassName),(0,ct.jsxs)("div",{className:"msp-control-group-wrapper",style:{position:"relative",marginTop:this.props.noTopMargin?0:void 0},children:[(0,ct.jsx)("div",{className:"msp-control-group-header",style:{marginLeft:this.props.headerLeftMargin},title:this.props.title,children:(0,ct.jsxs)(Jy,{onClick:this.headerClicked,children:[!this.props.hideExpander&&(0,ct.jsx)(vy,{svg:this.state.isExpanded?Dy:_y}),this.props.topRightIcon&&(0,ct.jsx)(vy,{svg:this.props.topRightIcon,style:{position:"absolute",right:"2px",top:0}}),(0,ct.jsx)("b",{children:this.props.header})]})}),this.state.isExpanded&&(0,ct.jsx)("div",{className:e,style:{display:this.state.isExpanded?"block":"none",maxHeight:this.props.maxHeight,overflow:"hidden",overflowY:"auto"},children:this.props.children})]})}}function Wy(e){return e}class Ky extends F.PureComponent{constructor(){super(...arguments),this.input=F.createRef(),this.delayHandle=void 0,this.pendingValue=void 0,this.state={originalValue:"",value:""},this.onBlur=()=>{this.setState({value:""+this.state.originalValue}),this.props.onBlur&&this.props.onBlur()},this.raiseOnChange=()=>{void 0!==this.pendingValue&&(this.props.onChange(this.pendingValue),this.pendingValue=void 0)},this.onChange=e=>{const t=e.target.value;if(this.props.isValid&&!this.props.isValid(t)||this.props.numeric&&Number.isNaN(+t))return this.clearTimeout(),void this.setState({value:t});if(this.props.numeric)this.setState({value:t},(()=>this.triggerChanged(t,+t)));else{const e=(this.props.toValue||Wy)(t),n=(this.props.fromValue||Wy)(e);this.setState({value:n},(()=>this.triggerChanged(n,e)))}},this.onKeyUp=e=>{27!==e.charCode&&27!==e.keyCode&&"Escape"!==e.key||this.props.blurOnEscape&&this.input.current&&this.input.current.blur()},this.onKeyPress=e=>{13!==e.keyCode&&13!==e.charCode&&"Enter"!==e.key||(this.isPending&&(this.clearTimeout(),this.raiseOnChange()),this.props.blurOnEnter&&this.input.current&&this.input.current.blur(),this.props.onEnter&&this.props.onEnter()),e.stopPropagation()}}get isPending(){return"undefined"!==typeof this.delayHandle}clearTimeout(){this.isPending&&(clearTimeout(this.delayHandle),this.delayHandle=void 0)}triggerChanged(e,t){this.clearTimeout(),e!==this.state.originalValue&&(this.props.delayMs?(this.pendingValue=t,this.delayHandle=setTimeout(this.raiseOnChange,this.props.delayMs)):this.props.onChange(t))}static getDerivedStateFromProps(e,t){const n=e.fromValue?e.fromValue(e.value):e.value;return n===t.originalValue?null:{originalValue:n,value:n}}render(){return(0,ct.jsx)("input",{type:"text",className:this.props.className,style:this.props.style,ref:this.input,onBlur:this.onBlur,value:this.state.value,placeholder:this.props.placeholder,onChange:this.onChange,onKeyPress:this.props.onEnter||this.props.blurOnEnter||this.props.blurOnEscape?this.onKeyPress:void 0,onKeyDown:this.props.blurOnEscape?this.onKeyUp:void 0,disabled:!!this.props.isDisabled})}}F.Component;function Jy(e){let t,n="msp-btn";return e.inline||(n+=" msp-btn-block"),e.noOverflow&&(n+=" msp-no-overflow"),e.flex&&(n+=" msp-flex-item"),("on"===e.commit||e.commit)&&(n+=" msp-btn-commit msp-btn-commit-on"),"off"===e.commit&&(n+=" msp-btn-commit msp-btn-commit-off"),e.children||(n+=" msp-btn-childless"),e.className&&(n+=" "+e.className),e.flex&&("number"===typeof e.flex?t={flex:`0 0 ${e.flex}px`,padding:0,maxWidth:`${e.flex}px`}:"string"===typeof e.flex&&(t={flex:`0 0 ${e.flex}`,padding:0,maxWidth:e.flex})),e.style&&(t?Object.assign(t,e.style):t=e.style),(0,ct.jsxs)("button",{onClick:e.onClick,title:e.title,disabled:e.disabled,style:t,className:n,"data-id":e["data-id"],"data-color":e["data-color"],onContextMenu:e.onContextMenu,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,children:[e.icon&&(0,ct.jsx)(vy,{svg:e.icon}),e.children]})}function Zy(e){let t,n=`msp-btn msp-btn-icon${e.small?"-small":""}${e.className?" "+e.className:""}`;return"undefined"!==typeof e.toggleState&&(n+=" msp-btn-link-toggle-"+(e.toggleState?"on":"off")),e.transparent&&(n+=" msp-transparent-bg"),e.flex&&(t="boolean"===typeof e.flex?{flex:"0 0 32px",padding:0}:"number"===typeof e.flex?{flex:`0 0 ${e.flex}px`,padding:0,maxWidth:`${e.flex}px`}:{flex:`0 0 ${e.flex}`,padding:0,maxWidth:e.flex}),e.style&&(t?Object.assign(t,e.style):t=e.style),(0,ct.jsxs)("button",{className:n,onClick:e.onClick,title:e.title,disabled:e.disabled,"data-id":e["data-id"],style:t,children:[e.svg&&(0,ct.jsx)(vy,{svg:e.svg}),e.extraContent]})}class $y extends F.PureComponent{constructor(){super(...arguments),this.onClick=e=>{e.currentTarget.blur(),this.props.toggle()}}render(){const e=this.props,t=e.label,n=e.isSelected?`${e.className||""} msp-control-current`:e.className;return(0,ct.jsx)(Jy,{icon:this.props.icon,onClick:this.onClick,title:this.props.title,inline:this.props.inline,disabled:e.disabled,style:e.style,className:n,children:t&&this.props.isSelected?(0,ct.jsx)("b",{children:t}):t})}}class ev extends F.PureComponent{constructor(){super(...arguments),this.state={isExpanded:!!this.props.initiallyExpanded},this.toggleExpanded=()=>this.setState({isExpanded:!this.state.isExpanded})}render(){return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)("div",{className:"msp-control-group-header",style:{marginTop:void 0!==this.props.marginTop?this.props.marginTop:"1px",marginLeft:this.props.headerLeftMargin},children:(0,ct.jsxs)("button",{className:"msp-btn msp-form-control msp-btn-block",onClick:this.toggleExpanded,style:this.props.headerStyle,children:[(0,ct.jsx)(vy,{svg:this.state.isExpanded?_y:Dy}),this.props.header]})}),this.state.isExpanded&&(this.props.noOffset?this.props.children:(0,ct.jsx)("div",{className:this.props.accent?"msp-accent-offset":"msp-control-offset",children:this.props.children}))]})}}function tv(e){let t="msp-control-row";return e.className&&(t+=" "+e.className),(0,ct.jsxs)("div",{className:t,children:[(0,ct.jsx)("span",{className:"msp-control-row-label",title:e.title,children:e.label}),(0,ct.jsx)("div",{className:"msp-control-row-ctrl",children:e.control}),e.children]})}const nv=F.createContext(void 0);class rv extends F.Component{subscribe(e,t){"undefined"===typeof this.subs&&(this.subs=[]),this.subs.push(e.subscribe(t))}componentWillUnmount(){if(this.subs){for(const e of this.subs)e.unsubscribe();this.subs=void 0}}constructor(e,t){super(e),this.subs=void 0,this.plugin=t,this.init&&this.init()}}rv.contextType=nv;class ov extends F.PureComponent{subscribe(e,t){"undefined"===typeof this.subs&&(this.subs=[]),this.subs.push(e.subscribe(t))}componentWillUnmount(){if(this.subs){for(const e of this.subs)e.unsubscribe();this.subs=void 0}}constructor(e,t){super(e,t),this.subs=void 0,this.plugin=t,this.init&&this.init()}}ov.contextType=nv;class iv{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function av(e,t){const n={},r={};let o=-1;for(;++o<e.length;)Object.assign(n,e[o].property),Object.assign(r,e[o].normal);return new iv(n,r,t)}function sv(e){return e.toLowerCase()}iv.prototype.property={},iv.prototype.normal={},iv.prototype.space=null;class lv{constructor(e,t){this.property=e,this.attribute=t}}lv.prototype.space=null,lv.prototype.boolean=!1,lv.prototype.booleanish=!1,lv.prototype.overloadedBoolean=!1,lv.prototype.number=!1,lv.prototype.commaSeparated=!1,lv.prototype.spaceSeparated=!1,lv.prototype.commaOrSpaceSeparated=!1,lv.prototype.mustUseProperty=!1,lv.prototype.defined=!1;let cv=0;const uv=mv(),dv=mv(),Av=mv(),fv=mv(),pv=mv(),hv=mv(),gv=mv();function mv(){return 2**++cv}const yv=Object.keys(d);class vv extends lv{constructor(e,t,n,r){let o=-1;if(super(e,t),bv(this,"space",r),"number"===typeof n)for(;++o<yv.length;){const e=yv[o];bv(this,yv[o],(n&d[e])===d[e])}}}function bv(e,t,n){n&&(e[t]=n)}vv.prototype.defined=!0;const Cv={}.hasOwnProperty;function Iv(e){const t={},n={};let r;for(r in e.properties)if(Cv.call(e.properties,r)){const o=e.properties[r],i=new vv(r,e.transform(e.attributes||{},r),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[sv(r)]=r,n[sv(i.attribute)]=r}return new iv(t,n,e.space)}const Ev=Iv({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),xv=Iv({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Bv(e,t){return t in e?e[t]:t}function wv(e,t){return Bv(e,t.toLowerCase())}const _v=Iv({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:wv,properties:{xmlns:null,xmlnsXLink:null}}),Sv=Iv({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:dv,ariaAutoComplete:null,ariaBusy:dv,ariaChecked:dv,ariaColCount:fv,ariaColIndex:fv,ariaColSpan:fv,ariaControls:pv,ariaCurrent:null,ariaDescribedBy:pv,ariaDetails:null,ariaDisabled:dv,ariaDropEffect:pv,ariaErrorMessage:null,ariaExpanded:dv,ariaFlowTo:pv,ariaGrabbed:dv,ariaHasPopup:null,ariaHidden:dv,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:pv,ariaLevel:fv,ariaLive:null,ariaModal:dv,ariaMultiLine:dv,ariaMultiSelectable:dv,ariaOrientation:null,ariaOwns:pv,ariaPlaceholder:null,ariaPosInSet:fv,ariaPressed:dv,ariaReadOnly:dv,ariaRelevant:null,ariaRequired:dv,ariaRoleDescription:pv,ariaRowCount:fv,ariaRowIndex:fv,ariaRowSpan:fv,ariaSelected:dv,ariaSetSize:fv,ariaSort:null,ariaValueMax:fv,ariaValueMin:fv,ariaValueNow:fv,ariaValueText:null,role:null}}),Dv=Iv({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:wv,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:hv,acceptCharset:pv,accessKey:pv,action:null,allow:null,allowFullScreen:uv,allowPaymentRequest:uv,allowUserMedia:uv,alt:null,as:null,async:uv,autoCapitalize:null,autoComplete:pv,autoFocus:uv,autoPlay:uv,blocking:pv,capture:null,charSet:null,checked:uv,cite:null,className:pv,cols:fv,colSpan:null,content:null,contentEditable:dv,controls:uv,controlsList:pv,coords:fv|hv,crossOrigin:null,data:null,dateTime:null,decoding:null,default:uv,defer:uv,dir:null,dirName:null,disabled:uv,download:Av,draggable:dv,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:uv,formTarget:null,headers:pv,height:fv,hidden:uv,high:fv,href:null,hrefLang:null,htmlFor:pv,httpEquiv:pv,id:null,imageSizes:null,imageSrcSet:null,inert:uv,inputMode:null,integrity:null,is:null,isMap:uv,itemId:null,itemProp:pv,itemRef:pv,itemScope:uv,itemType:pv,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:uv,low:fv,manifest:null,max:null,maxLength:fv,media:null,method:null,min:null,minLength:fv,multiple:uv,muted:uv,name:null,nonce:null,noModule:uv,noValidate:uv,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:uv,optimum:fv,pattern:null,ping:pv,placeholder:null,playsInline:uv,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:uv,referrerPolicy:null,rel:pv,required:uv,reversed:uv,rows:fv,rowSpan:fv,sandbox:pv,scope:null,scoped:uv,seamless:uv,selected:uv,shadowRootClonable:uv,shadowRootDelegatesFocus:uv,shadowRootMode:null,shape:null,size:fv,sizes:null,slot:null,span:fv,spellCheck:dv,src:null,srcDoc:null,srcLang:null,srcSet:null,start:fv,step:null,style:null,tabIndex:fv,target:null,title:null,translate:null,type:null,typeMustMatch:uv,useMap:null,value:dv,width:fv,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:pv,axis:null,background:null,bgColor:null,border:fv,borderColor:null,bottomMargin:fv,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:uv,declare:uv,event:null,face:null,frame:null,frameBorder:null,hSpace:fv,leftMargin:fv,link:null,longDesc:null,lowSrc:null,marginHeight:fv,marginWidth:fv,noResize:uv,noHref:uv,noShade:uv,noWrap:uv,object:null,profile:null,prompt:null,rev:null,rightMargin:fv,rules:null,scheme:null,scrolling:dv,standby:null,summary:null,text:null,topMargin:fv,valueType:null,version:null,vAlign:null,vLink:null,vSpace:fv,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:uv,disableRemotePlayback:uv,prefix:null,property:null,results:fv,security:null,unselectable:null}}),Tv=Iv({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Bv,properties:{about:gv,accentHeight:fv,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:fv,amplitude:fv,arabicForm:null,ascent:fv,attributeName:null,attributeType:null,azimuth:fv,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:fv,by:null,calcMode:null,capHeight:fv,className:pv,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:fv,diffuseConstant:fv,direction:null,display:null,dur:null,divisor:fv,dominantBaseline:null,download:uv,dx:null,dy:null,edgeMode:null,editable:null,elevation:fv,enableBackground:null,end:null,event:null,exponent:fv,externalResourcesRequired:null,fill:null,fillOpacity:fv,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:hv,g2:hv,glyphName:hv,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:fv,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:fv,horizOriginX:fv,horizOriginY:fv,id:null,ideographic:fv,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:fv,k:fv,k1:fv,k2:fv,k3:fv,k4:fv,kernelMatrix:gv,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:fv,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:fv,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:fv,overlineThickness:fv,paintOrder:null,panose1:null,path:null,pathLength:fv,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:pv,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:fv,pointsAtY:fv,pointsAtZ:fv,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:gv,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:gv,rev:gv,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:gv,requiredFeatures:gv,requiredFonts:gv,requiredFormats:gv,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:fv,specularExponent:fv,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:fv,strikethroughThickness:fv,string:null,stroke:null,strokeDashArray:gv,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:fv,strokeOpacity:fv,strokeWidth:null,style:null,surfaceScale:fv,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:gv,tabIndex:fv,tableValues:null,target:null,targetX:fv,targetY:fv,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:gv,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:fv,underlineThickness:fv,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:fv,values:null,vAlphabetic:fv,vMathematical:fv,vectorEffect:null,vHanging:fv,vIdeographic:fv,version:null,vertAdvY:fv,vertOriginX:fv,vertOriginY:fv,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:fv,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}});av([xv,Ev,_v,Sv,Dv],"html"),av([xv,Ev,_v,Sv,Tv],"svg");var kv=n(222);kv.default,Qv("end"),Qv("start");function Qv(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"===typeof n.line&&n.line>0&&"number"===typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"===typeof n.offset&&n.offset>-1?n.offset:void 0}}}function Mv(e){return e&&"object"===typeof e?"position"in e||"type"in e?Pv(e.position):"start"in e||"end"in e?Pv(e):"line"in e||"column"in e?Rv(e):"":""}function Rv(e){return Ov(e&&e.line)+":"+Ov(e&&e.column)}function Pv(e){return Rv(e&&e.start)+"-"+Rv(e&&e.end)}function Ov(e){return e&&"number"===typeof e?e:1}class Fv extends Error{constructor(e,t,n){super(),"string"===typeof t&&(n=t,t=void 0);let r="",o={},i=!1;if(t&&(o="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"===typeof e?r=e:!o.cause&&e&&(i=!0,r=e.message,o.cause=e),!o.ruleId&&!o.source&&"string"===typeof n){const e=n.indexOf(":");-1===e?o.ruleId=n:(o.source=n.slice(0,e),o.ruleId=n.slice(e+1))}if(!o.place&&o.ancestors&&o.ancestors){const e=o.ancestors[o.ancestors.length-1];e&&(o.place=e.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=a?a.line:void 0,this.name=Mv(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=i&&o.cause&&"string"===typeof o.cause.stack?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}Fv.prototype.file="",Fv.prototype.name="",Fv.prototype.reason="",Fv.prototype.message="",Fv.prototype.stack="",Fv.prototype.column=void 0,Fv.prototype.line=void 0,Fv.prototype.ancestors=void 0,Fv.prototype.cause=void 0,Fv.prototype.fatal=void 0,Fv.prototype.place=void 0,Fv.prototype.ruleId=void 0,Fv.prototype.source=void 0;new Map,new Set(["table","tbody","thead","tfoot","tr"]),new Set(["td","th"]);function Nv(e,t,n,r){const o=e.length;let i,a=0;if(t=t<0?-t>o?0:o+t:t>o?o:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);a<r.length;)i=r.slice(a,a+1e4),i.unshift(t,0),e.splice(...i),a+=1e4,t+=1e4}function Lv(e,t){return e.length>0?(Nv(e,e.length,0,t),e):t}const Uv=Zv(/[A-Za-z]/),Gv=Zv(/[\dA-Za-z]/),jv=Zv(/[#-'*+\--9=?A-Z^-~]/);function zv(e){return null!==e&&(e<32||127===e)}const Hv=Zv(/\d/),Vv=Zv(/[\dA-Fa-f]/),qv=Zv(/[!-/:-@[-`{-~]/);function Yv(e){return null!==e&&e<-2}function Xv(e){return null!==e&&(e<0||32===e)}function Wv(e){return-2===e||-1===e||32===e}const Kv=Zv(/\p{P}|\p{S}/u),Jv=Zv(/\s/);function Zv(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function $v(e,t,n,r){const o=r?r-1:Number.POSITIVE_INFINITY;let i=0;return function(r){if(Wv(r))return e.enter(n),a(r);return t(r)};function a(r){return Wv(r)&&i++<o?(e.consume(r),a):(e.exit(n),t(r))}}const eb={tokenize:function(e,t,n){return function(t){return Wv(t)?$v(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||Yv(e)?t(e):n(e)}},partial:!0};const tb={resolveAll:rb()};nb("string"),nb("text");function nb(e){return{tokenize:function(t){const n=this,r=this.parser.constructs[e],o=t.attempt(r,i,a);return i;function i(e){return l(e)?o(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return l(e)?(t.exit("data"),o(e)):(t.consume(e),s)}function l(e){if(null===e)return!0;const t=r[e];let o=-1;if(t)for(;++o<t.length;){const e=t[o];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}},resolveAll:rb("text"===e?ob:void 0)}}function rb(e){return function(t,n){let r,o=-1;for(;++o<=t.length;)void 0===r?t[o]&&"data"===t[o][1].type&&(r=o,o++):t[o]&&"data"===t[o][1].type||(o!==r+2&&(t[r][1].end=t[o-1][1].end,t.splice(r+2,o-r-2),o=r+2),r=void 0);return e?e(t,n):t}}function ob(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],o=t.sliceStream(r);let i,a=o.length,s=-1,l=0;for(;a--;){const e=o[a];if("string"===typeof e){for(s=e.length;32===e.charCodeAt(s-1);)l++,s--;if(s)break;s=-1}else if(-2===e)i=!0,l++;else if(-1!==e){a++;break}}if(l){const o={type:n===e.length||i||l<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-l,offset:r.end.offset-l,_index:r.start._index+a,_bufferIndex:a?s:r.start._bufferIndex+s},end:Object.assign({},r.end)};r.end=Object.assign({},o.start),r.start.offset===r.end.offset?Object.assign(r,o):(e.splice(n,0,["enter",o,t],["exit",o,t]),n+=2)}n++}return e}function ib(e,t,n){const r=[];let o=-1;for(;++o<e.length;){const i=e[o].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const ab={name:"thematicBreak",tokenize:function(e,t,n){let r,o=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,i(e)}(t)};function i(i){return i===r?(e.enter("thematicBreakSequence"),a(i)):o>=3&&(null===i||Yv(i))?(e.exit("thematicBreak"),t(i)):n(i)}function a(t){return t===r?(e.consume(t),o++,a):(e.exit("thematicBreakSequence"),Wv(t)?$v(e,i,"whitespace")(t):i(t))}}};const sb={name:"list",tokenize:function(e,t,n){const r=this,o=r.events[r.events.length-1];let i=o&&"linePrefix"===o[1].type?o[2].sliceSerialize(o[1],!0).length:0,a=0;return function(t){const o=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===o?!r.containerState.marker||t===r.containerState.marker:Hv(t)){if(r.containerState.type||(r.containerState.type=o,e.enter(o,{_container:!0})),"listUnordered"===o)return e.enter("listItemPrefix"),42===t||45===t?e.check(ab,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return Hv(t)&&++a<10?(e.consume(t),s):(!r.interrupt||a<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(eb,r.interrupt?n:c,e.attempt(lb,d,u))}function c(e){return r.containerState.initialBlankLine=!0,i++,d(e)}function u(t){return Wv(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(eb,o,i);function o(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,$v(e,t,"listItemIndent",r.containerState.size+1)(n)}function i(n){return r.containerState.furtherBlankLines||!Wv(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(cb,t,a)(n))}function a(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,$v(e,e.attempt(sb,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}},exit:function(e){e.exit(this.containerState.type)}},lb={tokenize:function(e,t,n){const r=this;return $v(e,(function(e){const o=r.events[r.events.length-1];return!Wv(e)&&o&&"listItemPrefixWhitespace"===o[1].type?t(e):n(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},cb={tokenize:function(e,t,n){const r=this;return $v(e,(function(e){const o=r.events[r.events.length-1];return o&&"listItemIndent"===o[1].type&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)},partial:!0};const ub={name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),o}return n(t)};function o(n){return Wv(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(Wv(t))return $v(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return o(t)};function o(r){return e.attempt(ub,t,n)(r)}}},exit:function(e){e.exit("blockQuote")}};function db(e,t,n,r,o,i,a,s,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(r),e.enter(o),e.enter(i),e.consume(t),e.exit(i),d;if(null===t||32===t||41===t||zv(t))return n(t);return e.enter(r),e.enter(a),e.enter(s),e.enter("chunkString",{contentType:"string"}),p(t)};function d(n){return 62===n?(e.enter(i),e.consume(n),e.exit(i),e.exit(o),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),A(n))}function A(t){return 62===t?(e.exit("chunkString"),e.exit(s),d(t)):null===t||60===t||Yv(t)?n(t):(e.consume(t),92===t?f:A)}function f(t){return 60===t||62===t||92===t?(e.consume(t),A):A(t)}function p(o){return u||null!==o&&41!==o&&!Xv(o)?u<c&&40===o?(e.consume(o),u++,p):41===o?(e.consume(o),u--,p):null===o||32===o||40===o||zv(o)?n(o):(e.consume(o),92===o?h:p):(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(r),t(o))}function h(t){return 40===t||41===t||92===t?(e.consume(t),p):p(t)}}function Ab(e,t,n,r,o,i){const a=this;let s,l=0;return function(t){return e.enter(r),e.enter(o),e.consume(t),e.exit(o),e.enter(i),c};function c(d){return l>999||null===d||91===d||93===d&&!s||94===d&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(d):93===d?(e.exit(i),e.enter(o),e.consume(d),e.exit(o),e.exit(r),t):Yv(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(t){return null===t||91===t||93===t||Yv(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),s||(s=!Wv(t)),92===t?d:u)}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function fb(e,t,n,r,o,i){let a;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(o),e.consume(t),e.exit(o),a=40===t?41:t,s;return n(t)};function s(n){return n===a?(e.enter(o),e.consume(n),e.exit(o),e.exit(r),t):(e.enter(i),l(n))}function l(t){return t===a?(e.exit(i),s(a)):null===t?n(t):Yv(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),$v(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===a||null===t||Yv(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===a||92===t?(e.consume(t),c):c(t)}}function pb(e,t){let n;return function r(o){if(Yv(o))return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n=!0,r;if(Wv(o))return $v(e,r,n?"linePrefix":"lineSuffix")(o);return t(o)}}function hb(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const gb={name:"definition",tokenize:function(e,t,n){const r=this;let o;return function(t){return e.enter("definition"),function(t){return Ab.call(r,e,i,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function i(t){return o=hb(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a):n(t)}function a(t){return Xv(t)?pb(e,s)(t):s(t)}function s(t){return db(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(mb,c,c)(t)}function c(t){return Wv(t)?$v(e,u,"whitespace")(t):u(t)}function u(i){return null===i||Yv(i)?(e.exit("definition"),r.parser.defined.push(o),t(i)):n(i)}}},mb={tokenize:function(e,t,n){return function(t){return Xv(t)?pb(e,r)(t):n(t)};function r(t){return fb(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function o(t){return Wv(t)?$v(e,i,"whitespace")(t):i(t)}function i(e){return null===e||Yv(e)?t(e):n(e)}},partial:!0};const yb={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),$v(e,o,"linePrefix",5)(t)};function o(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?i(e):n(e)}function i(t){return null===t?s(t):Yv(t)?e.attempt(vb,i,s)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||Yv(t)?(e.exit("codeFlowValue"),i(t)):(e.consume(t),a)}function s(n){return e.exit("codeIndented"),t(n)}}},vb={tokenize:function(e,t,n){const r=this;return o;function o(t){return r.parser.lazy[r.now().line]?n(t):Yv(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):$v(e,i,"linePrefix",5)(t)}function i(e){const i=r.events[r.events.length-1];return i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(e):Yv(e)?o(e):n(e)}},partial:!0};const bb={name:"headingAtx",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),o(t)}(t)};function o(t){return 35===t&&r++<6?(e.consume(t),o):null===t||Xv(t)?(e.exit("atxHeadingSequence"),i(t)):n(t)}function i(n){return 35===n?(e.enter("atxHeadingSequence"),a(n)):null===n||Yv(n)?(e.exit("atxHeading"),t(n)):Wv(n)?$v(e,i,"whitespace")(n):(e.enter("atxHeadingText"),s(n))}function a(t){return 35===t?(e.consume(t),a):(e.exit("atxHeadingSequence"),i(t))}function s(t){return null===t||35===t||Xv(t)?(e.exit("atxHeadingText"),i(t)):(e.consume(t),s)}},resolve:function(e,t){let n,r,o=e.length-2,i=3;"whitespace"===e[i][1].type&&(i+=2);o-2>i&&"whitespace"===e[o][1].type&&(o-=2);"atxHeadingSequence"===e[o][1].type&&(i===o-1||o-4>i&&"whitespace"===e[o-2][1].type)&&(o-=i+1===o?2:4);o>i&&(n={type:"atxHeadingText",start:e[i][1].start,end:e[o][1].end},r={type:"chunkText",start:e[i][1].start,end:e[o][1].end,contentType:"text"},Nv(e,i,o-i+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e}};const Cb={name:"setextUnderline",tokenize:function(e,t,n){const r=this;let o;return function(t){let a,s=r.events.length;for(;s--;)if("lineEnding"!==r.events[s][1].type&&"linePrefix"!==r.events[s][1].type&&"content"!==r.events[s][1].type){a="paragraph"===r.events[s][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||a))return e.enter("setextHeadingLine"),o=t,function(t){return e.enter("setextHeadingLineSequence"),i(t)}(t);return n(t)};function i(t){return t===o?(e.consume(t),i):(e.exit("setextHeadingLineSequence"),Wv(t)?$v(e,a,"lineSuffix")(t):a(t))}function a(r){return null===r||Yv(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){let n,r,o,i=e.length;for(;i--;)if("enter"===e[i][0]){if("content"===e[i][1].type){n=i;break}"paragraph"===e[i][1].type&&(r=i)}else"content"===e[i][1].type&&e.splice(i,1),o||"definition"!==e[i][1].type||(o=i);const a={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",o?(e.splice(r,0,["enter",a,t]),e.splice(o+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[o][1].end)):e[n][1]=a;return e.push(["exit",a,t]),e}};const Ib=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Eb=["pre","script","style","textarea"],xb={name:"htmlFlow",tokenize:function(e,t,n){const r=this;let o,i,a,s,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(s){return 33===s?(e.consume(s),u):47===s?(e.consume(s),i=!0,f):63===s?(e.consume(s),o=3,r.interrupt?t:R):Uv(s)?(e.consume(s),a=String.fromCharCode(s),p):n(s)}function u(i){return 45===i?(e.consume(i),o=2,d):91===i?(e.consume(i),o=5,s=0,A):Uv(i)?(e.consume(i),o=4,r.interrupt?t:R):n(i)}function d(o){return 45===o?(e.consume(o),r.interrupt?t:R):n(o)}function A(o){const i="CDATA[";return o===i.charCodeAt(s++)?(e.consume(o),6===s?r.interrupt?t:w:A):n(o)}function f(t){return Uv(t)?(e.consume(t),a=String.fromCharCode(t),p):n(t)}function p(s){if(null===s||47===s||62===s||Xv(s)){const l=47===s,c=a.toLowerCase();return l||i||!Eb.includes(c)?Ib.includes(a.toLowerCase())?(o=6,l?(e.consume(s),h):r.interrupt?t(s):w(s)):(o=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(s):i?g(s):m(s)):(o=1,r.interrupt?t(s):w(s))}return 45===s||Gv(s)?(e.consume(s),a+=String.fromCharCode(s),p):n(s)}function h(o){return 62===o?(e.consume(o),r.interrupt?t:w):n(o)}function g(t){return Wv(t)?(e.consume(t),g):x(t)}function m(t){return 47===t?(e.consume(t),x):58===t||95===t||Uv(t)?(e.consume(t),y):Wv(t)?(e.consume(t),m):x(t)}function y(t){return 45===t||46===t||58===t||95===t||Gv(t)?(e.consume(t),y):v(t)}function v(t){return 61===t?(e.consume(t),b):Wv(t)?(e.consume(t),v):m(t)}function b(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,C):Wv(t)?(e.consume(t),b):I(t)}function C(t){return t===l?(e.consume(t),l=null,E):null===t||Yv(t)?n(t):(e.consume(t),C)}function I(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||Xv(t)?v(t):(e.consume(t),I)}function E(e){return 47===e||62===e||Wv(e)?m(e):n(e)}function x(t){return 62===t?(e.consume(t),B):n(t)}function B(t){return null===t||Yv(t)?w(t):Wv(t)?(e.consume(t),B):n(t)}function w(t){return 45===t&&2===o?(e.consume(t),T):60===t&&1===o?(e.consume(t),k):62===t&&4===o?(e.consume(t),P):63===t&&3===o?(e.consume(t),R):93===t&&5===o?(e.consume(t),M):!Yv(t)||6!==o&&7!==o?null===t||Yv(t)?(e.exit("htmlFlowData"),_(t)):(e.consume(t),w):(e.exit("htmlFlowData"),e.check(Bb,O,_)(t))}function _(t){return e.check(wb,S,O)(t)}function S(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),D}function D(t){return null===t||Yv(t)?_(t):(e.enter("htmlFlowData"),w(t))}function T(t){return 45===t?(e.consume(t),R):w(t)}function k(t){return 47===t?(e.consume(t),a="",Q):w(t)}function Q(t){if(62===t){const n=a.toLowerCase();return Eb.includes(n)?(e.consume(t),P):w(t)}return Uv(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),Q):w(t)}function M(t){return 93===t?(e.consume(t),R):w(t)}function R(t){return 62===t?(e.consume(t),P):45===t&&2===o?(e.consume(t),R):w(t)}function P(t){return null===t||Yv(t)?(e.exit("htmlFlowData"),O(t)):(e.consume(t),P)}function O(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},Bb={tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(eb,t,n)}},partial:!0},wb={tokenize:function(e,t,n){const r=this;return function(t){if(Yv(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o;return n(t)};function o(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0};const _b={tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o};function o(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0},Sb={name:"codeFenced",tokenize:function(e,t,n){const r=this,o={tokenize:function(e,t,n){let o=0;return a;function a(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),Wv(t)?$v(e,c,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===i?(e.enter("codeFencedFenceSequence"),u(t)):n(t)}function u(t){return t===i?(o++,e.consume(t),u):o>=s?(e.exit("codeFencedFenceSequence"),Wv(t)?$v(e,d,"whitespace")(t):d(t)):n(t)}function d(r){return null===r||Yv(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0};let i,a=0,s=0;return function(t){return function(t){const n=r.events[r.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,i=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===i?(s++,e.consume(t),l):s<3?n(t):(e.exit("codeFencedFenceSequence"),Wv(t)?$v(e,c,"whitespace")(t):c(t))}function c(n){return null===n||Yv(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(_b,f,y)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||Yv(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):Wv(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),$v(e,d,"whitespace")(t)):96===t&&t===i?n(t):(e.consume(t),u)}function d(t){return null===t||Yv(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),A(t))}function A(t){return null===t||Yv(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===i?n(t):(e.consume(t),A)}function f(t){return e.attempt(o,y,p)(t)}function p(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),h}function h(t){return a>0&&Wv(t)?$v(e,g,"linePrefix",a+1)(t):g(t)}function g(t){return null===t||Yv(t)?e.check(_b,f,y)(t):(e.enter("codeFlowValue"),m(t))}function m(t){return null===t||Yv(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),m)}function y(n){return e.exit("codeFenced"),t(n)}},concrete:!0};const Db=document.createElement("i");function Tb(e){const t="&"+e+";";Db.innerHTML=t;const n=Db.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const kb={name:"characterReference",tokenize:function(e,t,n){const r=this;let o,i,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),o=31,i=Gv,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,i=Vv,c):(e.enter("characterReferenceValue"),o=7,i=Hv,c(t))}function c(s){if(59===s&&a){const o=e.exit("characterReferenceValue");return i!==Gv||Tb(r.sliceSerialize(o))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)}return i(s)&&a++<o?(e.consume(s),c):n(s)}}};const Qb={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return qv(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const Mb={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),$v(e,t,"linePrefix")}}};const Rb={name:"labelEnd",tokenize:function(e,t,n){const r=this;let o,i,a=r.events.length;for(;a--;)if(("labelImage"===r.events[a][1].type||"labelLink"===r.events[a][1].type)&&!r.events[a][1]._balanced){o=r.events[a][1];break}return function(t){if(!o)return n(t);if(o._inactive)return u(t);return i=r.parser.defined.includes(hb(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s};function s(t){return 40===t?e.attempt(Pb,c,i?c:u)(t):91===t?e.attempt(Ob,c,i?l:u)(t):i?c(t):u(t)}function l(t){return e.attempt(Fb,c,u)(t)}function c(e){return t(e)}function u(e){return o._balanced=!0,n(e)}},resolveTo:function(e,t){let n,r,o,i,a=e.length,s=0;for(;a--;)if(n=e[a][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(o){if("enter"===e[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=a,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(o=a);const l={type:"labelLink"===e[r][1].type?"link":"image",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)},c={type:"label",start:Object.assign({},e[r][1].start),end:Object.assign({},e[o][1].end)},u={type:"labelText",start:Object.assign({},e[r+s+2][1].end),end:Object.assign({},e[o-2][1].start)};return i=[["enter",l,t],["enter",c,t]],i=Lv(i,e.slice(r+1,r+s+3)),i=Lv(i,[["enter",u,t]]),i=Lv(i,ib(t.parser.constructs.insideSpan.null,e.slice(r+s+4,o-3),t)),i=Lv(i,[["exit",u,t],e[o-2],e[o-1],["exit",c,t]]),i=Lv(i,e.slice(o+1)),i=Lv(i,[["exit",l,t]]),Nv(e,r,e.length,i),e},resolveAll:function(e){let t=-1;for(;++t<e.length;){const n=e[t][1];"labelImage"!==n.type&&"labelLink"!==n.type&&"labelEnd"!==n.type||(e.splice(t+1,"labelImage"===n.type?4:2),n.type="data",t++)}return e}},Pb={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return Xv(t)?pb(e,o)(t):o(t)}function o(t){return 41===t?c(t):db(e,i,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function i(t){return Xv(t)?pb(e,s)(t):c(t)}function a(e){return n(e)}function s(t){return 34===t||39===t||40===t?fb(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return Xv(t)?pb(e,c)(t):c(t)}function c(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},Ob={tokenize:function(e,t,n){const r=this;return function(t){return Ab.call(r,e,o,i,"reference","referenceMarker","referenceString")(t)};function o(e){return r.parser.defined.includes(hb(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function i(e){return n(e)}}},Fb={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const Nb={name:"labelStartImage",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),o};function o(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),i):n(t)}function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:Rb.resolveAll};function Lb(e){return null===e||Xv(e)||Jv(e)?1:Kv(e)?2:void 0}const Ub={name:"attention",tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,o=Lb(r);let i;return function(t){return i=t,e.enter("attentionSequence"),a(t)};function a(s){if(s===i)return e.consume(s),a;const l=e.exit("attentionSequence"),c=Lb(s),u=!c||2===c&&o||n.includes(s),d=!o||2===o&&c||n.includes(r);return l._open=Boolean(42===i?u:u&&(o||!d)),l._close=Boolean(42===i?d:d&&(c||!u)),t(s)}},resolveAll:function(e,t){let n,r,o,i,a,s,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const d=Object.assign({},e[n][1].end),A=Object.assign({},e[u][1].start);Gb(d,-s),Gb(A,s),i={type:s>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[n][1].end)},a={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[u][1].start),end:A},o={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[u][1].start)},r={type:s>1?"strong":"emphasis",start:Object.assign({},i.start),end:Object.assign({},a.end)},e[n][1].end=Object.assign({},i.start),e[u][1].start=Object.assign({},a.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=Lv(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=Lv(l,[["enter",r,t],["enter",i,t],["exit",i,t],["enter",o,t]]),l=Lv(l,ib(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=Lv(l,[["exit",o,t],["enter",a,t],["exit",a,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=Lv(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,Nv(e,n-1,u-n+3,l),u=n+l.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}};function Gb(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const jb={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o};function o(t){return Uv(t)?(e.consume(t),i):64===t?n(t):l(t)}function i(e){return 43===e||45===e||46===e||Gv(e)?(r=1,a(e)):l(e)}function a(t){return 58===t?(e.consume(t),r=0,s):(43===t||45===t||46===t||Gv(t))&&r++<32?(e.consume(t),a):(r=0,l(t))}function s(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||zv(r)?n(r):(e.consume(r),s)}function l(t){return 64===t?(e.consume(t),c):jv(t)?(e.consume(t),l):n(t)}function c(e){return Gv(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),r=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||Gv(t))&&r++<63){const n=45===t?d:u;return e.consume(t),n}return n(t)}}};const zb={name:"htmlText",tokenize:function(e,t,n){const r=this;let o,i,a;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),s};function s(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),b):63===t?(e.consume(t),y):Uv(t)?(e.consume(t),E):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),i=0,f):Uv(t)?(e.consume(t),m):n(t)}function c(t){return 45===t?(e.consume(t),A):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),d):Yv(t)?(a=u,Q(t)):(e.consume(t),u)}function d(t){return 45===t?(e.consume(t),A):u(t)}function A(e){return 62===e?k(e):45===e?d(e):u(e)}function f(t){const r="CDATA[";return t===r.charCodeAt(i++)?(e.consume(t),6===i?p:f):n(t)}function p(t){return null===t?n(t):93===t?(e.consume(t),h):Yv(t)?(a=p,Q(t)):(e.consume(t),p)}function h(t){return 93===t?(e.consume(t),g):p(t)}function g(t){return 62===t?k(t):93===t?(e.consume(t),g):p(t)}function m(t){return null===t||62===t?k(t):Yv(t)?(a=m,Q(t)):(e.consume(t),m)}function y(t){return null===t?n(t):63===t?(e.consume(t),v):Yv(t)?(a=y,Q(t)):(e.consume(t),y)}function v(e){return 62===e?k(e):y(e)}function b(t){return Uv(t)?(e.consume(t),C):n(t)}function C(t){return 45===t||Gv(t)?(e.consume(t),C):I(t)}function I(t){return Yv(t)?(a=I,Q(t)):Wv(t)?(e.consume(t),I):k(t)}function E(t){return 45===t||Gv(t)?(e.consume(t),E):47===t||62===t||Xv(t)?x(t):n(t)}function x(t){return 47===t?(e.consume(t),k):58===t||95===t||Uv(t)?(e.consume(t),B):Yv(t)?(a=x,Q(t)):Wv(t)?(e.consume(t),x):k(t)}function B(t){return 45===t||46===t||58===t||95===t||Gv(t)?(e.consume(t),B):w(t)}function w(t){return 61===t?(e.consume(t),_):Yv(t)?(a=w,Q(t)):Wv(t)?(e.consume(t),w):x(t)}function _(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),o=t,S):Yv(t)?(a=_,Q(t)):Wv(t)?(e.consume(t),_):(e.consume(t),D)}function S(t){return t===o?(e.consume(t),o=void 0,T):null===t?n(t):Yv(t)?(a=S,Q(t)):(e.consume(t),S)}function D(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||Xv(t)?x(t):(e.consume(t),D)}function T(e){return 47===e||62===e||Xv(e)?x(e):n(e)}function k(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function Q(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),M}function M(t){return Wv(t)?$v(e,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):R(t)}function R(t){return e.enter("htmlTextData"),a(t)}}};const Hb={name:"labelStartLink",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),o};function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:Rb.resolveAll};const Vb={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return Yv(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const qb={name:"codeText",tokenize:function(e,t,n){let r,o,i=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),i++,a):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):96===t?(o=e.enter("codeTextSequence"),r=0,c(t)):Yv(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||Yv(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(o.type="codeTextData",l(n))}},resolve:function(e){let t,n,r=e.length-4,o=3;if(("lineEnding"===e[o][1].type||"space"===e[o][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type))for(t=o;++t<r;)if("codeTextData"===e[t][1].type){e[o][1].type="codeTextPadding",e[r][1].type="codeTextPadding",o+=2,r-=2;break}t=o-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};const Yb={42:sb,43:sb,45:sb,48:sb,49:sb,50:sb,51:sb,52:sb,53:sb,54:sb,55:sb,56:sb,57:sb,62:ub},Xb={91:gb},Wb={[-2]:yb,[-1]:yb,32:yb},Kb={35:bb,42:ab,45:[Cb,ab],60:xb,61:Cb,95:ab,96:Sb,126:Sb},Jb={38:kb,92:Qb},Zb={[-5]:Mb,[-4]:Mb,[-3]:Mb,33:Nb,38:kb,42:Ub,60:[jb,zb],91:Hb,92:[Vb,Qb],93:Rb,95:Ub,96:qb},$b={null:[Ub,tb]},eC={null:[42,95]},tC={null:[]};const nC="object"===typeof self?self:globalThis,rC=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=o=>{if(e.has(o))return e.get(o);const[i,a]=t[o];switch(i){case 0:case-1:return n(a,o);case 1:{const e=n([],o);for(const t of a)e.push(r(t));return e}case 2:{const e=n({},o);for(const[t,n]of a)e[r(t)]=r(n);return e}case 3:return n(new Date(a),o);case 4:{const{source:e,flags:t}=a;return n(new RegExp(e,t),o)}case 5:{const e=n(new Map,o);for(const[t,n]of a)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,o);for(const t of a)e.add(r(t));return e}case 7:{const{name:e,message:t}=a;return n(new nC[e](t),o)}case 8:return n(BigInt(a),o);case"BigInt":return n(Object(BigInt(a)),o)}return n(new nC[i](a),o)};return r})(new Map,e)(0),oC="",{toString:iC}={},{keys:aC}=Object,sC=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=iC.call(e).slice(8,-1);switch(n){case"Array":return[1,oC];case"Object":return[2,oC];case"Date":return[3,oC];case"RegExp":return[4,oC];case"Map":return[5,oC];case"Set":return[6,oC]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},lC=e=>{let[t,n]=e;return 0===t&&("function"===n||"symbol"===n)},cC=function(e){let{json:t,lossy:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];return((e,t,n,r)=>{const o=(e,t)=>{const o=r.push(e)-1;return n.set(t,o),o},i=r=>{if(n.has(r))return n.get(r);let[a,s]=sC(r);switch(a){case 0:{let t=r;switch(s){case"bigint":a=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+s);t=null;break;case"undefined":return o([-1],r)}return o([a,t],r)}case 1:{if(s)return o([s,[...r]],r);const e=[],t=o([a,e],r);for(const n of r)e.push(i(n));return t}case 2:{if(s)switch(s){case"BigInt":return o([s,r.toString()],r);case"Boolean":case"Number":case"String":return o([s,r.valueOf()],r)}if(t&&"toJSON"in r)return i(r.toJSON());const n=[],l=o([a,n],r);for(const t of aC(r))!e&&lC(sC(r[t]))||n.push([i(t),i(r[t])]);return l}case 3:return o([a,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return o([a,{source:e,flags:t}],r)}case 5:{const t=[],n=o([a,t],r);for(const[o,a]of r)(e||!lC(sC(o))&&!lC(sC(a)))&&t.push([i(o),i(a)]);return n}case 6:{const t=[],n=o([a,t],r);for(const o of r)!e&&lC(sC(o))||t.push(i(o));return n}}const{message:l}=r;return o([a,{name:s,message:l}],r)};return i})(!(t||n),!!t,new Map,r)(e),r};function uC(e){if(e)throw e}var dC=n(240);function AC(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function fC(){const e=[],t={run:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let o=-1;const i=n.pop();if("function"!==typeof i)throw new TypeError("Expected function as last argument, not "+i);!function t(r){const a=e[++o];let s=-1;if(r)i(r);else{for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];for(;++s<n.length;)null!==c[s]&&void 0!==c[s]||(c[s]=n[s]);n=c,a?function(e,t){let n;return o;function o(){for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];const l=e.length>o.length;let c;l&&o.push(i);try{c=e.apply(this,o)}catch(r){if(l&&n)throw r;return i(r)}l||(c&&c.then&&"function"===typeof c.then?c.then(a,i):c instanceof Error?i(c):a(c))}function i(e){if(!n){n=!0;for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];t(e,...o)}}function a(e){i(null,e)}}(a,t)(...c):i(null,...c)}}(null,...n)},use:function(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const pC={basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');hC(e);let n,r=0,o=-1,i=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;i--;)if(47===e.codePointAt(i)){if(n){r=i+1;break}}else o<0&&(n=!0,o=i+1);return o<0?"":e.slice(r,o)}if(t===e)return"";let a=-1,s=t.length-1;for(;i--;)if(47===e.codePointAt(i)){if(n){r=i+1;break}}else a<0&&(n=!0,a=i+1),s>-1&&(e.codePointAt(i)===t.codePointAt(s--)?s<0&&(o=i):(s=-1,o=a));r===o?o=a:o<0&&(o=e.length);return e.slice(r,o)},dirname:function(e){if(hC(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){hC(e);let t,n=e.length,r=-1,o=0,i=-1,a=0;for(;n--;){const s=e.codePointAt(n);if(47!==s)r<0&&(t=!0,r=n+1),46===s?i<0?i=n:1!==a&&(a=1):i>-1&&(a=-1);else if(t){o=n+1;break}}if(i<0||r<0||0===a||1===a&&i===r-1&&i===o+1)return"";return e.slice(i,r)},join:function(){let e,t=-1;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(;++t<r.length;)hC(r[t]),r[t]&&(e=void 0===e?r[t]:e+"/"+r[t]);return void 0===e?".":function(e){hC(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,o="",i=0,a=-1,s=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(a===l-1||1===s);else if(a!==l-1&&2===s){if(o.length<2||2!==i||46!==o.codePointAt(o.length-1)||46!==o.codePointAt(o.length-2))if(o.length>2){if(r=o.lastIndexOf("/"),r!==o.length-1){r<0?(o="",i=0):(o=o.slice(0,r),i=o.length-1-o.lastIndexOf("/")),a=l,s=0;continue}}else if(o.length>0){o="",i=0,a=l,s=0;continue}t&&(o=o.length>0?o+"/..":"..",i=2)}else o.length>0?o+="/"+e.slice(a+1,l):o=e.slice(a+1,l),i=l-a-1;a=l,s=0}else 46===n&&s>-1?s++:s=-1}return o}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(e)},sep:"/"};function hC(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const gC={cwd:function(){return"/"}};function mC(e){return Boolean(null!==e&&"object"===typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function yC(e){if("string"===typeof e)e=new URL(e);else if(!mC(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const vC=["history","path","basename","stem","extname","dirname"];class bC{constructor(e){let t;t=e?mC(e)?{path:e}:"string"===typeof e||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":gC.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<vC.length;){const e=vC[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)vC.includes(n)||(this[n]=t[n])}get basename(){return"string"===typeof this.path?pC.basename(this.path):void 0}set basename(e){IC(e,"basename"),CC(e,"basename"),this.path=pC.join(this.dirname||"",e)}get dirname(){return"string"===typeof this.path?pC.dirname(this.path):void 0}set dirname(e){EC(this.basename,"dirname"),this.path=pC.join(e||"",this.basename)}get extname(){return"string"===typeof this.path?pC.extname(this.path):void 0}set extname(e){if(CC(e,"extname"),EC(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=pC.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){mC(e)&&(e=yC(e)),IC(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"===typeof this.path?pC.basename(this.path,this.extname):void 0}set stem(e){IC(e,"stem"),CC(e,"stem"),this.path=pC.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new Fv(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(void 0===this.value)return"";if("string"===typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function CC(e,t){if(e&&e.includes(pC.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+pC.sep+"`")}function IC(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function EC(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const xC=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},BC={}.hasOwnProperty;class wC extends xC{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=fC()}copy(){const e=new wC;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(dC(!0,{},this.namespace)),e}data(e,t){return"string"===typeof e?2===arguments.length?(DC("data",this.frozen),this.namespace[e]=t,this):BC.call(this.namespace,e)&&this.namespace[e]||void 0:e?(DC("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"===typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=QC(e),n=this.parser||this.Parser;return _C("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),_C("process",this.parser||this.Parser),SC("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,o){const i=QC(e),a=n.parse(i);function s(e,n){e||!n?o(e):r?r(n):t(void 0,n)}n.run(a,i,(function(e,t,r){if(e||!t||!r)return s(e);const o=t,i=n.stringify(o,r);!function(e){return"string"===typeof e||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)}(i)?r.result=i:r.value=i,s(e,r)}))}}processSync(e){let t,n=!1;return this.freeze(),_C("processSync",this.parser||this.Parser),SC("processSync",this.compiler||this.Compiler),this.process(e,(function(e,r){n=!0,uC(e),t=r})),kC("processSync","process",n),t}run(e,t,n){TC(e),this.freeze();const r=this.transformers;return n||"function"!==typeof t||(n=t,t=void 0),n?o(void 0,n):new Promise(o);function o(o,i){const a=QC(t);r.run(e,a,(function(t,r,a){const s=r||e;t?i(t):o?o(s):n(void 0,s,a)}))}}runSync(e,t){let n,r=!1;return this.run(e,t,(function(e,t){uC(e),n=t,r=!0})),kC("runSync","run",r),n}stringify(e,t){this.freeze();const n=QC(t),r=this.compiler||this.Compiler;return SC("stringify",r),TC(e),r(e,n)}use(e){const t=this.attachers,n=this.namespace;if(DC("use",this.frozen),null===e||void 0===e);else if("function"===typeof e){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];c(e,o)}else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?l(e):s(e)}return this;function a(e){if("function"===typeof e)c(e,[]);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;c(t,n)}else s(e)}}function s(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(e.plugins),e.settings&&(n.settings=dC(!0,n.settings,e.settings))}function l(e){let t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){a(e[t])}}}function c(e,n){let r=-1,o=-1;for(;++r<t.length;)if(t[r][0]===e){o=r;break}if(-1===o)t.push([e,...n]);else if(n.length>0){let[r,...i]=n;const a=t[o][1];AC(a)&&AC(r)&&(r=dC(!0,a,r)),t[o]=[e,r,...i]}}}}(new wC).freeze();function _C(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function SC(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function DC(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function TC(e){if(!AC(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function kC(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function QC(e){return function(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}(e)?e:new bC(e)}var MC,RC,PC;!function(e){function t(e){var t;return t=class{static is(t){return!!t&&e===t.type}constructor(t,n){this.data=t,this.id=Cp.create22(),this.type=e,this.label=n&&n.label||e.name,this.description=n&&n.description}},t.type=e,t}e.factory=function(){return e=>t(e)},e.create=t,e.hasTag=function(e,t){if(!e.tags)return!1;for(const n of e.tags)if(n===t)return!0;return!1},e.Null={id:Cp.create22(),type:{name:"Null",typeClass:"Null"},data:void 0,label:"Null"}}(MC||(MC={})),function(e){e.is=function(e){const t=e;return!!t&&!!t.transform&&!!t.parent&&!!t.status},e.resolve=function(t,n){const r="string"===typeof n?n:e.is(n)?n.transform.ref:n.ref;return t.cells.get(r)}}(RC||(RC={}));class OC{get cell(){var e;return null===(e=this.state)||void 0===e?void 0:e.cells.get(this.ref)}get obj(){var e,t;return null===(t=null===(e=this.state)||void 0===e?void 0:e.cells.get(this.ref))||void 0===t?void 0:t.obj}get data(){var e;return null===(e=this.obj)||void 0===e?void 0:e.data}update(e,t){if(!this.state)throw new Error("To use update() from StateObjectSelector, 'state' must be defined.");return t||(t=this.state.build()),(t||this.state.build()).to(this).update(e),t}checkValid(){if(!this.state)throw new Error("Unassigned State.");const e=this.cell;if(!e)throw new Error("Not created at all. Did you await/then the corresponding state update?");if("ok"===e.status)return!0;if("error"===e.status)throw new Error(e.errorText);if(e.obj===MC.Null)throw new Error("The object is Null.");throw new Error("Unresolved. Did you await/then the corresponding state update?")}get isOk(){const e=this.cell;return e&&"ok"===e.status&&e.obj!==MC.Null}constructor(e,t){this.ref=e,this.state=t}}!function(e){function t(e,t){if(t)return RC.is(t)?t:"string"===typeof t?e.cells.get(t):t.cell}e.resolveRef=function(e){var t;if(e)return"string"===typeof e?e:RC.is(e)?e.transform.ref:null===(t=e.cell)||void 0===t?void 0:t.transform.ref},e.resolve=t,e.resolveAndCheck=function(e,n){const r=t(e,n);if(r&&r.obj&&"ok"===r.status)return r}}(PC||(PC={}));var FC="delete",NC=5,LC=1<<NC,UC=LC-1,GC={};function jC(e){e&&(e.value=!0)}function zC(){}function HC(e){return void 0===e.size&&(e.size=e.__iterate(qC)),e.size}function VC(e,t){if("number"!==typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?HC(e)+t:t}function qC(){return!0}function YC(e,t,n){return(0===e&&!JC(e)||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function XC(e,t){return KC(e,t,0)}function WC(e,t){return KC(e,t,t)}function KC(e,t,n){return void 0===e?n:JC(e)?t===1/0?t:0|Math.max(0,t+e):void 0===t||t===e?e:0|Math.min(t,e)}function JC(e){return e<0||0===e&&1/e===-1/0}var ZC="@@__IMMUTABLE_ITERABLE__@@";function $C(e){return Boolean(e&&e[ZC])}var eI="@@__IMMUTABLE_KEYED__@@";function tI(e){return Boolean(e&&e[eI])}var nI="@@__IMMUTABLE_INDEXED__@@";function rI(e){return Boolean(e&&e[nI])}function oI(e){return tI(e)||rI(e)}var iI=function(e){return $C(e)?e:kI(e)},aI=function(e){function t(e){return tI(e)?e:QI(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(iI),sI=function(e){function t(e){return rI(e)?e:MI(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(iI),lI=function(e){function t(e){return $C(e)&&!oI(e)?e:RI(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(iI);iI.Keyed=aI,iI.Indexed=sI,iI.Set=lI;var cI="@@__IMMUTABLE_SEQ__@@";function uI(e){return Boolean(e&&e[cI])}var dI="@@__IMMUTABLE_RECORD__@@";function AI(e){return Boolean(e&&e[dI])}function fI(e){return $C(e)||AI(e)}var pI="@@__IMMUTABLE_ORDERED__@@";function hI(e){return Boolean(e&&e[pI])}var gI=0,mI=1,yI=2,vI="function"===typeof Symbol&&Symbol.iterator,bI="@@iterator",CI=vI||bI,II=function(e){this.next=e};function EI(e,t,n,r){var o=0===e?t:1===e?n:[t,n];return r?r.value=o:r={value:o,done:!1},r}function xI(){return{value:void 0,done:!0}}function BI(e){return!!Array.isArray(e)||!!SI(e)}function wI(e){return e&&"function"===typeof e.next}function _I(e){var t=SI(e);return t&&t.call(e)}function SI(e){var t=e&&(vI&&e[vI]||e[bI]);if("function"===typeof t)return t}II.prototype.toString=function(){return"[Iterator]"},II.KEYS=gI,II.VALUES=mI,II.ENTRIES=yI,II.prototype.inspect=II.prototype.toSource=function(){return this.toString()},II.prototype[CI]=function(){return this};var DI=Object.prototype.hasOwnProperty;function TI(e){return!(!Array.isArray(e)&&"string"!==typeof e)||e&&"object"===typeof e&&Number.isInteger(e.length)&&e.length>=0&&(0===e.length?1===Object.keys(e).length:e.hasOwnProperty(e.length-1))}var kI=function(e){function t(e){return void 0===e||null===e?LI():fI(e)?e.toSeq():function(e){var t=jI(e);if(t)return function(e){var t=SI(e);return t&&t===e.entries}(e)?t.fromEntrySeq():function(e){var t=SI(e);return t&&t===e.keys}(e)?t.toSetSeq():t;if("object"===typeof e)return new OI(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(e,t){var n=this._cache;if(n){for(var r=n.length,o=0;o!==r;){var i=n[t?r-++o:o++];if(!1===e(i[1],i[0],this))break}return o}return this.__iterateUncached(e,t)},t.prototype.__iterator=function(e,t){var n=this._cache;if(n){var r=n.length,o=0;return new II((function(){if(o===r)return{value:void 0,done:!0};var i=n[t?r-++o:o++];return EI(e,i[0],i[1])}))}return this.__iteratorUncached(e,t)},t}(iI),QI=function(e){function t(e){return void 0===e||null===e?LI().toKeyedSeq():$C(e)?tI(e)?e.toSeq():e.fromEntrySeq():AI(e)?e.toSeq():UI(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}(kI),MI=function(e){function t(e){return void 0===e||null===e?LI():$C(e)?tI(e)?e.entrySeq():e.toIndexedSeq():AI(e)?e.toSeq().entrySeq():GI(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}(kI),RI=function(e){function t(e){return($C(e)&&!oI(e)?e:MI(e)).toSetSeq()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}(kI);kI.isSeq=uI,kI.Keyed=QI,kI.Set=RI,kI.Indexed=MI,kI.prototype[cI]=!0;var PI=function(e){function t(e){this._array=e,this.size=e.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this.has(e)?this._array[VC(this,e)]:t},t.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length,o=0;o!==r;){var i=t?r-++o:o++;if(!1===e(n[i],i,this))break}return o},t.prototype.__iterator=function(e,t){var n=this._array,r=n.length,o=0;return new II((function(){if(o===r)return{value:void 0,done:!0};var i=t?r-++o:o++;return EI(e,i,n[i])}))},t}(MI),OI=function(e){function t(e){var t=Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]);this._object=e,this._keys=t,this.size=t.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},t.prototype.has=function(e){return DI.call(this._object,e)},t.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,o=r.length,i=0;i!==o;){var a=r[t?o-++i:i++];if(!1===e(n[a],a,this))break}return i},t.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,o=r.length,i=0;return new II((function(){if(i===o)return{value:void 0,done:!0};var a=r[t?o-++i:i++];return EI(e,a,n[a])}))},t}(QI);OI.prototype[pI]=!0;var FI,NI=function(e){function t(e){this._collection=e,this.size=e.length||e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=_I(this._collection),r=0;if(wI(n))for(var o;!(o=n.next()).done&&!1!==e(o.value,r++,this););return r},t.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=_I(this._collection);if(!wI(n))return new II(xI);var r=0;return new II((function(){var t=n.next();return t.done?t:EI(e,r++,t.value)}))},t}(MI);function LI(){return FI||(FI=new PI([]))}function UI(e){var t=jI(e);if(t)return t.fromEntrySeq();if("object"===typeof e)return new OI(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function GI(e){var t=jI(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function jI(e){return TI(e)?new PI(e):BI(e)?new NI(e):void 0}var zI="@@__IMMUTABLE_MAP__@@";function HI(e){return Boolean(e&&e[zI])}function VI(e){return HI(e)&&hI(e)}function qI(e){return Boolean(e&&"function"===typeof e.equals&&"function"===typeof e.hashCode)}function YI(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"===typeof e.valueOf&&"function"===typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!!(qI(e)&&qI(t)&&e.equals(t))}var XI="function"===typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var n=65535&(e|=0),r=65535&(t|=0);return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0};function WI(e){return e>>>1&1073741824|3221225471&e}var KI=Object.prototype.valueOf;function JI(e){if(null==e)return ZI(e);if("function"===typeof e.hashCode)return WI(e.hashCode(e));var t,n=(t=e).valueOf!==KI&&"function"===typeof t.valueOf?t.valueOf(t):t;if(null==n)return ZI(n);switch(typeof n){case"boolean":return n?1108378657:1108378656;case"number":return function(e){if(e!==e||e===1/0)return 0;var t=0|e;t!==e&&(t^=4294967295*e);for(;e>4294967295;)t^=e/=4294967295;return WI(t)}(n);case"string":return n.length>lE?function(e){var t=dE[e];void 0===t&&(t=$I(e),uE===cE&&(uE=0,dE={}),uE++,dE[e]=t);return t}(n):$I(n);case"object":case"function":return function(e){var t;if(oE&&void 0!==(t=rE.get(e)))return t;if(t=e[sE],void 0!==t)return t;if(!tE){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[sE]))return t;if(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e),void 0!==t)return t}if(t=nE(),oE)rE.set(e,t);else{if(void 0!==eE&&!1===eE(e))throw new Error("Non-extensible objects are not allowed as keys.");if(tE)Object.defineProperty(e,sE,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[sE]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[sE]=t}}return t}(n);case"symbol":return function(e){var t=iE[e];if(void 0!==t)return t;return t=nE(),iE[e]=t,t}(n);default:if("function"===typeof n.toString)return $I(n.toString());throw new Error("Value type "+typeof n+" cannot be hashed.")}}function ZI(e){return null===e?1108378658:1108378659}function $I(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return WI(t)}var eE=Object.isExtensible,tE=function(){try{return Object.defineProperty({},"@",{}),!0}catch(l0e){return!1}}();function nE(){var e=++aE;return 1073741824&aE&&(aE=0),e}var rE,oE="function"===typeof WeakMap;oE&&(rE=new WeakMap);var iE=Object.create(null),aE=0,sE="__immutablehash__";"function"===typeof Symbol&&(sE=Symbol(sE));var lE=16,cE=255,uE=0,dE={},AE=function(e){function t(e,t){this._iter=e,this._useKeys=t,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this._iter.get(e,t)},t.prototype.has=function(e){return this._iter.has(e)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var e=this,t=yE(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},t.prototype.map=function(e,t){var n=this,r=mE(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t,r){return e(t,r,n)}),t)},t.prototype.__iterator=function(e,t){return this._iter.__iterator(e,t)},t}(QI);AE.prototype[pI]=!0;var fE=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.includes=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var n=this,r=0;return t&&HC(this),this._iter.__iterate((function(o){return e(o,t?n.size-++r:r++,n)}),t)},t.prototype.__iterator=function(e,t){var n=this,r=this._iter.__iterator(mI,t),o=0;return t&&HC(this),new II((function(){var i=r.next();return i.done?i:EI(e,t?n.size-++o:o++,i.value,i)}))},t}(MI),pE=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.has=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){return e(t,t,n)}),t)},t.prototype.__iterator=function(e,t){var n=this._iter.__iterator(mI,t);return new II((function(){var t=n.next();return t.done?t:EI(e,t.value,t.value,t)}))},t}(RI),hE=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){if(t){SE(t);var r=$C(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}}),t)},t.prototype.__iterator=function(e,t){var n=this._iter.__iterator(mI,t);return new II((function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){SE(r);var o=$C(r);return EI(e,o?r.get(0):r[0],o?r.get(1):r[1],t)}}}))},t}(QI);function gE(e){var t=TE(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=kE,t.__iterateUncached=function(t,n){var r=this;return e.__iterate((function(e,n){return!1!==t(n,e,r)}),n)},t.__iteratorUncached=function(t,n){if(t===yI){var r=e.__iterator(t,n);return new II((function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(t===mI?gI:mI,n)},t}function mE(e,t,n){var r=TE(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,o){var i=e.get(r,GC);return i===GC?o:t.call(n,i,r,e)},r.__iterateUncached=function(r,o){var i=this;return e.__iterate((function(e,o,a){return!1!==r(t.call(n,e,o,a),o,i)}),o)},r.__iteratorUncached=function(r,o){var i=e.__iterator(yI,o);return new II((function(){var o=i.next();if(o.done)return o;var a=o.value,s=a[0];return EI(r,s,t.call(n,a[1],s,e),o)}))},r}function yE(e,t){var n=this,r=TE(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var t=gE(e);return t.reverse=function(){return e.flip()},t}),r.get=function(n,r){return e.get(t?n:-1-n,r)},r.has=function(n){return e.has(t?n:-1-n)},r.includes=function(t){return e.includes(t)},r.cacheResult=kE,r.__iterate=function(n,r){var o=this,i=0;return r&&HC(e),e.__iterate((function(e,a){return n(e,t?a:r?o.size-++i:i++,o)}),!r)},r.__iterator=function(r,o){var i=0;o&&HC(e);var a=e.__iterator(yI,!o);return new II((function(){var e=a.next();if(e.done)return e;var s=e.value;return EI(r,t?s[0]:o?n.size-++i:i++,s[1],e)}))},r}function vE(e,t,n,r){var o=TE(e);return r&&(o.has=function(r){var o=e.get(r,GC);return o!==GC&&!!t.call(n,o,r,e)},o.get=function(r,o){var i=e.get(r,GC);return i!==GC&&t.call(n,i,r,e)?i:o}),o.__iterateUncached=function(o,i){var a=this,s=0;return e.__iterate((function(e,i,l){if(t.call(n,e,i,l))return s++,o(e,r?i:s-1,a)}),i),s},o.__iteratorUncached=function(o,i){var a=e.__iterator(yI,i),s=0;return new II((function(){for(;;){var i=a.next();if(i.done)return i;var l=i.value,c=l[0],u=l[1];if(t.call(n,u,c,e))return EI(o,r?c:s++,u,i)}}))},o}function bE(e,t,n,r){var o=e.size;if(YC(t,n,o))return e;if("undefined"===typeof o&&(t<0||n<0))return bE(e.toSeq().cacheResult(),t,n,r);var i,a=XC(t,o),s=WC(n,o)-a;s===s&&(i=s<0?0:s);var l=TE(e);return l.size=0===i?i:e.size&&i||void 0,!r&&uI(e)&&i>=0&&(l.get=function(t,n){return(t=VC(this,t))>=0&&t<i?e.get(t+a,n):n}),l.__iterateUncached=function(t,n){var o=this;if(0===i)return 0;if(n)return this.cacheResult().__iterate(t,n);var s=0,l=!0,c=0;return e.__iterate((function(e,n){if(!l||!(l=s++<a))return c++,!1!==t(e,r?n:c-1,o)&&c!==i})),c},l.__iteratorUncached=function(t,n){if(0!==i&&n)return this.cacheResult().__iterator(t,n);if(0===i)return new II(xI);var o=e.__iterator(t,n),s=0,l=0;return new II((function(){for(;s++<a;)o.next();if(++l>i)return{value:void 0,done:!0};var e=o.next();return r||t===mI||e.done?e:EI(t,l-1,t===gI?void 0:e.value[1],e)}))},l}function CE(e,t,n,r){var o=TE(e);return o.__iterateUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterate(o,i);var s=!0,l=0;return e.__iterate((function(e,i,c){if(!s||!(s=t.call(n,e,i,c)))return l++,o(e,r?i:l-1,a)})),l},o.__iteratorUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterator(o,i);var s=e.__iterator(yI,i),l=!0,c=0;return new II((function(){var e,i,u;do{if((e=s.next()).done)return r||o===mI?e:EI(o,c++,o===gI?void 0:e.value[1],e);var d=e.value;i=d[0],u=d[1],l&&(l=t.call(n,u,i,a))}while(l);return o===yI?e:EI(o,i,u,e)}))},o}function IE(e,t,n){var r=TE(e);return r.__iterateUncached=function(o,i){if(i)return this.cacheResult().__iterate(o,i);var a=0,s=!1;return function e(l,c){l.__iterate((function(i,l){return(!t||c<t)&&$C(i)?e(i,c+1):(a++,!1===o(i,n?l:a-1,r)&&(s=!0)),!s}),i)}(e,0),a},r.__iteratorUncached=function(r,o){if(o)return this.cacheResult().__iterator(r,o);var i=e.__iterator(r,o),a=[],s=0;return new II((function(){for(;i;){var e=i.next();if(!1===e.done){var l=e.value;if(r===yI&&(l=l[1]),t&&!(a.length<t)||!$C(l))return n?e:EI(r,s++,l,e);a.push(i),i=l.__iterator(r,o)}else i=a.pop()}return{value:void 0,done:!0}}))},r}function EE(e,t,n){t||(t=QE);var r=tI(e),o=0,i=e.toSeq().map((function(t,r){return[r,t,o++,n?n(t,r,e):t]})).valueSeq().toArray();return i.sort((function(e,n){return t(e[3],n[3])||e[2]-n[2]})).forEach(r?function(e,t){i[t].length=2}:function(e,t){i[t]=e[1]}),r?QI(i):rI(e)?MI(i):RI(i)}function xE(e,t,n){if(t||(t=QE),n){var r=e.toSeq().map((function(t,r){return[t,n(t,r,e)]})).reduce((function(e,n){return BE(t,e[1],n[1])?n:e}));return r&&r[0]}return e.reduce((function(e,n){return BE(t,e,n)?n:e}))}function BE(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(void 0===n||null===n||n!==n)||r>0}function wE(e,t,n,r){var o=TE(e),i=new PI(n).map((function(e){return e.size}));return o.size=r?i.max():i.min(),o.__iterate=function(e,t){for(var n,r=this.__iterator(mI,t),o=0;!(n=r.next()).done&&!1!==e(n.value,o++,this););return o},o.__iteratorUncached=function(e,o){var i=n.map((function(e){return e=iI(e),_I(o?e.reverse():e)})),a=0,s=!1;return new II((function(){var n;return s||(n=i.map((function(e){return e.next()})),s=r?n.every((function(e){return e.done})):n.some((function(e){return e.done}))),s?{value:void 0,done:!0}:EI(e,a++,t.apply(null,n.map((function(e){return e.value}))))}))},o}function _E(e,t){return e===t?e:uI(e)?t:e.constructor(t)}function SE(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function DE(e){return tI(e)?aI:rI(e)?sI:lI}function TE(e){return Object.create((tI(e)?QI:rI(e)?MI:RI).prototype)}function kE(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):kI.prototype.cacheResult.call(this)}function QE(e,t){return void 0===e&&void 0===t?0:void 0===e?1:void 0===t?-1:e>t?1:e<t?-1:0}function ME(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),o=0;o<n;o++)r[o]=e[o+t];return r}function RE(e,t){if(!e)throw new Error(t)}function PE(e){RE(e!==1/0,"Cannot perform this action with an infinite size.")}function OE(e){if(TI(e)&&"string"!==typeof e)return e;if(hI(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}fE.prototype.cacheResult=AE.prototype.cacheResult=pE.prototype.cacheResult=hE.prototype.cacheResult=kE;var FE=Object.prototype.toString;function NE(e){if(!e||"object"!==typeof e||"[object Object]"!==FE.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t,r=Object.getPrototypeOf(t);null!==r;)n=r,r=Object.getPrototypeOf(n);return n===t}function LE(e){return"object"===typeof e&&(fI(e)||Array.isArray(e)||NE(e))}function UE(e){try{return"string"===typeof e?JSON.stringify(e):String(e)}catch(t){return JSON.stringify(e)}}function GE(e,t){return fI(e)?e.has(t):LE(e)&&DI.call(e,t)}function jE(e,t,n){return fI(e)?e.get(t,n):GE(e,t)?"function"===typeof e.get?e.get(t):e[t]:n}function zE(e){if(Array.isArray(e))return ME(e);var t={};for(var n in e)DI.call(e,n)&&(t[n]=e[n]);return t}function HE(e,t){if(!LE(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(fI(e)){if(!e.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+e);return e.remove(t)}if(!DI.call(e,t))return e;var n=zE(e);return Array.isArray(n)?n.splice(t,1):delete n[t],n}function VE(e,t,n){if(!LE(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(fI(e)){if(!e.set)throw new TypeError("Cannot update immutable value without .set() method: "+e);return e.set(t,n)}if(DI.call(e,t)&&n===e[t])return e;var r=zE(e);return r[t]=n,r}function qE(e,t,n,r){r||(r=n,n=void 0);var o=YE(fI(e),e,OE(t),0,n,r);return o===GC?n:o}function YE(e,t,n,r,o,i){var a=t===GC;if(r===n.length){var s=a?o:t,l=i(s);return l===s?t:l}if(!a&&!LE(t))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,r).map(UE)+"]: "+t);var c=n[r],u=a?GC:jE(t,c,GC),d=YE(u===GC?e:fI(u),u,n,r+1,o,i);return d===u?t:d===GC?HE(t,c):VE(a?e?wx():{}:t,c,d)}function XE(e,t,n){return qE(e,t,GC,(function(){return n}))}function WE(e,t){return XE(this,e,t)}function KE(e,t){return qE(e,t,(function(){return GC}))}function JE(e){return KE(this,e)}function ZE(e,t,n,r){return qE(e,[t],n,r)}function $E(e,t,n){return 1===arguments.length?e(this):ZE(this,e,t,n)}function ex(e,t,n){return qE(this,e,t,n)}function tx(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return rx(this,e)}function nx(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if("function"!==typeof e)throw new TypeError("Invalid merger function: "+e);return rx(this,t,e)}function rx(e,t,n){for(var r=[],o=0;o<t.length;o++){var i=aI(t[o]);0!==i.size&&r.push(i)}return 0===r.length?e:0!==e.toSeq().size||e.__ownerID||1!==r.length?e.withMutations((function(e){for(var t=n?function(t,r){ZE(e,r,GC,(function(e){return e===GC?t:n(e,t,r)}))}:function(t,n){e.set(n,t)},o=0;o<r.length;o++)r[o].forEach(t)})):e.constructor(r[0])}function ox(e,t,n){return ix(e,t,function(e){function t(n,r,o){return LE(n)&&LE(r)&&function(e,t){var n=kI(e),r=kI(t);return rI(n)===rI(r)&&tI(n)===tI(r)}(n,r)?ix(n,[r],t):e?e(n,r,o):r}return t}(n))}function ix(e,t,n){if(!LE(e))throw new TypeError("Cannot merge into non-data-structure value: "+e);if(fI(e))return"function"===typeof n&&e.mergeWith?e.mergeWith.apply(e,[n].concat(t)):e.merge?e.merge.apply(e,t):e.concat.apply(e,t);for(var r=Array.isArray(e),o=e,i=r?sI:aI,a=r?function(t){o===e&&(o=zE(o)),o.push(t)}:function(t,r){var i=DI.call(o,r),a=i&&n?n(o[r],t,r):t;i&&a===o[r]||(o===e&&(o=zE(o)),o[r]=a)},s=0;s<t.length;s++)i(t[s]).forEach(a);return o}function ax(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return ox(this,e)}function sx(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return ox(this,t,e)}function lx(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return qE(this,e,wx(),(function(e){return ix(e,t)}))}function cx(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return qE(this,e,wx(),(function(e){return ox(e,t)}))}function ux(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function dx(){return this.__ownerID?this:this.__ensureOwner(new zC)}function Ax(){return this.__ensureOwner()}function fx(){return this.__altered}var px=function(e){function t(t){return void 0===t||null===t?wx():HI(t)&&!hI(t)?t:wx().withMutations((function(n){var r=e(t);PE(r.size),r.forEach((function(e,t){return n.set(t,e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return wx().withMutations((function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}}))},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},t.prototype.set=function(e,t){return _x(this,e,t)},t.prototype.remove=function(e){return _x(this,e,GC)},t.prototype.deleteAll=function(e){var t=iI(e);return 0===t.size?this:this.withMutations((function(e){t.forEach((function(t){return e.remove(t)}))}))},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):wx()},t.prototype.sort=function(e){return Zx(EE(this,e))},t.prototype.sortBy=function(e,t){return Zx(EE(this,t,e))},t.prototype.map=function(e,t){var n=this;return this.withMutations((function(r){r.forEach((function(o,i){r.set(i,e.call(t,o,i,n))}))}))},t.prototype.__iterator=function(e,t){return new Ix(this,e,t)},t.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate((function(t){return r++,e(t[1],t[0],n)}),t),r},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Bx(this.size,this._root,e,this.__hash):0===this.size?wx():(this.__ownerID=e,this.__altered=!1,this)},t}(aI);px.isMap=HI;var hx=px.prototype;hx[zI]=!0,hx[FC]=hx.remove,hx.removeAll=hx.deleteAll,hx.setIn=WE,hx.removeIn=hx.deleteIn=JE,hx.update=$E,hx.updateIn=ex,hx.merge=hx.concat=tx,hx.mergeWith=nx,hx.mergeDeep=ax,hx.mergeDeepWith=sx,hx.mergeIn=lx,hx.mergeDeepIn=cx,hx.withMutations=ux,hx.wasAltered=fx,hx.asImmutable=Ax,hx["@@transducer/init"]=hx.asMutable=dx,hx["@@transducer/step"]=function(e,t){return e.set(t[0],t[1])},hx["@@transducer/result"]=function(e){return e.asImmutable()};var gx=function(e,t){this.ownerID=e,this.entries=t};gx.prototype.get=function(e,t,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(YI(n,o[i][0]))return o[i][1];return r},gx.prototype.update=function(e,t,n,r,o,i,a){for(var s=o===GC,l=this.entries,c=0,u=l.length;c<u&&!YI(r,l[c][0]);c++);var d=c<u;if(d?l[c][1]===o:s)return this;if(jC(a),(s||!d)&&jC(i),!s||1!==l.length){if(!d&&!s&&l.length>=Mx)return function(e,t,n,r){e||(e=new zC);for(var o=new bx(e,JI(n),[n,r]),i=0;i<t.length;i++){var a=t[i];o=o.update(e,0,void 0,a[0],a[1])}return o}(e,l,r,o);var A=e&&e===this.ownerID,f=A?l:ME(l);return d?s?c===u-1?f.pop():f[c]=f.pop():f[c]=[r,o]:f.push([r,o]),A?(this.entries=f,this):new gx(e,f)}};var mx=function(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n};mx.prototype.get=function(e,t,n,r){void 0===t&&(t=JI(n));var o=1<<((0===e?t:t>>>e)&UC),i=this.bitmap;return 0===(i&o)?r:this.nodes[kx(i&o-1)].get(e+NC,t,n,r)},mx.prototype.update=function(e,t,n,r,o,i,a){void 0===n&&(n=JI(r));var s=(0===t?n:n>>>t)&UC,l=1<<s,c=this.bitmap,u=0!==(c&l);if(!u&&o===GC)return this;var d=kx(c&l-1),A=this.nodes,f=u?A[d]:void 0,p=Sx(f,e,t+NC,n,r,o,i,a);if(p===f)return this;if(!u&&p&&A.length>=Rx)return function(e,t,n,r,o){for(var i=0,a=new Array(LC),s=0;0!==n;s++,n>>>=1)a[s]=1&n?t[i++]:void 0;return a[r]=o,new yx(e,i+1,a)}(e,A,c,s,p);if(u&&!p&&2===A.length&&Dx(A[1^d]))return A[1^d];if(u&&p&&1===A.length&&Dx(p))return p;var h=e&&e===this.ownerID,g=u?p?c:c^l:c|l,m=u?p?Qx(A,d,p,h):function(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var o=new Array(r),i=0,a=0;a<r;a++)a===t&&(i=1),o[a]=e[a+i];return o}(A,d,h):function(e,t,n,r){var o=e.length+1;if(r&&t+1===o)return e[t]=n,e;for(var i=new Array(o),a=0,s=0;s<o;s++)s===t?(i[s]=n,a=-1):i[s]=e[s+a];return i}(A,d,p,h);return h?(this.bitmap=g,this.nodes=m,this):new mx(e,g,m)};var yx=function(e,t,n){this.ownerID=e,this.count=t,this.nodes=n};yx.prototype.get=function(e,t,n,r){void 0===t&&(t=JI(n));var o=(0===e?t:t>>>e)&UC,i=this.nodes[o];return i?i.get(e+NC,t,n,r):r},yx.prototype.update=function(e,t,n,r,o,i,a){void 0===n&&(n=JI(r));var s=(0===t?n:n>>>t)&UC,l=o===GC,c=this.nodes,u=c[s];if(l&&!u)return this;var d=Sx(u,e,t+NC,n,r,o,i,a);if(d===u)return this;var A=this.count;if(u){if(!d&&--A<Px)return function(e,t,n,r){for(var o=0,i=0,a=new Array(n),s=0,l=1,c=t.length;s<c;s++,l<<=1){var u=t[s];void 0!==u&&s!==r&&(o|=l,a[i++]=u)}return new mx(e,o,a)}(e,c,A,s)}else A++;var f=e&&e===this.ownerID,p=Qx(c,s,d,f);return f?(this.count=A,this.nodes=p,this):new yx(e,A,p)};var vx=function(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n};vx.prototype.get=function(e,t,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(YI(n,o[i][0]))return o[i][1];return r},vx.prototype.update=function(e,t,n,r,o,i,a){void 0===n&&(n=JI(r));var s=o===GC;if(n!==this.keyHash)return s?this:(jC(a),jC(i),Tx(this,e,t,n,[r,o]));for(var l=this.entries,c=0,u=l.length;c<u&&!YI(r,l[c][0]);c++);var d=c<u;if(d?l[c][1]===o:s)return this;if(jC(a),(s||!d)&&jC(i),s&&2===u)return new bx(e,this.keyHash,l[1^c]);var A=e&&e===this.ownerID,f=A?l:ME(l);return d?s?c===u-1?f.pop():f[c]=f.pop():f[c]=[r,o]:f.push([r,o]),A?(this.entries=f,this):new vx(e,this.keyHash,f)};var bx=function(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n};bx.prototype.get=function(e,t,n,r){return YI(n,this.entry[0])?this.entry[1]:r},bx.prototype.update=function(e,t,n,r,o,i,a){var s=o===GC,l=YI(r,this.entry[0]);return(l?o===this.entry[1]:s)?this:(jC(a),s?void jC(i):l?e&&e===this.ownerID?(this.entry[1]=o,this):new bx(e,this.keyHash,[r,o]):(jC(i),Tx(this,e,t,JI(r),[r,o])))},gx.prototype.iterate=vx.prototype.iterate=function(e,t){for(var n=this.entries,r=0,o=n.length-1;r<=o;r++)if(!1===e(n[t?o-r:r]))return!1},mx.prototype.iterate=yx.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,o=n.length-1;r<=o;r++){var i=n[t?o-r:r];if(i&&!1===i.iterate(e,t))return!1}},bx.prototype.iterate=function(e,t){return e(this.entry)};var Cx,Ix=function(e){function t(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&xx(e._root)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n=t.node,r=t.index++,o=void 0;if(n.entry){if(0===r)return Ex(e,n.entry)}else if(n.entries){if(r<=(o=n.entries.length-1))return Ex(e,n.entries[this._reverse?o-r:r])}else if(r<=(o=n.nodes.length-1)){var i=n.nodes[this._reverse?o-r:r];if(i){if(i.entry)return Ex(e,i.entry);t=this._stack=xx(i,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}},t}(II);function Ex(e,t){return EI(e,t[0],t[1])}function xx(e,t){return{node:e,index:0,__prev:t}}function Bx(e,t,n,r){var o=Object.create(hx);return o.size=e,o._root=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function wx(){return Cx||(Cx=Bx(0))}function _x(e,t,n){var r,o;if(e._root){var i={value:!1},a={value:!1};if(r=Sx(e._root,e.__ownerID,0,void 0,t,n,i,a),!a.value)return e;o=e.size+(i.value?n===GC?-1:1:0)}else{if(n===GC)return e;o=1,r=new gx(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=o,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?Bx(o,r):wx()}function Sx(e,t,n,r,o,i,a,s){return e?e.update(t,n,r,o,i,a,s):i===GC?e:(jC(s),jC(a),new bx(t,r,[o,i]))}function Dx(e){return e.constructor===bx||e.constructor===vx}function Tx(e,t,n,r,o){if(e.keyHash===r)return new vx(t,r,[e.entry,o]);var i,a=(0===n?e.keyHash:e.keyHash>>>n)&UC,s=(0===n?r:r>>>n)&UC,l=a===s?[Tx(e,t,n+NC,r,o)]:(i=new bx(t,r,o),a<s?[e,i]:[i,e]);return new mx(t,1<<a|1<<s,l)}function kx(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function Qx(e,t,n,r){var o=r?e:ME(e);return o[t]=n,o}var Mx=LC/4,Rx=LC/2,Px=LC/4,Ox="@@__IMMUTABLE_LIST__@@";function Fx(e){return Boolean(e&&e[Ox])}var Nx=function(e){function t(t){var n=Vx();if(void 0===t||null===t)return n;if(Fx(t))return t;var r=e(t),o=r.size;return 0===o?n:(PE(o),o>0&&o<LC?Hx(0,o,NC,null,new Ux(r.toArray())):n.withMutations((function(e){e.setSize(o),r.forEach((function(t,n){return e.set(n,t)}))})))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(e,t){if((e=VC(this,e))>=0&&e<this.size){var n=Xx(this,e+=this._origin);return n&&n.array[e&UC]}return t},t.prototype.set=function(e,t){return function(e,t,n){if(t=VC(e,t),t!==t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?Wx(e,t).set(0,n):Wx(e,0,t+1).set(t,n)}));t+=e._origin;var r=e._tail,o=e._root,i={value:!1};t>=Kx(e._capacity)?r=qx(r,e.__ownerID,0,t,n,i):o=qx(o,e.__ownerID,e._level,t,n,i);if(!i.value)return e;if(e.__ownerID)return e._root=o,e._tail=r,e.__hash=void 0,e.__altered=!0,e;return Hx(e._origin,e._capacity,e._level,o,r)}(this,e,t)},t.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},t.prototype.insert=function(e,t){return this.splice(e,0,t)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=NC,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):Vx()},t.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(n){Wx(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])}))},t.prototype.pop=function(){return Wx(this,0,-1)},t.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){Wx(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])}))},t.prototype.shift=function(){return Wx(this,1)},t.prototype.concat=function(){for(var t=arguments,n=[],r=0;r<arguments.length;r++){var o=t[r],i=e("string"!==typeof o&&BI(o)?o:[o]);0!==i.size&&n.push(i)}return 0===n.length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations((function(e){n.forEach((function(t){return t.forEach((function(t){return e.push(t)}))}))})):this.constructor(n[0])},t.prototype.setSize=function(e){return Wx(this,0,e)},t.prototype.map=function(e,t){var n=this;return this.withMutations((function(r){for(var o=0;o<n.size;o++)r.set(o,e.call(t,r.get(o),o,n))}))},t.prototype.slice=function(e,t){var n=this.size;return YC(e,t,n)?this:Wx(this,XC(e,n),WC(t,n))},t.prototype.__iterator=function(e,t){var n=t?this.size:0,r=zx(this,t);return new II((function(){var o=r();return o===jx?{value:void 0,done:!0}:EI(e,t?--n:n++,o)}))},t.prototype.__iterate=function(e,t){for(var n,r=t?this.size:0,o=zx(this,t);(n=o())!==jx&&!1!==e(n,t?--r:r++,this););return r},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Hx(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):0===this.size?Vx():(this.__ownerID=e,this.__altered=!1,this)},t}(sI);Nx.isList=Fx;var Lx=Nx.prototype;Lx[Ox]=!0,Lx[FC]=Lx.remove,Lx.merge=Lx.concat,Lx.setIn=WE,Lx.deleteIn=Lx.removeIn=JE,Lx.update=$E,Lx.updateIn=ex,Lx.mergeIn=lx,Lx.mergeDeepIn=cx,Lx.withMutations=ux,Lx.wasAltered=fx,Lx.asImmutable=Ax,Lx["@@transducer/init"]=Lx.asMutable=dx,Lx["@@transducer/step"]=function(e,t){return e.push(t)},Lx["@@transducer/result"]=function(e){return e.asImmutable()};var Ux=function(e,t){this.array=e,this.ownerID=t};Ux.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var r=n>>>t&UC;if(r>=this.array.length)return new Ux([],e);var o,i=0===r;if(t>0){var a=this.array[r];if((o=a&&a.removeBefore(e,t-NC,n))===a&&i)return this}if(i&&!o)return this;var s=Yx(this,e);if(!i)for(var l=0;l<r;l++)s.array[l]=void 0;return o&&(s.array[r]=o),s},Ux.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var r,o=n-1>>>t&UC;if(o>=this.array.length)return this;if(t>0){var i=this.array[o];if((r=i&&i.removeAfter(e,t-NC,n))===i&&o===this.array.length-1)return this}var a=Yx(this,e);return a.array.splice(o+1),r&&(a.array[o]=r),a};var Gx,jx={};function zx(e,t){var n=e._origin,r=e._capacity,o=Kx(r),i=e._tail;return a(e._root,e._level,0);function a(e,s,l){return 0===s?function(e,a){var s=a===o?i&&i.array:e&&e.array,l=a>n?0:n-a,c=r-a;c>LC&&(c=LC);return function(){if(l===c)return jx;var e=t?--c:l++;return s&&s[e]}}(e,l):function(e,o,i){var s,l=e&&e.array,c=i>n?0:n-i>>o,u=1+(r-i>>o);u>LC&&(u=LC);return function(){for(;;){if(s){var e=s();if(e!==jx)return e;s=null}if(c===u)return jx;var n=t?--u:c++;s=a(l&&l[n],o-NC,i+(n<<o))}}}(e,s,l)}}function Hx(e,t,n,r,o,i,a){var s=Object.create(Lx);return s.size=t-e,s._origin=e,s._capacity=t,s._level=n,s._root=r,s._tail=o,s.__ownerID=i,s.__hash=a,s.__altered=!1,s}function Vx(){return Gx||(Gx=Hx(0,0,NC))}function qx(e,t,n,r,o,i){var a,s=r>>>n&UC,l=e&&s<e.array.length;if(!l&&void 0===o)return e;if(n>0){var c=e&&e.array[s],u=qx(c,t,n-NC,r,o,i);return u===c?e:((a=Yx(e,t)).array[s]=u,a)}return l&&e.array[s]===o?e:(i&&jC(i),a=Yx(e,t),void 0===o&&s===a.array.length-1?a.array.pop():a.array[s]=o,a)}function Yx(e,t){return t&&e&&t===e.ownerID?e:new Ux(e?e.array.slice():[],t)}function Xx(e,t){if(t>=Kx(e._capacity))return e._tail;if(t<1<<e._level+NC){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&UC],r-=NC;return n}}function Wx(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var r=e.__ownerID||new zC,o=e._origin,i=e._capacity,a=o+t,s=void 0===n?i:n<0?i+n:o+n;if(a===o&&s===i)return e;if(a>=s)return e.clear();for(var l=e._level,c=e._root,u=0;a+u<0;)c=new Ux(c&&c.array.length?[void 0,c]:[],r),u+=1<<(l+=NC);u&&(a+=u,o+=u,s+=u,i+=u);for(var d=Kx(i),A=Kx(s);A>=1<<l+NC;)c=new Ux(c&&c.array.length?[c]:[],r),l+=NC;var f=e._tail,p=A<d?Xx(e,s-1):A>d?new Ux([],r):f;if(f&&A>d&&a<i&&f.array.length){for(var h=c=Yx(c,r),g=l;g>NC;g-=NC){var m=d>>>g&UC;h=h.array[m]=Yx(h.array[m],r)}h.array[d>>>NC&UC]=f}if(s<i&&(p=p&&p.removeAfter(r,0,s)),a>=A)a-=A,s-=A,l=NC,c=null,p=p&&p.removeBefore(r,0,a);else if(a>o||A<d){for(u=0;c;){var y=a>>>l&UC;if(y!==A>>>l&UC)break;y&&(u+=(1<<l)*y),l-=NC,c=c.array[y]}c&&a>o&&(c=c.removeBefore(r,l,a-u)),c&&A<d&&(c=c.removeAfter(r,l,A-u)),u&&(a-=u,s-=u)}return e.__ownerID?(e.size=s-a,e._origin=a,e._capacity=s,e._level=l,e._root=c,e._tail=p,e.__hash=void 0,e.__altered=!0,e):Hx(a,s,l,c,p)}function Kx(e){return e<LC?0:e-1>>>NC<<NC}var Jx,Zx=function(e){function t(e){return void 0===e||null===e?eB():VI(e)?e:eB().withMutations((function(t){var n=aI(e);PE(n.size),n.forEach((function(e,n){return t.set(n,e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):eB()},t.prototype.set=function(e,t){return tB(this,e,t)},t.prototype.remove=function(e){return tB(this,e,GC)},t.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],n)}),t)},t.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?$x(t,n,e,this.__hash):0===this.size?eB():(this.__ownerID=e,this.__altered=!1,this._map=t,this._list=n,this)},t}(px);function $x(e,t,n,r){var o=Object.create(Zx.prototype);return o.size=e?e.size:0,o._map=e,o._list=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function eB(){return Jx||(Jx=$x(wx(),Vx()))}function tB(e,t,n){var r,o,i=e._map,a=e._list,s=i.get(t),l=void 0!==s;if(n===GC){if(!l)return e;a.size>=LC&&a.size>=2*i.size?(r=(o=a.filter((function(e,t){return void 0!==e&&s!==t}))).toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(r.__ownerID=o.__ownerID=e.__ownerID)):(r=i.remove(t),o=s===a.size-1?a.pop():a.set(s,void 0))}else if(l){if(n===a.get(s)[1])return e;r=i,o=a.set(s,[t,n])}else r=i.set(t,a.size),o=a.set(a.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=o,e.__hash=void 0,e.__altered=!0,e):$x(r,o)}Zx.isOrderedMap=VI,Zx.prototype[pI]=!0,Zx.prototype[FC]=Zx.prototype.remove;var nB="@@__IMMUTABLE_STACK__@@";function rB(e){return Boolean(e&&e[nB])}var oB=function(e){function t(e){return void 0===e||null===e?lB():rB(e)?e:lB().pushAll(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(e,t){var n=this._head;for(e=VC(this,e);n&&e--;)n=n.next;return n?n.value:t},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var e=arguments;if(0===arguments.length)return this;for(var t=this.size+arguments.length,n=this._head,r=arguments.length-1;r>=0;r--)n={value:e[r],next:n};return this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):sB(t,n)},t.prototype.pushAll=function(t){if(0===(t=e(t)).size)return this;if(0===this.size&&rB(t))return t;PE(t.size);var n=this.size,r=this._head;return t.__iterate((function(e){n++,r={value:e,next:r}}),!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):sB(n,r)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):lB()},t.prototype.slice=function(t,n){if(YC(t,n,this.size))return this;var r=XC(t,this.size);if(WC(n,this.size)!==this.size)return e.prototype.slice.call(this,t,n);for(var o=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=o,this._head=i,this.__hash=void 0,this.__altered=!0,this):sB(o,i)},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?sB(this.size,this._head,e,this.__hash):0===this.size?lB():(this.__ownerID=e,this.__altered=!1,this)},t.prototype.__iterate=function(e,t){var n=this;if(t)return new PI(this.toArray()).__iterate((function(t,r){return e(t,r,n)}),t);for(var r=0,o=this._head;o&&!1!==e(o.value,r++,this);)o=o.next;return r},t.prototype.__iterator=function(e,t){if(t)return new PI(this.toArray()).__iterator(e,t);var n=0,r=this._head;return new II((function(){if(r){var t=r.value;return r=r.next,EI(e,n++,t)}return{value:void 0,done:!0}}))},t}(sI);oB.isStack=rB;var iB,aB=oB.prototype;function sB(e,t,n,r){var o=Object.create(aB);return o.size=e,o._head=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function lB(){return iB||(iB=sB(0))}aB[nB]=!0,aB.shift=aB.pop,aB.unshift=aB.push,aB.unshiftAll=aB.pushAll,aB.withMutations=ux,aB.wasAltered=fx,aB.asImmutable=Ax,aB["@@transducer/init"]=aB.asMutable=dx,aB["@@transducer/step"]=function(e,t){return e.unshift(t)},aB["@@transducer/result"]=function(e){return e.asImmutable()};var cB="@@__IMMUTABLE_SET__@@";function uB(e){return Boolean(e&&e[cB])}function dB(e){return uB(e)&&hI(e)}function AB(e,t){if(e===t)return!0;if(!$C(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||tI(e)!==tI(t)||rI(e)!==rI(t)||hI(e)!==hI(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!oI(e);if(hI(e)){var r=e.entries();return t.every((function(e,t){var o=r.next().value;return o&&YI(o[1],e)&&(n||YI(o[0],t))}))&&r.next().done}var o=!1;if(void 0===e.size)if(void 0===t.size)"function"===typeof e.cacheResult&&e.cacheResult();else{o=!0;var i=e;e=t,t=i}var a=!0,s=t.__iterate((function(t,r){if(n?!e.has(t):o?!YI(t,e.get(r,GC)):!YI(e.get(r,GC),t))return a=!1,!1}));return a&&e.size===s}function fB(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function pB(e){if(!e||"object"!==typeof e)return e;if(!$C(e)){if(!LE(e))return e;e=kI(e)}if(tI(e)){var t={};return e.__iterate((function(e,n){t[n]=pB(e)})),t}var n=[];return e.__iterate((function(e){n.push(pB(e))})),n}var hB=function(e){function t(t){return void 0===t||null===t?bB():uB(t)&&!hI(t)?t:bB().withMutations((function(n){var r=e(t);PE(r.size),r.forEach((function(e){return n.add(e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(aI(e).keySeq())},t.intersect=function(e){return(e=iI(e).toArray()).length?mB.intersect.apply(t(e.pop()),e):bB()},t.union=function(e){return(e=iI(e).toArray()).length?mB.union.apply(t(e.pop()),e):bB()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(e){return this._map.has(e)},t.prototype.add=function(e){return yB(this,this._map.set(e,e))},t.prototype.remove=function(e){return yB(this,this._map.remove(e))},t.prototype.clear=function(){return yB(this,this._map.clear())},t.prototype.map=function(e,t){var n=this,r=!1,o=yB(this,this._map.mapEntries((function(o){var i=o[1],a=e.call(t,i,i,n);return a!==i&&(r=!0),[a,a]}),t));return r?o:this},t.prototype.union=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return t=t.filter((function(e){return 0!==e.size})),0===t.length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(n){for(var r=0;r<t.length;r++)"string"===typeof t[r]?n.add(t[r]):e(t[r]).forEach((function(e){return n.add(e)}))})):this.constructor(t[0])},t.prototype.intersect=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var r=[];return this.forEach((function(e){t.every((function(t){return t.includes(e)}))||r.push(e)})),this.withMutations((function(e){r.forEach((function(t){e.remove(t)}))}))},t.prototype.subtract=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var r=[];return this.forEach((function(e){t.some((function(t){return t.includes(e)}))&&r.push(e)})),this.withMutations((function(e){r.forEach((function(t){e.remove(t)}))}))},t.prototype.sort=function(e){return LB(EE(this,e))},t.prototype.sortBy=function(e,t){return LB(EE(this,t,e))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate((function(t){return e(t,t,n)}),t)},t.prototype.__iterator=function(e,t){return this._map.__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):0===this.size?this.__empty():(this.__ownerID=e,this._map=t,this)},t}(lI);hB.isSet=uB;var gB,mB=hB.prototype;function yB(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function vB(e,t){var n=Object.create(mB);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function bB(){return gB||(gB=vB(wx()))}mB[cB]=!0,mB[FC]=mB.remove,mB.merge=mB.concat=mB.union,mB.withMutations=ux,mB.asImmutable=Ax,mB["@@transducer/init"]=mB.asMutable=dx,mB["@@transducer/step"]=function(e,t){return e.add(t)},mB["@@transducer/result"]=function(e){return e.asImmutable()},mB.__empty=bB,mB.__make=vB;var CB,IB=function(e){function t(e,n,r){if(!(this instanceof t))return new t(e,n,r);if(RE(0!==r,"Cannot step a Range by 0"),e=e||0,void 0===n&&(n=1/0),r=void 0===r?1:Math.abs(r),n<e&&(r=-r),this._start=e,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-e)/r-1)+1),0===this.size){if(CB)return CB;CB=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},t.prototype.get=function(e,t){return this.has(e)?this._start+VC(this,e)*this._step:t},t.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},t.prototype.slice=function(e,n){return YC(e,n,this.size)?this:(e=XC(e,this.size),(n=WC(n,this.size))<=e?new t(0,0):new t(this.get(e,this._end),this.get(n,this._end),this._step))},t.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step===0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},t.prototype.lastIndexOf=function(e){return this.indexOf(e)},t.prototype.__iterate=function(e,t){for(var n=this.size,r=this._step,o=t?this._start+(n-1)*r:this._start,i=0;i!==n&&!1!==e(o,t?n-++i:i++,this);)o+=t?-r:r;return i},t.prototype.__iterator=function(e,t){var n=this.size,r=this._step,o=t?this._start+(n-1)*r:this._start,i=0;return new II((function(){if(i===n)return{value:void 0,done:!0};var a=o;return o+=t?-r:r,EI(e,t?n-++i:i++,a)}))},t.prototype.equals=function(e){return e instanceof t?this._start===e._start&&this._end===e._end&&this._step===e._step:AB(this,e)},t}(MI);function EB(e,t,n){for(var r=OE(t),o=0;o!==r.length;)if((e=jE(e,r[o++],GC))===GC)return n;return e}function xB(e,t){return EB(this,e,t)}function BB(e,t){return EB(e,t,GC)!==GC}function wB(){PE(this.size);var e={};return this.__iterate((function(t,n){e[n]=t})),e}iI.isIterable=$C,iI.isKeyed=tI,iI.isIndexed=rI,iI.isAssociative=oI,iI.isOrdered=hI,iI.Iterator=II,fB(iI,{toArray:function(){PE(this.size);var e=new Array(this.size||0),t=tI(this),n=0;return this.__iterate((function(r,o){e[n++]=t?[o,r]:r})),e},toIndexedSeq:function(){return new fE(this)},toJS:function(){return pB(this)},toKeyedSeq:function(){return new AE(this,!0)},toMap:function(){return px(this.toKeyedSeq())},toObject:wB,toOrderedMap:function(){return Zx(this.toKeyedSeq())},toOrderedSet:function(){return LB(tI(this)?this.valueSeq():this)},toSet:function(){return hB(tI(this)?this.valueSeq():this)},toSetSeq:function(){return new pE(this)},toSeq:function(){return rI(this)?this.toIndexedSeq():tI(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return oB(tI(this)?this.valueSeq():this)},toList:function(){return Nx(tI(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return _E(this,function(e,t){var n=tI(e),r=[e].concat(t).map((function(e){return $C(e)?n&&(e=aI(e)):e=n?UI(e):GI(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===r.length)return e;if(1===r.length){var o=r[0];if(o===e||n&&tI(o)||rI(e)&&rI(o))return o}var i=new PI(r);return n?i=i.toKeyedSeq():rI(e)||(i=i.toSetSeq()),(i=i.flatten(!0)).size=r.reduce((function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}}),0),i}(this,e))},includes:function(e){return this.some((function(t){return YI(t,e)}))},entries:function(){return this.__iterator(yI)},every:function(e,t){PE(this.size);var n=!0;return this.__iterate((function(r,o,i){if(!e.call(t,r,o,i))return n=!1,!1})),n},filter:function(e,t){return _E(this,vE(this,e,t,!0))},partition:function(e,t){return function(e,t,n){var r=tI(e),o=[[],[]];e.__iterate((function(i,a){o[t.call(n,i,a,e)?1:0].push(r?[a,i]:i)}));var i=DE(e);return o.map((function(t){return _E(e,i(t))}))}(this,e,t)},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},forEach:function(e,t){return PE(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){PE(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate((function(r){n?n=!1:t+=e,t+=null!==r&&void 0!==r?r.toString():""})),t},keys:function(){return this.__iterator(gI)},map:function(e,t){return _E(this,mE(this,e,t))},reduce:function(e,t,n){return kB(this,e,t,n,arguments.length<2,!1)},reduceRight:function(e,t,n){return kB(this,e,t,n,arguments.length<2,!0)},reverse:function(){return _E(this,yE(this,!0))},slice:function(e,t){return _E(this,bE(this,e,t,!0))},some:function(e,t){PE(this.size);var n=!1;return this.__iterate((function(r,o,i){if(e.call(t,r,o,i))return n=!0,!1})),n},sort:function(e){return _E(this,EE(this,e))},values:function(){return this.__iterator(mI)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return HC(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,n){var r=px().asMutable();return e.__iterate((function(o,i){r.update(t.call(n,o,i,e),0,(function(e){return e+1}))})),r.asImmutable()}(this,e,t)},equals:function(e){return AB(this,e)},entrySeq:function(){var e=this;if(e._cache)return new PI(e._cache);var t=e.toSeq().map(MB).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(RB(e),t)},findEntry:function(e,t,n){var r=n;return this.__iterate((function(n,o,i){if(e.call(t,n,o,i))return r=[o,n],!1})),r},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},findLastEntry:function(e,t,n){return this.toKeyedSeq().reverse().findEntry(e,t,n)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(e){return this.find(qC,null,e)},flatMap:function(e,t){return _E(this,function(e,t,n){var r=DE(e);return e.toSeq().map((function(o,i){return r(t.call(n,o,i,e))})).flatten(!0)}(this,e,t))},flatten:function(e){return _E(this,IE(this,e,!0))},fromEntrySeq:function(){return new hE(this)},get:function(e,t){return this.find((function(t,n){return YI(n,e)}),void 0,t)},getIn:xB,groupBy:function(e,t){return function(e,t,n){var r=tI(e),o=(hI(e)?Zx():px()).asMutable();e.__iterate((function(i,a){o.update(t.call(n,i,a,e),(function(e){return(e=e||[]).push(r?[a,i]:i),e}))}));var i=DE(e);return o.map((function(t){return _E(e,i(t))})).asImmutable()}(this,e,t)},has:function(e){return this.get(e,GC)!==GC},hasIn:function(e){return BB(this,e)},isSubset:function(e){return e="function"===typeof e.includes?e:iI(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"===typeof e.isSubset?e:iI(e)).isSubset(this)},keyOf:function(e){return this.findKey((function(t){return YI(t,e)}))},keySeq:function(){return this.toSeq().map(QB).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return xE(this,e)},maxBy:function(e,t){return xE(this,t,e)},min:function(e){return xE(this,e?PB(e):FB)},minBy:function(e,t){return xE(this,t?PB(t):FB,e)},rest:function(){return this.slice(1)},skip:function(e){return 0===e?this:this.slice(Math.max(0,e))},skipLast:function(e){return 0===e?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,t){return _E(this,CE(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(RB(e),t)},sortBy:function(e,t){return _E(this,EE(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,t){return _E(this,function(e,t,n){var r=TE(e);return r.__iterateUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterate(r,o);var a=0;return e.__iterate((function(e,o,s){return t.call(n,e,o,s)&&++a&&r(e,o,i)})),a},r.__iteratorUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterator(r,o);var a=e.__iterator(yI,o),s=!0;return new II((function(){if(!s)return{value:void 0,done:!0};var e=a.next();if(e.done)return e;var o=e.value,l=o[0],c=o[1];return t.call(n,c,l,i)?r===yI?e:EI(r,l,c,e):(s=!1,{value:void 0,done:!0})}))},r}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(RB(e),t)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=hI(e),n=tI(e),r=t?1:0,o=e.__iterate(n?t?function(e,t){r=31*r+NB(JI(e),JI(t))|0}:function(e,t){r=r+NB(JI(e),JI(t))|0}:t?function(e){r=31*r+JI(e)|0}:function(e){r=r+JI(e)|0});return function(e,t){return t=XI(t,3432918353),t=XI(t<<15|t>>>-15,461845907),t=XI(t<<13|t>>>-13,5),t=t+3864292196^e,t=XI(t^t>>>16,2246822507),t=XI(t^t>>>13,3266489909),t=WI(t^t>>>16),t}(o,r)}(this))}});var _B=iI.prototype;_B[ZC]=!0,_B[CI]=_B.values,_B.toJSON=_B.toArray,_B.__toStringMapper=UE,_B.inspect=_B.toSource=function(){return this.toString()},_B.chain=_B.flatMap,_B.contains=_B.includes,fB(aI,{flip:function(){return _E(this,gE(this))},mapEntries:function(e,t){var n=this,r=0;return _E(this,this.toSeq().map((function(o,i){return e.call(t,[i,o],r++,n)})).fromEntrySeq())},mapKeys:function(e,t){var n=this;return _E(this,this.toSeq().flip().map((function(r,o){return e.call(t,r,o,n)})).flip())}});var SB=aI.prototype;SB[eI]=!0,SB[CI]=_B.entries,SB.toJSON=wB,SB.__toStringMapper=function(e,t){return UE(t)+": "+UE(e)},fB(sI,{toKeyedSeq:function(){return new AE(this,!1)},filter:function(e,t){return _E(this,vE(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return _E(this,yE(this,!1))},slice:function(e,t){return _E(this,bE(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(t||0,0),0===n||2===n&&!t)return this;e=XC(e,e<0?this.count():this.size);var r=this.slice(0,e);return _E(this,1===n?r:r.concat(ME(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.findLastEntry(e,t);return n?n[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return _E(this,IE(this,e,!1))},get:function(e,t){return(e=VC(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find((function(t,n){return n===e}),void 0,t)},has:function(e){return(e=VC(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return _E(this,function(e,t){var n=TE(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var o=this,i=0;return e.__iterate((function(e){return(!i||!1!==n(t,i++,o))&&!1!==n(e,i++,o)}),r),i},n.__iteratorUncached=function(n,r){var o,i=e.__iterator(mI,r),a=0;return new II((function(){return(!o||a%2)&&(o=i.next()).done?o:a%2?EI(n,a++,t):EI(n,a++,o.value,o)}))},n}(this,e))},interleave:function(){var e=[this].concat(ME(arguments)),t=wE(this.toSeq(),MI.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),_E(this,n)},keySeq:function(){return IB(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,t){return _E(this,CE(this,e,t,!1))},zip:function(){return _E(this,wE(this,OB,[this].concat(ME(arguments))))},zipAll:function(){return _E(this,wE(this,OB,[this].concat(ME(arguments)),!0))},zipWith:function(e){var t=ME(arguments);return t[0]=this,_E(this,wE(this,e,t))}});var DB=sI.prototype;DB[nI]=!0,DB[pI]=!0,fB(lI,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var TB=lI.prototype;function kB(e,t,n,r,o,i){return PE(e.size),e.__iterate((function(e,i,a){o?(o=!1,n=e):n=t.call(r,n,e,i,a)}),i),n}function QB(e,t){return t}function MB(e,t){return[t,e]}function RB(e){return function(){return!e.apply(this,arguments)}}function PB(e){return function(){return-e.apply(this,arguments)}}function OB(){return ME(arguments)}function FB(e,t){return e<t?1:e>t?-1:0}function NB(e,t){return e^t+2654435769+(e<<6)+(e>>2)}TB.has=_B.includes,TB.contains=TB.includes,TB.keys=TB.values,fB(QI,SB),fB(MI,DB),fB(RI,TB);var LB=function(e){function t(e){return void 0===e||null===e?zB():dB(e)?e:zB().withMutations((function(t){var n=lI(e);PE(n.size),n.forEach((function(e){return t.add(e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(aI(e).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(hB);LB.isOrderedSet=dB;var UB,GB=LB.prototype;function jB(e,t){var n=Object.create(GB);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function zB(){return UB||(UB=jB(eB()))}GB[pI]=!0,GB.zip=DB.zip,GB.zipWith=DB.zipWith,GB.zipAll=DB.zipAll,GB.__empty=zB,GB.__make=jB;var HB=function(e,t){var n;!function(e){if(AI(e))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(fI(e))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===e||"object"!==typeof e)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(e);var r=function(i){var a=this;if(i instanceof r)return i;if(!(this instanceof r))return new r(i);if(!n){n=!0;var s=Object.keys(e),l=o._indices={};o._name=t,o._keys=s,o._defaultValues=e;for(var c=0;c<s.length;c++){var u=s[c];l[u]=c,o[u]?"object"===typeof console&&console.warn&&console.warn("Cannot define "+YB(this)+' with property "'+u+'" since that property name is part of the Record API.'):WB(o,u)}}return this.__ownerID=void 0,this._values=Nx().withMutations((function(e){e.setSize(a._keys.length),aI(i).forEach((function(t,n){e.set(a._indices[n],t===a._defaultValues[n]?void 0:t)}))})),this},o=r.prototype=Object.create(VB);return o.constructor=r,t&&(r.displayName=t),r};HB.prototype.toString=function(){for(var e,t=YB(this)+" { ",n=this._keys,r=0,o=n.length;r!==o;r++)t+=(r?", ":"")+(e=n[r])+": "+UE(this.get(e));return t+" }"},HB.prototype.equals=function(e){return this===e||AI(e)&&XB(this).equals(XB(e))},HB.prototype.hashCode=function(){return XB(this).hashCode()},HB.prototype.has=function(e){return this._indices.hasOwnProperty(e)},HB.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._indices[e],r=this._values.get(n);return void 0===r?this._defaultValues[e]:r},HB.prototype.set=function(e,t){if(this.has(e)){var n=this._values.set(this._indices[e],t===this._defaultValues[e]?void 0:t);if(n!==this._values&&!this.__ownerID)return qB(this,n)}return this},HB.prototype.remove=function(e){return this.set(e)},HB.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:qB(this,e)},HB.prototype.wasAltered=function(){return this._values.wasAltered()},HB.prototype.toSeq=function(){return XB(this)},HB.prototype.toJS=function(){return pB(this)},HB.prototype.entries=function(){return this.__iterator(yI)},HB.prototype.__iterator=function(e,t){return XB(this).__iterator(e,t)},HB.prototype.__iterate=function(e,t){return XB(this).__iterate(e,t)},HB.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._values.__ensureOwner(e);return e?qB(this,t,e):(this.__ownerID=e,this._values=t,this)},HB.isRecord=AI,HB.getDescriptiveName=YB;var VB=HB.prototype;function qB(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._values=t,r.__ownerID=n,r}function YB(e){return e.constructor.displayName||e.constructor.name||"Record"}function XB(e){return UI(e._keys.map((function(t){return[t,e.get(t)]})))}function WB(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){RE(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch(PF){}}VB[dI]=!0,VB[FC]=VB.remove,VB.deleteIn=VB.removeIn=JE,VB.getIn=xB,VB.hasIn=_B.hasIn,VB.merge=tx,VB.mergeWith=nx,VB.mergeIn=lx,VB.mergeDeep=ax,VB.mergeDeepWith=sx,VB.mergeDeepIn=cx,VB.setIn=WE,VB.update=$E,VB.updateIn=ex,VB.withMutations=ux,VB.asMutable=dx,VB.asImmutable=Ax,VB[CI]=VB.entries,VB.toJSON=VB.toObject=_B.toObject,VB.inspect=VB.toSource=function(){return this.toString()};const KB=Object.prototype.hasOwnProperty;function JB(e,t){let n=!1;for(const r of Object.keys(t))if(KB.call(t,r)&&t[r]!==e[r]){n=!0;break}return n?Object.assign({},e,t):e}function ZB(e,t){if(!e)return!t;if(!t)return!1;const n=Object.keys(e);if(Object.keys(t).length!==n.length)return!1;for(const r of n)if(!KB.call(e,r)||e[r]!==t[r])return!1;return!0}function $B(e,t){let n=e;for(let r=0;r<t.length;r++)if(t[r]&&(n=JB(e,t[r]),n!==e)){for(let e=r+1;e<t.length;e++)n=Object.assign(n,t[e]);break}return n}function ew(e){if(null===e||"object"!==typeof e)return e;if(e instanceof Array){const t=[];for(let n=0,r=e.length;n<r;n++)t[n]=ew(e[n]);return t}if("object"===typeof e&&!("prototype"in e)){const t={};for(const n in e)KB.call(e,n)&&(t[n]=ew(e[n]));return t}throw new Error(`Can't clone, type "${typeof e}" unsupported`)}function tw(e,t){if(e)for(const n of Object.keys(e))t(e[n],n)}function nw(e,t,n){for(let r=0,o=n.length;r<o;r++){const o=n.charCodeAt(r);if(o<128)e[t++]=o>>>0&127;else if(o<2048)e[t++]=o>>>6&31|192,e[t++]=o>>>0&63|128;else if(o<65536)e[t++]=o>>>12&15|224,e[t++]=o>>>6&63|128,e[t++]=o>>>0&63|128;else{if(!(o<1114112))throw new Error("bad codepoint "+o);e[t++]=o>>>18&7|240,e[t++]=o>>>12&63|128,e[t++]=o>>>6&63|128,e[t++]=o>>>0&63|128}}}const rw=function(){const e=[];for(let t=0;t<1024;t++)e[t]=String.fromCharCode(t);return e}();function ow(e){throw new Error(e)}const iw="undefined"!==typeof TextDecoder?new TextDecoder:void 0;function aw(e,t,n){if(iw){const r=t||n!==e.length?e.subarray(t,t+n):e;return iw.decode(r)}return function(e,t,n){const r=rw;let o,i=0;const a=[];for(let s=t,l=t+n;s<l;s++){const t=e[s];0===(128&t)?a[i++]=r[t]:192===(224&t)?a[i++]=r[(15&t)<<6|63&e[++s]]:224===(240&t)?a[i++]=String.fromCharCode((15&t)<<12|(63&e[++s])<<6|63&e[++s]):240===(248&t)?a[i++]=String.fromCharCode((7&t)<<18|(63&e[++s])<<12|(63&e[++s])<<6|63&e[++s]):ow("Invalid byte "+t.toString(16)),512===i&&(o=o||[],o[o.length]=a.join(""),i=0)}return o?(i>0&&(o[o.length]=a.slice(0,i).join("")),o.join("")):a.slice(0,i).join("")}(e,t,n)}function sw(e){let t=0;for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);r<128?t+=1:r<2048?t+=2:r<65536?t+=3:r<1114112?t+=4:ow("bad codepoint "+r)}return t}const lw="undefined"!==typeof setImmediate?"undefined"!==typeof window?{setImmediate:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return window.setImmediate(e,...n)},clearImmediate:e=>window.clearImmediate(e)}:{setImmediate:setImmediate,clearImmediate:clearImmediate}:function(){const e=function(){const e="undefined"!==typeof window&&window,t="undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,r="undefined"!==typeof n.g&&n.g;return e||r||t}(),t={},r="undefined"!==typeof document?document:void 0;let o,i=1;function a(e){delete t[e]}function s(e){const n=t[e];a(e),function(e){const t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(n)}return"undefined"!==typeof process&&"[object process]"==={}.toString.call(process)?o=function(e){process.nextTick((function(){s(e)}))}:function(){if(e&&e.postMessage&&!e.importScripts){let t=!0;const n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){const t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&s(+n.data.slice(t.length))};window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent("onmessage",n),o=function(e){window.postMessage(t+e,"*")}}():"undefined"!==typeof MessageChannel?function(){const e=new MessageChannel;e.port1.onmessage=function(e){s(e.data)},o=function(t){e.port2.postMessage(t)}}():r&&"onreadystatechange"in r.createElement("script")?function(){const e=r.documentElement;o=function(t){let n=r.createElement("script");n.onreadystatechange=function(){s(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():o=function(e){setTimeout(s,0,e)},{setImmediate:function(e){"function"!==typeof e&&(e=new Function(""+e));for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];const s={callback:e,args:r};return t[i]=s,o(i),i++},clearImmediate:a}}();function cw(e){lw.setImmediate(e)}const uw={setImmediate:lw.setImmediate,clearImmediate:lw.clearImmediate,immediatePromise:()=>new Promise(cw),delay(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return new Promise((n=>setTimeout(n,e,t)))}};let dw=function(){try{return!0}catch(e){return!1}}(),Aw=function(){try{const e={NODE_ENV:"production",PUBLIC_URL:"/EzSEA-web-lab",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG;return"*"===e||"molstar"===e}catch(e){return!1}}(),fw=!1;const pw=[];const hw="undefined"!==typeof performance&&!!performance.mark&&performance.measure&&fw;var gw;function mw(e,t){const n=bw(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:250);return new Sw(n,n.root)}function yw(e,t){return xw(t,e)}function vw(e){return{taskId:e.id,taskName:e.name,message:"",startedTime:0,canAbort:!0,isIndeterminate:!0,current:0,max:0}}function bw(e,t,n){const r={abortRequested:!1,treeAborted:!1,reason:""};return{updateRateMs:n,lastNotified:vp(),observer:t,abortToken:r,taskId:e.id,root:{progress:vw(e),children:[]},tryAbort:Cw(r)}}function Cw(e){return t=>{e.abortRequested=!0,e.reason=t||e.reason}}function Iw(e){return{progress:{...e.progress},children:e.children.map(Iw)}}function Ew(e){return e.progress.canAbort&&e.children.every(Ew)}async function xw(e,t){gw.markStart(e),t.node.progress.startedTime=vp();try{const n=await e.f(t);return gw.markEnd(e),gw.measure(e),t.info.abortToken.abortRequested&&Bw(t.info),n}catch(l0e){throw Tw.isAbort(l0e)&&(t.isAborted=!0,t.node.children.length>0&&await new Promise((e=>{t.onChildrenFinished=e})),e.onAbort&&e.onAbort()),l0e}}function Bw(e){throw e.abortToken.treeAborted||(e.abortToken.treeAborted=!0,ww(e.root),_w(e,vp())),Tw.Aborted(e.abortToken.reason)}function ww(e){const t=e.progress;t.isIndeterminate=!0,t.canAbort=!1,t.message="Aborting...";for(const n of e.children)ww(n)}function _w(e,t){e.lastNotified=t;const n=function(e){return{root:Iw(e.root),canAbort:Ew(e.root),requestAbort:e.tryAbort}}(e);e.observer(n)}!function(e){function t(e){return`startTask${e.id}`}function n(e){return`endTask${e.id}`}e.markStart=function(e){hw&&performance.mark(t(e))},e.markEnd=function(e){hw&&performance.mark(n(e))},e.measure=function(e){hw&&performance.measure(`\u2733\ufe0f ${e.name}`,t(e),n(e))}}(gw||(gw={}));class Sw{checkAborted(){this.info.abortToken.abortRequested&&(this.isAborted=!0,Bw(this.info))}get shouldUpdate(){return this.checkAborted(),vp()-this.lastUpdatedTime>this.info.updateRateMs}updateProgress(e){if(this.checkAborted(),!e)return;const t=this.node.progress;"string"===typeof e?(t.message=e,t.isIndeterminate=!0):("undefined"!==typeof e.canAbort&&(t.canAbort=e.canAbort),"undefined"!==typeof e.message&&(t.message=e.message),"undefined"!==typeof e.current&&(t.current=e.current),"undefined"!==typeof e.max&&(t.max=e.max),t.isIndeterminate="undefined"===typeof t.current||"undefined"===typeof t.max,"undefined"!==typeof e.isIndeterminate&&(t.isIndeterminate=e.isIndeterminate))}update(e,t){if(this.lastUpdatedTime=vp(),this.updateProgress(e),!t)return _w(this.info,this.lastUpdatedTime),this.checkAborted(),uw.immediatePromise()}async runChild(e,t){this.updateProgress(t);const n={progress:vw(e),children:[]},r=this.node.children;r.push(n);const o=new Sw(this.info,n);try{return await xw(e,o)}catch(l0e){if(Tw.isAbort(l0e)&&this.isAborted)return;throw l0e}finally{const e=r.indexOf(n);if(e>=0){for(let t=e,n=r.length-1;t<n;t++)r[t]=r[t+1];r.pop()}0===r.length&&this.onChildrenFinished&&this.onChildrenFinished()}}constructor(e,t){this.isSynchronous=!1,this.isExecuting=!0,this.lastUpdatedTime=0,this.onChildrenFinished=void 0,this.node=t,this.info=e}}const Dw=new class{constructor(){this.shouldUpdate=!1,this.isSynchronous=!0}update(e,t){}};var Tw,kw,Qw;async function Mw(e,t,n,r,o){let i=Math.max(t,0),a=0,s=0;if(e.isSynchronous)return r(Number.MAX_SAFE_INTEGER,n),n;let l=vp(),c=0,u=0;for(;(c=r(i,n))>0;){a+=c;const t=vp()-l;u+=t,s+=t,e.shouldUpdate&&(await o(e,n,a),i=Math.round(u*a/s)+1,l=vp(),u=0)}return e.shouldUpdate&&await o(e,n,a),n}!function(e){class t{run(e){return e?function(e,t){const n=bw(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:250);return xw(e,new Sw(n,n.root))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:250):this.f(Dw)}runAsChild(e,t){return e.isSynchronous?this.f(Dw):function(e,t,n){return e.runChild(t,n)}(e,this,t)}runInContext(e){return e.isSynchronous?this.f(Dw):yw(e,this)}constructor(e,t,n){this.name=e,this.f=t,this.onAbort=n,this.id=o()}}function n(e){const t=e;return!!e&&"number"===typeof t.id&&"string"===typeof t.name&&!!t.run}function r(e,n,r){return new t(e,n,r)}e.is=n,e.isAbort=function(e){return!!e&&!!e.isAborted},e.Aborted=function(e){return{isAborted:!0,reason:e,toString:()=>"Aborted"+(e?": "+e:"")}},e.create=r,e.constant=function(e,t){return r(e,(async e=>t))},e.empty=function(){return r("",(async e=>{}))},e.fail=function(e,t){return r(e,(async e=>{throw new Error(t)}))},e.resolveInContext=function(e,t){return n(e)?t?e.runInContext(t):e.run():e};const o=Bp(0,1073741823)}(Tw||(Tw={})),function(e){e.Synchronous=Dw}(kw||(kw={})),function(e){function t(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e.progress;if(!e.children.length)return r.isIndeterminate?`${n}${r.taskName}: ${r.message}`:`${n}${r.taskName}: [${r.current}/${r.max}] ${r.message}`;const o=n+"  |_ ",i=e.children.map((e=>t(e,o)));return r.isIndeterminate?`${n}${r.taskName}: ${r.message}\n${i.join("\n")}`:`${n}${r.taskName}: [${r.current}/${r.max}] ${r.message}\n${i.join("\n")}`}e.format=function(e){return t(e.root)}}(Qw||(Qw={}));const Rw="undefined"!==typeof process&&null!=process.versions&&null!=process.versions.node,Pw="undefined"===typeof XMLHttpRequest||Rw?n(4):XMLHttpRequest;!function(){if("undefined"===typeof File||Rw){class e{arrayBuffer(){return this.blob.arrayBuffer()}slice(e,t,n){return this.blob.slice(e,t,n)}stream(){return this.blob.stream()}text(){return this.blob.text()}constructor(e,t,n){var r;this.blob=new Blob(e,n),this.size=this.blob.size,this.type=this.blob.type,this.name=t,this.lastModified=null!==(r=null===n||void 0===n?void 0:n.lastModified)&&void 0!==r?r:0,this.webkitRelativePath=""}}return e}File}();function Ow(e,t){return e[t]|e[t+1]<<8}function Fw(e,t,n){e[t]=255&n,e[t+1]=n>>8&255}function Nw(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])}function Lw(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255}function Uw(e){return e.length<2?"0"+e:e}function Gw(e,t,n){let r,o="";for(let i=0;i<n;i++)o+="%"+Uw(e[t+i].toString(16));try{r=decodeURIComponent(o)}catch(l0e){return function(e,t,n){let r="";for(let o=0;o<n;o++)r+=String.fromCharCode(e[t+o]);return r}(e,t,n)}return r}function jw(e){const t=e.length;let n=0;for(let r=0;r<t;r++){const t=e.charCodeAt(r);if(0===(4294967168&t))n++;else if(0===(4294965248&t))n+=2;else if(0===(4294901760&t))n+=3;else{if(0!==(4292870144&t))throw new Error("e");n+=4}}return n}const zw=function(){const e=new Uint32Array(256);for(let t=0;t<256;t++){let n=t;for(let e=0;e<8;e++)1&n?n=3988292384^n>>>1:n>>>=1;e[t]=n}return e}();function Hw(e,t,n){return 4294967295^function(e,t,n,r){for(let o=0;o<r;o++)e=zw[255&(e^t[n+o])]^e>>>8;return e}(4294967295,e,t,n)}const Vw=function(){const e=Uint16Array,t=Uint32Array;return{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}}();function qw(e,t,n){const r=e.length,o=Vw.rev15;for(let i=0;i<r;i+=2)if(0!==e[i+1]){const r=i>>1,a=e[i+1],s=r<<4|a,l=t-a;let c=e[i]<<l;const u=c+(1<<l);for(;c!==u;){n[o[c]>>>15-t]=s,c++}}}function Yw(e,t){const n=e.length,r=Vw.bl_count;for(let a=0;a<=t;a++)r[a]=0;for(let a=1;a<n;a+=2)r[e[a]]++;const o=Vw.next_code;let i=0;r[0]=0;for(let a=1;a<=t;a++)i=i+r[a-1]<<1,o[a]=i;for(let a=0;a<n;a+=2){const t=e[a+1];0!==t&&(e[a]=o[t],o[t]++)}}function Xw(e,t){const n=Vw.rev15,r=15-t;for(let o=0;o<e.length;o+=2){const i=e[o]<<t-e[o+1];e[o]=n[i]>>>r}}function Ww(e,t){const{data:n,noBuf:r}=e;let{buf:o,BFINAL:i,off:a,pos:s}=e,l=0;for(;0===i&&l<t;){let e,t,c=0,u=0;i=t_(n,s,1),l+=1;const d=t_(n,s+1,2);if(s+=3,0!==d){if(r&&(o=Jw(o,a+(1<<17))),1===d)e=Vw.flmap,t=Vw.fdmap,c=511,u=31;else{if(2!==d)throw new Error(`unknown BTYPE ${d}`);{const r=e_(n,s,5)+257,o=e_(n,s+5,5)+1,i=e_(n,s+10,4)+4;s+=14;for(let e=0;e<38;e+=2)Vw.itree[e]=0,Vw.itree[e+1]=0;let a=1;for(let e=0;e<i;e++){const t=e_(n,s+3*e,3);Vw.itree[1+(Vw.ordr[e]<<1)]=t,t>a&&(a=t)}s+=3*i,Yw(Vw.itree,a),qw(Vw.itree,a,Vw.imap),e=Vw.lmap,t=Vw.dmap,s=Zw(Vw.imap,(1<<a)-1,r+o,n,s,Vw.ttree);const l=$w(Vw.ttree,0,r,Vw.ltree);c=(1<<l)-1;const d=$w(Vw.ttree,r,o,Vw.dtree);u=(1<<d)-1,Yw(Vw.ltree,l),qw(Vw.ltree,l,e),Yw(Vw.dtree,d),qw(Vw.dtree,d,t)}}for(;;){const i=e[n_(n,s)&c];s+=15&i;const l=i>>>4;if(l>>>8===0)o[a++]=l;else{if(256===l)break;{let e=a+l-254;if(l>264){const t=Vw.ldef[l-257];e=a+(t>>>3)+e_(n,s,7&t),s+=7&t}const i=t[n_(n,s)&u];s+=15&i;const c=i>>>4,d=Vw.ddef[c],A=(d>>>4)+t_(n,s,15&d);for(s+=15&d,r&&(o=Jw(o,a+(1<<17)));a<e;)o[a]=o[a++-A],o[a]=o[a++-A],o[a]=o[a++-A],o[a]=o[a++-A];a=e}}}}else{0!==(7&s)&&(s+=8-(7&s));const e=4+(s>>>3),t=n[e-4]|n[e-3]<<8;r&&(o=Jw(o,a+t)),o.set(new Uint8Array(n.buffer,n.byteOffset+e,t),a),s=e+t<<3,a+=t}}e.buf=o,e.BFINAL=i,e.off=a,e.pos=s}async function Kw(e,t,n){if(3===t[0]&&0===t[1])return n||new Uint8Array(0);const r=function(e,t){const n=void 0===t;return void 0===t&&(t=new Uint8Array(e.length>>>2<<3)),{data:e,buf:t,noBuf:n,BFINAL:0,off:0,pos:0}}(t,n);for(;0===r.BFINAL;)e.shouldUpdate&&await e.update({message:"Inflating blocks...",current:r.pos,max:t.length}),Ww(r,100);return r.buf.length===r.off?r.buf:r.buf.slice(0,r.off)}function Jw(e,t){const n=e.length;if(t<=n)return e;const r=new Uint8Array(Math.max(n<<1,t));return r.set(e,0),r}function Zw(e,t,n,r,o,i){let a=0;for(;a<n;){const n=e[n_(r,o)&t];o+=15&n;const s=n>>>4;if(s<=15)i[a]=s,a++;else{let e=0,t=0;16===s?(t=3+e_(r,o,2),o+=2,e=i[a-1]):17===s?(t=3+e_(r,o,3),o+=3):18===s&&(t=11+e_(r,o,7),o+=7);const n=a+t;for(;a<n;)i[a]=e,a++}}return o}function $w(e,t,n,r){let o=0,i=0;const a=r.length>>>1;for(;i<n;){const n=e[i+t];r[i<<1]=0,r[1+(i<<1)]=n,n>o&&(o=n),i++}for(;i<a;)r[i<<1]=0,r[1+(i<<1)]=0,i++;return o}function e_(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1}function t_(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1}function n_(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)}function r_(e,t,n){const r=[],o=e.length,i=t.length;for(let p=0;p<i;p+=2)t[p]=0,t[p+1]=0;for(let p=0;p<o;p++)0!==e[p]&&r.push({lit:p,f:e[p],d:void 0});const a=r.length,s=r.slice(0);if(0===a)return 0;if(1===a){const e=r[0].lit,n=0===e?1:0;return t[1+(e<<1)]=1,t[1+(n<<1)]=1,1}r.sort((function(e,t){return e.f-t.f}));let l=r[0],c=r[1],u=0,d=1,A=2;for(r[0]={lit:-1,f:l.f+c.f,l:l,r:c,d:0};d!==a-1;)l=u!==d&&(A===a||r[u].f<r[A].f)?r[u++]:r[A++],c=u!==d&&(A===a||r[u].f<r[A].f)?r[u++]:r[A++],r[d++]={lit:-1,f:l.f+c.f,l:l,r:c,d:void 0};let f=o_(r[d-1],0);f>n&&(!function(e,t,n){let r=0,o=0;const i=1<<n-t;for(e.sort((function(e,t){return t.d===e.d?e.f-t.f:t.d-e.d})),r=0;r<e.length&&e[r].d>t;r++){const a=e[r].d;e[r].d=t,o+=i-(1<<n-a)}o>>>=n-t;for(;o>0;){const n=e[r].d;n<t?(e[r].d++,o-=1<<t-n-1):r++}for(;r>=0;r--)e[r].d===t&&o<0&&(e[r].d--,o++);0!==o&&console.log("debt left")}(s,n,f),f=n);for(let p=0;p<a;p++)t[1+(s[p].lit<<1)]=s[p].d;return f}function o_(e,t){return-1!==e.lit?(e.d=t,t):Math.max(o_(e.l,t+1),o_(e.r,t+1))}function i_(e,t){const{data:n,dlen:r,out:o,opt:i}=e;let{i:a,pos:s,cvrd:l,li:c,lc:u,bs:d,ebits:A,c:f,nc:p}=e;const{lits:h,strt:g,prev:m}=Vw,y=Math.min(a+t,r);for(;a<y;a++){if(f=p,a+1<r-2){p=u_(n,a+1);const e=a+1&32767;m[e]=g[p],g[p]=e}if(l<=a){(c>14e3||u>26697)&&r-a>100&&(l<a&&(h[c]=a-l,c+=2,l=a),s=d_(a===r-1||l===r?1:0,h,c,A,n,d,a-d,o,s),c=u=A=0,d=a);let e=0;if(a<r-2&&(e=l_(n,a,m,f,Math.min(i[2],r-a),i[3])),0!==e){const t=e>>>16,n=65535&e,r=g_(t,Vw.of0);Vw.lhst[257+r]++;const o=g_(n,Vw.df0);Vw.dhst[o]++,A+=Vw.exb[r]+Vw.dxb[o],h[c]=t<<23|a-l,h[c+1]=n<<16|r<<8|o,c+=2,l=a+t}else Vw.lhst[n[a]]++;u++}}e.i=a,e.pos=s,e.cvrd=l,e.li=c,e.lc=u,e.bs=d,e.ebits=A,e.c=f,e.nc=p}!function(){for(let t=0;t<32768;t++){let e=t;e=(2863311530&e)>>>1|(1431655765&e)<<1,e=(3435973836&e)>>>2|(858993459&e)<<2,e=(4042322160&e)>>>4|(252645135&e)<<4,e=(4278255360&e)>>>8|(16711935&e)<<8,Vw.rev15[t]=(e>>>16|e<<16)>>>17}function e(e,t,n){for(;0!==t--;)e.push(0,n)}for(let t=0;t<32;t++)Vw.ldef[t]=Vw.of0[t]<<3|Vw.exb[t],Vw.ddef[t]=Vw.df0[t]<<4|Vw.dxb[t];e(Vw.fltree,144,8),e(Vw.fltree,112,9),e(Vw.fltree,24,7),e(Vw.fltree,8,8),Yw(Vw.fltree,9),qw(Vw.fltree,9,Vw.flmap),Xw(Vw.fltree,9),e(Vw.fdtree,32,5),Yw(Vw.fdtree,5),qw(Vw.fdtree,5,Vw.fdmap),Xw(Vw.fdtree,5),e(Vw.itree,19,0),e(Vw.ltree,286,0),e(Vw.dtree,30,0),e(Vw.ttree,320,0)}();const a_=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]];async function s_(e,t,n,r,o){const i=function(e,t,n,r){const{lits:o,strt:i,prev:a}=Vw;return{data:e,out:t,opt:a_[r],i:0,pos:n<<3,cvrd:0,dlen:e.length,li:0,lc:0,bs:0,ebits:0,c:0,nc:0,lits:o,strt:i,prev:a}}(t,n,r,o),{dlen:a}=i;if(0===o){let{i:e,pos:r}=i;for(;e<a;){const o=Math.min(65535,a-e);y_(n,r,e+o===a?1:0),r=A_(t,e,o,n,r+8),e+=o}return r>>>3}for(a>2&&(i.nc=u_(t,0),i.strt[i.nc]=0);i.i<a;)e.shouldUpdate&&await e.update({message:"Deflating...",current:i.i,max:a}),i_(i,1048576);let{li:s,cvrd:l,pos:c}=i;const{i:u,lits:d,bs:A,ebits:f}=i;for(A===u&&0!==t.length||(l<u&&(d[s]=u-l,s+=2,l=u),c=d_(1,d,s,f,t,A,u-A,n,c));0!==(7&c);)c++;return c>>>3}function l_(e,t,n,r,o,i){let a=32767&t,s=n[a],l=a-s+32768&32767;if(s===a||r!==u_(e,t-l))return 0;let c=0,u=0;const d=Math.min(32767,t);for(;l<=d&&0!==--i&&s!==a;){if(0===c||e[t+c]===e[t+c-l]){let r=c_(e,t,l);if(r>c){if(c=r,u=l,c>=o)break;l+2<r&&(r=l+2);let e=0;for(let o=0;o<r-2;o++){const r=t-l+o+32768&32767,i=r-n[r]+32768&32767;i>e&&(e=i,s=r)}}}a=s,s=n[a],l+=a-s+32768&32767}return c<<16|u}function c_(e,t,n){if(e[t]!==e[t-n]||e[t+1]!==e[t+1-n]||e[t+2]!==e[t+2-n])return 0;const r=t,o=Math.min(e.length,t+258);for(t+=3;t<o&&e[t]===e[t-n];)t++;return t-r}function u_(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535}function d_(e,t,n,r,o,i,a,s,l){Vw.lhst[256]++;const[c,u,d,A,f,p,h,g]=function(){const e=r_(Vw.lhst,Vw.ltree,15),t=r_(Vw.dhst,Vw.dtree,15),n=[],r=h_(Vw.ltree,n),o=[],i=h_(Vw.dtree,o);for(let l=0;l<n.length;l+=2)Vw.ihst[n[l]]++;for(let l=0;l<o.length;l+=2)Vw.ihst[o[l]]++;const a=r_(Vw.ihst,Vw.itree,7);let s=19;for(;s>4&&0===Vw.itree[1+(Vw.ordr[s-1]<<1)];)s--;return[e,t,a,r,i,s,n,o]}(),m=32+(0===(l+3&7)?0:8-(l+3&7))+(a<<3),y=r+f_(Vw.fltree,Vw.lhst)+f_(Vw.fdtree,Vw.dhst);let v=r+f_(Vw.ltree,Vw.lhst)+f_(Vw.dtree,Vw.dhst);v+=14+3*p+f_(Vw.itree,Vw.ihst)+(2*Vw.ihst[16]+3*Vw.ihst[17]+7*Vw.ihst[18]);for(let C=0;C<286;C++)Vw.lhst[C]=0;for(let C=0;C<30;C++)Vw.dhst[C]=0;for(let C=0;C<19;C++)Vw.ihst[C]=0;const b=m<y&&m<v?0:y<v?1:2;if(v_(s,l,e),v_(s,l+1,b),l+=3,0===b){for(;0!==(7&l);)l++;l=A_(o,i,a,s,l)}else{let e,r;if(1===b)e=Vw.fltree,r=Vw.fdtree;else if(2===b){Yw(Vw.ltree,c),Xw(Vw.ltree,c),Yw(Vw.dtree,u),Xw(Vw.dtree,u),Yw(Vw.itree,d),Xw(Vw.itree,d),e=Vw.ltree,r=Vw.dtree,y_(s,l,A-257),y_(s,l+=5,f-1),y_(s,l+=5,p-4),l+=4;for(let e=0;e<p;e++)y_(s,l+3*e,Vw.itree[1+(Vw.ordr[e]<<1)]);l+=3*p,l=p_(h,Vw.itree,s,l),l=p_(g,Vw.itree,s,l)}else Zh();let a=i;for(let i=0;i<n;i+=2){const n=t[i],c=n>>>23,u=a+(8388607&n);for(;a<u;)l=m_(o[a++],e,s,l);if(0!==c){const n=t[i+1],o=n>>16,u=n>>8&255,d=255&n;y_(s,l=m_(257+u,e,s,l),c-Vw.of0[u]),v_(s,l=m_(d,r,s,l+=Vw.exb[u]),o-Vw.df0[d]),l+=Vw.dxb[d],a+=c}}l=m_(256,e,s,l)}return l}function A_(e,t,n,r,o){let i=o>>>3;return r[i]=n,r[i+1]=n>>>8,r[i+2]=255-r[i],r[i+3]=255-r[i+1],i+=4,r.set(new Uint8Array(e.buffer,t,n),i),o+(n+4<<3)}function f_(e,t){let n=0;for(let r=0;r<t.length;r++)n+=t[r]*e[1+(r<<1)];return n}function p_(e,t,n,r){for(let o=0;o<e.length;o+=2){const i=e[o],a=e[o+1];r=m_(i,t,n,r);const s=16===i?2:17===i?3:7;i>15&&(y_(n,r,a),r+=s)}return r}function h_(e,t){let n=e.length;for(;2!==n&&0===e[n-1];)n-=2;for(let r=0;r<n;r+=2){const o=e[r+1],i=r+3<n?e[r+3]:-1,a=r+5<n?e[r+5]:-1,s=0===r?-1:e[r-1];if(0===o&&i===o&&a===o){let i=r+5;for(;i+2<n&&e[i+2]===o;)i+=2;const a=Math.min(i+1-r>>>1,138);a<11?t.push(17,a-3):t.push(18,a-11),r+=2*a-2}else if(o===s&&i===o&&a===o){let i=r+5;for(;i+2<n&&e[i+2]===o;)i+=2;const a=Math.min(i+1-r>>>1,6);t.push(16,a-3),r+=2*a-2}else t.push(o,0)}return n>>>1}function g_(e,t){let n=0;return t[16|n]<=e&&(n|=16),t[8|n]<=e&&(n|=8),t[4|n]<=e&&(n|=4),t[2|n]<=e&&(n|=2),t[1|n]<=e&&(n|=1),n}function m_(e,t,n,r){return v_(n,r,t[e<<1]),r+t[1+(e<<1)]}function y_(e,t,n){n<<=7&t;const r=t>>>3;e[r]|=n,e[r+1]|=n>>>8}function v_(e,t,n){n<<=7&t;const r=t>>>3;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16}async function b_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Object.create(null),o=new Uint8Array(t);if(19280!==Ow(o,0))throw new Error('Invalid ZIP file. A valid ZIP file must start with two magic bytes \\x50\\x4b ("PK" in ASCII).');let i=o.length-4;for(;101010256!==Nw(o,i);)i--;let a=i;a+=4,a+=4;const s=Ow(o,a);a+=2,a+=2,a+=4;const l=Nw(o,a);a+=4,a=l;for(let c=0;c<s;c++){a+=4,a+=4,a+=4,a+=4,a+=4;const t=Nw(o,a);a+=4;const i=Nw(o,a);a+=4;const s=Ow(o,a),l=Ow(o,a+2),c=Ow(o,a+4);a+=6,a+=8;const u=Nw(o,a);a+=4,a+=s+l+c,await C_(e,o,u,r,t,i,n)}return r}async function C_(e,t,n,r,o,i,a){n+=4,n+=2;const s=Ow(t,n+=2);n+=2,n+=4,n+=4;const l=Ow(t,n+=8),c=Ow(t,n+=2),u=Gw(t,n+=2,l);if(n+=l,n+=c,a)return void(r[u]={size:i,csize:o});const d=new Uint8Array(t.buffer,n);if(0===s)r[u]=new Uint8Array(d.buffer.slice(n,n+o));else{if(8!==s)throw new Error(`unknown compression method: ${s}`);{const t=new Uint8Array(i);await I_(e,d,t),r[u]=t}}}async function I_(e,t,n){return Kw(e,t,n)}async function E_(e,t,n){const r=t[3];let o=10;if(4&r){o+=Ow(t,o)}if(8&r){let e=o;for(;0!==t[e];)++e;o=e+1}if(16&r){let e=o;for(;0!==t[e];)++e;o=e+1}1&r&&(o+=2);const i=function(e){return 0|e}(Nw(t,t.length-8)),a=Nw(t,t.length-4);void 0===n&&(n=new Uint8Array(a));const s=new Uint8Array(t.buffer,t.byteOffset+o,t.length-o-8),l=await I_(e,s,n);return i!==Hw(l,0,l.length)&&console.error("ungzip: checksums don't match"),l}async function x_(e,t,n){void 0===n&&(n={level:6});const r=new Uint8Array(50+Math.floor(1.1*t.length)),o=await s_(e,t,r,0,n.level);return new Uint8Array(r.buffer,0,o)}function B_(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Tw.create("Zip",(n=>async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;const o={};for(const d in t){const r=!w_(d)&&!n,i=t[d],a=Hw(i,0,i.length);o[d]={cpr:r,usize:i.length,crc:a,file:r?await x_(e,i):i}}for(const d in o)r+=o[d].file.length+30+46+2*jw(d);r+=22;const i=new Uint8Array(r);let a=0;const s=[];for(const d in o){const e=o[d];s.push(a),a=__(i,a,d,e,0)}let l=0;const c=a;for(const d in o){const e=o[d];s.push(a),a=__(i,a,d,e,1,s[l++])}const u=a-c;return Lw(i,a,101010256),a+=4,a+=4,Fw(i,a,l),a+=2,Fw(i,a,l),a+=2,Lw(i,a,u),a+=4,Lw(i,a,c),a+=4,a+=2,i.buffer}(n,e,t)))}function w_(e){const t=e.split(".").pop().toLowerCase();return-1!=="png,jpg,jpeg,zip".indexOf(t)}function __(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=r.file;Lw(e,t,0===o?67324752:33639248),t+=4,1===o&&(t+=2),Fw(e,t,20),Fw(e,t+=2,0),Fw(e,t+=2,r.cpr?8:0),Lw(e,t+=2,0),Lw(e,t+=4,r.crc),Lw(e,t+=4,a.length),Lw(e,t+=4,r.usize),Fw(e,t+=4,jw(n)),Fw(e,t+=2,0),t+=2,1===o&&(t+=2,t+=2,Lw(e,t+=6,i),t+=4);const s=function(e,t,n){const r=n.length;let o=0;for(let i=0;i<r;i++){const r=n.charCodeAt(i);if(0===(4294967168&r))e[t+o]=r,o++;else if(0===(4294965248&r))e[t+o]=192|r>>6,e[t+o+1]=128|63&r,o+=2;else if(0===(4294901760&r))e[t+o]=224|r>>12,e[t+o+1]=128|r>>6&63,e[t+o+2]=128|63&r,o+=3;else{if(0!==(4292870144&r))throw new Error("e");e[t+o]=240|r>>18,e[t+o+1]=128|r>>12&63,e[t+o+2]=128|r>>6&63,e[t+o+3]=128|63&r,o+=4}}return o}(e,t,n);return t+=s,0===o&&(e.set(a,t),t+=a.length),t}var S_;function D_(e,t){return P_(e,t)}function T_(e){return e?"Failed to download data. Possible reasons: Resource is not available, or CORS is not allowed on the server.":"Failed to open file."}function k_(e,t,n){return new Promise(((r,o)=>{if(function(e){if(!Rw&&e instanceof FileReader)return e.readyState===FileReader.DONE;if(e instanceof Pw)return e.readyState===Pw.DONE;throw new Error("unknown data type")}(n)){const{error:e}=n;return void(null!==e&&void 0!==e?o(null!==e&&void 0!==e?e:T_(n instanceof Pw)):r(n))}let i=!1;n.onerror=e=>{if(i)return;const{error:t}=e.target;o(null!==t&&void 0!==t?t:T_(n instanceof Pw))},n.onprogress=n=>{if(e.shouldUpdate&&!i)try{n.lengthComputable?e.update({message:t,isIndeterminate:!1,current:n.loaded,max:n.total}):e.update({message:`${t} ${(n.loaded/1024/1024).toFixed(2)} MB`,isIndeterminate:!0})}catch(n){i=!0,o(n)}},n.onload=e=>{r(n)}}))}function Q_(e){return/\.gz$/i.test(e)?S_.Gzip:/\.zip$/i.test(e)?S_.Zip:S_.None}!function(e){e[e.None=0]="None",e[e.Gzip=1]="Gzip",e[e.Zip=2]="Zip"}(S_||(S_={}));const M_=/^(__MACOSX|.DS_Store)/;async function R_(e,t,n,r){let o=t instanceof ArrayBuffer?new Uint8Array(t):t;if(null===o)throw new Error("no data given");if(r!==S_.None){if(!(o instanceof Uint8Array))throw new Error("need Uint8Array for decompression");const t=await async function(e,t,n){switch(n){case S_.None:return t;case S_.Gzip:return E_(e,t);case S_.Zip:const n=await b_(e,t.buffer),r=Object.keys(n).filter((e=>!M_.test(e)));if(1!==r.length)throw new Error("can only decompress zip files with a single entry");return n[r[0]]}}(e,o,r);"string"===n?(await e.update({message:"Decoding text..."}),o=aw(t,0,t.length)):o=t}if("binary"===n&&o instanceof Uint8Array)return o;if("zip"===n&&o instanceof Uint8Array)return await b_(e,o.buffer);if("string"===n&&"string"===typeof o)return o;if("xml"===n&&"string"===typeof o){return(new DOMParser).parseFromString(o,"application/xml")}if("json"===n&&"string"===typeof o)return JSON.parse(o);throw new Error(`could not get requested response data '${n}'`)}function P_(e,t){if(Rw)return function(e,t){return Tw.create("Read File",(async n=>{const r="zip"===t?S_.None:Q_(e.name);let o;return await n.update({message:"Opening file...",canAbort:!1}),o="binary"===t||"zip"===t||r!==S_.None?await e.arrayBuffer():await e.text(),await n.update({message:"Processing file...",canAbort:!1}),await R_(n,o,t,r)}))}(e,t);let n;return Tw.create("Read File",(async r=>{try{n=new FileReader;const o="zip"===t?S_.None:Q_(e.name);"binary"===t||"zip"===t||o!==S_.None?n.readAsArrayBuffer(e):n.readAsText(e),await r.update({message:"Opening file...",canAbort:!0});const i=await k_(r,"Reading...",n);return await r.update({message:"Processing file...",canAbort:!1}),await R_(r,i.result,t,o)}finally{n=void 0}}),(()=>{n&&n.abort()}))}class O_{static get(){return this.pool.length?this.pool.pop():new Pw}static emptyFunc(){}static deposit(e){this.pool.length<this.poolSize&&(e.onabort=O_.emptyFunc,e.onerror=O_.emptyFunc,e.onload=O_.emptyFunc,e.onprogress=O_.emptyFunc,this.pool.push(e))}}function F_(e,t){return this!==t}async function N_(e,t,n){try{return{kind:"ok",result:await n,index:e,id:t}}catch(PF){return{kind:"error",error:PF,index:e,id:t}}}var L_,U_,G_,j_,z_,H_,V_;O_.pool=[],O_.poolSize=15,function(e){function t(e,t){return{kind:"url",id:Cp.create22(),url:e,...t}}e.Url=t,e.File=function(e){return{kind:"file",id:Cp.create22(),name:e.name,file:e}},e.isUrl=function(e){return"url"===(null===e||void 0===e?void 0:e.kind)},e.isFile=function(e){return"file"===(null===e||void 0===e?void 0:e.kind)},e.Wrapper=function(e,t,n){return{data:e,dispose:()=>{n.release(t)}}},e.getUrl=function(e){return"string"===typeof e?e:e.url},e.getUrlAsset=function(e,n,r){if("string"===typeof n){return e.tryFindUrl(n,r)||t(n,{body:r})}return n}}(L_||(L_={}));function q_(e){let t=-1/0;for(let n=0,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function Y_(e){let t=1/0;for(let n=0,r=e.length;n<r;++n)e[n]<t&&(t=e[n]);return t}function X_(e){let t=1/0,n=-1/0;for(let r=0,o=e.length;r<o;++r)e[r]<t&&(t=e[r]),e[r]>n&&(n=e[r]);return[t,n]}function W_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=e.length;let o=0;for(let i=n;i<r;i+=t)o+=e[i];return o}function K_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return W_(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)/(e.length/t)}function J_(e){const t=e.length;let n=0;for(let r=0;r<t;++r){const t=e[r];n+=t*t}return Math.sqrt(n/t)}function Z_(e,t){for(let n=0,r=t?Math.min(t,e.length):e.length;n<r;++n)e[n]=n;return e}function $_(e,t){let n=0,r=!1;for(const o=e.length;n<o;n++)if(e[n]===t){r=!0;break}return!!r&&(eS(e,n),!0)}function eS(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function tS(e,t){return!(e.indexOf(t)>=0)&&(e.push(t),!0)}function nS(e,t){const n=e.indexOf(t);if(n<0)return!1;for(let r=n,o=e.length-1;r<o;r++)e[r]=e[r+1];return e.pop(),!0}function rS(e,t){let n=0;for(let r=0,o=e.length;r<o;++r)t.includes(e[r])&&(n+=1);return n}function oS(e,t){if(!e||0===e.length)return!t||0===t.length;if(!t)return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function iS(e,t,n){for(let r=0,o=e.length;r<o;++r)if(e[r][0]===t)return void(e[r][1]=n);e.push([t,n])}!function(e){function t(e,t){return t?(t.label&&(e.label=t.label),t.description&&(e.description=t.description),t.legend&&(e.legend=t.legend),t.fieldLabels&&(e.fieldLabels=t.fieldLabels),t.isHidden&&(e.isHidden=t.isHidden),t.shortLabel&&(e.shortLabel=t.shortLabel),t.twoColumns&&(e.twoColumns=t.twoColumns),t.isEssential&&(e.isEssential=t.isEssential),t.category&&(e.category=t.category),t.hideIf&&(e.hideIf=t.hideIf),t.help&&(e.help=t.help),e):e}function n(e,n,r){return t({type:"select",defaultValue:b(e,n),options:n,cycle:null===r||void 0===r?void 0:r.cycle},r)}function r(e,t){return t?("undefined"!==typeof t.min&&(e.min=t.min),"undefined"!==typeof t.max&&(e.max=t.max),"undefined"!==typeof t.step&&(e.step=t.step),e):e}function o(e,n){const r=t({type:"group",defaultValue:(null===n||void 0===n?void 0:n.customDefault)||s(e),params:e},n);return(null===n||void 0===n?void 0:n.presets)&&(r.presets=n.presets),(null===n||void 0===n?void 0:n.isExpanded)&&(r.isExpanded=n.isExpanded),(null===n||void 0===n?void 0:n.isFlat)&&(r.isFlat=n.isFlat),(null===n||void 0===n?void 0:n.pivot)&&(r.pivot=n.pivot),r}function i(){return s(this.element)}function a(){throw new Error("getValue not set. Fix runtime.")}function s(e){const t={};for(const n of Object.keys(e))e[n].isOptional||(t[n]=e[n].defaultValue);return t}function l(e,t,n){return()=>e(t,n)}function c(e,t,n){if(t)if("value-ref"===e.type){const r=t;r.ref?r.getValue=l(e.resolveRef,r.ref,n):r.getValue=()=>{throw new Error("Unset ref in ValueRef value.")}}else if("data-ref"===e.type){const e=t;e.ref?e.getValue=l(n,e.ref,n):e.getValue=()=>{throw new Error("Unset ref in ValueRef value.")}}else if("group"===e.type)A(e.params,t,n);else if("mapped"===e.type){const r=t;c(e.map(r.name),r.params,n)}else if("object-list"===e.type){if(!d(e.element))return;for(const r of t)A(e.element,r,n)}}function u(e){if("value-ref"===e.type||"data-ref"===e.type)return!0;if("group"===e.type){if(d(e.params))return!0}else if("mapped"===e.type){for(const[t]of e.select.options)if(u(e.map(t)))return!0}else if("object-list"===e.type)return d(e.element);return!1}function d(e){for(const t of Object.keys(e))if(u(e[t]))return!0;return!1}function A(e,t,n){for(const r of Object.keys(e))c(e[r],null===t||void 0===t?void 0:t[r],n)}function f(e,t,n){if(t===n)return!0;if("object"!==typeof t||"object"!==typeof n)return!1;for(const r of Object.keys(e))if(!p(e[r],t[r],n[r]))return!1;return!0}function p(e,t,n){if(t===n)return!0;if("group"===e.type)return f(e.params,t,n);if("mapped"===e.type){const r=t,o=n;if(r.name!==o.name)return!1;return p(e.map(r.name),r.params,o.params)}if("multi-select"===e.type){const e=t,r=n;if(e.length!==r.length)return!1;if(e.length<10){for(let t=0,n=e.length;t<n;t++)if(e[t]!==r[t]&&r.indexOf(e[t])<0)return!1}else{const t=new Set(r);for(let n=0,o=e.length;n<o;n++)if(e[n]!==r[n]&&!t.has(e[n]))return!1}return!0}if("interval"===e.type)return t[0]===n[0]&&t[1]===n[1];if("line-graph"===e.type){const e=t,r=n;if(e.length!==r.length)return!1;for(let t=0,n=e.length;t<n;t++)if(!Wh.areEqual(e[t],r[t]))return!1;return!0}if("vec3"===e.type)return qh.equals(t,n);if("mat4"===e.type)return Yh.areEqual(t,n,zh);if("script"===e.type){const e=t,r=n;return e.language===r.language&&e.expression===r.expression}if("object-list"===e.type){const r=t,o=n,i=r.length;if(i!==o.length)return!1;for(let t=0;t<i;t++)if(!f(e.element,r[t],o[t]))return!1;return!0}return"object"===typeof t&&"object"===typeof n&&Rp(t,n)}function h(e,t,n){if(void 0===t)return{...n};if(void 0===n)return{...t};const r=Object.create(null);for(const o of Object.keys(e))r[o]=g(e[o],t[o],n[o]);return r}function g(e,t,n){if(void 0===t)return"object"!==typeof n||Array.isArray(n)?n:{...n};if(void 0===n)return"object"!==typeof t||Array.isArray(t)?t:{...t};if("group"===e.type)return h(e.params,t,n);if("mapped"===e.type){const r=t,o=n;if(r.name!==o.name)return{...o};const i=e.map(o.name);return{name:o.name,params:g(i,r.params,o.params)}}return"value"===e.type?n:"object"===typeof t&&"object"===typeof n?Array.isArray(n)?n:{...t,...n}:n}function m(e,t){for(const n of e.options)if(n[0]===t)return!0;return!1}function y(e,t,n){if(void 0===t||null===t)return n?e.defaultValue:void 0;if("value"===e.type)return t;if("group"===e.type){const r=Object.create(null);for(const o of Object.keys(e.params)){const i=e.params[o];void 0===t[o]?n&&(r[o]=i.defaultValue):r[o]=y(i,t[o],n)}return r}if("mapped"===e.type){const r=t;if("string"!==typeof r.name)return e.defaultValue;if("undefined"===typeof r.params)return n?e.defaultValue:void 0;if(!m(e.select,r.name))return e.defaultValue;const o=e.map(r.name);return{name:r.name,params:y(o,r.params,n)}}if("select"===e.type)return m(e,t)?t:e.defaultValue;if("multi-select"===e.type){if(!Array.isArray(t))return e.defaultValue;const n=t.filter((function(e){return m(this,e)}),e);return t.length>0&&0===n.length?e.defaultValue:n}return"object-list"===e.type?Array.isArray(t)?t.map((t=>v(e.element,t,n?"all":"skip"))):e.defaultValue:t}function v(e,t,n){if("object"!==typeof t||null===t)return n?s(e):t;const r=Object.create(null);for(const o of Object.keys(e)){const i=e[o];void 0===t[o]?"all"===n&&(r[o]=i.defaultValue):r[o]=y(i,t[o],"skip"!==n)}return r}function b(e,t){for(const n of t)if(n[0]===e)return e;return t.length>0?t[0][0]:void 0}e.Essential={isEssential:!0},e.Optional=function(e){const t={...e};return t.isOptional=!0,t},e.Value=function(e,n){return t({type:"value",defaultValue:e},n)},e.Select=n,e.MultiSelect=function(e,n,r){const o=t({type:"multi-select",defaultValue:e,options:n},r);return(null===r||void 0===r?void 0:r.emptyValue)&&(o.emptyValue=r.emptyValue),o},e.Boolean=function(e,n){return t({type:"boolean",defaultValue:e},n)},e.Text=function(){let e=arguments.length>1?arguments[1]:void 0;return t({type:"text",defaultValue:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",multiline:null===e||void 0===e?void 0:e.multiline,placeholder:null===e||void 0===e?void 0:e.placeholder,disableInteractiveUpdates:null===e||void 0===e?void 0:e.disableInteractiveUpdates},e)},e.Color=function(e,n){const r=t({type:"color",defaultValue:e},n);return(null===n||void 0===n?void 0:n.isExpanded)&&(r.isExpanded=n.isExpanded),r},e.ColorList=function(e,n){let r;if("string"===typeof e){const t=ph(e);r={kind:"qualitative"!==t.type?"interpolate":"set",colors:t.list}}else r=e;return t({type:"color-list",presetKind:(null===n||void 0===n?void 0:n.presetKind)||"all",defaultValue:r,offsets:!!(null===n||void 0===n?void 0:n.offsets)},n)},e.Vec3=function(e,n,o){return t(r({type:"vec3",defaultValue:e},n),o)},e.Mat4=function(e,n){return t({type:"mat4",defaultValue:e},n)},e.Url=function(e,n){return t({type:"url",defaultValue:"string"===typeof e?L_.Url(e):L_.Url(e.url,{body:e.body})},n)},e.File=function(e){const n=t({type:"file",defaultValue:null},e);return(null===e||void 0===e?void 0:e.accept)&&(n.accept=e.accept),n},e.FileList=function(e){const n=t({type:"file-list",defaultValue:null},e);return(null===e||void 0===e?void 0:e.accept)&&(n.accept=e.accept),n},e.Numeric=function(e,n,o){const i=t(r({type:"number",defaultValue:e},n),o);return(null===o||void 0===o?void 0:o.immediateUpdate)&&(i.immediateUpdate=!0),i},e.Interval=function(e,n,o){return t(r({type:"interval",defaultValue:e},n),o)},e.LineGraph=function(e,n){const r=t({type:"line-graph",defaultValue:e},n);return(null===n||void 0===n?void 0:n.getVolume)&&(r.getVolume=n.getVolume),r},e.Group=o,e.EmptyGroup=function(e){return o({},e)},e.Mapped=function(e,r,o,i){const a=b(e,r);return t({type:"mapped",defaultValue:{name:a,params:o(a).defaultValue},select:n(a,r,i),map:o},i)},e.MappedStatic=function(e,r,o){const i=(null===o||void 0===o?void 0:o.options)?o.options:Object.keys(r).map((e=>[e,r[e].label||ah(e)])),a=b(e,i);return t({type:"mapped",defaultValue:{name:a,params:r[a].defaultValue},select:n(a,i,o),map:e=>r[e]},o)},e.ObjectList=function(e,n,r){return t({type:"object-list",element:e,getLabel:n,ctor:i,defaultValue:(null===r||void 0===r?void 0:r.defaultValue)||[]},r)},e.ValueRef=function(e,n,r){var o;return t({type:"value-ref",defaultValue:{ref:null!==(o=null===r||void 0===r?void 0:r.defaultRef)&&void 0!==o?o:"",getValue:a},getOptions:e,resolveRef:n},r)},e.DataRef=function(e){var n;return t({type:"data-ref",defaultValue:{ref:null!==(n=null===e||void 0===e?void 0:e.defaultRef)&&void 0!==n?n:"",getValue:a}},e)},e.Converted=function(e,n,r){return t({type:"converted",defaultValue:n(r.defaultValue),converted:r,fromValue:e,toValue:n},r)},e.Conditioned=function(e,r,o,i,a){const s=Object.keys(r).map((e=>[e,e]));return t({type:"conditioned",select:n(o(e),s,a),defaultValue:e,conditionParams:r,conditionForValue:o,conditionedValue:i},a)},e.Script=function(e,n){return t({type:"script",defaultValue:e},n)},e.For=function(e){return 0},e.getDefaultValues=s,e.resolveRefs=A,e.setDefaultValues=function(e,t){for(const n of Object.keys(e))e[n].isOptional||(e[n].defaultValue=t[n])},e.clone=function(e){return ew(e)},e.validate=function(e,t){},e.areEqual=f,e.isParamEqual=p,e.merge=h,e.mergeParam=g,e.normalizeParams=v,e.objectToOptions=function(e,t){const n=[];for(const r of Object.keys(e))if(t){const o=t(r,e[r]);n.push("string"===typeof o?[r,o]:[r,o[0],o[1]])}else"string"===typeof e[r]?n.push([r,e[r]]):n.push([r,null===t?r:ah(r)]);return n},e.arrayToOptions=function(e,t){const n=[];for(const r of e)t?n.push([r,t(r)]):n.push([r,null===t?r:ah(r)]);return n},e.optionLabel=function(e,t){for(const n of e.options)if(n[0]===t)return n[1];return""}}(U_||(U_={})),function(e){function t(e){const t={create:e=>({action:t,params:e}),id:Cp.create22(),definition:e,createDefaultParams:(t,n)=>e.params?U_.getDefaultValues(e.params(t,n)):{}};return t}let n;e.create=t,e.fromTransformer=function(e){const n=e.definition;return t({from:n.from,display:n.display,params:n.params,isApplicable:e.definition.isApplicable?(t,n,r)=>e.definition.isApplicable(t,r):void 0,run(t){let{cell:n,state:r,params:o}=t;const i=r.build().to(n.transform.ref).apply(e,o);return r.updateTree(i)}})},function(e){e.build=e=>function(e){return n=>t({from:e.from instanceof Array?e.from:e.from?[e.from]:[],display:"string"===typeof e.display?{name:e.display}:e.display?e.display:{name:"Unnamed State Action"},params:"object"===typeof e.params?()=>e.params:e.params?e.params:void 0,isApplicable:e.isApplicable,..."function"===typeof n?{run:n}:n})}(e)}(n=e.Builder||(e.Builder={})),e.build=n.build}(G_||(G_={})),function(e){let t;e.getParamDefinition=function(e,t,n){return e.definition.params?e.definition.params(t,n):{}},e.is=function(e){return!!e&&"function"===typeof e.toAction&&"function"===typeof e.apply},function(e){e[e.Unchanged=0]="Unchanged",e[e.Updated=1]="Updated",e[e.Recreate=2]="Recreate",e[e.Null=3]="Null"}(t=e.UpdateResult||(e.UpdateResult={}));const n=new Map,r=new Map;function o(e,t){const{name:o}=t,i=`${e}.${o}`;if(n.has(i))throw new Error(`A transform with id '${o}' is already registered. Please pick a unique identifier for your transforms and/or register them only once. This is to ensure that transforms can be serialized and replayed.`);const a={apply:(e,t,n)=>z_.create(e,a,t,n),toAction:()=>G_.fromTransformer(a),namespace:e,id:i,definition:t,createDefaultParams:(e,n)=>t.params?U_.getDefaultValues(t.params(e,n)):{}};return n.set(i,a),function(e){for(const t of e.definition.from)r.has(t.type)?r.get(t.type).push(e):r.set(t.type,[e])}(a),a}let i;e.getAll=function(){return Array.from(n.values())},e.get=function(e){const t=n.get(e);if(!t)throw new Error(`A transformer with signature '${e}' is not registered.`);return t},e.fromType=function(e){return r.get(e)||[]},e.create=o,e.factory=function(e){return t=>o(e,t)},e.builderFactory=function(e){return i.build(e)},function(e){e.build=function(e){return t=>function(e,t){return n=>o(e,{name:t.name,from:t.from instanceof Array?t.from:[t.from],to:t.to instanceof Array?t.to:[t.to],display:"string"===typeof t.display?{name:t.display}:t.display?t.display:{name:rh(t.name.replace(/[-]/g," "))},params:"object"===typeof t.params?()=>t.params:t.params?t.params:void 0,isDecorator:t.isDecorator,...n})}(e,t)}}(i=e.Builder||(e.Builder={})),e.build=function(e){return i.build(e)},e.ROOT=o("build-in",{name:"root",from:[],to:[],display:{name:"Root",description:"For internal use."},apply(){throw new Error("should never be applied")},update:()=>t.Unchanged})}(j_||(j_={})),function(e){function t(e,t,n,r){const o=r&&r.ref?r.ref:Cp.create22();let i;return r&&r.tags&&(i="string"===typeof r.tags?[r.tags]:r.tags,0===i.length?i=void 0:i.sort()),{parent:e,transformer:t,state:(null===r||void 0===r?void 0:r.state)||{},tags:i,ref:o,dependsOn:r&&r.dependsOn,params:n,version:Cp.create22()}}function n(e,t){return!!e.tags&&e.tags.indexOf(t)>=0}function r(e){return e}e.RootRef="-=root=-",e.areStatesEqual=function(e,t){return!!e.isHidden!==!!t.isHidden||!!e.isCollapsed!==!!t.isCollapsed||!!e.isGhost!==!!t.isGhost||!!e.isLocked!==!!t.isLocked},e.isStateChange=function(e,t){return!!t&&("undefined"!==typeof t.isCollapsed&&e.isCollapsed!==t.isCollapsed||("undefined"!==typeof t.isHidden&&e.isHidden!==t.isHidden||("undefined"!==typeof t.isGhost&&e.isGhost!==t.isGhost||"undefined"!==typeof t.isLocked&&e.isLocked!==t.isLocked)))},e.assignState=function(e,t){if(!t)return!1;let n=!1;for(const r of Object.keys(t)){const o=t[r];!!o!==!!e[r]&&(n=!0,e[r]=o)}return n},e.syncState=function(e,t){if(!t)return!1;let n=!1;for(const r of Object.keys(t)){const o=t[r];!!o!==!!e[r]&&(n=!0,void 0!==o?e[r]=o:delete e[r])}for(const r of Object.keys(e)){const o=t[r];!!o!==!!e[r]&&(n=!0,void 0!==o?e[r]=o:delete e[r])}return n},e.create=t,e.withParams=function(e,t){return{...e,params:t,version:Cp.create22()}},e.withState=function(e,t){return t?{...e,state:{...e.state,...t}}:e},e.withTags=function(e,t){let n;return t&&(n="string"===typeof t?[t]:t,0===n.length?n=void 0:n.sort()),{...e,tags:n,version:Cp.create22()}},e.withParent=function(e,t){return{...e,parent:t,version:Cp.create22()}},e.createRoot=function(n){return t(e.RootRef,j_.ROOT,{},{ref:e.RootRef,state:n})},e.hasTag=n,e.hasTags=function(e,t){if(!e.tags)return"string"!==typeof t&&0===t.length;if("string"===typeof t)return n(e,t);for(const n of t)if(e.tags.indexOf(n)<0)return!1;return!0},e.toJSON=function(e){const t=e.transformer.definition.customSerialization?e.transformer.definition.customSerialization.toJSON:r;let n;for(const r of Object.keys(e.state)){e.state[r]&&(n||(n={}),n[r]=!0)}return{parent:e.parent,transformer:e.transformer.id,params:e.params?t(e.params):void 0,state:n,tags:e.tags,ref:e.ref,dependsOn:e.dependsOn,version:e.version}},e.fromJSON=function(e){const t=j_.get(e.transformer),n=t.definition.customSerialization?t.definition.customSerialization.fromJSON:r;return{parent:e.parent,transformer:t,params:e.params?n(e.params):void 0,state:e.state||{},tags:e.tags,ref:e.ref,dependsOn:e.dependsOn,version:e.version}}}(z_||(z_={}));class aS{get childMutations(){return this._childMutations||(this._childMutations=new Map),this._childMutations}get dependencyMutations(){return this._dependencyMutations||(this._dependencyMutations=new Map),this._dependencyMutations}changeNodes(){this.changedNodes||(this.changedNodes=!0,this.transforms=this.transforms.asMutable())}changeChildren(){this.changedChildren||(this.changedChildren=!0,this.children=this.children.asMutable())}changeDependencies(){this.changedDependencies||(this.changedDependencies=!0,this.dependencies=this.dependencies.asMutable())}get root(){return this.transforms.get(z_.RootRef)}asTransient(){return this.asImmutable().asTransient()}addChild(e,t){if(this.changeChildren(),this.childMutations.has(e))this.childMutations.get(e).add(t);else{const n=this.children.get(e).asMutable();n.add(t),this.children.set(e,n),this.childMutations.set(e,n)}}removeChild(e,t){if(this.changeChildren(),this.childMutations.has(e))this.childMutations.get(e).remove(t);else{const n=this.children.get(e).asMutable();n.remove(t),this.children.set(e,n),this.childMutations.set(e,n)}}clearRoot(){const e=z_.RootRef;if(0===this.children.get(e).size)return;this.changeChildren();const t=LB();this.children.set(e,t),this.childMutations.set(e,t)}mutateDependency(e,t,n){let r=this.dependencyMutations.get(e);if(!r){const t=this.dependencies.get(e);if(!t&&"remove"===n)return;this.changeDependencies(),r=t?t.asMutable():LB().asMutable(),this.dependencyMutations.set(e,r),this.dependencies.set(e,r)}"add"===n?r.add(t):r.remove(t)}changeParent(e,t){cS(this.transforms,e);const n=this.transforms.get(e);this.removeChild(n.parent,e),this.addChild(t,e),this.changeNodes(),this.transforms.set(e,z_.withParent(n,t))}add(e){const t=e.ref;if(this.transforms.has(e.ref)){this.transforms.get(e.ref).parent!==e.parent&&function(e){throw new Error(`Transform '${e}' is already present in the tree.`)}(e.ref)}const n=this.children.get(e.parent);if(n||function(e){throw new Error(`Parent '${e}' must be present in the tree.`)}(e.parent),n.has(e.ref)||this.addChild(e.parent,e.ref),this.children.has(e.ref)||(this.changedChildren||(this.changedChildren=!0,this.children=this.children.asMutable()),this.children.set(e.ref,LB())),this.changeNodes(),this.transforms.set(t,e),e.dependsOn)for(const r of e.dependsOn)this.mutateDependency(r,t,"add");return this}setParams(e,t){cS(this.transforms,e);const n=this.transforms.get(e);return!ZB(n.params,t)&&(this.changedNodes||(this.changedNodes=!0,this.transforms=this.transforms.asMutable()),this.transforms.set(n.ref,z_.withParams(n,t)),!0)}setTags(e,t){cS(this.transforms,e);const n=this.transforms.get(e),r=z_.withParams(n,t);return!oS(n.tags,r.tags)&&(this.changedNodes||(this.changedNodes=!0,this.transforms=this.transforms.asMutable()),this.transforms.set(n.ref,r),!0)}assignState(e,t){cS(this.transforms,e);const n=this.transforms.get(e);if(this._stateUpdates&&this._stateUpdates.has(e))return z_.assignState(n.state,t),n;{this._stateUpdates||(this._stateUpdates=new Set),this._stateUpdates.add(n.ref),this.changeNodes();const r=z_.withState(n,t);return this.transforms.set(e,r),r}}remove(e){const t=this.transforms.get(e);if(!t)return[];const n=H_.subtreePostOrder(this,t);if(e===z_.RootRef){if(n.pop(),0===n.length)return n;this.clearRoot()}else{if(0===n.length)return n;this.removeChild(t.parent,t.ref)}this.changeNodes(),this.changeChildren();for(const o of n)this.transforms.delete(o.ref),this.children.delete(o.ref),this._childMutations&&this._childMutations.delete(o.ref);const r=[];for(const o of n){if(o.dependsOn)for(const e of o.dependsOn)this.transforms.has(e)&&this.mutateDependency(e,o.ref,"remove");if(this.dependencies.has(o.ref)){const e=this.dependencies.get(o.ref).toArray();this.changeDependencies(),this.dependencies.delete(o.ref),this._dependencyMutations&&this._dependencyMutations.delete(o.ref);for(const t of e)if(this.transforms.has(t))for(const e of this.remove(t))r[r.length]=e}}for(const o of r)n[n.length]=o;return n}asImmutable(){return this.changedNodes||this.changedChildren||this._childMutations?(this._childMutations&&this._childMutations.forEach(sS,this.children),this._dependencyMutations&&this._dependencyMutations.forEach(lS,this.dependencies),H_.create(this.changedNodes?this.transforms.asImmutable():this.transforms,this.changedChildren?this.children.asImmutable():this.children,this.changedDependencies?this.dependencies.asImmutable():this.dependencies)):this.tree}constructor(e){this.tree=e,this.transforms=this.tree.transforms,this.children=this.tree.children,this.dependencies=this.tree.dependencies,this.changedNodes=!1,this.changedChildren=!1,this.changedDependencies=!1,this._childMutations=void 0,this._dependencyMutations=void 0,this._stateUpdates=void 0}}function sS(e,t){this.set(t,e.asImmutable())}function lS(e,t){0===e.size?this.delete(t):this.set(t,e.asImmutable())}function cS(e,t){if(!e.has(t))throw new Error(`Node '${t}' is not present in the tree.`)}!function(e){class t{get root(){return this.transforms.get(z_.RootRef)}asTransient(){return new aS(this)}constructor(e,t,n){this.transforms=e,this.children=t,this.dependencies=n}}function n(e,n,r){return new t(e,n,r)}function r(e){o(this,this.tree.transforms.get(e))}function o(e,t){const n=e.tree.children.get(t.ref);n&&n.size&&n.forEach(r,e),e.f(t,e.tree,e.state)}function i(e,t,n,r){const i={tree:e,state:n,f:r};return o(i,t),i.state}function a(e){s(this,this.tree.transforms.get(e))}function s(e,t){const n=e.f(t,e.tree,e.state);if("boolean"===typeof n&&!n)return;const r=e.tree.children.get(t.ref);r&&r.size&&r.forEach(a,e)}function l(e,t,n,r){const o={tree:e,state:n,f:r};return s(o,t),o.state}function c(e,t,n){n.push(e)}function u(e,t,n){n.push(z_.toJSON(e))}function d(e,t,n){if(t===n)return!0;const r=e.children.get(t).values();for(;;){const t=r.next();if(t.done)return!1;if(d(e,t.value,n))return!0}}e.createEmpty=function(e){const t=e||z_.createRoot();return n(px([[t.ref,t]]),px([[t.ref,LB()]]),px())},e.create=n,e.doPostOrder=i,e.doPreOrder=l,e.subtreePostOrder=function(e,t){return i(e,t,[],c)},e.toJSON=function(e){const t=[];return l(e,e.root,t,u),{transforms:t}},e.fromJSON=function(e){const t=px().asMutable(),r=px().asMutable(),o=px().asMutable();for(const n of e.transforms){const e=z_.fromJSON(n);t.set(e.ref,e),r.has(e.ref)||r.set(e.ref,LB().asMutable()),e.ref!==e.parent&&r.get(e.parent).add(e.ref)}const i=new Set;for(const n of e.transforms){const e=n.ref;if(r.set(e,r.get(e).asImmutable()),n.dependsOn)for(const t of n.dependsOn)i.add(t),o.has(t)?o.get(t).add(e):o.set(t,LB([e]).asMutable())}return i.forEach((e=>{o.set(e,o.get(e).asImmutable())})),n(t.asImmutable(),r.asImmutable(),o.asImmutable())},e.dump=function(e){console.log({tr:e.transforms.keySeq().toArray(),tr1:e.transforms.valueSeq().toArray().map((e=>e.ref)),ch:e.children.keySeq().toArray()})},e.subtreeHasRef=function(e,t,n){return!(!e.transforms.has(t)||!e.transforms.has(n))&&d(e,t,n)},e.getDecoratorRoot=function e(t,n){const r=t.children.get(n);if(1!==r.size)return n;const o=t.transforms.get(r.first());return o.transformer.definition.isDecorator?e(t,o.ref):n}}(H_||(H_={})),function(e){function t(e,t){return n(e)(t)}function n(e){const t=e||a.root;let n;return n=function(e){return void 0!==e.compile}(t)?t.compile():function(e){return void 0!==e.transform&&void 0!==e.status}(t)?a.byValue(t).compile():function(e){return"function"===typeof e}(t)?t:a.byRef(t).compile(),n}e.select=t,e.compile=n;const r={select(e){return t(this,e||this.state)}};function o(e,t){r[e]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.call(void 0,this,...n)}}function i(e){return Object.create(r,{compile:{writable:!1,configurable:!1,value:e}})}let a;function s(e,t){const r=n(e);return i((()=>e=>{const n=[];for(const o of r(e))for(const r of t(o,e))n.push(r);return n}))}function l(e,t){const r=n(e);return i((()=>e=>{const n=[];for(const o of r(e)){const r=t(o,e);r&&n.push(r)}return n}))}function c(e){const t=n(e);return i((()=>e=>{const n=new Set,r=[];for(const o of t(e))o&&(n.has(o.transform.ref)||(n.add(o.transform.ref),r.push(o)));return r}))}function u(e){const t=n(e);return i((()=>e=>{const n=t(e);return n.length?[n[0]]:[]}))}function d(e,t){return s(e,(e=>t(e)?[e]:[]))}function A(e,t){return d(e,(e=>e.status===t))}function f(e,t){return d(e,(e=>!!e.transform.tags&&e.transform.tags.indexOf(t)>=0))}function p(e){return s(e,((e,t)=>{const n=[];return H_.doPreOrder(t.tree,t.tree.transforms.get(e.transform.ref),n,((e,t,n)=>{n.push(e.ref)})),n.map((e=>t.cells.get(e)))}))}function h(e){return s(e,((e,t)=>{const n=[];return t.tree.children.get(e.transform.ref).forEach((e=>n.push(t.cells.get(e)))),n}))}function g(e,t){return d(e,(e=>!!e.obj&&e.obj.type===t.type))}function m(e,t){return c(l(e,((e,n)=>B(n.tree,n.cells,e.transform.ref,t))))}function y(e,t){return c(l(e,((e,n)=>S(n.tree,n.cells,e.transform.ref,t))))}function v(e,t){return c(l(e,((e,n)=>_(n.tree,n.cells,e.transform.ref,t))))}function b(e,t){return d(e,(e=>e.transform.transformer===t))}function C(e,t){return c(l(e,((e,n)=>w(n.tree,n.cells,e.transform.ref,t))))}function I(e,t){return c(l(e,((e,n)=>D(n.tree,n.cells,e.transform.ref,t))))}function E(e){return c(l(e,((e,t)=>t.cells.get(t.tree.transforms.get(e.transform.ref).parent))))}function x(e,t,n,r,o){let i,a=e.transforms.get(n);for(;;){a=e.transforms.get(a.parent);const n=t.get(a.ref);if(n.obj&&r(n)&&(i=n,o))return i;if(a.ref===z_.RootRef)return i}}function B(e,t,n,r){return x(e,t,n,r,!0)}function w(e,t,n,r){return x(e,t,n,r,!1)}function _(e,t,n,r){return B(e,t,n,Array.isArray(r)?e=>r.indexOf(e.transform.transformer)>=0:e=>e.transform.transformer===r)}function S(e,t,n,r){return B(e,t,n,T(r))}function D(e,t,n,r){return w(e,t,n,T(r))}function T(e){return Array.isArray(e)?t=>{for(const n of e)if(n.type===t.obj.type)return!0}:t=>t.obj.type===e.type}function k(e,t,n){if(e.tags)for(const r of e.tags)if(n.tags.has(r)){n.refs[r]=e.ref;break}return!0}function Q(e,t,n){return!(e.tags&&e.tags.indexOf(n.tag)>=0)||(n.ref=e.ref,!1)}function M(e,t,n){if(e.tags){const t=n.tags.size;let r=0;for(const o of e.tags)if(n.tags.has(o)&&(r++,r===t)){n.refs.push(e);break}}else 0===n.tags.size&&n.refs.push(e)}!function(e){function t(e,t,n){const r=n.cells.get(e.ref);return!r||!r.obj||r.obj.type!==n.type||(n.roots.push(r),!1)}function n(e,t,n){const r=n.cells.get(e.ref);return r&&r.obj&&r.obj.type===n.type&&n.ret.push(r),!0}function r(e,t,n){const r=n.cells.get(e.ref);return r&&r.obj&&r.transform.transformer===n.t&&n.ret.push(r),!0}function o(e,t,n){const r=n.cells.get(e.ref);return r&&"error"===r.status&&r.transform.transformer===n.t&&n.ret.push(r),!0}e.root=i((()=>e=>[e.cells.get(e.tree.root.ref)])),e.byRef=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i((()=>e=>{const n=[];for(const r of t){const t=e.cells.get(r);t&&n.push(t)}return n}))},e.byValue=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i((()=>e=>t))},e.rootsOfType=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z_.RootRef;return i((()=>r=>{const o={roots:[],cells:r.cells,type:e.type};return H_.doPreOrder(r.tree,r.tree.transforms.get(n),o,t),o.roots}))},e.ofType=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z_.RootRef;return i((()=>r=>{const o={ret:[],cells:r.cells,type:e.type};return H_.doPreOrder(r.tree,r.tree.transforms.get(t),o,n),o.ret}))},e.ofTransformer=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z_.RootRef;return i((()=>n=>{const o={ret:[],cells:n.cells,t:e};return H_.doPreOrder(n.tree,n.tree.transforms.get(t),o,r),o.ret}))},e.ofTransformerWithError=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z_.RootRef;return i((()=>n=>{const r={ret:[],cells:n.cells,t:e};return H_.doPreOrder(n.tree,n.tree.transforms.get(t),r,o),r.ret}))}}(a=e.Generators||(e.Generators={})),o("flatMap",s),e.flatMap=s,o("mapObject",l),e.mapObject=l,o("unique",c),e.unique=c,o("first",u),e.first=u,o("filter",d),e.filter=d,o("withStatus",A),e.withStatus=A,o("withTag",f),e.withTag=f,o("subtree",p),e.subtree=p,o("children",h),e.children=h,o("ofType",g),e.ofType=g,o("ancestor",m),e.ancestor=m,o("ancestorOfType",y),e.ancestorOfType=y,o("ancestorWithTransformer",v),e.ancestorWithTransformer=v,o("withTransformer",b),e.withTransformer=b,o("root",C),e.root=C,o("rootOfType",I),e.rootOfType=I,o("parent",E),e.parent=E,e.findAncestor=B,e.findRoot=w,e.findAncestorWithTransformer=_,e.findAncestorOfType=S,e.findRootOfType=D,e.findUniqueTagsInSubtree=function(e,t,n){return H_.doPreOrder(e,e.transforms.get(t),{refs:{},tags:n},k).refs},e.findTagInSubtree=function(e,t,n){return H_.doPreOrder(e,e.transforms.get(t),{ref:void 0,tag:n},Q).ref},e.findWithAllTags=function(e,t,n){return H_.doPreOrder(e,e.transforms.get(t),{refs:[],tags:n},M).refs},e.tryFindDecorator=function e(t,n,r){if(t.transforms.get(n).transformer===r)return t.cells.get(n);const o=t.tree.children.get(n);if(1!==o.size)return;const i=o.first();return t.transforms.get(i).transformer.definition.isDecorator?e(t,i,r):void 0}}(V_||(V_={}));var uS=function(e,t){return uS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},uS(e,t)};function dS(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}uS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function AS(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(l0e){i(l0e)}}function s(e){try{l(r.throw(e))}catch(l0e){i(l0e)}}function l(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function fS(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l0e){s=[6,l0e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}Object.create;function pS(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function hS(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(PF){o={error:PF}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function gS(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function mS(e){return this instanceof mS?(this.v=e,this):new mS(e)}function yS(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),r[Symbol.asyncIterator]=function(){return this},r;function a(e,t){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))},t&&(r[e]=t(r[e])))}function s(e,t){try{!function(e){e.value instanceof mS?Promise.resolve(e.value.v).then(l,c):u(i[0][2],e)}(o[e](t))}catch(l0e){u(i[0][3],l0e)}}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function vS(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=pS(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}Object.create;"function"===typeof SuppressedError&&SuppressedError;function bS(e){return"function"===typeof e}function CS(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var IS=CS((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function ES(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var xS=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,r,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var a=pS(i),s=a.next();!s.done;s=a.next()){s.value.remove(this)}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else i.remove(this);var l=this.initialTeardown;if(bS(l))try{l()}catch(l0e){o=l0e instanceof IS?l0e.errors:[l0e]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var u=pS(c),d=u.next();!d.done;d=u.next()){var A=d.value;try{_S(A)}catch(p){o=null!==o&&void 0!==o?o:[],p instanceof IS?o=gS(gS([],hS(o)),hS(p.errors)):o.push(p)}}}catch(h){n={error:h}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}if(o)throw new IS(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)_S(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&ES(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&ES(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),BS=xS.EMPTY;function wS(e){return e instanceof xS||e&&"closed"in e&&bS(e.remove)&&bS(e.add)&&bS(e.unsubscribe)}function _S(e){bS(e)?e():e.unsubscribe()}var SS={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},DS={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=DS.delegate;return(null===o||void 0===o?void 0:o.setTimeout)?o.setTimeout.apply(o,gS([e,t],hS(n))):setTimeout.apply(void 0,gS([e,t],hS(n)))},clearTimeout:function(e){var t=DS.delegate;return((null===t||void 0===t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function TS(e){DS.setTimeout((function(){var t=SS.onUnhandledError;if(!t)throw e;t(e)}))}function kS(){}var QS=MS("C",void 0,void 0);function MS(e,t,n){return{kind:e,value:t,error:n}}var RS=null;function PS(e){if(SS.useDeprecatedSynchronousErrorHandling){var t=!RS;if(t&&(RS={errorThrown:!1,error:null}),e(),t){var n=RS,r=n.errorThrown,o=n.error;if(RS=null,r)throw o}}else e()}var OS=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,wS(t)&&t.add(n)):n.destination=zS,n}return dS(t,e),t.create=function(e,t,n){return new US(e,t,n)},t.prototype.next=function(e){this.isStopped?jS(function(e){return MS("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?jS(function(e){return MS("E",void 0,e)}(e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?jS(QS,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(xS),FS=Function.prototype.bind;function NS(e,t){return FS.call(e,t)}var LS=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(PF){GS(PF)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(PF){GS(PF)}else GS(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(PF){GS(PF)}},e}(),US=function(e){function t(t,n,r){var o,i,a=e.call(this)||this;bS(t)||!t?o={next:null!==t&&void 0!==t?t:void 0,error:null!==n&&void 0!==n?n:void 0,complete:null!==r&&void 0!==r?r:void 0}:a&&SS.useDeprecatedNextContext?((i=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},o={next:t.next&&NS(t.next,i),error:t.error&&NS(t.error,i),complete:t.complete&&NS(t.complete,i)}):o=t;return a.destination=new LS(o),a}return dS(t,e),t}(OS);function GS(e){var t;SS.useDeprecatedSynchronousErrorHandling?(t=e,SS.useDeprecatedSynchronousErrorHandling&&RS&&(RS.errorThrown=!0,RS.error=t)):TS(e)}function jS(e,t){var n=SS.onStoppedNotification;n&&DS.setTimeout((function(){return n(e,t)}))}var zS={closed:!0,next:kS,error:function(e){throw e},complete:kS},HS="function"===typeof Symbol&&Symbol.observable||"@@observable";function VS(e){return e}function qS(e){return 0===e.length?VS:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var YS=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this,o=function(e){return e&&e instanceof OS||function(e){return e&&bS(e.next)&&bS(e.error)&&bS(e.complete)}(e)&&wS(e)}(e)?e:new US(e,t,n);return PS((function(){var e=r,t=e.operator,n=e.source;o.add(t?t.call(o,n):n?r._subscribe(o):r._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=XS(t))((function(t,r){var o=new US({next:function(t){try{e(t)}catch(n){r(n),o.unsubscribe()}},error:r,complete:t});n.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[HS]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qS(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=XS(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function XS(e){var t;return null!==(t=null!==e&&void 0!==e?e:SS.Promise)&&void 0!==t?t:Promise}var WS,KS=CS((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),JS=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return dS(t,e),t.prototype.lift=function(e){var t=new ZS(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new KS},t.prototype.next=function(e){var t=this;PS((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=pS(t.currentObservers),i=o.next();!i.done;i=o.next()){i.value.next(e)}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;PS((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;PS((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,o=n.isStopped,i=n.observers;return r||o?BS:(this.currentObservers=null,i.push(e),new xS((function(){t.currentObservers=null,ES(i,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,o=t.isStopped;n?e.error(r):o&&e.complete()},t.prototype.asObservable=function(){var e=new YS;return e.source=this,e},t.create=function(e,t){return new ZS(e,t)},t}(YS),ZS=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return dS(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:BS},t}(JS),$S=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return dS(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(JS);!function(e){e.create=function(){const e=new eD,t=()=>e.create();return t.dispose=()=>e.dispose(),t.behavior=t=>e.behavior(t),t}}(WS||(WS={}));class eD{constructor(){this._eventList=[],this._disposed=!1}create(){const e=new JS;return this._eventList.push(e),e}behavior(e){const t=new $S(e);return this._eventList.push(t),t}dispose(){if(!this._disposed){for(const e of this._eventList)e.complete();this._disposed=!0}}}var tD=Symbol.for("immer-nothing"),nD=Symbol.for("immer-draftable"),rD=Symbol.for("immer-state");function oD(e){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var iD=Object.getPrototypeOf;function aD(e){return!!e&&!!e[rD]}function sD(e){return!!e&&(cD(e)||Array.isArray(e)||!!e[nD]||!!e.constructor?.[nD]||pD(e)||hD(e))}var lD=Object.prototype.constructor.toString();function cD(e){if(!e||"object"!==typeof e)return!1;const t=iD(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===lD}function uD(e,t){0===dD(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function dD(e){const t=e[rD];return t?t.type_:Array.isArray(e)?1:pD(e)?2:hD(e)?3:0}function AD(e,t){return 2===dD(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function fD(e,t,n){const r=dD(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function pD(e){return e instanceof Map}function hD(e){return e instanceof Set}function gD(e){return e.copy_||e.base_}function mD(e,t){if(pD(e))return new Map(e);if(hD(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=cD(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[rD];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const o=n[r],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(iD(e),t)}{const t=iD(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function yD(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return bD(e)||aD(e)||!sD(e)||(dD(e)>1&&(e.set=e.add=e.clear=e.delete=vD),Object.freeze(e),t&&Object.entries(e).forEach((e=>{let[t,n]=e;return yD(n,!0)}))),e}function vD(){oD(2)}function bD(e){return Object.isFrozen(e)}var CD,ID={};function ED(e){const t=ID[e];return t||oD(0),t}function xD(){return CD}function BD(e,t){t&&(ED("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function wD(e){_D(e),e.drafts_.forEach(DD),e.drafts_=null}function _D(e){e===CD&&(CD=e.parent_)}function SD(e){return CD={drafts_:[],parent_:CD,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function DD(e){const t=e[rD];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function TD(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[rD].modified_&&(wD(t),oD(4)),sD(e)&&(e=kD(t,e),t.parent_||MD(t,e)),t.patches_&&ED("Patches").generateReplacementPatches_(n[rD].base_,e,t.patches_,t.inversePatches_)):e=kD(t,n,[]),wD(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==tD?e:void 0}function kD(e,t,n){if(bD(t))return t;const r=t[rD];if(!r)return uD(t,((o,i)=>QD(e,r,t,o,i,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return MD(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let o=t,i=!1;3===r.type_&&(o=new Set(t),t.clear(),i=!0),uD(o,((o,a)=>QD(e,r,t,o,a,n,i))),MD(e,t,!1),n&&e.patches_&&ED("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function QD(e,t,n,r,o,i,a){if(aD(o)){const a=kD(e,o,i&&t&&3!==t.type_&&!AD(t.assigned_,r)?i.concat(r):void 0);if(fD(n,r,a),!aD(a))return;e.canAutoFreeze_=!1}else a&&n.add(o);if(sD(o)&&!bD(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;kD(e,o),t&&t.scope_.parent_||"symbol"===typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||MD(e,o)}}function MD(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&yD(t,n)}var RD={get(e,t){if(t===rD)return e;const n=gD(e);if(!AD(n,t))return function(e,t,n){const r=FD(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!sD(r)?r:r===OD(e.base_,t)?(LD(e),e.copy_[t]=UD(r,e)):r},has:(e,t)=>t in gD(e),ownKeys:e=>Reflect.ownKeys(gD(e)),set(e,t,n){const r=FD(gD(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=OD(gD(e),t),o=r?.[rD];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||AD(e.base_,t)))return!0;LD(e),ND(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==OD(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,LD(e),ND(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=gD(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){oD(11)},getPrototypeOf:e=>iD(e.base_),setPrototypeOf(){oD(12)}},PD={};function OD(e,t){const n=e[rD];return(n?gD(n):e)[t]}function FD(e,t){if(!(t in e))return;let n=iD(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=iD(n)}}function ND(e){e.modified_||(e.modified_=!0,e.parent_&&ND(e.parent_))}function LD(e){e.copy_||(e.copy_=mD(e.base_,e.scope_.immer_.useStrictShallowCopy_))}uD(RD,((e,t)=>{PD[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),PD.deleteProperty=function(e,t){return PD.set.call(this,e,t,void 0)},PD.set=function(e,t,n){return RD.set.call(this,e[0],t,n,e[0])};function UD(e,t){const n=pD(e)?ED("MapSet").proxyMap_(e,t):hD(e)?ED("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:xD(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=RD;n&&(o=[r],i=PD);const{revoke:a,proxy:s}=Proxy.revocable(o,i);return r.draft_=s,r.revoke_=a,s}(e,t);return(t?t.scope_:xD()).drafts_.push(n),n}function GD(e){if(!sD(e)||bD(e))return e;const t=e[rD];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=mD(e,t.scope_.immer_.useStrictShallowCopy_)}else n=mD(e,!0);return uD(n,((e,t)=>{fD(n,e,GD(t))})),t&&(t.finalized_=!1),n}var jD,zD,HD,VD,qD=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return r.produce(e,(e=>t.call(this,e,...i)))}}let r;if("function"!==typeof t&&oD(6),void 0!==n&&"function"!==typeof n&&oD(7),sD(e)){const o=SD(this),i=UD(e,void 0);let a=!0;try{r=t(i),a=!1}finally{a?wD(o):_D(o)}return BD(o,n),TD(r,o)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===tD&&(r=void 0),this.autoFreeze_&&yD(r,!0),n){const t=[],o=[];ED("Patches").generateReplacementPatches_(e,r,t,o),n(t,o)}return r}oD(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.produceWithPatches(n,(t=>e(t,...o)))};let r,o;const i=this.produce(e,n,((e,t)=>{r=e,o=t}));return[i,r,o]},"boolean"===typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){sD(e)||oD(8),aD(e)&&(e=function(e){aD(e)||oD(10);return GD(e)}(e));const t=SD(this),n=UD(e,void 0);return n[rD].isManual_=!0,_D(t),n}finishDraft(e,t){const n=e&&e[rD];n&&n.isManual_||oD(9);const{scope_:r}=n;return BD(r,t),TD(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=ED("Patches").applyPatches_;return aD(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},YD=qD.produce;qD.produceWithPatches.bind(qD),qD.setAutoFreeze.bind(qD),qD.setUseStrictShallowCopy.bind(qD),qD.applyPatches.bind(qD),qD.createDraft.bind(qD),qD.finishDraft.bind(qD);function XD(){let e;const t=[];for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(const i of r)if(i)if(e||(e=new Set),"string"===typeof i){if(e.has(i))continue;e.add(i),t.push(i)}else for(const n of i)e.has(n)||(e.add(n),t.push(n));return t}!function(e){function t(e){if(!e.state||e.state.tree===e.editInfo.sourceTree)return e.tree.asImmutable();const t=e.state.tree.asTransient();for(const n of e.actions)switch(n.kind){case"add":t.add(n.transform);break;case"update":t.setParams(n.ref,n.params);break;case"delete":t.remove(n.ref);break;case"insert":{const e=t.children.get(n.ref).toArray();t.add(n.transform);for(const r of e)t.changeParent(r,n.transform.ref);break}}return e.editInfo.sourceTree=e.tree,t.asImmutable()}e.is=function(e){return!!e&&"function"===typeof e.getTree},e.isTo=function(e){return!!e&&"function"===typeof e.getTree&&"string"===typeof e.ref};e.Root=class{get editInfo(){return this.state.editInfo}get currentTree(){return this.state.tree}to(e){const t="string"===typeof e?e:RC.is(e)?e.transform.ref:e.ref;return new n(this.state,t,this)}toRoot(){return new n(this.state,this.state.tree.root.ref,this)}delete(e){const t=PC.resolveRef(e);return t&&this.state.tree.transforms.has(t)?(this.editInfo.count++,this.state.tree.remove(t),this.state.actions.push({kind:"delete",ref:t}),this):this}getTree(){return t(this.state)}commit(e){if(!this.state.state)throw new Error("Cannot commit template tree");return this.state.state.runTask(this.state.state.updateTree(this,e))}constructor(e,t){this.state={state:t,tree:e.asTransient(),actions:[],editInfo:{applied:!1,sourceTree:e,count:0,lastUpdate:void 0}}}};class n{get editInfo(){return this.state.editInfo}get selector(){return new OC(this.ref,this.state.state)}getApplyRoot(){return H_.getDecoratorRoot(this.state.tree,this.ref)}apply(e,t,r){if(e.definition.isDecorator)return this.insert(e,t,r);const o=this.getApplyRoot(),i=e.apply(o,t,r);return this.state.tree.add(i),this.editInfo.count++,this.editInfo.lastUpdate=i.ref,this.state.actions.push({kind:"add",transform:i}),new n(this.state,i.ref,this.root)}applyOrUpdate(e,t,n,r){if(this.state.tree.transforms.has(e)){const t=this.to(e);return n&&t.update(n),t}return this.apply(t,n,{...r,ref:e})}applyOrUpdateTagged(e,t,r,o){if(t.definition.isDecorator)throw new Error("Can't use applyOrUpdateTagged on decorator transformers.");const i=this.getApplyRoot(),a=this.state.tree.children.get(i).values();for(;;){const t=a.next();if(t.done)break;const n=this.state.tree.transforms.get(t.value);if(n&&z_.hasTags(n,e)){const i=this.to(t.value);return i.updateTagged(r,XD(n.tags,e,o&&o.tags)),i}}const s=t.apply(i,r,{...o,tags:XD(e,o&&o.tags)});return this.state.tree.add(s),this.editInfo.count++,this.editInfo.lastUpdate=s.ref,this.state.actions.push({kind:"add",transform:s}),new n(this.state,s.ref,this.root)}group(e,t,n){return this.apply(e,t,n)}insert(e,t,r){const o=this.state.tree.children.get(this.ref).toArray(),i=e.apply(this.ref,t,r);this.state.tree.add(i);for(const n of o)this.state.tree.changeParent(n,i.ref);return this.editInfo.count++,this.editInfo.lastUpdate=i.ref,this.state.actions.push({kind:"insert",ref:this.ref,transform:i}),new n(this.state,i.ref,this.root)}updateTagged(e,t){(this.state.tree.setParams(this.ref,e)||this.state.tree.setTags(this.ref,t))&&(this.editInfo.count++,this.editInfo.lastUpdate=this.ref,this.state.actions.push({kind:"update",ref:this.ref,params:e}))}update(e,t){let n;if(t){const e=this.state.tree.transforms.get(this.ref);n=YD(e.params,t)}else n="function"===typeof e?YD(this.state.tree.transforms.get(this.ref).params,e):e;return this.state.tree.setParams(this.ref,n)&&(this.editInfo.count++,this.editInfo.lastUpdate=this.ref,this.state.actions.push({kind:"update",ref:this.ref,params:n})),this.root}to(e){return this.root.to(e)}toRoot(){return this.root.toRoot()}delete(e){return this.root.delete(e)}getTree(){return t(this.state)}commit(e){if(!this.state.state)throw new Error("Cannot commit template tree");return this.state.state.runTask(this.state.state.updateTree(this,e))}constructor(e,t,n){if(this.state=e,this.root=n,this.ref=t,!this.state.tree.transforms.has(t))throw new Error(`Could not find node '${t}'.`)}}e.To=n}(jD||(jD={}));class WD{constructor(){this.ev=WS.create(),this.actions=new Map,this.fromTypeIndex=new Map,this.events={added:this.ev(),removed:this.ev()}}add(e){const t=j_.is(e)?e.toAction():e;if(this.actions.has(t.id))return this;this.actions.set(t.id,t);for(const n of t.definition.from)this.fromTypeIndex.has(n.type)?this.fromTypeIndex.get(n.type).push(t):this.fromTypeIndex.set(n.type,[t]);return this.events.added.next(void 0),this}remove(e){const t=j_.is(e)?e.toAction().id:Cp.is(e)?e:e.id,n=this.actions.get(t);if(!n)return this;this.actions.delete(t);for(const r of n.definition.from){const e=this.fromTypeIndex.get(r.type);e&&(nS(e,n),0===e.length&&this.fromTypeIndex.delete(r.type))}return this.events.removed.next(void 0),this}fromCell(e,t){const n=e.obj;if(!n)return[];const r=this.fromTypeIndex.get(n.type);if(!r)return[];let o=!1;for(const a of r)if(a.definition.isApplicable){o=!0;break}if(!o)return r;const i=[];for(const a of r)a.definition.isApplicable?a.definition.isApplicable(n,e.transform,t)&&i.push(a):i.push(a);return i}dispose(){this.ev.dispose()}}!function(e){e.message=function(e){return{type:"message",timestamp:new Date,message:e}},e.error=function(e){return{type:"error",timestamp:new Date,message:e}},e.warning=function(e){return{type:"warning",timestamp:new Date,message:e}},e.info=function(e){return{type:"info",timestamp:new Date,message:e}}}(zD||(zD={})),function(e){e.Impl=class{get current(){return this._current}set current(e){this._current=e}getAncestorOfType(e){if(!this._current)return;let t=this._current;for(;;){if(t=this.cells.get(t.transform.parent),!t.obj)return;if(t.obj.type===e.type)return t.obj;if(t.transform.ref===z_.RootRef)return}}getRootOfType(e){if(!this._current)return;let t,n=this._current;for(;;){if(!n.obj)return;if(n.obj.type===e.type&&(t=n),n.transform.ref===z_.RootRef)return t?t.obj:void 0;n=this.cells.get(n.transform.parent)}}constructor(e){this.cells=e,this._current=void 0}},e.getDecoratorChain=function(e,t){const n=e.cells;let r=n.get(t);const o=[r];for(;null===r||void 0===r?void 0:r.transform.transformer.definition.isDecorator;)r=n.get(r.transform.parent),o.push(r);return o},e.getRootOfType=function(e,t,n){let r,o=e.cells.get(n);if(o)for(;;){if(!o.obj)return;if(o.obj.type===t.type&&(r=o),o.transform.ref===z_.RootRef)return r?r.obj:void 0;o=e.cells.get(o.transform.parent)}}}(HD||(HD={}));class KD{constructor(){this.queue=[],this.signal=new JS}get length(){return this.queue.length}enqueue(e){return this.queue.push(e),1===this.queue.length||this.waitFor(e)}handled(e){$_(this.queue,e),this.queue.length>0&&this.signal.next({v:this.queue[0],stillPresent:!0})}remove(e){const t=$_(this.queue,e);return t&&this.signal.next({v:e,stillPresent:!1}),t}waitFor(e){return new Promise((t=>{const n=this.signal.subscribe((r=>{let{v:o,stillPresent:i}=r;o===e&&(n.unsubscribe(),t(i))}))}))}}class JD{add(e){const t=this.getHash(e);if(this.byHash.has(t)){const n=this.byHash.get(t);for(let t=0,r=n.length;t<r;t++)if(this.areEqual(e,n[t]))return!1;return n[n.length]=e,this.size++,!0}return this.byHash.set(t,[e]),this.size++,!0}has(e){const t=this.getHash(e);if(!this.byHash.has(t))return!1;const n=this.byHash.get(t);for(let r=0,o=n.length;r<o;r++)if(this.areEqual(e,n[r]))return!0;return!1}constructor(e,t){this.getHash=e,this.areEqual=t,this.size=0,this.byHash=new Map}}function ZD(e,t){return new JD(e,t)}function $D(){return new tT}function eT(e){return{previous:null,next:null,inList:!0,value:e}}class tT{constructor(){this.count=0,this.first=null,this.last=null}addFirst(e){const t=eT(e);return t.inList=!0,this.first&&(this.first.previous=t),t.next=this.first,this.first=t,this.count++,this.last||(this.last=t),t}addLast(e){const t=eT(e);return null!==this.last&&(this.last.next=t),t.previous=this.last,this.last=t,null===this.first&&(this.first=t),t.inList=!0,this.count++,t}removeFirst(){const e=this.first;if(e)return this.remove(e),e.value}removeLast(){const e=this.last;if(e)return this.remove(e),e.value}remove(e){e.inList&&(e.inList=!1,null!==e.previous?e.previous.next=e.next:null===e.previous&&(this.first=e.next),null!==e.next?e.next.previous=e.previous:null===e.next&&(this.last=e.previous),e.next=null,e.previous=null,this.count--)}find(e){let t=this.first;for(;null!==t;){if(t.value===e)return t;t=t.next}}}!function(e){e.create=function(){return{keys:new Set,array:[]}},e.add=function(e,t,n){let{keys:r,array:o}=e;return!r.has(t)&&(r.add(t),o[o.length]=n,!0)},e.has=function(e,t){let{keys:n}=e;return n.has(t)}}(VD||(VD={}));class nT{get tree(){return this._tree}get transforms(){return this._tree.transforms}get current(){return this.behaviors.currentObject.value.ref}get root(){return this.cells.get(this._tree.root.ref)}build(){return new jD.Root(this.tree,this)}addHistory(e,t){0!==this.historyCapacity&&(this.history.unshift([e,t||"Update"]),this.history.length>this.historyCapacity&&this.history.pop(),this.events.historyUpdated.next({state:this}))}clearHistory(){0!==this.history.length&&(this.history=[],this.events.historyUpdated.next({state:this}))}get latestUndoLabel(){return this.history.length>0?this.history[0][1]:void 0}get canUndo(){return this.history.length>0}undo(){return Tw.create("Undo",(async e=>{const t=this.history.shift();if(t){this.events.historyUpdated.next({state:this}),this.undoingHistory=!0;try{await this.updateTree(t[0],{canUndo:!1}).runInContext(e)}finally{this.undoingHistory=!1}}}))}getSnapshot(){return{tree:H_.toJSON(this._tree)}}setSnapshot(e){const t=H_.fromJSON(e.tree);return this.updateTree(t)}setCurrent(e){this.behaviors.currentObject.next({state:this,ref:e})}updateCellState(e,t){const n=this.cells.get(e);if(!n)return;const r="function"===typeof t?t(n.state):t;z_.assignState(n.state,r)&&(n.transform=this._tree.assignState(n.transform.ref,r),this.events.cell.stateUpdated.next({state:this,ref:e,cell:n}))}dispose(){this.ev.dispose(),this.actions.dispose()}select(e){return V_.select(e,this)}selectQ(e){return"string"===typeof e?V_.select(e,this):V_.select(e(V_.Generators),this)}applyAction(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z_.RootRef;return Tw.create("Apply Action",(r=>{const o=this.cells.get(n);if(!o)throw new Error(`'${n}' does not exist.`);if("ok"!==o.status)throw new Error(`Action cannot be applied to a cell with status '${o.status}'`);return vT(e.definition.run({ref:n,cell:o,a:o.obj,params:t,state:this},this.globalContext),r)}))}transaction(e,t){return Tw.create("State Transaction",(async n=>{const r=this.inTransaction,o=this._tree.asImmutable();let i=!1;try{r||this.behaviors.isUpdating.next(!0),this.inTransaction=!0,this.inTransactionError=!1,await e(n),this.inTransactionError&&(i=!0,await this.updateTree(o).runInContext(n))}catch(l0e){if(i||(i=!0,await this.updateTree(o).runInContext(n),this.events.log.next(zD.error("Error during state transaction, reverting"))),r)throw this.inTransactionError=!0,l0e;if(null===t||void 0===t?void 0:t.rethrowErrors)throw l0e;console.error(l0e)}finally{r||(this.inTransaction=!1,this.events.changed.next({state:this,inTransaction:!1}),this.behaviors.isUpdating.next(!1),i||((null===t||void 0===t?void 0:t.canUndo)?this.addHistory(o,"string"===typeof t.canUndo?t.canUndo:void 0):this.clearHistory()))}}))}get inUpdate(){return this._inUpdate}updateTree(e,t){const n={tree:e,options:t};return Tw.create("Update Tree",(async r=>{if(!await this.updateQueue.enqueue(n))return;this._inUpdate=!0;const o=(null===t||void 0===t?void 0:t.canUndo)?this._tree.asImmutable():void 0;let i=!1;this.inTransaction||this.behaviors.isUpdating.next(!0);try{if(jD.is(e)){if(e.editInfo.applied)throw new Error("This builder has already been applied. Create a new builder for further state updates");e.editInfo.applied=!0}this.reverted=!1;const o=t&&(t.revertIfAborted||t.revertOnError)?await this._revertibleTreeUpdate(r,n,t):await this._updateTree(r,n);if(i=this.reverted,o.ctx.hadError&&(this.inTransactionError=!0),!o.cell)return;return new OC(o.cell.transform.ref,this)}finally{this._inUpdate=!1,this.updateQueue.handled(n),this.inTransaction||(this.behaviors.isUpdating.next(!1),(null===t||void 0===t?void 0:t.canUndo)?i||this.addHistory(o,"string"===typeof t.canUndo?t.canUndo:void 0):this.undoingHistory||this.clearHistory())}}),(()=>{this.updateQueue.remove(n)}))}async _revertibleTreeUpdate(e,t,n){const r=this.tree,o=await this._updateTree(e,t);return(o.ctx.hadError||o.ctx.wasAborted)&&n.revertOnError||o.ctx.wasAborted&&n.revertIfAborted?(this.reverted=!0,await this._updateTree(e,{tree:r,options:t.options})):o}async _updateTree(e,t){let n=!1;const r=this.updateTreeAndCreateCtx(t.tree,e,t.options);try{if(n=await async function(e){const t=!(!e.editInfo||1!==e.editInfo.count||!e.editInfo.lastUpdate||e.editInfo.sourceTree!==e.oldTree);let n,r,o=[];if(t)n=[],r=[e.editInfo.lastUpdate];else{n=function(e){const t={newTree:e.tree,cells:e.cells,deletes:[]};return H_.doPostOrder(e.oldTree,e.oldTree.root,t,iT),t.deletes}(e);const t=e.parent.current;let i=!1;for(const e of n)if(e===t){i=!0;break}if(i){const r=AT(e.oldTree,t,n,e.cells);e.parent.setCurrent(r)}for(let r=n.length-1;r>=0;r--){const t=e.cells.get(n[r]);t&&mT(t.transform,t.obj,null===t||void 0===t?void 0:t.transform.params,t.cache,e.parent.globalContext)}for(const r of n){const t=e.cells.get(r);t&&(t.parent=void 0,cT(t));const n=t&&t.obj;e.cells.delete(r),o.push(n)}r=function(e,t){const n={roots:[],cells:e};return H_.doPreOrder(t,t.root,n,oT),n.roots}(e.cells,e.tree)}const i=function(e,t){const n={ctx:e,visited:new Set,added:[]};for(const o of t)H_.doPreOrder(e.tree,e.tree.transforms.get(o),n,uT);for(const o of n.added)dT(o,e);let r;return n.visited.forEach((t=>{const o=e.cells.get(t);for(const e of o.dependencies.dependentBy)n.visited.has(e.transform.ref)||(r||(r=VD.create()),VD.add(r,e.transform.ref,e))})),{added:n.added,dependent:r?r.array:void 0}}(e,r);for(const s of i.added)e.parent.events.cell.created.next({state:e.parent,ref:s.transform.ref,cell:s});for(let s=0;s<n.length;s++){const t=n[s],r=e.oldTree.transforms.get(t).parent;e.parent.events.object.removed.next({state:e.parent,ref:t,obj:o[s]}),e.parent.events.cell.removed.next({state:e.parent,ref:t,parent:r})}o.length&&(o=[]);if(i.dependent)for(const s of i.dependent)r.push(s.transform.ref);!function(e,t){for(const n of t)H_.doPreOrder(e.tree,e.tree.transforms.get(n),e,lT)}(e,r);for(const s of r)await gT(e,s);e.editInfo||function(e){H_.doPreOrder(e.tree,e.tree.root,e,aT)}(e);let a=e.newCurrent;for(const s of e.results)if("created"===s.action){if(e.parent.events.object.created.next({state:e.parent,ref:s.ref,obj:s.obj}),!e.newCurrent){e.tree.transforms.get(s.ref).state.isGhost||s.obj===MC.Null||(a=s.ref)}}else"updated"===s.action?e.parent.events.object.updated.next({state:e.parent,ref:s.ref,action:"in-place",obj:s.obj,oldData:s.oldData}):"replaced"===s.action&&e.parent.events.object.updated.next({state:e.parent,ref:s.ref,action:"recreate",obj:s.obj,oldObj:s.oldObj});if(a)e.options.doNotUpdateCurrent||e.parent.setCurrent(a);else{const t=e.parent.current,n=e.cells.get(t);n&&(n.obj===MC.Null||"error"===n.status&&n.errorText===hT)&&(a=AT(e.oldTree,t,[],e.cells),e.parent.setCurrent(a))}return n.length>0||r.length>0||e.changed}(r),jD.isTo(t.tree)){return{ctx:r,cell:this.select(t.tree.ref)[0]}}return{ctx:r}}finally{this.spine.current=void 0,n&&this.events.changed.next({state:this,inTransaction:this.inTransaction})}}updateTreeAndCreateCtx(e,t,n){const r=(jD.is(e)?e.getTree():e).asTransient(),o=this._tree;this._tree=r;const i=this.cells,a={parent:this,editInfo:jD.is(e)?e.editInfo:void 0,errorFree:this.errorFree,taskCtx:t,oldTree:o,tree:r,cells:this.cells,spine:this.spine,results:[],options:{...rT,...n},changed:!1,hadError:!1,wasAborted:!1,newCurrent:void 0,getCellData:e=>{var t;return null===(t=i.get(e).obj)||void 0===t?void 0:t.data}};return this.errorFree=!0,a}constructor(e,t){this.errorFree=!0,this.ev=WS.create(),this.globalContext=void 0,this.events={cell:{stateUpdated:this.ev(),created:this.ev(),removed:this.ev()},object:{updated:this.ev(),created:this.ev(),removed:this.ev()},log:this.ev(),changed:this.ev(),historyUpdated:this.ev()},this.behaviors={currentObject:this.ev.behavior({state:this,ref:z_.RootRef}),isUpdating:this.ev.behavior(!1)},this.actions=new WD,this.cells=new Map,this.spine=new HD.Impl(this.cells),this.tryGetCellData=e=>{var t,n;const r=null===(n=null===(t=this.cells.get(e))||void 0===t?void 0:t.obj)||void 0===n?void 0:n.data;if(void 0===r)throw new Error(`Cell '${e}' data undefined.`);return r},this.historyCapacity=5,this.history=[],this.undoingHistory=!1,this.inTransaction=!1,this.inTransactionError=!1,this._inUpdate=!1,this.reverted=!1,this.updateQueue=new KD,this._tree=H_.createEmpty(z_.createRoot(t&&t.rootState)).asTransient();const n=this._tree.root;this.runTask=t.runTask,void 0!==(null===t||void 0===t?void 0:t.historyCapacity)&&(this.historyCapacity=t.historyCapacity),this.cells.set(n.ref,{parent:this,transform:n,sourceRef:void 0,obj:e,status:"ok",state:{...n.state},errorText:void 0,params:{definition:{},values:{}},paramsNormalizedVersion:n.version,dependencies:{dependentBy:[],dependsOn:[]},cache:{}}),this.globalContext=t&&t.globalContext}}!function(e){let t;e.create=function(t,n){return new e(t,n)},function(e){e.isCell=function(e,t){return!!t&&e.ref===t.transform.ref&&e.state===t.parent}}(t=e.ObjectEvent||(e.ObjectEvent={}))}(nT||(nT={}));const rT={doNotLogTiming:!1,doNotUpdateCurrent:!0,revertIfAborted:!1,revertOnError:!1,canUndo:!1};function oT(e,t,n){const r=n.cells.get(e.ref);return r&&r.transform.version===e.version?"error"!==r.status&&(!r||r.obj!==MC.Null):(n.roots.push(e.ref),!1)}function iT(e,t,n){!n.newTree.transforms.has(e.ref)&&n.cells.has(e.ref)&&n.deletes.push(e.ref)}function aT(e,t,n){const r=n.cells.get(e.ref);r&&z_.syncState(r.state,e.state)&&n.parent.events.cell.stateUpdated.next({state:n.parent,ref:e.ref,cell:r})}function sT(e,t,n,r){const o=e.cells.get(t),i=o.status!==n;o.status=n,o.errorText=r,i&&e.parent.events.cell.stateUpdated.next({state:e.parent,ref:t,cell:o})}function lT(e,t,n){n.cells.get(e.ref).transform=e,sT(n,e.ref,"pending")}function cT(e){for(const t of e.dependencies.dependsOn)nS(t.dependencies.dependentBy,e)}function uT(e,t,n){let{ctx:r,added:o,visited:i}=n;if(i.add(e.ref),r.cells.has(e.ref))return;const a={parent:r.parent,transform:e,sourceRef:void 0,status:"pending",state:{...e.state},errorText:void 0,params:void 0,paramsNormalizedVersion:"",dependencies:{dependentBy:[],dependsOn:[]},cache:void 0};r.cells.set(e.ref,a),o.push(a)}function dT(e,t){if(e.transform.dependsOn)for(const n of e.transform.dependsOn){if(!t.tree.transforms.get(n))throw new Error("Cannot depend on a non-existent transform.");const r=t.cells.get(n);tS(e.dependencies.dependsOn,r),tS(r.dependencies.dependentBy,e)}}function AT(e,t,n,r){return fT(e,t,new Set(n),r)}function fT(e,t,n,r){if(t===z_.RootRef)return t;const o=e.transforms.get(t),i=e.children.get(o.parent).values();let a,s=!1;for(;;){const o=i.next();if(o.done)break;if(n.has(o.value))continue;const l=r.get(o.value);if(!l||"error"===l.status||l.obj===MC.Null)continue;const c=e.transforms.get(o.value);if(!c.state.isGhost)if(o.value!==t){if(s)return c.ref;a=c.ref}else s=!0,n.has(t)||(a=t)}return a||fT(e,o.parent,n,r)}function pT(e,t,n,r){r||(e.hadError=!0,e.parent.errorFree=!1);const o=e.cells.get(t);if(n){e.wasAborted=e.wasAborted||Tw.isAbort(n);const o=""+n;sT(e,t,"error",o),r||e.parent.events.log.next({type:"error",timestamp:new Date,message:o})}else o.params=void 0;if(o.obj){const n=o.obj;o.obj=void 0,o.cache=void 0,e.parent.events.object.removed.next({state:e.parent,ref:t,obj:n})}const i=e.tree.children.get(t).values();for(;;){const t=i.next();if(t.done)return;pT(e,t.value,void 0,r)}}const hT="Parent is null";async function gT(e,t){sT(e,t,"processing");let n=!1;try{const r=vp(),o=await async function(e,t){var n;const{oldTree:r,tree:o}=e,i=e.cells.get(t),a=i.transform;if(i.transform.ref===z_.RootRef)return{action:"none"};const s=e.cells.get(i.transform.parent);if((null===s||void 0===s?void 0:s.obj)===MC.Null){if(i.sourceRef=s.transform.ref,r.transforms.has(t)&&i.params){const n=i.params.values,r=i.cache;return mT(a,i.obj,n,r,e.parent.globalContext),i.params=void 0,i.obj=MC.Null,{ref:t,action:"updated",obj:i.obj}}return i.params=void 0,{ref:t,action:"created",obj:MC.Null}}const l=0===a.transformer.definition.from.length?s:V_.findAncestorOfType(o,e.cells,t,a.transformer.definition.from);if(!l)throw new Error(`No suitable parent found for '${t}'`);e.spine.current=i;const c=l.obj;i.sourceRef=l.transform.ref;const u=function(e,t,n,r){const o=t.transformer.definition.params,i=o?o(n,e.parent.globalContext):{};if(r.paramsNormalizedVersion!==t.version)t.params=U_.normalizeParams(i,t.params,"all"),r.paramsNormalizedVersion=t.version;else{const e=U_.getDefaultValues(i);t.params=t.params?function(e,t){for(const n of Object.keys(t))KB.call(t,n)&&"undefined"===typeof e[n]&&(e[n]=t[n]);return e}(t.params,e):e}return U_.resolveRefs(i,t.params,e.getCellData),{definition:i,values:t.params}}(e,a,c,i);if(!r.transforms.has(t)||!i.params){i.params=u;const n=await CT(e,i,a.transformer,c,u.values);return yT(n,a),i.obj=n,{ref:t,action:"created",obj:n}}{const r=i.params.values,o=i.cache,s=null===(n=i.obj)||void 0===n?void 0:n.data,l=u.values;i.params=u;const d=i.obj&&i.obj!==MC.Null?await async function(e,t,n,r,o,i,a){if(!n.definition.update)return j_.UpdateResult.Recreate;t.cache||(t.cache=Object.create(null));return vT(n.definition.update({a:r,oldParams:i,b:o,newParams:a,cache:t.cache,spine:e.spine,dependencies:bT(t)},e.parent.globalContext),e.taskCtx)}(e,i,a.transformer,c,i.obj,r,l):j_.UpdateResult.Recreate;switch(d){case j_.UpdateResult.Recreate:{const n=i.obj;mT(a,n,r,o,e.parent.globalContext);const s=await CT(e,i,a.transformer,c,l);return yT(s,a),i.obj=s,{ref:t,action:"replaced",oldObj:n,obj:s}}case j_.UpdateResult.Updated:return yT(i.obj,a),{ref:t,action:"updated",oldData:s,obj:i.obj};case j_.UpdateResult.Null:return mT(a,i.obj,r,o,e.parent.globalContext),i.obj=MC.Null,{ref:t,action:"updated",obj:i.obj};default:return{action:"none"}}}}(e,t),i=vp()-r;"none"!==o.action&&(e.changed=!0),sT(e,t,"ok"),e.results.push(o),"created"===o.action?(n=o.obj===MC.Null,n||e.options.doNotLogTiming||e.parent.events.log.next(zD.info(`Created ${o.obj.label} in ${bp(i)}.`))):("updated"===o.action||"replaced"===o.action)&&(n=o.obj===MC.Null,n||e.options.doNotLogTiming||e.parent.events.log.next(zD.info(`Updated ${o.obj.label} in ${bp(i)}.`)))}catch(l0e){return e.changed=!0,e.hadError||(e.newCurrent=t),pT(e,t,l0e,!1),void console.error(l0e)}const r=e.tree.children.get(t).values();for(;;){const t=r.next();if(t.done)return;n?pT(e,t.value,void 0,!0):await gT(e,t.value)}}function mT(e,t,n,r,o){var i,a;null===(a=(i=e.transformer.definition).dispose)||void 0===a||a.call(i,{b:t!==MC.Null?t:void 0,params:n,cache:r},o)}function yT(e,t){e&&e!==MC.Null&&(e.tags=t.tags)}function vT(e,t){return"function"===typeof e.runInContext?e.runInContext(t):e}function bT(e){if(0===e.dependencies.dependsOn.length)return;const t=Object.create(null);for(const n of e.dependencies.dependsOn){if(!n.obj)throw new Error("Unresolved dependency.");t[n.transform.ref]=n.obj}return t}function CT(e,t,n,r,o){return t.cache||(t.cache=Object.create(null)),vT(n.definition.apply({a:r,params:o,cache:t.cache,spine:e.spine,dependencies:bT(t)},e.parent.globalContext),e.taskCtx)}const IT={kind:"null-location"};function ET(e,t,n){return{kind:"data-location",tag:e,data:t,element:n}}function xT(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>!1,a=arguments.length>6?arguments[6]:void 0;if(e%n!==0)throw new Error("incompatible groupCount and stride");const s={location:IT,location2:IT,index:0,groupIndex:0,instanceIndex:0,isSecondary:!1};let l=s.groupIndex<e,c=!1,u=0,d=0,A=!1;const f=!!a;return{get hasNext(){return l},get isNextNewInstance(){return c},groupCount:e,instanceCount:t,count:e*t,stride:n,nonInstanceable:o,hasLocation2:f,move:()=>(l&&(s.groupIndex=u,s.instanceIndex=d,s.index=d*e+u,s.location=r(u,A?-1:d),f&&(s.location2=a(u,A?-1:d)),s.isSecondary=i(u,A?-1:d),u+=n,u===e?(++d,c=!0,d<t&&(u=0)):c=!1,l=u<e),s),reset(){s.location=IT,s.location2=IT,s.index=0,s.groupIndex=0,s.instanceIndex=0,s.isSecondary=!1,l=s.groupIndex<e,c=!1,u=0,d=0,A=!1},skipInstance(){l&&s.instanceIndex===d&&(++d,u=0,l=d<t)},voidInstances(){A=!0}}}function BT(e,t){return{kind:"position-location",position:e?qh.clone(e):qh(),normal:t?qh.clone(t):qh()}}function wT(e,t,n){const r=new Float32Array(e);for(let o=0;o<r.length;o++)r[o]=t+n*o;return r}var _T;function ST(e){return 0}!function(e){function t(t,n,r){let{assembly:o,ncsId:i,hkl:a,spgrOp:s,key:l}=r||{};const c=a?qh.clone(a):qh();s=null!==s&&void 0!==s?s:-1,l=null!==l&&void 0!==l?l:-1,i=i||-1;const u=Yh.isIdentity(n),d=function(e,t){if(!e)return"";if(e.assembly)return function(e){return!!e&&!!e.matrix&&!!e.inverse&&"string"===typeof e.name}(e)?e.suffix:t?"":`_${e.assembly.operId}`;if("undefined"!==typeof e.spgrOp&&"undefined"!==typeof e.hkl&&-1!==e.spgrOp){const[t,n,r]=e.hkl;return`-${e.spgrOp+1}_${5+t}${5+n}${5+r}`}if(-1!==e.ncsId)return`_${e.ncsId}`;return""}(r,u);return u?{name:t,assembly:o,matrix:n,inverse:Yh.identity(),isIdentity:!0,hkl:c,spgrOp:s,ncsId:i,suffix:d,key:l}:(Yh.isRotationAndTranslation(n,e.RotationTranslationEpsilon)||console.warn(`Symmetry operator (${t}) should be a composition of rotation and translation.`),{name:t,assembly:o,matrix:n,inverse:Yh.invert(Yh(),n),isIdentity:!1,hkl:c,spgrOp:s,key:l,ncsId:i,suffix:d})}e.DefaultName="1_555",e.Default=t(e.DefaultName,Yh.identity()),e.RotationTranslationEpsilon=.005,e.create=t;const n=Yh();e.checkIfRotationAndTranslation=function(t,r){Yh.setIdentity(n);for(let e=0;e<3;e++)for(let r=0;r<3;r++)Yh.setValue(n,e,r,Xh.getValue(t,e,r));return Yh.setTranslation(n,r),Yh.isRotationAndTranslation(n,e.RotationTranslationEpsilon)},e.ofRotationAndOffset=function(e,n,r,o){const i=Yh.identity();for(let t=0;t<3;t++)for(let e=0;e<3;e++)Yh.setValue(i,t,e,Xh.getValue(n,t,e));return Yh.setTranslation(i,r),t(e,i,{ncsId:o})};const r=eg.identity(),o=eg(),i=eg(),a=qh();e.lerpFromIdentity=function(e,t,n){const i=t.inverse;if(t.isIdentity)return Yh.copy(e,i);const s=1-n;Yh.getRotation(o,i),eg.slerp(o,r,o,s);const l=eg.getAxisAngle(a,o);return Yh.fromRotation(e,l,a),Yh.setValue(e,0,3,s*Yh.getValue(i,0,3)),Yh.setValue(e,1,3,s*Yh.getValue(i,1,3)),Yh.setValue(e,2,3,s*Yh.getValue(i,2,3)),e},e.slerp=function(e,t,n,r){if(Math.abs(r)<=1e-5)return Yh.copy(e,t);if(Math.abs(r-1)<=1e-5)return Yh.copy(e,n);Yh.getRotation(o,t),Yh.getRotation(i,n),eg.slerp(i,o,i,r);const s=eg.getAxisAngle(a,i);return Yh.fromRotation(e,s,a),Yh.setValue(e,0,3,Vp(Yh.getValue(t,0,3),Yh.getValue(n,0,3),r)),Yh.setValue(e,1,3,Vp(Yh.getValue(t,1,3),Yh.getValue(n,1,3),r)),Yh.setValue(e,2,3,Vp(Yh.getValue(t,2,3),Yh.getValue(n,2,3),r)),e},e.compose=function(e,n){const r=Yh.mul(Yh(),n.matrix,e.matrix);return t(n.name,r,n)};class s{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ST;this.operator=e,this.coordinates=t,this.r=n,this._x=t.x,this._y=t.y,this._z=t.z,this._m=e.matrix}invariantPosition(e,t){return t[0]=this._x[e],t[1]=this._y[e],t[2]=this._z[e],t}position(e,t){return t[0]=this._x[e],t[1]=this._y[e],t[2]=this._z[e],qh.transformMat4(t,t,this._m),t}x(e){const t=this._m,n=t[0],r=t[4],o=t[8],i=t[12],a=this._x[e],s=this._y[e],l=this._z[e];return(n*a+r*s+o*l+i)/(t[3]*a+t[7]*s+t[11]*l+t[15]||1)}y(e){const t=this._m,n=t[1],r=t[5],o=t[9],i=t[13],a=this._x[e],s=this._y[e],l=this._z[e];return(n*a+r*s+o*l+i)/(t[3]*a+t[7]*s+t[11]*l+t[15]||1)}z(e){const t=this._m,n=t[2],r=t[6],o=t[10],i=t[14],a=this._x[e],s=this._y[e],l=this._z[e];return(n*a+r*s+o*l+i)/(t[3]*a+t[7]*s+t[11]*l+t[15]||1)}}class l{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ST;this.operator=e,this.coordinates=t,this.r=n,this._x=t.x,this._y=t.y,this._z=t.z,this._m=e.matrix}invariantPosition(e,t){return t[0]=this._x[e],t[1]=this._y[e],t[2]=this._z[e],t}position(e,t){return t[0]=this.x(e),t[1]=this.y(e),t[2]=this.z(e),t}x(e){const t=this._m;return t[0]*this._x[e]+t[4]*this._y[e]+t[8]*this._z[e]+t[12]}y(e){const t=this._m;return t[1]*this._x[e]+t[5]*this._y[e]+t[9]*this._z[e]+t[13]}z(e){const t=this._m;return t[2]*this._x[e]+t[6]*this._y[e]+t[10]*this._z[e]+t[14]}}class c{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ST;this.operator=e,this.coordinates=t,this.r=n,this._x=t.x,this._y=t.y,this._z=t.z}invariantPosition(e,t){return t[0]=this._x[e],t[1]=this._y[e],t[2]=this._z[e],t}position(e,t){return t[0]=this._x[e],t[1]=this._y[e],t[2]=this._z[e],t}x(e){return this._x[e]}y(e){return this._y[e]}z(e){return this._z[e]}}e.createMapping=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ST;return Yh.isIdentity(e.matrix)?new c(e,t,n):function(e){return 0===e[3]&&0===e[7]&&0===e[11]&&1===e[15]}(e.matrix)?new l(e,t,n):new s(e,t,n)}}(_T||(_T={}));const DT=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[-1,0,0,0],[0,-1,0,0],[0,0,-1,0],[0,1,0,.5],[1,0,0,.5],[-1,0,0,.5],[0,0,1,.5],[0,-1,0,.5],[0,0,-1,.5],[1,0,0,.25],[0,-1,0,.25],[0,0,1,.25],[-1,0,0,.25],[0,1,0,.25],[0,-1,0,.75],[0,0,1,.75],[0,1,0,.75],[1,0,0,.75],[-1,0,0,.75],[0,0,-1,.25],[0,0,-1,.75],[1,-1,0,0],[-1,1,0,0],[0,0,1,1/3],[0,0,1,2/3],[1,0,0,2/3],[0,1,0,1/3],[0,-1,0,2/3],[1,-1,0,1/3],[-1,1,0,2/3],[-1,0,0,1/3],[1,0,0,1/3],[0,1,0,2/3],[0,-1,0,1/3],[1,-1,0,2/3],[-1,1,0,1/3],[-1,0,0,2/3],[0,0,-1,1/3],[0,0,-1,2/3],[0,0,1,5/6],[0,0,1,1/6],[0,0,-1,5/6],[0,0,-1,1/6]],TT=[[0,1,2],[3,4,5],[3,1,5],[3,6,5],[7,6,2],[8,6,5],[0,4,2],[0,4,9],[7,10,2],[7,10,9],[0,10,2],[8,10,5],[3,1,11],[3,6,11],[0,10,9],[8,6,11],[3,4,2],[0,4,5],[3,4,9],[7,10,5],[8,4,9],[8,10,9],[8,10,2],[0,6,9],[3,10,9],[0,10,11],[7,1,9],[8,1,11],[7,4,11],[7,6,9],[7,10,11],[3,10,2],[8,1,5],[0,4,11],[3,1,2],[3,1,9],[7,4,2],[8,1,2],[8,1,9],[3,6,9],[7,4,9],[8,6,2],[8,6,9],[3,6,2],[12,13,14],[15,16,14],[12,17,18],[15,19,18],[20,13,18],[21,16,18],[20,17,14],[21,19,14],[0,1,5],[8,10,11],[7,6,11],[7,6,5],[8,4,2],[7,4,5],[7,1,5],[7,1,11],[0,10,5],[0,1,11],[0,6,11],[0,6,5],[3,10,11],[8,4,11],[15,13,22],[12,16,22],[15,17,23],[12,19,23],[21,13,23],[20,16,23],[21,17,22],[20,19,22],[4,0,2],[1,3,2],[4,0,14],[1,3,18],[4,0,9],[1,3,9],[4,0,18],[1,3,14],[10,7,9],[6,8,9],[4,7,14],[6,3,18],[10,0,18],[1,8,14],[1,3,5],[4,0,5],[6,8,11],[10,7,11],[1,3,11],[4,0,11],[10,7,2],[6,8,2],[3,10,22],[7,1,23],[8,4,23],[0,6,22],[1,0,5],[4,3,5],[1,0,23],[4,3,22],[10,7,14],[6,8,18],[8,6,22],[7,10,23],[4,3,11],[1,0,11],[1,0,22],[4,3,23],[10,7,18],[6,8,14],[8,6,23],[7,10,22],[6,7,11],[10,8,11],[8,1,23],[0,10,22],[3,6,22],[7,4,23],[4,3,2],[1,0,2],[10,8,2],[6,7,2],[4,3,9],[1,0,9],[10,8,9],[6,7,9],[4,8,14],[6,0,18],[10,3,18],[1,7,14],[4,8,18],[6,0,14],[10,3,14],[1,7,18],[6,7,5],[10,8,5],[6,8,5],[10,7,5],[8,1,22],[0,10,23],[3,6,23],[7,4,22],[4,24,2],[25,3,2],[4,24,26],[25,3,27],[4,24,27],[25,3,26],[28,29,26],[30,31,26],[32,33,26],[34,35,27],[36,37,27],[38,39,27],[2,0,1],[1,2,0],[1,25,5],[24,0,5],[39,36,40],[35,38,40],[37,34,40],[33,30,41],[29,32,41],[31,28,41],[5,3,4],[4,5,3],[25,1,5],[0,24,5],[24,4,5],[3,25,5],[4,3,41],[25,1,40],[24,4,41],[3,25,40],[4,3,40],[25,1,41],[24,4,40],[3,25,41],[35,34,40],[37,36,40],[39,38,40],[29,28,41],[31,30,41],[33,32,41],[3,5,4],[5,4,3],[25,1,2],[0,24,2],[24,4,2],[3,25,2],[25,1,9],[0,24,9],[24,4,9],[3,25,9],[30,33,26],[32,29,26],[28,31,26],[36,39,27],[38,35,27],[34,37,27],[0,2,1],[2,1,0],[30,33,42],[32,29,42],[28,31,42],[36,39,43],[38,35,43],[34,37,43],[7,9,6],[9,6,7],[25,1,11],[0,24,11],[24,4,11],[3,25,11],[35,34,44],[37,36,44],[39,38,44],[29,28,45],[31,30,45],[33,32,45],[8,11,10],[11,10,8],[1,25,2],[24,0,2],[1,25,42],[24,0,43],[1,25,43],[24,0,42],[1,25,27],[24,0,26],[1,25,26],[24,0,27],[1,25,9],[24,0,9],[4,24,5],[25,3,5],[4,24,11],[25,3,11],[1,0,40],[4,3,44],[0,24,45],[1,0,41],[4,3,45],[0,24,44],[0,24,40],[0,24,41],[2,3,4],[5,3,1],[5,0,4],[4,2,3],[1,5,3],[4,5,0],[2,7,6],[2,8,10],[5,8,6],[5,7,10],[1,9,7],[4,9,8],[1,11,8],[4,11,7],[9,0,6],[9,3,10],[11,3,6],[11,0,10],[6,2,7],[10,2,8],[6,5,8],[10,5,7],[9,7,1],[9,8,4],[11,8,1],[11,7,4],[6,9,0],[10,9,3],[6,11,3],[10,11,0],[9,7,6],[9,8,10],[11,8,6],[11,7,10],[6,9,7],[10,9,8],[6,11,8],[10,11,7],[2,3,10],[5,8,1],[11,0,4],[10,2,3],[1,5,8],[4,11,0],[5,0,1],[2,0,4],[2,3,1],[1,5,0],[4,2,0],[1,2,3],[11,8,10],[11,7,6],[9,7,10],[9,8,6],[10,11,8],[6,11,7],[10,9,7],[6,9,8],[5,8,10],[5,7,6],[2,7,10],[2,8,6],[4,11,8],[1,11,7],[4,9,7],[1,9,8],[11,3,10],[11,0,6],[9,0,10],[9,3,6],[10,5,8],[6,5,7],[10,2,7],[6,2,8],[11,8,4],[11,7,1],[9,7,4],[9,8,1],[10,11,3],[6,11,0],[10,9,0],[6,9,3],[22,15,13],[22,12,16],[14,12,13],[14,15,16],[13,22,15],[16,22,12],[13,14,12],[16,14,15],[22,21,17],[22,20,19],[14,20,17],[14,21,19],[13,23,21],[16,23,20],[13,18,20],[16,18,21],[23,15,17],[23,12,19],[18,12,17],[18,15,19],[17,22,21],[19,22,20],[17,14,20],[19,14,21],[23,21,13],[23,20,16],[18,20,13],[18,21,16],[17,23,15],[19,23,12],[17,18,12],[19,18,15],[5,0,6],[2,7,4],[9,3,1],[6,5,0],[4,2,7],[1,9,3],[0,2,4],[3,2,1],[0,5,1],[2,1,3],[2,4,0],[5,1,0],[7,9,10],[8,9,6],[7,11,6],[9,6,8],[9,10,7],[11,6,7],[1,7,11],[4,8,11],[1,8,9],[4,7,9],[0,9,10],[3,9,6],[3,11,10],[0,11,6],[2,6,8],[2,10,7],[5,6,7],[5,10,8],[6,0,11],[10,3,11],[6,3,9],[10,0,9],[7,2,10],[8,2,6],[8,5,10],[7,5,6],[9,1,8],[9,4,7],[11,1,7],[11,4,8],[7,9,4],[8,9,1],[8,11,4],[7,11,1],[9,6,3],[9,10,0],[11,6,0],[11,10,3],[19,12,23],[13,15,22],[16,21,18],[17,20,14],[20,14,17],[21,18,16],[15,22,13],[12,23,19],[18,16,21],[14,17,20],[23,19,12],[22,13,15],[19,20,22],[13,21,23],[16,15,14],[17,12,18],[20,18,13],[21,14,19],[15,23,17],[12,22,16],[18,19,15],[14,13,12],[23,16,20],[22,17,21],[16,12,22],[17,15,23],[19,21,14],[13,20,18],[12,14,13],[15,18,19],[21,22,17],[20,23,16],[14,16,15],[18,17,12],[22,19,20],[23,13,21],[16,20,23],[17,21,22],[19,15,18],[13,12,14],[12,18,17],[15,14,16],[21,23,13],[20,22,19],[14,19,21],[18,13,20],[22,16,12],[23,17,15],[19,12,22],[17,21,23],[16,15,18],[13,20,14],[20,14,13],[15,18,16],[21,23,17],[12,22,19],[18,16,15],[14,13,20],[22,19,12],[23,17,21],[3,2,4],[3,5,1],[0,5,4],[2,4,3],[5,1,3],[5,4,0],[1,7,9],[4,8,9],[1,8,11],[4,7,11],[0,9,6],[3,9,10],[3,11,6],[0,11,10],[2,6,7],[2,10,8],[5,6,8],[5,10,7],[6,0,9],[10,3,9],[6,3,11],[10,0,11],[7,2,6],[8,2,10],[8,5,6],[7,5,10],[9,1,7],[9,4,8],[11,1,8],[11,4,7],[7,9,1],[8,9,4],[8,11,1],[7,11,4],[9,6,0],[9,10,3],[11,6,3],[11,10,0],[8,9,10],[8,11,6],[7,11,10],[9,10,8],[11,6,8],[11,10,7],[6,0,2],[10,3,2],[6,3,5],[10,0,5],[7,2,1],[8,2,4],[8,5,1],[7,5,4],[9,1,0],[9,4,3],[11,1,3],[11,4,0],[1,7,2],[4,8,2],[1,8,5],[4,7,5],[0,9,1],[3,9,4],[3,11,1],[0,11,4],[2,6,0],[2,10,3],[5,6,3],[5,10,0],[0,2,6],[3,2,10],[3,5,6],[0,5,10],[2,1,7],[2,4,8],[5,1,8],[5,4,7],[16,12,14],[13,21,18],[19,15,23],[17,20,22],[12,14,16],[21,18,13],[15,23,19],[20,22,17],[14,16,12],[18,13,21],[23,19,15],[22,17,20],[19,20,18],[17,15,14],[16,21,22],[13,12,23],[20,18,19],[15,14,17],[21,22,16],[12,23,13],[18,19,20],[14,17,15],[22,16,21],[23,13,12],[6,0,5],[10,3,5],[6,3,2],[10,0,2],[7,2,4],[8,2,1],[8,5,4],[7,5,1],[9,1,3],[9,4,0],[11,1,0],[11,4,3],[1,7,5],[4,8,5],[1,8,2],[4,7,2],[0,9,4],[3,9,1],[3,11,4],[0,11,1],[2,6,3],[2,10,0],[5,6,0],[5,10,3],[0,2,10],[3,2,6],[3,5,10],[0,5,6],[2,1,8],[2,4,7],[5,1,7],[5,4,8],[21,17,23],[20,16,22],[12,13,18],[15,19,14],[23,21,17],[22,20,16],[18,12,13],[14,15,19],[17,23,21],[16,22,20],[13,18,12],[19,14,15],[21,13,22],[20,19,23],[12,17,14],[15,16,18],[23,15,13],[22,12,19],[18,20,17],[14,21,16],[17,22,15],[16,23,12],[13,14,20],[19,18,21],[15,17,22],[12,16,23],[20,13,14],[21,19,18],[22,21,13],[23,20,19],[14,12,17],[18,15,16],[13,23,15],[19,22,12],[17,18,20],[16,14,21],[15,13,23],[12,19,22],[20,17,18],[21,16,14],[22,15,17],[23,12,16],[14,20,13],[18,21,19],[13,22,21],[19,23,20],[17,14,12],[16,18,15],[6,5,3],[4,9,3],[9,3,4],[5,7,4],[4,5,7],[5,3,6]],kT=[[0],[0,1],[0,2],[0,3],[0,2,4,5],[0,6],[0,7],[0,6,4,8],[0,7,4,9],[0,6,2,1],[0,3,1,10],[0,6,2,1,4,8,5,11],[0,12,1,7],[0,1,13,14],[0,12,1,7,4,15,11,9],[0,16,2,17],[0,18,12,17],[0,16,5,19],[0,20,13,19],[0,18,12,17,4,21,15,19],[0,16,2,17,4,22,5,19],[0,16,2,17,23,24,13,25,26,20,27,28,4,22,5,19],[0,16,17,2,29,21,30,15],[0,20,13,19,29,31,32,33],[0,16,6,34],[0,18,7,34],[0,16,7,35],[0,16,36,37],[0,18,36,38],[0,16,14,39],[0,20,40,34],[0,16,8,41],[0,18,8,42],[0,16,9,42],[0,16,6,34,4,22,8,41],[0,18,7,34,4,21,9,41],[0,16,7,35,4,22,9,42],[0,16,6,34,23,24,14,39],[0,16,10,43,23,24,7,35],[0,16,36,37,23,24,9,42],[0,16,8,41,23,24,40,38],[0,16,6,34,23,24,14,39,26,20,40,38,4,22,8,41],[0,16,44,45,23,24,46,47,26,20,48,49,4,22,50,51],[0,16,6,34,29,21,9,42],[0,16,8,41,29,21,7,35],[0,16,36,37,29,21,14,39],[0,16,2,17,1,52,6,34],[0,16,2,17,53,54,9,42],[0,16,12,33,1,52,7,35],[0,16,2,17,11,55,8,41],[0,56,2,57,1,58,6,37],[0,56,15,25,1,58,9,39],[0,20,27,17,1,59,40,34],[0,56,12,28,1,58,7,38],[0,16,5,19,1,52,8,41],[0,22,13,28,1,55,14,38],[0,18,13,60,1,61,14,43],[0,16,15,30,1,52,9,42],[0,16,5,19,11,55,6,34],[0,21,12,19,1,54,7,41],[0,20,13,19,1,59,14,41],[0,20,3,30,1,59,10,42],[0,18,12,17,1,61,7,34,4,21,15,19,11,54,9,41],[0,24,13,17,1,62,14,34,4,20,27,19,11,59,40,41],[0,16,2,17,1,52,6,34,4,22,5,19,11,55,8,41],[0,16,12,33,1,52,7,35,4,22,15,30,11,55,9,42],[0,31,3,17,1,63,10,34,4,56,32,19,11,58,36,41],[0,22,2,19,64,59,14,38,4,16,5,17,65,62,40,39],[0,16,2,17,1,52,6,34,23,24,13,25,64,62,14,39,26,20,27,28,65,59,40,38,4,22,5,19,11,55,8,41],[0,16,2,17,66,67,44,45,23,24,13,25,68,69,46,47,26,20,27,28,70,71,48,49,4,22,5,19,72,73,50,51],[0,16,2,17,1,52,6,34,29,21,15,30,53,54,9,42],[0,16,5,19,1,52,8,41,29,21,12,33,53,54,7,35],[0,20,13,19,1,59,14,41,29,31,32,33,53,63,36,35],[0,31,3,17,1,63,10,34,29,20,27,30,53,59,40,42],[0,16,74,75],[0,18,76,77],[0,16,78,79],[0,18,80,81],[0,16,74,75,29,21,82,83],[0,21,84,85,29,16,86,87],[0,16,88,89],[0,16,88,89,29,21,90,91],[0,16,74,75,1,52,88,89],[0,16,78,79,1,52,92,93],[0,16,94,95,11,55,88,89],[0,16,82,83,53,54,88,89],[0,16,74,75,1,52,88,89,29,21,82,83,53,54,90,91],[0,21,84,85,96,97,88,91,29,16,86,87,98,99,90,89],[0,16,74,75,2,17,100,101],[0,16,94,95,5,19,100,101],[0,18,76,77,2,33,102,103],[0,18,104,105,106,107,100,108],[0,16,78,79,2,17,109,108],[0,16,82,83,15,30,100,101],[0,18,80,81,2,33,110,111],[0,18,112,113,114,115,100,108],[0,16,74,75,2,17,100,101,29,21,82,83,15,30,116,117],[0,21,84,85,118,119,116,101,29,16,86,87,120,121,100,117],[0,16,74,75,6,34,122,123],[0,16,74,75,8,41,124,125],[0,16,78,79,7,35,122,123],[0,16,82,83,9,42,122,123],[0,16,74,75,7,35,126,127],[0,16,74,75,9,42,128,129],[0,16,78,79,6,34,126,127],[0,16,78,79,8,41,128,129],[0,16,74,75,6,34,122,123,29,21,82,83,9,42,128,129],[0,16,74,75,7,35,126,127,29,21,82,83,8,41,124,125],[0,21,84,85,6,42,130,131,29,16,86,87,9,34,132,133],[0,21,84,85,7,41,134,135,29,16,86,87,8,35,136,137],[0,16,89,88,2,17,122,123],[0,16,89,88,12,33,126,127],[0,16,89,88,5,19,124,125],[0,16,89,88,15,30,128,129],[0,16,88,89,6,34,100,101],[0,16,89,88,7,35,109,108],[0,16,89,88,8,41,138,139],[0,16,89,88,9,42,116,117],[0,16,89,88,6,34,100,101,29,21,91,90,9,42,116,117],[0,16,89,88,7,35,109,108,29,21,91,90,8,41,138,139],[0,16,89,88,2,17,122,123,29,21,91,90,15,30,128,129],[0,16,89,88,118,121,132,131,29,21,91,90,120,119,130,133],[0,16,74,75,2,17,100,101,1,52,88,89,6,34,122,123],[0,16,74,75,12,33,109,108,1,52,88,89,7,35,126,127],[0,16,74,75,2,17,100,101,11,55,140,141,8,41,124,125],[0,16,74,75,2,17,100,101,53,54,90,91,9,42,128,129],[0,16,74,75,5,19,138,139,1,52,88,89,8,41,124,125],[0,16,74,75,15,30,116,117,1,52,88,89,9,42,128,129],[0,16,94,95,5,19,100,101,11,55,88,89,6,34,124,125],[0,16,94,95,15,30,109,108,11,55,88,89,7,35,128,129],[0,16,78,79,2,17,109,108,1,52,92,93,6,34,126,127],[0,16,78,79,12,33,100,101,1,52,92,93,7,35,122,123],[0,16,82,83,12,33,138,139,53,54,88,89,8,41,126,127],[0,16,82,83,2,17,116,117,53,54,88,89,9,42,122,123],[0,16,78,79,5,19,116,117,1,52,92,93,8,41,128,129],[0,16,82,83,15,30,100,101,1,52,90,91,9,42,122,123],[0,16,82,83,15,30,100,101,53,54,88,89,6,34,128,129],[0,16,82,83,5,19,109,108,53,54,88,89,7,35,124,125],[0,16,74,75,2,17,100,101,1,52,88,89,6,34,122,123,29,21,82,83,15,30,116,117,53,54,90,91,9,42,128,129],[0,16,74,75,12,33,109,108,1,52,88,89,7,35,126,127,29,21,82,83,5,19,138,139,53,54,90,91,8,41,124,125],[0,21,84,85,118,119,116,101,96,97,88,91,9,34,132,133,29,16,86,87,120,121,100,117,98,99,90,89,6,42,130,131],[0,21,84,85,142,143,138,108,96,97,88,91,8,35,136,137,29,16,86,87,144,145,109,139,98,99,90,89,7,41,134,135],[0,146,147],[0,148,149],[0,150,151],[0,146,147,152,153,154,155,156,157],[0,158,159],[0,146,147,1,160,161],[0,146,147,1,160,161,152,153,154,162,163,164,155,156,157,165,166,167],[0,158,159,1,168,169],[0,146,147,101,170,171],[0,146,147,100,172,173],[0,148,149,174,175,171],[0,148,149,100,176,177],[0,150,151,178,179,171],[0,150,151,100,180,181],[0,146,147,100,172,173,152,153,154,182,183,184,155,156,157,185,186,187],[0,158,159,101,188,189],[0,146,147,122,190,191],[0,146,147,123,192,193],[0,146,147,126,194,195],[0,146,147,127,196,197],[0,146,147,122,190,191,152,153,154,198,199,200,155,156,157,201,202,203],[0,158,159,123,204,205],[0,146,147,126,194,195,152,153,154,206,207,208,155,156,157,209,210,211],[0,158,159,129,212,213],[0,146,147,101,170,171,1,160,161,123,192,193],[0,146,147,108,214,215,1,160,161,127,196,197],[0,146,147,100,172,173,1,160,161,122,190,191],[0,146,147,109,216,217,1,160,161,126,194,195],[0,146,147,100,172,173,1,160,161,122,190,191,152,153,154,182,183,184,162,163,164,198,199,200,155,156,157,185,186,187,165,166,167,201,202,203],[0,158,159,101,188,189,1,168,169,123,204,205],[0,146,147,109,216,217,1,160,161,126,194,195,152,153,154,218,219,220,162,163,164,206,207,208,155,156,157,221,222,223,165,166,167,209,210,211],[0,158,159,117,224,225,1,168,169,129,212,213],[0,146,147,16,226,227],[0,148,149,18,228,229],[0,150,151,18,230,231],[0,150,151,16,232,233],[0,148,149,16,234,235],[0,146,147,18,236,237],[0,146,147,52,238,239],[0,146,147,16,226,227,1,160,161,52,238,239],[0,146,147,18,236,237,1,160,161,61,240,241],[0,146,147,16,226,227,100,172,173,101,170,171],[0,148,149,18,228,229,242,172,181,243,214,244],[0,150,151,18,230,231,245,172,177,246,214,247],[0,150,151,16,232,233,245,172,177,174,170,248],[0,148,149,16,234,235,242,172,181,178,170,249],[0,146,147,18,236,237,100,172,173,108,214,215],[0,146,147,16,226,227,122,190,191,123,192,193],[0,146,147,16,226,227,126,194,195,127,196,197],[0,146,147,18,236,237,126,194,195,123,192,193],[0,146,147,18,236,237,122,190,191,127,196,197],[0,146,147,52,238,239,122,190,191,101,170,171],[0,146,147,61,240,241,126,194,195,101,170,171],[0,146,147,52,238,239,100,172,173,123,192,193],[0,146,147,61,240,241,100,172,173,127,196,197],[0,146,147,16,226,227,100,172,173,101,170,171,1,160,161,52,239,238,122,190,191,123,192,193],[0,146,147,16,226,227,109,216,217,108,214,215,1,160,161,52,239,238,126,194,195,127,196,197],[0,146,147,18,236,237,109,216,217,101,170,171,1,160,161,61,241,240,126,194,195,123,192,193],[0,146,147,18,236,237,100,172,173,108,214,215,1,160,161,61,241,240,122,190,191,127,196,197],[0,16,2,17,158,250,251,252,159,253,254,255],[0,16,2,17,158,250,251,252,159,253,254,255,23,24,13,25,256,257,258,259,260,261,262,263,26,20,27,28,264,265,266,267,268,269,270,271,4,22,5,19,272,273,274,275,276,277,278,279],[0,16,2,17,158,250,251,252,159,253,254,255,29,21,15,30,280,281,282,283,284,285,286,287],[0,20,13,19,158,273,266,259,159,261,278,271],[0,20,13,19,158,273,266,259,159,261,278,271,29,31,32,33,280,288,289,290,284,291,292,293],[0,16,2,17,158,250,251,252,159,253,254,255,1,52,6,34,168,294,295,296,169,297,298,299],[0,16,2,17,158,250,251,252,159,253,254,255,53,54,9,42,300,301,302,303,304,305,306,307],[0,16,2,17,158,250,251,252,159,253,254,255,1,52,6,34,168,294,295,296,169,297,298,299,23,24,13,25,256,257,258,259,260,261,262,263,64,62,14,39,308,309,310,311,312,313,314,315,26,20,27,28,264,265,266,267,268,269,270,271,65,59,40,38,316,317,318,319,320,321,322,323,4,22,5,19,272,273,274,275,276,277,278,279,11,55,8,41,324,325,326,327,328,329,330,331],[0,16,2,17,158,250,251,252,159,253,254,255,66,67,44,45,332,333,334,335,336,337,338,339,23,24,13,25,256,257,258,259,260,261,262,263,68,69,46,47,340,341,342,343,344,345,346,347,26,20,27,28,264,265,266,267,268,269,270,271,70,71,48,49,348,349,350,351,352,353,354,355,4,22,5,19,272,273,274,275,276,277,278,279,72,73,50,51,356,357,358,359,360,361,362,363],[0,16,2,17,158,250,251,252,159,253,254,255,1,52,6,34,168,294,295,296,169,297,298,299,29,21,15,30,280,281,282,283,284,285,286,287,53,54,9,42,300,301,302,303,304,305,306,307],[0,20,13,19,158,273,266,259,159,261,278,271,1,59,14,41,168,325,318,311,169,313,330,323],[0,20,13,19,158,273,266,259,159,261,278,271,1,59,14,41,168,325,318,311,169,313,330,323,29,31,32,33,280,288,289,290,284,291,292,293,53,63,36,35,300,364,365,366,304,367,368,369],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189],[0,16,2,17,158,250,251,252,159,253,254,255,116,117,83,82,376,377,224,378,379,380,381,225],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,23,24,13,25,256,257,258,259,260,261,262,263,382,383,384,385,386,387,388,389,390,391,392,393,26,20,27,28,264,265,266,267,268,269,270,271,394,395,396,397,398,399,400,401,402,403,404,405,4,22,5,19,272,273,274,275,276,277,278,279,138,139,95,94,406,407,408,409,410,411,412,413],[0,24,5,28,158,265,258,275,159,277,270,263,414,415,416,417,418,419,420,421,422,423,424,425,23,16,27,19,256,273,251,267,260,269,278,255,426,427,428,429,430,431,432,433,434,435,436,437,26,22,13,17,264,250,274,259,268,261,254,279,438,439,440,441,442,443,444,445,446,447,448,449,4,20,2,25,272,257,266,252,276,253,262,271,450,451,452,453,454,455,456,457,458,459,460,461],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,29,21,15,30,280,281,282,283,284,285,286,287,116,117,83,82,376,377,224,378,379,380,381,225],[0,20,13,19,158,273,266,259,159,261,278,271,450,415,440,429,454,431,420,445,458,447,436,425],[0,20,13,19,158,273,266,259,159,261,278,271,462,463,464,465,466,467,468,469,470,471,472,473],[0,20,13,19,158,273,266,259,159,261,278,271,462,463,464,465,466,467,468,469,470,471,472,473,29,31,32,33,280,288,289,290,284,291,292,293,450,415,440,429,454,431,420,445,458,447,436,425],[0,16,2,17,158,250,251,252,159,253,254,255,123,122,88,89,204,474,475,476,205,477,478,479],[0,16,2,17,158,250,251,252,159,253,254,255,123,122,88,89,204,474,475,476,205,477,478,479,23,24,13,25,256,257,258,259,260,261,262,263,480,481,482,483,484,485,486,487,488,489,490,491,26,20,27,28,264,265,266,267,268,269,270,271,492,493,494,495,496,497,498,499,500,501,502,503,4,22,5,19,272,273,274,275,276,277,278,279,125,124,140,141,504,505,506,507,508,509,510,511],[0,16,2,17,158,250,251,252,159,253,254,255,123,122,88,89,204,474,475,476,205,477,478,479,29,21,15,30,280,281,282,283,284,285,286,287,129,128,90,91,212,512,513,514,213,515,516,517],[0,16,2,17,158,250,251,252,159,253,254,255,129,128,90,91,212,512,513,514,213,515,516,517],[0,16,2,17,158,250,251,252,159,253,254,255,129,128,90,91,212,512,513,514,213,515,516,517,23,24,13,25,256,257,258,259,260,261,262,263,518,519,520,521,522,523,524,525,526,527,528,529,26,20,27,28,264,265,266,267,268,269,270,271,530,531,532,533,534,535,536,537,538,539,540,541,4,22,5,19,272,273,274,275,276,277,278,279,127,126,92,93,542,543,544,545,546,547,548,549],[0,20,13,19,158,273,266,259,159,261,278,271,550,551,552,553,554,555,556,557,558,559,560,561,29,31,32,33,280,288,289,290,284,291,292,293,562,563,564,565,566,567,568,569,570,571,572,573],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,1,52,6,34,168,294,295,296,169,297,298,299,122,123,89,88,475,476,204,474,479,478,477,205],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,53,54,9,42,300,301,302,303,304,305,306,307,128,129,91,90,513,514,212,512,517,516,515,213],[0,16,2,17,158,250,251,252,159,253,254,255,116,117,83,82,376,377,224,378,379,380,381,225,1,52,6,34,168,294,295,296,169,297,298,299,128,129,91,90,513,514,212,512,517,516,515,213],[0,16,2,17,158,250,251,252,159,253,254,255,116,117,83,82,376,377,224,378,379,380,381,225,53,54,9,42,300,301,302,303,304,305,306,307,122,123,89,88,475,476,204,474,479,478,477,205],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,1,52,6,34,168,294,295,296,169,297,298,299,122,123,89,88,475,476,204,474,479,478,477,205,23,24,13,25,256,257,258,259,260,261,262,263,382,383,384,385,386,387,388,389,390,391,392,393,64,62,14,39,308,309,310,311,312,313,314,315,481,480,483,482,486,487,484,485,491,490,489,488,26,20,27,28,264,265,266,267,268,269,270,271,394,395,396,397,398,399,400,401,402,403,404,405,65,59,40,38,316,317,318,319,320,321,322,323,493,492,495,494,498,499,496,497,503,502,501,500,4,22,5,19,272,273,274,275,276,277,278,279,138,139,95,94,406,407,408,409,410,411,412,413,11,55,8,41,324,325,326,327,328,329,330,331,124,125,141,140,506,507,504,505,511,510,509,508],[0,16,2,17,158,250,251,252,159,253,254,255,116,117,83,82,376,377,224,378,379,380,381,225,1,52,6,34,168,294,295,296,169,297,298,299,128,129,91,90,513,514,212,512,517,516,515,213,23,24,13,25,256,257,258,259,260,261,262,263,574,575,576,577,578,579,580,581,582,583,584,585,64,62,14,39,308,309,310,311,312,313,314,315,519,518,521,520,524,525,522,523,529,528,527,526,26,20,27,28,264,265,266,267,268,269,270,271,586,587,588,589,590,591,592,593,594,595,596,597,65,59,40,38,316,317,318,319,320,321,322,323,531,530,533,532,536,537,534,535,541,540,539,538,4,22,5,19,272,273,274,275,276,277,278,279,109,108,79,78,598,599,600,601,602,603,604,605,11,55,8,41,324,325,326,327,328,329,330,331,126,127,93,92,544,545,542,543,549,548,547,546],[0,24,5,28,158,265,258,275,159,277,270,263,414,415,416,417,418,419,420,421,422,423,424,425,66,69,50,49,332,349,342,359,336,361,354,347,493,123,483,140,498,507,204,485,503,490,509,205,23,16,27,19,256,273,251,267,260,269,278,255,426,427,428,429,430,431,432,433,434,435,436,437,68,67,48,51,340,357,334,351,344,353,362,339,124,480,89,494,506,499,484,474,511,478,501,488,26,22,13,17,264,250,274,259,268,261,254,279,438,439,440,441,442,443,444,445,446,447,448,449,70,73,46,45,348,333,358,343,352,345,338,363,122,492,141,482,475,487,496,505,479,510,489,500,4,20,2,25,272,257,266,252,276,253,262,271,450,451,452,453,454,455,456,457,458,459,460,461,72,71,44,47,356,341,350,335,360,337,346,355,481,125,495,88,486,476,504,497,491,502,477,508],[0,24,5,28,158,265,258,275,159,277,270,263,414,415,416,417,418,419,420,421,422,423,424,425,606,607,608,609,610,611,612,613,614,615,616,617,531,129,521,92,536,545,212,523,541,528,547,213,23,16,27,19,256,273,251,267,260,269,278,255,426,427,428,429,430,431,432,433,434,435,436,437,618,619,620,621,622,623,624,625,626,627,628,629,126,518,91,532,544,537,522,512,549,516,539,526,26,22,13,17,264,250,274,259,268,261,254,279,438,439,440,441,442,443,444,445,446,447,448,449,630,631,632,633,634,635,636,637,638,639,640,641,128,530,93,520,513,525,534,543,517,548,527,538,4,20,2,25,272,257,266,252,276,253,262,271,450,451,452,453,454,455,456,457,458,459,460,461,642,643,644,645,646,647,648,649,650,651,652,653,519,127,533,90,524,514,542,535,529,540,515,546],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,1,52,6,34,168,294,295,296,169,297,298,299,122,123,89,88,475,476,204,474,479,478,477,205,29,21,15,30,280,281,282,283,284,285,286,287,116,117,83,82,376,377,224,378,379,380,381,225,53,54,9,42,300,301,302,303,304,305,306,307,128,129,91,90,513,514,212,512,517,516,515,213],[0,20,13,19,158,273,266,259,159,261,278,271,462,463,464,465,466,467,468,469,470,471,472,473,1,59,14,41,168,325,318,311,169,313,330,323,551,550,553,552,556,557,554,555,561,560,559,558,29,31,32,33,280,288,289,290,284,291,292,293,450,415,440,429,454,431,420,445,458,447,436,425,53,63,36,35,300,364,365,366,304,367,368,369,563,562,565,564,568,569,566,567,573,572,571,570],[0,16],[0,18],[0,16,26,20],[0,2,23,13],[0,3,4,32],[0,2,29,15],[0,3,29,27],[0,52],[0,63],[0,52,26,59],[0,63,26,54],[0,52,16,1],[0,18,1,61],[0,52,16,1,26,59,20,65],[0,31,1,63],[0,1,24,62],[0,15,1,9],[0,5,1,8],[0,31,1,63,26,21,65,54],[0,2,57,56],[0,60,3,16],[0,22,57,3],[0,2,28,20],[0,17,13,24],[0,20,19,13,4,24,17,27],[0,22,57,3,4,16,60,32],[0,22,57,3,23,20,30,12,26,24,33,15,4,16,60,32],[0,22,57,3,29,18,27,25],[0,22,3,57,1,55,10,37],[0,22,385,396,3,57,109,117],[0,22,57,3,159,279,654,655,158,274,656,657,29,18,25,27,284,658,262,269,280,659,257,267]],QT={"P 1":0,"P -1":1,"P 1 2 1":2,"P 1 21 1":3,"C 1 2 1":4,"P 1 m 1":5,"P 1 c 1":6,"C 1 m 1":7,"C 1 c 1":8,"P 1 2/m 1":9,"P 1 21/m 1":10,"C 1 2/m 1":11,"P 1 2/c 1":12,"P 1 21/c 1":13,"C 1 2/c 1":14,"P 2 2 2":15,"P 2 2 21":16,"P 21 21 2":17,"P 21 21 21":18,"C 2 2 21":19,"C 2 2 2":20,"F 2 2 2":21,"I 2 2 2":22,"I 21 21 21":23,"P m m 2":24,"P m c 21":25,"P c c 2":26,"P m a 2":27,"P c a 21":28,"P n c 2":29,"P m n 21":30,"P b a 2":31,"P n a 21":32,"P n n 2":33,"C m m 2":34,"C m c 21":35,"C c c 2":36,"A m m 2":37,"A b m 2":38,"A m a 2":39,"A b a 2":40,"F m m 2":41,"F d d 2":42,"I m m 2":43,"I b a 2":44,"I m a 2":45,"P 2/m 2/m 2/m":46,"P m m m":46,"P 2/n 2/n 2/n":47,"P n n n":47,"P 2/c 2/c 2/m":48,"P c c m":48,"P 2/b 2/a 2/n":49,"P b a n":49,"P 21/m 2/m 2/a":50,"P m m a":50,"P 2/n 21/n 2/a":51,"P n n a":51,"P 2/m 2/n 21/a":52,"P m n a":52,"P 21/c 2/c 2/a":53,"P c c a":53,"P 21/b 21/a 2/m":54,"P b a m":54,"P 21/c 21/c 2/n":55,"P c c n":55,"P 2/b 21/c 21/m":56,"P b c m":56,"P 21/n 21/n 2/m":57,"P n n m":57,"P 21/m 21/m 2/n":58,"P m m n":58,"P 21/b 2/c 21/n":59,"P b c n":59,"P 21/b 21/c 21/a":60,"P b c a":60,"P 21/n 21/m 21/a":61,"P n m a":61,"C 2/m 2/c 21/m":62,"C m c m":62,"C 2/m 2/c 21/a":63,"C m c a":63,"C 2/m 2/m 2/m":64,"C m m m":64,"C 2/c 2/c 2/m":65,"C c c m":65,"C 2/m 2/m 2/a":66,"C m m a":66,"C 2/c 2/c 2/a":67,"C c c a":67,"F 2/m 2/m 2/m":68,"F m m m":68,"F 2/d 2/d 2/d":69,"F d d d":69,"I 2/m 2/m 2/m":70,"I m m m":70,"I 2/b 2/a 2/m":71,"I b a m":71,"I 21/b 21/c 21/a":72,"I b c a":72,"I 21/m 21/m 21/a":73,"I m m a":73,"P 4":74,"P 41":75,"P 42":76,"P 43":77,"I 4":78,"I 41":79,"P -4":80,"I -4":81,"P 4/m":82,"P 42/m":83,"P 4/n":84,"P 42/n":85,"I 4/m":86,"I 41/a":87,"P 4 2 2":88,"P 4 21 2":89,"P 41 2 2":90,"P 41 21 2":91,"P 42 2 2":92,"P 42 21 2":93,"P 43 2 2":94,"P 43 21 2":95,"I 4 2 2":96,"I 41 2 2":97,"P 4 m m":98,"P 4 b m":99,"P 42 c m":100,"P 42 n m":101,"P 4 c c":102,"P 4 n c":103,"P 42 m c":104,"P 42 b c":105,"I 4 m m":106,"I 4 c m":107,"I 41 m d":108,"I 41 c d":109,"P -4 2 m":110,"P -4 2 c":111,"P -4 21 m":112,"P -4 21 c":113,"P -4 m 2":114,"P -4 c 2":115,"P -4 b 2":116,"P -4 n 2":117,"I -4 m 2":118,"I -4 c 2":119,"I -4 2 m":120,"I -4 2 d":121,"P 4/m 2/m 2/m":122,"P4/m m m":122,"P 4/m 2/c 2/c":123,"P4/m c c":123,"P 4/n 2/b 2/m":124,"P4/n b m":124,"P 4/n 2/n 2/c":125,"P4/n n c":125,"P 4/m 21/b 2/m":126,"P4/m b m":126,"P 4/m 21/n 2/c":127,"P4/m n c":127,"P 4/n 21/m 2/m":128,"P4/n m m":128,"P 4/n 2/c 2/c":129,"P4/n c c":129,"P 42/m 2/m 2/c":130,"P42/m m c":130,"P 42/m 2/c 2/m":131,"P42/m c m":131,"P 42/n 2/b 2/c":132,"P42/n b c":132,"P 42/n 2/n 2/m":133,"P42/n n m":133,"P 42/m 21/b 2/c":134,"P42/m b c":134,"P 42/m 21/n 2/m":135,"P42/m n m":135,"P 42/n 21/m 2/c":136,"P42/n m c":136,"P 42/n 21/c 2/m":137,"P42/n c m":137,"I 4/m 2/m 2/m":138,"I4/m m m":138,"I 4/m 2/c 2/m":139,"I4/m c m":139,"I 41/a 2/m 2/d":140,"I41/a m d":140,"I 41/a 2/c 2/d":141,"I41/a c d":141,"P 3":142,"P 31":143,"P 32":144,"H 3":145,"R 3":146,"P -3":147,"H -3":148,"R -3":149,"P 3 1 2":150,"P 3 2 1":151,"P 31 1 2":152,"P 31 2 1":153,"P 32 1 2":154,"P 32 2 1":155,"H 3 2":156,"R 3 2":157,"P 3 m 1":158,"P 3 1 m":159,"P 3 c 1":160,"P 3 1 c":161,"H 3 m":162,"R 3 m":163,"H 3 c":164,"R 3 c":165,"P -3 1 2/m":166,"P -3 1 m":166,"P -3 1 2/c":167,"P -3 1 c":167,"P -3 2/m 1":168,"P -3 m 1":168,"P -3 2/c 1":169,"P -3 c 1":169,"H -3 2/m":170,"H -3 m":170,"R -3 2/m":171,"R -3 m":171,"H -3 2/c":172,"H -3 c":172,"R -3 2/c":173,"R -3 c":173,"P 6":174,"P 61":175,"P 65":176,"P 62":177,"P 64":178,"P 63":179,"P -6":180,"P 6/m":181,"P 63/m":182,"P 6 2 2":183,"P 61 2 2":184,"P 65 2 2":185,"P 62 2 2":186,"P 64 2 2":187,"P 63 2 2":188,"P 6 m m":189,"P 6 c c":190,"P 63 c m":191,"P 63 m c":192,"P -6 m 2":193,"P -6 c 2":194,"P -6 2 m":195,"P -6 2 c":196,"P 6/m 2/m 2/m":197,"P 6/m m m":197,"P 6/m 2/c 2/c":198,"P 6/m c c":198,"P 63/m 2/c 2/m":199,"P 63/m c m":199,"P 63/m 2/m 2/c":200,"P 63/m m c":200,"P 2 3":201,"F 2 3":202,"I 2 3":203,"P 21 3":204,"I 21 3":205,"P 2/m -3":206,"P m -3":206,"P 2/n -3":207,"P n -3":207,"F 2/m -3":208,"F m -3":208,"F 2/d -3":209,"F d -3":209,"I 2/m -3":210,"I m -3":210,"P 21/a -3":211,"P a -3":211,"I 21/a -3":212,"I a -3":212,"P 4 3 2":213,"P 42 3 2":214,"F 4 3 2":215,"F 41 3 2":216,"I 4 3 2":217,"P 43 3 2":218,"P 41 3 2":219,"I 41 3 2":220,"P -4 3 m":221,"F -4 3 m":222,"I -4 3 m":223,"P -4 3 n":224,"F -4 3 c":225,"I -4 3 d":226,"P 4/m -3 2/m":227,"P m -3 m":227,"P 4/n -3 2/n":228,"P n -3 n":228,"P 42/m -3 2/n":229,"P m -3 n":229,"P 42/n -3 2/m":230,"P n -3 m":230,"F 4/m -3 2/m":231,"F m -3 m":231,"F 4/m -3 2/c":232,"F m -3 c":232,"F 41/d -3 2/m":233,"F d -3 m":233,"F 41/d -3 2/c":234,"F d -3 c":234,"I 4/m -3 2/m":235,"I m -3 m":235,"I 41/a -3 2/d":236,"I a -3 d":236,"P 1 1 2":237,"P 1 1 21":238,"B 1 1 2":239,"B 2":239,"A 1 2 1":240,"C 1 21 1":241,"I 1 2 1":242,"I 2":242,"I 1 21 1":243,"P 1 1 m":244,"P 1 1 b":245,"B 1 1 m":246,"B 1 1 b":247,"P 1 1 2/m":248,"P 1 1 21/m":249,"B 1 1 2/m":250,"P 1 1 2/b":251,"P 1 1 21/b":252,"P 1 21/n 1":253,"P 1 21/a 1":254,"B 1 1 2/b":255,"P 21 2 2":256,"P 2 21 2":257,"P 21 21 2 (a)":258,"P 21 2 21":259,"P 2 21 21":260,"C 2 2 21a)":261,"C 2 2 2a":262,"F 2 2 2a":263,"I 2 2 2a":264,"P 21/m 21/m 2/n a":265,"P 42 21 2a":266,"I 2 3a":267};function MT(e){if(e<146)return e+1;if(146===e)return 1146;if(e<149)return e+1-1;if(149===e)return 1148;if(e<157)return e+1-2;if(157===e)return 1155;if(e<163)return e+1-3;if(163===e)return 1160;if(e<165)return e+1-4;if(165===e)return 1161;if(e<171)return e+1-5;if(171===e)return 1166;if(e<173)return e+1-6;if(173===e)return 1167;if(e<237)return e+1-7;if(237===e)return 1003;if(238===e)return 1004;if(239===e)return 1005;if(240===e)return 2005;if(241===e)return 3005;if(242===e)return 4005;if(243===e)return 5005;if(244===e)return 1006;if(245===e)return 1007;if(246===e)return 1008;if(247===e)return 1009;if(248===e)return 1010;if(249===e)return 1011;if(250===e)return 1012;if(251===e)return 1013;if(252===e)return 1014;if(253===e)return 2014;if(254===e)return 3014;if(255===e)return 1015;if(256===e)return 1017;if(257===e)return 2017;if(258===e)return 1018;if(259===e)return 2018;if(260===e)return 3018;if(261===e)return 1020;if(262===e)return 1021;if(263===e)return 1022;if(264===e)return 1023;if(265===e)return 1059;if(266===e)return 1094;if(267===e)return 1197;throw new Error(`unknown spacegroup index '${e}'`)}const RT=function(){const e=Object.create(null);for(const t of Object.keys(QT))e[QT[t]]=t;return e}(),PT=function(){const e=Object.create(null);for(const t of Object.keys(QT)){const n=QT[t];e[n]=MT(n)}return e}();var OT,FT,NT,LT;function UT(){return UT.empty()}function GT(e,t,n,r){r=e[t],e[t]=e[n],e[n]=r}function jT(e,t){return(e=Math.abs(e))>(t=Math.abs(t))?(t/=e,e*Math.sqrt(1+t*t)):t>0?(e/=t,t*Math.sqrt(1+e*e)):0}!function(e){function t(t,n,r){const o=function(e){const t="number"===typeof e?function(e){switch(e){case 1146:return 146;case 1148:return 149;case 1155:return 157;case 1160:return 163;case 1161:return 165;case 1166:return 171;case 1167:return 173;case 1003:return 237;case 1004:return 238;case 1005:return 239;case 2005:return 240;case 3005:return 241;case 4005:return 242;case 5005:return 243;case 1006:return 244;case 1007:return 245;case 1008:return 246;case 1009:return 247;case 1010:return 248;case 1011:return 249;case 1012:return 250;case 1013:return 251;case 1014:return 252;case 2014:return 253;case 3014:return 254;case 1015:return 255;case 1017:return 256;case 2017:return 257;case 1018:return 258;case 2018:return 259;case 3018:return 260;case 1020:return 261;case 1021:return 262;case 1022:return 263;case 1023:return 264;case 1059:return 265;case 1094:return 266;case 1197:return 267}let t=0;return e>146&&++t,e>148&&++t,e>155&&++t,e>160&&++t,e>161&&++t,e>166&&++t,e>167&&++t,e-1+t}(e):QT[e];return"undefined"===typeof t||"undefined"===typeof RT[t]?-1:t}(t);if(o<0)return console.warn(`Unknown spacegroup '${t}', returning a 'P 1' with cellsize [1, 1, 1]`),e.Zero;const i=n[0]*n[1]*n[2],a=r[0],s=r[1],l=r[2],c=n[0],u=n[1],d=n[2],A=Math.cos(s),f=(Math.cos(a)-Math.cos(s)*Math.cos(l))/Math.sin(l),p=Math.sqrt(1-A*A-f*f),h=[c,0,0],g=[Math.cos(l)*u,Math.sin(l)*u,0],m=[A*d,f*d,p*d],y=Yh.ofRows([[h[0],g[0],m[0],0],[0,g[1],m[1],0],[0,0,m[2],0],[0,0,0,1]]);return{index:o,size:n,volume:i,anglesInRadians:r,toFractional:Yh.invert(Yh.zero(),y),fromFractional:y}}e.Zero=t("P 1",qh.create(1,1,1),qh.create(Math.PI/2,Math.PI/2,Math.PI/2)),e.isZero=function(e){return!e||0===e.index&&1===e.size[0]&&1===e.size[1]&&1===e.size[1]},e.create=t}(OT||(OT={})),function(e){function t(e){const t=kT[e.index].map((e=>function(e){const t=DT[e[0]],n=DT[e[1]],r=DT[e[2]];return Yh.ofRows([t,n,r,[0,0,0,1]])}(TT[e])));return{name:RT[e.index],num:PT[e.index],cell:e,operators:t}}e.ZeroP1=t(OT.Zero),e.create=t;const n=qh(),r=Yh();function o(e,t,o,i,a,s){return qh.set(n,o,i,a),Yh.fromTranslation(r,n),Yh.mul(s,Yh.mul(s,Yh.mul(s,e.cell.fromFractional,r),e.operators[t]),e.cell.toFractional)}e.setOperatorMatrix=o,e.getSymmetryOperator=function(e,t,n,r,i){const a=o(e,t,n,r,i,Yh.zero());return _T.create(`${t+1}_${5+n}${5+r}${5+i}`,a,{hkl:qh.create(n,r,i),spgrOp:t})};const i=qh(),a=qh(),s=qh(),l=qh();function c(e,t,n){const r=[];if(e>0?r.push("+X"):e<0&&r.push("-X"),t>0?r.push("+Y"):t<0&&r.push("-Y"),n>0?r.push("+Z"):n<0&&r.push("-Z"),1===r.length)return"+"===r[0].charAt(0)?r[0].substr(1):r[0];if(2===r.length){const e=r[0].charAt(0),t=r[1].charAt(0);if("+"===e)return`${r[0].substr(1)}${r[1]}`;if("+"===t)return`${r[1].substr(1)}${r[0]}`}throw new Error(`unknown rotation '${r}', ${e} ${t} ${n}`)}function u(e){switch(e){case.5:return"1/2";case 1/4:return"1/4";case 3/4:return"3/4";case 1/3:return"1/3";case 2/3:return"2/3";case 1/6:return"1/6";case 5/6:return"5/6"}return""}function d(e,t){return""===t?e:e.length>2?`${e}+${t}`:"-"===e.charAt(0)?`${t}${e}`:`${t}+${e}`}e.getSymmetryOperatorRef=function(e,t,r,o,c,u){const d=Yh.zero();qh.set(n,r,o,c),qh.floor(i,u),Yh.copy(d,e.operators[t]),qh.floor(a,qh.transformMat4(a,u,d)),Yh.getTranslation(l,d),qh.sub(l,l,a),qh.add(l,l,i),qh.add(l,l,n),Yh.setTranslation(d,l),Yh.mul(d,e.cell.fromFractional,d),Yh.mul(d,d,e.cell.toFractional),qh.sub(s,a,i);const A=r-s[0],f=o-s[1],p=c-s[2];return _T.create(`${t+1}_${5+A}${5+f}${5+p}`,d,{hkl:qh.create(A,f,p),spgrOp:t})},e.getOperatorXyz=function(e){return[d(c(e[0],e[4],e[8]),u(e[12])),d(c(e[1],e[5],e[9]),u(e[13])),d(c(e[2],e[6],e[10]),u(e[14]))].join(",")}}(FT||(FT={})),function(e){e.add=function(e,t,n){e.squaredDistances[e.count]=n,e.indices[e.count++]=t},e.reset=function(e){e.count=0},e.create=function(){return{count:0,indices:[],squaredDistances:[]}},e.copy=function(e,t){for(let n=0;n<t.count;++n)e.indices[n]=t.indices[n],e.squaredDistances[n]=t.squaredDistances[n];return e.count=t.count,e}}(NT||(NT={})),function(e){function t(){return{origin:qh(),dirA:qh(),dirB:qh(),dirC:qh()}}function n(e,t){return qh.copy(e.origin,t.origin),qh.copy(e.dirA,t.dirA),qh.copy(e.dirB,t.dirB),qh.copy(e.dirC,t.dirC),e}function r(e,t){return qh.set(e,2*qh.magnitude(t.dirA),2*qh.magnitude(t.dirB),2*qh.magnitude(t.dirC))}e.create=function(e,t,n,r){return{origin:e,dirA:t,dirB:n,dirC:r}},e.empty=t,e.copy=n,e.clone=function(e){return n(t(),e)},e.size=r;const o=qh();e.volume=function(e){return r(o,e),o[0]*o[1]*o[2]},e.normalize=function(e,t){return qh.copy(e.origin,t.origin),qh.normalize(e.dirA,t.dirA),qh.normalize(e.dirB,t.dirB),qh.normalize(e.dirC,t.dirC),e};const i=Xh();e.transform=function(e,t,n){qh.transformMat4(e.origin,t.origin,n);const r=Xh.directionTransform(i,n);return qh.transformMat3(e.dirA,t.dirA,r),qh.transformMat3(e.dirB,t.dirB,r),qh.transformMat3(e.dirC,t.dirC,r),e},e.scale=function(e,t,n){return qh.scale(e.dirA,t.dirA,n),qh.scale(e.dirB,t.dirB,n),qh.scale(e.dirC,t.dirC,n),e}}(UT||(UT={})),function(e){e.create=function(e,t){const n=e*t;return{data:new(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float32Array)(n),size:n,cols:e,rows:t}},e.get=function(e,t,n){return e.data[e.rows*n+t]},e.set=function(e,t,n,r){return e.data[e.rows*n+t]=r,e},e.add=function(e,t,n,r){return e.data[e.rows*n+t]+=r,e},e.makeZero=function(e){return e.data.fill(0),e},e.clone=function(e){return{data:e.data.slice(),size:e.size,cols:e.cols,rows:e.rows}},e.fromArray=function(e,t,n){return{data:e,size:t*n,cols:t,rows:n}},e.transpose=function(e,t){if(e.cols!==t.rows||e.rows!==t.cols)throw new Error("transpose: matrix dimensions incompatible");if(e.data===t.data)throw new Error("transpose: matrices share memory");const n=t.rows,r=t.cols,o=t.data,i=e.data;for(let a=0,s=0,l=0;a<n;l+=1,s+=r,++a){let e=l;for(let t=0;t<r;e+=n,t++)i[e]=o[s+t]}return e},e.multiplyABt=function(e,t,n){const r=t.cols,o=t.rows,i=n.rows,a=t.data,s=n.data,l=e.data;for(let c=0,u=0,d=0;c<o;u+=r,c++)for(let e=0,t=0;t<i;d++,t++){let t=0,n=u;for(let o=0;o<r;n++,e++,o++)t+=a[n]*s[e];l[d]=t}return e},e.meanRows=function(e){const t=e.rows,n=e.cols,r=e.data,o=new Array(n);for(let i=0;i<n;++i)o[i]=0;for(let i=0,a=0;i<t;++i)for(let e=0;e<n;++e,++a)o[e]+=r[a];for(let i=0;i<n;++i)o[i]/=t;return o},e.subRows=function(e,t){const n=e.rows,r=e.cols,o=e.data;for(let i=0,a=0;i<n;++i)for(let e=0;e<r;++e,++a)o[a]-=t[e];return e}}(LT||(LT={}));const zT=1.192092896e-7,HT=1e-37;function VT(e,t,n,r){let o=0,i=0;const a=e.rows,s=e.cols;let l=a,c=s;l<c&&(o=1,i=l,l=c,c=i);const u=LT.create(l,l),d=LT.create(1,c),A=LT.create(c,c);if(0===o)LT.transpose(u,e);else{for(i=0;i<s*a;i++)u.data[i]=e.data[i];for(;i<c*l;i++)u.data[i]=0}if(function(e,t,n,r,o,i,a,s){const l=2*zT,c=HT;let u=0,d=0,A=0,f=0;const p=Math.max(i,30);let h=0,g=0,m=0,y=0,v=0,b=0,C=0,I=0,E=0,x=0,B=0,w=0,_=0,S=0,D=0,T=0,k=0,Q=4660,M=0,R=0,P=0;const O=new Float64Array(a<<3);for(;u<a;u++){for(A=0,B=0;A<i;A++)I=e[u*t+A],B+=I*I;if(O[u]=B,r){for(A=0;A<a;A++)r[u*o+A]=0;r[u*o+u]=1}}for(;f<p;f++){for(v=0,u=0;u<a-1;u++)for(d=u+1;d<a;d++){for(h=u*t|0,g=d*t|0,D=O[u],T=0,k=O[d],A=2,T+=e[h]*e[g],T+=e[h+1]*e[g+1];A<i;A++)T+=e[h+A]*e[g+A];if(!(Math.abs(T)<=l*Math.sqrt(D*k))){for(T*=2,w=D-k,_=jT(T,w),w<0?(S=.5*(_-w),C=Math.sqrt(S/_),b=T/(_*C*2)):(b=Math.sqrt((_+w)/(2*_)),C=T/(_*b*2)),D=0,k=0,A=2,E=b*e[h]+C*e[g],x=-C*e[h]+b*e[g],e[h]=E,e[g]=x,D+=E*E,k+=x*x,E=b*e[h+1]+C*e[g+1],x=-C*e[h+1]+b*e[g+1],e[h+1]=E,e[g+1]=x,D+=E*E,k+=x*x;A<i;A++)E=b*e[h+A]+C*e[g+A],x=-C*e[h+A]+b*e[g+A],e[h+A]=E,e[g+A]=x,D+=E*E,k+=x*x;if(O[u]=D,O[d]=k,v=1,r)for(m=u*o|0,y=d*o|0,A=2,E=b*r[m]+C*r[y],x=-C*r[m]+b*r[y],r[m]=E,r[y]=x,E=b*r[m+1]+C*r[y+1],x=-C*r[m+1]+b*r[y+1],r[m+1]=E,r[y+1]=x;A<a;A++)E=b*r[m+A]+C*r[y+A],x=-C*r[m+A]+b*r[y+A],r[m+A]=E,r[y+A]=x}}if(0===v)break}for(u=0;u<a;u++){for(A=0,B=0;A<i;A++)I=e[u*t+A],B+=I*I;O[u]=Math.sqrt(B)}for(u=0;u<a-1;u++){for(d=u,A=u+1;A<a;A++)O[d]<O[A]&&(d=A);if(u!==d&&(GT(O,u,d,B),r)){for(A=0;A<i;A++)GT(e,u*t+A,d*t+A,I);for(A=0;A<a;A++)GT(r,u*o+A,d*o+A,I)}}for(u=0;u<a;u++)n[u]=O[u];if(r)for(u=0;u<s;u++){for(B=u<a?O[u]:0;B<=c;){for(R=1/i,A=0;A<i;A++)Q=214013*Q+2531011,M=0!==(256&Q>>16)?R:-R,e[u*t+A]=M;for(f=0;f<2;f++)for(d=0;d<u;d++){for(B=0,A=0;A<i;A++)B+=e[u*t+A]*e[d*t+A];for(P=0,A=0;A<i;A++)I=e[u*t+A]-B*e[d*t+A],e[u*t+A]=I,P+=Math.abs(I);for(P=P?1/P:0,A=0;A<i;A++)e[u*t+A]*=P}for(B=0,A=0;A<i;A++)I=e[u*t+A],B+=I*I;B=Math.sqrt(B)}for(C=1/B,A=0;A<i;A++)e[u*t+A]*=C}}(u.data,l,d.data,A.data,c,l,c,l),t){for(i=0;i<c;i++)t.data[i]=d.data[i];for(;i<s;i++)t.data[i]=0}0===o?(n&&LT.transpose(n,u),r&&LT.transpose(r,A)):(n&&LT.transpose(n,A),r&&LT.transpose(r,u))}var qT;function YT(){return YT.zero()}function XT(){return XT.zero()}!function(e){function t(e){if(3===e.length)return UT.create(qh.fromArray(qh(),e,0),qh.create(1,0,0),qh.create(0,1,0),qh.create(0,0,1));const t=LT.fromArray(e,3,e.length/3),n=t.rows,r=n/3,o=LT.create(3,3),i=LT.create(1,3),a=LT.create(3,3),s=LT.create(3,3),l=LT.meanRows(t),c=LT.subRows(LT.clone(t),l),u=LT.transpose(LT.create(n,3),c);LT.multiplyABt(o,u,u),VT(o,i,a,s);const d=qh.create(l[0],l[1],l[2]),A=qh.create(a.data[0],a.data[3],a.data[6]),f=qh.create(a.data[1],a.data[4],a.data[7]),p=qh.create(a.data[2],a.data[5],a.data[8]);return qh.scale(A,A,Math.sqrt(i.data[0]/r)),qh.scale(f,f,Math.sqrt(i.data[1]/r)),qh.scale(p,p,Math.sqrt(i.data[2]/r)),UT.create(d,A,f,p)}function n(e){const t=UT.clone(e);return qh.magnitude(t.dirC)<zh&&qh.cross(t.dirC,t.dirA,t.dirB),UT.normalize(t,t)}e.ofPositions=function(e){const n=t(e);return{momentsAxes:n,boxAxes:o(e,n)}},e.calculateMomentsAxes=t,e.calculateNormalizedAxes=n;const r=qh();function o(e,t){if(3===e.length)return UT.clone(t);let o=-1/0,i=-1/0,a=-1/0,s=-1/0,l=-1/0,c=-1/0;const u=qh(),d=qh(),A=t.origin,f=n(t);for(let n=0,r=e.length;n<r;n+=3){qh.projectPointOnVector(u,qh.fromArray(u,e,n),f.dirA,A);const t=qh.dot(f.dirA,qh.normalize(d,qh.sub(d,u,A))),r=qh.distance(u,A);t>0?r>o&&(o=r):r>i&&(i=r),qh.projectPointOnVector(u,qh.fromArray(u,e,n),f.dirB,A);const p=qh.dot(f.dirB,qh.normalize(d,qh.sub(d,u,A))),h=qh.distance(u,A);p>0?h>a&&(a=h):h>s&&(s=h),qh.projectPointOnVector(u,qh.fromArray(u,e,n),f.dirC,A);const g=qh.dot(f.dirC,qh.normalize(d,qh.sub(d,u,A))),m=qh.distance(u,A);g>0?m>l&&(l=m):m>c&&(c=m)}const p=qh.setMagnitude(qh(),f.dirA,(o+i)/2),h=qh.setMagnitude(qh(),f.dirB,(a+s)/2),g=qh.setMagnitude(qh(),f.dirC,(l+c)/2),m=qh.isFinite(p),y=qh.isFinite(h),v=qh.isFinite(g),b=qh(),C=function(e,t,n){qh.copy(r,A),m&&qh.scaleAndAdd(r,r,f.dirA,e),y&&qh.scaleAndAdd(r,r,f.dirB,t),v&&qh.scaleAndAdd(r,r,f.dirC,n),qh.add(b,b,r)};return C(o,a,l),C(o,a,-c),C(o,-s,-c),C(o,-s,l),C(-i,-s,-c),C(-i,-s,l),C(-i,a,l),C(-i,a,-c),qh.scale(b,b,1/8),UT.create(b,p,h,g)}e.calculateBoxAxes=o}(qT||(qT={})),function(e){function t(e){return void 0!==e.extrema}function n(e,t){return{center:e,radius:t}}function r(e,t){return void 0!==e.extrema?(e.extrema.length=0,e.extrema.push(...t)):e.extrema=t,e}e.hasExtrema=t,e.create=n,e.zero=function(){return{center:qh(),radius:0}},e.clone=function(e){const r=n(qh.clone(e.center),e.radius);return t(e)&&(r.extrema=e.extrema.map((e=>qh.clone(e)))),r},e.set=function(e,t,n){return qh.copy(e.center,t),e.radius=n,e},e.copy=function(e,n){return qh.copy(e.center,n.center),e.radius=n.radius,t(n)&&r(e,n.extrema.map((e=>qh.clone(e)))),e},e.setExtrema=r,e.computeBounding=function(e){const{x:t,y:n,z:r,indices:o}=e;let i=0,a=0,s=0,l=0;const c=ey.size(o);for(let u=0;u<c;u++){const e=ey.getAt(o,u);i+=t[e],a+=n[e],s+=r[e]}c>0&&(i/=c,a/=c,s/=c);for(let u=0;u<c;u++){const e=ey.getAt(o,u),c=t[e]-i,d=n[e]-a,A=r[e]-s,f=c*c+d*d+A*A;f>l&&(l=f)}return{center:qh.create(i,a,s),radius:Math.sqrt(l)}},e.transform=function(e,n,o){return qh.transformMat4(e.center,n.center,o),e.radius=n.radius*Yh.getMaxScaleOnAxis(o),t(n)&&r(e,n.extrema.map((e=>qh.transformMat4(qh(),e,o)))),e},e.translate=function(e,n,o){return qh.add(e.center,n.center,o),t(n)&&r(e,n.extrema.map((e=>qh.add(qh(),e,o)))),e},e.toArray=function(e,t,n){return qh.toArray(e.center,t,n),t[n+3]=e.radius,t},e.fromArray=function(e,t,n){return qh.fromArray(e.center,t,n),e.radius=t[n+3],e},e.fromBox3D=function(t,n){return qh.scale(t.center,qh.add(t.center,n.max,n.min),.5),t.radius=qh.distance(t.center,n.max),e.setExtrema(t,[qh.create(n.min[0],n.min[1],n.min[2]),qh.create(n.max[0],n.max[1],n.max[2]),qh.create(n.max[0],n.min[1],n.min[2]),qh.create(n.min[0],n.max[1],n.max[2]),qh.create(n.min[0],n.min[1],n.max[2]),qh.create(n.max[0],n.min[1],n.max[2]),qh.create(n.max[0],n.max[1],n.min[2]),qh.create(n.min[0],n.max[1],n.min[2])]),t},e.fromAxes3D=function(e,t){return qh.copy(e.center,t.origin),e.radius=Math.max(qh.magnitude(t.dirA),qh.magnitude(t.dirB),qh.magnitude(t.dirC)),e};const o=qh();e.fromDimensionsAndTransform=function(t,n,r){const[i,a,s]=n,l=qh.create(0,0,0);qh.transformMat4(l,l,r);const c=qh.create(i,a,s);qh.transformMat4(c,c,r);const u=qh.create(i,0,0);qh.transformMat4(u,u,r);const d=qh.create(0,a,s);qh.transformMat4(d,d,r);const A=qh.create(0,0,s);qh.transformMat4(A,A,r);const f=qh.create(i,0,s);qh.transformMat4(f,f,r);const p=qh.create(i,a,0);qh.transformMat4(p,p,r);const h=qh.create(0,a,0);qh.transformMat4(h,h,r),qh.add(o,l,c),qh.scale(o,o,.5);const g=Math.max(qh.distance(l,c),qh.distance(u,d));return e.set(t,o,g/2),e.setExtrema(t,[l,c,u,d,A,f,p,h]),t};const i=qh();e.addVec3=function(t,n,r){return qh.distance(n.center,r)<n.radius?e.copy(t,n):(qh.sub(i,n.center,r),qh.sub(i,n.center,i),qh.setMagnitude(i,i,n.radius),qh.scale(t.center,qh.add(i,i,r),.5),t.radius=qh.distance(t.center,r),t)},e.expandBySphere=function(e,n,o){return qh.copy(e.center,n.center),e.radius=Math.max(n.radius,qh.distance(n.center,o.center)+o.radius),t(n)&&t(o)&&r(e,[...n.extrema.map((e=>qh.clone(e))),...o.extrema.map((e=>qh.clone(e)))]),e};const a=qh();e.expand=function(e,n,o){var i,s;if(qh.copy(e.center,n.center),e.radius=n.radius+o,n.radius<1e-12||(null!==(s=null===(i=n.extrema)||void 0===i?void 0:i.length)&&void 0!==s?s:0)<=1)return e.extrema=void 0,e;if(t(n)){const t=new Float32Array(3*n.extrema.length);for(let e=0;e<n.extrema.length;e++)qh.toArray(n.extrema[e],t,3*e);const i=qT.calculateMomentsAxes(t);UT.scale(i,UT.normalize(i,i),o),r(e,n.extrema.map((t=>{qh.normalize(a,qh.sub(a,t,n.center));const r=qh.clone(t),o=qh.dot(a,i.dirA)<0?-1:1;qh.scaleAndAdd(r,r,i.dirA,o);const s=qh.dot(a,i.dirB)<0?-1:1;qh.scaleAndAdd(r,r,i.dirB,s);const l=qh.dot(a,i.dirC)<0?-1:1;return qh.scaleAndAdd(r,r,i.dirC,l),qh.distance(e.center,r)>e.radius&&(n.extrema.length>=14&&qh.normalize(a,qh.sub(a,r,n.center)),qh.scaleAndAdd(r,e.center,a,e.radius)),r})))}return e},e.exactEquals=function(e,t){return e.radius===t.radius&&qh.exactEquals(e.center,t.center)},e.equals=function(e,t){const n=e.radius,r=t.radius;return Math.abs(n-r)<=zh*Math.max(1,Math.abs(n),Math.abs(r))&&qh.equals(e.center,t.center)},e.includes=function(e,n){if(t(n)){for(const t of n.extrema)if(qh.distance(e.center,t)>e.radius)return!1;return!0}return qh.distance(e.center,n.center)+n.radius<=e.radius},e.overlaps=function(e,t){return qh.distance(e.center,t.center)<=e.radius+t.radius},e.distance=function(e,t){return qh.distance(e.center,t.center)-e.radius+t.radius},e.distanceToVec=function(e,t){const{center:n,radius:r}=e;return qh.distance(t,n)-r}}(YT||(YT={})),function(e){function t(){return{min:qh(),max:qh()}}function n(e,t){return qh.copy(e.min,t.min),qh.copy(e.max,t.max),e}e.create=function(e,t){return{min:e,max:t}},e.zero=t,e.copy=n,e.clone=function(e){return n(t(),e)};const r=qh();function o(e,t){for(let n=0,r=t.length;n<r;n++)c(e,t[n]);return e}function i(e,t){return l(e),o(e,t),e}function a(e,t){return qh.sub(e,t.max,t.min)}e.fromSphere3D=function(e,t){return YT.hasExtrema(t)&&t.extrema.length>=14?i(e,t.extrema):(qh.set(r,t.radius,t.radius,t.radius),qh.sub(e.min,t.center,r),qh.add(e.max,t.center,r),e)},e.addVec3Array=o,e.fromVec3Array=i,e.addSphere3D=function(e,t){return YT.hasExtrema(t)&&t.extrema.length>=14?o(e,t.extrema):(c(e,qh.subScalar(r,t.center,t.radius)),c(e,qh.addScalar(r,t.center,t.radius)),e)},e.intersectsSphere3D=function(e,t){return qh.clamp(r,t.center,e.min,e.max),qh.squaredDistance(r,t.center)<=t.radius*t.radius},e.computeBounding=function(e){const t=qh.create(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),n=qh.create(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),{x:r,y:o,z:i,indices:a}=e;for(let s=0,l=ey.size(a);s<l;s++){const e=ey.getAt(a,s);t[0]=Math.min(r[e],t[0]),t[1]=Math.min(o[e],t[1]),t[2]=Math.min(i[e],t[2]),n[0]=Math.max(r[e],n[0]),n[1]=Math.max(o[e],n[1]),n[2]=Math.max(i[e],n[2])}return{min:t,max:n}},e.size=a;const s=qh();function l(e){return qh.set(e.min,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),qh.set(e.max,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),e}function c(e,t){return qh.min(e.min,e.min,t),qh.max(e.max,e.max,t),e}e.volume=function(e){return a(s,e),s[0]*s[1]*s[2]},e.setEmpty=l,e.add=c,e.expand=function(e,t,n){return qh.sub(e.min,t.min,n),qh.add(e.max,t.max,n),e},e.scale=function(e,t,n){return qh.scale(e.min,t.min,n),qh.scale(e.max,t.max,n),e};const u=qh();e.transform=function(e,t,n){const[r,o,i]=t.min,[a,s,d]=t.max;return l(e),c(e,qh.transformMat4(u,qh.set(u,r,o,i),n)),c(e,qh.transformMat4(u,qh.set(u,r,o,d),n)),c(e,qh.transformMat4(u,qh.set(u,r,s,i),n)),c(e,qh.transformMat4(u,qh.set(u,r,s,d),n)),c(e,qh.transformMat4(u,qh.set(u,a,o,i),n)),c(e,qh.transformMat4(u,qh.set(u,a,o,d),n)),c(e,qh.transformMat4(u,qh.set(u,a,s,i),n)),c(e,qh.transformMat4(u,qh.set(u,a,s,d),n)),e},e.containsVec3=function(e,t){return!(t[0]<e.min[0]||t[0]>e.max[0]||t[1]<e.min[1]||t[1]>e.max[1]||t[2]<e.min[2]||t[2]>e.max[2])},e.overlaps=function(e,t){return!(e.max[0]<t.min[0]||e.min[0]>t.max[0]||e.max[1]<t.min[1]||e.min[1]>t.max[1]||e.max[2]<t.min[2]||e.min[2]>t.max[2])},e.containsSphere3D=function(e,t){const n=t.center,r=t.radius;return!(n[0]-r<e.min[0]||n[0]+r>e.max[0]||n[1]-r<e.min[1]||n[1]+r>e.max[1]||n[2]-r<e.min[2]||n[2]+r>e.max[2])},e.nearestIntersectionWithRay=function(e,t,n,r){const[o,i,a]=t.min,[s,l,c]=t.max,[u,d,A]=n,f=1/r[0],p=1/r[1],h=1/r[2];let g,m,y,v,b,C;return f>=0?(g=(o-u)*f,m=(s-u)*f):(g=(s-u)*f,m=(o-u)*f),p>=0?(y=(i-d)*p,v=(l-d)*p):(y=(l-d)*p,v=(i-d)*p),h>=0?(b=(a-A)*h,C=(c-A)*h):(b=(c-A)*h,C=(a-A)*h),y>g&&(g=y),v<m&&(m=v),b>g&&(g=b),C<m&&(m=C),qh.scale(e,r,g),qh.set(e,e[0]+u,e[1]+d,e[2]+A)}}(XT||(XT={}));class WT{constructor(e,t){this.parent=null,this.child=null,this.degree=0,this.isMarked=!1,this.key=e,this.value=t,this.prev=this,this.next=this}}const KT=new class{constructor(e){if(this._index=-1,this._items=[],this._len=0,e){let t=e,n=0;do{this._items[n++]=t,t=t.next}while(e!==t);this._len=n}}hasNext(){return this._index<this._len-1}next(){return this._items[++this._index]}reset(e){this._index=-1,this._len=0;let t=e,n=0;do{this._items[n++]=t,t=t.next}while(e!==t);this._len=n}};class JT{constructor(e){this._minNode=null,this._nodeCount=0,this._compare=e||this._defaultCompare}clear(){this._minNode=null,this._nodeCount=0}decreaseKey(e,t){if(!e)throw new Error("Cannot decrease key of non-existent node");if(this._compare({key:t},{key:e.key})>0)throw new Error("New key is larger than old key");e.key=t;const n=e.parent;n&&this._compare(e,n)<0&&(this._cut(e,n,this._minNode),this._cascadingCut(n,this._minNode)),this._compare(e,this._minNode)<0&&(this._minNode=e)}delete(e){const t=e.parent;t&&(this._cut(e,t,this._minNode),this._cascadingCut(t,this._minNode)),this._minNode=e,this.extractMinimum()}extractMinimum(){const e=this._minNode;if(e){if(e.child){let t=e.child;do{t.parent=null,t=t.next}while(t!==e.child)}let t=null;e.next!==e&&(t=e.next),this._removeNodeFromList(e),this._nodeCount--,this._minNode=this._mergeLists(t,e.child),this._minNode&&(this._minNode=this._consolidate(this._minNode))}return e}findMinimum(){return this._minNode}insert(e,t){const n=new WT(e,t);return this._minNode=this._mergeLists(this._minNode,n),this._nodeCount++,n}isEmpty(){return null===this._minNode}size(){return null===this._minNode?0:this._getNodeListSize(this._minNode)}union(e){this._minNode=this._mergeLists(this._minNode,e._minNode),this._nodeCount+=e._nodeCount}_defaultCompare(e,t){return e.key>t.key?1:e.key<t.key?-1:0}_cut(e,t,n){e.parent=null,t.degree--,e.next===e?t.child=null:t.child=e.next,this._removeNodeFromList(e);const r=this._mergeLists(n,e);return e.isMarked=!1,r}_cascadingCut(e,t){const n=e.parent;return n&&(e.isMarked?(t=this._cut(e,n,t),t=this._cascadingCut(n,t)):e.isMarked=!0),t}_consolidate(e){const t=[];for(KT.reset(e);KT.hasNext();){let e=KT.next(),n=t[e.degree];for(;n;){if(this._compare(e,n)>0){const t=e;e=n,n=t}this._linkHeaps(n,e),t[e.degree]=null,e.degree++,n=t[e.degree]}t[e.degree]=e}let n=null;for(let r=0;r<t.length;r++){const e=t[r];e&&(e.next=e,e.prev=e,n=this._mergeLists(n,e))}return n}_removeNodeFromList(e){const t=e.prev,n=e.next;t.next=n,n.prev=t,e.next=e,e.prev=e}_linkHeaps(e,t){this._removeNodeFromList(e),t.child=this._mergeLists(e,t.child),e.parent=t,e.isMarked=!1}_mergeLists(e,t){if(!e)return t||null;if(!t)return e;const n=e.next;return e.next=t.next,e.next.prev=e,t.next=n,t.next.prev=t,this._compare(e,t)<0?e:t}_getNodeListSize(e){let t=0,n=e;do{t++,n.child&&(t+=this._getNodeListSize(n.child)),n=n.next}while(n!==e);return t}}function ZT(e,t,n){return new $T(e,t,n)}class $T{find(e,t,n,r,o){this.ctx.x=e,this.ctx.y=t,this.ctx.z=n,this.ctx.radius=r,this.ctx.isCheck=!1;const i=null!==o&&void 0!==o?o:this.result;return ek(this.ctx,i),i}nearest(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;this.ctx.x=e,this.ctx.y=t,this.ctx.z=n,this.ctx.k=r,this.ctx.stopIf=o;const a=null!==i&&void 0!==i?i:this.result;return function(e,t){const{min:n,expandedBox:r,boundingSphere:{center:o},size:[i,a,s],bucketOffset:l,bucketCounts:c,bucketArray:u,grid:d,data:{x:A,y:f,z:p,indices:h,radius:g},delta:m,maxRadius:y}=e.grid,{x:v,y:b,z:C,k:I,stopIf:E}=e,x=ey.size(h);if(NT.reset(t),0===x||I<=0)return!1;let B,w,_,S,D=!1,T=1,k=!0,Q=0,M=ik,R=ak,P=0,O=!0,F=!1;const N=sk,L=y*y;M.length=0,N.length=0,rk.clear(),lk.clear(),qh.set(nk,v,b,C),XT.containsVec3(r,nk)?(B=Math.floor((v-n[0])/m[0]),w=Math.floor((b-n[1])/m[1]),_=Math.floor((C-n[2])/m[2])):(XT.nearestIntersectionWithRay(nk,r,nk,qh.normalize(tk,qh.sub(tk,o,nk))),B=Math.max(0,Math.min(i-1,Math.floor((nk[0]-n[0])/m[0]))),w=Math.max(0,Math.min(a-1,Math.floor((nk[1]-n[1])/m[1]))),_=Math.max(0,Math.min(s-1,Math.floor((nk[2]-n[2])/m[2]))));const U=0!==y?Math.max(1,Math.min(i-1,Math.ceil(y/m[0]))):1,G=0!==y?Math.max(1,Math.min(a-1,Math.ceil(y/m[1]))):1,j=0!==y?Math.max(1,Math.min(s-1,Math.ceil(y/m[2]))):1;M.push(B,w,_,(B*a+w)*s+_);for(;t.count<x;){const e=4*T;for(let t=0;t<e;t+=4)if(S=M[t+3],!rk.has(S)){rk.add(S),F=rk.size>=d.length;const e=d[S];if(0!==e){const t=P,n=e-1,r=l[n],o=r+c[n];for(let e=r;e<o;e++){const t=u[e],n=ey.getAt(h,t),r=A[n]-v,o=f[n]-b,i=p[n]-C;let a=r*r+o*o+i*i;if(0!==y){const e=g[n];a-=e*e}O&&a>P&&(P=a),lk.insert(a,t)}t<P&&(O=!1)}}R.length=0,Q=0,ok.clear();for(let t=0;t<e;t+=4){B=M[t],w=M[t+1],_=M[t+2];for(let e=-U;e<=U;e++){const t=B+e;if(!(t<0||t>=i))for(let e=-G;e<=G;e++){const r=w+e;if(!(r<0||r>=a))for(let e=-j;e<=j;e++){const o=_+e;if(!(o<0||o>=s)&&(S=(t*a+r)*s+o,!ok.has(S)&&(ok.add(S),!rk.has(S)))){if(!k){const e=n[0]+t*m[0]-v,i=n[1]+r*m[1]-b,a=n[2]+o*m[2]-C;if(e*e+i*i+a*a-L>P){N.push(t,r,o,S);continue}}R.push(t,r,o,S),Q++}}}}}if(k=!1,0===Q){if(1===I){const e=lk.findMinimum();if(e){const{key:n,value:r}=e;return NT.add(t,r,n),!0}}else for(;!lk.isEmpty()&&(F||lk.findMinimum().key<=P)&&t.count<I;){const e=lk.extractMinimum(),n=e.key,r=e.value;NT.add(t,r,n),E&&!D&&(D=E(r,n))}if(t.count>=I||D||t.count>=x)return t.count>0;if(k=!0,O=!0,N.length>0){for(let e=0,t=N.length;e<t;e++)M.push(N[e]);N.length=0,T=M.length}}else{const e=M;M=R,R=e,T=Q}}t.count}(this.ctx,a),a}check(e,t,n,r){return this.ctx.x=e,this.ctx.y=t,this.ctx.z=n,this.ctx.radius=r,this.ctx.isCheck=!0,ek(this.ctx,this.result)}constructor(e,t,n){const r=function(e,t,n){const r=XT.expand(XT(),t.box,qh.create(.5,.5,.5)),{indices:o}=e,i=XT.size(qh(),r);let a,s;const l=ey.size(o),c="number"===typeof n?n:32,u=Array.isArray(n)&&n;if(u&&!qh.isZero(u))s=[Math.ceil(i[0]/u[0]),Math.ceil(i[1]/u[1]),Math.ceil(i[2]/u[2])],a=u;else if(l>0){const e=Math.ceil(l/c),t=Math.pow(e/(i[0]*i[1]*i[2]),1/3);s=[Math.ceil(i[0]*t),Math.ceil(i[1]*t),Math.ceil(i[2]*t)],a=[i[0]/s[0],i[1]/s[1],i[2]/s[2]]}else a=i,s=[1,1,1];const d={x:e.x,y:e.y,z:e.z,indices:o,radius:e.radius},A={size:s,data:d,expandedBox:r,boundingBox:t.box,boundingSphere:t.sphere,elementCount:l,delta:a};return function(e){const{expandedBox:t,size:[n,r,o],data:{x:i,y:a,z:s,radius:l,indices:c},elementCount:u,delta:d}=e,A=n*r*o,{min:[f,p,h]}=t;let g=0,m=0;const y=new Uint32Array(A),v=new Int32Array(u);for(let x=0;x<u;x++){const e=ey.getAt(c,x),t=(Math.floor((i[e]-f)/d[0])*r+Math.floor((a[e]-p)/d[1]))*o+Math.floor((s[e]-h)/d[2]);1===(y[t]+=1)&&(m+=1),v[x]=t}if(l)for(let x=0;x<u;x++){const e=ey.getAt(c,x);l[e]>g&&(g=l[e])}const b=new Int32Array(m);for(let x=0,B=0;x<A;x++){const e=y[x];e>0&&(y[x]=B+1,b[B]=e,B+=1)}const C=new Uint32Array(m);for(let x=1;x<m;++x)C[x]+=C[x-1]+b[x-1];const I=new Int32Array(m),E=new Int32Array(u);for(let x=0;x<u;x++){const e=y[v[x]];if(e>0){const t=e-1;E[C[t]+I[t]]=x,I[t]+=1}}return{size:e.size,bucketArray:E,bucketCounts:b,bucketOffset:C,grid:y,delta:d,min:e.expandedBox.min,data:e.data,maxRadius:g,expandedBox:e.expandedBox,boundingBox:e.boundingBox,boundingSphere:e.boundingSphere}}(A)}(e,t,n);this.ctx=function(e){return{grid:e,x:.1,y:.1,z:.1,k:1,stopIf:void 0,radius:.1,isCheck:!1}}(r),this.boundary={box:r.boundingBox,sphere:r.boundingSphere},this.buckets={offset:r.bucketOffset,count:r.bucketCounts,array:r.bucketArray},this.result=NT.create()}}function ek(e,t){const{min:n,size:[r,o,i],bucketOffset:a,bucketCounts:s,bucketArray:l,grid:c,data:{x:u,y:d,z:A,indices:f,radius:p},delta:h,maxRadius:g}=e.grid,{radius:m,isCheck:y,x:v,y:b,z:C}=e,I=m+g,E=I*I;NT.reset(t);const x=Math.max(0,Math.floor((v-I-n[0])/h[0])),B=Math.max(0,Math.floor((b-I-n[1])/h[1])),w=Math.max(0,Math.floor((C-I-n[2])/h[2])),_=Math.min(r-1,Math.floor((v+I-n[0])/h[0])),S=Math.min(o-1,Math.floor((b+I-n[1])/h[1])),D=Math.min(i-1,Math.floor((C+I-n[2])/h[2]));if(x>_||B>S||w>D)return!1;for(let T=x;T<=_;T++)for(let e=B;e<=S;e++)for(let n=w;n<=D;n++){const r=c[(T*o+e)*i+n];if(0===r)continue;const h=r-1,I=a[h],x=I+s[h];for(let e=I;e<x;e++){const n=ey.getAt(f,l[e]),r=u[n]-v,o=d[n]-b,i=A[n]-C,a=r*r+o*o+i*i;if(a<=E){if(g>0&&Math.sqrt(a)-p[n]>m)continue;if(y)return!0;NT.add(t,l[e],a)}}}return t.count>0}const tk=qh(),nk=qh(),rk=new Set,ok=new Set,ik=[.1],ak=[.1],sk=[.1],lk=new JT;const ck=qh.transformMat4Offset,uk=qh.fromArray,dk=XT.add;function Ak(e,t,n){const r=function(e,t){const{instanceCount:n,instance:r,transform:o,invariantBoundingSphere:i}=e,a=new Float32Array(n),s=new Float32Array(n),l=new Float32Array(n),c=ey.ofBounds(0,n),u=XT.setEmpty(XT()),{center:d,radius:A}=i,f=qh.create(A,A,A),p=qh();for(let D=0;D<n;++D)ck(p,d,o,0,0,16*D),a[D]=p[0],s[D]=p[1],l[D]=p[2],dk(u,p);XT.expand(u,u,f);const h={x:a,y:s,z:l,indices:c},g={box:u,sphere:YT.fromBox3D(YT(),u)},m=ZT(h,g,qh.create(t,t,t)),{array:y,offset:v,count:b}=m.buckets,C=v.length,I=new Uint32Array(C+1),E=new Float32Array(4*C),x=new Float32Array(16*n),B=new Float32Array(n),w=XT(),_=YT();let S=0;for(let D=0;D<C;++D){const e=v[D],t=b[D];I[D]=e;const n=S;for(let i=e,a=e+t;i<a;++i){const e=y[i];B[S]=r[e];for(let t=0;t<16;++t)x[16*S+t]=o[16*e+t];S+=1}if(1===t)ck(E,d,x,4*D,0,16*n),E[4*D+3]=A;else{XT.setEmpty(w);const e=16*n;for(let n=0;n<t;++n)ck(p,d,x,0,0,16*n+e),dk(w,p);XT.expand(w,w,f),YT.fromBox3D(_,w),YT.toArray(_,E,4*D)}}return I[C]=v[C-1]+b[C-1],{cellSize:t,cellCount:C,cellOffsets:I,cellSpheres:E,cellTransform:x,cellInstance:B}}(e,t),o=function(e,t){const{cellCount:n,cellSpheres:r}=e,o=new Float32Array(n),i=new Float32Array(n),a=new Float32Array(n),s=ey.ofBounds(0,n),l=XT.setEmpty(XT()),c=qh();let u=0;for(let B=0;B<n;++B){const e=4*B;uk(c,r,e),o[B]=c[0],i[B]=c[1],a[B]=c[2],dk(l,c),u=Math.max(u,r[e+3])}const d=qh.create(u,u,u);XT.expand(l,l,d);const A={x:o,y:i,z:a,indices:s},f={box:l,sphere:YT.fromBox3D(YT(),l)},p=ZT(A,f,qh.create(t,t,t)),{array:h,offset:g,count:m}=p.buckets,y=g.length,v=new Uint32Array(y+1),b=new Float32Array(4*y),C=new Uint32Array(n),I=XT(),E=YT();let x=0;for(let B=0;B<y;++B){const e=g[B],t=m[B];v[B]=e;for(let n=e,r=e+t;n<r;++n)C[x]=h[n],x+=1;if(1===t){const t=h[e];b[4*B]=r[4*t],b[4*B+1]=r[4*t+1],b[4*B+2]=r[4*t+2],b[4*B+3]=r[4*t+3]}else{XT.setEmpty(I),u=0;for(let n=e,o=e+t;n<o;++n){const e=h[n];c[0]=r[4*e],c[1]=r[4*e+1],c[2]=r[4*e+2],dk(I,c),u=Math.max(u,r[4*e+3])}qh.set(d,u,u,u),XT.expand(I,I,d),YT.fromBox3D(E,I),YT.toArray(E,b,4*B)}}return v[y]=g[y-1]+m[y-1],{batchSize:t,batchCount:y,batchOffsets:v,batchSpheres:b,batchCell:C}}(r,n),i=new Uint32Array(r.cellOffsets.length),a=new Float32Array(r.cellSpheres.length),s=new Float32Array(r.cellInstance.length);let l=0;for(let c=0,u=o.batchCell.length;c<u;++c){const t=o.batchCell[c],n=r.cellOffsets[t],u=r.cellOffsets[t+1]-n;i[c+1]=i[c]+u;for(let e=0;e<4;++e)a[4*c+e]=r.cellSpheres[4*t+e];for(let o=0;o<u;++o){const t=n+o,i=r.cellInstance[t];for(let n=0;n<16;++n)r.cellTransform[16*l+n]=e.transform[16*i+n];s[l]=i,l+=1}}return{cellSize:r.cellSize,cellCount:r.cellCount,cellOffsets:i,cellSpheres:a,cellTransform:r.cellTransform,cellInstance:s,batchSize:o.batchSize,batchCount:o.batchCount,batchOffsets:o.batchOffsets,batchSpheres:o.batchSpheres,batchCell:Z_(o.batchCell)}}const fk=Xh(),pk=Yh();function hk(e,t,n,r,o,i){const a=function(e,t){for(let n=0;n<t;n++)if(Xh.fromMat4(fk,Yh.fromArray(pk,e,16*n)),Xh.determinant(fk)<0)return!0;return!1}(e,t);if(i){Sp.update(i.matrix,i.matrix.ref.value);const n=i.transform.ref.value.length>=16*t?i.transform.ref.value:new Float32Array(16*t);n.set(e),Sp.update(i.transform,n),Sp.updateIfChanged(i.uInstanceCount,t),Sp.updateIfChanged(i.instanceCount,t);const r=i.aTransform.ref.value.length>=16*t?i.aTransform.ref.value:new Float32Array(16*t);Sp.update(i.aTransform,r);const o=i.extraTransform.ref.value.length>=16*t?i.extraTransform.ref.value:new Float32Array(16*t);Sp.update(i.extraTransform,yk(o,t));const s=i.aInstance.ref.value.length>=t?i.aInstance.ref.value:new Float32Array(t);Sp.update(i.aInstance,Z_(s,t)),Sp.update(i.hasReflection,a)}else i={aTransform:Sp.create(new Float32Array(16*t)),matrix:Sp.create(Yh.identity()),transform:Sp.create(new Float32Array(e)),extraTransform:Sp.create(yk(new Float32Array(16*t),t)),uInstanceCount:Sp.create(t),instanceCount:Sp.create(t),aInstance:Sp.create(Z_(new Float32Array(t))),hasReflection:Sp.create(a),instanceGrid:Sp.create({cellSize:0,cellCount:0,cellOffsets:new Uint32Array,cellSpheres:new Float32Array,cellTransform:new Float32Array,cellInstance:new Float32Array,batchSize:0,batchCount:0,batchOffsets:new Uint32Array,batchSpheres:new Float32Array,batchCell:new Uint32Array})};return vk(i,n,r,o),i}const gk=new Float32Array(16);function mk(e){return hk(new Float32Array(gk),1,void 0,0,0,e)}function yk(e,t){for(let n=0;n<t;n++)e.set(gk,16*n);return e}function vk(e,t,n,r){const o=e.aTransform.ref.value,i=e.aInstance.ref.value,a=e.instanceCount.ref.value,s=e.matrix.ref.value,l=e.transform.ref.value,c=e.extraTransform.ref.value;for(let u=0;u<a;u++){const e=16*u;Yh.mulOffset(o,c,l,e,e,e),Yh.mulOffset(o,s,o,e,0,e),i[u]=u}if(t&&a>0){const s=Ak({instanceCount:a,instance:i,transform:o,invariantBoundingSphere:t},n,r);Sp.update(e.instanceGrid,s),Sp.update(e.aInstance,s.cellInstance),Sp.update(e.aTransform,s.cellTransform)}else Sp.update(e.aInstance,i),Sp.update(e.aTransform,o)}Yh.toArray(Yh.identity(),gk,0);const bk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflower:6591981,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,laserlemon:16777044,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrod:16448210,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,maroon2:8323072,maroon3:11546720,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,purple2:8323199,purple3:10494192,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ck=(function(){const e=new Map;Object.keys(bk).forEach((t=>{e.set(bk[t],t)}))}(),{Atom:"Atom Property",Chain:"Chain Property",Residue:"Residue Property",Symmetry:"Symmetry",Validation:"Validation",Misc:"Miscellaneous"}),Ik=Jp(13421772),Ek="Gives everything the same, uniform color.",xk={value:U_.Color(Ik),saturation:U_.Numeric(0,{min:-6,max:6,step:.1}),lightness:U_.Numeric(0,{min:-6,max:6,step:.1})};function Bk(e,t){let n=Pp(t.value,Ik);return n=Jp.saturate(n,t.saturation),n=Jp.lighten(n,t.lightness),{factory:Bk,granularity:"uniform",color:()=>n,props:t,description:Ek,legend:hh([["uniform",n]])}}const wk={name:"uniform",label:"Uniform",category:Ck.Misc,factory:Bk,getParams:function(e){return xk},defaultValues:U_.getDefaultValues(xk),isApplicable:e=>!0},_k={value:U_.Numeric(1,{min:0,max:20,step:.1})};function Sk(e,t){const n=t.value;return{factory:Sk,granularity:"uniform",size:()=>n,props:t,description:"Gives everything the same, uniform size."}}const Dk={name:"uniform",label:"Uniform",category:"",factory:Sk,getParams:function(e){return _k},defaultValues:U_.getDefaultValues(_k),isApplicable:e=>!0};function Tk(e){return{...Tk.Zero,...e}}function kk(){}!function(e){e.Zero={metalness:0,roughness:0,bumpiness:0},e.toArray=function(e,t,n){return t[n]=255*e.metalness,t[n+1]=255*e.roughness,t[n+2]=255*e.bumpiness,t},e.toString=function(e){let{metalness:t,roughness:n,bumpiness:r}=e;return`M ${t.toFixed(2)} | R ${n.toFixed(2)} | B ${r.toFixed(2)}`},e.getParam=function(e){return U_.Group({metalness:U_.Numeric(0,{min:0,max:1,step:.01}),roughness:U_.Numeric(1,{min:0,max:1,step:.01}),bumpiness:U_.Numeric(0,{min:0,max:1,step:.01})},{...e,presets:[[{metalness:0,roughness:1,bumpiness:0},"Matte"],[{metalness:0,roughness:.2,bumpiness:0},"Plastic"],[{metalness:0,roughness:.6,bumpiness:0},"Glossy"],[{metalness:1,roughness:.6,bumpiness:0},"Metallic"]]})}}(Tk||(Tk={})),function(e){e.Type={none:0,plane:1,sphere:2,cube:3,cylinder:4,infiniteCone:5},e.Params={variant:U_.Select("pixel",U_.arrayToOptions(["instance","pixel"])),objects:U_.ObjectList({type:U_.Select("plane",U_.objectToOptions(e.Type,(e=>ah(e)))),invert:U_.Boolean(!1),position:U_.Vec3(qh()),rotation:U_.Group({axis:U_.Vec3(qh.create(1,0,0)),angle:U_.Numeric(0,{min:-180,max:180,step:1},{description:"Angle in Degrees"})},{isExpanded:!0}),scale:U_.Vec3(qh.create(1,1,1))},(e=>ah(e.type)))};const t=eg(),n=eg(),r=qh(),o=qh();e.getClip=function(n,r){const o=n.objects.length,{type:i,invert:a,position:s,rotation:l,scale:c}=(null===r||void 0===r?void 0:r.objects)||function(e){return{count:0,type:new Array(e).fill(1),invert:new Array(e).fill(!1),position:new Array(3*e).fill(0),rotation:new Array(4*e).fill(0),scale:new Array(3*e).fill(1)}}(o);for(let u=0;u<o;++u){const r=n.objects[u];i[u]=e.Type[r.type],a[u]=r.invert,qh.toArray(r.position,s,3*u),eg.toArray(eg.setAxisAngle(t,r.rotation.axis,Np(r.rotation.angle)),l,4*u),qh.toArray(r.scale,c,3*u)}return{variant:n.variant,objects:{count:o,type:i,invert:a,position:s,rotation:l,scale:c}}},e.areEqual=function(e,i){if(e.variant!==i.variant)return!1;if(e.objects.count!==i.objects.count)return!1;const a=e.objects,s=i.objects;for(let l=0,c=a.count;l<c;++l){if(a.invert[l]!==s.invert[l])return!1;if(a.type[l]!==s.type[l])return!1;if(qh.fromArray(r,a.position,3*l),qh.fromArray(o,s.position,3*l),!qh.equals(r,o))return!1;if(qh.fromArray(r,a.scale,3*l),qh.fromArray(o,s.scale,3*l),!qh.equals(r,o))return!1;if(eg.fromArray(t,a.rotation,4*l),eg.fromArray(n,s.rotation,4*l),!eg.equals(t,n))return!1}return!0}}(kk||(kk={}));const Qk=Object.keys({custom:{},auto:{},highest:{},higher:{},high:{},medium:{},low:{},lower:{},lowest:{}}),Mk=U_.arrayToOptions(Qk),Rk={smoothColors:U_.MappedStatic("auto",{auto:U_.Group({}),on:U_.Group({resolutionFactor:U_.Numeric(2,{min:.5,max:6,step:.1}),sampleStride:U_.Numeric(3,{min:1,max:12,step:1})}),off:U_.Group({})})};function Pk(e){return!!e.smoothColors}function Ok(e,t,n){if(("on"===e.name||"auto"===e.name&&t)&&n&&n<3){let t=3;return"on"===e.name?(n*=e.params.resolutionFactor,t=e.params.sampleStride):(n*=2-Xp(0,1.1,n),(n=Math.max(.5,n))>1.2&&(t=2)),{resolution:n,stride:t}}}var Fk,Nk,Lk,Uk,Gk,jk,zk,Hk,Vk,qk,Yk,Xk,Wk;function Kk(e,t){return{value:e,unit:t}}function Jk(e){return e}!function(e){e.MaterialCategory={category:"Material"},e.ShadingCategory={category:"Shading"},e.CullingLodCategory={category:"Culling & LOD"},e.CustomQualityParamInfo={category:"Custom Quality",hideIf:e=>"undefined"!==typeof e.quality&&"custom"!==e.quality},e.Params={alpha:U_.Numeric(1,{min:0,max:1,step:.01},{label:"Opacity",isEssential:!0,description:"How opaque/transparent the representation is rendered."}),quality:U_.Select("auto",Mk,{isEssential:!0,description:"Visual/rendering quality of the representation."}),material:Tk.getParam(),clip:U_.Group(kk.Params),emissive:U_.Numeric(0,{min:0,max:1,step:.01}),instanceGranularity:U_.Boolean(!1,{description:"Use instance granularity for marker, transparency, clipping, overpaint, substance data to save memory."}),lod:U_.Vec3(qh(),void 0,{...e.CullingLodCategory,description:"Level of detail.",fieldLabels:{x:"Min Distance",y:"Max Distance",z:"Overlap (Shader)"}}),cellSize:U_.Numeric(200,{min:0,max:5e3,step:100},{...e.CullingLodCategory,description:"Instance grid cell size."}),batchSize:U_.Numeric(2e3,{min:0,max:5e4,step:500},{...e.CullingLodCategory,description:"Instance grid batch size."})},e.createSimple=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bk.grey,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return n||(n=mk()),{transform:n,locationIterator:xT(1,n.instanceCount.ref.value,1,(()=>IT),!1,(()=>!1)),theme:{color:Bk(0,{value:e,lightness:0,saturation:0}),size:Sk(0,{value:t})}}},e.createValues=function(e,t){const n=kk.getClip(e.clip);return{alpha:Sp.create(e.alpha),uAlpha:Sp.create(e.alpha),uVertexCount:Sp.create(t.vertexCount),uGroupCount:Sp.create(t.groupCount),drawCount:Sp.create(t.drawCount),uMetalness:Sp.create(e.material.metalness),uRoughness:Sp.create(e.material.roughness),uBumpiness:Sp.create(e.material.bumpiness),uEmissive:Sp.create(e.emissive),dLightCount:Sp.create(1),dColorMarker:Sp.create(!0),dClipObjectCount:Sp.create(n.objects.count),dClipVariant:Sp.create(n.variant),uClipObjectType:Sp.create(n.objects.type),uClipObjectInvert:Sp.create(n.objects.invert),uClipObjectPosition:Sp.create(n.objects.position),uClipObjectRotation:Sp.create(n.objects.rotation),uClipObjectScale:Sp.create(n.objects.scale),instanceGranularity:Sp.create(e.instanceGranularity),uLod:Sp.create(Kh.create(e.lod[0],e.lod[1],e.lod[2],0))}},e.updateValues=function(e,t){Sp.updateIfChanged(e.alpha,t.alpha),Sp.updateIfChanged(e.uMetalness,t.material.metalness),Sp.updateIfChanged(e.uRoughness,t.material.roughness),Sp.updateIfChanged(e.uBumpiness,t.material.bumpiness),Sp.updateIfChanged(e.uEmissive,t.emissive);const n=kk.getClip(t.clip);Sp.updateIfChanged(e.dClipObjectCount,n.objects.count),Sp.updateIfChanged(e.dClipVariant,n.variant),Sp.update(e.uClipObjectType,n.objects.type),Sp.update(e.uClipObjectInvert,n.objects.invert),Sp.update(e.uClipObjectPosition,n.objects.position),Sp.update(e.uClipObjectRotation,n.objects.rotation),Sp.update(e.uClipObjectScale,n.objects.scale),Sp.updateIfChanged(e.instanceGranularity,t.instanceGranularity),Sp.update(e.uLod,Kh.set(e.uLod.ref.value,t.lod[0],t.lod[1],t.lod[2],0))},e.createRenderableState=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=void 0===e.alpha||1===e.alpha;return{disposed:!1,visible:!0,alphaFactor:1,pickable:!0,colorOnly:!1,opaque:t,writeDepth:t}},e.updateRenderableState=function(e,t){e.opaque=t.alpha*e.alphaFactor>=1,e.writeDepth=e.opaque}}(Fk||(Fk={})),function(e){e.create=function(e,t,n){const r=!!e[0].cell,o=!!e[0].velocities,i=!!e[0].forces;return{id:Cp.create22(),frames:e,hasCell:r,hasVelocities:o,hasForces:i,deltaTime:t,timeOffset:n}},e.getAtomicConformation=function(e,t,a){var s,l;let{x:c,y:u,z:d}=e;return e.xyzOrdering.frozen?a?e.xyzOrdering.isIdentity?(c=o(c,a),u=o(u,a),d=o(d,a)):Tp(e.xyzOrdering.index,a)||(c=r(c,e.xyzOrdering.index,a),u=r(u,e.xyzOrdering.index,a),d=r(d,e.xyzOrdering.index,a)):e.xyzOrdering.isIdentity||(c=i(c,e.xyzOrdering.index),u=i(u,e.xyzOrdering.index),d=i(d,e.xyzOrdering.index)):a&&(e.xyzOrdering.isIdentity?(e.xyzOrdering.isIdentity=!1,e.xyzOrdering.index=a,n(c,a),n(u,a),n(d,a)):Tp(e.xyzOrdering.index,a)||(c=r(c,e.xyzOrdering.index,a),u=r(u,e.xyzOrdering.index,a),d=r(d,e.xyzOrdering.index,a))),e.xyzOrdering.frozen=!0,{id:Cp.create22(),atomId:t.atomId,occupancy:null!==(s=t.occupancy)&&void 0!==s?s:ag.ofConst(1,e.elementCount,ag.Schema.int),B_iso_or_equiv:null!==(l=t.B_iso_or_equiv)&&void 0!==l?l:ag.ofConst(0,e.elementCount,ag.Schema.float),xyzDefined:!0,x:c,y:u,z:d}};const t=[.123];function n(e,n){const r=t;for(let t=0,o=e.length;t<o;t++)r[t]=e[n[t]];for(let t=0,o=e.length;t<o;t++)e[t]=r[t]}function r(e,t,n){const r=new Float32Array(e.length);for(let o=0,i=e.length;o<i;o++)r[o]=e[t[n[o]]];return r}function o(e,t){const n=new Float32Array(e.length);for(let r=0,o=e.length;r<o;r++)n[r]=e[t[r]];return n}function i(e,t){const n=new Float32Array(e.length);for(let r=0,o=e.length;r<o;r++)n[t[r]]=e[r];return n}}(Nk||(Nk={})),function(e){e.create=function(e,t,n,r){return{id:Cp.create22(),label:e,basic:t,sourceData:r,bonds:n}}}(Lk||(Lk={})),function(e){e.getUUID=function(e){return e.__key||(e.__key=Cp.create22()),e.__key}}(Jk||(Jk={}));class Zk{constructor(){this._list=[],this._set=new Set,this._refs=new Map,this._assets=new Map}get all(){return this._list}add(e){this._set.has(e)||(this._list.push(e),this._set.add(e))}reference(e,t){let n=this._refs.get(e)||0;n+=t?1:-1,this._refs.set(e,Math.max(n,0))}hasReference(e){return(this._refs.get(e)||0)>0}has(e){return this._set.has(e)}assets(e,t){const n=this._assets.get(e);if(n)for(const r of n)r.dispose();t?this._assets.set(e,t):this._assets.delete(e)}dispose(){this._assets.forEach((e=>{for(const t of e)t.dispose()}))}}function $k(e,t,n,r,o){const{b:i,offset:a}=e,s=[];for(let l=0,c=t.length;l<c;++l){const e=t[l];for(let t=a[e],r=a[e+1];t<r;++t){const e=i[t];if(!o.has(e)){if(Em.has(n,e))return!0;o.add(e),s[s.length]=e}}}return r>1&&$k(e,s,n,r-1,o)}!function(e){e.areEqual=function(e,t){if(e===t)return!0;if(e.vertexCount!==t.vertexCount||e.edgeCount!==t.edgeCount)return!1;const{a:n,b:r,offset:o}=e,{a:i,b:a,offset:s}=t;for(let l=0,c=e.a.length;l<c;l++)if(n[l]!==i[l])return!1;for(let l=0,c=e.b.length;l<c;l++)if(r[l]!==a[l])return!1;for(let l=0,c=e.offset.length;l<c;l++)if(o[l]!==s[l])return!1;for(const l of Object.keys(e.edgeProps)){const n=e.edgeProps[l],r=t.edgeProps[l];if(!r)return!1;for(let e=0,t=n.length;e<t;e++)if(n[e]!==r[e])return!1}return!0};class t{getEdgeIndex(e,t){let n,r;e<t?(n=e,r=t):(n=t,r=e);for(let o=this.offset[n],i=this.offset[n+1];o<i;o++)if(this.b[o]===r)return o;return-1}getDirectedEdgeIndex(e,t){for(let n=this.offset[e],r=this.offset[e+1];n<r;n++)if(this.b[n]===t)return n;return-1}getVertexEdgeCount(e){return this.offset[e+1]-this.offset[e]}constructor(e,t,n,r,o,i){this.offset=e,this.a=t,this.b=n,this.edgeCount=r,this.props=i,this.vertexCount=e.length-1,this.edgeProps=o||{}}}function n(e,n,r,o,i,a){return new t(e,n,r,o,i,a)}e.create=n;class r{createGraph(e,t){return n(this.offsets,this.a,this.b,this.edgeCount,e,t)}addNextEdge(){const e=this.xs[this.current],t=this.ys[this.current],n=this.offsets[e]+this.bucketFill[e];this.a[n]=e,this.b[n]=t,this.bucketFill[e]++;const r=this.offsets[t]+this.bucketFill[t];this.a[r]=t,this.b[r]=e,this.bucketFill[t]++,this.current++,this.curA=n,this.curB=r}addAllEdges(){for(let e=0;e<this.edgeCount;e++)this.addNextEdge()}assignProperty(e,t){e[this.curA]=t,e[this.curB]=t}assignDirectedProperty(e,t,n,r){e[this.curA]=t,e[this.curB]=r,n[this.curB]=t,n[this.curA]=r}constructor(e,t,n){this.vertexCount=e,this.xs=t,this.ys=n,this.current=0,this.curA=0,this.curB=0,this.edgeCount=t.length,this.offsets=new Int32Array(this.vertexCount+1),this.bucketFill=new Int32Array(this.vertexCount);const r=new Int32Array(this.vertexCount);for(let i=0,a=this.xs.length;i<a;i++)r[this.xs[i]]++;for(let i=0,a=this.ys.length;i<a;i++)r[this.ys[i]]++;let o=0;for(let i=0;i<this.vertexCount;i++)this.offsets[i]=o,o+=r[i];this.offsets[this.vertexCount]=o,this.slotCount=o,this.a=new Int32Array(o),this.b=new Int32Array(o)}}e.EdgeBuilder=r;e.DirectedEdgeBuilder=class{createGraph(e,t){return n(this.offsets,this.a,this.b,this.edgeCount,e,t)}addNextEdge(){const e=this.xs[this.current],t=this.ys[this.current],n=this.offsets[e]+this.bucketFill[e];this.a[n]=e,this.b[n]=t,this.bucketFill[e]++,this.current++,this.curA=n}addAllEdges(){for(let e=0;e<this.edgeCount;e++)this.addNextEdge()}assignProperty(e,t){e[this.curA]=t}constructor(e,t,n){this.vertexCount=e,this.xs=t,this.ys=n,this.current=0,this.curA=0,this.edgeCount=t.length,this.offsets=new Int32Array(this.vertexCount+1),this.bucketFill=new Int32Array(this.vertexCount);const r=new Int32Array(this.vertexCount);for(let i=0,a=this.xs.length;i<a;i++)r[this.xs[i]]++;let o=0;for(let i=0;i<this.vertexCount;i++)this.offsets[i]=o,o+=r[i];this.offsets[this.vertexCount]=o,this.slotCount=o,this.a=new Int32Array(o),this.b=new Int32Array(o)}};function o(t,n,r){const o=new e.EdgeBuilder(t,n,r);return o.addAllEdges(),o.createGraph({})}e.UniqueEdgeBuilder=class{addEdge(e,t){let n=e,r=t;e>t&&(n=t,r=e);const o=Rh(n,r);return!this.included.has(o)&&(this.included.add(o),this.xs[this.xs.length]=n,this.ys[this.ys.length]=r,!0)}getGraph(){return o(this.vertexCount,this.xs,this.ys)}getEdgeBuiler(){return new r(this.vertexCount,this.xs,this.ys)}constructor(e){this.vertexCount=e,this.xs=[],this.ys=[],this.included=new Set}},e.fromVertexPairs=o,e.induceByVertices=function(e,t,r){const{b:o,offset:i,vertexCount:a,edgeProps:s}=e,l=new Int32Array(a);for(let n=0,m=t.length;n<m;n++)l[t[n]]=n+1;let c=0;for(let n=0;n<a;n++)if(0!==l[n])for(let e=i[n],t=i[n+1];e<t;e++)o[e]>n&&0!==l[o[e]]&&c++;const u=new Int32Array(t.length+1),d=new Int32Array(2*c),A=new Int32Array(2*c),f=new Int32Array(2*c);let p=0,h=0;for(let n=0;n<a;n++){if(0===l[n])continue;const e=l[n]-1;for(let t=i[n],r=i[n+1];t<r;t++){const n=l[o[t]];0!==n&&(A[p]=e,f[p]=n-1,d[p]=t,p++)}u[++h]=p}const g={};for(const n of Object.keys(s))g[n]=mg(s[n],d);return n(u,A,f,c,g,r)},e.connectedComponents=function(e){const t=e.vertexCount;if(0===t)return{componentCount:0,componentIndex:new Int32Array(0)};if(0===e.edgeCount){const e=new Int32Array(t);for(let n=0,r=t;n<r;n++)e[n]=n;return{componentCount:t,componentIndex:e}}const n=new Int32Array(t);for(let l=0,c=t;l<c;l++)n[l]=-1;let r=0;n[0]=r;const{offset:o,b:i}=e,a=[0],s=function(e){return new dy(e)}(t);for(s.remove(0);a.length>0;){const e=a.pop(),t=n[e];for(let r=o[e],l=o[e+1];r<l;r++){const e=i[r];s.has(e)&&(s.remove(e),a.push(e),n[e]=t)}0===a.length&&s.head>=0&&(a.push(s.head),n[s.head]=++r,s.remove(s.head))}return{componentCount:t,componentIndex:n}},e.areVertexSetsConnected=function(e,t,n,r){if(Em.areIntersecting(t,n))return!0;if(r<1)return!1;const o=new Set;for(let i=0,a=t.length;i<a;++i)o.add(t[i]);return $k(e,t,n,r,o)}}(Uk||(Uk={}));class eQ{constructor(){this.map=new Map,this.applicable=new Map}add(e,t,n){this.map.set(e,t),n&&this.applicable.set(e,n)}remove(e){this.map.delete(e),this.applicable.delete(e)}get(e){return this.map.get(e)}isApplicable(e){if(!this.map.has(e.sourceData.kind))return!1;const t=this.applicable.get(e.sourceData.kind);return!t||t(e)}}function tQ(e,t,n,r){const o=new Uk.EdgeBuilder(r,e,t),i=new Int32Array(o.slotCount),a=new Array(o.slotCount),s=new Array(o.slotCount),l=new Int8Array(o.slotCount),c=new Array(o.slotCount),u=new Array(o.slotCount);for(let d=0,A=o.edgeCount;d<A;d++)o.addNextEdge(),o.assignProperty(i,n.key?n.key[d]:-1),o.assignDirectedProperty(a,n.operatorA?n.operatorA[d]:-1,s,n.operatorB?n.operatorB[d]:-1),o.assignProperty(l,n.order?n.order[d]:1),o.assignProperty(c,n.distance?n.distance[d]:-1),o.assignProperty(u,n.flag?n.flag[d]:1);return o.createGraph({key:i,operatorA:a,operatorB:s,order:l,distance:c,flag:u})}function nQ(e){return function(t){return rQ(e,t)}}function rQ(e,t){const{data:n,indices:r,count:o}=e,{valueType:i}=t,a="str"===i?e=>n.substring(r[2*e],r[2*e+1]):"int"===i?e=>rg(n,r[2*e],r[2*e+1])||0:e=>ig(n,r[2*e],r[2*e+1])||0;return{schema:t,__array:void 0,isDefined:!0,rowCount:o,value:a,valueKind:e=>0,toArray:e=>Uh(o,a,e),areValuesEqual:oQ(e)}}function oQ(e){const{data:t,indices:n}=e;return function(e,r){const o=n[2*e],i=n[2*r],a=n[2*e+1]-o;if(a!==n[2*r+1]-i)return!1;for(let n=0;n<a;n++)if(t.charCodeAt(n+o)!==t.charCodeAt(n+i))return!1;return!0}}function iQ(e){const{count:t,indices:n}=e;for(let r=0;r<t;++r)if(n[2*r]!==n[2*r+1])return!1;return!0}function aQ(e,t){return{name:t,blocks:e}}function sQ(e,t,n){return{categoryNames:e,header:n,categories:t,saveFrames:arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],getField(e){const[n,r]=e.split(".");return t[n].getField(r||"")}}}function lQ(e,t,n,r){return{rowCount:t,name:e,fieldNames:[...n],getField:e=>r[e]}}function cQ(e,t,n){return function(e,t,n){const r=Object.create(null);for(const o of Object.keys(e))r[o]=gQ(o,e[o],t,n);return lg.ofTables(t.header,e,r)}(e,t,n)}function uQ(e){switch(e.valueType){case"str":return(t,n,r)=>function(e,t,n,r){return{schema:e,__array:t.__array,isDefined:t.isDefined,rowCount:t.rowCount,value:"lowercase"===e.transform?e=>n(e).toLowerCase():"uppercase"===e.transform?e=>n(e).toUpperCase():n,valueKind:t.valueKind,areValuesEqual:t.areValuesEqual,toArray:"lowercase"===e.transform?e=>Array.from(r(e)).map((e=>e.toLowerCase())):"uppercase"===e.transform?e=>Array.from(r(e)).map((e=>e.toUpperCase())):r}}(e,t,t.str,t.toStringArray);case"int":return(t,n,r)=>dQ(e,t,t.int,t.toIntArray);case"float":return(t,n,r)=>dQ(e,t,t.float,t.toFloatArray);case"list":throw new Error("Use createListColumn instead.");case"tensor":throw new Error("Use createTensorColumn instead.")}}function dQ(e,t,n,r){return{schema:e,__array:t.__array,isDefined:t.isDefined,rowCount:t.rowCount,value:n,valueKind:t.valueKind,areValuesEqual:t.areValuesEqual,toArray:r}}function AQ(e,t,n){const r=e.separator,o=e.itemParse,i=t.getField(n),a=i?e=>i.str(e).split(r).map((e=>o(e.trim()))).filter((e=>!!e)):e=>[];return{schema:e,__array:void 0,isDefined:!!i,rowCount:t.rowCount,value:a,valueKind:i?i.valueKind:()=>1,areValuesEqual:(e,t)=>Tp(a(e),a(t)),toArray:e=>Uh(t.rowCount,a,e)}}function fQ(e,t,n){const r=e.space,o=t.fieldNames.includes(`${n}[0]`)||t.fieldNames.includes(`${n}[0][0]`)||t.fieldNames.includes(`${n}[0][0][0]`),i=o?0:1,a=t.fieldNames.includes(`${n}_1`)||t.fieldNames.includes(`${n}_11`)||t.fieldNames.includes(`${n}_111`)?"underscore":"brackets",s=function(e,t,n,r){const o=n?0:1;switch(t){case 1:return"brackets"===r?t=>`${e}[${t+o}]`:t=>`${e}_${t+o}`;case 2:return"brackets"===r?(t,n)=>`${e}[${t+o}][${n+o}]`:(t,n)=>`${e}_${t+o}${n+o}`;case 3:return"brackets"===r?(t,n,r)=>`${e}[${t+o}][${n+o}][${r+o}]`:(t,n,r)=>`${e}_${t+o}${n+o}${r+o}`;default:throw new Error("Tensors with rank > 3 or rank 0 are currently not supported.")}}(n,r.rank,o,a),l=t.getField(s(i,i,i))||ag.Undefined(t.rowCount,e),c=e=>function(e,t,n,r){const o=t.create();if(1===t.rank){const i=t.dimensions[0];for(let a=0;a<i;a++){const i=e.getField(r(a));t.set(o,a,i?i.float(n):0)}}else if(2===t.rank){const i=t.dimensions[0],a=t.dimensions[1];for(let s=0;s<i;s++)for(let i=0;i<a;i++){const a=e.getField(r(s,i));t.set(o,s,i,a?a.float(n):0)}}else{if(3!==t.rank)throw new Error("Tensors with rank > 3 or rank 0 are currently not supported.");{const i=t.dimensions[0],a=t.dimensions[1],s=t.dimensions[2];for(let l=0;l<i;l++)for(let i=0;i<a;i++)for(let a=0;a<s;a++){const s=e.getField(r(l,i,a));t.set(o,l,i,a,s?s.float(n):0)}}}return o}(t,r,e,s);return{schema:e,__array:void 0,isDefined:l.isDefined,rowCount:t.rowCount,value:c,valueKind:l.valueKind,areValuesEqual:(e,t)=>tg.areEqualExact(c(e),c(t)),toArray:e=>Uh(t.rowCount,c,e)}}!function(e){e.create=function(e,t){const{name:n}=e,r=new eQ;return{descriptor:e,formatRegistry:r,isApplicable:e=>r.isApplicable(e),get(o){const i=(null===t||void 0===t?void 0:t.asDynamic)?o._dynamicPropertyData:o._staticPropertyData;if(i[n])return i[n];if(o.customProperties.has(e))return;const a=r.get(o.sourceData.kind);return a?(i[n]=a(o),o.customProperties.add(e),i[n]):void 0},set(e,r){(null===t||void 0===t?void 0:t.asDynamic)?e._dynamicPropertyData[n]=r:e._staticPropertyData[n]=r},delete(e){(null===t||void 0===t?void 0:t.asDynamic)?delete e._dynamicPropertyData[n]:delete e._staticPropertyData[n]}}}}(Gk||(Gk={})),function(e){e.Descriptor={name:"index_pair_bonds"},e.Provider=Gk.create(e.Descriptor,{asDynamic:!0}),e.DefaultProps={maxDistance:-1,cacheable:!0},e.fromData=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={...e.DefaultProps,...n},{pairs:o,count:i}=t;return{bonds:tQ(o.indexA.toArray(),o.indexB.toArray(),{key:o.key&&o.key.toArray(),operatorA:o.operatorA&&o.operatorA.toArray(),operatorB:o.operatorB&&o.operatorB.toArray(),order:o.order&&o.order.toArray(),distance:o.distance&&o.distance.toArray(),flag:o.flag&&o.flag.toArray()},i),maxDistance:r.maxDistance,cacheable:r.cacheable}},e.getEdgeIndexForOperators=function(e,t,n,r,o){let i,a,s,l;t<n?(i=t,a=n,s=r,l=o):(i=n,a=t,s=o,l=r);for(let c=e.offset[i],u=e.offset[i+1];c<u;c++)if(e.b[c]===a&&e.edgeProps.operatorA[c]===s&&e.edgeProps.operatorB[c]===l)return c;return-1}}(jk||(jk={})),function(e){function t(e,t){const n=Object.keys(t);return{rowCount:n.length>0?t[n[0]].rowCount:0,name:e,fieldNames:n,getField:e=>t[e]}}e.empty=function(e){return{rowCount:0,name:e,fieldNames:[],getField(e){}}},e.ofFields=t,e.ofTable=function(e,n){const r={};for(const t of n._columns)r[t]=zk.ofColumn(n[t]);return t(e,r)}}(lQ||(lQ={})),function(e){function t(e){const t=e.length,n=t=>{const n=e[t];return n&&"."!==n&&"?"!==n?n:""},r=t=>{const n=e[t];return rg(n,0,n.length)||0},o=t=>{const n=e[t];return ig(n,0,n.length)||0};return{__array:void 0,binaryEncoding:void 0,isDefined:!0,rowCount:t,str:n,int:r,float:o,valueKind:t=>{const n=e[t],r=n.length;if(r>1)return 0;if(0===r)return 1;const o=n.charCodeAt(0);return 46===o?1:63===o?2:0},areValuesEqual:(t,n)=>e[t]===e[n],toStringArray:r=>r?Uh(t,n,r):e,toIntArray:e=>Uh(t,r,e),toFloatArray:e=>Uh(t,o,e)}}function n(e){const{rowCount:t,valueKind:n,areValuesEqual:r,isDefined:o}=e;let i,a,s;switch(e.schema.valueType){case"float":case"int":i=t=>""+e.value(t),a=e.value,s=e.value;break;case"str":i=e.value,a=t=>{const n=e.value(t);return rg(n,0,n.length)||0},s=t=>{const n=e.value(t);return ig(n,0,n.length)||0};break;case"list":const{separator:t}=e.schema;i=n=>e.value(n).join(t),a=e=>NaN,s=e=>NaN;break;default:throw new Error(`unsupported valueType '${e.schema.valueType}'`)}return{__array:void 0,binaryEncoding:void 0,isDefined:o,rowCount:t,str:i,int:a,float:s,valueKind:n,areValuesEqual:r,toStringArray:e=>Uh(t,i,e),toIntArray:e=>Uh(t,a,e),toFloatArray:e=>Uh(t,s,e)}}e.ofString=function(e){return t([e])},e.ofStrings=t,e.ofNumbers=function(e){const t=e.length,n=t=>""+e[t],r=t=>e[t],o=n=>!n||n.array&&e instanceof n.array?e:Uh(t,r,n);return{__array:void 0,binaryEncoding:void 0,isDefined:!0,rowCount:t,str:n,int:r,float:r,valueKind:e=>0,areValuesEqual:(t,n)=>e[t]===e[n],toStringArray:e=>Uh(t,n,e),toIntArray:o,toFloatArray:o}},e.ofTokens=function(e){const{data:t,indices:n,count:r}=e,o=e=>{const r=t.substring(n[2*e],n[2*e+1]);return"."===r||"?"===r?"":r},i=e=>rg(t,n[2*e],n[2*e+1])||0,a=e=>ig(t,n[2*e],n[2*e+1])||0;return{__array:void 0,binaryEncoding:void 0,isDefined:!0,rowCount:r,str:o,int:i,float:a,valueKind:e=>{const r=n[2*e],o=n[2*e+1]-r;if(o>1)return 0;if(0===o)return 1;const i=t.charCodeAt(r);return 46===i?1:63===i?2:0},areValuesEqual:oQ(e),toStringArray:e=>Uh(r,o,e),toIntArray:e=>Uh(r,i,e),toFloatArray:e=>Uh(r,a,e)}},e.ofColumn=n,e.ofUndefined=function(e,t){return n(ag.Undefined(e,t))}}(zk||(zk={})),function(e){function t(e){return e.replace(".","_").replace(/\[/,"_").replace(/(\[|\])/g,"")}e.canonical=t,e.equal=function(e,n){return t(e)===t(n)},e.create=function(e,n){const r=`${e}${n?`.${n}`:""}`;return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?t(r):r}}(Hk||(Hk={}));class pQ{constructor(e,t,n){this._isDefined=n;const r=Object.keys(t);this._rowCount=e.rowCount,this._columns=r,this._schema=t;const o=Object.create(null);for(const i of r)Object.defineProperty(this,i,{get:function(){if(o[i])return o[i];const n=t[i];if("list"===n.valueType)o[i]=AQ(n,e,i);else if("tensor"===n.valueType)o[i]=fQ(n,e,i);else{const t=uQ(n),r=e.getField(i);o[i]=r?t(r,e,i):ag.Undefined(e.rowCount,n)}return o[i]},enumerable:!0,configurable:!1})}}function hQ(e,t,n,r){const o=Hk.create(t,e),i=Hk.canonical(o);if(i in n)return n[i];if(r&&o in r)for(const a of r[o]){const e=Hk.canonical(a);if(e in n)return n[e]}}function gQ(e,t,n,r){let o=n.categories[e];if(r){const i=function(e){const t=Object.create(null);for(const n of Object.keys(e.categories))for(const r of e.categories[n].fieldNames)t[Hk.create(n,r,!0)]=e.categories[n].getField(r);return t}(n),a=Object.create(null),s=[];let l=0;for(const n of Object.keys(t)){const t=hQ(n,e,i,r);t&&(a[n]=t,s.push(n),l=t.rowCount)}o={rowCount:l,name:e,fieldNames:[...s],getField:e=>a[e]}}return new pQ(o||lQ.empty(e),t,!!o)}function mQ(e,t){const{description:n,isOptional:r=!1,isRest:o=!1,defaultValue:i}=t||{};return{type:e,isOptional:r,isRest:o,defaultValue:i,description:n}}function yQ(e,t,n,r){const o=function(e){return Yk.Apply(Yk.Symbol(o.id),e)};return o.info={namespace:"",name:e,description:r},o.id="",o.args=t,o.type=n,o}function vQ(e,t,n,r){const o=function(e){return Yk.Apply(Yk.Symbol(o.id),e)};return o.info={namespace:e,name:t,description:r},o.id=`${e}.${t}`,o.args=Xk.None,o.type=n,o}function bQ(e){const t=e;return"function"===typeof t&&!!t.info&&!!t.args&&"string"===typeof t.info.namespace&&!!t.type}function CQ(e,t,n){return yQ("",e,t,n)}function IQ(e){BQ("","",e)}function EQ(e){const t=[];return wQ(e,t),t}function xQ(e){const t=/([a-z])([A-Z])([a-z]|$)/g;return e.replace(t,((e,t,n,r)=>`${t}-${n.toLocaleLowerCase()}${r}`)).replace(t,((e,t,n,r)=>`${t}-${n.toLocaleLowerCase()}${r}`))}function BQ(e,t,n){if(bQ(n))return n.info.namespace=e,n.info.name=n.info.name||xQ(t),void(n.id=`${n.info.namespace}.${n.info.name}`);const r=`${n["@namespace"]||xQ(t)}`,o=e?`${e}.${r}`:r;for(const i of Object.keys(n))("object"===typeof n[i]||bQ(n[i]))&&BQ(o,i,n[i])}function wQ(e,t){if(bQ(e))t.push(e);else for(const n of Object.keys(e))("object"===typeof e[n]||bQ(e[n]))&&wQ(e[n],t)}function _Q(e,t){return CQ(Xk.Dictionary({0:mQ(e)}),e,t)}function SQ(e,t){return CQ(Xk.List(e,{nonEmpty:!0}),e,t)}function DQ(e,t,n){return CQ(Xk.Dictionary({0:mQ(e),1:mQ(e)}),t,n)}!function(e){function t(e,t,n){return{kind:"element-location",structure:e,unit:t,element:n||0}}e.create=t,e.clone=function(e){return t(e.structure,e.unit,e.element)},e.set=function(e,t,n,r){return t&&(e.structure=t),n&&(e.unit=n),void 0!==r&&(e.element=r),e},e.copy=function(e,t){return e.unit=t.unit,e.element=t.element,e},e.is=function(e){return!!e&&"element-location"===e.kind},e.areEqual=function(e,t){return e.unit===t.unit&&e.element===t.element};const n=qh(),r=qh();e.distance=function(e,t){return e.unit.conformation.position(e.element,n),t.unit.conformation.position(t.element,r),qh.distance(n,r)},e.position=function(e,t){return t.unit.conformation.position(t.element,e)},e.residueIndex=function(e){return e.unit.model.atomicHierarchy.residueAtomSegments.index[e.element]},e.chainIndex=function(e){return e.unit.model.atomicHierarchy.chainAtomSegments.index[e.element]}}(Vk||(Vk={})),function(e){function t(e,t,n){return{kind:"value",namespace:e,name:t,parent:n}}function n(e,t,n,r){const o=Object.create(null);for(const i of r)o[i]=!0;return{kind:"oneof",namespace:e,name:t,type:n,values:o}}e.Variable=function(e,t,n){return{kind:"variable",name:e,type:t,isConstraint:n}},e.Value=t,e.Container=function(e,t,n,r){return{kind:"container",namespace:e,name:t,child:n,alias:r}},e.Union=function(e){return{kind:"union",types:e}},e.OneOf=n,e.Any={kind:"any"},e.AnyValue={kind:"any-value"},e.Num=t("","Number"),e.Str=t("","String"),e.Bool=n("","Bool",e.Str,["true","false"]),e.oneOfValues=function(e){let{values:t}=e;return Object.keys(t).sort()}}(qk||(qk={})),function(e){function t(e){return!!e&&!!e.head&&"object"===typeof e}function n(e){return!!e&&"string"===typeof e.name}e.Symbol=function(e){return{name:e}},e.Apply=function(e,t){return t?{head:e,args:t}:{head:e}},e.isArgumentsArray=function(e){return!!e&&Array.isArray(e)},e.isArgumentsMap=function(e){return!!e&&!Array.isArray(e)},e.isLiteral=function(e){return!t(e)&&!n(e)},e.isApply=t,e.isSymbol=n}(Yk||(Yk={})),function(e){function t(e){return{kind:"dictionary",map:e,"@type":0}}e.None=t({}),e.Dictionary=t,e.List=function(e,t){const{nonEmpty:n=!1}=t||{};return{kind:"list",type:e,nonEmpty:n,"@type":0}}}(Xk||(Xk={})),function(e){e.AnyVar=qk.Variable("a",qk.Any),e.AnyValueVar=qk.Variable("a",qk.Any),e.ConstrainedVar=qk.Variable("a",qk.Any,!0),e.Regex=qk.Value("Core","Regex"),e.Set=t=>qk.Container("Core","Set",t||e.AnyValueVar),e.List=t=>qk.Container("Core","List",t||e.AnyVar),e.Fn=(t,n)=>qk.Container("Core","Fn",t||e.AnyVar,n),e.Flags=(e,t)=>qk.Container("Core","Flags",e,t),e.BitFlags=e.Flags(qk.Num,"BitFlags")}(Wk||(Wk={}));Xk.Dictionary({0:mQ(qk.Num),1:mQ(qk.Num)});const TQ={"@header":"Language Primitives",type:{"@header":"Types",bool:CQ(Xk.Dictionary({0:mQ(qk.AnyValue)}),qk.Bool,"Convert a value to boolean."),num:CQ(Xk.Dictionary({0:mQ(qk.AnyValue)}),qk.Num,"Convert a value to number."),str:CQ(Xk.Dictionary({0:mQ(qk.AnyValue)}),qk.Str,"Convert a value to string."),regex:CQ(Xk.Dictionary({0:mQ(qk.Str,{description:"Expression"}),1:mQ(qk.Str,{isOptional:!0,description:"Flags, e.g. 'i' for ignore case"})}),Wk.Regex,"Creates a regular expression from a string using the ECMAscript syntax."),list:CQ(Xk.List(Wk.AnyVar),Wk.List()),set:CQ(Xk.List(Wk.AnyValueVar),Wk.Set()),bitflags:CQ(Xk.Dictionary({0:mQ(qk.Num)}),Wk.BitFlags,"Interpret a number as bitflags."),compositeKey:CQ(Xk.List(qk.AnyValue),qk.AnyValue)},logic:{"@header":"Logic",not:_Q(qk.Bool),and:SQ(qk.Bool),or:SQ(qk.Bool)},ctrl:{"@header":"Control",eval:CQ(Xk.Dictionary({0:mQ(Wk.Fn(Wk.AnyVar))}),Wk.AnyVar,"Evaluate a function."),fn:CQ(Xk.Dictionary({0:mQ(Wk.AnyVar)}),Wk.Fn(Wk.AnyVar),'Wrap an expression to a "lazy" function.'),if:CQ(Xk.Dictionary({0:mQ(qk.Bool,{description:"Condition"}),1:mQ(qk.Variable("a",qk.Any),{description:"If true"}),2:mQ(qk.Variable("b",qk.Any),{description:"If false"})}),qk.Union([qk.Variable("a",qk.Any),qk.Variable("b",qk.Any)])),assoc:CQ(Xk.Dictionary({0:mQ(qk.Str,{description:"Name"}),1:mQ(qk.Variable("a",qk.Any),{description:"Value to assign"})}),qk.Variable("a",qk.Any))},rel:{"@header":"Relational",eq:DQ(qk.Variable("a",qk.AnyValue,!0),qk.Bool),neq:DQ(qk.Variable("a",qk.AnyValue,!0),qk.Bool),lt:DQ(qk.Num,qk.Bool),lte:DQ(qk.Num,qk.Bool),gr:DQ(qk.Num,qk.Bool),gre:DQ(qk.Num,qk.Bool),inRange:CQ(Xk.Dictionary({0:mQ(qk.Num,{description:"Value to test"}),1:mQ(qk.Num,{description:"Minimum value"}),2:mQ(qk.Num,{description:"Maximum value"})}),qk.Bool,"Check if the value of the 1st argument is >= 2nd and <= 3rd.")},math:{"@header":"Math",add:SQ(qk.Num),sub:SQ(qk.Num),mult:SQ(qk.Num),div:DQ(qk.Num,qk.Num),pow:DQ(qk.Num,qk.Num),mod:DQ(qk.Num,qk.Num),min:SQ(qk.Num),max:SQ(qk.Num),cantorPairing:DQ(qk.Num,qk.Num),sortedCantorPairing:DQ(qk.Num,qk.Num),invertCantorPairing:CQ(Xk.Dictionary({0:mQ(qk.Num)}),Wk.List(qk.Num)),floor:_Q(qk.Num),ceil:_Q(qk.Num),roundInt:_Q(qk.Num),trunc:_Q(qk.Num),abs:_Q(qk.Num),sign:_Q(qk.Num),sqrt:_Q(qk.Num),cbrt:_Q(qk.Num),sin:_Q(qk.Num),cos:_Q(qk.Num),tan:_Q(qk.Num),asin:_Q(qk.Num),acos:_Q(qk.Num),atan:_Q(qk.Num),sinh:_Q(qk.Num),cosh:_Q(qk.Num),tanh:_Q(qk.Num),exp:_Q(qk.Num),log:_Q(qk.Num),log10:_Q(qk.Num),atan2:DQ(qk.Num,qk.Num)},str:{"@header":"Strings",concat:SQ(qk.Str),match:CQ(Xk.Dictionary({0:mQ(Wk.Regex),1:mQ(qk.Str)}),qk.Bool)},list:{"@header":"Lists",getAt:CQ(Xk.Dictionary({0:mQ(Wk.List()),1:mQ(qk.Num)}),Wk.AnyVar),equal:CQ(Xk.Dictionary({0:mQ(Wk.List()),1:mQ(Wk.List())}),qk.Bool)},set:{"@header":"Sets",has:CQ(Xk.Dictionary({0:mQ(Wk.Set(Wk.ConstrainedVar)),1:mQ(Wk.ConstrainedVar)}),qk.Bool,"Check if the the 1st argument includes the value of the 2nd."),isSubset:CQ(Xk.Dictionary({0:mQ(Wk.Set(Wk.ConstrainedVar)),1:mQ(Wk.Set(Wk.ConstrainedVar))}),qk.Bool,"Check if the the 1st argument is a subset of the 2nd.")},flags:{"@header":"Flags",hasAny:CQ(Xk.Dictionary({0:mQ(Wk.Flags(Wk.ConstrainedVar)),1:mQ(Wk.Flags(Wk.ConstrainedVar))}),qk.Bool,"Check if the the 1st argument has at least one of the 2nd one's flags."),hasAll:CQ(Xk.Dictionary({0:mQ(Wk.Flags(Wk.ConstrainedVar)),1:mQ(Wk.Flags(Wk.ConstrainedVar))}),qk.Bool,"Check if the the 1st argument has all 2nd one's flags.")}};IQ(TQ);const kQ=EQ(TQ);!function(){const e=Object.create(null);for(const t of kQ)e[t.id]=t}();var QQ;!function(e){e.ElementSymbol=qk.Value("Structure","ElementSymbol"),e.AtomName=qk.Value("Structure","AtomName"),e.BondFlag=qk.OneOf("Structure","BondFlag",qk.Str,["covalent","metallic","ion","hydrogen","sulfide","computed","aromatic"]),e.BondFlags=Wk.Flags(e.BondFlag,"BondFlags"),e.SecondaryStructureFlag=qk.OneOf("Structure","SecondaryStructureFlag",qk.Str,["alpha","beta","3-10","pi","sheet","strand","helix","turn","none"]),e.SecondaryStructureFlags=Wk.Flags(e.SecondaryStructureFlag,"SecondaryStructureFlag"),e.RingFingerprint=qk.Value("Structure","RingFingerprint"),e.EntityType=qk.OneOf("Structure","EntityType",qk.Str,["polymer","non-polymer","water","branched"]),e.EntitySubtype=qk.OneOf("Structure","EntitySubtype",qk.Str,["other","polypeptide(D)","polypeptide(L)","polydeoxyribonucleotide","polyribonucleotide","polydeoxyribonucleotide/polyribonucleotide hybrid","cyclic-pseudo-peptide","peptide nucleic acid","oligosaccharide"]),e.ObjectPrimitive=qk.OneOf("Structure","ObjectPrimitive",qk.Str,["atomistic","sphere","gaussian","other"]),e.ResidueId=qk.Value("Structure","ResidueId"),e.ElementSet=qk.Value("Structure","ElementSet"),e.ElementSelection=qk.Value("Structure","ElementSelection"),e.ElementReference=qk.Value("Structure","ElementReference"),e.ElementSelectionQuery=Wk.Fn(e.ElementSelection,"ElementSelectionQuery")}(QQ||(QQ={}));function MQ(e,t){return CQ(Xk.Dictionary({0:mQ(QQ.ElementReference,{isOptional:!0,defaultValue:"slot.current-atom"})}),e,t)}function RQ(e,t){return CQ(Xk.None,e,t)}const PQ={core:TQ,structureQuery:{"@header":"Structure Queries",type:{"@header":"Types",elementSymbol:CQ(Xk.Dictionary({0:mQ(qk.Str)}),QQ.ElementSymbol,"Create element symbol representation from a string value."),atomName:CQ(Xk.Dictionary({0:mQ(qk.AnyValue)}),QQ.AtomName,"Convert a value to an atom name."),entityType:CQ(Xk.Dictionary({0:mQ(QQ.EntityType)}),QQ.EntityType,`Create normalized representation of entity type: ${qk.oneOfValues(QQ.EntityType).join(", ")}.`),bondFlags:CQ(Xk.List(QQ.BondFlag),QQ.BondFlags,`Create bond flags representation from a list of strings. Allowed flags: ${qk.oneOfValues(QQ.BondFlag).join(", ")}.`),ringFingerprint:CQ(Xk.List(QQ.ElementSymbol,{nonEmpty:!0}),QQ.RingFingerprint,"Create ring fingerprint from the supplied atom element list."),secondaryStructureFlags:CQ(Xk.List(QQ.SecondaryStructureFlag),QQ.SecondaryStructureFlags,`Create secondary structure flags representation from a list of strings. Allowed flags: ${qk.oneOfValues(QQ.SecondaryStructureFlag).join(", ")}.`),authResidueId:CQ(Xk.Dictionary({0:mQ(qk.Str,{description:"auth_asym_id"}),1:mQ(qk.Num,{description:"auth_seq_id"}),2:mQ(qk.Str,{description:"pdbx_PDB_ins_code",isOptional:!0})}),QQ.ResidueId,'Residue identifier based on "auth_" annotation.'),labelResidueId:CQ(Xk.Dictionary({0:mQ(qk.Str,{description:"label_entity_id"}),1:mQ(qk.Str,{description:"label_asym_id"}),2:mQ(qk.Num,{description:"label_seq_id"}),3:mQ(qk.Str,{description:"pdbx_PDB_ins_code",isOptional:!0})}),QQ.ResidueId,'Residue identifier based on mmCIF\'s "label_" annotation.')},slot:{"@header":"Iteration Slots",element:CQ(Xk.None,QQ.ElementReference,"A reference to the current element."),elementSetReduce:CQ(Xk.None,qk.Variable("a",qk.AnyValue,!0),"Current value of the element set reducer.")},generator:{"@header":"Generators",all:CQ(Xk.None,QQ.ElementSelectionQuery,"The entire structure."),atomGroups:CQ(Xk.Dictionary({"entity-test":mQ(qk.Bool,{isOptional:!0,defaultValue:!0,description:"Test for the 1st atom of every entity"}),"chain-test":mQ(qk.Bool,{isOptional:!0,defaultValue:!0,description:"Test for the 1st atom of every chain"}),"residue-test":mQ(qk.Bool,{isOptional:!0,defaultValue:!0,description:"Test for the 1st atom every residue"}),"atom-test":mQ(qk.Bool,{isOptional:!0,defaultValue:!0}),"group-by":mQ(qk.Any,{isOptional:!0,defaultValue:"atom-key",description:"Group atoms to sets based on this property. Default: each atom has its own set"})}),QQ.ElementSelectionQuery,"Return all atoms for which the tests are satisfied, grouped into sets."),bondedAtomicPairs:CQ(Xk.Dictionary({0:mQ(qk.Bool,{isOptional:!0,defaultValue:"true for covalent bonds",description:"Test each bond with this predicate. Each bond is visited twice with swapped atom order."})}),QQ.ElementSelectionQuery,"Return all pairs of atoms for which the test is satisfied."),rings:CQ(Xk.Dictionary({fingerprint:mQ(QQ.RingFingerprint,{isOptional:!0}),"only-aromatic":mQ(qk.Bool,{isOptional:!0,defaultValue:!1})}),QQ.ElementSelectionQuery,"Return all rings or those with the specified fingerprint and/or only aromatic rings."),queryInSelection:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery),query:mQ(QQ.ElementSelectionQuery),"in-complement":mQ(qk.Bool,{isOptional:!0,defaultValue:!1})}),QQ.ElementSelectionQuery,"Executes query only on atoms that are in the source selection."),empty:CQ(Xk.None,QQ.ElementSelectionQuery,"Nada.")},modifier:{"@header":"Selection Modifications",queryEach:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery),query:mQ(QQ.ElementSelectionQuery)}),QQ.ElementSelectionQuery,"Query every atom set in the input selection separately."),intersectBy:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery),by:mQ(QQ.ElementSelectionQuery)}),QQ.ElementSelectionQuery,"Intersect each atom set from the first sequence from atoms in the second one."),exceptBy:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery),by:mQ(QQ.ElementSelectionQuery)}),QQ.ElementSelectionQuery,"Remove all atoms from 'selection' that occur in 'by'."),unionBy:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery),by:mQ(QQ.ElementSelectionQuery)}),QQ.ElementSelectionQuery,"For each atom set A in the orginal sequence, combine all atoms sets in the target selection that intersect with A."),union:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery)}),QQ.ElementSelectionQuery,"Collects all atom sets in the sequence into a single atom set."),cluster:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery),"min-distance":mQ(qk.Num,{isOptional:!0,defaultValue:0}),"max-distance":mQ(qk.Num),"min-size":mQ(qk.Num,{description:"Minimal number of sets to merge, must be at least 2",isOptional:!0,defaultValue:2}),"max-size":mQ(qk.Num,{description:"Maximal number of sets to merge, if not set, no limit",isOptional:!0})}),QQ.ElementSelectionQuery,"Combines atom sets that have mutual distance in the interval [min-radius, max-radius]. Minimum/maximum size determines how many atom sets can be combined."),includeSurroundings:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery),radius:mQ(qk.Num),"atom-radius":mQ(qk.Num,{isOptional:!0,defaultValue:0,description:"Value added to each atom before the distance check, for example VDW radius. Using this argument is computationally demanding."}),"as-whole-residues":mQ(qk.Bool,{isOptional:!0})}),QQ.ElementSelectionQuery,"For each atom set in the selection, include all surrouding atoms/residues that are within the specified radius."),surroundingLigands:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery),radius:mQ(qk.Num),"include-water":mQ(qk.Bool,{isOptional:!0,defaultValue:!0})}),QQ.ElementSelectionQuery,"Find all ligands components around the source query."),includeConnected:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery),"bond-test":mQ(qk.Bool,{isOptional:!0,defaultValue:"true for covalent bonds"}),"layer-count":mQ(qk.Num,{isOptional:!0,defaultValue:1,description:"Number of bonded layers to include."}),"fixed-point":mQ(qk.Bool,{isOptional:!0,defaultValue:!1,description:"Continue adding layers as long as new connections exist."}),"as-whole-residues":mQ(qk.Bool,{isOptional:!0})}),QQ.ElementSelectionQuery,"Pick all atom sets that are connected to the target."),wholeResidues:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery)}),QQ.ElementSelectionQuery,"Expand the selection to whole residues."),expandProperty:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery),property:mQ(qk.AnyValue)}),QQ.ElementSelectionQuery,"To each atom set in the selection, add all atoms that have the same property value that was already present in the set.")},filter:{"@header":"Selection Filters",pick:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery),test:mQ(qk.Bool)}),QQ.ElementSelectionQuery,"Pick all atom sets that satisfy the test."),first:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery)}),QQ.ElementSelectionQuery,"Take the 1st atom set in the sequence."),withSameAtomProperties:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery),source:mQ(QQ.ElementSelectionQuery),property:mQ(qk.Any)}),QQ.ElementSelectionQuery,"Pick all atom sets for which the set of given atom properties is a subset of the source properties."),intersectedBy:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery),by:mQ(QQ.ElementSelectionQuery)}),QQ.ElementSelectionQuery,"Pick all atom sets that have non-zero intersection with the target."),within:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery),target:mQ(QQ.ElementSelectionQuery),"min-radius":mQ(qk.Num,{isOptional:!0,defaultValue:0}),"max-radius":mQ(qk.Num),"atom-radius":mQ(qk.Num,{isOptional:!0,defaultValue:0,description:"Value added to each atom before the distance check, for example VDW radius. Using this argument is computationally demanding."}),invert:mQ(qk.Bool,{isOptional:!0,defaultValue:!1,description:"If true, pick only atom sets that are further than the specified radius."})}),QQ.ElementSelectionQuery,"Pick all atom sets from selection that have any atom within the radius of any atom from target."),isConnectedTo:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery),target:mQ(QQ.ElementSelectionQuery),"bond-test":mQ(qk.Bool,{isOptional:!0,defaultValue:"true for covalent bonds"}),disjunct:mQ(qk.Bool,{isOptional:!0,defaultValue:!0,description:"If true, there must exist a bond to an atom that lies outside the given atom set to pass test."}),invert:mQ(qk.Bool,{isOptional:!0,defaultValue:!1,description:"If true, return atom sets that are not connected."})}),QQ.ElementSelectionQuery,"Pick all atom sets that are connected to the target.")},combinator:{"@header":"Selection Combinators",intersect:CQ(Xk.List(QQ.ElementSelectionQuery),QQ.ElementSelectionQuery,"Return all unique atom sets that appear in all of the source selections."),merge:CQ(Xk.List(QQ.ElementSelectionQuery),QQ.ElementSelectionQuery,"Merges multiple selections into a single one. Only unique atom sets are kept."),distanceCluster:CQ(Xk.Dictionary({matrix:mQ(Wk.List(Wk.List(qk.Num)),{description:"Distance matrix, represented as list of rows (num[][])). Lower triangle is min distance, upper triangle is max distance."}),selections:mQ(Wk.List(QQ.ElementSelectionQuery),{description:"A list of held selections."})}),QQ.ElementSelectionQuery,"Pick combinations of atom sets from the source sequences that are mutually within distances specified by a matrix.")},atomSet:{"@header":"Atom Sets",atomCount:CQ(Xk.None,qk.Num),countQuery:CQ(Xk.Dictionary({0:mQ(QQ.ElementSelectionQuery)}),qk.Num,"Counts the number of occurences of a specific query inside the current atom set."),reduce:CQ(Xk.Dictionary({initial:mQ(qk.Variable("a",qk.AnyValue,!0),{description:"Initial value assigned to slot.atom-set-reduce. Current atom is set to the 1st atom of the current set for this."}),value:mQ(qk.Variable("a",qk.AnyValue,!0),{description:"Expression executed for each atom in the set"})}),qk.Variable("a",qk.AnyValue,!0),"Execute the value expression for each atom in the current atom set and return the result. Works the same way as Array.reduce in JavaScript (``result = value(value(...value(initial)))``)"),propertySet:CQ(Xk.Dictionary({0:mQ(Wk.ConstrainedVar)}),Wk.Set(Wk.ConstrainedVar),"Returns a set with all values of the given property in the current atom set.")},atomProperty:{"@header":"Atom Properties",core:{"@header":"Core Properties",elementSymbol:MQ(QQ.ElementSymbol),vdw:MQ(qk.Num,"Van der Waals radius"),mass:MQ(qk.Num,"Atomic weight"),atomicNumber:MQ(qk.Num,"Atomic number"),x:MQ(qk.Num,"Cartesian X coordinate"),y:MQ(qk.Num,"Cartesian Y coordinate"),z:MQ(qk.Num,"Cartesian Z coordinate"),atomKey:MQ(qk.AnyValue,"Unique value for each atom. Main use case is grouping of atoms."),bondCount:CQ(Xk.Dictionary({0:mQ(QQ.ElementReference,{isOptional:!0,defaultValue:"slot.current-atom"}),flags:mQ(QQ.BondFlags,{isOptional:!0,defaultValue:"covalent"})}),qk.Num,"Number of bonds (by default only covalent bonds are counted)."),sourceIndex:MQ(qk.Num,"Index of the atom/element in the input file."),operatorName:MQ(qk.Str,"Name of the symmetry operator applied to this element."),operatorKey:MQ(qk.Num,"Key of the symmetry operator applied to this element."),modelIndex:MQ(qk.Num,"Index of the model in the input file."),modelLabel:MQ(qk.Str,"Label/header of the model in the input file.")},topology:{connectedComponentKey:MQ(qk.AnyValue,"Unique value for each connected component.")},macromolecular:{"@header":"Macromolecular Properties (derived from the mmCIF format)",authResidueId:MQ(QQ.ResidueId,"type.auth-residue-id symbol executed on current atom's residue"),labelResidueId:MQ(QQ.ResidueId,"type.label-residue-id symbol executed on current atom's residue"),residueKey:MQ(qk.AnyValue,"Unique value for each tuple ``(label_entity_id,auth_asym_id, auth_seq_id, pdbx_PDB_ins_code)``, main use case is grouping of atoms"),chainKey:MQ(qk.AnyValue,"Unique value for each tuple ``(label_entity_id, auth_asym_id)``, main use case is grouping of atoms"),entityKey:MQ(qk.AnyValue,"Unique value for each tuple ``label_entity_id``, main use case is grouping of atoms"),isHet:MQ(qk.Bool,"Equivalent to atom_site.group_PDB !== ATOM"),id:MQ(qk.Num,"_atom_site.id"),label_atom_id:MQ(QQ.AtomName),label_alt_id:MQ(qk.Str),label_comp_id:MQ(qk.Str),label_asym_id:MQ(qk.Str),label_entity_id:MQ(qk.Str),label_seq_id:MQ(qk.Num),auth_atom_id:MQ(QQ.AtomName),auth_comp_id:MQ(qk.Str),auth_asym_id:MQ(qk.Str),auth_seq_id:MQ(qk.Num),pdbx_PDB_ins_code:MQ(qk.Str),pdbx_formal_charge:MQ(qk.Num),occupancy:MQ(qk.Num),B_iso_or_equiv:MQ(qk.Num),entityType:MQ(QQ.EntityType,"Type of the entity as defined in mmCIF (polymer, non-polymer, branched, water)"),entitySubtype:MQ(QQ.EntitySubtype,"Subtype of the entity as defined in mmCIF _entity_poly.type and _pdbx_entity_branch.type (other, polypeptide(D), polypeptide(L), polydeoxyribonucleotide, polyribonucleotide, polydeoxyribonucleotide/polyribonucleotide hybrid, cyclic-pseudo-peptide, peptide nucleic acid, oligosaccharide)"),entityPrdId:MQ(qk.Str,"The PRD ID of the entity."),entityDescription:MQ(Wk.List(qk.Str)),objectPrimitive:MQ(QQ.ObjectPrimitive,"Type of the primitive object used to model this segment as defined in mmCIF/IHM (atomistic, sphere, gaussian, other)"),secondaryStructureKey:MQ(qk.AnyValue,"Unique value for each secondary structure element."),secondaryStructureFlags:MQ(QQ.SecondaryStructureFlags),isModified:MQ(qk.Bool,"True if the atom belongs to modification of a standard residue."),modifiedParentName:MQ(qk.Str,"'3-letter' code of the modifed parent residue."),isNonStandard:MQ(qk.Bool,"True if this is a non-standard residue."),chemCompType:MQ(qk.Str,"Type of the chemical component as defined in mmCIF.")}},bondProperty:{"@header":"Bond Properties",flags:RQ(QQ.BondFlags),order:RQ(qk.Num),key:RQ(qk.Num),length:RQ(qk.Num),atomA:RQ(QQ.ElementReference),atomB:RQ(QQ.ElementReference)}},internal:{"@header":"Internal Queries",generator:{"@header":"Generators",bundleElement:CQ(Xk.Dictionary({groupedUnits:mQ(qk.Any),set:mQ(qk.Any),ranges:mQ(qk.Any)}),qk.Any),bundle:CQ(Xk.Dictionary({elements:mQ(qk.Any)}),QQ.ElementSelectionQuery,"A selection with single structure containing represented by the bundle."),current:CQ(Xk.None,QQ.ElementSelectionQuery,"Current selection provided by the query context. Avoid using this in State Transforms.")}}};IQ(PQ);const OQ=EQ(PQ);!function(){const e=Object.create(null);for(const t of OQ)e[t.id]=t}();var FQ;!function(e){e.core=PQ.core,e.struct=PQ.structureQuery,e.internal=PQ.internal,e.atomName=function(t){return e.struct.type.atomName([t])},e.es=function(t){return e.struct.type.elementSymbol([t])},e.list=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.core.type.list(n)},e.set=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.core.type.set(n)},e.re=function(t,n){return e.core.type.regex([t,n])},e.fn=function(t){return e.core.ctrl.fn([t])},e.evaluate=function(t){return e.core.ctrl.eval([t])};const t=e.struct.atomProperty.core,n=e.struct.atomProperty.macromolecular,r=e.struct.atomProperty.topology;function o(e){return t[e]()}function i(e){return r[e]()}function a(e){return n[e]()}e.acp=o,e.atp=i,e.ammp=a;const s=e.struct.atomSet.propertySet;e.acpSet=function(e){return s([o(e)])},e.atpSet=function(e){return s([i(e)])},e.ammpSet=function(e){return s([a(e)])}}(FQ||(FQ={}));const NQ=new Set(["145","147","149","289","291","293","445","475","491","510","604","045","05L","07E","07Y","08U","09X","0AT","0BD","0H0","0HX","0LP","0MK","0NZ","0TS","0UB","0V4","0WK","0XY","0YT","10M","12E","14T","15L","16F","16G","16O","17T","18D","18O","18T","1AR","1BW","1CF","1FT","1GL","1GN","1JB","1LL","1NA","1S3","1S4","1SD","1X4","20S","20X","22O","22S","23V","24S","25E","26M","26O","26Q","26R","26V","26W","26Y","27C","2DG","2DR","2F8","2FG","2FL","2FP","2GL","2GS","2H5","2HA","2M4","2M5","2M8","2OS","2SI","2WP","2WS","32O","34V","38J","3BU","3CM","3DO","3DY","3FM","3GR","3HD","3J3","3J4","3LJ","3LR","3MF","3MG","3MK","3R3","3S6","3SA","3YW","40J","42D","44S","46D","46M","46Z","48Z","49A","49S","49T","49V","4AM","4CQ","4GC","4GL","4GP","4JA","4N2","4NN","4QY","4R1","4RS","4SG","4U0","4U1","4U2","4UZ","4V5","50A","51N","56N","57S","5DI","5GF","5GO","5II","5KQ","5KS","5KT","5KV","5L2","5L3","5LS","5LT","5MM","5N6","5QP","5RP","5SA","5SP","5TH","5TJ","5TK","5TM","61J","62I","64K","66O","6BG","6C2","6DM","6GB","6GP","6GR","6K3","6KH","6KL","6KS","6KU","6KW","6LA","6LS","6LW","6MJ","6MN","6PG","6PY","6PZ","6S2","6SA","6UD","6Y6","6YR","6ZC","73E","79J","7CV","7D1","7GP","7JZ","7K2","7K3","7NU","7SA","83Y","89Y","8B7","8B9","8EX","8GA","8GG","8GP","8I4","8LM","8LR","8OQ","8PK","8S0","8YV","95Z","96O","98U","9AM","9C1","9CD","9GP","9KJ","9MR","9OK","9PG","9QG","9QZ","9RN","9S7","9SG","9SJ","9SM","9SP","9T1","9T7","9VP","9WJ","9WN","9WZ","9YW","A0K","A1AIO","A1H0Z","A1Q","A2G","A5C","A6P","AAL","AAO","ABC","ABD","ABE","ABF","ABL","AC1","ACG","ACR","ACX","ADA","ADG","ADR","AF1","AFD","AFL","AFO","AFP","AFR","AGC","AGH","AGL","AGR","AH2","AH8","AHG","AHM","AHR","AIG","ALL","ALX","AMG","AMN","AMU","AMV","ANA","AOG","AOS","AQA","ARA","ARB","ARE","ARI","ARW","ASC","ASG","ASO","AXP","AXR","AY9","AZC","B0D","B16","B1H","B1N","B2G","B4G","B6D","B7G","B8D","B9D","BBK","BBV","BCD","BCW","BDF","BDG","BDP","BDR","BDZ","BEM","BFN","BFP","BG6","BG8","BGC","BGL","BGN","BGP","BGS","BHG","BM3","BM7","BMA","BMX","BND","BNG","BNX","BO1","BOG","BQY","BRI","BS7","BTG","BTU","BW3","BWG","BXF","BXP","BXX","BXY","BZD","C3B","C3G","C3X","C4B","C4W","C4X","C5X","CAP","CBF","CBI","CBK","CDR","CE5","CE6","CE8","CEG","CEX","CEY","CEZ","CGF","CJB","CKB","CKP","CNP","CR1","CR6","CRA","CT3","CTO","CTR","CTT","D0N","D1M","D5E","D6G","DAF","DAG","DAN","DDA","DDB","DDL","DEG","DEL","DFR","DFX","DG0","DGC","DGD","DGM","DGO","DGS","DGU","DIG","DJB","DJE","DK4","DKX","DKZ","DL6","DLD","DLF","DLG","DMU","DNO","DO8","DOM","DP5","DPC","DQQ","DQR","DR2","DR3","DR4","DR5","DRI","DSR","DT6","DVC","DYM","E3M","E4P","E5G","EAG","EBG","EBQ","EEN","EEQ","EGA","EJT","EMP","EMZ","EPG","EQP","EQV","ERE","ERI","ETT","EUS","F1P","F1X","F55","F58","F6P","F8X","FBP","FCA","FCB","FCT","FDP","FDQ","FFC","FFX","FIF","FIX","FK9","FKD","FMF","FMO","FNG","FNY","FRU","FSA","FSI","FSM","FSR","FSW","FU4","FUB","FUC","FUD","FUF","FUL","FUY","FVQ","FX1","FYJ","G0S","G16","G1P","G20","G28","G2F","G3F","G3I","G4D","G4S","G6D","G6P","G6S","G7P","G8Z","GAA","GAC","GAD","GAF","GAL","GAT","GBH","GC1","GC4","GC9","GCB","GCD","GCN","GCO","GCS","GCT","GCU","GCV","GCW","GDA","GDL","GE1","GE3","GFP","GIV","GL0","GL1","GL2","GL4","GL5","GL6","GL7","GL9","GLA","GLB","GLC","GLD","GLF","GLG","GLO","GLP","GLS","GLT","GLW","GM0","GMB","GMH","GMT","GMZ","GN1","GN4","GNS","GNX","GP0","GP1","GP4","GPH","GPK","GPM","GPO","GPQ","GPU","GPV","GPW","GQ1","GRF","GRX","GS1","GS4","GS9","GSA","GSD","GTE","GTH","GTK","GTM","GTR","GU0","GU1","GU2","GU3","GU4","GU5","GU6","GU8","GU9","GUF","GUL","GUP","GUZ","GXL","GXV","GYE","GYG","GYP","GYU","GYV","GZL","H1M","H1S","H2P","H3S","H53","H6Q","H6Z","HBZ","HD4","HDL","HMS","HNV","HNW","HSG","HSH","HSJ","HSQ","HSR","HSU","HSX","HSY","HSZ","HTG","HTM","HVC","I57","IAB","IDC","IDF","IDG","IDR","IDS","IDT","IDU","IDX","IDY","IEM","IN1","IPT","ISD","ISL","ISX","IVG","IXD","J5B","JFZ","JHM","JLT","JRV","JS2","JSV","JV4","JVA","JVS","JZR","K5B","K99","KBA","KBG","KD5","KDA","KDB","KDD","KDE","KDF","KDM","KDN","KDO","KDR","KFN","KG1","KGM","KHP","KME","KO1","KO2","KOT","KQC","KTU","L1L","L6N","L6S","L6T","LAG","LAH","LAI","LAK","LAO","LAT","LB2","LBS","LBT","LCN","LDY","LEC","LER","LFC","LFR","LGC","LGU","LKA","LKS","LM2","LMO","LMT","LMU","LNV","LOG","LOX","LPK","LRH","LSM","LTG","LTM","LVO","LVZ","LXB","LXC","LXZ","LZ0","M1F","M1P","M2F","M3M","M3N","M55","M6D","M6P","M7B","M7P","M8C","MA1","MA2","MA3","MA8","MAB","MAF","MAG","MAL","MAN","MAT","MAV","MAW","MBE","MBF","MBG","MCU","MDA","MDP","MFA","MFB","MFU","MG5","MGA","MGC","MGL","MGS","MJJ","MLB","MLR","MMA","MMN","MN0","MNA","MQG","MQT","MRH","MRP","MSX","MTT","MUB","MUG","MUR","MVP","MXY","MXZ","MYG","N1L","N3U","N9S","NA1","NAA","NAG","NBG","NBX","NBY","NDG","NED","NFG","NG1","NG6","NGA","NGB","NGC","NGE","NGF","NGK","NGL","NGR","NGS","NGY","NGZ","NHF","NLC","NM6","NM9","NNG","NPF","NSQ","NT1","NTF","NTO","NTP","NXD","NYT","O1G","OAK","OEL","OI7","OPM","ORP","OSU","OTG","OTN","OTU","OX2","P53","P6P","P8E","PA1","PA5","PAV","PDX","PH5","PKM","PNA","PNG","PNJ","PNW","PPC","PRP","PSG","PSJ","PSV","PTQ","PUF","PZU","QDK","QIF","QKH","QPS","QV4","R1P","R1X","R2B","R2G","R5P","RAA","RAE","RAF","RAM","RAO","RAT","RB5","RBL","RCD","RDP","REL","RER","RF5","RG1","RGG","RHA","RHC","RI2","RIB","RIP","RM4","RNS","RNT","ROB","ROR","RP3","RP5","RP6","RPA","RR7","RRJ","RRY","RST","RTG","RTV","RUB","RUG","RUU","RV7","RVG","RVM","RWI","RY7","RZM","S6P","S7P","S81","SA0","SCG","SCR","SDD","SDY","SEJ","SF6","SF9","SFJ","SFU","SG4","SG5","SG6","SG7","SGA","SGC","SGD","SGN","SGS","SHB","SHD","SHG","SI3","SIA","SID","SIO","SIZ","SLB","SLM","SLT","SMD","SN5","SNG","SOE","SOG","SOL","SOR","SR1","SSG","SSH","STW","STZ","SUC","SUP","SUS","SWE","SZZ","T68","T6D","T6P","T6T","TA6","TAG","TCB","TCG","TDG","TEU","TF0","TFU","TGA","TGK","TGR","TGY","TH1","TM5","TM6","TM9","TMR","TMX","TNX","TOA","TOC","TQY","TRE","TRV","TS8","TT7","TTV","TTZ","TU4","TUG","TUJ","TUP","TUR","TVD","TVG","TVM","TVS","TVV","TVY","TW7","TWA","TWD","TWG","TWJ","TWY","TXB","TY6","TYV","U1Y","U2A","U2D","U63","U8V","U97","U9A","U9D","U9G","U9J","U9M","UAP","UBH","UBO","UCD","UDC","UEA","V3M","V3P","V71","VDF","VG1","VJ1","VJ4","VKN","VTB","W9T","WIA","WOO","WUN","WZ1","WZ2","WZ4","X0X","X1P","X1X","X2F","X2Y","X34","X4S","X5S","X6X","X6Y","XBP","XDP","XDX","XGP","XIL","XKJ","XLF","XLS","XMM","XS2","XUL","XXM","XXR","XXX","XY6","XY9","XYB","XYF","XYL","XYP","XYS","XYT","XYZ","YDR","YIO","YJM","YKR","YO5","YX0","YX1","YYB","YYD","YYH","YYJ","YYK","YYM","YYQ","YYR","YZ0","YZT","Z0F","Z15","Z16","Z2D","Z2T","Z3K","Z3L","Z3Q","Z3U","Z4K","Z4R","Z4S","Z4U","Z4V","Z4W","Z4Y","Z57","Z5J","Z5L","Z61","Z6G","Z6H","Z6J","Z6W","Z8H","Z8T","Z9D","Z9E","Z9H","Z9K","Z9L","Z9M","Z9N","Z9W","ZB0","ZB1","ZB2","ZB3","ZCD","ZCZ","ZD0","ZDC","ZDM","ZDO","ZEE","ZEL","ZGE","ZMR","UMQ","SQD"]);var LQ;!function(e){e[e.FilledSphere=0]="FilledSphere",e[e.FilledCube=1]="FilledCube",e[e.CrossedCube=2]="CrossedCube",e[e.DividedDiamond=3]="DividedDiamond",e[e.FilledCone=4]="FilledCone",e[e.DevidedCone=5]="DevidedCone",e[e.FlatBox=6]="FlatBox",e[e.FilledStar=7]="FilledStar",e[e.FilledDiamond=8]="FilledDiamond",e[e.FlatDiamond=9]="FlatDiamond",e[e.FlatHexagon=10]="FlatHexagon",e[e.Pentagon=11]="Pentagon",e[e.DiamondPrism=12]="DiamondPrism",e[e.PentagonalPrism=13]="PentagonalPrism",e[e.HexagonalPrism=14]="HexagonalPrism",e[e.HeptagonalPrism=15]="HeptagonalPrism"}(LQ||(LQ={}));const UQ={Blue:37052,Green:42577,Yellow:16765952,Orange:16021792,Pink:16162465,Purple:10830745,LightBlue:9424105,Brown:10582605,Red:15539236,Secondary:15854817};var GQ;!function(e){e[e.Hexose=0]="Hexose",e[e.HexNAc=1]="HexNAc",e[e.Hexosamine=2]="Hexosamine",e[e.Hexuronate=3]="Hexuronate",e[e.Deoxyhexose=4]="Deoxyhexose",e[e.DeoxyhexNAc=5]="DeoxyhexNAc",e[e.DiDeoxyhexose=6]="DiDeoxyhexose",e[e.Pentose=7]="Pentose",e[e.Deoxynonulosonate=8]="Deoxynonulosonate",e[e.DiDeoxynonulosonate=9]="DiDeoxynonulosonate",e[e.Unknown=10]="Unknown",e[e.Assigned=11]="Assigned"}(GQ||(GQ={}));GQ.Hexose,GQ.HexNAc,GQ.Hexosamine,GQ.Hexuronate,GQ.Deoxyhexose,GQ.DeoxyhexNAc,GQ.DiDeoxyhexose,GQ.Pentose,GQ.Deoxynonulosonate,GQ.DiDeoxynonulosonate,GQ.Unknown,GQ.Assigned;const jQ={[GQ.Hexose]:LQ.FilledSphere,[GQ.HexNAc]:LQ.FilledCube,[GQ.Hexosamine]:LQ.CrossedCube,[GQ.Hexuronate]:LQ.DividedDiamond,[GQ.Deoxyhexose]:LQ.FilledCone,[GQ.DeoxyhexNAc]:LQ.DevidedCone,[GQ.DiDeoxyhexose]:LQ.FlatBox,[GQ.Pentose]:LQ.FilledStar,[GQ.Deoxynonulosonate]:LQ.FilledDiamond,[GQ.DiDeoxynonulosonate]:LQ.FlatDiamond,[GQ.Unknown]:LQ.FlatHexagon,[GQ.Assigned]:LQ.Pentagon};function zQ(e,t){return e===GQ.Unknown?4===t?LQ.DiamondPrism:5===t?LQ.PentagonalPrism:6===t?LQ.HexagonalPrism:7===t?LQ.HeptagonalPrism:LQ.FlatHexagon:jQ[e]}const HQ={abbr:"Unk",name:"Unknown",color:UQ.Secondary,type:GQ.Unknown},VQ=[{abbr:"Glc",name:"Glucose",color:UQ.Blue,type:GQ.Hexose},{abbr:"Man",name:"Mannose",color:UQ.Green,type:GQ.Hexose},{abbr:"Gal",name:"Galactose",color:UQ.Yellow,type:GQ.Hexose},{abbr:"Gul",name:"Gulose",color:UQ.Orange,type:GQ.Hexose},{abbr:"Alt",name:"Altrose",color:UQ.Pink,type:GQ.Hexose},{abbr:"All",name:"Allose",color:UQ.Purple,type:GQ.Hexose},{abbr:"Tal",name:"Talose",color:UQ.LightBlue,type:GQ.Hexose},{abbr:"Ido",name:"Idose",color:UQ.Brown,type:GQ.Hexose},{abbr:"GlcNAc",name:"N-Acetyl Glucosamine",color:UQ.Blue,type:GQ.HexNAc},{abbr:"ManNAc",name:"N-Acetyl Mannosamine",color:UQ.Green,type:GQ.HexNAc},{abbr:"GalNAc",name:"N-Acetyl Galactosamine",color:UQ.Yellow,type:GQ.HexNAc},{abbr:"GulNAc",name:"N-Acetyl Gulosamine",color:UQ.Orange,type:GQ.HexNAc},{abbr:"AltNAc",name:"N-Acetyl Altrosamine",color:UQ.Pink,type:GQ.HexNAc},{abbr:"AllNAc",name:"N-Acetyl Allosamine",color:UQ.Purple,type:GQ.HexNAc},{abbr:"TalNAc",name:"N-Acetyl Talosamine",color:UQ.LightBlue,type:GQ.HexNAc},{abbr:"IdoNAc",name:"N-Acetyl Idosamine",color:UQ.Brown,type:GQ.HexNAc},{abbr:"GlcN",name:"Glucosamine",color:UQ.Blue,type:GQ.Hexosamine},{abbr:"ManN",name:"Mannosamine",color:UQ.Green,type:GQ.Hexosamine},{abbr:"GalN",name:"Galactosamine",color:UQ.Yellow,type:GQ.Hexosamine},{abbr:"GulN",name:"Gulosamine",color:UQ.Orange,type:GQ.Hexosamine},{abbr:"AltN",name:"Altrosamine",color:UQ.Pink,type:GQ.Hexosamine},{abbr:"AllN",name:"Allosamine",color:UQ.Purple,type:GQ.Hexosamine},{abbr:"TalN",name:"Talosamine",color:UQ.LightBlue,type:GQ.Hexosamine},{abbr:"IdoN",name:"Idosamine",color:UQ.Brown,type:GQ.Hexosamine},{abbr:"GlcA",name:"Glucuronic Acid",color:UQ.Blue,type:GQ.Hexuronate},{abbr:"ManA",name:"Mannuronic Acid",color:UQ.Green,type:GQ.Hexuronate},{abbr:"GalA",name:"Galacturonic Acid",color:UQ.Yellow,type:GQ.Hexuronate},{abbr:"GulA",name:"Guluronic Acid",color:UQ.Orange,type:GQ.Hexuronate},{abbr:"AltA",name:"Altruronic Acid",color:UQ.Pink,type:GQ.Hexuronate},{abbr:"AllA",name:"Alluronic Acid",color:UQ.Purple,type:GQ.Hexuronate},{abbr:"TalA",name:"Taluronic Acid",color:UQ.LightBlue,type:GQ.Hexuronate},{abbr:"IdoA",name:"Iduronic Acid",color:UQ.Brown,type:GQ.Hexuronate},{abbr:"Qui",name:"Quinovose",color:UQ.Blue,type:GQ.Deoxyhexose},{abbr:"Rha",name:"Rhamnose",color:UQ.Green,type:GQ.Deoxyhexose},{abbr:"6dGul",name:"6-Deoxy Gulose",color:UQ.Orange,type:GQ.Deoxyhexose},{abbr:"6dAlt",name:"6-Deoxy Altrose",color:UQ.Pink,type:GQ.Deoxyhexose},{abbr:"6dTal",name:"6-Deoxy Talose",color:UQ.LightBlue,type:GQ.Deoxyhexose},{abbr:"Fuc",name:"Fucose",color:UQ.Red,type:GQ.Deoxyhexose},{abbr:"QuiNAc",name:"N-Acetyl Quinovosamine",color:UQ.Blue,type:GQ.DeoxyhexNAc},{abbr:"RhaNAc",name:"N-Acetyl Rhamnosamine",color:UQ.Green,type:GQ.DeoxyhexNAc},{abbr:"6dAltNAc",name:"N-Acetyl 6-Deoxy Altrosamine",color:UQ.Pink,type:GQ.DeoxyhexNAc},{abbr:"6dTalNAc",name:"N-Acetyl 6-Deoxy Talosamine",color:UQ.LightBlue,type:GQ.DeoxyhexNAc},{abbr:"FucNAc",name:"N-Acetyl Fucosamine",color:UQ.Red,type:GQ.DeoxyhexNAc},{abbr:"Oli",name:"Olivose",color:UQ.Blue,type:GQ.DiDeoxyhexose},{abbr:"Tyv",name:"Tyvelose",color:UQ.Green,type:GQ.DiDeoxyhexose},{abbr:"Abe",name:"Abequose",color:UQ.Orange,type:GQ.DiDeoxyhexose},{abbr:"Par",name:"Paratose",color:UQ.Pink,type:GQ.DiDeoxyhexose},{abbr:"Dig",name:"Digitoxose",color:UQ.Purple,type:GQ.DiDeoxyhexose},{abbr:"Col",name:"Colitose",color:UQ.LightBlue,type:GQ.DiDeoxyhexose},{abbr:"Ara",name:"Arabinose",color:UQ.Green,type:GQ.Pentose},{abbr:"Lyx",name:"Lyxose",color:UQ.Yellow,type:GQ.Pentose},{abbr:"Xyl",name:"Xylose",color:UQ.Orange,type:GQ.Pentose},{abbr:"Rib",name:"Ribose",color:UQ.Pink,type:GQ.Pentose},{abbr:"Kdn",name:"Keto-Deoxy Nonulonic Acid",color:UQ.Green,type:GQ.Deoxynonulosonate},{abbr:"Neu5Ac",name:"N-Acetyl Neuraminic Acid",color:UQ.Purple,type:GQ.Deoxynonulosonate},{abbr:"Neu5Gc",name:"N-Glycolyl Neuraminic Acid",color:UQ.LightBlue,type:GQ.Deoxynonulosonate},{abbr:"Neu",name:"Neuraminic Acid",color:UQ.Brown,type:GQ.Deoxynonulosonate},{abbr:"Sia",name:"Sialic acid",color:UQ.Red,type:GQ.Deoxynonulosonate},{abbr:"Pse",name:"Pseudaminic Acid",color:UQ.Green,type:GQ.DiDeoxynonulosonate},{abbr:"Leg",name:"Legionaminic Acid",color:UQ.Yellow,type:GQ.DiDeoxynonulosonate},{abbr:"Aci",name:"Acinetaminic Acid",color:UQ.Pink,type:GQ.DiDeoxynonulosonate},{abbr:"4eLeg",name:"4-Epilegionaminic Acid",color:UQ.LightBlue,type:GQ.DiDeoxynonulosonate},{abbr:"Bac",name:"Bacillosamine",color:UQ.Blue,type:GQ.Unknown},{abbr:"LDmanHep",name:"L-Glycero-D-Manno Heptose",color:UQ.Green,type:GQ.Unknown},{abbr:"Kdo",name:"Keto-Deoxy Octulonic Acid",color:UQ.Yellow,type:GQ.Unknown},{abbr:"Dha",name:"3-Deoxy Lyxo-Heptulosaric Acid",color:UQ.Orange,type:GQ.Unknown},{abbr:"DDmanHep",name:"D-Glycero-D-Manno-Heptose",color:UQ.Pink,type:GQ.Unknown},{abbr:"MurNAc",name:"N-Acetyl Muramic Acid",color:UQ.Purple,type:GQ.Unknown},{abbr:"MurNGc",name:"N-Glycolyl Muramic Acid",color:UQ.LightBlue,type:GQ.Unknown},{abbr:"Mur",name:"Muramic Acid",color:UQ.Brown,type:GQ.Unknown},{abbr:"Api",name:"Apicose",color:UQ.Green,type:GQ.Assigned},{abbr:"Fru",name:"Fructose",color:UQ.Green,type:GQ.Assigned},{abbr:"Tag",name:"Tagatose",color:UQ.Yellow,type:GQ.Assigned},{abbr:"Sor",name:"Sorbose",color:UQ.Orange,type:GQ.Assigned},{abbr:"Psi",name:"Psicose",color:UQ.Pink,type:GQ.Assigned}],qQ=function(){const e=new Map;for(let t=0,n=VQ.length;t<n;++t){const n=VQ[t];e.set(n.abbr,n)}return e}(),YQ=[["Glc-family",UQ.Blue],["Man-family",UQ.Green],["Gal-family",UQ.Yellow],["Gul-family",UQ.Orange],["Alt-family",UQ.Pink],["All-family",UQ.Purple],["Tal-family",UQ.LightBlue],["Ido-family",UQ.Brown],["Fuc-family",UQ.Red],["Generic/Unknown/Secondary",UQ.Secondary]],XQ={Glc:["GLC","BGC","Z8T","TRE","MLR"],Man:["MAN","BMA"],Gal:["GLA","GAL","GZL","GXL","GIV"],Gul:["4GL","GL0","GUP","Z8H"],Alt:["Z6H","3MK","SHD"],All:["AFD","ALL","WOO","Z2D"],Tal:["ZEE","A5C","SDY"],Ido:["ZCD","Z0F","4N2"],GlcNAc:["NDG","NAG","NGZ"],ManNAc:["BM3","BM7"],GalNAc:["A2G","NGA","YYQ"],GulNAc:["LXB"],AltNAc:[],AllNAc:["NAA"],TalNAc:[],IdoNAc:["LXZ","HSQ"],GlcN:["PA1","GCS"],ManN:["95Z"],GalN:["X6X","1GN"],GulN:[],AltN:[],AllN:[],TalN:[],IdoN:[],GlcA:["GCU","BDP"],ManA:["MAV","BEM"],GalA:["ADA","GTR","GTK"],GulA:["LGU"],AltA:[],AllA:[],TalA:["X1X","X0X"],IdoA:["IDR"],Qui:["G6D","YYK"],Rha:["RAM","RM4","XXR"],"6dGul":["66O"],"6dAlt":[],"6dTal":[],Fuc:["FUC","FUL","FCA","FCB","GYE"],QuiNAc:["Z9W"],RhaNAc:[],"6dAltNAc":[],"6dTalNAc":[],FucNAc:["49T"],Oli:["DDA","RAE","Z5J"],Tyv:["TYV"],Abe:["ABE"],Par:["PZU"],Dig:["Z3U"],Col:[],Ara:["64K","ARA","ARB","AHR","FUB","BXY","BXX","SEJ"],Lyx:["LDY","Z4W"],Xyl:["XYS","XYP","XYZ","HSY","LXC"],Rib:["YYM","RIP","RIB","BDR","0MK","Z6J","32O"],Kdn:["KDM","KDN"],Neu5Ac:["SIA","SLB"],Neu5Gc:["NGC","NGE"],Neu:[],Sia:[],Pse:[],Leg:[],Aci:[],"4eLeg":[],Bac:[],LDmanHep:["GMH"],Kdo:["KDO"],Dha:[],DDmanHep:["289"],MurNAc:["MUB","AMU"],MurNGc:[],Mur:["1S4","MUR"],Api:["XXM"],Fru:["BDF","Z9N","FRU","LFR"],Tag:["T6T"],Sor:["SOE","UEA"],Psi:["PSV","SF6","SF9","TTV"]},WQ={Glc:["AGLC","BGLC"],GlcNAc:["AGLCNA","BGLCNA","BGLCN0"],GlcA:["AGLCA","BGLCA","BGLCA0"],Man:["AMAN","BMAN"],Rha:["ARHM","BRHM"],Ara:["AARB","BARB"],Gal:["AGAL","BGAL"],GalNAc:["AGALNA","BGALNA"],Gul:["AGUL","BGUL"],Alt:["AALT","BALT"],All:["AALL","BALL"],Tal:["ATAL","BTAL"],Ido:["AIDO","BIDO"],IdoA:["AIDOA","BIDOA"],Fuc:["AFUC","BFUC"],Lyx:["ALYF","BLYF"],Xyl:["AXYL","BXYL","AXYF","BXYF"],Rib:["ARIB","BRIB"],Fru:["AFRU","BFRU"],Neu5Ac:["ANE5AC","BNE5AC"]},KQ={Glc:["0GA","0GB","1GA","1GB","2GA","2GB","3GA","3GB","4GA","4GB","6GA","6GB","ZGA","ZGB","YGA","YGB","XGA","XGB","WGA","WGB","VGA","VGB","UGA","UGB","TGA","TGB","SGA","SGB","RGA","RGB","QGA","QGB","PGA","PGB","0gA","0gB","1gA","1gB","2gA","2gB","3gA","3gB","4gA","4gB","6gA","6gB","ZgA","ZgB","YgA","YgB","XgA","XgB","WgA","WgB","VgA","VgB","UgA","UgB","TgA","TgB","SgA","SgB","RgA","RgB","QgA","QgB","PgA","PgB"],GlcNAc:["0YA","0YB","1YA","1YB","3YA","3YB","4YA","4YB","6YA","6YB","WYA","WYB","VYA","VYB","UYA","UYB","QYA","QYB","0yA","0yB","1yA","1yB","3yA","3yB","4yA","4yB","6yA","6yB","WyA","WyB","VyA","VyB","UyA","UyB","QyA","QyB","0YS","0Ys","3YS","3Ys","4YS","4Ys","6YS","6Ys","QYS","QYs","UYS","UYs","VYS","VYs","WYS","WYs","0yS","0ys","3yS","3ys","4yS","4ys"],GlcA:["0ZA","0ZB","1ZA","1ZB","2ZA","2ZB","3ZA","3ZB","4ZA","4ZB","ZZA","ZZB","YZA","YZB","WZA","WZB","TZA","TZB","0zA","0zB","1zA","1zB","2zA","2zB","3zA","3zB","4zA","4zB","ZzA","ZzB","YzA","YzB","WzA","WzB","TzA","TzB","0ZBP"],GlcN:["0YN","3YN","4YN","6YN","WYN","VYN","UYN","QYN","3Yn","4Yn","WYn","0Yn","0YP","3YP","4YP","6YP","WYP","VYP","UYP","QYP","0Yp","3Yp","4Yp","WYp"],Man:["0MA","0MB","1MA","1MB","2MA","2MB","3MA","3MB","4MA","4MB","6MA","6MB","ZMA","ZMB","YMA","YMB","XMA","XMB","WMA","WMB","VMA","VMB","UMA","UMB","TMA","TMB","SMA","SMB","RMA","RMB","QMA","QMB","PMA","PMB","0mA","0mB","1mA","1mB","2mA","2mB","3mA","3mB","4mA","4mB","6mA","6mB","ZmA","ZmB","YmA","YmB","XmA","XmB","WmA","WmB","VmA","VmB","UmA","UmB","TmA","TmB","SmA","SmB","RmA","RmB","QmA","QmB","PmA","PmB"],ManNAc:["0WA","0WB","1WA","1WB","3WA","3WB","4WA","4WB","6WA","6WB","WWA","WWB","VWA","VWB","UWA","UWB","QWA","QWB","0wA","0wB","1wA","1wB","3wA","3wB","4wA","4wB","6wA","6wB","WwA","WwB","VwA","VwB","UwA","UwB","QwA","QwB"],Ara:["0AA","0AB","1AA","1AB","2AA","2AB","3AA","3AB","4AA","4AB","ZAA","ZAB","YAA","YAB","WAA","WAB","TAA","TAB","0AD","0AU","1AD","1AU","2AD","2AU","3AD","3AU","5AD","5AU","ZAD","ZAU","0aA","0aB","1aA","1aB","2aA","2aB","3aA","3aB","4aA","4aB","ZaA","ZaB","YaA","YaB","WaA","WaB","TaA","TaB","0aD","0aU","1aD","1aU","2aD","2aU","3aD","3aU","5aD","5aU","ZaD","ZaU"],Gal:["0LA","0LB","1LA","1LB","2LA","2LB","3LA","3LB","4LA","4LB","6LA","6LB","ZLA","ZLB","YLA","YLB","XLA","XLB","WLA","WLB","VLA","VLB","ULA","ULB","TLA","TLB","SLA","SLB","RLA","RLB","QLA","QLB","PLA","PLB","0lA","0lB","1lA","1lB","2lA","2lB","3lA","3lB","4lA","4lB","6lA","6lB","ZlA","ZlB","YlA","YlB","XlA","XlB","WlA","WlB","VlA","VlB","UlA","UlB","TlA","TlB","SlA","SlB","RlA","RlB","QlA","QlB","PlA","PlB"],GalNAc:["0VA","0VB","1VA","1VB","3VA","3VB","4VA","4VB","6VA","6VB","WVA","WVB","VVA","VVB","UVA","UVB","QVA","QVB","0vA","0vB","1vA","1vB","3vA","3vB","4vA","4vB","6vA","6vB","WvA","WvB","VvA","VvB","UvA","UvB","QvA","QvB"],GalA:["0OA","0OB","1OA","1OB","2OA","2OB","3OA","3OB","4OA","4OB","ZOA","ZOB","YOA","YOB","WOA","WOB","TOA","TOB","0oA","0oB","1oA","1oB","2oA","2oB","3oA","3oB","4oA","4oB","ZoA","ZoB","YoA","YoB","WoA","WoB","ToA","ToB"],Gul:["0KA","0KB","1KA","1KB","2KA","2KB","3KA","3KB","4KA","4KB","6KA","6KB","ZKA","ZKB","YKA","YKB","XKA","XKB","WKA","WKB","VKA","VKB","UKA","UKB","TKA","TKB","SKA","SKB","RKA","RKB","QKA","QKB","PKA","PKB","0kA","0kB","1kA","1kB","2kA","2kB","3kA","3kB","4kA","4kB","6kA","6kB","ZkA","ZkB","YkA","YkB","XkA","XkB","WkA","WkB","VkA","VkB","UkA","UkB","TkA","TkB","SkA","SkB","RkA","RkB","QkA","QkB","PkA","PkB"],Alt:["0EA","0EB","1EA","1EB","2EA","2EB","3EA","3EB","4EA","4EB","6EA","6EB","ZEA","ZEB","YEA","YEB","XEA","XEB","WEA","WEB","VEA","VEB","UEA","UEB","TEA","TEB","SEA","SEB","REA","REB","QEA","QEB","PEA","PEB","0eA","0eB","1eA","1eB","2eA","2eB","3eA","3eB","4eA","4eB","6eA","6eB","ZeA","ZeB","YeA","YeB","XeA","XeB","WeA","WeB","VeA","VeB","UeA","UeB","TeA","TeB","SeA","SeB","ReA","ReB","QeA","QeB","PeA","PeB"],All:["0NA","0NB","1NA","1NB","2NA","2NB","3NA","3NB","4NA","4NB","6NA","6NB","ZNA","ZNB","YNA","YNB","XNA","XNB","WNA","WNB","VNA","VNB","UNA","UNB","TNA","TNB","SNA","SNB","RNA","RNB","QNA","QNB","PNA","PNB","0nA","0nB","1nA","1nB","2nA","2nB","3nA","3nB","4nA","4nB","6nA","6nB","ZnA","ZnB","YnA","YnB","XnA","XnB","WnA","WnB","VnA","VnB","UnA","UnB","TnA","TnB","SnA","SnB","RnA","RnB","QnA","QnB","PnA","PnB"],Tal:["0TA","0TB","1TA","1TB","2TA","2TB","3TA","3TB","4TA","4TB","6TA","6TB","ZTA","ZTB","YTA","YTB","XTA","XTB","WTA","WTB","VTA","VTB","UTA","UTB","TTA","TTB","STA","STB","RTA","RTB","QTA","QTB","PTA","PTB","0tA","0tB","1tA","1tB","2tA","2tB","3tA","3tB","4tA","4tB","6tA","6tB","ZtA","ZtB","YtA","YtB","XtA","XtB","WtA","WtB","VtA","VtB","UtA","UtB","TtA","TtB","StA","StB","RtA","RtB","QtA","QtB","PtA","PtB"],Ido:["0IA","0IB","1IA","1IB","2IA","2IB","3IA","3IB","4IA","4IB","6IA","6IB","ZIA","ZIB","YIA","YIB","XIA","XIB","WIA","WIB","VIA","VIB","UIA","UIB","TIA","TIB","SIA","SIB","RIA","RIB","QIA","QIB","PIA","PIB","0iA","0iB","1iA","1iB","2iA","2iB","3iA","3iB","4iA","4iB","6iA","6iB","ZiA","ZiB","YiA","YiB","XiA","XiB","WiA","WiB","ViA","ViB","UiA","UiB","TiA","TiB","SiA","SiB","RiA","RiB","QiA","QiB","PiA","PiB"],IdoA:["0UA","0UB","1UA","1UB","2UA","2UB","3UA","3UB","4UA","4UB","ZUA","ZUB","YUA","YUB","WUA","WUB","TUA","TUB","0uA","0uB","1uA","1uB","2uA","2uB","3uA","3uB","4uA","4uB","ZuA","ZuB","YuA","YuB","WuA","WuB","TuA","TuB","YuAP"],Fuc:["0FA","0FB","1FA","1FB","2FA","2FB","3FA","3FB","4FA","4FB","ZFA","ZFB","YFA","YFB","WFA","WFB","TFA","TFB","0fA","0fB","1fA","1fB","2fA","2fB","3fA","3fB","4fA","4fB","ZfA","ZfB","YfA","YfB","WfA","WfB","TfA","TfB"],Rha:["0HA","0HB","1HA","1HB","2HA","2HB","3HA","3HB","4HA","4HB","ZHA","ZHB","YHA","YHB","WHA","WHB","THA","THB","0hA","0hB","1hA","1hB","2hA","2hB","3hA","3hB","4hA","4hB","ZhA","ZhB","YhA","YhB","WhA","WhB","ThA","ThB"],Qui:["0QA","0QB","1QA","1QB","2QA","2QB","3QA","3QB","4QA","4QB","ZQA","ZQB","YQA","YQB","WQA","WQB","TQA","TQB","0qA","0qB","1qA","1qB","2qA","2qB","3qA","3qB","4qA","4qB","ZqA","ZqB","YqA","YqB","WqA","WqB","TqA","TqB"],Lyx:["0DA","0DB","1DA","1DB","2DA","2DB","3DA","3DB","4DA","4DB","ZDA","ZDB","YDA","YDB","WDA","WDB","TDA","TDB","0DD","0DU","1DD","1DU","2DD","2DU","3DD","3DU","5DD","5DU","ZDD","ZDU","0dA","0dB","1dA","1dB","2dA","2dB","3dA","3dB","4dA","4dB","ZdA","ZdB","YdA","YdB","WdA","WdB","TdA","TdB","0dD","0dU","1dD","1dU","2dD","2dU","3dD","3dU","5dD","5dU","ZdD","ZdU"],Xyl:["0XA","0XB","1XA","1XB","2XA","2XB","3XA","3XB","4XA","4XB","ZXA","ZXB","YXA","YXB","WXA","WXB","TXA","TXB","0XD","0XU","1XD","1XU","2XD","2XU","3XD","3XU","5XD","5XU","ZXD","ZXU","0xA","0xB","1xA","1xB","2xA","2xB","3xA","3xB","4xA","4xB","ZxA","ZxB","YxA","YxB","WxA","WxB","TxA","TxB","0xD","0xU","1xD","1xU","2xD","2xU","3xD","3xU","5xD","5xU","ZxD","ZxU"],Rib:["0RA","0RB","1RA","1RB","2RA","2RB","3RA","3RB","4RA","4RB","ZRA","ZRB","YRA","YRB","WRA","WRB","TRA","TRB","0RD","0RU","1RD","1RU","2RD","2RU","3RD","3RU","5RD","5RU","ZRD","ZRU","0rA","0rB","1rA","1rB","2rA","2rB","3rA","3rB","4rA","4rB","ZrA","ZrB","YrA","YrB","WrA","WrB","TrA","TrB","0rD","0rU","1rD","1rU","2rD","2rU","3rD","3rU","5rD","5rU","ZrD","ZrU"],Fru:["0CA","0CB","1CA","1CB","2CA","2CB","3CA","3CB","4CA","4CB","5CA","5CB","WCA","WCB","0CD","0CU","1CD","1CU","2CD","2CU","3CD","3CU","4CD","4CU","6CD","6CU","WCD","WCU","VCD","VCU","UCD","UCU","QCD","QCU","0cA","0cB","1cA","1cB","2cA","2cB","3cA","3cB","4cA","4cB","5cA","5cB","WcA","WcB","0cD","0cU","1cD","1cU","2cD","2cU","3cD","3cU","4cD","4cU","6cD","6cU","WcD","WcU","VcD","VcU","UcD","UcU","QcD","QcU"],Tag:["0JA","0JB","1JA","1JB","2JA","2JB","3JA","3JB","4JA","4JB","5JA","5JB","WJA","WJB","0JD","0JU","1JD","1JU","2JD","2JU","3JD","3JU","4JD","4JU","6JD","6JU","WJD","WJU","VJD","VJU","UJD","UJU","QJD","QJU","0jA","0jB","1jA","1jB","2jA","2jB","3jA","3jB","4jA","4jB","5jA","5jB","WjA","WjB","0jD","0jU","1jD","1jU","2jD","2jU","3jD","3jU","4jD","4jU","6jD","6jU","WjD","WjU","VjD","VjU","UjD","UjU","QjD","QjU"],Sor:["0BA","0BB","1BA","1BB","2BA","2BB","3BA","3BB","4BA","4BB","5BA","5BB","WBA","WBB","0BD","0BU","1BD","1BU","2BD","2BU","3BD","3BU","4BD","4BU","6BD","6BU","WBD","WBU","VBD","VBU","UBD","UBU","QBD","QBU","0bA","0bB","1bA","1bB","2bA","2bB","3bA","3bB","4bA","4bB","5bA","5bB","WbA","WbB","0bD","0bU","1bD","1bU","2bD","2bU","3bD","3bU","4bD","4bU","6bD","6bU","WbD","WbU","VbD","VbU","UbD","UbU","QbD","QbU"],Psi:["0PA","0PB","1PA","1PB","2PA","2PB","3PA","3PB","4PA","4PB","5PA","5PB","WPA","WPB","0PD","0PU","1PD","1PU","2PD","2PU","3PD","3PU","4PD","4PU","6PD","6PU","WPD","WPU","VPD","VPU","UPD","UPU","QPD","QPU","0pA","0pB","1pA","1pB","2pA","2pB","3pA","3pB","4pA","4pB","5pA","5pB","WpA","WpB","0pD","0pU","1pD","1pU","2pD","2pU","3pD","3pU","4pD","4pU","6pD","6pU","WpD","WpU","VpD","VpU","UpD","UpU","QpD","QpU"],Neu5Ac:["0SA","0SB","4SA","4SB","7SA","7SB","8SA","8SB","9SA","9SB","ASA","ASB","BSA","BSB","CSA","CSB","DSA","DSB","ESA","ESB","FSA","FSB","GSA","GSB","HSA","HSB","ISA","ISB","JSA","JSB","KSA","KSB","0sA","0sB","4sA","4sB","7sA","7sB","8sA","8sB","9sA","9sB","AsA","AsB","BsA","BsB","CsA","CsB","DsA","DsB","EsA","EsB","FsA","FsB","GsA","GsB","HsA","HsB","IsA","IsB","JsA","JsB","KsA","KsB"],Neu5Gc:["0GL","4GL","7GL","8GL","9GL","CGL","DGL","EGL","FGL","GGL","HGL","IGL","JGL","KGL","0gL","4gL","7gL","8gL","9gL","AgL","BgL","CgL","DgL","EgL","FgL","GgL","HgL","IgL","JgL","KgL"],Tyv:["0TV","0Tv","1TV","1Tv","2TV","2Tv","4TV","4Tv","YTV","YTv","0tV","0tv","1tV","1tv","2tV","2tv","4tV","4tv","YtV","Ytv"],Abe:["0AE","2AE","4AE","YGa","0AF","2AF","4AF","YAF"],Bac:["0BC","3BC","0bC","3bC"],Kdn:["0KN","4KN","5KN","7KN","8KN","9KN","AKN","BKN","CKN","DKN","EKN","FKN","GKN","HKN","IKN","JKN","KKN","LKN","MKN","NKN","OKN","PKN","QKN","RKN","SKN","TKN","UKN","VKN","WKN","XKN","YKN","0Kn","4Kn","5Kn","7Kn","8Kn","9Kn","AKn","BKn","CKn","DKn","EKn","FKn","GKn","HKn","IKn","JKn","KKn","LKn","MKn","NKn","OKn","PKn","QKn","RKn","SKn","TKn","UKn","VKn","WKn","XKn","YKn"],Kdo:["0KO","4KO","5KO","7KO","8KO","AKO","BKO","CKO","DKO","EKO","FKO","GKO","HKO","IKO","JKO","KKO","0Ko","4Ko","5Ko","7Ko","8Ko","AKo","BKo","CKo","DKo","EKo","FKo","GKo","HKo","IKo","JKo","KKo"]},JQ=function(){const e=new Map;for(let t=0,n=VQ.length;t<n;++t){const n=VQ[t],r=XQ[n.abbr];if(r)for(let t=0,i=r.length;t<i;++t)e.set(r[t],n);const o=WQ[n.abbr];if(o)for(let t=0,i=o.length;t<i;++t)e.set(o[t],n)}return NQ.forEach((t=>{e.has(t)||e.set(t,HQ)})),e}();!function(){const e=new Map;for(let t=0,n=VQ.length;t<n;++t){const n=VQ[t],r=XQ[n.abbr];if(r)for(let t=0,a=r.length;t<a;++t)e.set(r[t],n);const o=WQ[n.abbr];if(o)for(let t=0,a=o.length;t<a;++t)e.set(o[t],n);const i=KQ[n.abbr];if(i)for(let t=0,a=i.length;t<a;++t)e.has(i[t])||e.set(i[t],n)}NQ.forEach((t=>{e.has(t)||e.set(t,HQ)}))}();let ZQ=JQ;var $Q;!function(e){e.toArray=function(e){return Array.from(e.values())},e.isSuperset=function(e,t){if(e===t)return!0;if(e.size<t.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0},e.add=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let o=0;o<n.length;o++)for(const t of n[o])e.add(t);return e},e.union=function(e,t){const n=new Set(e);if(e===t)return n;for(const r of t)n.add(r);return n},e.unionMany=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return new Set;const r=new Set(t[0]);for(let o=1,i=t.length;o<i;o++)for(const e of t[o])r.add(e);return r},e.unionManyArrays=function(e){if(0===e.length)return new Set;const t=new Set(e[0]);for(let n=1;n<e.length;n++)for(const r of e[n])t.add(r);return t},e.intersection=function(e,t){if(e===t)return new Set(e);const n=new Set;for(const r of t)e.has(r)&&n.add(r);return n},e.areIntersecting=function(e,t){if(e===t)return e.size>0;e.size<t.size&&([e,t]=[t,e]);for(const n of t)if(e.has(n))return!0;return!1},e.intersectionSize=function(e,t){if(e===t)return e.size;e.size<t.size&&([e,t]=[t,e]);let n=0;for(const r of t)e.has(r)&&(n+=1);return n},e.difference=function(e,t){if(e===t)return new Set;const n=new Set(e);for(const r of t)n.delete(r);return n},e.differenceSize=function(e,t){if(e===t)return 0;let n=e.size;for(const r of e)t.has(r)&&(n-=1);return n},e.areEqual=function(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}}($Q||($Q={}));const eM=new Set(["DAPC","DBPC","DFPC","DGPC","DIPC","DLPC","DNPC","DOPC","DPPC","DRPC","DTPC","DVPC","DXPC","DYPC","LPPC","PAPC","PEPC","PGPC","PIPC","POPC","PRPC","PUPC","DAPE","DBPE","DFPE","DGPE","DIPE","DLPE","DNPE","DOPE","DPPE","DRPE","DTPE","DUPE","DVPE","DXPE","DYPE","LPPE","PAPE","PGPE","PIPE","POPE","PQPE","PRPE","PUPE","DAPS","DBPS","DFPS","DGPS","DIPS","DLPS","DNPS","DOPS","DPPS","DRPS","DTPS","DUPS","DVPS","DXPS","DYPS","LPPS","PAPS","PGPS","PIPS","POPS","PQPS","PRPS","PUPS","DAPG","DBPG","DFPG","DGPG","DIPG","DLPG","DNPG","DOPG","DPPG","DRPG","DTPG","DVPG","DXPG","DYPG","LPPG","PAPG","PGPG","PIPG","POPG","PRPG","DAPA","DBPA","DFPA","DGPA","DIPA","DLPA","DNPA","DOPA","DPPA","DRPA","DTPA","DVPA","DXPA","DYPA","LPPA","PAPA","PGPA","PIPA","POPA","PRPA","PUPA","DPP","DPPI","PAPI","PIPI","POP","POPI","PUPI","PVP","PVPI","PADG","PIDG","PODG","PUDG","PVDG","APC","CPC","IPC","LPC","OPC","PPC","TPC","UPC","VPC","BNSM","DBSM","DPSM","DXSM","PGSM","PNSM","POSM","PVSM","XNSM","DPCE","DXCE","PNCE","XNCE","DMPC"]),tM=new Set(["118","119","543","1AL","1CU","2FK","2HP","2OF","3CO","3MT","3NI","3OF","3P8","4MO","4PU","4TI","6MO","ACT","AG","AL","ALF","AM","ATH","AU","AU3","AUC","AZI","BA","BCT","BEF","BF4","BO4","BR","BS3","BSY","CA","CAC","CD","CD1","CD3","CD5","CE","CF","CHT","CL","CO","CO3","CO5","CON","CR","CS","CSB","CU","CU1","CU3","CUA","CUZ","CYN","DME","DMI","DSC","DTI","DY","E4N","EDR","EMC","ER3","EU","EU3","F","FE","FE2","FPO","GA","GD3","GEP","HAI","HG","HGC","IN","IOD","IR","IR3","IRI","IUM","K","KO4","LA","LCO","LCP","LI","LU","MAC","MG","MH2","MH3","MLI","MMC","MN","MN3","MN5","MN6","MO1","MO2","MO3","MO4","MO5","MO6","MOO","MOS","MOW","MW1","MW2","MW3","NA","NA2","NA5","NA6","NAO","NAW","ND","NET","NH4","NI","NI1","NI2","NI3","NO2","NO3","NRU","NT3","O4M","OAA","OC1","OC2","OC3","OC4","OC5","OC6","OC7","OC8","OCL","OCM","OCN","OCO","OF1","OF2","OF3","OH","OS","OS4","OXL","PB","PBM","PD","PDV","PER","PI","PO3","PO4","PR","PT","PT4","PTN","RB","RH3","RHD","RHF","RU","SB","SCN","SE4","SEK","SM","SMO","SO3","SO4","SR","T1A","TB","TBA","TCN","TEA","TH","THE","TL","TMA","TRA","UNX","V","VN3","VO4","W","WO5","Y1","YB","YB2","YH","YT3","ZCM","ZN","ZN2","ZN3","ZNO","ZO3","ZR","NCO","OHX"]),nM=function(){const e=Object.create(null),t=[];for(let n="A".charCodeAt(0);n<="Z".charCodeAt(0);n++)t[t.length]=String.fromCharCode(n);for(let n="a".charCodeAt(0);n<="z".charCodeAt(0);n++)t[t.length]=String.fromCharCode(n);for(let n="0".charCodeAt(0);n<="9".charCodeAt(0);n++)t[t.length]=String.fromCharCode(n);for(const n of t){e[n]=n.toUpperCase();for(const r of t){e[n+r]=(n+r).toUpperCase();for(const o of t)e[n+r+o]=(n+r+o).toUpperCase()}}return e}();function rM(e){return nM[e]||e.toUpperCase()}const oM=new Map([[1,"H"],[2,"He"],[3,"Li"],[4,"Be"],[5,"B"],[6,"C"],[7,"N"],[8,"O"],[9,"F"],[10,"Ne"],[11,"Na"],[12,"Mg"],[13,"Al"],[14,"Si"],[15,"P"],[16,"S"],[17,"Cl"],[18,"Ar"],[19,"K"],[20,"Ca"],[21,"Sc"],[22,"Ti"],[23,"V"],[24,"Cr"],[25,"Mn"],[26,"Fe"],[27,"Co"],[28,"Ni"],[29,"Cu"],[30,"Zn"],[31,"Ga"],[32,"Ge"],[33,"As"],[34,"Se"],[35,"Br"],[36,"Kr"],[37,"Rb"],[38,"Sr"],[39,"Y"],[40,"Zr"],[41,"Nb"],[42,"Mo"],[43,"Tc"],[44,"Ru"],[45,"Rh"],[46,"Pd"],[47,"Ag"],[48,"Cd"],[49,"In"],[50,"Sn"],[51,"Sb"],[52,"Te"],[53,"I"],[54,"Xe"],[55,"Cs"],[56,"Ba"],[57,"La"],[58,"Ce"],[59,"Pr"],[60,"Nd"],[61,"Pm"],[62,"Sm"],[63,"Eu"],[64,"Gd"],[65,"Tb"],[66,"Dy"],[67,"Ho"],[68,"Er"],[69,"Tm"],[70,"Yb"],[71,"Lu"],[72,"Hf"],[73,"Ta"],[74,"W"],[75,"Re"],[76,"Os"],[77,"Ir"],[78,"Pt"],[79,"Au"],[80,"Hg"],[81,"Tl"],[82,"Pb"],[83,"Bi"],[84,"Po"],[85,"At"],[86,"Rn"],[87,"Fr"],[88,"Ra"],[89,"Ac"],[90,"Th"],[91,"Pa"],[92,"U"],[93,"Np"],[94,"Pu"],[95,"Am"],[96,"Cm"],[97,"Bk"],[98,"Cf"],[99,"Es"],[100,"Fm"],[101,"Md"],[102,"No"],[103,"Lr"],[104,"Rf"],[105,"Db"],[106,"Sg"],[107,"Bh"],[108,"Hs"],[109,"Mt"],[110,"Ds"],[111,"Rg"],[112,"Cn"],[113,"Uut"],[114,"Fl"],[115,"Uup"],[116,"Lv"],[117,"Uus"],[118,"Uuo"]].map((e=>[e[0],rM(e[1])])));var iM;!function(e){e[e.unknown=0]="unknown",e[e.polymer=1]="polymer",e[e["non-polymer"]=2]="non-polymer",e[e.macrolide=3]="macrolide",e[e.water=4]="water",e[e.branched=5]="branched"}(iM||(iM={}));const aM={0:{trace:new Set,directionFrom:new Set,directionTo:new Set,backboneStart:new Set,backboneEnd:new Set,coarseBackbone:new Set},1:{trace:new Set(["CA"]),directionFrom:new Set(["C"]),directionTo:new Set(["O","OC1","O1","OX1","OXT","OT1"]),backboneStart:new Set(["N"]),backboneEnd:new Set(["C"]),coarseBackbone:new Set(["CA","BB","CA1"])},2:{trace:new Set(["CA"]),directionFrom:new Set(["C"]),directionTo:new Set(["O"]),backboneStart:new Set(["N"]),backboneEnd:new Set(["CD"]),coarseBackbone:new Set(["CA"])},3:{trace:new Set(["CA"]),directionFrom:new Set(["C"]),directionTo:new Set(["O"]),backboneStart:new Set(["N"]),backboneEnd:new Set(["CG"]),coarseBackbone:new Set(["CA"])},4:{trace:new Set(["O3'","O3*"]),directionFrom:new Set(["C4'","C4*"]),directionTo:new Set(["C3'","C3*"]),backboneStart:new Set(["P"]),backboneEnd:new Set(["O3'","O3*"]),coarseBackbone:new Set(["P"])},5:{trace:new Set(["O3'","O3*"]),directionFrom:new Set(["C3'","C3*"]),directionTo:new Set(["C1'","C1*"]),backboneStart:new Set(["P"]),backboneEnd:new Set(["O3'","O3*"]),coarseBackbone:new Set(["P"])},6:{trace:new Set(["N4'","N4*"]),directionFrom:new Set(["N4'","N4*"]),directionTo:new Set(["C7'","C7*"]),backboneStart:new Set(["N1'","N1*"]),backboneEnd:new Set(["C'","C*"]),coarseBackbone:new Set(["P"])}},sM=new Set(["CA","C","N","O","O1","O2","OC1","OC2","OT1","OT2","OX1","OXT","H","H1","H2","H3","HA","HN","HXT","BB"]),lM=new Set(["P","OP1","OP2","HOP2","HOP3","O2'","O3'","O4'","O5'","C1'","C2'","C3'","C4'","C5'","H1'","H2'","H2''","HO2'","H3'","H4'","H5'","H5''","HO3'","HO5'","O2*","O3*","O4*","O5*","C1*","C2*","C3*","C4*","C5*"]),cM=new Set(["d-peptide linking","d-peptide nh3 amino terminus","d-peptide cooh carboxy terminus","d-gamma-peptide, c-delta linking","d-beta-peptide, c-gamma linking"]),uM=new Set(["l-peptide linking","l-peptide nh3 amino terminus","l-peptide cooh carboxy terminus","l-gamma-peptide, c-delta linking","l-beta-peptide, c-gamma linking"]),dM=new Set(["d-gamma-peptide, c-delta linking","l-gamma-peptide, c-delta linking"]),AM=new Set(["d-beta-peptide, c-gamma linking","l-beta-peptide, c-gamma linking"]),fM=new Set(["d-peptide nh3 amino terminus","d-peptide cooh carboxy terminus","l-peptide nh3 amino terminus","l-peptide cooh carboxy terminus"]),pM=new Set(["peptide linking","peptide-like"]),hM=$Q.unionMany(cM,uM,pM),gM=new Set(["dna linking","l-dna linking","dna oh 5 prime terminus","dna oh 3 prime terminus"]),mM=new Set(["rna linking","l-rna linking","rna oh 5 prime terminus","rna oh 3 prime terminus"]),yM=$Q.unionMany(new Set(["d-saccharide, beta linking","l-saccharide, beta linking","d-saccharide, alpha linking","l-saccharide, alpha linking","l-saccharide","d-saccharide","saccharide"]),new Set(["d-saccharide 1,4 and 1,4 linking","l-saccharide 1,4 and 1,4 linking","d-saccharide 1,4 and 1,6 linking","l-saccharide 1,4 and 1,6 linking"])),vM=new Set(["non-polymer","other"]),bM=new Set(["ion"]),CM=new Set(["lipid"]),IM=new Set(["SOL","WAT","HOH","H2O","W","DOD","D3O","TIP","TIP3","TIP4","SPC"]),EM=new Set(["HIS","ARG","LYS","ILE","PHE","LEU","TRP","ALA","MET","PRO","CYS","ASN","VAL","GLY","SER","GLN","TYR","ASP","GLU","THR","SEC","PYL","UNK","MSE","SEP","TPO","PTR","PCA","HYP","HSD","HSE","HSP","LSN","ASPP","GLUP","HID","HIE","HIP","LYN","ASH","GLH"]),xM=new Set(["DAL","DAR","DSG","DAS","DCY","DGL","DGN","DHI","DIL","DLE","DLY","MED","DPN","DPR","DSN","DTH","DTR","DTY","DVA","DNE"]),BM=$Q.unionMany(EM,xM),wM=new Set(["NME","ACE","NH2","FOR","FMT"]),_M=new Set(["A","C","T","G","I","U","N"]),SM=new Set(["DA","DC","DT","DG","DI","DU","DN"]),DM=new Set(["APN","CPN","TPN","GPN"]),TM=new Set(["A","G","I","DA","DG","DI","APN","GPN"]),kM=new Set(["C","T","U","DC","DT","DU","CPN","TPN"]),QM=$Q.unionMany(_M,SM,DM),MM=e=>TM.has(e.toUpperCase()),RM=e=>kM.has(e.toUpperCase()),PM=$Q.unionMany(BM,QM);function OM(e,t){return t=t.toUpperCase(),DM.has(t)?8:hM.has(e)?5:mM.has(e)?6:gM.has(e)?7:yM.has(e)?9:IM.has(t)?2:tM.has(t)?3:eM.has(t)?4:vM.has(e)?ZQ.has(t)?9:BM.has(t)?5:_M.has(t)?6:SM.has(t)?7:1:0}function FM(e,t){return 5===t?dM.has(e)?2:AM.has(e)?3:fM.has(e)?0:1:6===t?4:7===t?5:8===t?6:0}function NM(e){return e=e.toUpperCase(),BM.has(e)?"peptide linking":_M.has(e)?"rna linking":SM.has(e)?"dna linking":ZQ.has(e)?"saccharide":"other"}function LM(e){return e=e.toUpperCase(),IM.has(e)?"water":PM.has(e)?"polymer":ZQ.has(e)?"branched":"non-polymer"}function UM(e,t){return e=e.toUpperCase(),uM.has(t)?"polypeptide(L)":cM.has(t)?"polypeptide(D)":mM.has(t)?"polyribonucleotide":gM.has(t)?"polydeoxyribonucleotide":yM.has(t)||ZQ.has(e)?"oligosaccharide":DM.has(e)?"peptide nucleic acid":EM.has(e)?"polypeptide(L)":xM.has(e)?"polypeptide(D)":_M.has(e)?"polyribonucleotide":SM.has(e)?"polydeoxyribonucleotide":bM.has(t)||tM.has(e)?"ion":CM.has(t)||eM.has(e)?"lipid":pM.has(t)?"peptide-like":"other"}function GM(e){return jM(e)||zM(e)}function jM(e){return 7===e||6===e||8===e}function zM(e){return 5===e}var HM;!function(e){e.is=mp.has,e.create=mp.create,e.SecondaryStructureMmcif={helx_lh_27_p:1058,helx_lh_3t_p:2082,helx_lh_al_p:4130,helx_lh_a_n:524321,helx_lh_b_n:1048609,helx_lh_ga_p:8226,helx_lh_n:33,helx_lh_om_p:16418,helx_lh_ot_n:131105,helx_lh_ot_p:546,helx_lh_p:34,helx_lh_pi_p:32802,helx_lh_pp_p:65570,helx_lh_z_n:262177,helx_n:1,helx_ot_n:1,helx_ot_p:2,helx_p:2,helx_rh_27_p:1090,helx_rh_3t_p:2114,helx_rh_al_p:4162,helx_rh_a_n:524353,helx_rh_b_n:1048641,helx_rh_ga_p:8258,helx_rh_n:65,helx_rh_om_p:16450,helx_rh_ot_n:131137,helx_rh_ot_p:578,helx_rh_p:66,helx_rh_pi_p:32834,helx_rh_pp_p:65602,helx_rh_z_n:262209,strn:4194308,turn_ot_p:33554448,turn_p:16,turn_ty1p_p:67109136,turn_ty1_p:67109008,turn_ty2p_p:134218e3,turn_ty2_p:134217872,turn_ty3p_p:268435728,turn_ty3_p:268435600,bend:8,other:0},e.SecondaryStructurePdb={1:4162,2:16450,3:32834,4:8258,5:2114,6:4130,7:16418,8:8226,9:1026,10:65538},e.SecondaryStructureStride={H:4098,G:2050,I:32770,E:8388612,B:4194308,T:16,C:536870912},e.SecondaryStructureDssp={H:4098,B:4194308,E:8388612,G:2050,I:32770,T:16,S:8}}(HM||(HM={}));var VM;!function(e){function t(e){switch(e){case"covalent":return 1;case"metal-coordination":return 2;case"hydrogen-bond":return 4;case"disulfide":return 8;case"aromatic":return 16;case"computed":return 32}}e.is=mp.has,e.create=function(e){return mp.create(e)},e.isCovalent=function(e){return 0!==(1&e)},e.isAll=function(e){return e===Math.pow(2,6)-1},e.Names={covalent:1,"metal-coordination":2,"hydrogen-bond":4,disulfide:8,aromatic:16,computed:32},e.isName=function(t){return t in e.Names},e.fromName=t,e.fromNames=function(e){let n=0;for(let r=0,o=e.length;r<o;++r)n|=t(e[r]);return n}}(VM||(VM={}));const qM={ALA:[.17,.5,.33],ARG:[.81,1.81,1],ASN:[.42,.85,.43],ASP:[1.23,3.64,2.41],ASH:[-.07,.43,.5],CYS:[-.24,-.02,.22],GLN:[.58,.77,.19],GLU:[2.02,3.63,1.61],GLH:[-.01,.11,.12],GLY:[.01,1.15,1.14],HIS:[.17,.11,-.06],ILE:[-.31,-1.12,-.81],LEU:[-.56,-1.25,-.69],LYS:[.99,2.8,1.81],MET:[-.23,-.67,-.44],PHE:[-1.13,-1.71,-.58],PRO:[.45,.14,-.31],SER:[.13,.46,.33],THR:[.14,.25,.11],TRP:[-1.85,-2.09,-.24],TYR:[-.94,-.71,.23],VAL:[.07,-.46,-.53],HSD:[.17,.11,-.06],HSE:[.17,.11,-.06],HSP:[.96,2.33,1.37],HID:[.17,.11,-.06],HIE:[.17,.11,-.06],HIP:[.96,2.33,1.37]},YM=qh.add,XM=qh.squaredDistance,WM=qh.distance;class KM{reset(){qh.set(this.center,0,0,0),this.radiusSq=0,this.count=0}includeStep(e){YM(this.center,this.center,e),this.count++}finishedIncludeStep(){0!==this.count&&qh.scale(this.center,this.center,1/this.count)}radiusStep(e){const t=XM(e,this.center);t>this.radiusSq&&(this.radiusSq=t)}radiusSphereStep(e,t){const n=WM(e,this.center)+t,r=n*n;r>this.radiusSq&&(this.radiusSq=r)}getSphere(e){return e||(e=YT()),qh.copy(e.center,this.center),e.radius=Math.sqrt(this.radiusSq),e}getCount(){return this.count}constructor(){this.count=0,this.center=qh(),this.radiusSq=0}}!function(e){const t=new e,n=qh(),r=qh();e.fromArrays=function(e,r){let{x:o,y:i,z:a}=e;t.reset();const s=o.length;for(let l=0;l<s;l++)qh.set(n,o[l],i[l],a[l]),t.includeStep(n);t.finishedIncludeStep();for(let l=0;l<s;l++)qh.set(n,o[l],i[l],a[l]),t.radiusStep(n);return qh.copy(r.center,t.center),r.radius=Math.sqrt(t.radiusSq),r},e.fromProvider=function(e,r,o){t.reset();for(let i=0;i<e;i++)r(i,n),t.includeStep(n);t.finishedIncludeStep();for(let i=0;i<e;i++)r(i,n),t.radiusStep(n);return qh.copy(o.center,t.center),o.radius=Math.sqrt(t.radiusSq),o},e.fromPairProvider=function(e,o,i){t.reset();for(let a=0;a<e;a++)o(a,n,r),t.includeStep(n),t.includeStep(r);t.finishedIncludeStep();for(let a=0;a<e;a++)o(a,n,r),t.radiusStep(n),t.radiusStep(r);return qh.copy(i.center,t.center),i.radius=Math.sqrt(t.radiusSq),i}}(KM||(KM={}));class JM{getConnectedUnits(e){return this.map.has(e)?this.map.get(e):ZM}getEdgeIndex(e,t,n,r){const o=JM.getEdgeKey(e,t,n,r),i=this.edgeKeyIndex.get(o);return void 0!==i?i:-1}hasEdge(e,t,n,r){return-1!==this.getEdgeIndex(e,t,n,r)}getEdge(e,t,n,r){const o=this.getEdgeIndex(e,t,n,r);return-1!==o?this.edges[o]:void 0}getEdgeIndices(e,t){return this.vertexKeyIndex.get(JM.getVertexKey(e,t))||[]}constructor(e){this.map=e;let t=0;const n=[],r=new Map,o=new Map;this.map.forEach((e=>{e.forEach((e=>{t+=e.edgeCount,e.connectedIndices.forEach((t=>{e.getEdges(t).forEach((i=>{const{unitA:a,unitB:s}=e,l=JM.getEdgeKey(t,a,i.indexB,s);r.set(l,n.length);const c=JM.getVertexKey(t,a),u=o.get(c);void 0===u?o.set(c,[n.length]):u.push(n.length),n.push({...i,indexA:t,unitA:a,unitB:s})}))}))}))})),this.edgeCount=t,this.edges=n,this.edgeKeyIndex=r,this.vertexKeyIndex=o}}!function(e){class t{hasEdges(e){return this.edgeMap.has(e)}getEdges(e){return this.edgeMap.has(e)?this.edgeMap.get(e):ZM}get areUnitsOrdered(){return this.unitA<this.unitB}constructor(e,t,n,r,o){this.unitA=e,this.unitB=t,this.edgeCount=n,this.connectedIndices=r,this.edgeMap=o}}function n(e,t,n){e.has(t)?e.get(t).push(n):e.set(t,[n])}e.UnitPairEdges=t,e.getEdgeKey=function(e,t,n,r){return`${e}|${t}|${n}|${r}`},e.getVertexKey=function(e,t){return`${e}|${t}`};e.Builder=class{constructor(){this.map=new Map}startUnitPair(e,t){this.uA=e,this.uB=t,this.mapAB=new Map,this.mapBA=new Map,this.linkedA=VD.create(),this.linkedB=VD.create(),this.linkCount=0}finishUnitPair(){0!==this.linkCount&&(n(this.map,this.uA,new t(this.uA,this.uB,this.linkCount,this.linkedA.array,this.mapAB)),n(this.map,this.uB,new t(this.uB,this.uA,this.linkCount,this.linkedB.array,this.mapBA)))}add(e,t,r){n(this.mapAB,e,{indexB:t,props:r}),n(this.mapBA,t,{indexB:e,props:r}),VD.add(this.linkedA,e,e),VD.add(this.linkedB,t,t),this.linkCount+=1}getMap(){return this.map}}}(JM||(JM={}));const ZM=[];var $M;!function(e){e.Empty=Uk.create([],[],[],0,{flags:[],order:[],key:[]})}($M||($M={}));class eR extends JM{getBondFromLocation(e){return BO.isAtomic(e.aUnit)&&BO.isAtomic(e.bUnit)?this.getEdge(e.aIndex,e.aUnit.id,e.bIndex,e.bUnit.id):void 0}getBondIndexFromLocation(e){return BO.isAtomic(e.aUnit)&&BO.isAtomic(e.bUnit)?this.getEdgeIndex(e.aIndex,e.aUnit.id,e.bIndex,e.bUnit.id):-1}}!function(e){class t extends JM.UnitPairEdges{}e.UnitPairBonds=t}(eR||(eR={}));const tR={forceCompute:!1,noCompute:!1,maxRadius:4},nR={H:0,h:0,D:0,d:0,T:0,t:0,He:2,HE:2,he:2,Li:3,LI:3,li:3,Be:4,BE:4,be:4,B:5,b:5,C:6,c:6,N:7,n:7,O:8,o:8,F:9,f:9,Ne:10,NE:10,ne:10,Na:11,NA:11,na:11,Mg:12,MG:12,mg:12,Al:13,AL:13,al:13,Si:14,SI:14,si:14,P:15,p:15,S:16,s:16,Cl:17,CL:17,cl:17,Ar:18,AR:18,ar:18,K:19,k:19,Ca:20,CA:20,ca:20,Sc:21,SC:21,sc:21,Ti:22,TI:22,ti:22,V:23,v:23,Cr:24,CR:24,cr:24,Mn:25,MN:25,mn:25,Fe:26,FE:26,fe:26,Co:27,CO:27,co:27,Ni:28,NI:28,ni:28,Cu:29,CU:29,cu:29,Zn:30,ZN:30,zn:30,Ga:31,GA:31,ga:31,Ge:32,GE:32,ge:32,As:33,AS:33,as:33,Se:34,SE:34,se:34,Br:35,BR:35,br:35,Kr:36,KR:36,kr:36,Rb:37,RB:37,rb:37,Sr:38,SR:38,sr:38,Y:39,y:39,Zr:40,ZR:40,zr:40,Nb:41,NB:41,nb:41,Mo:42,MO:42,mo:42,Tc:43,TC:43,tc:43,Ru:44,RU:44,ru:44,Rh:45,RH:45,rh:45,Pd:46,PD:46,pd:46,Ag:47,AG:47,ag:47,Cd:48,CD:48,cd:48,In:49,IN:49,in:49,Sn:50,SN:50,sn:50,Sb:51,SB:51,sb:51,Te:52,TE:52,te:52,I:53,i:53,Xe:54,XE:54,xe:54,Cs:55,CS:55,cs:55,Ba:56,BA:56,ba:56,La:57,LA:57,la:57,Ce:58,CE:58,ce:58,Pr:59,PR:59,pr:59,Nd:60,ND:60,nd:60,Pm:61,PM:61,pm:61,Sm:62,SM:62,sm:62,Eu:63,EU:63,eu:63,Gd:64,GD:64,gd:64,Tb:65,TB:65,tb:65,Dy:66,DY:66,dy:66,Ho:67,HO:67,ho:67,Er:68,ER:68,er:68,Tm:69,TM:69,tm:69,Yb:70,YB:70,yb:70,Lu:71,LU:71,lu:71,Hf:72,HF:72,hf:72,Ta:73,TA:73,ta:73,W:74,w:74,Re:75,RE:75,re:75,Os:76,OS:76,os:76,Ir:77,IR:77,ir:77,Pt:78,PT:78,pt:78,Au:79,AU:79,au:79,Hg:80,HG:80,hg:80,Tl:81,TL:81,tl:81,Pb:82,PB:82,pb:82,Bi:83,BI:83,bi:83,Po:84,PO:84,po:84,At:85,AT:85,at:85,Rn:86,RN:86,rn:86,Fr:87,FR:87,fr:87,Ra:88,RA:88,ra:88,Ac:89,AC:89,ac:89,Th:90,TH:90,th:90,Pa:91,PA:91,pa:91,U:92,u:92,Np:93,NP:93,np:93,Pu:94,PU:94,pu:94,Am:95,AM:95,am:95,Cm:96,CM:96,cm:96,Bk:97,BK:97,bk:97,Cf:98,CF:98,cf:98,Es:99,ES:99,es:99,Fm:100,FM:100,fm:100,Md:101,MD:101,md:101,No:102,NO:102,no:102,Lr:103,LR:103,lr:103,Rf:104,RF:104,rf:104,Db:105,DB:105,db:105,Sg:106,SG:106,sg:106,Bh:107,BH:107,bh:107,Hs:108,HS:108,hs:108,Mt:109,MT:109,mt:109},rR={0:1.42,1:1.42,3:2.7,4:2.7,6:1.75,7:1.6,8:1.52,11:2.7,12:2.7,13:2.7,14:1.9,15:2,16:1.9,17:1.8,19:2.7,20:2.7,21:2.7,22:2.7,23:2.7,24:2.7,25:2.7,26:2.7,27:2.7,28:2.7,29:2.7,30:2.7,31:2.7,33:2.68,37:2.7,38:2.7,39:2.7,40:2.7,41:2.7,42:2.7,43:2.7,44:2.7,45:2.7,46:2.7,47:2.7,48:2.7,49:2.7,50:2.7,55:2.7,56:2.7,57:2.7,58:2.7,59:2.7,60:2.7,61:2.7,62:2.7,63:2.7,64:2.7,65:2.7,66:2.7,67:2.7,68:2.7,69:2.7,70:2.7,71:2.7,72:2.7,73:2.7,74:2.7,75:2.7,76:2.7,77:2.7,78:2.7,79:2.7,80:2.7,81:2.7,82:2.7,83:2.7,87:2.7,88:2.7,89:2.7,90:2.7,91:2.7,92:2.7,93:2.7,94:2.7,95:2.7,96:2.7,97:2.7,98:2.7,99:2.7,100:2.7,101:2.7,102:2.7,103:2.7,104:2.7,105:2.7,106:2.7,107:2.7,108:2.7,109:2.88},oR={0:.8,20:1.31,27:1.2,35:1.15,44:1.1,54:1,60:1.84,72:1.88,84:1.75,85:1.56,86:1.76,98:1.6,99:1.68,100:1.63,112:1.6,113:1.59,114:1.36,129:1.45,135:1.47,144:1.6,152:1.45,170:1.4,180:1.55,202:2.4,222:2.24,224:1.91,225:1.98,243:2.02,269:2,293:1.9,316:1.8,420:2.37,480:2.3,512:2.3,544:2.3,612:2.1,629:1.54,665:1,813:2.6,854:2.27,894:1.93,896:2.1,937:2.05,938:2.06,981:1.62,1258:2.68,1309:2.33,1484:1,1763:2.14,1823:2.48,1882:2.1,1944:1.72,2380:2.34,3367:2.44,3733:2.11,3819:2.6,3821:2.36,4736:2.75,5724:2.73,5959:2.63,6519:2.84,6750:2.87,8991:2.81},iR=2.001,aR=function(){const e=["LI","NA","K","RB","CS","FR","BE","MG","CA","SR","BA","RA","AL","GA","IN","SN","TL","PB","BI","SC","TI","V","CR","MN","FE","CO","NI","CU","ZN","Y","ZR","NB","MO","TC","RU","RH","PD","AG","CD","LA","HF","TA","W","RE","OS","IR","PT","AU","HG","AC","RF","DB","SG","BH","HS","MT","CE","PR","ND","PM","SM","EU","GD","TB","DY","HO","ER","TM","YB","LU","TH","PA","U","NP","PU","AM","CM","BK","CF","ES","FM","MD","NO","LR"],t=new Set;for(const n of e)t.add(nR[n]);return t}();function sR(e){const t=nR[e];return void 0===t?-1:t}function lR(e){if(e<0)return iR;const t=rR[e];return void 0===t?iR:t}function cR(e,t,n,r){const o=function(e,t){if(e<0||t<0)return-1;const n=oR[function(e,t){return e<t?(e+t)*(e+t+1)/2+t:(e+t)*(e+t+1)/2+e}(e,t)];return void 0===n?-1:n}(e,t);return o>0?o:t<0?n:(n+r)/1.95}const uR=nR.H;function dR(e){return e===uR}const AR=new Map([["HIS|CD2|CG",2],["HIS|CE1|ND1",2],["ARG|CZ|NH2",2],["PHE|CE1|CZ",2],["PHE|CD2|CE2",2],["PHE|CD1|CG",2],["TRP|CD1|CG",2],["TRP|CD2|CE2",2],["TRP|CE3|CZ3",2],["TRP|CH2|CZ2",2],["ASN|CG|OD1",2],["GLN|CD|OE1",2],["TYR|CD1|CG",2],["TYR|CD2|CE2",2],["TYR|CE1|CZ",2],["ASP|CG|OD1",2],["GLU|CD|OE1",2],["G|C8|N7",2],["G|C4|C5",2],["G|C2|N3",2],["G|C6|O6",2],["C|C4|N3",2],["C|C5|C6",2],["C|C2|O2",2],["A|C2|N3",2],["A|C6|N1",2],["A|C4|C5",2],["A|C8|N7",2],["U|C5|C6",2],["U|C2|O2",2],["U|C4|O4",2],["DG|C8|N7",2],["DG|C4|C5",2],["DG|C2|N3",2],["DG|C6|O6",2],["DC|C4|N3",2],["DC|C5|C6",2],["DC|C2|O2",2],["DA|C2|N3",2],["DA|C6|N1",2],["DA|C4|C5",2],["DA|C8|N7",2],["DT|C5|C6",2],["DT|C2|O2",2],["DT|C4|O4",2]]);function fR(e,t,n){return[t,n]=t<n?[t,n]:[n,t],BM.has(e)&&"C"===t&&"O"===n||QM.has(e)&&"OP1"===t&&"P"===n?2:AR.get(`${e}|${t}|${n}`)||1}const pR=new Map([["LYS|NZ|RET|C15",2]]);function hR(e,t,n,r){return e>n&&([e,n]=[n,e],[t,r]=[r,t]),pR.get(`${e}|${t}|${n}|${r}`)||1}var gR=ag.Schema;const mR=gR.str,yR=gR.int,vR=gR.float,bR=gR.coord,CR=gR.Aliased,IR=gR.Matrix,ER=gR.Vector,xR=gR.lstr,BR=gR.List,wR={atom_site:{auth_asym_id:mR,auth_atom_id:mR,auth_comp_id:mR,auth_seq_id:yR,B_iso_or_equiv:vR,Cartn_x:bR,Cartn_y:bR,Cartn_z:bR,group_PDB:CR(mR),id:yR,label_alt_id:mR,label_asym_id:mR,label_atom_id:mR,label_comp_id:mR,label_entity_id:mR,label_seq_id:yR,occupancy:vR,type_symbol:mR,pdbx_PDB_ins_code:mR,pdbx_PDB_model_num:yR,pdbx_formal_charge:yR,pdbx_label_index:yR,pdbx_sifts_xref_db_name:mR,pdbx_sifts_xref_db_acc:mR,pdbx_sifts_xref_db_num:mR,pdbx_sifts_xref_db_res:mR,ihm_model_id:yR},atom_site_anisotrop:{id:yR,type_symbol:mR,U:IR(3,3),U_esd:IR(3,3),pdbx_auth_seq_id:yR,pdbx_auth_asym_id:mR,pdbx_auth_atom_id:mR,pdbx_auth_comp_id:mR,pdbx_label_seq_id:yR,pdbx_label_alt_id:mR,pdbx_label_asym_id:mR,pdbx_label_atom_id:mR,pdbx_label_comp_id:mR,pdbx_PDB_ins_code:mR},atom_sites:{entry_id:mR,fract_transf_matrix:IR(3,3),fract_transf_vector:ER(3)},audit_author:{name:mR,pdbx_ordinal:yR,identifier_ORCID:mR},audit_conform:{dict_location:mR,dict_name:mR,dict_version:mR},cell:{angle_alpha:vR,angle_beta:vR,angle_gamma:vR,entry_id:mR,length_a:vR,length_b:vR,length_c:vR,Z_PDB:yR,pdbx_unique_axis:mR},chem_comp:{formula:mR,formula_weight:vR,id:mR,mon_nstd_flag:CR(xR),name:mR,type:CR(xR),pdbx_synonyms:BR(";",(e=>e))},chem_comp_bond:{atom_id_1:mR,atom_id_2:mR,comp_id:mR,value_order:CR(xR),pdbx_ordinal:yR,pdbx_stereo_config:CR(xR),pdbx_aromatic_flag:CR(xR)},citation:{book_publisher:mR,country:mR,id:mR,journal_abbrev:mR,journal_id_ASTM:mR,journal_id_CSD:mR,journal_id_ISSN:mR,journal_volume:mR,page_first:mR,page_last:mR,title:mR,year:yR,pdbx_database_id_DOI:mR,pdbx_database_id_PubMed:yR},citation_author:{citation_id:mR,name:mR,ordinal:yR},database_2:{database_id:CR(xR),database_code:mR},entity:{details:mR,formula_weight:vR,id:mR,src_method:CR(xR),type:CR(xR),pdbx_description:BR(",",(e=>e)),pdbx_number_of_molecules:yR,pdbx_parent_entity_id:mR,pdbx_mutation:mR,pdbx_fragment:mR,pdbx_ec:BR(",",(e=>e))},entity_poly:{entity_id:mR,nstd_linkage:CR(xR),nstd_monomer:CR(xR),type:CR(mR),pdbx_strand_id:BR(",",(e=>e)),pdbx_seq_one_letter_code:mR,pdbx_seq_one_letter_code_can:mR,pdbx_target_identifier:mR},entity_poly_seq:{entity_id:mR,hetero:CR(xR),mon_id:mR,num:yR},entry:{id:mR},exptl:{entry_id:mR,method:CR(mR)},software:{classification:mR,date:mR,description:mR,name:mR,type:CR(xR),version:mR,pdbx_ordinal:yR},struct:{entry_id:mR,title:mR,pdbx_descriptor:mR},struct_asym:{details:mR,entity_id:mR,id:mR,pdbx_modified:mR,pdbx_blank_PDB_chainid_flag:CR(mR)},struct_conf:{beg_label_asym_id:mR,beg_label_comp_id:mR,beg_label_seq_id:yR,beg_auth_asym_id:mR,beg_auth_comp_id:mR,beg_auth_seq_id:yR,conf_type_id:CR(xR),details:mR,end_label_asym_id:mR,end_label_comp_id:mR,end_label_seq_id:yR,end_auth_asym_id:mR,end_auth_comp_id:mR,end_auth_seq_id:yR,id:mR,pdbx_beg_PDB_ins_code:mR,pdbx_end_PDB_ins_code:mR,pdbx_PDB_helix_class:mR,pdbx_PDB_helix_length:yR,pdbx_PDB_helix_id:mR},struct_conn:{conn_type_id:CR(xR),details:mR,id:mR,ptnr1_label_asym_id:mR,ptnr1_label_atom_id:mR,ptnr1_label_comp_id:mR,ptnr1_label_seq_id:yR,ptnr1_auth_asym_id:mR,ptnr1_auth_comp_id:mR,ptnr1_auth_seq_id:yR,ptnr1_symmetry:mR,ptnr2_label_asym_id:mR,ptnr2_label_atom_id:mR,ptnr2_label_comp_id:mR,ptnr2_label_seq_id:yR,ptnr2_auth_asym_id:mR,ptnr2_auth_comp_id:mR,ptnr2_auth_seq_id:yR,ptnr2_symmetry:mR,pdbx_ptnr1_PDB_ins_code:mR,pdbx_ptnr1_label_alt_id:mR,pdbx_ptnr1_standard_comp_id:mR,pdbx_ptnr2_PDB_ins_code:mR,pdbx_ptnr2_label_alt_id:mR,pdbx_ptnr3_PDB_ins_code:mR,pdbx_ptnr3_label_alt_id:mR,pdbx_ptnr3_label_asym_id:mR,pdbx_ptnr3_label_atom_id:mR,pdbx_ptnr3_label_comp_id:mR,pdbx_ptnr3_label_seq_id:yR,pdbx_PDB_id:mR,pdbx_dist_value:vR,pdbx_value_order:CR(xR)},struct_conn_type:{criteria:mR,id:CR(xR),reference:mR},struct_keywords:{entry_id:mR,text:BR(",",(e=>e)),pdbx_keywords:mR},struct_mon_prot_cis:{label_alt_id:mR,label_asym_id:mR,label_comp_id:mR,label_seq_id:yR,auth_asym_id:mR,auth_comp_id:mR,auth_seq_id:yR,pdbx_auth_asym_id_2:mR,pdbx_auth_comp_id_2:mR,pdbx_auth_seq_id_2:yR,pdbx_label_asym_id_2:mR,pdbx_label_comp_id_2:mR,pdbx_label_seq_id_2:yR,pdbx_PDB_ins_code:mR,pdbx_PDB_ins_code_2:mR,pdbx_PDB_model_num:yR,pdbx_omega_angle:mR,pdbx_id:mR,pdbx_auth_ins_code:mR,pdbx_auth_ins_code_2:mR},struct_ncs_oper:{code:CR(mR),details:mR,id:yR,matrix:IR(3,3),vector:ER(3)},struct_sheet_range:{beg_label_asym_id:mR,beg_label_comp_id:mR,beg_label_seq_id:yR,end_label_asym_id:mR,end_label_comp_id:mR,end_label_seq_id:yR,beg_auth_asym_id:mR,beg_auth_comp_id:mR,beg_auth_seq_id:yR,end_auth_asym_id:mR,end_auth_comp_id:mR,end_auth_seq_id:yR,id:mR,sheet_id:mR,pdbx_beg_PDB_ins_code:mR,pdbx_end_PDB_ins_code:mR},struct_site:{details:mR,id:mR,pdbx_num_residues:yR,pdbx_evidence_code:mR,pdbx_auth_asym_id:mR,pdbx_auth_comp_id:mR,pdbx_auth_seq_id:yR,pdbx_auth_ins_code:mR},struct_site_gen:{details:mR,id:mR,label_alt_id:mR,label_asym_id:mR,label_atom_id:mR,label_comp_id:mR,label_seq_id:yR,auth_asym_id:mR,auth_atom_id:mR,auth_comp_id:mR,auth_seq_id:yR,site_id:mR,symmetry:mR,pdbx_auth_ins_code:mR,pdbx_num_res:yR},struct_site_keywords:{site_id:mR,text:mR},symmetry:{entry_id:mR,cell_setting:CR(xR),Int_Tables_number:yR,space_group_name_Hall:mR,"space_group_name_H-M":mR},pdbx_database_status:{status_code:CR(mR),status_code_sf:CR(mR),status_code_mr:CR(mR),entry_id:mR,recvd_initial_deposition_date:mR,SG_entry:CR(xR),deposit_site:CR(mR),process_site:CR(mR),status_code_cs:CR(mR),methods_development_category:CR(mR),pdb_format_compatible:CR(xR)},pdbx_nonpoly_scheme:{asym_id:mR,entity_id:mR,mon_id:mR,pdb_strand_id:mR,ndb_seq_num:mR,pdb_seq_num:mR,auth_seq_num:mR,pdb_mon_id:mR,auth_mon_id:mR,pdb_ins_code:mR},pdbx_database_related:{db_name:mR,details:mR,db_id:mR,content_type:CR(mR)},pdbx_entity_nonpoly:{entity_id:mR,comp_id:mR,name:mR},pdbx_chem_comp_synonyms:{name:mR,comp_id:mR,provenance:CR(mR)},pdbx_chem_comp_identifier:{comp_id:mR,identifier:mR,type:CR(mR),program:mR,program_version:mR},pdbx_unobs_or_zero_occ_residues:{id:yR,polymer_flag:CR(xR),occupancy_flag:CR(yR),PDB_model_num:yR,auth_asym_id:mR,auth_comp_id:mR,auth_seq_id:yR,PDB_ins_code:mR,label_asym_id:mR,label_comp_id:mR,label_seq_id:yR},pdbx_struct_mod_residue:{id:yR,auth_asym_id:mR,auth_comp_id:mR,auth_seq_id:yR,PDB_ins_code:mR,label_asym_id:mR,label_comp_id:mR,label_seq_id:yR,parent_comp_id:mR,details:mR},pdbx_struct_oper_list:{id:mR,type:CR(mR),name:mR,symmetry_operation:mR,matrix:IR(3,3),vector:ER(3)},pdbx_struct_assembly:{method_details:mR,oligomeric_details:mR,oligomeric_count:yR,details:mR,id:mR},pdbx_struct_assembly_gen:{asym_id_list:BR(",",(e=>e)),assembly_id:mR,oper_expression:mR},pdbx_reference_entity_list:{prd_id:mR,ref_entity_id:mR,type:CR(xR),details:mR,component_id:yR},pdbx_reference_entity_link:{link_id:yR,prd_id:mR,details:mR,ref_entity_id_1:mR,ref_entity_id_2:mR,entity_seq_num_1:yR,entity_seq_num_2:yR,comp_id_1:mR,comp_id_2:mR,atom_id_1:mR,atom_id_2:mR,value_order:CR(xR),component_1:yR,component_2:yR,link_class:CR(mR)},pdbx_reference_entity_poly_link:{link_id:yR,prd_id:mR,ref_entity_id:mR,component_id:yR,entity_seq_num_1:yR,entity_seq_num_2:yR,comp_id_1:mR,comp_id_2:mR,atom_id_1:mR,atom_id_2:mR,value_order:CR(xR)},pdbx_molecule:{prd_id:mR,instance_id:yR,asym_id:mR},pdbx_molecule_features:{prd_id:mR,class:CR(xR),type:CR(xR),name:mR,details:mR},entity_src_nat:{entity_id:mR,pdbx_organism_scientific:mR,pdbx_plasmid_name:mR,pdbx_src_id:yR,pdbx_beg_seq_num:yR,pdbx_end_seq_num:yR},entity_src_gen:{entity_id:mR,pdbx_gene_src_gene:BR(",",(e=>e)),pdbx_gene_src_scientific_name:mR,plasmid_name:mR,pdbx_src_id:yR,pdbx_beg_seq_num:yR,pdbx_end_seq_num:yR},pdbx_entity_src_syn:{organism_scientific:mR,entity_id:mR,pdbx_src_id:yR,pdbx_beg_seq_num:yR,pdbx_end_seq_num:yR},pdbx_entity_branch_descriptor:{entity_id:mR,descriptor:mR,type:CR(xR),program:mR,program_version:mR,ordinal:yR},pdbx_entity_instance_feature:{details:mR,feature_type:CR(mR),auth_asym_id:mR,asym_id:mR,auth_seq_num:mR,seq_num:yR,comp_id:mR,auth_comp_id:mR,ordinal:yR},pdbx_entity_branch_list:{entity_id:mR,hetero:CR(xR),comp_id:mR,num:yR},pdbx_entity_branch_link:{link_id:yR,details:mR,entity_id:mR,entity_branch_list_num_1:yR,entity_branch_list_num_2:yR,comp_id_1:mR,comp_id_2:mR,atom_id_1:mR,leaving_atom_id_1:mR,atom_stereo_config_1:CR(xR),atom_id_2:mR,leaving_atom_id_2:mR,atom_stereo_config_2:CR(xR),value_order:CR(xR)},pdbx_entity_branch:{entity_id:mR,type:CR(mR)},pdbx_branch_scheme:{entity_id:mR,hetero:CR(xR),asym_id:mR,mon_id:mR,num:yR,pdb_asym_id:mR,pdb_seq_num:mR,pdb_mon_id:mR,auth_asym_id:mR,auth_seq_num:mR,auth_mon_id:mR},pdbx_chem_comp_related:{comp_id:mR,related_comp_id:mR,relationship_type:CR(mR),details:mR},ihm_starting_model_details:{starting_model_id:mR,entity_id:mR,entity_description:mR,asym_id:mR,entity_poly_segment_id:yR,starting_model_source:CR(mR),starting_model_auth_asym_id:mR,starting_model_sequence_offset:yR,dataset_list_id:yR},ihm_starting_comparative_models:{id:yR,starting_model_id:mR,starting_model_auth_asym_id:mR,starting_model_seq_id_begin:yR,starting_model_seq_id_end:yR,template_auth_asym_id:mR,template_seq_id_begin:yR,template_seq_id_end:yR,template_sequence_identity:vR,template_sequence_identity_denominator:CR(yR),template_dataset_list_id:yR,alignment_file_id:yR},ihm_starting_model_seq_dif:{id:yR,entity_id:mR,asym_id:mR,seq_id:yR,comp_id:mR,starting_model_id:mR,db_asym_id:mR,db_seq_id:yR,db_comp_id:mR,details:mR},ihm_model_representation:{id:yR,name:mR,details:mR},ihm_model_representation_details:{id:yR,representation_id:yR,entity_poly_segment_id:yR,entity_id:mR,entity_description:mR,entity_asym_id:mR,model_object_primitive:CR(mR),starting_model_id:mR,model_mode:CR(mR),model_granularity:CR(mR),model_object_count:yR},ihm_struct_assembly_details:{id:yR,assembly_id:yR,parent_assembly_id:yR,entity_description:mR,entity_id:mR,asym_id:mR,entity_poly_segment_id:yR},ihm_struct_assembly:{id:yR,name:mR,description:mR},ihm_modeling_protocol:{id:yR,num_steps:yR,protocol_name:mR},ihm_modeling_protocol_details:{id:yR,protocol_id:yR,step_id:yR,struct_assembly_id:yR,dataset_group_id:yR,struct_assembly_description:mR,step_name:mR,step_method:mR,num_models_begin:yR,num_models_end:yR,multi_scale_flag:CR(xR),multi_state_flag:CR(xR),ordered_flag:CR(xR),script_file_id:yR,software_id:yR},ihm_multi_state_modeling:{state_id:yR,state_group_id:yR,population_fraction:vR,population_fraction_sd:vR,state_type:mR,state_name:mR,experiment_type:CR(mR),details:mR},ihm_modeling_post_process:{id:yR,protocol_id:yR,analysis_id:yR,step_id:yR,type:CR(mR),feature:CR(mR),num_models_begin:yR,num_models_end:yR},ihm_ensemble_info:{ensemble_id:yR,ensemble_name:mR,post_process_id:yR,model_group_id:yR,ensemble_clustering_method:CR(mR),ensemble_clustering_feature:CR(mR),num_ensemble_models:yR,num_ensemble_models_deposited:yR,ensemble_precision_value:vR,ensemble_file_id:yR},ihm_model_list:{model_id:yR,model_name:mR,assembly_id:yR,protocol_id:yR,representation_id:yR},ihm_model_group:{id:yR,name:mR,details:mR},ihm_model_group_link:{model_id:yR,group_id:yR},ihm_model_representative:{id:yR,model_group_id:yR,model_id:yR,selection_criteria:CR(mR)},ihm_dataset_list:{id:yR,data_type:CR(mR),database_hosted:CR(xR)},ihm_dataset_group:{id:yR,name:mR,application:CR(mR),details:mR},ihm_dataset_group_link:{dataset_list_id:yR,group_id:yR},ihm_related_datasets:{dataset_list_id_derived:yR,dataset_list_id_primary:yR},ihm_dataset_related_db_reference:{id:yR,dataset_list_id:yR,db_name:CR(mR),accession_code:mR,version:mR,details:mR},ihm_external_reference_info:{reference_id:yR,reference_provider:mR,reference_type:CR(mR),reference:mR,refers_to:CR(mR),associated_url:mR},ihm_external_files:{id:yR,reference_id:yR,file_path:mR,content_type:CR(mR),file_size_bytes:vR,details:mR},ihm_dataset_external_reference:{id:yR,dataset_list_id:yR,file_id:yR},ihm_localization_density_files:{id:yR,file_id:yR,ensemble_id:yR,entity_id:mR,entity_poly_segment_id:yR,asym_id:mR},ihm_predicted_contact_restraint:{id:yR,group_id:yR,entity_id_1:mR,entity_id_2:mR,asym_id_1:mR,asym_id_2:mR,comp_id_1:mR,comp_id_2:mR,seq_id_1:yR,seq_id_2:yR,rep_atom_1:CR(mR),rep_atom_2:CR(mR),distance_lower_limit:vR,distance_upper_limit:vR,probability:vR,restraint_type:CR(mR),model_granularity:CR(mR),dataset_list_id:yR,software_id:yR},ihm_cross_link_list:{id:yR,group_id:yR,entity_description_1:mR,entity_description_2:mR,entity_id_1:mR,entity_id_2:mR,comp_id_1:mR,comp_id_2:mR,seq_id_1:yR,seq_id_2:yR,linker_type:CR(mR),dataset_list_id:yR},ihm_cross_link_restraint:{id:yR,group_id:yR,entity_id_1:mR,entity_id_2:mR,asym_id_1:mR,asym_id_2:mR,comp_id_1:mR,comp_id_2:mR,seq_id_1:yR,seq_id_2:yR,atom_id_1:mR,atom_id_2:mR,restraint_type:CR(mR),conditional_crosslink_flag:CR(mR),model_granularity:CR(mR),distance_threshold:vR,psi:vR,sigma_1:vR,sigma_2:vR},ihm_cross_link_result_parameters:{id:yR,restraint_id:yR,model_id:yR,psi:vR,sigma_1:vR,sigma_2:vR},ihm_2dem_class_average_restraint:{id:yR,dataset_list_id:yR,number_raw_micrographs:yR,pixel_size_width:vR,pixel_size_height:vR,image_resolution:vR,image_segment_flag:CR(xR),number_of_projections:yR,struct_assembly_id:yR,details:mR},ihm_2dem_class_average_fitting:{id:yR,restraint_id:yR,model_id:yR,cross_correlation_coefficient:vR,rot_matrix:IR(3,3),tr_vector:ER(3)},ihm_3dem_restraint:{id:yR,dataset_list_id:yR,model_id:yR,struct_assembly_id:yR,fitting_method:mR,number_of_gaussians:yR,cross_correlation_coefficient:vR},ihm_sas_restraint:{id:yR,dataset_list_id:yR,model_id:yR,struct_assembly_id:yR,profile_segment_flag:CR(xR),fitting_atom_type:mR,fitting_method:mR,fitting_state:CR(mR),radius_of_gyration:vR,chi_value:vR,details:mR},ihm_starting_model_coord:{ordinal_id:yR,starting_model_id:mR,group_PDB:CR(mR),id:yR,type_symbol:mR,entity_id:mR,atom_id:mR,comp_id:mR,seq_id:yR,asym_id:mR,Cartn_x:vR,Cartn_y:vR,Cartn_z:vR,B_iso_or_equiv:vR},ihm_sphere_obj_site:{id:yR,entity_id:mR,seq_id_begin:yR,seq_id_end:yR,asym_id:mR,Cartn_x:vR,Cartn_y:vR,Cartn_z:vR,object_radius:vR,rmsf:vR,model_id:yR},ihm_gaussian_obj_site:{id:yR,entity_id:mR,seq_id_begin:yR,seq_id_end:yR,asym_id:mR,mean_Cartn_x:vR,mean_Cartn_y:vR,mean_Cartn_z:vR,weight:vR,covariance_matrix:IR(3,3),model_id:yR},ihm_gaussian_obj_ensemble:{id:yR,entity_id:mR,seq_id_begin:yR,seq_id_end:yR,asym_id:mR,mean_Cartn_x:vR,mean_Cartn_y:vR,mean_Cartn_z:vR,weight:vR,covariance_matrix:IR(3,3),ensemble_id:yR},ihm_feature_list:{feature_id:yR,feature_type:CR(mR),entity_type:CR(mR)},ihm_poly_residue_feature:{ordinal_id:yR,feature_id:yR,entity_id:mR,asym_id:mR,comp_id_begin:mR,comp_id_end:mR,seq_id_begin:yR,seq_id_end:yR},ihm_derived_distance_restraint:{id:yR,group_id:yR,feature_id_1:yR,feature_id_2:yR,group_conditionality:CR(mR),random_exclusion_fraction:vR,distance_upper_limit:vR,restraint_type:CR(mR),dataset_list_id:yR},ma_model_list:{ordinal_id:yR,model_id:yR,model_group_id:yR,model_name:mR,model_group_name:mR,model_type:CR(mR),data_id:yR},ma_target_entity:{entity_id:mR,data_id:yR,origin:CR(mR)},ma_target_entity_instance:{asym_id:mR,entity_id:mR,details:mR},ma_target_ref_db_details:{target_entity_id:mR,db_name:CR(mR),db_code:mR,db_accession:mR,seq_db_isoform:mR,seq_db_align_begin:mR,seq_db_align_end:mR,ncbi_taxonomy_id:mR,organism_scientific:mR},ma_data:{id:yR,content_type:CR(mR),content_type_other_details:mR,name:mR},ma_software_group:{ordinal_id:yR,group_id:yR,software_id:yR},ma_qa_metric:{id:yR,name:mR,type:CR(mR),mode:CR(mR),software_group_id:yR},ma_qa_metric_global:{ordinal_id:yR,model_id:yR,metric_id:yR,metric_value:vR},ma_qa_metric_local:{ordinal_id:yR,model_id:yR,label_asym_id:mR,label_seq_id:yR,label_comp_id:mR,metric_id:yR,metric_value:vR}};var _R;!function(e){let t,n;!function(e){e[e.Int8=1]="Int8",e[e.Int16=2]="Int16",e[e.Int32=3]="Int32",e[e.Uint8=4]="Uint8",e[e.Uint16=5]="Uint16",e[e.Uint32=6]="Uint32"}(t=e.IntDataType||(e.IntDataType={})),function(e){e[e.Float32=32]="Float32",e[e.Float64=33]="Float64"}(n=e.FloatDataType||(e.FloatDataType={})),e.getDataType=function(t){let n;return n=t instanceof Int8Array?e.IntDataType.Int8:t instanceof Int16Array?e.IntDataType.Int16:t instanceof Int32Array?e.IntDataType.Int32:t instanceof Uint8Array?e.IntDataType.Uint8:t instanceof Uint16Array?e.IntDataType.Uint16:t instanceof Uint32Array?e.IntDataType.Uint32:t instanceof Float32Array?e.FloatDataType.Float32:t instanceof Float64Array?e.FloatDataType.Float64:e.IntDataType.Int32,n},e.isSignedIntegerDataType=function(e){if(e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array)return!0;for(let t=0,n=e.length;t<n;t++)if(t<0)return!1;return!0}}(_R||(_R={}));const SR=13330===new Uint16Array(new Uint8Array([18,52]).buffer)[0];const DR=28672;function TR(e){let t=e.data;for(let n=e.encoding.length-1;n>=0;n--)t=kR(t,e.encoding[n]);return t}function kR(e,t){switch(t.kind){case"ByteArray":switch(t.type){case _R.IntDataType.Uint8:return e;case _R.IntDataType.Int8:return function(e){return new Int8Array(e.buffer,e.byteOffset)}(e);case _R.IntDataType.Int16:return function(e){return RR(e,2,Int16Array)}(e);case _R.IntDataType.Uint16:return function(e){return RR(e,2,Uint16Array)}(e);case _R.IntDataType.Int32:return function(e){return RR(e,4,Int32Array)}(e);case _R.IntDataType.Uint32:return function(e){return RR(e,4,Uint32Array)}(e);case _R.FloatDataType.Float32:return function(e){return RR(e,4,Float32Array)}(e);case _R.FloatDataType.Float64:return function(e){return RR(e,8,Float64Array)}(e);default:Zh(t.type)}case"FixedPoint":return function(e,t){const n=e.length,r=MR(t.srcType,n),o=1/t.factor;for(let i=0;i<n;i++)r[i]=o*e[i];return r}(e,t);case"IntervalQuantization":return function(e,t){const n=e.length,r=MR(t.srcType,n),o=(t.max-t.min)/(t.numSteps-1),i=t.min;for(let a=0;a<n;a++)r[a]=i+o*e[a];return r}(e,t);case"RunLength":return function(e,t){const n=QR(t.srcType,t.srcSize);let r=0;for(let o=0,i=e.length;o<i;o+=2){const t=e[o],i=e[o+1];for(let e=0;e<i;++e)n[r++]=t}return n}(e,t);case"Delta":return function(e,t){const n=e.length,r=QR(t.srcType,n);if(!n)return e;r[0]=e[0]+(0|t.origin);for(let o=1;o<n;++o)r[o]=e[o]+r[o-1];return r}(e,t);case"IntegerPacking":return function(e,t){return e.length===t.srcSize?e:t.isUnsigned?function(e,t){const n=1===t.byteCount?255:65535,r=e.length,o=new Int32Array(t.srcSize);let i=0,a=0;for(;i<r;){let t=0,r=e[i];for(;r===n;)t+=r,i++,r=e[i];t+=r,o[a]=t,i++,a++}return o}(e,t):function(e,t){const n=1===t.byteCount?127:32767,r=-n-1,o=e.length,i=new Int32Array(t.srcSize);let a=0,s=0;for(;a<o;){let t=0,o=e[a];for(;o===n||o===r;)t+=o,a++,o=e[a];t+=o,i[s]=t,a++,s++}return i}(e,t)}(e,t);case"StringArray":return function(e,t){const n=TR({encoding:t.offsetEncoding,data:t.offsets}),r=TR({encoding:t.dataEncoding,data:e}),o=t.stringData,i=new Array(n.length);i[0]="";for(let l=1,c=n.length;l<c;l++)i[l]=o.substring(n[l-1],n[l]);let a=0;const s=new Array(r.length);for(let l=0,c=r.length;l<c;l++)s[a++]=i[r[l]+1];return s}(e,t)}}function QR(e,t){switch(e){case _R.IntDataType.Int8:return new Int8Array(t);case _R.IntDataType.Int16:return new Int16Array(t);case _R.IntDataType.Int32:return new Int32Array(t);case _R.IntDataType.Uint8:return new Uint8Array(t);case _R.IntDataType.Uint16:return new Uint16Array(t);case _R.IntDataType.Uint32:return new Uint32Array(t);default:return new Int32Array(t)}}function MR(e,t){switch(e){case _R.FloatDataType.Float32:return new Float32Array(t);case _R.FloatDataType.Float64:default:return new Float64Array(t)}}function RR(e,t,n){return new n(SR?e.buffer:function(e,t){const n=new ArrayBuffer(e.length),r=new Uint8Array(n);for(let o=0,i=e.length;o<i;o+=t)for(let n=0;n<t;n++)r[o+t-n-1]=e[o+n];return n}(e,t))}function PR(e,t,n){let r,o=1;for(r=0;r<t;r++){const t=o*e;if(Math.abs(Math.round(t)-t)<=n)return r;o*=10}return-1}function OR(e){if(!isFinite(e))return 0;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,++n;return n}function FR(e,t){return parseFloat(e.toPrecision(t))}function NR(e){return LR.classify(e)}var LR,UR,GR,jR,zR,HR,VR,qR,YR,XR;!function(e){function t(e,t){return e>=0?Math.ceil((e+1)/t):Math.ceil((e+1)/(-t-1))}function n(e,n,r){let{limit8:o,limit16:i}=e;n.pack8+=t(r,o),n.pack16+=t(r,i),n.count+=1}function r(e,n){e.pack8+=t(n,127),e.pack16+=t(n,32767),e.count+=1}function o(e){return 4*e.count<2*e.pack16?{length:4*e.count,elem:4}:2*e.pack16<e.pack8?{length:2*e.pack16,elem:2}:{length:e.pack8,elem:1}}function i(e,t){const r={pack8:0,pack16:0,count:0};for(let o=0,i=e.length;o<i;o++)n(t,r,e[o]);return{...o(r),kind:"pack"}}function a(e,t){const n={pack8:0,pack16:0,count:0};let i=e[0];for(let o=1,a=e.length;o<a;o++)r(n,e[o]-i),i=e[o];return{...o(n),kind:"delta"}}function s(e,t){const r={pack8:0,pack16:0,count:0};let i=1;for(let o=1,a=e.length;o<a;o++)e[o-1]!==e[o]?(n(t,r,e[o-1]),n(t,r,i),i=1):i++;return n(t,r,e[e.length-1]),n(t,r,i),{...o(r),kind:"rle"}}function l(e,t){const n={pack8:0,pack16:0,count:0};let i=1,a=0,s=0;for(let o=1,l=e.length;o<l;o++){const t=e[o]-a;s!==t?(r(n,s),r(n,i),i=1):i++,s=t,a=e[o]}return r(n,s),r(n,i),{...o(n),kind:"delta-rle"}}function c(e){const t=function(e){let t=!1;for(let n=0,r=e.length;n<r;n++)if(e[n]<0){t=!0;break}return t?{signed:t,limit8:127,limit16:32767}:{signed:t,limit8:255,limit16:65535}}(e),n=[i(e,t),s(e,t),a(e),l(e)];return n.sort(((e,t)=>e.length-t.length)),n}e.getSize=c,e.classify=function(e){if(e.length<2)return jR.by(jR.byteArray);const t=c(e)[0];switch(t.kind){case"pack":return jR.by(jR.integerPacking);case"rle":return jR.by(jR.runLength).and(jR.integerPacking);case"delta":return jR.by(jR.delta).and(jR.integerPacking);case"delta-rle":return jR.by(jR.delta).and(jR.runLength).and(jR.integerPacking);default:Zh()}}}(LR||(LR={})),function(e){e.classify=function(e){const{mantissaDigits:t,integerDigits:n}=function(e,t,n){let r=1,o=0;for(let i=0,a=e.length;i<a;i++){if(r>=0){const o=PR(e[i],t,n);o<0?r=-1:o>r&&(r=o)}const a=Math.abs(e[i]);if(a>n){const e=Math.floor(Math.log10(Math.abs(a)))+1;e>o&&(o=e)}}return{mantissaDigits:r,integerDigits:o}}(e,4,1e-6);if(t<0||t+n>10)return jR.by(jR.byteArray);if(0===t)return LR.classify(e);const r=function(e){let t=1;for(let n=0;n<e;n++)t*=10;return t}(t),o=new Int32Array(e.length);for(let s=0,l=e.length;s<l;s++)o[s]=Math.round(r*e[s]);const i=LR.getSize(o)[0],a=jR.by(jR.fixedPoint(r));switch(i.kind){case"pack":return a.and(jR.integerPacking);case"rle":return a.and(jR.runLength).and(jR.integerPacking);case"delta":return a.and(jR.delta).and(jR.integerPacking);case"delta-rle":return a.and(jR.delta).and(jR.runLength).and(jR.integerPacking);default:Zh()}}}(UR||(UR={}));class WR{and(e){return new WR(this.providers.concat([e]))}encode(e){const t=[];for(const n of this.providers){const r=n(e);if(!r.encodings.length)throw new Error("Encodings must be non-empty.");e=r.data;for(const e of r.encodings)t.push(e)}if(!(e instanceof Uint8Array))throw new Error("The encoding must result in a Uint8Array. Fix your encoding chain.");return{encoding:t,data:e}}constructor(e){this.providers=e}}function KR(e){return(t,n)=>n[e].value(t)}function JR(e){return(t,n)=>n[e].value(t).join(n[e].schema.separator)}function ZR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return(t,r)=>r[e].schema.space.get(r[e].value(t),...n)}function $R(e){return(t,n)=>n[e].valueKind(t)}function eP(e,t){const n=[],r=$R(e);if(1===t.rank){const o=t.dimensions[0];for(let t=0;t<o;t++){const o=`${e}[${t+1}]`;n.push({name:o,type:2,value:ZR(e,t),valueKind:r})}}else if(2===t.rank){const o=t.dimensions[0],i=t.dimensions[1];for(let t=0;t<o;t++)for(let o=0;o<i;o++){const i=`${e}[${t+1}][${o+1}]`;n.push({name:i,type:2,value:ZR(e,t,o),valueKind:r})}}else{if(3!==t.rank)throw new Error("Tensors with rank > 3 or rank 0 are currently not supported.");{const o=t.dimensions[0],i=t.dimensions[1],a=t.dimensions[2];for(let t=0;t<o;t++)for(let o=0;o<i;o++)for(let i=0;i<a;i++){const a=`${e}[${t+1}][${o+1}][${i+1}]`;n.push({name:a,type:2,value:ZR(e,t,o,i),valueKind:r})}}}return n}function tP(e){const t=[];for(const n of Object.keys(e)){const r=e[n];"int"===r.valueType?t.push({name:n,type:1,value:KR(n),valueKind:$R(n)}):"float"===r.valueType?t.push({name:n,type:2,value:KR(n),valueKind:$R(n)}):"str"===r.valueType?t.push({name:n,type:0,value:KR(n),valueKind:$R(n)}):"list"===r.valueType?t.push({name:n,type:0,value:JR(n),valueKind:$R(n)}):"tensor"===r.valueType?t.push(...eP(n,r.space)):Zh(r.valueType)}return t}function nP(e){return e.fields.some((e=>!!e.shouldInclude))?e.fields.filter((t=>!t.shouldInclude||e.source.some((e=>t.shouldInclude(e.data))))):e.fields}function rP(e,t){const n=e.instance(t),r=n.source.filter((e=>e.rowCount>0));if(!r.length)return{instance:n,rowCount:0,source:[]};const o=r.reduce(((e,t)=>e+t.rowCount),0),i=r.map((e=>({data:e.data,keys:()=>e.keys?e.keys():ry.Range(0,e.rowCount-1),rowCount:e.rowCount})));return{instance:n,rowCount:o,source:i}}!function(e){function t(e){return new WR([e])}function n(e){switch(e.kind){case"ByteArray":return jR.byteArray;case"FixedPoint":return jR.fixedPoint(e.factor);case"IntervalQuantization":return jR.intervalQuantizaiton(e.min,e.max,e.numSteps);case"RunLength":return jR.runLength;case"Delta":return jR.delta;case"IntegerPacking":return jR.integerPacking;case"StringArray":return jR.stringArray}}e.by=t,e.fromEncoding=function(e){let r=t(n(e[0]));for(let t=1;t<e.length&&"IntegerPacking"!==e[t-1].kind;t++)r=r.and(n(e[t]));return r}}(GR||(GR={})),function(e){e.by=function(e){return new WR([e])};const t={[_R.IntDataType.Int16]:function(e,t,n){e.setInt16(2*t,n,!0)},[_R.IntDataType.Uint16]:function(e,t,n){e.setUint16(2*t,n,!0)},[_R.IntDataType.Int32]:function(e,t,n){e.setInt32(4*t,n,!0)},[_R.IntDataType.Uint32]:function(e,t,n){e.setUint32(4*t,n,!0)},[_R.FloatDataType.Float32]:function(e,t,n){e.setFloat32(4*t,n,!0)},[_R.FloatDataType.Float64]:function(e,t,n){e.setFloat64(8*t,n,!0)}},n={[_R.IntDataType.Int16]:2,[_R.IntDataType.Uint16]:2,[_R.IntDataType.Int32]:4,[_R.IntDataType.Uint32]:4,[_R.FloatDataType.Float32]:4,[_R.FloatDataType.Float64]:8};function r(e){const r=_R.getDataType(e);if(r===_R.IntDataType.Int8)return function(e){return{encodings:[{kind:"ByteArray",type:_R.IntDataType.Int8}],data:new Uint8Array(e.buffer,e.byteOffset)}}(e);if(r===_R.IntDataType.Uint8)return function(e){return{encodings:[{kind:"ByteArray",type:_R.IntDataType.Uint8}],data:e}}(e);const o=new Uint8Array(e.length*n[r]),i=t[r],a=new DataView(o.buffer);for(let t=0,n=e.length;t<n;t++)i(a,t,e[t]);return{encodings:[{kind:"ByteArray",type:r}],data:o}}function o(e,t){let n=0;for(let r=0,o=e.length;r<o;r++)n+=e[r]/t|0;return n+=e.length,n}function i(e,t){const n=-t-1;let r=0;for(let o=0,i=e.length;o<i;o++){const i=e[o];r+=i>=0?i/t|0:i/n|0}return r+=e.length,r}e.byteArray=r,e.fixedPoint=function(e){return t=>function(e,t){const n=_R.getDataType(e),r=new Int32Array(e.length);for(let o=0,i=e.length;o<i;o++)r[o]=Math.round(e[o]*t);return{encodings:[{kind:"FixedPoint",factor:t,srcType:n}],data:r}}(t,e)},e.intervalQuantizaiton=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Int32Array;return o=>function(e,t,n,r,o){const i=_R.getDataType(e);if(!e.length)return{encodings:[{kind:"IntervalQuantization",min:t,max:n,numSteps:r,srcType:i}],data:new Int32Array(0)};if(n<t){const e=t;t=n,n=e}const a=(n-t)/(r-1),s=new o(e.length);for(let l=0,c=e.length;l<c;l++){const o=e[l];s[l]=o<=t?0:o>=n?r-1:0|Math.round((o-t)/a)}return{encodings:[{kind:"IntervalQuantization",min:t,max:n,numSteps:r,srcType:i}],data:s}}(o,e,t,n,r)},e.runLength=function(e){let t=_R.getDataType(e);if(void 0===t&&(e=new Int32Array(e),t=_R.IntDataType.Int32),!e.length)return{encodings:[{kind:"RunLength",srcType:t,srcSize:0}],data:new Int32Array(0)};let n=2;for(let a=1,s=e.length;a<s;a++)e[a-1]!==e[a]&&(n+=2);const r=new Int32Array(n);let o=0,i=1;for(let a=1,s=e.length;a<s;a++)e[a-1]!==e[a]?(r[o]=e[a-1],r[o+1]=i,i=1,o+=2):++i;return r[o]=e[e.length-1],r[o+1]=i,{encodings:[{kind:"RunLength",srcType:t,srcSize:e.length}],data:r}},e.delta=function(e){if(!_R.isSignedIntegerDataType(e))throw new Error("Only signed integer types can be encoded using delta encoding.");let t=_R.getDataType(e);if(void 0===t&&(e=new Int32Array(e),t=_R.IntDataType.Int32),!e.length)return{encodings:[{kind:"Delta",origin:0,srcType:t}],data:new e.constructor(0)};const n=new e.constructor(e.length),r=e[0];n[0]=e[0];for(let o=1,i=e.length;o<i;o++)n[o]=e[o]-e[o-1];return n[0]=0,{encodings:[{kind:"Delta",origin:r,srcType:t}],data:n}},e.integerPacking=function(e){const t=function(e){const t=function(e){for(let t=0,n=e.length;t<n;t++)if(e[t]<0)return!0;return!1}(e),n=t?i(e,127):o(e,255),r=t?i(e,32767):o(e,65535);return 4*e.length<2*r?{isSigned:t,size:e.length,bytesPerElement:4}:2*r<n?{isSigned:t,size:r,bytesPerElement:2}:{isSigned:t,size:n,bytesPerElement:1}}(e);return 4===t.bytesPerElement?r(e):function(e,t){const n=t.isSigned?1===t.bytesPerElement?127:32767:1===t.bytesPerElement?255:65535,o=-n-1,i=e.length,a=t.isSigned?1===t.bytesPerElement?new Int8Array(t.size):new Int16Array(t.size):1===t.bytesPerElement?new Uint8Array(t.size):new Uint16Array(t.size);let s=0;for(let r=0;r<i;r++){let t=e[r];if(t>=0)for(;t>=n;)a[s]=n,++s,t-=n;else for(;t<=o;)a[s]=o,++s,t-=o;a[s]=t,++s}const l=r(a);return{encodings:[{kind:"IntegerPacking",byteCount:t.bytesPerElement,isUnsigned:!t.isSigned,srcSize:i},l.encodings[0]],data:l.data}}(e,t)},e.stringArray=function(e){const t=Object.create(null),n=[],r=new Int32Array(e.length),o=gh.create(Int32Array,1,Math.min(1024,e.length<32?e.length+1:Math.round(e.length/8)+1));gh.add(o,0);let i=0,a=0;for(const u of e){if(null===u||void 0===u){r[a++]=-1;continue}let e=t[u];void 0===e&&(i+=u.length,e=n.length,n[e]=u,t[u]=e,gh.add(o,i)),r[a++]=e}const s=gh.compact(o),l=NR(s).encode(s),c=NR(r).encode(r);return{encodings:[{kind:"StringArray",dataEncoding:c.encoding,stringData:n.join(""),offsetEncoding:l.encoding,offsets:l.data}],data:c.data}}}(jR||(jR={})),function(e){function t(e,t,n){return{name:e,type:1,value:t,valueKind:n&&n.valueKind,defaultFormat:n?{encoder:n.encoder,typedArray:n.typedArray}:void 0,shouldInclude:n&&n.shouldInclude}}e.str=function(e,t,n){return{name:e,type:0,value:t,valueKind:n&&n.valueKind,defaultFormat:n&&n.encoder?{encoder:n.encoder}:void 0,shouldInclude:n&&n.shouldInclude}},e.int=t,e.float=function(e,t,n){return{name:e,type:2,value:t,valueKind:n&&n.valueKind,defaultFormat:n?{encoder:n.encoder,typedArray:n.typedArray,digitCount:"undefined"!==typeof n.digitCount?n.digitCount:void 0}:void 0,shouldInclude:n&&n.shouldInclude}},e.index=function(e){return t(e,((e,t,n)=>n+1),{typedArray:Int32Array,encoder:jR.by(jR.delta).and(jR.runLength).and(jR.integerPacking)})};class n{constructor(){this.fields=[]}index(t){return this.fields.push(e.index(t)),this}str(t,n,r){return this.fields.push(e.str(t,n,r)),this}int(t,n,r){return this.fields.push(e.int(t,n,r)),this}vec(t,n,r){for(let o=0;o<n.length;o++)this.fields.push(e.int(`${t}[${o+1}]`,n[o],r));return this}float(t,n,r){return this.fields.push(e.float(t,n,r)),this}many(e){for(let t=0;t<e.length;t++)this.fields.push(e[t]);return this}add(e){return this.fields.push(e),this}getFields(){return this.fields}}e.Builder=n,e.build=function(){return new n}}(zR||(zR={})),function(e){e.Empty={fields:[],source:[]},e.filterOf=function(e){const t=[],n=[],r=[],o=[];for(let a of e.split(/[\r\n]+/)){if(a=a.trim(),0===a.length)continue;const e=/^!/.test(a);e&&(a=a.substr(1));const i=a.split(/\./),s=i[1],l=e?s?o:n:s?r:t;l[l.length]=a,s&&!t.includes(i[0])&&(t[t.length]=i[0])}const i=r.map((e=>e.split(".")[0]));return{includeCategory:e=>!n.includes(e)&&(t.length<=0||-1!==t.indexOf(e)),includeField(e,t){const n=e+"."+t;return!o.includes(n)&&(!i.includes(e)||r.includes(n))}}},e.DefaultFilter={includeCategory:e=>!0,includeField:(e,t)=>!0},e.DefaultFormatter={getFormat(e,t){}},e.ofTable=function(e,t){return t?{fields:tP(e._schema),source:[{data:e,rowCount:t.length,keys:()=>ry.Array(t)}]}:{fields:tP(e._schema),source:[{data:e,rowCount:e._rowCount}]}}}(HR||(HR={})),function(e){function t(e,t,n){e.startDataBlock(t);for(const r of n._tableNames)e.writeCategory({name:r,instance:()=>HR.ofTable(n[r])})}e.writeDatabase=t,e.writeDatabaseCollection=function(e,n){for(const r of Object.keys(n))t(e,r,n[r])}}(VR||(VR={}));class oP{constructor(){this.builder=yp.create(),this.encoded=!1,this.dataBlockCreated=!1,this.filter=HR.DefaultFilter,this.formatter=HR.DefaultFormatter,this.isBinary=!1,this.binaryEncodingProvider=void 0}setFilter(e){this.filter=e||HR.DefaultFilter}isCategoryIncluded(e){return this.filter.includeCategory(e)}setFormatter(e){this.formatter=e||HR.DefaultFormatter}startDataBlock(e){this.dataBlockCreated=!0,yp.write(this.builder,`data_${(e||"").replace(/[ \n\t]/g,"").toUpperCase()}\n#\n`)}writeCategory(e,t,n){if(this.encoded)throw new Error("The writer contents have already been encoded, no more writing.");if(!this.dataBlockCreated)throw new Error("No data block created.");if(!(null===n||void 0===n?void 0:n.ignoreFilter)&&!this.filter.includeCategory(e.name))return;const{instance:r,rowCount:o,source:i}=rP(e,t);o&&(1===o?function(e,t,n,r,o,i){const a=nP(t),s=n[0],l=s.data;let c=a.reduce(((t,n)=>o.includeField(e.name,n.name)?Math.max(t,n.name.length):0),0);if(0===c)return;c+=e.name.length+6;const u=s.keys(),d=u.move(),A=aP(e.name,t.fields,i);for(let f=0;f<a.length;f++){const t=a[f];if(!o.includeField(e.name,t.name))continue;yp.writePadRight(r,`_${e.name}.${t.name}`,c);iP(r,l,d,t,A[f],0)||yp.newline(r)}yp.write(r,"#\n")}(e,r,i,this.builder,this.filter,this.formatter):function(e,t,n,r,o,i){const a=nP(t),s=o===HR.DefaultFilter?a:a.filter((t=>o.includeField(e.name,t.name))),l=s.length;if(0===l)return;const c=aP(e.name,s,i);sP(r,"loop_");for(let d=0;d<l;d++)sP(r,`_${e.name}.${s[d].name}`);let u=0;for(let d=0;d<n.length;d++){const e=n[d],t=e.data;if(0===e.rowCount)continue;const o=e.keys();for(;o.hasNext;){const e=o.move();let n=!1;for(let o=0;o<l;o++)n=iP(r,t,e,s[o],c[o],u);n||yp.newline(r),u++}}yp.write(r,"#\n")}(e,r,i,this.builder,this.filter,this.formatter))}encode(){this.encoded=!0}writeTo(e){const t=yp.getChunks(this.builder);for(let n=0,r=t.length;n<r;n++)e.writeString(t[n])}getSize(){return yp.getSize(this.builder)}getData(){return yp.getString(this.builder)}}function iP(e,t,n,r,o,i){const a=r.valueKind,s=a?a(n,t):0;if(0!==s)1===s?function(e){yp.writeSafe(e,". ")}(e):function(e){yp.writeSafe(e,"? ")}(e);else{const a=r.value(n,t,i),s=r.type;if(0===s)return function(e){return"string"===typeof e&&e.indexOf("\n")>=0}(a)?(lP(e,a),!0):function(e,t){if(!t)return yp.writeSafe(e,". "),!1;const n=t.charCodeAt(0);let r=!1,o=0,i=!1,a=!1;for(let s=0,l=t.length-1;s<=l;s++){switch(t.charCodeAt(s)){case 9:case 32:r=!0;break;case 10:return lP(e,t),!0;case 34:if(s&&s===l)break;if(i)return lP(e,t),!0;a=!0,r=!0,o=0;break;case 39:if(s&&s===l)break;if(a)return lP(e,t),!0;i=!0,r=!0,o=1}}r||35!==n&&36!==n&&59!==n&&91!==n&&93!==n&&95!==n||(r=!0);r?(yp.writeSafe(e,o?'"':"'"),yp.writeSafe(e,t),yp.writeSafe(e,o?'" ':"' ")):(yp.writeSafe(e,t),yp.writeSafe(e," "));return!1}(e,a);1===s?function(e,t){yp.writeInteger(e,t),yp.whitespace1(e)}(e,a):function(e,t,n){yp.writeFloat(e,t,n),yp.whitespace1(e)}(e,a,o)}return!1}function aP(e,t,n){const r=[];for(const i of t){const t=n.getFormat(e,i.name);t&&"undefined"!==typeof t.digitCount?r[r.length]=2===i.type?Math.pow(10,Math.max(0,Math.min(t.digitCount,15))):0:r[r.length]=2===i.type?Math.pow(10,(o=i).defaultFormat&&"undefined"!==typeof o.defaultFormat.digitCount?Math.max(0,Math.min(o.defaultFormat.digitCount,16)):6):0}var o;return r}function sP(e,t){yp.write(e,t),yp.newline(e)}function lP(e,t){yp.writeSafe(e,"\n;"+t),yp.writeSafe(e,"\n;\n")}function cP(e){const t=new ArrayBuffer(uP(e)),n=new DataView(t),r=new Uint8Array(t);return dP(e,n,r,0),r}function uP(e){const t=typeof e;if("string"===t){const t=sw(e);if(t<32)return 1+t;if(t<256)return 2+t;if(t<65536)return 3+t;if(t<4294967296)return 5+t}if(e instanceof Uint8Array){const t=e.byteLength;if(t<256)return 2+t;if(t<65536)return 3+t;if(t<4294967296)return 5+t}if("number"===t){if(Math.floor(e)!==e)return 9;if(e>=0){if(e<128)return 1;if(e<256)return 2;if(e<65536)return 3;if(e<4294967296)return 5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if("boolean"===t||null===e||void 0===e)return 1;if("object"===t){let t,n=0;if(Array.isArray(e)){t=e.length;for(let r=0;r<t;r++)n+=uP(e[r])}else{const r=Object.keys(e);t=r.length;for(let o=0;o<t;o++){const t=r[o];n+=uP(t)+uP(e[t])}}if(t<16)return 1+n;if(t<65536)return 3+n;if(t<4294967296)return 5+n;throw new Error("Array or object too long 0x"+t.toString(16))}throw new Error("Unknown type "+t)}function dP(e,t,n,r){const o=typeof e;if("string"===o){const o=sw(e);if(o<32)return t.setUint8(r,160|o),nw(n,r+1,e),1+o;if(o<256)return t.setUint8(r,217),t.setUint8(r+1,o),nw(n,r+2,e),2+o;if(o<65536)return t.setUint8(r,218),t.setUint16(r+1,o),nw(n,r+3,e),3+o;if(o<4294967296)return t.setUint8(r,219),t.setUint32(r+1,o),nw(n,r+5,e),5+o}if(e instanceof Uint8Array){const n=e.byteLength,o=new Uint8Array(t.buffer);if(n<256)return t.setUint8(r,196),t.setUint8(r+1,n),o.set(e,r+2),2+n;if(n<65536)return t.setUint8(r,197),t.setUint16(r+1,n),o.set(e,r+3),3+n;if(n<4294967296)return t.setUint8(r,198),t.setUint32(r+1,n),o.set(e,r+5),5+n}if("number"===o){if(!isFinite(e))throw new Error("Number not finite: "+e);if(Math.floor(e)!==e)return t.setUint8(r,203),t.setFloat64(r+1,e),9;if(e>=0){if(e<128)return t.setUint8(r,e),1;if(e<256)return t.setUint8(r,204),t.setUint8(r+1,e),2;if(e<65536)return t.setUint8(r,205),t.setUint16(r+1,e),3;if(e<4294967296)return t.setUint8(r,206),t.setUint32(r+1,e),5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return t.setInt8(r,e),1;if(e>=-128)return t.setUint8(r,208),t.setInt8(r+1,e),2;if(e>=-32768)return t.setUint8(r,209),t.setInt16(r+1,e),3;if(e>=-2147483648)return t.setUint8(r,210),t.setInt32(r+1,e),5;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if(null===e||void 0===e)return t.setUint8(r,192),1;if("boolean"===o)return t.setUint8(r,e?195:194),1;if("object"===o){let o,i=0;const a=Array.isArray(e);let s;if(a?o=e.length:(s=Object.keys(e),o=s.length),o<16?(t.setUint8(r,o|(a?144:128)),i=1):o<65536?(t.setUint8(r,a?220:222),t.setUint16(r+1,o),i=3):o<4294967296&&(t.setUint8(r,a?221:223),t.setUint32(r+1,o),i=5),a)for(let l=0;l<o;l++)i+=dP(e[l],t,n,r+i);else for(let l=0,c=s.length;l<c;l++){const o=s[l];i+=dP(o,t,n,r+i),i+=dP(e[o],t,n,r+i)}return i}throw new Error("Unknown type "+o)}class AP{setFilter(e){this.filter=e||HR.DefaultFilter}isCategoryIncluded(e){return this.filter.includeCategory(e)}setFormatter(e){this.formatter=e||HR.DefaultFormatter}startDataBlock(e){this.dataBlocks.push({header:(e||"").replace(/[ \n\t]/g,"").toUpperCase(),categories:[]})}writeCategory(e,t,n){if(!this.data)throw new Error("The writer contents have already been encoded, no more writing.");if(!this.dataBlocks.length)throw new Error("No data block created.");if(!(null===n||void 0===n?void 0:n.ignoreFilter)&&!this.filter.includeCategory(e.name))return;const{instance:r,rowCount:o,source:i}=rP(e,t);if(!o)return;const a={name:"_"+e.name,columns:[],rowCount:o},s=nP(r);for(const l of s){if(!this.filter.includeField(e.name,l.name))continue;const t=this.formatter.getFormat(e.name,l.name);a.columns.push(pP(e.name,l,i,o,t,this.binaryEncodingProvider,this.autoClassify))}a.columns.length&&this.dataBlocks[this.dataBlocks.length-1].categories.push(a)}encode(){this.encodedData||(this.encodedData=cP(this.data),this.data=null,this.dataBlocks=null)}writeTo(e){e.writeBinary(this.encodedData)}getData(){return this.encode(),this.encodedData}getSize(){return this.encodedData.length}constructor(e,t,n){this.autoClassify=n,this.dataBlocks=[],this.filter=HR.DefaultFilter,this.formatter=HR.DefaultFormatter,this.isBinary=!0,this.binaryEncodingProvider=void 0,this.binaryEncodingProvider=t,this.data={encoder:e,version:"0.3.0",dataBlocks:this.dataBlocks}}}function fP(e,t){return 0===e?GR.by(jR.stringArray):1===e?NR(t):(n=t,UR.classify(n));var n}function pP(e,t,n,r,o,i,a){const{array:s,allPresent:l,mask:c}=function(e,t,n,r){const o=0===e.type,i=new t(n),a=new Uint8Array(n),s=e.valueKind,l=e.value;let c=!0,u=0;for(let d=0;d<r.length;d++){const e=r[d].data,t=r[d].keys();for(;t.hasNext;){const n=t.move(),r=s?s(n,e):0;if(0!==r)a[u]=r,o&&(i[u]=""),c=!1;else{const t=l(n,e,u);"string"!==typeof t||t?a[u]=0:(a[u]=1,c=!1),i[u]=t}u++}}return{array:i,allPresent:c,mask:a}}(t,function(e,t){return t&&t.typedArray?t.typedArray:e.defaultFormat&&e.defaultFormat.typedArray?e.defaultFormat.typedArray:0===e.type?Array:1===e.type?Int32Array:Float64Array}(t,o),r,n);let u;u=0===t.type?GR.by(jR.stringArray):function(e,t,n,r){return n&&n.encoder?n.encoder:t.defaultFormat&&t.defaultFormat.encoder?t.defaultFormat.encoder:r?r.get(e,t.name):void 0}(e,t,o,i),u||(u=a?fP(t.type,s):function(e){return 0===e?GR.by(jR.stringArray):GR.by(jR.byteArray)}(t.type));const d=u.encode(s);let A;if(!l){const e=GR.by(jR.runLength).and(jR.byteArray).encode(c);A=e.data.length<c.length?e:GR.by(jR.byteArray).encode(c)}return{name:t.name,data:d,mask:A}}!function(e){e.Encoder=VR,e.Category=HR,e.Field=zR,e.Encoding=jR,e.createEncoder=function(e){const{binary:t=!1,encoderName:n="mol*"}=e||{};return t?new AP(n,e?e.binaryEncodingPovider:void 0,!!e&&!!e.binaryAutoClassifyEncoding):new oP},e.fields=function(){return e.Field.build()};var t=e.Encoding;function n(e){const n=e.precision;if(void 0!==n){const r=Math.pow(10,n),o=t.by(t.fixedPoint(r));switch(e.encoding){case"pack":return o.and(t.integerPacking);case"rle":return o.and(t.runLength).and(t.integerPacking);case"delta":return o.and(t.delta).and(t.integerPacking);case"delta-rle":return o.and(t.delta).and(t.runLength).and(t.integerPacking)}}else switch(e.encoding){case"pack":return t.by(t.integerPacking);case"rle":return t.by(t.runLength).and(t.integerPacking);case"delta":return t.by(t.delta).and(t.integerPacking);case"delta-rle":return t.by(t.delta).and(t.runLength).and(t.integerPacking)}throw new Error("cannot be reached")}e.Encodings={deltaRLE:t.by(t.delta).and(t.runLength).and(t.integerPacking),fixedPoint2:t.by(t.fixedPoint(100)).and(t.delta).and(t.integerPacking),fixedPoint3:t.by(t.fixedPoint(1e3)).and(t.delta).and(t.integerPacking)},e.categoryInstance=function(e,t){return{fields:e,source:[t]}},e.createEncodingProviderFromCifFrame=function(e){return{get(t,n){const r=e.categories[t];if(!r)return;const o=r.getField(n);return o&&o.binaryEncoding?GR.fromEncoding(o.binaryEncoding):void 0}}},e.createEncodingProviderFromJsonConfig=function(e){return{get(t,r){for(let o=0;o<e.length;o++){const i=e[o];if(i.categoryName===t&&i.columnName===r)return n(i)}}}}}(qR||(qR={})),function(e){e.Descriptor={name:"chem_comp_bond",cifExport:{prefix:"",categories:[{name:"chem_comp_bond",instance(t){const n=e.Provider.get(t.firstModel);if(!n)return qR.Category.Empty;const r=n.data;if(!r)return qR.Category.Empty;const o=t.structures[0].uniqueResidueNames,{comp_id:i,_rowCount:a}=r,s=[];for(let e=0;e<a;e++)o.has(i.value(e))&&(s[s.length]=e);return qR.Category.ofTable(r,s)}}]}},e.Provider=Gk.create(e.Descriptor),e.chemCompBondFromTable=function(e,t){return sg.pick(t,wR.chem_comp_bond,(n=>e.properties.chemicalComponentMap.has(t.comp_id.value(n))))},e.getEntriesFromChemCompBond=function(e){const n=new Map;function r(e){if(n.has(e))return n.get(e);const r=new t(e);return n.set(e,r),r}const{comp_id:o,atom_id_1:i,atom_id_2:a,value_order:s,pdbx_aromatic_flag:l,_rowCount:c,pdbx_ordinal:u}=e;let d=r(o.value(0));for(let t=0;t<c;t++){const e=o.value(t),n=i.value(t),c=a.value(t),A=s.value(t),f="y"===l.value(t),p=u.value(t);d.id!==e&&(d=r(e));let h=1,g=1;switch(f&&(h|=16),A.toLowerCase()){case"delo":h|=16;break;case"doub":g=2;break;case"trip":g=3;break;case"quad":g=4}d.add(n,c,g,h,p)}return n};class t{add(e,t,n,r,o){let i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const a=this.map.get(e);if(void 0!==a){void 0===a.get(t)&&a.set(t,{order:n,flags:r,key:o})}else{const i=new Map;i.set(t,{order:n,flags:r,key:o}),this.map.set(e,i)}i&&this.add(t,e,n,r,o,!1)}constructor(e){this.id=e,this.map=new Map}}e.Entry=t}(YR||(YR={})),function(e){function t(e,t){let{units:n}=e;for(let r=0,o=n.length;r<o;r++)if(Em.indexOf(n[r].elements,t)>=0)return!0;return!1}e.Descriptor={name:"struct_conn",cifExport:{prefix:"",categories:[{name:"struct_conn",instance(n){const r=e.Provider.get(n.firstModel);if(!r||0===r.entries.length)return qR.Category.Empty;const o=n.structures[0],i=[];for(const e of r.entries)t(o,e.partnerA.atomIndex)&&t(o,e.partnerB.atomIndex)&&(i[i.length]=e.rowIndex);return qR.Category.ofTable(r.data,i)}}]}},e.Provider=Gk.create(e.Descriptor),e.isExhaustive=function(t){const n=e.Provider.get(t);return!!n&&n.data.id.rowCount/t.atomicConformation.atomId.rowCount>.95},e.getAtomIndexFromEntries=function(e){const t=new Map;for(const n of e){const{partnerA:{atomIndex:e},partnerB:{atomIndex:r}}=n;t.has(e)?t.get(e).push(n):t.set(e,[n]),t.has(r)?t.get(r).push(n):t.set(r,[n])}return t},e.getEntriesFromStructConn=function(e,t){const{conn_type_id:n,pdbx_dist_value:r,pdbx_value_order:o}=e,i={label_asym_id:e.ptnr1_label_asym_id,label_seq_id:e.ptnr1_label_seq_id,auth_seq_id:e.ptnr1_auth_seq_id,label_atom_id:e.ptnr1_label_atom_id,label_alt_id:e.pdbx_ptnr1_label_alt_id,ins_code:e.pdbx_ptnr1_PDB_ins_code,symmetry:e.ptnr1_symmetry},a={label_asym_id:e.ptnr2_label_asym_id,label_seq_id:e.ptnr2_label_seq_id,auth_seq_id:e.ptnr2_auth_seq_id,label_atom_id:e.ptnr2_label_atom_id,label_alt_id:e.pdbx_ptnr2_label_alt_id,ins_code:e.pdbx_ptnr2_PDB_ins_code,symmetry:e.ptnr2_symmetry},s=Array.from(t.entities.data.id.toArray()),l=(e,n)=>{if(0!==n.label_asym_id.valueKind(e))return;const r=n.label_asym_id.value(e),o=n.label_atom_id.value(e);if(!o)return;const i=n.auth_seq_id.valueKind(e)===ag.ValueKind.Present?n.auth_seq_id.value(e):n.label_seq_id.value(e),a=n.ins_code.value(e),l=n.label_alt_id.value(e);for(const c of s){const s=t.atomicHierarchy.index.findResidue(c,r,i,a);if(s<0)continue;const u=t.atomicHierarchy.index.findAtomOnResidue(s,o,l);if(!(u<0))return{residueIndex:s,atomIndex:u,symmetry:n.symmetry.value(e)}}},c=[];for(let u=0;u<e._rowCount;u++){const t=l(u,i),s=l(u,a);if(void 0===t||void 0===s)continue;const d=n.value(u);let A=0,f=1;switch(o.value(u)||""){case"sing":f=1;break;case"doub":f=2;break;case"trip":f=3;break;case"quad":f=4;break;default:f=hR(e.ptnr1_label_comp_id.value(u),e.ptnr1_label_atom_id.value(u),e.ptnr2_label_comp_id.value(u),e.ptnr2_label_atom_id.value(u))}switch(d){case"covale":A=1;break;case"disulf":A=9;break;case"hydrog":A=4;break;case"metalc":A=2}c.push({rowIndex:u,flags:A,order:f,distance:r.value(u),partnerA:t,partnerB:s})}return c}}(XR||(XR={}));const hP=qh.distance;function gP(e,t,n,r,o,i,a){const s=new Uk.EdgeBuilder(i,e,t),l=new Uint16Array(s.slotCount),c=new Int8Array(s.slotCount),u=new Uint32Array(s.slotCount);for(let d=0,A=s.edgeCount;d<A;d++)s.addNextEdge(),s.assignProperty(l,r[d]),s.assignProperty(c,n[d]),s.assignProperty(u,o[d]);return s.createGraph({flags:l,order:c,key:u},a)}const mP=qh(),yP=qh();function vP(e,t,n){return e.conformation.position(t,mP),e.conformation.position(n,yP),hP(mP,yP)}const bP=new Set;function CP(e,t){const n={...tR,...t};return n.noCompute||Wj.isCoarseGrained(e.model)&&!jk.Provider.get(e.model)&&!XR.isExhaustive(e.model)?$M.Empty:!n.forceCompute&&jk.Provider.get(e.model)?function(e){const t=jk.Provider.get(e.model),{elements:n}=e,{type_symbol:r}=e.model.atomicHierarchy.atoms,o=e.elements.length,{maxDistance:i}=t,{offset:a,b:s,edgeProps:{order:l,distance:c,flag:u,key:d,operatorA:A,operatorB:f}}=t.bonds,{atomSourceIndex:p}=e.model.atomicHierarchy,{invertedIndex:h}=Wj.getInvertedAtomSourceIndex(e.model),g=[],m=[],y=[],v=[],b=[],C=e.conformation.operator.key;for(let I=0;I<o;I++){const t=n[I],o=sR(r.value(t)),E=dR(o),x=p.value(t);for(let n=a[x],p=a[x+1];n<p;++n){const a=h[s[n]];if(t>=a)continue;const p=Em.indexOf(e.elements,a);if(p<0)continue;const x=A[n],B=f[n];if(x>=0&&x!==C||B>=0&&B!==C)continue;const w=sR(r.value(a)),_=c[n],S=vP(e,t,a);let D=!1;_>=0?D=Hh(S,_,.3):i>=0?D=S<i:(D=S<cR(o,w,lR(o),lR(w)),E&&dR(w)&&(D=!1)),D&&(g[g.length]=I,m[m.length]=p,v[v.length]=l[n],y[y.length]=u[n],b[b.length]=d[n])}}return gP(g,m,v,y,b,o,{canRemap:!1,cacheable:t.cacheable})}(e):function(e,t){const{maxRadius:n}=t,{x:r,y:o,z:i}=e.model.atomicConformation,a=e.elements.length,{elements:s,residueIndex:l,chainIndex:c}=e,{type_symbol:u,label_atom_id:d,label_alt_id:A,label_comp_id:f}=e.model.atomicHierarchy.atoms,{label_seq_id:p}=e.model.atomicHierarchy.residues,{index:h}=e.model.atomicHierarchy,{byEntityKey:g}=e.model.sequence,m=e.lookup3d,y=XR.Provider.get(e.model),v=YR.Provider.get(e.model),b=XR.isExhaustive(e.model),C=[],I=[],E=[],x=[],B=[];let w,_=-1,S=!0,D=!0,T=!0;const k=bP;for(let Q=0;Q<a;Q++){const a=s[Q],M=u.value(a);S&&"H"!==M&&"O"!==M&&(S=!1);const R=t.forceCompute?void 0:y&&y.byAtomIndex.get(a);let P=!1;if(R)for(const t of R){const{partnerA:n,partnerB:r}=t;if(n.symmetry!==r.symmetry)continue;const o=n.atomIndex===a?r:n,i=Em.indexOf(e.elements,o.atomIndex);i<0||s[i]<a||(C[C.length]=Q,I[I.length]=i,E[E.length]=t.flags,x[x.length]=t.order,B[B.length]=t.rowIndex,P||k.clear(),P=!0,k.add(i))}if(b)continue;const O=l[a],F=p.value(O),N=f.value(a);if(!t.forceCompute&&O!==_)if(v&&v.entries.has(N)){const e=g[h.getEntityFromChain(c[a])];w=e&&e.sequence.microHet.has(F)?void 0:v.entries.get(N).map}else w=void 0;_=O;const L=sR(M),U=d.value(a),G=w?w.get(U):void 0,{indices:j,count:z,squaredDistances:H}=m.find(r[a],o[a],i[a],n),V=dR(L),q=lR(L),Y=A.value(a),X=aR.has(L);for(let e=0;e<z;e++){const t=j[e];if(P&&k.has(t))continue;const n=s[t];if(n<=a)continue;const r=A.value(n);if(Y&&r&&Y!==r)continue;const o=sR(u.value(n)),i=dR(o);if(V&&i)continue;const c=(X||aR.has(o))&&!(V||i),f=l[n];if(O===f&&G){const e=G.get(d.value(n));if(e){C[C.length]=Q,I[I.length]=t,x[x.length]=e.order;let n=e.flags;c&&(1|n&&(n^=1),n|=2),E[E.length]=n,B[B.length]=e.key}continue}const h=Math.sqrt(H[e]);if(0!==h&&h<=cR(L,o,q,lR(o))){C[C.length]=Q,I[I.length]=t,x[x.length]=fR(N,U,d.value(n)),E[E.length]=32|(c?2:1),B[B.length]=-1;const e=p.value(f);F===e&&(D=!1),Math.abs(F-e)>1&&(T=!1)}}}return gP(C,I,x,E,B,a,{canRemap:S||D&&T})}(e,n)}const IP=qh.distance,EP=qh.set,xP=qh.squaredDistance,BP=qh.transformMat4,wP=qh(),_P=qh();function SP(e,t,n,r){return e.conformation.position(t,wP),n.conformation.position(r,_P),IP(wP,_P)}const DP=Yh(),TP=qh();const kP={...tR,ignoreWater:!0,ignoreIon:!0};function QP(e,t){const n=new JM.Builder,r=e.models.some((e=>jk.Provider.get(e))),o=e.models.some((e=>XR.isExhaustive(e)));return t.noCompute||e.isCoarseGrained&&!r&&!o||aG.eachUnitPair(e,((e,r)=>{!function(e,t,n,r){const{maxRadius:o}=n,{elements:i,residueIndex:a}=e,{x:s,y:l,z:c}=e.model.atomicConformation,{elements:u,residueIndex:d}=t,A=e.elements.length,{type_symbol:f,label_alt_id:p,label_atom_id:h,label_comp_id:g}=e.model.atomicHierarchy.atoms,{type_symbol:m,label_alt_id:y,label_atom_id:v,label_comp_id:b}=t.model.atomicHierarchy.atoms,{auth_seq_id:C}=e.model.atomicHierarchy.residues,{auth_seq_id:I}=t.model.atomicHierarchy.residues,{occupancy:E}=e.model.atomicConformation,{occupancy:x}=t.model.atomicConformation,B=E.isDefined&&x.isDefined,w=e.model===t.model&&XR.Provider.get(e.model),_=!n.forceCompute&&e.model===t.model&&jk.Provider.get(e.model),{atomSourceIndex:S}=e.model.atomicHierarchy,{invertedIndex:D}=_?Wj.getInvertedAtomSourceIndex(t.model):{invertedIndex:void 0},T=e.model===t.model&&XR.isExhaustive(e.model),k=Yh.mul(DP,t.conformation.operator.inverse,e.conformation.operator.matrix),Q=!Yh.isIdentity(k),{center:M,radius:R}=t.boundary.sphere,P=(R+o)*(R+o);r.startUnitPair(e.id,t.id);const O=e.conformation.operator.key,F=t.conformation.operator.key;for(let N=0;N<A;N++){const A=i[N];if(EP(TP,s[A],l[A],c[A]),Q&&BP(TP,TP,k),xP(TP,M)>P)continue;if(!n.forceCompute&&_){const{maxDistance:n}=_,{offset:o,b:i,edgeProps:{order:a,distance:s,flag:l,key:c,operatorA:u,operatorB:d}}=_.bonds,p=S.value(A),h=sR(f.value(A));for(let g=o[p],m=o[p+1];g<m;++g){const o=D[i[g]],p=Em.indexOf(t.elements,o);if(p<0)continue;const m=u[g],y=d[g];if(m>=0&&y>=0){if(m===y)continue;if(m!==O||y!==F)continue}const v=sR(f.value(o)),b=s[g],C=SP(e,A,t,o);let I=!1;b>=0?I=Hh(C,b,.3):n>=0?I=C<n:(I=C<cR(h,v,lR(h),lR(v)),dR(h)&&dR(v)&&(I=!1)),I&&r.add(N,p,{order:a[g],flag:l[g],key:c[g]})}continue}const R=n.forceCompute?void 0:w&&w.byAtomIndex.get(A);if(R&&R.length){let n=!1;for(const i of R){const{partnerA:a,partnerB:s}=i,l=a.atomIndex===A?s:a,c=Em.indexOf(t.elements,l.atomIndex);c<0||SP(e,A,t,l.atomIndex)>o||(r.add(N,c,{order:i.order,flag:i.flags,key:i.rowIndex}),n=!0)}if(n)continue}if(T)continue;const L=E.value(A),{lookup3d:U}=t,{indices:G,count:j,squaredDistances:z}=U.find(TP[0],TP[1],TP[2],o);if(0===j)continue;const H=sR(f.value(A)),V=dR(H),q=lR(H),Y=p.value(A),X=aR.has(H),W=h.value(A),K=g.value(a[A]);for(let e=0;e<j;e++){const t=G[e],n=u[t],o=y.value(n);if(Y&&o&&Y!==o)continue;if(B&&x.value(n)<1&&L<1&&C.value(A)===I.value(n))continue;const i=sR(m.value(n)),a=dR(i);if(V&&a)continue;const s=(X||aR.has(i))&&!(V||a),l=Math.sqrt(z[e]);if(0!==l&&l<=cR(H,i,q,lR(i))){const e=v.value(n),o=b.value(d[n]);r.add(N,t,{order:hR(K,o,W,e),flag:32|(s?2:1),key:-1})}}}r.finishUnitPair()}(e,r,t,n)}),{maxRadius:t.maxRadius,validUnit:e=>t.validUnit(e),validUnitPair:(n,r)=>t.validUnitPair(e,n,r)}),new eR(n.getMap())}function MP(e,t){const n={...kP,...t};return QP(e,{...n,validUnit:t&&t.validUnit||(e=>BO.isAtomic(e)),validUnitPair:t&&t.validUnitPair||((e,t,r)=>{if(!aG.validUnitPair(e,t,r))return!1;const o=t.model.atomicHierarchy.derived.residue.moleculeType,i=r.model.atomicHierarchy.derived.residue.moleculeType,a=(!BO.isAtomic(t)||2!==o[t.residueIndex[t.elements[0]]])&&(!BO.isAtomic(r)||2!==i[r.residueIndex[r.elements[0]]]),s=!BO.isAtomic(t)||3!==o[t.residueIndex[t.elements[0]]],l=!BO.isAtomic(r)||3!==i[r.residueIndex[r.elements[0]]],c=s&&l;return!(!a&&n.ignoreWater||!c&&n.ignoreIon)||function(e,t){if(e.model!==t.model||!BO.isAtomic(e)||!BO.isAtomic(t))return!1;const n=XR.Provider.get(e.model);if(!n)return!1;const r=e.elements.length<t.elements.length?e:t,o=e.elements.length>=t.elements.length?e:t,{elements:i}=r,{elements:a}=o,{indexOf:s}=Em;for(let l=0,c=i.length;l<c;l++){const e=i[l],t=n.byAtomIndex.get(e);if(null===t||void 0===t?void 0:t.length)for(const n of t){if(s(a,n.partnerA.atomIndex===e?n.partnerB.atomIndex:n.partnerA.atomIndex)>=0)return!0}}return!1}(t,r)})})}var RP;function PP(e){const t=function(e){const t=ty.transientSegments(e.model.atomicHierarchy.residueAtomSegments,e.elements);let n=0;for(;t.hasNext;){const e=t.move();n=Math.max(n,e.end-e.start)}return n}(e),n=function(e,t){return{startVertex:0,endVertex:0,count:0,isRingAtom:new Int32Array(t),marked:new Int32Array(t),queue:new Int32Array(t),pred:new Int32Array(t),depth:new Int32Array(t),left:new Int32Array(5),right:new Int32Array(5),color:new Int32Array(t),currentColor:0,currentAltLoc:"",hasAltLoc:!1,rings:[],currentRings:[],unit:e,bonds:e.bonds,altLoc:e.model.atomicHierarchy.atoms.label_alt_id}}(e,t),r=ty.transientSegments(e.model.atomicHierarchy.residueAtomSegments,e.elements);for(;r.hasNext;){const e=r.move();LP(n,e.start,e.end)}return n.rings}function OP(e){e.count=e.endVertex-e.startVertex;const{isRingAtom:t,pred:n,color:r,depth:o,marked:i}=e;for(let a=0;a<e.count;a++)t[a]=0,n[a]=-1,i[a]=-1,r[a]=0,o[a]=0;e.currentColor=0,e.currentAltLoc="",e.hasAltLoc=!1}function FP(e){const{depth:t}=e;for(let n=0;n<e.count;n++)t[n]=e.count+1}function NP(e,t){const n=e.bonds.offset,r=e.startVertex+t,o=n[r],i=n[r+1]-o;return!(i<=1||e.isRingAtom[t]&&2===i)}function LP(e,t,n){if(e.startVertex=t,e.endVertex=n,e.endVertex-e.startVertex<3)return;e.currentRings=[];const{elements:r}=e.unit,o=[];for(let a=e.startVertex;a<e.endVertex;a++){tS(o,e.altLoc.value(r[a]))}nS(o,"");let i=1;if(0===o.length){OP(e);for(let t=0;t<e.count;t++)NP(e,t)&&(FP(e),i=GP(e,t,i))}else for(let a=0;a<o.length;a++){OP(e),e.hasAltLoc=!0,e.currentAltLoc=o[a];for(let t=0;t<e.count;t++){if(!NP(e,t))continue;const n=e.altLoc.value(r[e.startVertex+t]);n&&n!==e.currentAltLoc||(FP(e),i=GP(e,t,i))}}for(let a=0,s=e.currentRings.length;a<s;a++)e.rings.push(e.currentRings[a])}function UP(e,t,n,r){if(n<t)return!1;const{pred:o,color:i,left:a,right:s}=e,l=++e.currentColor;let c=t;for(let m=0;m<5&&(i[c]=l,c=o[c],!(c<0));m++);let u=0,d=0,A=!1,f=0;c=n;for(let m=0;m<5;m++){if(i[c]===l){f=c,A=!0;break}if(s[d++]=c,c=o[c],c<0)break}if(!A)return!1;c=t;for(let m=0;m<5&&(a[u++]=c,f!==c)&&(c=o[c],!(c<0));m++);const p=u+d;if(p<3)return!1;const h=new Int32Array(p);let g=0;for(let m=0;m<u;m++)h[g++]=e.startVertex+a[m],r[a[m]]=1;for(let m=d-1;m>=0;m--)h[g++]=e.startVertex+s[m],r[s[m]]=1;wh(h);for(let m=0,y=e.currentRings.length;m<y;m++){const t=e.currentRings[m];if(h.length===t.length){if(Em.areEqual(h,t))return!1}else if(h.length>t.length&&Em.isSubset(h,t))return!1}return e.currentRings.push(Em.ofSortedArray(h)),!0}function GP(e,t,n){const{bonds:r,startVertex:o,endVertex:i,isRingAtom:a,marked:s,queue:l,pred:c,depth:u}=e,{elements:d}=e.unit,{b:A,edgeProps:{flags:f},offset:p}=r;s[t]=n,u[t]=0,l[0]=t;let h=0,g=1;for(;h<g;){const t=l[h++],r=u[t],m=o+t,y=p[m],v=p[m+1];for(let p=y;p<v;p++){const h=A[p];if(h<o||h>=i||!VM.isCovalent(f[p]))continue;if(e.hasAltLoc){const t=e.altLoc.value(d[h]);if(t&&e.currentAltLoc!==t)continue}const m=h-o;if(s[m]===n){if(c[m]!==t&&c[t]!==m&&UP(e,t,m,a))return n+1;continue}const y=Math.min(u[m],r+1);y>5||(u[m]=y,s[m]=n,l[g++]=m,c[m]=t)}}return n+1}function jP(e){const t=e.length,n=new Int32Array(2*t);for(let a=0;a<n.length;a++)n[a]=-1;let r="",o="",i=0;for(let a=1;a<n.length;a++){let s=n[a-i-1];for(;-1!==s&&(r=e[a%t],o=e[(i+s+1)%t],r!==o);)r<o&&(i=a-s-1),s=n[s];-1===s?(r=e[a%t],o=e[(i+s+1)%t],r!==o?(r<o&&(i=a),n[a-i]=-1):n[a-i]=s+1):n[a-i]=s+1}return i}function zP(e,t){const n=e.length,r=[];let o;for(o=0;o<n-1;o++)r.push(e[(o+t)%n]),r.push("-");return r.push(e[(o+t)%n]),r.join("")}function HP(e,t){switch(e.kind){case 0:return e.model.atomicHierarchy.derived.residue.moleculeType[e.residueIndex[t]];case 1:case 2:const n=function(e,t){const n=e.coarseElements.entityKey[t],r=e.model.sequence.byEntityKey[n].sequence,o=e.coarseElements.seq_id_begin.value(t);return r.compId.value(o-1)}(e,t),r=e.model.properties.chemicalComponentMap.get(n);if(r)return OM(r.type,n)}return 0}!function(e){function t(e,t,n,r,o,i){return{kind:"bond-location",aStructure:e,aUnit:t,aIndex:n,bStructure:r,bUnit:o,bIndex:i}}function n(e,t){return e.aStructure.label===t.aStructure.label&&e.bStructure.label===t.bStructure.label&&e.aIndex===t.aIndex&&e.bIndex===t.bIndex&&e.aUnit.id===t.aUnit.id&&e.bUnit.id===t.bUnit.id}function r(e,t){return{kind:"bond-loci",structure:e,bonds:t}}e.Location=t,e.isLocation=function(e){return!!e&&"bond-location"===e.kind},e.areLocationsEqual=n,e.Loci=r,e.isLoci=function(e){return!!e&&"bond-loci"===e.kind},e.areLociEqual=function(e,t){if(e.structure!==t.structure)return!1;if(e.bonds.length!==t.bonds.length)return!1;for(let r=0,o=e.bonds.length;r<o;++r)if(!n(e.bonds[r],t.bonds[r]))return!1;return!0},e.isLociEmpty=function(e){return 0===e.bonds.length},e.remapLoci=function(e,n){if(n===e.structure)return e;const o=[];return e.bonds.forEach((r=>{const i=n.unitMap.get(r.aUnit.id);if(!i)return;const a=n.unitMap.get(r.bUnit.id);if(!a)return;const s=r.aUnit.elements[r.aIndex],l=Em.indexOf(i.elements,s);if(-1===l)return;const c=r.bUnit.elements[r.bIndex],u=Em.indexOf(a.elements,c);-1!==u&&o.push(t(e.structure,i,l,e.structure,a,u))})),r(n,o)},e.toStructureElementLoci=function(e){const t=[],n=new Map;for(const r of e.bonds){const{aIndex:e,aUnit:t,bIndex:o,bUnit:i}=r;t===i?n.has(t.id)?n.get(t.id).push(e,o):n.set(t.id,[e,o]):(n.has(t.id)?n.get(t.id).push(e):n.set(t.id,[e]),n.has(i.id)?n.get(i.id).push(o):n.set(i.id,[o]))}return n.forEach(((n,r)=>{t.push({unit:e.structure.unitMap.get(r),indices:Em.deduplicate(Em.ofUnsortedArray(n))})})),cG(e.structure,t)},e.toFirstStructureElementLoci=function(e){const{aUnit:t,aIndex:n}=e.bonds[0];return cG(e.structure,[{unit:t,indices:ey.ofSingleton(n)}])},e.getType=function(e,t){if(t.aUnit===t.bUnit){const e=t.aUnit.bonds,n=e.getEdgeIndex(t.aIndex,t.bIndex);return n<0?VM.create(0):VM.create(e.edgeProps.flags[n])}{const n=e.interUnitBonds.getBondFromLocation(t);return n?VM.create(n.props.flag):VM.create(0)}},e.getOrder=function(e,t){if(t.aUnit===t.bUnit){const e=t.aUnit.bonds,n=e.getEdgeIndex(t.aIndex,t.bIndex);return n<0?0:e.edgeProps.order[n]}{const n=e.interUnitBonds.getBondFromLocation(t);return n?n.props.order:0}},e.getIntraUnitBondCount=function(e){let t=0;for(let n=0,r=e.units.length;n<r;++n){const r=e.units[n];BO.isAtomic(r)&&(t+=r.bonds.edgeCount)}return t};e.ElementBondIterator=class{move(){return this.advance(),this.current}setElement(e,t,n){this.structure=e,this.unit=t,this.index=n,this.interBondIndices=e.interUnitBonds.getEdgeIndices(n,t.id),this.interBondCount=this.interBondIndices.length,this.interBondIndex=0,this.intraBondEnd=t.bonds.offset[n+1],this.intraBondIndex=t.bonds.offset[n],this.hasNext=this.interBondIndex<this.interBondCount||this.intraBondIndex<this.intraBondEnd}advance(){if(this.intraBondIndex<this.intraBondEnd)this.current.otherUnit=this.unit,this.current.otherIndex=this.unit.bonds.b[this.intraBondIndex],this.current.type=this.unit.bonds.edgeProps.flags[this.intraBondIndex],this.current.order=this.unit.bonds.edgeProps.order[this.intraBondIndex],this.intraBondIndex+=1;else{if(!(this.interBondIndex<this.interBondCount))return void(this.hasNext=!1);{const e=this.structure.interUnitBonds.edges[this.interBondIndex];this.current.otherUnit=this.structure.unitMap.get(e.unitA!==this.unit.id?e.unitA:e.unitB),this.current.otherIndex=e.indexA!==this.index?e.indexA:e.indexB,this.current.type=e.props.flag,this.current.order=e.props.order,this.interBondIndex+=1}}this.hasNext=this.interBondIndex<this.interBondCount||this.intraBondIndex<this.intraBondEnd}constructor(){this.current={},this.hasNext=!1}},e.getBoundingSphere=function(e,t){return KM.fromPairProvider(e.bonds.length,((t,n,r)=>{const{aUnit:o,aIndex:i,bUnit:a,bIndex:s}=e.bonds[t];o.conformation.position(o.elements[i],n),a.conformation.position(a.elements[s],r)}),t)}}(RP||(RP={}));const VP=new Set;function qP(e,t){const n=aM[e];if(void 0!==n){const e=n[t];if(void 0!==e)return e}return VP}const YP=qh.zero();function XP(e,t){const n=e.conformation,r=new Float32Array(3*t.length),{elements:o}=e;for(let i=0,a=t.length;i<a;++i)n.position(o[t[i]],YP),qh.toArray(YP,r,3*i);return r}class WP{get index(){return this._index||(this._index=function(e,t){const n=new Map,r=new Map;for(let l=0,c=e.length;l<c;l++){const t=e[l];for(let e=0,r=t.length;e<r;e++){const r=t[e];n.has(r)?n.get(r).push(l):n.set(r,[l])}}for(let l=0,c=t.length;l<c;l++){const n=t[l],o=e[n];for(let e=0,t=o.length;e<t;e++){const t=o[e];r.has(t)?r.get(t).push(n):r.set(t,[n])}}const o=new Uk.UniqueEdgeBuilder(e.length);for(let l=0,c=e.length;l<c;l++){const t=e[l];for(let e=0,r=t.length;e<r;e++){const r=t[e],i=n.get(r);if(1!==i.length)for(let e=0,t=i.length;e<t;e++){const t=i[e];l>=t||o.addEdge(l,t)}}}const i=Uk.connectedComponents(o.getGraph()),a=i.componentIndex,s=[];for(let l=0;l<i.componentCount;l++)s[l]=[];for(let l=0,c=e.length;l<c;l++)s[a[l]].push(l);return{elementRingIndices:n,elementAromaticRingIndices:r,ringComponentIndex:a,ringComponents:s}}(this.all,this.aromaticRings)),this._index}get byFingerprint(){return this._byFingerprint||(this._byFingerprint=function(e,t){const n=new Map;let r=0;for(let o=0,i=t.length;o<i;o++){const i=t[o],a=KP.fingerprint(e,i);n.has(a)?n.get(a).push(r):n.set(a,[r]),r++}return n}(this.unit,this.all)),this._byFingerprint}get elementRingIndices(){return this.index.elementRingIndices}get elementAromaticRingIndices(){return this.index.elementAromaticRingIndices}get ringComponentIndex(){return this.index.ringComponentIndex}get ringComponents(){return this.index.ringComponents}get aromaticRings(){return this._aromaticRings||(this._aromaticRings=function(e,t){const n=[];for(let r=0,o=t.length;r<o;++r)KP.isAromatic(e,t[r])&&n.push(r);return n}(this.unit,this.all)),this._aromaticRings}constructor(e,t){this.unit=t,this.all=e}}var KP,JP;function ZP(e,t){const{elements:n}=e,r=e.model.atomicHierarchy.residueAtomSegments.index,o=r[n[t[0]]];for(let i=1,a=t.length;i<a;i++)if(o!==r[n[t[i]]])return-1;return o}function $P(e,t,n){const r=e.byFingerprint.get(t);if(r)for(let o=0,i=r.length;o<i;o++){const t=r[o],i=ZP(e.unit,e.all[t]);i>=0&&(n.has(i)?n.get(i).push(t):n.set(i,[t]))}}function eO(e){const t=[],{elements:n,model:r}=e,{spheres:o,gaussians:i}=r.coarseHierarchy,a=BO.isSpheres(e)?o.polymerRanges:i.polymerRanges,s=JP.transientSegments(a,n);for(;s.hasNext;){const{start:e,end:r}=s.move();for(let o=e;o<r;++o)t.push(n[o])}return Em.ofSortedArray(t)}function tO(e){const t=[],{elements:n,model:r}=e,{spheres:o,gaussians:i}=r.coarseHierarchy,a=BO.isSpheres(e)?o.gapRanges:i.gapRanges,s=JP.transientSegments(a,n);for(;s.hasNext;){const{start:e,end:r}=s.move();t.push(n[e],n[r-1])}return Em.ofSortedArray(t)}!function(e){function t(e){return function(e){const t=e.length,n=new Array(t);for(let a=0;a<t;a++)n[a]=e[t-a-1];const r=jP(e),o=jP(n);let i=!1;for(let a=0;a<t;a++){const s=e[(a+r)%t],l=n[(a+o)%t];if(s!==l){i=s<l;break}}return i?zP(e,r):zP(n,o)}(e)}e.fingerprint=function(e,n){const{elements:r}=e,{type_symbol:o}=e.model.atomicHierarchy.atoms,i=[];for(let t=0,a=n.length;t<a;t++)i[i.length]=o.value(r[n[t]]);return t(i)},e.elementFingerprint=t;const n=new Set(["B","C","N","O","SI","P","S","GE","AS","SN","SB","BI"]);e.isAromatic=function(e,t){const{elements:r,bonds:{b:o,offset:i,edgeProps:{flags:a}}}=e,{type_symbol:s,label_comp_id:l}=e.model.atomicHierarchy.atoms;if("PRO"===l.value(e.elements[t[0]]))return!1;let c=0,u=!1;for(let A=0,f=t.length;A<f;++A){const e=t[A];!u&&n.has(s.value(r[e]))&&(u=!0);for(let n=i[e],r=i[e+1];n<r;++n)VM.is(16,a[n])&&Em.has(t,o[n])&&(c+=1)}if(c===2*t.length)return!0;if(!u)return!1;if(t.length<5)return!1;if(c>0)return!1;const d=qT.calculateMomentsAxes(XP(e,t));return qh.magnitude(d.dirC)<.05},e.getAltId=function(e,t){const{label_alt_id:n}=e.model.atomicHierarchy.atoms,{elements:r}=e;for(let o=0,i=t.length;o<i;++o){const e=r[t[o]],i=n.value(e);if(i)return i}return""}}(KP||(KP={})),function(e){e.create=function(t){const n=PP(t);return new e(n,t)},e.byFingerprintAndResidue=function(e,t){const n=new Map;for(let r=0,o=t.length;r<o;r++){$P(e,t[r],n)}return n}}(WP||(WP={})),function(e){function t(e){return e[e.length-1]}function n(e){return e.length/2}function r(e,t){return e[2*t]}function o(e,t){return e[2*t+1]+1}function i(e,t){return e[2*t]}function a(e,t){return e[2*t+1]}function s(e,t){return l(e,t,0)}function l(e,r,o){if(i(e,o)>ey.max(r)||t(e)<ey.min(r))return-1;for(let t=o,s=n(e);t<s;++t){const n=Gg.ofRange(i(e,t),a(e,t));if(ey.areIntersecting(n,r))return t}return-1}e.ofSortedRanges=function(e){return Em.ofSortedArray(e)},e.start=function(e){return e[0]},e.end=function(e){return e[e.length-1]+1},e.min=function(e){return e[0]},e.max=t,e.size=function(e){let t=0;for(let n=0,r=e.length;n<r;n+=2)t+=e[n+1]-e[n]+1;return t},e.count=n,e.startAt=r,e.endAt=o,e.minAt=i,e.maxAt=a,e.areEqual=function(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;++n)if(e[n]!==t[n])return!1;return!0},e.forEach=function(e,t){let n=0;for(let r=0,o=e.length;r<o;r+=2)for(let i=e[r],a=e[r+1];i<=a;++i)t(i,n),++n},e.has=function(e,t){return-1!==s(e,t)},e.hasFrom=function(e,t,n){return-1!==l(e,t,n)},e.firstIntersectionIndex=s,e.firstIntersectionIndexFrom=l,e.transientSegments=function(e,t){return new c(e,t)};class c{updateValue(){this.value.index=this.curIndex,this.value.start=ey.findPredecessorIndex(this.set,r(this.ranges,this.curIndex)),this.value.end=ey.findPredecessorIndex(this.set,o(this.ranges,this.curIndex))}move(){return this.hasNext&&(this.updateValue(),this.curIndex=l(this.ranges,this.set,this.curIndex+1),this.hasNext=-1!==this.curIndex),this.value}constructor(e,t){this.ranges=e,this.set=t,this.value={index:0,start:0,end:0},this.curIndex=0,this.hasNext=!1,this.curIndex=s(e,t),this.hasNext=-1!==this.curIndex}}e.Iterator=c}(JP||(JP={}));const nO=qh();function rO(e){const t=function(e){const{elements:t,conformation:n}=e,r=new Float32Array(3*t.length);for(let o=0,i=t.length;o<i;o++)n.invariantPosition(t[o],nO),qh.toArray(nO,r,3*o);return r}(e);return qT.ofPositions(t)}const oO=qh.dot,iO=qh.copy,aO=qh.scaleAndSub,sO=qh.scaleAndAdd;class lO{computeExtrema(e,t){const n=oO(this.dir[e],t);n<this.minDist[e]&&(this.minDist[e]=n,iO(this.extrema[2*e],t)),n>this.maxDist[e]&&(this.maxDist[e]=n,iO(this.extrema[2*e+1],t))}computeSphereExtrema(e,t,n){const r=this.dir[e],o=oO(r,t);o-n<this.minDist[e]&&(this.minDist[e]=o-n,aO(this.extrema[2*e],t,r,n)),o+n>this.maxDist[e]&&(this.maxDist[e]=o+n,sO(this.extrema[2*e+1],t,r,n))}includeSphere(e){if(YT.hasExtrema(e)&&e.extrema.length>1)for(const t of e.extrema)this.includePosition(t);else this.includePositionRadius(e.center,e.radius)}includePosition(e){for(let t=0;t<this.dirLength;++t)this.computeExtrema(t,e)}includePositionRadius(e,t){for(let n=0;n<this.dirLength;++n)this.computeSphereExtrema(n,e,t)}finishedIncludeStep(){for(let e=0;e<this.extrema.length;e++)this.centroidHelper.includeStep(this.extrema[e]);this.centroidHelper.finishedIncludeStep()}radiusSphere(e){if(YT.hasExtrema(e)&&e.extrema.length>1)for(const t of e.extrema)this.radiusPosition(t);else this.radiusPositionRadius(e.center,e.radius)}radiusPosition(e){this.centroidHelper.radiusStep(e)}radiusPositionRadius(e,t){this.centroidHelper.radiusSphereStep(e,t)}getSphere(e){return YT.setExtrema(this.centroidHelper.getSphere(e),this.extrema.slice())}getBox(e){return XT.fromVec3Array(e||XT(),this.extrema)}reset(){for(let e=0;e<this.dirLength;++e)this.minDist[e]=1/0,this.maxDist[e]=-1/0,this.extrema[2*e]=qh(),this.extrema[2*e+1]=qh();this.centroidHelper.reset()}constructor(e){this.minDist=[],this.maxDist=[],this.extrema=[],this.centroidHelper=new KM,this.dir=function(e){let t;switch(e){case"6":t=[...cO];break;case"14":t=[...cO,...uO];break;case"26":t=[...cO,...uO,...dO];break;case"98":t=[...cO,...uO,...dO,...AO,...fO,...pO]}return t.map((e=>{const t=qh.create(e[0],e[1],e[2]);return qh.normalize(t,t)}))}(e),this.dirLength=this.dir.length,this.reset()}}const cO=[[1,0,0],[0,1,0],[0,0,1]],uO=[[1,1,1],[-1,1,1],[-1,-1,1],[1,-1,1]],dO=[[1,1,0],[1,-1,0],[1,0,1],[1,0,-1],[0,1,1],[0,1,-1]],AO=[[0,1,2],[0,2,1],[1,0,2],[2,0,1],[1,2,0],[2,1,0],[0,1,-2],[0,2,-1],[1,0,-2],[2,0,-1],[1,-2,0],[2,-1,0]],fO=[[1,1,2],[2,1,1],[1,2,1],[1,-1,2],[1,1,-2],[1,-1,-2],[2,-1,1],[2,1,-1],[2,-1,-1],[1,-2,1],[1,2,-1],[1,-2,-1]],pO=[[2,2,1],[1,2,2],[2,1,2],[2,-2,1],[2,2,-1],[2,-2,-1],[1,-2,2],[1,2,-2],[1,-2,-2],[2,-1,2],[2,1,-2],[2,-1,-2]],hO=qh.set,gO=new lO("14"),mO=new lO("98");function yO(e){const t=XT.computeBounding(e);return{box:t,sphere:YT.fromBox3D(YT(),t)}}const vO=qh();function bO(e){const{x:t,y:n,z:r,radius:o,indices:i}=e,a=ey.size(i);if(a>25e4)return yO(e);const s=function(e){return e>1e4?gO:mO}(a);s.reset();for(let c=0;c<a;c++){const e=ey.getAt(i,c);hO(vO,t[e],n[e],r[e]),s.includePositionRadius(vO,o&&o[e]||0)}s.finishedIncludeStep();for(let c=0;c<a;c++){const e=ey.getAt(i,c);hO(vO,t[e],n[e],r[e]),s.radiusPositionRadius(vO,o&&o[e]||0)}const l=s.getSphere();if(!o&&YT.hasExtrema(l)&&a<=l.extrema.length){const e=[];for(let o=0;o<a;o++){const a=ey.getAt(i,o);e.push(qh.create(t[a],n[a],r[a]))}YT.setExtrema(l,e)}return{box:s.getBox(),sphere:l}}class CO{constructor(){this.data=new Map}get(e){const t=Em.hashCode(e);if(this.data.has(t))for(const[n,r]of this.data.get(t))if(Em.areEqual(e,n))return r}set(e,t){const n=Em.hashCode(e);if(this.data.has(n)){const r=this.data.get(n);for(const n of r)if(Em.areEqual(e,n[0]))return void(n[1]=t);r.push([e,t])}else this.data.set(n,[[e,t]])}static get(e){return e._dynamicPropertyData.ElementSetIntraBondCache||(e._dynamicPropertyData.ElementSetIntraBondCache=new CO),e._dynamicPropertyData.ElementSetIntraBondCache}}class IO{get operatorGroups(){return this._operators||(this._operators=this.operatorsProvider()),this._operators}constructor(e,t,n){this.operatorsProvider=n,this.id=e,this.details=t}}var EO,xO,BO,wO,_O,SO,DO;function TO(e,t,n){if(!e._rowCount)return[];const r=function(e){const{id:t,matrix:n,vector:r,_schema:o}=e,i=new Map,a=qh();for(let s=0,l=e._rowCount;s<l;s++){const e=tg.toMat4(Yh(),o.matrix.space,n.value(s));tg.toVec3(a,o.vector.space,r.value(s)),Yh.setTranslation(e,a),Yh.setValue(e,3,3,1),i.set(t.value(s),e)}return i}(n),o=[];for(let i=0;i<e._rowCount;i++)o[o.length]=kO(e,t,i,r);return o}function kO(e,t,n,r){const o=e.id.value(n),i=e.details.value(n),a=[],{assembly_id:s,oper_expression:l,asym_id_list:c}=t;for(let u=0,d=t._rowCount;u<d;u++)s.value(u)===o&&(a[a.length]={assemblyId:o,expression:l.value(u),asymIds:c.value(u)});return IO.create(o,i,function(e,t){return()=>{const n=[];let r=0;for(let o=0;o<e.length;o++){const i=e[o],a=QO(PO(i.expression)),s=RO(t,a,r,i.assemblyId),l=OU.generators.atoms({chainTest:OU.pred.and(OU.pred.eq((e=>WL.unit.operator_name(e.element)),_T.DefaultName),OU.pred.inSet((e=>WL.chain.label_asym_id(e.element)),i.asymIds))});n[n.length]={selector:l,operators:s,asymIds:i.asymIds},r+=s.length}return n}}(a,r))}function QO(e){const t=[],n=[];for(let r=0;r<e.length;r++)n[r]="";return MO(e,t,e.length-1,n),t}function MO(e,t,n,r){if(n<0)return void(t[t.length]=r.slice(0));const o=e[n],i=o.length;for(let a=0;a<i;a++)r[n]=o[a],MO(e,t,n-1,r)}function RO(e,t,n,r){const o=[];let i=n;for(const a of t){const t=Yh.identity();for(let n=0;n<a.length;n++)Yh.mul(t,t,e.get(a[n]));i++,o[o.length]=_T.create(`ASM_${i}`,t,{assembly:{id:r,operId:i,operList:a}})}return o}function PO(e){const t=/\(?([^\(\)]+)\)?]*/g,n=[],r=[];let o;for(;o=t.exec(e);)n[n.length]=o[1];return n.forEach((e=>{const t=[];e.split(",").forEach((e=>{const n=e.indexOf("-");if(n>0){const r=parseInt(e.substring(0,n)),o=parseInt(e.substr(n+1));for(let e=r;e<=o;e++)t[t.length]=e.toString()}else t[t.length]=e.trim()})),r[r.length]=t})),r}function OO(e){if(0===e._rowCount)return;const{id:t,matrix:n,vector:r}=e,o=wR.struct_ncs_oper.matrix.space,i=wR.struct_ncs_oper.vector.space,a=[];for(let s=0;s<e._rowCount;s++){const l=tg.toMat3(Xh(),o,n.value(s)),c=tg.toVec3(qh(),i,r.value(s));if(!_T.checkIfRotationAndTranslation(l,c))continue;if("given"===e.code.value(s)&&!Xh.isIdentity(l)&&!qh.isZero(c))continue;const u=t.value(s);a[a.length]=_T.ofRotationAndOffset(`ncs_${u}`,l,c,u)}return a}function FO(e){const t=e.bonds,{b:n,edgeProps:r,offset:o}=t,{order:i,flags:a}=r,{elementAromaticRingIndices:s}=e.rings,l=[],c=new Map,u=new Map,d=(e,t,n)=>{const r=l.length;l.push(Em.ofUnsortedArray([e,t,n])),c.set(Ph(e,t),n),u.has(e)?u.get(e).push(r):u.set(e,[r])};for(let A=0;A<e.elements.length;A++){if(s.has(A))continue;if(o[A+1]-o[A]+1<2)continue;const e=[];for(let t=o[A],r=o[A+1];t<r;t++){const r=a[t];VM.is(r,16)&&e.push(n[t])}if(e.length>=2){d(A,e[0],e[1]);for(let t=1,n=e.length;t<n;t++)d(A,e[t],e[0])}}return{getThirdElement:(e,t)=>c.get(Ph(e,t)),getTripletIndices:e=>u.get(e),triplets:l}}function NO(){return{result:wO.create(),closeUnitsResult:NT.create(),unitGroupResult:NT.create()}}!function(e){e.create=function(t,n,r){return new e(t,n,r)}}(IO||(IO={})),function(e){e.Default={assemblies:[],spacegroup:FT.ZeroP1,isNonStandardCrystalFrame:!1},e.findAssembly=function(e,t){const n=t.toLocaleLowerCase(),r=xO.Provider.get(e);return r?pg(r.assemblies,(e=>e.id.toLowerCase()===n)):void 0},e.getUnitcellLabel=function(e){const{cell:t,name:n,num:r}=e.spacegroup,{size:o,anglesInRadians:i}=t,a=o[0].toFixed(2),s=o[1].toFixed(2),l=o[2].toFixed(2),c=Lp(i[0]).toFixed(2),u=Lp(i[1]).toFixed(2),d=Lp(i[2]).toFixed(2),A=[];return A.push(`Unit Cell <b>${n}</b> #${r}`),A.push(`${a}\xd7${s}\xd7${l} \u212b`),A.push(`\u03b1=${c}\xb0 \u03b2=${u}\xb0 \u03b3=${d}\xb0`),A.join(" | ")}}(EO||(EO={})),function(e){e.Descriptor={name:"model_symmetry"},e.Provider=Gk.create(e.Descriptor),e.fromData=function(e){const t=TO(e.pdbx_struct_assembly,e.pdbx_struct_assembly_gen,e.pdbx_struct_oper_list),n=function(e,t){if(0===e._rowCount||0===t._rowCount)return FT.ZeroP1;const n=t.length_a.value(0),r=t.length_b.value(0),o=t.length_c.value(0);if(0===n||0===r||0===o)return FT.ZeroP1;const i=t.angle_alpha.value(0),a=t.angle_beta.value(0),s=t.angle_gamma.value(0);if(0===i||0===a||0===s)return FT.ZeroP1;const l=function(e){const t=e.Int_Tables_number.value(0),n=e["space_group_name_H-M"].value(0);return e.Int_Tables_number.isDefined?e["space_group_name_H-M"].isDefined?n:t:n}(e),c=OT.create(l,qh.create(n,r,o),qh.scale(qh(),qh.create(i,a,s),Math.PI/180));return FT.create(c)}(e.symmetry,e.cell);return{assemblies:t,spacegroup:n,isNonStandardCrystalFrame:(e.atom_sites._rowCount,!1),ncsOperators:OO(e.struct_ncs_oper)}},e.fromCell=function(e,t){const n=OT.create("P 1",e,t);return{assemblies:[],spacegroup:FT.create(n),isNonStandardCrystalFrame:!1}}}(xO||(xO={})),function(e){let t,n,r;function o(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n].id);return Fh(t)}function i(e){const t={};return{elements:e[0].elements,units:e,get unitIndexMap(){return t.unitIndexMap||(t.unitIndexMap=function(e){const t=ny.Mutable();for(let n=0,r=e.length;n<r;n++)t.set(e[n].id,n);return t}(e)),t.unitIndexMap},hashCode:a(e[0]),transformHash:o(e)}}function a(e){return Qh(e.invariantId,Em.hashCode(e.elements))}function s(e){const t=e.coarseConformation.spheres.radius;return e=>t[e]}!function(e){e[e.Atomic=0]="Atomic",e[e.Spheres=1]="Spheres",e[e.Gaussians=2]="Gaussians"}(t=e.Kinds||(e.Kinds={})),e.isAtomic=function(e){return 0===e.kind},e.isCoarse=function(e){return 1===e.kind||2===e.kind},e.isSpheres=function(e){return 1===e.kind},e.isGaussians=function(e){return 2===e.kind},e.create=function(e,t,n,r,o,i,a,u,d){switch(o){case 0:return new l(e,t,n,r,i,u,_T.createMapping(a,i.atomicConformation),null!==d&&void 0!==d?d:c());case 1:return f(e,t,n,r,i,1,u,_T.createMapping(a,i.coarseConformation.spheres,s(i)),null!==d&&void 0!==d?d:A());case 2:return f(e,t,n,r,i,2,u,_T.createMapping(a,i.coarseConformation.gaussians,(e=>0)),null!==d&&void 0!==d?d:A())}},e.SymmetryGroup=i,function(e){e.areInvariantElementsEqual=function(e,t){return e.hashCode===t.hashCode&&Em.areEqual(e.elements,t.elements)},e.getUnitSymmetryGroupsIndexMap=function(e){const t=ny.Mutable();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let e=0,o=r.units.length;e<o;++e)t.set(r.units[e].id,n)}return t}}(i=e.SymmetryGroup||(e.SymmetryGroup={})),e.conformationId=function(t){return e.isAtomic(t)?t.model.atomicConformation.id:t.model.coarseConformation.id},e.hashUnit=a,function(e){e[e.None=0]="None",e[e.MultiChain=1]="MultiChain",e[e.Partitioned=2]="Partitioned",e[e.FastBoundary=4]="FastBoundary"}(n=e.Trait||(e.Trait={})),function(e){e.is=mp.has,e.create=mp.create}(r=e.Traits||(e.Traits={}));class l{getChild(e){return e.length===this.elements.length?this:new l(this.id,this.invariantId,this.chainGroupId,this.traits,this.model,e,this.conformation,c())}applyOperator(e,t){const n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?t:_T.compose(this.conformation.operator,t);return new l(e,this.invariantId,this.chainGroupId,this.traits,this.model,this.elements,_T.createMapping(n,this.model.atomicConformation,this.conformation.r),this.props)}remapModel(t,n,r){var o,i;r||(r={...this.props,bonds:n&&!(null===(i=null===(o=this.props.bonds)||void 0===o?void 0:o.props)||void 0===i?void 0:i.canRemap)?void 0:p(this,this.props.bonds,t,n)},e.isSameConformation(this,t)||(r.boundary=void 0,r.lookup3d=void 0,r.principalAxes=void 0));let a=this.conformation.operator;const s=xO.Provider.get(t);if(-1!==a.spgrOp&&s&&s!==xO.Provider.get(this.model)){const[e,n,r]=a.hkl,{toFractional:o}=s.spacegroup.cell,i=qh.transformMat4(qh(),Wj.getCenter(t),o);a=FT.getSymmetryOperatorRef(s.spacegroup,a.spgrOp,e,n,r,i)}const c=this.model.atomicConformation!==t.atomicConformation||a!==this.conformation.operator?_T.createMapping(a,t.atomicConformation):this.conformation;return new l(this.id,this.invariantId,this.chainGroupId,this.traits,t,this.elements,c,r)}get boundary(){if(this.props.boundary)return this.props.boundary;const{x:e,y:t,z:o}=this.model.atomicConformation;return this.props.boundary=r.is(this.traits,n.FastBoundary)?yO({x:e,y:t,z:o,indices:this.elements}):bO({x:e,y:t,z:o,indices:this.elements}),this.props.boundary}get lookup3d(){if(this.props.lookup3d)return this.props.lookup3d;const{x:e,y:t,z:n}=this.model.atomicConformation;return this.props.lookup3d=ZT({x:e,y:t,z:n,indices:this.elements},this.boundary),this.props.lookup3d}get principalAxes(){return this.props.principalAxes||(this.props.principalAxes=rO(this)),this.props.principalAxes}get bonds(){var e;if(this.props.bonds)return this.props.bonds;const t=CO.get(this.model);let n=t.get(this.elements);return n||(n=CP(this),(null===(e=n.props)||void 0===e?void 0:e.cacheable)&&t.set(this.elements,n)),this.props.bonds=n,this.props.bonds}get rings(){return this.props.rings||(this.props.rings=WP.create(this)),this.props.rings}get resonance(){return this.props.resonance||(this.props.resonance=function(e){return{delocalizedTriplets:FO(e)}}(this)),this.props.resonance}get polymerElements(){return this.props.polymerElements||(this.props.polymerElements=function(e){const t=[],{elements:n,model:r}=e,{residueAtomSegments:o}=e.model.atomicHierarchy,{traceElementIndex:i}=r.atomicHierarchy.derived.residue,a=JP.transientSegments(e.model.atomicRanges.polymerRanges,n),s=ty.transientSegments(o,n);for(;a.hasNext;){const e=a.move();for(s.setSegment(e);s.hasNext;){const e=s.move(),{start:r,end:a,index:l}=e;if(ey.areIntersecting(Gg.ofRange(n[r],n[a-1]),n)){const e=i[l];t.push(-1===e?o.offsets[l]:e)}}}return Em.ofSortedArray(t)}(this)),this.props.polymerElements}get gapElements(){return this.props.gapElements||(this.props.gapElements=function(e){const t=[],{elements:n,model:r,residueIndex:o}=e,{residueAtomSegments:i}=e.model.atomicHierarchy,{traceElementIndex:a}=r.atomicHierarchy.derived.residue,s=JP.transientSegments(e.model.atomicRanges.gapRanges,e.elements);for(;s.hasNext;){const e=s.move(),r=o[n[e.start]],l=o[n[e.end-1]],c=a[r],u=a[l];t.push(-1===c?i.offsets[r]:c),t.push(-1===u?i.offsets[l]:u)}return Em.ofSortedArray(t)}(this)),this.props.gapElements}get nucleotideElements(){return this.props.nucleotideElements||(this.props.nucleotideElements=function(e){const t=[],{elements:n,model:r}=e,{chainAtomSegments:o,residueAtomSegments:i}=r.atomicHierarchy,{moleculeType:a,traceElementIndex:s}=r.atomicHierarchy.derived.residue,l=ty.transientSegments(o,n),c=ty.transientSegments(i,n);for(;l.hasNext;)for(c.setSegment(l.move());c.hasNext;){const{index:e}=c.move();if(jM(a[e])){const n=s[e];t.push(-1===n?i.offsets[e]:n)}}return Em.ofSortedArray(t)}(this)),this.props.nucleotideElements}get proteinElements(){return this.props.proteinElements||(this.props.proteinElements=function(e){const t=[],{elements:n,model:r}=e,{chainAtomSegments:o,residueAtomSegments:i}=r.atomicHierarchy,{moleculeType:a,traceElementIndex:s}=r.atomicHierarchy.derived.residue,l=ty.transientSegments(o,n),c=ty.transientSegments(i,n);for(;l.hasNext;)for(c.setSegment(l.move());c.hasNext;){const{index:e}=c.move();if(zM(a[e])){const n=s[e];t.push(-1===n?i.offsets[e]:n)}}return Em.ofSortedArray(t)}(this)),this.props.proteinElements}get residueCount(){if(void 0!==this.props.residueCount)return this.props.residueCount;let e=0;const t=ty.transientSegments(this.model.atomicHierarchy.residueAtomSegments,this.elements);for(;t.hasNext;)t.move(),e+=1;return this.props.residueCount=e,this.props.residueCount}getResidueIndex(e){return this.residueIndex[this.elements[e]]}constructor(e,t,n,r,o,i,a,s){this.kind=0,this.objectPrimitive="atomistic",this.id=e,this.invariantId=t,this.chainGroupId=n,this.traits=r,this.model=o,this.elements=i,this.conformation=a,this.residueIndex=o.atomicHierarchy.residueAtomSegments.index,this.chainIndex=o.atomicHierarchy.chainAtomSegments.index,this.props=s}}function c(){return{}}e.Atomic=l;class u{getChild(e){return e.length===this.elements.length?this:f(this.id,this.invariantId,this.chainGroupId,this.traits,this.model,this.kind,e,this.conformation,A())}applyOperator(e,t){const n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?t:_T.compose(this.conformation.operator,t);return f(e,this.invariantId,this.chainGroupId,this.traits,this.model,this.kind,this.elements,_T.createMapping(n,this.getCoarseConformation(),this.conformation.r),this.props)}remapModel(t,n,r){const o=this.getCoarseConformation(),i=d(this.kind,t);r||(r={...this.props},e.isSameConformation(this,t)||(r.boundary=void 0,r.lookup3d=void 0,r.principalAxes=void 0));const a=o!==i?_T.createMapping(this.conformation.operator,i,1===this.kind?s(t):e=>0):this.conformation;return new u(this.id,this.invariantId,this.chainGroupId,this.traits,t,this.kind,this.elements,a,r)}get boundary(){if(this.props.boundary)return this.props.boundary;const{x:e,y:t,z:o}=this.getCoarseConformation();return this.props.boundary=r.is(this.traits,n.FastBoundary)?yO({x:e,y:t,z:o,indices:this.elements}):bO({x:e,y:t,z:o,indices:this.elements}),this.props.boundary}get lookup3d(){if(this.props.lookup3d)return this.props.lookup3d;const{x:e,y:t,z:n}=this.getCoarseConformation();return this.props.lookup3d=ZT({x:e,y:t,z:n,indices:this.elements},this.boundary),this.props.lookup3d}get principalAxes(){return this.props.principalAxes||(this.props.principalAxes=rO(this)),this.props.principalAxes}get polymerElements(){return this.props.polymerElements||(this.props.polymerElements=eO(this)),this.props.polymerElements}get gapElements(){return this.props.gapElements||(this.props.gapElements=tO(this)),this.props.gapElements}getCoarseConformation(){return d(this.kind,this.model)}constructor(e,t,n,r,o,i,a,s,l){this.kind=i,this.objectPrimitive=1===i?"sphere":"gaussian",this.id=e,this.invariantId=t,this.chainGroupId=n,this.traits=r,this.model=o,this.elements=a,this.conformation=s,this.coarseElements=1===i?o.coarseHierarchy.spheres:o.coarseHierarchy.gaussians,this.coarseConformation=1===i?o.coarseConformation.spheres:o.coarseConformation.gaussians,this.props=l}}function d(e,t){return 1===e?t.coarseConformation.spheres:t.coarseConformation.gaussians}function A(){return{}}e.Spheres=class extends u{};function f(e,t,n,r,o,i,a,s,l){return new u(e,t,n,r,o,i,a,s,l)}function p(e,t,n,r){var o;if(!t)return;if(e.model.atomicConformation.id===n.atomicConformation.id)return t;const i=jk.Provider.get(e.model);if(i){const e=jk.Provider.get(n);return e&&i!==e?void 0:t}return(null===(o=t.props)||void 0===o?void 0:o.canRemap)||!r||h(e,n)?t:void 0}function h(e,t){const n=Wj.CoordinatesHistory.get(Wj.getRoot(t));if(n)return n.areEqual(e.elements,e.kind,t);const r=e.elements,{x:o,y:i,z:a}=e.conformation.coordinates,{x:s,y:l,z:c}=g(e.kind,t);for(let u=0,d=r.length;u<d;u++){const e=r[u];if(o[e]!==s[e]||i[e]!==l[e]||a[e]!==c[e])return!1}return!0}function g(e,t){return 0===e?t.atomicConformation:1===e?t.coarseConformation.spheres:t.coarseConformation.gaussians}function m(e,t){return 0===e?t.atomicHierarchy:1===e?t.coarseHierarchy.spheres:t.coarseHierarchy.gaussians}e.Gaussians=class extends u{},e.areSameChainOperatorGroup=function(e,t){return e.chainGroupId===t.chainGroupId&&e.conformation.operator.name===t.conformation.operator.name},e.areOperatorsEqual=function(e,t){return Yh.areEqual(e.conformation.operator.matrix,t.conformation.operator.matrix,1e-6)},e.areConformationsEqual=function(e,t){return e===t||!!Em.areEqual(e.elements,t.elements)&&h(e,t.model)},e.isSameConformation=h,e.getModelConformationOfKind=g,e.getConformation=function(e){return g(e.kind,e.model)},e.getModelHierarchyOfKind=m,e.getHierarchy=function(e){return m(e.kind,e.model)}}(BO||(BO={})),function(e){e.add=function(e,t,n,r){e.indices[e.count]=n,e.units[e.count]=t,e.squaredDistances[e.count]=r,e.count++},e.create=function(){return{count:0,indices:[],units:[],squaredDistances:[]}},e.copy=function(e,t){for(let n=0;n<t.count;++n)e.indices[n]=t.indices[n],e.units[n]=t.units[n],e.squaredDistances[n]=t.squaredDistances[n];return e.count=t.count,e}}(wO||(wO={}));class LO{findUnitIndices(e,t,n,r){return this.unitLookup.find(e,t,n,r)}find(e,t,n,r,o){return this._find(e,t,n,r,null!==o&&void 0!==o?o:this.findContext)}_find(e,t,n,r,o){NT.reset(o.result);const{units:i}=this.structure,a=this.unitLookup.find(e,t,n,r,o.closeUnitsResult);if(0===a.count)return o.result;for(let s=0,l=a.count;s<l;s++){const l=i[a.indices[s]];qh.set(this.pivot,e,t,n),l.conformation.operator.isIdentity||qh.transformMat4(this.pivot,this.pivot,l.conformation.operator.inverse);const c=l.lookup3d.find(this.pivot[0],this.pivot[1],this.pivot[2],r,o.unitGroupResult);for(let e=0,t=c.count;e<t;e++)wO.add(o.result,l,c.indices[e],c.squaredDistances[e])}return o.result}nearest(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4?arguments[4]:void 0;return this._nearest(e,t,n,r,null!==o&&void 0!==o?o:this.findContext)}_nearest(e,t,n,r,o){const i=o.result,a=this.heap;NT.reset(i),a.clear();const{units:s}=this.structure;let l=0;const c=this.unitLookup.nearest(e,t,n,s.length,(e=>(l+=s[e].elements.length)>=r),o.closeUnitsResult);if(0===c.count)return i;let u=0,d=-Number.MAX_VALUE;for(let A=0,f=c.count;A<f;A++){const i=c.squaredDistances[A];if(u>=r&&d<i)break;qh.set(this.pivot,e,t,n);const l=s[c.indices[A]];l.conformation.operator.isIdentity||qh.transformMat4(this.pivot,this.pivot,l.conformation.operator.inverse);const f=l.lookup3d.nearest(this.pivot[0],this.pivot[1],this.pivot[2],r,void 0,o.unitGroupResult);if(0!==f.count){u+=f.count,d=Math.max(d,f.squaredDistances[f.count-1]);for(let e=0,t=f.count;e<t;e++)a.insert(f.squaredDistances[e],{index:f.indices[e],unit:l})}}if(1===r){const e=a.findMinimum();if(e){const{key:t}=e,{unit:n,index:r}=e.value;wO.add(i,n,r,t)}}else for(;!a.isEmpty()&&i.count<r;){const e=a.extractMinimum(),{key:t}=e,{unit:n,index:r}=e.value;wO.add(i,n,r,t)}return i}findIntoBuilder(e,t,n,r,o){const{units:i}=this.structure,a=this.unitLookup.find(e,t,n,r);if(0!==a.count)for(let s=0,l=a.count;s<l;s++){const l=i[a.indices[s]];qh.set(this.pivot,e,t,n),l.conformation.operator.isIdentity||qh.transformMat4(this.pivot,this.pivot,l.conformation.operator.inverse);const c=l.lookup3d.find(this.pivot[0],this.pivot[1],this.pivot[2],r);if(0===c.count)continue;const u=l.elements;o.beginUnit(l.id);for(let e=0,t=c.count;e<t;e++)o.addElement(u[c.indices[e]]);o.commitUnit()}}findIntoBuilderIf(e,t,n,r,o,i){const{units:a}=this.structure,s=this.unitLookup.find(e,t,n,r);if(0===s.count)return;const l=Vk.create(this.structure);for(let c=0,u=s.count;c<u;c++){const u=a[s.indices[c]];qh.set(this.pivot,e,t,n),u.conformation.operator.isIdentity||qh.transformMat4(this.pivot,this.pivot,u.conformation.operator.inverse);const d=u.lookup3d.find(this.pivot[0],this.pivot[1],this.pivot[2],r);if(0===d.count)continue;const A=u.elements;l.unit=u,o.beginUnit(u.id);for(let e=0,t=d.count;e<t;e++)l.element=A[d.indices[e]],i(l)&&o.addElement(l.element);o.commitUnit()}}findIntoBuilderWithRadius(e,t,n,r,o,i,a,s){const{units:l}=this.structure,c=this.unitLookup.find(e,t,n,i);if(0===c.count)return;const u=Vk.create(this.structure),d=r+o+i;for(let A=0,f=c.count;A<f;A++){const o=l[c.indices[A]];qh.set(this.pivot,e,t,n),o.conformation.operator.isIdentity||qh.transformMat4(this.pivot,this.pivot,o.conformation.operator.inverse);const f=o.lookup3d.find(this.pivot[0],this.pivot[1],this.pivot[2],d);if(0===f.count)continue;const p=o.elements;u.unit=o,s.beginUnit(o.id);for(let e=0,t=f.count;e<t;e++){u.element=p[f.indices[e]];const t=a(u);Math.sqrt(f.squaredDistances[e])-r-t>i||s.addElement(p[f.indices[e]])}s.commitUnit()}}check(e,t,n,r){const{units:o}=this.structure,i=this.unitLookup.find(e,t,n,r);if(0===i.count)return!1;for(let a=0,s=i.count;a<s;a++){const s=o[i.indices[a]];qh.set(this.pivot,e,t,n),s.conformation.operator.isIdentity||qh.transformMat4(this.pivot,this.pivot,s.conformation.operator.inverse);if(s.lookup3d.check(this.pivot[0],this.pivot[1],this.pivot[2],r))return!0}return!1}get boundary(){return this.structure.boundary}constructor(e){this.structure=e,this.pivot=qh(),this.heap=new JT,this.findContext=NO();const{units:t,boundary:n}=e,r=t.length,o=new Float32Array(r),i=new Float32Array(r),a=new Float32Array(r),s=new Float32Array(r),l=qh();for(let u=0;u<r;u++){const e=t[u],n=e.boundary.sphere;qh.transformMat4(l,n.center,e.conformation.operator.matrix),o[u]=l[0],i[u]=l[1],a[u]=l[2],s[u]=n.radius}const c={x:o,y:i,z:a,radius:s,indices:ey.ofBounds(0,r)};this.unitLookup=ZT(c,n)}}function UO(e,t){if(0===t.length)return aG.Empty;if(1===t.length)return t[0];const n=new Map,r=new Set;for(const{units:i}of t)for(let t=0,o=i.length;t<o;t++){const o=i[t];if(n.has(o.id)){if(r.has(o.id))continue;const t=Em.union(n.get(o.id),o.elements);n.set(o.id,t),t.length===e.unitMap.get(o.id).elements.length&&r.add(o.id)}else n.set(o.id,o.elements),o.elements.length===e.unitMap.get(o.id).elements.length&&r.add(o.id)}const o=e.subsetBuilder(!0);return n.forEach(GO,o),o.getStructure()}function GO(e,t){this.setUnit(t,e)}function jO(e,t){if(e===t)return!0;if(e.units.length!==t.units.length)return!1;const n=e.units,r=t.unitMap;for(let o=0,i=n.length;o<i;o++){const e=n[o];if(!r.has(e.id))return!1;const t=r.get(e.id);if(!Em.areEqual(e.elements,t.elements))return!1}return!0}function zO(e,t){if(e===t)return!0;let n,r;e.units.length<t.units.length?(n=e,r=t):(n=t,r=e);const o=n.units,i=r.unitMap;for(let a=0,s=o.length;a<s;a++){const e=o[a];if(!i.has(e.id))continue;const t=i.get(e.id);if(Em.areIntersecting(e.elements,t.elements))return!0}return!1}function HO(e,t){if(e===t)return e;if(!zO(e,t))return aG.Empty;let n,r;e.units.length<t.units.length?(n=e,r=t):(n=t,r=e);const o=n.units,i=r.unitMap,a=[];for(let s=0,l=o.length;s<l;s++){const e=o[s];if(!i.has(e.id))continue;const t=i.get(e.id);if(Em.areIntersecting(e.elements,t.elements)){const n=Em.intersect(e.elements,t.elements);a[a.length]=e.getChild(n)}}return aG.create(a,{parent:e.parent||t.parent})}function VO(e,t){if(e===t)return aG.Empty;if(!zO(e,t))return e;const n=e.units,r=t.unitMap,o=[];for(let i=0,a=n.length;i<a;i++){const e=n[i];if(!r.has(e.id)){o[o.length]=e;continue}const t=r.get(e.id),a=Em.subtract(e.elements,t.elements);a.length>0&&(o[o.length]=e.getChild(a))}return aG.create(o,{parent:e.parent||t.parent})}function qO(e){return VM.isCovalent(e.atomicBond.type)}function YO(){return function(e){const{inputStructure:t}=e,n=Vk.create(t),r=[];for(const o of t.units){if(0!==o.kind)continue;n.unit=o;const e=o.elements;if(n.element=e[0],"polymer"!==WL.entity.type(n))continue;const t=ty.transientSegments(o.model.atomicHierarchy.residueAtomSegments,e);let i=0;for(;t.hasNext;)i++,t.move();i<8||r.push(o)}return _O.Singletons(t,aG.create(r,{parent:t}))}}function XO(){return function(e){const{inputStructure:t}=e,n=Vk.create(t),r=[];for(const o of t.units){if(0!==o.kind)continue;n.unit=o;const e=o.elements;n.element=e[0],"water"===WL.entity.type(n)&&r.push(o)}return _O.Singletons(t,aG.create(r,{parent:t}))}}function WO(){return function(e){const{inputStructure:t}=e,n=Vk.create(t),r=[];for(const o of t.units){if(0!==o.kind)continue;n.unit=o;const e=o.elements;if(n.element=e[0],"water"!==WL.entity.type(n)){if("polymer"===WL.entity.type(n)){const t=ty.transientSegments(o.model.atomicHierarchy.residueAtomSegments,e);let n=0;for(;t.hasNext;)n++,t.move();if(n>=8)continue}r.push(o)}}return _O.Singletons(t,aG.create(r,{parent:t}))}}function KO(){return function(e){const{inputStructure:t}=e,n=[];for(const r of t.units)1===r.kind&&n.push(r);return _O.Singletons(t,aG.create(n,{parent:t}))}}function JO(e,t,n){return{groupedUnits:e,ranges:t,set:n}}function ZO(e){return function(t){const n={hash:t.inputStructure.hashCode,elements:e};return _O.Sequence(t.inputStructure,[SO.toStructure(n,t.inputStructure)])}}!function(e){function t(e,t){return{kind:"singletons",source:e,structure:t}}function n(e,t){return{kind:"sequence",source:e,structures:t}}function r(e){return t(e,aG.Empty)}function o(e){return"singletons"===e.kind}function i(e){return o(e)?0===e.structure.units.length:0===e.structures.length}function a(e){return i(e)?aG.Empty:o(e)?e.structure:UO(e.source,e.structures)}function s(e,o,i){return 0===o.length?r(e):i?t(e,UO(e,o)):n(e,o)}e.Singletons=t,e.Sequence=n,e.Empty=r,e.isSingleton=o,e.isEmpty=i,e.structureCount=function(e){return o(e)?e.structure.elementCount:e.structures.length},e.unionStructure=a,e.toLociWithCurrentUnits=function(e){const t=[],{unitMap:n}=e.source;for(const r of a(e).units)r===n.get(r.id)?t[t.length]={unit:r,indices:ey.ofBounds(0,r.elements.length)}:t[t.length]={unit:r,indices:ey.ofSortedArray(Em.indicesOf(n.get(r.id).elements,r.elements))};return cG(e.source,t)},e.toLociWithSourceUnits=function(e){const t=[],{unitMap:n}=e.source;for(const r of a(e).units){const e=n.get(r.id);t[t.length]=e===r?{unit:e,indices:ey.ofBounds(0,e.elements.length)}:{unit:e,indices:ey.ofSortedArray(Em.indicesOf(e.elements,r.elements))}}return cG(e.source,t)};class l{add(e){const t=e.elementCount;0!==t&&(this.structures[this.structures.length]=e,1!==t&&(this.allSingletons=!1))}getSelection(){return s(this.source,this.structures,this.allSingletons)}constructor(e){this.source=e,this.structures=[],this.allSingletons=!0}}class c{add(e){const t=e.elementCount;0!==t&&this.uniqueSets.add(e)&&(this.structures[this.structures.length]=e,1!==t&&(this.allSingletons=!1))}getSelection(){return s(this.structure,this.structures,this.allSingletons)}constructor(e){this.structure=e,this.structures=[],this.allSingletons=!0,this.uniqueSets=ZD(aG.hashCode,aG.areUnitIdsAndIndicesEqual)}}e.LinearBuilder=function(e){return new l(e)},e.UniqueBuilder=function(e){return new c(e)},e.forEach=function(t,n){let r=0;if(e.isSingleton(t))for(const e of t.structure.units){const{elements:o}=e;for(let i=0,a=o.length;i<a;i++){n(aG.create([e.getChild(Em.ofSingleton(o[i]))],{parent:t.source}),r++)}}else for(const e of t.structures)n(e,r++)},e.withInputStructure=function(e,r){return o(e)?t(r,e.structure):n(r,e.structures)}}(_O||(_O={})),function(e){function t(e){const t=[];for(const o of e.elements){const{unit:e,indices:n}=o;if(0===ey.size(n))continue;const r=[],i=[];if(ey.isInterval(n))1===ey.size(n)?i.push(Gg.min(n)):r.push(Gg.min(n),Gg.max(n));else{let e=0;const t=n.length;for(;e<t;){const o=e;for(e++;e<t&&n[e-1]+1===n[e];)e++;const a=e;if(a-o>2)r.push(n[o],n[a-1]);else for(let e=o;e<a;e++)i[i.length]=n[e]}}t.push({unit:e,set:Em.ofSortedArray(i),ranges:JP.ofSortedRanges(r)})}const n=new Map;for(let o=0,i=t.length;o<i;++o){const e=t[o],r=Qh(Fh(e.ranges),Fh(e.set));if(n.has(r)){const{groupedUnits:t}=n.get(r);t.has(e.unit.invariantId)?t.get(e.unit.invariantId).push(e.unit.id):t.set(e.unit.invariantId,[e.unit.id])}else{const t=new Map;t.set(e.unit.invariantId,[e.unit.id]),n.set(r,{groupedUnits:t,set:e.set,ranges:e.ranges})}}const r=[];return n.forEach((e=>{const t=[];e.groupedUnits.forEach((e=>t.push(Em.ofUnsortedArray(e)))),t.sort(((e,t)=>e[0]-t[0])),r.push({groupedUnits:t,set:e.set,ranges:e.ranges})})),{hash:e.structure.hashCode,elements:r}}function n(e,t){const n=[];for(let r=0,o=e.length;r<o;++r){const o=e[r];t.unitMap.has(o)&&n.push(t.unitMap.get(o))}return n}function r(e){return FQ.internal.generator.bundleElement({groupedUnits:FQ.core.type.list(e.groupedUnits.map((e=>FQ.core.type.list(e)))),ranges:FQ.core.type.list(e.ranges),set:FQ.core.type.list(e.set)})}e.Empty={hash:-1,elements:[]},e.fromSubStructure=function(e,n){return t(_O.toLociWithSourceUnits(_O.Singletons(e,n)))},e.fromSelection=function(e){return t(_O.toLociWithSourceUnits(e))},e.fromLoci=t,e.toLoci=function(e,t){-1!==e.hash&&e.hash!==t.hashCode&&new Error("Bundle not compatible with given structure");const r=[];for(const o of e.elements)for(const e of o.groupedUnits){const i=n(e,t);if(0===i.length)continue;let a;if(0===o.ranges.length)a=o.set;else if(0===o.set.length)if(2===o.ranges.length)a=Gg.ofRange(o.ranges[0],o.ranges[1]);else{const e=new Int32Array(JP.size(o.ranges));JP.forEach(o.ranges,((t,n)=>e[n]=t)),a=Em.ofSortedArray(e)}else{const e=JP.size(o.ranges),t=new Int32Array(o.set.length+e);JP.forEach(o.ranges,((e,n)=>t[n]=e)),t.set(o.set,e),a=Em.ofUnsortedArray(t)}for(const e of i)r.push({unit:e,indices:a})}return cG(t,r)},e.toStructure=function(e,t){-1!==e.hash&&e.hash!==t.hashCode&&new Error("Bundle not compatible with given structure");const r=[];for(const o of e.elements)for(const e of o.groupedUnits){const i=n(e,t);if(0===i.length)continue;const a=i[0].elements,s=JP.size(o.ranges),l=o.set.length,c=new Int32Array(l+s);let u;if(0===s){for(let e=0,t=l;e<t;++e)c[e]=a[o.set[e]];u=Em.ofSortedArray(c)}else if(0===l)JP.forEach(o.ranges,((e,t)=>c[t]=a[e])),u=Em.ofSortedArray(c);else if(Em.min(o.set)>JP.max(o.ranges)){JP.forEach(o.ranges,((e,t)=>c[t]=a[e]));for(let e=0,t=l;e<t;++e)c[e+s]=a[o.set[e]];u=Em.ofSortedArray(c)}else if(JP.min(o.ranges)>Em.max(o.set)){for(let e=0,t=l;e<t;++e)c[e]=a[o.set[e]];JP.forEach(o.ranges,((e,t)=>c[t+l]=a[e])),u=Em.ofSortedArray(c)}else{JP.forEach(o.ranges,((e,t)=>c[t]=a[e]));for(let e=0,t=l;e<t;++e)c[e+s]=a[o.set[e]];u=Em.ofUnsortedArray(c)}for(const e of i)r.push(e.getChild(u))}return aG.create(r,{parent:t})},e.toExpression=function(e){return FQ.internal.generator.bundle({elements:FQ.core.type.list(e.elements.map(r))})},e.areEqual=function(e,t){if(e.elements.length!==t.elements.length)return!1;for(let n=0,r=e.elements.length;n<r;++n){const r=e.elements[n],o=t.elements[n];if(r.groupedUnits.length!==o.groupedUnits.length)return!1;for(let e=0,t=o.groupedUnits.length;e<t;++e)if(!Em.areEqual(r.groupedUnits[e],o.groupedUnits[e]))return!1;if(!Em.areEqual(r.set,o.set))return!1;if(!JP.areEqual(r.ranges,o.ranges))return!1}return!0}}(SO||(SO={}));class $O{pushCurrentElement(){return this.currentElementStack[this.currentElementStack.length]=this.element,this.element=Vk.create(void 0),this.element}popCurrentElement(){this.element=this.currentElementStack.pop()}pushCurrentBond(){return this.atomicBond&&this.currentAtomicBondStack.push(this.atomicBond),this.atomicBond=new eF,this.atomicBond}popCurrentBond(){this.currentAtomicBondStack.length>0?this.atomicBond=this.currentAtomicBondStack.pop():this.atomicBond=void 0}pushCurrentStructure(){this.currentStructure&&this.currentStructureStack.push(this.currentStructure)}popCurrentStructure(){this.currentStructureStack.length?this.currentStructure=this.currentStructureStack.pop():this.currentStructure=void 0}pushInputStructure(e){this.inputStructureStack.push(this.inputStructure),this.inputStructure=e}popInputStructure(){if(0===this.inputStructureStack.length)throw new Error("Must push before pop.");this.inputStructure=this.inputStructureStack.pop()}throwIfTimedOut(){if(0!==this.timeoutMs&&vp()-this.timeCreated>this.timeoutMs)throw new Error(`The query took too long to execute (> ${this.timeoutMs/1e3}s).`)}tryGetCurrentSelection(){if(!this.currentSelection)throw new Error("The current selection is not assigned.");return this.currentSelection}constructor(e,t){this.currentElementStack=[],this.currentAtomicBondStack=[],this.currentStructureStack=[],this.inputStructureStack=[],this.timeCreated=vp(),this.element=Vk.create(void 0),this.currentStructure=void 0,this.atomicBond=new eF,this.currentSelection=void 0,this.inputStructure=e,this.timeoutMs=t&&t.timeoutMs||0,this.currentSelection=t&&t.currentSelection}}class eF{constructor(){this.a=Vk.create(void 0),this.aIndex=0,this.b=Vk.create(void 0),this.bIndex=0,this.type=0,this.order=0,this.key=-1,this.testFn=qO}setStructure(e){this.a.structure=e,this.b.structure=e}setTestFn(e){this.testFn=e||qO}test(e,t){return!!this.testFn(e)||!!t&&(this.swap(),this.testFn(e))}swap(){const e=this.aIndex;this.aIndex=this.bIndex,this.bIndex=e;const t=this.a.unit;this.a.unit=this.b.unit,this.b.unit=t;const n=this.a.element;this.a.element=this.b.element,this.b.element=n}get length(){return Vk.distance(this.a,this.b)}}!function(e){e.run=function(e,t,n){return e(new $O(t,n))}}(DO||(DO={}));class tF{add(e){e.elementCount&&(1!==e.elementCount&&(this.allSingletons=!1),this.set.add(e)&&(this.structures[this.structures.length]=e))}getSelection(){return this.allSingletons?_O.Singletons(this.source,UO(this.source,this.structures)):_O.Sequence(this.source,this.structures)}constructor(e){this.source=e,this.set=ZD(aG.hashCode,aG.areUnitIdsAndIndicesEqual),this.structures=[],this.allSingletons=!0}}class nF{add(e,t,n){let r=this.builderMap.get(e);r||(r=this.source.subsetBuilder(!0),this.builders[this.builders.length]=r,this.builderMap.set(e,r)),r.addToUnit(t,n)}allSingletons(){for(let e=0,t=this.builders.length;e<t;e++)if(this.builders[e].elementCount>1)return!1;return!0}singletonSelection(){const e=this.source.subsetBuilder(!0),t=Vk.create(this.source);for(let n=0,r=this.builders.length;n<r;n++)this.builders[n].setSingletonLocation(t),e.addToUnit(t.unit.id,t.element);return _O.Singletons(this.source,e.getStructure())}fullSelection(){const e=new Array(this.builders.length);for(let t=0,n=this.builders.length;t<n;t++)e[t]=this.builders[t].getStructure();return _O.Sequence(this.source,e)}getSelection(){return 0===this.builders.length?_O.Empty(this.source):this.allSingletons()?this.singletonSelection():this.fullSelection()}constructor(e){this.source=e,this.builders=[],this.builderMap=new Map}}const rF=e=>_O.Sequence(e.inputStructure,[]),oF=e=>_O.Singletons(e.inputStructure,e.inputStructure);function iF(e){return cF({...e,groupBy:e=>WL.residue.key(e.element)})}function aF(e){return cF({...e,groupBy:e=>WL.chain.key(e.element)})}function sF(e){return!0}function lF(e){return 0}function cF(e){if(!e||!e.atomTest&&!e.residueTest&&!e.chainTest&&!e.entityTest&&!e.unitTest&&!e.groupBy)return oF;if(e.atomTest&&!e.residueTest&&!e.chainTest&&!e.entityTest&&!e.unitTest&&!e.groupBy)return t=e.atomTest,function(e){const{inputStructure:n}=e,{units:r}=n,o=e.pushCurrentElement(),i=n.subsetBuilder(!0);o.structure=n;for(const a of r){o.unit=a;const n=a.elements;i.beginUnit(a.id);for(let r=0,a=n.length;r<a;r++)o.element=n[r],t(e)&&i.addElement(o.element);i.commitUnit(),e.throwIfTimedOut()}return e.popCurrentElement(),_O.Singletons(n,i.getStructure())};var t;const n={unitTest:e.unitTest||sF,entityTest:e.entityTest||sF,chainTest:e.chainTest||sF,residueTest:e.residueTest||sF,atomTest:e.atomTest||sF,groupBy:e.groupBy||lF};return e.groupBy?function(e){let{unitTest:t,entityTest:n,chainTest:r,residueTest:o,atomTest:i,groupBy:a}=e;return function(e){const{inputStructure:s}=e,{units:l}=s,c=e.pushCurrentElement(),u=new nF(s);c.structure=s;for(const d of l){if(c.unit=d,!t(e))continue;const{elements:s,model:l}=d;if(0===d.kind){const t=ty.transientSegments(l.atomicHierarchy.chainAtomSegments,s),A=ty.transientSegments(l.atomicHierarchy.residueAtomSegments,s);for(;t.hasNext;){const l=t.move();if(c.element=s[l.start],n(e)&&r(e))for(A.setSegment(l);A.hasNext;){const t=A.move();if(c.element=s[t.start],o(e))for(let n=t.start,r=t.end;n<r;n++)c.element=s[n],i(e)&&u.add(a(e),d.id,c.element)}}}else{const{chainElementSegments:t}=1===d.kind?l.coarseHierarchy.spheres:l.coarseHierarchy.gaussians,i=ty.transientSegments(t,s);for(;i.hasNext;){const t=i.move();if(c.element=s[t.start],n(e)&&r(e))for(let n=t.start,r=t.end;n<r;n++)c.element=s[n],o(e)&&u.add(a(e),d.id,c.element)}}e.throwIfTimedOut()}return e.popCurrentElement(),u.getSelection()}}(n):function(e){let{unitTest:t,entityTest:n,chainTest:r,residueTest:o,atomTest:i}=e;return function(e){const{inputStructure:a}=e,{units:s}=a,l=e.pushCurrentElement(),c=a.subsetBuilder(!0),u=o===sF&&i===sF,d=i===sF;l.structure=a;for(const A of s){if(l.unit=A,!t(e))continue;const{elements:a,model:s}=A;if(c.beginUnit(A.id),0===A.kind){const t=ty.transientSegments(A.model.atomicHierarchy.chainAtomSegments,a),s=ty.transientSegments(A.model.atomicHierarchy.residueAtomSegments,a);for(;t.hasNext;){const A=t.move();if(l.element=a[A.start],n(e)&&r(e))if(u)c.addElementRange(a,A.start,A.end);else for(s.setSegment(A);s.hasNext;){const t=s.move();if(l.element=a[t.start],o(e))if(d)c.addElementRange(a,t.start,t.end);else for(let n=t.start,r=t.end;n<r;n++)l.element=a[n],i(e)&&c.addElement(l.element)}}}else{const{chainElementSegments:t}=1===A.kind?s.coarseHierarchy.spheres:s.coarseHierarchy.gaussians,i=ty.transientSegments(t,a);for(;i.hasNext;){const t=i.move();if(l.element=a[t.start],n(e)&&r(e))if(u)c.addElementRange(a,t.start,t.end);else for(let n=t.start,r=t.end;n<r;n++)l.element=a[n],o(e)&&c.addElement(l.element)}}c.commitUnit(),e.throwIfTimedOut()}return e.popCurrentElement(),_O.Singletons(a,c.getStructure())}}(n)}function uF(e,t,n){const r=new Int32Array(t.length);for(let o=0,i=t.length;o<i;o++)r[o]=e.elements[t[o]];return aG.create([e.getChild(Em.ofSortedArray(r))],{parent:n})}function dF(e,t){return function(n){const{units:r}=n.inputStructure,o=_O.LinearBuilder(n.inputStructure);if(e&&0!==e.length){const i=VD.create();for(let t=0;t<e.length;t++)VD.add(i,e[t],e[t]);for(const e of r){if(!BO.isAtomic(e))continue;const r=e.rings;for(const a of i.array)if(r.byFingerprint.has(a))for(const i of r.byFingerprint.get(a))t&&!r.aromaticRings.includes(i)||o.add(uF(e,r.all[i],n.inputStructure))}}else for(const e of r)if(BO.isAtomic(e))if(t)for(const t of e.rings.aromaticRings)o.add(uF(e,e.rings.all[t],n.inputStructure));else for(const t of e.rings.all)o.add(uF(e,t,n.inputStructure));return o.getSelection()}}function AF(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r){const o=e(r);if(0===_O.structureCount(o))return o;const i=n?VO(r.inputStructure,_O.unionStructure(o)):_O.unionStructure(o);if(0===i.elementCount)return _O.Empty(r.inputStructure);r.throwIfTimedOut(),r.pushInputStructure(i);const a=t(r);return r.popInputStructure(),_O.withInputStructure(a,r.inputStructure)}}function fF(e){return function(t){const n=t.inputStructure,r=n.interUnitBonds,o=_O.UniqueBuilder(t.inputStructure);t.pushCurrentBond();const i=t.atomicBond;i.setTestFn(e),i.setStructure(n);for(const e of n.units){if(0!==e.kind)continue;const{offset:r,b:a,edgeProps:{flags:s,order:l,key:c}}=e.bonds;i.a.unit=e,i.b.unit=e;for(let u=0,d=e.elements.length;u<d;u++){i.aIndex=u,i.a.element=e.elements[u];for(let d=r[u],A=r[u+1];d<A;d++)if(i.bIndex=a[d],i.b.element=e.elements[a[d]],i.type=s[d],i.order=l[d],i.key=c[d],i.test(t,!1)){const t=n.subsetBuilder(!1);t.beginUnit(e.id),t.addElement(i.a.element),t.addElement(i.b.element),t.commitUnit(),o.add(t.getStructure())}}}for(const e of r.edges)if(i.a.unit=n.unitMap.get(e.unitA),i.a.element=i.a.unit.elements[e.indexA],i.aIndex=e.indexA,i.b.unit=n.unitMap.get(e.unitB),i.b.element=i.b.unit.elements[e.indexB],i.bIndex=e.indexB,i.order=e.props.order,i.type=e.props.flag,i.key=e.props.key,i.test(t,!1)){const e=n.subsetBuilder(!1);e.addToUnit(i.a.unit.id,i.a.element),e.addToUnit(i.b.unit.id,i.b.element),o.add(e.getStructure())}return t.popCurrentBond(),o.getSelection()}}class pF{addToUnit(e,t){const n=this.unitMap.get(e);if(n)VD.add(n,t,t)&&this.elementCount++;else{const n=VD.create();VD.add(n,t,t),this.unitMap.set(e,n),this.ids[this.ids.length]=e,this.elementCount++}}has(e,t){const n=this.unitMap.get(e);return!!n&&VD.has(n,t)}beginUnit(e){this.parentId=e,this.unitMap.has(e)?this.currentUnit=this.unitMap.get(e):this.currentUnit=this.currentUnit.array.length>0?VD.create():this.currentUnit}addElement(e){VD.add(this.currentUnit,e,e)&&this.elementCount++}commitUnit(){0===this.currentUnit.array.length||this.unitMap.has(this.parentId)||(this.ids[this.ids.length]=this.parentId,this.unitMap.set(this.parentId,this.currentUnit),this.parentId=-1)}getStructure(){if(this.isEmpty)return aG.Empty;const e=[];wh(this.ids);const t=FU.UnitEquivalenceBuilder();for(let n=0,r=this.ids.length;n<r;n++){const r=this.ids[n],o=this.parent.unitMap.get(r),i=this.unitMap.get(r).array,a=i.length;if(i.length===o.elements.length){e[e.length]=o,t.add(o.id,o);continue}a>1&&wh(i);let s=o.getChild(Em.ofSortedArray(i));const l=t.add(s.id,s);s!==l&&(s=l.applyOperator(s.id,s.conformation.operator,!0)),e[e.length]=s}return aG.create(e,{parent:this.parent})}get isEmpty(){return 0===this.elementCount}constructor(e){this.parent=e,this.ids=[],this.unitMap=ny.Mutable(),this.parentId=-1,this.currentUnit=VD.create(),this.elementCount=0}}function hF(e){return{data:e,position:0,length:e.length,lineNumber:1,tokenStart:0,tokenEnd:0}}var gF,mF;function yF(e){for(;e.position<e.length;)switch(e.data.charCodeAt(e.position)){case 9:case 10:case 13:case 32:return void(e.tokenEnd=e.position);default:++e.position}e.tokenEnd=e.position}function vF(e){return!(e.length-e.position<2)&&(39===e.data.charCodeAt(e.position+1)&&39===e.data.charCodeAt(e.position+2))}function bF(e,t,n){let r;const o=n-t,i=e.tokenStart-t,a=e.tokenEnd-e.tokenStart;if(a<o)return!1;for(r=t;r<n;++r)if(e.data.charCodeAt(r)!==e.data.charCodeAt(r+i))return!1;return o===a||46===e.data.charCodeAt(r+i)}function CF(e){let t;for(t=e.tokenStart;t<e.tokenEnd;++t)if(46===e.data.charCodeAt(t))return t;return t}function IF(e,t){return e.data.substring(e.tokenStart,t)}function EF(e){return e.data.substring(e.tokenStart,e.tokenEnd)}function xF(e){const t=function(e){let t=10;for(;e.position<e.length;){const n=e.data.charCodeAt(e.position);switch(n){case 9:case 32:t=n,++e.position;break;case 10:13!==t&&++e.lineNumber,t=n,++e.position;break;case 13:t=n,++e.position,++e.lineNumber;break;default:return t}}return t}(e);if(e.position>=e.length)return void(e.tokenType=6);e.tokenStart=e.position,e.tokenEnd=e.position,e.isEscaped=!1;const n=e.data.charCodeAt(e.position);switch(n){case 35:!function(e){for(;e.position<e.length;){const t=e.data.charCodeAt(e.position);if(10===t||13===t)return;++e.position}}(e),e.tokenType=5;break;case 39:if(vF(e)){!function(e){for(e.position+=3;e.position<e.length;){if(39===e.data.charCodeAt(e.position)&&vF(e))return e.tokenStart+=3,e.tokenEnd=e.position,e.isEscaped=!0,void(e.position+=3);++e.position}e.tokenEnd=e.position}(e),e.tokenType=3;break}case 34:!function(e,t){let n,r;for(++e.position;e.position<e.length;)if(r=e.data.charCodeAt(e.position),r===t)switch(n=e.data.charCodeAt(e.position+1),n){case 9:case 10:case 13:case 32:return e.tokenStart++,e.tokenEnd=e.position,e.isEscaped=!0,void++e.position;default:if(void 0===n)return e.tokenStart++,e.tokenEnd=e.position,e.isEscaped=!0,void++e.position;++e.position}else{if(10===r||13===r)return void(e.tokenEnd=e.position);++e.position}e.tokenEnd=e.position}(e,n),e.tokenType=3;break;case 59:10===t||13===t?function(e){let t,n=59,r=e.position+1;for(;r<e.length;){if(t=e.data.charCodeAt(r),59===t&&(10===n||13===n)){for(e.position=r+1,e.tokenStart++,r--,t=e.data.charCodeAt(r);10===t||13===t;)r--,t=e.data.charCodeAt(r);return e.tokenEnd=r+1,void(e.isEscaped=!0)}(13===t||10===t&&13!==n)&&e.lineNumber++,n=t,++r}e.position=r}(e):yF(e),e.tokenType=3;break;default:e.isImportGet?function(e){for(;e.position<e.length;){if(93===e.data.charCodeAt(e.position))return++e.position,e.tokenEnd=e.position,void(e.isImportGet=!1);++e.position}}(e):yF(e),e.isEscaped?e.tokenType=3:95===e.data.charCodeAt(e.tokenStart)?(e.inSaveFrame&&function(e){return e.tokenEnd-e.tokenStart===11&&105===e.data.charCodeAt(e.tokenStart+1)&&109===e.data.charCodeAt(e.tokenStart+2)&&112===e.data.charCodeAt(e.tokenStart+3)&&111===e.data.charCodeAt(e.tokenStart+4)&&114===e.data.charCodeAt(e.tokenStart+5)&&116===e.data.charCodeAt(e.tokenStart+6)&&46===e.data.charCodeAt(e.tokenStart+7)&&103===e.data.charCodeAt(e.tokenStart+8)&&101===e.data.charCodeAt(e.tokenStart+9)&&116===e.data.charCodeAt(e.tokenStart+10)}(e)&&(e.isImportGet=!0),e.tokenType=4):e.tokenEnd-e.tokenStart>=5&&95===e.data.charCodeAt(e.tokenStart+4)?!function(e){let t=e.data.charCodeAt(e.tokenStart);return(68===t||100===t)&&(t=e.data.charCodeAt(e.tokenStart+1),(65===t||97===t)&&(t=e.data.charCodeAt(e.tokenStart+2),(84===t||116===t)&&(t=e.data.charCodeAt(e.tokenStart+3),65===t||97===t)))}(e)?!function(e){let t=e.data.charCodeAt(e.tokenStart);return(83===t||115===t)&&(t=e.data.charCodeAt(e.tokenStart+1),(65===t||97===t)&&(t=e.data.charCodeAt(e.tokenStart+2),(86===t||118===t)&&(t=e.data.charCodeAt(e.tokenStart+3),69===t||101===t)))}(e)?!function(e){if(e.tokenEnd-e.tokenStart!==5)return!1;let t=e.data.charCodeAt(e.tokenStart);return(76===t||108===t)&&(t=e.data.charCodeAt(e.tokenStart+1),(79===t||111===t)&&(t=e.data.charCodeAt(e.tokenStart+2),(79===t||111===t)&&(t=e.data.charCodeAt(e.tokenStart+3),80===t||112===t)))}(e)?e.tokenType=3:e.tokenType=2:e.tokenType=1:e.tokenType=0:e.tokenType=3}}function BF(e){for(xF(e);5===e.tokenType;)xF(e)}function wF(){return{categoryNames:[],categoryData:Object.create(null)}}function _F(e,t){const n=Object.create(null);for(const r of e){const e=t[r];n[r]=lQ(e.name,e.rowCount,e.fieldNames,e.fields)}return n}function SF(e,t,n){return sQ(e.categoryNames,_F(e.categoryNames,e.categoryData),t,n)}function DF(e,t){return sQ(e.categoryNames,_F(e.categoryNames,e.categoryData),t)}function TF(e,t,n,r,o){if(t in e.categoryData){const n=e.categoryData[t];n.fieldNames.push(...r),Object.assign(n.fields,o)}else e.categoryData[t]={name:t,rowCount:n,fieldNames:r,fields:o},e.categoryNames.push(t)}function kF(e,t){const n=e.tokenStart,r=CF(e),o=IF(e,r),i=Object.create(null),a=[];let s=!0;for(;s;){if(4!==e.tokenType||!bF(e,n,r)){s=!1;break}const t=EF(e).substring(o.length+1);if(BF(e),3!==e.tokenType)return{hasError:!0,errorLine:e.lineNumber,errorMessage:"Expected value."};i[t]=zk.ofTokens({data:e.data,indices:[e.tokenStart,e.tokenEnd],count:1}),a[a.length]=t,BF(e)}return TF(t,o.substr(1),1,a,i),{hasError:!1,errorLine:0,errorMessage:""}}function QF(e,t){const{tokenizer:n,tokens:r,fieldCount:o}=t;let i=t.tokenCount,a=0;for(;3===n.tokenType&&a<e;)gF.add(r[i++%o],n.tokenStart,n.tokenEnd),BF(n),a++;return t.tokenCount=i,a}function MF(e,t){return e.update({message:"Parsing...",current:t.tokenizer.position,max:t.tokenizer.data.length})}async function RF(e,t){const n=e.lineNumber;BF(e);const r=IF(e,CF(e)),o=function(e){let t;for(t=e.tokenStart;t<e.tokenEnd;++t)if(46===e.data.charCodeAt(t))return!1;return!0}(e),i=[];for(;4===e.tokenType;)i[i.length]=o?EF(e):EF(e).substring(r.length+1),BF(e);const a="_atom_site"===r?e.data.length/100|0:32,s=[],l=i.length;for(let d=0;d<l;d++)s[d]=gF.create(e.data,a);const c={fieldCount:l,tokenCount:0,tokenizer:e,tokens:s};if(await Mw(e.runtimeCtx,1e6,c,QF,MF),c.tokenCount%l!==0)return{hasError:!0,errorLine:e.lineNumber,errorMessage:`The number of values for loop starting at line ${n} is not a multiple of the number of columns.`};const u=c.tokenCount/l|0;if(o)for(let d=0;d<l;d++){const e={"":zk.ofTokens(s[d])};TF(t,i[d].substr(1),u,[""],e)}else{const e=Object.create(null);for(let t=0;t<l;t++)e[i[t]]=zk.ofTokens(s[t]);TF(t,r.substr(1),u,i,e)}return{hasError:!1,errorLine:0,errorMessage:""}}function PF(e,t){return mF.error(t,e)}async function OF(e,t){const n=[],r=function(e,t){return{data:e,length:e.length,position:0,tokenStart:0,tokenEnd:0,tokenType:6,lineNumber:1,isEscaped:!1,isImportGet:!1,inSaveFrame:!1,runtimeCtx:t}}(e,t);let o="",i=wF(),a=[],s=wF();const l=function(e,t,n){return{categoryNames:e,header:n,categories:t}}(s.categoryNames,_F(s.categoryNames,s.categoryData),"");let c="";for(t.update({message:"Parsing...",current:0,max:e.length}),BF(r);6!==r.tokenType;){const t=r.tokenType;if(0===t){if(r.inSaveFrame)return PF(r.lineNumber,"Unexpected data block inside a save frame.");i.categoryNames.length>0&&n.push(SF(i,o,a)),o=e.substring(r.tokenStart+5,r.tokenEnd),i=wF(),a=[],BF(r)}else if(1===t){if(r.tokenEnd-r.tokenStart===5)s.categoryNames.length>0&&(a[a.length]=DF(s,c)),r.inSaveFrame=!1;else{if(r.inSaveFrame)return PF(r.lineNumber,"Save frames cannot be nested.");r.inSaveFrame=!0,c=e.substring(r.tokenStart+5,r.tokenEnd),s=wF()}BF(r)}else if(2===t){const e=await RF(r,r.inSaveFrame?s:i);if(e.hasError)return PF(e.errorLine,e.errorMessage)}else{if(4!==t)return console.log(r.tokenType,hF.getTokenString(r)),PF(r.lineNumber,"Unexpected token. Expected data_, loop_, or data name.");{const e=kF(r,r.inSaveFrame?s:i);if(e.hasError)return PF(e.errorLine,e.errorMessage)}}}return r.inSaveFrame?PF(r.lineNumber,`Unfinished save frame (${l.header}).`):((i.categoryNames.length>0||a.length>0)&&n.push(SF(i,o,a)),function(e){return mF.success(e)}(aQ(n)))}function FF(e){return Tw.create("Parse CIF",(async t=>await OF(e,t)))}function NF(e){return zF({buffer:e,offset:0,dataView:new DataView(e.buffer)})}function LF(e,t){const n={};for(let r=0;r<t;r++){n[zF(e)]=zF(e)}return n}function UF(e,t){const n=new Uint8Array(t),r=e.offset;for(let o=0;o<t;o++)n[o]=e.buffer[o+r];return e.offset+=t,n}function GF(e,t){const n=aw(e.buffer,e.offset,t);return e.offset+=t,n}function jF(e,t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=zF(e);return n}function zF(e){const t=e.buffer[e.offset];let n,r;if(0===(128&t))return e.offset++,t;if(128===(240&t))return r=15&t,e.offset++,LF(e,r);if(144===(240&t))return r=15&t,e.offset++,jF(e,r);if(160===(224&t))return r=31&t,e.offset++,GF(e,r);if(224===(224&t))return n=e.dataView.getInt8(e.offset),e.offset++,n;switch(t){case 192:return e.offset++,null;case 194:return e.offset++,!1;case 195:return e.offset++,!0;case 196:return r=e.dataView.getUint8(e.offset+1),e.offset+=2,UF(e,r);case 197:return r=e.dataView.getUint16(e.offset+1),e.offset+=3,UF(e,r);case 198:return r=e.dataView.getUint32(e.offset+1),e.offset+=5,UF(e,r);case 202:return n=e.dataView.getFloat32(e.offset+1),e.offset+=5,n;case 203:return n=e.dataView.getFloat64(e.offset+1),e.offset+=9,n;case 204:return n=e.buffer[e.offset+1],e.offset+=2,n;case 205:return n=e.dataView.getUint16(e.offset+1),e.offset+=3,n;case 206:return n=e.dataView.getUint32(e.offset+1),e.offset+=5,n;case 208:return n=e.dataView.getInt8(e.offset+1),e.offset+=2,n;case 209:return n=e.dataView.getInt16(e.offset+1),e.offset+=3,n;case 210:return n=e.dataView.getInt32(e.offset+1),e.offset+=5,n;case 217:return r=e.dataView.getUint8(e.offset+1),e.offset+=2,GF(e,r);case 218:return r=e.dataView.getUint16(e.offset+1),e.offset+=3,GF(e,r);case 219:return r=e.dataView.getUint32(e.offset+1),e.offset+=5,GF(e,r);case 220:return r=e.dataView.getUint16(e.offset+1),e.offset+=3,jF(e,r);case 221:return r=e.dataView.getUint32(e.offset+1),e.offset+=5,jF(e,r);case 222:return r=e.dataView.getUint16(e.offset+1),e.offset+=3,LF(e,r);case 223:return r=e.dataView.getUint32(e.offset+1),e.offset+=5,LF(e,r)}throw new Error("Unknown type 0x"+t.toString(16))}function HF(e){const t=Object.create(null),n=Object.create(null);for(const r of e.columns)t[r.name]=r;return{rowCount:e.rowCount,name:e.name.substr(1),fieldNames:e.columns.map((e=>e.name)),getField(e){const r=t[e];if(r)return n[e]||(n[e]=function(e){const t=e.mask?TR(e.mask):void 0,n=TR(e.data),r=Gh(n),o=r?t?e=>0===t[e]?""+n[e]:"":e=>""+n[e]:t?e=>0===t[e]?n[e]:"":e=>n[e],i=r?e=>n[e]:e=>{const t=n[e];return rg(t,0,t.length)},a=r?e=>n[e]:e=>{const t=n[e];return ig(t,0,t.length)},s=t?e=>t[e]:e=>0,l=n.length;return{__array:n,binaryEncoding:e.data.encoding,isDefined:!0,rowCount:l,str:o,int:i,float:a,valueKind:s,areValuesEqual:(e,t)=>n[e]===n[t],toStringArray:e=>Uh(l,o,e),toIntArray:r?e=>jh(n,e):e=>Uh(l,i,e),toFloatArray:r?e=>jh(n,e):e=>Uh(l,a,e)}}(r)),n[e]}}}function VF(e){return Tw.create("Parse BinaryCIF",(async t=>{const n=[0,3];try{const t=NF(e);if(!function(e,t){for(let n=0;n<2;n++)if(e[n]>t[n])return!1;return!0}(n,t.version.match(/(\d)\.(\d)\.\d/).slice(1).map((e=>+e))))return mF.error(`Unsupported format version. Current ${t.version}, required ${n.join(".")}.`);const r=aQ(t.dataBlocks.map((e=>{const t=Object.create(null);for(const n of e.categories)t[n.name.substr(1)]=HF(n);return sQ(e.categories.map((e=>e.name.substr(1))),t,e.header)})));return mF.success(r)}catch(l0e){return mF.error(""+l0e)}}))}!function(e){function t(e){return e.data.substring(e.tokenStart,e.tokenEnd)}function n(e){const{data:t}=e;for(;e.position<e.length;)switch(t.charCodeAt(e.position)){case 10:return e.tokenEnd=e.position,++e.position,++e.lineNumber,!0;case 13:return e.tokenEnd=e.position,++e.position,++e.lineNumber,10===t.charCodeAt(e.position)&&++e.position,!0;default:++e.position}return e.tokenEnd=e.position,e.tokenStart!==e.tokenEnd}function r(e){return e.tokenStart=e.position,n(e)}function o(e,t,n){let o=0;for(let i=0;i<t;i++){if(!r(e))return o;gF.addUnchecked(n,e.tokenStart,e.tokenEnd),o++}return o}function i(e,t,n){const{data:r}=e;let o=t,i=n-1,a=r.charCodeAt(o);for(;(9===a||32===a)&&o<=i;)a=r.charCodeAt(++o);for(a=r.charCodeAt(i);(9===a||32===a)&&i>=o;)a=r.charCodeAt(--i);return e.tokenStart=o,e.tokenEnd=i+1,e.position=n,e}e.getTokenString=t,e.reset=function(e){e.position=0,e.lineNumber=1,e.tokenStart=0,e.tokenEnd=0},e.eatLine=n,e.markStart=function(e){e.tokenStart=e.position},e.markLine=r,e.readLine=function(e){return r(e),t(e)},e.readLineTrim=function(e){r(e);const n=e.position;return i(e,e.tokenStart,e.tokenEnd),e.position=n,t(e)},e.markLines=function(e,t){const n=gF.create(e.data,2*t);return o(e,t,n),n},e.readLines=function(t,n){const r=[];for(let o=0;o<n;o++)r.push(e.readLine(t));return r},e.readLinesAsync=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e5;const i=gF.create(e.data,2*t);let a=0;return await Mw(n,r,e,((e,n)=>{const r=Math.min(t-a,e);return o(n,r,i),a+=r,r}),((e,t)=>e.update({message:"Parsing...",current:t.position,max:t.length}))),i},e.readAllLines=function(t){const n=e(t),o=gF.create(n.data,Math.max(t.length/80,2));for(;r(n);)gF.add(o,n.tokenStart,n.tokenEnd);return o},e.readAllLinesAsync=async function(t,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e5;const i=e(t),a=gF.create(i.data,Math.max(t.length/80,2));return await Mw(n,o,i,((e,t)=>(function(e,t,n){let o=0;for(let i=0;i<t;i++){if(!r(e))return o;gF.add(n,e.tokenStart,e.tokenEnd),o++}}(t,e,a),t.position<t.length?e:0)),((e,t)=>e.update({message:"Parsing...",current:t.position,max:t.length}))),a},e.eatValue=function(e){for(;e.position<e.length;)switch(e.data.charCodeAt(e.position)){case 9:case 10:case 13:case 32:return void(e.tokenEnd=e.position);default:++e.position}e.tokenEnd=e.position},e.skipWhitespace=function(e){let t=-1;for(;e.position<e.length;){const n=e.data.charCodeAt(e.position);switch(n){case 9:case 32:t=n,++e.position;break;case 10:13!==t&&++e.lineNumber,t=n,++e.position;break;case 13:t=n,++e.position,++e.lineNumber;break;default:return t}}return t},e.trim=i}(hF||(hF={})),function(e){function t(e,t,n){const r=e;r.offset>r.indicesLenMinus2&&function(e){const t=new Uint32Array(1.61*e.indices.length|0);t.set(e.indices),e.indices=t,e.indicesLenMinus2=t.length-2|0}(r),r.indices[r.offset++]=t,r.indices[r.offset++]=n,e.count++}e.add=t,e.addToken=function(e,n){t(e,n.tokenStart,n.tokenEnd)},e.addUnchecked=function(e,t,n){e.indices[e.offset++]=t,e.indices[e.offset++]=n,e.count++},e.create=function(e,t){return{data:e,indicesLenMinus2:(t=Math.max(10,t))-2|0,count:0,offset:0,indices:new Uint32Array(t)}}}(gF||(gF={})),function(e){e.error=function(e){return new t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)},e.success=function(e){return new n(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[])};class t{toString(){return this.line>=0?`[Line ${this.line}] ${this.message}`:this.message}constructor(e,t){this.message=e,this.line=t,this.isError=!0}}e.Error=t;class n{constructor(e,t){this.result=e,this.warnings=t,this.isError=!1}}e.Success=n}(mF||(mF={}));var qF=ag.Schema;const YF=qF.str,XF=qF.float,WF=qF.List,KF=qF.lstr,JF=qF.Aliased,ZF=qF.int,$F=qF.coord,eN={chem_comp:{formula:YF,formula_weight:XF,id:YF,mon_nstd_parent_comp_id:WF(",",(e=>e)),name:YF,one_letter_code:YF,three_letter_code:YF,type:JF(KF),pdbx_synonyms:WF(";",(e=>e)),pdbx_type:YF,pdbx_ambiguous_flag:YF,pdbx_replaced_by:YF,pdbx_replaces:YF,pdbx_formal_charge:ZF,pdbx_model_coordinates_details:YF,pdbx_model_coordinates_db_code:YF,pdbx_ideal_coordinates_details:YF,pdbx_ideal_coordinates_missing_flag:JF(KF),pdbx_model_coordinates_missing_flag:JF(KF),pdbx_initial_date:YF,pdbx_modified_date:YF,pdbx_release_status:JF(YF),pdbx_processing_site:JF(YF)},chem_comp_atom:{alt_atom_id:YF,atom_id:YF,charge:ZF,model_Cartn_x:$F,model_Cartn_y:$F,model_Cartn_z:$F,comp_id:YF,type_symbol:YF,pdbx_align:ZF,pdbx_ordinal:ZF,pdbx_model_Cartn_x_ideal:$F,pdbx_model_Cartn_y_ideal:$F,pdbx_model_Cartn_z_ideal:$F,pdbx_stereo_config:JF(KF),pdbx_aromatic_flag:JF(KF),pdbx_leaving_atom_flag:JF(KF)},chem_comp_bond:{atom_id_1:YF,atom_id_2:YF,comp_id:YF,value_order:JF(KF),pdbx_ordinal:ZF,pdbx_stereo_config:JF(KF),pdbx_aromatic_flag:JF(KF)},pdbx_chem_comp_descriptor:{comp_id:YF,descriptor:YF,type:JF(KF),program:YF,program_version:YF},pdbx_chem_comp_identifier:{comp_id:YF,identifier:YF,type:JF(YF),program:YF,program_version:YF}};var tN=ag.Schema;const nN=tN.str,rN=tN.float,oN=tN.lstr,iN=tN.Aliased,aN=tN.int,sN={pdbx_reference_molecule:{prd_id:nN,formula_weight:rN,formula:nN,type:iN(oN),type_evidence_code:nN,class:iN(oN),class_evidence_code:nN,name:nN,represent_as:iN(oN),chem_comp_id:nN,compound_details:nN,description:nN,representative_PDB_id_code:nN,release_status:iN(oN),replaces:nN,replaced_by:nN},pdbx_reference_entity_list:{prd_id:nN,ref_entity_id:nN,type:iN(oN),details:nN,component_id:aN},pdbx_reference_entity_nonpoly:{prd_id:nN,ref_entity_id:nN,name:nN,chem_comp_id:nN},pdbx_reference_entity_link:{link_id:aN,prd_id:nN,details:nN,ref_entity_id_1:nN,ref_entity_id_2:nN,entity_seq_num_1:aN,entity_seq_num_2:aN,comp_id_1:nN,comp_id_2:nN,atom_id_1:nN,atom_id_2:nN,value_order:iN(oN),component_1:aN,component_2:aN,link_class:iN(nN)},pdbx_reference_entity_poly_link:{link_id:aN,prd_id:nN,ref_entity_id:nN,component_id:aN,entity_seq_num_1:aN,entity_seq_num_2:aN,comp_id_1:nN,comp_id_2:nN,atom_id_1:nN,atom_id_2:nN,value_order:iN(oN)},pdbx_reference_entity_poly:{prd_id:nN,ref_entity_id:nN,type:iN(nN),db_code:nN,db_name:nN},pdbx_reference_entity_poly_seq:{prd_id:nN,ref_entity_id:nN,mon_id:nN,parent_mon_id:nN,num:aN,observed:iN(oN),hetero:iN(oN)},pdbx_reference_entity_sequence:{prd_id:nN,ref_entity_id:nN,type:iN(nN),NRP_flag:iN(nN),one_letter_codes:nN},pdbx_reference_entity_src_nat:{prd_id:nN,ref_entity_id:nN,ordinal:aN,organism_scientific:nN,taxid:nN,db_code:nN,db_name:nN},pdbx_prd_audit:{prd_id:nN,date:nN,processing_site:iN(nN),action_type:iN(nN)}};var lN=ag.Schema;const cN=lN.str,uN={datablock:{id:cN,description:cN},dictionary:{title:cN,datablock_id:cN,version:cN},dictionary_history:{version:cN,update:cN,revision:cN},sub_category:{id:cN,description:cN},category_group_list:{id:cN,parent_id:cN,description:cN},item_type_list:{code:cN,primitive_code:cN,construct:cN,detail:cN},item_units_list:{code:cN,detail:cN},item_units_conversion:{from_code:cN,to_code:cN,operator:cN,factor:lN.float}};var dN=ag.Schema;const AN=dN.str,fN=dN.int,pN=dN.float,hN=dN.Aliased,gN=dN.Vector,mN=(hN(AN),hN(AN),hN(AN),hN(AN),gN(3),gN(3),{volume_data_3d_info:{name:AN,axis_order:gN(3,fN),origin:gN(3),dimensions:gN(3),sample_rate:fN,sample_count:gN(3,fN),spacegroup_number:fN,spacegroup_cell_size:gN(3),spacegroup_cell_angles:gN(3),mean_source:pN,mean_sampled:pN,sigma_source:pN,sigma_sampled:pN,min_source:pN,min_sampled:pN,max_source:pN,max_sampled:pN},volume_data_3d:{values:pN}});var yN=ag.Schema;const vN=yN.float,bN=yN.int,CN=yN.str,IN={cell:{angle_alpha:vN,angle_beta:vN,angle_gamma:vN,formula_units_z:bN,length_a:vN,length_b:vN,length_c:vN,volume:vN},chemical:{melting_point:vN,name_common:CN,name_systematic:CN},chemical_formula:{moiety:CN,sum:CN,weight:vN},space_group:{crystal_system:CN,it_number:bN,"name_h-m_full":CN},space_group_symop:{operation_xyz:CN},geom_bond:{atom_site_label_1:CN,atom_site_label_2:CN,distance:vN,publ_flag:CN,site_symmetry_1:CN,site_symmetry_2:CN,valence:vN},audit:{block_doi:CN},database_code:{cod:CN,csd:CN,depnum_ccdc_archive:CN,depnum_ccdc_fiz:CN,icsd:CN,mdf:CN,nbs:CN},atom_site:{adp_type:CN,calc_flag:CN,disorder_assembly:CN,disorder_group:CN,fract_x:vN,fract_y:vN,fract_z:vN,label:CN,occupancy:vN,refinement_flags:CN,site_symmetry_multiplicity:bN,type_symbol:CN,u_iso_or_equiv:vN},atom_site_aniso:{label:CN,u_11:vN,u:(0,yN.Matrix)(3,3),u_12:vN,u_13:vN,u_22:vN,u_23:vN,u_33:vN},atom_type:{description:CN,symbol:CN},atom_type_scat:{dispersion_imag:vN,dispersion_real:vN,source:CN}},EN={"cell.formula_units_z":["cell_formula_units_Z"],"space_group.it_number":["space_group_IT_number","symmetry_Int_Tables_number"],"space_group.name_h-m_full":["symmetry_space_group_name_H-M"],"space_group_symop.operation_xyz":["symmetry_equiv_pos_as_xyz"],"geom_bond.atom_site_label_1":["geom_bond_atom_site_id_1"],"geom_bond.atom_site_label_2":["geom_bond_atom_site_id_2"],"geom_bond.distance":["geom_bond_dist"],"audit.block_doi":["audit_block_DOI"],"database_code.cod":["database_code_COD"],"database_code.csd":["database_code_CSD"],"database_code.depnum_ccdc_archive":["database_code_depnum_CCDC_archive"],"database_code.depnum_ccdc_fiz":["database_code_depnum_CCDC_fiz"],"database_code.icsd":["database_code_ICSD"],"database_code.mdf":["database_code_MDF"],"database_code.nbs":["database_code_NBS"],"atom_site.adp_type":["atom_site_ADP_type","atom_site_thermal_displace_type"],"atom_site.label":["atom_site_id"],"atom_site.site_symmetry_multiplicity":["atom_site_symmetry_multiplicity"],"atom_site.u_iso_or_equiv":["atom_site_U_iso_or_equiv"],"atom_site_aniso.label":["atom_site_anisotrop_id"],"atom_site_aniso.u_11":["atom_site_aniso_U_11","atom_site_anisotrop_U_11"],"atom_site_aniso.u_12":["atom_site_aniso_U_12","atom_site_anisotrop_U_12"],"atom_site_aniso.u_13":["atom_site_aniso_U_13","atom_site_anisotrop_U_13"],"atom_site_aniso.u_22":["atom_site_aniso_U_22","atom_site_anisotrop_U_22"],"atom_site_aniso.u_23":["atom_site_aniso_U_23","atom_site_anisotrop_U_23"],"atom_site_aniso.u_33":["atom_site_aniso_U_33","atom_site_anisotrop_U_33"]};const xN=ag.Schema.int,BN={volume_data_3d_info:mN.volume_data_3d_info,segmentation_data_table:{set_id:xN,segment_id:xN},segmentation_data_3d:{values:xN}},wN={parse:e=>"string"===typeof e?FF(e):VF(e),parseText:FF,parseBinary:VF,toDatabaseCollection:function(e,t,n){const r={};for(const o of t.blocks)r[o.header]=cQ(e,o,n);return r},toDatabase:cQ,schema:{mmCIF:e=>cQ(wR,e),CCD:e=>cQ(eN,e),BIRD:e=>cQ(sN,e),dic:e=>cQ(uN,e),cifCore:e=>cQ(IN,e,EN),densityServer:e=>cQ(mN,e),segmentation:e=>cQ(BN,e)}},_N={type_symbol:ag.Schema.Aliased(wR.atom_site.type_symbol),label_atom_id:wR.atom_site.label_atom_id,auth_atom_id:wR.atom_site.auth_atom_id,label_alt_id:wR.atom_site.label_alt_id,label_comp_id:wR.atom_site.label_comp_id,auth_comp_id:wR.atom_site.auth_comp_id,pdbx_formal_charge:wR.atom_site.pdbx_formal_charge},SN={group_PDB:wR.atom_site.group_PDB,label_seq_id:wR.atom_site.label_seq_id,auth_seq_id:wR.atom_site.auth_seq_id,pdbx_PDB_ins_code:wR.atom_site.pdbx_PDB_ins_code},DN={label_asym_id:wR.atom_site.label_asym_id,auth_asym_id:wR.atom_site.auth_asym_id,label_entity_id:wR.atom_site.label_entity_id};var TN,kN;!function(e){e.EmptyResidueKey=function(){return{label_entity_id:"",label_asym_id:"",auth_seq_id:0,pdbx_PDB_ins_code:void 0}}}(TN||(TN={})),function(e){function t(e,t){return e.residueAtomSegments.index[e.chainAtomSegments.offsets[t]]}function n(e,t){return e.residueAtomSegments.index[e.chainAtomSegments.offsets[t+1]-1]+1}e.chainStartResidueIndex=t,e.chainEndResidueIndexExcl=n,e.chainResidueCount=function(e,r){return n(e,r)-t(e,r)}}(kN||(kN={}));const QN={H:1,D:1,T:1,HE:2,LI:3,BE:4,B:5,C:6,N:7,O:8,F:9,NE:10,NA:11,MG:12,AL:13,SI:14,P:15,S:16,CL:17,AR:18,K:19,CA:20,SC:21,TI:22,V:23,CR:24,MN:25,FE:26,CO:27,NI:28,CU:29,ZN:30,GA:31,GE:32,AS:33,SE:34,BR:35,KR:36,RB:37,SR:38,Y:39,ZR:40,NB:41,MO:42,TC:43,RU:44,RH:45,PD:46,AG:47,CD:48,IN:49,SN:50,SB:51,TE:52,I:53,XE:54,CS:55,BA:56,LA:57,CE:58,PR:59,ND:60,PM:61,SM:62,EU:63,GD:64,TB:65,DY:66,HO:67,ER:68,TM:69,YB:70,LU:71,HF:72,TA:73,W:74,RE:75,OS:76,IR:77,PT:78,AU:79,HG:80,TL:81,PB:82,BI:83,PO:84,AT:85,RN:86,FR:87,RA:88,AC:89,TH:90,PA:91,U:92,NP:93,PU:94,AM:95,CM:96,BK:97,CF:98,ES:99,FM:100,MD:101,NO:102,LR:103,RF:104,DB:105,SG:106,BH:107,HS:108,MT:109},MN={1:1.1,2:1.4,3:1.81,4:1.53,5:1.92,6:1.7,7:1.55,8:1.52,9:1.47,10:1.54,11:2.27,12:1.73,13:1.84,14:2.1,15:1.8,16:1.8,17:1.75,18:1.88,19:2.75,20:2.31,21:2.3,22:2.15,23:2.05,24:2.05,25:2.05,26:2.05,27:2,28:2,29:2,30:2.1,31:1.87,32:2.11,33:1.85,34:1.9,35:1.83,36:2.02,37:3.03,38:2.49,39:2.4,40:2.3,41:2.15,42:2.1,43:2.05,44:2.05,45:2,46:2.05,47:2.1,48:2.2,49:2.2,50:1.93,51:2.17,52:2.06,53:1.98,54:2.16,55:3.43,56:2.68,57:2.5,58:2.48,59:2.47,60:2.45,61:2.43,62:2.42,63:2.4,64:2.38,65:2.37,66:2.35,67:2.33,68:2.32,69:2.3,70:2.28,71:2.27,72:2.25,73:2.2,74:2.1,75:2.05,76:2,77:2,78:2.05,79:2.1,80:2.05,81:1.96,82:2.02,83:2.07,84:1.97,85:2.02,86:2.2,87:3.48,88:2.83,89:2,90:2.4,91:2,92:2.3,93:2,94:2,95:2,96:2,97:2,98:2,99:2,100:2,101:2,102:2,103:2,104:2,105:2,106:2,107:2,108:2,109:2},RN={1:1.008,2:4.0026,3:6.94,4:9.0122,5:10.81,6:10.81,7:14.007,8:15.999,9:18.998,10:20.18,11:22.99,12:24.305,13:26.982,14:28.085,15:30.974,16:32.06,17:35.45,18:39.948,19:39.098,20:40.078,21:44.956,22:47.867,23:50.942,24:51.996,25:54.938,26:55.845,27:58.933,28:58.693,29:63.546,30:65.38,31:69.723,32:72.63,33:74.922,34:78.971,35:79.904,36:83.798,37:85.468,38:87.62,39:88.906,40:91.224,41:92.906,42:95.95,43:96.906,44:101.07,45:102.91,46:106.42,47:107.87,48:112.41,49:114.82,50:118.71,51:121.76,52:127.6,53:127.6,54:131.29,55:132.91,56:137.33,57:138.91,58:140.12,59:140.91,60:144.24,61:144.912,62:150.36,63:151.96,64:157.25,65:158.93,66:162.5,67:164.93,68:167.26,69:168.93,70:173.05,71:174.97,72:178.49,73:180.95,74:183.84,75:186.21,76:190.23,77:192.22,78:195.08,79:196.97,80:200.59,81:204.38,82:207.2,83:208.98,84:1.97,85:2.02,86:2.2,87:3.48,88:2.83,89:2,90:232.04,91:231.04,92:238.03,93:237.048,94:244.064,95:243.061,96:247.07,97:247.07,98:251.079,99:252.083,100:257.095,101:258.098,102:259.101,103:262.11,104:267.122,105:270.131,106:271.134,107:270.133,108:270.134,109:278.156},PN=1.7,ON=0;function FN(e){const t=QN[e];return void 0===t?PN:MN[t]}function NN(e){const t=QN[e];return void 0===t?ON:t}function LN(e,t,n,r){return{type:e,key:t,elements:n,getIndex:r}}var UN;function GN(e,t,n,r,o,i){const{auth_seq_id:a,label_seq_id:s,pdbx_PDB_ins_code:l}=e.residues,{endSeqId:c,endInsCode:u,key:d,type:A}=n,f="label"===t?s:a;let p=r;for(;p<o;){const e=f.value(p);if(i.type[p]=A,i.key[p]=d,e>c||e===c&&l.value(p)===u)break;p++}}!function(e){e.Descriptor={name:"model_secondary_structure"},e.Provider=Gk.create(e.Descriptor),e.fromStruct=function(e,t,n){const r=new Map,o=[{kind:"none"}],i=function(e,t){if(e._rowCount>0){if(0!==e.beg_label_seq_id.valueKind(0)||0!==e.end_label_seq_id.valueKind(0))return"auth"}else if(t&&(0!==t.beg_label_seq_id.valueKind(0)||0!==t.end_label_seq_id.valueKind(0)))return"auth";return"label"}(e,t);!function(e,t,n,r){if(!e._rowCount)return;const{beg_label_asym_id:o,beg_label_seq_id:i,beg_auth_seq_id:a,pdbx_beg_PDB_ins_code:s}=e,{end_label_seq_id:l,end_auth_seq_id:c,pdbx_end_PDB_ins_code:u}=e,{pdbx_PDB_helix_class:d,conf_type_id:A,details:f}=e,p="label"===t?i:a,h="label"===t?l:c;for(let g=0,m=e._rowCount;g<m;g++){const e=HM.create(0===d.valueKind(g)?HM.SecondaryStructurePdb[d.value(g)]:0===A.valueKind(g)?HM.SecondaryStructureMmcif[A.value(g)]:536870912),t={kind:"helix",flags:e,type_id:0===A.valueKind(g)?A.value(g):"helx_p",helix_class:d.value(g),details:0===f.valueKind(g)?f.value(g):void 0},i={startSeqId:p.value(g),startInsCode:s.value(g),endSeqId:h.value(g),endInsCode:u.value(g),type:e,key:r.length};r[r.length]=t;const a=o.value(g);if(n.has(a)){const e=n.get(a);e.has(i.startSeqId)?e.get(i.startSeqId).push(i):e.set(i.startSeqId,[i])}else n.set(a,new Map([[i.startSeqId,[i]]]))}}(e,i,r,o),function(e,t,n,r,o){if(!e._rowCount)return;const{beg_label_asym_id:i,beg_label_seq_id:a,beg_auth_seq_id:s,pdbx_beg_PDB_ins_code:l}=e,{end_label_seq_id:c,end_auth_seq_id:u,pdbx_end_PDB_ins_code:d}=e,{sheet_id:A}=e,f="label"===t?a:s,p="label"===t?c:u,h=new Map;let g=r+1;for(let m=0,y=e._rowCount;m<y;m++){const e=A.value(m);let t;h.has(e)?t=h.get(e):(t=g++,h.set(e,t));const r=HM.create(8388612),a={kind:"sheet",flags:r,sheet_id:e,symmetry:void 0},s={startSeqId:f.value(m),startInsCode:l.value(m),endSeqId:p.value(m),endInsCode:d.value(m),type:r,key:o.length};o[o.length]=a;const c=i.value(m);if(n.has(c)){const e=n.get(c);e.has(s.startSeqId)?e.get(s.startSeqId).push(s):e.set(s.startSeqId,[s])}else n.set(c,new Map([[s.startSeqId,[s]]]))}}(t,i,r,e._rowCount,o);const a=n.residues._rowCount,s={type:new Int32Array(a),key:new Int32Array(a),elements:o};return r.size>0&&function(e,t,n,r){const{count:o}=e.chainAtomSegments,{label_asym_id:i}=e.chains,{auth_seq_id:a,label_seq_id:s,pdbx_PDB_ins_code:l}=e.residues,c="label"===t?s:a;for(let u=0;u<o;u++){const o=kN.chainStartResidueIndex(e,u),a=kN.chainEndResidueIndexExcl(e,u),s=i.value(u);if(n.has(s)){const i=n.get(s);for(let n=o;n<a;n++){const o=c.value(n);if(i.has(o)){const s=i.get(o);for(const o of s){const i=l.value(n);o.startInsCode===i&&GN(e,t,o,n,a,r)}}}}}}(n,i,r,s),LN(s.type,s.key,s.elements,(e=>e))}}(UN||(UN={}));const jN={U:wR.atom_site_anisotrop.U,U_esd:wR.atom_site_anisotrop.U_esd};var zN,HN;!function(e){e.Schema=jN,e.Descriptor={name:"atom_site_anisotrop",cifExport:{prefix:"",categories:[{name:"atom_site_anisotrop",instance:t=>e.Provider.get(t.firstModel)&&iL.is(t.firstModel.sourceData)?qR.Category.ofTable(t.firstModel.sourceData.data.db.atom_site_anisotrop):qR.Category.Empty}]}},e.Provider=Gk.create(e.Descriptor),e.getElementToAnsiotrop=function(e,t){const n=new Int32Array(e.rowCount);n.fill(-1);for(let o=0,i=e.rowCount;o<i;o++)n[e.value(o)]=o;const r=new Int32Array(e.rowCount);r.fill(-1);for(let o=0,i=t.rowCount;o<i;++o){const e=n[t.value(o)];-1!==e&&(r[e]=o)}return r},e.getElementToAnsiotropFromLabel=function(e,t){const n={};for(let o=0,i=e.rowCount;o<i;o++)n[e.value(o)]=o;const r=new Int32Array(e.rowCount);r.fill(-1);for(let o=0,i=t.rowCount;o<i;++o){const e=n[t.value(o)];void 0!==e&&(r[e]=o)}return r}}(zN||(zN={})),function(e){const t="molstar_global_model_transform_info";function n(t){return e.Provider.get(t)}e.Schema={[t]:{matrix:ag.Schema.Matrix(4,4,ag.Schema.float)}},e.Descriptor=Jk({name:t,cifExport:{categories:[{name:t,instance(t){const r=n(t.firstModel);if(!r)return qR.Category.Empty;const o=sg.ofRows(e.Schema.molstar_global_model_transform_info,[{matrix:r}]);return qR.Category.ofTable(o)}}],prefix:"molstar"}}),e.Provider=Gk.create(e.Descriptor),e.attach=function(t,n){t.customProperties.has(e.Descriptor)||t.customProperties.add(e.Descriptor),e.Provider.set(t,n)},e.get=n,e.fromMmCif=function(n){if(!iL.is(n.sourceData))return;const r=n.sourceData.data.frame.categories[t];if(!r)return;const o=(i=e.Schema[t],new pQ(r,i,!0));var i;return 0!==o._rowCount?o.matrix.value(0):void 0},e.hasData=function(e){if(!iL.is(e.sourceData))return!1;const n=e.sourceData.data.frame.categories[t];return!!n&&n.rowCount>0},e.writeMmCif=function(n,r){n.writeCategory({name:t,instance(){const t=sg.ofRows(e.Schema.molstar_global_model_transform_info,[{matrix:r}]);return qR.Category.ofTable(t)}})}}(HN||(HN={}));wR.atom_site.label_comp_id,wR.atom_site.label_seq_id,wR.atom_site.pdbx_PDB_ins_code,wR.atom_site.label_asym_id,wR.atom_site.label_entity_id,wR.atom_site.auth_atom_id,wR.atom_site.auth_seq_id,wR.atom_site.auth_asym_id,ag.Schema.Str();const VN={...wR.chem_comp,type:ag.Schema.Aliased(ag.Schema.str)};function qN(e,t){const{ihm_model_group:n,ihm_model_group_link:r}=t,o=sg.pickRow(r,(t=>r.model_id.value(t)===e));if(o){const e=sg.pickRow(n,(e=>n.id.value(e)===o.group_id));if(e)return e.name}return""}function YN(e){for(let t=0,n=e.rowCount;t<n;t++)if(0===e.valueKind(t))return!0;return!1}function XN(e,t,n){e[t].isDefined&&YN(e[t])||(e[t]=e[n]),e[n].isDefined&&YN(e[n])||(e[n]=e[t])}const WN={entry:wR.entry,struct:wR.struct,struct_asym:wR.struct_asym,ihm_model_list:wR.ihm_model_list,ihm_model_group:wR.ihm_model_group,ihm_model_group_link:wR.ihm_model_group_link,entity:wR.entity,entity_poly:wR.entity_poly,entity_poly_seq:wR.entity_poly_seq,pdbx_entity_branch:wR.pdbx_entity_branch,chem_comp:VN,pdbx_chem_comp_identifier:wR.pdbx_chem_comp_identifier,atom_site:wR.atom_site,ihm_sphere_obj_site:wR.ihm_sphere_obj_site,ihm_gaussian_obj_site:wR.ihm_gaussian_obj_site,pdbx_unobs_or_zero_occ_residues:wR.pdbx_unobs_or_zero_occ_residues,pdbx_molecule:wR.pdbx_molecule};function KN(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Object.create(null);for(const r of Object.keys(WN))n[r]=r in e?e[r]:sg.ofUndefinedColumns(WN[r],0);return t&&(n.atom_site=function(e){const t=sg.ofColumns(e._schema,e);return XN(t,"label_atom_id","auth_atom_id"),XN(t,"label_comp_id","auth_comp_id"),XN(t,"label_seq_id","auth_seq_id"),XN(t,"label_asym_id","auth_asym_id"),t}(n.atom_site)),n}class JN{constructor(){this.count=0,this.ids=[],this.types=[],this.descriptions=[],this.compoundsMap=new Map,this.namesMap=new Map,this.heteroMap=new Map,this.chainMap=new Map}set(e,t){this.count+=1,this.ids.push(`${this.count}`),this.types.push(e),this.descriptions.push([t])}getEntityId(e,t,n,r){return 2===t?(void 0===this.waterId&&(this.set("water",(null===r||void 0===r?void 0:r.customName)||"Water"),this.waterId=`${this.count}`),this.waterId):GM(t)?this.compoundsMap.has(n)?this.compoundsMap.get(n):(this.chainMap.has(n)||(this.set("polymer",(null===r||void 0===r?void 0:r.customName)||`Polymer ${this.chainMap.size+1}`),this.chainMap.set(n,`${this.count}`)),this.chainMap.get(n)):(this.heteroMap.has(e)||(this.set("non-polymer",(null===r||void 0===r?void 0:r.customName)||this.namesMap.get(e)||e),this.heteroMap.set(e,`${this.count}`)),this.heteroMap.get(e))}getEntityTable(){return sg.ofPartialColumns(WN.entity,{id:ag.ofStringArray(this.ids),type:ag.ofStringAliasArray(this.types),pdbx_description:ag.ofStringListArray(this.descriptions)},this.count)}setCompounds(e){for(let t=0,n=e.length;t<n;++t){const{chains:n,description:r}=e[t];this.set("polymer",r);for(let e=0,t=n.length;e<t;++e)this.compoundsMap.set(n[e],`${this.count}`)}}setNames(e){e.forEach((e=>this.namesMap.set(e[0],e[1])))}}const ZN=[new Set(["CA"]),new Set(["C"]),new Set(["N"])],$N=[new Set(["P","O3'","O3*"]),new Set(["C4'","C4*"]),new Set(["O2'","O2*","F2'","F2*"])],eL=[new Set(["P","O3'","O3*"]),new Set(["C3'","C3*"]),new Set(["O2'","O2*","F2'","F2*"])],tL=new Set(["FMN","NCN","FNS","FMA","ATP","ADP","AMP","GTP","GDP","GMP","LIG"]),nL=function(){const e=new Map;return[{id:"HIS",name:"HISTIDINE",type:"l-peptide linking"},{id:"ARG",name:"ARGININE",type:"l-peptide linking"},{id:"LYS",name:"LYSINE",type:"l-peptide linking"},{id:"ILE",name:"ISOLEUCINE",type:"l-peptide linking"},{id:"PHE",name:"PHENYLALANINE",type:"l-peptide linking"},{id:"LEU",name:"LEUCINE",type:"l-peptide linking"},{id:"TRP",name:"TRYPTOPHAN",type:"l-peptide linking"},{id:"ALA",name:"ALANINE",type:"l-peptide linking"},{id:"MET",name:"METHIONINE",type:"l-peptide linking"},{id:"CYS",name:"CYSTEINE",type:"l-peptide linking"},{id:"ASN",name:"ASPARAGINE",type:"l-peptide linking"},{id:"VAL",name:"VALINE",type:"l-peptide linking"},{id:"GLY",name:"GLYCINE",type:"peptide linking"},{id:"SER",name:"SERINE",type:"l-peptide linking"},{id:"GLN",name:"GLUTAMINE",type:"l-peptide linking"},{id:"TYR",name:"TYROSINE",type:"l-peptide linking"},{id:"ASP",name:"ASPARTIC ACID",type:"l-peptide linking"},{id:"GLU",name:"GLUTAMIC ACID",type:"l-peptide linking"},{id:"THR",name:"THREONINE",type:"l-peptide linking"},{id:"PRO",name:"PROLINE",type:"l-peptide linking"},{id:"SEC",name:"SELENOCYSTEINE",type:"l-peptide linking"},{id:"PYL",name:"PYRROLYSINE",type:"l-peptide linking"},{id:"MSE",name:"SELENOMETHIONINE",type:"l-peptide linking"},{id:"SEP",name:"PHOSPHOSERINE",type:"l-peptide linking"},{id:"TPO",name:"PHOSPHOTHREONINE",type:"l-peptide linking"},{id:"PTR",name:"O-PHOSPHOTYROSINE",type:"l-peptide linking"},{id:"PCA",name:"PYROGLUTAMIC ACID",type:"l-peptide linking"},{id:"A",name:"ADENOSINE-5'-MONOPHOSPHATE",type:"rna linking"},{id:"C",name:"CYTIDINE-5'-MONOPHOSPHATE",type:"rna linking"},{id:"T",name:"THYMIDINE-5'-MONOPHOSPHATE",type:"rna linking"},{id:"G",name:"GUANOSINE-5'-MONOPHOSPHATE",type:"rna linking"},{id:"I",name:"INOSINIC ACID",type:"rna linking"},{id:"U",name:"URIDINE-5'-MONOPHOSPHATE",type:"rna linking"},{id:"DA",name:"2'-DEOXYADENOSINE-5'-MONOPHOSPHATE",type:"dna linking"},{id:"DC",name:"2'-DEOXYCYTIDINE-5'-MONOPHOSPHATE",type:"dna linking"},{id:"DT",name:"THYMIDINE-5'-MONOPHOSPHATE",type:"dna linking"},{id:"DG",name:"2'-DEOXYGUANOSINE-5'-MONOPHOSPHATE",type:"dna linking"},{id:"DI",name:"2'-DEOXYINOSINE-5'-MONOPHOSPHATE",type:"dna linking"},{id:"DU",name:"2'-DEOXYURIDINE-5'-MONOPHOSPHATE",type:"dna linking"}].forEach((t=>e.set(t.id,t))),e}(),rL=function(){const e=new Map;return[{id:"ZN2",name:"ZINC ION",type:"ion"},{id:"SOD",name:"SODIUM ION",type:"ion"},{id:"CES",name:"CESIUM ION",type:"ion"},{id:"CLA",name:"CHLORIDE ION",type:"ion"},{id:"CAL",name:"CALCIUM ION",type:"ion"},{id:"POT",name:"POTASSIUM ION",type:"ion"}].forEach((t=>e.set(t.id,t))),e}();class oL{set(e){this.comps.set(e.id,e),this.ids.push(e.id),this.names.push(e.name),this.types.push(e.type),this.mon_nstd_flags.push(PM.has(e.id)?"y":"n")}getAtomIds(e){const t=new Set,n=this.seqId.value(e);for(;e<this.seqId.rowCount;){const r=this.seqId.value(e);if(r!==n)break;t.add(this.atomId.value(e)),e+=1}return t}hasAtomIds(e,t){for(let n=0,r=t.length;n<r;++n)if(!$Q.areIntersecting(e,t[n]))return!1;return!0}getType(e){return this.hasAtomIds(e,ZN)?"peptide linking":this.hasAtomIds(e,$N)?"rna linking":this.hasAtomIds(e,eL)?"dna linking":"other"}has(e){return this.comps.has(e)}get(e){return this.comps.get(e)}add(e,t){if(!this.has(e))if(nL.has(e))this.set(nL.get(e));else if(IM.has(e))this.set({id:e,name:"WATER",type:"non-polymer"});else if(tL.has(e.toUpperCase()))this.set({id:e,name:this.namesMap.get(e)||e,type:"non-polymer"});else if(ZQ.has(e.toUpperCase()))this.set({id:e,name:this.namesMap.get(e)||e,type:"saccharide"});else{const n=this.getAtomIds(t);if(1===n.size&&rL.has(e))this.set(rL.get(e));else{const t=this.getType(n);this.set({id:e,name:this.namesMap.get(e)||e,type:t})}}return this.get(e)}getChemCompTable(){return sg.ofPartialColumns(WN.chem_comp,{id:ag.ofStringArray(this.ids),name:ag.ofStringArray(this.names),type:ag.ofStringAliasArray(this.types),mon_nstd_flag:ag.ofStringAliasArray(this.mon_nstd_flags)},this.ids.length)}setNames(e){e.forEach((e=>this.namesMap.set(e[0],e[1])))}constructor(e,t){this.seqId=e,this.atomId=t,this.namesMap=new Map,this.comps=new Map,this.ids=[],this.names=[],this.types=[],this.mon_nstd_flags=[]}}var iL,aL;function sL(e,t){const n=iL.fromFrame(e,void 0,void 0,t),r=KN(n.data.db,!0);return Tw.create("Create mmCIF Model",(e=>Hj(r,n,e)))}function lL(e){const t=aL.fromFrame(e);return Tw.create("Create CCD Models",(n=>async function(e,t,n){const r=await cL(e,t,{coordinateType:"ideal",cartn_x:"pdbx_model_Cartn_x_ideal",cartn_y:"pdbx_model_Cartn_y_ideal",cartn_z:"pdbx_model_Cartn_z_ideal"},n),o=await cL(e,t,{coordinateType:"model",cartn_x:"model_Cartn_x",cartn_y:"model_Cartn_y",cartn_z:"model_Cartn_z"},n),i=[];r&&i.push(r);o&&i.push(o);for(let a=0,s=i.length;a<s;++a)Wj.TrajectoryInfo.set(i[a],{index:a,size:i.length});return new zj(i)}(t.data.db,aL.fromFrame(e),n)))}async function cL(e,t,n,r){const{chem_comp:o,chem_comp_atom:i,chem_comp_bond:a}=e,{coordinateType:s,cartn_x:l,cartn_y:c,cartn_z:u}=n,d=o.name.value(0),A=o.id.value(0),{atom_id:f,charge:p,comp_id:h,pdbx_ordinal:g,type_symbol:m}=i,y=i._rowCount,v=[];for(let G=0;G<y;G++)i[l].valueKind(G)>0||(v[v.length]=G);const b=v.length,C=ag.ofConst("A",b,ag.Schema.str),I=ag.ofConst(1,b,ag.Schema.int),E=ag.ofConst("1",b,ag.Schema.str),x=ag.ofConst(1,b,ag.Schema.float),B=ag.ofConst(1,b,ag.Schema.int),w=ag.view(f,v),_=ag.view(h,v),S=ag.view(i[l],v),D=ag.view(i[c],v),T=ag.view(i[u],v),k=ag.view(g,v),Q=ag.view(m,v),M=ag.view(p,v),R=sg.ofPartialColumns(WN.atom_site,{auth_asym_id:C,auth_atom_id:w,auth_comp_id:_,auth_seq_id:I,Cartn_x:S,Cartn_y:D,Cartn_z:T,id:k,label_asym_id:C,label_atom_id:w,label_comp_id:_,label_seq_id:I,label_entity_id:E,occupancy:x,type_symbol:Q,pdbx_PDB_model_num:B,pdbx_formal_charge:M},b),P=new JN;P.setNames([[A,`${d} (${s})`]]),P.getEntityId(A,0,"A");const O=new oL(I,m);O.setNames([[A,`${d} (${s})`]]),O.add(A,0);const F=KN({entity:P.getEntityTable(),chem_comp:O.getChemCompTable(),atom_site:R}),N=await Hj(F,t,r);if(!N.representative)return;const L=N.representative,U=YR.getEntriesFromChemCompBond(a);return YR.Provider.set(L,{data:a,entries:U}),aL.CoordinateType.set(L,s),N.representative}xO.Provider.formatRegistry.add("mmCIF",(function(e){if(iL.is(e.sourceData))return xO.fromData(e.sourceData.data.db)})),UN.Provider.formatRegistry.add("mmCIF",(function(e){if(!iL.is(e.sourceData))return;const{struct_conf:t,struct_sheet_range:n}=e.sourceData.data.db;return UN.fromStruct(t,n,e.atomicHierarchy)})),zN.Provider.formatRegistry.add("mmCIF",(function(e){if(!iL.is(e.sourceData))return;const{atom_site_anisotrop:t}=e.sourceData.data.db;return{data:sg.ofColumns(zN.Schema,t),elementToAnsiotrop:zN.getElementToAnsiotrop(e.atomicConformation.atomId,t.id)}}),(function(e){return!!iL.is(e.sourceData)&&e.sourceData.data.db.atom_site_anisotrop.U.isDefined})),YR.Provider.formatRegistry.add("mmCIF",(function(e){if(!iL.is(e.sourceData))return;const{chem_comp_bond:t}=e.sourceData.data.db;return 0!==t._rowCount?{data:t,entries:YR.getEntriesFromChemCompBond(t)}:void 0})),XR.Provider.formatRegistry.add("mmCIF",(function(e){if(!iL.is(e.sourceData))return;const{struct_conn:t}=e.sourceData.data.db;if(0===t._rowCount)return;const n=XR.getEntriesFromStructConn(t,e);return{data:t,byAtomIndex:XR.getAtomIndexFromEntries(n),entries:n}})),HN.Provider.formatRegistry.add("mmCIF",HN.fromMmCif,HN.hasData),function(e){e.is=function(e){return"mmCIF"===(null===e||void 0===e?void 0:e.kind)},e.fromFrame=function(e,t,n,r){return t||(t=wN.schema.mmCIF(e)),{kind:"mmCIF",name:t._name,data:{db:t,file:r,frame:e,source:n}}}}(iL||(iL={})),function(e){const t="__CcdCoordinateType__";e.CoordinateType={get:e=>e._staticPropertyData[t],set:(e,n)=>e._staticPropertyData[t]=n},e.is=function(e){return"CCD"===(null===e||void 0===e?void 0:e.kind)},e.fromFrame=function(e,t){return t||(t=wN.schema.CCD(e)),{kind:"CCD",name:t._name,data:{db:t,frame:e}}}}(aL||(aL={}));const uL=9,dL=-27.888,AL=-.5,fL=-9.9;function pL(e,t,n,r){const o=qh.distance(e,r),i=qh.distance(t,r),a=qh.distance(t,n),s=qh.distance(e,n),l=dL/o-dL/i+(dL/a-dL/s);return l<fL?fL:l}function hL(e,t,n){const{residueIndices:r,cIndices:o,hIndices:i,nIndices:a,oIndices:s}=t,{index:l}=e.model.atomicHierarchy,c=e.conformation,{traceElementIndex:u}=e.model.atomicHierarchy.derived.residue,d=r.length,A=[],f=[],p=[],h=qh(),g=qh(),m=qh(),y=qh(),v=qh(),b=qh(),C=qh();for(let I=0,E=r.length;I<E;++I){const e=I,t=r[I],d=s[e],E=o[e],x=u[t];if(-1===d||-1===E)continue;if(-1!==l.findAtomOnResidue(t,"OXT"))continue;c.invariantPosition(d,h),c.invariantPosition(E,g),c.invariantPosition(x,m);const{indices:B,count:w}=n.find(m[0],m[1],m[2],uL);for(let n=0;n<w;++n){const t=B[n];if(t===e||t-1===e||t+1===e)continue;const r=a[t];if(-1===r)continue;c.invariantPosition(r,y);const l=i[t];if(-1===l){if(0===t)continue;const e=t-1,n=s[e],r=o[e];if(-1===n||-1===r)continue;c.invariantPosition(n,C),c.invariantPosition(r,b),qh.sub(v,b,C);const i=qh.distance(C,b);qh.scaleAndAdd(v,y,v,1/i)}else c.invariantPosition(l,v);const u=pL(h,g,y,v);u>AL||(A[A.length]=e,f[f.length]=t,p[p.length]=u)}}return function(e,t,n,r){const o=new Uk.DirectedEdgeBuilder(e,t,n),i=new Float32Array(o.slotCount);for(let a=0,s=o.edgeCount;a<s;a++)o.addNextEdge(),o.assignProperty(i,r[a]);return o.createGraph({energies:r})}(d,A,f,p)}var gL;!function(e){e.is=mp.has,e.create=mp.create}(gL||(gL={}));class mL{constructor(e,t,n){this.partner1=Math.min(e,t),this.partner2=Math.max(e,t),this.type=n}}function yL(e,t){if(t.type!==e.type)return!1;if(t.partner1!==e.firstEnd+1)return!1;if(0===t.type){if(t.partner2===e.secondEnd+1)return!0}else if(t.partner2===e.secondStart-1)return!0;return!1}function vL(e,t){return e.type===t.type&&t.firstStart-e.firstEnd<6&&e.firstStart<t.firstStart&&0===t.nextLadder&&(0===e.type?bL(e,t):bL(t,e))}function bL(e,t){return t.secondStart-e.secondEnd>0&&(t.secondStart-e.secondEnd<6&&t.firstStart-e.firstEnd<3||t.secondStart-e.secondEnd<3)}function CL(e){return gL.is(e,8)||gL.is(e,1)||gL.is(e,16)}const IL={oldDefinition:U_.Boolean(!0,{description:"Whether to use the old DSSP convention for the annotation of turns and helices, causes them to be two residues shorter"}),oldOrdering:U_.Boolean(!0,{description:"Alpha-helices are preferred over 3-10 helices"})};async function EL(e,t){const n=function(e){const{index:t}=e.model.atomicHierarchy,{proteinElements:n,residueIndex:r}=e,o=n.length,i=new Uint32Array(o),a=new Int32Array(o),s=new Int32Array(o),l=new Int32Array(o),c=new Int32Array(o);for(let u=0;u<o;++u){const e=r[n[u]];i[u]=e,a[u]=t.findAtomOnResidue(e,"C"),s[u]=t.findAtomOnResidue(e,"H"),l[u]=t.findAtomOnResidue(e,"O"),c[u]=t.findAtomOnResidue(e,"N")}return{residueIndices:Em.ofSortedArray(i),cIndices:a,hIndices:s,oIndices:l,nIndices:c}}(e),{residueIndices:r}=n,o=function(e,t){const{x:n,y:r,z:o}=e.model.atomicConformation,{traceElementIndex:i}=e.model.atomicHierarchy.derived.residue,a=new Uint32Array(t.length);for(let l=0,c=t.length;l<c;++l)a[l]=i[t[l]];const s={x:n,y:r,z:o,indices:Em.ofSortedArray(a)};return ZT(s,bO(s))}(e,r),i=hL(e,n,o),a=r.length,s=new Uint32Array(a),l=function(e,t){const{cIndices:n,nIndices:r,residueIndices:o}=t,i=e.conformation,{index:a}=e.model.atomicHierarchy,{traceElementIndex:s}=e.model.atomicHierarchy.derived.residue,l=o.length,c=(e,t)=>-1===e?qh.setNaN(t):i.position(e,t);let u=qh(),d=qh(),A=qh(),f=qh(),p=qh(),h=qh();const g=qh(),m=qh(),y=qh();if(0===l)return{phi:new Float32Array(0),psi:new Float32Array(0)};const v=new Float32Array(l-1),b=new Float32Array(l-1);c(-1,u),c(-1,d),c(-1,A),c(n[0],f),c(s[o[0]],p),c(r[0],h),c(n[1],g),c(s[o[1]],m),c(r[1],y);for(let C=0;C<l-1;++C)-1===a.findAtomOnResidue(o[C],"OXT")&&(v[C]=Lp(qh.dihedralAngle(u,h,p,f)),b[C]=Lp(qh.dihedralAngle(h,p,f,y)),u=f,d=p,A=h,f=g,p=m,h=y,c(n[C+1],g),c(s[o[C+1]],m),c(r[C+1],y));return{phi:v,psi:b}}(e,n),c=t.oldDefinition?wL:SL,u={params:t,getResidueFlag:c,getFlagName:t.oldOrdering?_L:DL,unit:e,proteinInfo:n,flags:s,hbonds:i,torsionAngles:l,ladders:[],bridges:[]};!function(e){const{proteinInfo:t,hbonds:n,flags:r}=e,o=[1024,2048,4096,128,256,512];for(let i=0;i<3;i++)for(let a=0,s=t.residueIndices.length-1;a<s;++a)if(-1!==n.getDirectedEdgeIndex(a,a+i+3))if(r[a]|=o[i+3]|o[i],e.params.oldDefinition)for(let e=1;e<i+3;++e)r[a+e]|=64|o[i+3];else for(let e=0;e<=i+3;++e)r[a+e]|=64|o[i+3]}(u),function(e){const{proteinInfo:t,flags:n}=e,r=t.residueIndices.length,o=[1024,2048,4096,128,256,512],i=[0,0,0,8,1,16],a=e.params.oldOrdering?[4,3,5]:[3,4,5];for(let s=0;s<a.length;s++){const t=a[s];for(let a=1,s=r-t;a<s;a++){const r=gL.create(n[a]),s=gL.create(n[a-1]),l=gL.create(n[a+1]);if(e.params.oldOrdering){if(3===t&&(gL.is(r,1)||gL.is(l,1))||5===t&&(gL.is(r,1)||gL.is(r,8)||gL.is(l,1)||gL.is(l,8)))continue}else if(4===t&&(gL.is(r,8)||gL.is(l,8))||5===t&&(gL.is(r,1)||gL.is(r,8)||gL.is(l,1)||gL.is(l,8)))continue;if(gL.is(r,o[t])&&gL.is(r,o[t-3])&&gL.is(s,o[t])&&gL.is(s,o[t-3]))if(e.params.oldDefinition)for(let e=0;e<t;e++)n[a+e]|=i[t];else for(let e=-1;e<=t;e++)n[a+e]|=i[t]}}}(u),function(e){const{unit:t,flags:n,proteinInfo:r}=e,o=t.conformation,{traceElementIndex:i}=t.model.atomicHierarchy.derived.residue,{residueIndices:a,nIndices:s}=r,l=a.length,c=(e,t)=>-1===e?qh.setNaN(t):o.position(e,t),u=qh(),d=qh(),A=qh(),f=qh(),p=qh(),h=qh(),g=qh();e:for(let m=2;m<l-2;m++){for(let n=0;n<4;n++){const e=m+n-2;if(c(i[e],f),c(s[e+1],p),qh.squaredDistance(f,p)>6.25)continue e}const e=a[m-2],t=a[m],r=a[m+2],o=i[e],l=i[t],y=i[r];c(o,u),c(l,d),c(y,A),qh.sub(h,u,d),qh.sub(g,d,A);const v=Lp(qh.angle(h,g));v&&v>70&&(n[m]|=32)}}(u),function(e){const{proteinInfo:t,hbonds:n,flags:r,bridges:o}=e,{offset:i,b:a}=n;let s,l;for(let c=0,u=t.residueIndices.length;c<u;++c)for(let e=i[c],t=i[c+1];e<t;e++){const t=a[e];c>t||(s=c+1,l=t,s!==l&&-1!==n.getDirectedEdgeIndex(l,s+1)&&(r[s]|=2,r[l]|=2,o[o.length]=new mL(s,l,0)),s=c,l=t-1,s!==l&&-1!==n.getDirectedEdgeIndex(l-1,s)&&(r[s]|=2,r[l]|=2,o[o.length]=new mL(l,s,0)),s=c,l=t,s!==l&&-1!==n.getDirectedEdgeIndex(l,s)&&(r[s]|=2,r[l]|=2,o[o.length]=new mL(l,s,1)),s=c+1,l=t-1,s!==l&&-1!==n.getDirectedEdgeIndex(l-1,s+1)&&(r[s]|=2,r[l]|=2,o[o.length]=new mL(l,s,1)))}o.sort(((e,t)=>e.partner1>t.partner1?1:e.partner1<t.partner1?-1:0))}(u),function(e){const{bridges:t,ladders:n}=e;for(let r=0;r<t.length;r++){const e=t[r];let o=!1;for(let t=0;t<n.length;t++){const r=n[t];yL(r,e)&&(o=!0,r.firstEnd++,0===e.type?r.secondEnd++:r.secondStart--)}o||(n[n.length]={previousLadder:0,nextLadder:0,firstStart:e.partner1,firstEnd:e.partner1,secondStart:e.partner2,secondEnd:e.partner2,type:e.type})}for(let r=0;r<n.length;r++){const e=n[r];for(let t=r;t<n.length;t++){const o=n[t];vL(e,o)&&(e.nextLadder=t,o.previousLadder=r)}}}(u),function(e){const{ladders:t,flags:n}=e;for(let r=0;r<t.length;r++){const e=t[r];for(let t=e.firstStart;t<=e.firstEnd;t++){const r=e.firstStart-t,o=e.secondStart-r;e.firstStart!==e.firstEnd?(n[t]|=4,n[o]|=4):(!CL(n[t])&&gL.is(n[t],4)&&(n[t]|=2),!CL(n[o])&&gL.is(n[o],4)&&(n[o]|=2))}if(0===e.nextLadder)continue;const o=t[e.nextLadder];for(let t=e.firstStart;t<=o.firstEnd;t++)n[t]|=4;if(0===e.type)for(let t=e.secondStart;t<=o.secondEnd;t++)n[t]|=4;else for(let t=o.secondEnd;t<=e.secondStart;t++)n[t]|=4}}(u);const d=function(e,t){const n=new Uint32Array(e.length);for(let r=0,o=e.length;r<o;++r){const o=gL.create(e[r]);n[r]=t(o)}return n}(s,c),A=new Uint32Array(a),f=[],p=[];for(let h=0,g=r.length;h<g;++h){const e=d[h];A[h]=e;const t=c(s[h]);0!==p.length&&t===p[p.length-1].flags||(p[p.length]=xL(BL(e),s[h],c)),f[h]=p.length-1}return LN(A,f,p,(e=>Em.indexOf(r,e)))}function xL(e,t,n){return"helix"===e?{kind:"helix",flags:n(t)}:"sheet"===e?{kind:"sheet",flags:n(t)}:"turn"===e||"bend"===e?{kind:"turn",flags:n(t)}:{kind:"none"}}function BL(e){return e===HM.SecondaryStructureDssp.H||e===HM.SecondaryStructureDssp.G||e===HM.SecondaryStructureDssp.I?"helix":e===HM.SecondaryStructureDssp.B||e===HM.SecondaryStructureDssp.E?"sheet":e===HM.SecondaryStructureDssp.T?"turn":e===HM.SecondaryStructureDssp.S?"bend":"none"}function wL(e){return gL.is(e,1)?HM.SecondaryStructureDssp.H:gL.is(e,4)?HM.SecondaryStructureDssp.E:gL.is(e,2)?HM.SecondaryStructureDssp.B:gL.is(e,8)?HM.SecondaryStructureDssp.G:gL.is(e,16)?HM.SecondaryStructureDssp.I:gL.is(e,64)?HM.SecondaryStructureDssp.T:gL.is(e,32)?HM.SecondaryStructureDssp.S:0}function _L(e){return gL.is(e,1)?"H":gL.is(e,4)?"E":gL.is(e,2)?"B":gL.is(e,8)?"G":gL.is(e,16)?"I":gL.is(e,64)?"T":gL.is(e,32)?"S":"-"}function SL(e){return gL.is(e,16)?HM.SecondaryStructureDssp.I:gL.is(e,1)?HM.SecondaryStructureDssp.H:gL.is(e,4)?HM.SecondaryStructureDssp.E:gL.is(e,2)?HM.SecondaryStructureDssp.B:gL.is(e,8)?HM.SecondaryStructureDssp.G:gL.is(e,64)?HM.SecondaryStructureDssp.T:gL.is(e,32)?HM.SecondaryStructureDssp.S:0}function DL(e){return gL.is(e,16)?"I":gL.is(e,1)?"H":gL.is(e,4)?"E":gL.is(e,2)?"B":gL.is(e,8)?"G":gL.is(e,64)?"T":gL.is(e,32)?"S":"-"}var TL;function kL(e){let t="model";if(e){t="dssp";for(let n=0,r=e.models.length;n<r;++n){const r=e.models[n];if(Wj.isFromPdbArchive(r)||Wj.hasSecondaryStructure(r)){t="model";break}}}return{type:U_.MappedStatic(t,{model:U_.EmptyGroup({label:"Model"}),dssp:U_.Group(IL,{label:"DSSP",isFlat:!0})},{options:[["model","Model"],["dssp","DSSP"]]})}}!function(e){function t(e){const t=e.descriptor.name,n="root"===e.type?"inheritedPropertyData":"currentPropertyData",r=r=>(t in r[n]||(r[n][t]={props:{...U_.getDefaultValues(e.getParams(r))},data:_p.create(void 0)}),r[n][t]),o=(e,o,i)=>{const a=r(e);e[n][t]={props:o,data:_p.withValue(a.data,i)}};return{label:e.label,descriptor:e.descriptor,isHidden:e.isHidden,getParams:t=>{const n=U_.clone(e.getParams(t));return U_.setDefaultValues(n,r(t).props),n},defaultParams:e.defaultParams,isApplicable:e.isApplicable,attach:async function(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(arguments.length>3?arguments[3]:void 0)&&n.customPropertyDescriptors.reference(e.descriptor,!0),"root"===e.type&&(n=n.root);const a=r(n.root).props,s=r(n),l=U_.merge(e.defaultParams,a,i);if(s.data.value&&U_.areEqual(e.defaultParams,s.props,l))return;const{value:c,assets:u}=await e.obtain(t,n,l);n.customPropertyDescriptors.add(e.descriptor),n.customPropertyDescriptors.assets(e.descriptor,u),o(n,l,c)},ref:(t,n)=>t.customPropertyDescriptors.reference(e.descriptor,n),get:e=>r(e).data,set:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;"root"===e.type&&(t=t.root);const a=r(t),s=U_.merge(e.defaultParams,a.props,n);U_.areEqual(e.defaultParams,a.props,s)||(o(t,s,i),t.customPropertyDescriptors.assets(e.descriptor))},props:e=>r(e).props}}e.createProvider=t,e.createSimple=function(e,n,r){const o={value:U_.Value(r,{isHidden:!0})};return t({label:ah(e),descriptor:Jk({name:e}),isHidden:!0,type:n,defaultParams:o,getParams:()=>({value:U_.Value(r,{isHidden:!0})}),isApplicable:()=>!0,obtain:async(e,t,n)=>({...U_.getDefaultValues(o),...n})})}}(TL||(TL={}));const QL=kL(),ML=TL.createProvider({label:"Secondary Structure",descriptor:Jk({name:"molstar_computed_secondary_structure"}),type:"root",defaultParams:QL,getParams:kL,isApplicable:e=>!0,obtain:async(e,t,n)=>{const r={...U_.getDefaultValues(QL),...n};switch(r.type.name){case"dssp":return{value:await RL(t,r.type.params)};case"model":return{value:await PL(t)}}}});async function RL(e,t){const n=new Map;for(let r=0,o=e.unitSymmetryGroups.length;r<o;++r){const o=e.unitSymmetryGroups[r].units[0];if(BO.isAtomic(o)&&!Wj.isCoarseGrained(o.model)){const e=await EL(o,t);n.set(o.invariantId,e)}}return n}async function PL(e){const t=new Map;for(let n=0,r=e.unitSymmetryGroups.length;n<r;++n){const r=e.unitSymmetryGroups[n].units[0];if(BO.isAtomic(r)){const e=UN.Provider.get(r.model);e&&t.set(r.invariantId,e)}}return t}function OL(){throw new Error("Property only available for atomic models.")}function FL(e){if(e)throw new Error(`Property only available for coarse models (${e}).`);throw new Error("Property only available for coarse models.")}const NL={key:e=>e.element,x:e=>e.unit.conformation.x(e.element),y:e=>e.unit.conformation.y(e.element),z:e=>e.unit.conformation.z(e.element),id:e=>BO.isAtomic(e.unit)?e.unit.model.atomicConformation.atomId.value(e.element):OL(),occupancy:e=>BO.isAtomic(e.unit)?e.unit.model.atomicConformation.occupancy.value(e.element):OL(),B_iso_or_equiv:e=>BO.isAtomic(e.unit)?e.unit.model.atomicConformation.B_iso_or_equiv.value(e.element):OL(),sourceIndex:e=>BO.isAtomic(e.unit)?e.unit.model.atomicHierarchy.atomSourceIndex.value(e.element):e.element,type_symbol:e=>BO.isAtomic(e.unit)?e.unit.model.atomicHierarchy.atoms.type_symbol.value(e.element):OL(),label_atom_id:e=>BO.isAtomic(e.unit)?e.unit.model.atomicHierarchy.atoms.label_atom_id.value(e.element):OL(),auth_atom_id:e=>BO.isAtomic(e.unit)?e.unit.model.atomicHierarchy.atoms.auth_atom_id.value(e.element):OL(),label_alt_id:e=>BO.isAtomic(e.unit)?e.unit.model.atomicHierarchy.atoms.label_alt_id.value(e.element):OL(),label_comp_id:LL,auth_comp_id:e=>BO.isAtomic(e.unit)?e.unit.model.atomicHierarchy.atoms.auth_comp_id.value(e.element):OL(),pdbx_formal_charge:e=>BO.isAtomic(e.unit)?e.unit.model.atomicHierarchy.atoms.pdbx_formal_charge.value(e.element):OL(),vdw_radius:e=>BO.isAtomic(e.unit)?FN(e.unit.model.atomicHierarchy.atoms.type_symbol.value(e.element)):OL()};function LL(e){return BO.isAtomic(e.unit)||OL(),e.unit.model.atomicHierarchy.atoms.label_comp_id.value(e.element)}function UL(e){return BO.isAtomic(e.unit)?e.unit.model.atomicHierarchy.residues.label_seq_id.value(e.unit.residueIndex[e.element]):OL()}function GL(e){BO.isAtomic(e.unit)||OL();const t=e.unit.model.sequence.byEntityKey[VL(e)];return t&&t.sequence.microHet.get(UL(e))||[LL(e)]}const jL={key:e=>BO.isAtomic(e.unit)?e.unit.residueIndex[e.element]:OL(),group_PDB:e=>BO.isAtomic(e.unit)?e.unit.model.atomicHierarchy.residues.group_PDB.value(e.unit.residueIndex[e.element]):OL(),label_seq_id:UL,auth_seq_id:e=>BO.isAtomic(e.unit)?e.unit.model.atomicHierarchy.residues.auth_seq_id.value(e.unit.residueIndex[e.element]):OL(),pdbx_PDB_ins_code:e=>BO.isAtomic(e.unit)?e.unit.model.atomicHierarchy.residues.pdbx_PDB_ins_code.value(e.unit.residueIndex[e.element]):OL(),isNonStandard:e=>BO.isAtomic(e.unit)?GL(e).some((t=>"n"===e.unit.model.properties.chemicalComponentMap.get(t).mon_nstd_flag[0])):OL(),hasMicroheterogeneity:function(e){BO.isAtomic(e.unit)||OL();const t=e.unit.model.sequence.byEntityKey[VL(e)];return t&&t.sequence.microHet.has(UL(e))},microheterogeneityCompIds:GL,secondary_structure_type:e=>{var t;BO.isAtomic(e.unit)||OL();const n=null===(t=ML.get(e.structure).value)||void 0===t?void 0:t.get(e.unit.invariantId);return n?n.type[n.getIndex(e.unit.residueIndex[e.element])]:536870912},secondary_structure_key:e=>{var t;BO.isAtomic(e.unit)||OL();const n=null===(t=ML.get(e.structure).value)||void 0===t?void 0:t.get(e.unit.invariantId);return n?n.key[n.getIndex(e.unit.residueIndex[e.element])]:-1},chem_comp_type:e=>BO.isAtomic(e.unit)?e.unit.model.properties.chemicalComponentMap.get(LL(e)).type:OL()},zL={key:e=>BO.isAtomic(e.unit)?e.unit.chainIndex[e.element]:OL(),label_asym_id:e=>BO.isAtomic(e.unit)?e.unit.model.atomicHierarchy.chains.label_asym_id.value(e.unit.chainIndex[e.element]):OL(),auth_asym_id:e=>BO.isAtomic(e.unit)?e.unit.model.atomicHierarchy.chains.auth_asym_id.value(e.unit.chainIndex[e.element]):OL(),label_entity_id:e=>BO.isAtomic(e.unit)?e.unit.model.atomicHierarchy.chains.label_entity_id.value(e.unit.chainIndex[e.element]):OL()},HL={key:NL.key,entityKey:e=>BO.isCoarse(e.unit)?e.unit.coarseElements.entityKey[e.element]:FL(),x:NL.x,y:NL.y,z:NL.z,asym_id:e=>BO.isCoarse(e.unit)?e.unit.coarseElements.asym_id.value(e.element):FL(),entity_id:e=>BO.isCoarse(e.unit)?e.unit.coarseElements.entity_id.value(e.element):FL(),seq_id_begin:e=>BO.isCoarse(e.unit)?e.unit.coarseElements.seq_id_begin.value(e.element):FL(),seq_id_end:e=>BO.isCoarse(e.unit)?e.unit.coarseElements.seq_id_end.value(e.element):FL(),sphere_radius:e=>BO.isSpheres(e.unit)?e.unit.coarseConformation.radius[e.element]:FL("spheres"),sphere_rmsf:e=>BO.isSpheres(e.unit)?e.unit.coarseConformation.rmsf[e.element]:FL("spheres"),gaussian_weight:e=>BO.isGaussians(e.unit)?e.unit.coarseConformation.weight[e.element]:FL("gaussians"),gaussian_covariance_matrix:e=>BO.isGaussians(e.unit)?e.unit.coarseConformation.covariance_matrix[e.element]:FL("gaussians")};function VL(e){switch(e.unit.kind){case 0:return e.unit.model.atomicHierarchy.index.getEntityFromChain(e.unit.chainIndex[e.element]);case 1:return e.unit.model.coarseHierarchy.spheres.entityKey[e.element];case 2:return e.unit.model.coarseHierarchy.gaussians.entityKey[e.element]}}const qL={key:VL,id:e=>e.unit.model.entities.data.id.value(VL(e)),type:e=>e.unit.model.entities.data.type.value(VL(e)),src_method:e=>e.unit.model.entities.data.src_method.value(VL(e)),pdbx_description:e=>e.unit.model.entities.data.pdbx_description.value(VL(e)),formula_weight:e=>e.unit.model.entities.data.formula_weight.value(VL(e)),pdbx_number_of_molecules:e=>e.unit.model.entities.data.pdbx_number_of_molecules.value(VL(e)),details:e=>e.unit.model.entities.data.details.value(VL(e)),pdbx_mutation:e=>e.unit.model.entities.data.pdbx_mutation.value(VL(e)),pdbx_fragment:e=>e.unit.model.entities.data.pdbx_fragment.value(VL(e)),pdbx_ec:e=>e.unit.model.entities.data.pdbx_ec.value(VL(e)),pdbx_parent_entity_id:e=>e.unit.model.entities.data.pdbx_parent_entity_id.value(VL(e)),subtype:e=>e.unit.model.entities.subtype.value(VL(e)),prd_id:e=>{var t,n;return null!==(n=null===(t=e.unit.model.entities.prd_id)||void 0===t?void 0:t.value(VL(e)))&&void 0!==n?n:""}},YL=[],XL={id:e=>e.unit.id,chainGroupId:e=>e.unit.chainGroupId,multiChain:e=>BO.Traits.is(e.unit.traits,BO.Trait.MultiChain),object_primitive:e=>e.unit.objectPrimitive,operator_name:e=>e.unit.conformation.operator.name,operator_key:e=>e.unit.conformation.operator.key,model_index:e=>e.unit.model.modelNum,model_label:e=>e.unit.model.label,model_entry_id:e=>e.unit.model.entryId,hkl:e=>e.unit.conformation.operator.hkl,spgrOp:e=>e.unit.conformation.operator.spgrOp,model_num:e=>e.unit.model.modelNum,pdbx_struct_assembly_id:e=>{var t;return(null===(t=e.unit.conformation.operator.assembly)||void 0===t?void 0:t.id)||_T.DefaultName},pdbx_struct_oper_list_ids:e=>{var t;return(null===(t=e.unit.conformation.operator.assembly)||void 0===t?void 0:t.operList)||YL},struct_ncs_oper_id:e=>e.unit.conformation.operator.ncsId},WL={constant:{true:e=>!0,false:e=>!1,zero:e=>0},atom:NL,residue:jL,chain:zL,entity:qL,unit:XL,coarse:HL};class KL{add(e){let t=this.index.get(e.label_asym_id);t||(t=new Map,this.index.set(e.label_asym_id,t));let n=t.get(e.label_seq_id);n||(n=[],t.set(e.label_seq_id,n));return!this._find(e,n)&&(n.push(e),!0)}hasLabelAsymId(e){return this.index.has(e)}has(e){var t,n;const r=JL(e);if(!this.index.has(r))return;const o=this.index.get(r),i=ZL(e);if(!o.has(i))return;const a=o.get(i),s=$L(e),l=eU(e),c=tU(e),u=null!==(t=nU(e))&&void 0!==t?t:"1_555";for(const d of a)if(d.label_comp_id===s&&d.label_alt_id===l&&d.ins_code===c&&(!this.checkOperator||(null!==(n=d.operator_name)&&void 0!==n?n:"1_555")===u))return d}static getLabel(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;return`${e.label_asym_id} ${e.label_comp_id} ${e.label_seq_id}:${e.ins_code}:${e.label_alt_id}${t?" "+(null!==(n=e.operator_name)&&void 0!==n?n:"1_555"):""}`}static getEntryFromLocation(e){var t;return{label_asym_id:JL(e),label_comp_id:$L(e),label_seq_id:ZL(e),label_alt_id:eU(e),ins_code:tU(e),operator_name:null!==(t=nU(e))&&void 0!==t?t:"1_555"}}_find(e,t){var n,r;for(const o of t)if(o.label_comp_id===e.label_comp_id&&o.label_alt_id===e.label_alt_id&&o.ins_code===e.ins_code&&(!this.checkOperator||(null!==(n=o.operator_name)&&void 0!==n?n:"1_555")===(null!==(r=e.operator_name)&&void 0!==r?r:"1_555")))return!0;return!1}constructor(e){var t;this.index=new Map,this.checkOperator=!1,this.checkOperator=null!==(t=null===e||void 0===e?void 0:e.checkOperator)&&void 0!==t&&t}}const JL=WL.chain.label_asym_id,ZL=WL.residue.label_seq_id,$L=WL.atom.label_comp_id,eU=WL.atom.label_alt_id,tU=WL.residue.pdbx_PDB_ins_code,nU=WL.unit.operator_name;function rU(e,t,n){const r=t.subsetBuilder(!0);for(const o of n.units){if(0!==o.kind){r.setUnit(o.id,o.elements);continue}const{residueAtomSegments:n}=o.model.atomicHierarchy,i=t.unitMap.get(o.id).elements,a=o.elements;r.beginUnit(o.id);const s=ty.transientSegments(n,a);for(;s.hasNext;){const e=s.move().index;for(let t=n.offsets[e],o=n.offsets[e+1];t<o;t++)Em.has(i,t)&&r.addElement(t)}r.commitUnit(),e.throwIfTimedOut()}return r.getStructure()}function oU(e){return function(t){const n=e(t);if(_O.isSingleton(n))return _O.Singletons(t.inputStructure,rU(t,t.inputStructure,n.structure));{const e=new tF(t.inputStructure);for(const r of n.structures)e.add(rU(t,t.inputStructure,r));return e.getSelection()}}}function iU(e,t,n,r){const o=new pF(t),i=t.lookup3d,a=r.radius;for(const s of n.units){const t=s.conformation,n=s.elements;for(let e=0,r=n.length;e<r;e++){const r=n[e];i.findIntoBuilder(t.x(r),t.y(r),t.z(r),a,o)}e.throwIfTimedOut()}return r.wholeResidues?rU(e,t,o.getStructure()):o.getStructure()}function aU(e,t,n,r){const o=new pF(t),i=t.lookup3d,{elementRadius:a,elementRadiusClosure:s,sourceMaxRadius:l,radius:c}=r;e.pushCurrentElement(),e.element.structure=n;for(const u of n.units){e.element.unit=u;const t=u.conformation,n=u.elements;for(let r=0,u=n.length;r<u;r++){const u=n[r];e.element.element=u;const d=a(e);i.findIntoBuilderWithRadius(t.x(u),t.y(u),t.z(u),d,l,c,s,o)}e.throwIfTimedOut()}return e.popCurrentElement(),r.wholeResidues?rU(e,t,o.getStructure()):o.getStructure()}function sU(e,t){return n=>(e.element.structure=n.structure,e.element.unit=n.unit,e.element.element=n.element,t(e))}function lU(e,t){let n=0;e.element.structure=e.inputStructure;for(const r of e.inputStructure.units){e.element.unit=r;const o=r.elements;for(let r=0,i=o.length;r<i;r++){const i=o[r];e.element.element=i;const a=t(e);a>n&&(n=a)}}return e.throwIfTimedOut(),n}function cU(e,t){return function(n){const r=e(n);if(t.elementRadius){const e={...t,elementRadius:t.elementRadius,elementRadiusClosure:sU(n,t.elementRadius),sourceMaxRadius:lU(n,t.elementRadius)};if(_O.isSingleton(r)){const t=aU(n,n.inputStructure,r.structure,e);return _O.Singletons(n.inputStructure,t)}{const t=new tF(n.inputStructure);for(const o of r.structures)t.add(aU(n,n.inputStructure,o,e));return t.getSelection()}}if(_O.isSingleton(r)){const e=iU(n,n.inputStructure,r.structure,t);return _O.Singletons(n.inputStructure,e)}{const e=new tF(n.inputStructure);for(const o of r.structures)e.add(iU(n,n.inputStructure,o,t));return e.getSelection()}}}function uU(e,t){return function(n){const r=e(n);if(0===_O.structureCount(r))return r;const o=_O.UniqueBuilder(n.inputStructure),i=e=>o.add(e);return _O.forEach(r,((e,r)=>{n.pushInputStructure(e),_O.forEach(t(n),i),n.popInputStructure(),r%10===0&&n.throwIfTimedOut()})),o.getSelection()}}function dU(e,t){return function(n){const r=e(n);if(0===_O.structureCount(r))return r;const o=t(n);if(0===_O.structureCount(o))return _O.Empty(n.inputStructure);const i=_O.unionStructure(o),a=_O.UniqueBuilder(n.inputStructure);return _O.forEach(r,((e,t)=>{const r=HO(i,e);0!==r.elementCount&&a.add(r),t%50===0&&n.throwIfTimedOut()})),a.getSelection()}}function AU(e,t){return function(n){const r=e(n);if(0===_O.structureCount(r))return r;const o=t(n);if(0===_O.structureCount(o))return r;const i=_O.unionStructure(o),a=_O.UniqueBuilder(n.inputStructure);return _O.forEach(r,((e,t)=>{const r=VO(e,i);0!==r.elementCount&&a.add(r),t%50===0&&n.throwIfTimedOut()})),a.getSelection()}}function fU(e){return function(t){const n=_O.LinearBuilder(t.inputStructure);return n.add(_O.unionStructure(e(t))),n.getSelection()}}function pU(e,t){return function(n){const r=e(n),o=new Map,i=[];n.pushCurrentElement(),_O.forEach(r,((e,r)=>{n.element.structure=e;for(const i of e.units){n.element.unit=i;const e=i.elements;for(let i=0,a=e.length;i<a;i++){n.element.element=e[i];const a=t(n);let s;o.has(a)?s=o.get(a):(s=VD.create(),o.set(a,s)),VD.add(s,r,r)}}i[r]=n.inputStructure.subsetBuilder(!0),r%10===0&&n.throwIfTimedOut()})),n.element.structure=n.inputStructure;for(const e of n.inputStructure.units){n.element.unit=e;const r=e.elements;for(let a=0,s=r.length;a<s;a++){n.element.element=r[a];const s=t(n);if(!o.has(s))continue;const l=o.get(s).array;for(let t=0,n=l.length;t<n;t++)i[l[t]].addToUnit(e.id,r[a])}}n.popCurrentElement();const a=_O.UniqueBuilder(n.inputStructure);for(const e of i)a.add(e.getStructure());return a.getSelection()}}function hU(e){let{query:t,layerCount:n,wholeResidues:r,bondTest:o,fixedPoint:i}=e;const a=Math.max(n,0);return function(e){const n=_O.UniqueBuilder(e.inputStructure),s=t(e);return e.pushCurrentBond(),e.atomicBond.setTestFn(o),_O.forEach(s,((t,o)=>{let s=t;if(i)for(;;){const t=s.elementCount;if(s=gU(e,r,s),s.elementCount===t)break}else for(let n=0;n<a;n++)s=gU(e,r,s);n.add(s),o%10===0&&e.throwIfTimedOut()})),e.popCurrentBond(),n.getSelection()}}function gU(e,t,n){const r=function(e,t){const n=e.inputStructure,r=n.interUnitBonds,o=new pF(n),i=e.atomicBond;for(const a of t.units){if(0!==a.kind){o.beginUnit(a.id);for(let e=0,t=a.elements.length;e<t;e++)o.addElement(a.elements[e]);o.commitUnit();continue}const s=n.unitMap.get(a.id),{offset:l,b:c,edgeProps:{flags:u,order:d,key:A}}=s.bonds;i.setStructure(n),i.a.unit=s,i.b.unit=s;for(let t=0,n=a.elements.length;t<n;t++){o.addToUnit(a.id,a.elements[t]);const n=Em.indexOf(s.elements,a.elements[t]);for(let r=l[n],f=l[n+1];r<f;r++){const l=c[r],f=s.elements[l];Em.has(a.elements,f)||o.has(a.id,f)||(i.aIndex=n,i.a.element=a.elements[t],i.bIndex=l,i.b.element=f,i.type=u[r],i.order=d[r],i.key=A[r],i.test(e,!0)&&o.addToUnit(a.id,f))}}for(const f of r.getConnectedUnits(s.id)){const r=t.unitMap.get(f.unitB),l=n.unitMap.get(f.unitB);for(const t of f.connectedIndices)if(Em.has(a.elements,s.elements[t]))for(const n of f.getEdges(t)){const a=l.elements[n.indexB];r&&Em.has(r.elements,a)||o.has(f.unitB,a)||(i.a.unit=s,i.aIndex=t,i.a.element=s.elements[t],i.b.unit=l,i.bIndex=n.indexB,i.b.element=a,i.type=n.props.flag,i.order=n.props.order,i.key=n.props.key,i.test(e,!0)&&o.addToUnit(f.unitB,a))}}}return o.getStructure()}(e,n);return t?rU(e,e.inputStructure,r):r}function mU(e){let{query:t,radius:n,includeWater:r}=e;return function(e){const o=_O.unionStructure(t(e)),i=rU(e,e.inputStructure,iU(e,e.inputStructure,o,{radius:n})),a=function(e){const t=e.models[0],n=new Set;if(!iL.is(t.sourceData))return n;const{_rowCount:r,asym_id:o}=t.sourceData.data.db.pdbx_molecule;for(let i=0;i<r;i++)n.add(o.value(i));return n}(e.inputStructure),s=function(e){var t,n;const r=e.models[0],o=new bU;if(!iL.is(r.sourceData))return o;const i=r.sourceData.data.db.struct_conn,{conn_type_id:a}=i,{ptnr1_label_asym_id:s,ptnr1_label_comp_id:l,ptnr1_label_seq_id:c,ptnr1_symmetry:u,pdbx_ptnr1_label_alt_id:d,pdbx_ptnr1_PDB_ins_code:A}=i,{ptnr2_label_asym_id:f,ptnr2_label_comp_id:p,ptnr2_label_seq_id:h,ptnr2_symmetry:g,pdbx_ptnr2_label_alt_id:m,pdbx_ptnr2_PDB_ins_code:y}=i;for(let v=0;v<i._rowCount;v++){const e=a.value(v);if("covale"!==e&&"metalc"!==e)continue;const r={label_asym_id:s.value(v),label_comp_id:l.value(v),label_seq_id:c.value(v),label_alt_id:d.value(v),ins_code:A.value(v),operator_name:null!==(t=u.value(v))&&void 0!==t?t:"1_555"},i={label_asym_id:f.value(v),label_comp_id:p.value(v),label_seq_id:h.value(v),label_alt_id:m.value(v),ins_code:y.value(v),operator_name:null!==(n=g.value(v))&&void 0!==n?n:"1_555"};o.addEdge(r,i)}return o}(e.inputStructure),l=Vk.create(i),c=new Map,u=new KL({checkOperator:!0});for(const t of i.units){if(0!==t.kind)continue;l.unit=t;const{elements:n}=t,r=ty.transientSegments(t.model.atomicHierarchy.chainAtomSegments,n),o=ty.transientSegments(t.model.atomicHierarchy.residueAtomSegments,n);for(;r.hasNext;){const e=r.move();l.element=n[e.start];const t=WL.chain.label_asym_id(l),i=WL.unit.operator_name(l);if(a.has(t)){c.has(t)?tS(c.get(t),i):c.set(t,[i]);continue}const d=WL.entity.type(l);if("water"!==d&&"polymer"!==d)for(o.setSegment(e);o.hasNext;){const e=o.move();l.element=n[e.start],s.addComponent(KL.getEntryFromLocation(l),u)}}e.throwIfTimedOut()}const d=e.inputStructure.subsetBuilder(!0);for(const t of e.inputStructure.units){if(0!==t.kind)continue;l.unit=t;const{elements:n}=t,r=ty.transientSegments(t.model.atomicHierarchy.chainAtomSegments,n),o=ty.transientSegments(t.model.atomicHierarchy.residueAtomSegments,n);for(d.beginUnit(t.id);r.hasNext;){const e=r.move();l.element=n[e.start];const t=WL.chain.label_asym_id(l),i=WL.unit.operator_name(l);if(c.has(t)&&c.get(t).indexOf(i)>=0)d.addElementRange(n,e.start,e.end);else if(u.hasLabelAsymId(t))for(o.setSegment(e);o.hasNext;){const e=o.move();l.element=n[e.start],u.has(l)&&d.addElementRange(n,e.start,e.end)}}d.commitUnit(),e.throwIfTimedOut()}const A=UO(e.inputStructure,[d.getStructure(),o]);if(r){const t=new pF(e.inputStructure),r=e.inputStructure.lookup3d;for(const o of A.units){const i=o.conformation,a=o.elements;for(let e=0,s=a.length;e<s;e++){const s=a[e];r.findIntoBuilderIf(i.x(s),i.y(s),i.z(s),n,t,vU),t.addToUnit(o.id,s)}e.throwIfTimedOut()}return _O.Sequence(e.inputStructure,[t.getStructure()])}return _O.Sequence(e.inputStructure,[A])}}const yU=WL.entity.type;function vU(e){return"water"===yU(e)}class bU{constructor(){this.vertices=new Map,this.edges=new Map}addVertex(e,t){this.vertices.has(t)||(this.vertices.set(t,e),this.edges.set(t,[]))}addEdge(e,t){const n=KL.getLabel(e),r=KL.getLabel(t);this.addVertex(e,n),this.addVertex(t,r),tS(this.edges.get(n),r),tS(this.edges.get(r),n)}addComponent(e,t){const n=KL.getLabel(e);if(!this.vertices.has(n))return void t.add(e);const r=new Set,o=new Set,i=[n];for(o.add(n),t.add(e);i.length>0;){const n=i.pop();r.add(n);const a=this.vertices.get(n);for(const s of this.edges.get(n)){if(r.has(s))continue;if(i.push(s),o.has(s))continue;o.add(s);const n=this.vertices.get(s);a.operator_name===n.operator_name?t.add({...n,operator_name:e.operator_name}):t.add(n)}}}}var CU,IU,EU;function xU(e,t){return n=>{const r=e(n),o=_O.LinearBuilder(n.inputStructure);return n.pushCurrentElement(),_O.forEach(r,((e,r)=>{n.currentStructure=e,t(n)&&o.add(e),r%100&&n.throwIfTimedOut()})),n.popCurrentStructure(),o.getSelection()}}function BU(e){return t=>{const n=e(t),r=_O.LinearBuilder(t.inputStructure);if("singletons"===n.kind){if(n.structure.elementCount>0){const e=n.structure.units[0],o=aG.create([e.getChild(Em.ofSingleton(e.elements[0]))],{parent:t.inputStructure});r.add(o)}}else n.structures.length>0&&r.add(n.structures[0]);return r.getSelection()}}function wU(e,t,n){const{units:r}=e.currentStructure,o=e.pushCurrentElement();o.structure=e.currentStructure;for(const i of r){o.unit=i;const r=i.elements,a=t;if(a){for(let t=0,i=r.length;t<i;t++)o.element=r[t],n.add(a(e));e.throwIfTimedOut()}}return e.popCurrentElement(),n}function _U(e,t,n){return r=>{const o=e(r),i=function(e,t,n){const r=new Set,o=t(e);return e.pushCurrentElement(),_O.forEach(o,((t,o)=>{e.currentStructure=t,wU(e,n,r),o%10&&e.throwIfTimedOut()})),e.popCurrentElement(),r}(r,t,n),a=_O.LinearBuilder(r.inputStructure);return r.pushCurrentStructure(),_O.forEach(o,((e,t)=>{r.currentStructure=e;const o=wU(r,n,new Set);$Q.isSuperset(i,o)&&a.add(e),t%10&&r.throwIfTimedOut()})),r.popCurrentStructure(),a.getSelection()}}function SU(e,t){return n=>{const r=_O.unionStructure(t(n)),o=_O.LinearBuilder(n.inputStructure);return _O.forEach(e(n),((e,t)=>{zO(r,e)&&o.add(e),t%10&&n.throwIfTimedOut()})),o.getSelection()}}function DU(e){return t=>{const n={queryCtx:t,selection:e.query(t),target:e.target(t),maxRadius:e.maxRadius,minRadius:e.minRadius?Math.max(0,e.minRadius):0,elementRadius:e.elementRadius,invert:!!e.invert};return 0===n.minRadius&&"undefined"===typeof e.minRadius?function(e){let{queryCtx:t,selection:n,target:r,maxRadius:o,invert:i}=e;const a=_O.unionStructure(r).lookup3d,s=_O.LinearBuilder(t.inputStructure),l=qh.zero();return _O.forEach(n,((e,n)=>{const{units:r}=e;let c=!1;for(let t=0,i=r.length;t<i;t++){const e=r[t],{elements:n,conformation:i}=e;for(let t=0,r=n.length;t<r;t++){const e=n[t];if(i.position(e,l),a.check(l[0],l[1],l[2],o+i.r(e))){c=!0;break}}if(c)break}i&&(c=!c),c&&s.add(e),n%10===0&&t.throwIfTimedOut()})),s.getSelection()}(n):0===n.minRadius?function(e){let{queryCtx:t,selection:n,target:r,maxRadius:o,invert:i,elementRadius:a}=e;const s=_O.unionStructure(r),l=_O.LinearBuilder(t.inputStructure);return t.pushCurrentElement(),_O.forEach(n,((e,n)=>{let r=function(e,t,n,r,o){return 0===t.elementCount||0===n.elementCount||(t.elementCount<=n.elementCount?IU.check(e,t,n,r,o):IU.check(e,n,t,r,o))}(t,s,e,o,a);i&&(r=!r),r&&l.add(e),n%10===0&&t.throwIfTimedOut()})),t.popCurrentElement(),l.getSelection()}(n):function(e){let{queryCtx:t,selection:n,target:r,minRadius:o,maxRadius:i,invert:a,elementRadius:s}=e;const l=_O.unionStructure(r),c=_O.LinearBuilder(t.inputStructure);return t.pushCurrentElement(),_O.forEach(n,((e,n)=>{let r=function(e,t,n,r,o,i){return 0===t.elementCount||0===n.elementCount||(t.elementCount<=n.elementCount?CU.check(e,t,n,r,o,i):CU.check(e,n,t,r,o,i))}(t,l,e,o,i,s);a&&(r=!r),r&&c.add(e),n%10===0&&t.throwIfTimedOut()})),t.popCurrentElement(),c.getSelection()}(n)}}function TU(e){let{query:t,target:n,disjunct:r,invert:o,bondTest:i}=e;return e=>{const a=n(e);if(_O.isEmpty(a))return a;const s=t(e);if(_O.isEmpty(s))return s;const l={queryCtx:e,input:e.inputStructure,disjunct:r,target:_O.unionStructure(a)},c=_O.LinearBuilder(e.inputStructure);return e.pushCurrentBond(),e.atomicBond.setTestFn(i),_O.forEach(s,((t,n)=>{!function(e,t){const{queryCtx:n,input:r,target:o,disjunct:i}=e,a=n.atomicBond,s=r.interUnitBonds;a.setStructure(r);for(const l of t.units){if(!BO.isAtomic(l))continue;const e=r.unitMap.get(l.id),{offset:c,b:u,edgeProps:{flags:d,order:A,key:f}}=e.bonds,p=s.getConnectedUnits(l.id),h=p.length,g=l.elements,m=e.elements;for(let s=0,y=g.length;s<y;s++){const y=Em.indexOf(m,g[s]);a.a.unit=e,a.b.unit=e;for(let t=c[y],r=c[y+1];t<r;t++)if(a.b.element=e.elements[u[t]],(!i||!Em.has(l.elements,a.b.element))&&o.hasElement(a.b)&&(a.aIndex=y,a.a.element=g[s],a.bIndex=u[t],a.type=d[t],a.order=A[t],a.key=f[t],a.test(n,!0)))return!0;for(let l=0;l<h;l++){const c=p[l],u=r.unitMap.get(c.unitB),d=u.elements,A=c.getEdges(y);for(let r=0,l=A.length;r<l;r++){const l=A[r];if(a.b.unit=u,a.b.element=d[l.indexB],o.hasElement(a.b)&&(!i||!t.hasElement(a.b))&&(a.a.unit=e,a.aIndex=y,a.a.element=g[s],a.bIndex=l.indexB,a.type=l.props.flag,a.order=l.props.order,a.key=l.props.key,a.test(n,!0)))return!0}}}}return!1}(l,t)?o&&c.add(t):c.add(t),n%5===0&&e.throwIfTimedOut()})),e.popCurrentBond(),c.getSelection()}}function kU(e){return 0===e.length?rF:1===e.length?e[0]:t=>{const n=_O.UniqueBuilder(t.inputStructure);for(let r=0;r<e.length;r++)_O.forEach(e[r](t),((e,o)=>{n.add(e),r%100&&t.throwIfTimedOut()}));return n.getSelection()}}function QU(e){return 0===e.length?rF:1===e.length?e[0]:t=>{const n=[];for(let s=0;s<e.length;s++)n.push(e[s](t));let r=0,o=_O.structureCount(n[0]);for(let e=1;e<n.length;e++){const t=_O.structureCount(n[e]);t<o&&(r=e,o=t)}t.throwIfTimedOut();const i=ZD((e=>e.hashCode),aG.areUnitIdsAndIndicesEqual);_O.forEach(n[r],(e=>i.add(e)));const a=_O.UniqueBuilder(t.inputStructure);for(let e=0;e<n.length;e++)e!==r&&(_O.forEach(n[e],(e=>{i.has(e)&&a.add(e)})),t.throwIfTimedOut());return a.getSelection()}}function MU(e){return e.currentStructure.elementCount}function RU(e){return t=>{const n=e(t);return _O.structureCount(n)}}function PU(e){return t=>{const n=new Set;return wU(t,e,n)}}!function(e){const t=qh();function n(e,n,r,o,i,a,s){const{elements:l,conformation:c}=n,u=t;e.element.unit=n;let d=!1;for(let t=0,A=l.length;t<A;t++){const n=l[t];e.element.element=n;const A=Math.max(0,qh.distance(r,c.position(n,u))-o-s(e));if(A<i)return 0;A<a&&(d=!0)}return d?1:2}function r(e,t,r,o,i,a,s){const{units:l}=t;let c=!1;for(let u=0,d=l.length;u<d;u++){const t=n(e,l[u],r,o,i,a,s);if(0===t)return 0;1===t&&(c=!0)}return c?1:2}const o=qh();e.check=function(e,t,n,i,a,s){if(0===t.elementCount||0===n.elementCount)return 0;const{units:l}=t;let c=!1;e.element.structure=t;for(let u=0,d=l.length;u<d;u++){const t=l[u],{elements:d,conformation:A}=t;e.element.unit=t;for(let l=0,u=d.length;l<u;l++){const t=d[l];e.element.element=t;const u=r(e,n,A.position(t,o),s(e),i,a,s);if(0===u)return!1;1===u&&(c=!0)}}return c}}(CU||(CU={})),function(e){const t=qh();function n(e,n,r,o,i,a){const{elements:s,conformation:l}=n,c=t;e.element.unit=n;for(let t=0,u=s.length;t<u;t++){const n=s[t];if(e.element.element=n,Math.max(0,qh.distance(r,l.position(n,c))-o-a(e))<=i)return!0}return!1}function r(e,t,r,o,i,a){const{units:s}=t;for(let l=0,c=s.length;l<c;l++)if(n(e,s[l],r,o,i,a))return!0;return!1}const o=qh();e.check=function(e,t,n,i,a){if(0===t.elementCount||0===n.elementCount)return 0;const{units:s}=t;e.element.structure=t;for(let l=0,c=s.length;l<c;l++){const t=s[l];e.element.unit=t;const{elements:c,conformation:u}=t;for(let s=0,l=c.length;s<l;s++){const t=c[s];if(e.element.element=t,r(e,n,u.position(t,o),a(e),i,a))return!0}}return!1}}(IU||(IU={})),function(e){function t(e){return!0}function n(e){return!1}e.eq=function(e,t){return n=>e(n)===t},e.lt=function(e,t){return n=>e(n)<t},e.lte=function(e,t){return n=>e(n)<=t},e.gt=function(e,t){return n=>e(n)>t},e.gte=function(e,t){return n=>e(n)>=t},e.inSet=function(e,t){if(function(e){return!!e&&!!e.has}(t))return n=>t.has(e(n));{if(0===t.length)return n;const r=new Set;for(let e=0;e<t.length;e++)r.add(t[e]);return t=>r.has(e(t))}},e.and=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];switch(n.length){case 0:return t;case 1:return n[0];case 2:{const e=n[0],t=n[1];return n=>e(n)&&t(n)}case 3:{const e=n[0],t=n[1],r=n[2];return n=>e(n)&&t(n)&&r(n)}case 4:{const e=n[0],t=n[1],r=n[2],o=n[3];return n=>e(n)&&t(n)&&r(n)&&o(n)}case 5:{const e=n[0],t=n[1],r=n[2],o=n[3],i=n[4];return n=>e(n)&&t(n)&&r(n)&&o(n)&&i(n)}case 6:{const e=n[0],t=n[1],r=n[2],o=n[3],i=n[4],a=n[5];return n=>e(n)&&t(n)&&r(n)&&o(n)&&i(n)&&a(n)}default:{const e=n.length;return t=>{for(let r=0;r<e;r++)if(!n[r])return!1;return!0}}}},e.or=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];switch(t.length){case 0:return n;case 1:return t[0];case 2:{const e=t[0],n=t[1];return t=>e(t)||n(t)}case 3:{const e=t[0],n=t[1],r=t[2];return t=>e(t)||n(t)||r(t)}case 4:{const e=t[0],n=t[1],r=t[2],o=t[3];return t=>e(t)||n(t)||r(t)||o(t)}case 5:{const e=t[0],n=t[1],r=t[2],o=t[3],i=t[4];return t=>e(t)||n(t)||r(t)||o(t)||i(t)}case 6:{const e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5];return t=>e(t)||n(t)||r(t)||o(t)||i(t)||a(t)}default:{const e=t.length;return n=>{for(let r=0;r<e;r++)if(t[r])return!0;return!1}}}}}(EU||(EU={}));const OU={generators:p,filters:g,modifiers:h,combinators:m,pred:EU,internal:f,atomset:y};var FU;function NU(e,t,n,r,o,i){const{spacegroup:a,ncsOperators:s}=e,l=[],{toFractional:c}=a.cell,u=qh.transformMat4(qh(),i,c),d=FT.getSymmetryOperatorRef(a,t,n,r,o,u);if(s&&s.length)for(let A=0,f=s.length;A<f;++A){const e=s[A],t=Yh.mul(Yh(),d.matrix,e.matrix),n=_T.create(`${d.name} ${e.name}`,t,{assembly:d.assembly,ncsId:e.ncsId,hkl:d.hkl,spgrOp:d.spgrOp});l.push(n)}else l.push(d);return l}function LU(e,t,n,r){const{spacegroup:o,ncsOperators:i}=e,a=i&&i.length||0,s=[];!a&&t[0]<=0&&n[0]>=0&&t[1]<=0&&n[1]>=0&&t[2]<=0&&n[2]>=0&&(s[0]=FT.getSymmetryOperator(o,0,0,0,0));for(let l=0;l<o.operators.length;l++)for(let o=t[0];o<=n[0];o++)for(let i=t[1];i<=n[1];i++)for(let c=t[2];c<=n[2];c++)(a||0!==l||0!==o||0!==i||0!==c)&&s.push(...NU(e,l,o,i,c,r));return s}function UU(e,t){const n=aG.Builder({label:e.label,dynamicBonds:e.dynamicBonds}),{units:r}=e;for(const o of t)for(const e of r)n.addWithOperator(e,o);return n.getStructure()}!function(e){function t(e,t){return e.invariantId===t.invariantId&&e.model.id===t.model.id&&Em.areEqual(e.elements,t.elements)}function n(){return function(e,t){return new Th(e,t)}(BO.hashUnit,t)}e.buildAssembly=function(e,t){return Tw.create("Build Assembly",(async n=>{const r=e.models;if(1!==r.length)throw new Error("Can only build assemblies from structures based on 1 model.");const o=EO.findAssembly(r[0],t);if(!o)throw new Error(`Assembly '${t}' is not defined.`);const i=_T.create(o.id,Yh.identity(),{assembly:{id:o.id,operId:0,operList:[]}}),a=aG.Builder({coordinateSystem:i,label:e.label,dynamicBonds:e.dynamicBonds}),s=new $O(e);for(const e of o.operatorGroups){const t=e.selector(s);if(0===_O.structureCount(t))continue;const{units:n}=_O.unionStructure(t);for(const r of e.operators)for(const e of n)a.addWithOperator(e,r)}return a.getStructure()}))},e.buildSymmetryAssembly=function(e,t,n){return Tw.create("Build Symmetry Assembly",(async r=>{const o=e.models;if(1!==o.length)throw new Error("Can only build symmetry assemblies from structures based on 1 model.");const i=qh(),a=aG.Builder({label:e.label,representativeModel:o[0],dynamicBonds:e.dynamicBonds}),s=new $O(e);for(const e of t){const t=(l=e.asymIds,OU.generators.atoms({chainTest:OU.pred.and(OU.pred.eq((e=>WL.unit.operator_name(e.element)),_T.DefaultName),OU.pred.inSet((e=>WL.chain.label_asym_id(e.element)),l))})),r=t(s);if(0===_O.structureCount(r))continue;const{units:o}=_O.unionStructure(r);for(const{index:s,shift:[l,c,u]}of e.operators){const e=NU(n,s,l,c,u,i);for(const t of o)for(const n of e)a.addWithOperator(t,n)}}var l;return a.getStructure()}))},e.builderSymmetryMates=function(e,t){return Tw.create("Find Symmetry Mates",(n=>async function(e,t,n){const r=t.models;if(1!==r.length)throw new Error("Can only build symmetries from structures based on 1 model.");const o=xO.Provider.get(r[0]);if(!o)return t;const{spacegroup:i}=o;if(OT.isZero(i.cell))return t;e.shouldUpdate&&await e.update("Initialing...");const a=Wj.getCenter(r[0]),s=function(e,t){if(e._operators_333&&qh.equals(t,e._operators_333.ref))return e._operators_333.operators;return e._operators_333={ref:qh.clone(t),operators:LU(e,qh.create(-3,-3,-3),qh.create(3,3,3),t)},e._operators_333.operators}(o,a),l=t.lookup3d,c=new Set;function u(e,t){return`${e.invariantId}|${t.name}`}const d=aG.Builder({label:t.label,dynamicBonds:t.dynamicBonds}),{units:A}=t,f=qh.zero();for(const p of s){for(const e of A){const t=e.lookup3d.boundary.sphere;qh.transformMat4(f,t.center,p.matrix);const r=l.findUnitIndices(f[0],f[1],f[2],t.radius+n);for(let o=0,i=r.count;o<i;o++){if(!A[r.indices[o]].lookup3d.check(f[0],f[1],f[2],t.radius+n))continue;const i=u(e,p);c.has(i)||(d.addWithOperator(e,p),c.add(i))}}e.shouldUpdate&&await e.update("Building symmetry...")}return d.getStructure()}(n,e,t)))},e.buildSymmetryRange=function(e,t,n){return Tw.create("Build Symmetry",(r=>async function(e,t,n,r){const o=t.models;if(1!==o.length)throw new Error("Can only build symmetries from structures based on 1 model.");const i=xO.Provider.get(o[0]);if(!i)return t;const{spacegroup:a}=i;if(OT.isZero(a.cell))return t;const s=Wj.getCenter(o[0]),l=LU(i,n,r,s);return UU(t,l)}(0,e,t,n)))},e.buildNcs=function(e){return Tw.create("Build NCS",(t=>async function(e,t){const n=t.models;if(1!==n.length)throw new Error("Can only build NCS from structures based on 1 model.");const r=xO.Provider.get(n[0]);if(!r)return t;const o=r.ncsOperators;return o&&o.length?UU(t,o):t}(0,e)))},e.areUnitsEquivalent=t,e.UnitEquivalenceBuilder=n,e.computeTransformGroups=function(e){const t=n();for(const n of e.units)t.add(n.id,n);const r=[];for(const n of t.groups)r.push(BO.SymmetryGroup(n.map((t=>e.unitMap.get(t)))));return r},e.areTransformGroupsEquivalent=function(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;++n){const r=e[n].units,o=t[n].units;if(r.length!==o.length)return!1;if(e[n].hashCode!==t[n].hashCode)return!1;for(let e=0,t=r.length;e<t;e++)if(r[e].conformation!==o[e].conformation)return!1}return!0}}(FU||(FU={}));class GU{addToUnit(e,t){const n=this.unitMap.get(e);n?n[n.length]=t:(this.unitMap.set(e,[t]),this.ids[this.ids.length]=e),this.elementCount++}beginUnit(e){this.parentId=e,this.currentUnit=this.currentUnit.length>0?[]:this.currentUnit}addElement(e){this.currentUnit[this.currentUnit.length]=e,this.elementCount++}addElementRange(e,t,n){for(let r=t;r<n;r++)this.currentUnit[this.currentUnit.length]=e[r],this.elementCount++}commitUnit(){0!==this.currentUnit.length&&(this.ids[this.ids.length]=this.parentId,this.unitMap.set(this.parentId,this.currentUnit),this.parentId=-1)}setUnit(e,t){this.ids[this.ids.length]=e,this.unitMap.set(e,t),this.elementCount+=t.length}_getStructure(e){if(this.isEmpty)return aG.Empty;const t=[];wh(this.ids);const n=FU.UnitEquivalenceBuilder();for(let r=0,o=this.ids.length;r<o;r++){const o=this.ids[r],i=this.parent.unitMap.get(o);let a=this.unitMap.get(o),s=!1;e&&(this.isSorted||wh(a),a=Em.deduplicate(Em.ofSortedArray(this.currentUnit)),s=!0);const l=a.length;if(a.length===i.elements.length){t[t.length]=i,n.add(i.id,i);continue}!this.isSorted&&!s&&l>1&&wh(a);let c=i.getChild(Em.ofSortedArray(a));const u=n.add(c.id,c);c!==u&&(c=u.applyOperator(c.id,c.conformation.operator,!0)),t[t.length]=c}return aG.create(t,{parent:this.parent})}getStructure(){return this._getStructure(!1)}getStructureDeduplicate(){return this._getStructure(!0)}setSingletonLocation(e){const t=this.ids[0];e.unit=this.parent.unitMap.get(t),e.element=this.unitMap.get(t)[0]}get isEmpty(){return 0===this.elementCount}constructor(e,t){this.parent=e,this.isSorted=t,this.ids=[],this.unitMap=ny.Mutable(),this.parentId=-1,this.currentUnit=[],this.elementCount=0}}function jU(e,t){let n=1;for(;t--;)n*=e--;return n}class zU{move(){if(this.hasNext){let e=0,t=0,n=this.index;for(;n;n>>>=1,e++)1&n&&(this.value[t++]=this.array[e]);this.index=function(e){const t=e&-e,n=e+t;return n|((n&-n)/t>>1)-1}(this.index),this.hasNext=this.index<this.maxIndex}return this.value}constructor(e,t){this.array=e,this.hasNext=!1,this.index=(1<<t)-1,this.size=function(e,t){return t>e?0:jU(e,t)/jU(t,t)}(e.length,t),this.maxIndex=1<<e.length,this.value=new Array(t),this.hasNext=t>0&&t<=e.length}}function HU(e,t){const n=[],r=new zU(e,t);for(;r.hasNext;)n.push(r.move().slice());return n}const VU=[],qU={links:VU,terminalLinks:VU,elements:VU,partialElements:VU,getElementIndices:()=>VU,getLinkIndices:()=>VU,getTerminalLinkIndices:()=>VU},YU=rM("C"),XU=rM("O"),WU=[KP.elementFingerprint([YU,YU,YU,XU]),KP.elementFingerprint([YU,YU,YU,YU,XU]),KP.elementFingerprint([YU,YU,YU,YU,YU,XU]),KP.elementFingerprint([YU,YU,YU,YU,YU,YU,XU])];function KU(e,t){let n=-1,r=-1,o=-1,i=-1;const{elements:a}=e,{type_symbol:s,label_atom_id:l}=e.model.atomicHierarchy.atoms,{b:c,offset:u}=e.bonds;for(let d=0,A=t.length;d<A;++d){const e=a[t[d]];if(s.value(e)!==YU)continue;let A=0,f=0;for(let n=u[t[d]],r=u[t[d]+1];n<r;++n){const e=a[c[n]],t=s.value(e);t===XU?++A:t===YU&&++f}if(2===A){n=e;break}1===A&&1===f?r=e:l.value(e).startsWith("C1")?o=e:i=e}return-1!==n?n:-1!==r?r:-1!==o?o:-1!==i?i:a[t[0]]}function JU(e,t,n,r){const o=t.conformation;return qh.normalize(e,qh.sub(e,r,o.position(n,e))),e}function ZU(e,t){const{elements:n}=e,{label_atom_id:r}=e.model.atomicHierarchy.atoms;return r.value(n[t])}function $U(e,t){if(!t||!t.length)return;const{unit:n,all:r}=e,o=new Set,i=HU(Z_(new Array(t.length)),2);for(let a=0,s=i.length;a<s;++a){const e=i[a],s=r[t[e[0]]],l=r[t[e[1]]];Em.areIntersecting(s,l)&&KP.getAltId(n,s)===KP.getAltId(n,l)&&(o.add(t[e[0]]),o.add(t[e[1]]))}if(o.size){const e=[];for(let n=0,r=t.length;n<r;++n)o.has(t[n])||e.push(t[n]);return e}return t}function eG(e,t){return t.properties.saccharideComponentMap.get(e)}function tG(e,t,n){function r(e,t){return Rh(e.id,t)}function o(e,t,n){const o=[],i=e.get(r(t,n));if(void 0!==i)for(const r of i)tS(o,r);return o}const i=new Map;for(let l=0,c=e.length;l<c;++l){const{unit:t,ringIndex:n}=e[l],o=t.rings.all[n];for(let e=0,a=o.length;e<a;++e){const n=r(t,t.elements[o[e]]),a=i.get(n);void 0===a?i.set(n,[l]):a.push(l)}}const a=new Map;for(let l=0,c=t.length;l<c;++l){const n=t[l],{unit:o,ringIndex:i}=e[n.carbohydrateIndexA],s=o.rings.all[i];for(let e=0,t=s.length;e<t;++e){const t=r(o,o.elements[s[e]]),n=a.get(t);void 0===n?a.set(t,[l]):n.push(l)}}const s=new Map;for(let l=0,c=n.length;l<c;++l){const{fromCarbohydrate:t,carbohydrateIndex:o,elementUnit:i,elementIndex:a}=n[l];if(t){const{unit:t,ringIndex:n}=e[o],i=t.rings.all[n];for(let e=0,o=i.length;e<o;++e){const n=r(t,t.elements[i[e]]),o=s.get(n);void 0===o?s.set(n,[l]):o.push(l)}}else{const e=r(i,i.elements[a]),t=s.get(e);void 0===t?s.set(e,[l]):t.push(l)}}return{getElementIndices:function(e,t){return o(i,e,t)},getLinkIndices:function(e,t){return o(a,e,t)},getTerminalLinkIndices:function(e,t){return o(s,e,t)}}}const nG=YT(),rG=new lO("14"),oG=new lO("98");function iG(e){const{units:t}=e,n=function(e){return e>500?rG:oG}(t.length);n.reset();for(let r=0,o=t.length;r<o;r++){const e=t[r],o=e.boundary,i=e.conformation.operator;i.isIdentity?n.includeSphere(o.sphere):(YT.transform(nG,o.sphere,i.matrix),n.includeSphere(nG))}n.finishedIncludeStep();for(let r=0,o=t.length;r<o;r++){const e=t[r],o=e.boundary,i=e.conformation.operator;i.isIdentity?n.radiusSphere(o.sphere):(YT.transform(nG,o.sphere,i.matrix),n.radiusSphere(nG))}return{box:n.getBox(),sphere:n.getSphere()}}class aG{subsetBuilder(e){return new GU(this,e)}get elementCount(){return this.state.elementCount}get bondCount(){return-1===this.state.bondCount&&(this.state.bondCount=this.interUnitBonds.edgeCount+RP.getIntraUnitBondCount(this)),this.state.bondCount}get hasCustomProperties(){return!!this.state.customProps&&this.state.customProps.all.length>0}get customPropertyDescriptors(){return this.state.customProps||(this.state.customProps=new Zk),this.state.customProps}get currentPropertyData(){return this.state.propertyData||(this.state.propertyData=Object.create(null)),this.state.propertyData}get inheritedPropertyData(){return this.parent?this.parent.currentPropertyData:this.currentPropertyData}get polymerResidueCount(){return-1===this.state.polymerResidueCount&&(this.state.polymerResidueCount=function(e){const{units:t}=e;let n=0;for(let r=0,o=t.length;r<o;r++)n+=t[r].polymerElements.length;return n}(this)),this.state.polymerResidueCount}get polymerGapCount(){return-1===this.state.polymerGapCount&&(this.state.polymerGapCount=function(e){const{units:t}=e;let n=0;for(let r=0,o=t.length;r<o;r++)n+=t[r].gapElements.length/2;return n}(this)),this.state.polymerGapCount}get polymerUnitCount(){return-1===this.state.polymerUnitCount&&(this.state.polymerUnitCount=function(e){const{units:t}=e;let n=0;for(let r=0,o=t.length;r<o;r++)t[r].polymerElements.length>0&&(n+=1);return n}(this)),this.state.polymerUnitCount}get uniqueElementCount(){return-1===this.state.uniqueElementCount&&(this.state.uniqueElementCount=function(e){const{unitSymmetryGroups:t}=e;let n=0;for(let r=0,o=t.length;r<o;r++)n+=t[r].elements.length;return n}(this)),this.state.uniqueElementCount}get atomicResidueCount(){return-1===this.state.atomicResidueCount&&(this.state.atomicResidueCount=function(e){const{units:t}=e;let n=0;for(let r=0,o=t.length;r<o;r++){const e=t[r];if(!BO.isAtomic(e))continue;const{elements:o,residueIndex:i}=e;let a=-1,s=-1;for(let t=0,r=o.length;t<r;++t)a=i[o[t]],a!==s&&(n+=1,s=a)}return n}(this)),this.state.atomicResidueCount}get isCoarseGrained(){return this.models.some((e=>Wj.isCoarseGrained(e)))}get isEmpty(){return 0===this.units.length}get hashCode(){return-1!==this.state.hashCode?this.state.hashCode:this.computeHash()}get transformHash(){return-1!==this.state.transformHash||(this.state.transformHash=Fh(this.units.map((e=>e.id)))),this.state.transformHash}computeHash(){let e=23;for(let t=0,n=this.units.length;t<n;t++){const n=this.units[t];e=31*e+n.id|0,e=31*e+Em.hashCode(n.elements)|0}return e=31*e+this.elementCount|0,e=kh(e),-1===e&&(e=0),this.state.hashCode=e,e}elementLocations(){return new aG.ElementLocationIterator(this)}get root(){var e;return null!==(e=this.state.parent)&&void 0!==e?e:this}get parent(){return this.state.parent}get coordinateSystem(){return this.state.coordinateSystem}get label(){return this.state.label}get boundary(){return this.state.boundary||(this.state.boundary=iG(this)),this.state.boundary}get lookup3d(){return this.state.lookup3d||(this.state.lookup3d=new LO(this)),this.state.lookup3d}get interUnitBonds(){return this.state.interUnitBonds||(this.parent&&this.state.dynamicBonds===this.parent.state.dynamicBonds&&this.parent.state.interUnitBonds&&0===this.parent.state.interUnitBonds.edgeCount?this.state.interUnitBonds=new eR(new Map):this.state.interUnitBonds=MP(this,{ignoreWater:!this.dynamicBonds,ignoreIon:!this.dynamicBonds,validUnit:this.state.interBondsValidUnit,validUnitPair:this.state.interBondsValidUnitPair})),this.state.interUnitBonds}get dynamicBonds(){return this.state.dynamicBonds}get interBondsValidUnit(){return this.state.interBondsValidUnit}get interBondsValidUnitPair(){return this.state.interBondsValidUnitPair}get unitSymmetryGroups(){return this.state.unitSymmetryGroups||(this.state.unitSymmetryGroups=FU.computeTransformGroups(this)),this.state.unitSymmetryGroups}get unitSymmetryGroupsIndexMap(){return this.state.unitSymmetryGroupsIndexMap||(this.state.unitSymmetryGroupsIndexMap=BO.SymmetryGroup.getUnitSymmetryGroupsIndexMap(this.unitSymmetryGroups)),this.state.unitSymmetryGroupsIndexMap}get carbohydrates(){return this.state.carbohydrates||(this.state.carbohydrates=function(e){if(0===e.models.reduce(((e,t)=>e+t.properties.saccharideComponentMap.size),0))return qU;const t=[],n=[],r=[],o=[],i=new Map;function a(e,t,n){return`${e}|${t}|${n}`}function s(e,t){i.has(e)?i.get(e).push(t):i.set(e,[t])}function l(e,t){qh.sub(r[e].geometry.direction,r[t].geometry.center,r[e].geometry.center),qh.normalize(r[e].geometry.direction,r[e].geometry.direction)}const c=qh();function u(e,t,n){const o=n.conformation,i=r[e].geometry;qh.sub(i.direction,o.position(n.elements[t],c),i.center),qh.normalize(i.direction,i.direction)}for(let A=0,f=e.units.length;A<f;++A){const n=e.units[A];if(!BO.isAtomic(n))continue;const{model:i,rings:c}=n,{chainAtomSegments:u,residueAtomSegments:d,atoms:f}=i.atomicHierarchy,{label_comp_id:p}=f,h=ty.transientSegments(u,n.elements),g=ty.transientSegments(d,n.elements);let m;for(;h.hasNext;)for(g.setSegment(h.move());g.hasNext;){const{index:e}=g.move(),u=eG(p.value(d.offsets[e]),i);if(!u)continue;m||(m=WP.byFingerprintAndResidue(c,WU));const A=$U(c,m.get(e));if(!A||!A.length){o.push({unit:n,residueIndex:e,component:u});continue}const f=[];for(let t=0,o=A.length;t<o;++t){const o=c.all[A[t]],i=KU(n,o),l=qT.calculateMomentsAxes(XP(n,o)),d=qT.calculateNormalizedAxes(l),p=qh.copy(qh(),d.origin),h=qh.copy(qh(),d.dirC),g=JU(qh(),n,i,p);qh.orthogonalize(g,h,g);const m=KP.getAltId(n,o),y=r.length;f.push(y),s(a(e,n.id,m),y),m&&s(a(e,n.id,""),y),r.push({geometry:{center:p,normal:h,direction:g},component:u,ringIndex:A[t],altId:m,unit:n,residueIndex:e})}const h=HU(Z_(new Array(A.length)),2);for(let o=0,i=h.length;o<i;++o){const e=h[o],i=c.all[A[e[0]]],a=c.all[A[e[1]]];if(Uk.areVertexSetsConnected(n.bonds,i,a,3)){const n=f[e[0]],o=f[e[1]];r[n].altId===r[o].altId&&(l(n,o),l(o,n),t.push({carbohydrateIndexA:n,carbohydrateIndexB:o}),t.push({carbohydrateIndexA:o,carbohydrateIndexB:n}))}}}}function d(e,t){return i.get(a(e.getResidueIndex(t),e.id,function(e,t){const{elements:n}=e,{label_alt_id:r}=e.model.atomicHierarchy.atoms;return r.value(n[t])}(e,t)))||[]}for(let A=0,f=r.length;A<f;++A){const e=r[A],{unit:n}=e;for(let o=A+1;o<f;++o){const i=r[o];if(n!==i.unit||e.residueIndex===i.residueIndex)continue;const a=n.rings.all[e.ringIndex],s=n.rings.all[i.ringIndex];Uk.areVertexSetsConnected(n.bonds,a,s,3)&&(l(A,o),l(o,A),t.push({carbohydrateIndexA:A,carbohydrateIndexB:o}),t.push({carbohydrateIndexA:o,carbohydrateIndexB:A}))}}for(let A=0,f=e.units.length;A<f;++A){const r=e.units[A];BO.isAtomic(r)&&e.interUnitBonds.getConnectedUnits(r.id).forEach((r=>{r.connectedIndices.forEach((o=>{r.getEdges(o).forEach((i=>{let{props:a,indexB:s}=i;if(!VM.isCovalent(a.flag))return;const c=e.unitMap.get(r.unitA),A=e.unitMap.get(r.unitB),f=d(c,o),p=d(A,s);if(f.length>0&&p.length>0){const e=f.length,n=p.length;for(let r=0,i=Math.max(e,n);r<i;++r){const i=f[Math.min(r,e-1)],a=p[Math.min(r,n-1)],s=ZU(c,o);(s.startsWith("O1")||s.startsWith("C1"))&&l(i,a),t.push({carbohydrateIndexA:i,carbohydrateIndexB:a})}}else if(0===p.length)for(const e of f){const t=ZU(c,o);(t.startsWith("O1")||t.startsWith("C1"))&&u(e,s,A),n.push({carbohydrateIndex:e,elementIndex:s,elementUnit:A,fromCarbohydrate:!0})}else if(0===f.length)for(const e of p)n.push({carbohydrateIndex:e,elementIndex:o,elementUnit:c,fromCarbohydrate:!1})}))}))}))}return{links:t,terminalLinks:n,elements:r,partialElements:o,...tG(r,t,n)}}(this)),this.state.carbohydrates}get models(){return this.state.models||(this.state.models=function(e){const{units:t}=e,n=VD.create();for(const r of t)VD.add(n,r.model.id,r.model);return n.array}(this)),this.state.models}get uniqueResidueNames(){return this.state.uniqueResidueNames||(this.state.uniqueResidueNames=function(e){const{microheterogeneityCompIds:t}=WL.residue,n=new Set,r=Vk.create(e);for(const o of e.unitSymmetryGroups){const e=o.units[0];if(!BO.isAtomic(e))continue;const i=ty.transientSegments(e.model.atomicHierarchy.residueAtomSegments,e.elements);for(r.unit=e;i.hasNext;){const o=i.move();r.element=e.elements[o.start];const a=t(r);for(const e of a)n.add(e)}}return n}(this))}get uniqueElementSymbols(){return this.state.uniqueElementSymbols||(this.state.uniqueElementSymbols=function(e){const t=WL.atom.type_symbol,n=new Set,r=Vk.create(e);for(const o of e.unitSymmetryGroups){const e=o.units[0];if(BO.isAtomic(e)){r.unit=e;for(let o=0,i=e.elements.length;o<i;++o)r.element=e.elements[o],n.add(t(r))}}return n}(this))}get entityIndices(){return this.state.entityIndices||(this.state.entityIndices=function(e){const{units:t}=e,n=Vk.create(e),r=VD.create();for(const o of t){const e=0===o.kind?WL.entity.key:WL.coarse.entityKey;n.unit=o;const t=o.elements,i=ty.transientSegments(o.model.atomicHierarchy.chainAtomSegments,t);for(;i.hasNext;){const o=i.move();n.element=t[o.start];const a=e(n);VD.add(r,a,a)}}return wh(r.array),r.array}(this))}get uniqueAtomicResidueIndices(){return this.state.uniqueAtomicResidueIndices||(this.state.uniqueAtomicResidueIndices=function(e){const t=new Map,n=[],r=e.unitSymmetryGroups;for(const i of r){const e=i.units[0];if(!BO.isAtomic(e))continue;let r;t.has(e.model.id)?r=t.get(e.model.id):(r=VD.create(),n.push(e.model.id),t.set(e.model.id,r));const o=ty.transientSegments(e.model.atomicHierarchy.residueAtomSegments,e.elements);for(;o.hasNext;){const e=o.move();VD.add(r,e.index,e.index)}}const o=new Map;for(const i of n){const e=t.get(i).array;wh(e),o.set(i,e)}return o}(this))}get isAtomic(){for(const e of this.units)if(!BO.isAtomic(e))return!1;return!0}get hasAtomic(){for(const e of this.units)if(BO.isAtomic(e))return!0;return!1}get isCoarse(){for(const e of this.units)if(!BO.isCoarse(e))return!1;return!0}get hasCoarse(){for(const e of this.units)if(BO.isCoarse(e))return!0;return!1}get serialMapping(){return this.state.serialMapping||(this.state.serialMapping=function(e){const{units:t,elementCount:n,unitIndexMap:r}=e,o=new Uint32Array(t.length),i=new Uint32Array(n),a=new Uint32Array(n);for(let s=0,l=0,c=t.length;s<c;++s){o[s]=l;const{elements:e}=t[s];for(let t=0,n=e.length;t<n;++t){const n=l+t;i[n]=s,a[n]=e[t]}l+=e.length}return{cumulativeUnitElementCount:o,unitIndices:i,elementIndices:a,getSerialIndex:(e,t)=>o[r.get(e.id)]+ey.indexOf(e.elements,t)}}(this))}get model(){if(this.state.model)return this.state.model;if(this.state.representativeModel)return this.state.representativeModel;if(this.state.masterModel)return this.state.masterModel;const e=this.models;if(e.length>1)throw new Error("The structure is based on multiple models and has neither a master- nor a representative-model.");return this.state.model=e[0],this.state.model}get masterModel(){return this.state.masterModel}get representativeModel(){return this.state.representativeModel}hasElement(e){return!!this.unitMap.has(e.unit.id)&&Em.has(this.unitMap.get(e.unit.id).elements,e.element)}getModelIndex(e){return this.models.indexOf(e)}remapModel(e){const{dynamicBonds:t,interUnitBonds:n,parent:r}=this.state,o=[];for(const i of this.unitSymmetryGroups){const n=i.units[0].remapModel(e,t);o.push(n);for(let r=1,a=i.units.length;r<a;++r){const a=i.units[r];o.push(a.remapModel(e,t,n.props))}}return aG.create(o,{parent:null===r||void 0===r?void 0:r.remapModel(e),label:this.label,interUnitBonds:t?void 0:n,dynamicBonds:t,interBondsValidUnit:this.state.interBondsValidUnit,interBondsValidUnitPair:this.state.interBondsValidUnitPair,coordinateSystem:this.state.coordinateSystem,masterModel:this.state.masterModel,representativeModel:this.state.representativeModel})}asParent(){if(this._proxy)return this._proxy;if(this.parent){const e=this.parent.coordinateSystem.isIdentity?this.parent:aG.transform(this.parent,this.parent.coordinateSystem.inverse),t=this.coordinateSystem.isIdentity?e:aG.transform(e,this.coordinateSystem.matrix);this._proxy=new aG(t.units,t.unitMap,t.unitIndexMap,{...t.state,dynamicBonds:this.dynamicBonds},{child:this,target:this.parent})}else this._proxy=this;return this._proxy}get child(){return this._child}get target(){var e;return null!==(e=this._target)&&void 0!==e?e:this}constructor(e,t,n,r,o){this.units=e,this.unitMap=t,this.unitIndexMap=n,this.state=r,this._child=null===o||void 0===o?void 0:o.child,this._target=null===o||void 0===o?void 0:o.target,this._proxy=void 0}}function sG(e,t,n){return e[t].id-e[n].id}!function(e){function t(e){return{kind:"structure-loci",structure:e}}function n(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=ny.Mutable(),o=ny.Mutable();let i=0,a=!0,s=t.length>0?t[0].id:0;for(let e=0,c=t.length;e<c;e++){const n=t[e];r.set(n.id,n),i+=n.elements.length,n.id<s&&(a=!1),s=n.id}a||_h(t,0,t.length,sG,yh);for(let e=0,c=t.length;e<c;e++)o.set(t[e].id,e);const l={hashCode:-1,transformHash:-1,elementCount:i,bondCount:-1,uniqueElementCount:-1,atomicResidueCount:-1,polymerResidueCount:-1,polymerGapCount:-1,polymerUnitCount:-1,dynamicBonds:!1,coordinateSystem:_T.Default,label:""};return n.parent&&(l.parent=n.parent.parent||n.parent),n.interUnitBonds&&(l.interUnitBonds=n.interUnitBonds),n.interBondsValidUnit?l.interBondsValidUnit=n.interBondsValidUnit:n.parent&&(l.interBondsValidUnit=n.parent.interBondsValidUnit),n.interBondsValidUnitPair?l.interBondsValidUnitPair=n.interBondsValidUnitPair:n.parent&&(l.interBondsValidUnitPair=n.parent.interBondsValidUnitPair),n.dynamicBonds?l.dynamicBonds=n.dynamicBonds:n.parent&&(l.dynamicBonds=n.parent.dynamicBonds),n.coordinateSystem?l.coordinateSystem=n.coordinateSystem:n.parent&&(l.coordinateSystem=n.parent.coordinateSystem),n.label?l.label=n.label:n.parent&&(l.label=n.parent.label),n.masterModel?l.masterModel=n.masterModel:n.parent&&(l.masterModel=n.parent.masterModel),n.representativeModel?l.representativeModel=n.representativeModel:n.parent&&(l.representativeModel=n.parent.representativeModel),new e(t,r,o,l)}e.Empty=n([]),e.Loci=t,e.toStructureElementLoci=function(e){const t=[];for(const n of e.units)t.push({unit:n,indices:Gg.ofBounds(0,n.elements.length)});return cG(e,t)},e.toSubStructureElementLoci=function(e,t){return _O.toLociWithSourceUnits(_O.Singletons(e,t))},e.isLoci=function(e){return!!e&&"structure-loci"===e.kind},e.areLociEqual=function(e,t){return e.structure===t.structure},e.isLociEmpty=function(e){return e.structure.isEmpty},e.remapLoci=function(e,n){return n===e.structure?e:t(n)},e.create=n,e.ofTrajectory=async function(t,r){if(0===t.frameCount)return e.Empty;const i=[];let a,s=0;for(let e=0,n=t.frameCount;e<n;++e){const n=await Tw.resolveInContext(t.getFrameAtIndex(e),r);a||(a=n);const l=o(n);for(let e=0,t=l.units.length;e<t;++e){const t=l.units[e],n=t.invariantId+s,r=t.chainGroupId+s,o=BO.create(i.length,n,r,t.traits,t.kind,t.model,t.conformation.operator,t.elements);i.push(o)}s=i.length}return n(i,{representativeModel:a,label:a.label})};const r=!1;function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.atomicHierarchy.chainAtomSegments,{index:o}=e.atomicHierarchy,{auth_asym_id:d}=e.atomicHierarchy.chains,{atomicChainOperatorMappinng:A}=e,f=new u({label:e.label,...t});for(let c=0;c<n.count;c++){const t=A.get(c)||_T.Default,u=n.offsets[c];let p=kN.chainResidueCount(e.atomicHierarchy,c)===n.offsets[c+1]-n.offsets[c],h=!1;if(i(e,c))for(;c+1<n.count&&i(e,c+1);){if(A.get(c)!==A.get(c+1))break;h=!0,c++}else for(;c+1<n.count&&n.offsets[c+1]-n.offsets[c]===1&&n.offsets[c+2]-n.offsets[c+1]===1;){p=!0;if(o.getEntityFromChain(c)!==o.getEntityFromChain(c+1))break;if(d.value(c)!==d.value(c+1))break;if(A.get(c)!==A.get(c+1))break;h=!0,c++}const g=Em.ofBounds(u,n.offsets[c+1]);r?p&&!a(e,c)?s(e,g,f,h,t):g.length>2e5||i(e,c)?l(e,g,f,h,t):f.addUnit(0,e,t,g,h?BO.Trait.MultiChain:BO.Trait.None):f.addUnit(0,e,t,g,h?BO.Trait.MultiChain:BO.Trait.None)}const p=e.coarseHierarchy;return p.isDefined&&(p.spheres.count>0&&c(f,e,e.coarseHierarchy.spheres,1),p.gaussians.count>0&&c(f,e,e.coarseHierarchy.gaussians,2)),f.getStructure()}function i(e,t){const n=e.atomicHierarchy.index.getEntityFromChain(t);return"water"===e.entities.data.type.value(n)}function a(e,t){const n=e.atomicHierarchy.index.getEntityFromChain(t);return"polymer"===e.entities.data.type.value(n)}function s(e,t,n,r,o){const{x:i,y:a,z:s}=e.atomicConformation,l={x:i,y:a,z:s,indices:t},c=ZT(l,bO(l),8192),{offset:u,count:d,array:A}=c.buckets,f=(r?BO.Trait.MultiChain:BO.Trait.None)|(u.length>1?BO.Trait.Partitioned:BO.Trait.None);n.beginChainGroup();for(let p=0,h=u.length;p<h;p++){const r=u[p],i=new Int32Array(d[p]);for(let e=0,n=d[p];e<n;e++)i[e]=t[A[r+e]];n.addUnit(0,e,o,Em.ofSortedArray(i),f)}n.endChainGroup()}function l(e,t,n,r,o){const{residueAtomSegments:i}=e.atomicHierarchy,a=[],s=[],l=ty.transientSegments(i,t);for(;l.hasNext;){const e=l.move();a[a.length]=t[e.start],s[s.length]=t[e.end]}const c=512*(s[0]-a[0]),{x:u,y:d,z:A}=e.atomicConformation,f={x:u,y:d,z:A,indices:Em.ofSortedArray(a)},p=ZT(f,bO(f),c),{offset:h,count:g,array:m}=p.buckets,y=(r?BO.Trait.MultiChain:BO.Trait.None)|(h.length>1?BO.Trait.Partitioned:BO.Trait.None);n.beginChainGroup();for(let v=0,b=h.length;v<b;v++){const t=h[v],r=[];for(let e=0,n=g[v];e<n;e++){const n=m[t+e];for(let e=a[n],t=s[n];e<t;e++)r[r.length]=e}n.addUnit(0,e,o,Em.ofSortedArray(new Int32Array(r)),y)}n.endChainGroup()}function c(e,t,n,r){const{chainElementSegments:o}=n;for(let i=0;i<o.count;i++){const n=Em.ofBounds(o.offsets[i],o.offsets[i+1]);e.addUnit(r,t,_T.Default,n,BO.Trait.None)}}e.ofModel=o,e.transform=function(e,t){if(Yh.isIdentity(t))return e;if(!Yh.isRotationAndTranslation(t,_T.RotationTranslationEpsilon))throw new Error("Only rotation/translation combination can be applied.");const r=[];for(const n of e.units){const e=n.conformation.operator,o=_T.create(e.name,t,e);r.push(n.applyOperator(n.id,o))}const o=e.coordinateSystem;return n(r,{parent:e,coordinateSystem:_T.compose(_T.create(o.name,t,o),o)})};class u{beginChainGroup(){this.chainGroupId++,this.inChainGroup=!0}endChainGroup(){this.inChainGroup=!1}addUnit(e,t,n,r,o,i){void 0===i&&(i=this.invariantId());const a=this.inChainGroup?this.chainGroupId:++this.chainGroupId,s=BO.create(this.units.length,i,a,o,e,t,n,r);return this.add(s)}add(e){if(1===e.elements.length){e.conformation.position(e.elements[0],this.p);const t=[e.invariantId,this.p[0],this.p[1],this.p[2]].join("|");if(this.singleElementUnits.has(t))return this.singleElementUnits.get(t);this.singleElementUnits.set(t,e)}return this.units.push(e),e}addWithOperator(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.add(e.applyOperator(this.units.length,t,n))}getStructure(){return n(this.units,this.props)}get isEmpty(){return 0===this.units.length}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props=e,this.units=[],this.invariantId=Bp(),this.chainGroupId=-1,this.inChainGroup=!1,this.p=qh(),this.singleElementUnits=new Map}}function d(e,t){if(e===t)return!0;if(e.elementCount!==t.elementCount)return!1;const n=e.units.length;if(n!==t.units.length)return!1;for(let r=0;r<n;r++)if(e.units[r].id!==t.units[r].id)return!1;return!0}function A(e,t){return e===t||e.hashCode===t.hashCode&&FU.areTransformGroupsEquivalent(e.unitSymmetryGroups,t.unitSymmetryGroups)}e.StructureBuilder=u,e.Builder=function(){return new u(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})},e.hashCode=function(e){return e.hashCode},e.conformationHash=function(e){return Mh(e.units.map((e=>BO.conformationId(e))).join("|"))},e.areUnitIdsEqual=d,e.areUnitIdsAndIndicesEqual=function(e,t){if(e===t)return!0;if(!d(e,t))return!1;for(let n=0,r=e.units.length;n<r;n++)if(!Em.areEqual(e.units[n].elements,t.units[n].elements))return!1;return!0},e.areHierarchiesEqual=function(e,t){if(e.hashCode!==t.hashCode)return!1;const n=e.models.length;if(n!==t.models.length)return!1;for(let r=0;r<n;r++)if(!Wj.areHierarchiesEqual(e.models[r],t.models[r]))return!1;return!0},e.areEquivalent=A,e.areRootsEquivalent=function(e,t){return A(e.root,t.root)},e.areRootsEqual=function(e,t){return e.root===t.root};e.ElementLocationIterator=class{move(){return this.advance(),this.current.element=this.elements[this.idx],this.current}advance(){if(this.idx<this.maxIdx)return this.idx++,void(this.idx===this.maxIdx&&(this.hasNext=this.unitIndex+1<this.structure.units.length));this.idx=0,this.unitIndex++,this.unitIndex>=this.structure.units.length?this.hasNext=!1:(this.current.unit=this.structure.units[this.unitIndex],this.elements=this.current.unit.elements,this.maxIdx=this.elements.length-1,0===this.maxIdx&&(this.hasNext=this.unitIndex+1<this.structure.units.length))}constructor(e){this.structure=e,this.unitIndex=0,this.maxIdx=0,this.idx=-1,this.current=Vk.create(e),this.hasNext=e.elementCount>0,this.hasNext&&(this.elements=e.units[0].elements,this.maxIdx=this.elements.length-1,this.current.unit=e.units[0])}};const f=qh();function p(e,t,n){const{elements:r,conformation:o}=e,i=f;let a=Number.MAX_VALUE;for(let s=0,l=r.length;s<l;s++){const e=r[s],l=qh.distance(t,o.position(e,i))-n-o.r(e);l<a&&(a=l)}return a}function h(e,t,n){const{units:r}=e;let o=Number.MAX_VALUE;for(let i=0,a=r.length;i<a;i++){const e=p(r[i],t,n);e<o&&(o=e)}return o}e.minDistanceToPoint=h;const g=qh();function m(e){return e.unitSymmetryGroups.filter((e=>e.units[0].polymerElements.length>0))}let y;e.distance=function(e,t){if(0===e.elementCount||0===t.elementCount)return 0;const{units:n}=e;let r=Number.MAX_VALUE;for(let o=0,i=n.length;o<i;o++){const e=n[o],{elements:i,conformation:a}=e;for(let n=0,o=i.length;n<o;n++){const e=i[n],o=h(t,a.position(e,g),a.r(e));o<r&&(r=o)}}return r},e.elementDescription=function(e){return 1===e.elementCount?"1 element":`${e.elementCount} elements`},e.validUnitPair=function(e,t,n){return e.masterModel?t.model===n.model||t.model===e.masterModel||n.model===e.masterModel:t.model===n.model},e.eachUnitPair=function(e,t,n){const{maxRadius:r,validUnit:o,validUnitPair:i}=n;if(!e.units.some((e=>o(e))))return;const a=e.lookup3d,s=qh();for(const l of e.units){if(!o(l))continue;const n=l.boundary.sphere;qh.transformMat4(s,n.center,l.conformation.operator.matrix);const c=a.findUnitIndices(s[0],s[1],s[2],n.radius+r);for(let r=0;r<c.count;r++){const n=e.units[c.indices[r]];l.id>=n.id||o(n)&&i(l,n)&&(n.elements.length>=l.elements.length?t(l,n):t(n,l))}}},e.eachAtomicHierarchyElement=function(e,t){let{chain:n,residue:r,atom:o}=t;const i=Vk.create(e);for(const a of e.units){if(0!==a.kind)continue;i.unit=a;const{elements:e}=a,t=ty.transientSegments(a.model.atomicHierarchy.chainAtomSegments,e),s=ty.transientSegments(a.model.atomicHierarchy.residueAtomSegments,e);for(;t.hasNext;){const a=t.move();if(n&&(i.element=e[a.start],n(i)),r||o)for(s.setSegment(a);s.hasNext;){const t=s.move();if(r&&(i.element=e[t.start],r(i)),o)for(let n=t.start,r=t.end;n<r;n++)i.element=e[n],o(i)}}}},e.DefaultSizeThresholds={smallResidueCount:10,mediumResidueCount:5e3,largeResidueCount:3e4,highSymmetryUnitCount:10,fiberResidueCount:15},function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large",e[e.Huge=3]="Huge",e[e.Gigantic=4]="Gigantic"}(y=e.Size||(e.Size={})),e.getSize=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const o={...e.DefaultSizeThresholds,...n};return t.polymerResidueCount>=o.largeResidueCount*r?function(e,t){const n=m(e);return n.length>=1&&n[0].units.length>t.highSymmetryUnitCount}(t,o)?y.Huge:y.Gigantic:function(e,t){const n=m(e);return 1===n.length&&n[0].units.length>2&&n[0].units[0].polymerElements.length<t.fiberResidueCount}(t,o)||t.polymerResidueCount<o.smallResidueCount*r?y.Small:t.polymerResidueCount<o.mediumResidueCount*r?y.Medium:y.Large},e.Index=TL.createSimple("index","root"),e.MaxIndex=TL.createSimple("max_index","root");const v="__PrincipalAxes__";e.getPrincipalAxes=function(t){if(t.currentPropertyData[v])return t.currentPropertyData[v];const n=cG.getPrincipalAxes(e.toStructureElementLoci(t));return t.currentPropertyData[v]=n,n}}(aG||(aG={}));const lG=cg.diff;function cG(e,t){return{kind:"element-loci",structure:e,elements:t}}var uG,dG,AG;!function(e){function t(e){for(const t of e.elements)if(ey.size(t.indices)>0)return!1;return!0}function n(e){let t=0;for(const{indices:n}of e.elements)t+="number"===typeof n?lG(n):n.length;return t}function r(n){return t(n)?n:e(n.structure,[{unit:n.elements[0].unit,indices:ey.ofSingleton(ey.start(n.elements[0].indices))}])}function o(e){return e.length>3&&Em.isRange(e)?Gg.ofRange(e[0],e[e.length-1]):Em.ofSortedArray(e)}function i(t,n){const r=[],i=new Set;for(const e of t.elements)if(s(e))r[r.length]=e;else if(0===e.unit.kind){const t=e.unit.elements,a=e.unit.model.atomicHierarchy,{label_alt_id:s}=e.unit.model.atomicHierarchy.atoms,{index:l,offsets:c}=a.residueAtomSegments,u=[],d=e.indices,A=ey.size(d);let f=0;for(;f<A;){i.clear();const e=t[ey.getAt(d,f)],r=l[e];for(i.add(s.value(e)),f++;f<A;){const e=t[ey.getAt(d,f)];if(l[e]!==r)break;i.add(s.value(e)),f++}const o=i.has("");for(let a=c[r],l=c[r+1];a<l;a++){const e=ey.indexOf(t,a);if(e>=0){const t=s.value(a);n&&!o&&t&&!i.has(t)||(u[u.length]=e)}}}r[r.length]={unit:e.unit,indices:o(u)}}else r[r.length]=e;return e(t.structure,r)}function a(e){switch(e.kind){case 0:return e.model.atomicHierarchy.chainAtomSegments;case 1:return e.model.coarseHierarchy.spheres.chainElementSegments;case 2:return e.model.coarseHierarchy.gaussians.chainElementSegments}}function s(e){return e.unit.elements.length===ey.size(e.indices)}function l(e,t,n){const{index:r}=a(e),i=e.elements;let s=0;for(let o=0,a=i.length;o<a;o++){const e=r[i[o]];t.has(e)&&s++}if(s===e.elements.length)return void(n[n.length]={unit:e,indices:Gg.ofBounds(0,s)});const l=new Int32Array(s);s=0;for(let o=0,a=i.length;o<a;o++){const e=r[i[o]];t.has(e)&&(l[s++]=o)}l.length>0&&(n[n.length]={unit:e,indices:o(l)})}function c(e,t,n,r,o){const{index:i}=a(e.elements[0].unit),s=new Set;for(let a=t;a<n;a++){const t=e.elements[a],n=t.indices,r=t.unit.elements;for(let e=0,o=ey.size(n);e<o;e++)s.add(i[r[ey.getAt(n,e)]])}if(r){const t=e.elements[0].unit;for(const n of e.structure.units)BO.areSameChainOperatorGroup(n,t)&&l(n,s,o)}else for(let a=t;a<n;a++)l(e.elements[a].unit,s,o)}function u(t){const n=[];for(let e=0,r=t.elements.length;e<r;e++){const o=t.elements[e];if(BO.Traits.is(o.unit.traits,BO.Trait.Partitioned)){const i=e;for(;e<r&&BO.areSameChainOperatorGroup(t.elements[e].unit,o.unit);)e++;const a=e;e--,c(t,i,a,!0,n)}else s(o)?n[n.length]=o:c(t,e,e+1,!1,n)}return e(t.structure,n)}function d(e){return`${e.unit.model.id}|${WL.entity.id(e)}`}function A(e,t){const n=[];for(let r=0,o=ey.size(t);r<o;++r)n.push(e[ey.getAt(t,r)]);return Em.ofSortedArray(n)}function f(e,t){return Em.isRange(e)&&Em.areEqual(e,t)?Gg.ofLength(e.length):o(Em.indicesOf(e,t))}e.is=function(e){return!!e&&"element-loci"===e.kind},e.areEqual=function(e,t){if(e.structure!==t.structure)return!1;if(e.elements.length!==t.elements.length)return!1;for(let n=0,r=e.elements.length;n<r;++n){const r=e.elements[n],o=t.elements[n];if(r.unit.id!==o.unit.id)return!1;if(!ey.areEqual(r.indices,o.indices))return!1}return!0},e.isEmpty=t,e.isWholeStructure=function(e){return n(e)===e.structure.elementCount},e.size=n,e.all=function(t){return e(t,t.units.map((e=>({unit:e,indices:ey.ofBounds(0,e.elements.length)}))))},e.none=function(t){return e(t,[])},e.getFirstLocation=function(e,n){if(t(e))return;const r=e.elements[0].unit,o=r.elements[ey.getAt(e.elements[0].indices,0)];return n?(n.structure=e.structure,n.unit=e.elements[0].unit,n.element=o,n):Vk.create(e.structure,r,o)},e.firstElement=r,e.firstResidue=function(e){return t(e)?e:i(r(e))},e.firstChain=function(e){return t(e)?e:u(r(e))},e.toStructure=function(e){const t=[];for(const n of e.elements){const{unit:e,indices:r}=n,o=new Int32Array(ey.size(r));ey.forEach(r,((t,n)=>o[n]=e.elements[t])),t.push(e.getChild(Em.ofSortedArray(o)))}return aG.create(t,{parent:e.structure.parent})},e.forEachLocation=function(t,n){if(e.isEmpty(t))return;const r=Vk.create(t.structure);for(const e of t.elements){const{unit:t,indices:o}=e;r.unit=t;const{elements:i}=e.unit;for(let e=0,a=ey.size(o);e<a;e++)r.element=i[ey.getAt(o,e)],n(r)}},e.remap=function(t,n){if(n===t.structure)return t;const r=[];return t.elements.forEach((e=>{if(!n.unitMap.has(e.unit.id))return;const t=n.unitMap.get(e.unit.id),o=ey.indexedIntersect(e.indices,e.unit.elements,t.elements);ey.size(o)>0&&r.push({unit:t,indices:o})})),e(n,r)},e.union=function t(n,r){if(n.elements.length>r.elements.length)return t(r,n);if(e.isEmpty(n))return r;const o=new Map;for(const e of n.elements)o.set(e.unit.id,e.indices);const i=[];for(const e of r.elements)o.has(e.unit.id)?(i[i.length]={unit:e.unit,indices:ey.union(o.get(e.unit.id),e.indices)},o.delete(e.unit.id)):i[i.length]=e;return o.forEach(((e,t)=>{i[i.length]={unit:n.structure.unitMap.get(t),indices:e}})),e(n.structure,i)},e.subtract=function(t,n){const r=new Map;for(const e of n.elements)r.set(e.unit.id,e.indices);const o=[];for(const e of t.elements)if(r.has(e.unit.id)){const t=ey.subtract(e.indices,r.get(e.unit.id));if(0===ey.size(t))continue;o[o.length]={unit:e.unit,indices:t}}else o[o.length]=e;return e(t.structure,o)},e.intersect=function(t,n){const r=new Map;for(const e of t.elements)r.set(e.unit.id,e.indices);const o=[];for(const e of n.elements){if(!r.has(e.unit.id))continue;const t=ey.intersect(r.get(e.unit.id),e.indices);0!==ey.size(t)&&(o[o.length]={unit:e.unit,indices:t})}return e(t.structure,o)},e.areIntersecting=function t(n,r){if(n.elements.length>r.elements.length)return t(r,n);if(e.isEmpty(n))return e.isEmpty(r);const o=new Map;for(const e of n.elements)o.set(e.unit.id,e.indices);for(const e of r.elements)if(o.has(e.unit.id)&&ey.areIntersecting(o.get(e.unit.id),e.indices))return!0;return!1},e.isSubset=function(t,n){if(e.isEmpty(t))return e.isEmpty(n);const r=new Map;for(const e of t.elements)r.set(e.unit.id,e.indices);let o=!1;for(const e of n.elements)if(r.has(e.unit.id)){if(!ey.isSubset(r.get(e.unit.id),e.indices))return!1;o=!0}return o},e.extendToWholeResidues=i,e.extendToWholeChains=u,e.extendToWholeEntities=function(t){const n=[],r=Vk.create(t.structure),o=new Set,{units:i}=t.structure;for(let e=0,a=t.elements.length;e<a;e++){const n=t.elements[e];r.unit=n.unit,r.element=n.unit.elements[0],o.add(d(r))}for(let e=0,a=i.length;e<a;++e){const t=i[e];if(r.unit=t,r.element=t.elements[0],o.has(d(r))){const e=ey.ofBounds(0,t.elements.length);n[n.length]={unit:t,indices:e}}}return e(t.structure,n)},e.extendToWholeModels=function(t){const n=[],r=new Set,{units:o}=t.structure;for(let e=0,i=t.elements.length;e<i;e++){const n=t.elements[e];r.add(n.unit.model.id)}for(let e=0,i=o.length;e<i;++e){const t=o[e];if(r.has(t.model.id)){const e=ey.ofBounds(0,t.elements.length);n[n.length]={unit:t,indices:e}}}return e(t.structure,n)},e.extendToAllInstances=function(t){const n=[],r=new Map;for(let e=0,o=t.elements.length;e<o;e++){const n=t.elements[e],{model:o}=n.unit,i=A(n.unit.elements,n.indices);r.has(o)?r.set(o,Em.union(i,r.get(o))):r.set(o,i)}for(let e=0,o=t.structure.units.length;e<o;++e){const o=t.structure.units[e],i=r.get(o.model);if(!i)continue;const a=f(o.elements,i);ey.size(a)&&(n[n.length]={unit:o,indices:a})}return e(t.structure,n)},e.extendToWholeOperators=function(t){const n=[],r=new Set,{units:o}=t.structure;for(let e=0,i=t.elements.length;e<i;e++){const n=t.elements[e];r.add(n.unit.conformation.operator.name)}for(let e=0,i=o.length;e<i;++e){const t=o[e];if(r.has(t.conformation.operator.name)){const e=ey.ofBounds(0,t.elements.length);n[n.length]={unit:t,indices:e}}}return e(t.structure,n)};const p=new lO("98"),h=qh();e.getBoundary=function(e,t){p.reset();for(const n of e.elements){const{indices:e}=n,{elements:r,conformation:o}=n.unit;for(let n=0,i=ey.size(e);n<i;n++){const i=r[ey.getAt(e,n)];o.position(i,h),t&&qh.transformMat4(h,h,t),p.includePositionRadius(h,o.r(i))}}p.finishedIncludeStep();for(const n of e.elements){const{indices:e}=n,{elements:r,conformation:o}=n.unit;for(let n=0,i=ey.size(e);n<i;n++){const i=r[ey.getAt(e,n)];o.position(i,h),t&&qh.transformMat4(h,h,t),p.radiusPositionRadius(h,o.r(i))}}return{box:p.getBox(),sphere:p.getSphere()}};const g=qh();function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(const r of e.elements){const{indices:e}=r,{elements:o,conformation:i}=r.unit,a=ey.size(e);for(let r=0;r<a;r++){const a=o[ey.getAt(e,r)];i.position(a,g),qh.toArray(g,t,n+3*r)}n+=3*a}return t}function y(e,t){return BO.isAtomic(e)?e.model.atomicHierarchy.atomSourceIndex.value(t):t}function v(e,t,n,r,o){wh(t);const i=[],a=[];let s=0;const l=t.length;for(;s<l;){const e=s;for(s++;s<l&&t[s-1]+1===t[s];)s++;const n=s;if(n-e>12)i[i.length]=t[e],i[i.length]=t[n-1];else for(let r=e;r<n;r++)a[a.length]=t[r]}return n?{atom:{set:a,ranges:i},chain:{opName:[e]},entity:{modelLabel:r,modelIndex:o}}:{atom:{set:a,ranges:i},chain:{opName:[e]}}}e.toPositionsArray=m,e.getPrincipalAxes=function(e){const t=n(e),r=m(e,new Float32Array(3*t));return qT.ofPositions(r)},e.getPrincipalAxesMany=function(e){let t=0;e.forEach((e=>{t+=n(e)}));const r=new Float32Array(3*t);let o=0;return e.forEach((e=>{m(e,r,o),o+=3*n(e)})),qT.ofPositions(r)},e.toExpression=function(t){if(e.isEmpty(t))return FQ.struct.generator.empty();const n=t.structure.models,r=new Map;for(const e of t.elements){const{indices:t}=e,{elements:n}=e.unit,o=e.unit.conformation.operator.name;let i;r.has(o)?i=r.get(o).xs:(i=VD.create(),r.set(o,{modelLabel:e.unit.model.label,modelIndex:e.unit.model.modelNum,xs:i}));for(let r=0,a=ey.size(t);r<a;r++){const o=y(e.unit,n[ey.getAt(t,r)]);VD.add(i,o,o)}}const o=[],i=r.keys();for(;;){const e=i.next();if(e.done)break;const t=r.get(e.value);o.push(v(e.value,t.xs.array,n.length>1,t.modelLabel,t.modelIndex))}const a=new Map;for(let e=0,l=o.length;e<l;++e){const t=o[e],n=`${Qh(Fh(t.atom.ranges),Fh(t.atom.set))}|${t.entity?t.entity.modelLabel+t.entity.modelIndex:""}`;a.has(n)?a.get(n).chain.opName.push(...t.chain.opName):a.set(n,t)}const s=[];return a.forEach((e=>{const{ranges:t,set:n}=e.atom,{opName:r}=e.chain,o=FQ.struct.atomProperty.core.operatorName(),i=FQ.struct.atomProperty.core.sourceIndex(),a=[];n.length>0&&(a[a.length]=FQ.core.set.has([FQ.core.type.set(n),i]));for(let s=0,l=t.length/2;s<l;s++)a[a.length]=FQ.core.rel.inRange([i,t[2*s],t[2*s+1]]);if(e.entity){const{modelLabel:t,modelIndex:n}=e.entity;s.push(FQ.struct.generator.atomGroups({"atom-test":a.length>1?FQ.core.logic.or(a):a[0],"chain-test":r.length>1?FQ.core.set.has([FQ.core.type.set(r),o]):FQ.core.rel.eq([o,r[0]]),"entity-test":FQ.core.logic.and([FQ.core.rel.eq([FQ.struct.atomProperty.core.modelLabel(),t]),FQ.core.rel.eq([FQ.struct.atomProperty.core.modelIndex(),n])])}))}else s.push(FQ.struct.generator.atomGroups({"atom-test":a.length>1?FQ.core.logic.or(a):a[0],"chain-test":r.length>1?FQ.core.set.has([FQ.core.type.set(r),o]):FQ.core.rel.eq([o,r[0]])}))})),FQ.struct.modifier.union([1===s.length?s[0]:FQ.struct.combinator.merge(s.map((e=>FQ.struct.modifier.union([e]))))])}}(cG||(cG={})),function(e){function t(){return{elementCount:0,conformationCount:0,residueCount:0,chainCount:0,unitCount:0,structureCount:0,firstElementLoc:Vk.create(void 0),firstConformationLoc:Vk.create(void 0),firstResidueLoc:Vk.create(void 0),firstChainLoc:Vk.create(void 0),firstUnitLoc:Vk.create(void 0),firstStructureLoc:Vk.create(void 0)}}function n(e,t,n){const r=e.get(t)||0;e.set(t,r+n)}function r(e,t,r){const{indices:o,unit:i}=r,{elements:a}=i,s=ey.size(o),l=new Map,c=new Map;if(s>0&&Vk.set(e.firstElementLoc,t,i,a[ey.start(o)]),s===a.length)e.unitCount+=1,1===e.unitCount&&Vk.set(e.firstUnitLoc,t,i,a[ey.start(o)]);else if(1===s){if(BO.Traits.is(i.traits,BO.Trait.MultiChain))return;e.elementCount+=1,1===e.elementCount&&Vk.set(e.firstElementLoc,t,i,a[ey.start(o)])}else if(BO.isAtomic(i)){const{index:r,offsets:u}=i.model.atomicHierarchy.residueAtomSegments,{label_alt_id:d}=i.model.atomicHierarchy.atoms;let A=0;for(;A<s;){l.clear();let f=0;const p=a[ey.getAt(o,A)],h=r[p];for(n(l,d.value(p),1),++A,++f;A<s;){const e=a[ey.getAt(o,A)];if(r[e]!==h)break;n(l,d.value(e),1),++A,++f}if(u[h+1]-u[h]===f)e.residueCount+=1,1===e.residueCount&&Vk.set(e.firstResidueLoc,t,i,u[h]);else{c.clear();for(let e=u[h],t=u[h+1];e<t;++e)n(c,d.value(e),1);c.get("")===l.get("")&&l.forEach(((n,r)=>{if(c.get(r)===n){if(""!==r&&(e.conformationCount+=1,1===e.conformationCount))for(let n=u[h],o=u[h+1];n<o;++n)if(r===d.value(n)){Vk.set(e.firstConformationLoc,t,i,n);break}f-=n}})),e.elementCount+=f}}}else e.elementCount+=s,1===e.elementCount&&Vk.set(e.firstElementLoc,t,i,a[ey.start(o)])}function o(e,t,n){const{indices:r,unit:o}=n,i=ey.size(r);if(0===i)return;const{elements:a}=o;if(!BO.Traits.is(o.traits,BO.Trait.MultiChain))return void(i===a.length&&(e.chainCount+=1,1===e.chainCount&&Vk.set(e.firstChainLoc,t,o,a[ey.start(r)])));const s=BO.isAtomic(o)?o.model.atomicHierarchy.chainAtomSegments:BO.isSpheres(o)?o.model.coarseHierarchy.spheres.chainElementSegments:BO.isGaussians(o)?o.model.coarseHierarchy.gaussians.chainElementSegments:void 0;if(!s)return void console.warn("StructureElement loci stats: unknown unit type");const{index:l,offsets:c}=s;let u=0;for(;u<i;){let n=0;const s=a[ey.getAt(r,u)],d=l[s];for(++u,++n;u<i;){if(l[a[ey.getAt(r,u)]]!==d)break;++u,++n}c[d+1]-c[d]===n?(e.chainCount+=1,1===e.chainCount&&Vk.set(e.firstChainLoc,t,o,c[d])):1===i&&(e.elementCount+=1,1===e.elementCount&&Vk.set(e.firstElementLoc,t,o,s))}}function i(e,t,r,o,i){let a=r[o];const s=BO.isAtomic(a.unit)?a.unit.model.atomicHierarchy.chainAtomSegments:BO.isSpheres(a.unit)?a.unit.model.coarseHierarchy.spheres.chainElementSegments:BO.isGaussians(a.unit)?a.unit.model.coarseHierarchy.gaussians.chainElementSegments:void 0;if(!s)return void console.warn("StructureElement loci stats: unknown unit type");const{index:l,offsets:c}=s,u=new Map;for(let A=o;A<i;A++){a=r[A];const{indices:e,unit:t}=a,o=ey.size(e);if(0===o)continue;const{elements:i}=t;if(!BO.Traits.is(t.traits,BO.Trait.MultiChain)){n(u,l[i[ey.start(e)]],i.length);continue}let s=0;for(;s<o;){let t=0;const r=l[i[ey.getAt(e,s)]];for(++s,++t;s<o;){if(l[i[ey.getAt(e,s)]]!==r)break;++s,++t}n(u,r,t)}}let d=-1;if(u.forEach(((t,n)=>{c[n+1]-c[n]===t&&(e.chainCount+=1,1===e.chainCount&&(d=n))})),!(d<0))for(let n=o;n<i;n++){a=r[n];const{indices:o,unit:i}=a,s=ey.size(o);if(0===s)continue;const{elements:c}=i,u=0;for(;u<s;){const n=c[ey.getAt(o,u)];if(l[n]===d)return void Vk.set(e.firstChainLoc,t,i,n)}}}e.create=t,e.ofLoci=function(e){const n=t();if(cG.isEmpty(e))return n;let a=!1;if(cG.isWholeStructure(e)){if(n.structureCount+=1,1===n.structureCount){const{unit:t,indices:r}=e.elements[0];Vk.set(n.firstStructureLoc,e.structure,t,t.elements[ey.min(r)])}}else for(const t of e.elements)r(n,e.structure,t),BO.Traits.is(t.unit.traits,BO.Trait.Partitioned)?a=!0:o(n,e.structure,t);if(a)for(let t=0,r=e.elements.length;t<r;t++){const a=e.elements[t];if(!BO.Traits.is(a.unit.traits,BO.Trait.Partitioned))continue;const s=t;for(;t<r&&BO.areSameChainOperatorGroup(e.elements[t].unit,a.unit);)t++;const l=t;t--,l-s===1?o(n,e.structure,a):i(n,e.structure,e.elements,s,l)}return n},e.add=function(e,t,n){return 1===t.elementCount&&0===n.elementCount?Vk.copy(e.firstElementLoc,t.firstElementLoc):0===t.elementCount&&1===n.elementCount&&Vk.copy(e.firstElementLoc,n.firstElementLoc),1===t.conformationCount&&0===n.conformationCount?Vk.copy(e.firstConformationLoc,t.firstConformationLoc):0===t.conformationCount&&1===n.conformationCount&&Vk.copy(e.firstConformationLoc,n.firstConformationLoc),1===t.residueCount&&0===n.residueCount?Vk.copy(e.firstResidueLoc,t.firstResidueLoc):0===t.residueCount&&1===n.residueCount&&Vk.copy(e.firstResidueLoc,n.firstResidueLoc),1===t.chainCount&&0===n.chainCount?Vk.copy(e.firstChainLoc,t.firstChainLoc):0===t.chainCount&&1===n.chainCount&&Vk.copy(e.firstChainLoc,n.firstChainLoc),1===t.unitCount&&0===n.unitCount?Vk.copy(e.firstUnitLoc,t.firstUnitLoc):0===t.unitCount&&1===n.unitCount&&Vk.copy(e.firstUnitLoc,n.firstUnitLoc),1===t.structureCount&&0===n.structureCount?Vk.copy(e.firstStructureLoc,t.firstStructureLoc):0===t.structureCount&&1===n.structureCount&&Vk.copy(e.firstStructureLoc,n.firstStructureLoc),e.elementCount=t.elementCount+n.elementCount,e.conformationCount=t.conformationCount+n.conformationCount,e.residueCount=t.residueCount+n.residueCount,e.chainCount=t.chainCount+n.chainCount,e.unitCount=t.unitCount+n.unitCount,e.structureCount=t.structureCount+n.structureCount,e}}(uG||(uG={})),function(e){function t(e){const t=e.descriptor.name,n="static"===e.type?"_staticPropertyData":"_dynamicPropertyData",r=r=>(t in r[n]||(r[n][t]={props:{...U_.getDefaultValues(e.getParams(r))},data:_p.create(void 0)}),r[n][t]),o=(e,o,i)=>{const a=r(e);e[n][t]={props:o,data:_p.withValue(a.data,i)}};return{label:e.label,descriptor:e.descriptor,isHidden:e.isHidden,getParams:t=>{const n=U_.clone(e.getParams(t));return U_.setDefaultValues(n,r(t).props),n},defaultParams:e.defaultParams,isApplicable:e.isApplicable,attach:async function(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(arguments.length>3?arguments[3]:void 0)&&n.customProperties.reference(e.descriptor,!0);const a=r(n),s=U_.merge(e.defaultParams,a.props,i);if(a.data.value&&U_.areEqual(e.defaultParams,a.props,s))return;const{value:l,assets:c}=await e.obtain(t,n,s);n.customProperties.add(e.descriptor),n.customProperties.assets(e.descriptor,c),o(n,s,l)},ref:(t,n)=>t.customProperties.reference(e.descriptor,n),get:e=>{var t;return null===(t=r(e))||void 0===t?void 0:t.data},set:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const a=r(t),s=U_.merge(e.defaultParams,a.props,n);U_.areEqual(e.defaultParams,a.props,s)||(o(t,s,i),t.customProperties.assets(e.descriptor))},props:e=>r(e).props}}e.createProvider=t,e.createSimple=function(e,n,r){const o={value:U_.Value(r,{isHidden:!0})};return t({label:ah(e),descriptor:Jk({name:e}),isHidden:!0,type:n,defaultParams:o,getParams:()=>({value:U_.Value(r,{isHidden:!0})}),isApplicable:()=>!0,obtain:async(e,t,n)=>({...U_.getDefaultValues(o),...n})})}}(dG||(dG={})),function(e){function t(e){if(!iL.is(e.sourceData))return!1;const{pdbx_sifts_xref_db_name:t,pdbx_sifts_xref_db_acc:n,pdbx_sifts_xref_db_num:r,pdbx_sifts_xref_db_res:o}=e.sourceData.data.db.atom_site;return t.isDefined&&n.isDefined&&r.isDefined&&o.isDefined}function n(e){if(!iL.is(e.sourceData))return;const{pdbx_sifts_xref_db_name:t,pdbx_sifts_xref_db_acc:n,pdbx_sifts_xref_db_num:r,pdbx_sifts_xref_db_res:o}=e.sourceData.data.db.atom_site;if(!t.isDefined||!n.isDefined||!r.isDefined||!o.isDefined)return;const{atomSourceIndex:i}=e.atomicHierarchy,{count:a,offsets:s}=e.atomicHierarchy.residueAtomSegments,l=new Array(a),c=new Array(a),u=new Array(a),d=new Array(a);for(let A=0;A<a;A++){const e=i.value(s[A]);0===t.valueKind(e)?(l[A]=t.value(e),c[A]=n.value(e),u[A]=r.value(e),d[A]=o.value(e)):(l[A]="",c[A]="",u[A]="",d[A]="")}return{dbName:l,accession:c,num:u,residue:d}}e.Provider=dG.createProvider({label:"SIFTS Mapping",descriptor:Jk({name:"sifts_sequence_mapping"}),type:"static",defaultParams:{},getParams:()=>({}),isApplicable:e=>t(e),obtain:async(e,t)=>({value:n(t)})}),e.isAvailable=t,e.getKey=function(t){const n=t.unit.model,r=e.Provider.get(n).value;if(!r)return"";const o=n.atomicHierarchy.residueAtomSegments.index[t.element];return r.accession[o]},e.getLabel=function(t){const n=t.unit.model,r=e.Provider.get(n).value;if(!r)return;const o=n.atomicHierarchy.residueAtomSegments.index[t.element],i=r.dbName[o];return i?`${i} ${r.accession[o]} ${r.num[o]} ${r.residue[o]}`:void 0}}(AG||(AG={}));qR.Field;var fG=qR.Encodings;function pG(e){const t=WL.chain.label_asym_id(e),n=e.unit.conformation.operator.suffix;return n?t+n:t}function hG(e){const t=WL.chain.auth_asym_id(e),n=e.unit.conformation.operator.suffix;return n?t+n:t}const gG={shouldInclude(e){var t;return!!(null===(t=e.atom_site)||void 0===t?void 0:t.pdbx_label_index.isDefined)},value(e,t){const n=t.sourceIndex.value(e.element);return t.atom_site.pdbx_label_index.value(n)}},mG={shouldInclude:e=>AG.isAvailable(e.structure.models[0]),pdbx_sifts_xref_db_name:{value(e,t){const n=t.sourceIndex.value(e.element);return t.atom_site.pdbx_sifts_xref_db_name.value(n)},valueKind(e,t){const n=t.sourceIndex.value(e.element);return t.atom_site.pdbx_sifts_xref_db_name.valueKind(n)}},pdbx_sifts_xref_db_acc:{value(e,t){const n=t.sourceIndex.value(e.element);return t.atom_site.pdbx_sifts_xref_db_acc.value(n)},valueKind(e,t){const n=t.sourceIndex.value(e.element);return t.atom_site.pdbx_sifts_xref_db_acc.valueKind(n)}},pdbx_sifts_xref_db_num:{value(e,t){const n=t.sourceIndex.value(e.element);return t.atom_site.pdbx_sifts_xref_db_num.value(n)},valueKind(e,t){const n=t.sourceIndex.value(e.element);return t.atom_site.pdbx_sifts_xref_db_num.valueKind(n)}},pdbx_sifts_xref_db_res:{value(e,t){const n=t.sourceIndex.value(e.element);return t.atom_site.pdbx_sifts_xref_db_res.value(n)},valueKind(e,t){const n=t.sourceIndex.value(e.element);return t.atom_site.pdbx_sifts_xref_db_res.valueKind(n)}}},yG={name:"atom_site",instance(e){let{structures:t}=e;return{fields:qR.fields().str("group_PDB",WL.residue.group_PDB).index("id").str("type_symbol",WL.atom.type_symbol).str("label_atom_id",WL.atom.label_atom_id).str("label_comp_id",WL.atom.label_comp_id).int("label_seq_id",WL.residue.label_seq_id,{encoder:fG.deltaRLE,valueKind:(e,t)=>{const n=e.unit.model;return n.atomicHierarchy.residues.label_seq_id.valueKind(n.atomicHierarchy.residueAtomSegments.index[e.element])}}).str("label_alt_id",WL.atom.label_alt_id).str("pdbx_PDB_ins_code",WL.residue.pdbx_PDB_ins_code).str("label_asym_id",pG).str("label_entity_id",WL.chain.label_entity_id).float("Cartn_x",WL.atom.x,{digitCount:3,encoder:fG.fixedPoint3}).float("Cartn_y",WL.atom.y,{digitCount:3,encoder:fG.fixedPoint3}).float("Cartn_z",WL.atom.z,{digitCount:3,encoder:fG.fixedPoint3}).float("occupancy",WL.atom.occupancy,{digitCount:2,encoder:fG.fixedPoint2}).float("B_iso_or_equiv",WL.atom.B_iso_or_equiv,{digitCount:2,encoder:fG.fixedPoint2}).int("pdbx_formal_charge",WL.atom.pdbx_formal_charge,{encoder:fG.deltaRLE,valueKind:(e,t)=>e.unit.model.atomicHierarchy.atoms.pdbx_formal_charge.valueKind(e.element)}).str("auth_atom_id",WL.atom.auth_atom_id).str("auth_comp_id",WL.atom.auth_comp_id).int("auth_seq_id",WL.residue.auth_seq_id,{encoder:fG.deltaRLE}).str("auth_asym_id",hG).int("pdbx_PDB_model_num",WL.unit.model_num,{encoder:fG.deltaRLE}).int("pdbx_label_index",gG.value,{shouldInclude:gG.shouldInclude}).str("pdbx_sifts_xref_db_name",mG.pdbx_sifts_xref_db_name.value,{shouldInclude:mG.shouldInclude,valueKind:mG.pdbx_sifts_xref_db_name.valueKind}).str("pdbx_sifts_xref_db_acc",mG.pdbx_sifts_xref_db_acc.value,{shouldInclude:mG.shouldInclude,valueKind:mG.pdbx_sifts_xref_db_acc.valueKind}).str("pdbx_sifts_xref_db_num",mG.pdbx_sifts_xref_db_num.value,{shouldInclude:mG.shouldInclude,valueKind:mG.pdbx_sifts_xref_db_num.valueKind}).str("pdbx_sifts_xref_db_res",mG.pdbx_sifts_xref_db_res.value,{shouldInclude:mG.shouldInclude,valueKind:mG.pdbx_sifts_xref_db_res.valueKind}).getFields(),source:t.map((e=>({data:{structure:e,sourceIndex:e.model.atomicHierarchy.atomSourceIndex,atom_site:iL.is(e.model.sourceData)?e.model.sourceData.data.db.atom_site:void 0},rowCount:e.elementCount,keys:()=>e.elementLocations()})))}}};function vG(e,t){return e?`${e}_${t}`:t}function bG(e){return e?`pdbx_${e}_PDB_ins_code`:"pdbx_PDB_ins_code"}function CG(e,t){return(n,r)=>t(e(n,r))}function IG(e,t,n){n&&n.includeModelNum&&e.int("pdbx_PDB_model_num",CG(t,WL.unit.model_num))}function EG(e,t){const n=t&&t.prefix,r=qR.fields().str(vG(n,"label_comp_id"),CG(e,WL.atom.label_comp_id)).int(vG(n,"label_seq_id"),CG(e,WL.residue.label_seq_id),{encoder:fG.deltaRLE,valueKind:(t,n)=>{const r=e(t,n),o=r.unit.model;return o.atomicHierarchy.residues.label_seq_id.valueKind(o.atomicHierarchy.residueAtomSegments.index[r.element])}}).str(bG(n),CG(e,WL.residue.pdbx_PDB_ins_code)).str(vG(n,"label_asym_id"),CG(e,WL.chain.label_asym_id)).str(vG(n,"label_entity_id"),CG(e,WL.chain.label_entity_id)).str(vG(n,"auth_comp_id"),CG(e,WL.atom.auth_comp_id)).int(vG(n,"auth_seq_id"),CG(e,WL.residue.auth_seq_id),{encoder:fG.deltaRLE}).str(vG(n,"auth_asym_id"),CG(e,WL.chain.auth_asym_id));return IG(r,e,t),r.getFields()}var xG=qR.Field;const BG={name:"struct_conf",instance(e){const t=TG(e,"helix");return{fields:SG(),source:[{data:t,rowCount:t.length}]}}},wG={name:"struct_sheet_range",instance(e){const t=TG(e,"sheet").sort(_G);return{fields:DG(),source:[{data:t,rowCount:t.length}]}}};function _G(e,t){const n=e.element,r=t.element;return n.sheet_id<r.sheet_id?-1:n.sheet_id===r.sheet_id?e.start.element-t.start.element:1}const SG=()=>[xG.str("conf_type_id",((e,t)=>t[e].element.type_id)),xG.str("id",((e,t,n)=>`${t[e].element.type_id}${n+1}`)),...EG(((e,t)=>t[e].start),{prefix:"beg"}),...EG(((e,t)=>t[e].end),{prefix:"end"}),xG.str("pdbx_PDB_helix_class",((e,t)=>t[e].element.helix_class)),xG.str("details",((e,t)=>t[e].element.details||""),{valueKind:(e,t)=>t[e].element.details?0:2}),xG.int("pdbx_PDB_helix_length",((e,t)=>t[e].length))],DG=()=>[xG.str("sheet_id",((e,t)=>t[e].element.sheet_id)),xG.index("id"),...EG(((e,t)=>t[e].start),{prefix:"beg"}),...EG(((e,t)=>t[e].end),{prefix:"end"}),xG.str("symmetry",((e,t)=>""),{valueKind:(e,t)=>2})];function TG(e,t){const n=UN.Provider.get(e.firstModel);if(!n)return[];const{key:r,elements:o}=n,i=[],a=e.structures[0];for(const{units:s}of a.unitSymmetryGroups){const e=s[0];if(!BO.isAtomic(e))continue;const n=e.model.atomicHierarchy.residueAtomSegments,l=ty.transientSegments(n,e.elements);let c,u=!0;for(;l.hasNext;){u&&(c=l.move());const s=c.index,d=r[s],A=o[d];if(A.kind!==t){u=!0;continue}let f=s;for(;l.hasNext;)if(f=c.index,c=l.move(),d!==r[c.index]){u=!1,i[i.length]={start:Vk.create(a,e,n.offsets[s]),end:Vk.create(a,e,n.offsets[f]),length:f-s+1,element:A};break}}}return i}function kG(e,t){if(iL.is(e.sourceData))return e.sourceData.data.db[t]}function QG(e){return $Q.unionMany(...e.map((e=>e.uniqueResidueNames)))}function MG(e){if(0===e.length)return[];if(1===e.length)return e[0].entityIndices;const t=VD.create();for(const n of e)for(const e of n.entityIndices)VD.add(t,e,e);return wh(t.array),t.array}function RG(e,t){return{name:e,instance(n){let{structures:r}=n;if(t&&!t(r[0]))return qR.Category.Empty;const o=r[0].model;if(!iL.is(o.sourceData))return qR.Category.Empty;const i=o.sourceData.data.db[e];return i&&i._rowCount?qR.Category.ofTable(i):qR.Category.Empty}}}var PG=qR.Category;const OG={name:"chem_comp",instance(e){let{firstModel:t,structures:n,cache:r}=e;const o=kG(n[0].model,"chem_comp");if(!o)return PG.Empty;const{id:i}=o,a=r.uniqueResidueNames||(r.uniqueResidueNames=QG(n)),s=ag.indicesOf(i,(e=>a.has(e)));return PG.ofTable(o,s)}},FG={name:"chem_comp_bond",instance(e){let{firstModel:t,structures:n,cache:r}=e;const o=kG(n[0].model,"chem_comp_bond");if(!o)return PG.Empty;const{comp_id:i}=o,a=r.uniqueResidueNames||(r.uniqueResidueNames=QG(n)),s=ag.indicesOf(i,(e=>a.has(e)));return PG.ofTable(o,s)}},NG={name:"pdbx_chem_comp_identifier",instance(e){let{firstModel:t,structures:n,cache:r}=e;const o=kG(t,"pdbx_chem_comp_identifier");if(!o)return PG.Empty;const{comp_id:i}=o,a=r.uniqueResidueNames||(r.uniqueResidueNames=QG(n)),s=ag.indicesOf(i,(e=>a.has(e)));return PG.ofTable(o,s)}},LG={name:"pdbx_nonpoly_scheme",instance(e){let{firstModel:t,structures:n,cache:r}=e;const o=kG(t,"pdbx_nonpoly_scheme");return o?PG.ofTable(o):PG.Empty}};var UG=qR.Category;const GG=HG("struct_asym"),jG=HG("entity_poly"),zG=HG("entity_poly_seq");function HG(e){return{name:e,instance(t){let{structures:n,cache:r}=t;return function(e,t,n){const r=kG(e[0].model,t);if(!r)return UG.Empty;const{entity_id:o}=r,i=n.uniqueEntityIds||(n.uniqueEntityIds=function(e){if(0===e.length)return new Set;const t=e[0].model.entities.data.id;return new Set(MG(e).map((e=>t.value(e))))}(e)),a=ag.indicesOf(o,(e=>i.has(e)));return UG.ofTable(r,a)}(n,e,r)}}}var VG,qG=qR.Category;!function(e){e.create=function(e){const t=Array.isArray(e)?e:[e];return{structures:t,firstModel:t[0].model,cache:Object.create(null)}}}(VG||(VG={}));const YG={name:"entity",instance(e){let{structures:t}=e;const n=MG(t);return qG.ofTable(t[0].model.entities.data,n)}};function XG(e){return e.units.every((e=>e.conformation.operator.isIdentity))}function WG(e){return XG(e)&&e.units.every((e=>!e.conformation.operator.assembly&&!e.conformation.operator.suffix))}RG("entry"),RG("exptl"),RG("cell",XG),RG("symmetry",XG),RG("pdbx_struct_assembly",WG),RG("pdbx_struct_assembly_gen",WG),RG("pdbx_struct_oper_list",WG),RG("pdbx_entity_branch"),RG("pdbx_entity_branch_link"),RG("pdbx_branch_scheme"),RG("struct_conn"),RG("atom_sites");var KG;!function(e){e.AtomSitePositionsFieldNames=new Set(["id","Cartn_x","Cartn_y","Cartn_z"])}(KG||(KG={}));const JG={molstar_atom_site_operator_mapping:{label_asym_id:ag.Schema.Str(),auth_asym_id:ag.Schema.Str(),operator_name:ag.Schema.Str(),suffix:ag.Schema.Str(),assembly_id:ag.Schema.Str(),assembly_operator_id:ag.Schema.Int(),symmetry_operator_index:ag.Schema.Int(),symmetry_hkl:ag.Schema.Vector(3),ncs_id:ag.Schema.Int()}},ZG=(e,t)=>"undefined"===typeof t[e].operator.assembly?1:0,$G=(e,t)=>-1===t[e].operator.spgrOp?1:0;qR.fields().str("label_asym_id",((e,t)=>t[e].label_asym_id)).str("auth_asym_id",((e,t)=>t[e].auth_asym_id)).str("operator_name",((e,t)=>t[e].operator.name)).str("suffix",((e,t)=>t[e].operator.suffix)).str("assembly_id",((e,t)=>{var n;return(null===(n=t[e].operator.assembly)||void 0===n?void 0:n.id)||""}),{valueKind:ZG}).int("assembly_operator_id",((e,t)=>{var n;return(null===(n=t[e].operator.assembly)||void 0===n?void 0:n.operId)||0}),{valueKind:ZG}).int("symmetry_operator_index",((e,t)=>t[e].operator.spgrOp),{valueKind:$G}).vec("symmetry_hkl",[(e,t)=>t[e].operator.hkl[0],(e,t)=>t[e].operator.hkl[1],(e,t)=>t[e].operator.hkl[2]],{valueKind:$G}).int("ncs_id",((e,t)=>t[e].operator.ncsId),{valueKind:$G}).getFields();function ej(e,t){return t?1===t.length?Rh(t.charCodeAt(0),e):2===t.length?Rh(t.charCodeAt(0),Rh(t.charCodeAt(1),e)):`${e} ${t}`:e}function tj(e,t,n,r){if(e.has(t)){const o=e.get(t);o.has(n)||o.set(n,r)}else{const o=new Map;e.set(t,o),o.set(n,r)}}function nj(e){throw new Error(`Missing entity entry for entity id '${e}'.`)}const rj=TN.EmptyResidueKey();class oj{getEntityFromChain(e){return this.map.chain_index_entity_index[e]}findEntity(e){const t=this.map.label_asym_id.get(e);return void 0!==t?t:-1}findChainLabel(e){const t=this.entityIndex(e.label_entity_id);if(t<0||!this.map.entity_index_label_asym_id.has(t))return-1;const n=this.map.entity_index_label_asym_id.get(t);return n&&n.has(e.label_asym_id)?n.get(e.label_asym_id):-1}findChainAuth(e){if(!this.map.auth_asym_id_auth_seq_id.has(e.auth_asym_id))return-1;const t=this.map.auth_asym_id_auth_seq_id.get(e.auth_asym_id);return t.has(e.auth_seq_id)?t.get(e.auth_seq_id):-1}findResidue(e,t,n,r){let o;1===arguments.length?o=e:(rj.label_entity_id=e,rj.label_asym_id=t,rj.auth_seq_id=n,rj.pdbx_PDB_ins_code=r,o=rj);const i=this.findChainLabel(o);if(i<0)return-1;const a=this.map.chain_index_auth_seq_id.get(i),s=ej(o.auth_seq_id,o.pdbx_PDB_ins_code||"");return a.has(s)?a.get(s):-1}findResidueLabel(e){const t=this.findChainLabel(e);if(t<0)return-1;const n=this.map.chain_index_label_seq_id.get(t),r=ej(e.label_seq_id,e.pdbx_PDB_ins_code||"");return n.has(r)?n.get(r):-1}findResidueAuth(e){const t=this.findChainAuth(e);if(t<0)return-1;const n=this.map.chain_index_auth_seq_id.get(t),r=ej(e.auth_seq_id,e.pdbx_PDB_ins_code||"");return n.has(r)?n.get(r):-1}findResidueInsertion(e){const t=this.findChainLabel(e);if(t<0)return-1;const n=this.map.chain_index_label_seq_id.get(t),r=ej(e.label_seq_id,e.pdbx_PDB_ins_code||"");if(n.has(r))return n.get(r);const o=Em.findPredecessorIndex(this.map.label_seq_id,e.label_seq_id),i=kN.chainStartResidueIndex(this.map.segments,t);if(o<i)return i;const a=kN.chainEndResidueIndexExcl(this.map.segments,t)-1;return o>=a?a:o}findAtom(e){const t=this.findResidue(e);return t<0?-1:"undefined"===typeof e.label_alt_id?ij(this.residueOffsets[t],this.residueOffsets[t+1],this.map.label_atom_id,e.label_atom_id):aj(this.residueOffsets[t],this.residueOffsets[t+1],this.map.label_atom_id,this.map.label_alt_id,e.label_atom_id,e.label_alt_id)}findAtomAuth(e){const t=this.findResidueAuth(e);return t<0?-1:"undefined"===typeof e.label_alt_id?ij(this.residueOffsets[t],this.residueOffsets[t+1],this.map.auth_atom_id,e.auth_atom_id):aj(this.residueOffsets[t],this.residueOffsets[t+1],this.map.auth_atom_id,this.map.label_alt_id,e.auth_atom_id,e.label_alt_id)}findAtomOnResidue(e,t,n){return"undefined"===typeof n?ij(this.residueOffsets[e],this.residueOffsets[e+1],this.map.label_atom_id,t):aj(this.residueOffsets[e],this.residueOffsets[e+1],this.map.label_atom_id,this.map.label_alt_id,t,n)}findAtomsOnResidue(e,t){return function(e,t,n,r){for(let o=e;o<t;o++)if(r.has(n.value(o)))return o;return-1}(this.residueOffsets[e],this.residueOffsets[e+1],this.map.label_atom_id,t)}findElementOnResidue(e,t){return function(e,t,n,r){for(let o=e;o<t;o++)if(n.value(o)===r)return o;return-1}(this.residueOffsets[e],this.residueOffsets[e+1],this.map.type_symbol,t)}constructor(e){this.map=e,this.entityIndex=e.entities.getEntityIndex,this.residueOffsets=this.map.segments.residueAtomSegments.offsets}}function ij(e,t,n,r){for(let o=e;o<t;o++)if(n.value(o)===r)return o;return-1}function aj(e,t,n,r,o,i){for(let a=e;a<t;a++)if(n.value(a)===o&&r.value(a)===i)return a;return-1}function sj(e,t,n){const r=function(e,t,n){return{entities:e,segments:n,label_seq_id:Em.ofSortedArray(t.residues.label_seq_id.toArray({array:Int32Array})),label_atom_id:t.atoms.label_atom_id,auth_atom_id:t.atoms.auth_atom_id,label_alt_id:t.atoms.label_alt_id,type_symbol:t.atoms.type_symbol,chain_index_entity_index:new Int32Array(t.chains._rowCount),entity_index_label_asym_id:new Map,chain_index_label_seq_id:new Map,auth_asym_id_auth_seq_id:new Map,chain_index_auth_seq_id:new Map,label_asym_id:new Map}}(t,e,n),{label_seq_id:o,auth_seq_id:i,pdbx_PDB_ins_code:a}=e.residues,{label_entity_id:s,label_asym_id:l,auth_asym_id:c}=e.chains,u=Gg.ofBounds(0,e.atoms._rowCount),d=ty.transientSegments(n.chainAtomSegments,u);for(;d.hasNext;){const e=d.move(),A=e.index,f=t.getEntityIndex(s.value(A));f<0&&nj(s.value(A)),r.chain_index_entity_index[A]=f;const p=c.value(A);let h=r.auth_asym_id_auth_seq_id.get(p);h||(h=new Map,r.auth_asym_id_auth_seq_id.set(p,h));const g=l.value(A);r.label_asym_id.has(g)||r.label_asym_id.set(g,f),tj(r.entity_index_label_asym_id,f,g,A);const m=new Map,y=new Map;r.chain_index_label_seq_id.set(A,m),r.chain_index_auth_seq_id.set(A,y);const v=ty.transientSegments(n.residueAtomSegments,u,e);for(;v.hasNext;){const e=v.move().index,t=i.value(e),n=a.value(e);m.set(ej(o.value(e),n),e),y.set(ej(t,n),e),h.set(t,A)}}return new oj(r)}function lj(e,t,n,r,o,i){const a=function(e){if(0===e._rowCount)return{residues:[],chains:[]};const t=e._rowCount,n=[0],r=[0],{label_entity_id:o,label_asym_id:i,label_seq_id:a,auth_seq_id:s,pdbx_PDB_ins_code:l}=e;for(let c=1;c<t;c++){const e=!o.areValuesEqual(c-1,c)||!i.areValuesEqual(c-1,c);(e||!a.areValuesEqual(c-1,c)||!s.areValuesEqual(c-1,c)||!l.areValuesEqual(c-1,c))&&(n[n.length]=c),e&&(r[r.length]=c)}return{residues:n,chains:r}}(e),s=function(e,t,n){const r=sg.ofColumns(_N,{type_symbol:ag.ofArray({array:ag.mapToArray(e.type_symbol,rM),schema:ag.Schema.Aliased(ag.Schema.str)}),label_atom_id:e.label_atom_id,auth_atom_id:e.auth_atom_id,label_alt_id:e.label_alt_id,label_comp_id:e.label_comp_id,auth_comp_id:e.auth_comp_id,pdbx_formal_charge:e.pdbx_formal_charge}),o=sg.view(e,SN,n.residues),i=sg.view(e,DN,n.chains);if(!o.label_seq_id.isDefined){const e=new Int32Array(o.label_seq_id.rowCount),{residues:t,chains:r}=n;let i=0,a=0;for(let n=0,o=e.length;n<o;++n)t[n]>=r[i+1]&&(i+=1,a=0),e[n]=++a;o.label_seq_id=ag.ofIntArray(e)}return sg.columnToArray(o,"label_seq_id",Int32Array),sg.columnToArray(o,"auth_seq_id",Int32Array),{atoms:r,residues:o,chains:i,atomSourceIndex:t}}(e,t,a),l=function(e,t){const n=new Map;if(!iL.is(t))return n;const{molstar_atom_site_operator_mapping:r}=cQ(JG,t.data.frame);if(0===r._rowCount)return n;const o=new Map,i=new Map;for(let u=0;u<r._rowCount;u++){const e=0===r.assembly_operator_id.valueKind(u)?{id:r.assembly_id.value(u),operList:[],operId:r.assembly_operator_id.value(u)}:void 0,t=_T.create(r.operator_name.value(u),Yh.identity(),{assembly:e,spgrOp:0===r.symmetry_operator_index.valueKind(u)?r.symmetry_operator_index.value(u):void 0,hkl:qh.ofArray(r.symmetry_hkl.value(u)),ncsId:r.ncs_id.value(u)}),n=r.suffix.value(u),a=r.label_asym_id.value(u);o.set(`${a}${n}`,{name:a,operator:t});const s=r.auth_asym_id.value(u);i.set(`${s}${n}`,s)}const{label_asym_id:a,auth_asym_id:s}=e.chains,l=new Array(a.rowCount),c=new Array(a.rowCount);for(let u=0;u<a.rowCount;u++){const e=a.value(u),t=s.value(u);if(!o.has(e)){l[u]=e,c[u]=t;continue}const{name:r,operator:d}=o.get(e);n.set(u,d),l[u]=r,c[u]=i.get(t)||t}return e.chains.label_asym_id=ag.ofArray({array:l,valueKind:e.chains.label_asym_id.valueKind,schema:e.chains.label_asym_id.schema}),e.chains.auth_asym_id=ag.ofArray({array:c,valueKind:e.chains.auth_asym_id.valueKind,schema:e.chains.auth_asym_id.schema}),n}(s,o);if(i&&function(e,t){return sg.areEqual(e.chains,t.chains)&&sg.areEqual(e.residues,t.residues)&&sg.areEqual(e.atoms,t.atoms)}(i.atomicHierarchy,s))return{sameAsPrevious:!0,hierarchy:i.atomicHierarchy,chainOperatorMapping:l};const c={residueAtomSegments:ty.ofOffsets(a.residues,Gg.ofBounds(0,e._rowCount)),chainAtomSegments:ty.ofOffsets(a.chains,Gg.ofBounds(0,e._rowCount))},u=sj(s,n,c),d=function(e,t,n,r){const{label_comp_id:o,type_symbol:i,_rowCount:a}=e.atoms,{_rowCount:s}=e.residues,{offsets:l}=t.residueAtomSegments,c=new Uint8Array(a);for(let m=0;m<a;++m)c[m]=NN(i.value(m));const u=new Int32Array(s),d=new Int32Array(s),A=new Int32Array(s),f=new Uint8Array(s),p=new Uint8Array(s),h=new Map,g=new Map;for(let m=0;m<s;++m){const e=o.value(l[m]),t=r;let i,a;if(h.has(e))i=h.get(e),a=g.get(e);else{let n;t.has(e)?n=t.get(e).type:(dw||console.info("chemComp not found",e),n=NM(e)),i=OM(n,e),a=FM(n,i),h.set(e,i),g.set(e,a)}f[m]=i,p[m]=a;const s=qP(a,"trace");let c=n.findAtomsOnResidue(m,s);if(-1===c){const e=qP(a,"coarseBackbone");c=n.findAtomsOnResidue(m,e),-1===c&&GM(i)&&(c=n.findElementOnResidue(m,rM("C")))}u[m]=c;const y=qP(a,"directionFrom");d[m]=n.findAtomsOnResidue(m,y);const v=qP(a,"directionTo");A[m]=n.findAtomsOnResidue(m,v)}return{atom:{atomicNumber:c},residue:{traceElementIndex:u,directionFromElementIndex:d,directionToElementIndex:A,moleculeType:f,polymerType:p}}}(s,c,u,r);return{sameAsPrevious:!1,hierarchy:{...s,...c,index:u,derived:d},chainOperatorMapping:l}}function cj(e,t,n,r,o,i){const{sameAsPrevious:a,hierarchy:s,chainOperatorMapping:l}=lj(e,t,n,r,o,i),c=function(e){return{id:Cp.create22(),atomId:e.id,occupancy:e.occupancy.isDefined?e.occupancy:ag.ofConst(1,e._rowCount,ag.Schema.float),B_iso_or_equiv:e.B_iso_or_equiv,xyzDefined:e.Cartn_x.isDefined&&e.Cartn_y.isDefined&&e.Cartn_z.isDefined,x:e.Cartn_x.toArray({array:Float32Array}),y:e.Cartn_y.toArray({array:Float32Array}),z:e.Cartn_z.toArray({array:Float32Array})}}(e);return{sameAsPrevious:a,hierarchy:s,conformation:c,chainOperatorMapping:l}}const uj={chainKey:[],entityKey:[],findSequenceKey:()=>-1,findChainKey:()=>-1,getEntityFromChain:()=>-1,count:0,entity_id:ag.Undefined(0,ag.Schema.str),asym_id:ag.Undefined(0,ag.Schema.str),seq_id_begin:ag.Undefined(0,ag.Schema.int),seq_id_end:ag.Undefined(0,ag.Schema.int),chainElementSegments:ty.create([]),polymerRanges:JP.ofSortedRanges([]),gapRanges:JP.ofSortedRanges([])};var dj;function Aj(e,t,n){if(e.has(t))return e.get(t);const r=n.index++;return e.set(t,r),r}function fj(e,t){if(e.has(t))return e.get(t);const n=new Map;return e.set(t,n),n}function pj(e){throw new Error(`Missing entity entry for entity id '${e}'.`)}function hj(e,t){const{entity_id:n,asym_id:r,seq_id_begin:o,seq_id_end:i,count:a,chainElementSegments:s}=e,l=new Map,c=new Map,u={index:0},d=new Int32Array(a),A=new Int32Array(a),f=new Int32Array(s.count);for(let g=0;g<a;g++)A[g]=t.getEntityIndex(n.value(g)),A[g]<0&&pj(n.value(g));for(let g=0;g<s.count;g++){const e=s.offsets[g],t=s.offsets[g+1],n=A[e];f[g]=n;const a=Aj(fj(c,n),r.value(e),u);for(let r=e;r<t;r++)d[r]=a;const p=[],h=[];for(let r=e;r<t;r++){const e=o.value(r),t=i.value(r);p.push(r),h.push(e,t)}const m={elementIndices:p,seqRanges:JP.ofSortedRanges(h)};l.set(a,m)}const{findChainKey:p,findSequenceKey:h}=function(e,t,n){const r=e.getEntityIndex;return{findChainKey:(e,n)=>{const o=r(e);if(o<0)return-1;const i=t.get(o);return i.has(n)?i.get(n):-1},findSequenceKey:(e,o,i)=>{const a=r(e);if(a<0)return-1;const s=t.get(a);if(void 0===s)return-1;const l=s.get(o);if(void 0===l)return-1;const c=n.get(l),{elementIndices:u,seqRanges:d}=c,A=JP.firstIntersectionIndex(d,ey.ofSingleton(i));return-1!==A?u[A]:-1}}}(t,c,l);return{chainKey:d,entityKey:A,findSequenceKey:h,findChainKey:p,getEntityFromChain:e=>f[e]}}function gj(e,t){const n=[],r=[],o=ty.transientSegments(e.chainElementSegments,Gg.ofBounds(0,e.count)),{seq_id_begin:i,seq_id_end:a}=e;for(;o.hasNext;){const{start:e,end:t}=o.move();let s=-1,l=-1;for(let o=e;o<t;++o){const c=a.value(o);o===e?(s=o,l=a.value(o)):i.value(o)-l>1&&(n.push(s,o-1),r.push(o-1,o),s=o),o===t-1&&n.push(s,o),l=c}}return{polymerRanges:JP.ofSortedRanges(n),gapRanges:JP.ofSortedRanges(r)}}!function(e){e.Empty={isDefined:!1,spheres:uj,gaussians:uj}}(dj||(dj={}));const mj={hierarchy:dj.Empty,conformation:void 0};function yj(e,t){const{ihm_sphere_obj_site:n,ihm_gaussian_obj_site:r}=e;if(0===n._rowCount&&0===r._rowCount)return mj;const o=bj(n),i=function(e){return{x:e.Cartn_x.toArray({array:Float32Array}),y:e.Cartn_y.toArray({array:Float32Array}),z:e.Cartn_z.toArray({array:Float32Array}),radius:e.object_radius.toArray({array:Float32Array}),rmsf:e.rmsf.toArray({array:Float32Array})}}(n),a=hj(o,e.entities),s=gj(o),l=bj(r),c=function(e){const t=WN.ihm_gaussian_obj_site.covariance_matrix.space,n=[],{covariance_matrix:r}=e;for(let o=0,i=r.rowCount;o<i;o++)n[o]=tg.toMat3(Xh(),t,r.value(o));return{x:e.mean_Cartn_x.toArray({array:Float32Array}),y:e.mean_Cartn_y.toArray({array:Float32Array}),z:e.mean_Cartn_z.toArray({array:Float32Array}),weight:e.weight.toArray({array:Float32Array}),covariance_matrix:n}}(r),u=hj(l,e.entities),d=gj(l);return{hierarchy:{isDefined:!0,spheres:{...o,...a,...s},gaussians:{...l,...u,...d}},conformation:{id:Cp.create22(),spheres:i,gaussians:c}}}function vj(e,t,n){const r=[0];for(let o=1,i=e.rowCount;o<i;o++){!e.areValuesEqual(o-1,o)&&(r[r.length]=o)}return{chainElementSegments:ty.ofOffsets(r,Gg.ofBounds(0,e.rowCount))}}function bj(e){const{entity_id:t,seq_id_begin:n,seq_id_end:r,asym_id:o}=e;return{count:t.rowCount,entity_id:t,asym_id:o,seq_id_begin:n,seq_id_end:r,...vj(o)}}const Cj={HIS:"H",ARG:"R",LYS:"K",ILE:"I",PHE:"F",LEU:"L",TRP:"W",ALA:"A",MET:"M",PRO:"P",CYS:"C",ASN:"N",VAL:"V",GLY:"G",SER:"S",GLN:"Q",TYR:"Y",ASP:"D",GLU:"E",THR:"T",SEC:"U",PYL:"O",HSD:"H",HSE:"H",HSP:"H",LSN:"K",ASPP:"D",GLUP:"E",HID:"H",HIE:"H",HIP:"H",LYN:"K",ASH:"D",GLH:"E"},Ij={DA:"A",DC:"C",DG:"G",DT:"T",DU:"U"},Ej={A:"A",C:"C",G:"G",T:"T",U:"U"};function xj(e){return Cj[e]||"X"}function Bj(e){return Ej[e]||"X"}function wj(e){return Ij[e]||"X"}var _j,Sj;function Dj(e,t,n,r){if(!e.entity_poly_seq||!e.entity_poly_seq._rowCount)return Sj.fromHierarchy(t,n,r);const{entity_id:o,num:i,mon_id:a}=e.entity_poly_seq,s={},l=[],c=o.rowCount;let u=0;for(;u<c;){const e=u;for(;u<c-1&&o.areValuesEqual(u,u+1);)u++;u++;const n=o.value(e),r=ag.window(a,e,u),d=ag.window(i,e,u),A=t.getEntityIndex(n);s[A]={entityId:n,sequence:_j.ofResidueNames(r,d)},l.push(s[A])}return{byEntityKey:s,sequences:l}}async function Tj(e,t,n,r){const o=gg(n,r-1),{label_entity_id:i,label_asym_id:a,label_seq_id:s}=t,l=Dh(o,i.value);e.shouldUpdate&&await e.update();for(let c=0,u=l.length-1;c<u;c++){const t=Dh(o,a.value,{start:l[c],end:l[c+1]});for(let n=0,r=t.length-1;n<r;n++){const r=t[n];0===s.valueKind(r)&&(Dh(o,s.value,{sort:!0,start:r,end:t[n+1]}),e.shouldUpdate&&await e.update())}e.shouldUpdate&&await e.update()}return function(e){for(let t=0,n=e.length;t<n;t++)if(e[t]!==t)return!1;return!0}(o)&&o.length===t._rowCount?{atom_site:t,sourceIndex:ag.ofIntArray(o)}:{atom_site:sg.view(t,t._schema,o),sourceIndex:ag.ofIntArray(o)}}function kj(e,t,n,r,o){const{polymerType:i,traceElementIndex:a,directionFromElementIndex:s,directionToElementIndex:l}=o.residue,c=i[e],u=i[t];if(0===c||0===u)return!1;if(-1===a[e]||-1===a[t])return!1;let d=r.findAtomsOnResidue(e,qP(c,"backboneStart")),A=r.findAtomsOnResidue(t,qP(u,"backboneEnd"));-1!==d&&-1!==A||(d=r.findAtomsOnResidue(e,qP(c,"coarseBackbone")),A=r.findAtomsOnResidue(t,qP(u,"coarseBackbone")));const{x:f,y:p,z:h}=n,g=qh.create(f[d],p[d],h[d]),m=qh.create(f[A],p[A],h[A]),y=-1===s[e]||-1===l[e]||-1===s[t]||-1===l[t];return qh.distance(g,m)<(y?10:3)}function Qj(e,t,n,r){const o=[],i=[],a=new Map,s=ty.transientSegments(e.chainAtomSegments,Gg.ofBounds(0,e.atoms._rowCount)),l=ty.transientSegments(e.residueAtomSegments,Gg.ofBounds(0,e.atoms._rowCount)),{index:c,derived:u}=e,{label_seq_id:d}=e.residues,{label_entity_id:A}=e.chains,{moleculeType:f,traceElementIndex:p}=u.residue;let h,g,m,y;for(;s.hasNext;){const v=s.move();l.setSegment(v),h=-1,g=-1,m=-1,y=-1;const b=t.getEntityIndex(A.value(v.index)),C=r.byEntityKey[b],I=C?C.sequence.seqId.value(C.sequence.seqId.rowCount-1):-1,E=e.residueAtomSegments.index[v.start],x=e.residueAtomSegments.index[v.end-1],B=d.value(E),w=d.value(x);for(1===B&&w===I&&n.xyzDefined&&kj(E,x,n,c,u)&&(a.set(E,x),a.set(x,E));l.hasNext;){const t=l.move(),r=t.index,a=d.value(r);if(GM(f[r])&&-1!==p[r])if(-1!==y)if(a!==h+1)o.push(y,m-1),i.push(g,t.end-1),y=t.start;else if(l.hasNext){const r=e.residueAtomSegments.index[t.start],a=e.residueAtomSegments.index[m-1];n.xyzDefined&&!kj(r,a,n,e.index,u)&&(o.push(y,m-1),i.push(g,t.end-1),y=t.start)}else o.push(y,t.end-1);else y=t.start;else-1!==y&&(o.push(y,m-1),y=-1);g=t.start,m=t.end,h=a}}return{polymerRanges:JP.ofSortedRanges(o),gapRanges:JP.ofSortedRanges(i),cyclicPolymerMap:a}}function Mj(e){let t,n;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];if(!t||t.length!==o.length)return t=o,n=e.apply(void 0,o),n;for(let a=0,s=o.length;a<s;a++)if(o[a]!==t[a])return t=o,n=e.apply(void 0,o),n;return n}}function Rj(e){const t=new Map;return n=>{if(t.has(n))return t.get(n);const r=e(n);return t.set(n,r),r}}function Pj(e){const t=new Map,n=(e,t,n)=>`${e}|${t}|${n}`,r=e.pdbx_unobs_or_zero_occ_residues;for(let o=0,i=r._rowCount;o<i;++o){const e=n(r.PDB_model_num.value(o),r.label_asym_id.value(o),r.label_seq_id.value(o));t.set(e,{polymer_flag:r.polymer_flag.value(o),occupancy_flag:r.occupancy_flag.value(o)})}return{has:(e,r,o)=>t.has(n(e,r,o)),get:(e,r,o)=>t.get(n(e,r,o)),size:t.size}}function Oj(e){const t=new Map;if(e.chem_comp._rowCount>0){const{id:n}=e.chem_comp;for(let r=0,o=n.rowCount;r<o;++r)t.set(n.value(r),sg.getRow(e.chem_comp,r))}else{Nj(e).forEach((e=>{t.set(e,function(e){return{formula:"",formula_weight:0,id:e,name:e,mon_nstd_flag:PM.has(e)?"y":"n",pdbx_synonyms:[],type:NM(e)}}(e))}))}return t}function Fj(e){const t=new Map;if(e.pdbx_chem_comp_identifier._rowCount>0){const{comp_id:n,type:r,identifier:o}=e.pdbx_chem_comp_identifier;for(let e=0,i=n.rowCount;e<i;++e)if("SNFG CARBOHYDRATE SYMBOL"===r.value(e)||"SNFG CARB SYMBOL"===r.value(e)){const r=o.value(e),i=qQ.get(r);i?t.set(n.value(e),i):console.warn(`Unknown SNFG name '${r}'`)}}if(e.chem_comp._rowCount>0){const{id:n,type:r}=e.chem_comp;for(let e=0,o=n.rowCount;e<o;++e){const o=n.value(e);if(t.has(o))continue;const i=r.value(e);ZQ.has(o)?t.set(o,ZQ.get(o)):9===OM(i,o)&&t.set(o,HQ)}}else{const n=Nj(e);ZQ.forEach(((e,r)=>{!t.has(r)&&n.has(r)&&t.set(r,e)}))}return t}!function(e){let t;!function(e){e.Protein="protein",e.RNA="RNA",e.DNA="DNA",e.Generic="generic"}(t=e.Kind||(e.Kind={})),e.getSequenceString=function(e){const t=e.code.toArray();return(t instanceof Array?t:Array.from(t)).join("")},e.ofResidueNames=function(e,r){if(0===r.rowCount)throw new Error("cannot be empty");const o=function(e){for(let n=0,r=Math.min(e.rowCount,10);n<r;n++){const r=e.value(n)||"";if("X"!==xj(r))return t.Protein;if("X"!==Bj(r))return t.RNA;if("X"!==wj(r))return t.DNA}return t.Generic}(e);return new n(o,e,r)};class n{index(e){return this.indexMap.get(e)}constructor(e,n,r){this.kind=e,this.microHet=new Map;const o=function(e,n){let r;switch(e){case t.Protein:r=xj;break;case t.DNA:r=wj;break;case t.RNA:r=Bj;break;case t.Generic:r=()=>"X";break;default:Zh()}return n&&n.size>0?e=>{const t=r(e);return"X"===t&&n.has(e)?r(n.get(e)):t}:r}(e),i=[],a=[],s=[],l=new Map;let c=0;const u=new Map;for(let t=0,A=r.rowCount;t<A;++t){const e=r.value(t);if(u.has(e))l.has(e)?l.get(e).push(n.value(t)):l.set(e,[a[u.get(e)],n.value(t)]);else{u.set(e,c);const r=n.value(t);a[c]=r,s[c]=e,i[c]=o(r),c+=1}}const d=[];for(let t=0,A=c;t<A;++t){const e=l.get(s[t]);if(e){const n=e.map((e=>{const t=o(e);return"X"===t?e:t}));d[t]=`(${n.join("|")})`}else d[t]="X"===i[t]?a[t]:i[t]}this.length=c,this.code=ag.ofStringArray(i),this.compId=ag.ofStringArray(a),this.seqId=ag.ofIntArray(s),this.label=ag.ofStringArray(d),this.microHet=l,this.indexMap=u}}e.ofSequenceRanges=function(e,n){const o=t.Generic;return new r(o,e,n)};class r{index(e){return e-this.minSeqId}constructor(e,t,n){this.kind=e,this.seqIdStart=t,this.seqIdEnd=n,this.microHet=new Map;let r=0,o=Number.MAX_SAFE_INTEGER;for(let a=0,s=this.seqIdStart.rowCount;a<s;a++){const e=this.seqIdStart.value(a),t=this.seqIdEnd.value(a);e<o&&(o=e),r<t&&(r=t)}const i=r-o+1;this.code=ag.ofConst("X",i,ag.Schema.str),this.label=ag.ofConst("",i,ag.Schema.str),this.seqId=ag.ofLambda({value:e=>e+o+1,rowCount:i,schema:ag.Schema.int}),this.compId=ag.ofConst("",i,ag.Schema.str),this.length=i,this.minSeqId=o}}}(_j||(_j={})),function(e){const t={byEntityKey:{},sequences:[]};function n(){const e=[],t={};for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(let i=0,a=r.length;i<a;++i)e.push(...r[i].sequences),Object.assign(t,r[i].byEntityKey);return{sequences:e,byEntityKey:t}}function r(e,t){const{label_comp_id:n}=t.atoms,{label_seq_id:r}=t.residues,{chainAtomSegments:o,residueAtomSegments:i}=t,{count:a,offsets:s}=o,l={},c=[];if(1===a&&0===s[0]&&0===s[1])return{byEntityKey:l,sequences:c};for(let u=0,d=t.chains._rowCount;u<d;u++){const o=t.index.getEntityFromChain(u);if(void 0!==l[o]||"polymer"!==e.data.type.value(o))continue;const a=u;for(u++;u<d&&o===t.index.getEntityFromChain(u)&&"polymer"!==e.data.type.value(o);)u++;u--;const A=i.index[s[a]],f=i.index[s[u+1]-1]+1,p=ag.window(r,A,f),h=[];for(let e=A;e<f;++e)h.push(n.value(i.offsets[e]));const g=ag.ofStringArray(h);l[o]={entityId:e.data.id.value(o),sequence:_j.ofResidueNames(g,p)},c.push(l[o])}return{byEntityKey:l,sequences:c}}function o(e,t){return n(i(e,t.spheres),i(e,t.gaussians))}function i(e,t){const{chainElementSegments:n,seq_id_begin:r,seq_id_end:o}=t,{count:i,offsets:a}=n,s={},l=[];if(1===i&&0===a[0]&&0===a[1])return{byEntityKey:s,sequences:l};for(let c=0,u=i;c<u;c++){const n=t.getEntityFromChain(c);if(void 0!==s[n])continue;const i=c;for(c++;c<u&&n===t.getEntityFromChain(c);)c++;c--;const d=a[i],A=a[c+1]-1,f=ag.window(r,d,A),p=ag.window(o,d,A);s[n]={entityId:e.data.id.value(n),sequence:_j.ofSequenceRanges(f,p)},l.push(s[n])}return{byEntityKey:s,sequences:l}}e.fromHierarchy=function(e,i,a){return n(r(e,i),a.isDefined?o(e,a):t)},e.fromAtomicHierarchy=r,e.fromCoarseHierarchy=o,e.fromCoarseElements=i}(Sj||(Sj={}));const Nj=Rj((e=>{const t=new Set,{label_comp_id:n,auth_comp_id:r}=e.atom_site,o=n.isDefined?n:r;for(let i=0,a=o.rowCount;i<a;++i)t.add(o.value(i));return t}));function Lj(e,t){const n=new Map,{auth_asym_id:r,label_asym_id:o,label_entity_id:i}=e.chains;for(let a=0,s=e.chains._rowCount;a<s;a++){const e=o.value(a);n.set(e,{id:e,auth_id:r.value(a),entity_id:i.value(a)})}if(null===t||void 0===t?void 0:t.struct_asym._rowCount){const{id:e,entity_id:r}=t.struct_asym;for(let t=0,o=e.rowCount;t<o;++t){const o=e.value(t);n.has(o)||n.set(o,{id:o,auth_id:"",entity_id:r.value(t)})}}return n}const Uj=ag.Schema.Aliased(ag.Schema.Str());function Gj(e){let t;if(e.entity.id.isDefined)t=e.entity;else{const n=new Set,r=[],o=[],{label_entity_id:i,label_comp_id:a}=e.atom_site;for(let t=0,c=e.atom_site._rowCount;t<c;t++){const e=i.value(t);n.has(e)||(r.push(e),o.push(LM(a.value(t))),n.add(e))}const{entity_id:s}=e.ihm_sphere_obj_site;for(let t=0,c=e.ihm_sphere_obj_site._rowCount;t<c;t++){const e=s.value(t);n.has(e)||(r.push(e),o.push("polymer"),n.add(e))}const{entity_id:l}=e.ihm_gaussian_obj_site;for(let t=0,c=e.ihm_gaussian_obj_site._rowCount;t<c;t++){const e=l.value(t);n.has(e)||(r.push(e),o.push("polymer"),n.add(e))}t=sg.ofPartialColumns(WN.entity,{id:ag.ofArray({array:r,schema:WN.entity.id}),type:ag.ofArray({array:o,schema:WN.entity.type})},r.length)}const n=ag.createIndexer(t.id),r=new Array(t._rowCount);r.fill("other");const o=new Set;let i=!1;if(e.entity_poly&&e.entity_poly.type.isDefined){const{entity_id:t,type:i,_rowCount:a}=e.entity_poly;for(let e=0;e<a;++e){const a=t.value(e);r[n(a)]=i.value(e),o.add(a)}}else i=!0;if(e.pdbx_entity_branch&&e.pdbx_entity_branch.entity_id.isDefined){const{entity_id:t,type:i,_rowCount:a}=e.pdbx_entity_branch;for(let e=0;e<a;++e){const a=t.value(e);r[n(a)]=i.value(e),o.add(a)}}else i=!0;if(o.size<r.length&&(i=!0),i){const t=new Map;if(e.chem_comp){const{id:n,type:r}=e.chem_comp;for(let o=0,i=e.chem_comp._rowCount;o<i;o++)t.set(n.value(o),r.value(o))}if(e.atom_site){const{label_entity_id:i,label_comp_id:a}=e.atom_site;for(let s=0,l=e.atom_site._rowCount;s<l;s++){const e=i.value(s);if(!o.has(e)){const i=a.value(s),l=t.get(i)||"other";r[n(e)]=UM(i,l),o.add(e)}}}}return{data:t,subtype:ag.ofArray({array:r,schema:Uj}),getEntityIndex:n}}function jj(e,t,n){var r;if(!e.pdbx_molecule||!e.pdbx_molecule.prd_id.isDefined)return t;const o=new Array(t.data._rowCount);o.fill("");const{asym_id:i,prd_id:a,_rowCount:s}=e.pdbx_molecule;for(let c=0;c<s;++c){const e=i.value(c),s=null===(r=n.get(e))||void 0===r?void 0:r.entity_id;void 0!==s&&(o[t.getEntityIndex(s)]=a.value(c))}const l=ag.ofArray({array:o,schema:ag.Schema.str});return{...t,prd_id:l}}class zj{getFrameAtIndex(e){return this.frames[e]}constructor(e){this.frames=e,this.frameCount=e.length,this.representative=e[0],this.duration=e.length}}async function Hj(e,t,n){const r=function(e){return{missingResidues:Pj(e),chemicalComponentMap:Oj(e),saccharideComponentMap:Fj(e)}}(e),o=e.ihm_model_list._rowCount>0?await async function(e,t,n,r){const o=Gj(t),i=t.atom_site.ihm_model_id.isDefined?t.atom_site.ihm_model_id:t.atom_site.pdbx_PDB_model_num,a=Xj(t.atom_site,i),s=Xj(t.ihm_sphere_obj_site,t.ihm_sphere_obj_site.model_id),l=Xj(t.ihm_gaussian_obj_site,t.ihm_gaussian_obj_site.model_id),c=[];if(t.ihm_model_list){const{model_id:i,model_name:u}=t.ihm_model_list;for(let d=0;d<t.ihm_model_list._rowCount;d++){const A=i.value(d);let f,p;if(a.has(A)){const n=a.get(A),{atom_site:r,sourceIndex:o}=await Tj(e,t.atom_site,n.start,n.end);f=r,p=o}else f=sg.window(t.atom_site,t.atom_site._schema,0,0),p=ag.ofIntArray([]);const h=qj(t,{model_id:A,model_name:u.value(d),model_group_name:qN(A,t),entities:o,atom_site:f,atom_site_sourceIndex:p,ihm_sphere_obj_site:s.has(A)?s.get(A).table:sg.window(t.ihm_sphere_obj_site,t.ihm_sphere_obj_site._schema,0,0),ihm_gaussian_obj_site:l.has(A)?l.get(A).table:sg.window(t.ihm_gaussian_obj_site,t.ihm_gaussian_obj_site._schema,0,0)},n,r);c.push(h)}}return c}(n,e,r,t):await async function(e,t,n,r){const o=[];if(t.atom_site){const i=t.atom_site.id.rowCount,a=Gj(t);let s=0;for(;s<i;){const i=Yj(t.atom_site.pdbx_PDB_model_num,s),{atom_site:l,sourceIndex:c}=await Tj(e,t.atom_site,s,i),u=Vj(t,l,c,a,n,r,o.length>0?o[o.length-1]:void 0);o.push(u),s=i}}return o}(n,e,r,t);for(let i=0;i<o.length;i++)Wj.TrajectoryInfo.set(o[i],{index:i,size:o.length});return new zj(o)}function Vj(e,t,n,r,o,i,a){const s=cj(t,n,r,o.chemicalComponentMap,i,a),l=t.pdbx_PDB_model_num.value(0);if(a&&s.sameAsPrevious)return{...a,id:Cp.create22(),modelNum:l,atomicConformation:s.conformation,_dynamicPropertyData:Object.create(null)};const c=mj,u=Dj(e,r,s.hierarchy,c.hierarchy),d=Qj(s.hierarchy,r,s.conformation,u),A=Lj(s.hierarchy),f=0===e.entry.id.valueKind(0)?e.entry.id.value(0):i.name,p=[];return f&&p.push(f),0===e.struct.title.valueKind(0)&&p.push(e.struct.title.value(0)),{id:Cp.create22(),entryId:f,label:p.join(" | "),entry:f,sourceData:i,modelNum:l,parent:void 0,entities:jj(e,r,A),sequence:u,atomicHierarchy:s.hierarchy,atomicConformation:s.conformation,atomicRanges:d,atomicChainOperatorMappinng:s.chainOperatorMapping,coarseHierarchy:c.hierarchy,coarseConformation:c.conformation,properties:{...o,structAsymMap:A},customProperties:new Zk,_staticPropertyData:Object.create(null),_dynamicPropertyData:Object.create(null)}}function qj(e,t,n,r){const o=cj(t.atom_site,t.atom_site_sourceIndex,t.entities,n.chemicalComponentMap,r),i=yj(t,n.chemicalComponentMap),a=Dj(e,t.entities,o.hierarchy,i.hierarchy),s=Qj(o.hierarchy,t.entities,o.conformation,a),l=0===e.entry.id.valueKind(0)?e.entry.id.value(0):r.name,c=[];l&&c.push(l),0===e.struct.title.valueKind(0)&&c.push(e.struct.title.value(0)),t.model_name&&c.push(t.model_name),t.model_group_name&&c.push(t.model_group_name);const u=Lj(o.hierarchy,e);return{id:Cp.create22(),entryId:l,label:c.join(" | "),entry:l,sourceData:r,modelNum:t.model_id,parent:void 0,entities:jj(e,t.entities,u),sequence:a,atomicHierarchy:o.hierarchy,atomicConformation:o.conformation,atomicRanges:s,atomicChainOperatorMappinng:o.chainOperatorMapping,coarseHierarchy:i.hierarchy,coarseConformation:i.conformation,properties:{...n,structAsymMap:u},customProperties:new Zk,_staticPropertyData:Object.create(null),_dynamicPropertyData:Object.create(null)}}function Yj(e,t){const n=e.rowCount;if(!e.isDefined)return n;let r=t+1;for(;r<n&&e.areValuesEqual(t,r);)r++;return r}function Xj(e,t){const n=new Map,r=e._rowCount;let o=0;for(;o<r;){const r=Yj(t,o),i=t.value(o);n.set(i,{table:sg.window(e,e._schema,o,r),start:o,end:r}),o=r}return n}var Wj,Kj;function Jj(e){const t=new Map;for(let n=0,r=e.length;n<r;n++)t.set(n,e[n]);return t}!function(e){function t(t,n){const r=[],{frames:o}=n,i=t.atomicHierarchy.atomSourceIndex,a=ag.isIdentity(i)?void 0:i.toArray({array:Int32Array}),s=l(t),c=t.atomicHierarchy.atoms._rowCount;for(let l=0,u=o.length;l<u;++l){const n=o[l];if(n.elementCount!==c)throw new Error(`Frame element count mismatch, got ${n.elementCount} but expected ${c}.`);const i={...t,id:Cp.create22(),modelNum:l,atomicConformation:Nk.getAtomicConformation(n,{atomId:t.atomicConformation.atomId,occupancy:t.atomicConformation.occupancy,B_iso_or_equiv:t.atomicConformation.B_iso_or_equiv},a),customProperties:new Zk,_staticPropertyData:Object.create(null),_dynamicPropertyData:Object.create(null)};if(n.cell){const e=xO.fromCell(n.cell.size,n.cell.anglesInRadians);xO.Provider.set(i,e)}e.TrajectoryInfo.set(i,{index:l,size:o.length}),e.CoarseGrained.set(i,s),r.push(i)}return{trajectory:r,srcIndexArray:a}}e.trajectoryFromModelAndCoordinates=function(e,n){return new zj(t(e,n).trajectory)},e.trajectoryFromTopologyAndCoordinates=function(n,r){return Tw.create("Create Trajectory",(async o=>{const i=await Hj(n.basic,n.sourceData,o);if(0===i.frameCount)throw new Error("found no model");const a=i.representative,{trajectory:s}=t(a,r),c={pairs:n.bonds,count:a.atomicHierarchy.atoms._rowCount},u=jk.fromData(c),d=l(a);let A=0;for(const t of s)jk.Provider.set(t,u),e.TrajectoryInfo.set(t,{index:A++,size:s.length}),e.CoarseGrained.set(t,d);return new zj(s)}))};const n="__Center__";e.getCenter=function(e){if(e._dynamicPropertyData[n])return e._dynamicPropertyData[n];const t=function(e,t){const n=[],r=[],o=[];e.x.length&&(n.push(...X_(e.x)),r.push(...X_(e.y)),o.push(...X_(e.z))),t&&(t.spheres.x.length&&(n.push(...X_(t.spheres.x)),r.push(...X_(t.spheres.y)),o.push(...X_(t.spheres.z))),t.gaussians.x.length&&(n.push(...X_(t.gaussians.x)),r.push(...X_(t.gaussians.y)),o.push(...X_(t.gaussians.z))));const[i,a]=X_(n),[s,l]=X_(r),[c,u]=X_(o),d=i+(a-i)/2,A=s+(l-s)/2,f=c+(u-c)/2;return qh.create(d,A,f)}(e.atomicConformation,e.coarseConformation);return e._dynamicPropertyData[n]=t,t};const r="__InvertedAtomSrcIndex__";e.getInvertedAtomSourceIndex=function(e){if(e._staticPropertyData[r])return e._staticPropertyData[r];const t=function(e){const t=new Int32Array(e.rowCount);let n=!1;for(let r=0,o=e.rowCount;r<o;r++){const o=e.value(r);o!==r&&(n=!1),t[o]=r}return{isIdentity:n,invertedIndex:t}}(e.atomicHierarchy.atomSourceIndex);return e._staticPropertyData[r]=t,t};const o="__TrajectoryInfo__";e.TrajectoryInfo={get:e=>e._dynamicPropertyData[o]||{index:0,size:1},set:(e,t)=>e._dynamicPropertyData[o]=t};const i="__AsymIdCount__";e.AsymIdCount={get(e){if(e._dynamicPropertyData[i])return e._dynamicPropertyData[i];const t=function(e){const t=new Set,n=new Set;return e.properties.structAsymMap.forEach(((e,r)=>{let{auth_id:o}=e;t.add(o),n.add(r)})),{auth:t.size,label:n.size}}(e);return e._dynamicPropertyData[i]=t,t}},e.AsymIdOffset=dG.createSimple("asym_id_offset","static"),e.Index=dG.createSimple("index","static"),e.MaxIndex=dG.createSimple("max_index","static"),e.getRoot=function(e){return e.parent||e},e.areHierarchiesEqual=function(e,t){return e.atomicHierarchy===t.atomicHierarchy&&e.coarseHierarchy===t.coarseHierarchy};const a="__CoordinatesHistory__";e.CoordinatesHistory={get:e=>e._staticPropertyData[a],set:(e,t)=>e._staticPropertyData[a]=t};const s="__CoarseGrained__";function l(t){let n=e.CoarseGrained.get(t);if(void 0===n){let r=0;const{polymerType:o}=t.atomicHierarchy.derived.residue;for(let e=0;e<o.length;++e)0!==o[e]&&(r+=1);let i=!1,a=!1;const{label_atom_id:s,_rowCount:l}=t.atomicHierarchy.atoms;for(let e=0;e<l;++e){const t=s.value(e);if(i||"BB"!==t||(i=!0),a||"SC1"!==t||(a=!0),i&&a)break}n=i&&a||!(!r||!l)&&l/r<3,e.CoarseGrained.set(t,n)}return n}function c(e){return!!iL.is(e.sourceData)&&(null!==e.entryId.match(/^[1-9][a-z0-9]{3,3}$/i)||null!==e.entryId.match(/^pdb_[0-9]{4,4}[1-9][a-z0-9]{3,3}$/i))}e.CoarseGrained={get:e=>e._staticPropertyData[s],set:(e,t)=>e._staticPropertyData[s]=t},e.isCoarseGrained=l,e.hasCarbohydrate=function(e){return e.properties.saccharideComponentMap.size>0},e.hasProtein=function(e){const{subtype:t}=e.entities;for(let n=0,r=t.rowCount;n<r;++n)if(t.value(n).startsWith("polypeptide"))return!0;return!1},e.hasNucleic=function(e){const{subtype:t}=e.entities;for(let n=0,r=t.rowCount;n<r;++n){const e=t.value(n);if(e.endsWith("ribonucleotide hybrid")||e.endsWith("ribonucleotide"))return!0}return!1},e.isFromPdbArchive=function(e){if(!iL.is(e.sourceData))return!1;const{db:t}=e.sourceData.data;for(let n=0,r=t.database_2.database_id.rowCount;n<r;++n)if("pdb"===t.database_2.database_id.value(n))return!0;return!1},e.hasPdbId=c,e.hasSecondaryStructure=function(e){if(iL.is(e.sourceData)){const{db:t}=e.sourceData.data;return t.struct_conf.id.isDefined||t.struct_sheet_range.id.isDefined}return UN.Provider.isApplicable(e)};const u=qh.create(1.5707963,1.5707963,1.5707963),d=qh.create(1,1,1);function A(e){if(!iL.is(e.sourceData))return!1;const{db:t}=e.sourceData.data;for(let n=0;n<t.exptl.method.rowCount;n++){if(t.exptl.method.value(n).toUpperCase().indexOf("DIFFRACTION")>=0)return!0}return!1}function f(e){if(!iL.is(e.sourceData))return!1;const{db:t}=e.sourceData.data;for(let n=0;n<t.exptl.method.rowCount;n++){if(t.exptl.method.value(n).toUpperCase().indexOf("MICROSCOPY")>=0)return!0}return!1}function p(e){if(!iL.is(e.sourceData))return!1;if(!A(e))return!1;const{db:t}=e.sourceData.data,{status_code_sf:n}=t.pdbx_database_status;return n.isDefined&&"REL"===n.value(0)}function h(e){if(!iL.is(e.sourceData))return!1;const{db:t}=e.sourceData.data,{db_name:n,content_type:r}=t.pdbx_database_related;for(let o=0,i=t.pdbx_database_related._rowCount;o<i;++o)if("EMDB"===n.value(o).toUpperCase()&&"associated EM volume"===r.value(o))return!0;return!1}function g(e){return!!iL.is(e.sourceData)&&(p(e)||h(e))}e.hasCrystalSymmetry=function(e){var t;const n=null===(t=xO.Provider.get(e))||void 0===t?void 0:t.spacegroup;return!!n&&!(1===n.num&&qh.equals(n.cell.anglesInRadians,u)&&qh.equals(n.cell.size,d))},e.isFromXray=A,e.isFromEm=f,e.isFromNmr=function(e){if(!iL.is(e.sourceData))return!1;const{db:t}=e.sourceData.data;for(let n=0;n<t.exptl.method.rowCount;n++){if(t.exptl.method.value(n).toUpperCase().indexOf("NMR")>=0)return!0}return!1},e.hasXrayMap=p,e.hasEmMap=h,e.hasDensityMap=g,e.probablyHasDensityMap=function(e){if(!iL.is(e.sourceData))return!1;const{db:t}=e.sourceData.data;return g(e)||c(e)&&(!t.exptl.method.isDefined||A(e)&&(!t.pdbx_database_status.status_code_sf.isDefined||2===t.pdbx_database_status.status_code_sf.valueKind(0))||f(e)&&!t.pdbx_database_related.db_name.isDefined)}}(Wj||(Wj={})),function(e){e.getCifDataSource=function(e,t,n){if(!t)return{rowCount:0};if(n&&n[t.id])return n[t.id];const r=t.getElements(e),o={data:r,rowCount:r.elements.length};return n&&(n[t.id]=o),o},e.fromAtomMap=function(e){return new $j(e)},e.fromAtomArray=function(e){return new $j(Jj(e))};const t=e=>e.atomicHierarchy.residueAtomSegments;e.fromResidueMap=function(e){return new Zj("residue",e,t,0)},e.fromResidueArray=function(e){return new Zj("residue",Jj(e),t,0)};const n=e=>e.atomicHierarchy.chainAtomSegments;e.fromChainMap=function(e){return new Zj("chain",e,n,0)},e.fromChainArray=function(e){return new Zj("chain",Jj(e),n,0)},e.fromEntityMap=function(e){return new ez(e)}}(Kj||(Kj={}));class Zj{has(e){return this.map.has(e)}get(e){return this.map.get(e)}getStructureElements(e){const t=e.models;if(1!==t.length)throw new Error("Only works on structures with a single model.");const n=new Set,r=e.unitSymmetryGroups,o=[],i=this.segmentGetter(t[0]);for(const a of r){const t=a.units[0];if(t.kind!==this.kind)continue;const r=ty.transientSegments(i,t.elements);for(;r.hasNext;){const i=r.move();this.has(i.index)&&!n.has(i.index)&&(n.add(i.index),o[o.length]=Vk.create(e,t,t.elements[i.start]))}}return o.sort(((e,t)=>e.element-t.element)),o}getElements(e){const t=this.segmentGetter(e.model).index,n=this.getStructureElements(e);return{elements:n,property:e=>this.get(t[n[e].element])}}constructor(e,t,n,r){this.level=e,this.map=t,this.segmentGetter=n,this.id=Cp.create22(),this.kind=r}}class $j{has(e){return this.map.has(e)}get(e){return this.map.get(e)}getStructureElements(e){if(1!==e.models.length)throw new Error("Only works on structures with a single model.");const t=new Set,n=e.unitSymmetryGroups,r=[];for(const o of n){const n=o.units[0];if(n.kind!==this.kind)continue;const i=n.elements;for(let o=0,a=i.length;o<a;o++){const a=i[o];this.has(a)&&!t.has(a)&&(t.add(i[o]),r[r.length]=Vk.create(e,n,a))}}return r.sort(((e,t)=>e.element-t.element)),r}getElements(e){const t=this.getStructureElements(e);return{elements:t,property:e=>this.get(t[e].element)}}constructor(e){this.map=e,this.id=Cp.create22(),this.level="atom",this.kind=0}}class ez{has(e){return this.map.has(e)}get(e){return this.map.get(e)}getStructureElements(e){const t=e.models;if(1!==t.length)throw new Error("Only works on structures with a single model.");const n=t[0].atomicHierarchy.index,r=new Set,o=e.unitSymmetryGroups,i=[],a=t[0].atomicHierarchy.chainAtomSegments;for(const s of o){const t=s.units[0];if(t.kind!==this.kind)continue;const o=ty.transientSegments(a,t.elements);for(;o.hasNext;){const a=o.move(),s=n.getEntityFromChain(a.index);this.has(s)&&!r.has(s)&&(r.add(s),i[i.length]=Vk.create(e,t,t.elements[a.start]))}}return i.sort(((e,t)=>e.element-t.element)),i}getElements(e){const t=this.getStructureElements(e),n=e.model.atomicHierarchy.chainAtomSegments.index,r=e.model.atomicHierarchy.index;return{elements:t,property:e=>this.get(r.getEntityFromChain(n[t[e].element]))}}constructor(e){this.map=e,this.id=Cp.create22(),this.level="entity",this.kind=0}}const tz=new class{constructor(){this.map=new Map}removeSymbol(e){this.map.delete(e.symbol.id)}addSymbol(e){this.map.has(e.symbol.id)&&console.warn(`Symbol '${e.symbol.id}' already added. Call removeSymbol/removeCustomProps re-adding the symbol.`),this.map.set(e.symbol.id,e)}addCustomProp(e){if(e.symbols)for(const t of Object.keys(e.symbols))this.addSymbol(e.symbols[t])}removeCustomProp(e){if(e.symbols)for(const t of Object.keys(e.symbols))this.removeSymbol(e.symbols[t])}getRuntime(e){return this.map.get(e)}};class nz{constructor(e){this.table=e,this.constQueryContext=new $O(aG.Empty)}}var rz,oz,iz,az;!function(e){e.Const=function(e){return{kind:"const",value:e}},e.Dynamic=function(e){return{kind:"dynamic",runtime:e}}}(rz||(rz={})),function(e){e.Const=function(e){return{isConst:!0,fn:function(t){return e}}},e.Dynamic=function(e){return{isConst:!1,fn:e}}}(oz||(oz={})),function(e){e.forEachEval=function(e,t,n,r){if("number"===typeof e.length)for(let o=0,i=e.length;o<i;o++)n(e[o](t),o,r);else{let o=0;for(const i of Object.keys(e))n(e[i](t),o++,r)}return r}}(iz||(iz={})),function(e){e.Const=function(e,t){return new sz(e,t,!0)},e.Dynamic=function(e,t){return new sz(e,t,!1)}}(az||(az={}));class sz{compile(e,t){let n,r=!1;if(t)if(Yk.isArgumentsArray(t)){n=[],r=!0;for(const o of t){const t=cz(e,o);r=r&&t.isConst,n.push(t.fn)}}else{n=Object.create(null),r=!0;for(const o of Object.keys(t)){const i=cz(e,t[o]);r=r&&i.isConst,n[o]=i.fn}}else n=void 0,r=!0;return this.isConst&&this.isConst&&r?oz.Const(this.fn(e.constQueryContext,n)):oz.Dynamic(lz(this.fn,n))}constructor(e,t,n){this.symbol=e,this.fn=t,this.isConst=n}}function lz(e,t){return function(n){return e(n,t)}}function cz(e,t){if(Yk.isLiteral(t))return oz.Const(t);if(Yk.isSymbol(t)){const n=e.table.getRuntime(t.name);return n?n.compile(e):oz.Const(t.name)}if(!Yk.isSymbol(t.head))throw new Error("Can only apply symbols.");const n=e.table.getRuntime(t.head.name);if(!n)throw new Error(`Symbol '${t.head.name}' is not implemented.`);return n.compile(e,t.args)}function uz(e){return cz(new nz(tz),e).fn}const dz=az.Const,Az=az.Dynamic,fz=[dz(PQ.core.type.bool,(function(e,t){return!!t[0](e)})),dz(PQ.core.type.num,(function(e,t){return+t[0](e)})),dz(PQ.core.type.str,(function(e,t){return""+t[0](e)})),dz(PQ.core.type.list,(function(e,t){return iz.forEachEval(t,e,((e,t,n)=>n[t]=e),[])})),dz(PQ.core.type.set,(function(e,t){return iz.forEachEval(t,e,(function(e,t,n){return n.add(e)}),new Set)})),dz(PQ.core.type.regex,(function(e,t){return new RegExp(t[0](e),t[1]&&t[1](e)||"")})),dz(PQ.core.type.bitflags,(function(e,t){return+t[0](e)})),dz(PQ.core.type.compositeKey,(function(e,t){return iz.forEachEval(t,e,((e,t,n)=>n[t]=""+e),[]).join("-")})),dz(PQ.core.logic.not,((e,t)=>!t[0](e))),dz(PQ.core.logic.and,((e,t)=>{if("number"===typeof t.length){for(let n=0,r=t.length;n<r;n++)if(!t[n](e))return!1}else for(const n of Object.keys(t))if(!t[n](e))return!1;return!0})),dz(PQ.core.logic.or,((e,t)=>{if("number"===typeof t.length){for(let n=0,r=t.length;n<r;n++)if(t[n](e))return!0}else for(const n of Object.keys(t))if(t[n](e))return!0;return!1})),dz(PQ.core.rel.eq,((e,t)=>t[0](e)===t[1](e))),dz(PQ.core.rel.neq,((e,t)=>t[0](e)!==t[1](e))),dz(PQ.core.rel.lt,((e,t)=>t[0](e)<t[1](e))),dz(PQ.core.rel.lte,((e,t)=>t[0](e)<=t[1](e))),dz(PQ.core.rel.gr,((e,t)=>t[0](e)>t[1](e))),dz(PQ.core.rel.gre,((e,t)=>t[0](e)>=t[1](e))),dz(PQ.core.rel.inRange,((e,t)=>{const n=t[0](e);return n>=t[1](e)&&n<=t[2](e)})),dz(PQ.core.math.add,((e,t)=>{let n=0;if("number"===typeof t.length)for(let r=0,o=t.length;r<o;r++)n+=t[r](e);else for(const r of Object.keys(t))n+=t[r](e);return n})),dz(PQ.core.math.sub,((e,t)=>{let n=0;if("number"===typeof t.length){if(1===t.length)return-t[0](e);n=t[0](e)||0;for(let r=1,o=t.length;r<o;r++)n-=t[r](e)}else{const r=Object.keys(t);if(1===r.length)return-t[r[0]](e);n=t[r[0]](e)||0;for(let o=1,i=r.length;o<i;o++)n-=t[r[o]](e)}return n})),dz(PQ.core.math.mult,((e,t)=>{let n=1;if("number"===typeof t.length)for(let r=0,o=t.length;r<o;r++)n*=t[r](e);else for(const r of Object.keys(t))n*=t[r](e);return n})),dz(PQ.core.math.div,((e,t)=>t[0](e)/t[1](e))),dz(PQ.core.math.pow,((e,t)=>Math.pow(t[0](e),t[1](e)))),dz(PQ.core.math.mod,((e,t)=>t[0](e)%t[1](e))),dz(PQ.core.math.min,((e,t)=>{let n=Number.POSITIVE_INFINITY;if("number"===typeof t.length)for(let r=0,o=t.length;r<o;r++)n=Math.min(t[r](e),n);else for(const r of Object.keys(t))n=Math.min(t[r](e),n);return n})),dz(PQ.core.math.max,((e,t)=>{let n=Number.NEGATIVE_INFINITY;if("number"===typeof t.length)for(let r=0,o=t.length;r<o;r++)n=Math.max(t[r](e),n);else for(const r of Object.keys(t))n=Math.max(t[r](e),n);return n})),dz(PQ.core.math.cantorPairing,((e,t)=>Rh(t[0](e),t[1](e)))),dz(PQ.core.math.sortedCantorPairing,((e,t)=>Ph(t[0](e),t[1](e)))),dz(PQ.core.math.invertCantorPairing,((e,t)=>Oh([0,0],t[0](e)))),dz(PQ.core.math.floor,((e,t)=>Math.floor(t[0](e)))),dz(PQ.core.math.ceil,((e,t)=>Math.ceil(t[0](e)))),dz(PQ.core.math.roundInt,((e,t)=>Math.round(t[0](e)))),dz(PQ.core.math.trunc,((e,t)=>Math.trunc(t[0](e)))),dz(PQ.core.math.abs,((e,t)=>Math.abs(t[0](e)))),dz(PQ.core.math.sign,((e,t)=>Math.sign(t[0](e)))),dz(PQ.core.math.sqrt,((e,t)=>Math.sqrt(t[0](e)))),dz(PQ.core.math.cbrt,((e,t)=>Math.cbrt(t[0](e)))),dz(PQ.core.math.sin,((e,t)=>Math.sin(t[0](e)))),dz(PQ.core.math.cos,((e,t)=>Math.cos(t[0](e)))),dz(PQ.core.math.tan,((e,t)=>Math.tan(t[0](e)))),dz(PQ.core.math.asin,((e,t)=>Math.asin(t[0](e)))),dz(PQ.core.math.acos,((e,t)=>Math.acos(t[0](e)))),dz(PQ.core.math.atan,((e,t)=>Math.atan(t[0](e)))),dz(PQ.core.math.sinh,((e,t)=>Math.sinh(t[0](e)))),dz(PQ.core.math.cosh,((e,t)=>Math.cosh(t[0](e)))),dz(PQ.core.math.tanh,((e,t)=>Math.tanh(t[0](e)))),dz(PQ.core.math.exp,((e,t)=>Math.exp(t[0](e)))),dz(PQ.core.math.log,((e,t)=>Math.log(t[0](e)))),dz(PQ.core.math.log10,((e,t)=>Math.log10(t[0](e)))),dz(PQ.core.math.atan2,((e,t)=>Math.atan2(t[0](e),t[1](e)))),dz(PQ.core.str.match,((e,t)=>t[0](e).test(t[1](e)))),dz(PQ.core.str.concat,((e,t)=>{const n=[];if("number"===typeof t.length)for(let r=0,o=t.length;r<o;r++)n.push(t[r](e).toString());else for(const r of Object.keys(t))n.push(t[r](e).toString());return n.join("")})),dz(PQ.core.list.getAt,((e,t)=>t[0](e)[t[1](e)])),dz(PQ.core.list.equal,((e,t)=>oS(t[0](e),t[1](e)))),dz(PQ.core.set.has,(function(e,t){return t[0](e).has(t[1](e))})),dz(PQ.core.set.isSubset,(function(e,t){return $Q.isSuperset(t[1](e),t[0](e))})),dz(PQ.core.flags.hasAny,((e,t)=>{const n=t[1](e),r=t[0](e);return n?0!==(r&n):!!r})),dz(PQ.core.flags.hasAll,((e,t)=>{const n=t[1](e),r=t[0](e);return n?(r&n)===n:!r})),dz(PQ.structureQuery.type.elementSymbol,((e,t)=>rM(t[0](e)))),dz(PQ.structureQuery.type.atomName,((e,t)=>function(e){return e?"string"===typeof e?e.toUpperCase():`${e}`.toUpperCase():""}(t[0](e)))),dz(PQ.structureQuery.type.bondFlags,((e,t)=>{let n=0;if("number"===typeof t.length)for(let r=0,o=t.length;r<o;r++)n=hz(n,t[r](e));else for(const r of Object.keys(t))n=hz(n,t[r](e));return n})),dz(PQ.structureQuery.type.ringFingerprint,((e,t)=>KP.elementFingerprint(function(e,t){const n=[];if(!t)return n;if("number"===typeof t.length)for(let r=0,o=t.length;r<o;r++)n.push(t[r](e));else{const r=Object.keys(t);for(let o=1,i=r.length;o<i;o++)n.push(t[r[o]](e))}return n}(e,t)))),dz(PQ.structureQuery.type.secondaryStructureFlags,((e,t)=>{let n=0;if("number"===typeof t.length)for(let r=0,o=t.length;r<o;r++)n=gz(n,t[r](e));else for(const r of Object.keys(t))n=gz(n,t[r](e));return n})),Az(PQ.structureQuery.filter.pick,((e,t)=>OU.filters.pick(t[0],t.test)(e))),Az(PQ.structureQuery.filter.first,((e,t)=>OU.filters.first(t[0])(e))),Az(PQ.structureQuery.filter.withSameAtomProperties,((e,t)=>OU.filters.withSameAtomProperties(t[0],t.source,t.property)(e))),Az(PQ.structureQuery.filter.intersectedBy,((e,t)=>OU.filters.areIntersectedBy(t[0],t.by)(e))),Az(PQ.structureQuery.filter.within,((e,t)=>{var n,r,o;return OU.filters.within({query:t[0],target:t.target,minRadius:null===(n=t["min-radius"])||void 0===n?void 0:n.call(t,e),maxRadius:null===(r=t["max-radius"])||void 0===r?void 0:r.call(t,e),elementRadius:t["atom-radius"],invert:null===(o=t.invert)||void 0===o?void 0:o.call(t,e)})(e)})),Az(PQ.structureQuery.filter.isConnectedTo,((e,t)=>{var n,r;return OU.filters.isConnectedTo({query:t[0],target:t.target,disjunct:null===(n=t.disjunct)||void 0===n?void 0:n.call(t,e),invert:null===(r=t.invert)||void 0===r?void 0:r.call(t,e),bondTest:t["bond-test"]})(e)})),Az(PQ.structureQuery.generator.atomGroups,(function(e,t){return OU.generators.atoms({entityTest:t["entity-test"],chainTest:t["chain-test"],residueTest:t["residue-test"],atomTest:t["atom-test"],groupBy:t["group-by"]})(e)})),Az(PQ.structureQuery.generator.all,(function(e){return OU.generators.all(e)})),Az(PQ.structureQuery.generator.empty,(function(e){return OU.generators.none(e)})),Az(PQ.structureQuery.generator.bondedAtomicPairs,(function(e,t){return OU.generators.bondedAtomicPairs(t&&t[0])(e)})),Az(PQ.structureQuery.generator.rings,(function(e,t){var n,r;return OU.generators.rings(null===(n=null===t||void 0===t?void 0:t.fingerprint)||void 0===n?void 0:n.call(t,e),null===(r=null===t||void 0===t?void 0:t["only-aromatic"])||void 0===r?void 0:r.call(t,e))(e)})),Az(PQ.structureQuery.generator.queryInSelection,(function(e,t){var n;return OU.generators.querySelection(t[0],t.query,null===(n=t["in-complement"])||void 0===n?void 0:n.call(t,e))(e)})),Az(PQ.structureQuery.modifier.includeSurroundings,(function(e,t){return OU.modifiers.includeSurroundings(t[0],{radius:t.radius(e),wholeResidues:!(!t["as-whole-residues"]||!t["as-whole-residues"](e)),elementRadius:t["atom-radius"]})(e)})),Az(PQ.structureQuery.modifier.surroundingLigands,(function(e,t){return OU.modifiers.surroundingLigands({query:t[0],radius:t.radius(e),includeWater:!(!t["include-water"]||!t["include-water"](e))})(e)})),Az(PQ.structureQuery.modifier.wholeResidues,(function(e,t){return OU.modifiers.wholeResidues(t[0])(e)})),Az(PQ.structureQuery.modifier.union,(function(e,t){return OU.modifiers.union(t[0])(e)})),Az(PQ.structureQuery.modifier.expandProperty,(function(e,t){return OU.modifiers.expandProperty(t[0],t.property)(e)})),Az(PQ.structureQuery.modifier.exceptBy,(function(e,t){return OU.modifiers.exceptBy(t[0],t.by)(e)})),Az(PQ.structureQuery.modifier.includeConnected,(function(e,t){var n,r;return OU.modifiers.includeConnected({query:t[0],bondTest:t["bond-test"],wholeResidues:!(!t["as-whole-residues"]||!t["as-whole-residues"](e)),layerCount:t["layer-count"]&&t["layer-count"](e)||1,fixedPoint:null!==(r=null===(n=t["fixed-point"])||void 0===n?void 0:n.call(t,e))&&void 0!==r&&r})(e)})),Az(PQ.structureQuery.modifier.intersectBy,(function(e,t){return OU.modifiers.intersectBy(t[0],t.by)(e)})),Az(PQ.structureQuery.combinator.merge,((e,t)=>OU.combinators.merge(t)(e))),Az(PQ.structureQuery.atomProperty.core.elementSymbol,pz(WL.atom.type_symbol)),Az(PQ.structureQuery.atomProperty.core.vdw,((e,t)=>FN(WL.atom.type_symbol(t&&t[0]&&t[0](e)||e.element)))),Az(PQ.structureQuery.atomProperty.core.mass,((e,t)=>function(e){const t=QN[e];return void 0===t?10.81:RN[t]}(WL.atom.type_symbol(t&&t[0]&&t[0](e)||e.element)))),Az(PQ.structureQuery.atomProperty.core.atomicNumber,((e,t)=>NN(WL.atom.type_symbol(t&&t[0]&&t[0](e)||e.element)))),Az(PQ.structureQuery.atomProperty.core.x,pz(WL.atom.x)),Az(PQ.structureQuery.atomProperty.core.y,pz(WL.atom.y)),Az(PQ.structureQuery.atomProperty.core.z,pz(WL.atom.z)),Az(PQ.structureQuery.atomProperty.core.sourceIndex,pz(WL.atom.sourceIndex)),Az(PQ.structureQuery.atomProperty.core.operatorName,pz(WL.unit.operator_name)),Az(PQ.structureQuery.atomProperty.core.operatorKey,pz(WL.unit.operator_key)),Az(PQ.structureQuery.atomProperty.core.modelIndex,pz(WL.unit.model_index)),Az(PQ.structureQuery.atomProperty.core.modelLabel,pz(WL.unit.model_label)),Az(PQ.structureQuery.atomProperty.core.atomKey,((e,t)=>{const n=t&&t[0]&&t[0](e)||e.element;return Rh(n.unit.id,n.element)})),Az(PQ.structureQuery.atomProperty.macromolecular.residueKey,((e,t)=>function(e){return BO.isAtomic(e.unit)?e.unit.residueIndex[e.element]:-1}(t&&t[0]&&t[0](e)||e.element))),Az(PQ.structureQuery.atomProperty.macromolecular.chainKey,((e,t)=>function(e){return BO.isAtomic(e.unit)?e.unit.chainIndex[e.element]:-1}(t&&t[0]&&t[0](e)||e.element))),Az(PQ.structureQuery.atomProperty.macromolecular.entityKey,((e,t)=>function(e){return WL.entity.key(e)}(t&&t[0]&&t[0](e)||e.element))),Az(PQ.structureQuery.atomProperty.macromolecular.id,pz(WL.atom.id)),Az(PQ.structureQuery.atomProperty.macromolecular.isHet,((e,t)=>"ATOM"!==WL.residue.group_PDB(t&&t[0]&&t[0](e)||e.element))),Az(PQ.structureQuery.atomProperty.macromolecular.label_atom_id,pz(WL.atom.label_atom_id)),Az(PQ.structureQuery.atomProperty.macromolecular.label_alt_id,pz(WL.atom.label_alt_id)),Az(PQ.structureQuery.atomProperty.macromolecular.label_comp_id,pz(WL.atom.label_comp_id)),Az(PQ.structureQuery.atomProperty.macromolecular.label_seq_id,pz(WL.residue.label_seq_id)),Az(PQ.structureQuery.atomProperty.macromolecular.label_asym_id,pz(WL.chain.label_asym_id)),Az(PQ.structureQuery.atomProperty.macromolecular.label_entity_id,pz(WL.entity.id)),Az(PQ.structureQuery.atomProperty.macromolecular.auth_atom_id,pz(WL.atom.auth_atom_id)),Az(PQ.structureQuery.atomProperty.macromolecular.auth_comp_id,pz(WL.atom.auth_comp_id)),Az(PQ.structureQuery.atomProperty.macromolecular.auth_seq_id,pz(WL.residue.auth_seq_id)),Az(PQ.structureQuery.atomProperty.macromolecular.auth_asym_id,pz(WL.chain.auth_asym_id)),Az(PQ.structureQuery.atomProperty.macromolecular.pdbx_PDB_ins_code,pz(WL.residue.pdbx_PDB_ins_code)),Az(PQ.structureQuery.atomProperty.macromolecular.pdbx_formal_charge,pz(WL.atom.pdbx_formal_charge)),Az(PQ.structureQuery.atomProperty.macromolecular.occupancy,pz(WL.atom.occupancy)),Az(PQ.structureQuery.atomProperty.macromolecular.B_iso_or_equiv,pz(WL.atom.B_iso_or_equiv)),Az(PQ.structureQuery.atomProperty.macromolecular.entityType,pz(WL.entity.type)),Az(PQ.structureQuery.atomProperty.macromolecular.entitySubtype,pz(WL.entity.subtype)),Az(PQ.structureQuery.atomProperty.macromolecular.entityPrdId,pz(WL.entity.prd_id)),Az(PQ.structureQuery.atomProperty.macromolecular.entityDescription,pz(WL.entity.pdbx_description)),Az(PQ.structureQuery.atomProperty.macromolecular.objectPrimitive,pz(WL.unit.object_primitive)),Az(PQ.structureQuery.atomProperty.macromolecular.isNonStandard,pz(WL.residue.isNonStandard)),Az(PQ.structureQuery.atomProperty.macromolecular.secondaryStructureKey,pz(WL.residue.secondary_structure_key)),Az(PQ.structureQuery.atomProperty.macromolecular.secondaryStructureFlags,pz(WL.residue.secondary_structure_type)),Az(PQ.structureQuery.atomProperty.macromolecular.chemCompType,pz(WL.residue.chem_comp_type)),Az(PQ.structureQuery.atomSet.atomCount,(function(e,t){return OU.atomset.atomCount(e)})),Az(PQ.structureQuery.atomSet.countQuery,(function(e,t){return OU.atomset.countQuery(t[0])(e)})),Az(PQ.structureQuery.atomSet.propertySet,(function(e,t){return OU.atomset.propertySet(t[0])(e)})),Az(PQ.structureQuery.bondProperty.order,((e,t)=>e.atomicBond.order)),Az(PQ.structureQuery.bondProperty.flags,((e,t)=>e.atomicBond.type)),Az(PQ.structureQuery.bondProperty.key,((e,t)=>e.atomicBond.key)),Az(PQ.structureQuery.bondProperty.atomA,((e,t)=>e.atomicBond.a)),Az(PQ.structureQuery.bondProperty.atomB,((e,t)=>e.atomicBond.b)),Az(PQ.structureQuery.bondProperty.length,((e,t)=>e.atomicBond.length)),Az(PQ.internal.generator.bundleElement,(function(e,t){return JO(t.groupedUnits(e),t.ranges(e),t.set(e))})),Az(PQ.internal.generator.bundle,(function(e,t){return ZO(t.elements(e))(e)})),Az(PQ.internal.generator.current,(function(e,t){return e.tryGetCurrentSelection()}))];function pz(e){return(t,n)=>e(n&&n[0]&&n[0](t)||t.element)}function hz(e,t){return e|(VM.isName(t)?VM.fromName(t):0)}function gz(e,t){switch(t.toLowerCase()){case"helix":return 2|e;case"alpha":return 4098|e;case"pi":return 32770|e;case"310":return 2050|e;case"beta":return 4|e;case"strand":return 4194308|e;case"sheet":return 8388612|e;case"turn":return 16|e;case"bend":return 8|e;case"coil":return 536870912|e;default:return e}}var mz,yz,vz;function bz(e){return e===vz.Float32?4:e===vz.Int16||e===vz.Uint16?2:1}function Cz(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;return e===vz.Float32?new Float32Array(t,n,r):e===vz.Int16?new Int16Array(t,n,r):e===vz.Uint16?new Uint16Array(t,n,r):new Int8Array(t,n,r)}async function Iz(e,t,n,r,o,i){if(xz(e)){const i=3*o;await n.readBuffer(r,t.readBuffer,o,i);const a=new Int8Array(t.valuesBuffer.buffer,i),s=(e.AMAX-e.AMIN)/255,l=.5*(e.AMIN+e.AMAX+s);for(let e=0,n=o;e<n;++e)t.values[e]=s*a[e]+l}else await async function(e,t,n,r,o,i){return await t.readBuffer(n,e.readBuffer,r,o),e.elementByteSize>1&&(void 0!==i&&i!==mz.IsNativeEndianLittle||!mz.IsNativeEndianLittle)&&mz.flipByteOrder(e.readBuffer,e.valuesBuffer,r,e.elementByteSize,o),e.values}(t,n,r,o,0,i)}function Ez(e){switch(e){case 0:return vz.Int8;case 1:return vz.Int16;case 2:return vz.Float32;case 3:throw new Error("mode 3 unsupported, complex 16-bit integers");case 4:throw new Error("mode 4 unsupported, complex 32-bit reals");case 6:vz.Uint16;case 16:throw new Error("mode 16 unsupported, unsigned char * 3 (for rgb data, non-standard)")}throw new Error(`unknown mode '${e}'`)}function xz(e){return-128===e.userFlag1&&127===e.userFlag2}function Bz(e){return xz(e)?vz.Float32:Ez(e.MODE)}async function wz(e,t,n){await n.update({message:"Parsing CCP4/MRC/MAP file..."});const{header:r,littleEndian:o}=await async function(e){const{buffer:t}=await e.readBuffer(0,1024),n=String.fromCharCode(t.readUInt8(208),t.readUInt8(209),t.readUInt8(210),t.readUInt8(211));if("MAP "!==n)throw new Error('ccp4 format error, missing "MAP " string');const r=[t.readUInt8(212),t.readUInt8(213)];let o=!1;68===r[0]&&65===r[1]?o=!0:17===r[0]&&17===r[1]?o=!1:t.readInt32LE(12)<=16&&(o=!0);const i=o?e=>t.readInt32LE(4*e):e=>t.readInt32BE(4*e),a=o?e=>t.readFloatLE(4*e):e=>t.readFloatBE(4*e);return{header:{NC:i(0),NR:i(1),NS:i(2),MODE:i(3),NCSTART:i(4),NRSTART:i(5),NSSTART:i(6),NX:i(7),NY:i(8),NZ:i(9),xLength:a(10),yLength:a(11),zLength:a(12),alpha:a(13),beta:a(14),gamma:a(15),MAPC:i(16),MAPR:i(17),MAPS:i(18),AMIN:a(19),AMAX:a(20),AMEAN:a(21),ISPG:i(22),NSYMBT:i(23),LSKFLG:i(24),SKWMAT:[],SKWTRN:[],userFlag1:i(39),userFlag2:i(40),originX:a(49),originY:a(50),originZ:a(51),MAP:n,MACHST:r,ARMS:a(54)},littleEndian:o}}(e),i=function(e){return 1024+e.NSYMBT}(r),a=Ez(r.MODE),s=Bz(r),l=r.NC*r.NR*r.NS,c=l*bz(a),u=function(e,t){const n=bz(t),r=new ArrayBuffer(n*e),o=mz.fromArrayBuffer(r),i=mz.IsNativeEndianLittle?r:new ArrayBuffer(n*e);return{type:t,elementByteSize:n,readBuffer:o,valuesBuffer:new Uint8Array(i),values:Cz(t,i)}}(l,s);Iz(r,u,e,i,c,o);return{header:r,values:u.values,name:e.name}}function _z(e,t){return n=yz.fromBuffer(mz.fromUint8Array(e),t),e.length,Tw.create("Parse CCP4/MRC/MAP",(async e=>{try{return mF.success(await wz(n,0,e))}catch(l0e){return mF.error(l0e)}}));var n}!function(){for(const e of fz)tz.addSymbol(e)}(),function(e){function t(e){const t=new DataView(e.buffer);return Object.assign(e.subarray(0),{readInt8:e=>t.getInt8(e),readUInt8:e=>t.getUint8(e),writeInt8:(e,n)=>t.setInt8(n,e),writeUInt8:(e,n)=>t.setUint8(n,e),readInt16LE:e=>t.getInt16(e,!0),readInt32LE:e=>t.getInt32(e,!0),readUInt16LE:e=>t.getUint16(e,!0),readUInt32LE:e=>t.getUint32(e,!0),readFloatLE:e=>t.getFloat32(e,!0),readDoubleLE:e=>t.getFloat64(e,!0),writeInt16LE:(e,n)=>t.setInt16(n,e,!0),writeInt32LE:(e,n)=>t.setInt32(n,e,!0),writeUInt16LE:(e,n)=>t.setUint16(n,e,!0),writeUInt32LE:(e,n)=>t.setUint32(n,e,!0),writeFloatLE:(e,n)=>t.setFloat32(n,e,!0),writeDoubleLE:(e,n)=>t.setFloat64(n,e,!0),readInt16BE:e=>t.getInt16(e,!1),readInt32BE:e=>t.getInt32(e,!1),readUInt16BE:e=>t.getUint16(e,!1),readUInt32BE:e=>t.getUint32(e,!1),readFloatBE:e=>t.getFloat32(e,!1),readDoubleBE:e=>t.getFloat64(e,!1),writeInt16BE:(e,n)=>t.setInt16(n,e,!1),writeInt32BE:(e,n)=>t.setInt32(n,e,!1),writeUInt16BE:(e,n)=>t.setUint16(n,e,!1),writeUInt32BE:(e,n)=>t.setUint32(n,e,!1),writeFloatBE:(e,n)=>t.setFloat32(n,e,!1),writeDoubleBE:(e,n)=>t.setFloat64(n,e,!1),copy:(t,n,r,o)=>(n=Pp(n,0),r=Pp(r,0),o=Pp(o,e.length),t.set(e.subarray(r,o),n),o-r)})}function n(e,t,n,r,o){for(let i=0,a=n;i<a;i+=r)for(let n=0;n<r;n++)t[o+i+r-n-1]=e[o+i+n]}e.fromUint8Array=t,e.fromArrayBuffer=function(e){return t(new Uint8Array(e))},e.fromBuffer=function(e){return e},e.IsNativeEndianLittle=13330===new Uint16Array(new Uint8Array([18,52]).buffer)[0],e.flipByteOrder=n,e.flipByteOrderInPlace2=function(e){const t=new Int16Array(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2?arguments[2]:void 0);for(let n=0,r=t.length;n<r;++n){const e=t[n];t[n]=(255&e)<<8|e>>8&255}},e.ensureLittleEndian=function(t,r,o,i,a){e.IsNativeEndianLittle||!o||i<=1||n(t,r,o,i,a)}}(mz||(mz={})),function(e){e.fromBuffer=function(e,t){return{name:t,readBuffer:(t,n,r,o)=>{let i,a;if("number"===typeof n){r=Pp(r,n);const o=t,s=Math.min(e.length,o+r);i=s-o,a=mz.fromUint8Array(new Uint8Array(e.buffer,o,s-o))}else{r=Pp(r,n.length);const s=t,l=Math.min(e.length,s+r);n.set(e.subarray(s,l),o),i=l-s,a=n}return r!==i&&console.warn(`byteCount ${r} and bytesRead ${i} differ`),Promise.resolve({bytesRead:i,buffer:a})},writeBuffer:(e,t,n)=>(n=Pp(n,t.length),console.error(".writeBuffer not implemented for FileHandle.fromBuffer"),Promise.resolve(0)),writeBufferSync:(e,t,n)=>(n=Pp(n,t.length),console.error(".writeSync not implemented for FileHandle.fromBuffer"),0),close:Dp}}}(yz||(yz={})),function(e){e.Float32="float32",e.Int8="int8",e.Int16="int16",e.Uint16="uint16"}(vz||(vz={}));const Sz=512;function Dz(e){const{xExtent:t,yExtent:n,zExtent:r}=e;return{xBlocks:Math.ceil(t/8),yBlocks:Math.ceil(n/8),zBlocks:Math.ceil(r/8)}}async function Tz(e){const{buffer:t}=await e.readBuffer(0,Sz),n=String.fromCharCode.apply(null,t),r=n.startsWith(":-)"),o=r||100===t.readInt16LE(36),i=r?function(e){return{xStart:parseInt(e.substr(10,5)),yStart:parseInt(e.substr(15,5)),zStart:parseInt(e.substr(20,5)),xExtent:parseInt(e.substr(32,5)),yExtent:parseInt(e.substr(38,5)),zExtent:parseInt(e.substr(42,5)),xRate:parseInt(e.substr(52,5)),yRate:parseInt(e.substr(58,5)),zRate:parseInt(e.substr(62,5)),xlen:parseFloat(e.substr(73,10)),ylen:parseFloat(e.substr(83,10)),zlen:parseFloat(e.substr(93,10)),alpha:parseFloat(e.substr(103,10)),beta:parseFloat(e.substr(113,10)),gamma:parseFloat(e.substr(123,10)),divisor:parseFloat(e.substr(138,12)),summand:parseInt(e.substr(155,8)),sigma:parseFloat(e.substr(170,12))}}(n):function(e,t){const n=t?t=>e.readInt16LE(2*t):t=>e.readInt16BE(2*t),r=1/n(17);return{xStart:n(0),yStart:n(1),zStart:n(2),xExtent:n(3),yExtent:n(4),zExtent:n(5),xRate:n(6),yRate:n(7),zRate:n(8),xlen:n(9)*r,ylen:n(10)*r,zlen:n(11)*r,alpha:n(12)*r,beta:n(13)*r,gamma:n(14)*r,divisor:n(15)/100,summand:n(16),sigma:void 0}}(t,o);return{header:i,littleEndian:o}}async function kz(e,t,n){await n.update({message:"Parsing DSN6/BRIX file..."});const{header:r,littleEndian:o}=await Tz(e),{buffer:i}=await e.readBuffer(Sz,t-Sz),{valueCount:a}=function(e){const{xExtent:t,yExtent:n,zExtent:r}=e,{xBlocks:o,yBlocks:i,zBlocks:a}=Dz(e),s=8*o*i*8*a*8;return{count:s,byteCount:1*s,valueCount:t*n*r}}(r),s=new Float32Array(a);await async function(e,t,n,r){r||mz.flipByteOrderInPlace2(t.buffer);const{divisor:o,summand:i,xExtent:a,yExtent:s,zExtent:l}=e,{xBlocks:c,yBlocks:u,zBlocks:d}=Dz(e);let A=0;for(let f=0;f<d;++f)for(let e=0;e<u;++e)for(let r=0;r<c;++r)for(let c=0;c<8;++c){const u=8*f+c;for(let c=0;c<8;++c){const d=8*e+c;for(let e=0;e<8;++e){const c=8*r+e;if(!(c<a&&d<s&&u<l)){A+=8-e;break}n[(c*s+d)*l+u]=(t[A]-i)/o,++A}}}}(r,i,s,o);return{header:r,values:s,name:e.name}}function Qz(e,t){return function(e,t){return Tw.create("Parse DSN6/BRIX",(async n=>{try{return mF.success(await kz(e,t,n))}catch(l0e){return mF.error(l0e)}}))}(yz.fromBuffer(mz.fromUint8Array(e),t),e.length)}const Mz=new Set(Object.keys({char:1,uchar:1,short:2,ushort:2,int:4,uint:4,float:4,double:8,int8:1,uint8:1,int16:2,uint16:2,int32:4,uint32:4,float32:4,float64:8}));function Rz(e){if(!Mz.has(e))throw new Error(`unknown ply type '${e}'`);return e}function Pz(e){const{tokenizer:t,comments:n,elementSpecs:r}=e;!function(e){const t=e.data.indexOf("end_header",e.position);if(-1===t)throw new Error("no 'end_header' record found");e.tokenStart=e.position,e.tokenEnd=t,e.position=t,hF.eatLine(e)}(t);const o=hF.getTokenString(t).split(/\r?\n/);if("ply"!==o[0])throw new Error("data not starting with 'ply'");if("format ascii 1.0"!==o[1])throw new Error("format not 'ascii 1.0'");let i,a,s;function l(){if(void 0!==i&&void 0!==a&&void 0!==s){let e=!1;for(let t=0,n=s.length;t<n;++t){if("list"===s[t].kind){e=!0;break}}e&&s.length,e?r.push({kind:"list",name:i,count:a,property:s[0]}):r.push({kind:"table",name:i,count:a,properties:s})}}for(let c=2,u=o.length;c<u;++c){const e=o[c],t=e.split(" ");if(e.startsWith("comment"))n.push(e.substr(8));else if(e.startsWith("element"))l(),s=[],i=t[1],a=parseInt(t[2]);else if(e.startsWith("property")){if(void 0===s)throw new Error("properties outside of element");"list"===t[1]?s.push({kind:"list",countType:Rz(t[2]),dataType:Rz(t[3]),name:t[4]}):s.push({kind:"column",type:Rz(t[1]),name:t[2]})}else e.startsWith("end_header")?l():console.warn("unknown header line")}}function Oz(e){switch(e){case"char":case"uchar":case"int8":case"uint8":case"short":case"ushort":case"int16":case"uint16":case"int":case"uint":case"int32":case"uint32":return ag.Schema.int;case"float":case"double":case"float32":case"float64":return ag.Schema.float}}function Fz(e,t){const{elements:n,tokenizer:r}=e,{count:o,properties:i}=t,a=i.length,s=[],l=[],c=[],u=new Map;for(let d=0,A=a;d<A;++d){const e=gF.create(r.data,2*o);c.push(e)}for(let d=0,A=o;d<A;++d)for(let e=0,t=a;e<t;++e)hF.skipWhitespace(r),hF.markStart(r),hF.eatValue(r),gF.addUnchecked(c[e],r.tokenStart,r.tokenEnd);for(let d=0,A=a;d<A;++d){const{type:e,name:t}=i[d],n=rQ(c[d],Oz(e));s.push(t),l.push(e),u.set(t,n)}n.push({kind:"table",rowCount:o,propertyNames:s,propertyTypes:l,getProperty:e=>u.get(e)})}function Nz(e,t){const{elements:n,tokenizer:r}=e,{count:o,property:i}=t,a=gF.create(r.data,2*o*3),s=new Uint32Array(o+1);let l=0;for(let d=0,A=o;d<A;++d){for(hF.skipWhitespace(r),hF.markStart(r);10!==hF.skipWhitespace(r);)++l,hF.markStart(r),hF.eatValue(r),gF.addToken(a,r);s[d+1]=l}const c={entries:[],count:0},u=rQ(a,Oz(i.dataType));n.push({kind:"list",rowCount:o,name:i.name,type:i.dataType,value:e=>{const t=s[e]+1,n=u.value(t-1);for(let r=t,o=t+n;r<o;++r)c.entries[r-t]=u.value(r);return c.count=n,c}})}async function Lz(e,t){const n=function(e,t){return{data:e,tokenizer:hF(e),runtimeCtx:t,comments:[],elementSpecs:[],elements:[]}}(e,t);t.update({message:"Parsing...",current:0,max:e.length}),Pz(n),function(e){const{elementSpecs:t}=e;for(let n=0,r=t.length;n<r;++n){const r=t[n];"table"===r.kind?Fz(e,r):"list"===r.kind&&Nz(e,r)}}(n);const{elements:r,elementSpecs:o,comments:i}=n,a=o.map((e=>e.name)),s=function(e,t,n){const r=new Map;for(let o=0,i=t.length;o<i;++o)r.set(t[o],e[o]);return{comments:n,elementNames:t,getElement:e=>r.get(e)}}(r,a,i);return mF.success(s)}const{readLine:Uz,skipWhitespace:Gz,eatValue:jz,eatLine:zz,markStart:Hz}=hF,Vz=/\s+/,qz=/(^\*|REMARK)*/;async function Yz(e,t){const{tokenizer:n}=e,r=gF.create(n.data,2*t),o=gF.create(n.data,2*t),i=gF.create(n.data,2*t),a=gF.create(n.data,2*t),s=gF.create(n.data,2*t),l=gF.create(n.data,2*t),c=gF.create(n.data,2*t),u=gF.create(n.data,2*t),{position:d}=n,A=Uz(n).trim();n.position=d;const f=7===A.split(Vz).length,p=f?6:8,{length:h}=n;let g=0;return await Mw(e.runtimeCtx,1e5,void 0,(e=>{const d=Math.min(t-g,e);for(let t=0;t<d;++t){for(let e=0;e<p;++e)if(Gz(n),Hz(n),jz(n),f)switch(e){case 0:gF.addUnchecked(r,n.tokenStart,n.tokenEnd);break;case 1:gF.addUnchecked(i,n.tokenStart,n.tokenEnd);break;case 2:gF.addUnchecked(s,n.tokenStart,n.tokenEnd);break;case 3:gF.addUnchecked(l,n.tokenStart,n.tokenEnd);break;case 4:gF.addUnchecked(c,n.tokenStart,n.tokenEnd);break;case 5:gF.addUnchecked(u,n.tokenStart,n.tokenEnd)}else switch(e){case 0:gF.addUnchecked(r,n.tokenStart,n.tokenEnd);break;case 1:gF.addUnchecked(o,n.tokenStart,n.tokenEnd);break;case 2:gF.addUnchecked(i,n.tokenStart,n.tokenEnd);break;case 3:gF.addUnchecked(a,n.tokenStart,n.tokenEnd);break;case 4:gF.addUnchecked(s,n.tokenStart,n.tokenEnd);break;case 5:gF.addUnchecked(l,n.tokenStart,n.tokenEnd);break;case 6:gF.addUnchecked(c,n.tokenStart,n.tokenEnd);break;case 7:gF.addUnchecked(u,n.tokenStart,n.tokenEnd)}zz(n),Hz(n)}return g+=d,d}),(e=>e.update({message:"Parsing...",current:n.position,max:h}))),{count:t,atomId:nQ(r)(ag.Schema.int),segmentName:f?nQ(i)(ag.Schema.str):nQ(o)(ag.Schema.str),residueId:nQ(i)(ag.Schema.int),residueName:f?nQ(i)(ag.Schema.str):nQ(a)(ag.Schema.str),atomName:nQ(s)(ag.Schema.str),atomType:nQ(l)(ag.Schema.str),charge:nQ(c)(ag.Schema.float),mass:nQ(u)(ag.Schema.float)}}async function Xz(e,t){const{tokenizer:n}=e,r=gF.create(n.data,2*t),o=gF.create(n.data,2*t),{length:i}=n;let a=0;return await Mw(e.runtimeCtx,10,void 0,(e=>{const i=Math.min(t-a,e);for(let t=0;t<i;++t)for(let e=0;e<2;++e)switch(Gz(n),Hz(n),jz(n),e){case 0:gF.addUnchecked(r,n.tokenStart,n.tokenEnd);break;case 1:gF.addUnchecked(o,n.tokenStart,n.tokenEnd)}return a+=i,i}),(e=>e.update({message:"Parsing...",current:n.position,max:i}))),{count:t,atomIdA:nQ(r)(ag.Schema.int),atomIdB:nQ(o)(ag.Schema.int)}}function Wz(e,t){const n=[];for(let r=0;r<t;++r){const t=Uz(e.tokenizer);n.push(t.replace(qz,"").trim())}return n}function Kz(e){return Tw.create("Parse PSF",(async t=>await async function(e,t){const n=hF(e),r=function(e,t){return{tokenizer:e,runtimeCtx:t}}(n,t);let o,i,a;const s=Uz(r.tokenizer).trim();for(;n.tokenEnd<n.length;){const e=Uz(r.tokenizer).trim();if(e.includes("!NTITLE"))o=Wz(r,parseInt(e.split(Vz)[0]));else if(e.includes("!NATOM")){const t=parseInt(e.split(Vz)[0]);i=await Yz(r,t)}else{if(e.includes("!NBOND")){const t=parseInt(e.split(Vz)[0]);a=await Xz(r,t);break}e.includes("!NTHETA")||e.includes("!NPHI")||e.includes("!NIMPHI")||e.includes("!NDON")||e.includes("!NACC")||e.includes("!NNB")||e.includes("!NGRP NST2")||e.includes("!MOLNT")||e.includes("!NUMLP NUMLPH")||e.includes("!NCRTERM")}}if(void 0===o&&(o=[]),void 0===i)return mF.error("no atoms data");if(void 0===a)return mF.error("no bonds data");const l={id:s,title:o,atoms:i,bonds:a};return mF.success(l)}(e,t)))}var Jz,Zz;!function(e){function t(t){return e.Create({...t,typeClass:"Representation3D"})}e.Create=MC.factory(),e.isRepresentation3D=function(e){return!!e&&"Representation3D"===e.type.typeClass},e.isBehavior=function(e){return!!e&&"Behavior"===e.type.typeClass},e.CreateRepresentation3D=t,e.CreateBehavior=function(t){return e.Create({...t,typeClass:"Behavior"})};class n extends(e.Create({name:"Root",typeClass:"Root"})){}e.Root=n;class r extends(e.Create({name:"Group",typeClass:"Group"})){}let o,i,a,s,l;e.Group=r,function(t){class n extends(e.Create({name:"String Data",typeClass:"Data"})){}t.String=n;class r extends(e.Create({name:"Binary Data",typeClass:"Data"})){}t.Binary=r;class o extends(e.Create({name:"Data Blob",typeClass:"Data"})){}t.Blob=o}(o=e.Data||(e.Data={})),function(t){class n extends(e.Create({name:"JSON Data",typeClass:"Data"})){}t.Json=n;class r extends(e.Create({name:"CIF File",typeClass:"Data"})){}t.Cif=r;class o extends(e.Create({name:"Cube File",typeClass:"Data"})){}t.Cube=o;class i extends(e.Create({name:"PSF File",typeClass:"Data"})){}t.Psf=i;class a extends(e.Create({name:"PRMTOP File",typeClass:"Data"})){}t.Prmtop=a;class s extends(e.Create({name:"TOP File",typeClass:"Data"})){}t.Top=s;class l extends(e.Create({name:"PLY File",typeClass:"Data"})){}t.Ply=l;class c extends(e.Create({name:"CCP4/MRC/MAP File",typeClass:"Data"})){}t.Ccp4=c;class u extends(e.Create({name:"DSN6/BRIX File",typeClass:"Data"})){}t.Dsn6=u;class d extends(e.Create({name:"DX File",typeClass:"Data"})){}t.Dx=d;class A extends(e.Create({name:"Format Blob",typeClass:"Data"})){}t.Blob=A}(i=e.Format||(e.Format={})),function(n){class r extends(e.Create({name:"Coordinates",typeClass:"Object"})){}n.Coordinates=r;class o extends(e.Create({name:"Topology",typeClass:"Object"})){}n.Topology=o;class i extends(e.Create({name:"Model",typeClass:"Object"})){}n.Model=i;class a extends(e.Create({name:"Trajectory",typeClass:"Object"})){}n.Trajectory=a;class s extends(e.Create({name:"Structure",typeClass:"Object"})){}n.Structure=s,function(n){class r extends(t({name:"Structure 3D"})){}n.Representation3D=r;class o extends(e.Create({name:"Structure 3D State",typeClass:"Object"})){}n.Representation3DState=o;class i extends(e.Create({name:"Selections",typeClass:"Object"})){}n.Selections=i}(s=n.Structure||(n.Structure={}))}(a=e.Molecule||(e.Molecule={})),function(n){class r extends(e.Create({name:"Volume",typeClass:"Object"})){}n.Data=r;class o extends(e.Create({name:"Lazy Volume",typeClass:"Object"})){}n.Lazy=o;class i extends(t({name:"Volume 3D"})){}n.Representation3D=i}(s=e.Volume||(e.Volume={})),function(n){class r extends(e.Create({name:"Shape Provider",typeClass:"Object"})){}n.Provider=r;class o extends(t({name:"Shape 3D"})){}n.Representation3D=o}(l=e.Shape||(e.Shape={}))}(Jz||(Jz={})),function(e){e.CreateBuiltIn=j_.factory("ms-plugin"),e.BuiltIn=j_.builderFactory("ms-plugin")}(Zz||(Zz={}));const $z=.529177210859;function eH(e){const t=hF.readLines(e,6),n=(e,n)=>{const r=+t[e].trim().split(/\s+/g)[n];return Number.isNaN(r)?0:r},r=e=>{const t=n(e+2,0),r=$z;return[Math.abs(t),qh.create(n(e+2,1)*r,n(e+2,2)*r,n(e+2,3)*r),t]},o=t[0].trim(),i=t[1].trim(),[a,s,l]=r(0),[c,u]=r(1),[d,A]=r(2),[f,p]=r(3),h=function(e,t,n){const r=new Int32Array(t),o=new Float64Array(t),i=new Float32Array(t),a=new Float32Array(t),s=new Float32Array(t);for(let l=0;l<t;l++){const t=hF.readLine(e).trim().split(/\s+/g);r[l]=+t[0],o[l]=+t[1],i[l]=+t[2]*n,a[l]=+t[3]*n,s[l]=+t[4]*n}return{count:t,number:ag.ofArray({array:r,schema:ag.Schema.int}),nuclearCharge:ag.ofArray({array:o,schema:ag.Schema.float}),x:ag.ofArray({array:i,schema:ag.Schema.float}),y:ag.ofArray({array:a,schema:ag.Schema.float}),z:ag.ofArray({array:s,schema:ag.Schema.float})}}(e,a,$z),g=[];if(l>=0){let e=n(2,4);0===e&&(e=1);for(let t=0;t<e;t++)g.push(t)}else{const t=hF.readLine(e).trim().split(/\s+/g);for(let e=0,n=+t[0];e<n;e++)g.push(+t[e+1])}return{header:{orbitals:l<0,comment1:o,comment2:i,atomCount:a,origin:s,dim:qh.create(c,d,f),basisX:u,basisY:A,basisZ:p,dataSetIds:g},atoms:h}}function tH(e,t){return Tw.create("Parse Cube",(async n=>{await n.update("Reading header...");const r=hF(e),{header:o,atoms:i}=eH(r),a=await function(e,t,n){const r=n.dim[0]*n.dim[1]*n.dim[2]*n.dataSetIds.length,o=1e6,i=new Float64Array(r);let a=0;return Mw(e,o,i,((e,n)=>{const i=Math.min(r,a+e);for(let r=a;r<i;r++)hF.skipWhitespace(t),t.tokenStart=t.position,hF.eatValue(t),n[r]=ig(t.data,t.tokenStart,t.tokenEnd);return a=i,i===r?0:o}),((e,t,n)=>e.update({current:Math.min(n,r),max:r})))}(n,r,o);return mF.success({header:o,atoms:i,values:a,name:t})}))}function nH(e){const t={h:qh()};let n=0,r=0;const o=/\s+/g;for(;;){const i=hF.readLine(e);let a;if(i.startsWith("object 1"))a=i.split(o),t.dim=qh.create(parseInt(a[5]),parseInt(a[6]),parseInt(a[7]));else if(i.startsWith("origin"))a=i.split(o),t.min=qh.create(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]));else if(i.startsWith("delta"))a=i.split(o),0===r?t.h[0]=parseFloat(a[1]):1===r?t.h[1]=parseFloat(a[2]):2===r&&(t.h[2]=parseFloat(a[3])),r+=1;else if(i.startsWith("object 3")){n+=i.length+1;break}n+=i.length+1}return{header:t,headerByteCount:n}}async function rH(e,t,n){await e.update("Reading header...");const r=hF(t),{header:o}=nH(r);await e.update("Reading values...");const i=await function(e,t,n){const r=n.dim[0]*n.dim[1]*n.dim[2],o=1e6,i=new Float64Array(r);let a=0;return Mw(e,o,i,((e,n)=>{const i=Math.min(r,a+e);for(let r=a;r<i;r++)hF.skipWhitespace(t),t.tokenStart=t.position,hF.eatValue(t),n[r]=ig(t.data,t.tokenStart,t.tokenEnd);return a=i,i===r?0:o}),((e,t,n)=>e.update({current:Math.min(n,r),max:r})))}(e,r,o);return mF.success({header:o,values:i,name:n})}function oH(e,t){return Tw.create("Parse DX",(n=>"string"===typeof e?rH(n,e,t):async function(e,t,n){await e.update("Reading header...");const r=hF(aw(t,0,1e3)),{header:o,headerByteCount:i}=nH(r);await e.update("Reading values...");const a=o.dim[0]*o.dim[1]*o.dim[2],s=new DataView(t.buffer,t.byteOffset+i),l=new Float64Array(a);for(let c=0;c<a;c++)l[c]=s.getFloat64(8*c,!0);return mF.success({header:o,values:l,name:n})}(n,e,t)))}const iH=Object.keys({NATOM:"",NTYPES:"",NBONH:"",MBONA:"",NTHETH:"",MTHETA:"",NPHIH:"",MPHIA:"",NHPARM:"",NPARM:"",NNB:"",NRES:"",NBONA:"",NTHETA:"",NPHIA:"",NUMBND:"",NUMANG:"",NPTRA:"",NATYP:"",NPHB:"",IFPERT:"",NBPER:"",NGPER:"",NDPER:"",MBPER:"",MGPER:"",MDPER:"",IFBOX:"",NMXRS:"",IFCAP:"",NUMEXTRA:"",NCOPY:""}),{readLine:aH,markLine:sH,trim:lH}=hF;function cH(e){const{tokenizer:t}=e,n=[];for(;t.tokenEnd<t.length&&"%"!==t.data[t.position];){const e=aH(t).trim();e&&n.push(e)}return n}function uH(e){const{tokenizer:t}=e,n=Object.create(null);iH.forEach((e=>{n[e]=0}));let r=0;for(;t.tokenEnd<t.length&&"%"!==t.data[t.position];){const e=aH(t),o=Math.min(r+10,32);for(let t=0;r<o;++t,++r)n[iH[r]]=parseInt(e.substring(8*t,8*t+8).trim())}return n}function dH(e,t,n,r){const{tokenizer:o}=e,i=gF.create(o.data,2*t);let a=0;for(;o.tokenEnd<o.length&&"%"!==o.data[o.position];){o.tokenStart=o.position;const e=Math.min(a+n,t);for(let t=0;a<e;++t,++a){const e=o.position;lH(o,o.position,o.position+r),gF.addUnchecked(i,o.tokenStart,o.tokenEnd),o.position=e+r}sH(o)}return i}function AH(e){return Tw.create("Parse PRMTOP",(async t=>await async function(e,t){const n=hF(e),r=function(e,t){return{tokenizer:e,runtimeCtx:t}}(n,t),o=Object.create(null);let i=0;for(;n.tokenEnd<n.length;){n.position-i>1e5&&t.shouldUpdate&&(i=n.position,await t.update({current:n.position,max:n.length}));const e=aH(r.tokenizer).trim();if(e.startsWith("%VERSION"))o.version=e.substring(8).trim();else if(e.startsWith("%FLAG")){const t=e.substring(5).trim();if(!aH(r.tokenizer).trim().startsWith("%FORMAT"))throw new Error("expected %FORMAT");if("TITLE"===t)o.title=cH(r);else if("POINTERS"===t)o.pointers=uH(r);else if("ATOM_NAME"===t){const e=dH(r,o.pointers.NATOM,20,4);o.atomName=nQ(e)(ag.Schema.str)}else if("CHARGE"===t){const e=dH(r,o.pointers.NATOM,5,16);o.charge=nQ(e)(ag.Schema.float)}else if("MASS"===t){const e=dH(r,o.pointers.NATOM,5,16);o.mass=nQ(e)(ag.Schema.float)}else if("RESIDUE_LABEL"===t){const e=dH(r,o.pointers.NRES,20,4);o.residueLabel=nQ(e)(ag.Schema.str)}else if("RESIDUE_POINTER"===t){const e=dH(r,o.pointers.NRES,10,8);o.residuePointer=nQ(e)(ag.Schema.int)}else if("BONDS_INC_HYDROGEN"===t){const e=dH(r,3*o.pointers.NBONH,10,8);o.bondsIncHydrogen=nQ(e)(ag.Schema.int)}else if("BONDS_WITHOUT_HYDROGEN"===t){const e=dH(r,3*o.pointers.NBONA,10,8);o.bondsWithoutHydrogen=nQ(e)(ag.Schema.int)}else if("RADII"===t){const e=dH(r,o.pointers.NATOM,5,16);o.radii=nQ(e)(ag.Schema.float)}else for(;n.tokenEnd<n.length&&"%"!==n.data[n.position];)sH(n)}}return mF.success(o)}(e,t)))}const fH={nr:ag.Schema.Int(),type:ag.Schema.Str(),resnr:ag.Schema.Int(),residu:ag.Schema.Str(),atom:ag.Schema.Str(),cgnr:ag.Schema.Int(),charge:ag.Schema.Float(),mass:ag.Schema.Float()},pH={ai:ag.Schema.Int(),aj:ag.Schema.Int()},hH={compound:ag.Schema.Str(),molCount:ag.Schema.Int()},{readLine:gH,markLine:mH,skipWhitespace:yH,markStart:vH,eatValue:bH,eatLine:CH}=hF;const IH=/\[ (.+) \]/,EH=/\s+/;function xH(e){const{tokenizer:t}=e;let n;for(;t.tokenEnd<t.length;){yH(t);const e=t.data[t.position];if("["===e)break;if(";"===e||"*"===e){mH(t);continue}if(void 0!==n)throw new Error("more than one molName");n=gH(t).split(EH)[0]}if(void 0===n)throw new Error("missing molName");return n}function BH(e){const{tokenizer:t}=e,n=gF.create(t.data,64),r=gF.create(t.data,64),o=gF.create(t.data,64),i=gF.create(t.data,64),a=gF.create(t.data,64),s=gF.create(t.data,64),l=gF.create(t.data,64),c=gF.create(t.data,64);for(;t.tokenEnd<t.length;){yH(t);const e=t.data[t.position];if("["===e)break;if(";"!==e&&"*"!==e){for(let e=0;e<8;++e)switch(yH(t),vH(t),bH(t),e){case 0:gF.add(n,t.tokenStart,t.tokenEnd);break;case 1:gF.add(r,t.tokenStart,t.tokenEnd);break;case 2:gF.add(o,t.tokenStart,t.tokenEnd);break;case 3:gF.add(i,t.tokenStart,t.tokenEnd);break;case 4:gF.add(a,t.tokenStart,t.tokenEnd);break;case 5:gF.add(s,t.tokenStart,t.tokenEnd);break;case 6:gF.add(l,t.tokenStart,t.tokenEnd);break;case 7:gF.add(c,t.tokenStart,t.tokenEnd)}mH(t)}else mH(t)}return sg.ofColumns(fH,{nr:nQ(n)(ag.Schema.int),type:nQ(r)(ag.Schema.str),resnr:nQ(o)(ag.Schema.int),residu:nQ(i)(ag.Schema.str),atom:nQ(a)(ag.Schema.str),cgnr:nQ(s)(ag.Schema.int),charge:nQ(l)(ag.Schema.float),mass:nQ(c)(ag.Schema.float)})}function wH(e){const{tokenizer:t}=e,n=gF.create(t.data,64),r=gF.create(t.data,64);for(;t.tokenEnd<t.length;){yH(t);const e=t.data[t.position];if("["===e)break;if(";"!==e&&"*"!==e){for(let e=0;e<2;++e)switch(yH(t),vH(t),bH(t),e){case 0:gF.add(n,t.tokenStart,t.tokenEnd);break;case 1:gF.add(r,t.tokenStart,t.tokenEnd)}mH(t)}else mH(t)}return sg.ofColumns(pH,{ai:nQ(n)(ag.Schema.int),aj:nQ(r)(ag.Schema.int)})}function _H(e){const{tokenizer:t}=e;let n;for(;t.tokenEnd<t.length;){yH(t);const e=t.data[t.position];if("["===e)break;if(";"!==e&&"*"!==e){if(void 0!==n)throw new Error("more than one system");n=gH(t).trim()}else mH(t)}if(void 0===n)throw new Error("missing system");return n}function SH(e){const{tokenizer:t}=e,n=gF.create(t.data,64),r=gF.create(t.data,64);for(;t.tokenEnd<t.length&&(yH(t),!(t.position>=t.length));){const e=t.data[t.position];if("["===e)break;if(";"!==e&&"*"!==e){for(let e=0;e<2;++e)switch(yH(t),vH(t),bH(t),e){case 0:gF.add(n,t.tokenStart,t.tokenEnd);break;case 1:gF.add(r,t.tokenStart,t.tokenEnd)}CH(t),vH(t)}else mH(t)}return sg.ofColumns(hH,{compound:nQ(n)(ag.Schema.str),molCount:nQ(r)(ag.Schema.int)})}function DH(e){return Tw.create("Parse TOP",(async t=>await async function(e,t){const n=hF(e),r=function(e,t){return{tokenizer:e,runtimeCtx:t}}(n,t),o=Object.create(null);let i=0;o.compounds={};let a={},s="";function l(){s&&a.atoms&&(o.compounds[s]=a,a={},s="")}for(;n.tokenEnd<n.length;){n.position-i>1e5&&t.shouldUpdate&&(i=n.position,await t.update({current:n.position,max:n.length}));const e=gH(r.tokenizer).trim();if(e&&"*"!==e[0]&&";"!==e[0]){if(e.startsWith("#include"))throw new Error("#include statements not allowed");if(e.startsWith("[")){const t=e.match(IH);if(null===t)throw new Error("expected field name");const i=t[1];if("moleculetype"===i)l(),s=xH(r);else if("atoms"===i)a.atoms=BH(r);else if("bonds"===i)a.bonds=wH(r);else if("system"===i)o.system=_H(r);else if("molecules"===i)l(),o.molecules=SH(r);else for(;n.tokenEnd<n.length&&"["!==n.data[n.position];)mH(n)}}}return mF.success(o)}(e,t)))}const TH=Zz.BuiltIn({name:"download",display:{name:"Download",description:"Download string or binary data from the specified URL"},from:[Jz.Root],to:[Jz.Data.String,Jz.Data.Binary],params:{url:U_.Url("https://www.ebi.ac.uk/pdbe/static/entry/1cbs_updated.cif",{description:"Resource URL. Must be the same domain or support CORS."}),label:U_.Optional(U_.Text("")),isBinary:U_.Optional(U_.Boolean(!1,{description:"If true, download data as binary (string otherwise)"}))}})({apply(e,t){let{params:n,cache:r}=e;return Tw.create("Download",(async e=>{const o=L_.getUrlAsset(t.managers.asset,n.url),i=await t.managers.asset.resolve(o,n.isBinary?"binary":"string").runInContext(e);return r.asset=i,n.isBinary?new Jz.Data.Binary(i.data,{label:n.label?n.label:o.url}):new Jz.Data.String(i.data,{label:n.label?n.label:o.url})}))},dispose(e){let{cache:t}=e;var n;null===(n=null===t||void 0===t?void 0:t.asset)||void 0===n||n.dispose()},update(e){let{oldParams:t,newParams:n,b:r}=e;return t.url!==n.url||t.isBinary!==n.isBinary?j_.UpdateResult.Recreate:t.label!==n.label?(r.label=n.label||("string"===typeof n.url?n.url:n.url.url),j_.UpdateResult.Updated):j_.UpdateResult.Unchanged}}),kH=Zz.BuiltIn({name:"download-blob",display:{name:"Download Blob",description:"Download multiple string or binary data from the specified URLs."},from:Jz.Root,to:Jz.Data.Blob,params:{sources:U_.ObjectList({id:U_.Text("",{label:"Unique ID"}),url:U_.Url("https://www.ebi.ac.uk/pdbe/static/entry/1cbs_updated.cif",{description:"Resource URL. Must be the same domain or support CORS."}),isBinary:U_.Optional(U_.Boolean(!1,{description:"If true, download data as binary (string otherwise)"})),canFail:U_.Optional(U_.Boolean(!1,{description:"Indicate whether the download can fail and not be included in the blob as a result."}))},(e=>`${e.id}: ${e.url}`)),maxConcurrency:U_.Optional(U_.Numeric(4,{min:1,max:12,step:1},{description:"The maximum number of concurrent downloads."}))}})({apply(e,t){let{params:n,cache:r}=e;return Tw.create("Download Blob",(async e=>{const o=[],i=await async function(e,t,n,r){const o=n.length,i=new Array(n.length);await e.update({message:"Downloading...",current:0,max:o});let a=[],s=[],l=0;for(let u=Math.min(o,r);l<u;l++){const r=n[l];a.push(N_(l,r.id,t.resolve(L_.getUrlAsset(t,r.url),r.isBinary?"binary":"string").runAsChild(e))),s.push(l)}let c=0;for(;a.length>0;){const r=await Promise.race(a),u=n[r.index],d=s.indexOf(r.index);if(c++,"error"===r.kind&&!u.canFail)throw new Error(`${u.url}: ${r.error}`);if(e.shouldUpdate&&await e.update({message:"Downloading...",current:c,max:o}),i[r.index]=r,a=a.filter(F_,d),s=s.filter(F_,d),l<o){const r=n[l],o=t.resolve(L_.getUrlAsset(t,r.url),r.isBinary?"binary":"string").runAsChild(e);a.push(N_(l,r.id,o)),s.push(l),l++}}return i}(e,t.managers.asset,n.sources,n.maxConcurrency||4),a=[];for(let r=0;r<i.length;r++){const e=i[r],s=n.sources[r];"error"===e.kind?t.log.warn(`Download ${e.id} (${s.url}) failed: ${e.error}`):(a.push(e.result),o.push(s.isBinary?{id:e.id,kind:"binary",data:e.result.data}:{id:e.id,kind:"string",data:e.result.data}))}return r.assets=a,new Jz.Data.Blob(o,{label:"Data Blob",description:`${o.length} ${1===o.length?"entry":"entries"}`})}))},dispose(e,t){let{cache:n}=e;const r=null===n||void 0===n?void 0:n.assets;if(r)for(const o of r)o.dispose()}}),QH=Zz.BuiltIn({name:"defalate-data",display:{name:"Deflate",description:"Deflate compressed data"},params:{method:U_.Select("gzip",[["gzip","gzip"]]),isString:U_.Boolean(!1),stringEncoding:U_.Optional(U_.Select("utf-8",[["utf-8","UTF8"]])),label:U_.Optional(U_.Text(""))},from:[Jz.Data.Binary],to:[Jz.Data.Binary,Jz.Data.String]})({apply(e,t){let{a:n,params:r}=e;return Tw.create("Gzip",(async e=>{const t=await E_(e,n.data),o=r.label?r.label:n.label;if(r.isString){const e=aw(t,0,t.length);return new Jz.Data.String(e,{label:o})}return new Jz.Data.Binary(t,{label:o})}))}}),MH=Zz.BuiltIn({name:"raw-data",display:{name:"Raw Data",description:"Raw data supplied by value."},from:[Jz.Root],to:[Jz.Data.String,Jz.Data.Binary],params:{data:U_.Value("",{isHidden:!0}),label:U_.Optional(U_.Text(""))}})({apply(e){let{params:t}=e;return Tw.create("Raw Data",(async()=>"string"===typeof t.data?new Jz.Data.String(t.data,{label:t.label?t.label:"String"}):Array.isArray(t.data)||t.data instanceof ArrayBuffer?new Jz.Data.Binary(new Uint8Array(t.data),{label:t.label?t.label:"Binary"}):t.data instanceof Uint8Array?new Jz.Data.Binary(t.data,{label:t.label?t.label:"Binary"}):void Zh(t.data)))},update(e){let{oldParams:t,newParams:n,b:r}=e;return t.data!==n.data?j_.UpdateResult.Recreate:t.label!==n.label?(r.label=n.label||r.label,j_.UpdateResult.Updated):j_.UpdateResult.Unchanged},customSerialization:{toJSON(e){if("string"===typeof e.data||Array.isArray(e.data))return e;if(e.data instanceof ArrayBuffer){const t=new Uint8Array(e.data),n=new Array(t.length);for(let e=0,r=t.length;e<r;e++)n[e]=t[e];return{data:n,label:e.label}}if(e.data instanceof Uint8Array){const t=new Array(e.data.length);for(let n=0,r=e.data.length;n<r;n++)t[n]=e.data[n];return{data:t,label:e.label}}},fromJSON:e=>e}}),RH=Zz.BuiltIn({name:"read-file",display:{name:"Read File",description:"Read string or binary data from the specified file"},from:Jz.Root,to:[Jz.Data.String,Jz.Data.Binary],params:{file:U_.File(),label:U_.Optional(U_.Text("")),isBinary:U_.Optional(U_.Boolean(!1,{description:"If true, open file as as binary (string otherwise)"}))}})({apply(e,t){let{params:n,cache:r}=e;return Tw.create("Open File",(async e=>{if(null===n.file)return t.log.error("No file(s) selected"),MC.Null;const o=await t.managers.asset.resolve(n.file,n.isBinary?"binary":"string").runInContext(e);r.asset=o;return n.isBinary?new Jz.Data.Binary(o.data,{label:n.label?n.label:n.file.name}):new Jz.Data.String(o.data,{label:n.label?n.label:n.file.name})}))},dispose(e){let{cache:t}=e;var n;null===(n=null===t||void 0===t?void 0:t.asset)||void 0===n||n.dispose()},update(e){let{oldParams:t,newParams:n,b:r}=e;var o;return t.label!==n.label?(r.label=n.label||(null===(o=t.file)||void 0===o?void 0:o.name)||"",j_.UpdateResult.Updated):j_.UpdateResult.Unchanged},isSerializable:()=>({isSerializable:!1,reason:"Cannot serialize user loaded files."})}),PH=Zz.BuiltIn({name:"parse-blob",display:{name:"Parse Blob",description:"Parse multiple data enties"},from:Jz.Data.Blob,to:Jz.Format.Blob,params:{formats:U_.ObjectList({id:U_.Text("",{label:"Unique ID"}),format:U_.Select("cif",[["cif","cif"]])},(e=>`${e.id}: ${e.format}`))}})({apply(e,t){let{a:n,params:r}=e;return Tw.create("Parse Blob",(async e=>{const t=new Map;for(const n of r.formats)t.set(n.id,n.format);const o=[];for(const r of n.data){if(!t.has(r.id))continue;const n=await("string"===r.kind?wN.parse(r.data):wN.parseBinary(r.data)).runInContext(e);if(n.isError)throw new Error(`${r.id}: ${n.message}`);o.push({id:r.id,kind:"cif",data:n.result})}return new Jz.Format.Blob(o,{label:"Format Blob",description:`${o.length} ${1===o.length?"entry":"entries"}`})}))}}),OH=Zz.BuiltIn({name:"parse-cif",display:{name:"Parse CIF",description:"Parse CIF from String or Binary data"},from:[Jz.Data.String,Jz.Data.Binary],to:Jz.Format.Cif})({apply(e){let{a:t}=e;return Tw.create("Parse CIF",(async e=>{const n=await("string"===typeof t.data?wN.parse(t.data):wN.parseBinary(t.data)).runInContext(e);if(n.isError)throw new Error(n.message);return 0===n.result.blocks.length?MC.Null:new Jz.Format.Cif(n.result)}))}}),FH=Zz.BuiltIn({name:"parse-cube",display:{name:"Parse Cube",description:"Parse Cube from String data"},from:Jz.Data.String,to:Jz.Format.Cube})({apply(e){let{a:t}=e;return Tw.create("Parse Cube",(async e=>{const n=await tH(t.data,t.label).runInContext(e);if(n.isError)throw new Error(n.message);return new Jz.Format.Cube(n.result)}))}}),NH=Zz.BuiltIn({name:"parse-psf",display:{name:"Parse PSF",description:"Parse PSF from String data"},from:[Jz.Data.String],to:Jz.Format.Psf})({apply(e){let{a:t}=e;return Tw.create("Parse PSF",(async e=>{const n=await Kz(t.data).runInContext(e);if(n.isError)throw new Error(n.message);return new Jz.Format.Psf(n.result)}))}}),LH=Zz.BuiltIn({name:"parse-prmtop",display:{name:"Parse PRMTOP",description:"Parse PRMTOP from String data"},from:[Jz.Data.String],to:Jz.Format.Prmtop})({apply(e){let{a:t}=e;return Tw.create("Parse PRMTOP",(async e=>{const n=await AH(t.data).runInContext(e);if(n.isError)throw new Error(n.message);return new Jz.Format.Prmtop(n.result)}))}}),UH=Zz.BuiltIn({name:"parse-top",display:{name:"Parse TOP",description:"Parse TOP from String data"},from:[Jz.Data.String],to:Jz.Format.Top})({apply(e){let{a:t}=e;return Tw.create("Parse TOP",(async e=>{const n=await DH(t.data).runInContext(e);if(n.isError)throw new Error(n.message);return new Jz.Format.Top(n.result)}))}}),GH=Zz.BuiltIn({name:"parse-ply",display:{name:"Parse PLY",description:"Parse PLY from String data"},from:[Jz.Data.String],to:Jz.Format.Ply})({apply(e){let{a:t}=e;return Tw.create("Parse PLY",(async e=>{const n=await function(e){return Tw.create("Parse PLY",(async t=>await Lz(e,t)))}(t.data).runInContext(e);if(n.isError)throw new Error(n.message);return new Jz.Format.Ply(n.result,{label:n.result.comments[0]||"PLY Data"})}))}}),jH=Zz.BuiltIn({name:"parse-ccp4",display:{name:"Parse CCP4/MRC/MAP",description:"Parse CCP4/MRC/MAP from Binary data"},from:[Jz.Data.Binary],to:Jz.Format.Ccp4})({apply(e){let{a:t}=e;return Tw.create("Parse CCP4/MRC/MAP",(async e=>{const n=await _z(t.data,t.label).runInContext(e);if(n.isError)throw new Error(n.message);return new Jz.Format.Ccp4(n.result)}))}}),zH=Zz.BuiltIn({name:"parse-dsn6",display:{name:"Parse DSN6/BRIX",description:"Parse CCP4/BRIX from Binary data"},from:[Jz.Data.Binary],to:Jz.Format.Dsn6})({apply(e){let{a:t}=e;return Tw.create("Parse DSN6/BRIX",(async e=>{const n=await Qz(t.data,t.label).runInContext(e);if(n.isError)throw new Error(n.message);return new Jz.Format.Dsn6(n.result)}))}}),HH=Zz.BuiltIn({name:"parse-dx",display:{name:"Parse DX",description:"Parse DX from Binary/String data"},from:[Jz.Data.Binary,Jz.Data.String],to:Jz.Format.Dx})({apply(e){let{a:t}=e;return Tw.create("Parse DX",(async e=>{const n=await oH(t.data,t.label).runInContext(e);if(n.isError)throw new Error(n.message);return new Jz.Format.Dx(n.result)}))}}),VH=Zz.BuiltIn({name:"import-string",display:{name:"Import String",description:"Import given data as a string"},from:Jz.Root,to:Jz.Data.String,params:{data:U_.Value(""),label:U_.Optional(U_.Text(""))}})({apply(e){let{params:{data:t,label:n}}=e;return new Jz.Data.String(t,{label:n||""})},update(e){let{oldParams:t,newParams:n,b:r}=e;return t.data!==n.data?j_.UpdateResult.Recreate:t.label!==n.label?(r.label=n.label||"",j_.UpdateResult.Updated):j_.UpdateResult.Unchanged},isSerializable:()=>({isSerializable:!1,reason:"Cannot serialize user imported strings."})}),qH=Zz.BuiltIn({name:"import-json",display:{name:"Import JSON",description:"Import given data as a JSON"},from:Jz.Root,to:Jz.Format.Json,params:{data:U_.Value({}),label:U_.Optional(U_.Text(""))}})({apply(e){let{params:{data:t,label:n}}=e;return new Jz.Format.Json(t,{label:n||""})},update(e){let{oldParams:t,newParams:n,b:r}=e;return t.data!==n.data?j_.UpdateResult.Recreate:t.label!==n.label?(r.label=n.label||"",j_.UpdateResult.Updated):j_.UpdateResult.Unchanged},isSerializable:()=>({isSerializable:!1,reason:"Cannot serialize user imported JSON."})}),YH=Zz.BuiltIn({name:"parse-json",display:{name:"Parse JSON",description:"Parse JSON from String data"},from:[Jz.Data.String],to:Jz.Format.Json})({apply(e){let{a:t}=e;return Tw.create("Parse JSON",(async e=>{const n=await new Response(t.data).json();return new Jz.Format.Json(n)}))}}),XH=Zz.BuiltIn({name:"lazy-volume",display:{name:"Lazy Volume",description:"A placeholder for lazy loaded volume representation"},from:Jz.Root,to:Jz.Volume.Lazy,params:{url:U_.Url(""),isBinary:U_.Boolean(!1),format:U_.Text("ccp4"),entryId:U_.Value("",{isHidden:!0}),isovalues:U_.ObjectList({type:U_.Text("relative"),value:U_.Numeric(0),color:U_.Color(bk.black),alpha:U_.Numeric(1,{min:0,max:1,step:.01}),volumeIndex:U_.Numeric(0)},(e=>`${e.type} ${e.value}`))}})({apply(e){let{a:t,params:n}=e;return Tw.create("Lazy Volume",(async e=>{const t=Array.isArray(n.entryId)?n.entryId.join(", "):n.entryId;return new Jz.Volume.Lazy(n,{label:`${t||n.url}`,description:"Lazy Volume"})}))}}),WH=Zz.BuiltIn({name:"create-group",display:{name:"Group"},from:[],to:Jz.Group,params:{label:U_.Text("Group"),description:U_.Optional(U_.Text(""))}})({apply(e){let{params:t}=e;return new Jz.Group({},t)},update(e){let{oldParams:t,newParams:n,b:r}=e;return Rp(t,n)?j_.UpdateResult.Unchanged:(r.label=n.label,r.description=n.description,j_.UpdateResult.Updated)}});function KH(e){const t=new DataView(e.buffer),n=Object.create(null),r=[];let o=0;const i=new Int32Array(e.buffer,0,23),a=i[0]!==t.getInt32(0);if(84!==i[0]){const n=e.byteLength;for(let e=0;e<n;e+=4)t.setFloat32(e,t.getFloat32(e),!0)}if(84!==i[0])throw new Error("dcd bad format, header block start");if("CORD"!==String.fromCharCode(t.getUint8(4),t.getUint8(5),t.getUint8(6),t.getUint8(7)))throw new Error("dcd bad format, format string");let s=!1,l=!1,c=!1;if(0!==i[22]&&(s=!0,0!==i[12]&&(l=!0),1===i[13]&&(c=!0)),n.NSET=i[2],n.ISTART=i[3],n.NSAVC=i[4],n.NAMNF=i[10],n.DELTA=s?t.getFloat32(44,a):t.getFloat64(44,a),84!==i[22])throw new Error("dcd bad format, header block end");o=o+84+8;const u=t.getInt32(o,a),d=o+1;if((u-4)%80!==0)throw new Error("dcd bad format, title block start");if(n.TITLE=function(e){if(e.length>DR){const t=[];for(let n=0;n<e.length;n+=DR)t.push(String.fromCharCode.apply(null,e.subarray(n,n+DR)));return t.join("")}return String.fromCharCode.apply(null,e)}(e.subarray(d,u)),t.getInt32(d+u+4-1,a)!==u)throw new Error("dcd bad format, title block end");if(o=o+u+8,4!==t.getInt32(o,a))throw new Error("dcd bad format, natom block start");if(n.NATOM=t.getInt32(o+4,a),4!==t.getInt32(o+8,a))throw new Error("dcd bad format, natom block end");if(o=o+4+8,n.NAMNF>0)throw new Error("dcd format with fixed atoms unsupported, aborting");const A=n.NATOM,f=4*A;for(let p=0,h=n.NSET;p<h;++p){const n=Object.create(null);n.elementCount=A,l&&(o+=4,n.cell=[t.getFloat64(o,a),t.getFloat64(o+1,a),t.getFloat64(o+16,a),t.getFloat64(o+24,a),t.getFloat64(o+32,a),t.getFloat64(o+40,a)],o+=48,o+=4);for(let r=0;r<3;++r){if(t.getInt32(o,a)!==f)throw new Error(`dcd bad format, coord block start: ${p}, ${r}`);o+=4;const i=new Float32Array(e.buffer,o,A);if(0===r?n.x=i:1===r?n.y=i:n.z=i,o+=f,t.getInt32(o,a)!==f)throw new Error(`dcd bad format, coord block end: ${p}, ${r}`);o+=4}if(c){o+=4+t.getInt32(o,a)+4}r.push(n)}return{header:n,frames:r}}function JH(e){return function(t,n,r){return function(e,t,n,r){const{data:o,indices:i,count:a}=e,{valueType:s}=r,l="str"===s?e=>{const r=i[2*e]+t,a=i[2*e+1];if(r>=a)return"";let s=r+n;return s>a&&(s=a),function(e,t,n){let r=t,o=n-1,i=e.charCodeAt(r);for(;(9===i||32===i)&&r<=o;)i=e.charCodeAt(++r);for(i=e.charCodeAt(o);(9===i||32===i)&&o>=r;)i=e.charCodeAt(--o);return e.substring(r,o+1)}(o,r,s)}:"int"===s?e=>{const r=i[2*e]+t;return r>i[2*e+1]?0:ng(o,r,r+n)}:e=>{const r=i[2*e]+t;return r>i[2*e+1]?0:function(e,t,n){for(;t<n&&32===e.charCodeAt(t);)t++;return ig(e,t,n)}(o,r,r+n)};return{schema:r,__array:void 0,isDefined:!0,rowCount:a,value:l,valueKind:e=>0,toArray:e=>Uh(a,l,e),areValuesEqual:(e,t)=>l(e)===l(t)}}(e,t,n,r)}}function ZH(e,t){return{tokenizer:e,header:{title:"",timeInPs:0,hasVelocities:!1,precision:{position:0,velocity:0},box:[0,0,0]},numberOfAtoms:0,runtimeCtx:t}}function $H(e){const{tokenizer:t,header:n}=e;let r=hF.readLine(t);0===r.trim().length&&(r=hF.readLine(t));const o=r.lastIndexOf("t=");o>=0?(n.timeInPs=parseFloat(r.substring(o+2)),n.title=r.substring(0,o).trim(),n.title&&","===n.title[n.title.length-1]&&(n.title=n.title.substring(0,n.title.length-1))):n.title=r}function eV(e){const{tokenizer:t}=e;hF.markLine(t);const n=hF.getTokenString(t);e.numberOfAtoms=parseInt(n)}async function tV(e){const{tokenizer:t,numberOfAtoms:n}=e,r=await hF.readLinesAsync(t,n,e.runtimeCtx,1e5),o=t.data.substring(r.indices[0],r.indices[1]).substring(20).match(/\.\d+/g),i=6===o.length;e.header.hasVelocities=i,e.header.precision.position=o[0].length-1,e.header.precision.velocity=i?o[3].length-1:0;const a=e.header.precision.position+5,s=20+3*a,l=e.header.precision.velocity+4,c=JH(r),u=ag.Undefined(e.numberOfAtoms,ag.Schema.float);return{count:e.numberOfAtoms,residueNumber:c(0,5,ag.Schema.int),residueName:c(5,5,ag.Schema.str),atomName:c(10,5,ag.Schema.str),atomNumber:c(15,5,ag.Schema.int),x:c(20,a,ag.Schema.float),y:c(20+a,a,ag.Schema.float),z:c(20+2*a,a,ag.Schema.float),vx:i?c(s,l,ag.Schema.float):u,vy:i?c(s+l,l,ag.Schema.float):u,vz:i?c(s+2*l,l,ag.Schema.float):u}}function nV(e){const{tokenizer:t}=e,n=hF.readLine(t).trim().split(/\s+/g);e.header.box=[+n[0],+n[1],+n[2]]}function rV(e){return Tw.create("Parse GRO",(async t=>await async function(e,t){const n=hF(e);await t.update({message:"Parsing...",current:0,max:e.length});const r=[];for(;n.position<e.length;){const e=ZH(n,t);$H(e),eV(e);const o=await tV(e);nV(e),r.push({header:e.header,atoms:o})}const o={structures:r};return mF.success(o)}(e,t)))}function oV(e,t){for(let n=0,r=3*t;n<r;n+=3){const t=e[n],r=e[n+1],o=e[n+2],i=1/Math.sqrt(t*t+r*r+o*o);e[n]=t*i,e[n+1]=r*i,e[n+2]=o*i}return e}const iV=qh();function aV(e,t,n,r){for(let o=0,i=3*r;o<i;o+=3)qh.fromArray(iV,t,n+o),qh.transformMat4(iV,iV,e),qh.toArray(iV,t,n+o)}const sV=qh(),lV=qh(),cV=qh(),uV=qh(),dV=qh();function AV(e,t,n,r,o){for(let i=0,a=3*o;i<a;i+=3){const r=3*t[i],o=3*t[i+1],a=3*t[i+2];qh.fromArray(sV,e,r),qh.fromArray(lV,e,o),qh.fromArray(cV,e,a),qh.sub(uV,cV,lV),qh.sub(dV,sV,lV),qh.cross(uV,uV,dV),n[r]+=uV[0],n[r+1]+=uV[1],n[r+2]+=uV[2],n[o]+=uV[0],n[o+1]+=uV[1],n[o+2]+=uV[2],n[a]+=uV[0],n[a+1]+=uV[1],n[a+2]+=uV[2]}return oV(n,r)}function fV(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=q_(e),o=new Int32Array(r+2),i=new Int32Array(t),a=new Int32Array(t);for(let c=0,u=t*n;c<u;c+=n)++a[e[c]];let s=0;for(let c=0;c<t;c++)o[c]=s,s+=a[c];o[t]=s;const l=new Int32Array(s);for(let c=0,u=t*n;c<u;c+=n){const t=e[c];l[o[t]+i[t]]=c,++i[t]}return{indices:l,offsets:o}}const pV=qh.fromArray,hV=qh.transformMat4Offset;function gV(e,t,n,r){const{length:o,width:i,height:a}=function(e,t){e=Math.max(e,2);const n=Math.sqrt(e);let r=Math.ceil(n);r+=(t-r%t)%t;const o=r>0?Math.ceil(e/r):0;return{width:r,height:o,length:r*o*t}}(e,t);return{array:r=r&&r.length>=o?r:new n(o),width:i,height:a}}const mV=qh(),yV=new lO("14"),vV=new lO("98");function bV(e){return e>1e5?yV:vV}function CV(e,t,n){const r=3*n,o=bV(t);o.reset();for(let a=0,s=3*t;a<s;a+=r)pV(mV,e,a),o.includePosition(mV);o.finishedIncludeStep();for(let a=0,s=3*t;a<s;a+=r)pV(mV,e,a),o.radiusPosition(mV);const i=o.getSphere();if(t<=14){const n=[];for(let o=0,i=3*t;o<i;o+=r)n.push(pV(qh(),e,o));YT.setExtrema(i,n)}return i}const IV=Yh();function EV(e,t,n,r){if(1===n){Yh.fromArray(IV,t,r);const n=YT.clone(e);return Yh.isIdentity(IV)?n:YT.transform(n,n,IV)}const o=bV(n);o.reset();const{center:i,radius:a,extrema:s}=e;if(s&&n<=14){for(let e=0,i=n;e<i;++e)for(const n of s)hV(mV,n,t,0,0,16*e+r),o.includePosition(mV);o.finishedIncludeStep();for(let e=0,i=n;e<i;++e)for(const n of s)hV(mV,n,t,0,0,16*e+r),o.radiusPosition(mV)}else{for(let e=0,s=n;e<s;++e)hV(mV,i,t,0,0,16*e+r),o.includePositionRadius(mV,a);o.finishedIncludeStep();for(let e=0,s=n;e<s;++e)hV(mV,i,t,0,0,16*e+r),o.radiusPositionRadius(mV,a)}return o.getSphere()}const xV=new Uint8Array(772);function BV(e,t){if(0===t)return 0;const n=new Uint32Array(e.buffer,0,e.buffer.byteLength>>2),r=t-4>>2,o=4*r;let i=0;if(r<0)for(let a=0;a<t;++a)i+=e[a]&&1;else{for(let e=0;e<r;++e){const t=n[e];i+=xV[65535&t]+xV[t>>16]}for(let n=o;n<t;++n)i+=e[n]&&1}return i/t}function wV(e,t,n){const r=gV(Math.max(1,e),1,Uint8Array,n&&n.tMarker.ref.value.array),o=BV(r.array,e),i=0===o?0:-1;return n?(Sp.updateIfChanged(n.uMarker,0),Sp.update(n.tMarker,r),Sp.update(n.uMarkerTexDim,Wh.create(r.width,r.height)),Sp.updateIfChanged(n.markerAverage,o),Sp.updateIfChanged(n.markerStatus,i),Sp.updateIfChanged(n.dMarkerType,t),n):{uMarker:Sp.create(0),tMarker:Sp.create(r),uMarkerTexDim:Sp.create(Wh.create(r.width,r.height)),markerAverage:Sp.create(o),markerStatus:Sp.create(i),dMarkerType:Sp.create(t)}}xV[1]=1,xV[2]=1,xV[3]=1,xV[256]=1,xV[512]=1,xV[768]=1,xV[257]=2,xV[513]=2,xV[769]=2,xV[258]=2,xV[514]=2,xV[770]=2,xV[259]=2,xV[515]=2,xV[771]=2;new Uint8Array(1);const _V=Bp();function SV(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE){const n=function(e,t){switch(t){case e.FRAMEBUFFER_COMPLETE:return"complete";case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"incomplete attachment";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"incomplete missing attachment";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"incomplete dimensions";case e.FRAMEBUFFER_UNSUPPORTED:return"unsupported"}if(Xq(e))switch(t){case e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:return"incomplete multisample";case e.RENDERBUFFER_SAMPLES:return"renderbuffer samples"}return"unknown error"}(e,t);throw new Error(`Framebuffer status: ${n}`)}}function DV(e){const t=e.createFramebuffer();if(null===t)throw new Error("Could not create WebGL framebuffer");return t}function TV(e){const t=function(e){if(Xq(e))return{drawArraysInstanced:e.drawArraysInstanced.bind(e),drawElementsInstanced:e.drawElementsInstanced.bind(e),vertexAttribDivisor:e.vertexAttribDivisor.bind(e),VERTEX_ATTRIB_ARRAY_DIVISOR:e.VERTEX_ATTRIB_ARRAY_DIVISOR};{const t=e.getExtension("ANGLE_instanced_arrays");return null===t?null:{drawArraysInstanced:t.drawArraysInstancedANGLE.bind(t),drawElementsInstanced:t.drawElementsInstancedANGLE.bind(t),vertexAttribDivisor:t.vertexAttribDivisorANGLE.bind(t),VERTEX_ATTRIB_ARRAY_DIVISOR:t.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE}}}(e);if(null===t)throw new Error('Could not find support for "instanced_arrays"');const n=function(e){return Xq(e)?{}:e.getExtension("OES_element_index_uint")}(e);if(null===n)throw new Error('Could not find support for "element_index_uint"');const r=function(e){if(Xq(e))return{FRAGMENT_SHADER_DERIVATIVE_HINT:e.FRAGMENT_SHADER_DERIVATIVE_HINT};{const t=e.getExtension("OES_standard_derivatives");return null===t?null:{FRAGMENT_SHADER_DERIVATIVE_HINT:t.FRAGMENT_SHADER_DERIVATIVE_HINT_OES}}}(e);if(null===r)throw new Error('Could not find support for "standard_derivatives"');const o=function(e){return Xq(e)?{}:e.getExtension("OES_texture_float")}(e);Aw&&null===o&&console.log('Could not find support for "texture_float"');const i=function(e){return e.getExtension("OES_texture_float_linear")}(e);Aw&&null===i&&console.log('Could not find support for "texture_float_linear"');const a=function(e){if(Xq(e))return{HALF_FLOAT:e.HALF_FLOAT};{const t=e.getExtension("OES_texture_half_float");return null===t?null:{HALF_FLOAT:t.HALF_FLOAT_OES}}}(e);Aw&&null===a&&console.log('Could not find support for "texture_half_float"');const s=function(e){return e.getExtension("OES_texture_half_float_linear")}(e);Aw&&null===s&&console.log('Could not find support for "texture_half_float_linear"');const l=function(e){if(Xq(e))return{UNSIGNED_INT_24_8:e.UNSIGNED_INT_24_8};{const t=e.getExtension("WEBGL_depth_texture");return null===t?null:{UNSIGNED_INT_24_8:t.UNSIGNED_INT_24_8_WEBGL}}}(e);Aw&&null===l&&console.log('Could not find support for "depth_texture"');const c=function(e){if(Xq(e))return{MIN:e.MIN,MAX:e.MAX};{const t=e.getExtension("EXT_blend_minmax");return null===t?null:{MIN:t.MIN_EXT,MAX:t.MAX_EXT}}}(e);Aw&&null===c&&console.log('Could not find support for "blend_minmax"');const u=function(e){if(Xq(e))return{VERTEX_ARRAY_BINDING:e.VERTEX_ARRAY_BINDING,bindVertexArray:e.bindVertexArray.bind(e),createVertexArray:e.createVertexArray.bind(e),deleteVertexArray:e.deleteVertexArray.bind(e),isVertexArray:e.isVertexArray.bind(e)};{const t=e.getExtension("OES_vertex_array_object");return null===t?null:{VERTEX_ARRAY_BINDING:t.VERTEX_ARRAY_BINDING_OES,bindVertexArray:t.bindVertexArrayOES.bind(t),createVertexArray:t.createVertexArrayOES.bind(t),deleteVertexArray:t.deleteVertexArrayOES.bind(t),isVertexArray:t.isVertexArrayOES.bind(t)}}}(e);Aw&&null===u&&console.log('Could not find support for "vertex_array_object"');const d=function(e){return Xq(e)?{}:e.getExtension("EXT_frag_depth")}(e);Aw&&null===d&&console.log('Could not find support for "frag_depth"');const A=function(e){if(Xq(e))return null===e.getExtension("EXT_color_buffer_float")?null:(e.getExtension("EXT_float_blend"),{RGBA32F:e.RGBA32F});{const t=e.getExtension("WEBGL_color_buffer_float");return null===t?(e.getExtension("OES_texture_float"),Zq(e,e.FLOAT)?{RGBA32F:34836}:null):(e.getExtension("EXT_float_blend"),{RGBA32F:t.RGBA32F_EXT})}}(e);Aw&&null===A&&console.log('Could not find support for "color_buffer_float"');const f=function(e){if(Xq(e))return null===e.getExtension("EXT_color_buffer_half_float")?null:(e.getExtension("EXT_float_blend"),{RGBA16F:e.RGBA16F});{const t=e.getExtension("EXT_color_buffer_half_float");return null===t?(e.getExtension("OES_texture_half_float"),Zq(e,36193)?{RGBA16F:34842}:null):(e.getExtension("EXT_float_blend"),{RGBA16F:t.RGBA16F_EXT})}}(e);Aw&&null===f&&console.log('Could not find support for "color_buffer_half_float"');const p=function(e){if(Xq(e))return{drawBuffers:e.drawBuffers.bind(e),COLOR_ATTACHMENT0:e.COLOR_ATTACHMENT0,COLOR_ATTACHMENT1:e.COLOR_ATTACHMENT1,COLOR_ATTACHMENT2:e.COLOR_ATTACHMENT2,COLOR_ATTACHMENT3:e.COLOR_ATTACHMENT3,COLOR_ATTACHMENT4:e.COLOR_ATTACHMENT4,COLOR_ATTACHMENT5:e.COLOR_ATTACHMENT5,COLOR_ATTACHMENT6:e.COLOR_ATTACHMENT6,COLOR_ATTACHMENT7:e.COLOR_ATTACHMENT7,DRAW_BUFFER0:e.DRAW_BUFFER0,DRAW_BUFFER1:e.DRAW_BUFFER1,DRAW_BUFFER2:e.DRAW_BUFFER2,DRAW_BUFFER3:e.DRAW_BUFFER3,DRAW_BUFFER4:e.DRAW_BUFFER4,DRAW_BUFFER5:e.DRAW_BUFFER5,DRAW_BUFFER6:e.DRAW_BUFFER6,DRAW_BUFFER7:e.DRAW_BUFFER7,MAX_COLOR_ATTACHMENTS:e.MAX_COLOR_ATTACHMENTS,MAX_DRAW_BUFFERS:e.MAX_DRAW_BUFFERS};{const t=e.getExtension("WEBGL_draw_buffers");return null===t?null:{drawBuffers:t.drawBuffersWEBGL.bind(t),COLOR_ATTACHMENT0:t.COLOR_ATTACHMENT0_WEBGL,COLOR_ATTACHMENT1:t.COLOR_ATTACHMENT1_WEBGL,COLOR_ATTACHMENT2:t.COLOR_ATTACHMENT2_WEBGL,COLOR_ATTACHMENT3:t.COLOR_ATTACHMENT3_WEBGL,COLOR_ATTACHMENT4:t.COLOR_ATTACHMENT4_WEBGL,COLOR_ATTACHMENT5:t.COLOR_ATTACHMENT5_WEBGL,COLOR_ATTACHMENT6:t.COLOR_ATTACHMENT6_WEBGL,COLOR_ATTACHMENT7:t.COLOR_ATTACHMENT7_WEBGL,DRAW_BUFFER0:t.DRAW_BUFFER0_WEBGL,DRAW_BUFFER1:t.DRAW_BUFFER1_WEBGL,DRAW_BUFFER2:t.DRAW_BUFFER2_WEBGL,DRAW_BUFFER3:t.DRAW_BUFFER3_WEBGL,DRAW_BUFFER4:t.DRAW_BUFFER4_WEBGL,DRAW_BUFFER5:t.DRAW_BUFFER5_WEBGL,DRAW_BUFFER6:t.DRAW_BUFFER6_WEBGL,DRAW_BUFFER7:t.DRAW_BUFFER7_WEBGL,MAX_COLOR_ATTACHMENTS:t.MAX_COLOR_ATTACHMENTS_WEBGL,MAX_DRAW_BUFFERS:t.MAX_DRAW_BUFFERS_WEBGL}}}(e);Aw&&null===p&&console.log('Could not find support for "draw_buffers"');const h=function(e){const t=e.getExtension("OES_draw_buffers_indexed");return null===t?null:{enablei:t.enableiOES.bind(t),disablei:t.disableiOES.bind(t),blendEquationi:t.blendEquationiOES.bind(t),blendEquationSeparatei:t.blendEquationSeparateiOES.bind(t),blendFunci:t.blendFunciOES.bind(t),blendFuncSeparatei:t.blendFuncSeparateiOES.bind(t),colorMaski:t.colorMaskiOES.bind(t)}}(e);Aw&&null===h&&console.log('Could not find support for "draw_buffers_indexed"');const g=function(e){return Xq(e)?{}:e.getExtension("EXT_shader_texture_lod")}(e);Aw&&null===g&&console.log('Could not find support for "shader_texture_lod"');const m=function(e){if(Xq(e))return{FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING,SRGB8_ALPHA8:e.SRGB8_ALPHA8,SRGB8:e.SRGB8,SRGB:e.SRGB};{const t=e.getExtension("EXT_sRGB");return null===t?null:{FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT,SRGB8_ALPHA8:t.SRGB8_ALPHA8_EXT,SRGB8:t.SRGB_ALPHA_EXT,SRGB:t.SRGB_EXT}}}(e);Aw&&null===m&&console.log('Could not find support for "sRGB"');const y=function(e){if(Xq(e)){const t=e.getExtension("EXT_disjoint_timer_query_webgl2")||e.getExtension("EXT_disjoint_timer_query");return null===t?null:{QUERY_COUNTER_BITS:t.QUERY_COUNTER_BITS_EXT,CURRENT_QUERY:e.CURRENT_QUERY,QUERY_RESULT:e.QUERY_RESULT,QUERY_RESULT_AVAILABLE:e.QUERY_RESULT_AVAILABLE,TIME_ELAPSED:t.TIME_ELAPSED_EXT,TIMESTAMP:t.TIMESTAMP_EXT,GPU_DISJOINT:t.GPU_DISJOINT_EXT,createQuery:e.createQuery.bind(e),deleteQuery:e.deleteQuery.bind(e),isQuery:e.isQuery.bind(e),beginQuery:e.beginQuery.bind(e),endQuery:e.endQuery.bind(e),queryCounter:t.queryCounterEXT.bind(t),getQuery:e.getQuery.bind(e),getQueryParameter:e.getQueryParameter.bind(e)}}{const t=e.getExtension("EXT_disjoint_timer_query");return null===t?null:{QUERY_COUNTER_BITS:t.QUERY_COUNTER_BITS_EXT,CURRENT_QUERY:t.CURRENT_QUERY_EXT,QUERY_RESULT:t.QUERY_RESULT_EXT,QUERY_RESULT_AVAILABLE:t.QUERY_RESULT_AVAILABLE_EXT,TIME_ELAPSED:t.TIME_ELAPSED_EXT,TIMESTAMP:t.TIMESTAMP_EXT,GPU_DISJOINT:t.GPU_DISJOINT_EXT,createQuery:t.createQueryEXT.bind(t),deleteQuery:t.deleteQueryEXT.bind(t),isQuery:t.isQueryEXT.bind(t),beginQuery:t.beginQueryEXT.bind(t),endQuery:t.endQueryEXT.bind(t),queryCounter:t.queryCounterEXT.bind(t),getQuery:t.getQueryEXT.bind(t),getQueryParameter:t.getQueryObjectEXT.bind(t)}}}(e);Aw&&null===y&&console.log('Could not find support for "disjoint_timer_query"');const v=function(e){const t=e.getExtension("WEBGL_multi_draw");return t?{multiDrawArrays:t.multiDrawArraysWEBGL.bind(t),multiDrawElements:t.multiDrawElementsWEBGL.bind(t),multiDrawArraysInstanced:t.multiDrawArraysInstancedWEBGL.bind(t),multiDrawElementsInstanced:t.multiDrawElementsInstancedWEBGL.bind(t)}:null}(e);Aw&&null===v&&console.log('Could not find support for "multi_draw"');const b=function(e){const t=e.getExtension("WEBGL_draw_instanced_base_vertex_base_instance");return t?{drawArraysInstancedBaseInstance:t.drawArraysInstancedBaseInstanceWEBGL.bind(t),drawElementsInstancedBaseVertexBaseInstance:t.drawElementsInstancedBaseVertexBaseInstanceWEBGL.bind(t)}:null}(e);Aw&&null===b&&console.log('Could not find support for "draw_instanced_base_vertex_base_instance"');const C=function(e){const t=e.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance");return t?{multiDrawArraysInstancedBaseInstance:t.multiDrawArraysInstancedBaseInstanceWEBGL.bind(t),multiDrawElementsInstancedBaseVertexBaseInstance:t.multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL.bind(t)}:null}(e);Aw&&null===C&&console.log('Could not find support for "multi_draw_instanced_base_vertex_base_instance"');const I=function(e){const t=e.getExtension("KHR_parallel_shader_compile");return null===t?null:{COMPLETION_STATUS:t.COMPLETION_STATUS_KHR}}(e);Aw&&null===I&&console.log('Could not find support for "parallel_shader_compile"');const E=function(e){return Xq(e)?{}:e.getExtension("OES_fbo_render_mipmap")}(e);Aw&&null===E&&console.log('Could not find support for "fbo_render_mipmap"');const x=function(e){if(Xq(e)){const t=e.getExtension("WEBGL_provoking_vertex");if(t)return{FIRST_VERTEX_CONVENTION:t.FIRST_VERTEX_CONVENTION_WEBGL,LAST_VERTEX_CONVENTION:t.LAST_VERTEX_CONVENTION_WEBGL,PROVOKING_VERTEX:t.PROVOKING_VERTEX_WEBGL,provokingVertex:t.provokingVertexWEBGL.bind(t)}}return null}(e);Aw&&null===x&&console.log('Could not find support for "provoking_vertex"');const B=function(e){if(Xq(e)){const t=e.getExtension("WEBGL_clip_cull_distance");if(t)return{MAX_CLIP_DISTANCES:t.MAX_CLIP_DISTANCES_WEBGL,MAX_CULL_DISTANCES:t.MAX_CULL_DISTANCES_WEBGL,MAX_COMBINED_CLIP_AND_CULL_DISTANCES:t.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL,CLIP_DISTANCE0:t.CLIP_DISTANCE0_WEBGL,CLIP_DISTANCE1:t.CLIP_DISTANCE1_WEBGL,CLIP_DISTANCE2:t.CLIP_DISTANCE2_WEBGL,CLIP_DISTANCE3:t.CLIP_DISTANCE3_WEBGL,CLIP_DISTANCE4:t.CLIP_DISTANCE4_WEBGL,CLIP_DISTANCE5:t.CLIP_DISTANCE5_WEBGL,CLIP_DISTANCE6:t.CLIP_DISTANCE6_WEBGL,CLIP_DISTANCE7:t.CLIP_DISTANCE7_WEBGL}}return null}(e);Aw&&null===B&&console.log('Could not find support for "clip_cull_distance"');const w=function(e){if(Xq(e)){if(e.getExtension("EXT_conservative_depth"))return{}}return null}(e);Aw&&null===w&&console.log('Could not find support for "conservative_depth"');const _=function(e){if(Xq(e)){const t=e.getExtension("WEBGL_stencil_texturing");if(t)return{DEPTH_STENCIL_TEXTURE_MODE:t.DEPTH_STENCIL_TEXTURE_MODE_WEBGL,STENCIL_INDEX:t.STENCIL_INDEX_WEBGL}}return null}(e);Aw&&null===_&&console.log('Could not find support for "stencil_texturing"');const S=function(e){const t=e.getExtension("EXT_clip_control");if(t)return{LOWER_LEFT:t.LOWER_LEFT_EXT,UPPER_LEFT:t.UPPER_LEFT_EXT,NEGATIVE_ONE_TO_ONE:t.NEGATIVE_ONE_TO_ONE_EXT,ZERO_TO_ONE:t.ZERO_TO_ONE_EXT,CLIP_ORIGIN:t.CLIP_ORIGIN_EXT,CLIP_DEPTH_MODE:t.CLIP_DEPTH_MODE_EXT,clipControl:t.clipControlEXT.bind(t)};return null}(e);Aw&&null===S&&console.log('Could not find support for "clip_control"');const D=function(e){if(!Xq(e))return!1;if("undefined"!==typeof navigator){const e=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);if(!e)return!0;return parseInt(e[1])>=85}return!1}(e);return{instancedArrays:t,standardDerivatives:r,elementIndexUint:n,textureFloat:o,textureFloatLinear:i,textureHalfFloat:a,textureHalfFloatLinear:s,depthTexture:l,blendMinMax:c,vertexArrayObject:u,fragDepth:d,colorBufferFloat:A,colorBufferHalfFloat:f,drawBuffers:p,drawBuffersIndexed:h,shaderTextureLod:g,sRGB:m,disjointTimerQuery:y,multiDraw:v,drawInstancedBaseVertexBaseInstance:b,multiDrawInstancedBaseVertexBaseInstance:C,parallelShaderCompile:I,fboRenderMipmap:E,provokingVertex:x,clipCullDistance:B,conservativeDepth:w,stencilTexturing:_,clipControl:S,noNonInstancedActiveAttribs:D}}var kV;!function(e){e.create=function(e,t,n){return{array:e,width:t,height:n}},e.flipY=function(e){const{array:t,width:n,height:r}=e,o=n*(t.length/(n*r));for(let i=0,a=r/2;i<a;++i)for(let e=0,n=o;e<n;++e){const n=i*o+e,a=(r-i-1)*o+e,s=t[n];t[n]=t[a],t[a]=s}return e},e.divideByAlpha=function(e){const{array:t}=e,n=t instanceof Uint8Array?255:1;for(let r=0,o=t.length;r<o;r+=4){const e=t[r+3]/n;t[r]/=e,t[r+1]/=e,t[r+2]/=e}return e}}(kV||(kV={}));const QV=Bp(),MV={apply_fog:"\nfloat preFogAlpha = gl_FragColor.a;\nif (uFog) {\n    float viewZ = depthToViewZ(uIsOrtho, fragmentDepth, uNear, uFar);\n    float fogFactor = smoothstep(uFogNear, uFogFar, abs(viewZ));\n    float fogAlpha = (1.0 - fogFactor) * gl_FragColor.a;\n    if (!uTransparentBackground) {\n        if (gl_FragColor.a < 1.0) {\n            // transparent objects are blended with background color\n            gl_FragColor.a = fogAlpha;\n        } else {\n            // mix opaque objects with background color\n            gl_FragColor.rgb = mix(gl_FragColor.rgb, uFogColor, fogFactor);\n        }\n    } else {\n        #if defined(dRenderVariant_colorDpoit)\n            if (gl_FragColor.a < 1.0) {\n                // transparent objects are blended with background color\n                gl_FragColor.a = fogAlpha;\n            } else {\n                // opaque objects need to be pre-multiplied alpha\n                gl_FragColor.rgb *= fogAlpha;\n                gl_FragColor.a = fogAlpha;\n            }\n        #else\n            // pre-multiplied alpha expected for transparent background\n            gl_FragColor.rgb *= fogAlpha;\n            gl_FragColor.a = fogAlpha;\n        #endif\n    }\n}\n",apply_interior_color:"\nif (interior) {\n    if (uInteriorColorFlag) {\n        gl_FragColor.rgb = uInteriorColor;\n    } else {\n        gl_FragColor.rgb *= 1.0 - uInteriorDarkening;\n    }\n\n    #ifdef dTransparentBackfaces_opaque\n        gl_FragColor.a = 1.0;\n    #endif\n}\n",apply_light_color:"\n#if defined(dIgnoreLight)\n    #ifdef bumpEnabled\n        if (uBumpFrequency > 0.0 && uBumpAmplitude > 0.0 && bumpiness > 0.0) {\n            material.rgb += fbm(vModelPosition * uBumpFrequency) * uBumpAmplitude * bumpiness;\n            material.rgb -= 0.5 * uBumpAmplitude * bumpiness;\n        }\n    #endif\n\n    #if defined(dRenderVariant_color)\n        material.rgb += material.rgb * emissive;\n    #endif\n\n    gl_FragColor = material;\n#else\n    #ifdef bumpEnabled\n        if (uBumpFrequency > 0.0 && uBumpAmplitude > 0.0 && bumpiness > 0.0) {\n            normal = perturbNormal(-vViewPosition, normal, fbm(vModelPosition * uBumpFrequency), (uBumpAmplitude * bumpiness) / uBumpFrequency);\n        }\n    #endif\n\n    vec4 color = material;\n\n    #if defined(dCelShaded)\n        // clamp to avoid artifacts\n        metalness = clamp(metalness, 0.0, 0.99);\n        roughness = clamp(roughness, 0.05, 1.0);\n    #endif\n\n    GeometricContext geometry;\n    geometry.position = -vViewPosition;\n    geometry.normal = normal;\n    geometry.viewDir = normalize(vViewPosition);\n\n    PhysicalMaterial physicalMaterial;\n    physicalMaterial.diffuseColor = color.rgb * (1.0 - metalness);\n    #ifdef enabledFragDepth\n        physicalMaterial.roughness = min(max(roughness, 0.0525), 1.0);\n    #else\n        vec3 dxy = max(abs(dFdx(normal)), abs(dFdy(normal)));\n        float geometryRoughness = max(max(dxy.x, dxy.y), dxy.z);\n        physicalMaterial.roughness = min(max(roughness, 0.0525) + geometryRoughness, 1.0);\n    #endif\n    physicalMaterial.specularColor = mix(vec3(0.04), color.rgb, metalness);\n    physicalMaterial.specularF90 = 1.0;\n\n    IncidentLight directLight;\n\n    vec3 outgoingLight = vec3(0.0);\n\n    #if defined(dCelShaded)\n        float celDiffuse;\n        float celSpecular;\n        float celIntensity;\n\n        #pragma unroll_loop_start\n        for (int i = 0; i < dLightCount; ++i) {\n            directLight.direction = uLightDirection[i];\n            directLight.color = uLightColor[i] * PI; // * PI for punctual light\n\n            celDiffuse = RECIPROCAL_PI * max(dot(geometry.normal, directLight.direction), 0.0) * (1.0 - metalness);\n            celSpecular = luminance(saturate(dot(geometry.normal, directLight.direction)) * BRDF_GGX(directLight.direction, geometry.viewDir, geometry.normal, physicalMaterial.specularColor, physicalMaterial.specularF90, roughness));\n\n            celIntensity = celDiffuse + celSpecular;\n            celIntensity = ceil(celIntensity * uCelSteps) / uCelSteps;\n\n            outgoingLight += color.rgb * directLight.color * celIntensity;\n        }\n        #pragma unroll_loop_end\n\n        outgoingLight += physicalMaterial.diffuseColor * luminance(uAmbientColor);\n    #else\n        ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n\n        #pragma unroll_loop_start\n        for (int i = 0; i < dLightCount; ++i) {\n            directLight.direction = uLightDirection[i];\n            directLight.color = uLightColor[i] * PI; // * PI for punctual light\n            RE_Direct_Physical(directLight, geometry, physicalMaterial, reflectedLight);\n        }\n        #pragma unroll_loop_end\n\n        vec3 irradiance = uAmbientColor * PI; // * PI for punctual light\n        RE_IndirectDiffuse_Physical(irradiance, geometry, physicalMaterial, reflectedLight);\n\n        // indirect specular only metals\n        vec3 radiance = uAmbientColor * metalness;\n        vec3 iblIrradiance = uAmbientColor * metalness;\n        vec3 clearcoatRadiance = vec3(0.0);\n        RE_IndirectSpecular_Physical(radiance, iblIrradiance, clearcoatRadiance, geometry, physicalMaterial, reflectedLight);\n\n        outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n    #endif\n    outgoingLight = clamp(outgoingLight, 0.01, 0.99); // prevents black artifacts on specular highlight with transparent background\n\n    #if defined(dRenderVariant_color)\n        outgoingLight += color.rgb * emissive;\n    #endif\n\n    gl_FragColor = vec4(outgoingLight, color.a);\n#endif\n\n#if defined(dXrayShaded_on)\n    gl_FragColor.a *= 1.0 - pow(abs(dot(normal, vec3(0.0, 0.0, 1.0))), uXrayEdgeFalloff);\n#elif defined(dXrayShaded_inverted)\n    gl_FragColor.a *= pow(abs(dot(normal, vec3(0.0, 0.0, 1.0))), uXrayEdgeFalloff);\n#endif\n\ngl_FragColor.rgb *= uExposure;\n",apply_marker_color:"\n\n#if defined(dColorMarker)\n    if (marker > 0.0) {\n        if ((uMarkerPriority == 1 && marker != 2.0) || (uMarkerPriority != 1 && marker == 1.0)) {\n            gl_FragColor.rgb = mix(gl_FragColor.rgb, uHighlightColor, uHighlightStrength);\n            gl_FragColor.a = max(gl_FragColor.a, uHighlightStrength * 0.002); // for direct-volume rendering\n        } else {\n            gl_FragColor.rgb = mix(gl_FragColor.rgb, uSelectColor, uSelectStrength);\n            gl_FragColor.a = max(gl_FragColor.a, uSelectStrength * 0.002); // for direct-volume rendering\n        }\n    } else if (uMarkerAverage > 0.0) {\n        gl_FragColor.rgb = mix(gl_FragColor.rgb, uDimColor, uDimStrength);\n        gl_FragColor.a = max(gl_FragColor.a, uDimStrength * 0.002); // for direct-volume rendering\n    }\n#endif\n",assign_clipping_varying:"\n#if dClipObjectCount != 0 && defined(dClipping)\n    #if defined(dClippingType_instance)\n        vClipping = readFromTexture(tClipping, aInstance, uClippingTexDim).a;\n    #elif defined(dMarkerType_groupInstance)\n        vClipping = readFromTexture(tClipping, aInstance * float(uGroupCount) + group, uClippingTexDim).a;\n    #endif\n#endif\n",assign_color_varying:"\n#if defined(dRenderVariant_color)\n    #if defined(dColorType_attribute)\n        vColor.rgb = aColor;\n    #elif defined(dColorType_instance)\n        vColor.rgb = readFromTexture(tColor, aInstance, uColorTexDim).rgb;\n    #elif defined(dColorType_group)\n        #if defined(dDualColor)\n            vec4 color2;\n            if (aColorMode == 2.0) {\n                vColor.rgb = readFromTexture(tColor, group, uColorTexDim).rgb;\n            } else {\n                vColor.rgb = readFromTexture(tColor, group * 2.0, uColorTexDim).rgb;\n                color2.rgb = readFromTexture(tColor, group * 2.0 + 1.0, uColorTexDim).rgb;\n            }\n        #else\n            vColor.rgb = readFromTexture(tColor, group, uColorTexDim).rgb;\n        #endif\n    #elif defined(dColorType_groupInstance)\n        #if defined(dDualColor)\n            vec4 color2;\n            if (aColorMode == 2.0) {\n                vColor.rgb = readFromTexture(tColor, aInstance * float(uGroupCount) + group, uColorTexDim).rgb;\n            } else {\n                vColor.rgb = readFromTexture(tColor, (aInstance * float(uGroupCount) + group) * 2.0, uColorTexDim).rgb;\n                color2.rgb = readFromTexture(tColor, (aInstance * float(uGroupCount) + group) * 2.0 + 1.0, uColorTexDim).rgb;\n            }\n        #else\n            vColor.rgb = readFromTexture(tColor, aInstance * float(uGroupCount) + group, uColorTexDim).rgb;\n        #endif\n    #elif defined(dColorType_vertex)\n        vColor.rgb = readFromTexture(tColor, VertexID, uColorTexDim).rgb;\n    #elif defined(dColorType_vertexInstance)\n        vColor.rgb = readFromTexture(tColor, int(aInstance) * uVertexCount + VertexID, uColorTexDim).rgb;\n    #elif defined(dColorType_volume)\n        vec3 cgridPos = (uColorGridTransform.w * (position - uColorGridTransform.xyz)) / uColorGridDim;\n        vColor.rgb = texture3dFrom2dLinear(tColorGrid, cgridPos, uColorGridDim, uColorTexDim).rgb;\n    #elif defined(dColorType_volumeInstance)\n        vec3 cgridPos = (uColorGridTransform.w * (vModelPosition - uColorGridTransform.xyz)) / uColorGridDim;\n        vColor.rgb = texture3dFrom2dLinear(tColorGrid, cgridPos, uColorGridDim, uColorTexDim).rgb;\n    #endif\n\n    #ifdef dUsePalette\n        vPaletteV = ((vColor.r * 256.0 * 256.0 * 255.0 + vColor.g * 256.0 * 255.0 + vColor.b * 255.0) - 1.0) / 16777215.0;\n    #endif\n\n    #ifdef dOverpaint\n        #if defined(dOverpaintType_instance)\n            vOverpaint = readFromTexture(tOverpaint, aInstance, uOverpaintTexDim);\n        #elif defined(dOverpaintType_groupInstance)\n            vOverpaint = readFromTexture(tOverpaint, aInstance * float(uGroupCount) + group, uOverpaintTexDim);\n        #elif defined(dOverpaintType_vertexInstance)\n            vOverpaint = readFromTexture(tOverpaint, int(aInstance) * uVertexCount + VertexID, uOverpaintTexDim);\n        #elif defined(dOverpaintType_volumeInstance)\n            vec3 ogridPos = (uOverpaintGridTransform.w * (vModelPosition - uOverpaintGridTransform.xyz)) / uOverpaintGridDim;\n            vOverpaint = texture3dFrom2dLinear(tOverpaintGrid, ogridPos, uOverpaintGridDim, uOverpaintTexDim);\n        #endif\n\n        // pre-mix to avoid darkening due to empty overpaint\n        #ifdef dColorType_uniform\n            vOverpaint.rgb = mix(uColor.rgb, vOverpaint.rgb, vOverpaint.a);\n        #else\n            vOverpaint.rgb = mix(vColor.rgb, vOverpaint.rgb, vOverpaint.a);\n        #endif\n        vOverpaint *= uOverpaintStrength;\n    #endif\n\n    #ifdef dEmissive\n        #if defined(dEmissiveType_instance)\n            vEmissive = readFromTexture(tEmissive, aInstance, uEmissiveTexDim).a;\n        #elif defined(dEmissiveType_groupInstance)\n            vEmissive = readFromTexture(tEmissive, aInstance * float(uGroupCount) + group, uEmissiveTexDim).a;\n        #elif defined(dEmissiveType_vertexInstance)\n            vEmissive = readFromTexture(tEmissive, int(aInstance) * uVertexCount + VertexID, uEmissiveTexDim).a;\n        #elif defined(dEmissiveType_volumeInstance)\n            vec3 egridPos = (uEmissiveGridTransform.w * (vModelPosition - uEmissiveGridTransform.xyz)) / uEmissiveGridDim;\n            vEmissive = texture3dFrom2dLinear(tEmissiveGrid, egridPos, uEmissiveGridDim, uEmissiveTexDim).a;\n        #endif\n        vEmissive *= uEmissiveStrength;\n    #endif\n\n    #ifdef dSubstance\n        #if defined(dSubstanceType_instance)\n            vSubstance = readFromTexture(tSubstance, aInstance, uSubstanceTexDim);\n        #elif defined(dSubstanceType_groupInstance)\n            vSubstance = readFromTexture(tSubstance, aInstance * float(uGroupCount) + group, uSubstanceTexDim);\n        #elif defined(dSubstanceType_vertexInstance)\n            vSubstance = readFromTexture(tSubstance, int(aInstance) * uVertexCount + VertexID, uSubstanceTexDim);\n        #elif defined(dSubstanceType_volumeInstance)\n            vec3 sgridPos = (uSubstanceGridTransform.w * (vModelPosition - uSubstanceGridTransform.xyz)) / uSubstanceGridDim;\n            vSubstance = texture3dFrom2dLinear(tSubstanceGrid, sgridPos, uSubstanceGridDim, uSubstanceTexDim);\n        #endif\n\n        // pre-mix to avoid artifacts due to empty substance\n        vSubstance.rgb = mix(vec3(uMetalness, uRoughness, uBumpiness), vSubstance.rgb, vSubstance.a);\n        vSubstance *= uSubstanceStrength;\n    #endif\n#elif defined(dRenderVariant_emissive)\n    #ifdef dEmissive\n        #if defined(dEmissiveType_instance)\n            vEmissive = readFromTexture(tEmissive, aInstance, uEmissiveTexDim).a;\n        #elif defined(dEmissiveType_groupInstance)\n            vEmissive = readFromTexture(tEmissive, aInstance * float(uGroupCount) + group, uEmissiveTexDim).a;\n        #elif defined(dEmissiveType_vertexInstance)\n            vEmissive = readFromTexture(tEmissive, int(aInstance) * uVertexCount + VertexID, uEmissiveTexDim).a;\n        #elif defined(dEmissiveType_volumeInstance)\n            vec3 egridPos = (uEmissiveGridTransform.w * (vModelPosition - uEmissiveGridTransform.xyz)) / uEmissiveGridDim;\n            vEmissive = texture3dFrom2dLinear(tEmissiveGrid, egridPos, uEmissiveGridDim, uEmissiveTexDim).a;\n        #endif\n        vEmissive *= uEmissiveStrength;\n    #endif\n#elif defined(dRenderVariant_pick)\n    #ifdef requiredDrawBuffers\n        vObject = vec4(packIntToRGB(float(uObjectId)), 1.0);\n        vInstance = vec4(packIntToRGB(aInstance), 1.0);\n        vGroup = vec4(packIntToRGB(group), 1.0);\n    #else\n        if (uPickType == 1) {\n            vColor = vec4(packIntToRGB(float(uObjectId)), 1.0);\n        } else if (uPickType == 2) {\n            vColor = vec4(packIntToRGB(aInstance), 1.0);\n        } else {\n            vColor = vec4(packIntToRGB(group), 1.0);\n        }\n    #endif\n#endif\n\n#ifdef dTransparency\n    #if defined(dTransparencyType_instance)\n        vTransparency = readFromTexture(tTransparency, aInstance, uTransparencyTexDim).a;\n    #elif defined(dTransparencyType_groupInstance)\n        vTransparency = readFromTexture(tTransparency, aInstance * float(uGroupCount) + group, uTransparencyTexDim).a;\n    #elif defined(dTransparencyType_vertexInstance)\n        vTransparency = readFromTexture(tTransparency, int(aInstance) * uVertexCount + VertexID, uTransparencyTexDim).a;\n    #elif defined(dTransparencyType_volumeInstance)\n        vec3 tgridPos = (uTransparencyGridTransform.w * (vModelPosition - uTransparencyGridTransform.xyz)) / uTransparencyGridDim;\n        vTransparency = texture3dFrom2dLinear(tTransparencyGrid, tgridPos, uTransparencyGridDim, uTransparencyTexDim).a;\n    #endif\n    vTransparency *= uTransparencyStrength;\n#endif\n",assign_group:"\n#ifdef dGeometryType_textureMesh\n    float group = unpackRGBToInt(readFromTexture(tGroup, VertexID, uGeoTexDim).rgb);\n#else\n    float group = aGroup;\n#endif\n",assign_marker_varying:"\n#if defined(dNeedsMarker)\n    #if defined(dMarkerType_instance)\n        vMarker = readFromTexture(tMarker, aInstance, uMarkerTexDim).a;\n    #elif defined(dMarkerType_groupInstance)\n        vMarker = readFromTexture(tMarker, aInstance * float(uGroupCount) + group, uMarkerTexDim).a;\n    #endif\n#endif\n",assign_material_color:"\n#if defined(dNeedsMarker)\n    float marker = uMarker;\n    if (uMarker == -1.0) {\n        marker = floor(vMarker * 255.0 + 0.5); // rounding required to work on some cards on win\n    }\n#endif\n\n#if defined(dRenderVariant_color)\n    #if defined(dUsePalette)\n        vec4 material = vec4(texture2D(tPalette, vec2(vPaletteV, 0.5)).rgb, uAlpha);\n    #elif defined(dColorType_uniform)\n        vec4 material = vec4(uColor, uAlpha);\n    #elif defined(dColorType_varying)\n        vec4 material = vec4(vColor.rgb, uAlpha);\n    #endif\n\n    // mix material with overpaint\n    #if defined(dOverpaint)\n        material.rgb = mix(material.rgb, vOverpaint.rgb, vOverpaint.a);\n    #endif\n\n    float emissive = uEmissive;\n    #ifdef dEmissive\n        emissive += vEmissive;\n    #endif\n\n    float metalness = uMetalness;\n    float roughness = uRoughness;\n    float bumpiness = uBumpiness;\n    #ifdef dSubstance\n        float sf = clamp(vSubstance.a, 0.0, 0.99); // clamp to avoid artifacts\n        metalness = mix(metalness, vSubstance.r, sf);\n        roughness = mix(roughness, vSubstance.g, sf);\n        bumpiness = mix(bumpiness, vSubstance.b, sf);\n    #endif\n#elif defined(dRenderVariant_depth)\n    if (fragmentDepth > getDepth(gl_FragCoord.xy / uDrawingBufferSize)) {\n        discard;\n    }\n\n    #ifndef dXrayShaded\n        #if defined(dTransparency)\n            float dta = 1.0 - vTransparency;\n            if (vTransparency < 0.2) dta = 1.0; // hard cutoff looks better\n\n            if (uRenderMask == MaskTransparent && uAlpha * dta == 1.0) {\n                discard;\n            } else if (uRenderMask == MaskOpaque && uAlpha * dta < 1.0) {\n                discard;\n            }\n        #else\n            if (uRenderMask == MaskTransparent && uAlpha == 1.0) {\n                discard;\n            } else if (uRenderMask == MaskOpaque && uAlpha < 1.0) {\n                discard;\n            }\n        #endif\n    #else\n        if (uRenderMask == MaskOpaque) {\n            discard;\n        }\n    #endif\n\n    vec4 material = packDepthToRGBA(fragmentDepth);\n#elif defined(dRenderVariant_marking)\n    vec4 material;\n    if(uMarkingType == 1) {\n        if (marker > 0.0)\n            discard;\n        #ifdef enabledFragDepth\n            material = packDepthToRGBA(gl_FragDepthEXT);\n        #else\n            material = packDepthToRGBA(gl_FragCoord.z);\n        #endif\n    } else {\n        if (marker == 0.0)\n            discard;\n        float depthTest = 1.0;\n        if (uMarkingDepthTest) {\n            depthTest = (fragmentDepth >= getDepthPacked(gl_FragCoord.xy / uDrawingBufferSize)) ? 1.0 : 0.0;\n        }\n        bool isHighlight = intMod(marker, 2.0) > 0.1;\n        float viewZ = depthToViewZ(uIsOrtho, fragmentDepth, uNear, uFar);\n        float fogFactor = smoothstep(uFogNear, uFogFar, abs(viewZ));\n        if (fogFactor == 1.0)\n            discard;\n        material = vec4(0.0, depthTest, isHighlight ? 1.0 : 0.0, 1.0 - fogFactor);\n    }\n#elif defined(dRenderVariant_emissive)\n    float emissive = uEmissive;\n    #ifdef dEmissive\n        emissive += vEmissive;\n    #endif\n    vec4 material = vec4(emissive);\n#endif\n\n// apply per-group transparency\n#if defined(dTransparency) && (defined(dRenderVariant_pick) || defined(dRenderVariant_color) || defined(dRenderVariant_emissive))\n    float ta = 1.0 - vTransparency;\n    if (vTransparency < 0.09) ta = 1.0; // hard cutoff looks better\n\n    #if defined(dRenderVariant_pick)\n        if (ta * uAlpha < uPickingAlphaThreshold)\n            discard; // ignore so the element below can be picked\n    #elif defined(dRenderVariant_emissive)\n        if (ta < 1.0)\n            discard; // emissive not supported with transparency\n    #elif defined(dRenderVariant_color)\n        material.a *= ta;\n    #endif\n#endif\n",assign_position:"\nmat4 model = uModel * aTransform;\nmat4 modelView = uView * model;\n#ifdef dGeometryType_textureMesh\n    vec3 position = readFromTexture(tPosition, VertexID, uGeoTexDim).xyz;\n#else\n    vec3 position = aPosition;\n#endif\nvec4 position4 = vec4(position, 1.0);\n// for accessing tColorGrid in vert shader and for clipping in frag shader\nvModelPosition = (model * position4).xyz;\nvec4 mvPosition = modelView * position4;\nvViewPosition = mvPosition.xyz;\ngl_Position = uProjection * mvPosition;\n",assign_size:"\n#if defined(dSizeType_uniform)\n    float size = uSize;\n#elif defined(dSizeType_attribute)\n    float size = aSize;\n#elif defined(dSizeType_instance)\n    float size = unpackRGBToInt(readFromTexture(tSize, aInstance, uSizeTexDim).rgb);\n#elif defined(dSizeType_group)\n    float size = unpackRGBToInt(readFromTexture(tSize, group, uSizeTexDim).rgb);\n#elif defined(dSizeType_groupInstance)\n    float size = unpackRGBToInt(readFromTexture(tSize, aInstance * float(uGroupCount) + group, uSizeTexDim).rgb);\n#endif\n\n#if defined(dSizeType_instance) || defined(dSizeType_group) || defined(dSizeType_groupInstance)\n    size /= 100.0; // NOTE factor also set in TypeScript\n#endif\n\nsize *= uSizeFactor;\n",check_picking_alpha:"\nfloat viewZ = depthToViewZ(uIsOrtho, fragmentDepth, uNear, uFar);\nfloat fogFactor = smoothstep(uFogNear, uFogFar, abs(viewZ));\nfloat alpha = (1.0 - fogFactor) * uAlpha;\n// if not opaque enough ignore so the element below can be picked\nif (uAlpha < uPickingAlphaThreshold || alpha < 0.1) {\n    #ifdef dTransparentBackfaces_opaque\n        if (!interior) discard;\n    #else\n        discard;\n    #endif\n}\n",check_transparency:"\n#if defined(dRenderVariant_color)\n    #if defined(dTransparentBackfaces_off)\n        if (interior && material.a < 1.0) discard;\n    #elif defined(dTransparentBackfaces_opaque)\n        if (interior) material.a = 1.0;\n    #endif\n\n    #if !defined(dXrayShaded_on) && !defined(dXrayShaded_inverted)\n        if ((uRenderMask == MaskOpaque && material.a < 1.0) ||\n            (uRenderMask == MaskTransparent && material.a == 1.0)\n        ) {\n            discard;\n        }\n    #endif\n#endif\n",clip_instance:"\n#if defined(dClipVariant_instance) && dClipObjectCount != 0\n    vec4 mCenter = uModel * aTransform * vec4(uInvariantBoundingSphere.xyz, 1.0);\n    if (clipTest(vec4(mCenter.xyz, uInvariantBoundingSphere.w)))\n        // move out of [ -w, +w ] to 'discard' in vert shader\n        gl_Position.z = 2.0 * gl_Position.w;\n#endif\n",clip_pixel:"\n#if defined(dClipVariant_pixel) && dClipObjectCount != 0\n    if (clipTest(vec4(vModelPosition, 0.0)))\n        discard;\n#endif\n",color_frag_params:"\nuniform float uMetalness;\nuniform float uRoughness;\nuniform float uBumpiness;\n#ifdef bumpEnabled\n    uniform float uBumpFrequency;\n    uniform float uBumpAmplitude;\n#endif\nuniform float uEmissive;\n\n#if defined(dRenderVariant_color)\n    #if defined(dColorType_uniform)\n        uniform vec3 uColor;\n    #elif defined(dColorType_varying)\n        varying vec4 vColor;\n    #endif\n\n    #ifdef dUsePalette\n        uniform sampler2D tPalette;\n        varying float vPaletteV;\n    #endif\n\n    #ifdef dOverpaint\n        varying vec4 vOverpaint;\n    #endif\n\n    #ifdef dEmissive\n        varying float vEmissive;\n    #endif\n\n    #ifdef dSubstance\n        varying vec4 vSubstance;\n    #endif\n#elif defined(dRenderVariant_emissive)\n    #ifdef dEmissive\n        varying float vEmissive;\n    #endif\n#elif defined(dRenderVariant_pick)\n    #if __VERSION__ == 100 || !defined(dVaryingGroup)\n        #ifdef requiredDrawBuffers\n            varying vec4 vObject;\n            varying vec4 vInstance;\n            varying vec4 vGroup;\n        #else\n            varying vec4 vColor;\n        #endif\n    #else\n        #ifdef requiredDrawBuffers\n            flat in vec4 vObject;\n            flat in vec4 vInstance;\n            flat in vec4 vGroup;\n        #else\n            flat in vec4 vColor;\n        #endif\n    #endif\n#endif\n\n#ifdef dTransparency\n    varying float vTransparency;\n#endif\n",color_vert_params:"\nuniform float uMetalness;\nuniform float uRoughness;\nuniform float uBumpiness;\n\n#if defined(dRenderVariant_color)\n    #if defined(dColorType_uniform)\n        uniform vec3 uColor;\n    #elif defined(dColorType_attribute)\n        varying vec4 vColor;\n        attribute vec3 aColor;\n    #elif defined(dColorType_texture)\n        varying vec4 vColor;\n        uniform vec2 uColorTexDim;\n        uniform sampler2D tColor;\n    #elif defined(dColorType_grid)\n        varying vec4 vColor;\n        uniform vec2 uColorTexDim;\n        uniform vec3 uColorGridDim;\n        uniform vec4 uColorGridTransform;\n        uniform sampler2D tColorGrid;\n    #elif defined(dColorType_direct)\n        varying vec4 vColor;\n    #endif\n\n    #ifdef dUsePalette\n        varying float vPaletteV;\n    #endif\n\n    #ifdef dOverpaint\n        #if defined(dOverpaintType_instance) || defined(dOverpaintType_groupInstance) || defined(dOverpaintType_vertexInstance)\n            varying vec4 vOverpaint;\n            uniform vec2 uOverpaintTexDim;\n            uniform sampler2D tOverpaint;\n        #elif defined(dOverpaintType_volumeInstance)\n            varying vec4 vOverpaint;\n            uniform vec2 uOverpaintTexDim;\n            uniform vec3 uOverpaintGridDim;\n            uniform vec4 uOverpaintGridTransform;\n            uniform sampler2D tOverpaintGrid;\n        #endif\n        uniform float uOverpaintStrength;\n    #endif\n\n    #ifdef dEmissive\n        #if defined(dEmissiveType_instance) || defined(dEmissiveType_groupInstance) || defined(dEmissiveType_vertexInstance)\n            varying float vEmissive;\n            uniform vec2 uEmissiveTexDim;\n            uniform sampler2D tEmissive;\n        #elif defined(dEmissiveType_volumeInstance)\n            varying float vEmissive;\n            uniform vec2 uEmissiveTexDim;\n            uniform vec3 uEmissiveGridDim;\n            uniform vec4 uEmissiveGridTransform;\n            uniform sampler2D tEmissiveGrid;\n        #endif\n        uniform float uEmissiveStrength;\n    #endif\n\n    #ifdef dSubstance\n        #if defined(dSubstanceType_instance) || defined(dSubstanceType_groupInstance) || defined(dSubstanceType_vertexInstance)\n            varying vec4 vSubstance;\n            uniform vec2 uSubstanceTexDim;\n            uniform sampler2D tSubstance;\n        #elif defined(dSubstanceType_volumeInstance)\n            varying vec4 vSubstance;\n            uniform vec2 uSubstanceTexDim;\n            uniform vec3 uSubstanceGridDim;\n            uniform vec4 uSubstanceGridTransform;\n            uniform sampler2D tSubstanceGrid;\n        #endif\n        uniform float uSubstanceStrength;\n    #endif\n#elif defined(dRenderVariant_emissive)\n    #ifdef dEmissive\n        #if defined(dEmissiveType_instance) || defined(dEmissiveType_groupInstance) || defined(dEmissiveType_vertexInstance)\n            varying float vEmissive;\n            uniform vec2 uEmissiveTexDim;\n            uniform sampler2D tEmissive;\n        #elif defined(dEmissiveType_volumeInstance)\n            varying float vEmissive;\n            uniform vec2 uEmissiveTexDim;\n            uniform vec3 uEmissiveGridDim;\n            uniform vec4 uEmissiveGridTransform;\n            uniform sampler2D tEmissiveGrid;\n        #endif\n        uniform float uEmissiveStrength;\n    #endif\n#elif defined(dRenderVariant_pick)\n    #if __VERSION__ == 100 || !defined(dVaryingGroup)\n        #ifdef requiredDrawBuffers\n            varying vec4 vObject;\n            varying vec4 vInstance;\n            varying vec4 vGroup;\n        #else\n            varying vec4 vColor;\n        #endif\n    #else\n        #ifdef requiredDrawBuffers\n            flat out vec4 vObject;\n            flat out vec4 vInstance;\n            flat out vec4 vGroup;\n        #else\n            flat out vec4 vColor;\n        #endif\n    #endif\n#endif\n\n#ifdef dTransparency\n    #if defined(dTransparencyType_instance) || defined(dTransparencyType_groupInstance) || defined(dTransparencyType_vertexInstance)\n        varying float vTransparency;\n        uniform vec2 uTransparencyTexDim;\n        uniform sampler2D tTransparency;\n    #elif defined(dTransparencyType_volumeInstance)\n        varying float vTransparency;\n        uniform vec2 uTransparencyTexDim;\n        uniform vec3 uTransparencyGridDim;\n        uniform vec4 uTransparencyGridTransform;\n        uniform sampler2D tTransparencyGrid;\n    #endif\n    uniform float uTransparencyStrength;\n#endif\n",common_clip:"\n#if dClipObjectCount != 0\n    vec3 quaternionTransform(const in vec4 q, const in vec3 v) {\n        vec3 t = 2.0 * cross(q.xyz, v);\n        return v + q.w * t + cross(q.xyz, t);\n    }\n\n    vec4 computePlane(const in vec3 normal, const in vec3 inPoint) {\n        return vec4(normalize(normal), -dot(normal, inPoint));\n    }\n\n    float planeSD(const in vec4 plane, const in vec3 center) {\n        return -dot(plane.xyz, center - plane.xyz * -plane.w);\n    }\n\n    float sphereSD(const in vec3 position, const in vec4 rotation, const in vec3 size, const in vec3 center) {\n        return (\n            length(quaternionTransform(vec4(-rotation.x, -rotation.y, -rotation.z, rotation.w), center - position) / size) - 1.0\n        ) * min(min(size.x, size.y), size.z);\n    }\n\n    float cubeSD(const in vec3 position, const in vec4 rotation, const in vec3 size, const in vec3 center) {\n        vec3 d = abs(quaternionTransform(vec4(-rotation.x, -rotation.y, -rotation.z, rotation.w), center - position)) - size;\n        return min(max(d.x, max(d.y, d.z)), 0.0) + length(max(d, 0.0));\n    }\n\n    float cylinderSD(const in vec3 position, const in vec4 rotation, const in vec3 size, const in vec3 center) {\n        vec3 t = quaternionTransform(vec4(-rotation.x, -rotation.y, -rotation.z, rotation.w), center - position);\n\n        vec2 d = abs(vec2(length(t.xz), t.y)) - size.xy;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n    }\n\n    float infiniteConeSD(const in vec3 position, const in vec4 rotation, const in vec3 size, const in vec3 center) {\n        vec3 t = quaternionTransform(vec4(-rotation.x, -rotation.y, -rotation.z, rotation.w), center - position);\n\n        float q = length(t.xy);\n        return dot(size.xy, vec2(q, t.z));\n    }\n\n    float getSignedDistance(const in vec3 center, const in int type, const in vec3 position, const in vec4 rotation, const in vec3 scale) {\n        if (type == 1) {\n            vec3 normal = quaternionTransform(rotation, vec3(0.0, 1.0, 0.0));\n            vec4 plane = computePlane(normal, position);\n            return planeSD(plane, center);\n        } else if (type == 2) {\n            return sphereSD(position, rotation, scale * 0.5, center);\n        } else if (type == 3) {\n            return cubeSD(position, rotation, scale * 0.5, center);\n        } else if (type == 4) {\n            return cylinderSD(position, rotation, scale * 0.5, center);\n        } else if (type == 5) {\n            return infiniteConeSD(position, rotation, scale * 0.5, center);\n        } else {\n            return 0.1;\n        }\n    }\n\n    #if __VERSION__ == 100\n        // 8-bit\n        int bitwiseAnd(in int a, in int b) {\n            int d = 128;\n            int result = 0;\n            for (int i = 0; i < 8; ++i) {\n                if (d <= 0) break;\n                if (a >= d && b >= d) result += d;\n                if (a >= d) a -= d;\n                if (b >= d) b -= d;\n                d /= 2;\n            }\n            return result;\n        }\n\n        bool hasBit(const in int mask, const in int bit) {\n            return bitwiseAnd(mask, bit) == 0;\n        }\n    #else\n        bool hasBit(const in int mask, const in int bit) {\n            return (mask & bit) == 0;\n        }\n    #endif\n\n    bool clipTest(const in vec4 sphere) {\n        // flag is a bit-flag for clip-objects to ignore (note, object ids start at 1 not 0)\n        #if defined(dClipping)\n            int flag = int(floor(vClipping * 255.0 + 0.5));\n        #else\n            int flag = 0;\n        #endif\n\n        #pragma unroll_loop_start\n        for (int i = 0; i < dClipObjectCount; ++i) {\n            if (flag == 0 || hasBit(flag, UNROLLED_LOOP_INDEX + 1)) {\n                // TODO take sphere radius into account?\n                bool test = getSignedDistance(sphere.xyz, uClipObjectType[i], uClipObjectPosition[i], uClipObjectRotation[i], uClipObjectScale[i]) <= 0.0;\n                if ((!uClipObjectInvert[i] && test) || (uClipObjectInvert[i] && !test)) {\n                    return true;\n                }\n            }\n        }\n        #pragma unroll_loop_end\n        return false;\n    }\n#endif\n",common_frag_params:'\nuniform int uObjectId;\nuniform int uInstanceCount;\nuniform int uGroupCount;\n\nuniform int uPickType;\nuniform int uMarkingType;\n\nuniform vec4 uCameraPlane;\nuniform vec4 uLod;\n\n#if dClipObjectCount != 0\n    uniform int uClipObjectType[dClipObjectCount];\n    uniform bool uClipObjectInvert[dClipObjectCount];\n    uniform vec3 uClipObjectPosition[dClipObjectCount];\n    uniform vec4 uClipObjectRotation[dClipObjectCount];\n    uniform vec3 uClipObjectScale[dClipObjectCount];\n\n    #if defined(dClipping)\n        #if __VERSION__ == 100 || defined(dClippingType_instance) || !defined(dVaryingGroup)\n            varying float vClipping;\n        #else\n            flat in float vClipping;\n        #endif\n    #endif\n#endif\n\n#if defined(dColorMarker)\n    uniform vec3 uHighlightColor;\n    uniform vec3 uSelectColor;\n    uniform vec3 uDimColor;\n    uniform float uHighlightStrength;\n    uniform float uSelectStrength;\n    uniform float uDimStrength;\n    uniform int uMarkerPriority;\n    uniform float uMarkerAverage;\n#endif\n\n#if defined(dNeedsMarker)\n    uniform float uMarker;\n    #if __VERSION__ == 100 || defined(dMarkerType_instance) || !defined(dVaryingGroup)\n        varying float vMarker;\n    #else\n        flat in float vMarker;\n    #endif\n#endif\n\n#if defined(dRenderVariant_colorDpoit)\n    #define MAX_DPOIT_DEPTH 99999.0 // NOTE constant also set in TypeScript\n    uniform sampler2D tDpoitDepth;\n    uniform sampler2D tDpoitFrontColor;\n#endif\n\nvarying vec3 vModelPosition;\nvarying vec3 vViewPosition;\n\nuniform vec2 uViewOffset;\n\nuniform float uNear;\nuniform float uFar;\nuniform float uIsOrtho;\n\nuniform bool uFog;\nuniform float uFogNear;\nuniform float uFogFar;\nuniform vec3 uFogColor;\n\nuniform float uAlpha;\nuniform float uPickingAlphaThreshold;\nuniform bool uTransparentBackground;\n\nuniform bool uDoubleSided;\nuniform float uInteriorDarkening;\nuniform bool uInteriorColorFlag;\nuniform vec3 uInteriorColor;\nbool interior;\n\nuniform float uXrayEdgeFalloff;\nuniform float uCelSteps;\nuniform float uExposure;\n\nuniform mat4 uProjection;\n\nuniform int uRenderMask;\nuniform bool uMarkingDepthTest;\n\nuniform sampler2D tDepth;\nuniform vec2 uDrawingBufferSize;\n\nfloat getDepthPacked(const in vec2 coords) {\n    return unpackRGBAToDepth(texture2D(tDepth, coords));\n}\n\nfloat getDepth(const in vec2 coords) {\n    #ifdef depthTextureSupport\n        return texture2D(tDepth, coords).r;\n    #else\n        return unpackRGBAToDepth(texture2D(tDepth, coords));\n    #endif\n}\n\nfloat calcDepth(const in vec3 pos) {\n    vec2 clipZW = pos.z * uProjection[2].zw + uProjection[3].zw;\n    return 0.5 + 0.5 * clipZW.x / clipZW.y;\n}\n\n// "Bump Mapping Unparametrized Surfaces on the GPU" Morten S. Mikkelsen\n// https://mmikk.github.io/papers3d/mm_sfgrad_bump.pdf\nvec3 perturbNormal(in vec3 position, in vec3 normal, in float height, in float scale) {\n    vec3 sigmaS = dFdx(position);\n    vec3 sigmaT = dFdy(position);\n\n    vec3 r1 = cross(sigmaT, normal);\n    vec3 r2 = cross(normal, sigmaS);\n    float det = dot(sigmaS, r1);\n    if (det == 0.0) return normal;\n\n    float bs = dFdx(height);\n    float bt = dFdy(height);\n\n    vec3 surfGrad = sign(det) * (bs * r1 + bt * r2);\n    return normalize(abs(det) * normal - scale * surfGrad);\n}\n\nfloat hash(in float h) {\n    return fract(sin(h) * 43758.5453123);\n}\n\nfloat noise(in vec3 x) {\n    vec3 p = floor(x);\n    vec3 f = fract(x);\n    f = f * f * (3.0 - 2.0 * f);\n\n    float n = p.x + p.y * 157.0 + 113.0 * p.z;\n    return mix(\n        mix(mix(hash(n + 0.0), hash(n + 1.0), f.x),\n            mix(hash(n + 157.0), hash(n + 158.0), f.x), f.y),\n        mix(mix(hash(n + 113.0), hash(n + 114.0), f.x),\n            mix(hash(n + 270.0), hash(n + 271.0), f.x), f.y), f.z);\n}\n\nfloat fbm(in vec3 p) {\n    float f = 0.0;\n    f += 0.5 * noise(p);\n    p *= 2.01;\n    f += 0.25 * noise(p);\n    p *= 2.02;\n    f += 0.125 * noise(p);\n\n    return f;\n}\n',common_vert_params:"\nuniform mat4 uProjection, uModel, uView;\nuniform vec3 uCameraPosition;\nuniform vec4 uCameraPlane;\n\nuniform int uObjectId;\nuniform int uVertexCount;\nuniform int uInstanceCount;\nuniform int uGroupCount;\nuniform vec4 uInvariantBoundingSphere;\nuniform vec4 uLod;\n\nuniform bool uDoubleSided;\nuniform int uPickType;\n\n#if dClipObjectCount != 0\n    uniform int uClipObjectType[dClipObjectCount];\n    uniform bool uClipObjectInvert[dClipObjectCount];\n    uniform vec3 uClipObjectPosition[dClipObjectCount];\n    uniform vec4 uClipObjectRotation[dClipObjectCount];\n    uniform vec3 uClipObjectScale[dClipObjectCount];\n\n    #if defined(dClipping)\n        uniform vec2 uClippingTexDim;\n        uniform sampler2D tClipping;\n        #if __VERSION__ == 100 || defined(dClippingType_instance) || !defined(dVaryingGroup)\n            varying float vClipping;\n        #else\n            flat out float vClipping;\n        #endif\n    #endif\n#endif\n\n#if defined(dNeedsMarker)\n    uniform float uMarker;\n    uniform vec2 uMarkerTexDim;\n    uniform sampler2D tMarker;\n    #if __VERSION__ == 100 || defined(dMarkerType_instance) || !defined(dVaryingGroup)\n        varying float vMarker;\n    #else\n        flat out float vMarker;\n    #endif\n#endif\n\nvarying vec3 vModelPosition;\nvarying vec3 vViewPosition;\n\n#if defined(noNonInstancedActiveAttribs)\n    // int() is needed for some Safari versions\n    // see https://bugs.webkit.org/show_bug.cgi?id=244152\n    #define VertexID int(gl_VertexID)\n#else\n    attribute float aVertex;\n    #define VertexID int(aVertex)\n#endif\n\n#if defined(enabledMultiDraw)\n    #define DrawID gl_DrawID\n#else\n    #define DrawID uDrawId\n#endif\n",common:"\n// TODO find a better place for these convenience defines\n\n#if defined(dRenderVariant_colorBlended) || defined(dRenderVariant_colorWboit) || defined(dRenderVariant_colorDpoit)\n    #define dRenderVariant_color\n#endif\n\n#if defined(dColorType_instance) || defined(dColorType_group) || defined(dColorType_groupInstance) || defined(dColorType_vertex) || defined(dColorType_vertexInstance)\n    #define dColorType_texture\n#endif\n\n#if defined(dColorType_volume) || defined(dColorType_volumeInstance)\n    #define dColorType_grid\n#endif\n\n#if defined(dColorType_attribute) || defined(dColorType_texture) || defined(dColorType_grid)\n    #define dColorType_varying\n#endif\n\n#if (defined(dRenderVariant_color) && defined(dColorMarker)) || defined(dRenderVariant_marking)\n    #define dNeedsMarker\n#endif\n\n#if defined(dXrayShaded_on) || defined(dXrayShaded_inverted)\n    #define dXrayShaded\n#endif\n\n#define MaskAll 0\n#define MaskOpaque 1\n#define MaskTransparent 2\n\n//\n\n#define PI 3.14159265\n#define RECIPROCAL_PI 0.31830988618\n#define EPSILON 1e-6\n\n#define saturate(a) clamp(a, 0.0, 1.0)\n\n#if __VERSION__ == 100\n    #define round(x) floor((x) + 0.5)\n#endif\n\nfloat intDiv(const in float a, const in float b) { return float(int(a) / int(b)); }\nvec2 ivec2Div(const in vec2 a, const in vec2 b) { return vec2(ivec2(a) / ivec2(b)); }\nfloat intMod(const in float a, const in float b) { return a - b * float(int(a) / int(b)); }\nint imod(const in int a, const in int b) { return a - b * (a / b); }\n\nfloat pow2(const in float x) { return x * x; }\n\nvec3 packIntToRGB(in float value) {\n    value = clamp(round(value), 0.0, 16777216.0 - 1.0) + 1.0;\n    vec3 c = vec3(0.0);\n    c.b = mod(value, 256.0);\n    value = floor(value / 256.0);\n    c.g = mod(value, 256.0);\n    value = floor(value / 256.0);\n    c.r = mod(value, 256.0);\n    return c / 255.0;\n}\nfloat unpackRGBToInt(const in vec3 rgb) {\n    return (floor(rgb.r * 255.0 + 0.5) * 256.0 * 256.0 + floor(rgb.g * 255.0 + 0.5) * 256.0 + floor(rgb.b * 255.0 + 0.5)) - 1.0;\n}\n\nvec2 packUnitIntervalToRG(const in float v) {\n    vec2 enc;\n    enc.xy = vec2(fract(v * 256.0), v);\n    enc.y -= enc.x * (1.0 / 256.0);\n    enc.xy *=  256.0 / 255.0;\n\n    return enc;\n}\n\nfloat unpackRGToUnitInterval(const in vec2 enc) {\n    return dot(enc, vec2(255.0 / (256.0 * 256.0), 255.0 / 256.0));\n}\n\nvec3 screenSpaceToViewSpace(const in vec3 ssPos, const in mat4 invProjection) {\n    vec4 p = vec4(ssPos * 2.0 - 1.0, 1.0);\n    p = invProjection * p;\n    return p.xyz / p.w;\n}\n\nconst float PackUpscale = 256.0 / 255.0; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255.0 / 256.0; // 0..1 -> fraction (excluding 1)\nconst vec3 PackFactors = vec3(256.0 * 256.0 * 256.0, 256.0 * 256.0,  256.0);\nconst vec4 UnpackFactors = UnpackDownscale / vec4(PackFactors, 1.0);\nconst float ShiftRight8 = 1.0 / 256.0;\n\nvec4 packDepthToRGBA(const in float v) {\n    vec4 r = vec4(fract(v * PackFactors), v);\n    r.yzw -= r.xyz * ShiftRight8; // tidy overflow\n    return r * PackUpscale;\n}\nfloat unpackRGBAToDepth(const in vec4 v) {\n    return dot(v, UnpackFactors);\n}\n\nvec4 sRGBToLinear(const in vec4 c) {\n    return vec4(mix(pow(c.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), c.rgb * 0.0773993808, vec3(lessThanEqual(c.rgb, vec3(0.04045)))), c.a);\n}\nvec4 linearTosRGB(const in vec4 c) {\n    return vec4(mix(pow(c.rgb, vec3(0.41666)) * 1.055 - vec3(0.055), c.rgb * 12.92, vec3(lessThanEqual(c.rgb, vec3(0.0031308)))), c.a);\n}\n\nfloat luminance(vec3 c) {\n    // https://www.w3.org/TR/WCAG21/#dfn-relative-luminance\n    const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n    return dot(c, W);\n}\n\nfloat linearizeDepth(const in float depth, const in float near, const in float far) {\n    return (2.0 * near) / (far + near - depth * (far - near));\n}\n\nfloat perspectiveDepthToViewZ(const in float invClipZ, const in float near, const in float far) {\n    return (near * far) / ((far - near) * invClipZ - far);\n}\n\nfloat orthographicDepthToViewZ(const in float linearClipZ, const in float near, const in float far) {\n    return linearClipZ * (near - far) - near;\n}\n\nfloat depthToViewZ(const in float isOrtho, const in float linearClipZ, const in float near, const in float far) {\n    return isOrtho == 1.0 ? orthographicDepthToViewZ(linearClipZ, near, far) : perspectiveDepthToViewZ(linearClipZ, near, far);\n}\n\n#if __VERSION__ == 100\n    // transpose\n\n    float transpose(const in float m) {\n        return m;\n    }\n\n    mat2 transpose2(const in mat2 m) {\n        return mat2(\n            m[0][0], m[1][0],\n            m[0][1], m[1][1]\n        );\n    }\n\n    mat3 transpose3(const in mat3 m) {\n        return mat3(\n            m[0][0], m[1][0], m[2][0],\n            m[0][1], m[1][1], m[2][1],\n            m[0][2], m[1][2], m[2][2]\n        );\n    }\n\n    mat4 transpose4(const in mat4 m) {\n        return mat4(\n            m[0][0], m[1][0], m[2][0], m[3][0],\n            m[0][1], m[1][1], m[2][1], m[3][1],\n            m[0][2], m[1][2], m[2][2], m[3][2],\n            m[0][3], m[1][3], m[2][3], m[3][3]\n        );\n    }\n\n    // inverse\n\n    float inverse(const in float m) {\n        return 1.0 / m;\n    }\n\n    mat2 inverse2(const in mat2 m) {\n        return mat2(m[1][1],-m[0][1],\n                -m[1][0], m[0][0]) / (m[0][0]*m[1][1] - m[0][1]*m[1][0]);\n    }\n\n    mat3 inverse3(const in mat3 m) {\n        float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n        float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n        float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n        float b01 = a22 * a11 - a12 * a21;\n        float b11 = -a22 * a10 + a12 * a20;\n        float b21 = a21 * a10 - a11 * a20;\n\n        float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n        return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n                    b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n                    b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n    }\n\n    mat4 inverse4(const in mat4 m) {\n        float\n            a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n            a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n            a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n            a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n            b00 = a00 * a11 - a01 * a10,\n            b01 = a00 * a12 - a02 * a10,\n            b02 = a00 * a13 - a03 * a10,\n            b03 = a01 * a12 - a02 * a11,\n            b04 = a01 * a13 - a03 * a11,\n            b05 = a02 * a13 - a03 * a12,\n            b06 = a20 * a31 - a21 * a30,\n            b07 = a20 * a32 - a22 * a30,\n            b08 = a20 * a33 - a23 * a30,\n            b09 = a21 * a32 - a22 * a31,\n            b10 = a21 * a33 - a23 * a31,\n            b11 = a22 * a33 - a23 * a32,\n\n            det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n        return mat4(\n            a11 * b11 - a12 * b10 + a13 * b09,\n            a02 * b10 - a01 * b11 - a03 * b09,\n            a31 * b05 - a32 * b04 + a33 * b03,\n            a22 * b04 - a21 * b05 - a23 * b03,\n            a12 * b08 - a10 * b11 - a13 * b07,\n            a00 * b11 - a02 * b08 + a03 * b07,\n            a32 * b02 - a30 * b05 - a33 * b01,\n            a20 * b05 - a22 * b02 + a23 * b01,\n            a10 * b10 - a11 * b08 + a13 * b06,\n            a01 * b08 - a00 * b10 - a03 * b06,\n            a30 * b04 - a31 * b02 + a33 * b00,\n            a21 * b02 - a20 * b04 - a23 * b00,\n            a11 * b07 - a10 * b09 - a12 * b06,\n            a00 * b09 - a01 * b07 + a02 * b06,\n            a31 * b01 - a30 * b03 - a32 * b00,\n            a20 * b03 - a21 * b01 + a22 * b00) / det;\n    }\n\n    #define isNaN(x) ((x) != (x))\n    #define isInf(x) ((x) == (x) + 1.0)\n#else\n    #define transpose2(m) transpose(m)\n    #define transpose3(m) transpose(m)\n    #define transpose4(m) transpose(m)\n\n    #define inverse2(m) inverse(m)\n    #define inverse3(m) inverse(m)\n    #define inverse4(m) inverse(m)\n\n    #define isNaN isnan\n    #define isInf isinf\n#endif\n",fade_lod:"\nif (uLod.w == 0.0 && (uLod.x != 0.0 || uLod.y != 0.0)) {\n    float d = dot(uCameraPlane.xyz, vModelPosition) + uCameraPlane.w;\n    float ta = min(\n        smoothstep(uLod.x, uLod.x + uLod.z, d),\n        1.0 - smoothstep(uLod.y - uLod.z, uLod.y, d)\n    );\n\n    #if defined(dRenderVariant_color)\n        float at = 0.0;\n\n        // shift by view-offset during multi-sample rendering to allow for blending\n        vec2 coord = gl_FragCoord.xy + uViewOffset * 0.25;\n\n        const mat4 thresholdMatrix = mat4(\n            1.0 / 17.0,  9.0 / 17.0,  3.0 / 17.0, 11.0 / 17.0,\n            13.0 / 17.0,  5.0 / 17.0, 15.0 / 17.0,  7.0 / 17.0,\n            4.0 / 17.0, 12.0 / 17.0,  2.0 / 17.0, 10.0 / 17.0,\n            16.0 / 17.0,  8.0 / 17.0, 14.0 / 17.0,  6.0 / 17.0\n        );\n        int ci = int(intMod(coord.x, 4.0));\n        int ri = int(intMod(coord.y, 4.0));\n        #if __VERSION__ == 100\n            vec4 i = vec4(float(ci * 4 + ri));\n            vec4 v = thresholdMatrix[0] * vec4(equal(i, vec4(0.0, 1.0, 2.0, 3.0))) +\n                thresholdMatrix[1] * vec4(equal(i, vec4(4.0, 5.0, 6.0, 7.0))) +\n                thresholdMatrix[2] * vec4(equal(i, vec4(8.0, 9.0, 10.0, 11.0))) +\n                thresholdMatrix[3] * vec4(equal(i, vec4(12.0, 13.0, 14.0, 15.0)));\n            at = v.x + v.y + v.z + v.w;\n        #else\n            at = thresholdMatrix[ci][ri];\n        #endif\n\n        if (ta < 0.99 && (ta < 0.01 || ta < at)) {\n            discard;\n        }\n    #else\n        if (ta < uPickingAlphaThreshold) {\n            discard;\n        }\n    #endif\n}\n",float_to_rgba:"\n    // floatToRgba adapted from https://github.com/equinor/glsl-float-to-rgba\n    // MIT License, Copyright (c) 2020 Equinor\n\n    float shiftRight (float v, float amt) {\n    v = floor(v) + 0.5;\n    return floor(v / exp2(amt));\n    }\n    float shiftLeft (float v, float amt) {\n        return floor(v * exp2(amt) + 0.5);\n    }\n    float maskLast (float v, float bits) {\n        return mod(v, shiftLeft(1.0, bits));\n    }\n    float extractBits (float num, float from, float to) {\n        from = floor(from + 0.5); to = floor(to + 0.5);\n        return maskLast(shiftRight(num, from), to - from);\n    }\n\n    vec4 floatToRgba(float texelFloat, bool littleEndian) {\n        if (texelFloat == 0.0) return vec4(0.0, 0.0, 0.0, 0.0);\n        float sign = texelFloat > 0.0 ? 0.0 : 1.0;\n        texelFloat = abs(texelFloat);\n        float exponent = floor(log2(texelFloat));\n        float biased_exponent = exponent + 127.0;\n        float fraction = ((texelFloat / exp2(exponent)) - 1.0) * 8388608.0;\n        float t = biased_exponent / 2.0;\n        float last_bit_of_biased_exponent = fract(t) * 2.0;\n        float remaining_bits_of_biased_exponent = floor(t);\n        float byte4 = extractBits(fraction, 0.0, 8.0) / 255.0;\n        float byte3 = extractBits(fraction, 8.0, 16.0) / 255.0;\n        float byte2 = (last_bit_of_biased_exponent * 128.0 + extractBits(fraction, 16.0, 23.0)) / 255.0;\n        float byte1 = (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0;\n        return (\n            littleEndian\n                ? vec4(byte4, byte3, byte2, byte1)\n                : vec4(byte1, byte2, byte3, byte4)\n        );\n    }\n",light_frag_params:"\n#if dLightCount != 0\n    uniform vec3 uLightDirection[dLightCount];\n    uniform vec3 uLightColor[dLightCount];\n#endif\nuniform vec3 uAmbientColor;\n\nstruct PhysicalMaterial {\n    vec3 diffuseColor;\n    float roughness;\n    vec3 specularColor;\n    float specularF90;\n};\n\nstruct IncidentLight {\n    vec3 color;\n    vec3 direction;\n};\n\nstruct ReflectedLight {\n    vec3 directDiffuse;\n    vec3 directSpecular;\n    vec3 indirectDiffuse;\n    vec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n    vec3 position;\n    vec3 normal;\n    vec3 viewDir;\n};\n\nvec3 BRDF_Lambert(const in vec3 diffuseColor) {\n    return RECIPROCAL_PI * diffuseColor;\n}\n\nvec3 F_Schlick(const in vec3 f0, const in float f90, const in float dotVH) {\n    // Original approximation by Christophe Schlick '94\n    // float fresnel = pow( 1.0 - dotVH, 5.0 );\n    // Optimized variant (presented by Epic at SIGGRAPH '13)\n    // https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n    float fresnel = exp2((-5.55473 * dotVH - 6.98316) * dotVH);\n    return f0 * (1.0 - fresnel) + (f90 * fresnel);\n}\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat V_GGX_SmithCorrelated(const in float alpha, const in float dotNL, const in float dotNV) {\n    float a2 = pow2(alpha);\n    float gv = dotNL * sqrt(a2 + (1.0 - a2) * pow2(dotNV));\n    float gl = dotNV * sqrt(a2 + (1.0 - a2) * pow2(dotNL));\n    return 0.5 / max(gv + gl, EPSILON);\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disney\u2019s reparameterization\nfloat D_GGX(const in float alpha, const in float dotNH) {\n    float a2 = pow2(alpha);\n    float denom = pow2(dotNH) * (a2 - 1.0) + 1.0; // avoid alpha = 0 with dotNH = 1\n    return RECIPROCAL_PI * a2 / pow2(denom);\n}\n\n// GGX Distribution, Schlick Fresnel, GGX_SmithCorrelated Visibility\nvec3 BRDF_GGX(const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness) {\n    float alpha = pow2(roughness); // UE4's roughness\n    vec3 halfDir = normalize( lightDir + viewDir);\n    float dotNL = saturate(dot(normal, lightDir));\n    float dotNV = saturate(dot(normal, viewDir));\n    float dotNH = saturate(dot(normal, halfDir));\n    float dotVH = saturate(dot(viewDir, halfDir));\n    vec3 F = F_Schlick(f0, f90, dotVH);\n    float V = V_GGX_SmithCorrelated(alpha, dotNL, dotNV);\n    float D = D_GGX(alpha, dotNH);\n    return F * (V * D);\n}\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via 'environmentBRDF' from \"Physically Based Shading on Mobile\"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile\nvec2 DFGApprox(const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n    float dotNV = saturate(dot(normal, viewDir));\n    const vec4 c0 = vec4(-1, -0.0275, -0.572, 0.022);\n    const vec4 c1 = vec4(1, 0.0425, 1.04, -0.04);\n    vec4 r = roughness * c0 + c1;\n    float a004 = min(r.x * r.x, exp2(-9.28 * dotNV)) * r.x + r.y;\n    vec2 fab = vec2(-1.04, 1.04) * a004 + r.zw;\n    return fab;\n}\n\n// Fdez-Ag\xfcera's \"Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting\"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid computeMultiscattering(const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter) {\n    vec2 fab = DFGApprox(normal, viewDir, roughness);\n    vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n    float Ess = fab.x + fab.y;\n    float Ems = 1.0 - Ess;\n    vec3 Favg = specularColor + (1.0 - specularColor) * 0.047619; // 1/21\n    vec3 Fms = FssEss * Favg / (1.0 - Ems * Favg);\n    singleScatter += FssEss;\n    multiScatter += Fms * Ems;\n}\n\nvoid RE_Direct_Physical(const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n    float dotNL = saturate(dot(geometry.normal, directLight.direction));\n    vec3 irradiance = dotNL * directLight.color;\n    reflectedLight.directSpecular += irradiance * BRDF_GGX(directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness);\n    reflectedLight.directDiffuse += irradiance * BRDF_Lambert(material.diffuseColor);\n}\n\nvoid RE_IndirectDiffuse_Physical(const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert(material.diffuseColor);\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n    // Both indirect specular and indirect diffuse light accumulate here\n    vec3 singleScattering = vec3(0.0);\n    vec3 multiScattering = vec3(0.0);\n    vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n    computeMultiscattering(geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering);\n    vec3 diffuse = material.diffuseColor * (1.0 - ( singleScattering + multiScattering));\n    reflectedLight.indirectSpecular += radiance * singleScattering;\n    reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n    reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n",matrix_scale:"\nfloat matrixScale(in mat4 m){\n    vec4 r = m[0];\n    return sqrt(r[0] * r[0] + r[1] * r[1] + r[2] * r[2]);\n}\n",normal_frag_params:"\nvarying vec3 vNormal;\n",read_from_texture:"\nvec4 readFromTexture(const in sampler2D tex, const in float i, const in vec2 dim) {\n    float x = intMod(i, dim.x);\n    float y = floor(intDiv(i, dim.x));\n    vec2 uv = (vec2(x, y) + 0.5) / dim;\n    return texture2D(tex, uv);\n}\n\nvec4 readFromTexture(const in sampler2D tex, const in int i, const in vec2 dim) {\n    int x = imod(i, int(dim.x));\n    int y = i / int(dim.x);\n    vec2 uv = (vec2(x, y) + 0.5) / dim;\n    return texture2D(tex, uv);\n}\n",rgba_to_float:'\n    // rgbaToFloat adapted from https://github.com/ihmeuw/glsl-rgba-to-float\n    // BSD 3-Clause License\n    //\n    // Copyright (c) 2019, Institute for Health Metrics and Evaluation All rights reserved.\n    // Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n    //  - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n    //  - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n    //  - Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n    //\n    // THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n    // INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n    // IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY,\n    // OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n    // OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n    // OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED\n    // OF THE POSSIBILITY OF SUCH DAMAGE.\n\n    ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n            littleEndian\n                ? bytes.abgr\n                : bytes\n        );\n    }\n\n    // Break the four bytes down into an array of 32 bits.\n    void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n            float acc = float(bytes[channelIndex]);\n            for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n                float powerOfTwo = exp2(float(indexInByte));\n                bool bit = acc >= powerOfTwo;\n                bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n                acc = mod(acc, powerOfTwo);\n            }\n        }\n    }\n\n    // Compute the exponent of the 32-bit float.\n    float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n            acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n    }\n\n    // Compute the mantissa of the 32-bit float.\n    float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n            acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n    }\n\n    // Parse the float from its 32 bits.\n    float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n    }\n\n    float rgbaToFloat(vec4 texelRGBA, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(texelRGBA, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n    }\n',size_vert_params:"\n#if defined(dSizeType_uniform)\n    uniform float uSize;\n#elif defined(dSizeType_attribute)\n    attribute float aSize;\n#elif defined(dSizeType_instance) || defined(dSizeType_group) || defined(dSizeType_groupInstance)\n    uniform vec2 uSizeTexDim;\n    uniform sampler2D tSize;\n#endif\n\nuniform float uSizeFactor;\n",texture3d_from_1d_trilinear:"\nvec4 texture3dFrom1dTrilinear(const in sampler2D tex, const in vec3 pos, const in vec3 gridDim, const in vec2 texDim, const in float offset) {\n    float gdYZ = gridDim.z * gridDim.y;\n    float gdZ = gridDim.z;\n    vec3 p0 = floor(pos * gridDim);\n    vec3 p1 = ceil(pos * gridDim);\n    vec3 pd = (pos * gridDim - p0) / (p1 - p0);\n    vec4 s000 = readFromTexture(tex, offset + p0.z + p0.y * gdZ + p0.x * gdYZ, texDim);\n    vec4 s100 = readFromTexture(tex, offset + p0.z + p0.y * gdZ + p1.x * gdYZ, texDim);\n    vec4 s001 = readFromTexture(tex, offset + p1.z + p0.y * gdZ + p0.x * gdYZ, texDim);\n    vec4 s101 = readFromTexture(tex, offset + p1.z + p0.y * gdZ + p1.x * gdYZ, texDim);\n    vec4 s010 = readFromTexture(tex, offset + p0.z + p1.y * gdZ + p0.x * gdYZ, texDim);\n    vec4 s110 = readFromTexture(tex, offset + p0.z + p1.y * gdZ + p1.x * gdYZ, texDim);\n    vec4 s011 = readFromTexture(tex, offset + p1.z + p1.y * gdZ + p0.x * gdYZ, texDim);\n    vec4 s111 = readFromTexture(tex, offset + p1.z + p1.y * gdZ + p1.x * gdYZ, texDim);\n    vec4 s00 = mix(s000, s100, pd.x);\n    vec4 s01 = mix(s001, s101, pd.x);\n    vec4 s10 = mix(s010, s110, pd.x);\n    vec4 s11 = mix(s011, s111, pd.x);\n    vec4 s0 = mix(s00, s10, pd.y);\n    vec4 s1 = mix(s01, s11, pd.y);\n    return mix(s0, s1, pd.z);\n}\n",texture3d_from_2d_linear:"\nvec4 texture3dFrom2dLinear(sampler2D tex, vec3 pos, vec3 gridDim, vec2 texDim) {\n    float zSlice0 = floor(pos.z * gridDim.z);\n    float column0 = intMod(zSlice0 * gridDim.x, texDim.x) / gridDim.x;\n    float row0 = floor(intDiv(zSlice0 * gridDim.x, texDim.x));\n    vec2 coord0 = (vec2(column0 * gridDim.x, row0 * gridDim.y) + (pos.xy * gridDim.xy)) / texDim;\n    vec4 color0 = texture2D(tex, coord0);\n\n    float zSlice1 = zSlice0 + 1.0;\n    float column1 = intMod(zSlice1 * gridDim.x, texDim.x) / gridDim.x;\n    float row1 = floor(intDiv(zSlice1 * gridDim.x, texDim.x));\n    vec2 coord1 = (vec2(column1 * gridDim.x, row1 * gridDim.y) + (pos.xy * gridDim.xy)) / texDim;\n    vec4 color1 = texture2D(tex, coord1);\n\n    float delta0 = abs((pos.z * gridDim.z) - zSlice0);\n    return mix(color0, color1, delta0);\n}\n",texture3d_from_2d_nearest:"\nvec4 texture3dFrom2dNearest(sampler2D tex, vec3 pos, vec3 gridDim, vec2 texDim) {\n    float zSlice = floor(pos.z * gridDim.z + 0.5); // round to nearest z-slice\n    float column = intMod(zSlice * gridDim.x, texDim.x) / gridDim.x;\n    float row = floor(intDiv(zSlice * gridDim.x, texDim.x));\n    vec2 coord = (vec2(column * gridDim.x, row * gridDim.y) + (pos.xy * gridDim.xy)) / texDim;\n    return texture2D(tex, coord);\n}\n",wboit_write:"\n#if defined(dRenderVariant_colorWboit)\n    if (uRenderMask == MaskOpaque) {\n        if (preFogAlpha < 1.0) {\n            discard;\n        }\n    } else if (uRenderMask == MaskTransparent) {\n        if (preFogAlpha != 1.0 && fragmentDepth < getDepth(gl_FragCoord.xy / uDrawingBufferSize)) {\n            #ifdef dTransparentBackfaces_off\n                if (interior) discard;\n            #endif\n            float alpha = gl_FragColor.a;\n            float wboitWeight = alpha * clamp(pow(1.0 - fragmentDepth, 2.0), 0.01, 1.0);\n            gl_FragColor = vec4(gl_FragColor.rgb * alpha * wboitWeight, alpha);\n            // extra alpha is to handle pre-multiplied alpha\n            #ifndef dGeometryType_directVolume\n                gl_FragData[1] = vec4((uTransparentBackground ? alpha : 1.0) * alpha * wboitWeight);\n            #else\n                gl_FragData[1] = vec4(alpha * alpha * wboitWeight);\n            #endif\n        } else {\n            discard;\n        }\n    }\n#endif\n",dpoit_write:"\n#if defined(dRenderVariant_colorDpoit)\n    if (uRenderMask == MaskOpaque) {\n        if (preFogAlpha < 1.0) {\n            discard;\n        }\n    } else if (uRenderMask == MaskTransparent) {\n        vec2 coords = gl_FragCoord.xy / uDrawingBufferSize;\n        if (preFogAlpha != 1.0 && fragmentDepth < getDepth(coords)) {\n            #ifdef dTransparentBackfaces_off\n                if (interior) discard;\n            #endif\n\n            // adapted from https://github.com/tsherif/webgl2examples\n            // The MIT License, Copyright 2017 Tarek Sherif, Shuai Shao\n\n            vec2 lastDepth = texture2D(tDpoitDepth, coords).rg;\n            vec4 lastFrontColor = texture2D(tDpoitFrontColor, coords);\n\n            vec4 fragColor = gl_FragColor;\n\n            // depth value always increases\n            // so we can use MAX blend equation\n            gl_FragData[2].rg = vec2(-MAX_DPOIT_DEPTH);\n\n            // front color always increases\n            // so we can use MAX blend equation\n            gl_FragColor = lastFrontColor;\n\n            // back color is separately blend afterwards each pass\n            gl_FragData[1] = vec4(0.0);\n\n            float nearestDepth = -lastDepth.x;\n            float furthestDepth = lastDepth.y;\n            float alphaMultiplier = 1.0 - lastFrontColor.a;\n\n            if (fragmentDepth < nearestDepth || fragmentDepth > furthestDepth) {\n                // Skip this depth since it's been peeled.\n                return;\n            }\n\n            if (fragmentDepth > nearestDepth && fragmentDepth < furthestDepth) {\n                // This needs to be peeled.\n                // The ones remaining after MAX blended for\n                // all need-to-peel will be peeled next pass.\n                gl_FragData[2].rg = vec2(-fragmentDepth, fragmentDepth);\n                return;\n            }\n\n            // write to back and front color buffer\n            if (fragmentDepth == nearestDepth) {\n                gl_FragColor.rgb += fragColor.rgb * fragColor.a * alphaMultiplier;\n                gl_FragColor.a = 1.0 - alphaMultiplier * (1.0 - fragColor.a);\n            } else {\n                gl_FragData[1] += fragColor;\n            }\n\n        } else {\n            discard;\n        }\n    }\n#endif\n"},RV=/^(?!\/\/)\s*#include\s+(\S+)/gm,PV=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*\+\+i\s*\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g,OV=/[ \t]*\/\/.*\n/g,FV=/[ \t]*\/\*[\s\S]*?\*\//g,NV=/\n{2,}/g;function LV(e){return e.replace(RV,((e,t)=>{const n=MV[t];if(!n)throw new Error(`empty chunk, '${t}'`);return n})).trim().replace(OV,"\n").replace(FV,"\n").replace(NV,"\n")}function UV(e,t,n,r){let o="";for(let i=parseInt(t);i<parseInt(n);++i)o+=r.replace(/\[\s*i\s*\]/g,`[${i}]`).replace(/UNROLLED_LOOP_INDEX/g,`${i}`);return o}function GV(e,t){return function(e){return e.replace(PV,UV)}(function(e,t){return t.dLightCount&&(e=e.replace(/dLightCount/g,`${t.dLightCount.ref.value}`)),t.dClipObjectCount&&(e=e.replace(/dClipObjectCount/g,`${t.dClipObjectCount.ref.value}`)),e}(e,t))}function jV(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5?arguments[5]:void 0;return{id:QV(),name:e,vert:LV(t),frag:LV(n),extensions:r,outTypes:o,ignoreDefine:i}}function zV(e,t,n){var r;if(!t.startsWith("color")){const n=["dColorType","dUsePalette","dLightCount","dXrayShaded","dOverpaintType","dOverpaint","dSubstanceType","dSubstance","dColorMarker","dCelShaded"];return"emissive"!==t&&n.push("dEmissiveType","dEmissive"),n.includes(e)}return"dLightCount"===e&&!!(null===(r=n.dIgnoreLight)||void 0===r?void 0:r.ref.value)}function HV(e,t,n){return"dLightCount"===e||zV(e,t,n)}const VV=jV("points","\nprecision highp float;\nprecision highp int;\n\n#include common\n#include read_from_texture\n#include common_vert_params\n#include color_vert_params\n#include size_vert_params\n#include common_clip\n\nuniform float uPixelRatio;\nuniform vec4 uViewport;\n\nattribute vec3 aPosition;\nattribute mat4 aTransform;\nattribute float aInstance;\nattribute float aGroup;\n\nvoid main(){\n    #include assign_group\n    #include assign_color_varying\n    #include assign_marker_varying\n    #include assign_clipping_varying\n    #include assign_position\n    #include assign_size\n\n    #ifdef dPointSizeAttenuation\n        gl_PointSize = size * uPixelRatio * ((uViewport.w / 2.0) / -mvPosition.z) * 5.0;\n    #else\n        gl_PointSize = size * uPixelRatio;\n    #endif\n    gl_PointSize = max(1.0, gl_PointSize);\n\n    gl_Position = uProjection * mvPosition;\n\n    #include clip_instance\n}\n","\nprecision highp float;\nprecision highp int;\n\n#include common\n#include common_frag_params\n#include color_frag_params\n#include common_clip\n\nconst vec2 center = vec2(0.5);\nconst float radius = 0.5;\n\nvoid main(){\n    #include fade_lod\n    #include clip_pixel\n\n    float fragmentDepth = gl_FragCoord.z;\n    #include assign_material_color\n\n    #if defined(dPointStyle_circle)\n        float dist = distance(gl_PointCoord, center);\n        if (dist > radius) discard;\n    #elif defined(dPointStyle_fuzzy)\n        float dist = distance(gl_PointCoord, center);\n        float fuzzyAlpha = 1.0 - smoothstep(0.0, radius, dist);\n        if (fuzzyAlpha < 0.0001) discard;\n    #endif\n\n    #if defined(dPointStyle_fuzzy) && defined(dRenderVariant_color)\n        material.a *= fuzzyAlpha;\n    #endif\n\n    #include check_transparency\n\n    #if defined(dRenderVariant_pick)\n        #include check_picking_alpha\n        #ifdef requiredDrawBuffers\n            gl_FragColor = vObject;\n            gl_FragData[1] = vInstance;\n            gl_FragData[2] = vGroup;\n            gl_FragData[3] = packDepthToRGBA(fragmentDepth);\n        #else\n            gl_FragColor = vColor;\n        #endif\n    #elif defined(dRenderVariant_depth)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_marking)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_emissive)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_color)\n        gl_FragColor = material;\n\n        #include apply_marker_color\n        #include apply_fog\n        #include wboit_write\n        #include dpoit_write\n    #endif\n}\n",{drawBuffers:"optional"},{},HV),qV=jV("spheres","\nprecision highp float;\nprecision highp int;\n\n#include common\n#include read_from_texture\n#include common_vert_params\n#include color_vert_params\n#include size_vert_params\n#include common_clip\n\nuniform mat4 uModelView;\nuniform mat4 uInvProjection;\nuniform float uIsOrtho;\n\nuniform vec2 uTexDim;\nuniform sampler2D tPositionGroup;\n\nattribute mat4 aTransform;\nattribute float aInstance;\n\nvarying float vRadius;\nvarying vec3 vPoint;\nvarying vec3 vPointViewPosition;\n\n#include matrix_scale\n\n/**\n * Bounding rectangle of a clipped, perspective-projected 3D Sphere.\n * Michael Mara, Morgan McGuire. 2013\n *\n * Specialization by Arseny Kapoulkine, MIT License Copyright (c) 2018\n * https://github.com/zeux/niagara\n */\nvoid sphereProjection(const in vec3 p, const in float r, const in vec2 mapping) {\n    vec3 pr = p * r;\n    float pzr2 = p.z * p.z - r * r;\n\n    float vx = sqrt(p.x * p.x + pzr2);\n    float minx = ((vx * p.x - pr.z) / (vx * p.z + pr.x)) * uProjection[0][0];\n    float maxx = ((vx * p.x + pr.z) / (vx * p.z - pr.x)) * uProjection[0][0];\n\n    float vy = sqrt(p.y * p.y + pzr2);\n    float miny = ((vy * p.y - pr.z) / (vy * p.z + pr.y)) * uProjection[1][1];\n    float maxy = ((vy * p.y + pr.z) / (vy * p.z - pr.y)) * uProjection[1][1];\n\n    gl_Position.xy = vec2(maxx + minx, maxy + miny) * -0.5;\n    gl_Position.xy -= mapping * vec2(maxx - minx, maxy - miny) * 0.5;\n    gl_Position.xy *= gl_Position.w;\n}\n\nvoid main(void){\n    vec2 mapping = vec2(1.0, 1.0); // vertices 2 and 5\n    #if __VERSION__ == 100\n        int m = imod(VertexID, 6);\n    #else\n        int m = VertexID % 6;\n    #endif\n    if (m == 0) {\n        mapping = vec2(-1.0, 1.0);\n    } else if (m == 1 || m == 3) {\n        mapping = vec2(-1.0, -1.0);\n    } else if (m == 4) {\n        mapping = vec2(1.0, -1.0);\n    }\n\n    vec4 positionGroup = readFromTexture(tPositionGroup, VertexID / 6, uTexDim);\n    vec3 position = positionGroup.rgb;\n    float group = positionGroup.a;\n\n    #include assign_color_varying\n    #include assign_marker_varying\n    #include assign_clipping_varying\n    #include assign_size\n\n    vRadius = size * matrixScale(uModelView);\n\n    vec4 position4 = vec4(position, 1.0);\n    vModelPosition = (uModel * aTransform * position4).xyz; // for clipping in frag shader\n\n    float d;\n    if (uLod.w != 0.0 && (uLod.x != 0.0 || uLod.y != 0.0)) {\n        d = dot(uCameraPlane.xyz, vModelPosition) + uCameraPlane.w;\n        float f = min(\n            smoothstep(uLod.x, uLod.x + uLod.z, d),\n            1.0 - smoothstep(uLod.y - uLod.z, uLod.y, d)\n        ) * uLod.w;\n        vRadius *= f;\n    }\n\n    vec4 mvPosition = uModelView * aTransform * position4;\n\n    #ifdef dApproximate\n        vec4 mvCorner = vec4(mvPosition.xyz, 1.0);\n        mvCorner.xy += mapping * vRadius;\n        gl_Position = uProjection * mvCorner;\n    #else\n        if (uIsOrtho == 1.0) {\n            vec4 mvCorner = vec4(mvPosition.xyz, 1.0);\n            mvCorner.xy += mapping * vRadius;\n            gl_Position = uProjection * mvCorner;\n        } else {\n            gl_Position = uProjection * vec4(mvPosition.xyz, 1.0);\n            sphereProjection(mvPosition.xyz, vRadius, mapping);\n        }\n    #endif\n\n    vec4 vPoint4 = uInvProjection * gl_Position;\n    vPoint = vPoint4.xyz / vPoint4.w;\n    vPointViewPosition = -mvPosition.xyz / mvPosition.w;\n\n    if (gl_Position.z < -gl_Position.w) {\n        mvPosition.z -= 2.0 * vRadius; // avoid clipping\n        gl_Position.z = (uProjection * vec4(mvPosition.xyz, 1.0)).z;\n    }\n\n    if (uLod.w != 0.0 && (uLod.x != 0.0 || uLod.y != 0.0)) {\n        if (d < uLod.x || d > uLod.y) {\n            // move out of [ -w, +w ] to 'discard' in vert shader\n            gl_Position.z = 2.0 * gl_Position.w;\n        }\n    }\n\n    #if defined(dClipPrimitive) && !defined(dClipVariant_instance) && dClipObjectCount != 0\n        if (clipTest(vec4(vModelPosition.xyz, 0.0))) {\n            // move out of [ -w, +w ] to 'discard' in vert shader\n            gl_Position.z = 2.0 * gl_Position.w;\n        }\n    #else\n        #include clip_instance\n    #endif\n}\n","\nprecision highp float;\nprecision highp int;\n\n#define bumpEnabled\n\n#include common\n#include common_frag_params\n#include color_frag_params\n#include light_frag_params\n#include common_clip\n\nuniform mat4 uInvView;\nuniform float uAlphaThickness;\n\nvarying float vRadius;\nvarying vec3 vPoint;\nvarying vec3 vPointViewPosition;\n\n#ifdef dSolidInterior\n    const bool solidInterior = true;\n#else\n    const bool solidInterior = false;\n#endif\n\nbool SphereImpostor(out vec3 modelPos, out vec3 cameraPos, out vec3 cameraNormal, out bool interior, out float fragmentDepth){\n    vec3 cameraSpherePos = -vPointViewPosition;\n\n    vec3 rayOrigin = mix(vec3(0.0, 0.0, 0.0), vPoint, uIsOrtho);\n    vec3 rayDirection = mix(normalize(vPoint), vec3(0.0, 0.0, 1.0), uIsOrtho);\n    vec3 cameraSphereDir = mix(cameraSpherePos, rayOrigin - cameraSpherePos, uIsOrtho);\n\n    float B = dot(rayDirection, cameraSphereDir);\n    float det = B * B + vRadius * vRadius - dot(cameraSphereDir, cameraSphereDir);\n\n    if (det < 0.0) return false;\n\n    float sqrtDet = sqrt(det);\n    float posT = mix(B + sqrtDet, B - sqrtDet, uIsOrtho);\n    float negT = mix(B - sqrtDet, B + sqrtDet, uIsOrtho);\n\n    cameraPos = rayDirection * negT + rayOrigin;\n    modelPos = (uInvView * vec4(cameraPos, 1.0)).xyz;\n    fragmentDepth = calcDepth(cameraPos);\n\n    bool objectClipped = false;\n\n    #if !defined(dClipPrimitive) && defined(dClipVariant_pixel) && dClipObjectCount != 0\n        if (clipTest(vec4(modelPos, 0.0))) {\n            objectClipped = true;\n            fragmentDepth = -1.0;\n        }\n    #endif\n\n    if (fragmentDepth > 0.0) {\n        cameraNormal = normalize(cameraPos - cameraSpherePos);\n        interior = false;\n        return true;\n    } else if (uDoubleSided || solidInterior) {\n        cameraPos = rayDirection * posT + rayOrigin;\n        modelPos = (uInvView * vec4(cameraPos, 1.0)).xyz;\n        fragmentDepth = calcDepth(cameraPos);\n        cameraNormal = -normalize(cameraPos - cameraSpherePos);\n        interior = true;\n        if (fragmentDepth > 0.0) {\n            #ifdef dSolidInterior\n                if (!objectClipped) {\n                    fragmentDepth = 0.0 + (0.0000001 / vRadius);\n                    cameraNormal = -mix(normalize(vPoint), vec3(0.0, 0.0, 1.0), uIsOrtho);\n                }\n            #endif\n            return true;\n        }\n    }\n\n    return false;\n}\n\nvoid main(void){\n    vec3 cameraNormal;\n    float fragmentDepth;\n\n    #ifdef dApproximate\n        vec3 pointDir = -vPointViewPosition - vPoint;\n        if (dot(pointDir, pointDir) > vRadius * vRadius) discard;\n        vec3 vViewPosition = -vPointViewPosition;\n        fragmentDepth = gl_FragCoord.z;\n        #if !defined(dIgnoreLight) || defined(dXrayShaded)\n            pointDir.z -= cos(length(pointDir) / vRadius);\n            cameraNormal = -normalize(pointDir / vRadius);\n        #endif\n        interior = false;\n    #else\n        vec3 modelPos;\n        vec3 cameraPos;\n        bool hit = SphereImpostor(modelPos, cameraPos, cameraNormal, interior, fragmentDepth);\n        if (!hit) discard;\n\n        if (fragmentDepth < 0.0) discard;\n        if (fragmentDepth > 1.0) discard;\n\n        gl_FragDepthEXT = fragmentDepth;\n\n        vec3 vModelPosition = modelPos;\n        vec3 vViewPosition = cameraPos;\n    #endif\n\n    #include fade_lod\n    #if !defined(dClipPrimitive) && defined(dClipVariant_pixel) && dClipObjectCount != 0\n        #include clip_pixel\n    #endif\n    #include assign_material_color\n\n    #if defined(dRenderVariant_color)\n        if (uRenderMask == MaskTransparent && uAlphaThickness > 0.0) {\n            material.a *= min(1.0, vRadius / uAlphaThickness);\n        }\n    #endif\n\n    #include check_transparency\n\n    #if defined(dRenderVariant_pick)\n        #include check_picking_alpha\n        #ifdef requiredDrawBuffers\n            gl_FragColor = vObject;\n            gl_FragData[1] = vInstance;\n            gl_FragData[2] = vGroup;\n            gl_FragData[3] = packDepthToRGBA(fragmentDepth);\n        #else\n            gl_FragColor = vColor;\n        #endif\n    #elif defined(dRenderVariant_depth)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_marking)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_emissive)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_color)\n        vec3 normal = -cameraNormal;\n        #include apply_light_color\n\n        #include apply_interior_color\n        #include apply_marker_color\n        #include apply_fog\n        #include wboit_write\n        #include dpoit_write\n    #endif\n}\n",{fragDepth:"required",drawBuffers:"optional"},{},zV),YV=jV("cylinders","\nprecision highp float;\nprecision highp int;\n\n#include common\n#include read_from_texture\n#include common_vert_params\n#include color_vert_params\n#include size_vert_params\n#include common_clip\n\nuniform mat4 uModelView;\n\nattribute mat4 aTransform;\nattribute float aInstance;\nattribute float aGroup;\n\nattribute vec3 aMapping;\nattribute vec3 aStart;\nattribute vec3 aEnd;\nattribute float aScale;\nattribute float aCap;\nattribute float aColorMode;\n\nvarying mat4 vTransform;\nvarying vec3 vStart;\nvarying vec3 vEnd;\nvarying float vSize;\nvarying float vCap;\n\nuniform float uIsOrtho;\nuniform vec3 uCameraDir;\n\nvoid main() {\n    #include assign_group\n    #include assign_color_varying\n    #include assign_marker_varying\n    #include assign_clipping_varying\n    #include assign_size\n\n    mat4 modelTransform = uModel * aTransform;\n\n    vTransform = aTransform;\n    vStart = (modelTransform * vec4(aStart, 1.0)).xyz;\n    vEnd = (modelTransform * vec4(aEnd, 1.0)).xyz;\n    vSize = size * aScale;\n    vCap = aCap;\n\n    vModelPosition = (vStart + vEnd) * 0.5;\n    vec3 camDir = -mix(normalize(vModelPosition - uCameraPosition), uCameraDir, uIsOrtho);\n    vec3 dir = vEnd - vStart;\n    float f = aMapping.x > 0.0 ? 1.0 : 0.0;\n    // ensure cylinder 'dir' is pointing towards the camera\n    if(dot(camDir, dir) < 0.0) {\n        dir = -dir;\n        f = 1.0 - f;\n    }\n\n    vec3 left = cross(camDir, dir);\n    vec3 up = cross(left, dir);\n    left = vSize * normalize(left);\n    up = vSize * normalize(up);\n\n    // move vertex in object-space from center to corner\n    vModelPosition += aMapping.x * dir + aMapping.y * left + aMapping.z * up;\n\n    vec4 mvPosition = uView * vec4(vModelPosition, 1.0);\n    vViewPosition = mvPosition.xyz;\n    gl_Position = uProjection * mvPosition;\n\n    if (gl_Position.z < -gl_Position.w) {\n        mvPosition.z -= 2.0 * (length(vEnd - vStart) + vSize); // avoid clipping\n        gl_Position.z = (uProjection * mvPosition).z;\n    }\n\n    #if defined(dDualColor) && defined(dRenderVariant_color) && (defined(dColorType_group) || defined(dColorType_groupInstance))\n        // dual-color mixing\n        // - for aColorMode between 0 and 1 use aColorMode to interpolate\n        // - for aColorMode == 2 do nothing, i.e., use vColor\n        // - for aColorMode == 3 use position on cylinder axis to interpolate\n        if (aColorMode <= 1.0){\n            vColor.rgb = mix(vColor.rgb, color2.rgb, aColorMode);\n        } else if (aColorMode == 3.0) {\n            vColor.rgb = mix(vColor.rgb, color2.rgb, mix(-0.25, 1.25, f / 1.5));\n        }\n    #endif\n\n    #include clip_instance\n}\n","\nprecision highp float;\nprecision highp int;\n\n#define bumpEnabled\n\nuniform mat4 uView;\n\nvarying mat4 vTransform;\nvarying vec3 vStart;\nvarying vec3 vEnd;\nvarying float vSize;\nvarying float vCap;\n\nuniform vec3 uCameraDir;\nuniform vec3 uCameraPosition;\nuniform mat4 uInvView;\n\n#include common\n#include common_frag_params\n#include color_frag_params\n#include light_frag_params\n#include common_clip\n\n#ifdef dSolidInterior\n    const bool solidInterior = true;\n#else\n    const bool solidInterior = false;\n#endif\n\n// adapted from https://www.shadertoy.com/view/4lcSRn\n// The MIT License, Copyright 2016 Inigo Quilez\nbool CylinderImpostor(\n    in vec3 rayOrigin, in vec3 rayDir,\n    in vec3 start, in vec3 end, in float radius,\n    out vec3 cameraNormal, out bool interior,\n    out vec3 modelPosition, out vec3 viewPosition, out float fragmentDepth\n){\n    vec3 ba = end - start;\n    vec3 oc = rayOrigin - start;\n\n    float baba = dot(ba, ba);\n    float bard = dot(ba, rayDir);\n    float baoc = dot(ba, oc);\n\n    float k2 = baba - bard * bard;\n    float k1 = baba * dot(oc, rayDir) - baoc * bard;\n    float k0 = baba * dot(oc, oc) - baoc * baoc - radius * radius * baba;\n\n    float h = k1 * k1 - k2 * k0;\n    if (h < 0.0) return false;\n\n    bool topCap = (vCap > 0.9 && vCap < 1.1) || vCap >= 2.9;\n    bool bottomCap = (vCap > 1.9 && vCap < 2.1) || vCap >= 2.9;\n\n    #ifdef dSolidInterior\n        bool topInterior = !topCap;\n        bool bottomInterior = !bottomCap;\n        topCap = true;\n        bottomCap = true;\n    #else\n        bool topInterior = false;\n        bool bottomInterior = false;\n    #endif\n\n    bool clipped = false;\n    bool objectClipped = false;\n\n    // body outside\n    h = sqrt(h);\n    float t = (-k1 - h) / k2;\n    float y = baoc + t * bard;\n    if (y > 0.0 && y < baba) {\n        interior = false;\n        cameraNormal = (oc + t * rayDir - ba * y / baba) / radius;\n        modelPosition = rayOrigin + t * rayDir;\n        viewPosition = (uView * vec4(modelPosition, 1.0)).xyz;\n        fragmentDepth = calcDepth(viewPosition);\n        #if defined(dClipVariant_pixel) && dClipObjectCount != 0\n            if (clipTest(vec4(modelPosition, 0.0))) {\n                objectClipped = true;\n                fragmentDepth = -1.0;\n                #ifdef dSolidInterior\n                    topCap = !topInterior;\n                    bottomCap = !bottomInterior;\n                #endif\n            }\n        #endif\n        if (fragmentDepth > 0.0) return true;\n        clipped = true;\n    }\n\n    if (!clipped) {\n        if (topCap && y < 0.0) {\n            // top cap\n            t = -baoc / bard;\n            if (abs(k1 + k2 * t) < h) {\n                interior = topInterior;\n                cameraNormal = -ba / baba;\n                modelPosition = rayOrigin + t * rayDir;\n                viewPosition = (uView * vec4(modelPosition, 1.0)).xyz;\n                fragmentDepth = calcDepth(viewPosition);\n                #if defined(dClipVariant_pixel) && dClipObjectCount != 0\n                    if (clipTest(vec4(modelPosition, 0.0))) {\n                        objectClipped = true;\n                        fragmentDepth = -1.0;\n                        #ifdef dSolidInterior\n                            topCap = !topInterior;\n                            bottomCap = !bottomInterior;\n                        #endif\n                    }\n                #endif\n                if (fragmentDepth > 0.0) {\n                    #ifdef dSolidInterior\n                        if (interior) cameraNormal = -rayDir;\n                    #endif\n                    #if defined(dClipVariant_pixel) && dClipObjectCount != 0\n                        return true;\n                    #else\n                        return !interior;\n                    #endif\n                }\n            }\n        } else if (bottomCap && y >= 0.0) {\n            // bottom cap\n            t = (baba - baoc) / bard;\n            if (abs(k1 + k2 * t) < h) {\n                interior = bottomInterior;\n                cameraNormal = ba / baba;\n                modelPosition = rayOrigin + t * rayDir;\n                viewPosition = (uView * vec4(modelPosition, 1.0)).xyz;\n                fragmentDepth = calcDepth(viewPosition);\n                #if defined(dClipVariant_pixel) && dClipObjectCount != 0\n                    if (clipTest(vec4(modelPosition, 0.0))) {\n                        objectClipped = true;\n                        fragmentDepth = -1.0;\n                        #ifdef dSolidInterior\n                            topCap = !topInterior;\n                            bottomCap = !bottomInterior;\n                        #endif\n                    }\n                #endif\n                if (fragmentDepth > 0.0) {\n                    #ifdef dSolidInterior\n                        if (interior) cameraNormal = -rayDir;\n                    #endif\n                    #if defined(dClipVariant_pixel) && dClipObjectCount != 0\n                        return true;\n                    #else\n                        return !interior;\n                    #endif\n                }\n            }\n        }\n    }\n\n    if (uDoubleSided || solidInterior) {\n        // body inside\n        h = -h;\n        t = (-k1 - h) / k2;\n        y = baoc + t * bard;\n        if (y > 0.0 && y < baba) {\n            interior = true;\n            cameraNormal = -(oc + t * rayDir - ba * y / baba) / radius;\n            modelPosition = rayOrigin + t * rayDir;\n            viewPosition = (uView * vec4(modelPosition, 1.0)).xyz;\n            fragmentDepth = calcDepth(viewPosition);\n            if (fragmentDepth > 0.0) {\n                #ifdef dSolidInterior\n                    if (!objectClipped) {\n                        fragmentDepth = 0.0 + (0.0000002 / vSize);\n                        cameraNormal = -rayDir;\n                    }\n                #endif\n                return true;\n            }\n        }\n\n        if (topCap && y < 0.0) {\n            // top cap\n            t = -baoc / bard;\n            if (abs(k1 + k2 * t) < -h) {\n                interior = true;\n                cameraNormal = ba / baba;\n                modelPosition = rayOrigin + t * rayDir;\n                viewPosition = (uView * vec4(modelPosition, 1.0)).xyz;\n                fragmentDepth = calcDepth(viewPosition);\n                if (fragmentDepth > 0.0) {\n                    #ifdef dSolidInterior\n                        if (!objectClipped) {\n                            fragmentDepth = 0.0 + (0.0000002 / vSize);\n                            cameraNormal = -rayDir;\n                        }\n                    #endif\n                    return true;\n                }\n            }\n        } else if (bottomCap && y >= 0.0) {\n            // bottom cap\n            t = (baba - baoc) / bard;\n            if (abs(k1 + k2 * t) < -h) {\n                interior = true;\n                cameraNormal = -ba / baba;\n                modelPosition = rayOrigin + t * rayDir;\n                viewPosition = (uView * vec4(modelPosition, 1.0)).xyz;\n                fragmentDepth = calcDepth(viewPosition);\n                if (fragmentDepth > 0.0) {\n                    #ifdef dSolidInterior\n                        if (!objectClipped) {\n                            fragmentDepth = 0.0 + (0.0000002 / vSize);\n                            cameraNormal = -rayDir;\n                        }\n                    #endif\n                    return true;\n                }\n            }\n        }\n    }\n\n    return false;\n}\n\nvoid main() {\n    vec3 rayOrigin = vModelPosition;\n    vec3 rayDir = mix(normalize(vModelPosition - uCameraPosition), uCameraDir, uIsOrtho);\n\n    vec3 cameraNormal;\n    vec3 modelPosition;\n    vec3 viewPosition;\n    float fragmentDepth;\n    bool hit = CylinderImpostor(rayOrigin, rayDir, vStart, vEnd, vSize, cameraNormal, interior, modelPosition, viewPosition, fragmentDepth);\n    if (!hit) discard;\n\n    if (fragmentDepth < 0.0) discard;\n    if (fragmentDepth > 1.0) discard;\n\n    gl_FragDepthEXT = fragmentDepth;\n\n    vec3 vViewPosition = viewPosition;\n    vec3 vModelPosition = modelPosition;\n\n    #include fade_lod\n    #include clip_pixel\n    #include assign_material_color\n    #include check_transparency\n\n    #if defined(dRenderVariant_pick)\n        #include check_picking_alpha\n        #ifdef requiredDrawBuffers\n            gl_FragColor = vObject;\n            gl_FragData[1] = vInstance;\n            gl_FragData[2] = vGroup;\n            gl_FragData[3] = packDepthToRGBA(fragmentDepth);\n        #else\n            gl_FragColor = vColor;\n        #endif\n    #elif defined(dRenderVariant_depth)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_marking)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_emissive)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_color)\n        mat3 normalMatrix = transpose3(inverse3(mat3(uView)));\n        vec3 normal = normalize(normalMatrix * -normalize(cameraNormal));\n        #include apply_light_color\n\n        #include apply_interior_color\n        #include apply_marker_color\n        #include apply_fog\n        #include wboit_write\n        #include dpoit_write\n    #endif\n}\n",{fragDepth:"required",drawBuffers:"optional"},{},zV),XV=jV("text","\nprecision highp float;\nprecision highp int;\n\n#include common\n#include read_from_texture\n#include common_vert_params\n#include color_vert_params\n#include size_vert_params\n#include common_clip\n\nuniform mat4 uModelView;\n\nattribute vec3 aPosition;\nattribute vec2 aMapping;\nattribute float aDepth;\nattribute vec2 aTexCoord;\nattribute mat4 aTransform;\nattribute float aInstance;\nattribute float aGroup;\n\nuniform float uOffsetX;\nuniform float uOffsetY;\nuniform float uOffsetZ;\n\nuniform float uIsOrtho;\nuniform float uPixelRatio;\nuniform vec4 uViewport;\n\nvarying vec2 vTexCoord;\n\n#include matrix_scale\n\nvoid main(void){\n    #include assign_group\n    #include assign_color_varying\n    #include assign_marker_varying\n    #include assign_clipping_varying\n    #include assign_size\n\n    vTexCoord = aTexCoord;\n\n    float scale = matrixScale(uModelView);\n\n    float offsetX = uOffsetX * scale;\n    float offsetY = uOffsetY * scale;\n    float offsetZ = (uOffsetZ + aDepth * 0.95) * scale;\n\n    vec4 position4 = vec4(aPosition, 1.0);\n    vec4 mvPosition = uModelView * aTransform * position4;\n\n    vModelPosition = (uModel * aTransform * position4).xyz; // for clipping in frag shader\n\n    // TODO\n    // #ifdef FIXED_SIZE\n    //     if (ortho) {\n    //         scale /= pixelRatio * ((uViewport.w / 2.0) / -uCameraPosition.z) * 0.1;\n    //     } else {\n    //         scale /= pixelRatio * ((uViewport.w / 2.0) / -mvPosition.z) * 0.1;\n    //     }\n    // #endif\n\n    vec4 mvCorner = vec4(mvPosition.xyz, 1.0);\n\n    if (vTexCoord.x == 10.0) { // indicates background plane\n        // move a bit to the back, taking distance to camera into account to avoid z-fighting\n        offsetZ -= 0.001 * distance(uCameraPosition, (uProjection * mvCorner).xyz);\n    }\n\n    mvCorner.xy += aMapping * size * scale;\n    mvCorner.x += offsetX;\n    mvCorner.y += offsetY;\n\n    if (uIsOrtho == 1.0) {\n        mvCorner.z += offsetZ;\n    } else {\n        mvCorner.xyz += normalize(-mvCorner.xyz) * offsetZ;\n    }\n\n    gl_Position = uProjection * mvCorner;\n\n    vViewPosition = -mvCorner.xyz;\n\n    #include clip_instance\n}\n","\nprecision highp float;\nprecision highp int;\n\n#include common\n#include common_frag_params\n#include color_frag_params\n#include common_clip\n\nuniform sampler2D tFont;\n\nuniform vec3 uBorderColor;\nuniform float uBorderWidth;\nuniform vec3 uBackgroundColor;\nuniform float uBackgroundOpacity;\n\nvarying vec2 vTexCoord;\n\nconst float smoothness = 32.0;\nconst float gamma = 2.2;\n\nvoid main2(){\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n}\n\nvoid main(){\n    #include fade_lod\n    #include clip_pixel\n\n    float fragmentDepth = gl_FragCoord.z;\n    #include assign_material_color\n\n    if (vTexCoord.x > 1.0) {\n        #if defined(dRenderVariant_color)\n            material = vec4(uBackgroundColor, uBackgroundOpacity * material.a);\n        #endif\n    } else {\n        // retrieve signed distance\n        float sdf = texture2D(tFont, vTexCoord).a + uBorderWidth;\n\n        // perform adaptive anti-aliasing of the edges\n        float w = clamp(smoothness * (abs(dFdx(vTexCoord.x)) + abs(dFdy(vTexCoord.y))), 0.0, 0.5);\n        float a = clamp(0.0, 1.0, smoothstep(0.5 - w, 0.5 + w, sdf));\n\n        // gamma correction for linear attenuation\n        a = pow(a, 1.0 / gamma);\n\n        if (a < 0.5) discard;\n\n        #if defined(dRenderVariant_color)\n            // add border\n            float t = 0.5 + uBorderWidth;\n            if (uBorderWidth > 0.0 && sdf < t) {\n                material.xyz = mix(uBorderColor, material.xyz, smoothstep(t - w, t, sdf));\n            }\n        #endif\n    }\n\n    #include check_transparency\n\n    #if defined(dRenderVariant_pick)\n        #include check_picking_alpha\n        #ifdef requiredDrawBuffers\n            gl_FragColor = vObject;\n            gl_FragData[1] = vInstance;\n            gl_FragData[2] = vGroup;\n            gl_FragData[3] = packDepthToRGBA(fragmentDepth);\n        #else\n            gl_FragColor = vColor;\n        #endif\n    #elif defined(dRenderVariant_depth)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_marking)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_emissive)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_color)\n        gl_FragColor = material;\n\n        #include apply_marker_color\n        #include apply_fog\n        #include wboit_write\n        #include dpoit_write\n    #endif\n}\n",{drawBuffers:"optional"},{},HV),WV=jV("lines","\nprecision highp float;\nprecision highp int;\n\n#include common\n#include read_from_texture\n#include common_vert_params\n#include color_vert_params\n#include size_vert_params\n#include common_clip\n\nuniform float uPixelRatio;\nuniform vec4 uViewport;\n\nattribute mat4 aTransform;\nattribute float aInstance;\nattribute float aGroup;\n\nattribute vec2 aMapping;\nattribute vec3 aStart;\nattribute vec3 aEnd;\n\nvoid trimSegment(const in vec4 start, inout vec4 end) {\n    // trim end segment so it terminates between the camera plane and the near plane\n    // conservative estimate of the near plane\n    float a = uProjection[2][2];  // 3rd entry in 3rd column\n    float b = uProjection[3][2];  // 3rd entry in 4th column\n    float nearEstimate = -0.5 * b / a;\n    float alpha = (nearEstimate - start.z) / (end.z - start.z);\n    end.xyz = mix(start.xyz, end.xyz, alpha);\n}\n\nvoid main(){\n    float aspect = uViewport.z / uViewport.w;\n\n    #include assign_group\n    #include assign_color_varying\n    #include assign_marker_varying\n    #include assign_clipping_varying\n    #include assign_size\n\n    mat4 modelView = uView * uModel * aTransform;\n\n    // camera space\n    vec4 start = modelView * vec4(aStart, 1.0);\n    vec4 end = modelView * vec4(aEnd, 1.0);\n\n    // assign position\n    vec4 position4 = vec4((aMapping.y < 0.5) ? aStart : aEnd, 1.0);\n    vec4 mvPosition = modelView * position4;\n    vViewPosition = mvPosition.xyz;\n\n    vModelPosition = (uModel * aTransform * position4).xyz; // for clipping in frag shader\n\n    // special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n    // clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n    // but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n    // perhaps there is a more elegant solution -- WestLangley\n    bool perspective = (uProjection[2][3] == -1.0); // 4th entry in the 3rd column\n    if (perspective) {\n        if (start.z < 0.0 && end.z >= 0.0) {\n            trimSegment(start, end);\n        } else if (end.z < 0.0 && start.z >= 0.0) {\n            trimSegment(end, start);\n        }\n    }\n\n    // clip space\n    vec4 clipStart = uProjection * start;\n    vec4 clipEnd = uProjection * end;\n\n    // ndc space\n    vec2 ndcStart = clipStart.xy / clipStart.w;\n    vec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\n    // direction\n    vec2 dir = ndcEnd - ndcStart;\n\n    // account for clip-space aspect ratio\n    dir.x *= aspect;\n    dir = normalize(dir);\n\n    // perpendicular to dir\n    vec2 offset = vec2(dir.y, - dir.x);\n\n    // undo aspect ratio adjustment\n    dir.x /= aspect;\n    offset.x /= aspect;\n\n    // sign flip\n    if (aMapping.x < 0.0) offset *= -1.0;\n\n    // calculate linewidth\n    float linewidth;\n    #ifdef dLineSizeAttenuation\n        linewidth = size * uPixelRatio * ((uViewport.w / 2.0) / -start.z) * 5.0;\n    #else\n        linewidth = size * uPixelRatio;\n    #endif\n    linewidth = max(1.0, linewidth);\n\n    // adjust for linewidth\n    offset *= linewidth;\n\n    // adjust for clip-space to screen-space conversion\n    offset /= uViewport.w;\n\n    // select end\n    vec4 clip = (aMapping.y < 0.5) ? clipStart : clipEnd;\n\n    // back to clip space\n    offset *= clip.w;\n    clip.xy += offset;\n    gl_Position = clip;\n\n    #include clip_instance\n}\n","\nprecision highp float;\nprecision highp int;\n\n#include common\n#include common_frag_params\n#include color_frag_params\n#include common_clip\n\nvoid main(){\n    #include fade_lod\n    #include clip_pixel\n\n    float fragmentDepth = gl_FragCoord.z;\n    #include assign_material_color\n    #include check_transparency\n\n    #if defined(dRenderVariant_pick)\n        #include check_picking_alpha\n        #ifdef requiredDrawBuffers\n            gl_FragColor = vObject;\n            gl_FragData[1] = vInstance;\n            gl_FragData[2] = vGroup;\n            gl_FragData[3] = packDepthToRGBA(fragmentDepth);\n        #else\n            gl_FragColor = vColor;\n        #endif\n    #elif defined(dRenderVariant_depth)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_marking)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_emissive)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_color)\n        gl_FragColor = material;\n\n        #include apply_marker_color\n        #include apply_fog\n        #include wboit_write\n        #include dpoit_write\n    #endif\n}\n",{drawBuffers:"optional"},{},HV),KV=jV("mesh","\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\n#include common\n#include read_from_texture\n#include common_vert_params\n#include color_vert_params\n#include common_clip\n#include texture3d_from_2d_linear\n\n#ifdef dGeometryType_textureMesh\n    uniform vec2 uGeoTexDim;\n    uniform sampler2D tPosition;\n    uniform sampler2D tGroup;\n    uniform sampler2D tNormal;\n#else\n    attribute vec3 aPosition;\n    attribute float aGroup;\n    attribute vec3 aNormal;\n#endif\nattribute mat4 aTransform;\nattribute float aInstance;\n\nvarying vec3 vNormal;\n\nvoid main(){\n    #include assign_group\n    #include assign_marker_varying\n    #include assign_clipping_varying\n    #include assign_position\n    #include assign_color_varying\n    #include clip_instance\n\n    #ifdef dGeometryType_textureMesh\n        vec3 normal = readFromTexture(tNormal, VertexID, uGeoTexDim).xyz;\n    #else\n        vec3 normal = aNormal;\n    #endif\n    mat3 normalMatrix = transpose3(inverse3(mat3(modelView)));\n    vec3 transformedNormal = normalize(normalMatrix * normalize(normal));\n    #if defined(dFlipSided)\n        if (!uDoubleSided) { // TODO checking uDoubleSided should not be required, ASR\n            transformedNormal = -transformedNormal;\n        }\n    #endif\n    vNormal = transformedNormal;\n}\n","\nprecision highp float;\nprecision highp int;\n\n#define bumpEnabled\n\n#include common\n#include common_frag_params\n#include color_frag_params\n#include light_frag_params\n#include normal_frag_params\n#include common_clip\n\nvoid main() {\n    #include fade_lod\n    #include clip_pixel\n\n    // Workaround for buggy gl_FrontFacing (e.g. on some integrated Intel GPUs)\n    vec3 fdx = dFdx(vViewPosition);\n    vec3 fdy = dFdy(vViewPosition);\n    vec3 faceNormal = normalize(cross(fdx,fdy));\n    bool frontFacing = dot(vNormal, faceNormal) > 0.0;\n\n    #if defined(dFlipSided)\n        interior = frontFacing;\n    #else\n        interior = !frontFacing;\n    #endif\n\n    float fragmentDepth = gl_FragCoord.z;\n    #include assign_material_color\n    #include check_transparency\n\n    #if defined(dRenderVariant_pick)\n        #include check_picking_alpha\n        #ifdef requiredDrawBuffers\n            gl_FragColor = vObject;\n            gl_FragData[1] = vInstance;\n            gl_FragData[2] = vGroup;\n            gl_FragData[3] = packDepthToRGBA(fragmentDepth);\n        #else\n            gl_FragColor = vColor;\n        #endif\n    #elif defined(dRenderVariant_depth)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_marking)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_emissive)\n        gl_FragColor = material;\n    #elif defined(dRenderVariant_color)\n        #if defined(dFlatShaded)\n            vec3 normal = -faceNormal;\n        #else\n            vec3 normal = -normalize(vNormal);\n            if (uDoubleSided) normal *= float(frontFacing) * 2.0 - 1.0;\n        #endif\n        #include apply_light_color\n\n        #include apply_interior_color\n        #include apply_marker_color\n        #include apply_fog\n        #include wboit_write\n        #include dpoit_write\n    #endif\n}\n",{drawBuffers:"optional"},{},zV),JV=jV("direct-volume","\nprecision highp float;\n\nattribute vec3 aPosition;\nattribute mat4 aTransform;\nattribute float aInstance;\n\nuniform mat4 uModelView;\nuniform mat4 uProjection;\nuniform vec4 uInvariantBoundingSphere;\n\nvarying vec3 vOrigPos;\nvarying float vInstance;\nvarying vec4 vBoundingSphere;\nvarying mat4 vTransform;\n\nuniform vec3 uBboxSize;\nuniform vec3 uBboxMin;\nuniform vec3 uBboxMax;\nuniform vec3 uGridDim;\nuniform mat4 uTransform;\n\nuniform mat4 uUnitToCartn;\n\nvoid main() {\n    vec4 unitCoord = vec4(aPosition + vec3(0.5), 1.0);\n    vec4 mvPosition = uModelView * aTransform * uUnitToCartn * unitCoord;\n\n    vOrigPos = (aTransform * uUnitToCartn * unitCoord).xyz;\n    vInstance = aInstance;\n    vBoundingSphere = vec4(\n        (aTransform * vec4(uInvariantBoundingSphere.xyz, 1.0)).xyz,\n        uInvariantBoundingSphere.w\n    );\n    vTransform = aTransform;\n\n    gl_Position = uProjection * mvPosition;\n\n    // move z position to near clip plane (but not too close to get precision issues)\n    gl_Position.z = gl_Position.w - 0.01;\n}\n","\nprecision highp float;\nprecision highp int;\n\n#include common\n#include light_frag_params\n\n#if dClipObjectCount != 0\n    uniform int uClipObjectType[dClipObjectCount];\n    uniform bool uClipObjectInvert[dClipObjectCount];\n    uniform vec3 uClipObjectPosition[dClipObjectCount];\n    uniform vec4 uClipObjectRotation[dClipObjectCount];\n    uniform vec3 uClipObjectScale[dClipObjectCount];\n#endif\n#include common_clip\n\n#include read_from_texture\n#include texture3d_from_1d_trilinear\n#include texture3d_from_2d_nearest\n#include texture3d_from_2d_linear\n\nuniform mat4 uProjection, uTransform, uModelView, uModel, uView;\nuniform vec3 uCameraDir;\n\nuniform sampler2D tDepth;\nuniform vec2 uDrawingBufferSize;\n\nvarying vec3 vOrigPos;\nvarying float vInstance;\nvarying vec4 vBoundingSphere;\nvarying mat4 vTransform;\n\nuniform mat4 uInvView;\nuniform vec3 uGridDim;\nuniform vec3 uBboxSize;\nuniform sampler2D tTransferTex;\nuniform float uTransferScale;\nuniform float uStepScale;\nuniform float uJumpLength;\n\nuniform int uObjectId;\nuniform int uVertexCount;\nuniform int uInstanceCount;\nuniform int uGroupCount;\n\n#if defined(dColorMarker)\n    uniform vec3 uHighlightColor;\n    uniform vec3 uSelectColor;\n    uniform vec3 uDimColor;\n    uniform float uHighlightStrength;\n    uniform float uSelectStrength;\n    uniform float uDimStrength;\n    uniform int uMarkerPriority;\n    uniform float uMarkerAverage;\n\n    uniform float uMarker;\n    uniform vec2 uMarkerTexDim;\n    uniform sampler2D tMarker;\n#endif\n\nuniform float uMetalness;\nuniform float uRoughness;\nuniform float uEmissive;\n\nuniform bool uFog;\nuniform float uFogNear;\nuniform float uFogFar;\nuniform vec3 uFogColor;\n\nuniform float uAlpha;\nuniform bool uTransparentBackground;\nuniform float uXrayEdgeFalloff;\nuniform float uCelSteps;\nuniform float uExposure;\n\nuniform int uRenderMask;\n\nuniform float uNear;\nuniform float uFar;\nuniform float uIsOrtho;\n\nuniform vec3 uCellDim;\nuniform vec3 uCameraPosition;\nuniform mat4 uCartnToUnit;\n\n#if __VERSION__ != 100\n    // for webgl1 this is given as a 'define'\n    uniform int uMaxSteps;\n#endif\n\n#if defined(dGridTexType_2d)\n    precision highp sampler2D;\n    uniform sampler2D tGridTex;\n    uniform vec3 uGridTexDim;\n#elif defined(dGridTexType_3d)\n    precision highp sampler3D;\n    uniform sampler3D tGridTex;\n#endif\n\n#if defined(dColorType_uniform)\n    uniform vec3 uColor;\n#elif defined(dColorType_texture)\n    uniform vec2 uColorTexDim;\n    uniform sampler2D tColor;\n#endif\n\n#ifdef dOverpaint\n    #if defined(dOverpaintType_groupInstance) || defined(dOverpaintType_vertexInstance)\n        uniform vec2 uOverpaintTexDim;\n        uniform sampler2D tOverpaint;\n    #endif\n#endif\n\n#ifdef dUsePalette\n    uniform sampler2D tPalette;\n#endif\n\n#if defined(dGridTexType_2d)\n    vec4 textureVal(vec3 pos) {\n        return texture3dFrom2dLinear(tGridTex, pos + (vec3(0.5, 0.5, 0.0) / uGridDim), uGridDim, uGridTexDim.xy);\n    }\n    vec4 textureGroup(vec3 pos) {\n        return texture3dFrom2dNearest(tGridTex, pos + (vec3(0.5, 0.5, 0.0) / uGridDim), uGridDim, uGridTexDim.xy);\n    }\n#elif defined(dGridTexType_3d)\n    vec4 textureVal(vec3 pos) {\n        return texture(tGridTex, pos + (vec3(0.5) / uGridDim));\n    }\n    vec4 textureGroup(vec3 pos) {\n        return texelFetch(tGridTex, ivec3(pos * uGridDim), 0);\n    }\n#endif\n\nfloat calcDepth(const in vec3 pos) {\n    vec2 clipZW = pos.z * uProjection[2].zw + uProjection[3].zw;\n    return 0.5 + 0.5 * clipZW.x / clipZW.y;\n}\n\nfloat transferFunction(float value) {\n    return texture2D(tTransferTex, vec2(value, 0.0)).a;\n}\n\nfloat getDepth(const in vec2 coords) {\n    #ifdef depthTextureSupport\n        return texture2D(tDepth, coords).r;\n    #else\n        return unpackRGBAToDepth(texture2D(tDepth, coords));\n    #endif\n}\n\nconst float gradOffset = 0.5;\n\nvec3 v3m4(vec3 p, mat4 m) {\n    return (m * vec4(p, 1.0)).xyz;\n}\n\nfloat preFogAlphaBlended = 0.0;\n\nvec4 raymarch(vec3 startLoc, vec3 step, vec3 rayDir) {\n    mat3 normalMatrix = transpose3(inverse3(mat3(uModelView * vTransform)));\n    mat4 cartnToUnit = uCartnToUnit * inverse4(vTransform);\n    #if defined(dClipVariant_pixel) && dClipObjectCount != 0\n        mat4 modelTransform = uModel * vTransform * uTransform;\n    #endif\n    mat4 modelViewTransform = uModelView * vTransform * uTransform;\n\n    vec3 scaleVol = vec3(1.0) / uGridDim;\n    vec3 pos = startLoc;\n    vec4 cell;\n    float prevValue = -1.0;\n    float value = 0.0;\n    vec4 src = vec4(0.0);\n    vec4 dst = vec4(0.0);\n    float fragmentDepth;\n\n    vec3 posMin = vec3(0.0);\n    vec3 posMax = vec3(1.0) - vec3(1.0) / uGridDim;\n\n    vec3 unitPos;\n\n    vec3 nextPos;\n    float nextValue;\n\n    vec4 material;\n    vec4 overpaint;\n    float metalness = uMetalness;\n    float roughness = uRoughness;\n    float emissive = uEmissive;\n\n    vec3 gradient = vec3(1.0);\n    vec3 dx = vec3(gradOffset * scaleVol.x, 0.0, 0.0);\n    vec3 dy = vec3(0.0, gradOffset * scaleVol.y, 0.0);\n    vec3 dz = vec3(0.0, 0.0, gradOffset * scaleVol.z);\n\n    float maxDist = min(vBoundingSphere.w * 2.0, uFar - uNear);\n    float maxDistSq = maxDist * maxDist;\n\n    for (int i = 0; i < uMaxSteps; ++i) {\n        // break when beyond bounding-sphere or far-plane\n        vec3 distVec = startLoc - pos;\n        if (dot(distVec, distVec) > maxDistSq) break;\n\n        unitPos = v3m4(pos, cartnToUnit);\n\n        // continue when outside of grid\n        if (unitPos.x > posMax.x || unitPos.y > posMax.y || unitPos.z > posMax.z ||\n            unitPos.x < posMin.x || unitPos.y < posMin.y || unitPos.z < posMin.z\n        ) {\n            prevValue = value;\n            pos += step;\n            continue;\n        }\n\n        cell = textureVal(unitPos);\n        value = cell.a; // current voxel value\n\n        if (uJumpLength > 0.0 && value < 0.01) {\n            nextPos = pos + rayDir * uJumpLength;\n            nextValue = textureVal(v3m4(nextPos, cartnToUnit)).a;\n            if (nextValue < 0.01) {\n                prevValue = nextValue;\n                pos = nextPos;\n                continue;\n            }\n        }\n\n        vec4 mvPosition = modelViewTransform * vec4(unitPos * uGridDim, 1.0);\n        if (calcDepth(mvPosition.xyz) > getDepth(gl_FragCoord.xy / uDrawingBufferSize))\n            break;\n\n        #if defined(dClipVariant_pixel) && dClipObjectCount != 0\n            vec3 vModelPosition = v3m4(unitPos * uGridDim, modelTransform);\n            if (clipTest(vec4(vModelPosition, 0.0))) {\n                prevValue = value;\n                pos += step;\n                continue;\n            }\n        #endif\n\n        vec3 vViewPosition = mvPosition.xyz;\n        material.a = transferFunction(value);\n\n        #ifdef dPackedGroup\n            float group = unpackRGBToInt(textureGroup(floor(unitPos * uGridDim + 0.5) / uGridDim).rgb);\n        #else\n            vec3 g = floor(unitPos * uGridDim + 0.5);\n            // note that we swap x and z because the texture is flipped around y\n            #if defined(dAxisOrder_012)\n                float group = g.z + g.y * uGridDim.z + g.x * uGridDim.z * uGridDim.y; // 210\n            #elif defined(dAxisOrder_021)\n                float group = g.y + g.z * uGridDim.y + g.x * uGridDim.y * uGridDim.z; // 120\n            #elif defined(dAxisOrder_102)\n                float group = g.z + g.x * uGridDim.z + g.y * uGridDim.z * uGridDim.x; // 201\n            #elif defined(dAxisOrder_120)\n                float group = g.x + g.z * uGridDim.x + g.y * uGridDim.x * uGridDim.z; // 021\n            #elif defined(dAxisOrder_201)\n                float group = g.y + g.x * uGridDim.y + g.z * uGridDim.y * uGridDim.x; // 102\n            #elif defined(dAxisOrder_210)\n                float group = g.x + g.y * uGridDim.x + g.z * uGridDim.x * uGridDim.y; // 012\n            #endif\n        #endif\n\n        #if defined(dColorType_direct) && defined(dUsePalette)\n            material.rgb = texture2D(tPalette, vec2(value, 0.0)).rgb;\n        #elif defined(dColorType_uniform)\n            material.rgb = uColor;\n        #elif defined(dColorType_instance)\n            material.rgb = readFromTexture(tColor, vInstance, uColorTexDim).rgb;\n        #elif defined(dColorType_group)\n            material.rgb = readFromTexture(tColor, group, uColorTexDim).rgb;\n        #elif defined(dColorType_groupInstance)\n            material.rgb = readFromTexture(tColor, vInstance * float(uGroupCount) + group, uColorTexDim).rgb;\n        #elif defined(dColorType_vertex)\n            material.rgb = texture3dFrom1dTrilinear(tColor, unitPos, uGridDim, uColorTexDim, 0.0).rgb;\n        #elif defined(dColorType_vertexInstance)\n            material.rgb = texture3dFrom1dTrilinear(tColor, unitPos, uGridDim, uColorTexDim, vInstance * float(uVertexCount)).rgb;\n        #endif\n\n        #ifdef dOverpaint\n            #if defined(dOverpaintType_groupInstance)\n                overpaint = readFromTexture(tOverpaint, vInstance * float(uGroupCount) + group, uOverpaintTexDim);\n            #elif defined(dOverpaintType_vertexInstance)\n                overpaint = texture3dFrom1dTrilinear(tOverpaint, unitPos, uGridDim, uOverpaintTexDim, vInstance * float(uVertexCount));\n            #endif\n\n            material.rgb = mix(material.rgb, overpaint.rgb, overpaint.a);\n        #endif\n\n        #if defined(dIgnoreLight)\n            gl_FragColor.rgb = material.rgb;\n        #else\n            if (material.a >= 0.01) {\n                #ifdef dPackedGroup\n                    // compute gradient by central differences\n                    gradient.x = textureVal(unitPos - dx).a - textureVal(unitPos + dx).a;\n                    gradient.y = textureVal(unitPos - dy).a - textureVal(unitPos + dy).a;\n                    gradient.z = textureVal(unitPos - dz).a - textureVal(unitPos + dz).a;\n                #else\n                    gradient = cell.xyz * 2.0 - 1.0;\n                #endif\n                vec3 normal = -normalize(normalMatrix * normalize(gradient));\n                #include apply_light_color\n            } else {\n                gl_FragColor.rgb = material.rgb;\n            }\n        #endif\n\n        gl_FragColor.a = material.a * uAlpha * uTransferScale;\n\n        #if defined(dColorMarker)\n            float marker = uMarker;\n            if (uMarker == -1.0) {\n                marker = readFromTexture(tMarker, vInstance * float(uGroupCount) + group, uMarkerTexDim).a;\n                marker = floor(marker * 255.0 + 0.5); // rounding required to work on some cards on win\n            }\n        #endif\n        #include apply_marker_color\n\n        preFogAlphaBlended = (1.0 - preFogAlphaBlended) * gl_FragColor.a + preFogAlphaBlended;\n        fragmentDepth = calcDepth(mvPosition.xyz);\n        #include apply_fog\n\n        src = gl_FragColor;\n\n        if (!uTransparentBackground) {\n            // done in 'apply_fog' otherwise\n            src.rgb *= src.a;\n        }\n        dst = (1.0 - dst.a) * src + dst; // standard blending\n\n        // break if the color is opaque enough\n        if (dst.a > 0.95)\n            break;\n\n        pos += step;\n    }\n\n    return dst;\n}\n\n// TODO: support float texture for higher precision values???\n// TODO: support clipping exclusion texture support\n\nvoid main() {\n    #if defined(dRenderVariant_emissive)\n        discard;\n    #else\n        if (gl_FrontFacing)\n            discard;\n\n        vec3 rayDir = mix(normalize(vOrigPos - uCameraPosition), uCameraDir, uIsOrtho);\n        vec3 step = rayDir * uStepScale;\n\n        float boundingSphereNear = distance(vBoundingSphere.xyz, uCameraPosition) - vBoundingSphere.w;\n        float d = max(uNear, boundingSphereNear) - mix(0.0, distance(vOrigPos, uCameraPosition), uIsOrtho);\n        vec3 start = mix(uCameraPosition, vOrigPos, uIsOrtho) + (d * rayDir);\n        gl_FragColor = raymarch(start, step, rayDir);\n\n        float fragmentDepth = calcDepth((uModelView * vec4(start, 1.0)).xyz);\n        float preFogAlpha = clamp(preFogAlphaBlended, 0.0, 1.0);\n        #include wboit_write\n    #endif\n}\n",{fragDepth:"optional",drawBuffers:"optional"},{},zV),ZV=jV("image","\nprecision highp float;\nprecision highp int;\n\n#include common\n#include common_vert_params\n\nattribute vec3 aPosition;\nattribute vec2 aUv;\nattribute mat4 aTransform;\nattribute float aInstance;\n\nvarying vec2 vUv;\nvarying float vInstance;\n\nvoid main() {\n    #include assign_position\n\n    vUv = aUv;\n    vInstance = aInstance;\n}\n","\nprecision highp float;\nprecision highp int;\n\n#include common\n#include read_from_texture\n#include common_frag_params\n#include common_clip\n\nuniform vec2 uImageTexDim;\nuniform sampler2D tImageTex;\nuniform sampler2D tGroupTex;\n\nuniform vec2 uMarkerTexDim;\nuniform sampler2D tMarker;\n\nvarying vec2 vUv;\nvarying float vInstance;\n\n#if defined(dInterpolation_catmulrom) || defined(dInterpolation_mitchell) || defined(dInterpolation_bspline)\n    #define dInterpolation_cubic\n#endif\n\n#if defined(dInterpolation_cubic)\n    #if defined(dInterpolation_catmulrom) || defined(dInterpolation_mitchell)\n        #if defined(dInterpolation_catmulrom)\n            const float B = 0.0;\n            const float C = 0.5;\n        #elif defined(dInterpolation_mitchell)\n            const float B = 0.333;\n            const float C = 0.333;\n        #endif\n\n        float cubicFilter(float x){\n            float f = x;\n            if (f < 0.0) {\n                f = -f;\n            }\n            if (f < 1.0) {\n                return ((12.0 - 9.0 * B - 6.0 * C) * (f * f * f) +\n                    (-18.0 + 12.0 * B + 6.0 * C) * (f * f) +\n                    (6.0 - 2.0 * B)) / 6.0;\n            }else if (f >= 1.0 && f < 2.0){\n                return ((-B - 6.0 * C) * ( f * f * f)\n                    + (6.0 * B + 30.0 * C) * (f * f) +\n                    (-(12.0 * B) - 48.0 * C) * f +\n                    8.0 * B + 24.0 * C) / 6.0;\n            }else{\n                return 0.0;\n            }\n        }\n    #elif defined(dInterpolation_bspline)\n        float cubicFilter(float x) {\n            float f = x;\n            if (f < 0.0) {\n                f = -f;\n            }\n            if (f >= 0.0 && f <= 1.0){\n                return (2.0 / 3.0) + (0.5) * (f * f * f) - (f * f);\n            } else if (f > 1.0 && f <= 2.0) {\n                return 1.0 / 6.0 * pow((2.0 - f), 3.0);\n            }\n            return 1.0;\n        }\n    #endif\n\n    vec4 biCubic(sampler2D tex, vec2 texCoord) {\n        vec2 texelSize = 1.0 / uImageTexDim;\n        texCoord -= texelSize / 2.0;\n        vec4 nSum = vec4(0.0);\n        float nDenom = 0.0;\n        vec2 cell = fract(texCoord * uImageTexDim);\n        for (float m = -1.0; m <= 2.0; ++m) {\n            for (float n = -1.0; n <= 2.0; ++n) {\n                vec4 vecData = texture2D(tex, texCoord + texelSize * vec2(m, n));\n                float c = abs(cubicFilter(m - cell.x) * cubicFilter(-n + cell.y));\n                nSum += vecData * c;\n                nDenom += c;\n            }\n        }\n        return nSum / nDenom;\n    }\n#endif\n\nvoid main() {\n    #include fade_lod\n    #include clip_pixel\n\n    #if defined(dInterpolation_cubic)\n        vec4 imageData = biCubic(tImageTex, vUv);\n    #else\n        vec4 imageData = texture2D(tImageTex, vUv);\n    #endif\n    imageData.a = clamp(imageData.a, 0.0, 1.0);\n    if (imageData.a > 0.9) imageData.a = 1.0;\n\n    imageData.a *= uAlpha;\n    if (imageData.a < 0.05)\n        discard;\n\n    float fragmentDepth = gl_FragCoord.z;\n\n    if ((uRenderMask == MaskOpaque && imageData.a < 1.0) ||\n        (uRenderMask == MaskTransparent && imageData.a == 1.0)\n    ) {\n        discard;\n    }\n\n    #if defined(dRenderVariant_pick)\n        if (imageData.a < 0.3)\n            discard;\n        #ifdef requiredDrawBuffers\n            gl_FragColor = vec4(packIntToRGB(float(uObjectId)), 1.0);\n            gl_FragData[1] = vec4(packIntToRGB(vInstance), 1.0);\n            gl_FragData[2] = vec4(texture2D(tGroupTex, vUv).rgb, 1.0);\n            gl_FragData[3] = packDepthToRGBA(gl_FragCoord.z);\n        #else\n            gl_FragColor = vColor;\n            if (uPickType == 1) {\n                gl_FragColor = vec4(packIntToRGB(float(uObjectId)), 1.0);\n            } else if (uPickType == 2) {\n                gl_FragColor = vec4(packIntToRGB(vInstance), 1.0);\n            } else {\n                gl_FragColor = vec4(texture2D(tGroupTex, vUv).rgb, 1.0);\n            }\n        #endif\n    #elif defined(dRenderVariant_depth)\n        if (imageData.a < 0.05)\n            discard;\n        gl_FragColor = packDepthToRGBA(gl_FragCoord.z);\n    #elif defined(dRenderVariant_marking)\n        float marker = uMarker;\n        if (uMarker == -1.0) {\n            float group = unpackRGBToInt(texture2D(tGroupTex, vUv).rgb);\n            marker = readFromTexture(tMarker, vInstance * float(uGroupCount) + group, uMarkerTexDim).a;\n            marker = floor(marker * 255.0 + 0.5); // rounding required to work on some cards on win\n        }\n        if (uMarkingType == 1) {\n            if (marker > 0.0 || imageData.a < 0.05)\n                discard;\n            gl_FragColor = packDepthToRGBA(gl_FragCoord.z);\n        } else {\n            if (marker == 0.0 || imageData.a < 0.05)\n                discard;\n            float depthTest = 1.0;\n            if (uMarkingDepthTest) {\n                depthTest = (fragmentDepth >= getDepthPacked(gl_FragCoord.xy / uDrawingBufferSize)) ? 1.0 : 0.0;\n            }\n            bool isHighlight = intMod(marker, 2.0) > 0.1;\n            gl_FragColor = vec4(0.0, depthTest, isHighlight ? 1.0 : 0.0, 1.0);\n        }\n    #elif defined(dRenderVariant_emissive)\n        gl_FragColor = vec4(0.0);\n    #elif defined(dRenderVariant_color)\n        gl_FragColor = imageData;\n\n        float marker = uMarker;\n        if (uMarker == -1.0) {\n            float group = unpackRGBToInt(texture2D(tGroupTex, vUv).rgb);\n            marker = readFromTexture(tMarker, vInstance * float(uGroupCount) + group, uMarkerTexDim).a;\n            marker = floor(marker * 255.0 + 0.5); // rounding required to work on some cards on win\n        }\n\n        #include apply_marker_color\n        #include apply_fog\n        #include wboit_write\n        #include dpoit_write\n    #endif\n}\n",{drawBuffers:"optional"},{},HV);function $V(e,t){var n;if(void 0===e)return"";const r=(null===(n=e.dRenderVariant)||void 0===n?void 0:n.ref.value)||"",o=[];for(const i in e){if(null===t||void 0===t?void 0:t(i,r,e))continue;const n=e[i].ref.value;void 0!==n&&("string"===typeof n?o.push(`#define ${i}_${n}`):"number"===typeof n?o.push(`#define ${i} ${n}`):"boolean"===typeof n?n&&o.push(`#define ${i}`):Zh())}return o.join("\n")+"\n"}const eq="\n#define attribute in\n#define varying out\n#define texture2D texture\n",tq="\n#define varying in\n#define texture2D texture\n#define textureCube texture\n#define texture2DLodEXT textureLod\n#define textureCubeLodEXT textureLod\n\n#define gl_FragColor out_FragData0\n#define gl_FragDepthEXT gl_FragDepth\n\n#define depthTextureSupport\n";function nq(e,t,n,r){const o=$V(n,r.ignoreDefine),i=$V(n,r.ignoreDefine),a=Xq(e)?function(e,t){const n=["#version 300 es"];if(t.drawBuffers&&e.drawBuffers&&n.push("#define requiredDrawBuffers"),t.multiDraw)if(e.multiDraw)n.push("#extension GL_ANGLE_multi_draw : require"),n.push("#define enabledMultiDraw");else if("required"===t.multiDraw)throw new Error("required 'GL_ANGLE_multi_draw' extension not available");if(t.clipCullDistance)if(e.clipCullDistance)n.push("#extension GL_ANGLE_clip_cull_distance : enable"),n.push("#define enabledClipCullDistance");else if("required"===t.clipCullDistance)throw new Error("required 'GL_ANGLE_clip_cull_distance' extension not available");if(t.conservativeDepth)if(e.conservativeDepth)n.push("#extension GL_EXT_conservative_depth : enable"),n.push("#define enabledConservativeDepth");else if("required"===t.conservativeDepth)throw new Error("required 'GL_EXT_conservative_depth' extension not available");return e.noNonInstancedActiveAttribs&&n.push("#define noNonInstancedActiveAttribs"),n.push(eq),n.join("\n")+"\n"}(t,r.extensions):function(e,t){const n=[];if(t.drawBuffers)if(e.drawBuffers)n.push("#define requiredDrawBuffers");else if("required"===t.drawBuffers)throw new Error("required 'GL_EXT_draw_buffers' extension not available");if(t.multiDraw)if(e.multiDraw)n.push("#extension GL_ANGLE_multi_draw : require"),n.push("#define enabledMultiDraw");else if("required"===t.multiDraw)throw new Error("required 'GL_ANGLE_multi_draw' extension not available");return n.join("\n")+"\n"}(t,r.extensions),s=Xq(e)?function(e,t,n,r){const o=["#version 300 es",`layout(location = 0) out highp ${r[0]||"vec4"} out_FragData0;`];if(n.fragDepth&&t.fragDepth&&o.push("#define enabledFragDepth"),n.drawBuffers&&t.drawBuffers){o.push("#define requiredDrawBuffers");for(let t=1,n=e.getParameter(e.MAX_DRAW_BUFFERS);t<n;++t)o.push(`layout(location = ${t}) out highp ${r[t]||"vec4"} out_FragData${t};`)}return n.shaderTextureLod&&t.shaderTextureLod&&o.push("#define enabledShaderTextureLod"),o.push(tq),o.join("\n")+"\n"}(e,t,r.extensions,r.outTypes):function(e,t){const n=["#extension GL_OES_standard_derivatives : enable"];if(t.fragDepth)if(e.fragDepth)n.push("#extension GL_EXT_frag_depth : enable"),n.push("#define enabledFragDepth");else if("required"===t.fragDepth)throw new Error("required 'GL_EXT_frag_depth' extension not available");if(t.drawBuffers)if(e.drawBuffers)n.push("#extension GL_EXT_draw_buffers : require"),n.push("#define requiredDrawBuffers"),n.push("#define gl_FragColor gl_FragData[0]");else if("required"===t.drawBuffers)throw new Error("required 'GL_EXT_draw_buffers' extension not available");if(t.shaderTextureLod)if(e.shaderTextureLod)n.push("#extension GL_EXT_shader_texture_lod : enable"),n.push("#define enabledShaderTextureLod");else if("required"===t.shaderTextureLod)throw new Error("required 'GL_EXT_shader_texture_lod' extension not available");return e.depthTexture&&n.push("#define depthTextureSupport"),n.join("\n")+"\n"}(t,r.extensions),l=Xq(e)?function(e){return e.replace(/gl_FragData\[([0-9]+)\]/g,"out_FragData$1")}(r.frag):r.frag;return{id:QV(),name:r.name,vert:`${a}${o}${GV(r.vert,n)}`,frag:`${s}${i}${GV(l,n)}`,extensions:r.extensions,outTypes:r.outTypes}}function rq(e,t){switch(t){case"b":case"b[]":return e.BOOL;case"f":case"f[]":return e.FLOAT;case"i":case"i[]":return e.INT;case"v2":case"v2[]":return e.FLOAT_VEC2;case"v3":case"v3[]":return e.FLOAT_VEC3;case"v4":case"v4[]":return e.FLOAT_VEC4;case"iv2":case"iv2[]":return e.INT_VEC2;case"iv3":case"iv3[]":return e.INT_VEC3;case"iv4":case"iv4[]":return e.INT_VEC4;case"m3":case"m3[]":return e.FLOAT_MAT3;case"m4":case"m4[]":return e.FLOAT_MAT4;default:console.error(`unknown uniform kind '${t}'`)}}function oq(e,t,n){e.uniform1f(t,n)}function iq(e,t,n){e.uniform1fv(t,n)}function aq(e,t,n){e.uniform1i(t,n)}function sq(e,t,n){e.uniform1iv(t,n)}function lq(e,t,n){e.uniform2fv(t,n)}function cq(e,t,n){e.uniform3fv(t,n)}function uq(e,t,n){e.uniform4fv(t,n)}function dq(e,t,n){e.uniform2iv(t,n)}function Aq(e,t,n){e.uniform3iv(t,n)}function fq(e,t,n){e.uniform4iv(t,n)}function pq(e,t,n){e.uniformMatrix3fv(t,!1,n)}function hq(e,t,n){e.uniformMatrix4fv(t,!1,n)}function gq(e){switch(e){case"f":return oq;case"f[]":return iq;case"i":case"t":case"b":return aq;case"i[]":case"t[]":case"b[]":return sq;case"v2":case"v2[]":return lq;case"v3":case"v3[]":return cq;case"v4":case"v4[]":return uq;case"iv2":case"iv2[]":return dq;case"iv3":case"iv3[]":return Aq;case"iv4":case"iv4[]":return fq;case"m3":case"m3[]":return pq;case"m4":case"m4[]":return hq}}const mq=Bp();function yq(e){const t=e.createBuffer();if(null===t)throw new Error("Could not create WebGL buffer");return t}function vq(e,t,n,r){let o=yq(e);const i=function(e,t){switch(t){case"static":return e.STATIC_DRAW;case"dynamic":return e.DYNAMIC_DRAW;case"stream":return e.STREAM_DRAW}}(e,n),a=function(e,t){switch(t){case"attribute":return e.ARRAY_BUFFER;case"elements":return e.ELEMENT_ARRAY_BUFFER;case"uniform":if(Xq(e))return e.UNIFORM_BUFFER;throw new Error("WebGL2 is required for uniform buffers")}}(e,r),s=function(e,t){return t instanceof Uint8Array?e.UNSIGNED_BYTE:t instanceof Int8Array?e.BYTE:t instanceof Uint16Array?e.UNSIGNED_SHORT:t instanceof Int16Array?e.SHORT:t instanceof Uint32Array?e.UNSIGNED_INT:t instanceof Int32Array?e.INT:t instanceof Float32Array?e.FLOAT:void Zh()}(e,t),l=t.BYTES_PER_ELEMENT,c=t.length;function u(t){e.bindBuffer(a,o),e.bufferData(a,t,i)}u(t);let d=!1;return{id:mq(),_usageHint:i,_bufferType:a,_dataType:s,_bpe:l,length:c,getBuffer:()=>o,updateData:u,updateSubData:(t,n,r)=>{e.bindBuffer(a,o),r-n===t.length?e.bufferSubData(a,0,t):e.bufferSubData(a,n*l,t.subarray(n,n+r))},reset:()=>{o=yq(e),u(t)},destroy:()=>{d||(e.deleteBuffer(o),d=!0)}}}function bq(e,t,n){if("float32"===t)switch(n){case 1:return e.FLOAT;case 2:return e.FLOAT_VEC2;case 3:return e.FLOAT_VEC3;case 4:return e.FLOAT_VEC4;case 16:return e.FLOAT_MAT4}Zh()}const Cq=Bp();function Iq(e){const t=e.createProgram();if(null===t)throw new Error("Could not create WebGL program");return t}function Eq(e,t,n,r,o){const{defineValues:i,shaderCode:a,schema:s}=o;let l=Iq(e);const c=Cq(),u=nq(e,n,i,a),d=r("vert",u.vert),A=r("frag",u.frag);let f,p;function h(){d.attach(l),A.attach(l),e.linkProgram(l),Aw&&function(e,t){if(!e.getProgramParameter(t,e.LINK_STATUS))throw new Error(`Could not compile WebGL program. \n\n${e.getProgramInfoLog(t)}`)}(e,l),f=function(e,t,n){const r={};return Object.keys(n).forEach((o=>{const i=n[o];if("attribute"===i.type){const n=e.getAttribLocation(t,o);r[o]=n}else if("uniform"===i.type){let n=e.getUniformLocation(t,o);null===n&&i.kind.endsWith("[]")&&(n=e.getUniformLocation(t,o+"[0]")),r[o]=n}else if("texture"===i.type){const n=e.getUniformLocation(t,o);r[o]=n}})),r}(e,l,s),p=function(e){const t={};return Object.keys(e).forEach((n=>{const r=e[n];"uniform"===r.type?t[n]=gq(r.kind):"texture"===r.type&&(t[n]=gq("t"))})),t}(s),Aw&&(function(e,t,n){const r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let o=0;o<r;++o){const r=e.getActiveAttrib(t,o);if(r){const{name:t,type:o}=r;if(t.startsWith("__activeAttribute"))continue;if("gl_InstanceID"===t)continue;if("gl_VertexID"===t)continue;if("gl_DrawID"===t)continue;const i=n[t];if(void 0===i)throw new Error(`missing 'uniform' or 'texture' with name '${t}' in schema`);if("attribute"!==i.type)throw new Error(`'${t}' must be of type 'attribute' but is '${i.type}'`);const a=bq(e,i.kind,i.itemSize);if(a!==o)throw new Error(`unexpected attribute type '${a}' for ${t}, expected '${o}'`)}}}(e,l,s),function(e,t,n){const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let o=0;o<r;++o){const r=e.getActiveUniform(t,o);if(r){const{name:t,type:o}=r;if(t.startsWith("__activeUniform"))continue;if("gl_InstanceID"===t)continue;if("gl_VertexID"===t)continue;if("gl_DrawID"===t)continue;const i=n[t.replace(/[[0-9]+\]$/,"")];if(void 0===i)throw new Error(`missing 'uniform' or 'texture' with name '${t}' in schema`);if("uniform"===i.type){if(rq(e,i.kind)!==o)throw new Error(`unexpected uniform type for ${t}`)}else{if("texture"!==i.type)throw new Error(`'${t}' must be of type 'uniform' or 'texture' but is '${i.type}'`);if("image-float32"===i.kind||"image-uint8"===i.kind){if(o!==e.SAMPLER_2D)throw new Error(`unexpected sampler type for '${t}'`)}else if("volume-float32"===i.kind||"volume-uint8"===i.kind){if(!Xq(e))throw new Error("WebGL2 is required to use SAMPLER_3D");if(o!==e.SAMPLER_3D)throw new Error(`unexpected sampler type for '${t}'`)}}}}}(e,l,s))}h();let g=!1;return{id:c,use:()=>{t.currentProgramId=c,e.useProgram(l)},setUniforms:t=>{for(let n=0,r=t.length;n<r;++n){const[r,o]=t[n];if(o){const t=f[r];null!==t&&p[r](e,t,o.ref.value)}}},uniform:(t,n)=>{const r=f[t];null!==r&&p[t](e,r,n)},bindAttributes:e=>{t.clearVertexAttribsState();for(let t=0,n=e.length;t<n;++t){const[n,r]=e[t],o=f[n];-1!==o&&r.bind(o)}t.disableUnusedVertexAttribs()},offsetAttributes:(e,t)=>{for(let n=0,r=e.length;n<r;++n){const[r,o]=e[n],i=f[r];-1!==i&&o.changeOffset(i,t)}},bindTextures:(t,n)=>{for(let r=0,o=t.length;r<o;++r){const[o,i]=t[r],a=f[o];null!==a&&void 0!==a&&(i.bind(r+n),p[o](e,a,r+n))}},reset:()=>{l=Iq(e),h()},destroy:()=>{g||(d.destroy(),A.destroy(),e.deleteProgram(l),g=!0)}}}const xq=Bp();function Bq(e,t){const{type:n,source:r}=t,o=e.createShader("vert"===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER);if(null===o)throw new Error(`Error creating ${n} shader`);if(e.shaderSource(o,r),e.compileShader(o),Aw&&!1===e.getShaderParameter(o,e.COMPILE_STATUS))throw console.warn(`'${n}' shader info log '${e.getShaderInfoLog(o)}'\n${function(e){const t=e.split("\n");for(let n=0;n<t.length;++n)t[n]=n+1+": "+t[n];return t.join("\n")}(r)}`),new Error(`Error compiling ${n} shader`);return o}function wq(e,t){let n=Bq(e,t);return{id:xq(),attach:t=>{e.attachShader(t,n)},reset:()=>{n=Bq(e,t)},destroy:()=>{e.deleteShader(n)}}}function _q(e,t,n){const r=new Map;return{get:n=>{const o=e(n);let i=r.get(o);return i||(i=function(e){return{value:e,usageCount:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}}(t(n)),r.set(o,i)),i.usageCount+=1,function(e){return{free:()=>{e.usageCount-=1},value:e.value}}(i)},clear:()=>{r.forEach(((e,t)=>{e.usageCount<=0&&(e.usageCount<0&&console.warn("Reference usageCount below zero."),n(e.value),r.delete(t))}))},get count(){return r.size},dispose:()=>{r.forEach((e=>n(e.value))),r.clear()}}}const Sq=Bp();function Dq(e){const t=e.createRenderbuffer();if(null===t)throw new Error("Could not create WebGL renderbuffer");return t}function Tq(e,t,n,r,o){let i=Dq(e);const a=()=>e.bindRenderbuffer(e.RENDERBUFFER,i),s=function(e,t){switch(t){case"depth16":return e.DEPTH_COMPONENT16;case"stencil8":return e.STENCIL_INDEX8;case"rgba4":return e.RGBA4;case"depth-stencil":return e.DEPTH_STENCIL;case"depth24":if(Xq(e))return e.DEPTH_COMPONENT24;throw new Error("WebGL2 needed for `depth24` renderbuffer format");case"depth32f":if(Xq(e))return e.DEPTH_COMPONENT32F;throw new Error("WebGL2 needed for `depth32f` renderbuffer format");case"depth24-stencil8":if(Xq(e))return e.DEPTH24_STENCIL8;throw new Error("WebGL2 needed for `depth24-stencil8` renderbuffer format");case"depth32f-stencil8":if(Xq(e))return e.DEPTH32F_STENCIL8;throw new Error("WebGL2 needed for `depth32f-stencil8` renderbuffer format")}}(e,t),l=function(e,t){switch(t){case"depth":return e.DEPTH_ATTACHMENT;case"stencil":return e.STENCIL_ATTACHMENT;case"depth-stencil":return e.DEPTH_STENCIL_ATTACHMENT;case"color0":return e.COLOR_ATTACHMENT0}}(e,n);function c(){a(),e.renderbufferStorage(e.RENDERBUFFER,s,r,o)}c();let u=!1;return{id:Sq(),bind:a,attachFramebuffer:t=>{t.bind(),a(),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,i),Aw&&SV(e)},detachFramebuffer:t=>{t.bind(),a(),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,null),Aw&&SV(e)},setSize:(e,t)=>{r=e,o=t,c()},reset:()=>{i=Dq(e),c()},destroy:()=>{u||(e.deleteRenderbuffer(i),u=!0)}}}const kq=Bp();function Qq(e){const{vertexArrayObject:t}=e;if(!t)throw new Error("VertexArrayObject not supported");const n=t.createVertexArray();if(!n)throw new Error("Could not create WebGL vertex array");return n}function Mq(e){const{vertexArrayObject:t}=e;if(null===t)throw new Error("VertexArrayObject not supported");return t}function Rq(e){return{...e.value,destroy:()=>{e.free()}}}function Pq(e,t,n,r){const o={attribute:new Set,elements:new Set,framebuffer:new Set,program:new Set,renderbuffer:new Set,shader:new Set,texture:new Set,cubeTexture:new Set,vertexArray:new Set};function i(e,t){return o[e].add(t),n.resourceCounts[e]+=1,{...t,destroy:()=>{t.destroy(),o[e].delete(t),n.resourceCounts[e]-=1}}}const a=_q((e=>JSON.stringify(e)),(t=>i("shader",wq(e,t))),(e=>{e.destroy()}));function s(e,t){return Rq(a.get({type:e,source:t}))}const l=_q((e=>{var t;const n=[e.shaderCode.id],r=(null===(t=e.defineValues.dRenderVariant)||void 0===t?void 0:t.ref.value)||"";return Object.keys(e.defineValues).forEach((t=>{var o,i;(null===(i=(o=e.shaderCode).ignoreDefine)||void 0===i?void 0:i.call(o,t,r,e.defineValues))||n.push(Mh(t),function(e){return"boolean"===typeof e?e?1:0:"number"===typeof e?1e4*e:Mh(e)}(e.defineValues[t].ref.value))})),Fh(n).toString()}),(n=>i("program",Eq(e,t,r,s,n))),(e=>{e.destroy()}));return{attribute:(n,o,a,s)=>i("attribute",function(e,t,n,r,o,i){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"static";const{instancedArrays:s}=n,l=vq(e,r,a,"attribute"),{_bufferType:c,_dataType:u,_bpe:d}=l;return{...l,divisor:i,bind:n=>{if(e.bindBuffer(c,l.getBuffer()),16===o)for(let r=0;r<4;++r)t.enableVertexAttrib(n+r),e.vertexAttribPointer(n+r,4,u,!1,16*d,4*r*d),s.vertexAttribDivisor(n+r,i);else t.enableVertexAttrib(n),e.vertexAttribPointer(n,o,u,!1,0,0),s.vertexAttribDivisor(n,i)},changeOffset:(t,n)=>{const r=n*d*o;if(e.bindBuffer(c,l.getBuffer()),16===o)for(let o=0;o<4;++o)e.vertexAttribPointer(t+o,4,u,!1,16*d,4*o*d+r);else e.vertexAttribPointer(t,o,u,!1,0,r)}}}(e,t,r,n,o,a,s)),elements:(t,n)=>i("elements",function(e,t){const n=vq(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"static","elements");return{...n,bind:()=>{e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.getBuffer())}}}(e,t,n)),framebuffer:()=>i("framebuffer",function(e){let t=DV(e),n=!1;return{id:_V(),bind:()=>e.bindFramebuffer(e.FRAMEBUFFER,t),reset:()=>{t=DV(e)},destroy:()=>{n||(e.deleteFramebuffer(t),n=!0)}}}(e)),program:(e,t,n)=>Rq(l.get({defineValues:e,shaderCode:t,schema:n})),renderbuffer:(t,n,r,o)=>i("renderbuffer",Tq(e,t,n,r,o)),shader:s,texture:(t,n,o,a)=>i("texture",function(e,t,n,r,o,i){const a=$q();let s=aY(e);if(n.endsWith("float32")&&"float"!==o||n.endsWith("float16")&&"fp16"!==o||n.endsWith("uint8")&&"ubyte"!==o||n.endsWith("int32")&&"int"!==o||n.endsWith("depth")&&"ushort"!==o&&"float"!==o)throw new Error(`texture kind '${n}' and type '${o}' are incompatible`);if(!t.depthTexture&&"depth"===r)throw new Error("extension 'WEBGL_depth_texture' needed for 'depth' texture format");const l=function(e,t){switch(t){case"image-uint8":case"image-float32":case"image-float16":case"image-depth":return e.TEXTURE_2D}if(Xq(e))switch(t){case"image-int32":return e.TEXTURE_2D;case"volume-uint8":case"volume-float32":case"volume-float16":return e.TEXTURE_3D}throw new Error(`unknown texture kind '${t}'`)}(e,n),c=nY(e,i),u=eY(e,r,o),d=function(e,t,n){if(Xq(e))switch(t){case"alpha":switch(n){case"ubyte":return e.ALPHA;case"float":return e.R32F;case"fp16":return e.R16F;case"int":return e.R32I}case"rg":switch(n){case"ubyte":return e.RG;case"float":return e.RG32F;case"fp16":return e.RG16F;case"int":return e.RG32I}case"rgb":switch(n){case"ubyte":return e.RGB;case"float":return e.RGB32F;case"fp16":return e.RGB16F;case"int":return e.RGB32I}case"rgba":switch(n){case"ubyte":return e.RGBA;case"float":return e.RGBA32F;case"fp16":return e.RGBA16F;case"int":return e.RGBA32I}case"depth":switch(n){case"ushort":return e.DEPTH_COMPONENT16;case"float":return e.DEPTH_COMPONENT32F}}return eY(e,t,n)}(e,r,o),A=function(e,t,n){switch(n){case"ubyte":return e.UNSIGNED_BYTE;case"ushort":return e.UNSIGNED_SHORT;case"float":return e.FLOAT;case"fp16":if(t.textureHalfFloat)return t.textureHalfFloat.HALF_FLOAT;throw new Error('extension "texture_half_float" unavailable');case"int":if(Xq(e))return e.INT;throw new Error('texture type "int" requires webgl2')}}(e,t,o);function f(){e.bindTexture(l,s),e.texParameteri(l,e.TEXTURE_MAG_FILTER,c),e.texParameteri(l,e.TEXTURE_MIN_FILTER,c),e.texParameteri(l,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(l,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(l,null)}f();let p,h=0,g=0,m=0,y=!1,v=!1;function b(t,n,r){if(0===t||0===n||Xq(e)&&l===e.TEXTURE_3D&&0===r)throw new Error("empty textures are not allowed");if(h!==t||g!==n||m!==(r||0))if(h=t,g=n,m=r||0,e.bindTexture(l,s),l===e.TEXTURE_2D)e.texImage2D(l,0,d,h,g,0,u,A,null);else{if(!Xq(e)||l!==e.TEXTURE_3D||void 0===m)throw new Error("unknown texture target");e.texImage3D(l,0,d,h,g,m,0,u,A,null)}}function C(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===t.width||0===t.height||!oY(t)&&Xq(e)&&iY(t,l,e)&&0===t.depth)throw new Error("empty textures are not allowed");if(e.bindTexture(l,s),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),oY(t))h=t.width,g=t.height,e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.bindTexture(e.TEXTURE_2D,s),e.texImage2D(e.TEXTURE_2D,0,d,u,A,t);else if(function(e,t,n){return t===n.TEXTURE_2D}(0,l,e)){const r=t.filter?nY(e,t.filter):c;e.texParameteri(l,e.TEXTURE_MAG_FILTER,r),e.texParameteri(l,e.TEXTURE_MIN_FILTER,r),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!t.flipY),n?e.texSubImage2D(l,0,0,0,t.width,t.height,u,A,t.array):(h=t.width,g=t.height,e.texImage2D(l,0,d,h,g,0,u,A,t.array))}else{if(!Xq(e)||!iY(t,l,e))throw new Error("unknown texture target");e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),n?e.texSubImage3D(l,0,0,0,0,t.width,t.height,t.depth,u,A,t.array):(h=t.width,g=t.height,m=t.depth,e.texImage3D(l,0,d,h,g,m,0,u,A,t.array))}e.bindTexture(l,null),p=t}function I(){if(l!==e.TEXTURE_2D)throw new Error("mipmap only supported for 2d textures");if(!(Xq(e)||Up(h)&&Up(g)))throw new Error("mipmap unsupported for non-power-of-two textures and webgl1");e.bindTexture(l,s),e.texParameteri(l,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.generateMipmap(l),e.bindTexture(l,null),y=!0}function E(n,r,o){if(n.bind(),l===e.TEXTURE_2D)e.framebufferTexture2D(e.FRAMEBUFFER,rY(e,t,r),e.TEXTURE_2D,s,0);else{if(!Xq(e)||l!==e.TEXTURE_3D)throw new Error("unknown/unsupported texture target");if(void 0===o)throw new Error("need `layer` to attach 3D texture");e.framebufferTextureLayer(e.FRAMEBUFFER,rY(e,t,r),s,0,o)}}return b(1,1,Xq(e)&&l===e.TEXTURE_3D?1:0),{id:a,target:l,format:u,internalFormat:d,type:A,filter:c,getWidth:()=>h,getHeight:()=>g,getDepth:()=>m,getByteCount:()=>tY(r,o,h,g,m),define:b,load:C,mipmap:I,bind:t=>{e.activeTexture(e.TEXTURE0+t),e.bindTexture(l,s)},unbind:t=>{e.activeTexture(e.TEXTURE0+t),e.bindTexture(l,null)},attachFramebuffer:E,detachFramebuffer:(n,r)=>{if(n.bind(),l===e.TEXTURE_2D)e.framebufferTexture2D(e.FRAMEBUFFER,rY(e,t,r),e.TEXTURE_2D,null,0);else{if(!Xq(e)||l!==e.TEXTURE_3D)throw new Error("unknown texture target");e.framebufferTextureLayer(e.FRAMEBUFFER,rY(e,t,r),null,0,0)}},reset:()=>{s=aY(e),f();const[t,n,r]=[h,g,m];h=0,g=0,m=0,b(t,n,r),p&&C(p),y&&I()},destroy:()=>{v||(e.deleteTexture(s),v=!0)}}}(e,r,t,n,o,a)),cubeTexture:(t,n,r)=>i("cubeTexture",function(e,t,n,r){const o=e.TEXTURE_CUBE_MAP,i=e.LINEAR,a=e.RGBA,s=e.RGBA,l=e.UNSIGNED_BYTE;let c=0;const u=e.createTexture();e.bindTexture(o,u);let d=0;tw(t,((t,f)=>{if(!t)return;const p=0,h=function(e,t){switch(t){case"nx":return e.TEXTURE_CUBE_MAP_NEGATIVE_X;case"ny":return e.TEXTURE_CUBE_MAP_NEGATIVE_Y;case"nz":return e.TEXTURE_CUBE_MAP_NEGATIVE_Z;case"px":return e.TEXTURE_CUBE_MAP_POSITIVE_X;case"py":return e.TEXTURE_CUBE_MAP_POSITIVE_Y;case"pz":return e.TEXTURE_CUBE_MAP_POSITIVE_Z}}(e,f),g=new Image;t instanceof File?g.src=URL.createObjectURL(t):$h(t)?t.then((e=>{g.src=URL.createObjectURL(e)})):g.src=t,g.addEventListener("load",(()=>{0===c&&(c=g.width),e.texImage2D(h,p,a,c,c,0,s,l,null),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.bindTexture(o,u),e.texImage2D(h,p,a,s,l,g),d+=1,6===d&&(A||(n?(e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.generateMipmap(o)):e.texParameteri(o,e.TEXTURE_MIN_FILTER,i),e.texParameteri(o,e.TEXTURE_MAG_FILTER,i)),null===r||void 0===r||r(A))})),g.addEventListener("error",(()=>{null===r||void 0===r||r(!0)}))}));let A=!1;return{id:$q(),target:o,format:s,internalFormat:a,type:l,filter:i,getWidth:()=>c,getHeight:()=>c,getDepth:()=>0,getByteCount:()=>6*tY("rgba","ubyte",c,c,0)*(n?2:1),define:()=>{},load:()=>{},mipmap:()=>{},bind:t=>{e.activeTexture(e.TEXTURE0+t),e.bindTexture(o,u)},unbind:t=>{e.activeTexture(e.TEXTURE0+t),e.bindTexture(o,null)},attachFramebuffer:()=>{},detachFramebuffer:()=>{},reset:()=>{},destroy:()=>{A||(e.deleteTexture(u),A=!0)}}}(e,t,n,r)),vertexArray:(t,n,o)=>i("vertexArray",function(e,t,n,r,o){const i=kq();let a=Qq(t),s=Mq(t);function l(){s.bindVertexArray(a),o&&o.bind(),n.bindAttributes(r),s.bindVertexArray(null)}l();let c=!1;return{id:i,bind:()=>{s.bindVertexArray(a)},update:l,reset:()=>{a=Qq(t),s=Mq(t),l()},destroy:()=>{c||(o&&(s.bindVertexArray(a),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),s.deleteVertexArray(a),c=!0)}}}(e,r,t,n,o)),getByteCounts:()=>{let e=0;o.texture.forEach((t=>{e+=t.getByteCount()})),o.cubeTexture.forEach((t=>{e+=t.getByteCount()}));let t=0;o.attribute.forEach((e=>{t+=4*e.length}));let n=0;return o.elements.forEach((e=>{n+=4*e.length})),{texture:e,attribute:t,elements:n}},reset:()=>{o.attribute.forEach((e=>e.reset())),o.elements.forEach((e=>e.reset())),o.framebuffer.forEach((e=>e.reset())),o.renderbuffer.forEach((e=>e.reset())),o.shader.forEach((e=>e.reset())),o.program.forEach((e=>e.reset())),o.vertexArray.forEach((e=>e.reset())),o.texture.forEach((e=>e.reset()))},destroy:()=>{o.attribute.forEach((e=>e.destroy())),o.elements.forEach((e=>e.destroy())),o.framebuffer.forEach((e=>e.destroy())),o.renderbuffer.forEach((e=>e.destroy())),o.shader.forEach((e=>e.destroy())),o.program.forEach((e=>e.destroy())),o.vertexArray.forEach((e=>e.destroy())),o.texture.forEach((e=>e.destroy())),a.clear(),l.clear()}}}const Oq=Bp();class Fq{add(e,t){let n=this.avgs.get(e)||t;return n=function(e,t,n){return e-=e/n,e+t/n}(n,t,this.count),this.avgs.set(e,n),n}get(e){return this.avgs.get(e)}stats(){return Object.fromEntries(this.avgs.entries())}clear(){this.avgs.clear()}constructor(e){this.count=e,this.avgs=new Map}}function Nq(e,t){switch(t){case e.NO_ERROR:return"no error";case e.INVALID_ENUM:return"invalid enum";case e.INVALID_VALUE:return"invalid value";case e.INVALID_OPERATION:return"invalid operation";case e.INVALID_FRAMEBUFFER_OPERATION:return"invalid framebuffer operation";case e.OUT_OF_MEMORY:return"out of memory";case e.CONTEXT_LOST_WEBGL:return"context lost"}return"unknown error"}function Lq(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error(`WebGL error: '${Nq(e,t)}'`)}function Uq(e){e.bindFramebuffer(e.FRAMEBUFFER,null)}const Gq=new Uint8Array(4);function jq(e,t,n){e.getSyncParameter(t,e.SYNC_STATUS)===e.SIGNALED?(e.deleteSync(t),n()):uw.setImmediate(jq,e,t,n)}function zq(e,t){const n=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);n?uw.setImmediate(jq,e,n,t):(console.warn("Could not create a WebGLSync object"),e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,Gq),t())}let Hq=!1;function Vq(e){e.bindFramebuffer(e.FRAMEBUFFER,null),e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,Gq)}function qq(e,t,n,r,o,i){if(Aw&&SV(e),i instanceof Uint8Array)e.readPixels(t,n,r,o,e.RGBA,e.UNSIGNED_BYTE,i);else if(i instanceof Float32Array)e.readPixels(t,n,r,o,e.RGBA,e.FLOAT,i);else{if(!(i instanceof Int32Array&&Xq(e)))throw new Error("unsupported readPixels buffer type");e.readPixels(t,n,r,o,e.RGBA_INTEGER,e.INT,i)}Aw&&Lq(e)}function Yq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=TV(e),r=function(e,t){let n={},r=e.getParameter(e.FRONT_FACE),o=e.getParameter(e.CULL_FACE_MODE),i=e.getParameter(e.DEPTH_WRITEMASK),a=e.getParameter(e.DEPTH_CLEAR_VALUE),s=e.getParameter(e.DEPTH_FUNC),l=e.getParameter(e.COLOR_WRITEMASK),c=e.getParameter(e.COLOR_CLEAR_VALUE),u=e.getParameter(e.BLEND_SRC_RGB),d=e.getParameter(e.BLEND_DST_RGB),A=e.getParameter(e.BLEND_SRC_ALPHA),f=e.getParameter(e.BLEND_DST_ALPHA),p=e.getParameter(e.BLEND_COLOR),h=e.getParameter(e.BLEND_EQUATION_RGB),g=e.getParameter(e.BLEND_EQUATION_ALPHA),m=e.getParameter(e.STENCIL_FUNC),y=e.getParameter(e.STENCIL_VALUE_MASK),v=e.getParameter(e.STENCIL_REF),b=e.getParameter(e.STENCIL_BACK_FUNC),C=e.getParameter(e.STENCIL_BACK_VALUE_MASK),I=e.getParameter(e.STENCIL_BACK_REF),E=e.getParameter(e.STENCIL_WRITEMASK),x=e.getParameter(e.STENCIL_BACK_WRITEMASK),B=e.getParameter(e.STENCIL_FAIL),w=e.getParameter(e.STENCIL_PASS_DEPTH_PASS),_=e.getParameter(e.STENCIL_PASS_DEPTH_FAIL),S=e.getParameter(e.STENCIL_BACK_FAIL),D=e.getParameter(e.STENCIL_BACK_PASS_DEPTH_PASS),T=e.getParameter(e.STENCIL_BACK_PASS_DEPTH_FAIL),k=e.getParameter(e.MAX_VERTEX_ATTRIBS);const Q=[];let M=e.getParameter(e.VIEWPORT),R=e.getParameter(e.SCISSOR_BOX),P=t.clipControl?e.getParameter(t.clipControl.CLIP_ORIGIN):-1,O=t.clipControl?e.getParameter(t.clipControl.CLIP_DEPTH_MODE):-1;const F=()=>{for(let e=0;e<k;++e)Q[e]=0};return F(),{currentProgramId:-1,currentMaterialId:-1,currentRenderItemId:-1,enable:t=>{!0!==n[t]&&(e.enable(t),n[t]=!0)},disable:t=>{!1!==n[t]&&(e.disable(t),n[t]=!1)},frontFace:t=>{t!==r&&(e.frontFace(t),r=t)},cullFace:t=>{t!==o&&(e.cullFace(t),o=t)},depthMask:t=>{t!==i&&(e.depthMask(t),i=t)},clearDepth:t=>{t!==a&&(e.clearDepth(t),a=t)},depthFunc:t=>{t!==s&&(e.depthFunc(t),s=t)},colorMask:(t,n,r,o)=>{t===l[0]&&n===l[1]&&r===l[2]&&o===l[3]||(e.colorMask(t,n,r,o),l[0]=t,l[1]=n,l[2]=r,l[3]=o)},clearColor:(t,n,r,o)=>{t===c[0]&&n===c[1]&&r===c[2]&&o===c[3]||(e.clearColor(t,n,r,o),c[0]=t,c[1]=n,c[2]=r,c[3]=o)},blendFunc:(t,n)=>{t===u&&n===d&&t===A&&n===f||(e.blendFunc(t,n),u=t,d=n,A=t,f=n)},blendFuncSeparate:(t,n,r,o)=>{t===u&&n===d&&r===A&&o===f||(e.blendFuncSeparate(t,n,r,o),u=t,d=n,A=r,f=o)},blendEquation:t=>{t===h&&t===g||(e.blendEquation(t),h=t,g=t)},blendEquationSeparate:(t,n)=>{t===h&&n===g||(e.blendEquationSeparate(t,n),h=t,g=n)},blendColor:(t,n,r,o)=>{t===p[0]&&n===p[1]&&r===p[2]&&o===p[3]||(e.blendColor(t,n,r,o),p[0]=t,p[1]=n,p[2]=r,p[3]=o)},stencilFunc:(t,n,r)=>{t===m&&n===v&&r===y&&t===b&&n===I&&r===C||(e.stencilFunc(t,n,r),m=t,v=n,y=r,b=t,I=n,C=r)},stencilFuncSeparate:(t,n,r,o)=>{t===e.FRONT?n===m&&r===v&&o===y||(e.stencilFuncSeparate(t,n,r,o),m=n,v=r,y=o):t===e.BACK?n===b&&r===I&&o===C||(e.stencilFuncSeparate(t,n,r,o),b=n,I=r,C=o):t===e.FRONT_AND_BACK&&(n===m&&r===v&&o===y&&n===b&&r===I&&o===C||(e.stencilFuncSeparate(t,n,r,o),m=n,v=r,y=o,b=n,I=r,C=o))},stencilMask:t=>{t===E&&t===x||(e.stencilMask(t),E=t,x=t)},stencilMaskSeparate:(t,n)=>{t===e.FRONT?n!==E&&(e.stencilMaskSeparate(t,n),E=n):t===e.BACK?n!==x&&(e.stencilMaskSeparate(t,n),x=n):t===e.FRONT_AND_BACK&&(n===E&&n===x||(e.stencilMaskSeparate(t,n),E=n,x=n))},stencilOp:(t,n,r)=>{t===B&&n===_&&r===w&&t===S&&n===T&&r===D||(e.stencilOp(t,n,r),B=t,_=n,w=r,S=t,T=n,D=r)},stencilOpSeparate:(t,n,r,o)=>{t===e.FRONT?n===B&&r===_&&o===w||(e.stencilOpSeparate(t,n,r,o),B=n,_=r,w=o):t===e.BACK?n===S&&r===T&&o===D||(e.stencilOpSeparate(t,n,r,o),S=n,T=r,D=o):t===e.FRONT_AND_BACK&&(n===B&&r===_&&o===w&&n===S&&r===T&&o===D||(e.stencilOpSeparate(t,n,r,o),B=n,_=r,w=o,S=n,T=r,D=o))},enableVertexAttrib:t=>{e.enableVertexAttribArray(t),Q[t]=1},clearVertexAttribsState:F,disableUnusedVertexAttribs:()=>{for(let t=0;t<k;++t)0===Q[t]&&e.disableVertexAttribArray(t)},viewport:(t,n,r,o)=>{t===M[0]&&n===M[1]&&r===M[2]&&o===M[3]||(e.viewport(t,n,r,o),M[0]=t,M[1]=n,M[2]=r,M[3]=o)},scissor:(t,n,r,o)=>{t===R[0]&&n===R[1]&&r===R[2]&&o===R[3]||(e.scissor(t,n,r,o),R[0]=t,R[1]=n,R[2]=r,R[3]=o)},clipControl:t.clipControl?(e,n)=>{e===P&&n===O||(t.clipControl.clipControl(e,n),P=e,O=n)}:void 0,reset:()=>{n={},r=e.getParameter(e.FRONT_FACE),o=e.getParameter(e.CULL_FACE_MODE),i=e.getParameter(e.DEPTH_WRITEMASK),a=e.getParameter(e.DEPTH_CLEAR_VALUE),s=e.getParameter(e.DEPTH_FUNC),l=e.getParameter(e.COLOR_WRITEMASK),c=e.getParameter(e.COLOR_CLEAR_VALUE),u=e.getParameter(e.BLEND_SRC_RGB),d=e.getParameter(e.BLEND_DST_RGB),A=e.getParameter(e.BLEND_SRC_ALPHA),f=e.getParameter(e.BLEND_DST_ALPHA),p=e.getParameter(e.BLEND_COLOR),h=e.getParameter(e.BLEND_EQUATION_RGB),g=e.getParameter(e.BLEND_EQUATION_ALPHA),m=e.getParameter(e.STENCIL_FUNC),y=e.getParameter(e.STENCIL_VALUE_MASK),v=e.getParameter(e.STENCIL_REF),b=e.getParameter(e.STENCIL_BACK_FUNC),C=e.getParameter(e.STENCIL_BACK_VALUE_MASK),I=e.getParameter(e.STENCIL_BACK_REF),E=e.getParameter(e.STENCIL_WRITEMASK),x=e.getParameter(e.STENCIL_BACK_WRITEMASK),B=e.getParameter(e.STENCIL_FAIL),w=e.getParameter(e.STENCIL_PASS_DEPTH_PASS),_=e.getParameter(e.STENCIL_PASS_DEPTH_FAIL),S=e.getParameter(e.STENCIL_BACK_FAIL),D=e.getParameter(e.STENCIL_BACK_PASS_DEPTH_PASS),T=e.getParameter(e.STENCIL_BACK_PASS_DEPTH_FAIL),k=e.getParameter(e.MAX_VERTEX_ATTRIBS),Q.length=0;for(let e=0;e<k;++e)Q[e]=0;M=e.getParameter(e.VIEWPORT),R=e.getParameter(e.SCISSOR_BOX),P=t.clipControl?e.getParameter(t.clipControl.CLIP_ORIGIN):-1,O=t.clipControl?e.getParameter(t.clipControl.CLIP_DEPTH_MODE):-1}}}(e,n),o={resourceCounts:{attribute:0,elements:0,framebuffer:0,program:0,renderbuffer:0,shader:0,texture:0,cubeTexture:0,vertexArray:0},drawCount:0,instanceCount:0,instancedDrawCount:0,calls:{drawInstanced:0,drawInstancedBase:0,multiDrawInstancedBase:0,counts:0},culled:{lod:0,frustum:0,occlusion:0}},i=Pq(e,r,o,n),a=function(e,t,n,r){var o;const i=t.disjointTimerQuery,a=null!==(o=null===r||void 0===r?void 0:r.avgCount)&&void 0!==o?o:30,s=new Map,l=new Map,c=[],u=new Fq(a),d=new Fq(a);let A=[],f=null,p=!1;const h=()=>{i&&(s.forEach(((e,t)=>{i.deleteQuery(t)})),l.clear(),c.length=0,u.clear(),d.clear(),A=[],f=null,p=!1)},g=()=>{if(!i)return;const e=function(e){return e.disjointTimerQuery?e.disjointTimerQuery.createQuery():null}(t);e&&(i.beginQuery(i.TIME_ELAPSED,e),l.forEach(((t,n)=>{t.queries.push(e)})),s.set(e,{refCount:l.size}),f=e)};return{resolve:()=>{const t=[];if(!i||!A.length)return t;s.forEach(((t,n)=>{if(void 0!==t.timeElapsed)return;const r=i.getQueryParameter(n,i.QUERY_RESULT_AVAILABLE),o=e.getParameter(i.GPU_DISJOINT);if(r&&!o){const e=i.getQueryParameter(n,i.QUERY_RESULT);t.timeElapsed=e}(r||o)&&i.deleteQuery(n)}));const n=[];for(const e of A)if(e.queries.every((e=>{var t;return void 0!==(null===(t=s.get(e))||void 0===t?void 0:t.timeElapsed)}))){let n=0;for(const t of e.queries){const e=s.get(t);n+=e.timeElapsed,e.refCount-=1}if(e.timeElapsed=n,e.root){const r=[],o=(e,t)=>{for(const n of e){const e=n.timeElapsed,r=n.cpu.end-n.cpu.start,i={label:n.label,gpuElapsed:e,gpuAvg:u.add(n.label,e),cpuElapsed:r,cpuAvg:d.add(n.label,r),children:[],calls:n.calls};t.push(i),o(n.children,i.children)}};o(e.children,r);const i=e.cpu.end-e.cpu.start;t.push({label:e.label,gpuElapsed:n,gpuAvg:u.add(e.label,n),cpuElapsed:i,cpuAvg:d.add(e.label,i),children:r,calls:e.calls})}}else n.push(e);return A=n,s.forEach(((e,t)=>{0===e.refCount&&s.delete(t)})),t},mark:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!i)return;if(l.has(e))throw new Error(`Timer mark for '${e}' already exists`);null!==f&&i.endQuery(i.TIME_ELAPSED);const r={label:e,queries:[],children:[],root:null===f,cpu:{start:vp(),end:-1},captureStats:t};if(l.set(e,r),c.length&&c[c.length-1].children.push(r),c.push(r),t){if(p)throw new Error("Already capturing stats");!function(e){e.calls.drawInstanced=0,e.calls.drawInstancedBase=0,e.calls.multiDrawInstancedBase=0,e.calls.counts=0,e.culled.lod=0,e.culled.frustum=0,e.culled.occlusion=0}(n),p=!0}g()},markEnd:e=>{var t;if(!i)return;const r=l.get(e);if(!r)throw new Error(`Timer mark for '${e}' does not exist`);if((null===(t=c.pop())||void 0===t?void 0:t.label)!==e)throw new Error(`Timer mark for '${e}' has pending nested mark`);i.endQuery(i.TIME_ELAPSED),l.delete(e),r.cpu.end=vp(),r.captureStats&&(r.calls={...n.calls},p=!1),A.push(r),l.size>0?g():f=null},stats:()=>({gpu:u.stats(),cpu:d.stats()}),formatedStats:()=>{const e={},t=u.stats(),n=d.stats();for(const r of Object.keys(t)){const o=`${(t[r]/1e3/1e3).toFixed(2)}`,i=`${n[r].toFixed(2)}`;e[r]=`${o} ms | CPU: ${i} ms`}return e},clear:h,destroy:()=>{h()}}}(e,n,o),s={maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),max3dTextureSize:Xq(e)?e.getParameter(e.MAX_3D_TEXTURE_SIZE):0,maxRenderbufferSize:e.getParameter(e.MAX_RENDERBUFFER_SIZE),maxDrawBuffers:n.drawBuffers?e.getParameter(n.drawBuffers.MAX_DRAW_BUFFERS):0,maxTextureImageUnits:e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),maxVertexTextureImageUnits:e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)};if(s.maxVertexTextureImageUnits<8)throw new Error('Need "MAX_VERTEX_TEXTURE_IMAGE_UNITS" >= 8');const l=n.provokingVertex;null===l||void 0===l||l.provokingVertex(l.FIRST_VERTEX_CONVENTION);let c=!1;const u=new $S(0);let d,A=t.pixelScale||1;if(Xq(e)){const t=e.createBuffer();let n,r,o=!1;const i=()=>{e.bindBuffer(e.PIXEL_PACK_BUFFER,t),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,n),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),o=!1,r(),r=void 0,n=void 0};d=(a,s,l,c,u)=>new Promise(((d,A)=>{o?A("Can not call multiple readPixelsAsync at the same time"):(o=!0,e.bindBuffer(e.PIXEL_PACK_BUFFER,t),e.bufferData(e.PIXEL_PACK_BUFFER,l*c*4,e.STREAM_READ),e.readPixels(a,s,l,c,e.RGBA,e.UNSIGNED_BYTE,0),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),r=d,n=u,zq(e,i))}))}else d=async(t,n,r,o,i)=>{qq(e,t,n,r,o,i)};const f=new Set;return{gl:e,isWebGL2:Xq(e),get pixelRatio(){return("undefined"!==typeof window&&window.devicePixelRatio||1)*(A||1)},extensions:n,state:r,stats:o,resources:i,timer:a,get maxTextureSize(){return s.maxTextureSize},get max3dTextureSize(){return s.max3dTextureSize},get maxRenderbufferSize(){return s.maxRenderbufferSize},get maxDrawBuffers(){return s.maxDrawBuffers},get maxTextureImageUnits(){return s.maxTextureImageUnits},namedComputeRenderables:Object.create(null),namedFramebuffers:Object.create(null),namedTextures:Object.create(null),get isContextLost(){return c||e.isContextLost()},contextRestored:u,setContextLost:()=>{c=!0,a.clear()},handleContextRestored:t=>{Object.assign(n,TV(e)),r.reset(),r.currentMaterialId=-1,r.currentProgramId=-1,r.currentRenderItemId=-1,i.reset(),f.forEach((e=>e.reset())),null===t||void 0===t||t(),c=!1,u.next(vp())},setPixelScale:e=>{A=e},createRenderTarget:(t,n,r,o,a,s)=>{const l=function(e,t,n,r){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"uint8",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"nearest",s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"rgba";if("alpha"===s&&!Xq(e))throw new Error("cannot render to alpha format in webgl1");const l=t.framebuffer(),c="fp16"===i?t.texture("image-float16",s,"fp16",a):"float32"===i?t.texture("image-float32",s,"float",a):t.texture("image-uint8",s,"ubyte",a),u=o?Xq(e)?t.renderbuffer("depth32f","depth",n,r):t.renderbuffer("depth16","depth",n,r):null;function d(){c.define(n,r),c.attachFramebuffer(l,"color0"),u&&u.attachFramebuffer(l)}d();let A=!1;return{id:Oq(),texture:c,framebuffer:l,depthRenderbuffer:u,getWidth:()=>n,getHeight:()=>r,bind:()=>{l.bind()},setSize:(e,t)=>{n===e&&r===t||(n=e,r=t,c.define(n,r),u&&u.setSize(n,r))},reset:()=>{d()},destroy:()=>{A||(c.destroy(),l.destroy(),u&&u.destroy(),A=!0)}}}(e,i,t,n,r,o,a,s);return f.add(l),{...l,destroy:()=>{l.destroy(),f.delete(l)}}},unbindFramebuffer:()=>Uq(e),readPixels:(t,n,r,o,i)=>{qq(e,t,n,r,o,i)},readPixelsAsync:d,waitForGpuCommandsComplete:()=>function(e){return new Promise((t=>{Xq(e)?zq(e,t):(Hq||(console.info("Sync object not supported in WebGL"),Hq=!0),Vq(e),t())}))}(e),waitForGpuCommandsCompleteSync:()=>Vq(e),getDrawingBufferPixelData:()=>function(e,t){const n=e.drawingBufferWidth,r=e.drawingBufferHeight,o=new Uint8Array(n*r*4);return Uq(e),t.viewport(0,0,n,r),qq(e,0,0,n,r,o),kV.flipY(kV.create(o,n,r))}(e,r),clear:(t,n,o,i)=>{Uq(e),r.enable(e.SCISSOR_TEST),r.depthMask(!0),r.colorMask(!0,!0,!0,!0),r.clearColor(t,n,o,i),r.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),r.scissor(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)},destroy:t=>{var n,r;i.destroy(),function(e){const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);for(let o=0;o<t;++o)e.activeTexture(e.TEXTURE0+o),e.bindTexture(e.TEXTURE_2D,null),e.bindTexture(e.TEXTURE_CUBE_MAP,null),Xq(e)&&(e.bindTexture(e.TEXTURE_2D_ARRAY,null),e.bindTexture(e.TEXTURE_3D,null));const n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n);const r=e.getParameter(e.MAX_VERTEX_ATTRIBS);for(let o=0;o<r;++o)e.vertexAttribPointer(o,1,e.FLOAT,!1,0,0);e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),Uq(e)}(e),(null===t||void 0===t?void 0:t.doNotForceWebGLContextLoss)||(null===(n=e.getExtension("WEBGL_lose_context"))||void 0===n||n.loseContext(),null===(r=e.getExtension("STACKGL_destroy_context"))||void 0===r||r.destroy())}}}function Xq(e){return"undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext}const Wq="\nattribute vec4 aPosition;\n\nvoid main() {\n    gl_Position = aPosition;\n}",Kq="\nprecision mediump float;\nuniform vec4 uColor;\nuniform sampler2D uTexture;\n\nvoid main() {\n    gl_FragColor = texture2D(uTexture, vec2(0.5, 0.5)) * uColor;\n}",Jq=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]);function Zq(e,t){const n=Bq(e,{type:"vert",source:Wq}),r=Bq(e,{type:"frag",source:Kq});if(!n||!r)return!1;const o=Iq(e);e.attachShader(o,n),e.attachShader(o,r),e.linkProgram(o),e.useProgram(o);const i=e.getAttribLocation(o,"aPosition"),a=e.getUniformLocation(o,"uColor");if(!a)return Aw&&console.log("error getting 'uColor' uniform location"),!1;const s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,Jq,e.STATIC_DRAW),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0);const l=e.createTexture(),c=new Uint8Array([255,255,255,255]);e.bindTexture(e.TEXTURE_2D,l),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,c);const u=e.createTexture();e.bindTexture(e.TEXTURE_2D,u),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,t,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);const d=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,d),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,u,0);if(e.checkFramebufferStatus(e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE)return Aw&&console.log(`error creating framebuffer for '${t}'`),!1;e.bindTexture(e.TEXTURE_2D,l),e.uniform4fv(a,[0,10,20,1]),e.drawArrays(e.TRIANGLES,0,6),e.bindTexture(e.TEXTURE_2D,u),e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(1,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.uniform4fv(a,[0,.1,.05,1]),e.drawArrays(e.TRIANGLES,0,6);const A=new Uint8Array(4);if(e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,A),0!==A[0]||A[1]<248||A[2]<248||A[3]<254)return Aw&&console.log(`not able to actually render to '${t}' texture`),!1;if(t===e.FLOAT){e.bindFramebuffer(e.FRAMEBUFFER,d);const t=new Float32Array(4);e.readPixels(0,0,1,1,e.RGBA,e.FLOAT,t);const n=e.getError();if(n)return Aw&&console.log(`error reading float pixels: '${Nq(e,n)}'`),!1}return!0}const $q=Bp();function eY(e,t,n){switch(t){case"alpha":return Xq(e)&&"float"===n?e.RED:Xq(e)&&"int"===n?e.RED_INTEGER:e.ALPHA;case"rgb":return Xq(e)&&"int"===n?e.RGB_INTEGER:e.RGB;case"rg":if(Xq(e)&&"float"===n)return e.RG;if(Xq(e)&&"int"===n)return e.RG_INTEGER;throw new Error('texture format "rg" requires webgl2 and type "float" or int"');case"rgba":return Xq(e)&&"int"===n?e.RGBA_INTEGER:e.RGBA;case"depth":return e.DEPTH_COMPONENT}}function tY(e,t,n,r,o){const i=function(e){switch(e){case"alpha":return 1;case"rg":return 2;case"rgb":return 3;case"rgba":case"depth":return 4}}(e)*function(e){switch(e){case"ubyte":return 1;case"ushort":case"fp16":return 2;case"float":case"int":return 4}}(t);return i*n*r*(o||1)}function nY(e,t){switch(t){case"nearest":return e.NEAREST;case"linear":return e.LINEAR}}function rY(e,t,n){switch(n){case"depth":return e.DEPTH_ATTACHMENT;case"stencil":return e.STENCIL_ATTACHMENT;case"color0":case 0:return e.COLOR_ATTACHMENT0}if(t.drawBuffers)switch(n){case"color1":case 1:return t.drawBuffers.COLOR_ATTACHMENT1;case"color2":case 2:return t.drawBuffers.COLOR_ATTACHMENT2;case"color3":case 3:return t.drawBuffers.COLOR_ATTACHMENT3;case"color4":case 4:return t.drawBuffers.COLOR_ATTACHMENT4;case"color5":case 5:return t.drawBuffers.COLOR_ATTACHMENT5;case"color6":case 6:return t.drawBuffers.COLOR_ATTACHMENT6;case"color7":case 7:return t.drawBuffers.COLOR_ATTACHMENT7}throw new Error("unknown texture attachment")}function oY(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement}function iY(e,t,n){return t===n.TEXTURE_3D}function aY(e){const t=e.createTexture();if(null===t)throw new Error("Could not create WebGL texture");return t}function sY(e,t,n){const{resources:r}=e,o=[];return Object.keys(t).forEach((e=>{const i=t[e];if("texture"===i.type){const t=n[e];if(t)if("texture"===i.kind)o[o.length]=[e,t.ref.value];else{const n=r.texture(i.kind,i.format,i.dataType,i.filter);n.load(t.ref.value),o[o.length]=[e,n]}}})),o}function lY(e,t,n){const r=new Image;r.onload=function(){n.load(r),Sp.update(t,n)},r.src=e}const cY=-1;function uY(e){var t;const n=null!==(t=null===e||void 0===e?void 0:e.TEXTURE_2D)&&void 0!==t?t:3553;return{id:$q(),target:n,format:cY,internalFormat:0,type:0,filter:0,getWidth:()=>0,getHeight:()=>0,getDepth:()=>0,getByteCount:()=>0,define:()=>{},load:()=>{},mipmap:()=>{},bind:t=>{e&&(e.activeTexture(e.TEXTURE0+t),e.bindTexture(n,null))},unbind:t=>{e&&(e.activeTexture(e.TEXTURE0+t),e.bindTexture(n,null))},attachFramebuffer:()=>{throw new Error("cannot attach null-texture to a framebuffer")},detachFramebuffer:()=>{throw new Error("cannot detach null-texture from a framebuffer")},reset:()=>{},destroy:()=>{}}}function dY(e,t,n,r){const o=function(e,t,n,r){switch(n.granularity){case"uniform":return function(e,t,n){return function(e,t){return t?(Sp.update(t.uColor,Jp.toVec3Normalized(t.uColor.ref.value,e)),Sp.updateIfChanged(t.dColorType,"uniform"),t):{uColor:Sp.create(Jp.toVec3Normalized(qh(),e)),tColor:Sp.create({array:new Uint8Array(3),width:1,height:1}),tColorGrid:Sp.create(uY()),tPalette:Sp.create({array:new Uint8Array(3),width:1,height:1}),uColorTexDim:Sp.create(Wh.create(1,1)),uColorGridDim:Sp.create(qh.create(1,1,1)),uColorGridTransform:Sp.create(Kh.create(0,0,0,1)),dColorType:Sp.create("uniform"),dUsePalette:Sp.create(!1)}}(t(IT,!1),n)}(0,n.color,r);case"instance":return e.nonInstanceable?fY(e,n.color,r):function(e,t,n){const{instanceCount:r}=e,o=gV(Math.max(1,r),3,Uint8Array,n&&n.tColor.ref.value.array);e.reset();for(;e.hasNext;){const{location:n,isSecondary:r,instanceIndex:i}=e.move();Jp.toArray(t(n,r),o.array,3*i),e.skipInstance()}return AY(o,"instance",n)}(e,n.color,r);case"group":return fY(e,n.color,r);case"groupInstance":return function(e,t,n){const{groupCount:r,instanceCount:o,hasLocation2:i}=e,a=o*r*(i?2:1),s=gV(Math.max(1,a),3,Uint8Array,n&&n.tColor.ref.value.array);e.reset();const l=i?6:3;for(;e.hasNext;){const{location:n,location2:r,isSecondary:o,index:a}=e.move();Jp.toArray(t(n,o),s.array,a*l),i&&Jp.toArray(t(r,o),s.array,a*l+3)}return AY(s,"groupInstance",n)}(e,n.color,r);case"vertex":return function(e,t,n){const{groupCount:r,stride:o}=e,i=gV(Math.max(1,r),3,Uint8Array,n&&n.tColor.ref.value.array);e.reset(),e.voidInstances();for(;e.hasNext&&!e.isNextNewInstance;){const{location:n,isSecondary:r,groupIndex:a}=e.move(),s=t(n,r);for(let e=0;e<o;++e)Jp.toArray(s,i.array,3*(a+e))}return AY(i,"vertex",n)}(t,n.color,r);case"vertexInstance":return function(e,t,n){const{groupCount:r,instanceCount:o,stride:i}=e,a=o*r,s=gV(Math.max(1,a),3,Uint8Array,n&&n.tColor.ref.value.array);e.reset();for(;e.hasNext;){const{location:n,isSecondary:r,index:o}=e.move(),a=t(n,r);for(let e=0;e<i;++e)Jp.toArray(a,s.array,3*(o+e))}return AY(s,"vertexInstance",n)}(t,n.color,r);case"volume":return pY(n.grid,"volume",r);case"volumeInstance":return pY(n.grid,"volumeInstance",r);case"direct":return function(e){return e?(Sp.updateIfChanged(e.dColorType,"direct"),e):{uColor:Sp.create(qh()),tColor:Sp.create({array:new Uint8Array(3),width:1,height:1}),tColorGrid:Sp.create(uY()),tPalette:Sp.create({array:new Uint8Array(3),width:1,height:1}),uColorTexDim:Sp.create(Wh.create(1,1)),uColorGridDim:Sp.create(qh.create(1,1,1)),uColorGridTransform:Sp.create(Kh.create(0,0,0,1)),dColorType:Sp.create("direct"),dUsePalette:Sp.create(!1)}}(r)}}(e,t,n,r);return n.palette?(Sp.updateIfChanged(o.dUsePalette,!0),function(e,t){let n=!0;const r=t.ref.value;if(e.colors.length!==r.width||r.filter!==e.filter)n=!1;else{const t=r.array;let o=0;for(const r of e.colors){const[e,i,a]=Jp.toRgb(r);if(t[o++]!==e||t[o++]!==i||t[o++]!==a){n=!1;break}}}if(n)return;const o=new Uint8Array(3*e.colors.length);let i=0;for(const a of e.colors){const[e,t,n]=Jp.toRgb(a);o[i++]=e,o[i++]=t,o[i++]=n}Sp.update(t,{array:o,height:1,width:e.colors.length,filter:e.filter})}(n.palette,o.tPalette)):Sp.updateIfChanged(o.dUsePalette,!1),o}function AY(e,t,n){return n?(Sp.update(n.tColor,e),Sp.update(n.uColorTexDim,Wh.create(e.width,e.height)),Sp.updateIfChanged(n.dColorType,t),n):{uColor:Sp.create(qh()),tColor:Sp.create(e),tColorGrid:Sp.create(uY()),tPalette:Sp.create({array:new Uint8Array(3),width:1,height:1}),uColorTexDim:Sp.create(Wh.create(e.width,e.height)),uColorGridDim:Sp.create(qh.create(1,1,1)),uColorGridTransform:Sp.create(Kh.create(0,0,0,1)),dColorType:Sp.create(t),dUsePalette:Sp.create(!1)}}function fY(e,t,n){const{groupCount:r,hasLocation2:o}=e,i=gV(Math.max(1,r*(o?2:1)),3,Uint8Array,n&&n.tColor.ref.value.array);e.reset();const a=o?6:3;for(;e.hasNext&&!e.isNextNewInstance;){const{location:n,location2:r,isSecondary:s,groupIndex:l}=e.move();Jp.toArray(t(n,s),i.array,l*a),o&&Jp.toArray(t(r,s),i.array,l*a+3)}return AY(i,"group",n)}function pY(e,t,n){const{colors:r,dimension:o,transform:i}=e,a=r.getWidth(),s=r.getHeight();return n?(Sp.update(n.tColorGrid,r),Sp.update(n.uColorTexDim,Wh.create(a,s)),Sp.update(n.uColorGridDim,qh.clone(o)),Sp.update(n.uColorGridTransform,Kh.clone(i)),Sp.updateIfChanged(n.dColorType,t),n):{uColor:Sp.create(qh()),tColor:Sp.create({array:new Uint8Array(3),width:1,height:1}),tColorGrid:Sp.create(r),tPalette:Sp.create({array:new Uint8Array(3),width:1,height:1}),uColorTexDim:Sp.create(Wh.create(a,s)),uColorGridDim:Sp.create(qh.clone(o)),uColorGridTransform:Sp.create(Kh.clone(i)),dColorType:Sp.create(t),dUsePalette:Sp.create(!1)}}function hY(e,t,n,r){for(let o=t;o<n;++o)Jp.toArray(r,e,4*o),e[4*o+3]=255;return!0}function gY(e,t,n){return e.fill(0,4*t,4*n),!0}const mY={array:new Uint8Array(4),width:1,height:1};function yY(e){return e?(Sp.update(e.tOverpaint,mY),Sp.update(e.uOverpaintTexDim,Wh.create(1,1)),e):{tOverpaint:Sp.create(mY),uOverpaintTexDim:Sp.create(Wh.create(1,1)),dOverpaint:Sp.create(!1),tOverpaintGrid:Sp.create(uY()),uOverpaintGridDim:Sp.create(qh.create(1,1,1)),uOverpaintGridTransform:Sp.create(Kh.create(0,0,0,1)),dOverpaintType:Sp.create("groupInstance"),uOverpaintStrength:Sp.create(1)}}function vY(e,t,n,r){for(let o=t;o<n;++o)e[o]=255*r;return!0}function bY(e,t){if(0===t||e.length<t)return 0;let n=0;for(let r=0;r<t;++r)n+=e[r];return n/(255*t)}const CY={array:new Uint8Array(1),width:1,height:1};function IY(e){return e?(Sp.update(e.tTransparency,CY),Sp.update(e.uTransparencyTexDim,Wh.create(1,1)),e):{tTransparency:Sp.create(CY),uTransparencyTexDim:Sp.create(Wh.create(1,1)),dTransparency:Sp.create(!1),transparencyAverage:Sp.create(0),tTransparencyGrid:Sp.create(uY()),uTransparencyGridDim:Sp.create(qh.create(1,1,1)),uTransparencyGridTransform:Sp.create(Kh.create(0,0,0,1)),dTransparencyType:Sp.create("groupInstance"),uTransparencyStrength:Sp.create(1)}}function EY(e,t,n,r){return e.fill(r,t,n),!0}const xY={array:new Uint8Array(1),width:1,height:1};function BY(e){return e?(Sp.update(e.tClipping,xY),Sp.update(e.uClippingTexDim,Wh.create(1,1)),Sp.updateIfChanged(e.dClipping,!1),e):{tClipping:Sp.create(xY),uClippingTexDim:Sp.create(Wh.create(1,1)),dClipping:Sp.create(!1),dClippingType:Sp.create("groupInstance")}}function wY(e,t,n,r){for(let o=t;o<n;++o)Tk.toArray(r,e,4*o),e[4*o+3]=255;return!0}function _Y(e,t,n){return e.fill(0,4*t,4*n),!0}const SY={array:new Uint8Array(4),width:1,height:1};function DY(e){return e?(Sp.update(e.tSubstance,SY),Sp.update(e.uSubstanceTexDim,Wh.create(1,1)),e):{tSubstance:Sp.create(SY),uSubstanceTexDim:Sp.create(Wh.create(1,1)),dSubstance:Sp.create(!1),tSubstanceGrid:Sp.create(uY()),uSubstanceGridDim:Sp.create(qh.create(1,1,1)),uSubstanceGridTransform:Sp.create(Kh.create(0,0,0,1)),dSubstanceType:Sp.create("groupInstance"),uSubstanceStrength:Sp.create(1)}}function TY(e,t,n,r){for(let o=t;o<n;++o)e[o]=255*r;return!0}function kY(e,t){if(0===t||e.length<t)return 0;let n=0;for(let r=0;r<t;++r)n+=e[r];return n/(255*t)}const QY={array:new Uint8Array(1),width:1,height:1};function MY(e){return e?(Sp.update(e.tEmissive,QY),Sp.update(e.uEmissiveTexDim,Wh.create(1,1)),e):{tEmissive:Sp.create(QY),uEmissiveTexDim:Sp.create(Wh.create(1,1)),dEmissive:Sp.create(!1),emissiveAverage:Sp.create(0),tEmissiveGrid:Sp.create(uY()),uEmissiveGridDim:Sp.create(qh.create(1,1,1)),uEmissiveGridTransform:Sp.create(Kh.create(0,0,0,1)),dEmissiveType:Sp.create("groupInstance"),uEmissiveStrength:Sp.create(1)}}var RY;!function(e){function t(e,t,n,o,i,a,s){return s?function(e,t,n,r,o,i,a){return a.vertexCount=o,a.triangleCount=i,Sp.update(a.vertexBuffer,e),Sp.update(a.indexBuffer,t),Sp.update(a.normalBuffer,n),Sp.update(a.groupBuffer,r),a}(e,t,n,o,i,a,s):function(e,t,n,o,i,a){const s=YT();let l,c=-1,u=-1;const d={kind:"mesh",vertexCount:i,triangleCount:a,vertexBuffer:Sp.create(e),indexBuffer:Sp.create(t),normalBuffer:Sp.create(n),groupBuffer:Sp.create(o),varyingGroup:Sp.create(!1),get boundingSphere(){const e=r(d);if(e!==c){const t=CV(d.vertexBuffer.ref.value,d.vertexCount,1);YT.copy(s,t),c=e}return s},get groupMapping(){return d.groupBuffer.ref.version!==u&&(l=fV(d.groupBuffer.ref.value,d.vertexCount),u=d.groupBuffer.ref.version),l},setBoundingSphere(e){YT.copy(s,e),c=r(d)},meta:{}};return d}(e,t,n,o,i,a)}function n(e){return t(e?e.vertexBuffer.ref.value:new Float32Array(0),e?e.indexBuffer.ref.value:new Uint32Array(0),e?e.normalBuffer.ref.value:new Float32Array(0),e?e.groupBuffer.ref.value:new Float32Array(0),0,0,e)}function r(e){return Fh([e.vertexCount,e.triangleCount,e.vertexBuffer.ref.version,e.indexBuffer.ref.version,e.normalBuffer.ref.version,e.groupBuffer.ref.version])}e.create=t,e.createEmpty=n,e.computeNormals=function(e){const{vertexCount:t,triangleCount:n}=e,r=e.vertexBuffer.ref.value,o=e.indexBuffer.ref.value,i=e.normalBuffer.ref.value.length>=3*t?e.normalBuffer.ref.value:new Float32Array(3*t);i===e.normalBuffer.ref.value&&i.fill(0,0,3*t),AV(r,o,i,t,n),Sp.update(e.normalBuffer,i)},e.checkForDuplicateVertices=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const n=e.vertexBuffer.ref.value,r=new Map,o=(e,t)=>`${e[0].toFixed(t)}|${e[1].toFixed(t)}|${e[2].toFixed(t)}`;let i=0;const a=qh();for(let s=0,l=e.vertexCount;s<l;++s){qh.fromArray(a,n,3*s);const e=o(a,t),l=r.get(e);void 0!==l?(i+=1,r.set(e,l+1)):r.set(e,1)}return i};const o=Xh();function i(e){const{vertexCount:t,triangleCount:n}=e,r=e.indexBuffer.ref.value,o=[];for(let i=0;i<t;++i)o[i]=[];for(let i=0;i<n;++i){const e=r[3*i],t=r[3*i+1],n=r[3*i+2];tS(o[e],t),tS(o[e],n),tS(o[t],e),tS(o[t],n),tS(o[n],e),tS(o[n],t)}return o}function a(e){const{triangleCount:t}=e,n=e.indexBuffer.ref.value,r=new Map,o=(e,t)=>{const n=Ph(e,t),o=r.get(n)||0;r.set(n,o+1)};for(let i=0;i<t;++i){const e=n[3*i],t=n[3*i+1],r=n[3*i+2];o(e,t),o(e,r),o(t,r)}return r}function s(e){const t=new Set,n=[0,0];return e.forEach(((e,r)=>{1===e&&(Oh(n,r),t.add(n[0]),t.add(n[1]))})),t}function l(e,t,n){const r=new Map,o=(e,t)=>{r.has(e)?tS(r.get(e),t):r.set(e,[t])};return t.forEach((r=>{const i=e[r];for(const e of i)t.has(e)&&1===n.get(Ph(r,e))&&o(r,e)})),r}function c(e,t,n,r){var o;const{vertexBuffer:i,indexBuffer:a,normalBuffer:s,triangleCount:l}=e,c=i.ref.value,u=a.ref.value,d=s.ref.value,A=gh.create(Uint32Array,3,1024,l);let f=0;for(let S=0;S<l;++S)gh.add3(A,u[3*S],u[3*S+1],u[3*S+2]),f+=1;const p=qh(),h=qh(),g=qh(),m=qh(),y=qh(),v=qh(),b=qh(),C=qh(),I=qh(),E=qh(),x=Np(120),B=new Set,w=Array.from(n.keys()).filter((e=>n.get(e).length<2)).map((e=>{const t=n.get(e);return qh.fromArray(p,c,3*e),qh.fromArray(h,c,3*t[0]),qh.fromArray(g,c,3*t[1]),qh.sub(y,h,p),qh.sub(v,g,p),[e,qh.angle(y,v)]}));w.sort(((e,t)=>{let[,n]=e,[,r]=t;return n-r}));for(const[S,D]of w){if(B.has(S)||D>x)continue;const e=n.get(S);if(t[e[0]].includes(e[1])&&!(null===(o=n.get(e[0]))||void 0===o?void 0:o.includes(e[1])))continue;if(qh.fromArray(p,c,3*S),qh.fromArray(h,c,3*e[0]),qh.fromArray(g,c,3*e[1]),qh.sub(y,h,p),qh.sub(v,g,p),qh.add(C,y,v),qh.squaredDistance(p,h)>=r)continue;let i=!1;for(const n of t[S])if(!e.includes(n)&&(qh.fromArray(m,c,3*n),qh.sub(b,m,p),qh.dot(C,b)<0)){i=!0;break}i&&(qh.fromArray(I,d,3*S),qh.triangleNormal(E,p,h,g),qh.dot(E,I)>0?gh.add3(A,S,e[0],e[1]):gh.add3(A,e[1],e[0],S),B.add(S),B.add(e[0]),B.add(e[1]),f+=1)}const _=gh.compact(A);return e.triangleCount=f,Sp.update(a,_),e}function u(e,t){const n=e.vertexCount,r=t.instanceCount.ref.value,o=BT(),i=o.position,a=o.normal,s=e.vertexBuffer.ref.value,l=e.normalBuffer.ref.value,c=t.aTransform.ref.value;return xT(n,r,1,((e,t)=>(t<0?(qh.fromArray(i,s,3*e),qh.fromArray(a,l,3*e)):(qh.transformMat4Offset(i,s,c,0,3*e,16*t),qh.transformDirectionOffset(a,l,c,0,3*e,16*t)),o)))}function d(e,t,n,r,o){const{instanceCount:i,groupCount:a}=n,s=dY(n,u(e,t),r.color),l=o.instanceGranularity?wV(i,"instance"):wV(i*a,"groupInstance"),c=yY(),d=IY(),A=MY(),f=DY(),p=BY(),h={drawCount:3*e.triangleCount,vertexCount:e.vertexCount,groupCount:a,instanceCount:i},g=YT.clone(e.boundingSphere),m=EV(g,t.aTransform.ref.value,i,0);return{dGeometryType:Sp.create("mesh"),aPosition:e.vertexBuffer,aNormal:e.normalBuffer,aGroup:e.groupBuffer,elements:e.indexBuffer,dVaryingGroup:e.varyingGroup,boundingSphere:Sp.create(m),invariantBoundingSphere:Sp.create(g),uInvariantBoundingSphere:Sp.create(Kh.ofSphere(g)),...s,...l,...c,...d,...A,...f,...p,...t,...Fk.createValues(o,h),uDoubleSided:Sp.create(o.doubleSided),dFlatShaded:Sp.create(o.flatShaded),dFlipSided:Sp.create(o.flipSided),dIgnoreLight:Sp.create(o.ignoreLight),dCelShaded:Sp.create(o.celShaded),dXrayShaded:Sp.create("inverted"===o.xrayShaded?"inverted":!0===o.xrayShaded?"on":"off"),dTransparentBackfaces:Sp.create(o.transparentBackfaces),uBumpFrequency:Sp.create(o.bumpFrequency),uBumpAmplitude:Sp.create(o.bumpAmplitude),meta:Sp.create(e.meta)}}function A(e,t){Fk.updateRenderableState(e,t),e.opaque=e.opaque&&!t.xrayShaded,e.writeDepth=e.opaque}e.transform=function(e,t){const n=e.vertexBuffer.ref.value;if(aV(t,n,0,e.vertexCount),!Yh.isTranslationAndUniformScaling(t)){!function(e,t,n,r){for(let o=0,i=3*r;o<i;o+=3)qh.fromArray(iV,t,n+o),qh.transformMat3(iV,iV,e),qh.toArray(iV,t,n+o)}(Xh.directionTransform(o,t),e.normalBuffer.ref.value,0,e.vertexCount)}Sp.update(e.vertexBuffer,n)},e.getOriginalData=function(e){const{originalData:t}="kind"in e?e.meta:e.meta.ref.value;return t},e.uniformTriangleGroup=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{indexBuffer:n,vertexBuffer:r,groupBuffer:o,normalBuffer:i,triangleCount:a,vertexCount:s}=e,l=n.ref.value,c=r.ref.value,u=o.ref.value,d=i.ref.value,A=gh.create(Uint32Array,3,1024,a),f=gh.create(Float32Array,3,1024,c);f.currentIndex=3*s,f.elementCount=s;const p=gh.create(Float32Array,3,1024,d);p.currentIndex=3*s,p.elementCount=s;const h=gh.create(Float32Array,1,1024,u);h.currentIndex=s,h.elementCount=s;const g=qh(),m=qh(),y=qh(),v=qh(),b=qh(),C=qh();function I(e){qh.fromArray(g,c,3*e),qh.fromArray(v,d,3*e),gh.add3(f,g[0],g[1],g[2]),gh.add3(p,v[0],v[1],v[2])}function E(e,t){qh.fromArray(g,c,3*e),qh.fromArray(m,c,3*t),qh.scale(g,qh.add(g,g,m),.5),qh.fromArray(v,d,3*e),qh.fromArray(b,d,3*t),qh.scale(v,qh.add(v,v,b),.5),gh.add3(f,g[0],g[1],g[2]),gh.add3(p,v[0],v[1],v[2])}function x(e,t,n){qh.fromArray(g,c,3*e),qh.fromArray(m,c,3*t),qh.fromArray(y,c,3*n),qh.scale(g,qh.add(g,qh.add(g,g,m),y),1/3),qh.fromArray(v,d,3*e),qh.fromArray(b,d,3*t),qh.fromArray(C,d,3*n),qh.scale(v,qh.add(v,qh.add(v,v,b),C),1/3),gh.add3(f,g[0],g[1],g[2]),gh.add3(p,v[0],v[1],v[2])}function B(e,t,n,r,o){++_,I(e),E(e,t),E(e,n),gh.add3(A,w,w+1,w+2);for(let i=0;i<3;++i)gh.add(h,r);w+=3,_+=2,I(t),I(n),E(e,t),E(e,n),gh.add3(A,w,w+1,w+3),gh.add3(A,w,w+3,w+2);for(let i=0;i<4;++i)gh.add(h,o);w+=4}let w=s,_=0;if(t)for(let Q=0,M=a;Q<M;++Q){const e=l[3*Q],t=l[3*Q+1],n=l[3*Q+2],r=u[e],o=u[t],i=u[n];if(r===o&&r===i)++_,gh.add3(A,e,t,n);else if(r===o)B(n,e,t,i,r);else if(r===i)B(t,n,e,o,i);else if(o===i)B(e,t,n,r,o);else{_+=2,I(e),E(e,t),E(e,n),x(e,t,n),gh.add3(A,w,w+1,w+3),gh.add3(A,w,w+3,w+2);for(let e=0;e<4;++e)gh.add(h,r);w+=4,_+=2,I(t),E(t,n),E(t,e),x(e,t,n),gh.add3(A,w,w+1,w+3),gh.add3(A,w,w+3,w+2);for(let e=0;e<4;++e)gh.add(h,o);w+=4,_+=2,I(n),E(n,t),E(n,e),x(e,t,n),gh.add3(A,w+3,w+1,w),gh.add3(A,w+2,w+3,w);for(let e=0;e<4;++e)gh.add(h,i);w+=4}}else for(let Q=0,M=a;Q<M;++Q){const e=l[3*Q],t=l[3*Q+1],n=l[3*Q+2],r=u[e],o=u[t],i=u[n];if(r!==o||r!==i){++_,I(e),I(t),I(n),gh.add3(A,w,w+1,w+2);const a=o===i?o:r;for(let e=0;e<3;++e)gh.add(h,a);w+=3}else++_,gh.add3(A,e,t,n)}const S=gh.compact(A),D=gh.compact(f),T=gh.compact(p),k=gh.compact(h);return e.vertexCount=w,e.triangleCount=_,Sp.update(r,D),Sp.update(o,k),Sp.update(n,S),Sp.update(i,T),e.meta.originalData={indexBuffer:l,vertexCount:s,triangleCount:a},e},e.smoothEdges=function(e,t){!function(e,t){const{indexBuffer:n,triangleCount:r}=e,o=n.ref.value,i=gh.create(Uint32Array,3,1024,r);let a=0;for(let l=0;l<r;++l){const e=o[3*l],n=o[3*l+1],r=o[3*l+2];2!==t[e].length&&2!==t[n].length&&2!==t[r].length&&(gh.add3(i,e,n,r),a+=1)}const s=gh.compact(i);e.triangleCount=a,Sp.update(n,s)}(e,i(e));for(let r=0;r<10;++r){const n=e.triangleCount,r=a(e),o=i(e);if(c(e,o,l(o,s(r),r),t.maxNewEdgeLength*t.maxNewEdgeLength),e.triangleCount===n)break}const n=a(e);return function(e,t,n){const{iterations:r,lambda:o}=n,i=qh(),a=qh(),s=qh(),l=qh(),c=-o;let u=new Float32Array(e.vertexBuffer.ref.value.length);const d=n=>{const r=e.vertexBuffer.ref.value;u.set(r),t.forEach(((e,t)=>{if(2!==e.length)return;qh.fromArray(i,r,3*t),qh.fromArray(a,r,3*e[0]),qh.fromArray(s,r,3*e[1]);const o=1/qh.distance(i,a),c=1/qh.distance(i,s);qh.scale(a,a,o),qh.scale(s,s,c),qh.add(l,a,s),qh.scale(l,l,1/(o+c)),qh.sub(l,l,i),qh.scale(l,l,n),qh.add(l,i,l),qh.toArray(l,u,3*t)}));const o=e.vertexBuffer.ref.value;Sp.update(e.vertexBuffer,u),u=o};for(let A=0;A<r;++A)d(o),d(c)}(e,l(i(e),s(n),n),{iterations:t.iterations,lambda:.5}),e},e.Params={...Fk.Params,doubleSided:U_.Boolean(!1,Fk.CustomQualityParamInfo),flipSided:U_.Boolean(!1,Fk.ShadingCategory),flatShaded:U_.Boolean(!1,Fk.ShadingCategory),ignoreLight:U_.Boolean(!1,Fk.ShadingCategory),celShaded:U_.Boolean(!1,Fk.ShadingCategory),xrayShaded:U_.Select(!1,[[!1,"Off"],[!0,"On"],["inverted","Inverted"]],Fk.ShadingCategory),transparentBackfaces:U_.Select("off",U_.arrayToOptions(["off","on","opaque"]),Fk.ShadingCategory),bumpFrequency:U_.Numeric(0,{min:0,max:10,step:.1},Fk.ShadingCategory),bumpAmplitude:U_.Numeric(1,{min:0,max:5,step:.1},Fk.ShadingCategory)},e.Utils={Params:e.Params,createEmpty:n,createValues:d,createValuesSimple:function(t,n,r,o,i){const a=Fk.createSimple(r,o,i),s={...U_.getDefaultValues(e.Params),...n};return d(t,a.transform,a.locationIterator,a.theme,s)},updateValues:function(e,t){Fk.updateValues(e,t),Sp.updateIfChanged(e.uDoubleSided,t.doubleSided),Sp.updateIfChanged(e.dFlatShaded,t.flatShaded),Sp.updateIfChanged(e.dFlipSided,t.flipSided),Sp.updateIfChanged(e.dIgnoreLight,t.ignoreLight),Sp.updateIfChanged(e.dCelShaded,t.celShaded),Sp.updateIfChanged(e.dXrayShaded,"inverted"===t.xrayShaded?"inverted":!0===t.xrayShaded?"on":"off"),Sp.updateIfChanged(e.dTransparentBackfaces,t.transparentBackfaces),Sp.updateIfChanged(e.uBumpFrequency,t.bumpFrequency),Sp.updateIfChanged(e.uBumpAmplitude,t.bumpAmplitude)},updateBoundingSphere:function(e,t){const n=YT.clone(t.boundingSphere),r=EV(n,e.aTransform.ref.value,e.instanceCount.ref.value,0);YT.equals(r,e.boundingSphere.ref.value)||Sp.update(e.boundingSphere,r);YT.equals(n,e.invariantBoundingSphere.ref.value)||(Sp.update(e.invariantBoundingSphere,n),Sp.update(e.uInvariantBoundingSphere,Kh.fromSphere(e.uInvariantBoundingSphere.ref.value,n)))},createRenderableState:function(e){const t=Fk.createRenderableState(e);return A(t,e),t},updateRenderableState:A,createPositionIterator:u}}(RY||(RY={}));const PY={radius:1,detail:0};function OY(e,t,n){const{radius:r,detail:o}={...PY,...n},i=function(){const e=[],t=[],n=new Map;function r(t){const r=`${t[0].toFixed(5)}|${t[1].toFixed(5)}|${t[2].toFixed(5)}`;let o=n.get(r);return void 0===o&&(o=e.length/3,n.set(r,o),e.push(...t)),o}return{vertices:e,indices:t,add:(e,n,o)=>{t.push(r(e),r(n),r(o))}}}(),{vertices:a,indices:s}=i;!function(n){const r=qh(),o=qh(),i=qh();for(let a=0;a<t.length;a+=3)qh.fromArray(r,e,3*t[a+0]),qh.fromArray(o,e,3*t[a+1]),qh.fromArray(i,e,3*t[a+2]),c(r,o,i,n)}(o),function(e,t){for(let n=0,r=e.length;n<r;n+=3)qh.fromArray(iV,e,n),qh.normalize(iV,iV),qh.scale(iV,iV,t),qh.toArray(iV,e,n)}(a,r);const l=new Float32Array(a.length);return AV(a,s,l,a.length/3,s.length/3),{vertices:new Float32Array(a),normals:new Float32Array(l),indices:new Uint32Array(s)};function c(e,t,n,r){const o=Math.pow(2,r),a=[];for(let i=0;i<=o;++i){a[i]=[];const r=qh();qh.lerp(r,e,n,i/o);const s=qh();qh.lerp(s,t,n,i/o);const l=o-i;for(let e=0;e<=l;++e)if(0===e&&i===o)a[i][e]=r;else{const t=qh();qh.lerp(t,r,s,e/l),a[i][e]=t}}for(let s=0;s<o;++s)for(let e=0;e<2*(o-s)-1;++e){const t=Math.floor(e/2);e%2===0?i.add(a[s][t+1],a[s+1][t],a[s][t]):i.add(a[s][t+1],a[s+1][t+1],a[s+1][t])}}}const FY=qh(),NY=qh(),LY=qh();function UY(e,t){const n=t.length,r=jY(n/3);for(let o=0;o<n;o+=3)qh.fromArray(FY,e,3*t[o]),qh.fromArray(NY,e,3*t[o+1]),qh.fromArray(LY,e,3*t[o+2]),r.add(FY,NY,LY);return r.getPrimitive()}const GY=qh();function jY(e,t){void 0===t&&(t=3*e);const n=new Float32Array(3*t),r=new Float32Array(3*t),o=new Uint32Array(3*e);let i=0,a=0;return{add:(e,t,s)=>{qh.toArray(e,n,i),qh.toArray(t,n,i+3),qh.toArray(s,n,i+6),qh.triangleNormal(GY,e,t,s);for(let n=0;n<3;++n)qh.toArray(GY,r,i+3*n),o[a+n]=i/3+n;i+=9,a+=3},addQuad:(e,t,s,l)=>{qh.toArray(e,n,i),qh.toArray(t,n,i+3),qh.toArray(s,n,i+6),qh.toArray(l,n,i+9),qh.triangleNormal(GY,e,t,s);for(let n=0;n<4;++n)qh.toArray(GY,r,i+3*n);const c=i/3;o[a]=c,o[a+1]=c+1,o[a+2]=c+2,o[a+3]=c+2,o[a+4]=c+3,o[a+5]=c,i+=12,a+=6},getPrimitive:()=>({vertices:n,normals:r,indices:o})}}const zY=qh(),HY=Xh();function VY(e,t){const{vertices:n,normals:r}=e,o=Xh.directionTransform(HY,t);for(let i=0,a=n.length;i<a;i+=3)qh.transformMat4(zY,qh.fromArray(zY,n,i),t),qh.toArray(zY,n,i),qh.transformMat3(zY,qh.fromArray(zY,r,i),o),qh.toArray(zY,r,i);return e}function qY(e,t){return{vertices:e,edges:t}}function YY(e){return{vertices:new Float32Array(e.vertices),edges:new Uint32Array(e.edges)}}const XY=qh.zero();function WY(e,t){const{vertices:n}=e;for(let r=0,o=n.length;r<o;r+=3)qh.transformMat4(XY,qh.fromArray(XY,n,r),t),qh.toArray(XY,n,r);return e}const KY=(1+Math.sqrt(5))/2,JY=[-1,KY,0,1,KY,0,-1,-KY,0,1,-KY,0,0,-1,KY,0,1,KY,0,-1,-KY,0,1,-KY,KY,0,-1,KY,0,1,-KY,0,-1,-KY,0,1],ZY=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];let $Y;qY(JY,[0,11,5,11,0,5,1,5,0,1,1,7,0,7,7,10,0,10,10,11,5,9,4,11,2,10,6,7,1,8,3,9,4,9,3,4,2,4,2,3,2,6,3,6,6,8,3,8,8,9,4,5,2,11,6,10,7,8,1,9]);const{vertices:eX,indices:tX}=($Y||($Y=UY(JY,ZY)),$Y);function nX(e){return 10*Math.pow(Math.pow(2,e),2)+2}const rX=new Map,oX=Yh.identity();function iX(e){let t=rX.get(e);return void 0===t&&(t=function(e){return OY(eX,tX,{detail:e,radius:1})}(e),rX.set(e,t)),t}function aX(e,t,n,r){ZX.addPrimitive(e,function(e,t,n){return Yh.scaleUniformly(e,Yh.fromTranslation(e,t),n)}(oX,t,n),iX(r))}const sX={radiusTop:1,radiusBottom:1,height:1,radialSegments:8,heightSegments:1,topCap:!1,bottomCap:!1,thetaStart:0,thetaLength:2*Math.PI};function lX(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;const r=new Float32Array(3*e),o=-1===n?e<=4?Math.sqrt(2)/2:.6:n,i=t?1:0;for(let a=0,s=e;a<s;++a){const t=(2*a+i)/e*Math.PI;r[3*a]=Math.cos(t)*o,r[3*a+1]=Math.sin(t)*o,r[3*a+2]=0}return r}const cX=qh(),uX=qh(),dX=qh(),AX=qh(),fX=qh(),pX=qh(),hX={height:1,topCap:!0,bottomCap:!0};function gX(e,t){const n=e.length/3;if(n<3)throw new Error("need at least 3 points to build a prism");const{height:r,topCap:o,bottomCap:i}={...hX,...t};let a=2*n,s=4*n;const l=(o?1:0)+(i?1:0);3===n?(a+=l,s+=3*l):4===n?(a+=2*l,s+=4*l):(a+=l*n,s+=l*n*3);const c=jY(a,s),u=.5*r;qh.set(cX,0,0,-u),qh.set(uX,0,0,u);for(let d=0;d<n;++d){const t=(d+1)%n;qh.set(dX,e[3*d],e[3*d+1],-u),qh.set(AX,e[3*t],e[3*t+1],-u),qh.set(fX,e[3*t],e[3*t+1],u),qh.set(pX,e[3*d],e[3*d+1],u),c.addQuad(dX,AX,fX,pX)}if(3===n)o&&(qh.set(dX,e[0],e[1],-u),qh.set(AX,e[3],e[4],-u),qh.set(fX,e[6],e[7],-u),c.add(fX,AX,dX)),i&&(qh.set(dX,e[0],e[1],u),qh.set(AX,e[3],e[4],u),qh.set(fX,e[6],e[7],u),c.add(dX,AX,fX));else if(4===n)o&&(qh.set(dX,e[0],e[1],-u),qh.set(AX,e[3],e[4],-u),qh.set(fX,e[6],e[7],-u),qh.set(pX,e[9],e[10],-u),c.addQuad(pX,fX,AX,dX)),i&&(qh.set(dX,e[0],e[1],u),qh.set(AX,e[3],e[4],u),qh.set(fX,e[6],e[7],u),qh.set(pX,e[9],e[10],u),c.addQuad(dX,AX,fX,pX));else for(let d=0;d<n;++d){const t=(d+1)%n;o&&(qh.set(dX,e[3*d],e[3*d+1],-u),qh.set(AX,e[3*t],e[3*t+1],-u),c.add(cX,AX,dX)),i&&(qh.set(dX,e[3*d],e[3*d+1],u),qh.set(AX,e[3*t],e[3*t+1],u),c.add(dX,AX,uX))}return c.getPrimitive()}let mX,yX,vX,bX,CX;const IX=new Map,EX=qh.create(0,1,0),xX=qh(),BX=qh(),wX=qh(),_X=Yh(),SX=Yh(),DX=qh(),TX=qh(),kX=qh();function QX(e,t,n,r,o){return qh.setMagnitude(BX,n,r/2),qh.add(wX,t,BX),o?qh.matchDirection(kX,EX,BX):qh.copy(kX,EX),qh.set(DX,1,r,1),qh.makeRotation(SX,kX,BX),Yh.scale(e,SX,DX),Yh.setTranslation(e,wX)}const MX=new Int32Array(9);function RX(e){const t=function(e){var t,n,r,o,i,a,s,l,c;return MX[0]=Math.round(1e3*(null!==(t=e.radiusTop)&&void 0!==t?t:sX.radiusTop)),MX[1]=Math.round(1e3*(null!==(n=e.radiusBottom)&&void 0!==n?n:sX.radiusBottom)),MX[2]=Math.round(1e3*(null!==(r=e.height)&&void 0!==r?r:sX.height)),MX[3]=null!==(o=e.radialSegments)&&void 0!==o?o:sX.radialSegments,MX[4]=null!==(i=e.heightSegments)&&void 0!==i?i:sX.heightSegments,MX[5]=(null!==(a=e.topCap)&&void 0!==a?a:sX.topCap)?1:0,MX[6]=(null!==(s=e.bottomCap)&&void 0!==s?s:sX.bottomCap)?1:0,MX[7]=Math.round(1e3*(null!==(l=e.thetaStart)&&void 0!==l?l:sX.thetaStart)),MX[8]=Math.round(1e3*(null!==(c=e.thetaLength)&&void 0!==c?c:sX.thetaLength)),Fh(MX)}(e);let n=IX.get(t);if(void 0===n){if(e.radialSegments&&e.radialSegments<=4){n=VY(gX(lX(Math.max(3,e.radialSegments),!0,e.radiusTop),e),Yh.rotX90)}else n=function(e){const{radiusTop:t,radiusBottom:n,height:r,radialSegments:o,heightSegments:i,topCap:a,bottomCap:s,thetaStart:l,thetaLength:c}={...sX,...e},u=[],d=[],A=[];let f=0;const p=[],h=r/2;return function(){const e=qh.zero(),a=(n-t)/r;for(let s=0;s<=i;++s){const u=[],g=s/i,m=g*(n-t)+t;for(let t=0;t<=o;++t){const n=t/o*c+l,i=Math.sin(n),s=Math.cos(n);d.push(m*i,-g*r+h,m*s),qh.normalize(e,qh.set(e,i,a,s)),A.push(...e),u.push(f++)}p.push(u)}for(let t=0;t<o;++t)for(let e=0;e<i;++e){const n=p[e][t],r=p[e+1][t],o=p[e+1][t+1],i=p[e][t+1];u.push(n,r,i),u.push(r,o,i)}}(),a&&t>0&&g(!0),s&&n>0&&g(!1),{vertices:new Float32Array(d),normals:new Float32Array(A),indices:new Uint32Array(u)};function g(e){const r=!0===e?t:n,i=!0===e?1:-1,a=f;for(let t=1;t<=o;++t)d.push(0,h*i,0),A.push(0,i,0),++f;const s=f;for(let t=0;t<=o;++t){const e=t/o*c+l,n=Math.cos(e),a=Math.sin(e);d.push(r*a,h*i,r*n),A.push(0,i,0),++f}for(let t=0;t<o;++t){const n=a+t,r=s+t;!0===e?u.push(r,r+1,n):u.push(r+1,r,n)}}}(e);IX.set(t,n)}return n}function PX(e,t,n,r,o){const i=qh.distance(t,n)*r;qh.sub(xX,n,t),QX(_X,t,xX,i,!0),ZX.addPrimitive(e,_X,RX(o))}function OX(e,t,n,r,o,i){const a=qh.distance(t,n)*r,s=RX(i);qh.sub(xX,n,t),qh.add(TX,t,o),QX(_X,TX,xX,a,!0),ZX.addPrimitive(e,_X,s),qh.sub(TX,t,o),QX(_X,TX,xX,a,!0),ZX.addPrimitive(e,_X,s)}function FX(e,t,n,r,o,i,a){const s=qh.distance(t,n)*r,l=o%2!==0,c=Math.floor((o+1)/2);let u=s/(o+.5),d=RX(a);qh.setMagnitude(xX,qh.sub(xX,n,t),u),qh.copy(TX,t);for(let A=0;A<c;++A)qh.add(TX,TX,xX),l&&A===c-1&&(!i&&a.topCap&&(a.topCap=!1,d=RX(a)),u/=2),QX(_X,TX,xX,u,!1),ZX.addPrimitive(e,_X,d),qh.add(TX,TX,xX)}const NX=qh(),LX=Xh(),UX=qh(),GX=qh(),jX=qh(),zX=qh(),HX=qh.fromArray,VX=qh.triangleNormal,qX=qh.copy,YX=qh.transformMat4,XX=qh.transformMat3,WX=Xh.directionTransform,KX=gh.add3,JX=gh.add;var ZX;function $X(e,t,n){return e=zp(Math.round(e),0,16777215)+1,t[n+2]=e%256,e=Math.floor(e/256),t[n+1]=e%256,e=Math.floor(e/256),t[n]=e%256,t}function eW(e,t,n){return 256*Math.floor(e)*256+256*Math.floor(t)+Math.floor(n)-1}!function(e){function t(e,t,n,r){const{vertices:o,normals:i,indices:a,groups:s,currentGroup:l}=e,c=o.elementCount;KX(o,t[0],t[1],t[2]),KX(o,n[0],n[1],n[2]),KX(o,r[0],r[1],r[2]),VX(NX,t,n,r);for(let u=0;u<3;++u)KX(i,NX[0],NX[1],NX[2]),JX(s,l);KX(a,c,c+1,c+2)}function n(e,t,n,r,o){const{vertices:i,normals:a,indices:s,groups:l,currentGroup:c}=e,u=i.elementCount;KX(i,t[0],t[1],t[2]),KX(i,n[0],n[1],n[2]),KX(i,r[0],r[1],r[2]);for(let d=0;d<3;++d)KX(a,o[0],o[1],o[2]),JX(l,c);KX(s,u,u+1,u+2)}function r(e,t,n){const{vertices:r,normals:o,indices:i}=n,{vertices:a,normals:s,indices:l,groups:c,currentGroup:u}=e,d=a.elementCount,A=WX(LX,t);for(let f=0,p=r.length;f<p;f+=3)YX(NX,HX(NX,r,f),t),KX(a,NX[0],NX[1],NX[2]),XX(NX,HX(NX,o,f),A),KX(s,NX[0],NX[1],NX[2]),JX(c,u);for(let f=0,p=i.length;f<p;f+=3)KX(l,i[f]+d,i[f+1]+d,i[f+2]+d)}e.createState=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2048,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=arguments.length>2?arguments[2]:void 0;return{currentGroup:-1,vertices:gh.create(Float32Array,3,t,n?n.vertexBuffer.ref.value:e),normals:gh.create(Float32Array,3,t,n?n.normalBuffer.ref.value:e),indices:gh.create(Uint32Array,3,3*t,n?n.indexBuffer.ref.value:3*e),groups:gh.create(Float32Array,1,t,n?n.groupBuffer.ref.value:e),mesh:n}},e.addTriangle=t,e.addTriangleWithNormal=n,e.addTriangleStrip=function(e,n,r){HX(jX,n,3*r[0]),HX(zX,n,3*r[1]);for(let o=2,i=r.length;o<i;o+=2)qX(UX,jX),qX(GX,zX),HX(jX,n,3*r[o]),HX(zX,n,3*r[o+1]),t(e,UX,GX,jX),t(e,GX,zX,jX)},e.addTriangleFan=function(e,n,r){HX(UX,n,3*r[0]);for(let o=2,i=r.length;o<i;++o)HX(GX,n,3*r[o-1]),HX(jX,n,3*r[o]),t(e,UX,jX,GX)},e.addTriangleFanWithNormal=function(e,t,r,o){HX(UX,t,3*r[0]);for(let i=2,a=r.length;i<a;++i)HX(GX,t,3*r[i-1]),HX(jX,t,3*r[i]),n(e,UX,jX,GX,o)},e.addPrimitive=r,e.addPrimitiveFlipped=function(e,t,n){const{vertices:r,normals:o,indices:i}=n,{vertices:a,normals:s,indices:l,groups:c,currentGroup:u}=e,d=a.elementCount,A=WX(LX,t);for(let f=0,p=r.length;f<p;f+=3)YX(NX,HX(NX,r,f),t),KX(a,NX[0],NX[1],NX[2]),XX(NX,HX(NX,o,f),A),KX(s,-NX[0],-NX[1],-NX[2]),JX(c,u);for(let f=0,p=i.length;f<p;f+=3)KX(l,i[f+2]+d,i[f+1]+d,i[f]+d)},e.addCage=function(e,t,n,r,o,i){const{vertices:a,edges:s}=n,l={radiusTop:r,radiusBottom:r,radialSegments:i};for(let c=0,u=s.length;c<u;c+=2)HX(UX,a,3*s[c]),HX(GX,a,3*s[c+1]),YX(UX,UX,t),YX(GX,GX,t),aX(e,UX,r,o),aX(e,GX,r,o),PX(e,UX,GX,1,l)},e.addMesh=function(e,t,n){r(e,t,{vertices:n.vertexBuffer.ref.value.subarray(0,3*n.vertexCount),normals:n.normalBuffer.ref.value.subarray(0,3*n.vertexCount),indices:n.indexBuffer.ref.value.subarray(0,3*n.triangleCount)})},e.getMesh=function(e){const{vertices:t,normals:n,indices:r,groups:o,mesh:i}=e,a=gh.compact(t,!0),s=gh.compact(r,!0),l=gh.compact(n,!0),c=gh.compact(o,!0);return RY.create(a,s,l,c,e.vertices.elementCount,e.indices.elementCount,i)}}(ZX||(ZX={}));const tW=255/256,nW=qh.create(16777216,65536,256),rW=Kh.create(tW/nW[0],tW/nW[1],tW/nW[2],.99609375),oW=Kh();function iW(e,t,n){switch(HK.getGranularity(e,t.granularity)){case"uniform":return function(e,t,n){return function(e,t){return t?(Sp.update(t.uSize,e),Sp.updateIfChanged(t.dSizeType,"uniform"),t):{uSize:Sp.create(e),...cW(),dSizeType:Sp.create("uniform")}}(t(IT),n)}(0,t.size,n);case"group":return function(e,t,n){const{groupCount:r}=e,o=gV(Math.max(1,r),3,Uint8Array,n&&n.tSize.ref.value.array);e.reset();for(;e.hasNext&&!e.isNextNewInstance;){const n=e.move();$X(t(n.location)*aW,o.array,3*n.groupIndex)}return uW(o,"group",n)}(e,t.size,n);case"groupInstance":return function(e,t,n){const{groupCount:r,instanceCount:o}=e,i=o*r,a=gV(Math.max(1,i),3,Uint8Array,n&&n.tSize.ref.value.array);e.reset();for(;e.hasNext;){const n=e.move();$X(t(n.location)*aW,a.array,3*n.index)}return uW(a,"groupInstance",n)}(e,t.size,n);case"instance":return function(e,t,n){const{instanceCount:r}=e,o=gV(Math.max(1,r),3,Uint8Array,n&&n.tSize.ref.value.array);e.reset();for(;e.hasNext&&!e.isNextNewInstance;){const n=e.move();$X(t(n.location)*aW,o.array,3*n.instanceIndex),e.skipInstance()}return uW(o,"instance",n)}(e,t.size,n)}}const aW=100;function sW(e){switch(e.dSizeType.ref.value){case"uniform":return e.uSize.ref.value;case"instance":case"group":case"groupInstance":let t=0;const n=e.tSize.ref.value.array;for(let e=0,r=n.length;e<r;e+=3){const r=eW(n[e],n[e+1],n[e+2]);t<r&&(t=r)}return t/aW}}const lW={array:new Uint8Array(3),width:1,height:1};function cW(){return{tSize:Sp.create(lW),uSizeTexDim:Sp.create(Wh.create(1,1))}}function uW(e,t,n){return n?(Sp.update(n.tSize,e),Sp.update(n.uSizeTexDim,Wh.create(e.width,e.height)),Sp.updateIfChanged(n.dSizeType,t),n):{uSize:Sp.create(0),tSize:Sp.create(e),uSizeTexDim:Sp.create(Wh.create(e.width,e.height)),dSizeType:Sp.create(t)}}var dW;function AW(e,t,n,r,o,i,a){for(let s=0;s<t;s++){for(let o=0;o<n;o++)r[o]=e[o*t+s];fW(r,o,i,a,n);for(let r=0;r<n;r++)e[r*t+s]=o[r]}for(let s=0;s<n;s++){for(let n=0;n<t;n++)r[n]=e[s*t+n];fW(r,o,i,a,t);for(let n=0;n<t;n++)e[s*t+n]=Math.sqrt(o[n])}}function fW(e,t,n,r,o){n[0]=0,r[0]=Number.MIN_SAFE_INTEGER,r[1]=Number.MAX_SAFE_INTEGER;for(let i=1,a=0;i<o;i++){let t=(e[i]+i*i-(e[n[a]]+n[a]*n[a]))/(2*i-2*n[a]);for(;t<=r[a];)a--,t=(e[i]+i*i-(e[n[a]]+n[a]*n[a]))/(2*i-2*n[a]);a++,n[a]=i,r[a]=t,r[a+1]=Number.MAX_SAFE_INTEGER}for(let i=0,a=0;i<o;i++){for(;r[a+1]<i;)a++;t[i]=(i-n[a])*(i-n[a])+e[n[a]]}}!function(e){function t(e,t,n,o){return o?function(e,t,n,r){return r.pointCount=n,Sp.update(r.centerBuffer,e),Sp.update(r.groupBuffer,t),r}(e,t,n,o):function(e,t,n){const o=YT();let i,a=-1,s=-1;const l={kind:"points",pointCount:n,centerBuffer:Sp.create(e),groupBuffer:Sp.create(t),get boundingSphere(){const e=r(l);if(e!==a){const t=CV(l.centerBuffer.ref.value,l.pointCount,1);YT.copy(o,t),a=e}return o},get groupMapping(){return l.groupBuffer.ref.version!==s&&(i=fV(l.groupBuffer.ref.value,l.pointCount),s=l.groupBuffer.ref.version),i},setBoundingSphere(e){YT.copy(o,e),a=r(l)}};return l}(e,t,n)}function n(e){return t(e?e.centerBuffer.ref.value:new Float32Array(0),e?e.groupBuffer.ref.value:new Float32Array(0),0,e)}function r(e){return Fh([e.pointCount,e.centerBuffer.ref.version,e.groupBuffer.ref.version])}function o(e,t){const n=e.pointCount,r=t.instanceCount.ref.value,o=BT(),i=o.position,a=e.centerBuffer.ref.value,s=t.aTransform.ref.value;return xT(n,r,1,((e,t)=>(t<0?qh.fromArray(i,a,3*e):qh.transformMat4Offset(i,a,s,0,3*e,16*t),o)))}function i(e,t,n,r,i){const{instanceCount:a,groupCount:s}=n,l=dY(n,o(e,t),r.color),c=iW(n,r.size),u=i.instanceGranularity?wV(a,"instance"):wV(a*s,"groupInstance"),d=yY(),A=IY(),f=MY(),p=DY(),h=BY(),g={drawCount:e.pointCount,vertexCount:e.pointCount,groupCount:s,instanceCount:a},m=YT.clone(e.boundingSphere),y=EV(m,t.aTransform.ref.value,a,0);return{dGeometryType:Sp.create("points"),aPosition:e.centerBuffer,aGroup:e.groupBuffer,boundingSphere:Sp.create(y),invariantBoundingSphere:Sp.create(m),uInvariantBoundingSphere:Sp.create(Kh.ofSphere(m)),...l,...c,...u,...d,...A,...f,...p,...h,...t,...Fk.createValues(i,g),uSizeFactor:Sp.create(i.sizeFactor),dPointSizeAttenuation:Sp.create(i.pointSizeAttenuation),dPointStyle:Sp.create(i.pointStyle)}}function a(e,t){Fk.updateRenderableState(e,t),e.opaque=e.opaque&&"fuzzy"!==t.pointStyle,e.writeDepth=e.opaque}e.create=t,e.createEmpty=n,e.transform=function(e,t){const n=e.centerBuffer.ref.value;aV(t,n,0,e.pointCount),Sp.update(e.centerBuffer,n)},e.StyleTypes={square:"Square",circle:"Circle",fuzzy:"Fuzzy"},e.StyleTypeNames=Object.keys(e.StyleTypes),e.Params={...Fk.Params,sizeFactor:U_.Numeric(3,{min:0,max:10,step:.1}),pointSizeAttenuation:U_.Boolean(!1),pointStyle:U_.Select("square",U_.objectToOptions(e.StyleTypes))},e.Utils={Params:e.Params,createEmpty:n,createValues:i,createValuesSimple:function(t,n,r,o,a){const s=Fk.createSimple(r,o,a),l={...U_.getDefaultValues(e.Params),...n};return i(t,s.transform,s.locationIterator,s.theme,l)},updateValues:function(e,t){Fk.updateValues(e,t),Sp.updateIfChanged(e.uSizeFactor,t.sizeFactor),Sp.updateIfChanged(e.dPointSizeAttenuation,t.pointSizeAttenuation),Sp.updateIfChanged(e.dPointStyle,t.pointStyle)},updateBoundingSphere:function(e,t){const n=YT.clone(t.boundingSphere),r=EV(n,e.aTransform.ref.value,e.instanceCount.ref.value,0);YT.equals(r,e.boundingSphere.ref.value)||Sp.update(e.boundingSphere,r);YT.equals(n,e.invariantBoundingSphere.ref.value)||(Sp.update(e.invariantBoundingSphere,n),Sp.update(e.uInvariantBoundingSphere,Kh.fromSphere(e.uInvariantBoundingSphere.ref.value,n)))},createRenderableState:function(e){const t=Fk.createRenderableState(e);return a(t,e),t},updateRenderableState:a,createPositionIterator:o}}(dW||(dW={}));const pW={};const hW={fontFamily:U_.Select("sans-serif",[["sans-serif","Sans Serif"],["monospace","Monospace"],["serif","Serif"],["cursive","Cursive"]]),fontQuality:U_.Select(3,[[0,"lower"],[1,"low"],[2,"medium"],[3,"high"],[4,"higher"]]),fontStyle:U_.Select("normal",[["normal","Normal"],["italic","Italic"],["oblique","Oblique"]]),fontVariant:U_.Select("normal",[["normal","Normal"],["small-caps","Small Caps"]]),fontWeight:U_.Select("normal",[["normal","Normal"],["bold","Bold"]])};class gW{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.mapped={},this.scratchW=0,this.scratchH=0,this.currentX=0,this.currentY=0,this.cutoff=.5;const t={...U_.getDefaultValues(hW),...e};this.props=t;const n=32*(t.fontQuality+1);this.buffer=n/8,this.radius=n/3,this.lineHeight=Math.round(n+2*this.buffer+this.radius),this.maxWidth=Math.round(.75*this.lineHeight),this.texture=gV(350*this.lineHeight*this.maxWidth,1,Uint8Array),this.scratchContext=function(e,t,n){if(Rw){return function(){if(!mW)throw new Error("When running in Node.js and wanting to use Canvas API, call mol-util/data-source's setCanvasModule function first and pass imported `canvas` module to it.");return mW}().createCanvas(e,t).getContext("2d",n)}{const r=document.createElement("canvas");return r.width=e,r.height=t,r.getContext("2d",n)}}(this.maxWidth,this.lineHeight,{willReadFrequently:!0}),this.scratchContext.font=`${t.fontStyle} ${t.fontVariant} ${t.fontWeight} ${n}px ${t.fontFamily}`,this.scratchContext.fillStyle="black",this.scratchContext.textBaseline="middle",this.scratchData=new Uint8Array(this.lineHeight*this.maxWidth),this.gridOuter=new Float64Array(this.lineHeight*this.maxWidth),this.gridInner=new Float64Array(this.lineHeight*this.maxWidth),this.f=new Float64Array(Math.max(this.lineHeight,this.maxWidth)),this.d=new Float64Array(Math.max(this.lineHeight,this.maxWidth)),this.z=new Float64Array(Math.max(this.lineHeight,this.maxWidth)+1),this.v=new Int16Array(Math.max(this.lineHeight,this.maxWidth)),this.middle=Math.ceil(this.lineHeight/2),this.placeholder=this.get(String.fromCharCode(65533))}get(e){if(void 0===this.mapped[e]){this.draw(e);const{array:t,width:n,height:r}=this.texture,o=this.scratchData;if(this.currentX+this.scratchW>n&&(this.currentX=0,this.currentY+=this.scratchH),this.currentY+this.scratchH>r)return console.warn("canvas to small"),this.placeholder;this.mapped[e]={x:this.currentX,y:this.currentY,w:this.scratchW,h:this.scratchH,nw:this.scratchW/this.lineHeight,nh:this.scratchH/this.lineHeight};for(let e=0;e<this.scratchH;++e)for(let r=0;r<this.scratchW;++r)t[n*(this.currentY+e)+this.currentX+r]=o[e*this.scratchW+r];this.currentX+=this.scratchW}return this.mapped[e]}draw(e){const t=this.lineHeight,n=this.scratchContext,r=this.scratchData,o=n.measureText(e),i=Math.min(this.maxWidth,Math.ceil(o.width+2*this.buffer)),a=i*t;n.clearRect(0,0,i,t),n.fillText(e,this.buffer,this.middle);const s=n.getImageData(0,0,i,t);for(let l=0;l<a;l++){const e=s.data[4*l+3]/255;this.gridOuter[l]=1===e?0:0===e?Number.MAX_SAFE_INTEGER:Math.pow(Math.max(0,.5-e),2),this.gridInner[l]=1===e?Number.MAX_SAFE_INTEGER:0===e?0:Math.pow(Math.max(0,e-.5),2)}AW(this.gridOuter,i,t,this.f,this.d,this.v,this.z),AW(this.gridInner,i,t,this.f,this.d,this.v,this.z);for(let l=0;l<a;l++){const e=this.gridOuter[l]-this.gridInner[l];r[l]=Math.max(0,Math.min(255,Math.round(255-255*(e/this.radius+this.cutoff))))}this.scratchW=i,this.scratchH=t}}let mW;var yW;function vW(e,t,n,r){let o=0,i=0;for(let a=0,s=4*n;a<s;++a){const n=2*a,r=Math.abs(e[n]);r>o&&(o=r);const s=Math.abs(e[n+1]);s>o&&(o=s);const l=Math.abs(t[a]);l>i&&(i=l)}return Math.max(i,r+r*o)}!function(e){function t(e,t,n,o,i,a,s,l,c){return c?function(e,t,n,r,o,i,a,s,l){return l.charCount=s,Sp.update(l.fontTexture,e),Sp.update(l.centerBuffer,t),Sp.update(l.mappingBuffer,n),Sp.update(l.depthBuffer,r),Sp.update(l.indexBuffer,o),Sp.update(l.groupBuffer,i),Sp.update(l.tcoordBuffer,a),l}(e,t,n,o,i,a,s,l,c):function(e,t,n,o,i,a,s,l){const c=YT();let u,d=-1,A=-1;const f={kind:"text",charCount:l,fontTexture:Sp.create(e),centerBuffer:Sp.create(t),mappingBuffer:Sp.create(n),depthBuffer:Sp.create(o),indexBuffer:Sp.create(i),groupBuffer:Sp.create(a),tcoordBuffer:Sp.create(s),get boundingSphere(){const e=r(f);if(e!==d){const t=CV(f.centerBuffer.ref.value,4*f.charCount,4);YT.copy(c,t),d=e}return c},get groupMapping(){return f.groupBuffer.ref.version!==A&&(u=fV(f.groupBuffer.ref.value,f.charCount,4),A=f.groupBuffer.ref.version),u},setBoundingSphere(e){YT.copy(c,e),d=r(f)}};return f}(e,t,n,o,i,a,s,l)}function n(e){return t(e?e.fontTexture.ref.value:gV(0,1,Uint8Array),e?e.centerBuffer.ref.value:new Float32Array(0),e?e.mappingBuffer.ref.value:new Float32Array(0),e?e.depthBuffer.ref.value:new Float32Array(0),e?e.indexBuffer.ref.value:new Uint32Array(0),e?e.groupBuffer.ref.value:new Float32Array(0),e?e.tcoordBuffer.ref.value:new Float32Array(0),0,e)}function r(e){return Fh([e.charCount,e.fontTexture.ref.version,e.centerBuffer.ref.version,e.mappingBuffer.ref.version,e.depthBuffer.ref.version,e.indexBuffer.ref.version,e.groupBuffer.ref.version,e.tcoordBuffer.ref.version])}function o(e,t){const n=4*e.charCount,r=t.instanceCount.ref.value,o=BT(),i=o.position,a=e.centerBuffer.ref.value,s=t.aTransform.ref.value;return xT(n,r,4,((e,t)=>(t<0?qh.fromArray(i,a,3*e):qh.transformMat4Offset(i,a,s,0,3*e,16*t),o)))}function i(e,t,n,r,i){const{instanceCount:a,groupCount:s}=n,l=dY(n,o(e,t),r.color),c=iW(n,r.size),u=i.instanceGranularity?wV(a,"instance"):wV(a*s,"groupInstance"),d=yY(),A=IY(),f=MY(),p=DY(),h=BY(),g={drawCount:2*e.charCount*3,vertexCount:4*e.charCount,groupCount:s,instanceCount:a},m=vW(e.mappingBuffer.ref.value,e.depthBuffer.ref.value,e.charCount,sW(c)),y=YT.expand(YT(),e.boundingSphere,m),v=EV(y,t.aTransform.ref.value,a,0);return{dGeometryType:Sp.create("text"),aPosition:e.centerBuffer,aMapping:e.mappingBuffer,aDepth:e.depthBuffer,aGroup:e.groupBuffer,elements:e.indexBuffer,boundingSphere:Sp.create(v),invariantBoundingSphere:Sp.create(y),uInvariantBoundingSphere:Sp.create(Kh.ofSphere(y)),...l,...c,...u,...d,...A,...f,...p,...h,...t,aTexCoord:e.tcoordBuffer,tFont:e.fontTexture,padding:Sp.create(m),...Fk.createValues(i,g),uSizeFactor:Sp.create(i.sizeFactor),uBorderWidth:Sp.create(zp(i.borderWidth,0,.5)),uBorderColor:Sp.create(Jp.toArrayNormalized(i.borderColor,qh.zero(),0)),uOffsetX:Sp.create(i.offsetX),uOffsetY:Sp.create(i.offsetY),uOffsetZ:Sp.create(i.offsetZ),uBackgroundColor:Sp.create(Jp.toArrayNormalized(i.backgroundColor,qh.zero(),0)),uBackgroundOpacity:Sp.create(i.backgroundOpacity)}}function a(e,t){Fk.updateRenderableState(e,t),e.pickable=!1,e.opaque=!1,e.writeDepth=!0}e.create=t,e.createEmpty=n,e.Params={...Fk.Params,...hW,sizeFactor:U_.Numeric(1,{min:0,max:10,step:.1}),borderWidth:U_.Numeric(0,{min:0,max:.5,step:.01}),borderColor:U_.Color(bk.grey),offsetX:U_.Numeric(0,{min:0,max:10,step:.1}),offsetY:U_.Numeric(0,{min:0,max:10,step:.1}),offsetZ:U_.Numeric(0,{min:0,max:10,step:.1}),background:U_.Boolean(!1),backgroundMargin:U_.Numeric(.2,{min:0,max:1,step:.01}),backgroundColor:U_.Color(bk.grey),backgroundOpacity:U_.Numeric(1,{min:0,max:1,step:.01}),tether:U_.Boolean(!1),tetherLength:U_.Numeric(1,{min:0,max:5,step:.1}),tetherBaseWidth:U_.Numeric(.3,{min:0,max:1,step:.01}),attachment:U_.Select("middle-center",[["bottom-left","bottom-left"],["bottom-center","bottom-center"],["bottom-right","bottom-right"],["middle-left","middle-left"],["middle-center","middle-center"],["middle-right","middle-right"],["top-left","top-left"],["top-center","top-center"],["top-right","top-right"]])},e.Utils={Params:e.Params,createEmpty:n,createValues:i,createValuesSimple:function(t,n,r,o,a){const s=Fk.createSimple(r,o,a),l={...U_.getDefaultValues(e.Params),...n};return i(t,s.transform,s.locationIterator,s.theme,l)},updateValues:function(e,t){Fk.updateValues(e,t),Sp.updateIfChanged(e.uSizeFactor,t.sizeFactor),Sp.updateIfChanged(e.uBorderWidth,t.borderWidth),Jp.fromNormalizedArray(e.uBorderColor.ref.value,0)!==t.borderColor&&(Jp.toArrayNormalized(t.borderColor,e.uBorderColor.ref.value,0),Sp.update(e.uBorderColor,e.uBorderColor.ref.value));Sp.updateIfChanged(e.uOffsetX,t.offsetX),Sp.updateIfChanged(e.uOffsetY,t.offsetY),Sp.updateIfChanged(e.uOffsetZ,t.offsetZ),Jp.fromNormalizedArray(e.uBackgroundColor.ref.value,0)!==t.backgroundColor&&(Jp.toArrayNormalized(t.backgroundColor,e.uBackgroundColor.ref.value,0),Sp.update(e.uBackgroundColor,e.uBackgroundColor.ref.value));Sp.updateIfChanged(e.uBackgroundOpacity,t.backgroundOpacity)},updateBoundingSphere:function(e,t){const n=vW(e.aMapping.ref.value,e.aDepth.ref.value,t.charCount,sW(e)),r=YT.expand(YT(),t.boundingSphere,n),o=EV(r,e.aTransform.ref.value,e.instanceCount.ref.value,0);YT.equals(o,e.boundingSphere.ref.value)||Sp.update(e.boundingSphere,o);YT.equals(r,e.invariantBoundingSphere.ref.value)||(Sp.update(e.invariantBoundingSphere,r),Sp.update(e.uInvariantBoundingSphere,Kh.fromSphere(e.uInvariantBoundingSphere.ref.value,r)));Sp.update(e.padding,n)},createRenderableState:function(e){const t=Fk.createRenderableState(e);return a(t,e),t},updateRenderableState:a,createPositionIterator:o}}(yW||(yW={}));const bW=qh(),CW=qh(),IW=qh(),EW=gh.add,xW=gh.add3;var BW,wW;!function(e){e.create=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2048,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=arguments.length>2?arguments[2]:void 0;const r=gh.create(Float32Array,1,t,n?n.groupBuffer.ref.value:e),o=gh.create(Float32Array,3,t,n?n.startBuffer.ref.value:e),i=gh.create(Float32Array,3,t,n?n.endBuffer.ref.value:e),a=(e,t,n,a,s,l,c)=>{for(let u=0;u<4;++u)xW(o,e,t,n),xW(i,a,s,l),EW(r,c)},s=(e,t,n,r)=>{const o=qh.distance(e,t),i=n%2!==0,s=Math.floor((n+1)/2),l=o/(n+.5);qh.setMagnitude(IW,qh.sub(IW,t,e),l),qh.copy(bW,e);for(let c=0;c<s;++c)qh.add(bW,bW,IW),i&&c===s-1?qh.copy(CW,t):qh.add(CW,bW,IW),a(bW[0],bW[1],bW[2],CW[0],CW[1],CW[2],r),qh.add(bW,bW,IW)};return{add:a,addVec:(e,t,n)=>{for(let a=0;a<4;++a)xW(o,e[0],e[1],e[2]),xW(i,t[0],t[1],t[2]),EW(r,n)},addFixedCountDashes:s,addFixedLengthDashes:(e,t,n,r)=>{const o=qh.distance(e,t);s(e,t,o/n,r)},addCage:(e,t,n)=>{const{vertices:r,edges:o}=t;for(let i=0,s=o.length;i<s;i+=2)qh.fromArray(bW,r,3*o[i]),qh.fromArray(CW,r,3*o[i+1]),qh.transformMat4(bW,bW,e),qh.transformMat4(CW,CW,e),a(bW[0],bW[1],bW[2],CW[0],CW[1],CW[2],n)},getLines:()=>{const e=r.elementCount/4,t=gh.compact(r,!0),a=gh.compact(o,!0),s=gh.compact(i,!0),l=n&&e<=n.lineCount?n.mappingBuffer.ref.value:new Float32Array(8*e),c=n&&e<=n.lineCount?n.indexBuffer.ref.value:new Uint32Array(6*e);return(!n||e>n.lineCount)&&function(e,t,n){for(let r=0;r<e;++r){const e=8*r;t[e]=-1,t[e+1]=-1,t[e+2]=1,t[e+3]=-1,t[e+4]=-1,t[e+5]=1,t[e+6]=1,t[e+7]=1}for(let r=0;r<e;++r){const e=4*r,t=6*r;n[t]=e,n[t+1]=e+1,n[t+2]=e+2,n[t+3]=e+1,n[t+4]=e+3,n[t+5]=e+2}}(e,l,c),wW.create(l,c,t,a,s,e,n)}}}}(BW||(BW={})),function(e){function t(e,t,n,o,i,a,s){return s?function(e,t,n,r,o,i,a){i>a.lineCount&&(Sp.update(a.mappingBuffer,e),Sp.update(a.indexBuffer,t));return a.lineCount=i,Sp.update(a.groupBuffer,n),Sp.update(a.startBuffer,r),Sp.update(a.endBuffer,o),a}(e,t,n,o,i,a,s):function(e,t,n,o,i,a){const s=YT();let l,c=-1,u=-1;const d={kind:"lines",lineCount:a,mappingBuffer:Sp.create(e),indexBuffer:Sp.create(t),groupBuffer:Sp.create(n),startBuffer:Sp.create(o),endBuffer:Sp.create(i),get boundingSphere(){const e=r(d);if(e!==c){const t=CV(d.startBuffer.ref.value,4*d.lineCount,4),n=CV(d.endBuffer.ref.value,4*d.lineCount,4);YT.expandBySphere(s,t,n),c=e}return s},get groupMapping(){return d.groupBuffer.ref.version!==u&&(l=fV(d.groupBuffer.ref.value,d.lineCount,4),u=d.groupBuffer.ref.version),l},setBoundingSphere(e){YT.copy(s,e),c=r(d)}};return d}(e,t,n,o,i,a)}function n(e){return t(e?e.mappingBuffer.ref.value:new Float32Array(0),e?e.indexBuffer.ref.value:new Uint32Array(0),e?e.groupBuffer.ref.value:new Float32Array(0),e?e.startBuffer.ref.value:new Float32Array(0),e?e.endBuffer.ref.value:new Float32Array(0),0,e)}function r(e){return Fh([e.lineCount,e.mappingBuffer.ref.version,e.indexBuffer.ref.version,e.groupBuffer.ref.version,e.startBuffer.ref.version,e.endBuffer.ref.version])}function o(e,t){const n=4*e.lineCount,r=t.instanceCount.ref.value,o=BT(),i=o.position,a=e.startBuffer.ref.value,s=e.endBuffer.ref.value,l=t.aTransform.ref.value;return xT(n,r,2,((e,t)=>{const n=e%4===0?a:s;return t<0?qh.fromArray(i,n,3*e):qh.transformMat4Offset(i,n,l,0,3*e,16*t),o}))}function i(e,t,n,r,i){const{instanceCount:a,groupCount:s}=n,l=dY(n,o(e,t),r.color),c=iW(n,r.size),u=i.instanceGranularity?wV(a,"instance"):wV(a*s,"groupInstance"),d=yY(),A=IY(),f=MY(),p=DY(),h=BY(),g={drawCount:2*e.lineCount*3,vertexCount:4*e.lineCount,groupCount:s,instanceCount:a},m=YT.clone(e.boundingSphere),y=EV(m,t.aTransform.ref.value,a,0);return{dGeometryType:Sp.create("lines"),aMapping:e.mappingBuffer,aGroup:e.groupBuffer,aStart:e.startBuffer,aEnd:e.endBuffer,elements:e.indexBuffer,boundingSphere:Sp.create(y),invariantBoundingSphere:Sp.create(m),uInvariantBoundingSphere:Sp.create(Kh.ofSphere(m)),...l,...c,...u,...d,...A,...f,...p,...h,...t,...Fk.createValues(i,g),uSizeFactor:Sp.create(i.sizeFactor),dLineSizeAttenuation:Sp.create(i.lineSizeAttenuation),uDoubleSided:Sp.create(!0),dFlipSided:Sp.create(!1)}}e.create=t,e.createEmpty=n,e.fromMesh=function(e,t){const n=e.vertexBuffer.ref.value,r=e.indexBuffer.ref.value,o=e.groupBuffer.ref.value,i=BW.create(3*e.triangleCount,e.triangleCount/10,t);for(let a=0,s=3*e.triangleCount;a<s;a+=3){const e=r[a],t=r[a+1],s=r[a+2],l=n[3*e],c=n[3*e+1],u=n[3*e+2],d=n[3*t],A=n[3*t+1],f=n[3*t+2],p=n[3*s],h=n[3*s+1],g=n[3*s+2];i.add(l,c,u,d,A,f,o[e]),i.add(l,c,u,p,h,g,o[e]),i.add(d,A,f,p,h,g,o[t])}return i.getLines()},e.transform=function(e,t){const n=e.startBuffer.ref.value;aV(t,n,0,4*e.lineCount),Sp.update(e.startBuffer,n);const r=e.endBuffer.ref.value;aV(t,r,0,4*e.lineCount),Sp.update(e.endBuffer,r)},e.Params={...Fk.Params,sizeFactor:U_.Numeric(2,{min:0,max:10,step:.1}),lineSizeAttenuation:U_.Boolean(!1)},e.Utils={Params:e.Params,createEmpty:n,createValues:i,createValuesSimple:function(t,n,r,o,a){const s=Fk.createSimple(r,o,a),l={...U_.getDefaultValues(e.Params),...n};return i(t,s.transform,s.locationIterator,s.theme,l)},updateValues:function(e,t){Fk.updateValues(e,t),Sp.updateIfChanged(e.uSizeFactor,t.sizeFactor),Sp.updateIfChanged(e.dLineSizeAttenuation,t.lineSizeAttenuation)},updateBoundingSphere:function(e,t){const n=YT.clone(t.boundingSphere),r=EV(n,e.aTransform.ref.value,e.instanceCount.ref.value,0);YT.equals(r,e.boundingSphere.ref.value)||Sp.update(e.boundingSphere,r);YT.equals(n,e.invariantBoundingSphere.ref.value)||(Sp.update(e.invariantBoundingSphere,n),Sp.update(e.uInvariantBoundingSphere,Kh.fromSphere(e.uInvariantBoundingSphere.ref.value,n)))},createRenderableState:Fk.createRenderableState,updateRenderableState:Fk.updateRenderableState,createPositionIterator:o}}(wW||(wW={}));const _W=qh(),SW=qh(),DW=qh(),TW=qh(),kW=lX(4,!0);function QW(e){const t=jY(12,e?36:24);for(let n=0;n<4;++n){const r=(n+1)%4;qh.set(_W,kW[3*n],kW[3*n+1],-.5),qh.set(SW,kW[3*r],kW[3*r+1],-.5),qh.set(DW,kW[3*r],kW[3*r+1],.5),qh.set(TW,kW[3*n],kW[3*n+1],.5),e?t.add(_W,SW,DW):t.addQuad(_W,SW,DW,TW)}return qh.set(_W,kW[0],kW[1],-.5),qh.set(SW,kW[3],kW[4],-.5),qh.set(DW,kW[6],kW[7],-.5),qh.set(TW,kW[9],kW[10],-.5),e?t.add(DW,SW,_W):t.addQuad(TW,DW,SW,_W),qh.set(_W,kW[0],kW[1],.5),qh.set(SW,kW[3],kW[4],.5),qh.set(DW,kW[6],kW[7],.5),qh.set(TW,kW[9],kW[10],.5),e?t.add(_W,SW,DW):t.addQuad(_W,SW,DW,TW),t.getPrimitive()}let MW,RW,PW;function OW(){return MW||(MW=QW(!1)),MW}function FW(){return PW||(PW=qY([.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5],[0,4,1,5,2,6,3,7,0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4])),PW}function NW(e){return e.map((e=>({x:e[0],alpha:e[1]})))}function LW(e,t){const n=[{x:0,alpha:0},{x:0,alpha:0},...e,{x:1,alpha:0},{x:1,alpha:0}],r=t?t.ref.value.array:new Uint8Array(256);let o,i,a,s,l,c,u=0;const d=e.length+1;for(let f=0;f<d;++f){o=n[f+1].x,i=n[f+2].x,a=n[f].alpha,s=n[f+1].alpha,l=n[f+2].alpha,c=n[f+3].alpha;const e=Math.round(256*(i-o));for(let t=0;t<e;++t){const n=t/e;r[u]=Math.max(0,255*qp(a,s,l,c,n,.5)),++u}}const A={array:r,width:256,height:1};return t?(Sp.update(t,A),t):Sp.create(A)}function UW(e,t,n,r){let o=(r-n)/t;0===o&&(o=1);const i=new Int32Array(t);for(let a=0,s=e.length;a<s;a++){let r=Math.floor((e[a]-n)/o);r>=t?r=t-1:r<0&&(r=0),i[r]++}return{min:n,max:r,binWidth:o,counts:i}}var GW,jW,zW,HW;function VW(e,t){return Tw.create("Create Volume",(async n=>{const{volume_data_3d_info:r,volume_data_3d:o}=e,i=OT.create(r.spacegroup_number.value(0),qh.ofArray(r.spacegroup_cell_size.value(0)),qh.scale(qh.zero(),qh.ofArray(r.spacegroup_cell_angles.value(0)),Math.PI/180)),a=r.axis_order.value(0),s=tg.convertToCanonicalAxisIndicesFastToSlow(a),l=s(r.sample_count.value(0)),c=tg.Space(l,tg.invertAxisOrder(a),Float32Array),u=tg.create(c,tg.Data1(o.values.toArray({array:Float32Array}))),d=qh.ofArray(s(r.origin.value(0))),A=qh.ofArray(s(r.dimensions.value(0)));return{label:null===t||void 0===t?void 0:t.label,entryId:null===t||void 0===t?void 0:t.entryId,grid:{transform:{kind:"spacegroup",cell:i,fractionalBox:XT.create(d,qh.add(qh.zero(),d,A))},cells:u,stats:{min:r.min_sampled.value(0),max:r.max_sampled.value(0),mean:r.mean_sampled.value(0),sigma:r.sigma_sampled.value(0)}},sourceData:zW.create(e),customProperties:new Zk,_propertyData:Object.create(null)}}))}!function(e){e.One={transform:{kind:"matrix",matrix:Yh.identity()},cells:tg.create(tg.Space([1,1,1],[0,1,2]),tg.Data1([0])),stats:{min:0,max:0,mean:0,sigma:0}};const t=Yh.zero(),n=Yh.zero();e.getGridToCartesianTransform=function(e){if("matrix"===e.transform.kind)return Yh.copy(Yh(),e.transform.matrix);if("spacegroup"===e.transform.kind){const{cells:{space:r}}=e,o=Yh.fromScaling(t,qh.div(qh.zero(),XT.size(qh.zero(),e.transform.fractionalBox),qh.ofArray(r.dimensions))),i=Yh.fromTranslation(n,e.transform.fractionalBox.min);return Yh.mul3(Yh.zero(),e.transform.cell.fromFractional,i,o)}return Yh.identity()},e.areEquivalent=function(e,t){return e===t},e.isEmpty=function(e){return 0===e.cells.data.length},e.getBoundingSphere=function(t,n){n||(n=YT());const r=t.cells.space.dimensions,o=e.getGridToCartesianTransform(t);return YT.fromDimensionsAndTransform(n,r,o)},e.getHistogram=function(e,t){let n=e._historams;return n||(n=e._historams={}),n[t]||(n[t]=function(e,t,n){if(n)return UW(e,t,n.min,n.max);{const[n,r]=X_(e);return UW(e,t,n,r)}}(e.cells.data,t,{min:e.stats.min,max:e.stats.max})),n[t]}}(GW||(GW={})),function(e){e.is=function(e){return"cube"===(null===e||void 0===e?void 0:e.kind)},e.create=function(e){return{kind:"cube",name:e.name,data:e}}}(jW||(jW={})),function(e){e.is=function(e){return"dscif"===(null===e||void 0===e?void 0:e.kind)},e.create=function(e){return{kind:"dscif",name:e._name,data:e}}}(zW||(zW={})),function(e){let t;e.is=function(e){var t,n,r,o;return(null===(o=null===(r=null===(n=null===(t=null===e||void 0===e?void 0:e.grid)||void 0===t?void 0:t.cells)||void 0===n?void 0:n.space)||void 0===r?void 0:r.dimensions)||void 0===o?void 0:o.length)&&(null===e||void 0===e?void 0:e.sourceData)&&(null===e||void 0===e?void 0:e.customProperties)&&(null===e||void 0===e?void 0:e._propertyData)},function(e){function t(t,n){return"absolute"===t.kind?t:{kind:"absolute",absoluteValue:e.calcAbsolute(n,t.relativeValue)}}e.areSame=function(e,n,r){return Hh(t(e,r).absoluteValue,t(n,r).absoluteValue,r.sigma/100)},e.absolute=function(e){return{kind:"absolute",absoluteValue:e}},e.relative=function(e){return{kind:"relative",relativeValue:e}},e.calcAbsolute=function(e,t){return t*e.sigma+e.mean},e.calcRelative=function(e,t){return 0===e.sigma?0:(t-e.mean)/e.sigma},e.toAbsolute=t,e.toRelative=function(t,n){return"relative"===t.kind?t:{kind:"relative",relativeValue:e.calcRelative(n,t.absoluteValue)}},e.toString=function(e){return"relative"===e.kind?`${e.relativeValue.toFixed(2)} \u03c3`:`${e.absoluteValue.toPrecision(4)}`}}(t=e.IsoValue||(e.IsoValue={})),e.adjustedIsoValue=function(n,r,o){if("relative"===o)return t.relative(r);const i=t.absolute(r);if(zW.is(n.sourceData)){const t={min:n.sourceData.data.volume_data_3d_info.min_source.value(0),max:n.sourceData.data.volume_data_3d_info.max_source.value(0),mean:n.sourceData.data.volume_data_3d_info.mean_source.value(0),sigma:n.sourceData.data.volume_data_3d_info.sigma_source.value(0)};return e.IsoValue.toRelative(i,t)}return i};const n={min:-1,max:1,mean:0,sigma:.1};function r(t,r){const o=r||n,{min:i,max:a,mean:s,sigma:l}=o,c=(i-s)/l,u=(a-s)/l;let d=t;return"absolute"===t.kind?t.absoluteValue<i?d=e.IsoValue.absolute(i):t.absoluteValue>a&&(d=e.IsoValue.absolute(a)):t.relativeValue<c?d=e.IsoValue.relative(c):t.relativeValue>u&&(d=e.IsoValue.relative(u)),U_.Conditioned(d,{absolute:U_.Converted((t=>e.IsoValue.toAbsolute(t,GW.One.stats).absoluteValue),(t=>e.IsoValue.absolute(t)),U_.Numeric(s,{min:i,max:a,step:FR(l/100,2)},{immediateUpdate:!0})),relative:U_.Converted((t=>e.IsoValue.toRelative(t,GW.One.stats).relativeValue),(t=>e.IsoValue.relative(t)),U_.Numeric(Math.min(1,u),{min:c,max:u,step:FR(Math.round((a-i)/l)/100,2)},{immediateUpdate:!0}))},(e=>"absolute"===e.kind?"absolute":"relative"),((t,n)=>"absolute"===n?e.IsoValue.toAbsolute(t,o):e.IsoValue.toRelative(t,o)),{isEssential:!0})}let o,i,a;e.createIsoValueParam=r,e.IsoValueParam=r(e.IsoValue.relative(2)),e.One={label:"",grid:GW.One,sourceData:{kind:"",name:"",data:{}},customProperties:new Zk,_propertyData:Object.create(null)},e.areEquivalent=function(e,t){return GW.areEquivalent(e.grid,t.grid)},e.isEmpty=function(e){return GW.isEmpty(e.grid)},e.isOrbitals=function(e){return!!jW.is(e.sourceData)&&e.sourceData.data.header.orbitals},e.Loci=function(e){return{kind:"volume-loci",volume:e}},e.isLoci=function(e){return!!e&&"volume-loci"===e.kind},e.areLociEqual=function(e,t){return e.volume===t.volume},e.isLociEmpty=function(e){return GW.isEmpty(e.volume.grid)},e.getBoundingSphere=function(e,t){return GW.getBoundingSphere(e.grid,t)},function(t){t.Loci=function(e,t){return{kind:"isosurface-loci",volume:e,isoValue:t}},t.isLoci=function(e){return!!e&&"isosurface-loci"===e.kind},t.areLociEqual=function(t,n){return t.volume===n.volume&&e.IsoValue.areSame(t.isoValue,n.isoValue,t.volume.grid.stats)},t.isLociEmpty=function(e){return 0===e.volume.grid.cells.data.length};const n=XT();t.getBoundingSphere=function(t,r,o){const i=e.IsoValue.toAbsolute(r,t.grid.stats).absoluteValue,a=i<0,s=[0,0,0],l=t.grid.cells.space.getCoords,c=t.grid.cells.data,[u,d,A]=t.grid.cells.space.dimensions;let f=u-1,p=d-1,h=A-1,g=0,m=0,y=0;for(let e=0,n=c.length;e<n;++e)(a&&c[e]<=i||!a&&c[e]>=i)&&(l(e,s),s[0]<f&&(f=s[0]),s[1]<p&&(p=s[1]),s[2]<h&&(h=s[2]),s[0]>g&&(g=s[0]),s[1]>m&&(m=s[1]),s[2]>y&&(y=s[2]));qh.set(n.min,f-1,p-1,h-1),qh.set(n.max,g+1,m+1,y+1);const v=GW.getGridToCartesianTransform(t.grid);return XT.transform(n,n,v),YT.fromBox3D(o||YT(),n)}}(o=e.Isosurface||(e.Isosurface={})),function(e){e.Loci=function(e,t){return{kind:"cell-loci",volume:e,indices:t}},e.isLoci=function(e){return!!e&&"cell-loci"===e.kind},e.areLociEqual=function(e,t){return e.volume===t.volume&&ey.areEqual(e.indices,t.indices)},e.isLociEmpty=function(e){return 0===ey.size(e.indices)};const t=new lO("98"),n=qh();e.getBoundingSphere=function(e,r,o){t.reset();const i=GW.getGridToCartesianTransform(e.grid),{getCoords:a}=e.grid.cells.space;for(let l=0,c=ey.size(r);l<c;l++){a(ey.getAt(r,l),n),qh.transformMat4(n,n,i),t.includePosition(n)}t.finishedIncludeStep();for(let l=0,c=ey.size(r);l<c;l++){a(ey.getAt(r,l),n),qh.transformMat4(n,n,i),t.radiusPosition(n)}const s=t.getSphere(o);return YT.expand(s,s,10*Yh.getMaxScaleOnAxis(i))}}(i=e.Cell||(e.Cell={})),function(t){t.Loci=function(e,t){return{kind:"segment-loci",volume:e,segments:Em.ofUnsortedArray(t)}},t.isLoci=function(e){return!!e&&"segment-loci"===e.kind},t.areLociEqual=function(e,t){return e.volume===t.volume&&Em.areEqual(e.segments,t.segments)},t.isLociEmpty=function(e){return 0===e.volume.grid.cells.data.length||0===e.segments.length};const n=XT();t.getBoundingSphere=function(t,r,o){const i=e.Segmentation.get(t);if(i){XT.setEmpty(n);for(let t=0,o=r.length;t<o;++t){const e=i.bounds[r[t]];XT.add(n,e.min),XT.add(n,e.max)}const e=GW.getGridToCartesianTransform(t.grid);return XT.transform(n,n,e),YT.fromBox3D(o||YT(),n)}return e.getBoundingSphere(t,o)},t.Location=function(e,t){return{kind:"segment-location",volume:e,segment:t}},t.isLocation=function(e){return!!e&&"segment-location"===e.kind}}(a=e.Segment||(e.Segment={})),e.PickingGranularity={set(e,t){e._propertyData.__picking_granularity__=t},get(e){var t;return null!==(t=e._propertyData.__picking_granularity__)&&void 0!==t?t:"voxel"}},e.Segmentation={set(e,t){e._propertyData.__segmentation__=t},get:e=>e._propertyData.__segmentation__}}(HW||(HW={}));const qW=OW();var YW,XW,WW;function KW(e,t,n){return{type:"attribute",kind:e,itemSize:t,divisor:n}}function JW(e,t){return{type:"uniform",kind:e,variant:t}}function ZW(e,t,n,r,o){return{type:"texture",kind:e,format:t,dataType:n,filter:r,variant:o}}function $W(e){return{type:"elements",kind:e}}function eK(e,t){return{type:"define",kind:e,options:t}}function tK(e){return{type:"value",kind:e}}!function(e){function t(e,t,r,o,i,a,s,l,c,u){return u?function(e,t,n,r,o,i,a,s,l,c){const u=i.getWidth(),d=i.getHeight(),A=i.getDepth();return Sp.update(c.gridDimension,t),Sp.update(c.gridTexture,i),Sp.update(c.gridTextureDim,qh.set(c.gridTextureDim.ref.value,u,d,A)),Sp.update(c.gridStats,Kh.set(c.gridStats.ref.value,a.min,a.max,a.mean,a.sigma)),Sp.update(c.bboxMin,e.min),Sp.update(c.bboxMax,e.max),Sp.update(c.bboxSize,qh.sub(c.bboxSize.ref.value,e.max,e.min)),Sp.update(c.transform,n),Sp.update(c.cellDim,o),Sp.update(c.unitToCartn,r),Sp.update(c.cartnToUnit,Yh.invert(Yh(),r)),Sp.updateIfChanged(c.packedGroup,s),Sp.updateIfChanged(c.axisOrder,qh.fromArray(c.axisOrder.ref.value,l,0)),c}(e,t,r,o,i,a,s,l,c,u):function(e,t,r,o,i,a,s,l,c){const u=YT();let d=-1;const A=a.getWidth(),f=a.getHeight(),p=a.getDepth(),h={kind:"direct-volume",gridDimension:Sp.create(t),gridTexture:Sp.create(a),gridTextureDim:Sp.create(qh.create(A,f,p)),gridStats:Sp.create(Kh.create(s.min,s.max,s.mean,s.sigma)),bboxMin:Sp.create(e.min),bboxMax:Sp.create(e.max),bboxSize:Sp.create(qh.sub(qh(),e.max,e.min)),transform:Sp.create(r),cellDim:Sp.create(i),unitToCartn:Sp.create(o),cartnToUnit:Sp.create(Yh.invert(Yh(),o)),get boundingSphere(){const e=n(h);if(e!==d){const t=function(e,t){return YT.fromDimensionsAndTransform(YT(),e,t)}(h.gridDimension.ref.value,h.transform.ref.value);YT.copy(u,t),d=e}return u},packedGroup:Sp.create(l),axisOrder:Sp.create(c),setBoundingSphere(e){YT.copy(u,e),d=n(h)}};return h}(e,t,r,o,i,a,s,l,c)}function n(e){return Fh([e.bboxSize.ref.version,e.gridDimension.ref.version,e.gridTexture.ref.version,e.transform.ref.version,e.gridStats.ref.version])}function r(e){return t(XT(),qh(),Yh.identity(),Yh.identity(),qh(),uY(),GW.One.stats,!1,qh.create(0,1,2),e)}function o(e,t){return Math.ceil(qh.magnitude(e)*t)}function i(e,t){return Math.min(...e)*(1/t)}function a(e){return 1/e}function s(t,n,r,s,l){const{gridTexture:c,gridTextureDim:u,gridStats:d}=t,{bboxSize:A,bboxMin:f,bboxMax:p,gridDimension:h,transform:g}=t,{instanceCount:m,groupCount:y}=r,v=dY(r,e.Utils.createPositionIterator(t,n),s.color),b=l.instanceGranularity?wV(m,"instance"):wV(m*y,"groupInstance"),C=yY(),I=IY(),E=MY(),x=DY(),B=BY(),[w,_,S]=h.ref.value,D={drawCount:qW.indices.length,vertexCount:w*_*S,groupCount:y,instanceCount:m},T=YT.clone(t.boundingSphere),k=EV(T,n.aTransform.ref.value,m,0),Q=LW(NW(l.controlPoints));return{dGeometryType:Sp.create("directVolume"),...v,...b,...C,...I,...E,...x,...B,...n,...Fk.createValues(l,D),aPosition:Sp.create(qW.vertices),elements:Sp.create(qW.indices),boundingSphere:Sp.create(k),invariantBoundingSphere:Sp.create(T),uInvariantBoundingSphere:Sp.create(Kh.ofSphere(T)),uBboxMin:f,uBboxMax:p,uBboxSize:A,uMaxSteps:Sp.create(o(h.ref.value,l.stepsPerCell)),uStepScale:Sp.create(i(t.cellDim.ref.value,l.stepsPerCell)),uJumpLength:Sp.create(l.jumpLength),uTransform:g,uGridDim:h,tTransferTex:Q,uTransferScale:Sp.create(a(l.stepsPerCell)),dGridTexType:Sp.create(c.ref.value.getDepth()>0?"3d":"2d"),uGridTexDim:u,tGridTex:c,uGridStats:d,uCellDim:t.cellDim,uCartnToUnit:t.cartnToUnit,uUnitToCartn:t.unitToCartn,dPackedGroup:t.packedGroup,dAxisOrder:Sp.create(t.axisOrder.ref.value.join("")),dIgnoreLight:Sp.create(l.ignoreLight),dCelShaded:Sp.create(l.celShaded),dXrayShaded:Sp.create("inverted"===l.xrayShaded?"inverted":!0===l.xrayShaded?"on":"off")}}e.create=t,e.createEmpty=r,e.Params={...Fk.Params,ignoreLight:U_.Boolean(!1,Fk.ShadingCategory),celShaded:U_.Boolean(!1,Fk.ShadingCategory),xrayShaded:U_.Select(!1,[[!1,"Off"],[!0,"On"],["inverted","Inverted"]],Fk.ShadingCategory),controlPoints:U_.LineGraph([Wh.create(.19,0),Wh.create(.2,.05),Wh.create(.25,.05),Wh.create(.26,0),Wh.create(.79,0),Wh.create(.8,.05),Wh.create(.85,.05),Wh.create(.86,0)],{isEssential:!0}),stepsPerCell:U_.Numeric(3,{min:1,max:10,step:1}),jumpLength:U_.Numeric(0,{min:0,max:20,step:.1})},e.Utils={Params:e.Params,createEmpty:r,createValues:s,createValuesSimple:function(t,n,r,o,i){const a=Fk.createSimple(r,o,i),l={...U_.getDefaultValues(e.Params),...n};return s(t,a.transform,a.locationIterator,a.theme,l)},updateValues:function(e,t){Fk.updateValues(e,t),Sp.updateIfChanged(e.dIgnoreLight,t.ignoreLight),Sp.updateIfChanged(e.dCelShaded,t.celShaded),Sp.updateIfChanged(e.dXrayShaded,"inverted"===t.xrayShaded?"inverted":!0===t.xrayShaded?"on":"off");LW(NW(t.controlPoints),e.tTransferTex),Sp.updateIfChanged(e.uMaxSteps,o(e.uGridDim.ref.value,t.stepsPerCell)),Sp.updateIfChanged(e.uStepScale,i(e.uCellDim.ref.value,t.stepsPerCell)),Sp.updateIfChanged(e.uTransferScale,a(t.stepsPerCell)),Sp.updateIfChanged(e.uJumpLength,t.jumpLength)},updateBoundingSphere:function(e,t){const n=YT.clone(t.boundingSphere),r=EV(n,e.aTransform.ref.value,e.instanceCount.ref.value,0);YT.equals(r,e.boundingSphere.ref.value)||Sp.update(e.boundingSphere,r);YT.equals(n,e.invariantBoundingSphere.ref.value)||(Sp.update(e.invariantBoundingSphere,n),Sp.update(e.uInvariantBoundingSphere,Kh.fromSphere(e.uInvariantBoundingSphere.ref.value,n)))},createRenderableState:function(e){const t=Fk.createRenderableState(e);return t.opaque=!1,t.writeDepth=!1,t},updateRenderableState:function(e,t){Fk.updateRenderableState(e,t),e.opaque=!1,e.writeDepth=!1},createPositionIterator:function(e,t){const n=e.transform.ref.value,[r,o,i]=e.gridDimension.ref.value,a=r*o*i,s=t.instanceCount.ref.value,l=BT(),c=l.position,u=t.aTransform.ref.value;return xT(a,s,1,((e,t)=>{const r=Math.floor(e/i);return c[0]=Math.floor(r/o),c[1]=r%o,c[2]=e%i,qh.transformMat4(c,c,n),t>=0&&qh.transformMat4Offset(c,c,u,0,0,16*t),l}))}}}(YW||(YW={})),function(e){function t(e,t,n,s){return s?function(e,t,n,r){return r.sphereCount=n,Sp.update(r.centerBuffer,e),Sp.update(r.groupBuffer,t),r.shaderData.update(),r}(e,t,n,s):function(e,t,n){const s=YT();let c,u=-1,d=-1;const A=Sp.create(gV(1,4,Float32Array)),f=Sp.create(Wh.create(0,0)),p=Sp.create([]),h=Sp.create(0),g={kind:"spheres",sphereCount:n,centerBuffer:Sp.create(e),groupBuffer:Sp.create(t),get boundingSphere(){const e=r(g);if(e!==u){const t=CV(g.centerBuffer.ref.value,g.sphereCount,1);YT.copy(s,t),u=e}return s},get groupMapping(){return g.groupBuffer.ref.version!==d&&(c=fV(g.groupBuffer.ref.value,g.sphereCount),d=g.groupBuffer.ref.version),c},setBoundingSphere(e){YT.copy(s,e),u=r(g)},shaderData:{positionGroup:A,texDim:f,lodLevels:p,sizeFactor:h,update(e){var t,n;const r=null!==(t=null===e||void 0===e?void 0:e.lodLevels)&&void 0!==t?t:a(p.ref.value),s=null!==(n=null===e||void 0===e?void 0:e.sizeFactor)&&void 0!==n?n:h.ref.value,c=l(r,s),u=gV(g.sphereCount,4,Float32Array,A.ref.value.array),d=o(u,g.centerBuffer.ref.value,g.groupBuffer.ref.value,g.sphereCount,c),m=d?i(r,s,d,g.sphereCount):[];Sp.update(A,u),Sp.update(f,Wh.set(f.ref.value,u.width,u.height)),Sp.update(p,m),Sp.update(h,s)}}};return g.shaderData.update(),g}(e,t,n)}function n(e){return t(e?e.centerBuffer.ref.value:new Float32Array(0),e?e.groupBuffer.ref.value:new Float32Array(0),0,e)}function r(e){return Fh([e.sphereCount,e.centerBuffer.ref.version,e.groupBuffer.ref.version])}function o(e,t,n,r,o){const{array:i}=e;if(0===o.length){for(let e=0;e<r;++e)i[4*e+0]=t[3*e+0],i[4*e+1]=t[3*e+1],i[4*e+2]=t[3*e+2],i[4*e+3]=n[e];return}const a=[0];let s=0;for(let l=0,c=o.length;l<c;++l){const e=o[l];for(let a=0;a<r;++a){let r=!1;for(let e=0;e<l;++e)if(a%o[e]===0){r=!0;break}r||a%e!==0||(i[4*s+0]=t[3*a+0],i[4*s+1]=t[3*a+1],i[4*s+2]=t[3*a+2],i[4*s+3]=n[a],s+=1)}a.push(6*s)}return a}function i(e,t,n,r){return e.map(((e,o)=>{const i=s(e,t);return[e.minDistance,e.maxDistance,e.overlap,n[n.length-1-o],Math.pow(Math.min(r,i),1/e.scaleBias),e.stride,e.scaleBias]}))}function a(e){return e.map((e=>({minDistance:e[0],maxDistance:e[1],overlap:e[2],stride:e[5],scaleBias:e[6]})))}function s(e,t){return Math.max(1,Math.round(e.stride/Math.pow(t,e.scaleBias)))}function l(e,t){return e.map((e=>s(e,t))).reverse()}function c(e,t){const n=e.sphereCount,r=t.instanceCount.ref.value,o=BT(),i=o.position,a=e.centerBuffer.ref.value,s=t.aTransform.ref.value;return xT(n,r,1,((e,t)=>(t<0?qh.fromArray(i,a,3*e):qh.transformMat4Offset(i,a,s,0,3*e,16*t),o)))}function u(e,t,n,r,o){const{instanceCount:i,groupCount:a}=n,s=dY(n,c(e,t),r.color),l=iW(n,r.size),u=o.instanceGranularity?wV(i,"instance"):wV(i*a,"groupInstance"),d=yY(),A=IY(),f=MY(),p=DY(),h=BY(),g={drawCount:2*e.sphereCount*3,vertexCount:6*e.sphereCount,groupCount:a,instanceCount:i},m=e.boundingSphere.radius?sW(l)*o.sizeFactor:0,y=YT.expand(YT(),e.boundingSphere,m),v=EV(y,t.aTransform.ref.value,i,0);return e.shaderData.update({lodLevels:o.lodLevels,sizeFactor:o.sizeFactor}),{dGeometryType:Sp.create("spheres"),uTexDim:e.shaderData.texDim,tPositionGroup:e.shaderData.positionGroup,boundingSphere:Sp.create(v),invariantBoundingSphere:Sp.create(y),uInvariantBoundingSphere:Sp.create(Kh.ofSphere(y)),...s,...l,...u,...d,...A,...f,...p,...h,...t,padding:Sp.create(m),...Fk.createValues(o,g),uSizeFactor:e.shaderData.sizeFactor,uDoubleSided:Sp.create(o.doubleSided),dIgnoreLight:Sp.create(o.ignoreLight),dCelShaded:Sp.create(o.celShaded),dXrayShaded:Sp.create("inverted"===o.xrayShaded?"inverted":!0===o.xrayShaded?"on":"off"),dTransparentBackfaces:Sp.create(o.transparentBackfaces),dSolidInterior:Sp.create(o.solidInterior),dClipPrimitive:Sp.create(o.clipPrimitive),dApproximate:Sp.create(o.approximate),uAlphaThickness:Sp.create(o.alphaThickness),uBumpFrequency:Sp.create(o.bumpFrequency),uBumpAmplitude:Sp.create(o.bumpAmplitude),lodLevels:e.shaderData.lodLevels,centerBuffer:e.centerBuffer,groupBuffer:e.groupBuffer}}function d(e,t){Fk.updateRenderableState(e,t),e.opaque=e.opaque&&!t.xrayShaded,e.writeDepth=e.opaque}e.create=t,e.createEmpty=n,e.Params={...Fk.Params,sizeFactor:U_.Numeric(1,{min:0,max:10,step:.1}),doubleSided:U_.Boolean(!1,Fk.CustomQualityParamInfo),ignoreLight:U_.Boolean(!1,Fk.ShadingCategory),celShaded:U_.Boolean(!1,Fk.ShadingCategory),xrayShaded:U_.Select(!1,[[!1,"Off"],[!0,"On"],["inverted","Inverted"]],Fk.ShadingCategory),transparentBackfaces:U_.Select("off",U_.arrayToOptions(["off","on","opaque"]),Fk.ShadingCategory),solidInterior:U_.Boolean(!0,Fk.ShadingCategory),clipPrimitive:U_.Boolean(!1,{...Fk.ShadingCategory,description:"Clip whole sphere instead of cutting it."}),approximate:U_.Boolean(!1,{...Fk.ShadingCategory,description:"Faster rendering, but has artifacts."}),alphaThickness:U_.Numeric(0,{min:0,max:20,step:1},{...Fk.ShadingCategory,description:"If not zero, adjusts alpha for radius."}),bumpFrequency:U_.Numeric(0,{min:0,max:10,step:.1},Fk.ShadingCategory),bumpAmplitude:U_.Numeric(1,{min:0,max:5,step:.1},Fk.ShadingCategory),lodLevels:U_.ObjectList({minDistance:U_.Numeric(0),maxDistance:U_.Numeric(0),overlap:U_.Numeric(0),stride:U_.Numeric(0),scaleBias:U_.Numeric(3,{min:.1,max:10,step:.1})},(e=>`${e.stride}`),{...Fk.CullingLodCategory,defaultValue:[]})},e.Utils={Params:e.Params,createEmpty:n,createValues:u,createValuesSimple:function(t,n,r,o,i){const a=Fk.createSimple(r,o,i),s={...U_.getDefaultValues(e.Params),...n};return u(t,a.transform,a.locationIterator,a.theme,s)},updateValues:function(e,t){Fk.updateValues(e,t),Sp.updateIfChanged(e.uSizeFactor,t.sizeFactor),Sp.updateIfChanged(e.uDoubleSided,t.doubleSided),Sp.updateIfChanged(e.dIgnoreLight,t.ignoreLight),Sp.updateIfChanged(e.dCelShaded,t.celShaded),Sp.updateIfChanged(e.dXrayShaded,"inverted"===t.xrayShaded?"inverted":!0===t.xrayShaded?"on":"off"),Sp.updateIfChanged(e.dTransparentBackfaces,t.transparentBackfaces),Sp.updateIfChanged(e.dSolidInterior,t.solidInterior),Sp.updateIfChanged(e.dClipPrimitive,t.clipPrimitive),Sp.updateIfChanged(e.dApproximate,t.approximate),Sp.updateIfChanged(e.uAlphaThickness,t.alphaThickness),Sp.updateIfChanged(e.uBumpFrequency,t.bumpFrequency),Sp.updateIfChanged(e.uBumpAmplitude,t.bumpAmplitude);const n=a(e.lodLevels.ref.value);if(!function(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;++n){if(e[n].maxDistance!==t[n].maxDistance)return!1;if(e[n].minDistance!==t[n].minDistance)return!1;if(e[n].overlap!==t[n].overlap)return!1;if(e[n].stride!==t[n].stride)return!1;if(e[n].scaleBias!==t[n].scaleBias)return!1}return!0}(t.lodLevels,n)){const n=e.uVertexCount.ref.value/6,r=l(t.lodLevels,t.sizeFactor),a=o(e.tPositionGroup.ref.value,e.centerBuffer.ref.value,e.groupBuffer.ref.value,n,r),s=a?i(t.lodLevels,t.sizeFactor,a,n):[];Sp.update(e.tPositionGroup,e.tPositionGroup.ref.value),Sp.update(e.lodLevels,s)}},updateBoundingSphere:function(e,t){const n=t.boundingSphere.radius?sW(e)*e.uSizeFactor.ref.value:0,r=YT.expand(YT(),t.boundingSphere,n),o=EV(r,e.aTransform.ref.value,e.instanceCount.ref.value,0);YT.equals(o,e.boundingSphere.ref.value)||Sp.update(e.boundingSphere,o);YT.equals(r,e.invariantBoundingSphere.ref.value)||(Sp.update(e.invariantBoundingSphere,r),Sp.update(e.uInvariantBoundingSphere,Kh.fromSphere(e.uInvariantBoundingSphere.ref.value,r)));Sp.update(e.padding,n)},createRenderableState:function(e){const t=Fk.createRenderableState(e);return d(t,e),t},updateRenderableState:d,createPositionIterator:c}}(XW||(XW={})),function(e){class t{constructor(){this.index=0,this.textures=[]}get(){return this.textures[this.index]}set(e,t,n){this.textures[this.index]=Object.assign(this.textures[this.index]||{},{vertex:e,group:t,normal:n}),this.index=(this.index+1)%2}destroy(){for(const e of this.textures)e.vertex.destroy(),e.group.destroy(),e.normal.destroy()}}function n(e,n,r,o,i,a,s){const l=r.getWidth(),c=r.getHeight();return s?(s.vertexCount=e,s.groupCount=n,Sp.update(s.geoTextureDim,Wh.set(s.geoTextureDim.ref.value,l,c)),Sp.update(s.vertexTexture,r),Sp.update(s.groupTexture,o),Sp.update(s.normalTexture,i),s.doubleBuffer.set(r,o,i),YT.copy(s.boundingSphere,a),s):{kind:"texture-mesh",vertexCount:e,groupCount:n,geoTextureDim:Sp.create(Wh.create(l,c)),vertexTexture:Sp.create(r),groupTexture:Sp.create(o),normalTexture:Sp.create(i),varyingGroup:Sp.create(!1),doubleBuffer:new t,boundingSphere:YT.clone(a),meta:{}}}function r(e){return n(0,0,e?e.vertexTexture.ref.value:uY(),e?e.groupTexture.ref.value:uY(),e?e.normalTexture.ref.value:uY(),e?e.boundingSphere:YT(),e)}e.DoubleBuffer=t,e.create=n,e.createEmpty=r,e.Params={...Fk.Params,doubleSided:U_.Boolean(!1,Fk.CustomQualityParamInfo),flipSided:U_.Boolean(!1,Fk.ShadingCategory),flatShaded:U_.Boolean(!1,Fk.ShadingCategory),ignoreLight:U_.Boolean(!1,Fk.ShadingCategory),celShaded:U_.Boolean(!1,Fk.ShadingCategory),xrayShaded:U_.Select(!1,[[!1,"Off"],[!0,"On"],["inverted","Inverted"]],Fk.ShadingCategory),transparentBackfaces:U_.Select("off",U_.arrayToOptions(["off","on","opaque"]),Fk.ShadingCategory),bumpFrequency:U_.Numeric(0,{min:0,max:10,step:.1},Fk.ShadingCategory),bumpAmplitude:U_.Numeric(1,{min:0,max:5,step:.1},Fk.ShadingCategory)},e.Utils={Params:e.Params,createEmpty:r,createValues:i,createValuesSimple:function(t,n,r,o,a){const s=Fk.createSimple(r,o,a),l={...U_.getDefaultValues(e.Params),...n};return i(t,s.transform,s.locationIterator,s.theme,l)},updateValues:function(e,t){Fk.updateValues(e,t),Sp.updateIfChanged(e.uDoubleSided,t.doubleSided),Sp.updateIfChanged(e.dFlatShaded,t.flatShaded),Sp.updateIfChanged(e.dFlipSided,t.flipSided),Sp.updateIfChanged(e.dIgnoreLight,t.ignoreLight),Sp.updateIfChanged(e.dCelShaded,t.celShaded),Sp.updateIfChanged(e.dXrayShaded,"inverted"===t.xrayShaded?"inverted":!0===t.xrayShaded?"on":"off"),Sp.updateIfChanged(e.dTransparentBackfaces,t.transparentBackfaces),Sp.updateIfChanged(e.uBumpFrequency,t.bumpFrequency),Sp.updateIfChanged(e.uBumpAmplitude,t.bumpAmplitude)},updateBoundingSphere:function(e,t){const n=YT.clone(t.boundingSphere),r=EV(n,e.aTransform.ref.value,e.instanceCount.ref.value,0);YT.equals(r,e.boundingSphere.ref.value)||Sp.update(e.boundingSphere,r);YT.equals(n,e.invariantBoundingSphere.ref.value)||(Sp.update(e.invariantBoundingSphere,n),Sp.update(e.uInvariantBoundingSphere,Kh.fromSphere(e.uInvariantBoundingSphere.ref.value,n)))},createRenderableState:function(e){const t=Fk.createRenderableState(e);return a(t,e),t},updateRenderableState:a,createPositionIterator:function(e,t){const n=e.meta.webgl;if(!n)return xT(1,1,1,(()=>IT));n.namedFramebuffers[o]||(n.namedFramebuffers[o]=n.resources.framebuffer());const r=n.namedFramebuffers[o],[i,a]=e.geoTextureDim.ref.value,s=new Float32Array(i*a*4);r.bind(),e.vertexTexture.ref.value.attachFramebuffer(r,0),n.readPixels(0,0,i,a,s);const l=new Float32Array(i*a*4);r.bind(),e.normalTexture.ref.value.attachFramebuffer(r,0),n.readPixels(0,0,i,a,l);const c=e.vertexCount,u=t.instanceCount.ref.value,d=BT(),A=d.position,f=d.normal,p=t.aTransform.ref.value;return xT(c,u,1,((e,t)=>(t<0?(qh.fromArray(A,s,4*e),qh.fromArray(f,l,4*e)):(qh.transformMat4Offset(A,s,p,0,4*e,16*t),qh.transformDirectionOffset(f,l,p,0,4*e,16*t)),d)))}};const o="texture-mesh";function i(t,n,r,o,i){const{instanceCount:a,groupCount:s}=r,l=dY(r,e.Utils.createPositionIterator(t,n),o.color),c=i.instanceGranularity?wV(a,"instance"):wV(a*s,"groupInstance"),u=yY(),d=IY(),A=MY(),f=DY(),p=BY(),h={drawCount:t.vertexCount,vertexCount:t.vertexCount,groupCount:s,instanceCount:a},g=YT.clone(t.boundingSphere),m=EV(g,n.aTransform.ref.value,a,0);return{dGeometryType:Sp.create("textureMesh"),uGeoTexDim:t.geoTextureDim,tPosition:t.vertexTexture,tGroup:t.groupTexture,tNormal:t.normalTexture,dVaryingGroup:t.varyingGroup,boundingSphere:Sp.create(m),invariantBoundingSphere:Sp.create(g),uInvariantBoundingSphere:Sp.create(Kh.ofSphere(g)),...l,...c,...u,...d,...A,...f,...p,...n,...Fk.createValues(i,h),uDoubleSided:Sp.create(i.doubleSided),dFlatShaded:Sp.create(i.flatShaded),dFlipSided:Sp.create(i.flipSided),dIgnoreLight:Sp.create(i.ignoreLight),dCelShaded:Sp.create(i.celShaded),dXrayShaded:Sp.create("inverted"===i.xrayShaded?"inverted":!0===i.xrayShaded?"on":"off"),dTransparentBackfaces:Sp.create(i.transparentBackfaces),uBumpFrequency:Sp.create(i.bumpFrequency),uBumpAmplitude:Sp.create(i.bumpAmplitude),meta:Sp.create(t.meta)}}function a(e,t){Fk.updateRenderableState(e,t),e.opaque=e.opaque&&!t.xrayShaded,e.writeDepth=e.opaque}}(WW||(WW={}));const nK={uDrawId:JW("i"),uModel:JW("m4"),uView:JW("m4"),uInvView:JW("m4"),uModelView:JW("m4"),uInvModelView:JW("m4"),uProjection:JW("m4"),uInvProjection:JW("m4"),uModelViewProjection:JW("m4"),uInvModelViewProjection:JW("m4"),uIsOrtho:JW("f"),uPixelRatio:JW("f"),uViewport:JW("v4"),uViewOffset:JW("v2"),uDrawingBufferSize:JW("v2"),uCameraPosition:JW("v3"),uCameraDir:JW("v3"),uCameraPlane:JW("v4"),uNear:JW("f"),uFar:JW("f"),uFog:JW("b"),uFogNear:JW("f"),uFogFar:JW("f"),uFogColor:JW("v3"),uTransparentBackground:JW("b"),uLightDirection:JW("v3[]"),uLightColor:JW("v3[]"),uAmbientColor:JW("v3"),uPickingAlphaThreshold:JW("f"),uInteriorDarkening:JW("f"),uInteriorColorFlag:JW("b"),uInteriorColor:JW("v3"),uHighlightColor:JW("v3"),uSelectColor:JW("v3"),uDimColor:JW("v3"),uHighlightStrength:JW("f"),uSelectStrength:JW("f"),uDimStrength:JW("f"),uMarkerPriority:JW("i"),uMarkerAverage:JW("f"),uXrayEdgeFalloff:JW("f"),uCelSteps:JW("f"),uExposure:JW("f"),uRenderMask:JW("i"),uMarkingDepthTest:JW("b"),uMarkingType:JW("i"),uPickType:JW("i")},rK={tDepth:ZW("texture","depth","ushort","nearest"),tDpoitDepth:ZW("texture","rg","float","nearest"),tDpoitFrontColor:ZW("texture","rgba","float","nearest"),tDpoitBackColor:ZW("texture","rgba","float","nearest")},oK={uObjectId:JW("i")},iK={uColor:JW("v3","material"),uColorTexDim:JW("v2"),uColorGridDim:JW("v3"),uColorGridTransform:JW("v4"),tColor:ZW("image-uint8","rgb","ubyte","nearest"),tPalette:ZW("image-uint8","rgb","ubyte","nearest"),tColorGrid:ZW("texture","rgb","ubyte","linear"),dColorType:eK("string",["uniform","attribute","instance","group","groupInstance","vertex","vertexInstance","volume","volumeInstance","direct"]),dUsePalette:eK("boolean")},aK={uSize:JW("f","material"),uSizeTexDim:JW("v2"),tSize:ZW("image-uint8","rgb","ubyte","nearest"),dSizeType:eK("string",["uniform","attribute","instance","group","groupInstance"]),uSizeFactor:JW("f","material")},sK={uMarker:JW("f"),uMarkerTexDim:JW("v2"),tMarker:ZW("image-uint8","alpha","ubyte","nearest"),markerAverage:tK("number"),markerStatus:tK("number"),dMarkerType:eK("string",["instance","groupInstance"])},lK={uOverpaintTexDim:JW("v2"),tOverpaint:ZW("image-uint8","rgba","ubyte","nearest"),dOverpaint:eK("boolean"),uOverpaintGridDim:JW("v3"),uOverpaintGridTransform:JW("v4"),tOverpaintGrid:ZW("texture","rgba","ubyte","linear"),dOverpaintType:eK("string",["instance","groupInstance","volumeInstance"]),uOverpaintStrength:JW("f","material")},cK={uTransparencyTexDim:JW("v2"),tTransparency:ZW("image-uint8","alpha","ubyte","nearest"),dTransparency:eK("boolean"),transparencyAverage:tK("number"),uTransparencyGridDim:JW("v3"),uTransparencyGridTransform:JW("v4"),tTransparencyGrid:ZW("texture","alpha","ubyte","linear"),dTransparencyType:eK("string",["instance","groupInstance","volumeInstance"]),uTransparencyStrength:JW("f","material")},uK={uEmissiveTexDim:JW("v2"),tEmissive:ZW("image-uint8","alpha","ubyte","nearest"),dEmissive:eK("boolean"),emissiveAverage:tK("number"),uEmissiveGridDim:JW("v3"),uEmissiveGridTransform:JW("v4"),tEmissiveGrid:ZW("texture","alpha","ubyte","linear"),dEmissiveType:eK("string",["instance","groupInstance","volumeInstance"]),uEmissiveStrength:JW("f","material")},dK={uSubstanceTexDim:JW("v2"),tSubstance:ZW("image-uint8","rgba","ubyte","nearest"),dSubstance:eK("boolean"),uSubstanceGridDim:JW("v3"),uSubstanceGridTransform:JW("v4"),tSubstanceGrid:ZW("texture","rgba","ubyte","linear"),dSubstanceType:eK("string",["instance","groupInstance","volumeInstance"]),uSubstanceStrength:JW("f","material")},AK={uClippingTexDim:JW("v2"),tClipping:ZW("image-uint8","alpha","ubyte","nearest"),dClipping:eK("boolean"),dClippingType:eK("string",["instance","groupInstance"])},fK={dGeometryType:eK("string",["cylinders","directVolume","image","lines","mesh","points","spheres","text","textureMesh"]),...iK,...sK,...lK,...cK,...uK,...dK,...AK,dLightCount:eK("number"),dColorMarker:eK("boolean"),dClipObjectCount:eK("number"),dClipVariant:eK("string",["instance","pixel"]),uClipObjectType:JW("i[]","material"),uClipObjectInvert:JW("b[]","material"),uClipObjectPosition:JW("v3[]","material"),uClipObjectRotation:JW("v4[]","material"),uClipObjectScale:JW("v3[]","material"),aInstance:KW("float32",1,1),aTransform:KW("float32",16,1),uAlpha:JW("f","material"),uMetalness:JW("f","material"),uRoughness:JW("f","material"),uBumpiness:JW("f","material"),uEmissive:JW("f","material"),uVertexCount:JW("i"),uInstanceCount:JW("i"),uGroupCount:JW("i"),uInvariantBoundingSphere:JW("v4"),uLod:JW("v4"),drawCount:tK("number"),instanceCount:tK("number"),alpha:tK("number"),matrix:tK("m4"),transform:tK("float32"),extraTransform:tK("float32"),hasReflection:tK("boolean"),instanceGranularity:tK("boolean"),boundingSphere:tK("sphere"),invariantBoundingSphere:tK("sphere"),instanceGrid:tK("instanceGrid")},pK="\nprecision highp float;\n\nattribute vec2 aPosition;\nuniform vec2 uQuadScale;\n\nvoid main(void) {\n    vec2 position = aPosition * uQuadScale - vec2(1.0, 1.0) + uQuadScale;\n    gl_Position = vec4(position, 0.0, 1.0);\n}\n",hK=Bp();const gK=Object.keys({color:"",pick:"",depth:"",marking:"",emissive:""}),mK=Object.keys({compute:""});function yK(e,t,n,r,o){return n={...n,dRenderVariant:Sp.create(t)},void 0===o.dRenderVariant&&Object.defineProperty(o,"dRenderVariant",{value:eK("string")}),e.resources.program(n,r,o)}function vK(e,t){if("color"===e)switch(t){case"blended":return"colorBlended";case"wboit":return"colorWboit";case"dpoit":return"colorDpoit"}return e}function bK(e,t,n,r,o,i,a){return IK(e,t,n,r,o,i,gK,a)}function CK(e,t,n,r,o){return IK(e,t,n,r,o,arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,mK,void 0)}function IK(e,t,n,r,o,i,a,s){const l=hK(),{stats:c,state:u,resources:d}=e,{instancedArrays:A,vertexArrayObject:f,multiDrawInstancedBaseVertexBaseInstance:p,drawInstancedBaseVertexBaseInstance:h}=e.extensions;if(o.uVertexCount&&!e.extensions.noNonInstancedActiveAttribs){const e=o.uVertexCount.ref.value;o.aVertex=Sp.create(Z_(new Float32Array(e))),r.aVertex=KW("float32",1,0)}const{attributeValues:g,defineValues:m,textureValues:y,materialTextureValues:v,uniformValues:b,materialUniformValues:C,bufferedUniformValues:I}=function(e,t){const n={},r={},o={},i={},a={},s={},l={};return Object.keys(e).forEach((c=>{const u=e[c];"attribute"===u.type&&(n[c]=t[c]),"define"===u.type&&(r[c]=t[c]),"texture"===u.type&&void 0!==t[c]&&("material"===u.variant?i[c]=t[c]:o[c]=t[c]),"uniform"===u.type&&void 0!==t[c]&&("material"===u.variant?s[c]=t[c]:"buffered"===u.variant?l[c]=t[c]:a[c]=t[c])})),{attributeValues:n,defineValues:r,textureValues:o,materialTextureValues:i,uniformValues:a,materialUniformValues:s,bufferedUniformValues:l}}(r,o),E=Object.entries(b),x=Object.entries(C),B=Object.entries(I),w=Object.entries(function(e){const t={};return Object.keys(e).forEach((n=>{t[n]=Sp.create(ew(e[n].ref.value))})),t}(I)),_=Object.entries(m),S=function(e){const t={};return Object.keys(e).forEach((n=>{t[n]=e[n].ref.version})),t}(o),D=function(e,t){const{gl:n}=e;switch(t){case"points":return n.POINTS;case"lines":return n.LINES;case"line-strip":return n.LINE_STRIP;case"line-loop":return n.LINE_LOOP;case"triangles":return n.TRIANGLES;case"triangle-strip":return n.TRIANGLE_STRIP;case"triangle-fan":return n.TRIANGLE_FAN}}(e,t),T={};for(const z of a)T[z]=yK(e,vK(z,s),m,n,r);const k=sY(e,r,y),Q=sY(e,r,v),M=function(e,t,n){const r=[];return Object.keys(t).forEach((o=>{const i=t[o];"attribute"===i.type&&(r[r.length]=[o,e.resources.attribute(n[o].ref.value,i.itemSize,i.divisor)])})),r}(e,r,g),R=[];for(let z=0,H=M.length;z<H;++z){const e=M[z];1===e[1].divisor&&R.push(e)}let P;const O=o.elements;O&&O.ref.value&&(P=d.elements(O.ref.value));const F={};for(const z of a)F[z]=f?d.vertexArray(T[z],M,P):null;let N=o.drawCount.ref.value,L=o.instanceCount.ref.value;c.drawCount+=N,c.instanceCount+=L,c.instancedDrawCount+=L*N;const U={attributes:!1,defines:!1,elements:!1,textures:!1};let G=!1,j=-1;return{id:l,materialId:i,getProgram:e=>T[e],setTransparency:t=>{if(t!==s){s=t;for(const t of a)T[t].destroy(),T[t]=yK(e,vK(t,s),m,n,r)}},render:(t,n,r)=>{if(0===N||0===L)return;const o=T[t];if(o.id===j&&u.currentRenderItemId===l)o.setUniforms(E),o.bindTextures(k,n);else{const e=F[t];o.id===u.currentProgramId&&o.id===j&&-1!==i&&i===u.currentMaterialId||(o.id!==u.currentProgramId&&o.use(),o.setUniforms(x),o.bindTextures(Q,n+k.length),u.currentMaterialId=i,j=o.id),o.setUniforms(E),o.setUniforms(w),o.bindTextures(k,n),e?(e.bind(),P&&P.bind()):(P&&P.bind(),o.bindAttributes(M)),u.currentRenderItemId=l}if(Aw)try{SV(e.gl)}catch(l0e){throw new Error(`Framebuffer error rendering item id ${l}: '${l0e}'`)}if(r){for(const e of r)if(0!==e.count){if(o.setUniforms(e.uniforms),p)P?p.multiDrawElementsInstancedBaseVertexBaseInstance(D,e.counts,0,P._dataType,e.offsets,0,e.instanceCounts,0,e.baseVertices,0,e.baseInstances,0,e.count):p.multiDrawArraysInstancedBaseInstance(D,e.firsts,0,e.counts,0,e.instanceCounts,0,e.baseInstances,0,e.count);else if(h)if(P)for(let t=0;t<e.count;++t)e.counts[t]>0&&(o.uniform("uDrawId",t),h.drawElementsInstancedBaseVertexBaseInstance(D,e.counts[t],P._dataType,e.offsets[t],e.instanceCounts[t],e.baseVertices[t],e.baseInstances[t]));else for(let t=0;t<e.count;++t)e.counts[t]>0&&(o.uniform("uDrawId",t),h.drawArraysInstancedBaseInstance(D,e.firsts[t],e.counts[t],e.instanceCounts[t],e.baseInstances[t]));else if(P)for(let t=0;t<e.count;++t)e.counts[t]>0&&(o.uniform("uDrawId",t),o.offsetAttributes(R,e.baseInstances[t]),A.drawElementsInstanced(D,e.counts[t],P._dataType,e.offsets[t],e.instanceCounts[t]));else for(let t=0;t<e.count;++t)e.counts[t]>0&&(o.uniform("uDrawId",t),o.offsetAttributes(R,e.baseInstances[t]),A.drawArraysInstanced(D,0,e.counts[t],e.instanceCounts[t]));if(fw){p?c.calls.multiDrawInstancedBase+=1:h?c.calls.drawInstancedBase+=e.count:c.calls.drawInstanced+=e.count;for(let t=0;t<e.count;++t)c.calls.counts+=e.instanceCounts[t]}}}else P?A.drawElementsInstanced(D,N,P._dataType,0,L):A.drawArraysInstanced(D,0,N,L),fw&&(c.calls.drawInstanced+=1,c.calls.counts+=L);if(Aw)try{Lq(e.gl)}catch(l0e){throw new Error(`Draw error rendering item id ${l}: '${l0e}'`)}},update:()=>{if(function(e){e.attributes=!1,e.defines=!1,e.elements=!1,e.textures=!1}(U),o.aVertex){const e=o.uVertexCount.ref.value;o.aVertex.ref.value.length<e&&Sp.update(o.aVertex,Z_(new Float32Array(e)))}for(let e=0,t=_.length;e<t;++e){const[t,n]=_[e];n.ref.version!==S[t]&&(U.defines=!0,S[t]=n.ref.version)}if(U.defines)for(const t of a)T[t].destroy(),T[t]=yK(e,vK(t,s),m,n,r);o.drawCount.ref.version!==S.drawCount&&(c.drawCount+=o.drawCount.ref.value-N,c.instancedDrawCount+=L*o.drawCount.ref.value-L*N,N=o.drawCount.ref.value,S.drawCount=o.drawCount.ref.version),o.instanceCount.ref.version!==S.instanceCount&&(c.instanceCount+=o.instanceCount.ref.value-L,c.instancedDrawCount+=o.instanceCount.ref.value*N-L*N,L=o.instanceCount.ref.value,S.instanceCount=o.instanceCount.ref.version);for(let e=0,t=M.length;e<t;++e){const[t,n]=M[e],o=g[t];if(o.ref.version!==S[t]){if(n.length>=o.ref.value.length)n.updateSubData(o.ref.value,0,n.length);else{n.destroy();const{itemSize:i,divisor:a}=r[t];M[e][1]=d.attribute(o.ref.value,i,a),U.attributes=!0}S[t]=o.ref.version}}if(P&&o.elements.ref.version!==S.elements&&(P.length>=o.elements.ref.value.length?P.updateSubData(o.elements.ref.value,0,P.length):(P.destroy(),P=d.elements(o.elements.ref.value),U.elements=!0),S.elements=o.elements.ref.version),U.attributes||U.defines||U.elements)for(const e of a){const t=F[e];t&&t.destroy(),F[e]=f?d.vertexArray(T[e],M,P):null}for(let e=0,t=k.length;e<t;++e){const[t,n]=k[e],o=y[t];o.ref.version!==S[t]&&("texture"!==r[t].kind?(n.load(o.ref.value),U.textures=!0):k[e][1]=o.ref.value,S[t]=o.ref.version)}for(let e=0,t=Q.length;e<t;++e){const[t,n]=Q[e],o=v[t];o.ref.version!==S[t]&&("texture"!==r[t].kind?(n.load(o.ref.value),U.textures=!0):Q[e][1]=o.ref.value,S[t]=o.ref.version)}for(let e=0,t=B.length;e<t;++e){const[t,n]=B[e];n.ref.version!==S[t]&&(Sp.update(w[e][1],ew(n.ref.value)),S[t]=n.ref.version)}},destroy:()=>{if(!G){for(const e of a){T[e].destroy();const t=F[e];t&&t.destroy()}k.forEach((e=>{let[t,n]=e;"texture"!==r[t].kind&&n.destroy()})),Q.forEach((e=>{let[t,n]=e;"texture"!==r[t].kind&&n.destroy()})),M.forEach((e=>{let[t,n]=e;return n.destroy()})),P&&P.destroy(),c.drawCount-=N,c.instanceCount-=L,c.instancedDrawCount-=L*N,G=!0}}}}function EK(){return EK.create(qh.create(1,0,0),0)}function xK(){return xK.create(EK(),EK(),EK(),EK(),EK(),EK())}!function(e){function t(e,t){return qh.copy(e.normal,t.normal),e.constant=t.constant,e}function n(e,t,n){return qh.copy(e.normal,t),e.constant=-qh.dot(e.normal,n),e}e.create=function(e,t){return{normal:e,constant:t}},e.copy=t,e.clone=function(n){return t(e(),n)},e.normalize=function(e,t){const n=1/qh.magnitude(t.normal);return qh.scale(e.normal,t.normal,n),e.constant=t.constant*n,e},e.negate=function(e,t){return qh.negate(e.normal,t.normal),e.constant=-t.constant,e},e.toArray=function(e,t,n){return qh.toArray(e.normal,t,n),t[n+3]=e.constant,t},e.fromArray=function(e,t,n){return qh.fromArray(e.normal,t,n),e.constant=t[n+3],e},e.fromNormalAndCoplanarPoint=n,e.fromCoplanarPoints=function(e,t,r,o){return n(e,qh.triangleNormal(qh(),t,r,o),t),e};const r=qh();function o(e,t){return qh.dot(e.normal,t)+e.constant}e.setUnnormalized=function(e,t,n,o,i){qh.set(r,t,n,o);const a=1/qh.magnitude(r);return qh.scale(e.normal,r,a),e.constant=i*a,e},e.distanceToPoint=o,e.distanceToSpher3D=function(e,t){return o(e,t.center)-t.radius},e.projectPoint=function(e,t,n){return qh.scaleAndAdd(e,e,t.normal,-o(t,n))}}(EK||(EK={})),function(e){function t(e,t){for(let n=0;n<6;++n)EK.copy(e[n],t[n]);return e}e.create=function(e,t,n,r,o,i){return[e,t,n,r,o,i]},e.copy=t,e.clone=function(n){return t(e(),n)},e.fromProjectionMatrix=function(e,t){const n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],A=t[10],f=t[11],p=t[12],h=t[13],g=t[14],m=t[15];return EK.setUnnormalized(e[0],i-n,c-a,f-u,m-p),EK.setUnnormalized(e[1],i+n,c+a,f+u,m+p),EK.setUnnormalized(e[2],i+r,c+s,f+d,m+h),EK.setUnnormalized(e[3],i-r,c-s,f-d,m-h),EK.setUnnormalized(e[4],i-o,c-l,f-A,m-g),EK.setUnnormalized(e[5],i+o,c+l,f+A,m+g),e},e.intersectsSphere3D=function(e,t){const n=t.center,r=-t.radius;for(let o=0;o<6;++o){if(EK.distanceToPoint(e[o],n)<r)return!1}return!0};const n=qh();e.intersectsBox3D=function(e,t){for(let r=0;r<6;++r){const o=e[r];if(n[0]=o.normal[0]>0?t.max[0]:t.min[0],n[1]=o.normal[1]>0?t.max[1]:t.min[1],n[2]=o.normal[2]>0?t.max[2]:t.min[2],EK.distanceToPoint(o,n)<0)return!1}return!0},e.containsPoint=function(e,t){for(let n=0;n<6;++n)if(EK.distanceToPoint(e[n],t)<0)return!1;return!0}}(xK||(xK={}));const BK=EK.distanceToPoint,wK=xK.intersectsSphere3D,_K=YT.fromArray,SK=Bp();function DK(e,t){return t&&t.instanceCounts.length>=e?t:{firsts:new Int32Array(e),counts:new Int32Array(e),offsets:new Int32Array(e),instanceCounts:new Int32Array(e),baseVertices:new Int32Array(e),baseInstances:new Uint32Array(e),count:0,uniforms:[]}}function TK(e,t,n){const r=SK();let o=DK(0);const i=[];let a=!1,s=-1;const l=YT(),c=()=>{var e;const n=null===(e=t.lodLevels)||void 0===e?void 0:e.ref.value;if(n&&n.length>0){const{cellCount:e}=t.instanceGrid.ref.value;i.length=n.length;for(let t=0,r=n.length;t<r;++t)i[t]=DK(e,i[t]),i[t].count=0;if(t.lodLevels.ref.version!==s){for(let e=0,t=n.length;e<t;++e)1!==i[e].uniforms.length&&(i[e].uniforms.length=1,i[e].uniforms[0]=["uLod",Sp.create(Kh())]),Sp.update(i[e].uniforms[0][1],Kh.set(i[e].uniforms[0][1].ref.value,n[e][0],n[e][1],n[e][2],n[e][4]));s=t.lodLevels.ref.version}}};return c(),{id:r,materialId:e.materialId,values:t,state:n,cull:(e,n,r,u)=>{var d,A;if(a=!1,0===t.drawCount.ref.value)return;if(0===t.instanceCount.ref.value)return;if(t.instanceGrid.ref.value.cellSize<=1)return;const{cellOffsets:f,cellSpheres:p,cellCount:h,batchOffsets:g,batchSpheres:m,batchCount:y,batchCell:v,batchSize:b}=t.instanceGrid.ref.value,[C,I]=t.uLod.ref.value,E=0!==C||0!==I,x=2*b,B=null===(d=t.lodLevels)||void 0===d?void 0:d.ref.value;if(B&&B.length>0){if((null===(A=t.lodLevels)||void 0===A?void 0:A.ref.version)!==s)c();else for(let e=0,t=B.length;e<t;++e)i[e].count=0;for(let t=0;t<y;++t){const o=g[t],a=g[t+1];if(0===a-o)continue;_K(l,m,4*t);const s=BK(e,l.center);if(E&&(s+l.radius<C||s-l.radius>I))fw&&(u.culled.lod+=f[v[a-1]+1]-f[v[o]]);else if(wK(n,l))if(null!==r&&r(l))fw&&(u.culled.occlusion+=f[v[a-1]+1]-f[v[o]]);else for(let t=o;t<a;++t){const o=v[t],a=f[o],s=f[o+1]-a;if(0===s)continue;_K(l,p,4*o);const c=BK(e,l.center);if(E&&(c+l.radius<C||c-l.radius>I))fw&&(u.culled.lod+=s);else if(wK(n,l))if(null!==r&&c-l.radius<x&&r(l))fw&&(u.culled.occlusion+=s);else for(let e=0,t=B.length;e<t;++e){if(c+l.radius<B[e][0]||c-l.radius>B[e][1])continue;const t=i[e],n=t.count;n>0&&t.baseInstances[n-1]+t.instanceCounts[n-1]===a&&t.counts[n-1]===B[e][3]?t.instanceCounts[n-1]+=s:(t.counts[n]=B[e][3],t.instanceCounts[n]=s,t.baseInstances[n]=a,t.count+=1)}else fw&&(u.culled.frustum+=s)}else fw&&(u.culled.frustum+=f[v[a-1]+1]-f[v[o]])}}else{o=DK(h,o);const{baseInstances:a,instanceCounts:s,counts:c}=o;let d=0;for(let o=0;o<y;++o){const i=g[o],A=g[o+1];if(0!==A-i){if(_K(l,m,4*o),E){const t=BK(e,l.center);if(t+l.radius<C||t-l.radius>I){fw&&(u.culled.lod+=f[v[A-1]+1]-f[v[i]]);continue}}if(wK(n,l))if(null!==r&&r(l))fw&&(u.culled.occlusion+=f[v[A-1]+1]-f[v[i]]);else for(let o=i;o<A;++o){const i=v[o],A=f[i],h=f[i+1]-A;if(0===h)continue;_K(l,p,4*i);const g=BK(e,l.center);E&&(g+l.radius<C||g-l.radius>I)?fw&&(u.culled.lod+=h):wK(n,l)?null!==r&&g-l.radius<x&&r(l)?fw&&(u.culled.occlusion+=h):d>0&&a[d-1]+s[d-1]===A?s[d-1]+=h:(c[d]=t.drawCount.ref.value,s[d]=h,a[d]=A,d+=1):fw&&(u.culled.frustum+=h)}else fw&&(u.culled.frustum+=f[v[A-1]+1]-f[v[i]])}}o.count=d,i.length=1,i[0]=o,i[0].uniforms.length=0}a=!0},uncull:()=>{a=!1},render:(r,o)=>{t.uAlpha&&t.alpha&&Sp.updateIfChanged(t.uAlpha,zp(t.alpha.ref.value*n.alphaFactor,0,1)),e.render(r,o,a?i:void 0)},getProgram:t=>e.getProgram(t),setTransparency:t=>e.setTransparency(t),update:()=>{e.update(),c()},dispose:()=>e.destroy()}}function kK(e,t){return{id:SK(),values:t,render:()=>e.render("compute",0),update:()=>e.update(),dispose:()=>e.destroy()}}const QK=new Float32Array([1,1,-1,1,-1,-1,-1,-1,1,-1,1,1]),MK={drawCount:tK("number"),instanceCount:tK("number"),aPosition:KW("float32",2,0),uQuadScale:JW("v2")},RK={drawCount:Sp.create(6),instanceCount:Sp.create(1),aPosition:Sp.create(QK),uQuadScale:Sp.create(Wh.create(1,1))},PK={...MK,tColor:ZW("texture","rgba","ubyte","nearest"),uTexSize:JW("v2")},OK=jV("copy",pK,"\nprecision highp float;\nprecision highp sampler2D;\n\nuniform sampler2D tColor;\nuniform vec2 uTexSize;\n\nvoid main() {\n    vec2 coords = gl_FragCoord.xy / uTexSize;\n    gl_FragColor = texture2D(tColor, coords);\n}\n");function FK(e,t){const n={...RK,tColor:Sp.create(t),uTexSize:Sp.create(Wh.create(t.getWidth(),t.getHeight()))},r={...PK};return kK(CK(e,"triangles",OK,r,n),n)}const NK=new Uint32Array([0,1,2,1,3,2]),LK=new Float32Array([0,1,0,0,1,1,1,0]),UK={nearest:"Nearest",catmulrom:"Catmulrom (Cubic)",mitchell:"Mitchell (Cubic)",bspline:"B-Spline (Cubic)"},GK=Object.keys(UK);var jK,zK,HK;!function(e){function t(e,t,n,r){return r?function(e,t,n,r){const o=e.width,i=e.height;return Sp.update(r.imageTexture,e),Sp.update(r.imageTextureDim,Wh.set(r.imageTextureDim.ref.value,o,i)),Sp.update(r.cornerBuffer,t),Sp.update(r.groupTexture,n),r}(e,t,n,r):function(e,t,n){const r=YT();let o=-1;const i=e.width,a=e.height,s={kind:"image",imageTexture:Sp.create(e),imageTextureDim:Sp.create(Wh.create(i,a)),cornerBuffer:Sp.create(t),groupTexture:Sp.create(n),get boundingSphere(){const e=function(e){return Fh([e.cornerBuffer.ref.version])}(s);if(e!==o){const t=function(e){const t=qh(),n=[];for(let i=0,a=e.length;i<a;i+=3){const r=qh.fromArray(qh(),e,i);n.push(r),qh.add(t,t,r)}qh.scale(t,t,1/(e.length/3));let r=0;for(const i of n){const e=qh.distance(t,i);e>r&&(r=e)}const o=YT.create(t,r);return YT.setExtrema(o,n),o}(s.cornerBuffer.ref.value);YT.copy(r,t),o=e}return r}};return s}(e,t,n)}function n(e){return t(gV(0,4,Uint8Array),e?e.cornerBuffer.ref.value:new Float32Array(24),gV(0,4,Uint8Array),e)}function r(t,n,r,o,i){const{instanceCount:a,groupCount:s}=r,l=dY(r,e.Utils.createPositionIterator(t,n),o.color),c=i.instanceGranularity?wV(a,"instance"):wV(a*s,"groupInstance"),u=yY(),d=IY(),A=MY(),f=DY(),p=BY(),h={drawCount:NK.length,vertexCount:QK.length/3,groupCount:s,instanceCount:a},g=YT.clone(t.boundingSphere),m=EV(g,n.aTransform.ref.value,a,0);return{dGeometryType:Sp.create("image"),...l,...c,...u,...d,...A,...f,...p,...n,...Fk.createValues(i,h),aPosition:t.cornerBuffer,aUv:Sp.create(LK),elements:Sp.create(NK),aGroup:Sp.create(Z_(new Float32Array(4))),boundingSphere:Sp.create(m),invariantBoundingSphere:Sp.create(g),uInvariantBoundingSphere:Sp.create(Kh.ofSphere(g)),dInterpolation:Sp.create(i.interpolation),uImageTexDim:t.imageTextureDim,tImageTex:t.imageTexture,tGroupTex:t.groupTexture}}e.create=t,e.createEmpty=n,e.Params={...Fk.Params,interpolation:U_.Select("bspline",U_.objectToOptions(UK))},e.Utils={Params:e.Params,createEmpty:n,createValues:r,createValuesSimple:function(t,n,o,i,a){const s=Fk.createSimple(o,i,a),l={...U_.getDefaultValues(e.Params),...n};return r(t,s.transform,s.locationIterator,s.theme,l)},updateValues:function(e,t){Fk.updateValues(e,t),Sp.updateIfChanged(e.dInterpolation,t.interpolation)},updateBoundingSphere:function(e,t){const n=YT.clone(t.boundingSphere),r=EV(n,e.aTransform.ref.value,e.instanceCount.ref.value,0);YT.equals(r,e.boundingSphere.ref.value)||Sp.update(e.boundingSphere,r);YT.equals(n,e.invariantBoundingSphere.ref.value)||(Sp.update(e.invariantBoundingSphere,n),Sp.update(e.uInvariantBoundingSphere,Kh.fromSphere(e.uInvariantBoundingSphere.ref.value,n)))},createRenderableState:function(e){const t=Fk.createRenderableState(e);return t.opaque=!1,t},updateRenderableState:function(e,t){Fk.updateRenderableState(e,t),e.opaque=!1},createPositionIterator:()=>xT(1,1,1,(()=>IT))}}(jK||(jK={})),function(e){function t(e,t,n,o,i,a,s,l,c,u){return u?function(e,t,n,r,o,i,a,s,l,c){l>c.cylinderCount&&(Sp.update(c.mappingBuffer,e),Sp.update(c.indexBuffer,t));return c.cylinderCount=l,Sp.update(c.groupBuffer,n),Sp.update(c.startBuffer,r),Sp.update(c.endBuffer,o),Sp.update(c.scaleBuffer,i),Sp.update(c.capBuffer,a),Sp.update(c.colorModeBuffer,s),c}(e,t,n,o,i,a,s,l,c,u):function(e,t,n,o,i,a,s,l,c){const u=YT();let d,A=-1,f=-1;const p={kind:"cylinders",cylinderCount:c,mappingBuffer:Sp.create(e),indexBuffer:Sp.create(t),groupBuffer:Sp.create(n),startBuffer:Sp.create(o),endBuffer:Sp.create(i),scaleBuffer:Sp.create(a),capBuffer:Sp.create(s),colorModeBuffer:Sp.create(l),get boundingSphere(){const e=r(p);if(e!==A){const t=CV(p.startBuffer.ref.value,6*p.cylinderCount,6),n=CV(p.endBuffer.ref.value,6*p.cylinderCount,6);YT.expandBySphere(u,t,n),A=e}return u},get groupMapping(){return p.groupBuffer.ref.version!==f&&(d=fV(p.groupBuffer.ref.value,p.cylinderCount,6),f=p.groupBuffer.ref.version),d},setBoundingSphere(e){YT.copy(u,e),A=r(p)}};return p}(e,t,n,o,i,a,s,l,c)}function n(e){return t(e?e.mappingBuffer.ref.value:new Float32Array(0),e?e.indexBuffer.ref.value:new Uint32Array(0),e?e.groupBuffer.ref.value:new Float32Array(0),e?e.startBuffer.ref.value:new Float32Array(0),e?e.endBuffer.ref.value:new Float32Array(0),e?e.scaleBuffer.ref.value:new Float32Array(0),e?e.capBuffer.ref.value:new Float32Array(0),e?e.colorModeBuffer.ref.value:new Float32Array(0),0,e)}function r(e){return Fh([e.cylinderCount,e.mappingBuffer.ref.version,e.indexBuffer.ref.version,e.groupBuffer.ref.version,e.startBuffer.ref.version,e.endBuffer.ref.version,e.scaleBuffer.ref.version,e.capBuffer.ref.version,e.colorModeBuffer.ref.version])}function o(e,t){const n=6*e.cylinderCount,r=t.instanceCount.ref.value,o=BT(),i=o.position,a=e.startBuffer.ref.value,s=e.endBuffer.ref.value,l=t.aTransform.ref.value;return xT(n,r,2,((e,t)=>{const n=e%6===0?a:s;return t<0?qh.fromArray(i,n,3*e):qh.transformMat4Offset(i,n,l,0,3*e,16*t),o}))}function i(e,t,n,r,i){const{instanceCount:a,groupCount:s}=n,l=dY(n,o(e,t),r.color),c=iW(n,r.size),u=i.instanceGranularity?wV(a,"instance"):wV(a*s,"groupInstance"),d=yY(),A=IY(),f=MY(),p=DY(),h=BY(),g={drawCount:4*e.cylinderCount*3,vertexCount:6*e.cylinderCount,groupCount:s,instanceCount:a},m=sW(c)*i.sizeFactor,y=YT.clone(e.boundingSphere),v=EV(y,t.aTransform.ref.value,a,0);return{dGeometryType:Sp.create("cylinders"),aMapping:e.mappingBuffer,aGroup:e.groupBuffer,aStart:e.startBuffer,aEnd:e.endBuffer,aScale:e.scaleBuffer,aCap:e.capBuffer,aColorMode:e.colorModeBuffer,elements:e.indexBuffer,boundingSphere:Sp.create(v),invariantBoundingSphere:Sp.create(y),uInvariantBoundingSphere:Sp.create(Kh.ofSphere(y)),...l,...c,...u,...d,...A,...f,...p,...h,...t,padding:Sp.create(m),...Fk.createValues(i,g),uSizeFactor:Sp.create(i.sizeFactor*i.sizeAspectRatio),uDoubleSided:Sp.create(i.doubleSided),dIgnoreLight:Sp.create(i.ignoreLight),dCelShaded:Sp.create(i.celShaded),dXrayShaded:Sp.create("inverted"===i.xrayShaded?"inverted":!0===i.xrayShaded?"on":"off"),dTransparentBackfaces:Sp.create(i.transparentBackfaces),dSolidInterior:Sp.create(i.solidInterior),uBumpFrequency:Sp.create(i.bumpFrequency),uBumpAmplitude:Sp.create(i.bumpAmplitude),dDualColor:Sp.create("interpolate"===i.colorMode)}}function a(e,t){Fk.updateRenderableState(e,t),e.opaque=e.opaque&&!t.xrayShaded,e.writeDepth=e.opaque}e.create=t,e.createEmpty=n,e.transform=function(e,t){const n=e.startBuffer.ref.value;aV(t,n,0,6*e.cylinderCount),Sp.update(e.startBuffer,n);const r=e.endBuffer.ref.value;aV(t,r,0,6*e.cylinderCount),Sp.update(e.endBuffer,r)},e.Params={...Fk.Params,sizeFactor:U_.Numeric(1,{min:0,max:10,step:.1}),sizeAspectRatio:U_.Numeric(1,{min:0,max:3,step:.01}),doubleSided:U_.Boolean(!1,Fk.CustomQualityParamInfo),ignoreLight:U_.Boolean(!1,Fk.ShadingCategory),celShaded:U_.Boolean(!1,Fk.ShadingCategory),xrayShaded:U_.Select(!1,[[!1,"Off"],[!0,"On"],["inverted","Inverted"]],Fk.ShadingCategory),transparentBackfaces:U_.Select("off",U_.arrayToOptions(["off","on","opaque"]),Fk.ShadingCategory),solidInterior:U_.Boolean(!0,Fk.ShadingCategory),bumpFrequency:U_.Numeric(0,{min:0,max:10,step:.1},Fk.ShadingCategory),bumpAmplitude:U_.Numeric(1,{min:0,max:5,step:.1},Fk.ShadingCategory),colorMode:U_.Select("default",U_.arrayToOptions(["default","interpolate"]),Fk.ShadingCategory)},e.Utils={Params:e.Params,createEmpty:n,createValues:i,createValuesSimple:function(t,n,r,o,a){const s=Fk.createSimple(r,o,a),l={...U_.getDefaultValues(e.Params),...n};return i(t,s.transform,s.locationIterator,s.theme,l)},updateValues:function(e,t){Fk.updateValues(e,t),Sp.updateIfChanged(e.uSizeFactor,t.sizeFactor*t.sizeAspectRatio),Sp.updateIfChanged(e.uDoubleSided,t.doubleSided),Sp.updateIfChanged(e.dIgnoreLight,t.ignoreLight),Sp.updateIfChanged(e.dCelShaded,t.celShaded),Sp.updateIfChanged(e.dXrayShaded,"inverted"===t.xrayShaded?"inverted":!0===t.xrayShaded?"on":"off"),Sp.updateIfChanged(e.dTransparentBackfaces,t.transparentBackfaces),Sp.updateIfChanged(e.dSolidInterior,t.solidInterior),Sp.updateIfChanged(e.uBumpFrequency,t.bumpFrequency),Sp.updateIfChanged(e.uBumpAmplitude,t.bumpAmplitude),Sp.updateIfChanged(e.dDualColor,"interpolate"===t.colorMode)},updateBoundingSphere:function(e,t){const n=YT.clone(t.boundingSphere),r=EV(n,e.aTransform.ref.value,e.instanceCount.ref.value,0);YT.equals(r,e.boundingSphere.ref.value)||Sp.update(e.boundingSphere,r);YT.equals(n,e.invariantBoundingSphere.ref.value)||(Sp.update(e.invariantBoundingSphere,n),Sp.update(e.uInvariantBoundingSphere,Kh.fromSphere(e.uInvariantBoundingSphere.ref.value,n)))},createRenderableState:function(e){const t=Fk.createRenderableState(e);return a(t,e),t},updateRenderableState:a,createPositionIterator:o}}(zK||(zK={})),function(e){function t(e){switch(e.kind){case"mesh":return 3*e.triangleCount;case"points":return e.pointCount;case"spheres":return 2*e.sphereCount*3;case"cylinders":return 4*e.cylinderCount*3;case"text":return 2*e.charCount*3;case"lines":return 2*e.lineCount*3;case"direct-volume":return 36;case"image":return 6;case"texture-mesh":return e.vertexCount}}e.getDrawCount=t,e.getVertexCount=function(e){switch(e.kind){case"mesh":case"texture-mesh":return e.vertexCount;case"points":return e.pointCount;case"spheres":return 6*e.sphereCount;case"cylinders":return 6*e.cylinderCount;case"text":return 4*e.charCount;case"lines":return 4*e.lineCount;case"direct-volume":const[t,n,r]=e.gridDimension.ref.value;return t*n*r;case"image":return 4}},e.getGroupCount=function(e){switch(e.kind){case"mesh":case"points":case"spheres":case"cylinders":case"text":case"lines":return 0===t(e)?0:q_(e.groupBuffer.ref.value)+1;case"direct-volume":return 1;case"image":return q_(e.groupTexture.ref.value.array)+1;case"texture-mesh":return e.groupCount}},e.getUtils=function(e){switch(e.kind){case"mesh":return RY.Utils;case"points":return dW.Utils;case"spheres":return XW.Utils;case"cylinders":return zK.Utils;case"text":return yW.Utils;case"lines":return wW.Utils;case"direct-volume":return YW.Utils;case"image":return jK.Utils;case"texture-mesh":return WW.Utils}},e.getGranularity=function(e,t){return"instance"===t&&e.nonInstanceable?"group":t}}(HK||(HK={}));const VK={};function qK(e,t){return{factory:qK,granularity:"groupInstance",size:e=>AJ.isLocation(e)?e.shape.getSize(e.group,e.instance):1,props:t,description:"Assigns sizes as defined by the shape object."}}const YK={name:"shape-group",label:"Shape Group",category:"",factory:qK,getParams:function(e){return VK},defaultValues:U_.getDefaultValues(VK),isApplicable:e=>!!e.shape},XK=Jp(13421772),WK={};function KK(e,t){return{factory:KK,granularity:"groupInstance",color:e=>AJ.isLocation(e)?e.shape.getColor(e.group,e.instance):XK,props:t,description:"Assigns colors as defined by the shape object."}}const JK={name:"shape-group",label:"Shape Group",category:Ck.Misc,factory:KK,getParams:function(e){return WK},defaultValues:U_.getDefaultValues(WK),isApplicable:e=>!!e.shape},ZK={...fK,aPosition:KW("float32",3,0),elements:$W("uint32"),uBboxMin:JW("v3"),uBboxMax:JW("v3"),uBboxSize:JW("v3"),uMaxSteps:JW("i"),uStepScale:JW("f"),uJumpLength:JW("f"),uTransform:JW("m4"),uGridDim:JW("v3"),tTransferTex:ZW("image-uint8","alpha","ubyte","linear"),uTransferScale:JW("f","material"),dGridTexType:eK("string",["2d","3d"]),uGridTexDim:JW("v3"),tGridTex:ZW("texture","rgba","ubyte","linear"),uGridStats:JW("v4"),uCellDim:JW("v3"),uCartnToUnit:JW("m4"),uUnitToCartn:JW("m4"),dPackedGroup:eK("boolean"),dAxisOrder:eK("string",["012","021","102","120","201","210"]),dIgnoreLight:eK("boolean"),dCelShaded:eK("boolean"),dXrayShaded:eK("string",["off","on","inverted"])};const $K={...fK,aGroup:KW("float32",1,0),aPosition:KW("float32",3,0),aNormal:KW("float32",3,0),elements:$W("uint32"),dVaryingGroup:eK("boolean"),dFlatShaded:eK("boolean"),uDoubleSided:JW("b","material"),dFlipSided:eK("boolean"),dIgnoreLight:eK("boolean"),dCelShaded:eK("boolean"),dXrayShaded:eK("string",["off","on","inverted"]),dTransparentBackfaces:eK("string",["off","on","opaque"]),uBumpFrequency:JW("f","material"),uBumpAmplitude:JW("f","material"),meta:tK("unknown")};const eJ={...fK,...aK,aGroup:KW("float32",1,0),aPosition:KW("float32",3,0),dPointSizeAttenuation:eK("boolean"),dPointStyle:eK("string",["square","circle","fuzzy"])};const tJ={...fK,...aK,aGroup:KW("float32",1,0),aMapping:KW("float32",2,0),aStart:KW("float32",3,0),aEnd:KW("float32",3,0),elements:$W("uint32"),dLineSizeAttenuation:eK("boolean"),uDoubleSided:JW("b","material"),dFlipSided:eK("boolean")};const nJ={...fK,...aK,uTexDim:JW("v2"),tPositionGroup:ZW("image-float32","rgba","float","nearest"),padding:tK("number"),uDoubleSided:JW("b","material"),dIgnoreLight:eK("boolean"),dCelShaded:eK("boolean"),dXrayShaded:eK("string",["off","on","inverted"]),dTransparentBackfaces:eK("string",["off","on","opaque"]),dSolidInterior:eK("boolean"),dClipPrimitive:eK("boolean"),dApproximate:eK("boolean"),uAlphaThickness:JW("f"),uBumpFrequency:JW("f","material"),uBumpAmplitude:JW("f","material"),lodLevels:tK("unknown"),centerBuffer:tK("float32"),groupBuffer:tK("float32")};const rJ={...fK,...aK,aGroup:KW("float32",1,0),aPosition:KW("float32",3,0),aMapping:KW("float32",2,0),aDepth:KW("float32",1,0),elements:$W("uint32"),aTexCoord:KW("float32",2,0),tFont:ZW("image-uint8","alpha","ubyte","linear"),padding:tK("number"),uBorderWidth:JW("f","material"),uBorderColor:JW("v3","material"),uOffsetX:JW("f","material"),uOffsetY:JW("f","material"),uOffsetZ:JW("f","material"),uBackgroundColor:JW("v3","material"),uBackgroundOpacity:JW("f","material")};const oJ={...fK,uGeoTexDim:JW("v2","buffered"),tPosition:ZW("texture","rgb","float","nearest"),tGroup:ZW("texture","alpha","float","nearest"),tNormal:ZW("texture","rgb","float","nearest"),dVaryingGroup:eK("boolean"),dFlatShaded:eK("boolean"),uDoubleSided:JW("b","material"),dFlipSided:eK("boolean"),dIgnoreLight:eK("boolean"),dCelShaded:eK("boolean"),dXrayShaded:eK("string",["off","on","inverted"]),dTransparentBackfaces:eK("string",["off","on","opaque"]),uBumpFrequency:JW("f","material"),uBumpAmplitude:JW("f","material"),meta:tK("unknown")};const iJ={...fK,aGroup:KW("float32",1,0),aPosition:KW("float32",3,0),aUv:KW("float32",2,0),elements:$W("uint32"),uImageTexDim:JW("v2"),tImageTex:ZW("image-uint8","rgba","ubyte","nearest"),tGroupTex:ZW("image-uint8","rgba","ubyte","nearest"),dInterpolation:eK("string",GK)};const aJ={...fK,...aK,aGroup:KW("float32",1,0),aStart:KW("float32",3,0),aEnd:KW("float32",3,0),aMapping:KW("float32",3,0),aScale:KW("float32",1,0),aCap:KW("float32",1,0),aColorMode:KW("float32",1,0),elements:$W("uint32"),padding:tK("number"),uDoubleSided:JW("b","material"),dIgnoreLight:eK("boolean"),dCelShaded:eK("boolean"),dXrayShaded:eK("string",["off","on","inverted"]),dTransparentBackfaces:eK("string",["off","on","opaque"]),dSolidInterior:eK("boolean"),uBumpFrequency:JW("f","material"),uBumpAmplitude:JW("f","material"),dDualColor:eK("boolean")};const sJ=Bp(0,2147483647),lJ=Bp(0,2147483647);function cJ(e,t,n,r){return{id:sJ(),type:e,values:t,state:n,materialId:r}}function uJ(e,t,n){switch(t.type){case"mesh":return function(e,t,n,r,o,i){const a={...nK,...rK,...oK,...$K},s={uObjectId:Sp.create(t)};return TK(bK(e,"triangles",KV,a,{...n,...s},o,i),n,r)}(e,t.id,t.values,t.state,t.materialId,n);case"points":return function(e,t,n,r,o,i){const a={...nK,...rK,...oK,...eJ},s={uObjectId:Sp.create(t)};return TK(bK(e,"points",VV,a,{...n,...s},o,i),n,r)}(e,t.id,t.values,t.state,t.materialId,n);case"spheres":return function(e,t,n,r,o,i){const a={...nK,...rK,...oK,...nJ},s={uObjectId:Sp.create(t)};return TK(bK(e,"triangles",qV,a,{...n,...s},o,i),n,r)}(e,t.id,t.values,t.state,t.materialId,n);case"cylinders":return function(e,t,n,r,o,i){const a={...nK,...rK,...oK,...aJ},s={uObjectId:Sp.create(t)};return TK(bK(e,"triangles",YV,a,{...n,...s},o,i),n,r)}(e,t.id,t.values,t.state,t.materialId,n);case"text":return function(e,t,n,r,o,i){const a={...nK,...rK,...oK,...rJ},s={uObjectId:Sp.create(t)};return TK(bK(e,"triangles",XV,a,{...n,...s},o,i),n,r)}(e,t.id,t.values,t.state,t.materialId,n);case"lines":return function(e,t,n,r,o,i){const a={...nK,...rK,...oK,...tJ},s={uObjectId:Sp.create(t)};return TK(bK(e,"triangles",WV,a,{...n,...s},o,i),n,r)}(e,t.id,t.values,t.state,t.materialId,n);case"direct-volume":return function(e,t,n,r,o,i){const a={...nK,...rK,...oK,...ZK};e.isWebGL2||(a.uMaxSteps=eK("number"));const s={uObjectId:Sp.create(t)};return TK(bK(e,"triangles",JV,a,{...n,...s},o,i),n,r)}(e,t.id,t.values,t.state,t.materialId,n);case"image":return function(e,t,n,r,o,i){const a={...nK,...rK,...oK,...iJ},s={uObjectId:Sp.create(t)};return TK(bK(e,"triangles",ZV,a,{...n,...s},o,i),n,r)}(e,t.id,t.values,t.state,t.materialId,n);case"texture-mesh":return function(e,t,n,r,o,i){const a={...nK,...rK,...oK,...oJ},s={uObjectId:Sp.create(t)};return TK(bK(e,"triangles",KV,a,{...n,...s},o,i),n,r)}(e,t.id,t.values,t.state,t.materialId,n)}throw new Error("unsupported type")}var dJ,AJ;function fJ(e){const t=e&&e.getElement("vertex"),n=e&&e.getElement("material"),r={group:"",vRed:"",vGreen:"",vBlue:"",mRed:"",mGreen:"",mBlue:""},o=[["",""]],i=[["",""]];if(t){for(let e=0,n=t.propertyNames.length;e<n;++e){const n=t.propertyNames[e],r=t.propertyTypes[e];"uchar"!==r&&"uint8"!==r&&"ushort"!==r&&"uint16"!==r&&"uint"!==r&&"uint32"!==r&&"int"!==r||o.push([n,n]),"uchar"!==r&&"uint8"!==r||i.push([n,n])}t.propertyNames.includes("atomid")?r.group="atomid":t.propertyNames.includes("material_index")&&(r.group="material_index"),t.propertyNames.includes("red")&&(r.vRed="red"),t.propertyNames.includes("green")&&(r.vGreen="green"),t.propertyNames.includes("blue")&&(r.vBlue="blue")}const a=[["",""]];if(n){for(let e=0,t=n.propertyNames.length;e<t;++e){const t=n.propertyNames[e],r=n.propertyTypes[e];"uchar"!==r&&"uint8"!==r||a.push([t,t])}n.propertyNames.includes("red")&&(r.mRed="red"),n.propertyNames.includes("green")&&(r.mGreen="green"),n.propertyNames.includes("blue")&&(r.mBlue="blue")}const s=r.vRed&&r.vGreen&&r.vBlue?"vertex":r.mRed&&r.mGreen&&r.mBlue?"material":"uniform";return{...RY.Params,coloring:U_.MappedStatic(s,{vertex:U_.Group({red:U_.Select(r.vRed,i,{label:"Red Property"}),green:U_.Select(r.vGreen,i,{label:"Green Property"}),blue:U_.Select(r.vBlue,i,{label:"Blue Property"})},{isFlat:!0}),material:U_.Group({red:U_.Select(r.mRed,a,{label:"Red Property"}),green:U_.Select(r.mGreen,a,{label:"Green Property"}),blue:U_.Select(r.mBlue,a,{label:"Blue Property"})},{isFlat:!0}),uniform:U_.Group({color:U_.Color(bk.grey),saturation:U_.Numeric(0,{min:-6,max:6,step:.1}),lightness:U_.Numeric(0,{min:-6,max:6,step:.1})},{isFlat:!0})}),grouping:U_.MappedStatic(r.group?"vertex":"none",{vertex:U_.Group({group:U_.Select(r.group,o,{label:"Group Property"})},{isFlat:!0}),none:U_.Group({})})}}!function(e){function t(e){return{color:KK(0,{}),size:qK(0,{})}}function n(e){const t=e.transforms.length,n=AJ.Location(e);return xT(e.groupCount,t,1,((e,t)=>(n.group=e,n.instance=t,n)))}function r(e,t,n,r,o){const i=o&&o.aTransform.ref.value.length>=16*e.length?o.aTransform.ref.value:new Float32Array(16*e.length);for(let a=0,s=e.length;a<s;++a)Yh.toArray(e[a],i,16*a);return hk(i,e.length,t,n,r,o)}e.create=function(e,t,n,r,o,i,a){return{id:Cp.create22(),name:e,sourceData:t,geometry:n,transforms:a||[Yh.identity()],get groupCount(){return HK.getGroupCount(n)},getColor:r,getSize:o,getLabel:i}},e.getTheme=t,e.groupIterator=n,e.createTransform=r,e.createRenderObject=function(e,o){const i=t(),a=HK.getUtils(e.geometry),s=lJ(),l=n(e),c=r(e.transforms,e.geometry.boundingSphere,o.cellSize,o.batchSize),u=a.createValues(e.geometry,c,l,i,o),d=a.createRenderableState(o);return cJ(e.geometry.kind,u,d,s)},e.Loci=function(e){return{kind:"shape-loci",shape:e}},e.isLoci=function(e){return!!e&&"shape-loci"===e.kind},e.areLociEqual=function(e,t){return e.shape===t.shape},e.isLociEmpty=function(e){return 0===e.shape.groupCount}}(dJ||(dJ={})),function(e){function t(e){let t=0;for(const n of e.groups)t+=ey.size(n.ids);return t}e.Location=function(e){return{kind:"group-location",shape:e,group:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,instance:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}},e.isLocation=function(e){return!!e&&"group-location"===e.kind},e.Loci=function(e,t){return{kind:"group-loci",shape:e,groups:t}},e.isLoci=function(e){return!!e&&"group-loci"===e.kind},e.areLociEqual=function(e,t){if(e.shape!==t.shape)return!1;if(e.groups.length!==t.groups.length)return!1;for(let n=0,r=e.groups.length;n<r;++n){const{ids:r,instance:o}=e.groups[n],{ids:i,instance:a}=t.groups[n];if(o!==a)return!1;if(!ey.areEqual(r,i))return!1}return!0},e.isLociEmpty=function(e){return 0===t(e)},e.size=t;const n=new KM,r=qh.zero();function o(e,t,o,i){const{indices:a,offsets:s}=t;for(const{ids:l,instance:c}of e)ey.forEach(l,(e=>{for(let t=s[e],l=s[e+1];t<l;++t)qh.fromArray(r,o,3*a[t]),qh.transformMat4(r,r,i[c]),n.includeStep(r)}))}function i(e,t,o,i){const{indices:a,offsets:s}=t;for(const{ids:l,instance:c}of e)ey.forEach(l,(e=>{for(let t=s[e],l=s[e+1];t<l;++t)qh.fromArray(r,o,3*a[t]),qh.transformMat4(r,r,i[c]),n.radiusStep(r)}))}e.getBoundingSphere=function(e,t){t||(t=YT()),n.reset();let r=0;const{geometry:a,transforms:s}=e.shape;if("mesh"===a.kind||"points"===a.kind){const t="mesh"===a.kind?a.vertexBuffer.ref.value:a.centerBuffer.ref.value;o(e.groups,a.groupMapping,t,s),n.finishedIncludeStep(),i(e.groups,a.groupMapping,t,s)}else if("lines"===a.kind){const t=a.startBuffer.ref.value,r=a.endBuffer.ref.value;o(e.groups,a.groupMapping,t,s),o(e.groups,a.groupMapping,r,s),n.finishedIncludeStep(),i(e.groups,a.groupMapping,t,s),i(e.groups,a.groupMapping,r,s)}else{if("spheres"!==a.kind&&"text"!==a.kind)return YT.copy(t,a.boundingSphere);{const t=a.centerBuffer.ref.value;o(e.groups,a.groupMapping,t,s),n.finishedIncludeStep(),i(e.groups,a.groupMapping,t,s);for(const{ids:n,instance:o}of e.groups)ey.forEach(n,(t=>{const n=e.shape.getSize(t,o);r<n&&(r=n)}))}}return qh.copy(t.center,n.center),t.radius=Math.sqrt(n.radiusSq),YT.expand(t,t,r),t}}(AJ||(AJ={}));const pJ=fJ();function hJ(e,t,n,r,o){const{vertices:i,normals:a,groups:s}=n,l=r.getProperty("x"),c=r.getProperty("y"),u=r.getProperty("z");if(!l||!c||!u)throw new Error("missing coordinate properties");const d=r.getProperty("nx"),A=r.getProperty("ny"),f=r.getProperty("nz"),p=!!d&&!!A&&!!f;for(let h=e;h<t;++h)gh.add3(i,l.value(h),c.value(h),u.value(h)),p&&gh.add3(a,d.value(h),A.value(h),f.value(h)),gh.add(s,o[h])}function gJ(e,t,n,r){const{indices:o}=n;for(let i=e;i<t;++i){const{entries:e,count:t}=r.value(i);3===t?gh.add3(o,e[0],e[1],e[2]):4===t&&(gh.add3(o,e[2],e[1],e[0]),gh.add3(o,e[2],e[0],e[3]))}}const mJ=ag.Schema.int;function yJ(e,t,n){const{coloring:r}=n,{rowCount:o}=e;let i,a,s;if("vertex"===r.name)i=e.getProperty(r.params.red)||ag.ofConst(127,o,mJ),a=e.getProperty(r.params.green)||ag.ofConst(127,o,mJ),s=e.getProperty(r.params.blue)||ag.ofConst(127,o,mJ);else if("material"===r.name)i=t&&t.getProperty(r.params.red)||ag.ofConst(127,o,mJ),a=t&&t.getProperty(r.params.green)||ag.ofConst(127,o,mJ),s=t&&t.getProperty(r.params.blue)||ag.ofConst(127,o,mJ);else{let e=r.params.color;e=Jp.saturate(e,r.params.saturation),e=Jp.lighten(e,r.params.lightness);const[t,n,l]=Jp.toRgb(e);i=ag.ofConst(t,o,mJ),a=ag.ofConst(n,o,mJ),s=ag.ofConst(l,o,mJ)}return{kind:r.name,red:i,green:a,blue:s}}function vJ(e,t,n,r){const{kind:o,red:i,green:a,blue:s}=n,{ids:l,map:c,label:u}=r,{source:d,transforms:A}=e;return dJ.create("ply-mesh",d,t,(e=>{const t="material"===o?e:c[e];return Jp.fromRgb(i.value(t),a.value(t),s.value(t))}),(()=>1),(e=>`${u} ${l[e]}`),A)}function bJ(){let e,t,n,r,o,i;return async(a,s,l,c)=>{const u=s.source.getElement("vertex");if(!u)throw new Error("missing vertex element");const d=s.source.getElement("face");if(!d)throw new Error("missing face element");const A=s.source.getElement("material");let f=!1,p=!1;return e&&e===e||(f=!0),t&&U_.isParamEqual(pJ.grouping,t.grouping,l.grouping)||(f=!0),t&&U_.isParamEqual(pJ.coloring,t.coloring,l.coloring)||(p=!0),f?(o=yJ(u,A,l),i=function(e,t){const{grouping:n}=t,{rowCount:r}=e,o="vertex"===n.name?e.getProperty(n.params.group):void 0,i="vertex"===n.name?ah(n.params.group):"Vertex",a=o?o.toArray({array:Uint32Array}):Z_(new Uint32Array(r)),s=o?q_(a):r-1,l=new Uint32Array(s+1);for(let c=0,u=a.length;c<u;++c)l[a[c]]=c;return{ids:a,map:l,label:i}}(u,l),r=await async function(e,t,n,r,o){const i=ZX.createState(t.rowCount,t.rowCount/4,o),a=t.getProperty("x"),s=t.getProperty("y"),l=t.getProperty("z");if(!a||!s||!l)throw new Error("missing coordinate properties");const c=t.getProperty("nx"),u=t.getProperty("ny"),d=t.getProperty("nz"),A=!!c&&!!u&&!!d,f=1e5;for(let h=0,g=t.rowCount;h<g;h+=f)hJ(h,Math.min(h+f,g),i,t,r),e.shouldUpdate&&await e.update({message:"adding ply mesh vertices",current:h,max:g});for(let h=0,g=n.rowCount;h<g;h+=f)gJ(h,Math.min(h+f,g),i,n),e.shouldUpdate&&await e.update({message:"adding ply mesh faces",current:h,max:g});const p=ZX.getMesh(i);return A||RY.computeNormals(p),Sp.updateIfChanged(p.varyingGroup,!0),p}(a,u,d,i.ids,c&&c.geometry),n=vJ(s,r,o,i)):p&&(o=yJ(u,A,l),n=vJ(s,r,o,i)),e=s,t=ew(l),n}}function CJ(){return CJ.empty()}!function(e){function t(e,t){return{size:e,anglesInRadians:t}}function n(){return t(qh(),qh())}e.create=t,e.empty=n,e.fromBasis=function(e,r,o){const i=qh.magnitude(e),a=qh.magnitude(r),s=qh.magnitude(o),l=Math.acos(qh.dot(r,o)/(a*s)),c=Math.acos(qh.dot(e,o)/(i*s)),u=Math.acos(qh.dot(e,r)/(i*a));return i<=0||a<=0||s<=0||l>=Math.PI||c>=Math.PI||u>=Math.PI?n():t(qh.create(i,a,s),qh.create(l,c,u))}}(CJ||(CJ={}));function IJ(e,t,n,r){let o=n,i=r-1,a=t.charCodeAt(o);for(;(32===a||a>=48&&a<=57)&&o<=i;)a=t.charCodeAt(++o);for(a=t.charCodeAt(i);(32===a||a>=48&&a<=57)&&i>=o;)a=t.charCodeAt(--i);if(++i,o===i)return gF.add(e,o,i);if(o+1===i)return gF.add(e,o,i);if(a=t.charCodeAt(o),o+2===i){const n=t.charCodeAt(o+1);if((78===a||110===a)&&(65===n||97===n)||(67===a||99===a)&&(76===n||108===n)||(70===a||102===a)&&(69===n||101===n)||(83===a||115===a)&&(73===n||105===n)||(66===a||98===a)&&(82===n||114===n)||(65===a||97===a)&&(83===n||115===n))return gF.add(e,o,o+2)}if(67===a||99===a||72===a||104===a||78===a||110===a||79===a||111===a||80===a||112===a||83===a||115===a)return gF.add(e,o,o+1);gF.add(e,o,o)}const EJ=new Set(["NA","CL","FE","SI","BR","AS","LI"]),xJ=new Set(["C","H","N","O","P","S","F","B"]),BJ=/^[\s\d]+|[\s\d]+$/g;function wJ(e,t){const n=(e=e.replace(BJ,"").toUpperCase()).length;if(0===n)return e;if(1===n)return e;if(EJ.has(e))return e;if(3===n&&t===e){if("SOD"===e)return"NA";if("POT"===e)return"K";if("CES"===e)return"CS";if("CAL"===e)return"CA";if("CLA"===e)return"CL"}return xJ.has(e[0])?e[0]:""}const _J="ABCDEFGHIJKLMNOPQRSTUVWXYZ";const SJ=Rj((function(e){let t=e,n=0,r=_J[t%26];for(;t>=26;)t=Math.floor(t/26),r+=_J[t%26],n+=1;return n>=5&&console.warn("getChainId overflow"),r}));function DJ(e,t){const n=e.atomName,r=e.residueName,o=new Array(e.count),i=new Array(e.count),a=new Uint32Array(e.count),s=new Uint32Array(e.count),l=new Array(e.count),c=new JN,u=new oL(e.residueNumber,e.atomName);let d="",A=0,f="",p=0,h=0,g=-1;for(let v=0,b=e.count;v<b;++v){const t=e.residueNumber.value(v);if(t!==g){const n=e.residueName.value(v),r=OM(u.add(n,v).type,n);r===h&&(t===g+1||99999===g&&0===t)||(f=SJ(A),A+=1,p=0),d=c.getEntityId(n,r,f),p+=1,g=t,h=r}o[v]=d,i[v]=f,a[v]=p,s[v]=v,l[v]=wJ(e.atomName.value(v),e.residueName.value(v))}const m=ag.ofStringArray(i),y=sg.ofPartialColumns(WN.atom_site,{auth_asym_id:m,auth_atom_id:n,auth_comp_id:r,auth_seq_id:e.residueNumber,Cartn_x:ag.ofFloatArray(ag.mapToArray(e.x,(e=>10*e),Float32Array)),Cartn_y:ag.ofFloatArray(ag.mapToArray(e.y,(e=>10*e),Float32Array)),Cartn_z:ag.ofFloatArray(ag.mapToArray(e.z,(e=>10*e),Float32Array)),id:ag.ofIntArray(s),label_asym_id:m,label_atom_id:n,label_comp_id:r,label_seq_id:ag.ofIntArray(a),label_entity_id:ag.ofStringArray(o),occupancy:ag.ofConst(1,e.count,ag.Schema.float),type_symbol:ag.ofStringArray(l),pdbx_PDB_model_num:ag.ofConst(t,e.count,ag.Schema.int)},e.count);return KN({entity:c.getEntityTable(),chem_comp:u.getChemCompTable(),atom_site:y})}var TJ;function kJ(e,t){const n=(e,n)=>(t.substr(e,n)||"").trim(),r={entry_id:zk.ofString(e),length_a:zk.ofString(n(6,9)),length_b:zk.ofString(n(15,9)),length_c:zk.ofString(n(24,9)),angle_alpha:zk.ofString(n(33,7)),angle_beta:zk.ofString(n(40,7)),angle_gamma:zk.ofString(n(47,7)),Z_PDB:zk.ofString(n(66,4)),pdbx_unique_axis:zk.ofString("?")},o={entry_id:zk.ofString(e),"space_group_name_H-M":zk.ofString(n(55,11)),Int_Tables_number:zk.ofString("?"),cell_setting:zk.ofString("?"),space_group_name_Hall:zk.ofString("?")};return[lQ.ofFields("cell",r),lQ.ofFields("symmetry",o)]}function QJ(e,t){return{id:e,details:t,groups:[]}}function MJ(e,t,n){const r=[];let o,i,a,s=1,l=1;const c=t=>e.data.substring(e.indices[2*t],e.indices[2*t+1]);for(let h=t;h<n;h++){let e=c(h);if("BIOMOLECULE:"===e.substr(11,12)){const t=e.substr(23).trim();let n=`Biomolecule ${t}`;e=c(h+1),"APPLY THE FOLLOWING TO CHAINS:"!==e.substr(11,30)&&(h++,n=e.substr(11).trim()),o=QJ(t,n),r.push(o)}else if("BIOMT"===e.substr(13,5)){const t=e.split(/\s+/),n=parseInt(e[18])-1;0===n&&(a=Yh.identity(),i.operators.push({id:s++,matrix:a})),Yh.setValue(a,n,0,parseFloat(t[4])),Yh.setValue(a,n,1,parseFloat(t[5])),Yh.setValue(a,n,2,parseFloat(t[6])),Yh.setValue(a,n,3,parseFloat(t[7]))}else if("APPLY THE FOLLOWING TO CHAINS:"===e.substr(11,30)||"                   AND CHAINS:"===e.substr(11,30)){"APPLY"===e.substr(11,5)&&(i={chains:[],operators:[]},o.groups.push(i));const t=e.substr(41,30).split(",");for(let e=0,n=t.length;e<n;++e){const n=t[e].trim();n&&i.chains.push(n)}}else if("APPLYING THE FOLLOWING TO CHAINS:"===e.substr(11,33)){o=QJ(`${l}`,`Biomolecule ${l}`),r.push(o),l+=1,i={chains:[],operators:[]},o.groups.push(i),h++,e=c(h);const t=e.substr(11,69).split(",");for(let e=0,n=t.length;e<n;++e){const n=t[e].trim();n&&i.chains.push(n)}}}if(0===r.length)return[];const u={id:zk.ofStrings(r.map((e=>e.id))),details:zk.ofStrings(r.map((e=>e.details)))},d=[];for(const h of r)for(const e of h.groups)d.push({assembly_id:h.id,oper_expression:e.operators.map((e=>e.id)).join(","),asym_id_list:e.chains.join(",")});const A={assembly_id:zk.ofStrings(d.map((e=>e.assembly_id))),oper_expression:zk.ofStrings(d.map((e=>e.oper_expression))),asym_id_list:zk.ofStrings(d.map((e=>e.asym_id_list)))},f=[];for(const h of r)for(const e of h.groups)for(const t of e.operators){const e={id:""+t.id,type:"?",name:"?",symmetry_operation:"?"};for(let n=0;n<3;n++){for(let r=0;r<3;r++)e[`matrix[${n+1}][${r+1}]`]=""+Yh.getValue(t.matrix,n,r);e[`vector[${n+1}]`]=""+Yh.getValue(t.matrix,n,3)}f.push(e)}const p={id:zk.ofStrings(f.map((e=>e.id))),type:zk.ofStrings(f.map((e=>e.type))),name:zk.ofStrings(f.map((e=>e.name))),symmetry_operation:zk.ofStrings(f.map((e=>e.symmetry_operation)))};for(let h=0;h<3;h++){for(let t=0;t<3;t++){const e=`matrix[${h+1}][${t+1}]`;p[e]=zk.ofStrings(f.map((t=>t[e])))}const e=`vector[${h+1}]`;p[e]=zk.ofStrings(f.map((t=>t[e])))}return[lQ.ofFields("pdbx_struct_assembly",u),lQ.ofFields("pdbx_struct_assembly_gen",A),lQ.ofFields("pdbx_struct_oper_list",p)]}function RJ(e,t,n){const r=[];let o;const i=t=>e.data.substring(e.indices[2*t],e.indices[2*t+1]);for(let c=t;c<n;c++){const e=i(c),t=e.split(/\s+/),n=parseInt(e[5])-1;0===n&&(o=Yh.identity(),r.push(o)),Yh.setValue(o,n,0,parseFloat(t[2])),Yh.setValue(o,n,1,parseFloat(t[3])),Yh.setValue(o,n,2,parseFloat(t[4])),Yh.setValue(o,n,3,parseFloat(t[5]))}if(0===r.length)return[];const a=[];let s=1;for(const c of r){const e={id:"ncsop"+s++,code:".",details:"."};for(let t=0;t<3;t++){for(let n=0;n<3;n++)e[`matrix[${t+1}][${n+1}]`]=""+Yh.getValue(c,t,n);e[`vector[${t+1}]`]=""+Yh.getValue(c,t,3)}a.push(e)}const l={id:zk.ofStrings(a.map((e=>e.id))),code:zk.ofStrings(a.map((e=>e.code))),details:zk.ofStrings(a.map((e=>e.details)))};for(let c=0;c<3;c++){for(let t=0;t<3;t++){const e=`matrix[${c+1}][${t+1}]`;l[e]=zk.ofStrings(a.map((t=>t[e])))}const e=`vector[${c+1}]`;l[e]=zk.ofStrings(a.map((t=>t[e])))}return[lQ.ofFields("struct_ncs_oper",l)]}!function(e){e.is=function(e){return"gro"===(null===e||void 0===e?void 0:e.kind)},e.fromGro=function(e){return{kind:"gro",name:e.structures[0].header.title,data:e}}}(TJ||(TJ={}));const PJ={1:"helx_rh_al_p",2:"helx_rh_om_p",3:"helx_rh_pi_p",4:"helx_rh_ga_p",5:"helx_rh_3t_p",6:"helx_lh_al_p",7:"helx_lh_om_p",8:"helx_lh_ga_p",9:"helx_rh_27_p",10:"helx_rh_pp_p"};function OJ(e,t,n){const r=[],o=t=>e.data.substring(e.indices[2*t],e.indices[2*t+1]);for(let u=t;u<n;u++){const e=o(u);r.push({serNum:e.substr(7,3).trim(),helixID:e.substr(11,3).trim(),initResName:e.substr(15,3).trim(),initChainID:e.substr(19,1).trim(),initSeqNum:e.substr(21,4).trim(),initICode:e.substr(25,1).trim(),endResName:e.substr(27,3).trim(),endChainID:e.substr(31,3).trim(),endSeqNum:e.substr(33,4).trim(),endICode:e.substr(37,1).trim(),helixClass:e.substr(38,2).trim(),comment:e.substr(40,30).trim(),length:e.substr(71,5).trim()})}const i=zk.ofStrings(r.map((e=>e.initChainID))),a=zk.ofStrings(r.map((e=>e.initResName))),s=zk.ofStrings(r.map((e=>e.endChainID))),l=zk.ofStrings(r.map((e=>e.endResName))),c={beg_label_asym_id:i,beg_label_comp_id:a,beg_label_seq_id:zk.ofUndefined(r.length,ag.Schema.int),beg_auth_asym_id:i,beg_auth_comp_id:a,beg_auth_seq_id:zk.ofStrings(r.map((e=>e.initSeqNum))),conf_type_id:zk.ofStrings(r.map((e=>function(e){return PJ[e]||"helx_p"}(e.helixClass)))),details:zk.ofStrings(r.map((e=>e.comment))),end_label_asym_id:s,end_label_comp_id:l,end_label_seq_id:zk.ofUndefined(r.length,ag.Schema.int),end_auth_asym_id:s,end_auth_comp_id:l,end_auth_seq_id:zk.ofStrings(r.map((e=>e.endSeqNum))),id:zk.ofStrings(r.map((e=>e.serNum))),pdbx_beg_PDB_ins_code:zk.ofStrings(r.map((e=>e.initICode))),pdbx_end_PDB_ins_code:zk.ofStrings(r.map((e=>e.endICode))),pdbx_PDB_helix_class:zk.ofStrings(r.map((e=>e.helixClass))),pdbx_PDB_helix_length:zk.ofStrings(r.map((e=>e.length))),pdbx_PDB_helix_id:zk.ofStrings(r.map((e=>e.helixID)))};return lQ.ofFields("struct_conf",c)}function FJ(e,t,n){const r=[],o=t=>e.data.substring(e.indices[2*t],e.indices[2*t+1]);for(let A=t;A<n;A++){const e=o(A);r.push({strand:e.substr(7,3).trim(),sheetID:e.substr(11,3).trim(),numStrands:e.substr(14,2).trim(),initResName:e.substr(17,3).trim(),initChainID:e.substr(21,1).trim(),initSeqNum:e.substr(22,4).trim(),initICode:e.substr(26,1).trim(),endResName:e.substr(28,3).trim(),endChainID:e.substr(32,1).trim(),endSeqNum:e.substr(33,4).trim(),endICode:e.substr(37,1).trim(),sense:e.substr(38,2).trim(),curAtom:e.substr(41,4).trim(),curResName:e.substr(45,3).trim(),curChainId:e.substr(49,1).trim(),curResSeq:e.substr(50,4).trim(),curICode:e.substr(54,1).trim(),prevAtom:e.substr(56,4).trim(),prevResName:e.substr(60,3).trim(),prevChainId:e.substr(64,1).trim(),prevResSeq:e.substr(65,4).trim(),prevICode:e.substr(69,1).trim()})}const i=zk.ofStrings(r.map((e=>e.initChainID))),a=zk.ofStrings(r.map((e=>e.initResName))),s=zk.ofStrings(r.map((e=>e.initSeqNum))),l=zk.ofStrings(r.map((e=>e.endChainID))),c=zk.ofStrings(r.map((e=>e.endResName))),u=zk.ofStrings(r.map((e=>e.endSeqNum))),d={beg_label_asym_id:i,beg_label_comp_id:a,beg_label_seq_id:s,beg_auth_asym_id:i,beg_auth_comp_id:a,beg_auth_seq_id:s,end_label_asym_id:l,end_label_comp_id:l,end_label_seq_id:u,end_auth_asym_id:l,end_auth_comp_id:c,end_auth_seq_id:u,id:zk.ofStrings(r.map((e=>e.strand))),sheet_id:zk.ofStrings(r.map((e=>e.sheetID))),pdbx_beg_PDB_ins_code:zk.ofStrings(r.map((e=>e.initICode))),pdbx_end_PDB_ins_code:zk.ofStrings(r.map((e=>e.endICode)))};return lQ.ofFields("struct_sheet_range",d)}const NJ={MOL_ID:"",MOLECULE:"",CHAIN:"",FRAGMENT:"",SYNONYM:"",EC:"",ENGINEERED:"",MUTATION:"",OTHER_DETAILS:""};function LJ(e,t,n){const r=t=>e.data.substring(e.indices[2*t],e.indices[2*t+1]);let o,i={chains:[],description:""};const a=[];for(let l=t;l<n;l++){const e=r(l).substr(10,70).trim(),t=e.indexOf(":"),n=e.substring(0,t);let s;n in NJ?(o=n,s=e.substring(t+2)):s=e,s=s.replace(/;$/,""),"MOL_ID"===o?(i={chains:[],description:""},a.push(i)):"MOLECULE"===o?(i.description&&(i.description+=" "),i.description+=s):"CHAIN"===o&&Array.prototype.push.apply(i.chains,s.split(/\s*,\s*/))}const s=[];for(const l of a)for(const e of l.chains)s.push({description:l.description,chains:[e]});return s}function UJ(e,t,n){const r=t=>e.data.substring(e.indices[2*t],e.indices[2*t+1]),o=new Map;for(let i=t;i<n;i++){const e=r(i),t=e.substr(11,3).trim(),n=e.substr(15).trim();o.has(t)?o.set(t,`${o.get(t)} ${n}`):o.set(t,n)}return o}function GJ(e,t,n,r,o,i){const{data:a}=n,s=o-r;gF.addToken(e.group_PDB,hF.trim(n,r,r+6)),hF.trim(n,r+6,r+11),e.id[e.index]=n.data.substring(n.tokenStart,n.tokenEnd),gF.addToken(e.auth_atom_id,hF.trim(n,r+12,r+16)),32===a.charCodeAt(r+16)?gF.add(e.label_alt_id,0,0):gF.add(e.label_alt_id,r+16,r+17),gF.addToken(e.auth_comp_id,hF.trim(n,r+17,r+20)),gF.add(e.auth_asym_id,r+21,r+22),gF.addToken(e.auth_seq_id,hF.trim(n,r+22,r+26)),32===a.charCodeAt(r+26)?gF.add(e.pdbx_PDB_ins_code,0,0):gF.add(e.pdbx_PDB_ins_code,r+26,r+27),gF.addToken(e.Cartn_x,hF.trim(n,r+30,r+38)),gF.addToken(e.Cartn_y,hF.trim(n,r+38,r+46)),gF.addToken(e.Cartn_z,hF.trim(n,r+46,r+54)),gF.addToken(e.occupancy,hF.trim(n,r+54,r+60)),s>=66?gF.addToken(e.B_iso_or_equiv,hF.trim(n,r+60,r+66)):gF.add(e.B_iso_or_equiv,0,0),i&&gF.addToken(e.partial_charge,hF.trim(n,r+70,r+76)),s>=78&&!i?(hF.trim(n,r+76,r+78),n.tokenStart<n.tokenEnd?gF.addToken(e.type_symbol,n):IJ(e.type_symbol,a,r+12,r+16)):IJ(e.type_symbol,a,r+12,r+16),e.pdbx_PDB_model_num[e.index]=t,e.index++}function jJ(e){const t=zk.ofTokens(e.pdbx_auth_seq_id),n=zk.ofTokens(e.pdbx_auth_comp_id),r=zk.ofTokens(e.pdbx_auth_asym_id),o=zk.ofTokens(e.pdbx_auth_atom_id),i={id:zk.ofStrings(e.id),type_symbol:zk.ofTokens(e.type_symbol),pdbx_label_atom_id:o,pdbx_label_alt_id:zk.ofTokens(e.pdbx_label_alt_id),pdbx_label_comp_id:n,pdbx_label_asym_id:r,pdbx_label_seq_id:t,pdbx_PDB_ins_code:zk.ofTokens(e.pdbx_PDB_ins_code),pdbx_auth_seq_id:t,pdbx_auth_comp_id:n,pdbx_auth_asym_id:r,pdbx_auth_atom_id:o};return i["U[1][1]"]=zk.ofNumbers(e["U[1][1]"]),i["U[2][2]"]=zk.ofNumbers(e["U[2][2]"]),i["U[3][3]"]=zk.ofNumbers(e["U[3][3]"]),i["U[1][2]"]=zk.ofNumbers(e["U[1][2]"]),i["U[1][3]"]=zk.ofNumbers(e["U[1][3]"]),i["U[2][3]"]=zk.ofNumbers(e["U[2][3]"]),i}function zJ(e,t,n,r,o){const{data:i}=n,a=o-r;hF.trim(n,r+6,r+11),e.id[e.index]=i.substring(n.tokenStart,n.tokenEnd),gF.addToken(e.pdbx_auth_atom_id,hF.trim(n,r+12,r+16)),32===i.charCodeAt(r+16)?gF.add(e.pdbx_label_alt_id,0,0):gF.add(e.pdbx_label_alt_id,r+16,r+17),gF.addToken(e.pdbx_auth_comp_id,hF.trim(n,r+17,r+20)),gF.add(e.pdbx_auth_asym_id,r+21,r+22),gF.addToken(e.pdbx_auth_seq_id,hF.trim(n,r+22,r+26)),32===i.charCodeAt(r+26)?gF.add(e.pdbx_PDB_ins_code,0,0):gF.add(e.pdbx_PDB_ins_code,r+26,r+27),e["U[1][1]"][e.index]=ng(i,r+28,r+35)/1e4,e["U[2][2]"][e.index]=ng(i,r+35,r+42)/1e4,e["U[3][3]"][e.index]=ng(i,r+42,r+49)/1e4,e["U[1][2]"][e.index]=ng(i,r+49,r+56)/1e4,e["U[1][3]"][e.index]=ng(i,r+56,r+63)/1e4,e["U[2][3]"][e.index]=ng(i,r+63,r+70)/1e4,a>=78?(hF.trim(n,r+76,r+78),n.tokenStart<n.tokenEnd?gF.addToken(e.type_symbol,n):IJ(e.type_symbol,i,r+12,r+16)):IJ(e.type_symbol,i,r+12,r+16),e.index++}function HJ(e,t,n,r){const o=e.substring(t,n);r.id_code=o.substring(62,66).trim()||void 0,r.dep_date=o.substring(50,59).trim()||void 0,r.classification=o.substring(10,50).trim()||void 0}async function VJ(e){const{lines:t}=e,{data:n,indices:r}=t,o=hF(n),i=!!e.isPdbqt;let a=0,s=0;for(let w=0,_=t.count;w<_;w++){const e=r[2*w],t=r[2*w+1];switch(n[e]){case"A":sh(n,e,t,"ATOM  ")?a++:sh(n,e,t,"ANISOU")&&s++;break;case"H":sh(n,e,t,"HETATM")&&a++}}const l={},c=function(e,t){const n=()=>gF.create(e,2*t);return{index:0,group_PDB:n(),id:[],auth_atom_id:n(),label_alt_id:n(),auth_comp_id:n(),auth_asym_id:n(),auth_seq_id:n(),pdbx_PDB_ins_code:n(),Cartn_x:n(),Cartn_y:n(),Cartn_z:n(),occupancy:n(),B_iso_or_equiv:n(),type_symbol:n(),pdbx_PDB_model_num:[],label_entity_id:[],partial_charge:n()}}(n,a),u=function(e,t){const n=()=>new Float32Array(t),r=()=>gF.create(e,2*t);return{index:0,count:t,id:[],type_symbol:r(),pdbx_label_atom_id:r(),pdbx_label_alt_id:r(),pdbx_label_comp_id:r(),pdbx_label_asym_id:r(),pdbx_label_seq_id:r(),pdbx_PDB_ins_code:r(),"U[1][1]":n(),"U[2][2]":n(),"U[3][3]":n(),"U[1][2]":n(),"U[1][3]":n(),"U[2][3]":n(),pdbx_auth_seq_id:r(),pdbx_auth_comp_id:r(),pdbx_auth_asym_id:r(),pdbx_auth_atom_id:r()}}(n,s),d=new JN,A=[],f=[];let p,h=0,g="",m=!1;const y=new Set;for(let w=0,_=t.count;w<_;w++){let a=r[2*w],s=r[2*w+1];switch(n[a]){case"A":sh(n,a,s,"ATOM  ")?(h||(h++,g=""+h),GJ(c,g,o,a,s,i)):sh(n,a,s,"ANISOU")&&zJ(u,0,o,a,s);break;case"C":if(sh(n,a,s,"CRYST1"))A.push(...kJ(e.id||"?",n.substring(a,s)));else if(sh(n,a,s,"CONECT")){let e=w+1;for(;a=r[2*e],s=r[2*e+1],sh(n,a,s,"CONECT");)e++;p?Aw&&console.log("only single CONECT block allowed, ignoring others"):p=[w,e],w=e-1}else if(sh(n,a,s,"COMPND")){let e=w+1;for(;a=r[2*e],s=r[2*e+1],sh(n,a,s,"COMPND");)e++;d.setCompounds(LJ(t,w,e)),w=e-1}break;case"H":if(sh(n,a,s,"HEADER"))HJ(n,a,s,l);else if(sh(n,a,s,"HETATM"))h||(h++,g=""+h),GJ(c,g,o,a,s,i);else if(sh(n,a,s,"HELIX")){let e=w+1;for(;a=r[2*e],s=r[2*e+1],sh(n,a,s,"HELIX");)e++;A.push(OJ(t,w,e)),w=e-1}else if(sh(n,a,s,"HETNAM")){let e=w+1;for(;a=r[2*e],s=r[2*e+1],sh(n,a,s,"HETNAM");)e++;f.push(...Array.from(UJ(t,w,e).entries())),w=e-1}break;case"M":if(sh(n,a,s,"MODEL ")&&(h++,g=""+h),sh(n,a,s,"MTRIX")){let e=w+1;for(;a=r[2*e],s=r[2*e+1],sh(n,a,s,"MTRIX");)e++;A.push(...RJ(t,w,e)),w=e-1}break;case"O":break;case"R":if(sh(n,a,s,"REMARK 350")){let e=w+1;for(;a=r[2*e],s=r[2*e+1],sh(n,a,s,"REMARK 350");)e++;A.push(...MJ(t,w,e)),w=e-1,m=!0}break;case"S":if(sh(n,a,s,"SHEET")){let e=w+1;for(;a=r[2*e],s=r[2*e+1],sh(n,a,s,"SHEET");)e++;A.push(FJ(t,w,e)),w=e-1}break;case"T":sh(n,a,s,"TER")&&y.add(c.index)}}if(l.id_code){const e={id:zk.ofString(l.id_code)};A.push(lQ.ofFields("entry",e))}if(l.classification){const e={pdbx_keywords:zk.ofString(l.classification)};A.push(lQ.ofFields("struct_keywords",e))}if(l.dep_date){const e={recvd_initial_deposition_date:zk.ofString(l.dep_date)};A.push(lQ.ofFields("pdbx_database_status",e))}const v=ag.ofIntTokens(c.auth_seq_id),b=ag.ofStringTokens(c.auth_atom_id),C=ag.ofStringTokens(c.auth_comp_id),I=ag.ofStringTokens(c.auth_asym_id),E=new oL(v,b);E.setNames(f),d.setNames(f);for(let w=0,_=C.rowCount;w<_;++w){const e=C.value(w),t=OM(E.add(e,w).type,e);c.label_entity_id[w]=d.getEntityId(e,t,I.value(w))}const x=function(e,t,n){const r=zk.ofStrings(e.pdbx_PDB_model_num),o=zk.ofTokens(e.auth_asym_id),i=zk.ofTokens(e.auth_seq_id),a=zk.ofTokens(e.pdbx_PDB_ins_code),s=zk.ofTokens(e.auth_atom_id),l=zk.ofTokens(e.auth_comp_id),c=zk.ofStrings(e.id);let u=r.str(0),d=o.str(0),A=i.int(0),f=a.str(0),p=d,h=A;const g=new Map,m=new Map,y=[],v=[],b=[];let C=!1;for(let B=0,w=c.rowCount;B<w;++B)if(""!==a.str(B)){C=!0;break}for(let B=0,w=c.rowCount;B<w;++B){const e=r.str(B),l=o.str(B),c=i.int(B),I=a.str(B);let E=s.str(B);if(e!==u?(g.clear(),m.clear(),u=e,d=l,A=c,f=I,p=l,h=c):d!==l?(m.clear(),d=l,A=c,f=I,p=l,h=c):A!==c?(m.clear(),A===h?h=c:h+=1,A=c,f=I):f!==I&&(m.clear(),f=I,h+=1),g.has(l)){if(t.has(B)&&!n.hasAssemblies){const e=g.get(l)+1;g.set(l,e),p=`${l}_${e}`}}else g.set(l,0);if(y[B]=p,m.has(E)){const e=m.get(E)+1;m.set(E,e),E=`${E}_${e}`}else m.set(E,0);v[B]=E,C&&(b[B]=h)}const I=ag.ofStringArray(y),E=ag.ofStringArray(v),x=C?zk.ofColumn(ag.ofIntArray(b)):zk.ofUndefined(e.index,ag.Schema.int);return{auth_asym_id:o,auth_atom_id:s,auth_comp_id:l,auth_seq_id:i,B_iso_or_equiv:zk.ofTokens(e.B_iso_or_equiv),Cartn_x:zk.ofTokens(e.Cartn_x),Cartn_y:zk.ofTokens(e.Cartn_y),Cartn_z:zk.ofTokens(e.Cartn_z),group_PDB:zk.ofTokens(e.group_PDB),id:c,label_alt_id:zk.ofTokens(e.label_alt_id),label_asym_id:zk.ofColumn(I),label_atom_id:zk.ofColumn(E),label_comp_id:l,label_seq_id:x,label_entity_id:zk.ofStrings(e.label_entity_id),occupancy:iQ(e.occupancy)?zk.ofUndefined(e.index,ag.Schema.float):zk.ofTokens(e.occupancy),type_symbol:zk.ofTokens(e.type_symbol),pdbx_PDB_ins_code:zk.ofTokens(e.pdbx_PDB_ins_code),pdbx_PDB_model_num:r,partial_charge:zk.ofTokens(e.partial_charge)}}(c,y,{hasAssemblies:m});i||delete x.partial_charge,p&&A.push(function(e,t,n,r){const o={};for(let E=0,x=r.id.rowCount;E<x;++E)o[r.id.str(E)]=E;const i=t=>e.data.substring(e.indices[2*t],e.indices[2*t+1]),a=[],s=[],l=[],c=[],u=[],d=[],A=[],f=[],p=[],h=[],g=[],m=[],y=[],v=[],b=[11,16,21,26];let C=1;for(let E=t;E<n;E++){const e=i(E),t=o[parseInt(e.substr(6,5))],n={};if(void 0!==t)for(let i=0;i<4;++i){const I=parseInt(e.substr(b[i],5));if(Number.isNaN(I))continue;const E=o[I];void 0!==E&&(t>E||void 0===n[E]&&(a.push(`covale${C}`),s.push("covale"),l.push(r.label_asym_id.str(t)),c.push(r.label_seq_id.int(t)),u.push(r.auth_seq_id.int(t)),d.push(r.label_atom_id.str(t)),A.push(r.label_alt_id.str(t)),f.push(r.pdbx_PDB_ins_code.str(t)),p.push(r.label_asym_id.str(E)),h.push(r.label_seq_id.int(E)),g.push(r.auth_seq_id.int(E)),m.push(r.label_atom_id.str(E)),y.push(r.label_alt_id.str(E)),v.push(r.pdbx_PDB_ins_code.str(E)),C+=1))}}const I={id:zk.ofStrings(a),conn_type_id:zk.ofStrings(s),ptnr1_label_asym_id:zk.ofStrings(l),ptnr1_label_seq_id:zk.ofNumbers(c),ptnr1_auth_seq_id:zk.ofNumbers(u),ptnr1_label_atom_id:zk.ofStrings(d),pdbx_ptnr1_label_alt_id:zk.ofStrings(A),pdbx_ptnr1_PDB_ins_code:zk.ofStrings(f),ptnr2_label_asym_id:zk.ofStrings(p),ptnr2_label_seq_id:zk.ofNumbers(h),ptnr2_auth_seq_id:zk.ofNumbers(g),ptnr2_label_atom_id:zk.ofStrings(m),pdbx_ptnr2_label_alt_id:zk.ofStrings(y),pdbx_ptnr2_PDB_ins_code:zk.ofStrings(v)};return lQ.ofFields("struct_conn",I)}(t,p[0],p[1],x));const B={entity:lQ.ofTable("entity",d.getEntityTable()),chem_comp:lQ.ofTable("chem_comp",E.getChemCompTable()),atom_site:lQ.ofFields("atom_site",x),atom_site_anisotrop:lQ.ofFields("atom_site_anisotrop",jJ(u))};for(const w of A)B[w.name]=w;return{header:e.id||"PDB",categoryNames:Object.keys(B),categories:B}}var qJ,YJ,XJ;function WJ(e){return Tw.create("Parse PSF",(async t=>{const n=XJ.fromPsf(e),r=function(e){const t=new Array(e.count),n=new Array(e.count),r=new Uint32Array(e.count),o=new Uint32Array(e.count),i=new Array(e.count),a=new JN,s=new oL(e.residueId,e.atomName);let l="",c=0,u="",d=0,A=e.segmentName.value(0),f=!1,p=0,h=-1;for(let m=0,y=e.count;m<y;++m){const g=e.residueId.value(m),y=e.segmentName.value(m);if(A!==y?(u=SJ(c),c+=1,d=0,f=!0,A=y):f=!1,f||g!==h){const t=e.residueName.value(m),n=OM(s.add(t,m).type,t);f||n===p&&g===h+1||(u=SJ(c),c+=1,d=0),l=a.getEntityId(t,n,u),d+=1,h=g,p=n}t[m]=l,n[m]=u,r[m]=d,o[m]=m,i[m]=wJ(e.atomName.value(m),e.residueName.value(m))}const g=sg.ofPartialColumns(WN.atom_site,{auth_asym_id:e.segmentName,auth_atom_id:e.atomName,auth_comp_id:e.residueName,auth_seq_id:e.residueId,id:ag.ofIntArray(o),label_asym_id:ag.ofStringArray(n),label_atom_id:e.atomName,label_comp_id:e.residueName,label_seq_id:ag.ofIntArray(r),label_entity_id:ag.ofStringArray(t),occupancy:ag.ofConst(1,e.count,ag.Schema.float),type_symbol:ag.ofStringArray(i),pdbx_PDB_model_num:ag.ofConst(1,e.count,ag.Schema.int)},e.count);return KN({entity:a.getEntityTable(),chem_comp:s.getChemCompTable(),atom_site:g})}(e.atoms),{atomIdA:o,atomIdB:i}=e.bonds,a={indexA:ag.ofLambda({value:e=>o.value(e)-1,rowCount:o.rowCount,schema:o.schema}),indexB:ag.ofLambda({value:e=>i.value(e)-1,rowCount:i.rowCount,schema:i.schema}),order:ag.ofConst(1,e.bonds.count,ag.Schema.int)};return Lk.create(e.id,r,a,n)}))}function KJ(e){return Object.keys(e).filter((e=>!isNaN(e))).map((e=>+e)).sort(((e,t)=>e-t)).map((t=>e[t]))}function JJ(e,t,n){return e&&void 0!==e[t]?e[t]:n}function ZJ(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{kind:"alias",aliases:n,symbol:e}}function $J(e,t){e.info.namespace="molscript-macro",e.id=`molscript-macro.${e.info.name}`;for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return{kind:"macro",symbol:e,translate:t,aliases:[e.info.name,...r]}}function eZ(e){return"alias"===e.kind||"macro"===e.kind}!function(e){e.Descriptor={name:"atom_partial_charge"},e.Provider=Gk.create(e.Descriptor)}(qJ||(qJ={})),function(e){e.is=function(e){return"pdb"===(null===e||void 0===e?void 0:e.kind)},e.create=function(e){return{kind:"pdb",name:e.id||"",data:e}}}(YJ||(YJ={})),function(e){e.is=function(e){return"psf"===(null===e||void 0===e?void 0:e.kind)},e.fromPsf=function(e){return{kind:"psf",name:e.id,data:e}}}(XJ||(XJ={}));const tZ=[["Core symbols",ZJ(PQ.core.type.bool,"bool"),ZJ(PQ.core.type.num,"num"),ZJ(PQ.core.type.str,"str"),ZJ(PQ.core.type.regex,"regex"),ZJ(PQ.core.type.list,"list"),ZJ(PQ.core.type.set,"set"),ZJ(PQ.core.type.compositeKey,"composite-key"),ZJ(PQ.core.logic.not,"not"),ZJ(PQ.core.logic.and,"and"),ZJ(PQ.core.logic.or,"or"),ZJ(PQ.core.ctrl.if,"if"),ZJ(PQ.core.ctrl.fn,"fn"),ZJ(PQ.core.ctrl.eval,"eval"),ZJ(PQ.core.math.add,"add","+"),ZJ(PQ.core.math.sub,"sub","-"),ZJ(PQ.core.math.mult,"mult","*"),ZJ(PQ.core.math.div,"div","/"),ZJ(PQ.core.math.pow,"pow","**"),ZJ(PQ.core.math.mod,"mod"),ZJ(PQ.core.math.min,"min"),ZJ(PQ.core.math.max,"max"),ZJ(PQ.core.math.cantorPairing,"cantor-pairing"),ZJ(PQ.core.math.sortedCantorPairing,"sorted-cantor-pairing"),ZJ(PQ.core.math.invertCantorPairing,"invert-cantor-pairing"),ZJ(PQ.core.math.floor,"floor"),ZJ(PQ.core.math.ceil,"ceil"),ZJ(PQ.core.math.roundInt,"round"),ZJ(PQ.core.math.trunc,"trunc"),ZJ(PQ.core.math.abs,"abs"),ZJ(PQ.core.math.sign,"sign"),ZJ(PQ.core.math.sqrt,"sqrt"),ZJ(PQ.core.math.cbrt,"cbrt"),ZJ(PQ.core.math.sin,"sin"),ZJ(PQ.core.math.cos,"cos"),ZJ(PQ.core.math.tan,"tan"),ZJ(PQ.core.math.asin,"asin"),ZJ(PQ.core.math.acos,"acos"),ZJ(PQ.core.math.atan,"atan"),ZJ(PQ.core.math.sinh,"sinh"),ZJ(PQ.core.math.cosh,"cosh"),ZJ(PQ.core.math.tanh,"tanh"),ZJ(PQ.core.math.exp,"exp"),ZJ(PQ.core.math.log,"log"),ZJ(PQ.core.math.log10,"log10"),ZJ(PQ.core.math.atan2,"atan2"),ZJ(PQ.core.rel.eq,"eq","="),ZJ(PQ.core.rel.neq,"neq","!="),ZJ(PQ.core.rel.lt,"lt","<"),ZJ(PQ.core.rel.lte,"lte","<="),ZJ(PQ.core.rel.gr,"gr",">"),ZJ(PQ.core.rel.gre,"gre",">="),ZJ(PQ.core.rel.inRange,"in-range"),ZJ(PQ.core.str.concat,"concat"),ZJ(PQ.core.str.match,"regex.match"),ZJ(PQ.core.list.getAt,"list.get"),ZJ(PQ.core.set.has,"set.has"),ZJ(PQ.core.set.isSubset,"set.subset")],["Structure",["Types",ZJ(PQ.structureQuery.type.entityType,"ent-type"),ZJ(PQ.structureQuery.type.authResidueId,"auth-resid"),ZJ(PQ.structureQuery.type.labelResidueId,"label-resid"),ZJ(PQ.structureQuery.type.ringFingerprint,"ringfp"),ZJ(PQ.structureQuery.type.bondFlags,"bond-flags")],["Slots",ZJ(PQ.structureQuery.slot.elementSetReduce,"atom.set.reduce.value")],["Generators",ZJ(PQ.structureQuery.generator.atomGroups,"sel.atom.atom-groups"),ZJ(PQ.structureQuery.generator.queryInSelection,"sel.atom.query-in-selection"),ZJ(PQ.structureQuery.generator.rings,"sel.atom.rings"),ZJ(PQ.structureQuery.generator.empty,"sel.atom.empty"),ZJ(PQ.structureQuery.generator.all,"sel.atom.all"),ZJ(PQ.structureQuery.generator.bondedAtomicPairs,"sel.atom.bonded-pairs"),$J(yQ("sel.atom.atoms",Xk.Dictionary({0:mQ(qk.Bool,{isOptional:!0,defaultValue:!0,description:"Test applied to each atom."})}),QQ.ElementSelection,"A selection of singleton atom sets."),(e=>FQ.struct.generator.atomGroups({"atom-test":JJ(e,0,!0)}))),$J(yQ("sel.atom.res",Xk.Dictionary({0:mQ(qk.Bool,{isOptional:!0,defaultValue:!0,description:"Test applied to the 1st atom of each residue."})}),QQ.ElementSelection,"A selection of atom sets grouped by residue."),(e=>FQ.struct.generator.atomGroups({"residue-test":JJ(e,0,!0),"group-by":FQ.ammp("residueKey")}))),$J(yQ("sel.atom.chains",Xk.Dictionary({0:mQ(qk.Bool,{isOptional:!0,defaultValue:!0,description:"Test applied to the 1st atom of each chain."})}),QQ.ElementSelection,"A selection of atom sets grouped by chain."),(e=>FQ.struct.generator.atomGroups({"chain-test":JJ(e,0,!0),"group-by":FQ.ammp("chainKey")})))],["Modifiers",ZJ(PQ.structureQuery.modifier.queryEach,"sel.atom.query-each"),ZJ(PQ.structureQuery.modifier.intersectBy,"sel.atom.intersect-by"),ZJ(PQ.structureQuery.modifier.exceptBy,"sel.atom.except-by"),ZJ(PQ.structureQuery.modifier.unionBy,"sel.atom.union-by"),ZJ(PQ.structureQuery.modifier.union,"sel.atom.union"),ZJ(PQ.structureQuery.modifier.cluster,"sel.atom.cluster"),ZJ(PQ.structureQuery.modifier.includeSurroundings,"sel.atom.include-surroundings"),ZJ(PQ.structureQuery.modifier.surroundingLigands,"sel.atom.surrounding-ligands"),ZJ(PQ.structureQuery.modifier.includeConnected,"sel.atom.include-connected"),ZJ(PQ.structureQuery.modifier.expandProperty,"sel.atom.expand-property")],["Filters",ZJ(PQ.structureQuery.filter.pick,"sel.atom.pick"),ZJ(PQ.structureQuery.filter.first,"sel.atom.first"),ZJ(PQ.structureQuery.filter.withSameAtomProperties,"sel.atom.with-same-atom-properties"),ZJ(PQ.structureQuery.filter.intersectedBy,"sel.atom.intersected-by"),ZJ(PQ.structureQuery.filter.within,"sel.atom.within"),ZJ(PQ.structureQuery.filter.isConnectedTo,"sel.atom.is-connected-to")],["Combinators",ZJ(PQ.structureQuery.combinator.intersect,"sel.atom.intersect"),ZJ(PQ.structureQuery.combinator.merge,"sel.atom.merge"),ZJ(PQ.structureQuery.combinator.distanceCluster,"sel.atom.dist-cluster")],["Atom Set Properties",ZJ(PQ.structureQuery.atomSet.atomCount,"atom.set.atom-count"),ZJ(PQ.structureQuery.atomSet.countQuery,"atom.set.count-query"),ZJ(PQ.structureQuery.atomSet.reduce,"atom.set.reduce"),ZJ(PQ.structureQuery.atomSet.propertySet,"atom.set.property")],["Atom Properties",ZJ(PQ.structureQuery.atomProperty.core.elementSymbol,"atom.el"),ZJ(PQ.structureQuery.atomProperty.core.vdw,"atom.vdw"),ZJ(PQ.structureQuery.atomProperty.core.mass,"atom.mass"),ZJ(PQ.structureQuery.atomProperty.core.atomicNumber,"atom.atomic-number"),ZJ(PQ.structureQuery.atomProperty.core.x,"atom.x"),ZJ(PQ.structureQuery.atomProperty.core.y,"atom.y"),ZJ(PQ.structureQuery.atomProperty.core.z,"atom.z"),ZJ(PQ.structureQuery.atomProperty.core.sourceIndex,"atom.src-index"),ZJ(PQ.structureQuery.atomProperty.core.operatorName,"atom.op-name"),ZJ(PQ.structureQuery.atomProperty.core.operatorKey,"atom.op-key"),ZJ(PQ.structureQuery.atomProperty.core.modelIndex,"atom.model-index"),ZJ(PQ.structureQuery.atomProperty.core.modelLabel,"atom.model-label"),ZJ(PQ.structureQuery.atomProperty.core.atomKey,"atom.key"),ZJ(PQ.structureQuery.atomProperty.core.bondCount,"atom.bond-count"),ZJ(PQ.structureQuery.atomProperty.topology.connectedComponentKey,"atom.key.molecule"),ZJ(PQ.structureQuery.atomProperty.macromolecular.authResidueId,"atom.auth-resid"),ZJ(PQ.structureQuery.atomProperty.macromolecular.labelResidueId,"atom.label-resid"),ZJ(PQ.structureQuery.atomProperty.macromolecular.residueKey,"atom.key.res"),ZJ(PQ.structureQuery.atomProperty.macromolecular.chainKey,"atom.key.chain"),ZJ(PQ.structureQuery.atomProperty.macromolecular.entityKey,"atom.key.entity"),ZJ(PQ.structureQuery.atomProperty.macromolecular.isHet,"atom.is-het"),ZJ(PQ.structureQuery.atomProperty.macromolecular.id,"atom.id"),ZJ(PQ.structureQuery.atomProperty.macromolecular.label_atom_id,"atom.label_atom_id"),ZJ(PQ.structureQuery.atomProperty.macromolecular.label_alt_id,"atom.label_alt_id","atom.altloc"),ZJ(PQ.structureQuery.atomProperty.macromolecular.label_comp_id,"atom.label_comp_id"),ZJ(PQ.structureQuery.atomProperty.macromolecular.label_asym_id,"atom.label_asym_id"),ZJ(PQ.structureQuery.atomProperty.macromolecular.label_entity_id,"atom.label_entity_id"),ZJ(PQ.structureQuery.atomProperty.macromolecular.label_seq_id,"atom.label_seq_id"),ZJ(PQ.structureQuery.atomProperty.macromolecular.auth_atom_id,"atom.auth_atom_id","atom.name"),ZJ(PQ.structureQuery.atomProperty.macromolecular.auth_comp_id,"atom.auth_comp_id","atom.resname"),ZJ(PQ.structureQuery.atomProperty.macromolecular.auth_asym_id,"atom.auth_asym_id","atom.chain"),ZJ(PQ.structureQuery.atomProperty.macromolecular.auth_seq_id,"atom.auth_seq_id","atom.resno"),ZJ(PQ.structureQuery.atomProperty.macromolecular.pdbx_PDB_ins_code,"atom.pdbx_PDB_ins_code","atom.inscode"),ZJ(PQ.structureQuery.atomProperty.macromolecular.pdbx_formal_charge,"atom.pdbx_formal_charge"),ZJ(PQ.structureQuery.atomProperty.macromolecular.occupancy,"atom.occupancy"),ZJ(PQ.structureQuery.atomProperty.macromolecular.B_iso_or_equiv,"atom.B_iso_or_equiv","atom.bfactor"),ZJ(PQ.structureQuery.atomProperty.macromolecular.entityType,"atom.entity-type"),ZJ(PQ.structureQuery.atomProperty.macromolecular.entitySubtype,"atom.entity-subtype"),ZJ(PQ.structureQuery.atomProperty.macromolecular.entityPrdId,"atom.entity-prd-id"),ZJ(PQ.structureQuery.atomProperty.macromolecular.entityDescription,"atom.entity-description"),ZJ(PQ.structureQuery.atomProperty.macromolecular.objectPrimitive,"atom.object-primitive"),ZJ(PQ.structureQuery.atomProperty.macromolecular.chemCompType,"atom.chem-comp-type"),ZJ(PQ.structureQuery.atomProperty.macromolecular.secondaryStructureKey,"atom.key.sec-struct"),ZJ(PQ.structureQuery.atomProperty.macromolecular.isModified,"atom.is-modified"),ZJ(PQ.structureQuery.atomProperty.macromolecular.modifiedParentName,"atom.modified-parent")],["Bond Properties",ZJ(PQ.structureQuery.bondProperty.order,"bond.order"),ZJ(PQ.structureQuery.bondProperty.length,"bond.length"),ZJ(PQ.structureQuery.bondProperty.key,"bond.key"),ZJ(PQ.structureQuery.bondProperty.atomA,"bond.atom-a"),ZJ(PQ.structureQuery.bondProperty.atomB,"bond.atom-b"),$J(yQ("bond.is",Xk.List(QQ.BondFlag),qk.Bool,`Test if the current bond has at least one (or all if partial = false) of the specified flags: ${qk.oneOfValues(QQ.BondFlag).join(", ")}`),(e=>FQ.core.flags.hasAny([FQ.struct.bondProperty.flags(),FQ.struct.type.bondFlags(KJ(e))])))]]],nZ=[];!function e(t){for(const n of t)eZ(n)?nZ.push(n):n instanceof Array&&e(n)}(tZ);const rZ=function(){const e=[],t=Object.create(null),n=VD.create(),r=VD.create();for(const o of nZ){for(const n of o.aliases){if(e.push([n,o]),t[n])throw new Error(`Alias '${n}' already in use.`);t[n]=o}const i=o.symbol.args;if("dictionary"===i.kind)for(const e of Object.keys(i.map)){isNaN(e)&&VD.add(n,e,e);const t=i.map[e];"oneof"===t.type.kind&&qk.oneOfValues(t.type).forEach((e=>VD.add(r,e,e)))}else"oneof"===i.type.kind&&qk.oneOfValues(i.type).forEach((e=>VD.add(r,e,e)))}return{symbolList:e,symbolMap:t,namedArgs:n.array,constants:r.array}}(),oZ=(rZ.constants,rZ.namedArgs,rZ.symbolMap);rZ.symbolList;function iZ(e){if(Yk.isLiteral(e))return e;if(Yk.isSymbol(e)){if(!oZ[e.name])return e;const t=oZ[e.name];if("alias"===t.kind)return Yk.Symbol(oZ[e.name].symbol.id);throw t.translate([])}const t=Yk.isSymbol(e.head)&&!!oZ[e.head.name]&&"macro"===oZ[e.head.name].kind,n=t?e.head:iZ(e.head),r=n!==e.head;if(!e.args)return t?iZ(e.head):r?Yk.Apply(n):e;let o,i=!1;if(Yk.isArgumentsArray(e.args)){o=[];for(let t=0,n=e.args.length;t<n;t++){const n=e.args[t],r=iZ(n);n!==r&&(i=!0),o[o.length]=r}if(i||(o=e.args),!t&&!r&&!i)return e}else{o={};for(const t of Object.keys(e.args)){const n=e.args[t],r=iZ(n);n!==r&&(i=!0),o[t]=r}if(!t&&!r&&!i)return e;i||(o=e.args)}if(t){const t=oZ[e.head.name];if("macro"!==t.kind)return Yk.Apply(n,o);return t.translate(o)}return Yk.Apply(n,o)}function aZ(e){return iZ(e)}class sZ{constructor(e){this._=e}parse(e){const t=this.skip(sZ.eof)._(e,0);return t.status?{success:!0,value:t.value}:{success:!1,index:AZ(e,t.furthest),expected:t.expected}}tryParse(e){const t=this.parse(e);if(t.success)return t.value;{const n=function(e,t){return`expected ${function(e){if(1===e.length)return e[0];return"one of "+e.join(", ")}(t.expected)}${function(e,t){const n=t.index,r=n.offset;if(r===e.length)return", got the end of the input";const o=r>0?"'...":"'",i=e.length-r>12?"...'":"'";return` at line ${n.line} column ${n.column}, got ${o}${e.slice(r,r+12)}${i}`}(e,t)}`}(e,t);throw new Error(n)}}or(e){return sZ.alt(this,e)}trim(e){return this.wrap(e,e)}wrap(e,t){return lZ(1,"string"===typeof e?sZ.string(e):e,this,"string"===typeof t?sZ.string(t):t)}thru(e){return e(this)}then(e){return lZ(1,this,e)}many(){return new sZ(((e,t)=>{const n=[];let r;for(;;){if(r=dZ(this._(e,t),r),!r.status)return dZ(cZ(t,n),r);if(t===r.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");t=r.index,n.push(r.value)}}))}times(e,t){const n="undefined"===typeof t?e:t;return new sZ(((t,r)=>{const o=[];let i,a,s;for(s=0;s<e;s++){if(i=this._(t,r),a=dZ(i,a),!i.status)return a;r=i.index,o.push(i.value)}for(;s<n&&(i=this._(t,r),a=dZ(i,a),i.status);s+=1)r=i.index,o.push(i.value);return dZ(cZ(r,o),a)}))}result(e){return this.map((()=>e))}atMost(e){return this.times(0,e)}atLeast(e){return sZ.seq(this.times(e),this.many()).map((e=>[...e[0],...e[1]]))}map(e){return new sZ(((t,n)=>{const r=this._(t,n);return r.status?dZ(cZ(r.index,e(r.value)),r):r}))}skip(e){return lZ(0,this,e)}mark(){return sZ.seq(sZ.index,this,sZ.index).map((e=>({start:e[0],value:e[1],end:e[2]})))}node(e){return sZ.seq(sZ.index,this,sZ.index).map((t=>({name:e,start:t[0],value:t[1],end:t[2]})))}sepBy(e){return sZ.sepBy(this,e)}sepBy1(e){return sZ.sepBy1(this,e)}lookahead(e){return this.skip(sZ.lookahead(e))}notFollowedBy(e){return this.skip(sZ.notFollowedBy(e))}desc(e){return new sZ(((t,n)=>{const r=this._(t,n);return r.status||(r.expected=[e]),r}))}fallback(e){return this.or(sZ.succeed(e))}ap(e){return sZ.seq(e,this).map((e=>{let[t,n]=e;return t(n)}))}chain(e){return new sZ(((t,n)=>{const r=this._(t,n);if(!r.status)return r;return dZ(e(r.value)._(t,r.index),r)}))}}function lZ(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.length;return new sZ(((t,r)=>{let i,a,s=r;for(let l=0;l<o;l++){if(i=dZ(n[l]._(t,s),i),!i.status)return i;e===l&&(a=i.value),s=i.index}return dZ(cZ(s,a),i)}))}function cZ(e,t){return{status:!0,index:e,value:t}}function uZ(e,t){return{status:!1,furthest:e,expected:[t]}}function dZ(e,t){if(!t||e.status||t.status||e.furthest>t.furthest)return e;const n=e.furthest===t.furthest?function(e,t){const n=e.length,r=t.length;if(0===n)return t;if(0===r)return e;const o=new Set,i=[];for(let a=0;a<n;a++)o.has(e[a])||(i[i.length]=e[a],o.add(e[a]));for(let a=0;a<r;a++)o.has(t[a])||(i[i.length]=t[a],o.add(t[a]));return i.sort(),i}(e.expected,t.expected):t.expected;return{status:e.status,furthest:t.furthest,expected:n}}function AZ(e,t){const n=e.slice(0,t).split("\n");return{offset:t,line:n.length,column:n[n.length-1].length+1}}function fZ(e){return e instanceof sZ}var pZ;!function(e){function t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o=n.length;return new e(((e,t)=>{let r;const i=new Array(o);let a=t;for(let s=0;s<o;s++){if(r=dZ(n[s]._(e,a),r),!r.status)return r;i[s]=r.value,a=r.index}return dZ(cZ(a,i),r)}))}function n(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 0===n.length?s("zero alternates"):new e(((e,t)=>{let r;for(let o=0;o<n.length;o++)if(r=dZ(n[o]._(e,t),r),r.status)return r;return r}))}function r(e,n){return t(e,n.then(e).many()).map((e=>[e[0],...e[1]]))}function o(t){const n=`'${t}'`;if(1===t.length){const r=t.charCodeAt(0);return new e(((e,o)=>e.charCodeAt(o)===r?cZ(o+1,t):uZ(o,n)))}return new e(((e,r)=>{const o=r+t.length;return e.slice(r,o)===t?cZ(o,t):uZ(r,n)}))}function i(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=function(e){return RegExp("^(?:"+e.source+")",function(e){const t=""+e;return t.slice(t.lastIndexOf("/")+1)}(e))}(t),o=""+t;return new e(((e,t)=>{const i=r.exec(e.slice(t));if(i){if(0<=n&&n<=i.length){const e=i[0],r=i[n];return cZ(t+e.length,r)}return uZ(t,`invalid match group (0 to ${i.length}) in ${o}`)}return uZ(t,o)}))}function a(t){return new e(((e,n)=>cZ(n,t)))}function s(t){return new e(((e,n)=>uZ(n,t)))}function l(t){return new e(((e,n)=>{const r=e.charAt(n);return n<e.length&&t(r)?cZ(n+1,r):uZ(n,"a character "+t)}))}function c(t){const n=new e(((e,r)=>{const o=t()._;return n._=o,o(e,r)}));return n}e.seqMap=function(e,n,r){const o=[].slice.call(arguments);if(0===o.length)throw new Error("seqMap needs at least one argument");const i=o.pop();return function(e){if("function"!==typeof e)throw new Error("not a function: "+e)}(i),t.apply(null,o).map((function(e){return i.apply(null,e)}))},e.createLanguage=function(e){const t={};for(const n of Object.keys(e))!function(n){t[n]=c((()=>e[n](t)))}(n);return t},e.seq=t,e.alt=n,e.sepBy=function(e,t){return r(e,t).or(a([]))},e.sepBy1=r,e.string=o,e.regexp=i,e.succeed=a,e.fail=s,e.lookahead=function t(n){if(fZ(n))return new e(((e,t)=>{const r=n._(e,t);return r.status&&(r.index=t,r.value=null),r}));if("string"===typeof n)return t(o(n));if(n instanceof RegExp)return t(i(n));throw new Error("not a string, regexp, or parser: "+n)},e.notFollowedBy=function(t){return new e(((e,n)=>{const r=t._(e,n);return r.status?uZ(n,'not "'+e.slice(n,r.index)+'"'):cZ(n,null)}))},e.test=l,e.oneOf=function(e){return l((t=>e.indexOf(t)>=0))},e.noneOf=function(e){return l((t=>e.indexOf(t)<0))},e.range=function(e,t){return l((n=>e<=n&&n<=t)).desc(e+"-"+t)},e.takeWhile=function(t){return new e(((e,n)=>{let r=n;for(;r<e.length&&t(e.charAt(r));)r++;return cZ(r,e.slice(n,r))}))},e.lazy=c,e.empty=function(){return s("empty")},e.index=new e((function(e,t){return cZ(t,AZ(e,t))})),e.anyChar=new e(((e,t)=>t>=e.length?uZ(t,"any character"):cZ(t+1,e.charAt(t)))),e.all=new e((function(e,t){return cZ(e.length,e.slice(t))})),e.eof=new e((function(e,t){return t<e.length?uZ(t,"EOF"):cZ(t,null)})),e.digit=i(/[0-9]/).desc("a digit"),e.digits=i(/[0-9]*/).desc("optional digits"),e.letter=i(/[a-z]/i).desc("a letter"),e.letters=i(/[a-z]*/i).desc("optional letters"),e.optWhitespace=i(/\s*/).desc("optional whitespace"),e.whitespace=i(/\s+/).desc("whitespace"),e.cr=o("\r"),e.lf=o("\n"),e.crlf=o("\r\n"),e.newline=n(e.crlf,e.lf,e.cr).desc("newline"),e.end=n(e.newline,e.eof),e.of=function(e){return a(e)},e.regex=function(e){return i(e)}}(sZ||(sZ={})),function(e){let t;!function(e){e.str=function(e){return{kind:"string",value:e}},e.symb=function(e){return{kind:"symbol",value:e}},e.list=function(e,t){return{kind:"list",bracket:e,nodes:t}},e.comment=function(e){return{kind:"comment",value:e}}}(t||(t={}));const n=sZ.regexp(/[\n\r\s]*/),r=sZ.lazy((()=>sZ.alt(o,d,i,a).trim(n))),o=sZ.takeWhile((e=>"`"!==e)).trim("`").map(t.str),i=sZ.regexp(/[^()\[\]{};`,\n\r\s]+/).map(t.symb),a=sZ.regexp(/\s*;+([^\n\r]*)\n/,1).map(t.comment),s=r.many(),l=s.wrap("(",")").map((e=>t.list("(",e))),c=s.wrap("[","]").map((e=>t.list("[",e))),u=s.wrap("{","}").map((e=>t.list("{",e))),d=sZ.alt(l,c,u),A=r.many();function f(e){switch(e.kind){case"string":return e.value;case"symbol":{const t=e.value;if(t.length>1){switch(t.charAt(0)){case".":return FQ.atomName(t.substr(1));case"_":return FQ.struct.type.elementSymbol([t.substr(1)])}}return"true"===t||"false"!==t&&(function(e){return/-?(0|[1-9][0-9]*)([.][0-9]+)?([eE][+-]?[0-9]+)?/.test(e)&&!isNaN(+e)}(t)?+t:Yk.Symbol(t))}case"list":switch(e.bracket){case"[":return FQ.core.type.list(p(e.nodes).map(f));case"{":return FQ.core.type.set(p(e.nodes).map(f));case"(":{if("comment"===e.nodes[0].kind)throw new Error("Invalid expression");const t=f(e.nodes[0]);return Yk.Apply(t,function(e){if(e.length<=1)return;if(!function(e){for(let t=1,n=e.length;t<n;t++){const n=e[t];if("symbol"===n.kind&&n.value.length>1&&":"===n.value.charAt(0))return!0}return!1}(e)){const t=[];for(let n=1,r=e.length;n<r;n++){const r=e[n];"comment"!==r.kind&&(t[t.length]=f(r))}return t}const t={};let n=!0,r=0;for(let o=1,i=e.length;o<i;o++){const a=e[o];if("comment"!==a.kind)if("symbol"===a.kind&&a.value.length>1&&":"===a.value.charAt(0)){const r=a.value.substr(1);for(++o;o<i&&"comment"===e[o].kind;)o++;if(o>=i)throw new Error(`There must be a value foolowed a named arg ':${r}'.`);if("comment"===e[o].kind)throw new Error("Invalid expression");t[r]=f(e[o]),isNaN(+r)&&(n=!1)}else t[r++]=f(a)}if(n){const e=Object.keys(t).map((e=>+e)).sort(((e,t)=>e-t));let n=!0;for(let t=0,r=e.length;t<r;t++)if(e[t]!==t){n=!1;break}if(n){const n=[];for(let r=0,o=e.length;r<o;r++)n[r]=t[r];return n}}return t}(e.nodes))}default:Zh(e.bracket)}default:Zh()}}function p(e){let t=!1;for(let n=0,r=e.length;n<r;n++)if("comment"===e[n].kind){t=!0;break}return t?e.filter((e=>"comment"!==e.kind)):e}e.parse=function(e){const t=function(e){return A.tryParse(e)}(e),n=[];for(const r of t)"comment"!==r.kind&&(n[n.length]=f(r));return n}}(pZ||(pZ={}));const hZ=FQ;function gZ(e,t,n){const r=sZ.lazy((()=>sZ.seq(e,r).map((e=>n(...e))).or(t)));return r}function mZ(e,t,n){return sZ.seqMap(t,e.many(),((e,t)=>t.reduce(((e,t)=>n(t,e)),e)))}function yZ(e,t,n){return sZ.seqMap(t,sZ.seq(e,t).many(),((e,t)=>t.reduce(((e,t)=>{const[r,o]=t;return n(r,e,o)}),e)))}function vZ(e,t){const n=e.reduce(((e,t)=>{const n=t.isUnsupported?xZ(`operator '${t.name}' not supported`):t.map;return t.type(t.rule,e,n)}),t);return n}function bZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return sZ.optWhitespace.then(sZ.regexp(e,t).skip(sZ.optWhitespace))}function CZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return sZ.regexp(e,t).skip(sZ.optWhitespace)}function IZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return sZ.optWhitespace.then(sZ.regexp(e,t))}function EZ(e,t){const n=t?`${e}|${ch(t)}`:e;return bZ(RegExp(`(${n})\\s+([-+]?[0-9]*\\.?[0-9]+)\\s+OF`,"i"),2).map(parseFloat)}function xZ(e){return function(){throw new Error(e)}}function BZ(e){return 1===e.length?e[0]:e.length>1?hZ.core.logic.and(e):void 0}function wZ(e,t){if(!t||void 0===t.op||void 0===t.val)return t&&void 0!==t.flags?hZ.core.flags.hasAny([e,t.flags]):t&&void 0!==t.min&&void 0!==t.max?hZ.core.rel.inRange([e,t.min,t.max]):Array.isArray(t)?t.length>1?hZ.core.set.has([hZ.core.type.set(t),e]):hZ.core.rel.eq([e,t[0]]):hZ.core.rel.eq([e,t]);{const n=[e,t.val];switch(t.op){case"=":return hZ.core.rel.eq(n);case"!=":return hZ.core.rel.neq(n);case">":return hZ.core.rel.gr(n);case"<":return hZ.core.rel.lt(n);case">=":return hZ.core.rel.gre(n);case"<=":return hZ.core.rel.lte(n);default:throw new Error(`operator '${t.op}' not supported`)}}}function _Z(e){return hZ.struct.generator.queryInSelection({0:e,query:hZ.struct.generator.all(),"in-complement":!0})}function SZ(e,t){return e.length<t.length?1:-1}function DZ(e,t){const n=(t?[e].concat(t):[e]).sort(SZ).map(ch).join("|");return RegExp(`${n}`,"i")}function TZ(e){const t=[];return Object.keys(e).sort(SZ).forEach((n=>{const r=e[n],o=xZ(`property '${n}' not supported`),i=sZ.regexp(r.regex).map((e=>(r.isUnsupported&&o(),wZ(r.property,r.map(e))))),a=sZ.regexp(DZ(n,r.abbr)).trim(sZ.optWhitespace),s=e=>hZ.struct.generator.atomGroups({[r.level]:e});r.isNumeric?t.push(a.then(sZ.seq(sZ.regexp(/>=|<=|=|!=|>|</).trim(sZ.optWhitespace),sZ.regexp(r.regex).map(r.map))).map((e=>(r.isUnsupported&&o(),wZ(r.property,{op:e[0],val:e[1]})))).map(s)):t.push(a.then(i).map(s))})),t}function kZ(e){const t=[];return Object.keys(e).sort(SZ).forEach((n=>{const r=e[n],o=r.map?r.map:xZ(`keyword '${n}' not supported`),i=sZ.regexp(DZ(n,r.abbr)).map(o);t.push(i)})),t}function QZ(e,t){const n=[];return Object.keys(e).sort(SZ).forEach((r=>{const o=e[r],i=xZ(`property '${r}' not supported`),a=sZ.regexp(DZ(r,o.abbr)).lookahead(t).map((()=>(o.isUnsupported&&i(),o.property)));n.push(a)})),n}function MZ(e,t,n,r){const o=[];for(const i in e)o.push(i),e[i].abbr&&o.push(...e[i].abbr);for(const i in t)o.push(i),t[i].abbr&&o.push(...t[i].abbr);return n.forEach((e=>{o.push(e.name),e.abbr&&o.push(...e.abbr)})),o}function RZ(e){return hZ.core.type.set(e.map(hZ.atomName))}function PZ(e){return hZ.struct.generator.queryInSelection({0:e,query:hZ.struct.generator.all()})}function OZ(e,t,n){switch(e.head.name){case"structure-query.atom-property.macromolecular.label_atom_id":return hZ.atomName(t);case"structure-query.atom-property.core.element-symbol":return hZ.es(t);case"structure-query.atom-property.macromolecular.secondary-structure-flags":return n&&(t=[n[t.toUpperCase()]||"none"]),hZ.struct.type.secondaryStructureFlags([t]);default:return t}}const FZ="structure-query.atom-property.macromolecular.",NZ=["entityKey","label_entity_id","entityType"],LZ=["chainKey","label_asym_id","label_entity_id","auth_asym_id","entityType"],UZ=["residueKey","label_comp_id","label_seq_id","auth_comp_id","auth_seq_id","pdbx_formal_charge","secondaryStructureKey","secondaryStructureFlags","isModified","modifiedParentName"];function GZ(e){if(e.head.name.startsWith(FZ)){const t=e.head.name.substr(45);if(NZ.includes(t))return"entity-test";if(LZ.includes(t))return"chain-test";if(UZ.includes(t))return"residue-test"}return"atom-test"}const jZ=["structure-query.atom-property.macromolecular.secondary-structure-flags"];function zZ(e){return hZ.struct.generator.atomGroups({"residue-test":hZ.core.set.has([hZ.core.type.set(e),hZ.ammp("label_comp_id")])})}const HZ=FQ,VZ=/[-+]?[0-9]*\.?[0-9]+/,qZ=/[0-9]+/;function YZ(e){return e}const XZ={none:"none",turn:"turn",sheet:"beta",helix:"helix",dna:"dna",rna:"rna",carbohydrate:"carbohydrate",helix310:"3-10",helixalpha:"alpha",helixpi:"pi",0:"none",1:"turn",2:"beta",3:"helix",4:"dna",5:"rna",6:"carbohydrate",7:"3-10",8:"alpha",9:"pi"};function WZ(e){if(e.head){if(e.head.name&&"core.type.regex"===e.head.name&&(e=e.args[0].replace(/^\^|\$$/g,"")),e=XZ[e.toString().toLowerCase()]||"none",-1!==["dna","rna","carbohydrate"].indexOf(e))throw new Error("values 'dna', 'rna', 'carbohydrate' not yet supported for 'structure' property");return HZ.struct.type.secondaryStructureFlags([e])}}const KZ={adpmax:{"@desc":"the maximum anisotropic displacement parameter for the selected atom","@examples":[""],isUnsupported:!0,regex:VZ,map:e=>parseFloat(e),level:"atom-test"},adpmin:{"@desc":"the minimum anisotropic displacement parameter for the selected atom","@examples":[""],isUnsupported:!0,regex:VZ,map:e=>parseFloat(e),level:"atom-test"},altloc:{"@desc":"PDB alternate location identifier","@examples":["altloc = A"],regex:/[a-zA-Z0-9]/,map:YZ,level:"atom-test",property:HZ.ammp("label_alt_id")},altname:{"@desc":"an alternative name given to atoms by some file readers (for example, P2N)","@examples":[""],isUnsupported:!0,regex:/[a-zA-Z0-9]/,map:YZ,level:"atom-test"},atomID:{"@desc":"special atom IDs for PDB atoms assigned by Jmol","@examples":[""],isUnsupported:!0,regex:qZ,map:e=>parseInt(e),level:"atom-test"},atomIndex:{"@desc":"atom 0-based index; a unique number for each atom regardless of the number of models loaded","@examples":[""],isUnsupported:!0,regex:qZ,map:e=>parseInt(e),level:"atom-test"},atomName:{"@desc":"atom name","@examples":["atomName = CA"],regex:/[a-zA-Z0-9]+/,map:e=>HZ.atomName(e),level:"atom-test",property:HZ.ammp("label_atom_id")},atomno:{"@desc":'sequential number; you can use "@" instead of "atomno=" -- for example, select @33 or Var x = @33 or @35',"@examples":[""],isUnsupported:!0,regex:qZ,map:e=>parseInt(e),level:"atom-test"},atomType:{"@desc":"atom type (mol2, AMBER files) or atom name (other file types)","@examples":["atomType = OH"],regex:/[a-zA-Z0-9]+/,map:e=>HZ.atomName(e),level:"atom-test",property:HZ.ammp("label_atom_id")},atomX:{"@desc":"Cartesian X coordinate (or just X)","@examples":["x = 4.2"],abbr:["X"],isNumeric:!0,regex:VZ,map:e=>parseFloat(e),level:"atom-test",property:HZ.acp("x")},atomY:{"@desc":"Cartesian Y coordinate (or just Y)","@examples":["y < 42"],abbr:["Y"],isNumeric:!0,regex:VZ,map:e=>parseFloat(e),level:"atom-test",property:HZ.acp("y")},atomZ:{"@desc":"Cartesian Z coordinate (or just Z)","@examples":["Z > 10"],abbr:["Z"],isNumeric:!0,regex:VZ,map:e=>parseFloat(e),level:"atom-test",property:HZ.acp("z")},bondcount:{"@desc":"covalent bond count","@examples":["bondcount = 0"],isNumeric:!0,regex:qZ,map:e=>parseInt(e),level:"atom-test",property:HZ.acp("bondCount")},bondingRadius:{"@desc":"radius used for auto bonding; synonymous with ionic and ionicRadius","@examples":[""],abbr:["ionic","ionicRadius"],isUnsupported:!0,regex:VZ,map:e=>parseFloat(e),level:"atom-test"},cell:{"@desc":'crystallographic unit cell, expressed either in lattice integer notation (111-999) or as a coordinate in ijk space, where {1 1 1} is the same as 555. ANDing two cells, for example select cell=555 and cell=556, selects the atoms on the common face. (Note: in the specifc case of CELL, only "=" is allowed as a comparator.)',"@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},configuration:{"@desc":'Only in the context {configuration=n}, this option selects the set of atoms with either no ALTLOC specified or those atoms having this index into the array of altlocs within its model. So, for example, if the model has altloc "A" and "B", select configuration=1 is equivalent to select altloc="" or altloc="A", and print {configuration=2} is equivalent to print {altloc="" or altloc="B"}. Configuration 0 is "all atoms in a model having configurations", and an invalid configuration number gives no atoms. (Note: in the specifc case of CONFIGURATION, only "=" is allowed as a comparator.)',"@examples":[""],isUnsupported:!0,regex:qZ,map:e=>parseInt(e),level:"atom-test"},chain:{"@desc":'protein chain. For newer CIF files allowing multicharacter chain specifications, use quotations marks: select chain="AA". For these multicharacter desigations, case is not checked unless the CIF file has lower-case chain designations.',"@examples":["chain = A",'chain = "AA"'],regex:/[a-zA-Z0-9]+/,map:YZ,level:"chain-test",property:HZ.ammp("auth_asym_id")},chainNo:{"@desc":'chain number; sequentially counted from 1 for each model; chainNo == 0 means"no chain" or PDB chain identifier indicated as a blank (Jmol 14.0).',"@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},color:{"@desc":"the atom color","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},covalentRadius:{"@desc":"covalent bonding radius, synonymous with covalent. Not used by Jmol, but could be used, for example, in {*}.spacefill={*}.covalentRadius.all.","@examples":[""],abbr:["covalent"],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},cs:{"@desc":"chemical shift calculated using computational results that include magnetic shielding tensors.","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},element:{"@desc":'element symbol. The value of this parameter depends upon the context. Used with select structure=x, x can be either the quoted element symbol, "H", "He", "Li", etc. or atomic number. In all other contexts, the value is the element symbol. When the atom is a specific isotope, the string will contain the isotope number -- "13C", for example.',"@examples":["element=Fe"],regex:/[a-zA-Z]+/,map:e=>HZ.es(e),level:"atom-test",property:HZ.acp("elementSymbol")},elemno:{"@desc":"atomic element number","@examples":["elemno=8"],regex:/[0-9\s{}-]+/,map:e=>parseInt(e),level:"atom-test",property:HZ.acp("atomicNumber")},eta:{"@desc":"Based on Carlos M. Duarte, Leven M. Wadley, and Anna Marie Pyle, RNA structure comparison, motif search and discovery using a reduced representation of RNA conformational space, Nucleic Acids Research, 2003, Vol. 31, No. 16 4755-4761. The parameter eta is the C4'[i-1]-P[i]-C4'[i]-P[i+1] dihedral angle; theta is the P[i]-C4'[i]-P[i+1]-C4'[i+1] dihedral angle. Both are measured on a 0-360 degree scale because they are commonly near 180 degrees. Using the commands plot PROPERTIES eta theta resno; select visible;wireframe only one can create these authors' \"RNA worm\" graph.","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},theta:{"@desc":"Based on Carlos M. Duarte, Leven M. Wadley, and Anna Marie Pyle, RNA structure comparison, motif search and discovery using a reduced representation of RNA conformational space, Nucleic Acids Research, 2003, Vol. 31, No. 16 4755-4761. The parameter eta is the C4'[i-1]-P[i]-C4'[i]-P[i+1] dihedral angle; theta is the P[i]-C4'[i]-P[i+1]-C4'[i+1] dihedral angle. Both are measured on a 0-360 degree scale because they are commonly near 180 degrees. Using the commands plot PROPERTIES eta theta resno; select visible;wireframe only one can create these authors' \"RNA worm\" graph.","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},file:{"@desc":"file number containing this atom","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},formalCharge:{"@desc":"formal charge","@examples":["formalCharge=1"],regex:VZ,map:e=>parseFloat(e),level:"atom-test",property:HZ.ammp("pdbx_formal_charge")},format:{"@desc":"format (label) of the atom.","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},fXyz:{"@desc":"fractional XYZ coordinates","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},fX:{"@desc":"fractional X coordinate","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},fY:{"@desc":"fractional Y coordinate","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},fZ:{"@desc":"fractional Z coordinate","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},fuxyz:{"@desc":"fractional XYZ coordinates in the unitcell coordinate system","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},fux:{"@desc":"fractional X coordinate in the unitcell coordinate system","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},fuy:{"@desc":"fractional Y coordinate in the unitcell coordinate system","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},fuz:{"@desc":"fractional Z coordinate in the unit cell coordinate system","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},group:{"@desc":"3-letter residue code","@examples":["group = ALA"],regex:/[a-zA-Z0-9]{1,3}/,map:YZ,level:"residue-test",property:HZ.ammp("label_comp_id")},group1:{"@desc":"single-letter residue code (amino acids only)","@examples":["group1 = G"],regex:/[a-zA-Z]/,map:YZ,level:"residue-test",property:HZ.ammp("label_comp_id")},groupID:{"@desc":"group ID number: A unique ID for each amino acid or nucleic acid residue in a PDB file. 0  noGroup 1-5  ALA, ARG, ASN, ASP, CYS 6-10  GLN, GLU, GLY, HIS, ILE 11-15  LEU, LYS, MET, PHE, PRO 16-20  SER, THR, TRP, TYR, VAL 21-23  ASX, GLX, UNK 24-29  A, +A, G, +G, I, +I 30-35  C, +C, T, +T, U, +U Additional unique numbers are assigned arbitrarily by Jmol and cannot be used reproducibly.","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},groupindex:{"@desc":"overall group index","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},hydrophobicity:{"@desc":"Aminoacid residue scale of hydrophobicity based on Rose, G. D., Geselowitz, A. R., Lesser, G. J., Lee, R. H., and Zehfus, M. H. (1985). Hydrophobicity of amino acid residues in globular proteins, Science, 229(4716):834-838.","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},identify:{"@desc":"for a PDB/mmCIF file, a label such as [ILE]7^1:A.CD1%A/3 #47, which includes the group ([ILE]), residue number with optional insertion code (7^1), chain (:A), atom name (CD1), alternate location if present (%A), PDB model number (/3, for NMR models when one file is loaded; /file.model such as /2.3 if more than one file is loaded), and atom number (#47). For non-PDB data, the information is shorter -- for example, H15/2.1 #6, indicating atom name (H15), full file.model number (/2.1), and atom number (#6). If only a single model is loaded, %[identify] does not include the model number.","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},insertion:{"@desc":"protein residue insertion code","@examples":["insertion=A"],regex:/[a-zA-Z0-9]/,map:YZ,level:"atom-test",property:HZ.ammp("pdbx_PDB_ins_code")},label:{"@desc":"current atom label (same as format)","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},mass:{"@desc":"atomic mass -- especially useful with appended .max or .sum","@examples":["mass > 13"],regex:VZ,map:e=>parseFloat(e),level:"atom-test",property:HZ.acp("mass")},model:{"@desc":"model number","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},modelindex:{"@desc":"a unique number for each model, starting with 0 and spanning all models in all files","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},modO:{"@desc":"currently calculated occupancy from modulation (0 to 100; NaN if atom has no occupancy modulation)","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},modXYZ:{"@desc":"currently calculated displacement modulation (for incommensurately modulated structures). Also modX, modY, modZ for individual components. For atoms without modultion, {xx}.modXYZ is -1 and {xx}.modX is NaN, and in a label %[modXYZ] and %[modX] are blank.","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},molecule:{"@desc":"molecule number","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},monomer:{"@desc":"monomer number (group number) in a polymer (usually a chain), starting with 1, or 0 if not part of a biopolymer -- that is, not a connected carbohydrate, amino acid, or nucleic acid (Jmol 14.3.15)","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},ms:{"@desc":"magnetic shielding calculated from file-loaded tensors.","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},occupancy:{"@desc":'CIF file site occupancy. In SELECT command comparisons ("select occupancy < 90"), an integer n implies measurement on a 0-100 scale; also, in the context %[occupancy] or %q for a label, the reported number is a percentage. In all other cases, such as when %Q is used in a label or when a decimal number is used in a comparison, the scale is 0.0 - 1.0.',"@examples":["occupancy < 1"],regex:VZ,map:e=>parseFloat(e),level:"atom-test",property:HZ.ammp("occupancy")},partialCharge:{"@desc":"partial charge","@examples":[""],isUnsupported:!0,regex:VZ,map:e=>parseFloat(e),level:"atom-test"},phi:{"@desc":"protein group PHI angle for atom's residue","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},polymer:{"@desc":"sequential polymer number in a model, starting with 1.","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},polymerLength:{"@desc":"polymer length","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},property_xx:{"@desc":"a property created using the DATA command","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},psi:{"@desc":"protein group PSI angle for the atom's residue","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},radius:{"@desc":'currently displayed radius -- In SELECT command comparisons ("select radius=n"), integer n implies Rasmol units 1/250 Angstroms; in all other cases or when a decimal number is used, the units are Angstroms.',"@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},resno:{"@desc":"PDB residue number, not including insertion code (see also seqcode, below)","@examples":["resno = 100"],regex:/-?[0-9]+/,map:e=>parseInt(e),level:"residue-test",property:HZ.ammp("auth_seq_id")},selected:{"@desc":"1.0 if atom is selected; 0.0 if not","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},sequence:{"@desc":'PDB one-character sequence code, as a string of characters, with "?" indicated where single-character codes are not available',"@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},seqcode:{"@desc":'PDB residue number, including insertion code (for example, 234^2; "seqcode" option added in Jmol 14.3.16)',"@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},seqid:{"@desc":"(mmCIF only) the value from _atom_site.label_seq_id; a pointer to _entity_poly_seq.num in the ENTITY_POLY_SEQ category specifying the sequence of monomers in a polymer. Allowance is made for the possibility of microheterogeneity in a sample by allowing a given sequence number to be correlated with more than one monomer id. (Jmol 14.2.3)","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},shape:{"@desc":'hybridization geometry such as "tetrahedral"',"@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},site:{"@desc":"crystallographic site number","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},spacefill:{"@desc":"currently displayed radius","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},straightness:{"@desc":'quaternion-derived straightness (second derivative of the quaternion describing the orientation of the residue. This quantity will have different values depending upon the setting of quaternionFrame as "A" (alpha-carbon/phosphorus atom only), "C" (alpha-carbon/pyrimidine or purine base based), "P" (carbonyl-carbon peptide plane/phosphorus tetrahedron based), or "N" (amide-nitrogen based). The default is alpha-carbon based, which corresponds closely to the following combination of Ramachandran angles involving three consecutive residues i-1, i, and i+1: -psii-1 - phii + psii + phii+1.',"@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},strucno:{"@desc":"a unique number for each helix, sheet, or turn in a model, starting with 1.","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},structure:{"@desc":'The value of this parameter depends upon the context. Used with select structure=x, x can be either the quoted keyword "none", "turn", "sheet", "helix", "dna", "rna", or "carbohydrate" or a respective number 0-6. In the context {*}.structure, the return value is a number; in the context label %[structure], the return is one of the six keywords.',"@examples":['structure="helix"',"structure=3"],regex:/none|turn|sheet|helix|dna|rna|carbohydrate|[0-6]/i,map:YZ,level:"residue-test",property:"structure"},substructure:{"@desc":'like structure, the value of this parameter depends upon the context. Used with select substructure=x, x can be either the quoted keyword "none", "turn", "sheet", "helix", "dna", "rna", "carbohydrate", "helix310", "helixalpha", or "helixpi", or the respective number 0-9. In the context {*}.substructure, the return value is a number; in the context label %[substructure], the return is one of the nine keywords.',"@examples":['substructure = "alphahelix"',"substructure =9"],regex:/none|turn|sheet|helix|dna|rna|carbohydrate|helix310|helixalpha|helixpi|[0-9]/i,map:YZ,level:"residue-test",property:"structure"},surfacedistance:{"@desc":"A value related to the distance of an atom to a nominal molecular surface. 0 indicates at the surface. Positive numbers are minimum distances in Angstroms from the given atom to the surface.","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},symop:{"@desc":'the first symmetry operation code that generated this atom by Jmol; an integer starting with 1. See also symmetry, below. This operator is only present if the file contains space group information and the file was loaded using the {i, j, k} option so as to generate symmetry-based atoms. To select only the original atoms prior to application of symmetry, you can either use "SYMOP=n", where n is the symmetry operator corresponding to "x,y,z", or you can specify instead simply "NOT symmetry" the way you might specify "NOT hydrogen". Note that atoms in special positions will have multiple operator matches. These atoms can be selected using the keyword SPECIALPOSITION. The special form select SYMOP=nijk selects a specific translation of atoms from the given crystallographic symmetry operation. Comparators <, <=, >, >=, and != can be used and only apply to the ijk part of the designation. The ijk are relative, not absolute. Thus, symop=2555 selects for atoms that have been transformed by symop=2 but not subjected to any further translation. select symop=1555 is identical to select not symmetry. All other ijk are relative to these selections for 555. If the model was loaded using load "filename.cif" {444 666 1}, where the 1 indicates that all symmetry-generated atoms are to be packed within cell 555 and then translated to fill the other 26 specified cells, then select symop=3555 is nearly the same as select symop=3 and cell=555. (The difference being that cell=555 selects for all atoms that are on any edge of the cell, while symop=3555 does not.) However, the situation is different if instead the model was loaded using load "filename.cif" {444 666 0}, where the 0 indicates that symmetry-generated atoms are to be placed exactly where their symmetry operator would put them (x,-y,z being different then from x, 1-y, z). In that case, select symop=3555 is for all atoms that have been generated using symmetry operation 3 but have not had any additional translations applied to the x,y,z expression found in the CIF file. If, for example, symmetry operation 3 is -x,-y,-z, then load "filename.cif" {444 666 0} will place an atom originally at {1/2, 1/2, 1/2} at positions {-1/2, -1/2, -1/2} (symop=3555) and {-3/2, -3/2, -3/2} (symop=3444) and 24 other sites.',"@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},symmetry:{"@desc":'as "symmetry" or in a label as lower-case "o" gives list of crystallographic symmetry operators generating this atom with lattice designations,such as 3555; upper-case "%O" in a label gives a list without the lattice designations. See also symop, above.',"@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},temperature:{"@desc":"yes  yes  temperature factor (B-factor)","@examples":["temperature >= 20"],regex:VZ,map:e=>parseFloat(e),level:"atom-test",property:HZ.ammp("B_iso_or_equiv")},unitXyz:{"@desc":"unit cell XYZ coordinates","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},uX:{"@desc":"unit cell X coordinate normalized to [0,1)","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},uY:{"@desc":"unit cell Y coordinate normalized to [0,1)","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},uZ:{"@desc":"unit cell Z coordinate normalized to [0,1)","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},valence:{"@desc":"the valence of an atom (sum of bonds, where double bond counts as 2 and triple bond counts as 3","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},vanderwaals:{"@desc":"van der Waals radius","@examples":["vanderwaals >2"],regex:VZ,map:e=>parseFloat(e),level:"atom-test",property:HZ.acp("vdw")},vectorScale:{"@desc":"vibration vector scale","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},volume:{"@desc":"approximate van der Waals volume for this atom. Note, {*}.volume gives an average; use {*}.volume.sum to get total volume.","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},vXyz:{"@desc":"vibration vector, or individual components as %vx %vy %vz. For atoms without vibration vectors, {xx}.vXyz is -1; in a label, %[vxyz] is blank.","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},vX:{"@desc":"vibration vector X coordinate; for atoms without vibration vector, {xx}.vX is NaN (same for vY and vZ)","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},vY:{"@desc":"vibration vector Y coordinate","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},vZ:{"@desc":"vibration vector Z coordinate","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"},xyz:{"@desc":"Cartesian XYZ coordinates; select xyz > 1.0 selects atoms more than one Angstrom from the origin.","@examples":[""],isUnsupported:!0,regex:/[0-9\s{}-]+/,map:YZ,level:"atom-test"}},JZ=FQ,ZZ=[{"@desc":"Selects atoms that are not included in s1.","@examples":["not ARG"],name:"not",type:gZ,rule:sZ.alt(sZ.regex(/NOT/i).skip(sZ.whitespace),sZ.string("!").skip(sZ.optWhitespace)),map:(e,t)=>_Z(t)},{"@desc":"Selects atoms included in both s1 and s2.","@examples":["ASP and .CA"],name:"and",type:yZ,rule:bZ(/AND|&/i),map:(e,t,n)=>JZ.struct.modifier.intersectBy({0:t,by:n})},{"@desc":"Selects atoms included in either s1 or s2.","@examples":["ASP or GLU"],name:"or",type:yZ,rule:bZ(/OR|\||,/i),map:(e,t,n)=>JZ.struct.combinator.merge([t,n])}],$Z=FQ,e$={acidic:["ASP","GLU"],aliphatic:["ALA","GLY","ILE","LEU","VAL"],amino:["ALA","ARG","ASN","ASP","CYS","GLN","GLU","GLY","HIS","ILE","LEU","LYS","MET","PHE","PRO","SER","THR","TRP","TYR","VAL","ASX","GLX","UNK"],aromatic:["HIS","PHE","TRP","TYR"],basic:["ARG","HIS","LYS"],buried:["ALA","CYS","ILE","LEU","MET","PHE","TRP","VAL"],cg:["CYT","C","GUA","G"],cyclic:["HIS","PHE","PRO","TRP","TYR"],hydrophobic:["ALA","GLY","ILE","LEU","MET","PHE","PRO","TRP","TYR","VAL"],large:["ARG","GLU","GLN","HIS","ILE","LEU","LYS","MET","PHE","TRP","TYR"],medium:["ASN","ASP","CYS","PRO","THR","VAL"],small:["ALA","GLY","SER"],nucleic:["G","C","A","T","U","I","DG","DC","DA","DT","DU","DI","+G","+C","+A","+T","+U","+I"]},t$=["P","O3'","O5'","C5'","C4'","C3'","OP1","OP2","O3*","O5*","C5*","C4*","C3*","C2'","C1'","O4'","O2'"],n$=["C","N","CA"];function r$(){return $Z.struct.combinator.merge([$Z.struct.generator.atomGroups({"residue-test":$Z.core.set.has([$Z.set(...e$.nucleic),$Z.ammp("label_comp_id")])}),$Z.struct.filter.pick({0:$Z.struct.generator.atomGroups({"group-by":$Z.ammp("residueKey")}),test:$Z.core.logic.and([$Z.core.rel.eq([$Z.struct.atomSet.atomCount(),1]),$Z.core.rel.eq([$Z.ammp("label_atom_id"),$Z.atomName("P")])])}),$Z.struct.filter.pick({0:$Z.struct.generator.atomGroups({"group-by":$Z.ammp("residueKey")}),test:$Z.core.logic.or([$Z.core.set.isSubset([RZ(["C1'","C2'","O3'","C3'","C4'","C5'","O5'"]),$Z.ammpSet("label_atom_id")]),$Z.core.set.isSubset([RZ(["C1*","C2*","O3*","C3*","C4*","C5*","O5*"]),$Z.ammpSet("label_atom_id")])])})])}const o$={all:{"@desc":"all atoms; same as *",abbr:["*"],map:()=>$Z.struct.generator.all()},bonded:{"@desc":"covalently bonded",map:()=>$Z.struct.generator.atomGroups({"atom-test":$Z.core.rel.gr([$Z.struct.atomProperty.core.bondCount({flags:$Z.struct.type.bondFlags(["covalent","metallic","sulfide"])}),0])})},clickable:{"@desc":"actually visible -- having some visible aspect such as wireframe, spacefill, or a label showing, or the alpha-carbon or phosphorus atom in a biomolecule that is rendered with only cartoon, rocket, or other biomolecule-specific shape."},connected:{"@desc":"bonded in any way, including hydrogen bonds",map:()=>$Z.struct.generator.atomGroups({"atom-test":$Z.core.rel.gr([$Z.struct.atomProperty.core.bondCount({flags:$Z.struct.type.bondFlags()}),0])})},displayed:{"@desc":"displayed using the display or hide command; not necessarily visible"},hidden:{"@desc":"hidden using the display or hide command"},none:{"@desc":"no atoms",map:()=>$Z.struct.generator.empty()},selected:{"@desc":"atoms that have been selected; defaults to all when a file is first loaded"},thisModel:{"@desc":'atoms in the current frame set, as defined by frame, model, or animation commands. If more than one model is in this set, "thisModel" refers to all of them, regardless of atom displayed/hidden status.'},visible:{"@desc":"visible in any way, including PDB residue atoms for which a cartoon or other such rendering makes their group visible, even if they themselves are not visible."},subset:{"@desc":"the currently defined subset. Note that if a subset is currently defined, then select/display all is the same as select/display subset, restrict none is the same as restrict not subset. In addition, select not subset selects nothing."},specialPosition:{"@desc":"atoms in crystal structures that are at special positions - that is, for which there is more than one operator that leads to them."},unitcell:{"@desc":"atoms within the current unitcell, which may be offset. This includes atoms on the faces and at the vertices of the unitcell."},polyhedra:{"@desc":"all central atoms for which polyhedra have been created. See also polyhera(n), below. (Jmol 14.4)"},nonmetal:{"@desc":"_H,_He,_B,_C,_N,_O,_F,_Ne,_Si,_P,_S,_Cl,_Ar,_As,_Se,_Br,_Kr,_Te,_I,_Xe,_At,_Rn",map:()=>$Z.struct.generator.atomGroups({"atom-test":$Z.core.set.has([$Z.set(...["H","He","B","C","N","O","F","Ne","Si","P","S","Cl","Ar","As","Se","Br","Kr","Te","I","Xe","At","Rn"].map($Z.es)),$Z.acp("elementSymbol")])})},metal:{"@desc":"!nonmetal",map:()=>$Z.struct.generator.atomGroups({"atom-test":$Z.core.logic.not([$Z.core.set.has([$Z.set(...["H","He","B","C","N","O","F","Ne","Si","P","S","Cl","Ar","As","Se","Br","Kr","Te","I","Xe","At","Rn"].map($Z.es)),$Z.acp("elementSymbol")])])})},alkaliMetal:{"@desc":"_Li,_Na,_K,_Rb,_Cs,_Fr",map:()=>$Z.struct.generator.atomGroups({"atom-test":$Z.core.set.has([$Z.set(...["Li","Na","K","Rb","Cs","Fr"].map($Z.es)),$Z.acp("elementSymbol")])})},alkalineEarth:{"@desc":"_Be,_Mg,_Ca,_Sr,_Ba,_Ra",map:()=>$Z.struct.generator.atomGroups({"atom-test":$Z.core.set.has([$Z.set(...["Be","Mg","Ca","Sr","Ba","Ra"].map($Z.es)),$Z.acp("elementSymbol")])})},nobleGas:{"@desc":"_He,_Ne,_Ar,_Kr,_Xe,_Rn",map:()=>$Z.struct.generator.atomGroups({"atom-test":$Z.core.set.has([$Z.set(...["He","Ne","Ar","Kr","Xe","Rn"].map($Z.es)),$Z.acp("elementSymbol")])})},metalloid:{"@desc":"_B,_Si,_Ge,_As,_Sb,_Te",map:()=>$Z.struct.generator.atomGroups({"atom-test":$Z.core.set.has([$Z.set(...["B","Si","Ge","As","Sb","Te"].map($Z.es)),$Z.acp("elementSymbol")])})},transitionMetal:{"@desc":"(includes La and Ac) elemno>=21 and elemno<=30, elemno=57, elemno=89, elemno>=39 and elemno<=48, elemno>=72 and elemno<=80, elemno>=104 and elemno<=112",map:()=>$Z.struct.generator.atomGroups({"atom-test":$Z.core.logic.or([$Z.core.rel.inRange([$Z.acp("atomicNumber"),21,30]),$Z.core.rel.inRange([$Z.acp("atomicNumber"),39,48]),$Z.core.rel.inRange([$Z.acp("atomicNumber"),72,80]),$Z.core.rel.inRange([$Z.acp("atomicNumber"),104,112]),$Z.core.set.has([$Z.set(57,89),$Z.acp("atomicNumber")])])})},lanthanide:{"@desc":"(does not include La) elemno>57 and elemno<=71",map:()=>$Z.struct.generator.atomGroups({"atom-test":$Z.core.rel.inRange([$Z.acp("atomicNumber"),57,71])})},actinide:{"@desc":"(does not include Ac) elemno>89 and elemno<=103",map:()=>$Z.struct.generator.atomGroups({"atom-test":$Z.core.rel.inRange([$Z.acp("atomicNumber"),89,103])})},isaromatic:{"@desc":"atoms connected with the AROMATIC, AROMATICSINGLE, or AROMATICDOUBLE bond types",map:()=>$Z.struct.generator.atomGroups({"atom-test":$Z.core.rel.gr([$Z.struct.atomProperty.core.bondCount({flags:$Z.struct.type.bondFlags(["aromatic"])}),0])})},carbohydrate:{"@desc":""},ions:{"@desc":'(specifically the PDB designations "PO4" and "SO4")'},ligand:{"@desc":'(originally "hetero and not solvent"; changed to "!(protein,nucleic,water,UREA)" for Jmol 12.2)'},nucleic:{"@desc":'any group that (a) has one of the following group names: G, C, A, T, U, I, DG, DC, DA, DT, DU, DI, +G, +C, +A, +T, +U, +I; or (b) can be identified as a group that is only one atom, with name "P"; or (c) has all of the following atoms (prime, \', can replace * here): C1*, C2*, C3*, O3*, C4*, C5*, and O5*.',map:()=>r$()},purine:{"@desc":"any nucleic group that (a) has one of the following group names: A, G, I, DA, DG, DI, +A, +G, or +I; or (b) also has atoms N7, C8, and N9.",map:()=>$Z.struct.modifier.intersectBy({0:r$(),by:$Z.struct.combinator.merge([$Z.struct.generator.atomGroups({"residue-test":$Z.core.set.has([$Z.set("A","G","I","DA","DG","DI","+A","+G","+I"),$Z.ammp("label_comp_id")])}),$Z.struct.filter.pick({0:$Z.struct.generator.atomGroups({"group-by":$Z.ammp("residueKey")}),test:$Z.core.set.isSubset([RZ(["N7","C8","N9"]),$Z.ammpSet("label_atom_id")])})])})},pyrimidine:{"@desc":"any nucleic group that (a) has one of the following group names: C, T, U, DC, DT, DU, +C, +T, +U; or (b) also has atom O2.",map:()=>$Z.struct.modifier.intersectBy({0:r$(),by:$Z.struct.combinator.merge([$Z.struct.generator.atomGroups({"residue-test":$Z.core.set.has([$Z.set("C","T","U","DC","DT","DU","+C","+T","+U"),$Z.ammp("label_comp_id")])}),$Z.struct.filter.pick({0:$Z.struct.generator.atomGroups({"group-by":$Z.ammp("residueKey")}),test:$Z.core.logic.or([$Z.core.set.has([$Z.ammpSet("label_atom_id"),$Z.atomName("O2*")]),$Z.core.set.has([$Z.ammpSet("label_atom_id"),$Z.atomName("O2'")])])})])})},dna:{"@desc":"any nucleic group that (a) has one of the following group names: DG, DC, DA, DT, DU, DI, T, +G, +C, +A, +T; or (b) has neither atom O2* or O2'.",map:()=>$Z.struct.modifier.intersectBy({0:r$(),by:$Z.struct.combinator.merge([$Z.struct.generator.atomGroups({"residue-test":$Z.core.set.has([$Z.set("DG","DC","DA","DT","DU","DI","T","+G","+C","+A","+T"),$Z.ammp("label_comp_id")])}),$Z.struct.filter.pick({0:$Z.struct.generator.atomGroups({"group-by":$Z.ammp("residueKey")}),test:$Z.core.logic.not([$Z.core.logic.or([$Z.core.set.has([$Z.ammpSet("label_atom_id"),$Z.atomName("O2*")]),$Z.core.set.has([$Z.ammpSet("label_atom_id"),$Z.atomName("O2'")])])])})])})},rna:{"@desc":"any nucleic group that (a) has one of the following group names: G, C, A, U, I, +U, +I; or (b) has atom O2* or O2'.",map:()=>$Z.struct.modifier.intersectBy({0:r$(),by:$Z.struct.combinator.merge([$Z.struct.generator.atomGroups({"residue-test":$Z.core.set.has([$Z.set("G","C","A","U","I","+U","+I"),$Z.ammp("label_comp_id")])}),$Z.struct.filter.pick({0:$Z.struct.generator.atomGroups({"group-by":$Z.ammp("residueKey")}),test:$Z.core.logic.or([$Z.core.set.has([$Z.ammpSet("label_atom_id"),$Z.atomName("O2*")]),$Z.core.set.has([$Z.ammpSet("label_atom_id"),$Z.atomName("O2'")])])})])})},protein:{"@desc":'defined as a group that (a) has one of the following group names: ALA, ARG, ASN, ASP, CYS, GLN, GLU, GLY, HIS, ILE, LEU, LYS, MET, PHE, PRO, SER, THR, TRP, TYR, VAL, ASX, GLX, or UNK; or (b) contains PDB atom designations [C, O, CA, and N] bonded correctly; or (c) does not contain "O" but contains [C, CA, and N] bonded correctly; or (d) has only one atom, which has name CA and does not have the group name CA (indicating a calcium atom).',map:()=>$Z.struct.generator.atomGroups({"residue-test":$Z.core.set.has([$Z.set(...e$.amino),$Z.ammp("label_comp_id")])})},acidic:{"@desc":"ASP GLU",map:()=>zZ(e$.acidic)},acyclic:{"@desc":"amino and not cyclic",map:()=>$Z.struct.modifier.intersectBy({0:zZ(e$.amino),by:_Z(zZ(e$.cyclic))})},aliphatic:{"@desc":"ALA GLY ILE LEU VAL",map:()=>zZ(e$.aliphatic)},amino:{"@desc":"all twenty standard amino acids, plus ASX, GLX, UNK",map:()=>zZ(e$.amino)},aromatic:{"@desc":'HIS PHE TRP TYR (see also "isaromatic" for aromatic bonds)',map:()=>zZ(e$.aromatic)},basic:{"@desc":"ARG HIS LYS",map:()=>zZ(e$.basic)},buried:{"@desc":"ALA CYS ILE LEU MET PHE TRP VAL",map:()=>zZ(e$.buried)},charged:{"@desc":"same as acidic or basic -- ASP GLU, ARG HIS LYS",map:()=>zZ(e$.acidic.concat(e$.basic))},cyclic:{"@desc":"HIS PHE PRO TRP TYR",map:()=>zZ(e$.cyclic)},helix:{"@desc":"secondary structure-related.",map:()=>$Z.struct.generator.atomGroups({"residue-test":$Z.core.flags.hasAny([$Z.struct.type.secondaryStructureFlags(["helix"]),$Z.ammp("secondaryStructureFlags")])})},helixalpha:{"@desc":"secondary structure-related.",map:()=>$Z.struct.generator.atomGroups({"residue-test":$Z.core.flags.hasAny([$Z.struct.type.secondaryStructureFlags(["alpha"]),$Z.ammp("secondaryStructureFlags")])})},helix310:{"@desc":"secondary structure-related.",map:()=>$Z.struct.generator.atomGroups({"residue-test":$Z.core.flags.hasAny([$Z.struct.type.secondaryStructureFlags(["3-10"]),$Z.ammp("secondaryStructureFlags")])})},helixpi:{"@desc":"secondary structure-related.",map:()=>$Z.struct.generator.atomGroups({"residue-test":$Z.core.flags.hasAny([$Z.struct.type.secondaryStructureFlags(["pi"]),$Z.ammp("secondaryStructureFlags")])})},hetero:{"@desc":"PDB atoms designated as HETATM",map:()=>$Z.struct.generator.atomGroups({"atom-test":$Z.ammp("isHet")})},hydrophobic:{"@desc":"ALA GLY ILE LEU MET PHE PRO TRP TYR VAL",map:()=>zZ(e$.hydrophobic)},large:{"@desc":"ARG GLU GLN HIS ILE LEU LYS MET PHE TRP TYR",map:()=>zZ(e$.large)},medium:{"@desc":"ASN ASP CYS PRO THR VAL",map:()=>zZ(e$.medium)},negative:{"@desc":"same as acidic -- ASP GLU",map:()=>zZ(e$.acidic)},neutral:{"@desc":"amino and not (acidic or basic)",map:()=>$Z.struct.modifier.intersectBy({0:zZ(e$.amino),by:_Z(zZ(e$.acidic.concat(e$.basic)))})},polar:{"@desc":"amino and not hydrophobic",map:()=>$Z.struct.modifier.intersectBy({0:zZ(e$.amino),by:_Z(zZ(e$.hydrophobic))})},positive:{"@desc":"same as basic -- ARG HIS LYS",map:()=>zZ(e$.basic)},sheet:{"@desc":"secondary structure-related",map:()=>$Z.struct.generator.atomGroups({"residue-test":$Z.core.flags.hasAny([$Z.struct.type.secondaryStructureFlags(["sheet"]),$Z.ammp("secondaryStructureFlags")])})},small:{"@desc":"ALA GLY SER",map:()=>zZ(e$.small)},surface:{"@desc":"amino and not buried",map:()=>$Z.struct.modifier.intersectBy({0:zZ(e$.amino),by:_Z(zZ(e$.buried))})},turn:{"@desc":"secondary structure-related",map:()=>$Z.struct.generator.atomGroups({"residue-test":$Z.core.flags.hasAny([$Z.struct.type.secondaryStructureFlags(["turn"]),$Z.ammp("secondaryStructureFlags")])})},alpha:{"@desc":"(*.CA)",map:()=>$Z.struct.generator.atomGroups({"atom-test":$Z.core.rel.eq([$Z.atomName("CA"),$Z.ammp("label_atom_id")])})},base:{"@desc":"(nucleic bases)"},backbone:{"@desc":"(*.C, *.CA, *.N, and all nucleic other than the bases themselves)",abbr:["mainchain"],map:()=>$Z.struct.combinator.merge([$Z.struct.modifier.intersectBy({0:$Z.struct.generator.atomGroups({"residue-test":$Z.core.set.has([$Z.core.type.set(e$.amino),$Z.ammp("label_comp_id")])}),by:$Z.struct.generator.atomGroups({"atom-test":$Z.core.set.has([$Z.core.type.set(n$),$Z.ammp("label_atom_id")])})}),$Z.struct.modifier.intersectBy({0:$Z.struct.generator.atomGroups({"residue-test":$Z.core.set.has([$Z.core.type.set(e$.nucleic),$Z.ammp("label_comp_id")])}),by:$Z.struct.generator.atomGroups({"atom-test":$Z.core.set.has([$Z.core.type.set(t$),$Z.ammp("label_atom_id")])})})])},sidechain:{"@desc":"((protein or nucleic) and not backbone)"},spine:{"@desc":"(*.CA, *.N, *.C for proteins; *.P, *.O3', *.O5', *.C3', *.C4', *.C5 for nucleic acids)"},leadatom:{"@desc":"(*.CA, *.P, and terminal *.O5')"},solvent:{"@desc":'PDB "HOH", water, also the connected set of H-O-H in any model'}},i$=FQ,a$=[{"@desc":"value comparisons","@examples":[],name:"=",abbr:["=="],type:yZ,rule:sZ.regexp(/\s*(LIKE|>=|<=|=|!=|>|<)\s*/i,1),map:(e,t,n)=>{let r;if("structure"===t?r=i$.core.flags.hasAny([i$.ammp("secondaryStructureFlags"),WZ(n)]):"structure"===n?r=i$.core.flags.hasAny([i$.ammp("secondaryStructureFlags"),WZ(t)]):void 0!==t.head?"core.type.regex"===t.head.name&&(r=i$.core.str.match([t,i$.core.type.str([n])])):void 0!==n.head?"core.type.regex"===n.head.name&&(r=i$.core.str.match([n,i$.core.type.str([t])])):"LIKE"===e.toUpperCase()&&(r=t.head?i$.core.str.match([i$.core.type.regex([`^${n}$`,"i"]),i$.core.type.str([t])]):i$.core.str.match([i$.core.type.regex([`^${t}$`,"i"]),i$.core.type.str([n])])),!r)switch(t.head&&(n=OZ(t,n)),n.head&&(t=OZ(n,t)),e){case"=":r=i$.core.rel.eq([t,n]);break;case"!=":r=i$.core.rel.neq([t,n]);break;case">":r=i$.core.rel.gr([t,n]);break;case"<":r=i$.core.rel.lt([t,n]);break;case">=":r=i$.core.rel.gre([t,n]);break;case"<=":r=i$.core.rel.lte([t,n]);break;default:throw new Error(`value operator '${e}' not supported`)}return i$.struct.generator.atomGroups({"atom-test":r})}}];function s$(e){const[t,n,r,o,i,a,s]=e[1],l={};i&&(l["chain-test"]=i$.core.rel.eq([i$.ammp("auth_asym_id"),i]));const c=[];t&&c.push(i$.core.rel.eq([i$.ammp("label_comp_id"),t])),n&&c.push(i$.core.logic.and([i$.core.rel.gre([i$.ammp("auth_seq_id"),n[0]]),i$.core.rel.lte([i$.ammp("auth_seq_id"),n[1]])])),r&&c.push(i$.core.rel.eq([i$.ammp("auth_seq_id"),r])),o&&c.push(i$.core.rel.eq([i$.ammp("pdbx_PDB_ins_code"),o])),c.length&&(l["residue-test"]=BZ(c));const u=[];return a&&u.push(i$.core.rel.eq([i$.ammp("auth_atom_id"),a])),s&&u.push(i$.core.rel.eq([i$.ammp("label_alt_id"),s])),u.length&&(l["atom-test"]=BZ(u)),i$.struct.generator.atomGroups(l)}const l$=sZ.createLanguage({Integer:()=>sZ.regexp(/-?[0-9]+/).map(Number).desc("integer"),Parens:function(e){return sZ.alt(e.Parens,e.Operator,e.Expression).wrap(sZ.regexp(/\(\s*/),sZ.regexp(/\s*\)/))},Expression:function(e){return sZ.alt(e.Keywords,e.AtomExpression.map(s$),e.Within.map((e=>i$.struct.modifier.includeSurroundings({0:e[1],radius:e[0]}))),e.ValueQuery,e.Element.map((e=>i$.struct.generator.atomGroups({"atom-test":i$.core.rel.eq([i$.acp("elementSymbol"),i$.struct.type.elementSymbol(e)])}))),e.Resname.map((e=>i$.struct.generator.atomGroups({"residue-test":i$.core.rel.eq([i$.ammp("label_comp_id"),e])}))))},Operator:function(e){return vZ(ZZ,sZ.alt(e.Parens,e.Expression))},AtomExpression:function(e){return sZ.seq(sZ.lookahead(e.AtomPrefix),sZ.seq(e.BracketedResname.or(sZ.of(null)),e.ResnoRange.or(sZ.of(null)),e.Resno.or(sZ.of(null)),e.Inscode.or(sZ.of(null)),e.Chainname.or(sZ.of(null)),e.Atomname.or(sZ.of(null)),e.Altloc.or(sZ.of(null)),e.Model.or(sZ.of(null)))).desc("expression")},AtomPrefix:()=>sZ.regexp(/[\[0-9:^%/.-]/).desc("atom-prefix"),Chainname:()=>sZ.regexp(/:([A-Za-z]{1,3})/,1).desc("chainname"),Model:()=>sZ.regexp(/\/([0-9]+)/,1).map(Number).desc("model"),Element:()=>sZ.regexp(/_([A-Za-z]{1,3})/,1).desc("element"),Atomname:()=>sZ.regexp(/\.([a-zA-Z0-9]{1,4})/,1).map(i$.atomName).desc("atomname"),Resname:()=>sZ.regexp(/[a-zA-Z0-9]{1,4}/).desc("resname"),Resno:e=>e.Integer.desc("resno"),Altloc:()=>sZ.regexp(/%([a-zA-Z0-9])/,1).desc("altloc"),Inscode:()=>sZ.regexp(/\^([a-zA-Z0-9])/,1).desc("inscode"),BracketedResname:()=>sZ.regexp(/\[([a-zA-Z0-9]{1,4})\]/,1).desc("bracketed-resname"),ResnoRange:e=>sZ.seq(e.Integer.skip(sZ.seq(sZ.optWhitespace,sZ.string("-"),sZ.optWhitespace)),e.Integer).desc("resno-range"),Within:e=>sZ.regexp(/within/i).skip(sZ.regexp(/\s*\(\s*/)).then(sZ.seq(e.Integer.skip(sZ.regexp(/\s*,\s*/)),e.Query)).skip(sZ.regexp(/\)/)),Keywords:()=>sZ.alt(...kZ(o$)).desc("keyword"),Query:function(e){return sZ.alt(e.Operator,e.Parens,e.Expression).trim(sZ.optWhitespace)},Number:function(){return sZ.regexp(/-?(0|[1-9][0-9]*)([.][0-9]+)?([eE][+-]?[0-9]+)?/).map(Number).desc("number")},String:function(){const e=MZ(KZ,o$,ZZ).sort(SZ).map(ch).join("|");return sZ.alt(sZ.regexp(new RegExp(`(?!(${e}))[A-Z0-9_]+`,"i")),sZ.regexp(/'((?:[^"\\]|\\.)*)'/,1),sZ.regexp(/"((?:[^"\\]|\\.)*)"/,1).map((e=>i$.core.type.regex([`^${e}$`,"i"])))).desc("string")},Value:function(e){return sZ.alt(e.Number,e.String)},ValueParens:function(e){return sZ.alt(e.ValueParens,e.ValueOperator,e.ValueExpressions).wrap(sZ.string("("),sZ.string(")"))},ValuePropertyNames:function(){return sZ.alt(...QZ(KZ,/LIKE|>=|<=|=|!=|>|<|\)|\s/i))},ValueOperator:function(e){return vZ(a$,sZ.alt(e.ValueParens,e.ValueExpressions))},ValueExpressions:function(e){return sZ.alt(e.Value,e.ValuePropertyNames)},ValueQuery:function(e){return sZ.alt(e.ValueOperator.map((e=>{if(e.head){if(e.head.name.startsWith("structure-query.generator"))return e}else if("string"===typeof e&&e.length<=4)return i$.struct.generator.atomGroups({"residue-test":i$.core.rel.eq([i$.ammp("label_comp_id"),e])});throw new Error(`values must be part of an comparison, value '${e}'`)})))}}),c$=FQ,u$=/[-+]?[0-9]*\.?[0-9]+/;function d$(e){return e.split("+").map((e=>e.replace(/^["']|["']$/g,"")))}function A$(e){if(e.includes("-")&&e.includes("+")){const t=e.split("+").map((e=>e.replace(/^["']|["']$/g,""))),n=[];return t.forEach((e=>{if(e.includes("-")&&!e.startsWith("-")){const[t,r]=e.split("-").map((e=>parseInt(e)));for(let e=t;e<=r;e++)n.push(e)}else if(e.includes("-")&&e.startsWith("-")&&e.match(/[0-9]+-[-0-9]+/)){const t=-parseInt(e.split("-")[1]);let r;r=e.includes("--")?-parseInt(e.split("-")[3]):parseInt(e.split("-")[2]);for(let e=t;e<=r;e++)n.push(e)}else e.includes("-")&&e.startsWith("-")&&e.match(/[0-9]+-[-0-9]+/),n.push(parseInt(e))})),n}if(e.includes("-")&&!e.includes("+")){const t=[];if(e.startsWith("-"))if(e.startsWith("-")&&e.match(/[0-9]+-[-0-9]+/)){const n=-parseInt(e.split("-")[1]);let r;r=e.includes("--")?-parseInt(e.split("-")[3]):parseInt(e.split("-")[2]);for(let e=n;e<=r;e++)t.push(e)}else e.startsWith("-")&&e.match(/[0-9]+-[-0-9]+/),t.push(parseInt(e));else{const[n,r]=e.split("-").map((e=>parseInt(e)));for(let e=n;e<=r;e++)t.push(e)}return t}return!e.includes("-")&&e.includes("+")?d$(e).map((e=>parseInt(e))):[parseInt(e)]}const f$={H:"helix",S:"beta",L:"none"};const p$={symbol:{"@desc":"chemical-symbol-list: list of 1- or 2-letter chemical symbols from the periodic table","@examples":["symbol O+N"],abbr:["e."],regex:/[a-zA-Z'"+]+/,map:function(e){return e.split("+").map(c$.struct.type.elementSymbol)},level:"atom-test",property:c$.acp("elementSymbol")},name:{"@desc":"atom-name-list: list of up to 4-letter codes for atoms in proteins or nucleic acids","@examples":["name CA+CB+CG+CD"],abbr:["n."],regex:/[a-zA-Z0-9'"+]+/,map:function(e){return e.split("+").map(c$.atomName)},level:"atom-test",property:c$.ammp("label_atom_id")},resn:{"@desc":"residue-name-list: list of 3-letter codes for amino acids or list of up to 2-letter codes for nucleic acids","@examples":["resn ASP+GLU+ASN+GLN","resn A+G"],abbr:["resname","r."],regex:/[a-zA-Z0-9'"+]+/,map:d$,level:"residue-test",property:c$.ammp("label_comp_id")},resi:{"@desc":"residue-identifier-list list of up to 4-digit residue numbers or residue-identifier-range","@examples":["resi 1+10+100+1000","resi 1-10"],abbr:["resident","residue","resid","i."],regex:/[0-9+-]+/,map:A$,level:"residue-test",property:c$.ammp("auth_seq_id")},alt:{"@desc":"alternate-conformation-identifier-list list of single letters","@examples":["alt A+B",'alt ""','alt ""+A'],abbr:[],regex:/[a-zA-Z0-9'"+]+/,map:d$,level:"atom-test",property:c$.ammp("label_alt_id")},chain:{"@desc":"chain-identifier-list list of single letters or sometimes numbers","@examples":["chain A"],abbr:["c."],regex:/[a-zA-Z0-9'"+]+/,map:d$,level:"chain-test",property:c$.ammp("auth_asym_id")},segi:{"@desc":"segment-identifier-list list of up to 4 letter identifiers","@examples":["segi lig"],abbr:["segid","s."],regex:/[a-zA-Z0-9'"+]+/,map:d$,level:"chain-test",property:c$.ammp("label_asym_id")},flag:{"@desc":"flag-number a single integer from 0 to 31","@examples":["flag 0"],isUnsupported:!0,abbr:["f."],regex:/[0-9]+/,map:e=>parseInt(e),level:"atom-test"},numeric_type:{"@desc":"type-number a single integer","@examples":["nt. 5"],isUnsupported:!0,abbr:["nt."],regex:/[0-9]+/,map:e=>parseInt(e),level:"atom-test"},text_type:{"@desc":"type-string a list of up to 4 letter codes","@examples":["text_type HA+HC"],isUnsupported:!0,abbr:["tt."],regex:/[a-zA-Z0-9'"+]+/,map:d$,level:"atom-test"},id:{"@desc":"external-index-number a single integer","@examples":["id 23"],regex:/[0-9+-]+/,map:A$,level:"atom-test",property:c$.ammp("id")},index:{"@desc":"internal-index-number a single integer","@examples":["index 11"],regex:/[0-9+-]+/,map:A$,level:"atom-test",property:c$.ammp("id")},ss:{"@desc":"secondary-structure-type list of single letters. Helical regions should be assigned H and sheet regions S. Loop regions can either be assigned L or be blank.","@examples":["ss H+S+L",'ss S+""'],abbr:[],regex:/[a-zA-Z'"+]+/,map:function(e){return{flags:c$.struct.type.secondaryStructureFlags(e.toUpperCase().split("+").map((e=>f$[e]||"none")))}},level:"residue-test",property:c$.ammp("secondaryStructureFlags")},b:{"@desc":"comparison-operator b-factor-value a real number","@examples":["b > 10"],isNumeric:!0,abbr:[],regex:u$,map:e=>parseFloat(e),level:"atom-test",property:c$.ammp("B_iso_or_equiv")},q:{"@desc":"comparison-operator occupancy-value a real number","@examples":["q <0.50"],isNumeric:!0,abbr:[],regex:u$,map:e=>parseFloat(e),level:"atom-test",property:c$.ammp("occupancy")},formal_charge:{"@desc":"comparison-operator formal charge-value an integer","@examples":["fc. = -1"],isNumeric:!0,abbr:["fc."],regex:u$,map:e=>parseFloat(e),level:"atom-test",property:c$.ammp("pdbx_formal_charge")},partial_charge:{"@desc":"comparison-operator partial charge-value a real number","@examples":["pc. > 1"],isUnsupported:!0,isNumeric:!0,abbr:["pc."],regex:u$,map:e=>parseFloat(e),level:"atom-test"},elem:{"@desc":'str  atomic element symbol string ("X" if undefined)',"@examples":["elem N"],regex:/[a-zA-Z0-9]{1,3}/,map:e=>c$.es(e),level:"atom-test",property:c$.acp("elementSymbol")}},h$=FQ,g$=[{"@desc":"Selects atoms that are not included in s1.","@examples":["NOT resn ALA","not (resi 42 or chain A)","!resi 42 or chain A"],name:"not",type:gZ,rule:sZ.alt(sZ.regexp(/NOT/i).skip(sZ.whitespace),sZ.string("!").skip(sZ.optWhitespace)),map:(e,t)=>_Z(t)},{"@desc":"Selects atoms included in both s1 and s2.","@examples":["chain A AND name CA"],name:"and",type:yZ,rule:bZ(/AND|&/i),map:(e,t,n)=>h$.struct.modifier.intersectBy({0:t,by:n})},{"@desc":"Selects atoms included in either s1 or s2.","@examples":["chain A OR chain B"],name:"or",type:yZ,rule:bZ(/OR|\|/i),map:(e,t,n)=>h$.struct.combinator.merge([t,n])},{"@desc":"Selects atoms in s1 whose identifiers name, resi, resn, chain and segi all match atoms in s2.","@examples":["chain A IN chain B"],name:"in",type:yZ,rule:bZ(/IN/i),map:(e,t,n)=>h$.struct.filter.withSameAtomProperties({0:t,source:n,property:h$.core.type.compositeKey([h$.ammp("label_atom_id"),h$.ammp("label_seq_id"),h$.ammp("label_comp_id"),h$.ammp("auth_asym_id"),h$.ammp("label_asym_id")])})},{"@desc":"Selects atoms in s1 whose identifiers name and resi match atoms in s2.","@examples":["chain A LIKE chain B"],name:"like",type:yZ,rule:bZ(/LIKE|l\./i),map:(e,t,n)=>h$.struct.filter.withSameAtomProperties({0:t,source:n,property:h$.core.type.compositeKey([h$.ammp("label_atom_id"),h$.ammp("label_seq_id")])})},{"@desc":"Selects all atoms whose van der Waals radii are separated from the van der Waals radii of s1 by a minimum of X Angstroms.","@examples":["solvent GAP 2"],name:"gap",type:mZ,rule:IZ(/GAP\s+([-+]?[0-9]*\.?[0-9]+)/i,1).map((e=>parseFloat(e))),map:(e,t)=>h$.struct.filter.within({0:h$.struct.generator.all(),target:t,"atom-radius":h$.acp("vdw"),"max-radius":e,invert:!0})},{"@desc":"Selects atoms with centers within X Angstroms of the center of any atom in s1.","@examples":["resname LIG AROUND 1"],name:"around",abbr:["a."],type:mZ,rule:IZ(/(AROUND|a\.)\s+([-+]?[0-9]*\.?[0-9]+)/i,2).map((e=>parseFloat(e))),map:(e,t)=>h$.struct.modifier.exceptBy({0:h$.struct.filter.within({0:h$.struct.generator.all(),target:t,"max-radius":e}),by:t})},{"@desc":"Expands s1 by all atoms within X Angstroms of the center of any atom in s1.","@examples":["chain A EXPAND 3"],name:"expand",abbr:["x."],type:mZ,rule:IZ(/(EXPAND|x\.)\s+([-+]?[0-9]*\.?[0-9]+)/i,2).map((e=>parseFloat(e))),map:(e,t)=>h$.struct.modifier.includeSurroundings({0:t,radius:e})},{"@desc":"Selects atoms in s1 that are within X Angstroms of any atom in s2.","@examples":["chain A WITHIN 3 OF chain B"],name:"within",abbr:["w."],type:yZ,rule:EZ("WITHIN","w."),map:(e,t,n)=>h$.struct.filter.within({0:t,target:n,"max-radius":e})},{"@desc":"Same as within, but excludes s2 from the selection (and thus is identical to s1 and s2 around X).","@examples":["chain A NEAR_TO 3 OF chain B"],name:"near_to",abbr:["nto."],type:yZ,rule:EZ("NEAR_TO","nto."),map:(e,t,n)=>h$.struct.modifier.exceptBy({0:h$.struct.filter.within({0:t,target:n,"max-radius":e}),by:n})},{"@desc":"Selects atoms in s1 that are at least X Anstroms away from s2.","@examples":["solvent BEYOND 2 OF chain A"],name:"beyond",abbr:["be."],type:yZ,rule:EZ("BEYOND","be."),map:(e,t,n)=>h$.struct.modifier.exceptBy({0:h$.struct.filter.within({0:t,target:n,"max-radius":e,invert:!0}),by:n})},{"@desc":"Expands selection to complete residues.","@examples":["BYRESIDUE name N"],name:"byresidue",abbr:["byresi","byres","br."],type:gZ,rule:CZ(/BYRESIDUE|byresi|byres|br\./i),map:(e,t)=>PZ(h$.struct.modifier.expandProperty({0:h$.struct.modifier.union({0:t}),property:h$.ammp("residueKey")}))},{"@desc":"Completely selects all alpha carbons in all residues covered by a selection.","@examples":["BYCALPHA chain A"],name:"bycalpha",abbr:["bca."],type:gZ,rule:CZ(/BYCALPHA|bca\./i),map:(e,t)=>h$.struct.generator.queryInSelection({0:h$.struct.modifier.expandProperty({0:h$.struct.modifier.union({0:t}),property:h$.ammp("residueKey")}),query:h$.struct.generator.atomGroups({"atom-test":h$.core.rel.eq([h$.atomName("CA"),h$.ammp("label_atom_id")])})})},{"@desc":"Expands selection to complete molecules.","@examples":["BYMOLECULE resi 20-30"],name:"bymolecule",isUnsupported:!0,abbr:["bymol","bm."],type:gZ,rule:CZ(/BYMOLECULE|bymol|bm\./i),map:(e,t)=>PZ(h$.struct.modifier.expandProperty({0:h$.struct.modifier.union({0:t}),property:h$.atp("connectedComponentKey")}))},{"@desc":"Expands selection to complete fragments.","@examples":["BYFRAGMENT resi 10"],name:"byfragment",abbr:["byfrag","bf."],isUnsupported:!0,type:gZ,rule:CZ(/BYFRAGMENT|byfrag|bf\./i),map:(e,t)=>[e,t]},{"@desc":"Expands selection to complete segments.","@examples":["BYSEGMENT resn CYS"],name:"bysegment",abbr:["bysegi","byseg","bs."],type:gZ,rule:CZ(/BYSEGMENT|bysegi|byseg|bs\./i),map:(e,t)=>PZ(h$.struct.modifier.expandProperty({0:h$.struct.modifier.union({0:t}),property:h$.ammp("chainKey")}))},{"@desc":"Expands selection to complete objects.","@examples":["BYOBJECT chain A"],name:"byobject",abbr:["byobj","bo."],isUnsupported:!0,type:gZ,rule:CZ(/BYOBJECT|byobj|bo\./i),map:(e,t)=>[e,t]},{"@desc":"Expands selection to unit cell.","@examples":["BYCELL chain A"],name:"bycell",isUnsupported:!0,type:gZ,rule:CZ(/BYCELL/i),map:(e,t)=>[e,t]},{"@desc":"All rings of size \u2264 7 which have at least one atom in s1.","@examples":["BYRING resn HEM"],name:"byring",type:gZ,rule:CZ(/BYRING/i),map:(e,t)=>PZ(h$.struct.modifier.intersectBy({0:h$.struct.filter.pick({0:h$.struct.generator.rings(),test:h$.core.logic.and([h$.core.rel.lte([h$.struct.atomSet.atomCount(),7]),h$.core.rel.gr([h$.struct.atomSet.countQuery([t]),1])])}),by:t}))},{"@desc":"Selects atoms directly bonded to s1, excludes s1.","@examples":["NEIGHBOR resn CYS"],name:"neighbor",type:gZ,abbr:["nbr."],rule:CZ(/NEIGHBOR|nbr\./i),map:(e,t)=>h$.struct.modifier.exceptBy({0:PZ(h$.struct.modifier.includeConnected({0:h$.struct.modifier.union({0:t}),"bond-test":!0})),by:t})},{"@desc":"Selects atoms directly bonded to s1, may include s1.","@examples":["BOUND_TO name CA"],name:"bound_to",abbr:["bto."],type:gZ,rule:CZ(/BOUND_TO|bto\./i),map:(e,t)=>PZ(h$.struct.modifier.includeConnected({0:h$.struct.modifier.union({0:t})}))},{"@desc":"Extends s1 by X bonds connected to atoms in s1.","@examples":["resname LIG EXTEND 3"],name:"extend",abbr:["xt."],type:mZ,rule:IZ(/(EXTEND|xt\.)\s+([0-9]+)/i,2).map((e=>parseInt(e))),map:(e,t)=>PZ(h$.struct.modifier.includeConnected({0:h$.struct.modifier.union({0:t}),"bond-test":!0,"layer-count":e}))}],m$=FQ,y$={nucleic:["A","C","T","G","U","DA","DC","DT","DG","DU"],protein:["ALA","ARG","ASN","ASP","CYS","CYX","GLN","GLU","GLY","HIS","HID","HIE","HIP","ILE","LEU","LYS","MET","MSE","PHE","PRO","SER","THR","TRP","TYR","VAL"],solvent:["HOH","WAT","H20","TIP","SOL"]},v$=["P","O3'","O5'","C5'","C4'","C3'","OP1","OP2","O3*","O5*","C5*","C4*","C3*","C2'","C1'","O4'","O2'"],b$=["C","N","CA","O"];function C$(){return m$.struct.combinator.merge([m$.struct.modifier.intersectBy({0:m$.struct.generator.atomGroups({"residue-test":m$.core.set.has([m$.core.type.set(y$.protein),m$.ammp("label_comp_id")])}),by:m$.struct.generator.atomGroups({"atom-test":m$.core.set.has([m$.core.type.set(b$),m$.ammp("label_atom_id")])})}),m$.struct.modifier.intersectBy({0:m$.struct.generator.atomGroups({"residue-test":m$.core.set.has([m$.core.type.set(y$.nucleic),m$.ammp("label_comp_id")])}),by:m$.struct.generator.atomGroups({"atom-test":m$.core.set.has([m$.core.type.set(v$),m$.ammp("label_atom_id")])})})])}const I$={all:{"@desc":"All atoms currently loaded into PyMOL",abbr:["*"],map:()=>m$.struct.generator.all()},none:{"@desc":"No atoms (empty selection)",map:()=>m$.struct.generator.empty()},hydrogens:{"@desc":"All hydrogen atoms currently loaded into PyMOL",abbr:["hydro","h."],map:()=>m$.struct.generator.atomGroups({"atom-test":m$.core.rel.eq([m$.acp("elementSymbol"),m$.es("H")])})},hetatm:{"@desc":"All atoms loaded from Protein Data Bank HETATM records",abbr:["het"],map:()=>m$.struct.generator.atomGroups({"atom-test":m$.core.rel.eq([m$.ammp("isHet"),!0])})},visible:{"@desc":"All atoms in enabled objects with at least one visible representation",abbr:["v."]},polymer:{"@desc":"All atoms on the polymer (not het). Finds atoms with residue identifiers matching a known polymer, such a peptide and DNA.",abbr:["pol."],map:()=>m$.struct.generator.atomGroups({"residue-test":m$.core.set.has([m$.core.type.set(y$.nucleic.concat(y$.protein)),m$.ammp("label_comp_id")])})},sidechain:{"@desc":"Polymer non-backbone atoms (new in PyMOL 1.6.1)",abbr:["sc."],map:()=>m$.struct.modifier.exceptBy({0:m$.struct.generator.atomGroups({"residue-test":m$.core.set.has([m$.core.type.set(y$.nucleic.concat(y$.protein)),m$.ammp("label_comp_id")])}),by:C$()})},present:{"@desc":"All atoms with defined coordinates in the current state (used in creating movies)",abbr:["pr."]},center:{"@desc":"Pseudo-atom at the center of the scene"},origin:{"@desc":"Pseudo-atom at the origin of rotation"},enabled:{"@desc":"All enabled objects or selections from the object list."},masked:{"@desc":"All masked atoms.",abbr:["msk."]},protected:{"@desc":"All protected atoms.",abbr:["pr."]},bonded:{"@desc":"All bonded atoms",map:()=>m$.struct.generator.atomGroups({"atom-test":m$.core.rel.gr([m$.struct.atomProperty.core.bondCount({flags:m$.struct.type.bondFlags(["covalent","metallic","sulfide"])}),0])})},donors:{"@desc":"All hydrogen bond donor atoms.",abbr:["don."]},acceptors:{"@desc":"All hydrogen bond acceptor atoms.",abbr:["acc."]},fixed:{"@desc":"All fixed atoms.",abbr:["fxd."]},restrained:{"@desc":"All restrained atoms.",abbr:["rst."]},organic:{"@desc":"All atoms in non-polymer organic compounds (e.g. ligands, buffers). Finds carbon-containing molecules that do not match known polymers.",abbr:["org."],map:()=>PZ(m$.struct.modifier.expandProperty({0:m$.struct.modifier.union([m$.struct.generator.queryInSelection({0:m$.struct.generator.atomGroups({"residue-test":m$.core.logic.not([m$.core.set.has([m$.core.type.set(y$.nucleic.concat(y$.protein)),m$.ammp("label_comp_id")])])}),query:m$.struct.generator.atomGroups({"atom-test":m$.core.rel.eq([m$.es("C"),m$.acp("elementSymbol")])})})]),property:m$.ammp("residueKey")}))},inorganic:{"@desc":"All non-polymer inorganic atoms/ions. Finds atoms in molecules that do not contain carbon and do not match any known solvent residues.",abbr:["ino."],map:()=>PZ(m$.struct.modifier.expandProperty({0:m$.struct.modifier.union([m$.struct.filter.pick({0:m$.struct.generator.atomGroups({"residue-test":m$.core.logic.not([m$.core.set.has([m$.core.type.set(y$.nucleic.concat(y$.protein).concat(y$.solvent)),m$.ammp("label_comp_id")])]),"group-by":m$.ammp("residueKey")}),test:m$.core.logic.not([m$.core.set.has([m$.struct.atomSet.propertySet([m$.acp("elementSymbol")]),m$.es("C")])])})]),property:m$.ammp("residueKey")}))},solvent:{"@desc":"All water molecules. The hardcoded solvent residue identifiers are currently: HOH, WAT, H20, TIP, SOL.",abbr:["sol."],map:()=>m$.struct.generator.atomGroups({"residue-test":m$.core.set.has([m$.core.type.set(y$.solvent),m$.ammp("label_comp_id")])})},guide:{"@desc":"All protein CA and nucleic acid C4*/C4",map:()=>m$.struct.combinator.merge([m$.struct.generator.atomGroups({"atom-test":m$.core.rel.eq([m$.atomName("CA"),m$.ammp("label_atom_id")]),"residue-test":m$.core.set.has([m$.core.type.set(y$.protein),m$.ammp("label_comp_id")])}),m$.struct.generator.atomGroups({"atom-test":m$.core.set.has([RZ(["C4*","C4'"]),m$.ammp("label_atom_id")]),"residue-test":m$.core.set.has([m$.core.type.set(y$.nucleic),m$.ammp("label_comp_id")])})])},metals:{"@desc":"All metal atoms (new in PyMOL 1.6.1)"},backbone:{"@desc":"Polymer backbone atoms (new in PyMOL 1.6.1)",abbr:["bb."],map:()=>C$()},"polymer.protein":{"@desc":"Protein (New in PyMOL 2.1)",abbr:["polymer.protein"],map:()=>m$.struct.generator.atomGroups({"residue-test":m$.core.set.has([m$.core.type.set(y$.protein),m$.ammp("label_comp_id")])})},"polymer.nucleic":{"@desc":"Nucleic Acid (New in PyMOL 2.1)",abbr:["polymer.nucleic"],map:()=>m$.struct.generator.atomGroups({"residue-test":m$.core.set.has([m$.core.type.set(y$.nucleic),m$.ammp("label_comp_id")])})}},E$=FQ,x$=function(e){const t={};return Object.keys(e).sort(SZ).forEach((n=>{const r=e[n],o=xZ(`property '${n}' not supported`),i=sZ.regexp(r.regex).map((e=>(r.isUnsupported&&o(),wZ(r.property,r.map(e)))));r.isNumeric||(t[n]=i)})),t}(p$),B$=sZ.string("/");function w$(e){return e.or(sZ.of(null))}function _$(e){const t={},n={};for(const r in e){const t=p$[r];if(!t)throw new Error(`property '${r}' not supported, value '${e[r]}'`);null!==e[r]&&(n[t.level]||(n[t.level]=[]),n[t.level].push(e[r]))}for(const r in n)t[r]=BZ(n[r]);return E$.struct.generator.atomGroups(t)}const S$=sZ.createLanguage({Parens:function(e){return sZ.alt(e.Parens,e.Operator,e.Expression).wrap(sZ.string("("),sZ.string(")"))},Expression:function(e){return sZ.alt(e.Keywords,e.AtomSelectionMacro.map(_$),e.NamedAtomProperties,e.Pepseq,e.Rep,e.Object)},AtomSelectionMacro:function(e){return sZ.alt(B$.then(sZ.alt(sZ.seq(w$(e.ObjectProperty).skip(B$),w$(x$.segi).skip(B$),w$(x$.chain).skip(B$),w$(x$.resi).skip(B$),w$(x$.name)).map((e=>({object:e[0],segi:e[1],chain:e[2],resi:e[3],name:e[4]}))),sZ.seq(w$(e.ObjectProperty).skip(B$),w$(x$.segi).skip(B$),w$(x$.chain).skip(B$),w$(x$.resi)).map((e=>({object:e[0],segi:e[1],chain:e[2],resi:e[3]}))),sZ.seq(w$(e.ObjectProperty).skip(B$),w$(x$.segi).skip(B$),w$(x$.chain)).map((e=>({object:e[0],segi:e[1],chain:e[2]}))),sZ.seq(w$(e.ObjectProperty).skip(B$),w$(x$.segi)).map((e=>({object:e[0],segi:e[1]}))),sZ.seq(w$(e.ObjectProperty)).map((e=>({object:e[0]}))))),sZ.alt(sZ.seq(w$(e.ObjectProperty).skip(B$),w$(x$.segi).skip(B$),w$(x$.chain).skip(B$),w$(x$.resi).skip(B$),w$(x$.name)).map((e=>({object:e[0],segi:e[1],chain:e[2],resi:e[3],name:e[4]}))),sZ.seq(w$(x$.segi).skip(B$),w$(x$.chain).skip(B$),w$(x$.resi).skip(B$),w$(x$.name)).map((e=>({segi:e[0],chain:e[1],resi:e[2],name:e[3]}))),sZ.seq(w$(x$.chain).skip(B$),w$(x$.resi).skip(B$),w$(x$.name)).map((e=>({chain:e[0],resi:e[1],name:e[2]}))),sZ.seq(w$(x$.resi).skip(B$),w$(x$.name)).map((e=>({resi:e[0],name:e[1]})))))},NamedAtomProperties:function(){return sZ.alt(...TZ(p$))},Keywords:()=>sZ.alt(...kZ(I$)),ObjectProperty:()=>{const e=MZ(p$,I$,g$).sort(SZ).map(ch).join("|");return sZ.regexp(new RegExp(`(?!(${e}))[A-Z0-9_]+`,"i"))},Object:e=>e.ObjectProperty.notFollowedBy(B$).map((e=>{throw new Error(`property 'object' not supported, value '${e}'`)})),Pepseq:()=>sZ.regexp(/(PEPSEQ|ps\.)\s+([a-z]+)/i,2).map(xZ("operator 'pepseq' not supported")),Rep:()=>sZ.regexp(/REP\s+(lines|spheres|mesh|ribbon|cartoon|sticks|dots|surface|labels|extent|nonbonded|nb_spheres|slice|extent|slice|dashes|angles|dihedrals|cgo|cell|callback|everything)/i,1).map(xZ("operator 'rep' not supported")),Operator:function(e){return vZ(g$,sZ.alt(e.Parens,e.Expression,e.Operator))},Query:function(e){return sZ.alt(e.Operator,e.Parens,e.Expression).trim(sZ.optWhitespace)}}),D$=FQ,T$=/[-+]?[0-9]*\.?[0-9]+/,k$=/[+]?[0-9]+/,Q$=/[-+]?[0-9]+/;function M$(e){return e}const R$={T:"turn",E:"sheet",B:"strand",H:"alpha",G:"3-10",I:"pi",C:"none"};function P$(e){return D$.struct.type.secondaryStructureFlags([R$[e.toUpperCase()]||"none"])}const O$={name:{"@desc":"str    atom name","@examples":["name CA"],regex:/[a-zA-Z0-9]+/,map:D$.atomName,level:"atom-test",property:D$.ammp("label_atom_id")},type:{"@desc":"str    atom type","@examples":["type C3"],isUnsupported:!0,regex:/[a-zA-Z0-9]+/,map:M$,level:"atom-test"},index:{"@desc":"num    the atom number, starting at 0","@examples":["index 10"],isNumeric:!0,regex:k$,map:e=>parseInt(e)-1,level:"atom-test",property:D$.ammp("id")},serial:{"@desc":"num    the atom number, starting at 1","@examples":["serial 11"],isNumeric:!0,regex:k$,map:e=>parseInt(e),level:"atom-test",property:D$.ammp("id")},atomicnumber:{"@desc":"num    atomic number (0 if undefined)","@examples":["atomicnumber 13"],isNumeric:!0,regex:k$,map:e=>parseInt(e),level:"atom-test",property:D$.acp("atomicNumber")},element:{"@desc":'str  atomic element symbol string ("X" if undefined)',"@examples":["element N"],regex:/[a-zA-Z0-9]{1,3}/,map:e=>D$.es(e),level:"atom-test",property:D$.acp("elementSymbol")},altloc:{"@desc":"str  alternate location/conformation identifier","@examples":["altloc C"],regex:/[a-zA-Z0-9]+/,map:M$,level:"atom-test",property:D$.ammp("label_alt_id")},chain:{"@desc":"str  the one-character chain identifier","@examples":["chain A"],regex:/[a-zA-Z0-9]+/,map:M$,level:"residue-test",property:D$.ammp("auth_asym_id")},residue:{"@desc":"num  a set of connected atoms with the same residue number","@examples":["residue < 11","residue 11"],isNumeric:!0,regex:Q$,map:e=>parseInt(e),level:"residue-test",property:D$.ammp("auth_seq_id")},fragment:{"@desc":"num  a set of connected residues","@examples":["fragment 42"],isUnsupported:!0,isNumeric:!0,regex:Q$,map:e=>parseInt(e),level:"residue-test"},pfrag:{"@desc":"num  a set of connected protein residues","@examples":["pfrag 42"],isUnsupported:!0,isNumeric:!0,regex:Q$,map:e=>parseInt(e),level:"residue-test"},nfrag:{"@desc":"num  a set of connected nucleic residues","@examples":["nfrag 42"],isUnsupported:!0,isNumeric:!0,regex:Q$,map:e=>parseInt(e),level:"residue-test"},sequence:{"@desc":"str  a sequence given by one letter names","@examples":["sequence PGATTACA"],isUnsupported:!0,regex:/[a-zA-Z0-9]+/,map:M$,level:"residue-test"},numbonds:{"@desc":"num  number of bonds","@examples":["numbonds = 2","numbonds >= 3"],isNumeric:!0,regex:k$,map:e=>parseInt(e),level:"atom-test",property:D$.acp("bondCount")},resname:{"@desc":"str  residue name","@examples":["resname ALA"],regex:/[a-zA-Z0-9]+/,map:M$,level:"residue-test",property:D$.ammp("auth_comp_id")},resid:{"@desc":"num  residue id","@examples":["resid 42"],isNumeric:!0,regex:Q$,map:e=>parseInt(e),level:"residue-test",property:D$.ammp("auth_seq_id")},segname:{"@desc":"str  segment name","@examples":["segname B"],regex:/[a-zA-Z0-9]+/,map:M$,level:"residue-test",property:D$.ammp("label_asym_id")},x:{"@desc":"float  x coordinate","@examples":["x 42"],isNumeric:!0,regex:T$,map:e=>parseFloat(e),level:"atom-test",property:D$.acp("x")},y:{"@desc":"float  y coordinate","@examples":["y > 1.7"],isNumeric:!0,regex:T$,map:e=>parseFloat(e),level:"atom-test",property:D$.acp("y")},z:{"@desc":"float  z coordinate","@examples":["z < 11","z > -21"],isNumeric:!0,regex:T$,map:e=>parseFloat(e),level:"atom-test",property:D$.acp("z")},radius:{"@desc":"float  atomic radius","@examples":["radius > 1.3"],isNumeric:!0,regex:T$,map:e=>parseFloat(e),level:"atom-test",property:D$.acp("vdw")},mass:{"@desc":"float  atomic mass","@examples":["mass > 2"],isNumeric:!0,regex:T$,map:e=>parseFloat(e),level:"atom-test",property:D$.acp("mass")},charge:{"@desc":"float  atomic charge","@examples":["charge > 0","charge 1"],isNumeric:!0,regex:T$,map:e=>parseFloat(e),level:"atom-test",property:D$.ammp("pdbx_formal_charge")},beta:{"@desc":"float  temperature factor","@examples":["beta < 20","beta > 35"],isNumeric:!0,regex:T$,map:e=>parseFloat(e),level:"atom-test",property:D$.ammp("B_iso_or_equiv")},occupancy:{"@desc":"float  occupancy","@examples":["occupancy 1","occupancy < 1"],isNumeric:!0,regex:T$,map:e=>parseFloat(e),level:"atom-test",property:D$.ammp("occupancy")},user:{"@desc":"float  time-varying user-specified value","@examples":["user < 0.1"],isUnsupported:!0,isNumeric:!0,regex:T$,map:e=>parseFloat(e),level:"atom-test"},rasmol:{"@desc":"str  translates Rasmol selection string to VMD","@examples":["rasmol 'all'"],isUnsupported:!0,regex:/[^']*/,map:M$,level:"atom-test"},structure:{"@desc":"str  single letter name for the secondary structure","@examples":["structure H","structure H E"],regex:/T|E|B|H|G|I|C/i,map:P$,level:"atom-test",property:D$.ammp("secondaryStructureFlags")},phi:{"@desc":"float  phi backbone conformational angles","@examples":["phi < 160"],isUnsupported:!0,isNumeric:!0,regex:T$,map:e=>parseFloat(e),level:"residue-test"},psi:{"@desc":"float  psi backbone conformational angles","@examples":["psi < 160"],isUnsupported:!0,isNumeric:!0,regex:T$,map:e=>parseFloat(e),level:"residue-test"},ufx:{"@desc":"num  force to apply in the x coordinate","@examples":["ufx 1"],isUnsupported:!0,isNumeric:!0,regex:T$,map:e=>parseInt(e),level:"atom-test"},ufy:{"@desc":"num  force to apply in the y coordinate","@examples":["ufy 1"],isUnsupported:!0,isNumeric:!0,regex:T$,map:e=>parseInt(e),level:"atom-test"},ufz:{"@desc":"num  force to apply in the z coordinate","@examples":["ufz 1"],isUnsupported:!0,isNumeric:!0,regex:T$,map:e=>parseInt(e),level:"atom-test"}},F$=FQ,N$=Object.keys(O$).sort(SZ).filter((e=>!O$[e].isUnsupported)).join("|"),L$=[{"@desc":"Selects atoms that are not included in s1.","@examples":["not protein"],name:"not",type:gZ,rule:sZ.regexp(/NOT/i).skip(sZ.whitespace),map:(e,t)=>_Z(t)},{"@desc":"Selects atoms within a specified distance of a selection","@examples":["within 5 of name FE"],name:"within",type:gZ,rule:CZ(/WITHIN\s+([-+]?[0-9]*\.?[0-9]+)\s+OF/i,1).map((e=>parseFloat(e))),map:(e,t)=>F$.struct.modifier.includeSurroundings({0:t,radius:e})},{"@desc":"Exclusive within, equivalent to (within 3 of X) and not X","@examples":["exwithin 10 of resname HEM"],name:"exwithin",type:gZ,rule:CZ(/EXWITHIN\s+([-+]?[0-9]*\.?[0-9]+)\s+OF/i,1).map((e=>parseFloat(e))),map:(e,t)=>F$.struct.modifier.exceptBy({0:F$.struct.modifier.includeSurroundings({0:t,radius:e}),by:t})},{"@desc":"Selects atoms which have the same keyword as the atoms in a given selection","@examples":["same resid as name FE"],name:"same",type:gZ,rule:CZ(new RegExp(`SAME\\s+(${N$})\\s+AS`,"i"),1).map((e=>O$[e].property)),map:(e,t)=>F$.struct.filter.withSameAtomProperties({0:F$.struct.generator.all(),source:t,property:e})},{"@desc":"Selects atoms included in both s1 and s2.","@examples":["backbone and protein"],name:"and",type:yZ,rule:sZ.alt(bZ(/AND/i),sZ.whitespace),map:(e,t,n)=>F$.struct.modifier.intersectBy({0:t,by:n})},{"@desc":"Selects atoms included in either s1 or s2.","@examples":["water or protein"],name:"or",type:yZ,rule:bZ(/OR/i),map:(e,t,n)=>F$.struct.combinator.merge([t,n])}],U$=FQ;function G$(){return U$.struct.filter.pick({0:U$.struct.generator.atomGroups({"group-by":U$.ammp("residueKey")}),test:U$.core.set.isSubset([RZ(["C","N","CA","O"]),U$.ammpSet("label_atom_id")])})}function j$(){return U$.struct.filter.pick({0:U$.struct.generator.atomGroups({"group-by":U$.ammp("residueKey")}),test:U$.core.logic.and([U$.core.set.isSubset([RZ(["P"]),U$.ammpSet("label_atom_id")]),U$.core.logic.or([U$.core.set.isSubset([RZ(["O3'","C3'","C4'","C5'","O5'"]),U$.ammpSet("label_atom_id")]),U$.core.set.isSubset([RZ(["O3*","C3*","C4*","C5*","O5*"]),U$.ammpSet("label_atom_id")])])])})}function z$(){return U$.struct.combinator.merge([U$.struct.generator.queryInSelection({0:G$(),query:U$.struct.generator.atomGroups({"atom-test":U$.core.set.has([RZ(V$.protein),U$.ammp("label_atom_id")])})}),U$.struct.generator.queryInSelection({0:j$(),query:U$.struct.generator.atomGroups({"atom-test":U$.core.set.has([RZ(V$.nucleic),U$.ammp("label_atom_id")])})})])}function H$(e){return U$.struct.generator.atomGroups({"residue-test":U$.core.flags.hasAll([U$.ammp("secondaryStructureFlags"),U$.struct.type.secondaryStructureFlags(e)])})}const V$={nucleic:["P","O3'","O5'","C5'","C4'","C3'","OP1","OP2","O3*","O5*","C5*","C4*","C3*"],protein:["C","N","CA","O"]},q$={acidic:["ASP","GLU"],aliphatic:["ALA","GLY","ILE","LEU","VAL"],aromatic:["HIS","PHE","TRP","TYR"],at:["ADA","A","THY","T"],basic:["ARG","HIS","LYS"],buried:["ALA","LEU","VAL","ILE","PHE","CYS","MET","TRP"],cg:["CYT","C","GUA","G"],cyclic:["HIS","PHE","PRO","TRP","TYR"],hydrophobic:["ALA","LEU","VAL","ILE","PRO","PHE","MET","TRP"],medium:["VAL","THR","ASP","ASN","PRO","CYS","ASX","PCA","HYP"],neutral:["VAL","PHE","GLN","TYR","HIS","CYS","MET","TRP","ASX","GLX","PCA","HYP"],purine:["ADE","A","GUA","G"],pyrimidine:["CYT","C","THY","T","URI","U"],small:["ALA","GLY","SER"],water:["H2O","HH0","OHH","HOH","OH2","SOL","WAT","TIP","TIP2","TIP3","TIP4"]},Y$={all:{"@desc":"everything",map:()=>U$.struct.generator.all()},none:{"@desc":"nothing",map:()=>U$.struct.generator.empty()},protein:{"@desc":"a residue with atoms named C, N, CA, and O",map:()=>G$()},nucleic:{"@desc":"a residue with atoms named P, O1P, O2P and either O3', C3', C4', C5', O5' or O3*, C3*, C4*, C5*, O5*. This definition assumes that the base is phosphorylated, an assumption which will be corrected in the future.",map:()=>j$()},backbone:{"@desc":"the C, N, CA, and O atoms of a protein and the equivalent atoms in a nucleic acid.",map:()=>z$()},sidechain:{"@desc":"non-backbone atoms and bonds",map:()=>_Z(z$())},water:{"@desc":"all atoms with the resname H2O, HH0, OHH, HOH, OH2, SOL, WAT, TIP, TIP2, TIP3 or TIP4",abbr:["waters"],map:()=>zZ(q$.water)},at:{"@desc":"residues named ADA A THY T",map:()=>zZ(q$.at)},acidic:{"@desc":"residues named ASP GLU",map:()=>zZ(q$.acidic)},acyclic:{"@desc":'"protein and not cyclic"',map:()=>U$.struct.modifier.intersectBy({0:G$(),by:_Z(zZ(q$.cyclic))})},aliphatic:{"@desc":"residues named ALA GLY ILE LEU VAL",map:()=>zZ(q$.aliphatic)},alpha:{"@desc":"atom's residue is an alpha helix",map:()=>H$(["alpha"])},amino:{"@desc":"a residue with atoms named C, N, CA, and O",map:()=>G$()},aromatic:{"@desc":"residues named HIS PHE TRP TYR",map:()=>zZ(q$.aromatic)},basic:{"@desc":"residues named ARG HIS LYS",map:()=>zZ(q$.basic)},bonded:{"@desc":"atoms for which numbonds > 0",map:()=>PZ(U$.struct.filter.pick({0:U$.struct.modifier.includeConnected({0:U$.struct.generator.all(),"bond-test":U$.core.flags.hasAny([U$.struct.bondProperty.flags(),U$.struct.type.bondFlags(["covalent","metallic","sulfide"])])}),test:U$.core.rel.gr([U$.struct.atomSet.atomCount(),1])}))},buried:{"@desc":"residues named ALA LEU VAL ILE PHE CYS MET TRP",map:()=>zZ(q$.buried)},cg:{"@desc":"residues named CYT C GUA G",map:()=>zZ(q$.cg)},charged:{"@desc":'"basic or acidic"',map:()=>zZ(q$.basic.concat(q$.acidic))},cyclic:{"@desc":"residues named HIS PHE PRO TRP TYR",map:()=>zZ(q$.cyclic)},hetero:{"@desc":'"not (protein or nucleic)"',map:()=>_Z(U$.struct.combinator.merge([G$(),j$()]))},hydrogen:{"@desc":'name "[0-9]?H.*"',map:()=>U$.struct.generator.atomGroups({"atom-test":U$.core.str.match([U$.core.type.regex(["^[0-9]?[H].*$","i"]),U$.core.type.str([U$.ammp("label_atom_id")])])})},large:{"@desc":'"protein and not (small or medium)"',map:()=>U$.struct.modifier.intersectBy({0:G$(),by:_Z(zZ(q$.small.concat(q$.medium)))})},medium:{"@desc":"residues named VAL THR ASP ASN PRO CYS ASX PCA HYP",map:()=>zZ(q$.medium)},neutral:{"@desc":"residues named VAL PHE GLN TYR HIS CYS MET TRP ASX GLX PCA HYP",map:()=>zZ(q$.neutral)},hydrophobic:{"@desc":"hydrophobic resname ALA LEU VAL ILE PRO PHE MET TRP",map:()=>zZ(q$.hydrophobic)},polar:{"@desc":'"protein and not hydrophobic"',map:()=>U$.struct.modifier.intersectBy({0:G$(),by:_Z(zZ(q$.hydrophobic))})},purine:{"@desc":"residues named ADE A GUA G",map:()=>zZ(q$.purine)},pyrimidine:{"@desc":"residues named CYT C THY T URI U",map:()=>zZ(q$.pyrimidine)},small:{"@desc":"residues named ALA GLY SER",map:()=>zZ(q$.small)},surface:{"@desc":'"protein and not buried"',map:()=>U$.struct.modifier.intersectBy({0:G$(),by:_Z(zZ(q$.buried))})},alpha_helix:{"@desc":"atom's residue is in an alpha helix",map:()=>H$(["alpha"])},pi_helix:{"@desc":"atom's residue is in a pi helix",map:()=>H$(["pi"])},helix_3_10:{"@desc":"atom's residue is in a 3-10 helix",map:()=>H$(["3-10"])},helix:{"@desc":"atom's residue is in an alpha or pi or 3-10 helix",map:()=>H$(["helix"])},extended_beta:{"@desc":"atom's residue is a beta sheet",map:()=>H$(["sheet"])},bridge_beta:{"@desc":"atom's residue is a beta sheet",map:()=>H$(["strand"])},sheet:{"@desc":"atom's residue is a beta sheet",map:()=>H$(["beta"])},turn:{"@desc":"atom's residue is in a turn conformation",map:()=>H$(["turn"])},coil:{"@desc":"atom's residue is in a coil conformation",map:()=>U$.struct.modifier.intersectBy({0:G$(),by:H$(["none"])})}},X$=FQ,W$={sqr:{"@desc":"square of x","@examples":["sqr(2)"],map:e=>X$.core.math.pow([e,2])},sqrt:{"@desc":"square root of x","@examples":["sqrt(2)"],map:e=>X$.core.math.sqrt([e])},abs:{"@desc":"absolute value of x","@examples":["abs(2)"],map:e=>X$.core.math.abs([e])},floor:{"@desc":"largest integer not greater than x","@examples":["floor(2)"],map:e=>X$.core.math.floor([e])},ceil:{"@desc":"smallest integer not less than x","@examples":["ceil(2)"],map:e=>X$.core.math.ceil([e])},sin:{"@desc":"sine of x","@examples":["sin(2)"],map:e=>X$.core.math.sin([e])},cos:{"@desc":"cosine of x","@examples":["cos(2)"],map:e=>X$.core.math.cos([e])},tan:{"@desc":"tangent of x","@examples":["tan(2)"],map:e=>X$.core.math.tan([e])},atan:{"@desc":"arctangent of x","@examples":["atan(2)"],map:e=>X$.core.math.atan([e])},asin:{"@desc":"arcsin of x","@examples":["asin(2)"],map:e=>X$.core.math.asin([e])},acos:{"@desc":"arccos of x","@examples":["acos(2)"],map:e=>X$.core.math.acos([e])},sinh:{"@desc":"hyperbolic sine of x","@examples":["sinh(2)"],map:e=>X$.core.math.sinh([e])},cosh:{"@desc":"hyperbolic cosine of x","@examples":["cosh(2)"],map:e=>X$.core.math.cosh([e])},tanh:{"@desc":"hyperbolic tangent of x","@examples":["tanh(2)"],map:e=>X$.core.math.tanh([e])},exp:{"@desc":"e to the power x","@examples":["exp(2)"],map:e=>X$.core.math.exp([e])},log:{"@desc":"natural log of x","@examples":["log(2)"],map:e=>X$.core.math.log([e])},log10:{"@desc":"log base 10 of x","@examples":["log10(2)"],map:e=>X$.core.math.log10([e])}},K$=FQ,J$=[{"@desc":"multiplication, division","@examples":[],name:"mul-div",type:yZ,rule:sZ.regexp(/\s*(\*|\/)\s*/,1),map:(e,t,n)=>{switch(e){case"*":return K$.core.math.mult([t,n]);case"/":return K$.core.math.div([t,n]);default:throw new Error(`value operator '${e}' not supported`)}}},{"@desc":"addition, substraction","@examples":[],name:"add-sub",type:yZ,rule:sZ.regexp(/\s*(-|\+)\s*/,1),map:(e,t,n)=>{switch(e){case"-":return K$.core.math.sub([t,n]);case"+":return K$.core.math.add([t,n]);default:throw new Error(`value operator '${e}' not supported`)}}},{"@desc":"value comparisons","@examples":[],name:"comparison",type:yZ,rule:sZ.alt(sZ.regexp(/\s*(=~|==|>=|<=|=|!=|>|<)\s*/,1),sZ.whitespace.result("=")),map:(e,t,n)=>{let r;if(void 0!==t.head?("structure-query.atom-property.macromolecular.secondary-structure-flags"===t.head.name&&(r=K$.core.flags.hasAny([t,P$(n)])),"core.type.regex"===t.head.name&&(r=K$.core.str.match([t,K$.core.type.str([n])]))):void 0!==n.head?("structure-query.atom-property.macromolecular.secondary-structure-flags"===n.head.name&&(r=K$.core.flags.hasAny([n,P$(t)])),"core.type.regex"===n.head.name&&(r=K$.core.str.match([n,K$.core.type.str([t])]))):"=~"===e&&(r=t.head?K$.core.str.match([K$.core.type.regex([`^${n}$`,"i"]),K$.core.type.str([t])]):K$.core.str.match([K$.core.type.regex([`^${t}$`,"i"]),K$.core.type.str([n])])),!r)switch(t.head&&(n=OZ(t,n)),n.head&&(t=OZ(n,t)),e){case"=":case"==":r=K$.core.rel.eq([t,n]);break;case"!=":r=K$.core.rel.neq([t,n]);break;case">":r=K$.core.rel.gr([t,n]);break;case"<":r=K$.core.rel.lt([t,n]);break;case">=":r=K$.core.rel.gre([t,n]);break;case"<=":r=K$.core.rel.lte([t,n]);break;default:throw new Error(`value operator '${e}' not supported`)}return K$.struct.generator.atomGroups({"atom-test":r})}}],Z$=sZ.createLanguage({Parens:function(e){return sZ.alt(e.Parens,e.Operator,e.Expression).wrap(sZ.string("("),sZ.string(")"))},Expression:function(e){return sZ.alt(e.RangeListProperty,e.ValueQuery,e.Keywords)},NamedAtomProperties:function(){return sZ.alt(...TZ(O$))},Keywords:()=>sZ.alt(...kZ(Y$)),ValueRange:function(e){return sZ.seq(e.Value.skip(sZ.regexp(/\s+TO\s+/i)),e.Value).map((e=>({range:e})))},RangeListProperty:function(e){return sZ.seq(sZ.alt(...QZ(O$,/\s/)).skip(sZ.whitespace),sZ.alt(e.ValueRange,e.Value).sepBy1(sZ.whitespace)).map((e=>{const[t,n]=e,r=[],o=[];n.forEach((e=>{e.range?o.push(K$.core.rel.inRange([t,e.range[0],e.range[1]])):r.push(OZ(t,e,R$))}));const i=1===(a=o).length?a[0]:a.length>1?hZ.core.logic.or(a):void 0;var a;const s=function(e,t){if(jZ.includes(e.head.name)){const n=t[0].head,r=[];return t.forEach((e=>r.push(...e.args[0]))),hZ.core.flags.hasAny([e,{head:n,args:r}])}return 1===t.length?hZ.core.rel.eq([e,t[0]]):t.length>1?hZ.core.set.has([hZ.core.type.set(t),e]):void 0}(t,r);let l;return l=i&&s?K$.core.logic.or([i,s]):i||s,K$.struct.generator.atomGroups({[GZ(t)]:l})}))},Operator:function(e){return vZ(L$,sZ.alt(e.Parens,e.Expression,e.ValueQuery))},Query:function(e){return sZ.alt(e.Operator,e.Parens,e.Expression).trim(sZ.optWhitespace)},Number:function(){return sZ.regexp(/-?(0|[1-9][0-9]*)([.][0-9]+)?([eE][+-]?[0-9]+)?/).map(Number).desc("number")},String:function(){const e=MZ(O$,Y$,L$).sort(SZ).map(ch).join("|");return sZ.alt(sZ.regexp(new RegExp(`(?!(${e}))[A-Z0-9_]+`,"i")),sZ.regexp(/'((?:[^"\\]|\\.)*)'/,1),sZ.regexp(/"((?:[^"\\]|\\.)*)"/,1).map((e=>K$.core.type.regex([`^${e}$`,"i"])))).desc("string")},Value:function(e){return sZ.alt(e.Number,e.String)},ValueParens:function(e){return sZ.alt(e.ValueParens,e.ValueOperator,e.ValueExpressions).wrap(sZ.string("("),sZ.string(")"))},ValuePropertyNames:function(){return sZ.alt(...QZ(O$,/=~|==|>=|<=|=|!=|>|<|\)|\s|\+|-|\*|\//i))},ValueOperator:function(e){return vZ(J$,sZ.alt(e.ValueParens,e.ValueExpressions))},ValueExpressions:function(e){return sZ.alt(e.ValueFunctions,e.Value,e.ValuePropertyNames)},ValueFunctions:function(e){return sZ.alt(...function(e,t){const n=[],r=sZ.regexp(/\(\s*/),o=sZ.regexp(/\s*\)/);return Object.keys(e).sort(SZ).forEach((i=>{const a=e[i],s=a.map?a.map:xZ(`function '${i}' not supported`),l=sZ.regexp(new RegExp(i,"i")).skip(r).then(t).skip(o).map(s);n.push(l)})),n}(W$,e.ValueOperator))},ValueQuery:function(e){return sZ.alt(e.ValueOperator.map((e=>{if(e.head.name&&e.head.name.startsWith("structure-query.generator"))return e;throw new Error(`values must be part of an comparison, value '${e}'`)})))}}),$$={pymol:e=>S$.Query.tryParse(e),vmd:e=>Z$.Query.tryParse(e),jmol:e=>l$.Query.tryParse(e)},e0=$$;function t0(e,t){return{expression:e,language:t}}!function(e){function t(e){switch(e.language){case"mol-script":const n=(t=e.expression,pZ.parse(t));if(0===n.length)throw new Error("No query");return aZ(n[0]);case"pymol":case"jmol":case"vmd":return function(e,t){try{return e0[e](t)}catch(l0e){throw console.error(l0e.message),l0e}}(e.language,e.expression);default:Zh(e.language)}var t}function n(e){return uz(t(e))}e.Info={"mol-script":"Mol-Script",pymol:"PyMOL",vmd:"VMD",jmol:"Jmol"},e.is=function(e){return!!e&&"string"===typeof e.expression&&!!e.language},e.areEqual=function(e,t){return e.language===t.language&&e.expression===t.expression},e.toExpression=t,e.toQuery=n,e.toLoci=function(e,t){const r=n(e)(new $O(t));return _O.toLociWithSourceUnits(r)},e.getStructureSelection=function(e,t,n){return uz("function"===typeof e?e(FQ):e)(new $O(t,n))}}(t0||(t0={}));const n0={dynamicBonds:U_.Optional(U_.Boolean(!1,{description:"Ensure bonds are recalculated upon model changes. Also enables calculation of inter-unit bonds in water molecules and ions."}))};var r0,o0;!function(e){async function t(e,t,n,r,o){let i;const a=xO.Provider.get(n);!r&&a&&0!==a.assemblies.length&&(r=a.assemblies[0].id),a&&0!==a.assemblies.length?(i=EO.findAssembly(n,r||""),i||e.log.warn(`Model '${n.entryId}' has no assembly called '${r}', returning model structure.`)):e.log.warn(`Model '${n.entryId}' has no assembly, returning model structure.`);const s=aG.ofModel(n,o);if(!i){const e={label:"Model",description:aG.elementDescription(s)};return new Jz.Molecule.Structure(s,e)}r=i.id;const l=await FU.buildAssembly(s,r).runInContext(t),c={label:`Assembly ${r}`,description:aG.elementDescription(l)};return new Jz.Molecule.Structure(l,c)}e.getParams=function(e,t){const n=e&&xO.Provider.get(e),r=n?n.assemblies.map((e=>[e.id,`${e.id}: ${ah(e.details)}`])):[],o=!n||!OT.isZero(n.spacegroup.cell),i=[];if(n){const{operators:e}=n.spacegroup;for(let t=0,n=e.length;t<n;t++)i.push([t,`${t+1}: ${FT.getOperatorXyz(e[t])}`])}const a=[];e&&e.properties.structAsymMap.forEach((e=>{const t=e.id===e.auth_id?e.id:`${e.id} [auth ${e.auth_id}]`;a.push([e.id,t])}));const s={auto:U_.Group(n0),model:U_.Group(n0),assembly:U_.Group({id:U_.Optional(e?U_.Select(r.length?r[0][0]:"",r,{label:"Asm Id",description:"Assembly Id"}):U_.Text("",{label:"Asm Id",description:"Assembly Id (use empty for the 1st assembly)"})),...n0},{isFlat:!0}),"symmetry-mates":U_.Group({radius:U_.Numeric(5,{min:0,max:50,step:1}),...n0},{isFlat:!0}),symmetry:U_.Group({ijkMin:U_.Vec3(qh.create(-1,-1,-1),{step:1},{label:"Min IJK",fieldLabels:{x:"I",y:"J",z:"K"}}),ijkMax:U_.Vec3(qh.create(1,1,1),{step:1},{label:"Max IJK",fieldLabels:{x:"I",y:"J",z:"K"}}),...n0},{isFlat:!0}),"symmetry-assembly":U_.Group({generators:U_.ObjectList({operators:U_.ObjectList({index:U_.Select(0,i),shift:U_.Vec3(qh(),{step:1},{label:"IJK",fieldLabels:{x:"I",y:"J",z:"K"}})},(e=>`${e.index+1}_${e.shift.map((e=>e+5)).join("")}`),{defaultValue:[]}),asymIds:U_.MultiSelect([],a)},(e=>`${e.asymIds.length} asym ids, ${e.operators.length} operators`),{defaultValue:[]}),...n0},{isFlat:!0})},l=[];return"auto"===t&&l.push(["auto","Auto"]),l.push(["model","Model"]),r.length>0&&l.push(["assembly","Assembly"]),o&&(l.push(["symmetry-mates","Symmetry Mates"]),l.push(["symmetry","Symmetry (indices)"]),l.push(["symmetry-assembly","Symmetry (assembly)"])),{type:U_.MappedStatic(t||"model",s,{options:l})}},e.canAutoUpdate=function(e,t){return"symmetry-assembly"!==t.name&&("symmetry"!==t.name||"symmetry"!==e.name)},e.create=async function(e,n,r,o){const i=null===o||void 0===o?void 0:o.params,a=xO.Provider.get(r);if(!a||!o||"model"===o.name){const e=aG.ofModel(r,i);return new Jz.Molecule.Structure(e,{label:"Model",description:aG.elementDescription(e)})}if("auto"===o.name){if(0===a.assemblies.length){const e=aG.ofModel(r,i);return new Jz.Molecule.Structure(e,{label:"Model",description:aG.elementDescription(e)})}return t(e,n,r,void 0,i)}return"assembly"===o.name?t(e,n,r,o.params.id,i):"symmetry"===o.name?async function(e,t,n,r,o){const i=aG.ofModel(t,o),a=await FU.buildSymmetryRange(i,n,r).runInContext(e),s={label:`Symmetry [${n}] to [${r}]`,description:aG.elementDescription(a)};return new Jz.Molecule.Structure(a,s)}(n,r,o.params.ijkMin,o.params.ijkMax,i):"symmetry-mates"===o.name?async function(e,t,n,r){const o=aG.ofModel(t,r),i=await FU.builderSymmetryMates(o,n).runInContext(e),a={label:"Symmetry Mates",description:aG.elementDescription(i)};return new Jz.Molecule.Structure(i,a)}(n,r,o.params.radius,i):"symmetry-assembly"===o.name?async function(e,t,n,r,o){const i=aG.ofModel(t,o),a=await FU.buildSymmetryAssembly(i,n,r).runInContext(e),s={label:"Symmetry Assembly",description:aG.elementDescription(a)};return new Jz.Molecule.Structure(a,s)}(n,r,o.params.generators,a,i):void Zh()}}(r0||(r0={})),function(e){function t(e,t){const n=t0.is(t)?t:void 0,r=t0.is(t)?t0.toExpression(t):t;return{script:n,expression:r,compiled:uz(r),originalStructure:e,currentStructure:e}}function n(e,t){return e.compiled(new $O(t))}e.isUnchanged=function(e,t,n){return e.currentStructure===n&&(t0.is(t)?!!e.script&&t0.areEqual(e.script,t):e.expression===t)},e.create=t,e.run=n,e.createAndRun=function(e,r){const o=t(e,r);return{entry:o,selection:n(o,e)}},e.updateStructure=function(e,t){return e.currentStructure=t,e.compiled(new $O(t))},e.updateStructureObject=function(e,t,n){const r=_O.unionStructure(t);e.label=`${n||"Selection"}`,e.description=aG.elementDescription(r),e.data=r}}(o0||(o0={}));function i0(e){switch(e){case 7:return-3;case 6:return-2;case 5:return-1;case 0:case 4:return 0;case 3:return 1;case 2:return 2;case 1:return 3;default:return console.error(`Value ${e} is outside the 0-7 range, defaulting to 0.`),0}}function a0(e,t){const n=gF.create(e.data,2*t),r=gF.create(e.data,2*t),o=gF.create(e.data,2*t),i=gF.create(e.data,2*t),a=gF.create(e.data,2*t);for(let s=0;s<t;++s){hF.markLine(e);const{tokenStart:t,position:s}=e;hF.trim(e,t,t+10),gF.addUnchecked(n,e.tokenStart,e.tokenEnd),hF.trim(e,t+10,t+20),gF.addUnchecked(r,e.tokenStart,e.tokenEnd),hF.trim(e,t+20,t+30),gF.addUnchecked(o,e.tokenStart,e.tokenEnd),hF.trim(e,t+31,t+34),gF.addUnchecked(i,e.tokenStart,e.tokenEnd),hF.trim(e,t+36,t+39),gF.addUnchecked(a,e.tokenStart,e.tokenEnd),e.position=s}return{count:t,x:nQ(n)(ag.Schema.float),y:nQ(r)(ag.Schema.float),z:nQ(o)(ag.Schema.float),type_symbol:nQ(i)(ag.Schema.str),formal_charge:nQ(a)(ag.Schema.int)}}function s0(e,t){const n=gF.create(e.data,2*t),r=gF.create(e.data,2*t),o=gF.create(e.data,2*t);for(let i=0;i<t;++i){hF.markLine(e);const{tokenStart:t,position:i}=e;hF.trim(e,t,t+3),gF.addUnchecked(n,e.tokenStart,e.tokenEnd),hF.trim(e,t+3,t+6),gF.addUnchecked(r,e.tokenStart,e.tokenEnd),hF.trim(e,t+6,t+9),gF.addUnchecked(o,e.tokenStart,e.tokenEnd),e.position=i}return{count:t,atomIdxA:nQ(n)(ag.Schema.int),atomIdxB:nQ(r)(ag.Schema.int),order:nQ(o)(ag.Schema.int)}}function l0(e,t,n){hF.trim(e,t+6,t+9);const r=parseInt(hF.getTokenString(e));for(let o=0;o<r;++o){const r=9+8*o;hF.trim(e,t+r,t+r+4);const i=hF.getTokenString(e);n.atomIdx.push(+i),hF.trim(e,t+r+4,t+r+8);const a=hF.getTokenString(e);n.charge.push(+a)}hF.eatLine(e)}function c0(e){const t={atomIdx:[],charge:[]};for(;e.position<e.length;){const{position:n}=e;hF.trim(e,n+3,n+6);const r=hF.getTokenString(e);if("END"===r)break;if(hF.eatLine(e),"CHG"===r)l0(e,n,t)}return{atomIdx:ag.ofIntArray(t.atomIdx),charge:ag.ofIntArray(t.charge)}}function u0(e){return Tw.create("Parse Mol",(async()=>function(e){const t=hF(e),n=hF.readLine(t).trim(),r=hF.readLine(t).trim(),o=hF.readLine(t).trim(),i=hF.readLine(t),a=+i.substr(0,3),s=+i.substr(3,3),l={title:n,program:r,comment:o,atoms:a0(t,a),bonds:s0(t,s),formalCharges:c0(t)};return mF.success(l)}(e)))}async function d0(e,t,n){const{atoms:r,bonds:o,formalCharges:i}=e,a=ag.ofConst("MOL",e.atoms.count,ag.Schema.str),s=ag.ofConst("A",e.atoms.count,ag.Schema.str),l=ag.asArrayColumn(r.type_symbol),c=ag.ofConst(1,r.count,ag.Schema.int),u=new Int32Array(e.atoms.count);if(i.atomIdx.rowCount>0)for(let g=0;g<i.atomIdx.rowCount;g++)u[i.atomIdx.value(g)-1]=i.charge.value(g);else for(let g=0;g<e.atoms.count;g++)u[g]=i0(r.formal_charge.value(g));const d=sg.ofPartialColumns(WN.atom_site,{auth_asym_id:s,auth_atom_id:l,auth_comp_id:a,auth_seq_id:c,Cartn_x:ag.asArrayColumn(r.x,Float32Array),Cartn_y:ag.asArrayColumn(r.y,Float32Array),Cartn_z:ag.asArrayColumn(r.z,Float32Array),id:ag.range(0,r.count-1),label_asym_id:s,label_atom_id:l,label_comp_id:a,label_seq_id:c,label_entity_id:ag.ofConst("1",r.count,ag.Schema.str),occupancy:ag.ofConst(1,r.count,ag.Schema.float),type_symbol:l,pdbx_PDB_model_num:ag.ofConst(1,r.count,ag.Schema.int),pdbx_formal_charge:ag.ofIntArray(u)},r.count),A=new JN;A.setNames([["MOL","Unknown Entity"]]),A.getEntityId("MOL",0,"A");const f=new oL(c,l);f.setNames([["MOL","Unknown Molecule"]]),f.add("MOL",0);const p=KN({entity:A.getEntityTable(),chem_comp:f.getChemCompTable(),atom_site:d}),h=await Hj(p,null!==t&&void 0!==t?t:A0.create(e),n);if(h.frameCount>0){const e=ag.ofIntArray(ag.mapToArray(o.atomIdxA,(e=>e-1),Int32Array)),t=ag.ofIntArray(ag.mapToArray(o.atomIdxB,(e=>e-1),Int32Array)),n=ag.asArrayColumn(o.order,Int32Array),i=jk.fromData({pairs:{indexA:e,indexB:t,order:n},count:r.count},{maxDistance:1/0});jk.Provider.set(h.representative,i)}return h}var A0,f0,p0;async function h0(e,t,n){var r;const o=e.atom_site._rowCount,i=ag.ofConst("MOL",o,ag.Schema.str),a=ag.ofConst("A",o,ag.Schema.str),s=ag.ofConst(1,o,ag.Schema.int),l=function(e){const{cell:t,space_group:n}=e,r=function(e){const t=e.it_number.value(0),n=e["name_h-m_full"].value(0).replace("-"," ");return e.it_number.isDefined?(e["name_h-m_full"].isDefined,t):n}(n),o=OT.create(r,qh.create(t.length_a.value(0),t.length_b.value(0),t.length_c.value(0)),qh.scale(qh(),qh.create(t.angle_alpha.value(0),t.angle_beta.value(0),t.angle_gamma.value(0)),Math.PI/180));return{spacegroup:FT.create(o),assemblies:[],isNonStandardCrystalFrame:!1,ncsOperators:[]}}(e),c=l.spacegroup.cell.fromFractional,{fract_x:u,fract_y:d,fract_z:A}=e.atom_site,f=new Float32Array(o),p=new Float32Array(o),h=new Float32Array(o),g=qh();for(let _=0;_<o;++_)qh.set(g,u.value(_),d.value(_),A.value(_)),qh.transformMat4(g,g,c),f[_]=g[0],p[_]=g[1],h[_]=g[2];const{type_symbol:m,label:y}=e.atom_site;let v,b;if(m.isDefined){const e=new Array(o),t=new Int8Array(o);for(let n=0;n<o;++n){const r=m.value(n),o=r.length;"+"===r[o-1]?(e[n]=r.substring(0,o-2),t[n]=parseInt(r[o-2])):"+"===r[o-2]?(e[n]=r.substring(0,o-2),t[n]=parseInt(r[o-1])):"-"===r[o-1]?(e[n]=r.substring(0,o-2),t[n]=-parseInt(r[o-2])):"-"===r[o-2]?(e[n]=r.substring(0,o-2),t[n]=-parseInt(r[o-1])):(e[n]=r,t[n]=0)}v=ag.ofStringArray(e),b=ag.ofIntArray(t)}else{const e=new Array(o);for(let t=0;t<o;++t)e[t]=wJ(y.value(t),"");v=ag.ofStringArray(e),b=ag.Undefined(o,ag.Schema.int)}const C=sg.ofPartialColumns(WN.atom_site,{auth_asym_id:a,auth_atom_id:y,auth_comp_id:i,auth_seq_id:s,Cartn_x:ag.ofFloatArray(f),Cartn_y:ag.ofFloatArray(p),Cartn_z:ag.ofFloatArray(h),id:ag.range(0,o-1),label_asym_id:a,label_atom_id:y,label_comp_id:i,label_seq_id:s,label_entity_id:ag.ofConst("1",o,ag.Schema.str),occupancy:e.atom_site.occupancy.isDefined?e.atom_site.occupancy:ag.ofConst(1,o,ag.Schema.float),type_symbol:v,pdbx_formal_charge:b,pdbx_PDB_model_num:ag.ofConst(1,o,ag.Schema.int),B_iso_or_equiv:e.atom_site.u_iso_or_equiv},o),I=e.chemical.name_common.value(0)||e.chemical.name_systematic.value(0)||e.chemical_formula.sum.value(0),E=new JN;E.setNames([["MOL",I||"Unknown Entity"]]),E.getEntityId("MOL",0,"A");const x=new oL(s,e.atom_site.type_symbol);x.setNames([["MOL",I||"Unknown Molecule"]]),x.add("MOL",0);const B=KN({entity:E.getEntityTable(),chem_comp:x.getChemCompTable(),atom_site:C}),w=await Hj(B,t,n);if(w.frameCount>0){const n=w.representative;xO.Provider.set(n,l);const i=e.geom_bond._rowCount;if(i>0){const a={},{label:s}=e.atom_site;for(let e=0,t=s.rowCount;e<t;++e)a[s.value(e)]=e;const l=null===(r=t.data.frame.categories.ccdc_geom_bond_type)||void 0===r?void 0:r.getField(""),c=[],u=[],d=[],A=[],f=[],p=new Set;let h=0;const{atom_site_label_1:g,atom_site_label_2:m,valence:y,distance:v}=e.geom_bond;for(let e=0;e<i;++e){const t=a[g.value(e)],n=a[m.value(e)],r=t<n?Rh(t,n):Rh(n,t);if(!p.has(r)){if(p.add(r),c[h]=t,u[h]=n,A[h]=v.value(e)||-1,l){const t=l.str(e);"D"===t?(d[h]=2,f[h]=1):"A"===t?(d[h]=1,f[h]=17):(d[h]=1,f[h]=1)}else f[h]=1,d[h]=y.isDefined?y.value(e):1;h+=1}}jk.Provider.set(n,jk.fromData({pairs:{indexA:ag.ofIntArray(c),indexB:ag.ofIntArray(u),order:ag.ofIntArray(d),distance:ag.ofFloatArray(A),flag:ag.ofIntArray(f)},count:o}))}}return w}async function g0(e,t){const{atoms:n}=e,r=ag.ofConst("MOL",e.atoms.count,ag.Schema.str),o=ag.ofConst("A",e.atoms.count,ag.Schema.str),i=ag.ofArray({array:ag.mapToArray(n.number,(e=>function(e){return oM.has(e)?oM.get(e):rM("H")}(e))),schema:ag.Schema.Aliased(ag.Schema.str)}),a=ag.ofConst(1,n.count,ag.Schema.int),s=sg.ofPartialColumns(WN.atom_site,{auth_asym_id:o,auth_atom_id:i,auth_comp_id:r,auth_seq_id:a,Cartn_x:ag.asArrayColumn(n.x,Float32Array),Cartn_y:ag.asArrayColumn(n.y,Float32Array),Cartn_z:ag.asArrayColumn(n.z,Float32Array),id:ag.range(0,n.count-1),label_asym_id:o,label_atom_id:i,label_comp_id:r,label_seq_id:a,label_entity_id:ag.ofConst("1",n.count,ag.Schema.str),occupancy:ag.ofConst(1,n.count,ag.Schema.float),type_symbol:i,pdbx_PDB_model_num:ag.ofConst(1,n.count,ag.Schema.int)},n.count),l=new JN;l.setNames([["MOL","Unknown Entity"]]),l.getEntityId("MOL",0,"A");const c=new oL(a,i);c.setNames([["MOL","Unknown Molecule"]]),c.add("MOL",0);const u=KN({entity:l.getEntityTable(),chem_comp:c.getChemCompTable(),atom_site:s});return await Hj(u,p0.create(e),t)}!function(e){e.is=function(e){return"mol"===(null===e||void 0===e?void 0:e.kind)},e.create=function(e){return{kind:"mol",name:e.title,data:e}}}(A0||(A0={})),zN.Provider.formatRegistry.add("cifCore",(function(e){if(!f0.is(e.sourceData))return;const{atom_site:t,atom_site_aniso:n}=e.sourceData.data.db;return{data:sg.ofPartialColumns(zN.Schema,{U:n.u},n._rowCount),elementToAnsiotrop:zN.getElementToAnsiotropFromLabel(t.label,n.label)}}),(function(e){return!!f0.is(e.sourceData)&&e.sourceData.data.db.atom_site_aniso.u.isDefined})),function(e){e.is=function(e){return"cifCore"===(null===e||void 0===e?void 0:e.kind)},e.fromFrame=function(e,t){return t||(t=wN.schema.cifCore(e)),{kind:"cifCore",name:t.database_code.depnum_ccdc_archive.value(0)||t.database_code.depnum_ccdc_fiz.value(0)||t.database_code.icsd.value(0)||t.database_code.mdf.value(0)||t.database_code.nbs.value(0)||t.database_code.csd.value(0)||t.database_code.cod.value(0)||t._name,data:{db:t,frame:e}}}}(f0||(f0={})),function(e){e.is=function(e){return"cube"===(null===e||void 0===e?void 0:e.kind)},e.create=function(e){return{kind:"cube",name:e.header.comment1,data:e}}}(p0||(p0={}));const{skipWhitespace:m0,eatValue:y0,markLine:v0,getTokenString:b0,readLine:C0}=hF;function I0(e,t){return{tokenizer:e,molecule:{mol_name:"",num_atoms:0,num_bonds:0,num_subst:0,num_feat:0,num_sets:0,mol_type:"",charge_type:"",status_bits:"",mol_comment:""},runtimeCtx:t}}const E0=/\s+/g;function x0(e){const{tokenizer:t,molecule:n}=e;for(;"@<TRIPOS>MOLECULE"!==b0(t)&&t.position<t.data.length;)v0(t);v0(t),n.mol_name=b0(t),v0(t);const r=b0(t).trim().split(E0);n.num_atoms=parseInt(r[0]),n.num_bonds=parseInt(r[1]),n.num_subst=parseInt(r[2]),n.num_feat=parseInt(r[3]),n.num_sets=parseInt(r[4]),v0(t);const o=b0(t);if(o.startsWith("@<TRIPOS>"))return;n.mol_type=o,v0(t);const i=b0(t);if(i.startsWith("@<TRIPOS>"))return;n.charge_type=i,v0(t);const a=b0(t);if(a.startsWith("@<TRIPOS>"))return;n.status_bits=a,v0(t);const s=b0(t);s.startsWith("@<TRIPOS>")||(n.mol_comment=s)}async function B0(e){const{tokenizer:t,molecule:n}=e;for(;"@<TRIPOS>ATOM"!==b0(t)&&t.position<t.data.length;)v0(t);const r=t.position,o=t.lineNumber,i=C0(t).trim().split(/\s+/g).length,a=gF.create(t.data,2*n.num_atoms),s=gF.create(t.data,2*n.num_atoms),l=gF.create(t.data,2*n.num_atoms),c=gF.create(t.data,2*n.num_atoms),u=gF.create(t.data,2*n.num_atoms),d=gF.create(t.data,2*n.num_atoms),A=gF.create(t.data,2*n.num_atoms),f=gF.create(t.data,2*n.num_atoms),p=gF.create(t.data,2*n.num_atoms),h=gF.create(t.data,2*n.num_atoms),g=ag.Undefined(n.num_atoms,ag.Schema.float),m=ag.Undefined(n.num_atoms,ag.Schema.int),y=ag.Undefined(n.num_atoms,ag.Schema.str);t.position=r,t.lineNumber=o;const{length:v}=t;let b=0;await Mw(e.runtimeCtx,1e5,void 0,(e=>{const r=Math.min(n.num_atoms-b,e);for(let n=0;n<r;n++)for(let e=0;e<i;e++)switch(m0(t),t.tokenStart=t.position,y0(t),e){case 0:gF.addUnchecked(a,t.tokenStart,t.tokenEnd);break;case 1:gF.addUnchecked(s,t.tokenStart,t.tokenEnd);break;case 2:gF.addUnchecked(l,t.tokenStart,t.tokenEnd);break;case 3:gF.addUnchecked(c,t.tokenStart,t.tokenEnd);break;case 4:gF.addUnchecked(u,t.tokenStart,t.tokenEnd);break;case 5:gF.addUnchecked(d,t.tokenStart,t.tokenEnd);break;case 6:gF.addUnchecked(A,t.tokenStart,t.tokenEnd);break;case 7:gF.addUnchecked(f,t.tokenStart,t.tokenEnd);break;case 8:gF.addUnchecked(p,t.tokenStart,t.tokenEnd);break;case 9:gF.addUnchecked(h,t.tokenStart,t.tokenEnd)}return b+=r,r}),(e=>e.update({message:"Parsing...",current:t.position,max:v})));return{count:n.num_atoms,atom_id:nQ(a)(ag.Schema.int),atom_name:nQ(s)(ag.Schema.str),x:nQ(l)(ag.Schema.float),y:nQ(c)(ag.Schema.float),z:nQ(u)(ag.Schema.float),atom_type:i>5?nQ(d)(ag.Schema.str):y,subst_id:i>6?nQ(A)(ag.Schema.int):m,subst_name:i>7?nQ(f)(ag.Schema.str):y,charge:i>8?nQ(p)(ag.Schema.float):g,status_bit:i>9?nQ(h)(ag.Schema.str):y}}async function w0(e){const{tokenizer:t,molecule:n}=e;for(;"@<TRIPOS>BOND"!==b0(t)&&t.position<t.data.length;)v0(t);const r=t.position,o=t.lineNumber,i=C0(t).trim().split(/\s+/g).length,a=gF.create(t.data,2*n.num_bonds),s=gF.create(t.data,2*n.num_bonds),l=gF.create(t.data,2*n.num_bonds),c=gF.create(t.data,2*n.num_bonds),u=gF.create(t.data,2*n.num_bonds);t.position=r,t.lineNumber=o;const{length:d}=t;let A=0;await Mw(e.runtimeCtx,1e5,void 0,(e=>{const r=Math.min(n.num_bonds-A,e);for(let n=0;n<r;n++)for(let e=0;e<i;e++)switch(m0(t),t.tokenStart=t.position,y0(t),e){case 0:gF.addUnchecked(a,t.tokenStart,t.tokenEnd);break;case 1:gF.addUnchecked(s,t.tokenStart,t.tokenEnd);break;case 2:gF.addUnchecked(l,t.tokenStart,t.tokenEnd);break;case 3:gF.addUnchecked(c,t.tokenStart,t.tokenEnd);break;default:gF.addUnchecked(u,t.tokenStart,t.tokenEnd)}return A+=r,r}),(e=>e.update({message:"Parsing...",current:t.position,max:d})));return{count:n.num_bonds,bond_id:nQ(a)(ag.Schema.int),origin_atom_id:nQ(s)(ag.Schema.int),target_atom_id:nQ(l)(ag.Schema.int),bond_type:nQ(c)(ag.Schema.str),status_bits:i>4?nQ(u)(ag.Schema.str):ag.Undefined(n.num_bonds,ag.Schema.str)}}function _0(e){const{tokenizer:t}=e;for(;t.position<t.data.length;){const e=b0(t);if("@<TRIPOS>MOLECULE"===e)return;if("@<TRIPOS>CRYSIN"===e)break;v0(t)}if(t.position>=t.data.length)return;v0(t);const n=b0(t).trim().split(E0);return{a:parseFloat(n[0]),b:parseFloat(n[1]),c:parseFloat(n[2]),alpha:parseFloat(n[3]),beta:parseFloat(n[4]),gamma:parseFloat(n[5]),spaceGroup:parseInt(n[6],10),setting:parseInt(n[7],10)}}function S0(e,t){return Tw.create("Parse MOL2",(async n=>await async function(e,t,n){const r=hF(t);e.update({message:"Parsing...",current:0,max:t.length});const o=[];for(;r.position<t.length;){const t=I0(r,e);x0(t);const n=await B0(t),i=await w0(t),a=_0(t);for(o.push({molecule:t.molecule,atoms:n,bonds:i,crysin:a}),m0(r);"@<TRIPOS>MOLECULE"!==b0(r)&&r.position<r.data.length;)v0(r)}const i={name:n,structures:o};return mF.success(i)}(n,e,t)))}function D0(e){if(1!==e.setting)return;const t=OT.create(e.spaceGroup,qh.create(e.a,e.b,e.c),qh.scale(qh(),qh.create(e.alpha,e.beta,e.gamma),Math.PI/180));return{spacegroup:FT.create(t),assemblies:[],isNonStandardCrystalFrame:!1,ncsOperators:[]}}var T0;function k0(e){return Tw.create("Parse MOL2",(t=>async function(e,t){const n=[];for(let r=0,o=e.structures.length;r<o;++r){const{molecule:o,atoms:i,bonds:a,crysin:s}=e.structures[r],l=ag.ofConst("A",i.count,ag.Schema.str),c=new Array(i.count);let u=!1;for(let e=0;e<i.count;++e)if(i.atom_type.value(e).includes(".")){u=!0;break}for(let e=0;e<i.count;++e)c[e]=u?i.atom_type.value(e).split(".")[0].toUpperCase():wJ(i.atom_name.value(e),i.subst_name.value(e));const d=sg.ofPartialColumns(WN.atom_site,{auth_asym_id:l,auth_atom_id:ag.asArrayColumn(i.atom_name),auth_comp_id:i.subst_name,auth_seq_id:i.subst_id,Cartn_x:ag.asArrayColumn(i.x,Float32Array),Cartn_y:ag.asArrayColumn(i.y,Float32Array),Cartn_z:ag.asArrayColumn(i.z,Float32Array),id:ag.asArrayColumn(i.atom_id),label_asym_id:l,label_atom_id:ag.asArrayColumn(i.atom_name),label_comp_id:i.subst_name,label_seq_id:i.subst_id,label_entity_id:ag.ofConst("1",i.count,ag.Schema.str),occupancy:ag.ofConst(1,i.count,ag.Schema.float),type_symbol:ag.ofStringArray(c),pdbx_PDB_model_num:ag.ofConst(r,i.count,ag.Schema.int)},i.count),A=new JN;A.setNames([["MOL",o.mol_name||"Unknown Entity"]]),A.getEntityId("MOL",0,"A");const f=new oL(i.subst_id,i.atom_name);for(let e=0,t=i.subst_name.rowCount;e<t;++e)f.add(i.subst_name.value(e),e);const p=KN({entity:A.getEntityTable(),chem_comp:f.getChemCompTable(),atom_site:d}),h=await Hj(p,T0.create(e),t);if(h.frameCount>0){const e=ag.ofIntArray(ag.mapToArray(a.origin_atom_id,(e=>e-1),Int32Array)),t=ag.ofIntArray(ag.mapToArray(a.target_atom_id,(e=>e-1),Int32Array)),r=a.bond_id,l=ag.ofIntArray(ag.mapToArray(a.bond_type,(e=>{switch(e){case"ar":case"am":case"un":return 1;case"du":case"nc":return 0;default:return parseInt(e)}}),Int8Array)),c=ag.ofIntArray(ag.mapToArray(a.bond_type,(e=>{switch(e){case"ar":case"am":return 17;case"du":case"nc":return 0;default:return 1}}),Int8Array)),u=jk.fromData({pairs:{key:r,indexA:e,indexB:t,order:l,flag:c},count:i.count},{maxDistance:s?-1:1/0}),d=h.representative;if(jk.Provider.set(d,u),qJ.Provider.set(d,{data:i.charge,type:o.charge_type}),s){const e=D0(s);e&&xO.Provider.set(d,e)}n.push(d)}}return new zj(n)}(e,t)))}!function(e){e.is=function(e){return"mol2"===(null===e||void 0===e?void 0:e.kind)},e.create=function(e){return{kind:"mol2",name:e.name,data:e}}}(T0||(T0={}));const Q0=new Uint32Array([0,0,0,0,0,0,0,0,0,8,10,12,16,20,25,32,40,50,64,80,101,128,161,203,256,322,406,512,645,812,1024,1290,1625,2048,2580,3250,4096,5060,6501,8192,10321,13003,16384,20642,26007,32768,41285,52015,65536,82570,104031,131072,165140,208063,262144,330280,416127,524287,660561,832255,1048576,1321122,1664510,2097152,2642245,3329021,4194304,5284491,6658042,8388607,10568983,13316085,16777216]),M0=9;var R0,P0;function O0(){throw new Error("(xdrfile error) Undefined error.")}function F0(e){return Tw.create("Parse XTC",(async t=>{try{t.update({canAbort:!0,message:"Parsing trajectory..."});const n=await async function(e,t){const n=new DataView(t.buffer,t.byteOffset),r={frames:[],boxes:[],times:[],timeOffset:0,deltaTime:0},o=r.frames,i=r.boxes,a=r.times,s=[0,0,0,0,0,0],l=[0,0,0],c=[0,0,0],u=[0,0,0],d=[.1,.1,.1],A=[.1,.1,.1];let f=0;const p=R0.buf;for(;;){let r;const h=n.getInt32(f+4);f+=12,a.push(n.getFloat32(f)),f+=4;const g=new Float32Array(9);for(let e=0;e<9;++e)g[e]=10*n.getFloat32(f),f+=4;if(i.push(g),h<=9){r={count:h/3,x:new Float32Array(h/3),y:new Float32Array(h/3),z:new Float32Array(h/3)};for(let e=0;e<h/3;++e)r.x[e]=n.getFloat32(f),r.y[e]=n.getFloat32(f),r.z[e]=n.getFloat32(f),f+=4}else{p[0]=p[1]=p[2]=0,l[0]=l[1]=l[2]=0,u[0]=u[1]=u[2]=0,c[0]=c[1]=c[2]=0,d[0]=d[1]=d[2]=0,A[0]=A[1]=A[2]=0,r={count:h,x:new Float32Array(h),y:new Float32Array(h),z:new Float32Array(h)};let e=0;const o=n.getInt32(f);f+=4;const i=n.getFloat32(f);let a;f+=4,s[0]=n.getInt32(f),s[1]=n.getInt32(f+4),s[2]=n.getInt32(f+8),s[3]=n.getInt32(f+12),s[4]=n.getInt32(f+16),s[5]=n.getInt32(f+20),l[0]=s[3]-s[0]+1,l[1]=s[4]-s[1]+1,l[2]=s[5]-s[2]+1,f+=24,(l[0]|l[1]|l[2])>16777215?(c[0]=R0.sizeOfInt(l[0]),c[1]=R0.sizeOfInt(l[1]),c[2]=R0.sizeOfInt(l[2]),a=0):a=R0.sizeOfInts(3,l);let g=n.getInt32(f);f+=4;let m=g-1;m=M0>m?M0:m;let y=Q0[m]/2|0,v=Q0[g]/2|0;u[0]=u[1]=u[2]=Q0[g];const b=4*Math.ceil(n.getInt32(f)/4);f+=4;const C=1/i;let I=0,E=0;for(d[0]=d[1]=d[2]=0;E<o;){0===a?(d[0]=R0.decodeBits(t,f,c[0]),d[1]=R0.decodeBits(t,f,c[1]),d[2]=R0.decodeBits(t,f,c[2])):R0.decodeInts(t,f,a,l,d),E++,d[0]+=s[0],d[1]+=s[1],d[2]+=s[2],A[0]=d[0],A[1]=d[1],A[2]=d[2];let n=0;if(1===R0.decodeBits(t,f,1)&&(I=R0.decodeBits(t,f,5),n=I%3,I-=n,n--),I>0){d[0]=d[1]=d[2]=0;for(let n=0;n<I;n+=3){if(R0.decodeInts(t,f,g,u,d),E++,d[0]+=A[0]-v,d[1]+=A[1]-v,d[2]+=A[2]-v,0===n){let t=d[0];d[0]=A[0],A[0]=t,t=d[1],d[1]=A[1],A[1]=t,t=d[2],d[2]=A[2],A[2]=t,r.x[e]=A[0]*C,r.y[e]=A[1]*C,r.z[e]=A[2]*C,e++}else A[0]=d[0],A[1]=d[1],A[2]=d[2];r.x[e]=d[0]*C,r.y[e]=d[1]*C,r.z[e]=d[2]*C,e++}}else r.x[e]=d[0]*C,r.y[e]=d[1]*C,r.z[e]=d[2]*C,e++;g+=n,n<0?(v=y,y=g>M0?Q0[g-1]/2|0:0):n>0&&(y=v,v=Q0[g]/2|0),u[0]=u[1]=u[2]=Q0[g],0!==u[0]&&0!==u[1]&&0!==u[2]||O0()}f+=b}for(let e=0;e<h;e++)r.x[e]*=10,r.y[e]*=10,r.z[e]*=10;if(o.push(r),e.shouldUpdate&&await e.update({current:f,max:t.length}),f>=t.length)break}return a.length>=1&&(r.timeOffset=a[0]),a.length>=2&&(r.deltaTime=a[1]-a[0]),r}(t,e);return mF.success(n)}catch(l0e){return mF.error(""+l0e)}}))}function N0(e){let t=e.position>=e.data.length-1?0:+hF.readLine(e);isNaN(t)&&(t=0);const n=hF.readLine(e),r=new Float64Array(t),o=new Float64Array(t),i=new Float64Array(t),a=new Array(t);for(let s=0;s<t;++s){const t=hF.readLineTrim(e).split(/\s+/g);a[s]=t[0],r[s]=+t[1],o[s]=+t[2],i[s]=+t[3]}return{count:t,comment:n,x:ag.ofFloatArray(r),y:ag.ofFloatArray(o),z:ag.ofFloatArray(i),type_symbol:ag.ofStringArray(a)}}function L0(e){return Tw.create("Parse Mol",(async()=>function(e){const t=hF(e),n=[];for(;;){const e=N0(t);if(0===e.count)break;n.push(e)}const r={molecules:n};return mF.success(r)}(e)))}function U0(e){return Tw.create("Parse XYZ",(t=>function(e,t){const{molecules:n}=e;let r=0;for(const y of n)r+=y.count;const o=new Array(r),i=new Int32Array(r),a=new Float32Array(r),s=new Float32Array(r),l=new Float32Array(r),c=new Int32Array(r);let u=0;for(let y=0;y<n.length;y++){const e=n[y];for(let t=0;t<e.count;t++)o[u]=e.type_symbol.value(t),a[u]=e.x.value(t),s[u]=e.y.value(t),l[u]=e.z.value(t),i[u]=t,c[u]=y,u++}const d=ag.ofConst("MOL",r,ag.Schema.str),A=ag.ofConst("A",r,ag.Schema.str),f=ag.ofConst(1,r,ag.Schema.int),p=ag.ofStringArray(o),h=sg.ofPartialColumns(WN.atom_site,{auth_asym_id:A,auth_atom_id:p,auth_comp_id:d,auth_seq_id:f,Cartn_x:ag.ofFloatArray(a),Cartn_y:ag.ofFloatArray(s),Cartn_z:ag.ofFloatArray(l),id:ag.ofIntArray(i),label_asym_id:A,label_atom_id:p,label_comp_id:d,label_seq_id:f,label_entity_id:ag.ofConst("1",r,ag.Schema.str),occupancy:ag.ofConst(1,r,ag.Schema.float),type_symbol:p,pdbx_PDB_model_num:ag.ofIntArray(c)},r),g=new JN;g.setNames([["MOL","Unknown Entity"]]),g.getEntityId("MOL",0,"A");const m=new oL(f,p);return m.setNames([["MOL","Unknown Molecule"]]),m.add("MOL",0),Hj(KN({entity:g.getEntityTable(),chem_comp:m.getChemCompTable(),atom_site:h}),P0.create(e),t)}(e,t)))}function G0(e){hF.skipWhitespace(e),hF.eatValue(e)}function j0(e,t){const{position:n}=e;hF.skipWhitespace(e),hF.eatValue(e),hF.trim(e,n,e.position),gF.addUnchecked(t,e.tokenStart,e.tokenEnd)}!function(e){e.sizeOfInt=function(e){let t=1,n=0;for(;e>=t&&n<32;)n++,t<<=1;return n};const t=new Uint8Array(32);e.sizeOfInts=function(e,n){let r=1,o=0;t[0]=1;for(let a=0;a<e;a++){let e,o=0;for(e=0;e<r;e++)o+=t[e]*n[a],t[e]=255&o,o>>=8;for(;0!==o;)t[e++]=255&o,o>>=8;r=e}let i=1;for(r--;t[r]>=i;)o++,i*=2;return o+8*r};const n=new ArrayBuffer(24);e.buf=new Int32Array(n);const r=new Uint32Array(n);function o(t,n,o){let i=o;const a=(1<<i)-1;let s=r[1],l=r[2],c=e.buf[0],u=0;for(;i>=8;)l=l<<8|t[n+c++],u|=l>>s<<i-8,i-=8;return i>0&&(s<i&&(s+=8,l=l<<8|t[n+c++]),s-=i,u|=l>>s&(1<<i)-1),u&=a,e.buf[0]=c,e.buf[1]=s,e.buf[2]=l,u}function i(t,n){let o=r[2];const i=e.buf[0];return o=o<<8|t[n+i],e.buf[0]=i+1,e.buf[2]=o,o>>r[1]&255}e.decodeBits=o;const a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];e.decodeInts=function(e,t,n,r,s){let l=n,c=0;for(a[0]=0,a[1]=0,a[2]=0,a[3]=0;l>8;)a[c++]=i(e,t),l-=8;l>0&&(a[c++]=o(e,t,l));for(let o=2;o>0;o--){let e=0;const t=r[o];for(let n=c-1;n>=0;n--){e=e<<8|a[n];const r=e/t|0;a[n]=r,e-=r*t}s[o]=e}s[0]=a[0]|a[1]<<8|a[2]<<16|a[3]<<24}}(R0||(R0={})),function(e){e.is=function(e){return"xyz"===(null===e||void 0===e?void 0:e.kind)},e.create=function(e){return{kind:"xyz",name:"xyz",data:e}}}(P0||(P0={}));const z0="$$$$";function H0(e){const t=hF.readLine(e).trim(),n=hF.readLine(e).trim(),r=hF.readLine(e).trim(),o=hF.readLine(e),i=o.trim().endsWith("V3000");const{atomCount:a,bondCount:s}=i?function(e){const t=gF.create(e.data,1),n=gF.create(e.data,1);return hF.eatLine(e),G0(e),G0(e),G0(e),j0(e,t),j0(e,n),hF.eatLine(e),{atomCount:nQ(t)(ag.Schema.int).value(0),bondCount:nQ(n)(ag.Schema.int).value(0)}}(e):function(e){return{atomCount:+e.substr(0,3),bondCount:+e.substr(3,3)}}(o);if(Number.isNaN(a)||Number.isNaN(s)){for(;e.position<e.length;){if(hF.readLine(e).startsWith(z0))break}return}const l={atomIdx:ag.ofConst(0,a,ag.Schema.int),charge:ag.ofConst(0,a,ag.Schema.int)},c=i?function(e,t){const n=gF.create(e.data,2*t),r=gF.create(e.data,2*t),o=gF.create(e.data,2*t),i=gF.create(e.data,2*t);for(let a=0;a<t;++a){hF.markLine(e),G0(e),G0(e),G0(e);const{position:t}=e;j0(e,i),j0(e,n),j0(e,r),j0(e,o),e.position=t}return hF.eatLine(e),hF.eatLine(e),{count:t,x:nQ(n)(ag.Schema.float),y:nQ(r)(ag.Schema.float),z:nQ(o)(ag.Schema.float),type_symbol:nQ(i)(ag.Schema.str),formal_charge:ag.ofConst(0,t,ag.Schema.int)}}(e,a):a0(e,a),u=i?function(e,t){const n=gF.create(e.data,2*t),r=gF.create(e.data,2*t),o=gF.create(e.data,2*t);for(let i=0;i<t;++i){hF.markLine(e),G0(e),G0(e),G0(e);const{position:t}=e;j0(e,o),j0(e,n),j0(e,r),e.position=t}return hF.eatLine(e),hF.eatLine(e),{count:t,atomIdxA:nQ(n)(ag.Schema.float),atomIdxB:nQ(r)(ag.Schema.float),order:nQ(o)(ag.Schema.float)}}(e,s):s0(e,s),d=i?l:c0(e),A=function(e){const t=gF.create(e.data,32),n=gF.create(e.data,32);for(;e.position<e.length;){const r=hF.readLine(e);if(r.startsWith(z0))break;if(r&&r.startsWith("> ")){gF.add(t,e.tokenStart+2,e.tokenEnd),hF.markLine(e);const r=e.tokenStart;let o=e.tokenEnd,i=!1;for(;e.position<e.length;){const t=hF.readLine(e);if(!t||t.startsWith(z0)||t.startsWith("> ")){gF.add(n,r,o),i=!0;break}o=e.tokenEnd}i||gF.add(n,r,o)}}return{dataHeader:nQ(t)(ag.Schema.str),data:nQ(n)(ag.Schema.str)}}(e);return{molFile:{title:t,program:n,comment:r,atoms:c,bonds:u,formalCharges:d},dataItems:A}}function V0(e){return Tw.create("Parse Sdf",(async()=>function(e){const t=hF(e),n=[];for(;t.position<t.length;){const e=H0(t);e&&n.push(e)}return mF.success({compounds:n})}(e)))}var q0;function Y0(e){return Tw.create("Parse SDF",(t=>d0(e.molFile,q0.create(e),t)))}function X0(e){return Tw.create("Parse TRR",(async t=>{try{t.update({canAbort:!0,message:"Parsing trajectory..."});const n=await async function(e){const t=new DataView(e.buffer),n={frames:[],boxes:[],times:[],timeOffset:0,deltaTime:0},r=n.frames,o=n.boxes,i=n.times;let a=0;for(;;){a+=8;const n=t.getInt32(a);a+=4,a+=n;const s=t.getInt32(a+8),l=t.getInt32(a+12),c=t.getInt32(a+16),u=t.getInt32(a+28),d=t.getInt32(a+32),A=t.getInt32(a+36),f=t.getInt32(a+40);a+=52;const p=s/9,h=3*f;if(8===p?i.push(t.getFloat64(a)):i.push(t.getFloat32(a)),a+=2*p,s){const e=new Float32Array(9);if(8===p)for(let n=0;n<9;++n)e[n]=10*t.getFloat64(a),a+=8;else for(let n=0;n<9;++n)e[n]=10*t.getFloat32(a),a+=4;o.push(e)}if(a+=l,a+=c,u){const n=new Float32Array(f),o=new Float32Array(f),i=new Float32Array(f);if(8===p)for(let e=0;e<f;++e)n[e]=10*t.getFloat64(a),o[e]=10*t.getFloat64(a+8),i[e]=10*t.getFloat64(a+16),a+=24;else{const t=new Uint32Array(e.buffer,a,h);for(let e=0;e<h;++e){const n=t[e];t[e]=(255&n)<<24|(65280&n)<<8|n>>8&65280|n>>24&255}const r=new Float32Array(e.buffer,a,h);for(let e=0;e<f;++e)n[e]=10*r[3*e],o[e]=10*r[3*e+1],i[e]=10*r[3*e+2],a+=12}r.push({count:f,x:n,y:o,z:i})}if(a+=d,a+=A,a>=e.byteLength)break}return i.length>=1&&(n.timeOffset=i[0]),i.length>=2&&(n.deltaTime=i[1]-i[0]),n}(e);return mF.success(n)}catch(l0e){return mF.error(""+l0e)}}))}!function(e){e.is=function(e){return"sdf"===(null===e||void 0===e?void 0:e.kind)},e.create=function(e){return{kind:"sdf",name:e.molFile.title,data:e}}}(q0||(q0={}));const W0=[];class K0{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._mark=0,this._marks=[],this.offset=0,this.littleEndian=!0;let n=!1;void 0===e&&(e=8192),"number"===typeof e?e=new ArrayBuffer(e):n=!0;const r=t.offset?t.offset>>>0:0,o=e.byteLength-r;let i=r;e instanceof ArrayBuffer||(e.byteLength!==e.buffer.byteLength&&(i=e.byteOffset+r),e=e.buffer),this._lastWrittenByte=n?o:0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=i,this._data=new DataView(this.buffer,i,o)}available(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e){return void 0===e&&(e=1),this.offset+=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(void 0===e)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e){if(void 0===e&&(e=1),!this.available(e)){const t=2*(this.offset+e),n=new Uint8Array(t);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=this.byteLength=t,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e){void 0===e&&(e=1);const t=new Uint8Array(e);for(let n=0;n<e;n++)t[n]=this.readByte();return t}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;W0.length=e;for(let t=0;t<e;t++)W0[t]=this.readChar();return W0.join("")}writeBoolean(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this._lastWrittenByte)}_updateLastWrittenByte(){this.offset>this._lastWrittenByte&&(this._lastWrittenByte=this.offset)}}function J0(e,t){if(e)throw new TypeError("Not a valid NetCDF v3.x file: "+t)}function Z0(e){e.offset%4!==0&&e.skip(4-e.offset%4)}function $0(e){const t=e.readUint32(),n=e.readChars(t);return Z0(e),n}const e1={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};function t1(e){switch(Number(e)){case e1.BYTE:return"byte";case e1.CHAR:return"char";case e1.SHORT:return"short";case e1.INT:return"int";case e1.FLOAT:return"float";case e1.DOUBLE:return"double";default:return"undefined"}}function n1(e){switch(Number(e)){case e1.BYTE:case e1.CHAR:return 1;case e1.SHORT:return 2;case e1.INT:case e1.FLOAT:return 4;case e1.DOUBLE:return 8;default:return-1}}function r1(e){switch(String(e)){case"byte":return e1.BYTE;case"char":return e1.CHAR;case"short":return e1.SHORT;case"int":return e1.INT;case"float":return e1.FLOAT;case"double":return e1.DOUBLE;default:return-1}}function o1(e,t){if(1!==e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=t();return n}return t()}function i1(e,t,n){switch(t){case e1.BYTE:return e.readBytes(n);case e1.CHAR:return function(e){if(0===e.charCodeAt(e.length-1))return e.substring(0,e.length-1);return e}(e.readChars(n));case e1.SHORT:return o1(n,e.readInt16.bind(e));case e1.INT:return o1(n,e.readInt32.bind(e));case e1.FLOAT:return o1(n,e.readFloat32.bind(e));case e1.DOUBLE:return o1(n,e.readFloat64.bind(e));default:return void J0(!0,"non valid type "+t)}}const a1=0,s1=10,l1=11,c1=12;function u1(e,t){const n={recordDimension:{length:e.readUint32()}};n.version=t;const r=function(e){let t,n,r;const o=e.readUint32();if(o===a1)return J0(e.readUint32()!==a1,"wrong empty tag for list of dimensions"),[];{J0(o!==s1,"wrong tag for list of dimensions");const i=e.readUint32();t=new Array(i);for(let o=0;o<i;o++){const i=$0(e),a=e.readUint32();0===a&&(n=o,r=i),t[o]={name:i,size:a}}return{dimensions:t,recordId:n,recordName:r}}}(e);n.recordDimension.id=r.recordId,n.recordDimension.name=r.recordName,n.dimensions=r.dimensions,n.globalAttributes=d1(e);const o=function(e,t,n){const r=e.readUint32();let o,i=0;if(r===a1)return J0(e.readUint32()!==a1,"wrong empty tag for list of variables"),[];{J0(r!==l1,"wrong tag for list of variables");const a=e.readUint32();o=new Array(a);for(let r=0;r<a;r++){const a=$0(e),s=e.readUint32(),l=new Array(s);for(let t=0;t<s;t++)l[t]=e.readUint32();const c=d1(e),u=e.readUint32();J0(u<1&&u>6,"non valid type "+u);const d=e.readUint32();let A=e.readUint32();2===n&&(J0(A>0,"offsets larger than 4GB not supported"),A=e.readUint32()),l[0]===t&&(i+=d),o[r]={name:a,dimensions:l,attributes:c,type:t1(u),size:d,offset:A,record:l[0]===t}}}return{variables:o,recordStep:i}}(e,r.recordId,t);return n.variables=o.variables,n.recordDimension.recordStep=o.recordStep,n}function d1(e){let t;const n=e.readUint32();if(n===a1)return J0(e.readUint32()!==a1,"wrong empty tag for list of attributes"),[];{J0(n!==c1,"wrong tag for list of attributes");const r=e.readUint32();t=new Array(r);for(let n=0;n<r;n++){const r=$0(e),o=e.readUint32();J0(o<1||o>6,"non valid type "+o);const i=e.readUint32(),a=i1(e,o,i);Z0(e),t[n]={name:r,type:t1(o),value:a}}}return t}class A1{constructor(e){const t=new K0(e);t.setBigEndian(),J0("CDF"!==t.readChars(3),"should start with CDF");const n=t.readByte();J0(n>2,"unknown version"),this.header=u1(t,n),this.buffer=t}get version(){return 1===this.header.version?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}get variables(){return this.header.variables}hasDataVariable(e){return this.header.variables&&-1!==this.header.variables.findIndex((t=>t.name===e))}getDataVariable(e){var t;let n;if(n="string"===typeof e?null===(t=this.header.variables)||void 0===t?void 0:t.find((t=>t.name===e)):e,void 0===n)throw new Error("variable not found");return this.buffer.seek(n.offset),n.record?function(e,t,n){const r=r1(t.type),o=t.size?t.size/n1(r):1,i=n.length,a=new Array(i),s=n.recordStep;for(let l=0;l<i;l++){const t=e.offset;a[l]=i1(e,r,o),e.seek(t+s)}return a}(this.buffer,n,this.header.recordDimension):function(e,t){const n=r1(t.type),r=t.size/n1(n),o=new Array(r);for(let i=0;i<r;i++)o[i]=i1(e,n,1);return o}(this.buffer,n)}}function f1(e){return Tw.create("Parse NCTRAJ",(async t=>{try{t.update({canAbort:!0,message:"Parsing trajectory..."});const n=await async function(e){const t=new A1(e),n={coordinates:[],time:[],timeOffset:0,deltaTime:1};for(const r of t.getDataVariable("coordinates"))n.coordinates.push(r);if(t.hasDataVariable("velocities")){const e=[];for(const n of t.getDataVariable("velocities"))e.push(n);n.velocities=e}if(t.hasDataVariable("forces")){const e=[];for(const n of t.getDataVariable("forces"))e.push(n);n.forces=e}if(t.hasDataVariable("cell_lengths")){const e=[];for(const n of t.getDataVariable("cell_lengths"))e.push(n);n.cell_lengths=e}if(t.hasDataVariable("cell_angles")){const e=[];for(const n of t.getDataVariable("cell_angles"))e.push(n);n.cell_angles=e}if(t.hasDataVariable("time")){const e=[];for(const n of t.getDataVariable("time"))e.push(n);n.time=e}return n.time&&(n.time.length>=1&&(n.timeOffset=n.time[0]),n.time.length>=2&&(n.deltaTime=n.time[1]-n.time[0])),n}(e);return mF.success(n)}catch(l0e){return mF.error(""+l0e)}}))}var p1,h1;function g1(e){return Tw.create("Parse PRMTOP",(async t=>{const n=p1.fromPrmtop(e),r=function(e){const{pointers:t,residuePointer:n,residueLabel:r,atomName:o}=e,i=t.NATOM,a=t.NRES,s=new Uint32Array(i),l=[],c=(e,t,n)=>{const o=r.value(e);for(let r=t,i=n;r<i;++r)s[r]=e+1,l[r]=o};for(let S=0,D=a-1;S<D;++S)c(S,n.value(S)-1,n.value(S+1)-1);c(a-1,n.value(a-1)-1,i);const u=ag.ofIntArray(s),d=ag.ofStringArray(l),A=new Array(i),f=new Array(i),p=new Uint32Array(i),h=new Uint32Array(i),g=new JN,m=new oL(u,o);let y="",v=0,b="",C=0,I=0,E=-1;for(let S=0,D=i;S<D;++S){const e=u.value(S);if(e!==E){const t=d.value(S),n=OM(m.add(t,S).type,t);n!==I&&(b=SJ(v),v+=1,C=0),y=g.getEntityId(t,n,b),C+=1,E=e,I=n}A[S]=y,f[S]=b,p[S]=C,h[S]=S}const x=ag.ofIntArray(h),B=ag.ofStringArray(f),w=new Array(i);for(let S=0;S<i;++S)w[S]=wJ(o.value(S),d.value(S));const _=sg.ofPartialColumns(WN.atom_site,{auth_asym_id:B,auth_atom_id:ag.asArrayColumn(o),auth_comp_id:d,auth_seq_id:u,id:ag.asArrayColumn(x),label_asym_id:B,label_atom_id:ag.asArrayColumn(o),label_comp_id:d,label_seq_id:ag.ofIntArray(p),label_entity_id:ag.ofStringArray(A),occupancy:ag.ofConst(1,i,ag.Schema.float),type_symbol:ag.ofStringArray(w),pdbx_PDB_model_num:ag.ofConst(1,i,ag.Schema.int)},i);return KN({entity:g.getEntityTable(),chem_comp:m.getChemCompTable(),atom_site:_})}(e),{pointers:{NBONH:o,NBONA:i},bondsIncHydrogen:a,bondsWithoutHydrogen:s}=e,l=o+i,c={indexA:ag.ofLambda({value:e=>e<o?a.value(3*e)/3:s.value(3*(e-o))/3,rowCount:l,schema:ag.Schema.int}),indexB:ag.ofLambda({value:e=>e<o?a.value(3*e+1)/3:s.value(3*(e-o)+1)/3,rowCount:l,schema:ag.Schema.int}),order:ag.ofConst(1,l,ag.Schema.int)};return Lk.create(e.title.join(" ")||"PRMTOP",r,c,n)}))}function m1(e){return Tw.create("Parse TOP",(async t=>{const n=h1.fromTop(e),r=function(e){const{molecules:t,compounds:n}=e,r={};let o=0;for(let S=0,D=t._rowCount;S<D;++S){const e=t.compound.value(S),i=t.molCount.value(S),{atoms:a}=n[e];ag.asArrayColumn(a.atom),ag.asArrayColumn(a.resnr),ag.asArrayColumn(a.residu),o+=i*a._rowCount;let s=a.resnr.value(0);r[e]=!0;for(let t=1,n=a._rowCount;t<n;++t){const n=a.resnr.value(t);if(n!==s){r[e]=!1;break}s=n}}const i=new Array(o),a=new Uint32Array(o),s=new Array(o);let l=0;for(let S=0,D=t._rowCount;S<D;++S){const e=t.compound.value(S),o=t.molCount.value(S),{atoms:c}=n[e],u=r[e];for(let t=0;t<o;++t)for(let e=0,n=c._rowCount;e<n;++e)i[l]=c.atom.value(e),a[l]=c.resnr.value(e),s[l]=c.residu.value(e),u&&(a[l]+=t),l+=1}const c=ag.ofStringArray(i),u=ag.ofIntArray(a),d=ag.ofStringArray(s),A=new Array(o),f=new Array(o),p=new Uint32Array(o),h=new Uint32Array(o),g=new JN,m=new oL(u,c);let y="",v=0,b="",C=0,I=0,E=-1;for(let S=0,D=o;S<D;++S){const e=u.value(S);if(e!==E){const t=d.value(S),n=OM(m.add(t,S).type,t);n!==I&&(b=SJ(v),v+=1,C=0),y=g.getEntityId(t,n,b),C+=1,E=e,I=n}A[S]=y,f[S]=b,p[S]=C,h[S]=S}const x=ag.ofIntArray(h),B=ag.ofStringArray(f),w=new Array(o);for(let S=0;S<o;++S)w[S]=wJ(c.value(S),d.value(S));const _=sg.ofPartialColumns(WN.atom_site,{auth_asym_id:B,auth_atom_id:ag.asArrayColumn(c),auth_comp_id:d,auth_seq_id:u,id:ag.asArrayColumn(x),label_asym_id:B,label_atom_id:ag.asArrayColumn(c),label_comp_id:d,label_seq_id:ag.ofIntArray(p),label_entity_id:ag.ofStringArray(A),occupancy:ag.ofConst(1,o,ag.Schema.float),type_symbol:ag.ofStringArray(w),pdbx_PDB_model_num:ag.ofConst(1,o,ag.Schema.int)},o);return KN({entity:g.getEntityTable(),chem_comp:m.getChemCompTable(),atom_site:_})}(e),o=function(e){const{molecules:t,compounds:n}=e,r=[],o=[];let i=0;for(let a=0,s=t._rowCount;a<s;++a){const e=t.compound.value(a),s=t.molCount.value(a),{atoms:l,bonds:c}=n[e];if(c)for(let t=0;t<s;++t){for(let e=0,t=c._rowCount;e<t;++e)r.push(c.ai.value(e)-1+i),o.push(c.aj.value(e)-1+i);i+=l._rowCount}else if("TIP3"===e)for(let t=0;t<s;++t)r.push(0+i),o.push(1+i),r.push(0+i),o.push(2+i),i+=l._rowCount;else i+=s*l._rowCount}return{indexA:ag.ofIntArray(r),indexB:ag.ofIntArray(o),order:ag.ofConst(1,r.length,ag.Schema.int)}}(e);return Lk.create(e.system||"TOP",r,o,n)}))}!function(e){e.is=function(e){return"prmtop"===(null===e||void 0===e?void 0:e.kind)},e.fromPrmtop=function(e){return{kind:"prmtop",name:e.title.join(" ")||"PRMTOP",data:e}}}(p1||(p1={})),function(e){e.is=function(e){return"top"===(null===e||void 0===e?void 0:e.kind)},e.fromTop=function(e){return{kind:"top",name:e.system||"TOP",data:e}}}(h1||(h1={}));const y1=Zz.BuiltIn({name:"coordinates-from-dcd",display:{name:"Parse DCD",description:"Parse DCD binary data."},from:[Jz.Data.Binary],to:Jz.Molecule.Coordinates})({apply(e){let{a:t}=e;return Tw.create("Parse DCD",(async e=>{const n=await function(e){return Tw.create("Parse DCD",(async t=>{try{const t=KH(e);return mF.success(t)}catch(l0e){return mF.error(l0e)}}))}(t.data).runInContext(e);if(n.isError)throw new Error(n.message);const r=await(o=n.result,Tw.create("Parse DCD",(async e=>{await e.update("Converting to coordinates");const{header:t}=o,n=t.DELTA?Kk(20.45482949774598*t.DELTA,"ps"):Kk(1,"step"),r=t.ISTART>=1?Kk((t.ISTART-1)*n.value,n.unit):Kk(0,n.unit),i=[];for(let a=0,s=o.frames.length;a<s;++a){const e=o.frames[a],t={elementCount:e.elementCount,time:Kk(r.value+n.value*a,n.unit),x:e.x,y:e.y,z:e.z,xyzOrdering:{isIdentity:!0}};if(e.cell){const n=e.cell;n[1]>=-1&&n[1]<=1&&n[3]>=-1&&n[3]<=1&&n[4]>=-1&&n[4]<=1?t.cell=CJ.create(qh.create(n[0],n[2],n[5]),qh.create(Np(90-90*Math.asin(n[1])/Op),Np(90-90*Math.asin(n[3])/Op),Np(90-90*Math.asin(n[4])/Op))):n[0]<0||n[1]<0||n[2]<0||n[3]<0||n[4]<0||n[5]<0||n[3]>180||n[4]>180||n[5]>180?t.cell=CJ.fromBasis(qh.create(n[0],n[1],n[3]),qh.create(n[1],n[2],n[4]),qh.create(n[3],n[4],n[5])):t.cell=CJ.create(qh.create(n[0],n[2],n[5]),qh.create(Np(Hh(n[1],0,zh)?90:n[1]),Np(Hh(n[3],0,zh)?90:n[3]),Np(Hh(n[4],0,zh)?90:n[4])))}i.push(t)}return Nk.create(i,n,r)}))).runInContext(e);var o;return new Jz.Molecule.Coordinates(r,{label:t.label,description:"Coordinates"})}))}}),v1=Zz.BuiltIn({name:"coordinates-from-xtc",display:{name:"Parse XTC",description:"Parse XTC binary data."},from:[Jz.Data.Binary],to:Jz.Molecule.Coordinates})({apply(e){let{a:t}=e;return Tw.create("Parse XTC",(async e=>{const n=await F0(t.data).runInContext(e);if(n.isError)throw new Error(n.message);const r=await(o=n.result,Tw.create("Parse XTC",(async e=>{await e.update("Converting to coordinates");const t=Kk(o.deltaTime,"step"),n=Kk(o.timeOffset,t.unit),r=[];for(let i=0,a=o.frames.length;i<a;++i){const e=o.boxes[i],a=qh.fromArray(qh(),e,0),s=qh.fromArray(qh(),e,3),l=qh.fromArray(qh(),e,6);r.push({elementCount:o.frames[i].count,cell:CJ.fromBasis(a,s,l),x:o.frames[i].x,y:o.frames[i].y,z:o.frames[i].z,xyzOrdering:{isIdentity:!0},time:Kk(n.value+t.value*i,t.unit)})}return Nk.create(r,t,n)}))).runInContext(e);var o;return new Jz.Molecule.Coordinates(r,{label:t.label,description:"Coordinates"})}))}}),b1=Zz.BuiltIn({name:"coordinates-from-trr",display:{name:"Parse TRR",description:"Parse TRR binary data."},from:[Jz.Data.Binary],to:Jz.Molecule.Coordinates})({apply(e){let{a:t}=e;return Tw.create("Parse TRR",(async e=>{const n=await X0(t.data).runInContext(e);if(n.isError)throw new Error(n.message);const r=await(o=n.result,Tw.create("Parse TRR",(async e=>{await e.update("Converting to coordinates");const t=Kk(o.deltaTime,"step"),n=Kk(o.timeOffset,t.unit),r=[];for(let i=0,a=o.frames.length;i<a;++i){const e=o.boxes[i],a=qh.fromArray(qh(),e,0),s=qh.fromArray(qh(),e,3),l=qh.fromArray(qh(),e,6);r.push({elementCount:o.frames[i].count,cell:CJ.fromBasis(a,s,l),x:o.frames[i].x,y:o.frames[i].y,z:o.frames[i].z,xyzOrdering:{isIdentity:!0},time:Kk(n.value+t.value*i,t.unit)})}return Nk.create(r,t,n)}))).runInContext(e);var o;return new Jz.Molecule.Coordinates(r,{label:t.label,description:"Coordinates"})}))}}),C1=Zz.BuiltIn({name:"coordinates-from-nctraj",display:{name:"Parse NCTRAJ",description:"Parse NCTRAJ binary data."},from:[Jz.Data.Binary],to:Jz.Molecule.Coordinates})({apply(e){let{a:t}=e;return Tw.create("Parse NCTRAJ",(async e=>{const n=await f1(t.data).runInContext(e);if(n.isError)throw new Error(n.message);const r=await(o=n.result,Tw.create("Parse NCTRAJ",(async e=>{await e.update("Converting to coordinates");const t=Kk(o.deltaTime,"step"),n=Kk(o.timeOffset,t.unit),r=[];for(let i=0,a=o.coordinates.length;i<a;++i){const e=o.coordinates[i],a=e.length/3,s=new Float32Array(a),l=new Float32Array(a),c=new Float32Array(a);for(let t=0,n=e.length;t<n;t+=3)s[t/3]=e[t],l[t/3]=e[t+1],c[t/3]=e[t+2];const u={elementCount:a,x:s,y:l,z:c,xyzOrdering:{isIdentity:!0},time:Kk(n.value+t.value*i,t.unit)};if(o.cell_lengths){const e=o.cell_lengths[i],t=qh.scale(qh(),qh.unitX,e[0]),n=qh.scale(qh(),qh.unitY,e[1]),r=qh.scale(qh(),qh.unitZ,e[2]);u.cell=CJ.fromBasis(t,n,r)}r.push(u)}return Nk.create(r,t,n)}))).runInContext(e);var o;return new Jz.Molecule.Coordinates(r,{label:t.label,description:"Coordinates"})}))}}),I1=Zz.BuiltIn({name:"topology-from-psf",display:{name:"PSF Topology",description:"Create topology from PSF."},from:[Jz.Format.Psf],to:Jz.Molecule.Topology})({apply(e){let{a:t}=e;return Tw.create("Create Topology",(async e=>{const n=await WJ(t.data).runInContext(e);return new Jz.Molecule.Topology(n,{label:n.label||t.label,description:"Topology"})}))}}),E1=Zz.BuiltIn({name:"topology-from-prmtop",display:{name:"PRMTOP Topology",description:"Create topology from PRMTOP."},from:[Jz.Format.Prmtop],to:Jz.Molecule.Topology})({apply(e){let{a:t}=e;return Tw.create("Create Topology",(async e=>{const n=await g1(t.data).runInContext(e);return new Jz.Molecule.Topology(n,{label:n.label||t.label,description:"Topology"})}))}}),x1=Zz.BuiltIn({name:"topology-from-top",display:{name:"TOP Topology",description:"Create topology from TOP."},from:[Jz.Format.Top],to:Jz.Molecule.Topology})({apply(e){let{a:t}=e;return Tw.create("Create Topology",(async e=>{const n=await m1(t.data).runInContext(e);return new Jz.Molecule.Topology(n,{label:n.label||t.label,description:"Topology"})}))}});const B1=Zz.BuiltIn({name:"trajectory-from-model-and-coordinates",display:{name:"Trajectory from Topology & Coordinates",description:"Create a trajectory from existing model/topology and coordinates."},from:Jz.Root,to:Jz.Molecule.Trajectory,params:{modelRef:U_.Text("",{isHidden:!0}),coordinatesRef:U_.Text("",{isHidden:!0})}})({apply(e){let{params:t,dependencies:n}=e;return Tw.create("Create trajectory from model/topology and coordinates",(async e=>{const r=n[t.coordinatesRef].data,o=await async function(e,t,n){if(t.type===Jz.Molecule.Topology.type){const r=t.data;return await Wj.trajectoryFromTopologyAndCoordinates(r,n).runInContext(e)}if(t.type===Jz.Molecule.Model.type){const e=t.data;return Wj.trajectoryFromModelAndCoordinates(e,n)}throw new Error("no model/topology found")}(e,n[t.modelRef],r),i={label:"Trajectory",description:`${o.frameCount} model${1===o.frameCount?"":"s"}`};return new Jz.Molecule.Trajectory(o,i)}))}}),w1=Zz.BuiltIn({name:"trajectory-from-blob",display:{name:"Parse Blob",description:"Parse format blob into a single trajectory."},from:Jz.Format.Blob,to:Jz.Molecule.Trajectory})({apply(e){let{a:t}=e;return Tw.create("Parse Format Blob",(async e=>{const n=[];for(const o of t.data){if("cif"!==o.kind)continue;const t=o.data.blocks[0],r=await sL(t).runInContext(e);if(0===r.frameCount)throw new Error("No models found.");for(let o=0;o<r.frameCount;o++){const t=await Tw.resolveInContext(r.getFrameAtIndex(o),e);n.push(t)}}for(let t=0;t<n.length;t++)Wj.TrajectoryInfo.set(n[t],{index:t,size:n.length});const r={label:"Trajectory",description:`${n.length} model${1===n.length?"":"s"}`};return new Jz.Molecule.Trajectory(new zj(n),r)}))}});function _1(e){return{label:`${e.representative.entry}`,description:`${e.frameCount} model${1===e.frameCount?"":"s"}`}}const S1=Zz.BuiltIn({name:"trajectory-from-mmcif",display:{name:"Trajectory from mmCIF",description:"Identify and create all separate models in the specified CIF data block"},from:Jz.Format.Cif,to:Jz.Molecule.Trajectory,params(e){if(!e)return{loadAllBlocks:U_.Optional(U_.Boolean(!1,{description:"If True, ignore Block Header and Block Index parameters and parse all datablocks into a single trajectory."})),blockHeader:U_.Optional(U_.Text(void 0,{description:"Header of the block to parse. If not specifed, Block Index parameter applies.",hideIf:e=>!0===e.loadAllBlocks})),blockIndex:U_.Optional(U_.Numeric(0,{min:0,step:1},{description:"Zero-based index of the block to parse. Only applies when Block Header parameter is not specified.",hideIf:e=>!0===e.loadAllBlocks||e.blockHeader}))};const{blocks:t}=e.data,n=t.map((e=>[e.header,e.header]));return n.push(["","[Use Block Index]"]),{loadAllBlocks:U_.Optional(U_.Boolean(!1,{description:"If True, ignore Block Header and Block Index parameters and parse all data blocks into a single trajectory."})),blockHeader:U_.Optional(U_.Select(t[0]&&t[0].header,n,{description:"Header of the block to parse. If not specifed, Block Index parameter applies.",hideIf:e=>!0===e.loadAllBlocks})),blockIndex:U_.Optional(U_.Numeric(0,{min:0,step:1,max:t.length-1},{description:"Zero-based index of the block to parse. Only applies when Block Header parameter is not specified.",hideIf:e=>!0===e.loadAllBlocks||e.blockHeader}))}}})({isApplicable:e=>e.data.blocks.length>0,apply(e){let{a:t,params:n}=e;return Tw.create("Parse mmCIF",(async e=>{var r;let o;if(n.loadAllBlocks){const n=[];for(const r of t.data.blocks){e.shouldUpdate&&await e.update(`Parsing ${r.header}...`);const t=await sL(r).runInContext(e);for(let r=0;r<t.frameCount;r++)n.push(await Tw.resolveInContext(t.getFrameAtIndex(r),e))}o=new zj(n)}else{const i=n.blockHeader||t.data.blocks[null!==(r=n.blockIndex)&&void 0!==r?r:0].header,a=t.data.blocks.find((e=>e.header===i));if(!a)throw new Error(`Data block '${[i]}' not found.`);o=a.categoryNames.includes("chem_comp_atom")&&!a.categoryNames.includes("atom_site")&&!a.categoryNames.includes("ihm_sphere_obj_site")&&!a.categoryNames.includes("ihm_gaussian_obj_site")?await lL(a).runInContext(e):await sL(a,t.data).runInContext(e)}if(0===o.frameCount)throw new Error("No models found.");const i=_1(o);return new Jz.Molecule.Trajectory(o,i)}))}}),D1=Zz.BuiltIn({name:"trajectory-from-pdb",display:{name:"Parse PDB",description:"Parse PDB string and create trajectory."},from:[Jz.Data.String],to:Jz.Molecule.Trajectory,params:{isPdbqt:U_.Boolean(!1)}})({apply(e){let{a:t,params:n}=e;return Tw.create("Parse PDB",(async e=>{const r=await function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Tw.create("Parse PDB",(async r=>mF.success({lines:await hF.readAllLinesAsync(e,r),id:t,isPdbqt:n})))}(t.data,t.label,n.isPdbqt).runInContext(e);if(r.isError)throw new Error(r.message);const o=await(i=r.result,Tw.create("Parse PDB",(async e=>{var t;await e.update("Converting to mmCIF");const n=await VJ(i),r=iL.fromFrame(n,void 0,YJ.create(i)),o=KN(r.data.db,!0),a=await Hj(o,r,e),s=null===(t=n.categories.atom_site)||void 0===t?void 0:t.getField("partial_charge");if(s&&1===a.frameCount){const e=a.representative,t=e.atomicHierarchy.atomSourceIndex,n=ag.isIdentity(t)?void 0:t.toArray({array:Int32Array}),r=s.toFloatArray(),o=n?ag.ofFloatArray(ag.mapToArray(t,(e=>r[e]),Float32Array)):ag.ofFloatArray(r);qJ.Provider.set(e,{data:o,type:"GASTEIGER"})}return a}))).runInContext(e);var i;const a=_1(o);return new Jz.Molecule.Trajectory(o,a)}))}}),T1=Zz.BuiltIn({name:"trajectory-from-gro",display:{name:"Parse GRO",description:"Parse GRO string and create trajectory."},from:[Jz.Data.String],to:Jz.Molecule.Trajectory})({apply(e){let{a:t}=e;return Tw.create("Parse GRO",(async e=>{const n=await rV(t.data).runInContext(e);if(n.isError)throw new Error(n.message);const r=await(o=n.result,Tw.create("Parse GRO",(async e=>{const t=TJ.fromGro(o),n=[];for(let r=0,i=o.structures.length;r<i;++r){const i=DJ(o.structures[r].atoms,r+1),a=await Hj(i,t,e);1===a.frameCount&&n.push(a.representative)}return new zj(n)}))).runInContext(e);var o;const i=_1(r);return new Jz.Molecule.Trajectory(r,i)}))}}),k1=Zz.BuiltIn({name:"trajectory-from-xyz",display:{name:"Parse XYZ",description:"Parse XYZ string and create trajectory."},from:[Jz.Data.String],to:Jz.Molecule.Trajectory})({apply(e){let{a:t}=e;return Tw.create("Parse XYZ",(async e=>{const n=await L0(t.data).runInContext(e);if(n.isError)throw new Error(n.message);const r=await U0(n.result).runInContext(e),o=_1(r);return new Jz.Molecule.Trajectory(r,o)}))}}),Q1=Zz.BuiltIn({name:"trajectory-from-mol",display:{name:"Parse MOL",description:"Parse MOL string and create trajectory."},from:[Jz.Data.String],to:Jz.Molecule.Trajectory})({apply(e){let{a:t}=e;return Tw.create("Parse MOL",(async e=>{const n=await u0(t.data).runInContext(e);if(n.isError)throw new Error(n.message);const r=await(o=n.result,Tw.create("Parse MOL",(e=>d0(o,void 0,e)))).runInContext(e);var o;const i=_1(r);return new Jz.Molecule.Trajectory(r,i)}))}}),M1=Zz.BuiltIn({name:"trajectory-from-sdf",display:{name:"Parse SDF",description:"Parse SDF string and create trajectory."},from:[Jz.Data.String],to:Jz.Molecule.Trajectory})({apply(e){let{a:t}=e;return Tw.create("Parse SDF",(async e=>{const n=await V0(t.data).runInContext(e);if(n.isError)throw new Error(n.message);const r=[];for(const t of n.result.compounds){const n=await Y0(t).runInContext(e);for(let t=0;t<n.frameCount;t++)r.push(await Tw.resolveInContext(n.getFrameAtIndex(t),e))}const o=new zj(r),i=_1(o);return new Jz.Molecule.Trajectory(o,i)}))}}),R1=Zz.BuiltIn({name:"trajectory-from-mol2",display:{name:"Parse MOL2",description:"Parse MOL2 string and create trajectory."},from:[Jz.Data.String],to:Jz.Molecule.Trajectory})({apply(e){let{a:t}=e;return Tw.create("Parse MOL2",(async e=>{const n=await S0(t.data,t.label).runInContext(e);if(n.isError)throw new Error(n.message);const r=await k0(n.result).runInContext(e),o=_1(r);return new Jz.Molecule.Trajectory(r,o)}))}}),P1=Zz.BuiltIn({name:"trajectory-from-cube",display:{name:"Parse Cube",description:"Parse Cube file to create a trajectory."},from:Jz.Format.Cube,to:Jz.Molecule.Trajectory})({apply(e){let{a:t}=e;return Tw.create("Parse MOL",(async e=>{const n=await(r=t.data,Tw.create("Parse Cube",(e=>g0(r,e)))).runInContext(e);var r;const o=_1(n);return new Jz.Molecule.Trajectory(n,o)}))}}),O1=Zz.BuiltIn({name:"trajectory-from-cif-core",display:{name:"Parse CIF Core",description:"Identify and create all separate models in the specified CIF data block"},from:Jz.Format.Cif,to:Jz.Molecule.Trajectory,params(e){if(!e)return{blockHeader:U_.Optional(U_.Text(void 0,{description:"Header of the block to parse. If none is specifed, the 1st data block in the file is used."}))};const{blocks:t}=e.data;return{blockHeader:U_.Optional(U_.Select(t[0]&&t[0].header,t.map((e=>[e.header,e.header])),{description:"Header of the block to parse"}))}}})({apply(e){let{a:t,params:n}=e;return Tw.create("Parse CIF Core",(async e=>{const r=n.blockHeader||t.data.blocks[0].header,o=t.data.blocks.find((e=>e.header===r));if(!o)throw new Error(`Data block '${[r]}' not found.`);const i=await function(e){const t=f0.fromFrame(e);return Tw.create("Parse CIF Core",(e=>h0(t.data.db,t,e)))}(o).runInContext(e);if(0===i.frameCount)throw new Error("No models found.");const a=_1(i);return new Jz.Molecule.Trajectory(i,a)}))}}),F1=e=>e+1,N1=e=>e-1,L1=Zz.BuiltIn({name:"model-from-trajectory",display:{name:"Molecular Model",description:"Create a molecular model from specified index in a trajectory."},from:Jz.Molecule.Trajectory,to:Jz.Molecule.Model,params:e=>e?{modelIndex:U_.Converted(F1,N1,U_.Numeric(1,{min:1,max:e.data.frameCount,step:1},{description:"Model Index",immediateUpdate:!0}))}:{modelIndex:U_.Numeric(0,{},{description:"Zero-based index of the model",immediateUpdate:!0})}})({isApplicable:e=>e.data.frameCount>0,apply(e){let{a:t,params:n}=e;return Tw.create("Model from Trajectory",(async e=>{let r=n.modelIndex%t.data.frameCount;r<0&&(r+=t.data.frameCount);const o=await Tw.resolveInContext(t.data.getFrameAtIndex(r),e),i=`Model ${r+1}`,a=1===t.data.frameCount?void 0:`of ${t.data.frameCount}`;return new Jz.Molecule.Model(o,{label:i,description:a})}))},interpolate:(e,t,n)=>({modelIndex:n>=1?t.modelIndex:e.modelIndex+Math.floor((t.modelIndex-e.modelIndex+1)*n)}),dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customProperties.dispose()}}),U1=Zz.BuiltIn({name:"structure-from-trajectory",display:{name:"Structure from Trajectory",description:"Create a molecular structure from a trajectory."},from:Jz.Molecule.Trajectory,to:Jz.Molecule.Structure})({apply(e){let{a:t}=e;return Tw.create("Build Structure",(async e=>{const n=await aG.ofTrajectory(t.data,e),r={label:"Ensemble",description:aG.elementDescription(n)};return new Jz.Molecule.Structure(n,r)}))},dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customPropertyDescriptors.dispose()}}),G1=Zz.BuiltIn({name:"structure-from-model",display:{name:"Structure",description:"Create a molecular structure (model, assembly, or symmetry) from the specified model."},from:Jz.Molecule.Model,to:Jz.Molecule.Structure,params:e=>r0.getParams(e&&e.data)})({canAutoUpdate(e){let{oldParams:t,newParams:n}=e;return r0.canAutoUpdate(t.type,n.type)},apply(e,t){let{a:n,params:r}=e;return Tw.create("Build Structure",(async e=>r0.create(t,e,n.data,r&&r.type)))},update:e=>{let{a:t,b:n,oldParams:r,newParams:o}=e;return Qp(r,o)?n.data.model===t.data?j_.UpdateResult.Unchanged:Wj.areHierarchiesEqual(t.data,n.data.model)?(n.data=n.data.remapModel(t.data),j_.UpdateResult.Updated):j_.UpdateResult.Recreate:j_.UpdateResult.Recreate},dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customPropertyDescriptors.dispose()}}),j1=qh(),z1=Yh(),H1=Yh(),V1=Zz.BuiltIn({name:"transform-structure-conformation",display:{name:"Transform Conformation"},isDecorator:!0,from:Jz.Molecule.Structure,to:Jz.Molecule.Structure,params:{transform:U_.MappedStatic("components",{components:U_.Group({axis:U_.Vec3(qh.create(1,0,0)),angle:U_.Numeric(0,{min:-180,max:180,step:.1}),translation:U_.Vec3(qh.create(0,0,0))},{isFlat:!0}),matrix:U_.Group({data:U_.Mat4(Yh.identity()),transpose:U_.Boolean(!1)},{isFlat:!0})},{label:"Kind"})}})({canAutoUpdate(e){let{newParams:t}=e;return"matrix"!==t.transform.name},apply(e){let{a:t,params:n}=e;const r=Yh();if("components"===n.transform.name){const{axis:e,angle:o,translation:i}=n.transform.params,a=t.data.boundary.sphere.center;Yh.fromTranslation(z1,qh.negate(j1,a)),Yh.fromTranslation(H1,qh.add(j1,a,i));const s=Yh.fromRotation(Yh(),Math.PI/180*o,qh.normalize(qh(),e));Yh.mul3(r,H1,s,z1)}else"matrix"===n.transform.name&&(Yh.copy(r,n.transform.params.data),n.transform.params.transpose&&Yh.transpose(r,r));const o=aG.transform(t.data,r);return new Jz.Molecule.Structure(o,{label:t.label,description:`${t.description} [Transformed]`})},dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customPropertyDescriptors.dispose()}}),q1=Zz.BuiltIn({name:"structure-selection-from-expression",display:{name:"Selection",description:"Create a molecular structure from the specified expression."},from:Jz.Molecule.Structure,to:Jz.Molecule.Structure,params:()=>({expression:U_.Value(FQ.struct.generator.all,{isHidden:!0}),label:U_.Optional(U_.Text("",{isHidden:!0}))})})({apply(e){let{a:t,params:n,cache:r}=e;const{selection:o,entry:i}=o0.createAndRun(t.data,n.expression);if(r.entry=i,_O.isEmpty(o))return MC.Null;const a=_O.unionStructure(o),s={label:`${n.label||"Selection"}`,description:aG.elementDescription(a)};return new Jz.Molecule.Structure(a,s)},update:e=>{let{a:t,b:n,oldParams:r,newParams:o,cache:i}=e;if(r.expression!==o.expression)return j_.UpdateResult.Recreate;const a=i.entry;if(a.currentStructure===t.data)return j_.UpdateResult.Unchanged;const s=o0.updateStructure(a,t.data);return _O.isEmpty(s)?j_.UpdateResult.Null:(o0.updateStructureObject(n,s,o.label),j_.UpdateResult.Updated)},dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customPropertyDescriptors.dispose()}}),Y1=Zz.BuiltIn({name:"structure-multi-selection-from-expression",display:{name:"Multi-structure Measurement Selection",description:"Create selection object from multiple structures."},from:Jz.Root,to:Jz.Molecule.Structure.Selections,params:()=>({selections:U_.ObjectList({key:U_.Text(void 0,{description:"A unique key."}),ref:U_.Text(),groupId:U_.Optional(U_.Text()),expression:U_.Value(FQ.struct.generator.empty)},(e=>e.ref),{isHidden:!0}),isTransitive:U_.Optional(U_.Boolean(!1,{isHidden:!0,description:"Remap the selections from the original structure if structurally equivalent."})),label:U_.Optional(U_.Text("",{isHidden:!0}))})})({apply(e){let{params:t,cache:n,dependencies:r}=e;const o=new Map,i=[];let a=0;for(const l of t.selections){const{selection:e,entry:t}=o0.createAndRun(r[l.ref].data,l.expression);o.set(l.key,t);const n=_O.toLociWithSourceUnits(e);i.push({key:l.key,loci:n,groupId:l.groupId}),a+=cG.size(n)}n.entries=o;const s={label:`${t.label||"Multi-selection"}`,description:`${t.selections.length} source(s), ${a} element(s) total`};return new Jz.Molecule.Structure.Selections(i,s)},update:e=>{let{b:t,oldParams:n,newParams:r,cache:o,dependencies:i}=e;if(!!n.isTransitive!==!!r.isTransitive)return j_.UpdateResult.Recreate;const a=o.entries,s=new Map,l=new Map;for(const A of t.data)l.set(A.key,A);let c=!1,u=0;const d=[];for(const A of r.selections){const e=i[A.ref].data;let t=!1;if(a.has(A.key)){const n=a.get(A.key);if(o0.isUnchanged(n,A.expression,e)&&l.has(A.key)){const e=l.get(A.key);e.groupId!==A.groupId&&(e.groupId=A.groupId,c=!0),s.set(A.key,n),d.push(e),u+=cG.size(e.loci);continue}if(n.expression!==A.expression)t=!0;else{let t=!1;if(r.isTransitive)if(aG.areUnitIdsAndIndicesEqual(n.originalStructure,e)){const t=o0.run(n,n.originalStructure);n.currentStructure=e,s.set(A.key,n);const r=cG.remap(_O.toLociWithSourceUnits(t),e);d.push({key:A.key,loci:r,groupId:A.groupId}),u+=cG.size(r),c=!0}else t=!0;else t=!0;if(t){c=!0;const t=o0.updateStructure(n,e);s.set(A.key,n);const r=_O.toLociWithSourceUnits(t);d.push({key:A.key,loci:r,groupId:A.groupId}),u+=cG.size(r)}}}else t=!0;if(t){c=!0;const{selection:t,entry:n}=o0.createAndRun(e,A.expression);s.set(A.key,n);const r=_O.toLociWithSourceUnits(t);d.push({key:A.key,loci:r}),u+=cG.size(r)}}return c?(o.entries=s,t.data=d,t.label=`${r.label||"Multi-selection"}`,t.description=`${d.length} source(s), ${u} element(s) total`,j_.UpdateResult.Updated):j_.UpdateResult.Unchanged}}),X1=Zz.BuiltIn({name:"structure-selection-from-script",display:{name:"Selection",description:"Create a molecular structure from the specified script."},from:Jz.Molecule.Structure,to:Jz.Molecule.Structure,params:()=>({script:U_.Script({language:"mol-script",expression:"(sel.atom.atom-groups :residue-test (= atom.resname ALA))"}),label:U_.Optional(U_.Text(""))})})({apply(e){let{a:t,params:n,cache:r}=e;const{selection:o,entry:i}=o0.createAndRun(t.data,n.script);r.entry=i;const a=_O.unionStructure(o),s={label:`${n.label||"Selection"}`,description:aG.elementDescription(a)};return new Jz.Molecule.Structure(a,s)},update:e=>{let{a:t,b:n,oldParams:r,newParams:o,cache:i}=e;if(!t0.areEqual(r.script,o.script))return j_.UpdateResult.Recreate;const a=i.entry;if(a.currentStructure===t.data)return j_.UpdateResult.Unchanged;const s=o0.updateStructure(a,t.data);return o0.updateStructureObject(n,s,o.label),j_.UpdateResult.Updated},dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customPropertyDescriptors.dispose()}}),W1=Zz.BuiltIn({name:"structure-selection-from-bundle",display:{name:"Selection",description:"Create a molecular structure from the specified structure-element bundle."},from:Jz.Molecule.Structure,to:Jz.Molecule.Structure,params:()=>({bundle:U_.Value(SO.Empty,{isHidden:!0}),label:U_.Optional(U_.Text("",{isHidden:!0}))})})({apply(e){let{a:t,params:n,cache:r}=e;if(n.bundle.hash!==t.data.hashCode)return MC.Null;r.source=t.data;const o=SO.toStructure(n.bundle,t.data);if(0===o.elementCount)return MC.Null;const i={label:`${n.label||"Selection"}`,description:aG.elementDescription(o)};return new Jz.Molecule.Structure(o,i)},update:e=>{let{a:t,b:n,oldParams:r,newParams:o,cache:i}=e;if(!SO.areEqual(r.bundle,o.bundle))return j_.UpdateResult.Recreate;if(o.bundle.hash!==t.data.hashCode)return j_.UpdateResult.Null;if(i.source===t.data)return j_.UpdateResult.Unchanged;i.source=t.data;const a=SO.toStructure(o.bundle,t.data);return 0===a.elementCount?j_.UpdateResult.Null:(n.label=`${o.label||"Selection"}`,n.description=aG.elementDescription(a),n.data=a,j_.UpdateResult.Updated)},dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customPropertyDescriptors.dispose()}}),K1={polymer:"polymer",protein:"protein",nucleic:"nucleic",water:"water",branched:"branched",ligand:"ligand","non-standard":"non-standard",coarse:"coarse","atomic-sequence":"atomic-sequence","atomic-het":"atomic-het",spheres:"spheres"},J1=U_.objectToOptions(K1),Z1=Zz.BuiltIn({name:"structure-complex-element",display:{name:"Complex Element",description:"Create a molecular structure from the specified model."},from:Jz.Molecule.Structure,to:Jz.Molecule.Structure,params:{type:U_.Select("atomic-sequence",J1,{isHidden:!0})}})({apply(e){let t,n,{a:r,params:o}=e;switch(o.type){case"polymer":t=Cee.polymer.query,n="Polymer";break;case"protein":t=Cee.protein.query,n="Protein";break;case"nucleic":t=Cee.nucleic.query,n="Nucleic";break;case"water":t=OU.internal.water(),n="Water";break;case"branched":t=Cee.branchedPlusConnected.query,n="Branched";break;case"ligand":t=Cee.ligandPlusConnected.query,n="Ligand";break;case"non-standard":t=Cee.nonStandardPolymer.query,n="Non-standard";break;case"coarse":t=Cee.coarse.query,n="Coarse";break;case"atomic-sequence":t=OU.internal.atomicSequence(),n="Sequence";break;case"atomic-het":t=OU.internal.atomicHet(),n="HET Groups/Ligands";break;case"spheres":t=OU.internal.spheres(),n="Coarse Spheres";break;default:Zh(o.type)}const i=t(new $O(r.data)),a=_O.unionStructure(i);return 0===a.elementCount?MC.Null:new Jz.Molecule.Structure(a,{label:n,description:aG.elementDescription(a)})},dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customPropertyDescriptors.dispose()}}),$1=Zz.BuiltIn({name:"structure-component",display:{name:"Component",description:"A molecular structure component."},from:Jz.Molecule.Structure,to:Jz.Molecule.Structure,params:()=>({type:U_.MappedStatic("static",{static:U_.Text("polymer"),expression:U_.Value(FQ.struct.generator.all),bundle:U_.Value(SO.Empty),script:U_.Script({language:"mol-script",expression:"(sel.atom.all)"})},{isHidden:!0}),nullIfEmpty:U_.Optional(U_.Boolean(!0,{isHidden:!0})),label:U_.Text("",{isHidden:!0})})})({apply(e){let{a:t,params:n,cache:r}=e;return function(e,t,n){n.source=e;let r,o=aG.Empty;switch(t.type.name){case"static":{let n;switch(t.type.params){case"all":n=Cee.all.query,r="All";break;case"polymer":n=Cee.polymer.query,r="Polymer";break;case"protein":n=Cee.protein.query,r="Protein";break;case"nucleic":n=Cee.nucleic.query,r="Nucleic";break;case"water":n=OU.internal.water(),r="Water";break;case"ion":n=Cee.ion.query,r="Ion";break;case"lipid":n=Cee.lipid.query,r="Lipid";break;case"branched":n=Cee.branchedPlusConnected.query,r="Branched";break;case"ligand":n=Cee.ligandPlusConnected.query,r="Ligand";break;case"non-standard":n=Cee.nonStandardPolymer.query,r="Non-standard";break;case"coarse":n=Cee.coarse.query,r="Coarse";break;default:Zh(t.type)}const i=n(new $O(e));o=_O.unionStructure(i);break}case"script":case"expression":{const{selection:r,entry:i}=o0.createAndRun(e,t.type.params);n.entry=i,o=_O.unionStructure(r);break}case"bundle":if(t.type.params.hash!==e.hashCode)break;o=SO.toStructure(t.type.params,e)}if(t.nullIfEmpty&&0===o.elementCount)return MC.Null;const i={label:`${t.label||r||"Component"}`,description:aG.elementDescription(o)};return new Jz.Molecule.Structure(o,i)}(t.data,n,r)},update:e=>{let{a:t,b:n,oldParams:r,newParams:o,cache:i}=e;return function(e,t,n,r,o){if(n.type.name!==r.type.name)return j_.UpdateResult.Recreate;let i=!1;switch(r.type.name){case"static":return n.type.params!==r.type.params?j_.UpdateResult.Recreate:aG.areEquivalent(e,o.source)?t.data.model===e.model?j_.UpdateResult.Unchanged:Wj.areHierarchiesEqual(e.model,t.data.model)?(t.data=t.data.remapModel(e.model),j_.UpdateResult.Updated):j_.UpdateResult.Recreate:j_.UpdateResult.Recreate;case"script":if(!t0.areEqual(n.type.params,r.type.params))return j_.UpdateResult.Recreate;case"expression":{if(n.type.params!==r.type.params)return j_.UpdateResult.Recreate;if(e===o.source)break;const a=o.entry,s=o0.updateStructure(a,e);o.source=e,t.data=_O.unionStructure(s),o0.updateStructureObject(t,s,r.label),i=!0;break}case"bundle":if(e===o.source&&SO.areEqual(n.type.params,r.type.params))break;o.source=e,r.type.params.hash!==e.hashCode?(i=0!==t.data.elementCount,t.data=0===t.data.elementCount?t.data:aG.Empty):(i=!0,t.data=SO.toStructure(r.type.params,e))}if(i){if(r.nullIfEmpty&&0===t.data.elementCount)return j_.UpdateResult.Null;t.description=aG.elementDescription(t.data)}return n.label!==r.label&&(i=!0,t.label=`${r.label||t.label}`),i?j_.UpdateResult.Updated:j_.UpdateResult.Unchanged}(t.data,n,r,o,i)},dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customPropertyDescriptors.dispose()}}),e2=Zz.BuiltIn({name:"custom-model-properties",display:{name:"Custom Model Properties"},isDecorator:!0,from:Jz.Molecule.Model,to:Jz.Molecule.Model,params:(e,t)=>t.customModelProperties.getParams(null===e||void 0===e?void 0:e.data)})({apply(e,t){let{a:n,params:r}=e;return Tw.create("Custom Props",(async e=>(await t2(n.data,t,e,r),new Jz.Molecule.Model(n.data,{label:n.label,description:n.description}))))},update(e,t){let{a:n,b:r,oldParams:o,newParams:i}=e;return Tw.create("Custom Props",(async e=>{r.data=n.data,r.label=n.label,r.description=n.description;for(const r of o.autoAttach){const e=t.customModelProperties.get(r);e&&n.data.customProperties.reference(e.descriptor,!1)}return await t2(n.data,t,e,i),j_.UpdateResult.Updated}))},dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customProperties.dispose()}});async function t2(e,t,n,r){const o={runtime:n,assetManager:t.managers.asset},{autoAttach:i,properties:a}=r;for(const s of Object.keys(a)){const n=t.customModelProperties.get(s),r=a[s];if(i.includes(s)||n.isHidden)try{await n.attach(o,e,r,!0)}catch(l0e){t.log.warn(`Error attaching model prop '${s}': ${l0e}`)}else n.set(e,r)}}const n2=Zz.BuiltIn({name:"custom-structure-properties",display:{name:"Custom Structure Properties"},isDecorator:!0,from:Jz.Molecule.Structure,to:Jz.Molecule.Structure,params:(e,t)=>t.customStructureProperties.getParams(null===e||void 0===e?void 0:e.data.root)})({apply(e,t){let{a:n,params:r}=e;return Tw.create("Custom Props",(async e=>(await r2(n.data.root,t,e,r),new Jz.Molecule.Structure(n.data,{label:n.label,description:n.description}))))},update(e,t){let{a:n,b:r,oldParams:o,newParams:i}=e;return n.data!==r.data?j_.UpdateResult.Recreate:Tw.create("Custom Props",(async e=>{r.data=n.data,r.label=n.label,r.description=n.description;for(const r of o.autoAttach){const e=t.customStructureProperties.get(r);e&&n.data.customPropertyDescriptors.reference(e.descriptor,!1)}return await r2(n.data.root,t,e,i),j_.UpdateResult.Updated}))},dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customPropertyDescriptors.dispose()}});async function r2(e,t,n,r){const o={runtime:n,assetManager:t.managers.asset},{autoAttach:i,properties:a}=r;for(const s of Object.keys(a)){const n=t.customStructureProperties.get(s),r=a[s];if(i.includes(s)||n.isHidden)try{await n.attach(o,e,r,!0)}catch(l0e){t.log.warn(`Error attaching structure prop '${s}': ${l0e}`)}else n.set(e,r)}}const o2=Zz.BuiltIn({name:"shape-from-ply",display:{name:"Shape from PLY",description:"Create Shape from PLY data"},from:Jz.Format.Ply,to:Jz.Shape.Provider,params:e=>({transforms:U_.Optional(U_.Value([],{isHidden:!0})),label:U_.Optional(U_.Text("",{isHidden:!0}))})})({apply(e){let{a:t,params:n}=e;return Tw.create("Create shape from PLY",(async e=>{const r=await function(e,t){return Tw.create("Shape Provider",(async n=>({label:"Mesh",data:{source:e,transforms:null===t||void 0===t?void 0:t.transforms},params:fJ(e),getShape:bJ(),geometryUtils:RY.Utils})))}(t.data,n).runInContext(e),o={label:n.label||"Shape"};return new Jz.Shape.Provider(r,o)}))}});function i2(e,t){return Tw.create("Create Volume",(async n=>{const{header:r,values:o}=e,i=qh.create(r.xLength,r.yLength,r.zLength);t&&t.voxelSize&&qh.mul(i,i,t.voxelSize);const a=qh.create(Np(r.alpha),Np(r.beta),Np(r.gamma)),s=r.ISPG>65536?0:r.ISPG,l=OT.create(s||"P 1",i,a),c=qh.create(r.MAPC-1,r.MAPR-1,r.MAPS-1),u=tg.convertToCanonicalAxisIndicesFastToSlow(c),d=[r.NX,r.NY,r.NZ],A=u([r.NC,r.NR,r.NS]),f=function(e){return 0===e.originX&&0===e.originY&&0===e.originZ?qh.create(e.NCSTART,e.NRSTART,e.NSSTART):qh.create(e.originX/(e.xLength/e.NX),e.originY/(e.yLength/e.NY),e.originZ/(e.zLength/e.NZ))}(r);(null===t||void 0===t?void 0:t.offset)&&qh.add(f,f,t.offset);const p=u(f),h=qh.create(p[0]/d[0],p[1]/d[1],p[2]/d[2]),g=qh.create(A[0]/d[0],A[1]/d[1],A[2]/d[2]),m=tg.Space(A,tg.invertAxisOrder(c),function(e){const t=Bz(e);switch(t){case vz.Float32:return Float32Array;case vz.Int8:return Int8Array;case vz.Int16:return Int16Array;case vz.Uint16:return Uint16Array}throw Error(`${t} is not a supported value format.`)}(r)),y=tg.create(m,tg.Data1(o)),v=0===r.AMIN&&0===r.AMAX&&0===r.AMEAN&&0===r.ARMS;return{label:null===t||void 0===t?void 0:t.label,entryId:null===t||void 0===t?void 0:t.entryId,grid:{transform:{kind:"spacegroup",cell:l,fractionalBox:XT.create(h,qh.add(qh.zero(),h,g))},cells:y,stats:{min:isNaN(r.AMIN)||v?Y_(o):r.AMIN,max:isNaN(r.AMAX)||v?q_(o):r.AMAX,mean:isNaN(r.AMEAN)||v?K_(o):r.AMEAN,sigma:isNaN(r.ARMS)||0===r.ARMS?J_(o):r.ARMS}},sourceData:a2.create(e),customProperties:new Zk,_propertyData:Object.create(null)}}))}var a2,s2,l2,c2;!function(e){e.is=function(e){return"ccp4"===(null===e||void 0===e?void 0:e.kind)},e.create=function(e){return{kind:"ccp4",name:e.name,data:e}}}(a2||(a2={})),function(e){e.is=function(e){return"dsn6"===(null===e||void 0===e?void 0:e.kind)},e.create=function(e){return{kind:"dsn6",name:e.name,data:e}}}(s2||(s2={})),function(e){e.is=function(e){return"dx"===(null===e||void 0===e?void 0:e.kind)},e.create=function(e){return{kind:"dx",name:e.name,data:e}}}(l2||(l2={})),function(e){e.is=function(e){return"segcif"===(null===e||void 0===e?void 0:e.kind)},e.create=function(e){return{kind:"segcif",name:e._name,data:e}}}(c2||(c2={}));const u2=Zz.BuiltIn({name:"volume-from-ccp4",display:{name:"Volume from CCP4/MRC/MAP",description:"Create Volume from CCP4/MRC/MAP data"},from:Jz.Format.Ccp4,to:Jz.Volume.Data,params:e=>({voxelSize:U_.Vec3(qh.create(1,1,1)),offset:U_.Vec3(qh.create(0,0,0)),entryId:U_.Text("")})})({apply(e){let{a:t,params:n}=e;return Tw.create("Create volume from CCP4/MRC/MAP",(async e=>{const r=await i2(t.data,{...n,label:t.data.name||t.label}).runInContext(e),o={label:r.label||"Volume",description:`Volume ${t.data.header.NX}\xd7${t.data.header.NX}\xd7${t.data.header.NX}`};return new Jz.Volume.Data(r,o)}))},dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customProperties.dispose()}}),d2=Zz.BuiltIn({name:"volume-from-dsn6",display:{name:"Volume from DSN6/BRIX",description:"Create Volume from DSN6/BRIX data"},from:Jz.Format.Dsn6,to:Jz.Volume.Data,params:e=>({voxelSize:U_.Vec3(qh.create(1,1,1)),entryId:U_.Text("")})})({apply(e){let{a:t,params:n}=e;return Tw.create("Create volume from DSN6/BRIX",(async e=>{const r=await function(e,t){return Tw.create("Create Volume",(async n=>{const{header:r,values:o}=e,i=qh.create(r.xlen,r.ylen,r.zlen);t&&t.voxelSize&&qh.mul(i,i,t.voxelSize);const a=qh.create(Np(r.alpha),Np(r.beta),Np(r.gamma)),s=OT.create("P 1",i,a),l=[r.xRate,r.yRate,r.zRate],c=[r.xExtent,r.yExtent,r.zExtent],u=[r.xStart,r.yStart,r.zStart],d=qh.create(u[0]/l[0],u[1]/l[1],u[2]/l[2]),A=qh.create(c[0]/l[0],c[1]/l[1],c[2]/l[2]),f=tg.Space(c,[0,1,2],Float32Array),p=tg.create(f,tg.Data1(o));return{label:null===t||void 0===t?void 0:t.label,entryId:null===t||void 0===t?void 0:t.entryId,grid:{transform:{kind:"spacegroup",cell:s,fractionalBox:XT.create(d,qh.add(qh.zero(),d,A))},cells:p,stats:{min:Y_(o),max:q_(o),mean:K_(o),sigma:void 0!==r.sigma?r.sigma:J_(o)}},sourceData:s2.create(e),customProperties:new Zk,_propertyData:Object.create(null)}}))}(t.data,{...n,label:t.data.name||t.label}).runInContext(e),o={label:r.label||"Volume",description:`Volume ${t.data.header.xExtent}\xd7${t.data.header.yExtent}\xd7${t.data.header.zExtent}`};return new Jz.Volume.Data(r,o)}))},dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customProperties.dispose()}}),A2=Zz.BuiltIn({name:"volume-from-cube",display:{name:"Volume from Cube",description:"Create Volume from Cube data"},from:Jz.Format.Cube,to:Jz.Volume.Data,params(e){const t=e?U_.Select(0,e.data.header.dataSetIds.map(((e,t)=>[t,`${e}`]))):U_.Numeric(0);return{dataIndex:t,entryId:U_.Text("")}}})({apply(e){let{a:t,params:n}=e;return Tw.create("Create volume from Cube",(async e=>{const r=await function(e,t){return Tw.create("Create Volume",(async()=>{const{header:n,values:r}=e,o=tg.Space(n.dim,[0,1,2],Float64Array);let i;if(0===n.dataSetIds.length)i=r;else{const[e,o,a]=n.dim,s=((null===t||void 0===t?void 0:t.dataIndex)||0)+1;let l=0,c=0;i=new Float64Array(e*o*a);for(let t=0;t<e;t++)for(let e=0;e<o;e++)for(let t=0;t<a;t++)i[l++]=r[c],c+=s}const a=tg.create(o,tg.Data1(i)),s=Yh.fromTranslation(Yh(),n.origin),l=Yh.fromBasis(Yh(),n.basisX,n.basisY,n.basisZ);return Yh.mul(s,s,l),{label:null===t||void 0===t?void 0:t.label,entryId:null===t||void 0===t?void 0:t.entryId,grid:{transform:{kind:"matrix",matrix:s},cells:a,stats:{min:Y_(i),max:q_(i),mean:K_(i),sigma:J_(i)}},sourceData:jW.create(e),customProperties:new Zk,_propertyData:Object.create(null)}}))}(t.data,{...n,label:t.data.name||t.label}).runInContext(e),o={label:r.label||"Volume",description:`Volume ${t.data.header.dim[0]}\xd7${t.data.header.dim[1]}\xd7${t.data.header.dim[2]}`};return new Jz.Volume.Data(r,o)}))},dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customProperties.dispose()}}),f2=Zz.BuiltIn({name:"volume-from-dx",display:{name:"Parse DX",description:"Create volume from DX data."},from:Jz.Format.Dx,to:Jz.Volume.Data})({apply(e){let{a:t}=e;return Tw.create("Parse DX",(async e=>{const n=await(r=t.data,o={label:t.data.name||t.label},Tw.create("Create Volume",(async()=>{const{header:e,values:t}=r,n=tg.Space(e.dim,[0,1,2],Float64Array),i=tg.create(n,tg.Data1(t)),a=Yh.fromTranslation(Yh(),e.min),s=Yh.fromScaling(Yh(),e.h);return Yh.mul(a,a,s),{label:null===o||void 0===o?void 0:o.label,entryId:null===o||void 0===o?void 0:o.entryId,grid:{transform:{kind:"matrix",matrix:a},cells:i,stats:{min:Y_(t),max:q_(t),mean:K_(t),sigma:J_(t)}},sourceData:l2.create(r),customProperties:new Zk,_propertyData:Object.create(null)}}))).runInContext(e);var r,o;const i={label:n.label||"Volume",description:`Volume ${t.data.header.dim[0]}\xd7${t.data.header.dim[1]}\xd7${t.data.header.dim[2]}`};return new Jz.Volume.Data(n,i)}))},dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customProperties.dispose()}}),p2=Zz.BuiltIn({name:"volume-from-density-server-cif",display:{name:"Volume from density-server CIF",description:"Identify and create all separate models in the specified CIF data block"},from:Jz.Format.Cif,to:Jz.Volume.Data,params(e){if(!e)return{blockHeader:U_.Optional(U_.Text(void 0,{description:"Header of the block to parse. If none is specifed, the 1st data block in the file is used."})),entryId:U_.Text("")};const t=e.data.blocks.slice(1);return{blockHeader:U_.Optional(U_.Select(t[0]&&t[0].header,t.map((e=>[e.header,e.header])),{description:"Header of the block to parse"})),entryId:U_.Text("")}}})({isApplicable:e=>e.data.blocks.length>0,apply(e){let{a:t,params:n}=e;return Tw.create("Parse density-server CIF",(async e=>{var r;const o=n.blockHeader||t.data.blocks[1].header,i=t.data.blocks.find((e=>e.header===o));if(!i)throw new Error(`Data block '${[o]}' not found.`);const a=wN.schema.densityServer(i),s=await VW(a,{entryId:n.entryId}).runInContext(e),[l,c,u]=s.grid.cells.space.dimensions,d={label:null!==(r=n.entryId)&&void 0!==r?r:a.volume_data_3d_info.name.value(0),description:`Volume ${l}\xd7${c}\xd7${u}`};return new Jz.Volume.Data(s,d)}))},dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customProperties.dispose()}}),h2=Zz.BuiltIn({name:"volume-from-segmentation-cif",display:{name:"Volume from Segmentation CIF"},from:Jz.Format.Cif,to:Jz.Volume.Data,params(e){const t=null===e||void 0===e?void 0:e.data.blocks.slice(1),n=t?U_.Optional(U_.Select(t[0]&&t[0].header,t.map((e=>[e.header,e.header])),{description:"Header of the block to parse"})):U_.Optional(U_.Text(void 0,{description:"Header of the block to parse. If none is specifed, the 1st data block in the file is used."}));return{blockHeader:n,segmentLabels:U_.ObjectList({id:U_.Numeric(-1),label:U_.Text("")},(e=>`${e.id} = ${e.label}`),{description:"Mapping of segment IDs to segment labels"}),ownerId:U_.Text("",{isHidden:!0,description:"Reference to the object which manages this volume"})}}})({isApplicable:e=>e.data.blocks.length>0,apply(e){let{a:t,params:n}=e;return Tw.create("Parse segmentation CIF",(async e=>{const r=n.blockHeader||t.data.blocks[1].header,o=t.data.blocks.find((e=>e.header===r));if(!o)throw new Error(`Data block '${[r]}' not found.`);const i=wN.schema.segmentation(o),a={};for(const t of n.segmentLabels)a[t.id]=t.label;const s=await function(e,t){return Tw.create("Create Segmentation Volume",(async n=>{var r;const{volume_data_3d_info:o,segmentation_data_3d:i}=e,a=OT.create(o.spacegroup_number.value(0),qh.ofArray(o.spacegroup_cell_size.value(0)),qh.scale(qh(),qh.ofArray(o.spacegroup_cell_angles.value(0)),Math.PI/180)),s=o.axis_order.value(0),l=tg.convertToCanonicalAxisIndicesFastToSlow(s),c=l(o.sample_count.value(0)),u=tg.Space(c,tg.invertAxisOrder(s),Float32Array),d=tg.create(u,tg.Data1(i.values.toArray({array:Float32Array}))),A=qh.ofArray(l(o.origin.value(0))),f=qh.ofArray(l(o.dimensions.value(0))),p={label:null===t||void 0===t?void 0:t.label,entryId:void 0,grid:{transform:{kind:"spacegroup",cell:a,fractionalBox:XT.create(A,qh.add(qh(),A,f))},cells:d,stats:{min:0,max:1,mean:0,sigma:1}},sourceData:c2.create(e),customProperties:new Zk,_propertyData:{ownerId:null===t||void 0===t?void 0:t.ownerId}};HW.PickingGranularity.set(p,"object");const h=new Map,g=new Map,{segment_id:m,set_id:y}=e.segmentation_data_table;for(let e=0,t=m.rowCount;e<t;++e){const t=m.value(e),n=y.value(e);0!==n&&0!==t&&(g.has(n)||g.set(n,new Set),g.get(n).add(t))}g.forEach(((e,t)=>{e.forEach((e=>{h.has(e)||h.set(e,new Set),h.get(e).add(t)}))}));const v=[0,0,0],b=d.space.getCoords,C=d.data,[I,E,x]=p.grid.cells.space.dimensions,B=I-1,w=E-1,_=x-1,S={};g.forEach(((e,t)=>{S[t]=[B,w,_,-1,-1,-1]}));for(let e=0,t=C.length;e<t;++e){const t=C[e];if(0===t)continue;b(e,v);const n=S[t];v[0]<n[0]&&(n[0]=v[0]),v[1]<n[1]&&(n[1]=v[1]),v[2]<n[2]&&(n[2]=v[2]),v[0]>n[3]&&(n[3]=v[0]),v[1]>n[4]&&(n[4]=v[1]),v[2]>n[5]&&(n[5]=v[2])}const D={};return h.forEach(((e,t)=>{D[t]=XT.create(qh.create(B,w,_),qh.create(-1,-1,-1))})),tw(S,((e,t)=>{g.get(parseInt(t)).forEach((t=>{const n=D[t];e[0]<n.min[0]&&(n.min[0]=e[0]),e[1]<n.min[1]&&(n.min[1]=e[1]),e[2]<n.min[2]&&(n.min[2]=e[2]),e[3]>n.max[0]&&(n.max[0]=e[3]),e[4]>n.max[1]&&(n.max[1]=e[4]),e[5]>n.max[2]&&(n.max[2]=e[5])}))})),HW.Segmentation.set(p,{segments:h,sets:g,bounds:D,labels:null!==(r=null===t||void 0===t?void 0:t.segmentLabels)&&void 0!==r?r:{}}),p}))}(i,{segmentLabels:a,ownerId:n.ownerId}).runInContext(e),[l,c,u]=s.grid.cells.space.dimensions,d={label:i.volume_data_3d_info.name.value(0),description:`Segmentation ${l}\xd7${c}\xd7${u}`};return new Jz.Volume.Data(s,d)}))},dispose(e){let{b:t}=e;null===t||void 0===t||t.data.customProperties.dispose()}}),g2=Zz.BuiltIn({name:"assign-color-volume",display:{name:"Assign Color Volume",description:"Assigns another volume to be available for coloring."},from:Jz.Volume.Data,to:Jz.Volume.Data,isDecorator:!0,params(e,t){if(!e)return{ref:U_.Text()};const n=t.state.data.select(V_.Generators.root.subtree().ofType(Jz.Volume.Data).filter((t=>{var n;return!!t.obj&&!(null===(n=t.obj)||void 0===n?void 0:n.data.colorVolume)&&t.obj!==e})));return 0===n.length?{ref:U_.Text("",{isHidden:!0})}:{ref:U_.Select(n[0].transform.ref,n.map((e=>[e.transform.ref,e.obj.label])))}}})({apply(e){let{a:t,params:n,dependencies:r}=e;return Tw.create("Assign Color Volume",(async e=>{if(!r||!r[n.ref])throw new Error("Dependency not available.");const o=r[n.ref].data,i={...t.data,colorVolume:o},a={label:t.label,description:"Volume + Colors"};return new Jz.Volume.Data(i,a)}))}}),m2=Zz.BuiltIn({name:"volume-transform",display:{name:"Transform Volume"},isDecorator:!0,from:Jz.Volume.Data,to:Jz.Volume.Data,params:{transform:U_.MappedStatic("matrix",{matrix:U_.Group({data:U_.Mat4(Yh.identity()),transpose:U_.Boolean(!1)},{isFlat:!0})},{label:"Kind"})}})({canAutoUpdate(e){let{newParams:t}=e;return"matrix"!==t.transform.name},apply(e){let{a:t,params:n}=e;const r=Yh();let o={...t.data.grid.transform};Yh.copy(r,n.transform.params.data),n.transform.params.transpose&&Yh.transpose(r,r);const i="matrix"===t.data.grid.transform.kind?t.data.grid.transform.matrix:GW.getGridToCartesianTransform(t.data.grid);o={kind:"matrix",matrix:Yh.mul(Yh(),r,i)};const a={...t.data,grid:{...t.data.grid,transform:o}};return new Jz.Volume.Data(a,{label:t.label,description:`${t.description} [Transformed]`})}}),y2=Jp(13421772),v2={};const b2={name:"carbohydrate-symbol",label:"Carbohydrate Symbol",category:Ck.Residue,factory:function e(t,n){let r;if(t.structure){const{elements:e,getElementIndices:n}=t.structure.carbohydrates,o=(t,r)=>{if(!BO.isAtomic(t))return y2;const o=n(t,r);return o.length>0?e[o[0]].component.color:y2};r=(e,t)=>t?UQ.Secondary:Vk.is(e)?o(e.unit,e.element):RP.isLocation(e)?o(e.aUnit,e.aUnit.elements[e.aIndex]):y2}else r=()=>y2;return{factory:e,granularity:"group",color:r,props:n,description:"Assigns colors according to the Symbol Nomenclature for Glycans (SNFG).",legend:hh(YQ)}},getParams:function(e){return v2},defaultValues:U_.getDefaultValues(v2),isApplicable:e=>!!e.structure&&e.structure.models.some((e=>Wj.hasCarbohydrate(e)))},C2={hue:U_.Interval([1,360],{min:0,max:360,step:1}),chroma:U_.Interval([40,70],{min:0,max:100,step:1}),luminance:U_.Interval([15,85],{min:0,max:100,step:1}),sort:U_.Select("contrast",U_.arrayToOptions(["none","contrast"]),{description:"no sorting leaves colors approximately ordered by hue"}),clusteringStepCount:U_.Numeric(50,{min:10,max:200,step:1},{isHidden:!0}),minSampleCount:U_.Numeric(800,{min:100,max:5e3,step:100},{isHidden:!0}),sampleCountFactor:U_.Numeric(5,{min:1,max:100,step:1},{isHidden:!0})},I2=2,E2=[0,0,0],x2=[0,0,0];function B2(e,t){return Wp.toHcl(E2,e),Wp.fromColor(x2,Wp.toColor(e)),E2[0]>=t.hue[0]&&E2[0]<=t.hue[1]&&E2[1]>=t.chroma[0]&&E2[1]<=t.chroma[1]&&E2[2]>=t.luminance[0]&&E2[2]<=t.luminance[1]&&x2[0]>=e[0]-I2&&x2[0]<=e[0]+I2&&x2[1]>=e[1]-I2&&x2[1]<=e[1]+I2&&x2[2]>=e[2]-I2&&x2[2]<=e[2]+I2}function w2(e,t){let n=1/0,r=0;for(let o=0;o<e.length;o++){const i=Wp.distance(t,e[o]);i<n&&(n=i,r=o)}return r}function _2(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={...U_.getDefaultValues(C2),...t};if(e<=0)return[];const r=function(e,t){const n=new Map,r=Math.ceil(Math.cbrt(e)),o=Kp(),i=Math.max((t.hue[1]-t.hue[0])/r,1),a=Math.max((t.chroma[1]-t.chroma[0])/r,1),s=Math.max((t.luminance[1]-t.luminance[0])/r,1);for(let l=t.hue[0]+i/2;l<=t.hue[1];l+=i)for(let e=t.chroma[0]+a/2;e<=t.chroma[1];e+=a)for(let r=t.luminance[0]+s/2;r<=t.luminance[1];r+=s){const i=Wp.fromHcl(Wp(),Kp.set(o,l,e,r));B2(i,t)&&n.set(Wp.toColor(i),i)}return Array.from(n.values())}(Math.max(n.minSampleCount,e*n.sampleCountFactor),n);if(r.length<e)return console.warn("Not enough samples to generate distinct colors, increase sample count."),new Array(e).fill(bk.lightgrey);const o=[],i=[],a=Math.floor(r.length/e);for(let l=0;l<r.length&&(o.push(r[l]),i.push([]),!(o.length>=e));l+=a);for(let l=1;l<=n.clusteringStepCount;++l){const e=ew(i),t=ew(r);for(let i=0;i<o.length;++i){const n=w2(t,o[i]);e[i].push(r[n]),t.splice(n,1)}for(let i=0;i<t.length;++i){e[w2(o,r[i])].push(r[i])}const n=ew(o);for(let r=0;r<e.length;++r){const t=e[r],n=t.length;if(0===n)continue;let i=0,a=0,s=0;for(const e of t)i+=e[0],a+=e[1],s+=e[2];const l=i/n,c=a/n,u=s/n;o[r]=[l,c,u]}if(Qp(n,o))break}const s="contrast"===n.sort?function(e){const t=e.slice(0),n=[t.shift()];for(;t.length>0;){const e=n[n.length-1];let r=0,o=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;++n){const i=Wp.distance(e,t[n]);i>o&&(o=i,r=n)}n.push(t.splice(r,1)[0])}return n}(o):o;return s.map((e=>Wp.toColor(e)))}const S2={type:"generate",colorList:"red-yellow-blue"};function D2(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={...S2,...e};return{palette:U_.MappedStatic(t.type,{colors:U_.Group({list:U_.ColorList(t.colorList)},{isFlat:!0}),generate:U_.Group({...C2,maxCount:U_.Numeric(75,{min:1,max:250,step:1})},{isFlat:!0})},{options:[["colors","Color List"],["generate","Generate Distinct"]]})}}U_.getDefaultValues(D2());const T2={valueLabel:e=>`${e+1}`,minLabel:"Start",maxLabel:"End"};function k2(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r;let o,i;if("colors"===t.palette.name&&"interpolate"===t.palette.params.list.kind){const{list:r}=t.palette.params,a=[0,e-1],{minLabel:s,maxLabel:l}={...T2,...n};let c=r.colors;0===c.length&&(c=ph(S2.colorList).list);const u=yy.create({listOrName:c,domain:a,minLabel:s,maxLabel:l});i=u.legend,o=u.color}else{let a;"colors"===t.palette.name?(a=t.palette.params.list.colors.map((e=>Array.isArray(e)?e[0]:e)),0===a.length&&(a=ph("dark-2").list.map((e=>Array.isArray(e)?e[0]:e)))):(e=Math.min(e,t.palette.params.maxCount),a=_2(e,t.palette.params));const s=null!==(r=n.valueLabel)&&void 0!==r?r:T2.valueLabel,l=a.length,c=[];for(let t=0;t<e;++t){const e=t%l;void 0===c[e]?c[e]=[s(t),a[e]]:c[e][0]+=`, ${s(t)}`}i=hh(c),o=e=>a[e%l]}return{color:o,legend:i}}const Q2=Jp(16448250),M2="Gives every chain a color based on its `asym_id` value.",R2={asymId:U_.Select("auth",U_.arrayToOptions(["auth","label"])),...D2({type:"colors",colorList:"many-distinct"})};function P2(e,t){const n=function(e,t){switch(e.kind){case 0:return"auth"===t?WL.chain.auth_asym_id:WL.chain.label_asym_id;case 1:case 2:return WL.coarse.asym_id}}(e.unit,t)(e);return e.structure.root.models.length>1?O2(e.unit.model,n):n}function O2(e,t){return`${t}|${(Wj.Index.get(e).value||0)+1}`}function F2(e,t){let n,r;if(e.structure){const o=Vk.create(e.structure.root),i=function(e,t){const n=new Map;for(const r of e.models){const o=Wj.AsymIdOffset.get(r).value,i=("auth"===t?null===o||void 0===o?void 0:o.auth:null===o||void 0===o?void 0:o.label)||0;let a=0;r.properties.structAsymMap.forEach(((o,s)=>{let{auth_id:l}=o;const c="auth"===t?l:s,u=e.models.length>1?O2(r,c):c;n.has(u)||(n.set(u,a+i),++a)}))}return n}(e.structure.root,t.asymId),a=Array.from(i.keys()),s=e=>a[e],l=k2(i.size,t,{valueLabel:s});r=l.legend,n=e=>{let n;if(Vk.is(e)){const r=P2(e,t.asymId);n=i.get(r)}else if(RP.isLocation(e)){o.unit=e.aUnit,o.element=e.aUnit.elements[e.aIndex];const r=P2(o,t.asymId);n=i.get(r)}return void 0===n?Q2:l.color(n)}}else n=()=>Q2;return{factory:F2,granularity:"group",color:n,props:t,description:M2,legend:r}}const N2={name:"chain-id",label:"Chain Id",category:Ck.Chain,factory:F2,getParams:function(e){var t;const n=U_.clone(R2);return(null===(t=e.structure)||void 0===t?void 0:t.models.some((e=>e.coarseHierarchy.isDefined)))&&(n.asymId.defaultValue="label"),n},defaultValues:U_.getDefaultValues(R2),isApplicable:e=>!!e.structure},L2=Jp(13421772),U2={...D2({type:"colors",colorList:"red-yellow-blue"})};const G2={name:"element-index",label:"Element Index",category:Ck.Atom,factory:function e(t,n){let r,o;if(t.structure){const{units:e}=t.structure.root,i=e.length,a=new Map,s=new Map;let l=0;for(let t=0;t<i;++t)a.set(t,l),l+=e[t].elements.length,s.set(e[t].id,t);const c=k2(l,n);o=c.legend,r=t=>{if(Vk.is(t)){const n=s.get(t.unit.id),r=ey.findPredecessorIndex(e[n].elements,t.element);return c.color(a.get(n)+r)}if(RP.isLocation(t)){const n=s.get(t.aUnit.id),r=ey.findPredecessorIndex(e[n].elements,t.aUnit.elements[t.aIndex]);return c.color(a.get(n)+r)}return L2}}else r=()=>L2;return{factory:e,granularity:"groupInstance",preferSmoothing:!0,color:r,props:n,description:"Gives every element (atom or coarse sphere/gaussian) a unique color based on the position (index) of the element in the list of elements in the structure.",legend:o}},getParams:function(e){return U2},defaultValues:U_.getDefaultValues(U2),isApplicable:e=>!!e.structure};function j2(e){const t={};return tw(e,((n,r)=>{t[r]=U_.Color(e[r])})),t}const z2=Jp(13421772),H2="Assigns a color based on the operator name of a transformed chain.",V2={...D2({type:"colors",colorList:"many-distinct"})};function q2(e,t){let n,r;if(e.structure){const o=function(e){const t=new Map;for(let n=0,r=e.units.length;n<r;++n){const r=e.units[n].conformation.operator.name;t.has(r)||t.set(r,t.size)}return t}(e.structure.root),i=Array.from(o.keys()),a=e=>i[e],s=k2(o.size,t,{valueLabel:a});r=s.legend,n=e=>{let t;if(Vk.is(e)){const n=e.unit.conformation.operator.name;t=o.get(n)}else if(RP.isLocation(e)){const n=e.aUnit.conformation.operator.name;t=o.get(n)}return void 0===t?z2:s.color(t)}}else n=()=>z2;return{factory:q2,granularity:"instance",color:n,props:t,description:H2,legend:r}}const Y2={name:"operator-name",label:"Operator Name",category:Ck.Symmetry,factory:q2,getParams:function(e){return U_.clone(V2)},defaultValues:U_.getDefaultValues(V2),isApplicable:e=>!!e.structure},X2=Jp(16448250),W2="Gives every chain a color based on its `label_entity_id` value.",K2={...D2({type:"colors",colorList:"many-distinct"})};function J2(e,t){return`${e}|${t}`}function Z2(e){switch(e.unit.kind){case 0:return WL.chain.label_entity_id(e);case 1:case 2:return WL.coarse.entity_id(e)}}function $2(e,t){let n,r;if(e.structure){const o=Vk.create(e.structure.root),i=function(e){const t=new Map;for(let n=0,r=e.models.length;n<r;++n){const{label_entity_id:r}=e.models[n].atomicHierarchy.chains;for(let e=0,i=r.rowCount;e<i;++e){const o=J2(r.value(e),n);t.has(o)||t.set(o,t.size)}const{coarseHierarchy:o}=e.models[n];if(o.isDefined){const{entity_id:e}=o.spheres;for(let o=0,i=e.rowCount;o<i;++o){const r=J2(e.value(o),n);t.has(r)||t.set(r,t.size)}const{entity_id:r}=o.gaussians;for(let o=0,i=r.rowCount;o<i;++o){const e=J2(r.value(o),n);t.has(e)||t.set(e,t.size)}}}return t}(e.structure.root),a=Array.from(i.keys()),s=e=>a[e],l=k2(i.size,t,{valueLabel:s});r=l.legend,n=e=>{let t;if(Vk.is(e)){const n=J2(Z2(e),e.structure.models.indexOf(e.unit.model));t=i.get(n)}else if(RP.isLocation(e)){o.unit=e.aUnit,o.element=e.aUnit.elements[e.aIndex];const n=J2(Z2(o),o.structure.models.indexOf(o.unit.model));t=i.get(n)}return void 0===t?X2:l.color(t)}}else n=()=>X2;return{factory:$2,granularity:"group",color:n,props:t,description:W2,legend:r}}const e4={name:"entity-id",label:"Entity Id",category:Ck.Chain,factory:$2,getParams:function(e){return U_.clone(K2)},defaultValues:U_.getDefaultValues(K2),isApplicable:e=>!!e.structure},t4="dark-2",n4=Jp(16448250),r4="Gives ranges of a polymer chain a color based on the entity source it originates from (e.g. gene, plasmid, organism).",o4={...D2({type:"colors",colorList:t4})};function i4(e,t){return`${e}|${t}`}function a4(e,t,n,r,o,i){return`${e}|${t}|${n}|${i||(o||r)}`}function s4(e,t,n,r,o,i,a,s){const{entity_id:l,pdbx_src_id:c,pdbx_beg_seq_num:u,pdbx_end_seq_num:d}=o;for(let A=0,f=o._rowCount;A<f;++A){const o=l.value(A),f=i4(n,o);let p;if(e.has(f))p=e.get(f);else{const t=r.entities.getEntityIndex(o),n=r.sequence.sequences[t].sequence;p=new Int16Array(n.length),e.set(f,p)}const h=a?a.value(A):"",g=s?s.value(A)[0]:"",m=a4(n,o,i.value(A),c.value(A),h,g),y=0===u.valueKind(A)?u.value(A):1,v=0===d.valueKind(A)?d.value(A):p.length;let b;t.has(m)?b=t.get(m):(b=t.size+1,t.set(m,b));for(let e=y,t=v;e<=t;++e)p[e-1]=b}}function l4(e){const t=new Map,n=new Map;for(let r=0,o=e.length;r<o;++r){const o=e[r];if(!iL.is(o.sourceData))continue;const{entity_src_gen:i,entity_src_nat:a,pdbx_entity_src_syn:s}=o.sourceData.data.db;s4(t,n,r,o,i,i.pdbx_gene_src_scientific_name,i.plasmid_name,i.pdbx_gene_src_gene),s4(t,n,r,o,a,a.pdbx_organism_scientific,a.pdbx_plasmid_name),s4(t,n,r,o,s,s.organism_scientific)}return{seqToSrcByModelEntity:t,srcKeySerialMap:n}}function c4(e){let t=0;return Array.from(e.keys()).map((e=>{const n=e.split("|"),r=n[2],o=function(e){e=e.trim();const t=parseInt(e,10);return!isNaN(t)&&t.toString()===e}(n[3])?"Unnamed "+ ++t:n[3];return`${o}${r?` (${r})`:""}`}))}function u4(e,t){let n,r;if(e.structure){const o=Vk.create(e.structure),{models:i}=e.structure.root,{seqToSrcByModelEntity:a,srcKeySerialMap:s}=l4(i),l=c4(s),c=e=>l[e],u=k2(s.size,t,{valueLabel:c});r=u.legend;const d=e=>{const t=i4(i.indexOf(e.unit.model),WL.entity.id(e)),n=a.get(t);if(n){const t=n[WL.residue.label_seq_id(e)-1]-1;return-1===t?n4:u.color(t)}return n4};n=e=>Vk.is(e)?d(e):RP.isLocation(e)?(o.unit=e.aUnit,o.element=e.aUnit.elements[e.aIndex],d(o)):n4}else n=()=>n4;return{factory:u4,granularity:"group",color:n,props:t,description:r4,legend:r}}const d4={name:"entity-source",label:"Entity Source",category:Ck.Chain,factory:u4,getParams:function(e){const t=U_.clone(o4);return e.structure&&l4(e.structure.root.models).srcKeySerialMap.size>uh[t4].list.length&&(t.palette.defaultValue.name="colors",t.palette.defaultValue.params={...t.palette.defaultValue.params,list:{kind:"interpolate",colors:ph(t4).list}}),t},defaultValues:U_.getDefaultValues(o4),isApplicable:e=>!!e.structure},A4=Jp(13421772),f4="Gives every model a unique color based on its index.",p4={...D2({type:"colors",colorList:"many-distinct"})};function h4(e,t){var n;let r,o,i=-1;if(e.structure){const a=(null!==(n=Wj.MaxIndex.get(e.structure.models[0]).value)&&void 0!==n?n:-1)+1;i=a;const s=k2(a,t);o=s.legend,r=e=>Vk.is(e)?s.color(Wj.Index.get(e.unit.model).value||0):RP.isLocation(e)?s.color(Wj.Index.get(e.aUnit.model).value||0):A4}else r=()=>A4;return{factory:h4,granularity:"instance",color:r,props:t,contextHash:i,description:f4,legend:o}}const g4={name:"model-index",label:"Model Index",category:Ck.Chain,factory:h4,getParams:function(e){return U_.clone(p4)},defaultValues:U_.getDefaultValues(p4),isApplicable:e=>!!e.structure&&e.structure.elementCount>0},m4=Jp(13421772),y4="Gives every structure a unique color based on its index.",v4={...D2({type:"colors",colorList:"many-distinct"})};function b4(e,t){var n;let r,o,i=-1;if(e.structure){const a=(null!==(n=aG.MaxIndex.get(e.structure).value)&&void 0!==n?n:-1)+1;i=a;const s=k2(a,t);o=s.legend,r=e=>Vk.is(e)?s.color(aG.Index.get(e.structure).value||0):RP.isLocation(e)?s.color(aG.Index.get(e.aStructure).value||0):m4}else r=()=>m4;return{factory:b4,granularity:"instance",color:r,props:t,contextHash:i,description:y4,legend:o}}const C4={name:"structure-index",label:"Structure Index",category:Ck.Chain,factory:b4,getParams:function(e){return U_.clone(v4)},defaultValues:U_.getDefaultValues(v4),isApplicable:e=>!!e.structure&&e.structure.elementCount>0},I4="dark-2",E4=Jp(13421772),x4="Gives every chain instance (single chain or collection of single elements) a unique color based on the position (index) of the chain in the list of chains in the structure.",B4={...D2({type:"colors",colorList:I4})};function w4(e,t){let n,r;if(e.structure){const{units:o}=e.structure.root,i=k2(o.length,t);r=i.legend;const a=new Map;for(let e=0,t=o.length;e<t;++e)a.set(o[e].id,i.color(e));n=e=>Vk.is(e)?a.get(e.unit.id):RP.isLocation(e)?a.get(e.aUnit.id):E4}else n=()=>E4;return{factory:w4,granularity:"instance",color:n,props:t,description:x4,legend:r}}const _4={name:"unit-index",label:"Chain Instance",category:Ck.Chain,factory:w4,getParams:function(e){const t=U_.clone(B4);return e.structure&&e.structure.root.units.length>uh[I4].list.length&&(t.palette.defaultValue.name="colors",t.palette.defaultValue.params={...t.palette.defaultValue.params,list:{kind:"interpolate",colors:ph(I4).list}}),t},defaultValues:U_.getDefaultValues(B4),isApplicable:e=>!!e.structure},S4=Jp(13421772),D4="Gives every model (frame) a unique color based on the index in its trajectory.",T4={...D2({type:"colors",colorList:"purples"})};function k4(e,t){var n,r;let o,i,a=-1;if(e.structure){const{models:s}=e.structure.root;let l=0;for(const e of s)l=Math.max(l,(null===(n=Wj.TrajectoryInfo.get(e))||void 0===n?void 0:n.size)||0);const c=[l],u=k2(l,t);i=u.legend;const d=new Map;for(let e=0,t=s.length;e<t;++e){const t=(null===(r=Wj.TrajectoryInfo.get(s[e]))||void 0===r?void 0:r.index)||0;d.set(t,u.color(t)),c.push(t)}a=Fh(c),o=e=>Vk.is(e)?d.get(Wj.TrajectoryInfo.get(e.unit.model).index):RP.isLocation(e)?d.get(Wj.TrajectoryInfo.get(e.aUnit.model).index):S4}else o=()=>S4;return{factory:k4,granularity:"instance",color:o,props:t,contextHash:a,description:D4,legend:i}}const Q4={name:"trajectory-index",label:"Trajectory Index",category:Ck.Chain,factory:k4,getParams:function(e){return U_.clone(T4)},defaultValues:U_.getDefaultValues(T4),isApplicable:e=>!!e.structure&&e.structure.elementCount>0&&Wj.TrajectoryInfo.get(e.structure.models[0]).size>1},M4={H:16777215,D:16777152,T:16777120,HE:14286847,LI:13402367,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,NE:11789301,NA:11230450,MG:9109248,AL:12560038,SI:1578e4,P:16744448,S:16777008,CL:2093087,AR:8442339,K:9388244,CA:4062976,SC:15132390,TI:12567239,V:10921643,CR:9083335,MN:10255047,FE:14706227,CO:15765664,NI:5296208,CU:13140019,ZN:8224944,GA:12750735,GE:6721423,AS:12419299,SE:16752896,BR:10889513,KR:6076625,RB:7351984,SR:65280,Y:9764863,ZR:9756896,NB:7586505,MO:5551541,TC:3907230,RU:2396047,RH:687500,PD:27013,AG:12632256,CD:16767375,IN:10909043,SN:6717568,SB:10380213,TE:13924864,I:9699476,XE:9699476,CS:5707663,BA:51456,LA:7394559,CE:16777159,PR:14286791,ND:13107143,PM:10747847,SM:9437127,EU:6422471,GD:4587463,TB:3211207,DY:2097095,HO:65436,ER:58997,TM:54354,YB:48952,LU:43812,HF:5096191,TA:5089023,W:2200790,RE:2522539,OS:2516630,IR:1528967,PT:13684960,AU:16765219,HG:12105936,TL:10900557,PB:5724513,BI:10375093,PO:11230208,AT:7688005,RN:4358806,FR:4325478,RA:32e3,AC:7384058,TH:47871,PA:41471,U:36863,NP:33023,PU:27647,AM:5528818,CM:7888099,BK:9064419,CF:10565332,ES:11739092,FM:11739066,MD:11734438,NO:12389767,LR:13041766,RF:13369433,DB:13697103,SG:14221381,BH:14680120,HS:15073326,MT:15400998,DS:16777215,RG:16777215,CN:16777215,UUT:16777215,FL:16777215,UUP:16777215,LV:16777215,UUH:16777215},R4=Jp(16777215),P4="Assigns a color to every atom according to its chemical element.",O4={carbonColor:U_.MappedStatic("chain-id",{"chain-id":U_.Group(R2),"unit-index":U_.Group(B4,{label:"Chain Instance"}),"entity-id":U_.Group(K2),"entity-source":U_.Group(o4),"operator-name":U_.Group(V2),"model-index":U_.Group(p4),"structure-index":U_.Group(v4),"trajectory-index":U_.Group(T4),uniform:U_.Group(xk),"element-symbol":U_.EmptyGroup()},{description:"Use chain-id coloring for carbon atoms."}),saturation:U_.Numeric(0,{min:-6,max:6,step:.1}),lightness:U_.Numeric(.2,{min:-6,max:6,step:.1}),colors:U_.MappedStatic("default",{default:U_.EmptyGroup(),custom:U_.Group(j2(M4))})};function F4(e,t){var n;const r=$p("default"===t.colors.name?M4:t.colors.params,t.saturation,t.lightness),o=function(e,t){switch(t.name){case"chain-id":return F2(e,t.params);case"unit-index":return w4(e,t.params);case"entity-id":return $2(e,t.params);case"entity-source":return u4(e,t.params);case"operator-name":return q2(e,t.params);case"model-index":return h4(e,t.params);case"structure-index":return b4(e,t.params);case"trajectory-index":return k4(e,t.params);case"uniform":return Bk(0,t.params);case"element-symbol":return;default:Zh()}}(e,t.carbonColor),i=null===o||void 0===o?void 0:o.color,a=null!==(n=null===o||void 0===o?void 0:o.contextHash)&&void 0!==n?n:-1;function s(e,t){return i&&"C"===e?i(t,!1):function(e,t){const n=e[t];return void 0===n?R4:n}(r,e)}return{factory:F4,granularity:"operator-name"===t.carbonColor.name||"unit-index"===t.carbonColor.name?"groupInstance":"group",preferSmoothing:!0,color:function(e){if(Vk.is(e)){if(BO.isAtomic(e.unit)){const{type_symbol:t}=e.unit.model.atomicHierarchy.atoms;return s(t.value(e.element),e)}}else if(RP.isLocation(e)&&BO.isAtomic(e.aUnit)){const{type_symbol:t}=e.aUnit.model.atomicHierarchy.atoms;return s(t.value(e.aUnit.elements[e.aIndex]),e)}return R4},props:t,contextHash:a,description:P4,legend:hh(Object.keys(r).map((e=>[e,r[e]])))}}const N4={name:"element-symbol",label:"Element Symbol",category:Ck.Atom,factory:F4,getParams:function(e){return U_.clone(O4)},defaultValues:U_.getDefaultValues(O4),isApplicable:e=>!!e.structure},L4={water:3697840,ion:15729279,protein:12496596,RNA:16629894,DNA:12540695,PNA:4367514,saccharide:8374655},U4=Jp(16777113),G4="Assigns a color based on the molecule type of a residue.",j4={saturation:U_.Numeric(0,{min:-6,max:6,step:.1}),lightness:U_.Numeric(0,{min:-6,max:6,step:.1}),colors:U_.MappedStatic("default",{default:U_.EmptyGroup(),custom:U_.Group(j2(L4))})};function z4(e,t,n){switch(HP(t,n)){case 2:return e.water;case 3:return e.ion;case 5:return e.protein;case 6:return e.RNA;case 7:return e.DNA;case 8:return e.PNA;case 9:return e.saccharide}return U4}function H4(e,t){const n=$p("default"===t.colors.name?L4:t.colors.params,t.saturation,t.lightness);return{factory:H4,granularity:"group",color:function(e){return Vk.is(e)?z4(n,e.unit,e.element):RP.isLocation(e)?z4(n,e.aUnit,e.aUnit.elements[e.aIndex]):U4},props:t,description:G4,legend:hh(Object.keys(n).map((e=>[e,n[e]])).concat([["Other/unknown",U4]]))}}const V4={name:"molecule-type",label:"Molecule Type",category:Ck.Residue,factory:H4,getParams:function(e){return j4},defaultValues:U_.getDefaultValues(j4),isApplicable:e=>!!e.structure},q4="dark-2",Y4=Jp(16448250),X4={...D2({type:"colors",colorList:q4})};function W4(e){switch(e.kind){case 0:return WL.chain.label_asym_id;case 1:case 2:return WL.coarse.asym_id}}function K4(e){const t=new Map;for(let n=0,r=e.unitSymmetryGroups.length;n<r;++n){const r=e.unitSymmetryGroups[n].units[0],{model:o}=r;if(BO.isAtomic(r)){const{chainAtomSegments:e,chains:n}=o.atomicHierarchy,i=ty.transientSegments(e,r.elements);for(;i.hasNext;){const{index:e}=i.move(),r=n.label_entity_id.value(e),a=o.entities.getEntityIndex(r);if("polymer"===o.entities.data.type.value(a)){const r=n.label_asym_id.value(e);t.has(r)||t.set(r,t.size)}}}else if(BO.isCoarse(r)){const{chainElementSegments:e,asym_id:n,entity_id:i}=BO.isSpheres(r)?o.coarseHierarchy.spheres:o.coarseHierarchy.gaussians,a=ty.transientSegments(e,r.elements);for(;a.hasNext;){const{index:r}=a.move(),s=e.offsets[r],l=i.value(s),c=o.entities.getEntityIndex(l);if("polymer"===o.entities.data.type.value(c)){const e=n.value(s);t.has(e)||t.set(e,t.size)}}}}return t}const J4={name:"polymer-id",label:"Polymer Chain Id",category:Ck.Chain,factory:function e(t,n){let r,o;if(t.structure){const e=Vk.create(t.structure),i=K4(t.structure.root),a=Array.from(i.keys()),s=e=>a[e],l=k2(i.size,n,{valueLabel:s});o=l.legend,r=t=>{let n;if(Vk.is(t)){const e=W4(t.unit);n=i.get(e(t))}else if(RP.isLocation(t)){const r=W4(t.aUnit);e.unit=t.aUnit,e.element=t.aUnit.elements[t.aIndex],n=i.get(r(e))}return void 0===n?Y4:l.color(n)}}else r=()=>Y4;return{factory:e,granularity:"group",color:r,props:n,description:"Gives every polymer chain a color based on its `asym_id` value.",legend:o}},getParams:function(e){const t=U_.clone(X4);return e.structure&&K4(e.structure.root).size>uh[q4].list.length&&(t.palette.defaultValue.name="colors",t.palette.defaultValue.params={...t.palette.defaultValue.params,list:{kind:"interpolate",colors:ph(q4).list}}),t},defaultValues:U_.getDefaultValues(X4),isApplicable:e=>!!e.structure},Z4="dark-2",$4=Jp(13421772),e3={...D2({type:"colors",colorList:Z4})};function t3(e){let t=0;const{units:n}=e;for(let r=0,o=n.length;r<o;++r)n[r].polymerElements.length>0&&++t;return t}const n3={name:"polymer-index",label:"Polymer Chain Instance",category:Ck.Chain,factory:function e(t,n){let r,o;if(t.structure){const e=k2(t3(t.structure.root),n);o=e.legend;const{units:i}=t.structure.root,a=new Map;for(let t=0,n=0,r=i.length;t<r;++t)i[t].polymerElements.length>0&&(a.set(i[t].id,e.color(n)),++n);r=e=>{let t;return Vk.is(e)?t=a.get(e.unit.id):RP.isLocation(e)&&(t=a.get(e.aUnit.id)),void 0!==t?t:$4}}else r=()=>$4;return{factory:e,granularity:"instance",color:r,props:n,description:"Gives every polymer chain instance a unique color based on the position (index) of the polymer in the list of polymers in the structure.",legend:o}},getParams:function(e){const t=U_.clone(e3);return e.structure&&t3(e.structure.root)>uh[Z4].list.length&&(t.palette.defaultValue.name="colors",t.palette.defaultValue.params={...t.palette.defaultValue.params,list:{kind:"interpolate",colors:ph(Z4).list}}),t},defaultValues:U_.getDefaultValues(e3),isApplicable:e=>!!e.structure},r3={ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:15658734,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,A:14423100,G:3329330,I:10145074,C:16766720,T:4286945,U:4251856,DA:14423100,DG:3329330,DI:10145074,DC:16766720,DT:4286945,DU:4251856,APN:14423100,GPN:3329330,CPN:16766720,TPN:4286945},o3=Jp(16711935),i3="Assigns a color to every residue according to its name.",a3={saturation:U_.Numeric(0,{min:-6,max:6,step:.1}),lightness:U_.Numeric(1,{min:-6,max:6,step:.1}),colors:U_.MappedStatic("default",{default:U_.EmptyGroup(),custom:U_.Group(j2(r3))})};function s3(e,t){return e.model.atomicHierarchy.atoms.label_comp_id.value(t)}function l3(e,t){const n=e.coarseElements.seq_id_begin.value(t);if(n===e.coarseElements.seq_id_end.value(t)){const r=e.coarseElements.entityKey[t];return e.model.sequence.byEntityKey[r].sequence.compId.value(n-1)}}function c3(e,t){const n=e[t];return void 0===n?o3:n}function u3(e,t){const n=$p("default"===t.colors.name?r3:t.colors.params,t.saturation,t.lightness);return{factory:u3,granularity:"group",preferSmoothing:!0,color:function(e){if(Vk.is(e)){if(BO.isAtomic(e.unit)){const t=s3(e.unit,e.element);return c3(n,t)}{const t=l3(e.unit,e.element);if(t)return c3(n,t)}}else if(RP.isLocation(e)){if(BO.isAtomic(e.aUnit)){const t=s3(e.aUnit,e.aUnit.elements[e.aIndex]);return c3(n,t)}{const t=l3(e.aUnit,e.aUnit.elements[e.aIndex]);if(t)return c3(n,t)}}return o3},props:t,description:i3,legend:hh(Object.keys(n).map((e=>[e,n[e]])).concat([["Unknown",o3]]))}}const d3={name:"residue-name",label:"Residue Name",category:Ck.Residue,factory:u3,getParams:function(e){return a3},defaultValues:U_.getDefaultValues(a3),isApplicable:e=>!!e.structure},A3={alphaHelix:16711808,threeTenHelix:10485888,piHelix:6291584,betaTurn:6324479,betaStrand:16762880,coil:16777215,bend:6740169,turn:45670,dna:11403518,rna:16580962,carbohydrate:10921722},f3=Jp(8421504),p3="Assigns a color based on the type of secondary structure and basic molecule type.",h3={saturation:U_.Numeric(-1,{min:-6,max:6,step:.1}),lightness:U_.Numeric(0,{min:-6,max:6,step:.1}),colors:U_.MappedStatic("default",{default:U_.EmptyGroup(),custom:U_.Group(j2(A3))})};function g3(e,t,n,r){let o=HM.create(0);if(r&&BO.isAtomic(t)){const e=r.get(t.invariantId);e&&(o=e.type[e.getIndex(t.residueIndex[n])])}if(HM.is(o,2))return HM.is(o,2048)?e.threeTenHelix:HM.is(o,32768)?e.piHelix:e.alphaHelix;if(HM.is(o,4))return e.betaStrand;if(HM.is(o,8))return e.bend;if(HM.is(o,16))return e.turn;{const r=HP(t,n);if(7===r)return e.dna;if(6===r)return e.rna;if(9===r)return e.carbohydrate;if(5===r)return e.coil}return f3}function m3(e,t){const n=e.structure&&ML.get(e.structure),r=n?Qh(n.id,n.version):-1,o=$p("default"===t.colors.name?A3:t.colors.params,t.saturation,t.lightness);return{factory:m3,granularity:"group",preferSmoothing:!0,color:function(e){return Vk.is(e)?g3(o,e.unit,e.element,null===n||void 0===n?void 0:n.value):RP.isLocation(e)?g3(o,e.aUnit,e.aUnit.elements[e.aIndex],null===n||void 0===n?void 0:n.value):f3},props:t,contextHash:r,description:p3,legend:hh(Object.keys(o).map((e=>[e,o[e]])).concat([["Other",f3]]))}}const y3={name:"secondary-structure",label:"Secondary Structure",category:Ck.Residue,factory:m3,getParams:function(e){return h3},defaultValues:U_.getDefaultValues(h3),isApplicable:e=>!!e.structure,ensureCustomProperties:{attach:(e,t)=>t.structure?ML.attach(e,t.structure,void 0,!0):Promise.resolve(),detach:e=>e.structure&&ML.ref(e.structure,!1)}},v3=Jp(13421772),b3={list:U_.ColorList("turbo",{presetKind:"scale"})};function C3(e,t){const{model:n}=e;switch(e.kind){case 0:const e=n.atomicHierarchy.residueAtomSegments.index[t];return n.atomicHierarchy.residues.label_seq_id.value(e);case 1:return Math.round((n.coarseHierarchy.spheres.seq_id_begin.value(t)+n.coarseHierarchy.spheres.seq_id_end.value(t))/2);case 2:return Math.round((n.coarseHierarchy.gaussians.seq_id_begin.value(t)+n.coarseHierarchy.gaussians.seq_id_end.value(t))/2)}}function I3(e,t){const{model:n}=e;let r="";switch(e.kind){case 0:const e=n.atomicHierarchy.chainAtomSegments.index[t];r=n.atomicHierarchy.chains.label_entity_id.value(e);break;case 1:r=n.coarseHierarchy.spheres.entity_id.value(t);break;case 2:r=n.coarseHierarchy.gaussians.entity_id.value(t)}if(""===r)return 0;const o=n.entities.getEntityIndex(r);if(-1===o)return 0;const i=n.sequence.byEntityKey[o];return void 0===i?0:i.sequence.length}const E3={name:"sequence-id",label:"Sequence Id",category:Ck.Residue,factory:function e(t,n){const r=yy.create({listOrName:n.list.colors,minLabel:"Start",maxLabel:"End"});return{factory:e,granularity:"group",preferSmoothing:!0,color:e=>{if(Vk.is(e)){const{unit:t,element:n}=e,o=C3(t,n);if(o>0){const e=I3(t,n);if(e)return r.setDomain(0,e-1),r.color(o)}}else if(RP.isLocation(e)){const{aUnit:t,aIndex:n}=e,o=C3(t,t.elements[n]);if(o>0){const e=I3(t,t.elements[n]);if(e)return r.setDomain(0,e-1),r.color(o)}}return v3},props:n,description:"Gives every polymer residue a color based on its `seq_id` value.",legend:r?r.legend:void 0}},getParams:function(e){return b3},defaultValues:U_.getDefaultValues(b3),isApplicable:e=>!!e.structure},x3=Jp(16777113),B3={domain:U_.Interval([0,100]),list:U_.ColorList("red-white-blue",{presetKind:"scale"})};function w3(e,t){return BO.isAtomic(e)?e.model.atomicConformation.B_iso_or_equiv.value(t):BO.isSpheres(e)?e.model.coarseConformation.spheres.rmsf[t]:0}const _3={name:"uncertainty",label:"Uncertainty/Disorder",category:Ck.Atom,factory:function e(t,n){const r=yy.create({reverse:!0,domain:n.domain,listOrName:n.list.colors});return{factory:e,granularity:"group",preferSmoothing:!0,color:function(e){return Vk.is(e)?r.color(w3(e.unit,e.element)):RP.isLocation(e)?r.color(w3(e.aUnit,e.aUnit.elements[e.aIndex])):x3},props:n,description:"Assigns a color based on the uncertainty or disorder of an element's position, e.g. B-factor or RMSF, depending on the data availability and experimental technique.",legend:r?r.legend:void 0}},getParams:function(e){return B3},defaultValues:U_.getDefaultValues(B3),isApplicable:e=>!!e.structure&&e.structure.models.some((e=>e.atomicConformation.B_iso_or_equiv.isDefined||e.coarseHierarchy.isDefined))},S3=Jp(15658734),D3={style:U_.MappedStatic("entity-id",{uniform:U_.Group(xk),"chain-id":U_.Group(R2),"entity-id":U_.Group(K2),"entity-source":U_.Group(o4),"molecule-type":U_.Group(j4),"model-index":U_.Group(p4),"structure-index":U_.Group(v4),"trajectory-index":U_.Group(T4)}),carbonLightness:U_.Numeric(.8,{min:-6,max:6,step:.1})};const T3={name:"illustrative",label:"Illustrative",category:Ck.Misc,factory:function e(t,n){const{color:r,legend:o,contextHash:i}=function(e,t){switch(t.name){case"uniform":return Bk(0,t.params);case"chain-id":return F2(e,t.params);case"entity-id":return $2(e,t.params);case"entity-source":return u4(e,t.params);case"molecule-type":return H4(0,t.params);case"model-index":return h4(e,t.params);case"structure-index":return b4(e,t.params);case"trajectory-index":return k4(e,t.params);default:Zh()}}(t,n.style);function a(e,t){const o=r(e,!1);return"C"===t?Jp.lighten(o,n.carbonLightness):o}return{factory:e,granularity:"group",preferSmoothing:!0,color:function(e){if(Vk.is(e)&&BO.isAtomic(e.unit)){const t=e.unit.model.atomicHierarchy.atoms.type_symbol.value(e.element);return a(e,t)}if(RP.isLocation(e)&&BO.isAtomic(e.aUnit)){const t=e.aUnit.elements[e.aIndex],n=e.aUnit.model.atomicHierarchy.atoms.type_symbol.value(t);return a(e,n)}return S3},props:n,contextHash:i,description:"Assigns an illustrative color that gives every chain a color based on the chosen style but with lighter carbons (inspired by David Goodsell's Molecule of the Month style).",legend:o}},getParams:function(e){return U_.clone(D3)},defaultValues:U_.getDefaultValues(D3),isApplicable:e=>!!e.structure},k3={list:U_.ColorList("red-yellow-green",{presetKind:"scale"}),scale:U_.Select("DGwif",[["DGwif","DG water-membrane"],["DGwoct","DG water-octanol"],["Oct-IF","DG difference"]])};const Q3={DGwif:0,DGwoct:1,"Oct-IF":2};function M3(e,t){return e.model.atomicHierarchy.atoms.label_comp_id.value(t)}function R3(e,t){const n=e.coarseElements.seq_id_begin.value(t);if(n===e.coarseElements.seq_id_end.value(t)){const r=e.coarseElements.entityKey[t];return e.model.sequence.byEntityKey[r].sequence.compId.value(n-1)}}const P3={name:"hydrophobicity",label:"Hydrophobicity",category:Ck.Residue,factory:function e(t,n){const r=Q3[n.scale];let o=1/0,i=-1/0;for(const s in qM){const e=qM[s][r];o=Math.min(o,e),i=Math.max(i,e)}const a=yy.create({listOrName:n.list.colors,domain:[i,o],minLabel:"Hydrophilic",maxLabel:"Hydrophobic"});return{factory:e,granularity:"group",preferSmoothing:!0,color:function(e){let t;return Vk.is(e)?t=BO.isAtomic(e.unit)?M3(e.unit,e.element):R3(e.unit,e.element):RP.isLocation(e)&&(t=BO.isAtomic(e.aUnit)?M3(e.aUnit,e.aUnit.elements[e.aIndex]):R3(e.aUnit,e.aUnit.elements[e.aIndex])),a.color(t?function(e,t){const n=qM[e];return void 0===n?0:n[t]}(t,r):0)},props:n,description:'Assigns a color to every amino acid according to the "Experimentally determined hydrophobicity scale for proteins at membrane interfaces" by Wimely and White (doi:10.1038/nsb1096-842).',legend:a?a.legend:void 0}},getParams:function(e){return k3},defaultValues:U_.getDefaultValues(k3),isApplicable:e=>!!e.structure},O3=Jp(13421772),F3={domain:U_.Interval([0,1]),list:U_.ColorList("purples",{presetKind:"scale"})};function N3(e,t){return BO.isAtomic(e)?e.model.atomicConformation.occupancy.value(t):0}const L3={name:"occupancy",label:"Occupancy",category:Ck.Atom,factory:function e(t,n){const r=yy.create({reverse:!1,domain:n.domain,listOrName:n.list.colors});return{factory:e,granularity:"group",preferSmoothing:!0,color:function(e){return Vk.is(e)?r.color(N3(e.unit,e.element)):RP.isLocation(e)?r.color(N3(e.aUnit,e.aUnit.elements[e.aIndex])):O3},props:n,description:"Assigns a color based on the occupancy of an atom.",legend:r?r.legend:void 0}},getParams:function(e){return F3},defaultValues:U_.getDefaultValues(F3),isApplicable:e=>!!e.structure&&e.structure.models.some((e=>e.atomicConformation.occupancy.isDefined))},U3="dark-2",G3=Jp(13421772),j3={...D2({type:"colors",colorList:U3})};const z3=1e4;function H3(e){return e.map((e=>`${e+z3}`.padStart(5,"0"))).join("")}function V3(e){const t=function(e,t){return Math.abs(e)<t?0:Math.floor(Math.log10(Math.abs(e)))+1}(z3,0),n=parseInt(e.substr(0,t)),r=parseInt(e.substr(t,t)),o=parseInt(e.substr(t+t,t));return qh.create(n-z3,r-z3,o-z3)}function q3(e){return e.map((e=>e+5)).join("")}function Y3(e){const t=new Map,n=new Set;for(let o=0,i=e.units.length;o<i;++o){const t=H3(e.units[o].conformation.operator.hkl);n.add(t)}const r=Array.from(n.values()).sort();r.forEach((e=>t.set(e,t.size)));return{min:V3(r[0]),max:V3(r[r.length-1]),map:t}}const X3={name:"operator-hkl",label:"Operator HKL",category:Ck.Symmetry,factory:function e(t,n){let r,o;if(t.structure){const{min:e,max:i,map:a}=Y3(t.structure.root),s=[];a.forEach(((e,t)=>{const n=e%a.size,r=q3(V3(t));void 0===s[n]?s[n]=r:s[n]+=`, ${r}`}));const l={minLabel:q3(e),maxLabel:q3(i),valueLabel:e=>s[e]},c=k2(a.size,n,l);o=c.legend,r=e=>{let t;if(Vk.is(e)){const n=H3(e.unit.conformation.operator.hkl);t=a.get(n)}else if(RP.isLocation(e)){const n=H3(e.aUnit.conformation.operator.hkl);t=a.get(n)}return void 0===t?G3:c.color(t)}}else r=()=>G3;return{factory:e,granularity:"instance",color:r,props:n,description:"Assigns a color based on the operator HKL value of a transformed chain.",legend:o}},getParams:function(e){const t=U_.clone(j3);return e.structure&&Y3(e.structure.root).map.size>uh[U3].list.length&&(t.palette.defaultValue.name="colors",t.palette.defaultValue.params={...t.palette.defaultValue.params,list:{kind:"interpolate",colors:ph(U3).list}}),t},defaultValues:U_.getDefaultValues(j3),isApplicable:e=>!!e.structure},W3=Jp(16777113),K3={domain:U_.Interval([-1,1]),list:U_.ColorList("red-white-blue",{presetKind:"scale"})};function J3(e,t){var n;return null===(n=qJ.Provider.get(e.model))||void 0===n?void 0:n.data.value(t)}const Z3={name:"partial-charge",label:"Partial Charge",category:Ck.Atom,factory:function e(t,n){const r=yy.create({domain:n.domain,listOrName:n.list.colors});return{factory:e,granularity:"group",preferSmoothing:!0,color:function(e){if(Vk.is(e)){const t=J3(e.unit,e.element);return void 0!==t?r.color(t):W3}if(RP.isLocation(e)){const t=J3(e.aUnit,e.aUnit.elements[e.aIndex]);return void 0!==t?r.color(t):W3}return W3},props:n,description:"Assigns a color based on the partial charge of an atom.",legend:r?r.legend:void 0}},getParams:function(e){return K3},defaultValues:U_.getDefaultValues(K3),isApplicable:e=>!!e.structure&&e.structure.models.some((e=>void 0!==qJ.Provider.get(e)))},$3=Jp(16448250),e5={...D2({type:"colors",colorList:"many-distinct"})};const t5={name:"atom-id",label:"Atom Id",category:Ck.Atom,factory:function e(t,n){let r,o;if(t.structure){const e=Vk.create(t.structure.root),i=function(e){const t=new Map;for(const n of e.models){const{label_atom_id:e}=n.atomicHierarchy.atoms;for(let n=0,r=e.rowCount;n<r;++n){const r=e.value(n);t.has(r)||t.set(r,t.size)}}return t}(t.structure.root),a=Array.from(i.keys()),s=e=>a[e],l=k2(i.size,n,{valueLabel:s});o=l.legend,r=t=>{let n;if(Vk.is(t)){const e=WL.atom.label_atom_id(t);n=i.get(e)}else if(RP.isLocation(t)){e.unit=t.aUnit,e.element=t.aUnit.elements[t.aIndex];const r=WL.atom.label_atom_id(e);n=i.get(r)}return void 0===n?$3:l.color(n)}}else r=()=>$3;return{factory:e,granularity:"group",preferSmoothing:!0,color:r,props:n,description:"Gives every atom a color based on its `label_atom_id` value.",legend:o}},getParams:function(e){return U_.clone(e5)},defaultValues:U_.getDefaultValues(e5),isApplicable:e=>!!e.structure},n5={colorList:U_.ColorList({kind:"interpolate",colors:[[bk.white,0],[bk.red,.25],[bk.white,.5],[bk.blue,.75],[bk.white,1]]},{offsets:!0,isEssential:!0})};const r5={name:"volume-value",label:"Volume Value",category:Ck.Misc,factory:function e(t,n){const r=yy.create({domain:[0,1],listOrName:n.colorList.colors}),o=[];for(let a=0;a<256;++a)o[a]=r.color(a/255);const i={colors:o,filter:"linear"};return{factory:e,granularity:"direct",props:n,description:"Assign color based on the given value of a volume cell.",legend:r.legend,palette:i}},getParams:function(e){return n5},defaultValues:U_.getDefaultValues(n5),isApplicable:e=>!!e.volume&&!HW.Segmentation.get(e.volume)},o5=Jp(13421772),i5={...D2({type:"colors",colorList:"many-distinct"})};const a5={name:"volume-segment",label:"Volume Segment",category:Ck.Misc,factory:function e(t,n){let r,o;const i=t.volume&&HW.Segmentation.get(t.volume);if(i){const e=i.segments.size,t=Array.from(i.segments.keys()),a=k2(e,n);o=a.legend,r=e=>HW.Segment.isLocation(e)?a.color(t.indexOf(e.segment)):o5}else r=()=>o5;return{factory:e,granularity:"instance",color:r,props:n,description:"Gives every volume segment a unique color.",legend:o}},getParams:function(e){return U_.clone(i5)},defaultValues:U_.getDefaultValues(i5),isApplicable:e=>!!e.volume&&!!HW.Segmentation.get(e.volume)},s5={volume:U_.ValueRef((e=>{const t=e.state.data.selectQ((e=>e.root.subtree().filter((e=>{var t;return HW.is(null===(t=e.obj)||void 0===t?void 0:t.data)}))));return t.map((e=>{var t,n;return[e.transform.ref,null!==(n=null===(t=e.obj)||void 0===t?void 0:t.label)&&void 0!==n?n:"<unknown>"]}))}),((e,t)=>t(e))),coloring:U_.MappedStatic("absolute-value",{"absolute-value":U_.Group({domain:U_.MappedStatic("auto",{custom:U_.Interval([-1,1]),auto:U_.Group({symmetric:U_.Boolean(!1,{description:"If true the automatic range is determined as [-|max|, |max|]."})})}),list:U_.ColorList("red-white-blue",{presetKind:"scale"})}),"relative-value":U_.Group({domain:U_.MappedStatic("auto",{custom:U_.Interval([-1,1]),auto:U_.Group({symmetric:U_.Boolean(!1,{description:"If true the automatic range is determined as [-|max|, |max|]."})})}),list:U_.ColorList("red-white-blue",{presetKind:"scale"})})}),defaultColor:U_.Color(Jp(13421772)),normalOffset:U_.Numeric(0,{min:0,max:20,step:.1},{description:"Offset vertex position along its normal by given amount."})};const l5={name:"external-volume",label:"External Volume",category:Ck.Misc,factory:function e(t,n){let r,o;try{r=n.volume.getValue()}catch(i){}if(r){const e=n.coloring.params,{stats:t}=r.grid,i="custom"===e.domain.name?e.domain.params:[t.min,t.max],a="relative-value"===n.coloring.name;if("auto"===e.domain.name&&a&&(i[0]=(i[0]-t.mean)/t.sigma,i[1]=(i[1]-t.mean)/t.sigma),"auto"===n.coloring.params.domain.name&&n.coloring.params.domain.params.symmetric){const e=Math.max(Math.abs(i[0]),Math.abs(i[1]));i[0]=-e,i[1]=e}const s=yy.create({domain:i,listOrName:e.list.colors}),l=GW.getGridToCartesianTransform(r.grid);Yh.invert(l,l);const c=qh(),{dimensions:u,get:d}=r.grid.cells.space,A=r.grid.cells.data,[f,p,h]=u;o=e=>{if(!function(e){return!!e&&"position-location"===e.kind}(e))return n.defaultColor;qh.copy(c,e.position),n.normalOffset>0&&qh.scaleAndAdd(c,c,e.normal,n.normalOffset),qh.transformMat4(c,c,l);const r=Math.floor(c[0]),o=Math.floor(c[1]),i=Math.floor(c[2]);if(r<0||r>=f||o<0||o>=p||i<0||i>=h)return n.defaultColor;const u=c[0]-r,g=c[1]-o,m=c[2]-i,y=Math.min(r+1,f-1),v=Math.min(o+1,p-1),b=Math.min(i+1,h-1);let C=d(A,r,o,i),I=d(A,y,o,i),E=d(A,r,v,i),x=d(A,y,v,i);const B=Vp(Vp(C,I,u),Vp(E,x,u),g);C=d(A,r,o,b),I=d(A,y,o,b),E=d(A,r,v,b),x=d(A,y,v,b);const w=Vp(Vp(C,I,u),Vp(E,x,u),g);let _=Vp(B,w,m);return a&&(_=(_-t.mean)/t.sigma),s.color(_)}}else o=()=>n.defaultColor;return{factory:e,granularity:"vertex",preferSmoothing:!0,color:o,props:n,description:"Assigns a color based on volume value at a given vertex."}},getParams:()=>s5,defaultValues:U_.getDefaultValues(s5),isApplicable:e=>!0},c5={mainchain:U_.MappedStatic("molecule-type",{uniform:U_.Group(xk),"chain-id":U_.Group(R2),"entity-id":U_.Group(K2),"entity-source":U_.Group(o4),"molecule-type":U_.Group(j4),"model-index":U_.Group(p4),"structure-index":U_.Group(v4),"secondary-structure":U_.Group(h3),"trajectory-index":U_.Group(T4)}),sidechain:U_.MappedStatic("residue-name",{uniform:U_.Group(xk),"residue-name":U_.Group(a3),"element-symbol":U_.Group(O4)})};const u5={name:"cartoon",label:"Cartoon",category:Ck.Misc,factory:function e(t,n){var r,o,i,a;const s=function(e,t){switch(t.name){case"uniform":return Bk(0,t.params);case"chain-id":return F2(e,t.params);case"entity-id":return $2(e,t.params);case"entity-source":return u4(e,t.params);case"molecule-type":return H4(0,t.params);case"model-index":return h4(e,t.params);case"structure-index":return b4(e,t.params);case"secondary-structure":return m3(e,t.params);case"trajectory-index":return k4(e,t.params);default:Zh()}}(t,n.mainchain),l=function(e,t){switch(t.name){case"uniform":return Bk(0,t.params);case"residue-name":return u3(0,t.params);case"element-symbol":return F4(e,t.params);default:Zh()}}(t,n.sidechain),c=Qh(null!==(r=s.contextHash)&&void 0!==r?r:0,null!==(o=l.contextHash)&&void 0!==o?o:0);let u=s.legend;return"table-legend"===(null===(i=s.legend)||void 0===i?void 0:i.kind)&&"table-legend"===(null===(a=l.legend)||void 0===a?void 0:a.kind)&&(u={kind:"table-legend",table:[...s.legend.table,...l.legend.table]}),{factory:e,granularity:"group",preferSmoothing:!1,color:function(e,t){return t?s.color(e,!1):l.color(e,!1)},props:n,contextHash:c,description:"Uses separate themes for coloring mainchain and sidechain visuals.",legend:u}},getParams:function(e){return U_.clone(c5)},defaultValues:U_.getDefaultValues(c5),isApplicable:e=>!!e.structure};var d5;!function(e){e.Category=Ck,e.PaletteScale=16777215,e.EmptyFactory=()=>e.Empty;const t=Jp(13421772);e.Empty={factory:e.EmptyFactory,granularity:"uniform",color:()=>t,props:{}},e.areEqual=function(e,t){return e.contextHash===t.contextHash&&e.factory===t.factory&&Qp(e.props,t.props)},e.EmptyProvider={name:"",label:"",category:"",factory:e.EmptyFactory,getParams:()=>({}),defaultValues:{},isApplicable:()=>!0},e.createRegistry=function(){return new E5(e.BuiltIn,e.EmptyProvider)},e.BuiltIn={"atom-id":t5,"carbohydrate-symbol":b2,cartoon:u5,"chain-id":N2,"element-index":G2,"element-symbol":N4,"entity-id":e4,"entity-source":d4,hydrophobicity:P3,illustrative:T3,"model-index":g4,"molecule-type":V4,occupancy:L3,"operator-hkl":X3,"operator-name":Y2,"partial-charge":Z3,"polymer-id":J4,"polymer-index":n3,"residue-name":d3,"secondary-structure":y3,"sequence-id":E3,"shape-group":JK,"structure-index":C4,"trajectory-index":Q4,uncertainty:_3,"unit-index":_4,uniform:wk,"volume-segment":a5,"volume-value":r5,"external-volume":l5}}(d5||(d5={}));const A5={scale:U_.Numeric(1,{min:.1,max:5,step:.1})};function f5(e,t){return BO.isAtomic(e)?FN(e.model.atomicHierarchy.atoms.type_symbol.value(t)):BO.isSpheres(e)?e.model.coarseConformation.spheres.radius[t]:0}const p5={name:"physical",label:"Physical",category:"",factory:function e(t,n){const r=void 0===n.scale?1:n.scale;return{factory:e,granularity:"group",size:function(e){let t;return t=Vk.is(e)?r*f5(e.unit,e.element):RP.isLocation(e)?r*Math.min(f5(e.aUnit,e.aUnit.elements[e.aIndex]),f5(e.bUnit,e.bUnit.elements[e.bIndex])):1*r,t},props:n,description:"Assigns a physical size, i.e. vdW radius for atoms or given radius for coarse spheres."}},getParams:function(e){return A5},defaultValues:U_.getDefaultValues(A5),isApplicable:e=>!!e.structure},h5={bfactorFactor:U_.Numeric(.1,{min:0,max:1,step:.01}),rmsfFactor:U_.Numeric(.05,{min:0,max:1,step:.01}),baseSize:U_.Numeric(.2,{min:0,max:2,step:.1})};function g5(e,t,n){return BO.isAtomic(e)?e.model.atomicConformation.B_iso_or_equiv.value(t)*n.bfactorFactor:BO.isSpheres(e)?e.model.coarseConformation.spheres.rmsf[t]*n.rmsfFactor:0}const m5={name:"uncertainty",label:"Uncertainty/Disorder",category:"",factory:function e(t,n){return{factory:e,granularity:"group",size:function(e){let t=n.baseSize;return Vk.is(e)?t+=g5(e.unit,e.element,n):RP.isLocation(e)&&(t+=g5(e.aUnit,e.aUnit.elements[e.aIndex],n)),t},props:n,description:"Assigns a size reflecting the uncertainty or disorder of an element's position, e.g. B-factor or RMSF, depending on the data availability and experimental technique."}},getParams:function(e){return h5},defaultValues:U_.getDefaultValues(h5),isApplicable:e=>!!e.structure&&e.structure.models.some((e=>e.atomicConformation.B_iso_or_equiv.isDefined||e.coarseHierarchy.isDefined))};var y5,v5,b5,C5;function I5(e){return e.map((e=>[e.name,e.provider.label,e.provider.category]))}!function(e){e.EmptyFactory=()=>e.Empty,e.Empty={factory:e.EmptyFactory,granularity:"uniform",size:()=>1,props:{}},e.areEqual=function(e,t){return e.contextHash===t.contextHash&&e.factory===t.factory&&Qp(e.props,t.props)},e.EmptyProvider={name:"",label:"",category:"",factory:e.EmptyFactory,getParams:()=>({}),defaultValues:{},isApplicable:()=>!0},e.createRegistry=function(){return new E5(e.BuiltIn,e.EmptyProvider)},e.BuiltIn={physical:p5,"shape-group":YK,uncertainty:m5,uniform:Dk}}(y5||(y5={})),function(e){function t(){return{color:d5.Empty,size:y5.Empty}}e.create=function(e,n,r,o){o=o||t();const i=r.colorTheme,a=r.sizeTheme;return o.color=e.colorThemeRegistry.create(i.name,n,i.params),o.size=e.sizeThemeRegistry.create(a.name,n,a.params),o},e.createEmpty=t,e.ensureDependencies=async function(e,t,n,r){var o,i;await(null===(o=t.colorThemeRegistry.get(r.colorTheme.name).ensureCustomProperties)||void 0===o?void 0:o.attach(e,n)),await(null===(i=t.sizeThemeRegistry.get(r.sizeTheme.name).ensureCustomProperties)||void 0===i?void 0:i.attach(e,n))},e.releaseDependencies=function(e,t,n){var r,o;null===(r=e.colorThemeRegistry.get(n.colorTheme.name).ensureCustomProperties)||void 0===r||r.detach(t),null===(o=e.sizeThemeRegistry.get(n.sizeTheme.name).ensureCustomProperties)||void 0===o||o.detach(t)}}(v5||(v5={}));class E5{get default(){return this._list[0]}get list(){return this._list}get types(){return I5(this._list)}constructor(e,t){this.emptyProvider=t,this._list=[],this._map=new Map,this._name=new Map,tw(e,((e,t)=>{if(e.name!==t)throw new Error(`Fix build in themes to have matching names. ${e.name} ${t}`);this.add(e)}))}sort(){this._list.sort(((e,t)=>e.provider.category===t.provider.category?e.provider.label<t.provider.label?-1:e.provider.label>t.provider.label?1:0:e.provider.category<t.provider.category?-1:1))}add(e){if(this._map.has(e.name))throw new Error(`${e.name} already registered.`);const t=e.name;this._list.push({name:t,provider:e}),this._map.set(t,e),this._name.set(e,t),this.sort()}remove(e){this._list.splice(this._list.findIndex((t=>t.name===e.name)),1);const t=this._map.get(e.name);t&&(this._map.delete(e.name),this._name.delete(t))}has(e){return this._map.has(e.name)}get(e){return this._map.get(e)||this.emptyProvider}getName(e){if(!this._name.has(e))throw new Error(`'${e.label}' is not a registered theme provider.`);return this._name.get(e)}create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.get(e);return r.factory(t,{...U_.getDefaultValues(r.getParams(t)),...n})}getApplicableList(e){return this._list.filter((t=>t.provider.isApplicable(e)))}getApplicableTypes(e){return I5(this.getApplicableList(e))}clear(){this._list.length=0,this._map.clear(),this._name.clear()}}function x5(e,t,n){switch(n){case b5.Highlight:e[t]|=1;break;case b5.RemoveHighlight:e[t]&=-2;break;case b5.Select:e[t]|=2;break;case b5.Deselect:e[t]&=-3;break;case b5.Toggle:e[t]^=2;break;case b5.Clear:e[t]=0}}function B5(e,t,n){if(n===b5.None)return!1;if(Gg.is(t)){const r=Gg.start(t),o=Gg.end(t),i=r+3>>2,a=i+(o-4*i>>2);if(a<=i){for(let t=r;t<o;++t)x5(e,t,n);return!0}const s=new Uint32Array(e.buffer,0,e.buffer.byteLength>>2),l=r,c=Math.min(4*i,o),u=Math.max(r,4*a),d=o;switch(n){case b5.Highlight:for(let e=i;e<a;++e)s[e]|=16843009;break;case b5.RemoveHighlight:for(let e=i;e<a;++e)s[e]&=-16843010;break;case b5.Select:for(let e=i;e<a;++e)s[e]|=33686018;break;case b5.Deselect:for(let e=i;e<a;++e)s[e]&=-33686019;break;case b5.Toggle:for(let e=i;e<a;++e)s[e]^=33686018;break;case b5.Clear:for(let e=i;e<a;++e)s[e]=0;break;default:Zh()}for(let t=l;t<c;++t)x5(e,t,n);for(let t=u;t<d;++t)x5(e,t,n)}else switch(n){case b5.Highlight:for(let n=0,r=t.length;n<r;++n)e[t[n]]|=1;break;case b5.RemoveHighlight:for(let n=0,r=t.length;n<r;++n)e[t[n]]&=-2;break;case b5.Select:for(let n=0,r=t.length;n<r;++n)e[t[n]]|=2;break;case b5.Deselect:for(let n=0,r=t.length;n<r;++n)e[t[n]]&=-3;break;case b5.Toggle:for(let n=0,r=t.length;n<r;++n)e[t[n]]^=2;break;case b5.Clear:for(let n=0,r=t.length;n<r;++n)e[t[n]]=0;break;default:Zh()}return!0}!function(e){e[e.None=0]="None",e[e.Highlight=1]="Highlight",e[e.RemoveHighlight=2]="RemoveHighlight",e[e.Select=4]="Select",e[e.Deselect=8]="Deselect",e[e.Toggle=16]="Toggle",e[e.Clear=32]="Clear"}(b5||(b5={})),function(e){e.is=mp.has,e.All=b5.Highlight|b5.RemoveHighlight|b5.Select|b5.Deselect|b5.Toggle|b5.Clear,e.Highlighting=b5.Highlight|b5.RemoveHighlight|b5.Clear,e.Selecting=b5.Select|b5.Deselect|b5.Toggle|b5.Clear,e.isReverse=function(e,t){return e===b5.Highlight&&t===b5.RemoveHighlight||e===b5.RemoveHighlight&&t===b5.Highlight||e===b5.Select&&t===b5.Deselect||e===b5.Deselect&&t===b5.Select||e===b5.Toggle&&t===b5.Toggle}}(C5||(C5={}));const w5={kind:"every-loci"};function _5(e){return!!e&&"every-loci"===e.kind}const S5={kind:"empty-loci"};function D5(e){return!!e&&"empty-loci"===e.kind}function T5(e){return!!e&&"data-loci"===e.kind}function k5(e,t,n,r,o){return{kind:"data-loci",tag:e,data:t,elements:n,getBoundingSphere:r,getLabel:o}}var Q5,M5;function R5(e,t){return{kind:e,layers:t}}function P5(e,t){return{kind:e,layers:t}}!function(e){const t=new lO("98");function n(e,t){var n;if("every-loci"!==e.kind&&"empty-loci"!==e.kind)return t||(t=YT()),"structure-loci"===e.kind?YT.copy(t,e.structure.boundary.sphere):"element-loci"===e.kind?YT.copy(t,cG.getBoundary(e).sphere):"bond-loci"===e.kind?RP.getBoundingSphere(e,t):"shape-loci"===e.kind?YT.copy(t,e.shape.geometry.boundingSphere):"group-loci"===e.kind?AJ.getBoundingSphere(e,t):"data-loci"===e.kind?null===(n=e.getBoundingSphere)||void 0===n?void 0:n.call(e,t):"volume-loci"===e.kind?HW.getBoundingSphere(e.volume,t):"isosurface-loci"===e.kind?HW.Isosurface.getBoundingSphere(e.volume,e.isoValue,t):"cell-loci"===e.kind?HW.Cell.getBoundingSphere(e.volume,e.indices,t):"segment-loci"===e.kind?HW.Segment.getBoundingSphere(e.volume,e.segments,t):void 0}e.getBundleBoundingSphere=function(e){const r=e.loci.map((e=>n(e))).filter((e=>!!e));t.reset();for(const n of r)t.includePositionRadius(n.center,n.radius);t.finishedIncludeStep();for(const n of r)t.radiusPositionRadius(n.center,n.radius);return t.getSphere()},e.areEqual=function(e,t){return!(!_5(e)||!_5(t))||(!(!D5(e)||!D5(t))||(T5(e)&&T5(t)?function(e,t){if(!Mp(e.data,t.data)||e.tag!==t.tag)return!1;if(e.elements.length!==t.elements.length)return!1;for(let n=0,r=e.elements.length;n<r;++n)if(!Mp(e.elements[n],t.elements[n]))return!1;return!0}(e,t):aG.isLoci(e)&&aG.isLoci(t)?aG.areLociEqual(e,t):cG.is(e)&&cG.is(t)?cG.areEqual(e,t):RP.isLoci(e)&&RP.isLoci(t)?RP.areLociEqual(e,t):dJ.isLoci(e)&&dJ.isLoci(t)?dJ.areLociEqual(e,t):AJ.isLoci(e)&&AJ.isLoci(t)?AJ.areLociEqual(e,t):HW.isLoci(e)&&HW.isLoci(t)?HW.areLociEqual(e,t):HW.Isosurface.isLoci(e)&&HW.Isosurface.isLoci(t)?HW.Isosurface.areLociEqual(e,t):HW.Cell.isLoci(e)&&HW.Cell.isLoci(t)?HW.Cell.areLociEqual(e,t):!(!HW.Segment.isLoci(e)||!HW.Segment.isLoci(t))&&HW.Segment.areLociEqual(e,t)))},e.isEvery=function(e){return!!e&&"every-loci"===e.kind},e.isEmpty=function(e){return!_5(e)&&(!!D5(e)||(T5(e)?function(e){return 0===e.elements.length}(e):aG.isLoci(e)?aG.isLociEmpty(e):cG.is(e)?cG.isEmpty(e):RP.isLoci(e)?RP.isLociEmpty(e):dJ.isLoci(e)?dJ.isLociEmpty(e):AJ.isLoci(e)?AJ.isLociEmpty(e):HW.isLoci(e)?HW.isLociEmpty(e):HW.Isosurface.isLoci(e)?HW.Isosurface.isLociEmpty(e):HW.Cell.isLoci(e)?HW.Cell.isLociEmpty(e):!!HW.Segment.isLoci(e)&&HW.Segment.isLociEmpty(e)))},e.remap=function(e,t){return t instanceof aG&&(cG.is(e)?e=cG.remap(e,t):aG.isLoci(e)?e=aG.remapLoci(e,t):RP.isLoci(e)&&(e=RP.remapLoci(e,t))),e},e.getBoundingSphere=n;const r=YT.zero();e.getCenter=function(e,t){const o=n(e,r);return o?qh.copy(t||qh(),o.center):void 0},e.getPrincipalAxes=function(e){if("every-loci"!==e.kind&&"empty-loci"!==e.kind)return"structure-loci"===e.kind?cG.getPrincipalAxes(aG.toStructureElementLoci(e.structure)):"element-loci"===e.kind?cG.getPrincipalAxes(e):void("bond-loci"!==e.kind&&"shape-loci"!==e.kind&&"group-loci"!==e.kind&&"data-loci"!==e.kind&&"volume-loci"!==e.kind&&"isosurface-loci"!==e.kind&&"cell-loci"!==e.kind&&e.kind)};const o={element:e=>e,residue:e=>cG.is(e)?cG.extendToWholeResidues(e,!0):e,chain:e=>cG.is(e)?cG.extendToWholeChains(e):e,entity:e=>cG.is(e)?cG.extendToWholeEntities(e):e,model:e=>cG.is(e)?cG.extendToWholeModels(e):e,operator:e=>cG.is(e)?cG.extendToWholeOperators(e):e,structure:e=>cG.is(e)?aG.toStructureElementLoci(e.structure):AJ.isLoci(e)?dJ.Loci(e.shape):HW.Cell.isLoci(e)?HW.Loci(e.volume):e,elementInstances:e=>cG.is(e)?cG.extendToAllInstances(e):e,residueInstances:e=>cG.is(e)?cG.extendToAllInstances(cG.extendToWholeResidues(e,!0)):e,chainInstances:e=>cG.is(e)?cG.extendToAllInstances(cG.extendToWholeChains(e)):e};function i(e,t){return o[t](e)}e.GranularityOptions=U_.objectToOptions(o,(e=>{switch(e){case"element":return"Atom/Coarse Element";case"elementInstances":return["Atom/Coarse Element Instances","With Symmetry"];case"structure":return"Structure/Shape";default:return e.indexOf("Instances")?[ah(e),"With Symmetry"]:ah(e)}})),e.simpleGranularity=function(e){return e.replace("Instances","")},e.applyGranularity=i,e.normalize=function(e,t){return("element"!==t||arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&RP.isLoci(e)&&(e=RP.toStructureElementLoci(e)),aG.isLoci(e)&&(e=aG.toStructureElementLoci(e.structure)),cG.is(e)&&(e=cG.remap(e,e.structure.root)),t&&(e=i(e,t)),e}}(Q5||(Q5={})),function(e){function t(e){return 0===e.layers.length}e.Empty={kind:"empty-loci",layers:[]},e.areEqual=function(e,t){if(0===e.layers.length&&0===t.layers.length)return!0;if(e.layers.length!==t.layers.length)return!1;for(let n=0,r=e.layers.length;n<r;++n){if(e.layers[n].clear!==t.layers[n].clear)return!1;if(e.layers[n].color!==t.layers[n].color)return!1;if(!Q5.areEqual(e.layers[n].loci,t.layers[n].loci))return!1}return!0},e.isEmpty=t,e.remap=function(e,t){if("element-loci"===e.kind){const n=[];for(const r of e.layers){let{loci:e,color:o,clear:i}=r;e=cG.remap(e,t),cG.isEmpty(e)||n.push({loci:e,color:o,clear:i})}return{kind:"element-loci",layers:n}}return e},e.merge=function(e){if(t(e))return e;if("element-loci"===e.kind){const{structure:t}=e.layers[0].loci,n=new Map;let r=cG.none(t);for(let i=0,a=e.layers.length;i<a;++i){let{loci:t,color:o,clear:s}=e.layers[a-i-1];if(t=cG.subtract(t,r),r=cG.union(t,r),!cG.isEmpty(t)){const e=s?-1:o;n.has(e)&&(t=cG.union(t,n.get(e))),n.set(e,t)}}const o=[];return n.forEach(((e,t)=>{const n=-1===t,r=n?Jp(0):t;o.push({loci:e,color:r,clear:n})})),{kind:"element-loci",layers:o}}return e},e.filter=function(e,n){if(t(e))return e;if("element-loci"===e.kind){const{structure:t}=e.layers[0].loci,r=[];for(const o of e.layers){let{loci:e,color:i,clear:a}=o;const s=cG.remap(e,n);e=cG.remap(s,t),cG.isEmpty(e)||r.push({loci:e,color:i,clear:a})}return{kind:"element-loci",layers:r}}return e},e.ofScript=function(e,t){const n=[];for(let r=0,o=e.length;r<o;++r){const{script:o,color:i,clear:a}=e[r],s=t0.toLoci(o,t);cG.isEmpty(s)||n.push({loci:s,color:i,clear:a})}return{kind:"element-loci",layers:n}},e.ofBundle=function(e,t){const n=[];for(let r=0,o=e.length;r<o;++r){const{bundle:o,color:i,clear:a}=e[r],s=SO.toLoci(o,t.root);n.push({loci:s,color:i,clear:a})}return{kind:"element-loci",layers:n}},e.toBundle=function(e){const t=[];for(let n=0,r=e.layers.length;n<r;++n){const{loci:r,color:o,clear:i}=e.layers[n],a=SO.fromLoci(r);t.push({bundle:a,color:o,clear:i})}return{kind:"element-loci",layers:t}}}(R5||(R5={})),function(e){function t(e){return 0===e.layers.length}e.Empty={kind:"empty-loci",layers:[]},e.areEqual=function(e,t){if(0===e.layers.length&&0===t.layers.length)return!0;if(e.layers.length!==t.layers.length)return!1;for(let n=0,r=e.layers.length;n<r;++n){if(e.layers[n].value!==t.layers[n].value)return!1;if(!Q5.areEqual(e.layers[n].loci,t.layers[n].loci))return!1}return!0},e.isEmpty=t,e.remap=function(e,t){if("element-loci"===e.kind){const n=[];for(const r of e.layers){const e=cG.remap(r.loci,t);cG.isEmpty(e)||n.push({loci:e,value:r.value})}return{kind:"element-loci",layers:n}}return e},e.merge=function(e){if(t(e))return e;if("element-loci"===e.kind){const{structure:t}=e.layers[0].loci,n=new Map;let r=cG.none(t);for(let i=0,a=e.layers.length;i<a;++i){let{loci:t,value:o}=e.layers[a-i-1];t=cG.subtract(t,r),r=cG.union(t,r),cG.isEmpty(t)||(n.has(o)&&(t=cG.union(t,n.get(o))),n.set(o,t))}const o=[];return n.forEach(((e,t)=>{o.push({loci:e,value:t})})),{kind:"element-loci",layers:o}}return e},e.filter=function(e,n){if(t(e))return e;if("element-loci"===e.kind){const{structure:t}=e.layers[0].loci,r=[];for(const o of e.layers){let{loci:e,value:i}=o;const a=cG.remap(e,n);e=cG.remap(a,t),cG.isEmpty(e)||r.push({loci:e,value:i})}return{kind:"element-loci",layers:r}}return e},e.ofScript=function(e,t){const n=[];for(let r=0,o=e.length;r<o;++r){const{script:o,value:i}=e[r],a=t0.toLoci(o,t);cG.isEmpty(a)||n.push({loci:a,value:i})}return{kind:"element-loci",layers:n}},e.ofBundle=function(e,t){const n=[];for(let r=0,o=e.length;r<o;++r){const{bundle:o,value:i}=e[r],a=SO.toLoci(o,t.root);n.push({loci:a,value:i})}return{kind:"element-loci",layers:n}},e.toBundle=function(e){const t=[];for(let n=0,r=e.layers.length;n<r;++n){const{loci:r,value:o}=e.layers[n],i=SO.fromLoci(r);t.push({bundle:i,value:o})}return{kind:"element-loci",layers:t}}}(P5||(P5={})),function(e){e.create=function(){return{updateTransform:!1,updateMatrix:!1,updateColor:!1,updateSize:!1,createGeometry:!1,createNew:!1,info:{}}},e.reset=function(e){e.updateTransform=!1,e.updateMatrix=!1,e.updateColor=!1,e.updateSize=!1,e.createGeometry=!1,e.createNew=!1}}(M5||(M5={}));const O5={lowestElementCount:1e6,lowerElementCount:5e5,lowElementCount:1e5,mediumElementCount:2e4,highElementCount:2e3,coarseGrainedFactor:10,elementCountFactor:1};function F5(e){const t={...O5,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}};let n=e.elementCount*t.elementCountFactor;return(e.isCoarseGrained||e.isCoarse)&&(n*=t.coarseGrainedFactor),n>t.lowestElementCount?"lowest":n>t.lowerElementCount?"lower":n>t.lowElementCount?"low":n>t.mediumElementCount?"medium":n>t.highElementCount?"high":"higher"}function N5(e,t){let n=Pp(e.quality,"auto"),r=Pp(e.detail,1),o=Pp(e.radialSegments,12),i=Pp(e.linearSegments,8),a=Pp(e.resolution,2),s=Pp(e.probePositions,12),l=Pp(e.doubleSided,!0),c=0;if("auto"===n)if(t instanceof aG)n=F5(t.root),c=function(e){if(1===e.root.models.length){const t=xO.Provider.get(e.root.model);if(t&&"P 1"===t.spacegroup.name&&!OT.isZero(t.spacegroup.cell))return t.spacegroup.cell.volume}return XT.volume(e.root.boundary.box)}(t);else if(HW.is(t)){const[e,r,o]=t.grid.cells.space.dimensions;c=e*r*o,n=c<1e7?"medium":"low"}switch(n){case"highest":r=3,o=36,i=18,a=.1,s=72,l=!0;break;case"higher":r=3,o=28,i=14,a=.3,s=48,l=!0;break;case"high":r=2,o=20,i=10,a=.5,s=36,l=!0;break;case"medium":r=1,o=12,i=8,a=.8,s=24,l=!0;break;case"low":r=0,o=8,i=3,a=1.3,s=24,l=!1;break;case"lower":r=0,o=4,i=2,a=3,s=12,l=!1;break;case"lowest":r=0,o=2,i=1,a=8,s=12,l=!1}return a=Math.max(a,c/5e8),a=Math.min(a,20),"off"===e.transparentBackfaces&&(void 0!==e.alpha&&e.alpha<1||e.xrayShaded)&&(l=!1),{detail:r,radialSegments:o,linearSegments:i,resolution:a,probePositions:s,doubleSided:l}}const L5=qh.set,U5=qh.normalize,G5=qh.sub,j5=qh.addScalar,z5=qh.scale,H5=qh.toArray;function V5(e,t,n,r){let o=!1;if(HW.isLoci(e)){if(!HW.areEquivalent(e.volume,t))return!1;r(Gg.ofLength(t.grid.cells.data.length))&&(o=!0)}else if(HW.Isosurface.isLoci(e)){if(!HW.areEquivalent(e.volume,t))return!1;if(null===n||void 0===n?void 0:n.isoValue){if(!HW.IsoValue.areSame(e.isoValue,n.isoValue,t.grid.stats))return!1;r(Gg.ofLength(t.grid.cells.data.length))&&(o=!0)}else{const{stats:n,cells:{data:i}}=t.grid,a=n.sigma,s=HW.IsoValue.toAbsolute(e.isoValue,n).absoluteValue;for(let e=0,t=i.length;e<t;++e)Hh(s,i[e],a)&&r(Gg.ofSingleton(e))&&(o=!0)}}else if(HW.Cell.isLoci(e)){if(!HW.areEquivalent(e.volume,t))return!1;Gg.is(e.indices)?r(e.indices)&&(o=!0):ey.forEach(e.indices,(e=>{r(Gg.ofSingleton(e))&&(o=!0)}))}else if(HW.Segment.isLoci(e)){if(!HW.areEquivalent(e.volume,t))return!1;if(null===n||void 0===n?void 0:n.segments){if(!Em.areIntersecting(e.segments,n.segments))return!1;r(Gg.ofLength(t.grid.cells.data.length))&&(o=!0)}else{const n=HW.Segmentation.get(t);if(n){const i=new Set;for(let t=0,r=e.segments.length;t<r;++t)$Q.add(i,n.segments.get(e.segments[t]));const a=Array.from(i.values()),s=t.grid.cells.data;for(let e=0,t=s.length;e<t;++e)a.includes(s[e])&&r(Gg.ofSingleton(e))&&(o=!0)}}}return o}function q5(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=e[0]*e[1]*e[2],r=Math.sqrt(n),o=Math.pow(2,Math.ceil(Math.log(r)/Math.log(2)));let i=e[0]+t,a=e[1]+t,s=1,l=i;return o<i*e[2]?(l=Math.floor(o/i),s=Math.ceil(e[2]/l),i*=l,a*=s):i*=e[2],{width:i,height:a,columns:l,rows:s,powerOfTwoSize:a<o?o:2*o}}function Y5(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{cells:{space:r,data:o},stats:{max:i,min:a}}=e.grid,s=r.dimensions,{dataOffset:l}=r,{width:c,height:u}=q5(s,n),d="data"===t?1:4,A=new Uint8Array(c*u*d),f={array:A,width:c,height:u},p=i-a,[h,g,m]=s,y=h+n,v=g+n,b=qh(),C=qh(),I=h-1,E=g-1,x=m-1;for(let B=0;B<m;++B)for(let e=0;e<g;++e)for(let n=0;n<h;++n){const r=Math.floor(B*y%c/y),i=d*(Math.floor(B*y/c)*v*c+e*c+(r*y+n)),s=l(n,e,B);"data"===t?A[i]=Math.round((o[s]-a)/p*255):("groups"===t?$X(s,A,i):(L5(b,o[l(Math.max(0,n-1),e,B)],o[l(n,Math.max(0,e-1),B)],o[l(n,e,Math.max(0,B-1))]),L5(C,o[l(Math.min(I,n+1),e,B)],o[l(n,Math.min(E,e+1),B)],o[l(n,e,Math.min(x,B+1))]),U5(b,G5(b,b,C)),j5(b,z5(b,b,.5),.5),H5(z5(b,b,255),A,i)),A[i+3]=Math.round((o[s]-a)/p*255))}return f}function X5(e,t,n,r,o){const{colorType:i,vertexCount:a,groupCount:s,positionBuffer:l,transformBuffer:c,groupBuffer:u,itemSize:d}=e,A=i.endsWith("Instance"),f=XT.fromSphere3D(XT(),A?e.boundingSphere:e.invariantBoundingSphere),p=1+t,h=XT.expand(XT(),f,qh.create(p,p,p)),g=1/t,m=XT.scale(XT(),h,g),y=XT.size(qh(),m);qh.ceil(y,y),qh.add(y,y,qh.create(2,2,2));const{min:v}=h,[b,C]=y,{width:I,height:E}=q5(y),x=new Float32Array(I*E*d),B=new Float32Array(I*E),w=new Uint8Array(I*E*d),_={array:w,width:I,height:E,filter:"linear"},S=A?e.instanceCount:1,D=e.colorData.array;function T(e,t,n){const r=Math.floor(n*b%I/b),o=Math.floor(n*b/I);return d*(o*C*I+t*I+(r*b+e))}const[k,Q,M]=y,R=qh();for(let N=0;N<S;++N)for(let e=0;e<a;e+=n){qh.fromArray(R,l,3*e),A&&qh.transformMat4Offset(R,R,c,0,0,16*N),qh.sub(R,R,v),qh.scale(R,R,g);const[t,n,r]=R,o=Math.floor(t),i=Math.floor(n),a=Math.floor(r),f=(N*s+u[e])*d,p=Math.max(0,o-2),h=Math.max(0,i-2),m=Math.max(0,a-2),y=Math.min(k,o+2+2),b=Math.min(Q,i+2+2),C=Math.min(M,a+2+2);for(let e=p;e<y;++e){const o=e-t;for(let t=h;t<b;++t){const i=t-n;for(let n=m;n<C;++n){const a=n-r,s=Math.sqrt(o*o+i*i+a*a);if(s>2)continue;const l=2-s,c=T(e,t,n);for(let e=0;e<d;++e)x[c+e]+=D[f+e]*l;B[c/d]+=l}}}}for(let N=0,L=B.length;N<L;++N){const e=N*d,t=B[N];for(let n=0;n<d;++n)w[e+n]=Math.round(x[e+n]/t)}const P=Wh.create(I,E),O=Kh.create(v[0],v[1],v[2],g),F=A?"volumeInstance":"volume";if(r){if(!o){const e=4===d?"rgba":3===d?"rgb":"alpha";o=r.resources.texture("image-uint8",e,"ubyte","linear")}return o.load(_),{kind:"volume",texture:o,gridTexDim:P,gridDim:y,gridTransform:O,type:F}}{const e=function(e){const{vertexCount:t,positionBuffer:n,transformBuffer:r,grid:o,gridDim:i,gridTexDim:a,gridTransform:s,vertexStride:l,colorStride:c}=e,u=e.itemOffset||0,d=e.outputStride;if(d+u>c)throw new Error("outputStride + itemOffset must NOT be larger than colorStride");const A=e.colorType.endsWith("Instance"),f=A?e.instanceCount:1,p=gV(Math.max(1,f*t),d,Uint8Array),{array:h}=p,[g,m]=i,y=a[0],v=qh.fromArray(qh(),s,0),b=s[3];function C(e,t,n){const r=Math.floor(n*g%y/g),o=Math.floor(n*g/y);return c*(o*m*y+t*y+(r*g+e))}const I=qh(),E=qh(),x=qh(),B=qh();for(let w=0;w<f;++w)for(let e=0;e<t;++e){qh.fromArray(I,n,e*l),A&&qh.transformMat4Offset(I,I,r,0,0,16*w),qh.sub(I,I,v),qh.scale(I,I,b),qh.floor(E,I),qh.ceil(x,I),qh.sub(B,I,E),qh.sub(I,x,E),qh.div(B,B,I);const[i,a,s]=E,[c,f,p]=x,[g,m,y]=B,_=C(i,a,s)+u,S=C(c,a,s)+u,D=C(i,a,p)+u,T=C(c,a,p)+u,k=C(i,f,s)+u,Q=C(c,f,s)+u,M=C(i,f,p)+u,R=C(c,f,p)+u,P=(w*t+e)*d;for(let e=0;e<d;++e){const t=o[_+e],n=o[S+e],r=o[D+e],i=o[T+e],a=o[k+e],s=o[Q+e],l=o[M+e],c=o[R+e],u=Vp(t,n,g),d=Vp(r,i,g),A=Vp(a,s,g),f=Vp(l,c,g),p=Vp(u,A,m),v=Vp(d,f,m);h[P+e]=Vp(p,v,y)}}return p}({vertexCount:a,instanceCount:S,transformBuffer:c,positionBuffer:l,colorType:F,grid:w,gridDim:y,gridTexDim:P,gridTransform:O,vertexStride:3,colorStride:d,outputStride:d});return{kind:"vertex",texture:e,texDim:Wh.create(e.width,e.height),type:A?"vertexInstance":"vertex"}}}function W5(e,t,n,r,o){if(!function(e){return"group"===e||"groupInstance"===e}(e.dColorType.ref.value))return;const i=X5({vertexCount:e.uVertexCount.ref.value,instanceCount:e.uInstanceCount.ref.value,groupCount:e.uGroupCount.ref.value,transformBuffer:e.aTransform.ref.value,instanceBuffer:e.aInstance.ref.value,positionBuffer:e.aPosition.ref.value,groupBuffer:e.aGroup.ref.value,colorData:e.tColor.ref.value,colorType:e.dColorType.ref.value,boundingSphere:e.boundingSphere.ref.value,invariantBoundingSphere:e.invariantBoundingSphere.ref.value,itemSize:3},t,n,r,o);"volume"===i.kind?(Sp.updateIfChanged(e.dColorType,i.type),Sp.update(e.tColorGrid,i.texture),Sp.update(e.uColorTexDim,i.gridTexDim),Sp.update(e.uColorGridDim,i.gridDim),Sp.update(e.uColorGridTransform,i.gridTransform)):"vertex"===i.kind&&(Sp.updateIfChanged(e.dColorType,i.type),Sp.update(e.tColor,i.texture),Sp.update(e.uColorTexDim,i.texDim))}const K5="\nprecision highp float;\nprecision highp sampler2D;\n\nuniform sampler2D tColor;\nuniform sampler2D tCount;\nuniform vec2 uTexSize;\n\nvoid main(void) {\n    vec2 coords = gl_FragCoord.xy / uTexSize;\n    vec4 color = texture2D(tColor, coords);\n    float count = texture2D(tCount, coords).r;\n\n    gl_FragColor = color / count;\n}\n",J5="\nprecision highp float;\n\nvarying vec3 vPosition;\nvarying vec4 vColor;\n\nuniform float uCurrentSlice;\nuniform float uCurrentX;\nuniform float uCurrentY;\nuniform float uResolution;\n\nconst float p = 2.0;\n\nvoid main() {\n    vec2 v = gl_FragCoord.xy - vec2(uCurrentX, uCurrentY) - 0.5;\n    vec3 fragPos = vec3(v.x, v.y, uCurrentSlice);\n    float dist = distance(fragPos, vPosition);\n    if (dist > p) discard;\n\n    float f = p - dist;\n    gl_FragColor = vColor * f;\n    gl_FragData[1] = vec4(f);\n}\n",Z5="\nprecision highp float;\n\n#include common\n#include read_from_texture\n\nuniform int uGroupCount;\n\nattribute float aSample;\n#define SampleID int(aSample)\n\nattribute mat4 aTransform;\nattribute float aInstance;\n\nuniform vec2 uGeoTexDim;\nuniform sampler2D tPosition;\nuniform sampler2D tGroup;\n\nuniform vec2 uColorTexDim;\nuniform sampler2D tColor;\n\nvarying vec3 vPosition;\nvarying vec4 vColor;\n\nuniform vec3 uBboxSize;\nuniform vec3 uBboxMin;\nuniform float uResolution;\n\nvoid main() {\n    vec3 position = readFromTexture(tPosition, SampleID, uGeoTexDim).xyz;\n    float group = unpackRGBToInt(readFromTexture(tGroup, SampleID, uGeoTexDim).rgb);\n\n    position = (aTransform * vec4(position, 1.0)).xyz;\n    gl_PointSize = 7.0;\n    vPosition = (position - uBboxMin) / uResolution;\n    gl_Position = vec4(((position - uBboxMin) / uBboxSize) * 2.0 - 1.0, 1.0);\n\n    #if defined(dColorType_group)\n        vColor = readFromTexture(tColor, group, uColorTexDim);\n    #elif defined(dColorType_groupInstance)\n        vColor = readFromTexture(tColor, aInstance * float(uGroupCount) + group, uColorTexDim);\n    #endif\n}\n",$5={drawCount:tK("number"),instanceCount:tK("number"),stride:tK("number"),uGroupCount:JW("i","material"),aTransform:KW("float32",16,1),aInstance:KW("float32",1,1),aSample:KW("float32",1,0),uGeoTexDim:JW("v2","material"),tPosition:ZW("texture","rgba","float","nearest","material"),tGroup:ZW("texture","rgba","float","nearest","material"),uColorTexDim:JW("v2","material"),tColor:ZW("texture","rgba","ubyte","nearest","material"),dColorType:eK("string",["group","groupInstance","vertex","vertexInstance"]),uCurrentSlice:JW("f"),uCurrentX:JW("f"),uCurrentY:JW("f"),uBboxMin:JW("v3","material"),uBboxSize:JW("v3","material"),uResolution:JW("f","material")},e6="color-accumulate",t6="color-count";function n6(e,t){const n=new Float32Array(e);for(let r=0;r<e;++r)n[r]=r*t;return n}function r6(e,t,n,r,o){if(e.namedComputeRenderables[e6]){const i=qh.sub(qh(),n.max,n.min),a=e.namedComputeRenderables[e6].values,s=Math.round(t.vertexCount/o);(s>a.drawCount.ref.value||o!==a.stride.ref.value)&&Sp.update(a.aSample,n6(s,o)),Sp.updateIfChanged(a.drawCount,s),Sp.updateIfChanged(a.instanceCount,t.instanceCount),Sp.updateIfChanged(a.stride,o),Sp.updateIfChanged(a.uGroupCount,t.groupCount),Sp.update(a.aTransform,t.transformBuffer),Sp.update(a.aInstance,t.instanceBuffer),Sp.update(a.uGeoTexDim,Wh.set(a.uGeoTexDim.ref.value,t.positionTexture.getWidth(),t.positionTexture.getHeight())),Sp.update(a.tPosition,t.positionTexture),Sp.update(a.tGroup,t.groupTexture),Sp.update(a.uColorTexDim,Wh.set(a.uColorTexDim.ref.value,t.colorData.getWidth(),t.colorData.getHeight())),Sp.update(a.tColor,t.colorData),Sp.updateIfChanged(a.dColorType,t.colorType),Sp.updateIfChanged(a.uCurrentSlice,0),Sp.updateIfChanged(a.uCurrentX,0),Sp.updateIfChanged(a.uCurrentY,0),Sp.update(a.uBboxMin,n.min),Sp.update(a.uBboxSize,i),Sp.updateIfChanged(a.uResolution,r),e.namedComputeRenderables[e6].update()}else e.namedComputeRenderables[e6]=function(e,t,n,r,o){const i=qh.sub(qh(),n.max,n.min),a=Math.round(t.vertexCount/o),s={drawCount:Sp.create(a),instanceCount:Sp.create(t.instanceCount),stride:Sp.create(o),uGroupCount:Sp.create(t.groupCount),aTransform:Sp.create(t.transformBuffer),aInstance:Sp.create(t.instanceBuffer),aSample:Sp.create(n6(a,o)),uGeoTexDim:Sp.create(Wh.create(t.positionTexture.getWidth(),t.positionTexture.getHeight())),tPosition:Sp.create(t.positionTexture),tGroup:Sp.create(t.groupTexture),uColorTexDim:Sp.create(Wh.create(t.colorData.getWidth(),t.colorData.getHeight())),tColor:Sp.create(t.colorData),dColorType:Sp.create(t.colorType),uCurrentSlice:Sp.create(0),uCurrentX:Sp.create(0),uCurrentY:Sp.create(0),uBboxMin:Sp.create(n.min),uBboxSize:Sp.create(i),uResolution:Sp.create(r)},l={...$5},c=jV("accumulate",Z5,J5,{drawBuffers:"required"}),u=CK(e,"points",c,l,s);return kK(u,s)}(e,t,n,r,o);return e.namedComputeRenderables[e6]}const o6={...MK,tColor:ZW("texture","rgba","float","nearest"),tCount:ZW("texture","alpha","float","nearest"),uTexSize:JW("v2")},i6="color-normalize";function a6(e,t,n){if(e.namedComputeRenderables[i6]){const r=e.namedComputeRenderables[i6].values;Sp.update(r.tColor,t),Sp.update(r.tCount,n),Sp.update(r.uTexSize,Wh.set(r.uTexSize.ref.value,t.getWidth(),t.getHeight())),e.namedComputeRenderables[i6].update()}else e.namedComputeRenderables[i6]=function(e,t,n){const r={...RK,tColor:Sp.create(t),tCount:Sp.create(n),uTexSize:Sp.create(Wh.create(t.getWidth(),t.getHeight()))},o={...o6},i=jV("normalize",pK,K5),a=CK(e,"triangles",i,o,r);return kK(a,r)}(e,t,n);return e.namedComputeRenderables[i6]}function s6(e,t,n,r,o){const{drawBuffers:i}=r.extensions;if(!i)throw new Error("need WebGL draw buffers");fw&&r.timer.mark("calcTextureMeshColorSmoothing");const{gl:a,resources:s,state:l,extensions:{colorBufferHalfFloat:c,textureHalfFloat:u}}=r,d=e.colorType.endsWith("Instance"),A=XT.fromSphere3D(XT(),d?e.boundingSphere:e.invariantBoundingSphere),f=1+t,p=XT.expand(XT(),A,qh.create(f,f,f)),h=1/t,g=XT.scale(XT(),p,h),m=XT.size(qh(),g);qh.ceil(m,m),qh.add(m,m,qh.create(2,2,2));const{min:y}=p,[v,b,C]=m,{texDimX:I,texDimY:E,texCols:x}=function(e){const t=e[0]*e[1]*e[2],n=Math.sqrt(t),r=Math.pow(2,Math.ceil(Math.log(n)/Math.log(2)));let o=0,i=e[1],a=1,s=e[2];return r<e[0]*e[2]?(s=Math.floor(r/e[0]),a=Math.ceil(e[2]/s),o=s*e[0],i*=a):o=e[0]*e[2],{texDimX:o,texDimY:i,texRows:a,texCols:s,powerOfTwoSize:i<r?r:2*r}}(m);r.namedFramebuffers[e6]||(r.namedFramebuffers[e6]=r.resources.framebuffer());const B=r.namedFramebuffers[e6];Xq(a)?(r.namedTextures[e6]||(r.namedTextures[e6]=c&&u?s.texture("image-float16","rgba","fp16","nearest"):s.texture("image-float32","rgba","float","nearest")),r.namedTextures[t6]||(r.namedTextures[t6]=s.texture("image-float32","alpha","float","nearest"))):(r.namedTextures[e6]||(r.namedTextures[e6]=s.texture("image-float32","rgba","float","nearest")),r.namedTextures[t6]||(r.namedTextures[t6]=s.texture("image-float32","rgba","float","nearest")));const w=r.namedTextures[e6],_=r.namedTextures[t6];w.define(I,E),_.define(I,E),w.attachFramebuffer(B,0),_.attachFramebuffer(B,1);const S=r6(r,e,p,t,n);l.currentRenderItemId=-1,B.bind(),i.drawBuffers([i.COLOR_ATTACHMENT0,i.COLOR_ATTACHMENT1]);const{uCurrentSlice:D,uCurrentX:T,uCurrentY:k}=S.values;fw&&r.timer.mark("ColorAccumulate.render"),function(e){const{gl:t,state:n}=e;n.disable(t.CULL_FACE),n.enable(t.BLEND),n.disable(t.DEPTH_TEST),n.enable(t.SCISSOR_TEST),n.depthMask(!1),n.clearColor(0,0,0,0),n.blendFunc(t.ONE,t.ONE),n.blendEquation(t.FUNC_ADD)}(r),l.viewport(0,0,I,E),l.scissor(0,0,I,E),a.clear(a.COLOR_BUFFER_BIT),Sp.update(k,0);let Q=0,M=0,R=0;for(let N=0;N<C;++N)Q>=x&&(Q-=x,M+=b,R=0,Sp.update(k,M)),Sp.update(T,R),Sp.update(D,N),l.viewport(R,M,v,b),l.scissor(R,M,v,b),S.render(),++Q,R+=v;w.detachFramebuffer(B,0),_.detachFramebuffer(B,1),i.drawBuffers([a.COLOR_ATTACHMENT0,a.NONE]),fw&&r.timer.markEnd("ColorAccumulate.render"),fw&&r.timer.mark("ColorNormalize.render"),o&&!function(e){return e.format===cY}(o)||(o=s.texture("image-uint8","rgba","ubyte","linear")),o.define(I,E);const P=a6(r,w,_);l.currentRenderItemId=-1,function(e){const{gl:t,state:n}=e;n.disable(t.CULL_FACE),n.enable(t.BLEND),n.disable(t.DEPTH_TEST),n.enable(t.SCISSOR_TEST),n.depthMask(!1),n.clearColor(0,0,0,0),n.blendFunc(t.ONE,t.ONE),n.blendEquation(t.FUNC_ADD)}(r),o.attachFramebuffer(B,0),l.viewport(0,0,I,E),l.scissor(0,0,I,E),a.clear(a.COLOR_BUFFER_BIT),P.render(),fw&&r.timer.markEnd("ColorNormalize.render");const O=Kh.create(y[0],y[1],y[2],h),F=d?"volumeInstance":"volume";return fw&&r.timer.markEnd("calcTextureMeshColorSmoothing"),{texture:o,gridDim:m,gridTexDim:Wh.create(I,E),gridTransform:O,type:F}}const l6="color-smoothing-rgb",c6="color-smoothing-rgba",u6="color-smoothing-alpha";function d6(e,t,n,r,o){if(!function(e){return"group"===e||"groupInstance"===e}(e.dColorType.ref.value))return;n*=3,r.namedTextures[l6]||(r.namedTextures[l6]=r.resources.texture("image-uint8","rgb","ubyte","nearest"));const i=r.namedTextures[l6];i.load(e.tColor.ref.value);const a=s6({vertexCount:e.uVertexCount.ref.value,instanceCount:e.uInstanceCount.ref.value,groupCount:e.uGroupCount.ref.value,transformBuffer:e.aTransform.ref.value,instanceBuffer:e.aInstance.ref.value,positionTexture:e.tPosition.ref.value,groupTexture:e.tGroup.ref.value,colorData:i,colorType:e.dColorType.ref.value,boundingSphere:e.boundingSphere.ref.value,invariantBoundingSphere:e.invariantBoundingSphere.ref.value},t,n,r,o);Sp.updateIfChanged(e.dColorType,a.type),Sp.update(e.tColorGrid,a.texture),Sp.update(e.uColorTexDim,a.gridTexDim),Sp.update(e.uColorGridDim,a.gridDim),Sp.update(e.uColorGridTransform,a.gridTransform)}var A6,f6;function p6(e,t){return{kind:e,layers:t}}function h6(e,t){return{kind:e,layers:t}}function g6(e,t){return{kind:e,layers:t}}!function(e){e.setVisibility=function(e,t){e&&(e.state.visible=t)},e.setAlphaFactor=function(e,t){e&&(e.state.alphaFactor=t)},e.setPickable=function(e,t){e&&(e.state.pickable=t)},e.setColorOnly=function(e,t){e&&(e.state.colorOnly=t)},e.mark=function(e,t,n,r,o){if(!e||D5(t))return!1;const{tMarker:i,uMarker:a,markerAverage:s,markerStatus:l,uGroupCount:c,instanceCount:u,instanceGranularity:d}=e.values,A=d.ref.value?u.ref.value:c.ref.value*u.ref.value,{array:f}=i.ref.value,p=l.ref.value;if(!_5(t)){let e=0;if(r(t,(t=>(e+=Gg.size(t),!0)),!0),0===e)return!1;e===A&&(t=w5)}let h=!1,g=-1,m=-1;if(_5(t)){const e=function(e,t){let n=-1,r=-1;switch(e){case b5.Highlight:0===t||1===t?(n=1,r=1):2===t||3===t?(n=1,r=3):n=1;break;case b5.RemoveHighlight:0===t||1===t?(n=0,r=0):2!==t&&3!==t||(n=1,r=2);break;case b5.Select:1===t||3===t?(n=1,r=3):0===t||2===t?(n=1,r=2):n=1;break;case b5.Deselect:1===t||3===t?(n=1,r=1):0!==t&&2!==t||(n=0,r=0);break;case b5.Toggle:1===t?(n=1,r=3):2===t?(n=0,r=0):3===t?(n=1,r=1):0===t&&(n=1,r=2);break;case b5.Clear:n=0,r=0}return{average:n,status:r}}(n,p);-1!==e.status?(h=p!==e.status,h&&function(e,t,n){e.fill(t,0,n)}(f,e.status,A)):h=B5(f,Gg.ofLength(A),n),g=e.average,m=e.status}else h=r(t,(e=>B5(f,e,n)),!0),h&&(g=function(e,t){switch(e){case b5.Highlight:return.5;case b5.RemoveHighlight:return 0===t?0:2===t||3===t?.5:-1;case b5.Select:return.5;case b5.Deselect:return 1===t||3===t?.5:0===t?0:-1;case b5.Toggle:return-1===t?-1:.5;case b5.Clear:return-1===t?-1:0===t?0:.5;case b5.None:return-1;default:Zh()}}(n,p),o&&-1!==o.status&&-1===g&&C5.isReverse(o.action,n)&&Q5.areEqual(t,o.loci)&&(m=o.status,g=0===m?0:.5));return h&&(-1===g&&(g=BV(f,A),0===g&&(m=0)),o&&(o.action=n,o.loci=t,o.status=p),Sp.updateIfChanged(a,m),-1===m&&Sp.update(i,i.ref.value),Sp.updateIfChanged(s,g),Sp.updateIfChanged(l,m)),h},e.setOverpaint=function(e,t,n,r,o){if(!e)return;const{tOverpaint:i,dOverpaintType:a,dOverpaint:s,uGroupCount:l,instanceCount:c,instanceGranularity:u}=e.values,d=u.ref.value?c.ref.value:l.ref.value*c.ref.value,A=u.ref.value?"instance":"groupInstance";!function(e,t,n){const r=gV(Math.max(1,e),4,Uint8Array,n&&n.tOverpaint.ref.value.array);n?(Sp.update(n.tOverpaint,r),Sp.update(n.uOverpaintTexDim,Wh.create(r.width,r.height)),Sp.updateIfChanged(n.dOverpaint,e>0),Sp.updateIfChanged(n.dOverpaintType,t)):(Sp.create(r),Sp.create(Wh.create(r.width,r.height)),Sp.create(e>0),Sp.create(uY()),Sp.create(qh.create(1,1,1)),Sp.create(Kh.create(0,0,0,1)),Sp.create(t),Sp.create(1))}(t.layers.length?d:0,A,e.values);const{array:f}=i.ref.value;r&&gY(f,0,d);for(let p=0,h=t.layers.length;p<h;++p){const{loci:e,color:r,clear:o}=t.layers[p],i=e=>{const t=Gg.start(e),n=Gg.end(e);return o?gY(f,t,n):hY(f,t,n,r)};n(e,i,!1)}if(Sp.update(i,i.ref.value),Sp.updateIfChanged(a,A),Sp.updateIfChanged(s,t.layers.length>0),0!==t.layers.length&&"instance"!==A&&o&&Pk(o.props)){const{geometry:t,props:n,webgl:r}=o;if("mesh"===t.kind){const{resolution:o,overpaintTexture:i}=t.meta,a=Ok(n.smoothColors,!0,o);a&&(!function(e,t,n,r,o){if(!function(e){return"groupInstance"===e}(e.dOverpaintType.ref.value))return;const i=X5({vertexCount:e.uVertexCount.ref.value,instanceCount:e.uInstanceCount.ref.value,groupCount:e.uGroupCount.ref.value,transformBuffer:e.aTransform.ref.value,instanceBuffer:e.aInstance.ref.value,positionBuffer:e.aPosition.ref.value,groupBuffer:e.aGroup.ref.value,colorData:e.tOverpaint.ref.value,colorType:e.dOverpaintType.ref.value,boundingSphere:e.boundingSphere.ref.value,invariantBoundingSphere:e.invariantBoundingSphere.ref.value,itemSize:4},t,n,r,o);"volume"===i.kind?(Sp.updateIfChanged(e.dOverpaintType,i.type),Sp.update(e.tOverpaintGrid,i.texture),Sp.update(e.uOverpaintTexDim,i.gridTexDim),Sp.update(e.uOverpaintGridDim,i.gridDim),Sp.update(e.uOverpaintGridTransform,i.gridTransform)):"vertex"===i.kind&&(Sp.updateIfChanged(e.dOverpaintType,i.type),Sp.update(e.tOverpaint,i.texture),Sp.update(e.uOverpaintTexDim,i.texDim))}(e.values,a.resolution,a.stride,r,i),t.meta.overpaintTexture=e.values.tOverpaintGrid.ref.value)}else if(r&&"texture-mesh"===t.kind){const{resolution:o,overpaintTexture:i}=t.meta,a=Ok(n.smoothColors,!0,o);a&&(!function(e,t,n,r,o){if(!function(e){return"groupInstance"===e}(e.dOverpaintType.ref.value))return;n*=3,r.namedTextures[c6]||(r.namedTextures[c6]=r.resources.texture("image-uint8","rgba","ubyte","nearest"));const i=r.namedTextures[c6];i.load(e.tOverpaint.ref.value);const a=s6({vertexCount:e.uVertexCount.ref.value,instanceCount:e.uInstanceCount.ref.value,groupCount:e.uGroupCount.ref.value,transformBuffer:e.aTransform.ref.value,instanceBuffer:e.aInstance.ref.value,positionTexture:e.tPosition.ref.value,groupTexture:e.tGroup.ref.value,colorData:i,colorType:e.dOverpaintType.ref.value,boundingSphere:e.boundingSphere.ref.value,invariantBoundingSphere:e.invariantBoundingSphere.ref.value},t,n,r,o);Sp.updateIfChanged(e.dOverpaintType,a.type),Sp.update(e.tOverpaintGrid,a.texture),Sp.update(e.uOverpaintTexDim,a.gridTexDim),Sp.update(e.uOverpaintGridDim,a.gridDim),Sp.update(e.uOverpaintGridTransform,a.gridTransform)}(e.values,a.resolution,a.stride,r,i),t.meta.overpaintTexture=e.values.tOverpaintGrid.ref.value)}}},e.setTransparency=function(e,t,n,r,o){if(!e)return;const{tTransparency:i,dTransparencyType:a,transparencyAverage:s,dTransparency:l,uGroupCount:c,instanceCount:u,instanceGranularity:d}=e.values,A=d.ref.value?u.ref.value:c.ref.value*u.ref.value,f=d.ref.value?"instance":"groupInstance";!function(e,t,n){const r=gV(Math.max(1,e),1,Uint8Array,n&&n.tTransparency.ref.value.array);n?(Sp.update(n.tTransparency,r),Sp.update(n.uTransparencyTexDim,Wh.create(r.width,r.height)),Sp.updateIfChanged(n.dTransparency,e>0),Sp.updateIfChanged(n.transparencyAverage,bY(r.array,e)),Sp.updateIfChanged(n.dTransparencyType,t)):(Sp.create(r),Sp.create(Wh.create(r.width,r.height)),Sp.create(e>0),Sp.create(0),Sp.create(uY()),Sp.create(qh.create(1,1,1)),Sp.create(Kh.create(0,0,0,1)),Sp.create(t),Sp.create(1))}(t.layers.length?A:0,f,e.values);const{array:p}=i.ref.value;r&&function(e,t,n){e.fill(0,t,n)}(p,0,A);for(let h=0,g=t.layers.length;h<g;++h){const{loci:e,value:r}=t.layers[h],o=e=>{const t=Gg.start(e),n=Gg.end(e);return vY(p,t,n,r)};n(e,o,!1)}if(Sp.update(i,i.ref.value),Sp.updateIfChanged(s,bY(p,A)),Sp.updateIfChanged(a,f),Sp.updateIfChanged(l,t.layers.length>0),0!==t.layers.length&&"instance"!==f&&o&&Pk(o.props)){const{geometry:t,props:n,webgl:r}=o;if("mesh"===t.kind){const{resolution:o,transparencyTexture:i}=t.meta,a=Ok(n.smoothColors,!0,o);a&&(!function(e,t,n,r,o){if(!function(e){return"groupInstance"===e}(e.dTransparencyType.ref.value))return;const i=X5({vertexCount:e.uVertexCount.ref.value,instanceCount:e.uInstanceCount.ref.value,groupCount:e.uGroupCount.ref.value,transformBuffer:e.aTransform.ref.value,instanceBuffer:e.aInstance.ref.value,positionBuffer:e.aPosition.ref.value,groupBuffer:e.aGroup.ref.value,colorData:e.tTransparency.ref.value,colorType:e.dTransparencyType.ref.value,boundingSphere:e.boundingSphere.ref.value,invariantBoundingSphere:e.invariantBoundingSphere.ref.value,itemSize:1},t,n,r,o);"volume"===i.kind?(Sp.updateIfChanged(e.dTransparencyType,i.type),Sp.update(e.tTransparencyGrid,i.texture),Sp.update(e.uTransparencyTexDim,i.gridTexDim),Sp.update(e.uTransparencyGridDim,i.gridDim),Sp.update(e.uTransparencyGridTransform,i.gridTransform)):"vertex"===i.kind&&(Sp.updateIfChanged(e.dTransparencyType,i.type),Sp.update(e.tTransparency,i.texture),Sp.update(e.uTransparencyTexDim,i.texDim))}(e.values,a.resolution,a.stride,r,i),t.meta.transparencyTexture=e.values.tTransparencyGrid.ref.value)}else if(r&&"texture-mesh"===t.kind){const{resolution:o,transparencyTexture:i}=t.meta,a=Ok(n.smoothColors,!0,o);a&&(!function(e,t,n,r,o){if(!function(e){return"groupInstance"===e}(e.dTransparencyType.ref.value))return;n*=3,r.namedTextures[u6]||(r.namedTextures[u6]=r.resources.texture("image-uint8","alpha","ubyte","nearest"));const i=r.namedTextures[u6];i.load(e.tTransparency.ref.value);const a=s6({vertexCount:e.uVertexCount.ref.value,instanceCount:e.uInstanceCount.ref.value,groupCount:e.uGroupCount.ref.value,transformBuffer:e.aTransform.ref.value,instanceBuffer:e.aInstance.ref.value,positionTexture:e.tPosition.ref.value,groupTexture:e.tGroup.ref.value,colorData:i,colorType:e.dTransparencyType.ref.value,boundingSphere:e.boundingSphere.ref.value,invariantBoundingSphere:e.invariantBoundingSphere.ref.value},t,n,r,o);Sp.updateIfChanged(e.dTransparencyType,a.type),Sp.update(e.tTransparencyGrid,a.texture),Sp.update(e.uTransparencyTexDim,a.gridTexDim),Sp.update(e.uTransparencyGridDim,a.gridDim),Sp.update(e.uTransparencyGridTransform,a.gridTransform)}(e.values,a.resolution,a.stride,r,i),t.meta.transparencyTexture=e.values.tTransparencyGrid.ref.value)}}},e.setEmissive=function(e,t,n,r,o){if(!e)return;const{tEmissive:i,dEmissiveType:a,emissiveAverage:s,dEmissive:l,uGroupCount:c,instanceCount:u,instanceGranularity:d}=e.values,A=d.ref.value?u.ref.value:c.ref.value*u.ref.value,f=d.ref.value?"instance":"groupInstance";!function(e,t,n){const r=gV(Math.max(1,e),1,Uint8Array,n&&n.tEmissive.ref.value.array);n?(Sp.update(n.tEmissive,r),Sp.update(n.uEmissiveTexDim,Wh.create(r.width,r.height)),Sp.updateIfChanged(n.dEmissive,e>0),Sp.updateIfChanged(n.emissiveAverage,kY(r.array,e)),Sp.updateIfChanged(n.dEmissiveType,t)):(Sp.create(r),Sp.create(Wh.create(r.width,r.height)),Sp.create(e>0),Sp.create(0),Sp.create(uY()),Sp.create(qh.create(1,1,1)),Sp.create(Kh.create(0,0,0,1)),Sp.create(t),Sp.create(1))}(t.layers.length?A:0,f,e.values);const{array:p}=i.ref.value;r&&function(e,t,n){e.fill(0,t,n)}(p,0,A);for(let h=0,g=t.layers.length;h<g;++h){const{loci:e,value:r}=t.layers[h],o=e=>{const t=Gg.start(e),n=Gg.end(e);return TY(p,t,n,r)};n(e,o,!1)}if(Sp.update(i,i.ref.value),Sp.updateIfChanged(s,kY(p,A)),Sp.updateIfChanged(a,f),Sp.updateIfChanged(l,t.layers.length>0),0!==t.layers.length&&"instance"!==f&&o&&Pk(o.props)){const{geometry:t,props:n,webgl:r}=o;if("mesh"===t.kind){const{resolution:o,emissiveTexture:i}=t.meta,a=Ok(n.smoothColors,!0,o);a&&(!function(e,t,n,r,o){if(!function(e){return"groupInstance"===e}(e.dEmissiveType.ref.value))return;const i=X5({vertexCount:e.uVertexCount.ref.value,instanceCount:e.uInstanceCount.ref.value,groupCount:e.uGroupCount.ref.value,transformBuffer:e.aTransform.ref.value,instanceBuffer:e.aInstance.ref.value,positionBuffer:e.aPosition.ref.value,groupBuffer:e.aGroup.ref.value,colorData:e.tEmissive.ref.value,colorType:e.dEmissiveType.ref.value,boundingSphere:e.boundingSphere.ref.value,invariantBoundingSphere:e.invariantBoundingSphere.ref.value,itemSize:1},t,n,r,o);"volume"===i.kind?(Sp.updateIfChanged(e.dEmissiveType,i.type),Sp.update(e.tEmissiveGrid,i.texture),Sp.update(e.uEmissiveTexDim,i.gridTexDim),Sp.update(e.uEmissiveGridDim,i.gridDim),Sp.update(e.uEmissiveGridTransform,i.gridTransform)):"vertex"===i.kind&&(Sp.updateIfChanged(e.dEmissiveType,i.type),Sp.update(e.tEmissive,i.texture),Sp.update(e.uEmissiveTexDim,i.texDim))}(e.values,a.resolution,a.stride,r,i),t.meta.emissiveTexture=e.values.tEmissiveGrid.ref.value)}else if(r&&"texture-mesh"===t.kind){const{resolution:o,emissiveTexture:i}=t.meta,a=Ok(n.smoothColors,!0,o);a&&(!function(e,t,n,r,o){if(!function(e){return"groupInstance"===e}(e.dEmissiveType.ref.value))return;n*=3,r.namedTextures[u6]||(r.namedTextures[u6]=r.resources.texture("image-uint8","alpha","ubyte","nearest"));const i=r.namedTextures[u6];i.load(e.tEmissive.ref.value);const a=s6({vertexCount:e.uVertexCount.ref.value,instanceCount:e.uInstanceCount.ref.value,groupCount:e.uGroupCount.ref.value,transformBuffer:e.aTransform.ref.value,instanceBuffer:e.aInstance.ref.value,positionTexture:e.tPosition.ref.value,groupTexture:e.tGroup.ref.value,colorData:i,colorType:e.dEmissiveType.ref.value,boundingSphere:e.boundingSphere.ref.value,invariantBoundingSphere:e.invariantBoundingSphere.ref.value},t,n,r,o);Sp.updateIfChanged(e.dEmissiveType,a.type),Sp.update(e.tEmissiveGrid,a.texture),Sp.update(e.uEmissiveTexDim,a.gridTexDim),Sp.update(e.uEmissiveGridDim,a.gridDim),Sp.update(e.uEmissiveGridTransform,a.gridTransform)}(e.values,a.resolution,a.stride,r,i),t.meta.emissiveTexture=e.values.tEmissiveGrid.ref.value)}}},e.setSubstance=function(e,t,n,r,o){if(!e)return;const{tSubstance:i,dSubstanceType:a,dSubstance:s,uGroupCount:l,instanceCount:c,instanceGranularity:u}=e.values,d=u.ref.value?c.ref.value:l.ref.value*c.ref.value,A=u.ref.value?"instance":"groupInstance";!function(e,t,n){const r=gV(Math.max(1,e),4,Uint8Array,n&&n.tSubstance.ref.value.array);n?(Sp.update(n.tSubstance,r),Sp.update(n.uSubstanceTexDim,Wh.create(r.width,r.height)),Sp.updateIfChanged(n.dSubstance,e>0),Sp.updateIfChanged(n.dSubstanceType,t)):(Sp.create(r),Sp.create(Wh.create(r.width,r.height)),Sp.create(e>0),Sp.create(uY()),Sp.create(qh.create(1,1,1)),Sp.create(Kh.create(0,0,0,1)),Sp.create(t),Sp.create(1))}(t.layers.length?d:0,A,e.values);const{array:f}=i.ref.value;r&&_Y(f,0,d);for(let p=0,h=t.layers.length;p<h;++p){const{loci:e,material:r,clear:o}=t.layers[p],i=e=>{const t=Gg.start(e),n=Gg.end(e);return o?_Y(f,t,n):wY(f,t,n,r)};n(e,i,!1)}if(Sp.update(i,i.ref.value),Sp.updateIfChanged(a,A),Sp.updateIfChanged(s,t.layers.length>0),0!==t.layers.length&&"instance"!==A&&o&&Pk(o.props)){const{geometry:t,props:n,webgl:r}=o;if("mesh"===t.kind){const{resolution:o,substanceTexture:i}=t.meta,a=Ok(n.smoothColors,!0,o);a&&(!function(e,t,n,r,o){if(!function(e){return"groupInstance"===e}(e.dSubstanceType.ref.value))return;const i=X5({vertexCount:e.uVertexCount.ref.value,instanceCount:e.uInstanceCount.ref.value,groupCount:e.uGroupCount.ref.value,transformBuffer:e.aTransform.ref.value,instanceBuffer:e.aInstance.ref.value,positionBuffer:e.aPosition.ref.value,groupBuffer:e.aGroup.ref.value,colorData:e.tSubstance.ref.value,colorType:e.dSubstanceType.ref.value,boundingSphere:e.boundingSphere.ref.value,invariantBoundingSphere:e.invariantBoundingSphere.ref.value,itemSize:4},t,n,r,o);"volume"===i.kind?(Sp.updateIfChanged(e.dSubstanceType,i.type),Sp.update(e.tSubstanceGrid,i.texture),Sp.update(e.uSubstanceTexDim,i.gridTexDim),Sp.update(e.uSubstanceGridDim,i.gridDim),Sp.update(e.uSubstanceGridTransform,i.gridTransform)):"vertex"===i.kind&&(Sp.updateIfChanged(e.dSubstanceType,i.type),Sp.update(e.tSubstance,i.texture),Sp.update(e.uSubstanceTexDim,i.texDim))}(e.values,a.resolution,a.stride,r,i),t.meta.substanceTexture=e.values.tSubstanceGrid.ref.value)}else if(r&&"texture-mesh"===t.kind){const{resolution:o,substanceTexture:i}=t.meta,a=Ok(n.smoothColors,!0,o);a&&(!function(e,t,n,r,o){if(!function(e){return"groupInstance"===e}(e.dSubstanceType.ref.value))return;n*=3,r.namedTextures[c6]||(r.namedTextures[c6]=r.resources.texture("image-uint8","rgba","ubyte","nearest"));const i=r.namedTextures[c6];i.load(e.tSubstance.ref.value);const a=s6({vertexCount:e.uVertexCount.ref.value,instanceCount:e.uInstanceCount.ref.value,groupCount:e.uGroupCount.ref.value,transformBuffer:e.aTransform.ref.value,instanceBuffer:e.aInstance.ref.value,positionTexture:e.tPosition.ref.value,groupTexture:e.tGroup.ref.value,colorData:i,colorType:e.dSubstanceType.ref.value,boundingSphere:e.boundingSphere.ref.value,invariantBoundingSphere:e.invariantBoundingSphere.ref.value},t,n,r,o);Sp.updateIfChanged(e.dSubstanceType,a.type),Sp.update(e.tSubstanceGrid,a.texture),Sp.update(e.uSubstanceTexDim,a.gridTexDim),Sp.update(e.uSubstanceGridDim,a.gridDim),Sp.update(e.uSubstanceGridTransform,a.gridTransform)}(e.values,a.resolution,a.stride,r,i),t.meta.substanceTexture=e.values.tSubstanceGrid.ref.value)}}},e.setClipping=function(e,t,n,r){if(!e)return;const{tClipping:o,dClippingType:i,dClipping:a,uGroupCount:s,instanceCount:l,instanceGranularity:c}=e.values,u=c.ref.value?l.ref.value:s.ref.value*l.ref.value,{layers:d}=t,A=c.ref.value?"instance":"groupInstance";!function(e,t,n){const r=gV(Math.max(1,e),1,Uint8Array,n&&n.tClipping.ref.value.array);n?(Sp.update(n.tClipping,r),Sp.update(n.uClippingTexDim,Wh.create(r.width,r.height)),Sp.updateIfChanged(n.dClipping,e>0),Sp.updateIfChanged(n.dClippingType,t)):(Sp.create(r),Sp.create(Wh.create(r.width,r.height)),Sp.create(e>0),Sp.create(t))}(d.length?u:0,A,e.values);const{array:f}=o.ref.value;r&&function(e,t,n){e.fill(0,t,n)}(f,0,u);for(let p=0,h=t.layers.length;p<h;++p){const{loci:e,groups:r}=t.layers[p],o=e=>{const t=Gg.start(e),n=Gg.end(e);return EY(f,t,n,r)};n(e,o,!1)}Sp.update(o,o.ref.value),Sp.updateIfChanged(i,A),Sp.updateIfChanged(a,t.layers.length>0)},e.setThemeStrength=function(e,t){e&&(Sp.updateIfChanged(e.values.uOverpaintStrength,t.overpaint),Sp.updateIfChanged(e.values.uTransparencyStrength,t.transparency),Sp.updateIfChanged(e.values.uEmissiveStrength,t.emissive),Sp.updateIfChanged(e.values.uSubstanceStrength,t.substance))},e.setTransform=function(e,t,n){if(!e||!t&&!n)return;const{values:r}=e;t&&(Yh.copy(r.matrix.ref.value,t),Sp.update(r.matrix,r.matrix.ref.value)),n?(r.extraTransform.ref.value.set(n),Sp.update(r.extraTransform,r.extraTransform.ref.value)):null===n&&(yk(r.extraTransform.ref.value,r.instanceCount.ref.value),Sp.update(r.extraTransform,r.extraTransform.ref.value)),vk(r,r.invariantBoundingSphere.ref.value,r.instanceGrid.ref.value.cellSize,r.instanceGrid.ref.value.batchSize);const o=EV(r.invariantBoundingSphere.ref.value,r.transform.ref.value,r.instanceCount.ref.value,0);Sp.update(r.boundingSphere,o)}}(A6||(A6={})),function(e){let t;function n(e){return 0===e.layers.length}e.Empty={kind:"empty-loci",layers:[]},function(e){let t;function n(e){switch(e){case"one":return t.One;case"two":return t.Two;case"three":return t.Three;case"four":return t.Four;case"five":return t.Five;case"six":return t.Six}}e.is=mp.has,function(e){e[e.None=0]="None",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=4]="Three",e[e.Four=8]="Four",e[e.Five=16]="Five",e[e.Six=32]="Six"}(t=e.Flag||(e.Flag={})),e.create=function(e){return mp.create(e)},e.Names={one:t.One,two:t.Two,three:t.Three,four:t.Four,five:t.Five,six:t.Six},e.isName=function(t){return t in e.Names},e.fromName=n,e.fromNames=function(e){let r=t.None;for(let t=0,o=e.length;t<o;++t)r|=n(e[t]);return r},e.toNames=function(n){const r=[];return e.is(n,t.One)&&r.push("one"),e.is(n,t.Two)&&r.push("two"),e.is(n,t.Three)&&r.push("three"),e.is(n,t.Four)&&r.push("four"),e.is(n,t.Five)&&r.push("five"),e.is(n,t.Six)&&r.push("six"),r}}(t=e.Groups||(e.Groups={})),e.areEqual=function(e,t){if(e.layers.length!==t.layers.length)return!1;for(let n=0,r=e.layers.length;n<r;++n){if(e.layers[n].groups!==t.layers[n].groups)return!1;if(!Q5.areEqual(e.layers[n].loci,t.layers[n].loci))return!1}return!0},e.isEmpty=n,e.remap=function(e,t){if("element-loci"===e.kind){const n=[];for(const r of e.layers){let{loci:e,groups:o}=r;e=cG.remap(e,t),cG.isEmpty(e)||n.push({loci:e,groups:o})}return{kind:"element-loci",layers:n}}return e},e.merge=function(e){if(n(e))return e;if("element-loci"===e.kind){const{structure:t}=e.layers[0].loci,n=new Map;let r=cG.none(t);for(let i=0,a=e.layers.length;i<a;++i){let{loci:t,groups:o}=e.layers[a-i-1];t=cG.subtract(t,r),r=cG.union(t,r),cG.isEmpty(t)||(n.has(o)&&(t=cG.union(t,n.get(o))),n.set(o,t))}const o=[];return n.forEach(((e,t)=>{o.push({loci:e,groups:t})})),{kind:"element-loci",layers:o}}return e},e.filter=function(e,t){if(n(e))return e;if("element-loci"===e.kind){const{structure:n}=e.layers[0].loci,r=[];for(const o of e.layers){let{loci:e,groups:i}=o;const a=cG.remap(e,t);e=cG.remap(a,n),cG.isEmpty(e)||r.push({loci:e,groups:i})}return{kind:"element-loci",layers:r}}return e},e.ofScript=function(e,t){const n=[];for(let r=0,o=e.length;r<o;++r){const{script:o,groups:i}=e[r],a=t0.toLoci(o,t);cG.isEmpty(a)||n.push({loci:a,groups:i})}return{kind:"element-loci",layers:n}},e.ofBundle=function(e,t){const n=[];for(let r=0,o=e.length;r<o;++r){const{bundle:o,groups:i}=e[r],a=SO.toLoci(o,t.root);n.push({loci:a,groups:i})}return{kind:"element-loci",layers:n}},e.toBundle=function(e){const t=[];for(let n=0,r=e.layers.length;n<r;++n){const{loci:r,groups:o}=e.layers[n],i=SO.fromLoci(r);t.push({bundle:i,groups:o})}return{kind:"element-loci",layers:t}}}(p6||(p6={})),function(e){function t(e){return 0===e.layers.length}e.Empty={kind:"empty-loci",layers:[]},e.areEqual=function(e,t){if(0===e.layers.length&&0===t.layers.length)return!0;if(e.layers.length!==t.layers.length)return!1;for(let n=0,r=e.layers.length;n<r;++n){if(e.layers[n].clear!==t.layers[n].clear)return!1;if(!ZB(e.layers[n].material,t.layers[n].material))return!1;if(!Q5.areEqual(e.layers[n].loci,t.layers[n].loci))return!1}return!0},e.isEmpty=t,e.remap=function(e,t){if("element-loci"===e.kind){const n=[];for(const r of e.layers){let{loci:e,material:o,clear:i}=r;e=cG.remap(e,t),cG.isEmpty(e)||n.push({loci:e,material:o,clear:i})}return{kind:"element-loci",layers:n}}return e},e.merge=function(e){if(t(e))return e;if("element-loci"===e.kind){const{structure:t}=e.layers[0].loci;let n;const r=new Map;let o=cG.none(t);for(let a=0,s=e.layers.length;a<s;++a){let{loci:t,material:i,clear:l}=e.layers[s-a-1];t=cG.subtract(t,o),o=cG.union(t,o),cG.isEmpty(t)||(l?n=n?cG.union(t,n):t:(r.has(i)&&(t=cG.union(t,r.get(i))),r.set(i,t)))}const i=[];return n&&i.push({loci:n,material:Tk(),clear:!0}),r.forEach(((e,t)=>{i.push({loci:e,material:t,clear:!1})})),{kind:"element-loci",layers:i}}return e},e.filter=function(e,n){if(t(e))return e;if("element-loci"===e.kind){const{structure:t}=e.layers[0].loci,r=[];for(const o of e.layers){let{loci:e,material:i,clear:a}=o;const s=cG.remap(e,n);e=cG.remap(s,t),cG.isEmpty(e)||r.push({loci:e,material:i,clear:a})}return{kind:"element-loci",layers:r}}return e},e.ofScript=function(e,t){const n=[];for(let r=0,o=e.length;r<o;++r){const{script:o,material:i,clear:a}=e[r],s=t0.toLoci(o,t);cG.isEmpty(s)||n.push({loci:s,material:i,clear:a})}return{kind:"element-loci",layers:n}},e.ofBundle=function(e,t){const n=[];for(let r=0,o=e.length;r<o;++r){const{bundle:o,material:i,clear:a}=e[r],s=SO.toLoci(o,t.root);n.push({loci:s,material:i,clear:a})}return{kind:"element-loci",layers:n}},e.toBundle=function(e){const t=[];for(let n=0,r=e.layers.length;n<r;++n){const{loci:r,material:o,clear:i}=e.layers[n],a=SO.fromLoci(r);t.push({bundle:a,material:o,clear:i})}return{kind:"element-loci",layers:t}}}(h6||(h6={})),function(e){function t(e){return 0===e.layers.length}e.Empty={kind:"empty-loci",layers:[]},e.areEqual=function(e,t){if(0===e.layers.length&&0===t.layers.length)return!0;if(e.layers.length!==t.layers.length)return!1;for(let n=0,r=e.layers.length;n<r;++n){if(e.layers[n].value!==t.layers[n].value)return!1;if(!Q5.areEqual(e.layers[n].loci,t.layers[n].loci))return!1}return!0},e.isEmpty=t,e.remap=function(e,t){if("element-loci"===e.kind){const n=[];for(const r of e.layers){let{loci:e,value:o}=r;e=cG.remap(e,t),cG.isEmpty(e)||n.push({loci:e,value:o})}return{kind:"element-loci",layers:n}}return e},e.merge=function(e){if(t(e))return e;if("element-loci"===e.kind){const{structure:t}=e.layers[0].loci,n=new Map;let r=cG.none(t);for(let i=0,a=e.layers.length;i<a;++i){let{loci:t,value:o}=e.layers[a-i-1];t=cG.subtract(t,r),r=cG.union(t,r),cG.isEmpty(t)||(n.has(o)&&(t=cG.union(t,n.get(o))),n.set(o,t))}const o=[];return n.forEach(((e,t)=>{o.push({loci:e,value:t})})),{kind:"element-loci",layers:o}}return e},e.filter=function(e,n){if(t(e))return e;if("element-loci"===e.kind){const{structure:t}=e.layers[0].loci,r=[];for(const o of e.layers){let{loci:e,value:i}=o;const a=cG.remap(e,n);e=cG.remap(a,t),cG.isEmpty(e)||r.push({loci:e,value:i})}return{kind:"element-loci",layers:r}}return e},e.ofScript=function(e,t){const n=[];for(let r=0,o=e.length;r<o;++r){const{script:o,value:i}=e[r],a=t0.toLoci(o,t);cG.isEmpty(a)||n.push({loci:a,value:i})}return{kind:"element-loci",layers:n}},e.ofBundle=function(e,t){const n=[];for(let r=0,o=e.length;r<o;++r){const{bundle:o,value:i}=e[r],a=SO.toLoci(o,t.root);n.push({loci:a,value:i})}return{kind:"element-loci",layers:n}},e.toBundle=function(e){const t=[];for(let n=0,r=e.layers.length;n<r;++n){const{loci:r,value:o}=e.layers[n],i=SO.fromLoci(r);t.push({bundle:i,value:o})}return{kind:"element-loci",layers:t}}}(g6||(g6={})),function(e){e.getDetaultParams=function(e,t,n){return U_.getDefaultValues(e.getParams(t,n))}}(f6||(f6={}));const m6={name:"",label:"",description:"",factory:()=>b6.Empty,getParams:()=>({}),defaultValues:{},defaultColorTheme:d5.EmptyProvider,defaultSizeTheme:y5.EmptyProvider,isApplicable:()=>!0};function y6(e){return e.map((e=>[e.name,e.provider.label]))}class v6{get default(){return this._list[0]}get types(){return y6(this._list)}constructor(){this._list=[],this._map=new Map,this._name=new Map}add(e){if(this._map.has(e.name))throw new Error(`${e.name} already registered.`);this._list.push({name:e.name,provider:e}),this._map.set(e.name,e),this._name.set(e,e.name)}getName(e){if(!this._name.has(e))throw new Error(`'${e.label}' is not a registered represenatation provider.`);return this._name.get(e)}remove(e){const t=e.name;this._list.splice(this._list.findIndex((e=>e.name===t)),1);const n=this._map.get(t);n&&(this._map.delete(t),this._name.delete(n))}get(e){return this._map.get(e)||m6}get list(){return this._list}getApplicableList(e){return this._list.filter((t=>t.provider.isApplicable(e)))}getApplicableTypes(e){return y6(this.getApplicableList(e))}clear(){this._list.length=0,this._map.clear(),this._name.clear()}}var b6;function C6(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=0;const o=new JS,i=b6.createState(),a=lJ(),s=[];let l,c,u=-1;const d=v5.createEmpty();let A,f,p=U_.getDefaultValues(t.Params);n.modifyState&&b6.updateState(i,n.modifyState(i));const h=M5.create();function g(e,t){return _5(e)||dJ.isLoci(e)&&e.shape===c?p.instanceGranularity?t(Gg.ofBounds(0,c.transforms.length)):t(Gg.ofBounds(0,c.groupCount*c.transforms.length)):p.instanceGranularity?function(e,t,n){let r=!1;if(!AJ.isLoci(e))return!1;if(AJ.isLociEmpty(e))return!1;if(e.shape!==t)return!1;for(const o of e.groups)n(Gg.ofSingleton(o.instance))&&(r=!0);return r}(e,c,t):function(e,t,n){if(!AJ.isLoci(e))return!1;if(e.shape!==t)return!1;let r=!1;const{groupCount:o}=t,{groups:i}=e;for(const{ids:a,instance:s}of i)if(Gg.is(a)){const e=s*o+Gg.start(a),t=s*o+Gg.end(a);n(Gg.ofBounds(e,t))&&(r=!0)}else for(let e=0,t=a.length;e<t;e++){const t=s*o+a[e];n(Gg.ofSingleton(t))&&(r=!0)}return r}(e,c,t)}return{label:"Shape geometry",get groupCount(){return A?A.count:0},get props(){return p},get params(){},get state(){return i},get theme(){return d},renderObjects:s,get geometryVersion(){return u},updated:o,createOrUpdate:function(){let g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=arguments.length>1?arguments[1]:void 0;return n.modifyProps&&(g=n.modifyProps(g)),Tw.create("ShapeRepresentation.create",(async y=>{const v=Object.assign(p,g),b=m?await e(y,m,v,c):void 0;if(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;M5.reset(h),(t||c)&&(t&&!c?h.createNew=!0:t&&c&&t.id===c.id||(t&&c&&t.id!==c.id?(h.updateTransform=!0,h.createGeometry=!0):t&&console.warn("unexpected state")),e.instanceGranularity!==p.instanceGranularity&&(h.updateTransform=!0),h.updateTransform&&(h.updateColor=!0,h.updateSize=!0,h.updateMatrix=!0),h.createGeometry&&(h.updateColor=!0,h.updateSize=!0))}(g,b),b&&(c=b,Object.assign(d,dJ.getTheme(c))),h.createNew){s.length=0,A=dJ.groupIterator(c);const e=dJ.createTransform(c.transforms,c.geometry.boundingSphere,v.cellSize,v.batchSize),r=t.createValues(c.geometry,e,A,d,v),o=t.createRenderableState(v);n.modifyState&&Object.assign(o,n.modifyState(o)),b6.updateState(i,o),l=cJ(c.geometry.kind,r,o,a),l&&s.push(l),f=t.createPositionIterator(c.geometry,l.values)}else{if(!l)throw new Error("expected renderObject to be available");if(h.updateTransform){A=dJ.groupIterator(c);const{instanceCount:e,groupCount:t}=A;g.instanceGranularity?wV(e,"instance",l.values):wV(e*t,"groupInstance",l.values)}h.updateMatrix&&(dJ.createTransform(c.transforms,c.geometry.boundingSphere,v.cellSize,v.batchSize,l.values),"lodLevels"in l.values&&Sp.update(l.values.lodLevels,l.values.lodLevels.ref.value)),h.createGeometry&&(Sp.updateIfChanged(l.values.drawCount,HK.getDrawCount(c.geometry)),Sp.updateIfChanged(l.values.uVertexCount,HK.getVertexCount(c.geometry)),Sp.updateIfChanged(l.values.uGroupCount,HK.getGroupCount(c.geometry))),(h.updateTransform||h.createGeometry)&&(t.updateBoundingSphere(l.values,c.geometry),f=t.createPositionIterator(c.geometry,l.values)),h.updateColor&&dY(A,f,d.color,l.values),h.updateSize&&"uSize"in l.values&&iW(A,d.size,l.values),t.updateValues(l.values,v),t.updateRenderableState(l.state,v)}p=v,(h.createGeometry||h.createNew)&&(u+=1),o.next(r++)}))},getLoci(e){const{objectId:t,groupId:n,instanceId:r}=e;return l&&l.id===t?AJ.Loci(c,[{ids:ey.ofSingleton(n),instance:r}]):S5},getAllLoci:()=>[dJ.Loci(c)],eachLocation:e=>{for(A.reset();A.hasNext;){const{location:t,isSecondary:n}=A.move();e(t,n)}},mark(e,t){if(!C5.is(i.markerActions,t))return!1;if(AJ.isLoci(e)||dJ.isLoci(e)){if(e.shape!==c)return!1}else if(!_5(e))return!1;return A6.mark(l,e,t,g)},setState(e){n.modifyState&&(e=n.modifyState(e)),l&&(void 0!==e.visible&&A6.setVisibility(l,e.visible),void 0!==e.alphaFactor&&A6.setAlphaFactor(l,e.alphaFactor),void 0!==e.pickable&&A6.setPickable(l,e.pickable),void 0!==e.colorOnly&&A6.setColorOnly(l,e.colorOnly),void 0!==e.overpaint&&A6.setOverpaint(l,e.overpaint,g,!0),void 0!==e.transparency&&A6.setTransparency(l,e.transparency,g,!0),void 0!==e.substance&&A6.setSubstance(l,e.substance,g,!0),void 0!==e.transform&&A6.setTransform(l,e.transform)),b6.updateState(i,e)},setTheme(e){Aw&&console.warn("The `ShapeRepresentation` theme is fixed to `ShapeGroupColorTheme` and `ShapeGroupSizeTheme`. Colors are taken from `Shape.getColor` and sizes from `Shape.getSize`")},destroy(){s.length=0,l&&(l.state.disposed=!0,l=void 0)}}}!function(e){let t;function n(){return{visible:!0,alphaFactor:1,pickable:!0,colorOnly:!1,syncManually:!1,transform:Yh.identity(),overpaint:R5.Empty,transparency:P5.Empty,emissive:g6.Empty,substance:h6.Empty,clipping:p6.Empty,themeStrength:{overpaint:1,transparency:1,emissive:1,substance:1},markerActions:C5.All}}function r(e,t){void 0!==t.visible&&(e.visible=t.visible),void 0!==t.alphaFactor&&(e.alphaFactor=t.alphaFactor),void 0!==t.pickable&&(e.pickable=t.pickable),void 0!==t.colorOnly&&(e.colorOnly=t.colorOnly),void 0!==t.overpaint&&(e.overpaint=t.overpaint),void 0!==t.transparency&&(e.transparency=t.transparency),void 0!==t.emissive&&(e.emissive=t.emissive),void 0!==t.substance&&(e.substance=t.substance),void 0!==t.clipping&&(e.clipping=t.clipping),void 0!==t.themeStrength&&(e.themeStrength=t.themeStrength),void 0!==t.syncManually&&(e.syncManually=t.syncManually),void 0!==t.transform&&Yh.copy(e.transform,t.transform),void 0!==t.markerActions&&(e.markerActions=t.markerActions)}!function(e){e.areEqual=function(e,t){return e.repr===t.repr&&Q5.areEqual(e.loci,t.loci)},e.isEmpty=function(e){return Q5.isEmpty(e.loci)},e.Empty={loci:S5}}(t=e.Loci||(e.Loci={})),e.createState=n,e.updateState=r,e.StateBuilder={create:n,update:r},e.Empty={label:"",groupCount:0,renderObjects:[],geometryVersion:-1,props:{},params:{},updated:new JS,state:n(),theme:v5.createEmpty(),createOrUpdate:()=>Tw.constant("",void 0),setState:()=>{},setTheme:()=>{},getLoci:()=>S5,getAllLoci:()=>[],eachLocation:()=>{},mark:()=>!1,destroy:()=>{}};class o{constructor(){this.curr=new Set,this.next=new Set,this._version=-1}get version(){return this._version}add(e,t){this.next.add(Rh(e,t))}snapshot(){$Q.areEqual(this.curr,this.next)||(this._version+=1),[this.curr,this.next]=[this.next,this.curr],this.next.clear()}}e.GeometryState=o,e.createMulti=function(e,t,n,r,i){let a=0;const s=new JS,l=new o,c=r.create();let u,d,A,f=v5.createEmpty();const p={},h=Object.keys(i).map(((e,r)=>{p[r]=e;const o=i[e](t,n);return o.setState(c),o}));return{label:e,updated:s,get groupCount(){let e=0;if(d){const{visuals:t}=d;for(let n=0,r=h.length;n<r;++n)t&&!t.includes(p[n])||(e+=h[n].groupCount)}return e},get renderObjects(){const e=[];if(d){const{visuals:t}=d;for(let n=0,r=h.length;n<r;++n)t&&!t.includes(p[n])||e.push(...h[n].renderObjects)}return e},get geometryVersion(){return l.version},get props(){return d},get params(){return u},createOrUpdate:function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;o&&o!==A&&(u=n(t,o),A=o,d||(d=U_.getDefaultValues(u)));const i=N5(Object.assign({},d,r),A);Object.assign(d,r,i);const{visuals:c}=d;return Tw.create(`Creating or updating '${e}' representation`,(async e=>{for(let t=0,n=h.length;t<n;++t)c&&!c.includes(p[t])||await h[t].createOrUpdate(d,A).runInContext(e),l.add(t,h[t].geometryVersion);l.snapshot(),s.next(a++)}))},get state(){return c},get theme(){return f},getLoci:e=>{const{visuals:t}=d;for(let n=0,r=h.length;n<r;++n)if(!t||t.includes(p[n])){const t=h[n].getLoci(e);if(!D5(t))return t}return S5},getAllLoci:()=>{const e=[],{visuals:t}=d;for(let n=0,r=h.length;n<r;++n)t&&!t.includes(p[n])||e.push(...h[n].getAllLoci());return e},eachLocation:e=>{const{visuals:t}=d;for(let n=0,r=h.length;n<r;++n)t&&!t.includes(p[n])||h[n].eachLocation(e)},mark:(e,t)=>{let n=!1;for(let r=0,o=h.length;r<o;++r)n=h[r].mark(e,t)||n;return n},setState:e=>{r.update(c,e);for(let t=0,n=h.length;t<n;++t)h[t].setState(e)},setTheme:e=>{f=e;for(let t=0,n=h.length;t<n;++t)h[t].setTheme(e)},destroy(){for(let e=0,t=h.length;e<t;++e)h[e].destroy()}}},e.fromRenderObject=function(t,n){let r=0;const i=new JS,a=new o,s=e.createState(),l=v5.createEmpty(),c=U_.clone(Fk.Params),u=U_.getDefaultValues(Fk.Params);return{label:t,updated:i,get groupCount(){return n.values.uGroupCount.ref.value},get renderObjects(){return[n]},get geometryVersion(){return a.version},get props(){return u},get params(){return c},createOrUpdate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=N5(Object.assign({},u,e));return Object.assign(u,e,o),Tw.create(`Updating '${t}' representation`,(async e=>{a.add(0,n.id),a.snapshot(),i.next(r++)}))},get state(){return s},get theme(){return l},getLoci:()=>S5,getAllLoci:()=>[],eachLocation:()=>{},mark:(e,t)=>!1,setState:t=>{void 0!==t.visible&&A6.setVisibility(n,t.visible),void 0!==t.alphaFactor&&A6.setAlphaFactor(n,t.alphaFactor),void 0!==t.pickable&&A6.setPickable(n,t.pickable),void 0!==t.colorOnly&&A6.setColorOnly(n,t.colorOnly),t.overpaint,t.transparency,t.emissive,t.substance,t.clipping,void 0!==t.themeStrength&&A6.setThemeStrength(n,t.themeStrength),void 0!==t.transform&&A6.setTransform(n,t.transform),e.updateState(s,t)},setTheme:()=>{},destroy(){}}}}(b6||(b6={}));const I6=Yh();class E6{constructor(e){this.structure=e,this.groupUnitTransforms=[],this.unitOffsetMap=ny.Mutable(),this.groupIndexMap=ny.Mutable(),this._isIdentity=void 0,this.version=0,this.unitTransforms=new Float32Array(16*e.units.length),this.size=e.units.length,this.reset();let t=0;for(let n=0,r=e.unitSymmetryGroups.length;n<r;++n){const r=e.unitSymmetryGroups[n];this.groupIndexMap.set(r.hashCode,n);const o=this.unitTransforms.subarray(t,t+16*r.units.length);this.groupUnitTransforms.push(o);for(let e=0,n=r.units.length;e<n;++e)this.unitOffsetMap.set(r.units[e].id,t+16*e);t+=16*r.units.length}}reset(){this.version=0,yk(this.unitTransforms,this.size),this._isIdentity=!0}get isIdentity(){if(void 0===this._isIdentity){this._isIdentity=!0;for(let e=0,t=16*this.size;e<t;e+=16)if(Yh.fromArray(I6,this.unitTransforms,e),!Yh.isIdentity(I6)){this._isIdentity=!1;break}}return this._isIdentity}setTransform(e,t){this.version=(this.version+1)%2147483647,Yh.toArray(e,this.unitTransforms,this.unitOffsetMap.get(t.id)),this._isIdentity=void 0}getTransform(e,t){return Yh.fromArray(e,this.unitTransforms,this.unitOffsetMap.get(t.id))}getSymmetryGroupTransforms(e){return this.groupUnitTransforms[this.groupIndexMap.get(e.hashCode)]}}const x6=Yh();function B6(e,t,n){for(let r=0,o=e.units.length;r<o;r++){const o=e.units[r];_T.lerpFromIdentity(x6,o.conformation.operator,n),t.setTransform(x6,o)}}const w6=qh(),_6=qh(),S6=Yh();function D6(e,t,n,r){const o=r.radius*n;for(let i=0,a=e.units.length;i<a;i++){const n=e.units[i];qh.transformMat4(w6,n.lookup3d.boundary.sphere.center,n.conformation.operator.matrix),qh.sub(_6,w6,r.center),qh.setMagnitude(_6,_6,o),Yh.fromTranslation(S6,_6),t.setTransform(S6,n)}}const T6={axis:U_.MappedStatic("custom",{structure:U_.Group({principalAxis:U_.Select("dirA",[["dirA","A"],["dirB","B"],["dirC","C"]])}),custom:U_.Group({vector:U_.Vec3(qh.create(0,0,1))})}),origin:U_.MappedStatic("structure",{structure:U_.Group({}),custom:U_.Group({vector:U_.Vec3(qh.create(0,0,0))})})};function k6(e,t){let n,r;if("custom"===t.axis.name)n=t.axis.params.vector;else{n=aG.getPrincipalAxes(e).momentsAxes[t.axis.params.principalAxis]}if("custom"===t.origin.name)r=t.origin.params.vector;else{r=aG.getPrincipalAxes(e).momentsAxes.origin}return{axis:n,origin:r}}const Q6=Yh(),M6=Yh(),R6=Yh();function P6(e,t,n,r,o){for(let i=0,a=e.units.length;i<a;i++){const a=e.units[i];qh.negate(_6,o),Yh.fromTranslation(S6,_6),Yh.fromRotation(Q6,Math.PI*n*2,r),Yh.fromTranslation(M6,o),Yh.mul(R6,Q6,S6),Yh.mul(R6,M6,R6),t.setTransform(R6,a)}}const O6=Yh.fromTranslation(Yh(),qh.create(.5,.5,.5)),F6=WY(YY(FW()),O6),N6=qh(),L6=Yh(),U6={...RY.Params,cellColor:U_.Color(bk.orange),cellScale:U_.Numeric(2,{min:.1,max:5,step:.1}),ref:U_.Select("model",U_.objectToOptions({origin:"Origin",model:"Model"}),{isEssential:!0}),attachment:U_.Select("corner",U_.objectToOptions({corner:"Corner",center:"Center"}),{isEssential:!0})},G6={mesh:(e,t)=>C6(z6,RY.Utils)},j6={...U6};function z6(e,t,n,r){const o=function(e,t,n){const r=ZX.createState(256,128,n),{fromFractional:o}=e.symmetry.spacegroup.cell;qh.copy(N6,e.ref),"center"===t.attachment?(qh.trunc(N6,N6),qh.subScalar(N6,N6,.5)):qh.floor(N6,N6),Yh.fromTranslation(L6,N6);const i=WY(YY(F6),L6),a=Math.cbrt(e.symmetry.spacegroup.cell.volume)/300*t.cellScale;r.currentGroup=1,ZX.addCage(r,o,i,a,2,20);const s=YT.fromDimensionsAndTransform(YT(),qh.unit,o);qh.transformMat4(N6,N6,o),YT.translate(s,s,N6),YT.expand(s,s,a);const l=ZX.getMesh(r);return l.setBoundingSphere(s),l}(t,n,r&&r.geometry),i=EO.getUnitcellLabel(t.symmetry);return dJ.create(i,t,o,(()=>n.cellColor),(()=>1),(()=>i))}function H6(e,t,n){const r=qh();return"model"===n.ref&&qh.transformMat4(r,Wj.getCenter(e),t.spacegroup.cell.toFractional),{symmetry:t,ref:r}}const V6=new Uint16Array([0,1,2,1,3,2]),q6=gh.add3,Y6=gh.add2,X6=gh.add;var W6;!function(e){e.create=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,r=arguments.length>3?arguments[3]:void 0;t*=2,n*=2;const o=gh.create(Float32Array,3,n,r?r.centerBuffer.ref.value:t),i=gh.create(Float32Array,2,n,r?r.mappingBuffer.ref.value:t),a=gh.create(Float32Array,1,n,r?r.depthBuffer.ref.value:t),s=gh.create(Uint32Array,3,n,r?r.indexBuffer.ref.value:t),l=gh.create(Float32Array,1,n,r?r.groupBuffer.ref.value:t),c=gh.create(Float32Array,2,n,r?r.tcoordBuffer.ref.value:t),u={...U_.getDefaultValues(yW.Params),...e},{attachment:d,background:A,backgroundMargin:f,tether:p,tetherLength:h,tetherBaseWidth:g}=u,m=function(e){const t=JSON.stringify(e);return void 0===pW[t]&&(pW[t]=new gW(e)),pW[t]}(u),y=.4*f,v=m.buffer/m.lineHeight,b=(e,t,n,r,i)=>{q6(o,e,t,n),X6(a,r),X6(l,i)};return{add:(e,t,n,r,a,l,u)=>{let f=0;const C=e.length;for(let o=0;o<C;++o){f+=m.get(e[o]).nw-2*v}let I,E;if(I=d.startsWith("top")?.8:d.startsWith("middle")?.4:0,E=d.endsWith("right")?f:d.endsWith("center")?f/2:0,p)switch(d){case"bottom-left":E-=h/2+y+.1,I-=h/2+y;break;case"bottom-center":I-=h+y;break;case"bottom-right":E+=h/2+y+.1,I-=h/2+y;break;case"middle-left":E-=h+y+.1;break;case"middle-center":break;case"middle-right":E+=h+y+.1;break;case"top-left":E-=h/2+y+.1,I+=h/2+y;break;case"top-center":I+=h+y;break;case"top-right":E+=h/2+y+.1,I+=h/2+y}const x=(-E-y-.1)*l,B=(f-E+y+.1)*l,w=(.8-I+y)*l,_=(-I-y)*l;if(A){Y6(i,x,w),Y6(i,x,_),Y6(i,B,w),Y6(i,B,_);const e=o.elementCount;for(let o=0;o<4;++o)Y6(c,10,10),b(t,n,r,a,u);q6(s,e+V6[0],e+V6[1],e+V6[2]),q6(s,e+V6[3],e+V6[4],e+V6[5])}if(p){let e,A,f,p,m,y,v,C;const I=h*l,E=g*l;switch(d){case"bottom-left":e=x-I/2,f=x+E/2,m=x,v=x,A=_-I/2,p=_,y=_+E/2,C=_;break;case"bottom-center":e=0,f=E/2,m=-E/2,v=0,A=_-I,p=_,y=_,C=_;break;case"bottom-right":e=B+I/2,f=B,m=B-E/2,v=B,A=_-I/2,p=_+E/2,y=_,C=_;break;case"middle-left":e=x-I,f=x,m=x,v=x,A=0,p=-E/2,y=E/2,C=0;break;case"middle-center":e=0,f=0,m=0,v=0,A=0,p=0,y=0,C=0;break;case"middle-right":e=B+I,f=B,m=B,v=B,A=0,p=E/2,y=-E/2,C=0;break;case"top-left":e=x-I/2,f=x+E/2,m=x,v=x,A=w+I/2,p=w,y=w-E/2,C=w;break;case"top-center":e=0,f=E/2,m=-E/2,v=0,A=w+I,p=w,y=w,C=w;break;case"top-right":e=B+I/2,f=B,m=B-E/2,v=B,A=w+I/2,p=w-E/2,y=w,C=w;break;default:Zh()}Y6(i,e,A),Y6(i,f,p),Y6(i,m,y),Y6(i,v,C);const S=o.elementCount;for(let o=0;o<4;++o)Y6(c,10,10),b(t,n,r,a,u);q6(s,S,S+1,S+3),q6(s,S,S+3,S+2)}E+=v,I+=v;let S=0;for(let d=0;d<C;++d){const A=m.get(e[d]),f=(S-E)*l,p=(S+A.nw-E)*l,h=(A.nh-I)*l,g=-I*l;Y6(i,f,h),Y6(i,f,g),Y6(i,p,h),Y6(i,p,g);const y=m.texture.width,C=m.texture.height;Y6(c,A.x/y,A.y/C),Y6(c,A.x/y,(A.y+A.h)/C),Y6(c,(A.x+A.w)/y,A.y/C),Y6(c,(A.x+A.w)/y,(A.y+A.h)/C),S+=A.nw-2*v;const x=o.elementCount;for(let e=0;e<4;++e)b(t,n,r,a,u);q6(s,x+V6[0],x+V6[1],x+V6[2]),q6(s,x+V6[3],x+V6[4],x+V6[5])}},getText:()=>{const e=m.texture,t=gh.compact(o,!0),n=gh.compact(i,!0),u=gh.compact(a,!0),d=gh.compact(s,!0),A=gh.compact(l,!0),f=gh.compact(c,!0);return yW.create(e,t,n,u,d,A,f,s.elementCount/2,r)}}}}(W6||(W6={}));const K6={granularity:"element",condensed:!1,reverse:!1,countsOnly:!1,hidePrefix:!1,htmlStyling:!0};function J6(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;switch(e.kind){case"structure-loci":return e.structure.models.map((e=>e.entry)).filter((e=>!!e)).join(", ");case"element-loci":return e8(uG.ofLoci(e),t);case"bond-loci":const r=e.bonds[0];return r?n8(r,t):"";case"shape-loci":return e.shape.name;case"group-loci":const o=e.groups[0];return o?e.shape.getLabel(ey.start(o.ids),o.instance):"";case"every-loci":return"Everything";case"empty-loci":return"Nothing";case"data-loci":return e.getLabel();case"volume-loci":return e.volume.label||"Volume";case"isosurface-loci":return[`${e.volume.label||"Volume"}`,`Isosurface at ${HW.IsoValue.toString(e.isoValue)}`].join(" | ");case"cell-loci":const i=ey.size(e.indices),a=ey.start(e.indices),s=HW.IsoValue.absolute(e.volume.grid.cells.data[a]),l=HW.IsoValue.toRelative(s,e.volume.grid.stats),c=[`${e.volume.label||"Volume"}`,""+(1===i?`Cell #${a}`:`${i} Cells`)];return 1===i&&c.push(`${HW.IsoValue.toString(s)} (${HW.IsoValue.toString(l)})`),c.join(" | ");case"segment-loci":const u=null===(n=HW.Segmentation.get(e.volume))||void 0===n?void 0:n.labels;if(u&&1===e.segments.length){const t=u[e.segments[0]];if(t)return t}return[`${e.volume.label||"Volume"}`,""+(1===e.segments.length?`Segment ${e.segments[0]}`:`${e.segments.length} Segments`)].join(" | ")}}function Z6(e,t){return 1===e?`1 ${t}`:`${e} ${t}s`}function $6(e,t,n,r,o,i){return`${o8(t,{granularity:n,hidePrefix:r,reverse:o,condensed:i})} <small>[+ ${Z6(e-1,`other ${rh(n)}`)}]</small>`}function e8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={...K6,...t},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{structureCount:i,chainCount:a,residueCount:s,conformationCount:l,elementCount:c}=e;if(t||1!==c||0!==s||0!==a){if(t||0!==c||1!==s||0!==a){if(t||0!==c||0!==s||1!==a){if(t){const e=[];return i>0&&e.push(Z6(i,"Structure")),a>0&&e.push(Z6(a,"Chain")),s>0&&e.push(Z6(s,"Residue")),l>0&&e.push(Z6(l,"Conformation")),c>0&&e.push(Z6(c,"Element")),e.join("<small> + </small>")}{const t=[];return i>0&&t.push(1===i?o8(e.firstStructureLoc,{hidePrefix:n,condensed:r,granularity:"structure",reverse:o}):$6(i,e.firstStructureLoc,"structure",n,o,r)),a>0&&(t.push(1===a?o8(e.firstChainLoc,{condensed:r,granularity:"chain",hidePrefix:n,reverse:o}):$6(a,e.firstChainLoc,"chain",n,o,r)),n=!0),s>0&&(t.push(1===s?o8(e.firstResidueLoc,{condensed:r,granularity:"residue",hidePrefix:n,reverse:o}):$6(s,e.firstResidueLoc,"residue",n,o,r)),n=!0),l>0&&(t.push(1===l?o8(e.firstConformationLoc,{condensed:r,granularity:"conformation",hidePrefix:n,reverse:o}):$6(l,e.firstConformationLoc,"conformation",n,o,r)),n=!0),c>0&&t.push(1===c?o8(e.firstElementLoc,{condensed:r,granularity:"element",hidePrefix:n,reverse:o}):$6(c,e.firstElementLoc,"element",n,o,r)),t.join("<small> + </small>")}}{const{unit:t}=e.firstChainLoc,i=BO.isAtomic(t)&&1===function(e){const{elements:t,model:n}=e,{chainAtomSegments:r,residueAtomSegments:o}=n.atomicHierarchy,i=r.offsets[r.index[t[0]]],a=r.offsets[r.index[t[t.length-1]]+1]-1;return o.index[a]-o.index[i]+1}(t)||BO.Traits.is(t.traits,BO.Trait.MultiChain)?"residue":"chain";return o8(e.firstChainLoc,{hidePrefix:n,condensed:r,granularity:i,reverse:o})}}return o8(e.firstResidueLoc,{hidePrefix:n,condensed:r,granularity:"residue",reverse:o})}return o8(e.firstElementLoc,{hidePrefix:n,condensed:r,granularity:"element",reverse:o})}(e,n.countsOnly,n.hidePrefix,n.condensed,n.reverse);return n.htmlStyling?r:lh(r)}function t8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=uG.create();for(const r of e)uG.add(n,n,uG.ofLoci(r));return e8(n,t)}function n8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r8({loci:[cG(e.aStructure,[{unit:e.aUnit,indices:ey.ofSingleton(e.aIndex)}]),cG(e.bStructure,[{unit:e.bUnit,indices:ey.ofSingleton(e.bIndex)}])]},t)}function r8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={...K6,...t},r=function(e,t){const{granularity:n,hidePrefix:r,reverse:o,condensed:i}=t;let a=!0;for(const s of e.loci)if(!cG.is(s)||1!==cG.size(s)){a=!1;break}if(a){const t=e.loci.map((e=>{const{unit:t,indices:n}=e.elements[0];return Vk.create(e.structure,t,t.elements[ey.start(n)])})),a=t.map((e=>i8(e,n,r,o||i)));if(i)return a.map((e=>e[0].replace(/\[.*\]/g,"").trim())).filter((e=>!!e)).join(" \u2014 ");let s=0;for(let e=0,n=Math.min(...a.map((e=>e.length)))-1;e<n;++e){let t=!0;for(let n=1,r=a.length;n<r;++n)if(a[0][e]!==a[n][e]){t=!1;break}if(!t)break;s+=1}if(s>0){const e=[a[0].join(" | ")];for(let t=1,n=a.length;t<n;++t)e.push(a[t].slice(s).filter((e=>!!e)).join(" | "));return e.join(" \u2014 ")}return a.map((e=>e.filter((e=>!!e)).join(" | "))).filter((e=>!!e)).join("</br>")}{const n=e.loci.map((e=>J6(e,t)));return n.filter((e=>!!e)).join(i?" \u2014 ":"</br>")}}(e,n);return n.htmlStyling?r:lh(r)}function o8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;const o={...K6,...t},i=i8(e,o.granularity,o.hidePrefix,o.reverse||o.condensed),a=o.condensed?null!==(r=null===(n=i[0])||void 0===n?void 0:n.replace(/\[.*\]/g,"").trim())&&void 0!==r?r:"":i.filter((e=>!!e)).join(" | ");return o.htmlStyling?a:lh(a)}function i8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"element",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=[];if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])){let n=e.unit.model.entry;n.length>30&&(n=n.substr(0,27)+"\u2026"),r.push(`<small>${n}</small>`),"structure"!==t&&(r.push(`<small>Model ${e.unit.model.modelNum}</small>`),r.push(`<small>Instance ${e.unit.conformation.operator.name}</small>`))}return BO.isAtomic(e.unit)?r.push(...function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Vk.residueIndex(e),o=WL.chain.label_asym_id(e),i=WL.chain.auth_asym_id(e),a=0===e.unit.model.atomicHierarchy.residues.label_seq_id.valueKind(r),s=WL.residue.label_seq_id(e),l=WL.residue.auth_seq_id(e),c=WL.residue.pdbx_PDB_ins_code(e),u=WL.atom.label_comp_id(e),d=WL.atom.label_atom_id(e),A=WL.atom.label_alt_id(e),f=WL.atom.occupancy(e),p=WL.residue.microheterogeneityCompIds(e),h="residue"===t&&p.length>1?`(${p.join("|")})`:u,g=[];switch(t){case"element":g.push(`<b>${d}</b>${A?`%${A}`:""}`);case"conformation":"conformation"===t&&A&&g.push(`<small>Conformation</small> <b>${A}</b>`);case"residue":const n=s!==l&&a?s:l;g.push(`<b>${h} ${n}</b>${n!==l?` <small>[auth</small> <b>${l}</b><small>]</small>`:""}<b>${c||""}</b>`);case"chain":o===i?g.push(`<b>${o}</b>`):"chain"===t&&BO.Traits.is(e.unit.traits,BO.Trait.MultiChain)?g.push(`<small>[auth</small> <b>${i}</b><small>]</small>`):g.push(`<b>${o}</b> <small>[auth</small> <b>${i}</b><small>]</small>`)}g.length>0&&1!==f&&!n&&(g[0]=`${g[0]} <small>[occupancy</small> <b>${Math.round(100*f)/100}</b><small>]</small>`);return g.reverse()}(e,t,n)):BO.isCoarse(e.unit)?r.push(...function(e,t){const n=WL.coarse.asym_id(e),r=WL.coarse.seq_id_begin(e),o=WL.coarse.seq_id_end(e),i=[];switch(t){case"element":case"conformation":case"residue":if(r===o){const t=WL.coarse.entityKey(e),n=e.unit.model.sequence.byEntityKey[t].sequence.compId.value(r-1);i.push(`<b>${n} ${r}</b>`)}else i.push(`<b>${r}-${o}</b>`);case"chain":i.push(`<b>${n}</b>`)}return i.reverse()}(e,t)):r.push("Unknown"),n?r.reverse():r}function a8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={...K6,measureOnly:!1,unitLabel:"\u212b",...t},[r,o]=e.loci.map((e=>Q5.getCenter(e))),i=`${qh.distance(r,o).toFixed(2)} ${n.unitLabel}`;if(n.measureOnly)return i;const a=r8(e,n);return n.condensed?`${i} | ${a}`:`Distance ${i}</br>${a}`}function s8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={...K6,measureOnly:!1,...t},[r,o,i]=e.loci.map((e=>Q5.getCenter(e))),a=qh.sub(qh(),r,o),s=qh.sub(qh(),i,o),l=`${Lp(qh.angle(a,s)).toFixed(2)}\xb0`;if(n.measureOnly)return l;const c=r8(e,n);return n.condensed?`${l} | ${c}`:`Angle ${l}</br>${c}`}function l8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={...K6,measureOnly:!1,...t},[r,o,i,a]=e.loci.map((e=>Q5.getCenter(e))),s=`${Lp(qh.dihedralAngle(r,o,i,a)).toFixed(2)}\xb0`;if(n.measureOnly)return s;const l=r8(e,n);return n.condensed?`${s} | ${l}`:`Dihedral ${s}</br>${l}`}const c8={customText:U_.Text("",{label:"Text",description:"Override the label with custom value.",isEssential:!0}),textColor:U_.Color(bk.black,{isEssential:!0}),textSize:U_.Numeric(.5,{min:.1,max:10,step:.1},{isEssential:!0})},u8={...yW.Params,...c8,borderWidth:U_.Numeric(.2,{min:0,max:.5,step:.01})},d8={unitLabel:U_.Text("\u212b",{isEssential:!0})},A8={...wW.Params,...d8,lineSizeAttenuation:U_.Boolean(!0),linesColor:U_.Color(bk.lightgreen,{isEssential:!0}),linesSize:U_.Numeric(.075,{min:.01,max:5,step:.01}),dashLength:U_.Numeric(.2,{min:.01,max:.2,step:.01})},f8={...u8,...d8},p8={lines:(e,t)=>C6(v8,wW.Utils,{modifyState:e=>({...e,markerActions:C5.Highlighting})}),text:(e,t)=>C6(b8,yW.Utils,{modifyState:e=>({...e,markerActions:b5.None})})},h8={...A8,...f8,visuals:U_.MultiSelect(["lines","text"],U_.objectToOptions(p8))};function g8(e,t){const{sphereA:n,sphereB:r,center:o}=t,[i,a]=e.loci;return Q5.getBoundingSphere(i,n),Q5.getBoundingSphere(a,r),qh.add(o,n.center,r.center),qh.scale(o,o,.5),t.distance=qh.distance(n.center,r.center),t}const m8={sphereA:YT(),sphereB:YT(),center:qh(),distance:0};function y8(e,t){return 1===e.pairs.length?`Distance ${a8(e.pairs[0],{unitLabel:t,measureOnly:!0})}`:`${e.pairs.length} Distances`}function v8(e,t,n,r){const o=function(e,t,n){const r=BW.create(128,64,n);for(let o=0,i=e.pairs.length;o<i;++o)g8(e.pairs[o],m8),r.addFixedLengthDashes(m8.sphereA.center,m8.sphereB.center,t.dashLength,o);return r.getLines()}(t,n,r&&r.geometry),i=y8(t,n.unitLabel);return dJ.create(i,t,o,(()=>n.linesColor),(()=>n.linesSize),(e=>a8(t.pairs[e],n)))}function b8(e,t,n,r){const o=function(e,t,n){const r=W6.create(t,128,64,n);for(let o=0,i=e.pairs.length;o<i;++o){g8(e.pairs[o],m8);const{center:n,distance:i,sphereA:a,sphereB:s}=m8,l=t.customText||`${i.toFixed(2)} ${t.unitLabel}`,c=Math.max(2,a.radius,s.radius)/2;r.add(l,n[0],n[1],n[2],1,c,o)}return r.getText()}(t,n,r&&r.geometry),i=y8(t,n.unitLabel);return dJ.create(i,t,o,(()=>n.textColor),(()=>n.textSize),(e=>a8(t.pairs[e],n)))}function C8(e){return{pairs:[{loci:[e[0].loci,e[1].loci]}]}}function I8(e){return{triples:[{loci:[e[0].loci,e[1].loci,e[2].loci]}]}}function E8(e){return{quads:[{loci:[e[0].loci,e[1].loci,e[2].loci,e[3].loci]}]}}function x8(e){return{infos:[{loci:e[0].loci}]}}function B8(e){return{locis:e.map((e=>e.loci))}}function w8(e){return{locis:e.map((e=>e.loci))}}const _8={...u8},S8={text:(e,t)=>C6(Q8,yW.Utils)},D8={..._8,scaleByRadius:U_.Boolean(!0),visuals:U_.MultiSelect(["text"],U_.objectToOptions(S8)),snapshotKey:U_.Text("",{isEssential:!0,disableInteractiveUpdates:!0,description:"Activate the snapshot with the provided key when clicking on the label"}),tooltip:U_.Text("",{isEssential:!0,multiline:!0,disableInteractiveUpdates:!0,placeholder:"Tooltip",description:"Tooltip text to be displayed when hovering over the label"})},T8=YT();function k8(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.label||J6(e.loci,{hidePrefix:!0,htmlStyling:!1,condensed:t})}function Q8(e,t,n,r){var o,i;const a=function(e,t,n){const r=W6.create(t,128,64,n),o=t.customText.trim();for(let i=0,a=e.infos.length;i<a;++i){const n=e.infos[i],a=Q5.getBoundingSphere(n.loci,T8);if(!a)continue;const{center:s,radius:l}=a,c=o||k8(n,!0);r.add(c,s[0],s[1],s[2],t.scaleByRadius?l/.9:0,t.scaleByRadius?Math.max(1,l):1,i)}return r.getText()}(t,n,r&&r.geometry),s=function(e){return 1===e.infos.length?k8(e.infos[0]):`${e.infos.length} Labels`}(t),l=null!==(i=null===(o=n.tooltip)||void 0===o?void 0:o.trim())&&void 0!==i?i:"",c=n.customText.trim();let u;return u=l?e=>l:c?e=>c:e=>k8(t.infos[e]),dJ.create(s,t,a,(()=>n.textColor),(()=>n.textSize),u)}const M8=qh(),R8=Yh.identity(),P8=new Float32Array(18),O8=new Uint8Array([0,1,2,3,4,5]);qh.zero(),qh.zero();const F8=qh(),N8=qh(),L8=qh(),U8=qh(),G8=Yh.identity(),j8=new Float32Array(24),z8=new Uint8Array([0,1,0,3,0,6,1,2,1,7,2,3,2,4,3,5,4,5,4,7,5,6,6,7]);const H8=Yh.identity(),V8=qh();function q8(e,t,n,r,o,i){ZX.addPrimitive(e,function(e,t,n,r,o){return qh.add(V8,t,n),Yh.targetTo(e,t,V8,r),Yh.setTranslation(e,t),Yh.scale(e,e,o)}(H8,t,n,r,o),iX(i))}const Y8={color:U_.Color(bk.orange),scaleFactor:U_.Numeric(1,{min:.1,max:10,step:.1}),radiusScale:U_.Numeric(2,{min:.1,max:10,step:.1})},X8={...RY.Params,...Y8},W8={...RY.Params,...Y8},K8={...RY.Params,...Y8},J8={axes:(e,t)=>C6(e9,RY.Utils),box:(e,t)=>C6(n9,RY.Utils),ellipsoid:(e,t)=>C6(r9,RY.Utils)},Z8={...X8,...W8,...K8,visuals:U_.MultiSelect(["box"],U_.objectToOptions(J8))};function $8(e,t,n){const r=ZX.createState(256,128,n),o=cG.getPrincipalAxesMany(e.locis);return UT.scale(o.momentsAxes,o.momentsAxes,t.scaleFactor),r.currentGroup=0,function(e,t,n,r,o){const{origin:i,dirA:a,dirB:s,dirC:l}=t;qh.add(M8,i,a),qh.toArray(qh.add(M8,i,a),P8,0),qh.toArray(qh.sub(M8,i,a),P8,3),qh.toArray(qh.add(M8,i,s),P8,6),qh.toArray(qh.sub(M8,i,s),P8,9),qh.toArray(qh.add(M8,i,l),P8,12),qh.toArray(qh.sub(M8,i,l),P8,15);const c=qY(P8,O8),u=UT.volume(t),d=Math.cbrt(u)/300*n;ZX.addCage(e,R8,c,d,r,o)}(r,o.momentsAxes,t.radiusScale,2,20),ZX.getMesh(r)}function e9(e,t,n,r){const o=$8(t,n,r&&r.geometry),i=`Principal Axes of ${t8(t.locis,{countsOnly:!0})}`;return dJ.create(i,t,o,(()=>n.color),(()=>1),(()=>i))}function t9(e,t,n){const r=ZX.createState(256,128,n),o=cG.getPrincipalAxesMany(e.locis);return UT.scale(o.boxAxes,o.boxAxes,t.scaleFactor),r.currentGroup=0,function(e,t,n,r,o){const{origin:i,dirA:a,dirB:s,dirC:l}=t,c=qh.negate(N8,a),u=qh.negate(L8,s),d=qh.negate(U8,l);let A=0;const f=function(e,t,n){qh.copy(F8,i),qh.add(F8,F8,e),qh.add(F8,F8,t),qh.add(F8,F8,n),qh.toArray(F8,j8,A),A+=3};f(a,s,l),f(a,s,d),f(a,u,d),f(a,u,l),f(c,u,d),f(c,u,l),f(c,s,l),f(c,s,d);const p=qY(j8,z8),h=UT.volume(t),g=Math.cbrt(h)/300*n;ZX.addCage(e,G8,p,g,r,o)}(r,o.boxAxes,t.radiusScale,2,20),ZX.getMesh(r)}function n9(e,t,n,r){const o=t9(t,n,r&&r.geometry),i=`Oriented Box of ${t8(t.locis,{countsOnly:!0})}`;return dJ.create(i,t,o,(()=>n.color),(()=>1),(()=>i))}function r9(e,t,n,r){const o=function(e,t,n){const r=ZX.createState(256,128,n),o=cG.getPrincipalAxesMany(e.locis).boxAxes,{origin:i,dirA:a,dirB:s}=o,l=UT.size(qh(),o);qh.scale(l,l,.5*t.scaleFactor);const c=qh.create(l[2],l[1],l[0]);return r.currentGroup=0,q8(r,i,a,s,c,2),ZX.getMesh(r)}(t,n,r&&r.geometry),i=`Oriented Ellipsoid of ${t8(t.locis,{countsOnly:!0})}`;return dJ.create(i,t,o,(()=>n.color),(()=>1),(()=>i))}const o9={radius:1,segments:36,thetaStart:0,thetaLength:2*Math.PI};function i9(e){const{radius:t,segments:n,thetaStart:r,thetaLength:o}={...o9,...e},i=o===2*Math.PI,a=i?n+1:n+2,s=new Float32Array(3*a),l=new Float32Array(3*a),c=new Uint32Array(3*n);s[0]=0,s[1]=0,s[2]=0,l[0]=0,l[1]=1,l[2]=0;for(let u=0,d=3;u<n;++u,d+=3){const e=r+u/n*o;s[d]=t*Math.sin(e),s[d+1]=0,s[d+2]=t*Math.cos(e),l[d]=0,l[d+1]=1,l[d+2]=0}for(let u=1,d=0;u<n;++u,d+=3)c[d]=u,c[d+1]=u+1,c[d+2]=0;if(i){const e=3*(n-1);c[e]=n,c[e+1]=1,c[e+2]=0}else{const e=r+o,i=3*(n+1);s[i]=t*Math.sin(e),s[i+1]=0,s[i+2]=t*Math.cos(e),l[i]=0,l[i+1]=1,l[i+2]=0;const a=3*(n-1);c[a]=n,c[a+1]=n+1,c[a+2]=0}return{vertices:s,normals:l,indices:c}}const a9={color:U_.Color(bk.lightgreen),arcScale:U_.Numeric(.7,{min:.01,max:1,step:.01})},s9={...wW.Params,...a9,lineSizeAttenuation:U_.Boolean(!0),linesSize:U_.Numeric(.04,{min:.01,max:5,step:.01}),dashLength:U_.Numeric(.04,{min:.01,max:.2,step:.01})},l9={...s9},c9={...s9},u9={...RY.Params,...a9,ignoreLight:U_.Boolean(!0),sectorOpacity:U_.Numeric(.75,{min:0,max:1,step:.01})},d9={vectors:(e,t)=>C6(v9,wW.Utils,{modifyState:e=>({...e,pickable:!1})}),arc:(e,t)=>C6(b9,wW.Utils,{modifyState:e=>({...e,pickable:!1})}),sector:(e,t)=>C6(C9,RY.Utils,{modifyProps:e=>({...e,alpha:e.sectorOpacity}),modifyState:e=>({...e,markerActions:C5.Highlighting})}),text:(e,t)=>C6(I9,yW.Utils,{modifyState:e=>({...e,markerActions:b5.None})})},A9={...l9,...c9,...u9,...u8,visuals:U_.MultiSelect(["vectors","sector","text"],U_.objectToOptions(d9))};const f9=qh(),p9=Yh();function h9(e,t,n){const{sphereA:r,sphereB:o,sphereC:i}=t,{arcDirA:a,arcDirC:s,arcNormal:l}=t,[c,u,d]=e.loci;Q5.getBoundingSphere(c,r),Q5.getBoundingSphere(u,o),Q5.getBoundingSphere(d,i),qh.sub(a,r.center,o.center),qh.sub(s,i.center,o.center),qh.cross(l,a,s);const A=Math.min(qh.magnitude(a),qh.magnitude(s))*n;return t.radius=A,t.angle=qh.angle(a,s),t}function g9(e,t){const{radius:n,angle:r}=e,o=t?Gp(r,n)/t:32;Yh.targetTo(p9,e.sphereB.center,e.sphereA.center,e.arcNormal),Yh.setTranslation(p9,e.sphereB.center),Yh.mul(p9,p9,Yh.rotY180);return VY(i9({radius:n,thetaLength:r,segments:o}),p9)}const m9={sphereA:YT(),sphereB:YT(),sphereC:YT(),arcDirA:qh(),arcDirC:qh(),arcNormal:qh(),radius:0,angle:0};function y9(e){return 1===e.triples.length?`Angle ${s8(e.triples[0],{measureOnly:!0})}`:`${e.triples.length} Angles`}function v9(e,t,n,r){const o=function(e,t,n){const r=BW.create(128,64,n);for(let o=0,i=e.triples.length;o<i;++o)h9(e.triples[o],m9,t.arcScale),r.addFixedLengthDashes(m9.sphereB.center,m9.sphereA.center,t.dashLength,o),r.addFixedLengthDashes(m9.sphereB.center,m9.sphereC.center,t.dashLength,o);return r.getLines()}(t,n,r&&r.geometry),i=y9(t);return dJ.create(i,t,o,(()=>n.color),(()=>n.linesSize),(()=>""))}function b9(e,t,n,r){const o=function(e,t,n){const r=BW.create(128,64,n);for(let o=0,i=e.triples.length;o<i;++o){h9(e.triples[o],m9,t.arcScale);const n=g9(m9,t.dashLength),{indices:i,vertices:a}=n;for(let e=0,t=i.length;e<t;e+=3){if(e%2===1)continue;const t=3*i[e],n=3*i[e+1],s=a[t],l=a[t+1],c=a[t+2],u=a[n],d=a[n+1],A=a[n+2];r.add(s,l,c,u,d,A,o)}}return r.getLines()}(t,n,r&&r.geometry),i=y9(t);return dJ.create(i,t,o,(()=>n.color),(()=>n.linesSize),(()=>""))}function C9(e,t,n,r){const o=function(e,t,n){const r=ZX.createState(128,64,n);for(let o=0,i=e.triples.length;o<i;++o){h9(e.triples[o],m9,t.arcScale);const n=g9(m9);r.currentGroup=o,ZX.addPrimitive(r,Yh.id,n),ZX.addPrimitiveFlipped(r,Yh.id,n)}return ZX.getMesh(r)}(t,n,r&&r.geometry),i=y9(t);return dJ.create(i,t,o,(()=>n.color),(()=>1),(e=>s8(t.triples[e])))}function I9(e,t,n,r){const o=function(e,t,n){const r=W6.create(t,128,64,n);for(let o=0,i=e.triples.length;o<i;++o){h9(e.triples[o],m9,t.arcScale),qh.add(f9,m9.arcDirA,m9.arcDirC),qh.setMagnitude(f9,f9,m9.radius),qh.add(f9,m9.sphereB.center,f9);const n=Lp(m9.angle).toFixed(2),i=t.customText||`${n}\xb0`,a=Math.max(2,m9.sphereA.radius,m9.sphereB.radius,m9.sphereC.radius)/2;r.add(i,f9[0],f9[1],f9[2],.1,a,o)}return r.getText()}(t,n,r&&r.geometry),i=y9(t);return dJ.create(i,t,o,(()=>n.textColor),(()=>n.textSize),(e=>s8(t.triples[e])))}const E9={color:U_.Color(bk.lightgreen),arcScale:U_.Numeric(.7,{min:.01,max:1,step:.01})},x9={...wW.Params,...E9,lineSizeAttenuation:U_.Boolean(!0),linesSize:U_.Numeric(.04,{min:.01,max:5,step:.01}),dashLength:U_.Numeric(.04,{min:.01,max:.2,step:.01})},B9={...x9},w9={...x9},_9={...x9},S9={...x9},D9={...RY.Params,...E9,ignoreLight:U_.Boolean(!0),sectorOpacity:U_.Numeric(.75,{min:0,max:1,step:.01})},T9={vectors:(e,t)=>C6(N9,wW.Utils,{modifyState:e=>({...e,pickable:!1})}),extenders:(e,t)=>C6(G9,wW.Utils,{modifyState:e=>({...e,pickable:!1})}),connector:(e,t)=>C6(L9,wW.Utils,{modifyState:e=>({...e,pickable:!1})}),arms:(e,t)=>C6(U9,wW.Utils,{modifyState:e=>({...e,pickable:!1})}),arc:(e,t)=>C6(j9,wW.Utils,{modifyState:e=>({...e,pickable:!1})}),sector:(e,t)=>C6(z9,RY.Utils,{modifyProps:e=>({...e,alpha:e.sectorOpacity}),modifyState:e=>({...e,markerActions:C5.Highlighting})}),text:(e,t)=>C6(H9,yW.Utils,{modifyState:e=>({...e,markerActions:b5.None})})},k9={...B9,...w9,..._9,...S9,...D9,...u8,visuals:U_.MultiSelect(["extenders","arms","sector","text"],U_.objectToOptions(T9))};const Q9=qh(),M9=Yh();function R9(e,t,n){const{sphereA:r,sphereB:o,sphereC:i,sphereD:a,dirBA:s,dirCD:l,projA:c,projD:u}=t,{arcPointA:d,arcPointD:A,arcDirA:f,arcDirD:p,arcCenter:h,arcNormal:g}=t,[m,y,v,b]=e.loci;Q5.getBoundingSphere(m,r),Q5.getBoundingSphere(y,o),Q5.getBoundingSphere(v,i),Q5.getBoundingSphere(b,a),qh.add(h,o.center,i.center),qh.scale(h,h,.5),qh.sub(s,r.center,o.center),qh.sub(l,a.center,i.center),qh.add(d,h,s),qh.add(A,h,l),qh.sub(g,i.center,o.center),qh.orthogonalize(f,g,s),qh.orthogonalize(p,g,l),qh.projectPointOnVector(c,d,f,h),qh.projectPointOnVector(u,A,p,h);const C=Math.min(qh.distance(c,h),qh.distance(u,h))*n;qh.setMagnitude(f,f,C),qh.setMagnitude(p,p,C),qh.add(d,h,f),qh.add(A,h,p),t.radius=C,t.angle=qh.dihedralAngle(r.center,o.center,i.center,a.center),qh.matchDirection(Q9,g,qh.sub(Q9,d,r.center));const I=qh.angle(s,Q9),E=C/Math.cos(I-Op);qh.add(c,o.center,qh.setMagnitude(Q9,s,E)),qh.matchDirection(Q9,g,qh.sub(Q9,A,a.center));const x=qh.angle(l,Q9),B=C/Math.cos(x-Op);return qh.add(u,i.center,qh.setMagnitude(Q9,l,B)),t}function P9(e,t){const{radius:n,angle:r}=e,o=t?Gp(r,n)/t:32;Yh.targetTo(M9,e.arcCenter,r<0?e.arcPointD:e.arcPointA,e.arcNormal),Yh.setTranslation(M9,e.arcCenter),Yh.mul(M9,M9,Yh.rotY180);return VY(i9({radius:n,thetaLength:Math.abs(r),segments:o}),M9)}const O9={sphereA:YT(),sphereB:YT(),sphereC:YT(),sphereD:YT(),dirBA:qh(),dirCD:qh(),projA:qh(),projD:qh(),arcPointA:qh(),arcPointD:qh(),arcDirA:qh(),arcDirD:qh(),arcCenter:qh(),arcNormal:qh(),radius:0,angle:0};function F9(e){return 1===e.quads.length?`Dihedral ${l8(e.quads[0],{measureOnly:!0})}`:`${e.quads.length} Dihedrals`}function N9(e,t,n,r){const o=function(e,t,n){const r=BW.create(128,64,n);for(let o=0,i=e.quads.length;o<i;++o)R9(e.quads[o],O9,t.arcScale),r.addFixedLengthDashes(O9.arcCenter,O9.arcPointA,t.dashLength,o),r.addFixedLengthDashes(O9.arcCenter,O9.arcPointD,t.dashLength,o);return r.getLines()}(t,n,r&&r.geometry),i=F9(t);return dJ.create(i,t,o,(()=>n.color),(()=>n.linesSize),(()=>""))}function L9(e,t,n,r){const o=function(e,t,n){const r=BW.create(128,64,n);for(let o=0,i=e.quads.length;o<i;++o)R9(e.quads[o],O9,t.arcScale),r.addFixedLengthDashes(O9.sphereB.center,O9.sphereC.center,t.dashLength,o);return r.getLines()}(t,n,r&&r.geometry),i=F9(t);return dJ.create(i,t,o,(()=>n.color),(()=>n.linesSize),(()=>""))}function U9(e,t,n,r){const o=function(e,t,n){const r=BW.create(128,64,n);for(let o=0,i=e.quads.length;o<i;++o)R9(e.quads[o],O9,t.arcScale),r.addFixedLengthDashes(O9.sphereB.center,O9.sphereA.center,t.dashLength,o),r.addFixedLengthDashes(O9.sphereC.center,O9.sphereD.center,t.dashLength,o);return r.getLines()}(t,n,r&&r.geometry),i=F9(t);return dJ.create(i,t,o,(()=>n.color),(()=>n.linesSize),(()=>""))}function G9(e,t,n,r){const o=function(e,t,n){const r=BW.create(128,64,n);for(let o=0,i=e.quads.length;o<i;++o)R9(e.quads[o],O9,t.arcScale),r.addFixedLengthDashes(O9.arcPointA,O9.projA,t.dashLength,o),r.addFixedLengthDashes(O9.arcPointD,O9.projD,t.dashLength,o);return r.getLines()}(t,n,r&&r.geometry),i=F9(t);return dJ.create(i,t,o,(()=>n.color),(()=>n.linesSize),(()=>""))}function j9(e,t,n,r){const o=function(e,t,n){const r=BW.create(128,64,n);for(let o=0,i=e.quads.length;o<i;++o){R9(e.quads[o],O9,t.arcScale);const n=P9(O9,t.dashLength),{indices:i,vertices:a}=n;for(let e=0,t=i.length;e<t;e+=3){if(e%2===1)continue;const t=3*i[e],n=3*i[e+1],s=a[t],l=a[t+1],c=a[t+2],u=a[n],d=a[n+1],A=a[n+2];r.add(s,l,c,u,d,A,o)}}return r.getLines()}(t,n,r&&r.geometry),i=F9(t);return dJ.create(i,t,o,(()=>n.color),(()=>n.linesSize),(()=>""))}function z9(e,t,n,r){const o=function(e,t,n){const r=ZX.createState(128,64,n);for(let o=0,i=e.quads.length;o<i;++o){R9(e.quads[o],O9,t.arcScale);const n=P9(O9);r.currentGroup=o,ZX.addPrimitive(r,Yh.id,n),ZX.addPrimitiveFlipped(r,Yh.id,n)}return ZX.getMesh(r)}(t,n,r&&r.geometry),i=F9(t);return dJ.create(i,t,o,(()=>n.color),(()=>1),(e=>l8(t.quads[e])))}function H9(e,t,n,r){const o=function(e,t,n){const r=W6.create(t,128,64,n);for(let o=0,i=e.quads.length;o<i;++o){R9(e.quads[o],O9,t.arcScale),qh.add(Q9,O9.arcDirA,O9.arcDirD),qh.setMagnitude(Q9,Q9,O9.radius),qh.add(Q9,O9.arcCenter,Q9);let n=Lp(O9.angle).toFixed(2);"-0.00"===n&&(n="0.00");const i=t.customText||`${n}\xb0`,a=Math.max(2,O9.sphereA.radius,O9.sphereB.radius,O9.sphereC.radius,O9.sphereD.radius)/2;r.add(i,Q9[0],Q9[1],Q9[2],.1,a,o)}return r.getText()}(t,n,r&&r.geometry),i=F9(t);return dJ.create(i,t,o,(()=>n.textColor),(()=>n.textSize),(e=>l8(t.quads[e])))}const V9=Zz.BuiltIn({name:"box-shape-3d",display:"Box Shape",from:Jz.Root,to:Jz.Shape.Provider,params:{bottomLeft:U_.Vec3(qh()),topRight:U_.Vec3(qh.create(1,1,1)),radius:U_.Numeric(.15,{min:.01,max:4,step:.01}),color:U_.Color(bk.red)}})({canAutoUpdate:()=>!0,apply(e){let{params:t}=e;return Tw.create("Shape Representation",(async e=>new Jz.Shape.Provider({label:"Box",data:t,params:RY.Params,getShape:(e,n)=>{const r=q9(XT.create(t.bottomLeft,t.topRight),t.radius);return dJ.create("Box",n,r,(()=>n.color),(()=>1),(()=>"Box"))},geometryUtils:RY.Utils},{label:"Box"})))}});function q9(e,t,n){const r=qh.sub(qh(),e.max,e.min),o=Yh.fromTranslation(Yh(),qh.create(.5,.5,.5)),i=Yh.fromScaling(Yh(),r),a=Yh.fromTranslation(Yh(),e.min),s=Yh.mul3(Yh(),a,i,o),l=ZX.createState(256,128,n);l.currentGroup=1,ZX.addCage(l,s,FW(),t,2,20);const c=ZX.getMesh(l),u=qh.scaleAndAdd(qh(),e.min,r,.5),d=qh.distance(e.min,u);return c.setBoundingSphere(YT.create(u,d)),c}const Y9={vertices:new Float32Array([-.5,.5,0,.5,.5,0,-.5,-.5,0,.5,-.5,0]),normals:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]),indices:new Uint32Array([0,2,1,1,2,3])};Y9.vertices,new Uint32Array([0,1,2,3,3,1,2,0]);function X9(){return Y9}const W9={...RY.Params,color:U_.Color(bk.orange),scaleFactor:U_.Numeric(1,{min:.1,max:10,step:.1})},K9={plane:(e,t)=>C6(e7,RY.Utils)},J9={...W9,visuals:U_.MultiSelect(["plane"],U_.objectToOptions(K9))};const Z9=Yh(),$9=qh();function e7(e,t,n,r){const o=function(e,t,n){const r=ZX.createState(256,128,n),o=cG.getPrincipalAxesMany(e.locis).boxAxes,i=X9();return qh.add($9,o.origin,o.dirC),Yh.targetTo(Z9,$9,o.origin,o.dirB),Yh.scale(Z9,Z9,UT.size($9,o)),Yh.scaleUniformly(Z9,Z9,t.scaleFactor),Yh.setTranslation(Z9,o.origin),r.currentGroup=0,ZX.addPrimitive(r,Z9,i),ZX.addPrimitiveFlipped(r,Z9,i),ZX.getMesh(r)}(t,n,r&&r.geometry),i=`Best Fit Plane of ${t8(t.locis,{countsOnly:!0})}`;return dJ.create(i,t,o,(()=>n.color),(()=>1),(()=>i))}const t7=Zz.BuiltIn({name:"structure-representation-3d",display:"3D Representation",from:Jz.Molecule.Structure,to:Jz.Molecule.Structure.Representation3D,params:(e,t)=>{const{registry:n,themes:r}=t.representation.structure,o=n.get(n.default.name);if(!e){const e={help:e=>{const{name:t,params:n}=e,o=r.colorThemeRegistry.get(t).factory({},n);return{description:o.description,legend:o.legend}}};return{type:U_.Mapped(n.default.name,n.types,(e=>U_.Group(n.get(e).getParams(r,aG.Empty)))),colorTheme:U_.Mapped(o.defaultColorTheme.name,r.colorThemeRegistry.types,(e=>U_.Group(r.colorThemeRegistry.get(e).getParams({structure:aG.Empty}))),e),sizeTheme:U_.Mapped(o.defaultSizeTheme.name,r.sizeThemeRegistry.types,(e=>U_.Group(r.sizeThemeRegistry.get(e).getParams({structure:aG.Empty}))))}}const i={structure:e.data},a={help:e=>{const{name:t,params:n}=e,o=r.colorThemeRegistry.get(t).factory(i,n);return{description:o.description,legend:o.legend}}};return{type:U_.Mapped(n.default.name,n.getApplicableTypes(e.data),(t=>U_.Group(n.get(t).getParams(r,e.data)))),colorTheme:U_.Mapped(o.defaultColorTheme.name,r.colorThemeRegistry.getApplicableTypes(i),(e=>U_.Group(r.colorThemeRegistry.get(e).getParams(i))),a),sizeTheme:U_.Mapped(o.defaultSizeTheme.name,r.sizeThemeRegistry.getApplicableTypes(i),(e=>U_.Group(r.sizeThemeRegistry.get(e).getParams(i))))}}})({canAutoUpdate(e){let{a:t,oldParams:n,newParams:r}=e;return t.data.elementCount<1e4||n.type.name===r.type.name&&"custom"!==r.type.params.quality},apply(e,t){let{a:n,params:r,cache:o}=e;return Tw.create("Structure Representation",(async e=>{var o,i;const a={runtime:e,assetManager:t.managers.asset},s=t.representation.structure.registry.get(r.type.name),l=(null===(o=s.getData)||void 0===o?void 0:o.call(s,n.data,r.type.params))||n.data;s.ensureCustomProperties&&await s.ensureCustomProperties.attach(a,l);const c=s.factory({webgl:null===(i=t.canvas3d)||void 0===i?void 0:i.webgl,...t.representation.structure.themes},s.getParams);await v5.ensureDependencies(a,t.representation.structure.themes,{structure:l},r),c.setTheme(v5.create(t.representation.structure.themes,{structure:l},r));const u=r.type.params||{};return await c.createOrUpdate(u,l).runInContext(e),new Jz.Molecule.Structure.Representation3D({repr:c,sourceData:n.data},{label:s.label})}))},update(e,t){let{a:n,b:r,oldParams:o,newParams:i,cache:a}=e;return Tw.create("Structure Representation",(async e=>{var a,s;if(i.type.name!==o.type.name)return j_.UpdateResult.Recreate;const l=t.representation.structure.registry.get(i.type.name);if(null===(a=l.mustRecreate)||void 0===a?void 0:a.call(l,o.type.params,i.type.params))return j_.UpdateResult.Recreate;const c=(null===(s=l.getData)||void 0===s?void 0:s.call(l,n.data,i.type.params))||n.data,u={runtime:e,assetManager:t.managers.asset};l.ensureCustomProperties&&await l.ensureCustomProperties.attach(u,c),v5.releaseDependencies(t.representation.structure.themes,{structure:r.data.sourceData},o),await v5.ensureDependencies(u,t.representation.structure.themes,{structure:c},i),r.data.repr.setTheme(v5.create(t.representation.structure.themes,{structure:c},i));const d={...r.data.repr.props,...i.type.params};return await r.data.repr.createOrUpdate(d,c).runInContext(e),r.data.sourceData=n.data,j_.UpdateResult.Updated}))},dispose(e,t){let{b:n,params:r}=e;if(!n||!r)return;const o=n.data.sourceData,i=t.representation.structure.registry.get(r.type.name);i.ensureCustomProperties&&i.ensureCustomProperties.detach(o),v5.releaseDependencies(t.representation.structure.themes,{structure:o},r)},interpolate(e,t,n){if("uniform"!==e.colorTheme.name||"uniform"!==t.colorTheme.name)return n<=.5?e:t;const r=e.colorTheme.params.value,o=t.colorTheme.params.value,i=Jp.interpolate(r,o,n);return{type:n<=.5?e.type:t.type,colorTheme:{name:"uniform",params:{value:i}},sizeTheme:n<=.5?e.sizeTheme:t.sizeTheme}}}),n7=Zz.BuiltIn({name:"unwind-structure-assembly-representation-3d",display:"Unwind Assembly 3D Representation",from:Jz.Molecule.Structure.Representation3D,to:Jz.Molecule.Structure.Representation3DState,params:{t:U_.Numeric(0,{min:0,max:1,step:.01})}})({canAutoUpdate:()=>!0,apply(e){let{a:t,params:n}=e;const r=t.data.sourceData,o=new E6(r);return B6(r,o,n.t),new Jz.Molecule.Structure.Representation3DState({state:{unitTransforms:o},initialState:{unitTransforms:new E6(r)},info:r,repr:t.data.repr},{label:`Unwind T = ${n.t.toFixed(2)}`})},update(e){let{a:t,b:n,newParams:r,oldParams:o}=e;const i=n.data.info;if(t.data.sourceData!==i)return j_.UpdateResult.Recreate;if(t.data.repr!==n.data.repr)return j_.UpdateResult.Recreate;if(o.t===r.t)return j_.UpdateResult.Unchanged;return B6(i,n.data.state.unitTransforms,r.t),n.label=`Unwind T = ${r.t.toFixed(2)}`,n.data.repr=t.data.repr,j_.UpdateResult.Updated}}),r7=Zz.BuiltIn({name:"explode-structure-representation-3d",display:"Explode 3D Representation",from:Jz.Molecule.Structure.Representation3D,to:Jz.Molecule.Structure.Representation3DState,params:{t:U_.Numeric(0,{min:0,max:1,step:.01})}})({canAutoUpdate:()=>!0,apply(e){let{a:t,params:n}=e;const r=t.data.sourceData,o=new E6(r);return D6(r,o,n.t,r.root.boundary.sphere),new Jz.Molecule.Structure.Representation3DState({state:{unitTransforms:o},initialState:{unitTransforms:new E6(r)},info:r,repr:t.data.repr},{label:`Explode T = ${n.t.toFixed(2)}`})},update(e){let{a:t,b:n,newParams:r,oldParams:o}=e;const i=t.data.sourceData;if(n.data.info!==i)return j_.UpdateResult.Recreate;if(t.data.repr!==n.data.repr)return j_.UpdateResult.Recreate;if(o.t===r.t)return j_.UpdateResult.Unchanged;return D6(i,n.data.state.unitTransforms,r.t,i.root.boundary.sphere),n.label=`Explode T = ${r.t.toFixed(2)}`,n.data.repr=t.data.repr,j_.UpdateResult.Updated}}),o7=Zz.BuiltIn({name:"spin-structure-representation-3d",display:"Spin 3D Representation",from:Jz.Molecule.Structure.Representation3D,to:Jz.Molecule.Structure.Representation3DState,params:{t:U_.Numeric(0,{min:0,max:1,step:.01}),...T6}})({canAutoUpdate:()=>!0,apply(e){let{a:t,params:n}=e;const r=t.data.sourceData,o=new E6(r),{axis:i,origin:a}=k6(r.root,n);return P6(r,o,n.t,i,a),new Jz.Molecule.Structure.Representation3DState({state:{unitTransforms:o},initialState:{unitTransforms:new E6(r)},info:r,repr:t.data.repr},{label:`Spin T = ${n.t.toFixed(2)}`})},update(e){let{a:t,b:n,newParams:r,oldParams:o}=e;const i=t.data.sourceData;if(n.data.info!==i)return j_.UpdateResult.Recreate;if(t.data.repr!==n.data.repr)return j_.UpdateResult.Recreate;if(o.t===r.t&&o.axis===r.axis&&o.origin===r.origin)return j_.UpdateResult.Unchanged;const a=n.data.state.unitTransforms,{axis:s,origin:l}=k6(i.root,r);return P6(i,a,r.t,s,l),n.label=`Spin T = ${r.t.toFixed(2)}`,n.data.repr=t.data.repr,j_.UpdateResult.Updated}}),i7=Zz.BuiltIn({name:"overpaint-structure-representation-3d-from-script",display:"Overpaint 3D Representation",from:Jz.Molecule.Structure.Representation3D,to:Jz.Molecule.Structure.Representation3DState,params:()=>({layers:U_.ObjectList({script:U_.Script(t0("(sel.atom.all)","mol-script")),color:U_.Color(bk.blueviolet),clear:U_.Boolean(!1)},(e=>`${e.clear?"Clear":Jp.toRgbString(e.color)}`),{defaultValue:[{script:t0("(sel.atom.all)","mol-script"),color:bk.blueviolet,clear:!1}]})})})({canAutoUpdate:()=>!0,apply(e){let{a:t,params:n}=e;const r=t.data.sourceData,o=t.data.repr.geometryVersion,i=R5.ofScript(n.layers,r);return new Jz.Molecule.Structure.Representation3DState({state:{overpaint:i},initialState:{overpaint:R5.Empty},info:{structure:r,geometryVersion:o},repr:t.data.repr},{label:`Overpaint (${i.layers.length} Layers)`})},update(e){let{a:t,b:n,newParams:r,oldParams:o}=e;const i=n.data.info,a=t.data.sourceData;if(a!==i.structure)return j_.UpdateResult.Recreate;if(t.data.repr!==n.data.repr)return j_.UpdateResult.Recreate;const s=t.data.repr.geometryVersion;if(s!==i.geometryVersion&&Pk(t.data.repr.props))return j_.UpdateResult.Recreate;const l=n.data.state.overpaint,c=R5.ofScript(r.layers,a);return R5.areEqual(l,c)?j_.UpdateResult.Unchanged:(i.geometryVersion=s,n.data.state.overpaint=c,n.data.repr=t.data.repr,n.label=`Overpaint (${c.layers.length} Layers)`,j_.UpdateResult.Updated)}}),a7=Zz.BuiltIn({name:"overpaint-structure-representation-3d-from-bundle",display:"Overpaint 3D Representation",from:Jz.Molecule.Structure.Representation3D,to:Jz.Molecule.Structure.Representation3DState,params:()=>({layers:U_.ObjectList({bundle:U_.Value(SO.Empty),color:U_.Color(bk.blueviolet),clear:U_.Boolean(!1)},(e=>`${e.clear?"Clear":Jp.toRgbString(e.color)}`),{defaultValue:[{bundle:SO.Empty,color:bk.blueviolet,clear:!1}],isHidden:!0})})})({canAutoUpdate:()=>!0,apply(e){let{a:t,params:n}=e;const r=t.data.sourceData,o=t.data.repr.geometryVersion,i=R5.ofBundle(n.layers,r);return new Jz.Molecule.Structure.Representation3DState({state:{overpaint:i},initialState:{overpaint:R5.Empty},info:{structure:r,geometryVersion:o},repr:t.data.repr},{label:`Overpaint (${i.layers.length} Layers)`})},update(e){let{a:t,b:n,newParams:r,oldParams:o}=e;const i=n.data.info,a=t.data.sourceData;if(a!==i.structure)return j_.UpdateResult.Recreate;if(t.data.repr!==n.data.repr)return j_.UpdateResult.Recreate;const s=t.data.repr.geometryVersion;if(s!==i.geometryVersion&&Pk(t.data.repr.props))return j_.UpdateResult.Recreate;const l=n.data.state.overpaint,c=R5.ofBundle(r.layers,a);return R5.areEqual(l,c)?j_.UpdateResult.Unchanged:(i.geometryVersion=s,n.data.state.overpaint=c,n.data.repr=t.data.repr,n.label=`Overpaint (${c.layers.length} Layers)`,j_.UpdateResult.Updated)}}),s7=Zz.BuiltIn({name:"transparency-structure-representation-3d-from-script",display:"Transparency 3D Representation",from:Jz.Molecule.Structure.Representation3D,to:Jz.Molecule.Structure.Representation3DState,params:()=>({layers:U_.ObjectList({script:U_.Script(t0("(sel.atom.all)","mol-script")),value:U_.Numeric(.5,{min:0,max:1,step:.01},{label:"Transparency"})},(e=>`Transparency (${e.value})`),{defaultValue:[{script:t0("(sel.atom.all)","mol-script"),value:.5}]})})})({canAutoUpdate:()=>!0,apply(e){let{a:t,params:n}=e;const r=t.data.sourceData,o=t.data.repr.geometryVersion,i=P5.ofScript(n.layers,r);return new Jz.Molecule.Structure.Representation3DState({state:{transparency:i},initialState:{transparency:P5.Empty},info:{structure:r,geometryVersion:o},repr:t.data.repr},{label:`Transparency (${i.layers.length} Layers)`})},update(e){let{a:t,b:n,newParams:r,oldParams:o}=e;const i=n.data.info,a=t.data.sourceData;if(a!==i.structure)return j_.UpdateResult.Recreate;if(t.data.repr!==n.data.repr)return j_.UpdateResult.Recreate;const s=t.data.repr.geometryVersion;if(s!==i.geometryVersion&&Pk(t.data.repr.props))return j_.UpdateResult.Recreate;const l=n.data.state.transparency,c=P5.ofScript(r.layers,a);return P5.areEqual(l,c)?j_.UpdateResult.Unchanged:(i.geometryVersion=s,n.data.state.transparency=c,n.data.repr=t.data.repr,n.label=`Transparency (${c.layers.length} Layers)`,j_.UpdateResult.Updated)}}),l7=Zz.BuiltIn({name:"transparency-structure-representation-3d-from-bundle",display:"Transparency 3D Representation",from:Jz.Molecule.Structure.Representation3D,to:Jz.Molecule.Structure.Representation3DState,params:()=>({layers:U_.ObjectList({bundle:U_.Value(SO.Empty),value:U_.Numeric(.5,{min:0,max:1,step:.01},{label:"Transparency"})},(e=>`Transparency (${e.value})`),{defaultValue:[{bundle:SO.Empty,value:.5}],isHidden:!0})})})({canAutoUpdate:()=>!0,apply(e){let{a:t,params:n}=e;const r=t.data.sourceData,o=t.data.repr.geometryVersion,i=P5.ofBundle(n.layers,r);return new Jz.Molecule.Structure.Representation3DState({state:{transparency:i},initialState:{transparency:P5.Empty},info:{structure:r,geometryVersion:o},repr:t.data.repr},{label:`Transparency (${i.layers.length} Layers)`})},update(e){let{a:t,b:n,newParams:r,oldParams:o}=e;const i=n.data.info,a=t.data.sourceData;if(a!==i.structure)return j_.UpdateResult.Recreate;if(t.data.repr!==n.data.repr)return j_.UpdateResult.Recreate;const s=t.data.repr.geometryVersion;if(s!==i.geometryVersion&&Pk(t.data.repr.props))return j_.UpdateResult.Recreate;const l=n.data.state.transparency,c=P5.ofBundle(r.layers,a);return P5.areEqual(l,c)?j_.UpdateResult.Unchanged:(i.geometryVersion=s,n.data.state.transparency=c,n.data.repr=t.data.repr,n.label=`Transparency (${c.layers.length} Layers)`,j_.UpdateResult.Updated)}}),c7=Zz.BuiltIn({name:"emissive-structure-representation-3d-from-script",display:"Emissive 3D Representation",from:Jz.Molecule.Structure.Representation3D,to:Jz.Molecule.Structure.Representation3DState,params:()=>({layers:U_.ObjectList({script:U_.Script(t0("(sel.atom.all)","mol-script")),value:U_.Numeric(.5,{min:0,max:1,step:.01},{label:"Emissive"})},(e=>`Emissive (${e.value})`),{defaultValue:[{script:t0("(sel.atom.all)","mol-script"),value:.5}]})})})({canAutoUpdate:()=>!0,apply(e){let{a:t,params:n}=e;const r=t.data.sourceData,o=t.data.repr.geometryVersion,i=g6.ofScript(n.layers,r);return new Jz.Molecule.Structure.Representation3DState({state:{emissive:i},initialState:{emissive:g6.Empty},info:{structure:r,geometryVersion:o},repr:t.data.repr},{label:`Emissive (${i.layers.length} Layers)`})},update(e){let{a:t,b:n,newParams:r,oldParams:o}=e;const i=n.data.info,a=t.data.sourceData;if(a!==i.structure)return j_.UpdateResult.Recreate;if(t.data.repr!==n.data.repr)return j_.UpdateResult.Recreate;const s=t.data.repr.geometryVersion;if(s!==i.geometryVersion&&Pk(t.data.repr.props))return j_.UpdateResult.Recreate;const l=n.data.state.emissive,c=g6.ofScript(r.layers,a);return g6.areEqual(l,c)?j_.UpdateResult.Unchanged:(i.geometryVersion=s,n.data.state.emissive=c,n.data.repr=t.data.repr,n.label=`Emissive (${c.layers.length} Layers)`,j_.UpdateResult.Updated)}}),u7=Zz.BuiltIn({name:"emissive-structure-representation-3d-from-bundle",display:"Emissive 3D Representation",from:Jz.Molecule.Structure.Representation3D,to:Jz.Molecule.Structure.Representation3DState,params:()=>({layers:U_.ObjectList({bundle:U_.Value(SO.Empty),value:U_.Numeric(.5,{min:0,max:1,step:.01},{label:"Emissive"})},(e=>`Emissive (${e.value})`),{defaultValue:[{bundle:SO.Empty,value:.5}],isHidden:!0})})})({canAutoUpdate:()=>!0,apply(e){let{a:t,params:n}=e;const r=t.data.sourceData,o=t.data.repr.geometryVersion,i=g6.ofBundle(n.layers,r);return new Jz.Molecule.Structure.Representation3DState({state:{emissive:i},initialState:{emissive:g6.Empty},info:{structure:r,geometryVersion:o},repr:t.data.repr},{label:`Emissive (${i.layers.length} Layers)`})},update(e){let{a:t,b:n,newParams:r,oldParams:o}=e;const i=n.data.info,a=t.data.sourceData;if(a!==i.structure)return j_.UpdateResult.Recreate;if(t.data.repr!==n.data.repr)return j_.UpdateResult.Recreate;const s=t.data.repr.geometryVersion;if(s!==i.geometryVersion&&Pk(t.data.repr.props))return j_.UpdateResult.Recreate;const l=n.data.state.emissive,c=g6.ofBundle(r.layers,a);return g6.areEqual(l,c)?j_.UpdateResult.Unchanged:(i.geometryVersion=s,n.data.state.emissive=c,n.data.repr=t.data.repr,n.label=`Emissive (${c.layers.length} Layers)`,j_.UpdateResult.Updated)}}),d7=Zz.BuiltIn({name:"substance-structure-representation-3d-from-script",display:"Substance 3D Representation",from:Jz.Molecule.Structure.Representation3D,to:Jz.Molecule.Structure.Representation3DState,params:()=>({layers:U_.ObjectList({script:U_.Script(t0("(sel.atom.all)","mol-script")),material:Tk.getParam(),clear:U_.Boolean(!1)},(e=>`${e.clear?"Clear":Tk.toString(e.material)}`),{defaultValue:[{script:t0("(sel.atom.all)","mol-script"),material:Tk({roughness:1}),clear:!1}]})})})({canAutoUpdate:()=>!0,apply(e){let{a:t,params:n}=e;const r=t.data.sourceData,o=t.data.repr.geometryVersion,i=h6.ofScript(n.layers,r);return new Jz.Molecule.Structure.Representation3DState({state:{substance:i},initialState:{substance:h6.Empty},info:{structure:r,geometryVersion:o},repr:t.data.repr},{label:`Substance (${i.layers.length} Layers)`})},update(e){let{a:t,b:n,newParams:r,oldParams:o}=e;const i=n.data.info,a=t.data.sourceData;if(a!==i.structure)return j_.UpdateResult.Recreate;if(t.data.repr!==n.data.repr)return j_.UpdateResult.Recreate;const s=t.data.repr.geometryVersion;if(s!==i.geometryVersion&&Pk(t.data.repr.props))return j_.UpdateResult.Recreate;const l=n.data.state.substance,c=h6.ofScript(r.layers,a);return h6.areEqual(l,c)?j_.UpdateResult.Unchanged:(i.geometryVersion=s,n.data.state.substance=c,n.data.repr=t.data.repr,n.label=`Substance (${c.layers.length} Layers)`,j_.UpdateResult.Updated)}}),A7=Zz.BuiltIn({name:"substance-structure-representation-3d-from-bundle",display:"Substance 3D Representation",from:Jz.Molecule.Structure.Representation3D,to:Jz.Molecule.Structure.Representation3DState,params:()=>({layers:U_.ObjectList({bundle:U_.Value(SO.Empty),material:Tk.getParam(),clear:U_.Boolean(!1)},(e=>`${e.clear?"Clear":Tk.toString(e.material)}`),{defaultValue:[{bundle:SO.Empty,material:Tk({roughness:1}),clear:!1}],isHidden:!0})})})({canAutoUpdate:()=>!0,apply(e){let{a:t,params:n}=e;const r=t.data.sourceData,o=t.data.repr.geometryVersion,i=h6.ofBundle(n.layers,r);return new Jz.Molecule.Structure.Representation3DState({state:{substance:i},initialState:{substance:h6.Empty},info:{structure:r,geometryVersion:o},repr:t.data.repr},{label:`Substance (${i.layers.length} Layers)`})},update(e){let{a:t,b:n,newParams:r,oldParams:o}=e;const i=n.data.info,a=t.data.sourceData;if(a!==i.structure)return j_.UpdateResult.Recreate;if(t.data.repr!==n.data.repr)return j_.UpdateResult.Recreate;const s=t.data.repr.geometryVersion;if(s!==i.geometryVersion&&Pk(t.data.repr.props))return j_.UpdateResult.Recreate;const l=n.data.state.substance,c=h6.ofBundle(r.layers,a);return h6.areEqual(l,c)?j_.UpdateResult.Unchanged:(i.geometryVersion=s,n.data.state.substance=c,n.data.repr=t.data.repr,n.label=`Substance (${c.layers.length} Layers)`,j_.UpdateResult.Updated)}}),f7=Zz.BuiltIn({name:"clipping-structure-representation-3d-from-script",display:"Clipping 3D Representation",from:Jz.Molecule.Structure.Representation3D,to:Jz.Molecule.Structure.Representation3DState,params:()=>({layers:U_.ObjectList({script:U_.Script(t0("(sel.atom.all)","mol-script")),groups:U_.Converted((e=>p6.Groups.toNames(e)),(e=>p6.Groups.fromNames(e)),U_.MultiSelect(Jh(p6.Groups.Names),U_.objectToOptions(p6.Groups.Names)))},(e=>`${p6.Groups.toNames(e.groups).length} group(s)`),{defaultValue:[{script:t0("(sel.atom.all)","mol-script"),groups:p6.Groups.Flag.None}]})})})({canAutoUpdate:()=>!0,apply(e){let{a:t,params:n}=e;const r=t.data.sourceData,o=p6.ofScript(n.layers,r);return new Jz.Molecule.Structure.Representation3DState({state:{clipping:o},initialState:{clipping:p6.Empty},info:r,repr:t.data.repr},{label:`Clipping (${o.layers.length} Layers)`})},update(e){let{a:t,b:n,newParams:r,oldParams:o}=e;const i=n.data.info;if(t.data.sourceData!==i)return j_.UpdateResult.Recreate;if(t.data.repr!==n.data.repr)return j_.UpdateResult.Recreate;const a=n.data.state.clipping,s=p6.ofScript(r.layers,i);return p6.areEqual(a,s)?j_.UpdateResult.Unchanged:(n.data.state.clipping=s,n.data.repr=t.data.repr,n.label=`Clipping (${s.layers.length} Layers)`,j_.UpdateResult.Updated)}}),p7=Zz.BuiltIn({name:"clipping-structure-representation-3d-from-bundle",display:"Clipping 3D Representation",from:Jz.Molecule.Structure.Representation3D,to:Jz.Molecule.Structure.Representation3DState,params:()=>({layers:U_.ObjectList({bundle:U_.Value(SO.Empty),groups:U_.Converted((e=>p6.Groups.toNames(e)),(e=>p6.Groups.fromNames(e)),U_.MultiSelect(Jh(p6.Groups.Names),U_.objectToOptions(p6.Groups.Names)))},(e=>`${p6.Groups.toNames(e.groups).length} group(s)`),{defaultValue:[{bundle:SO.Empty,groups:p6.Groups.Flag.None}],isHidden:!0})})})({canAutoUpdate:()=>!0,apply(e){let{a:t,params:n}=e;const r=t.data.sourceData,o=p6.ofBundle(n.layers,r);return new Jz.Molecule.Structure.Representation3DState({state:{clipping:o},initialState:{clipping:p6.Empty},info:r,repr:t.data.repr},{label:`Clipping (${o.layers.length} Layers)`})},update(e){let{a:t,b:n,newParams:r,oldParams:o}=e;const i=n.data.info;if(t.data.sourceData!==i)return j_.UpdateResult.Recreate;if(t.data.repr!==n.data.repr)return j_.UpdateResult.Recreate;const a=n.data.state.clipping,s=p6.ofBundle(r.layers,i);return p6.areEqual(a,s)?j_.UpdateResult.Unchanged:(n.data.state.clipping=s,n.data.repr=t.data.repr,n.label=`Clipping (${s.layers.length} Layers)`,j_.UpdateResult.Updated)}}),h7=Zz.BuiltIn({name:"theme-strength-representation-3d",display:"Theme Strength 3D Representation",from:Jz.Molecule.Structure.Representation3D,to:Jz.Molecule.Structure.Representation3DState,params:()=>({overpaintStrength:U_.Numeric(1,{min:0,max:1,step:.01}),transparencyStrength:U_.Numeric(1,{min:0,max:1,step:.01}),emissiveStrength:U_.Numeric(1,{min:0,max:1,step:.01}),substanceStrength:U_.Numeric(1,{min:0,max:1,step:.01})})})({canAutoUpdate:()=>!0,apply(e){let{a:t,params:n}=e;return new Jz.Molecule.Structure.Representation3DState({state:{themeStrength:{overpaint:n.overpaintStrength,transparency:n.transparencyStrength,emissive:n.emissiveStrength,substance:n.substanceStrength}},initialState:{themeStrength:{overpaint:1,transparency:1,emissive:1,substance:1}},info:{},repr:t.data.repr},{label:"Theme Strength",description:`${n.overpaintStrength.toFixed(2)}, ${n.transparencyStrength.toFixed(2)}, ${n.emissiveStrength.toFixed(2)}, ${n.substanceStrength.toFixed(2)}`})},update(e){let{a:t,b:n,newParams:r,oldParams:o}=e;var i,a,s,l;return r.overpaintStrength===(null===(i=n.data.state.themeStrength)||void 0===i?void 0:i.overpaint)&&r.transparencyStrength===(null===(a=n.data.state.themeStrength)||void 0===a?void 0:a.transparency)&&r.emissiveStrength===(null===(s=n.data.state.themeStrength)||void 0===s?void 0:s.emissive)&&r.substanceStrength===(null===(l=n.data.state.themeStrength)||void 0===l?void 0:l.substance)?j_.UpdateResult.Unchanged:(n.data.state.themeStrength={overpaint:r.overpaintStrength,transparency:r.transparencyStrength,emissive:r.emissiveStrength,substance:r.substanceStrength},n.data.repr=t.data.repr,n.label="Theme Strength",n.description=`${r.overpaintStrength.toFixed(2)}, ${r.transparencyStrength.toFixed(2)}, ${r.emissiveStrength.toFixed(2)}, ${r.substanceStrength.toFixed(2)}`,j_.UpdateResult.Updated)},interpolate:(e,t,n)=>({overpaintStrength:Vp(e.overpaintStrength,t.overpaintStrength,n),transparencyStrength:Vp(e.transparencyStrength,t.transparencyStrength,n),emissiveStrength:Vp(e.emissiveStrength,t.emissiveStrength,n),substanceStrength:Vp(e.substanceStrength,t.substanceStrength,n)})});var g7;!function(e){e.getDefaultParams=function(e,t,n,r,o,i,a,s){const l=e.representation.volume.registry.get(t),c=e.representation.volume.themes.colorThemeRegistry.get(o||l.defaultColorTheme.name),u=e.representation.volume.themes.sizeThemeRegistry.get(a||l.defaultSizeTheme.name),d=U_.getDefaultValues(l.getParams(e.representation.volume.themes,n));return{type:{name:t,params:r?{...d,...r}:d},colorTheme:{name:c.name,params:i?{...c.defaultValues,...i}:c.defaultValues},sizeTheme:{name:u.name,params:s?{...u.defaultValues,...s}:u.defaultValues}}},e.getDefaultParamsStatic=function(e,t,n,r,o,i,a){const s=e.representation.volume.registry.get(t),l=e.representation.volume.themes.colorThemeRegistry.get(r||s.defaultColorTheme.name),c=e.representation.volume.themes.sizeThemeRegistry.get(i||s.defaultSizeTheme.name);return{type:{name:t,params:n?{...s.defaultValues,...n}:s.defaultValues},colorTheme:{name:s.defaultColorTheme.name,params:o?{...l.defaultValues,...o}:l.defaultValues},sizeTheme:{name:s.defaultSizeTheme.name,params:a?{...c.defaultValues,...a}:c.defaultValues}}},e.getDescription=function(e){var t,n,r,o;return e.isoValue?HW.IsoValue.toString(e.isoValue):(null===(n=null===(t=e.renderMode)||void 0===t?void 0:t.params)||void 0===n?void 0:n.isoValue)?HW.IsoValue.toString(null===(o=null===(r=e.renderMode)||void 0===r?void 0:r.params)||void 0===o?void 0:o.isoValue):void 0}}(g7||(g7={}));const m7=Zz.BuiltIn({name:"volume-representation-3d",display:"3D Representation",from:Jz.Volume.Data,to:Jz.Volume.Representation3D,params:(e,t)=>{const{registry:n,themes:r}=t.representation.volume,o=n.get(n.default.name);if(!e)return{type:U_.Mapped(n.default.name,n.types,(e=>U_.Group(n.get(e).getParams(r,HW.One)))),colorTheme:U_.Mapped(o.defaultColorTheme.name,r.colorThemeRegistry.types,(e=>U_.Group(r.colorThemeRegistry.get(e).getParams({volume:HW.One})))),sizeTheme:U_.Mapped(o.defaultSizeTheme.name,r.sizeThemeRegistry.types,(e=>U_.Group(r.sizeThemeRegistry.get(e).getParams({volume:HW.One}))))};const i={volume:e.data};return{type:U_.Mapped(n.default.name,n.types,(t=>U_.Group(n.get(t).getParams(r,e.data)))),colorTheme:U_.Mapped(o.defaultColorTheme.name,r.colorThemeRegistry.getApplicableTypes(i),(e=>U_.Group(r.colorThemeRegistry.get(e).getParams(i)))),sizeTheme:U_.Mapped(o.defaultSizeTheme.name,r.sizeThemeRegistry.getApplicableTypes(i),(e=>U_.Group(r.sizeThemeRegistry.get(e).getParams(i))))}}})({canAutoUpdate(e){let{oldParams:t,newParams:n}=e;return t.type.name===n.type.name},apply(e,t){let{a:n,params:r}=e;return Tw.create("Volume Representation",(async e=>{var o;const i={runtime:e,assetManager:t.managers.asset},a=t.representation.volume.registry.get(r.type.name);a.ensureCustomProperties&&await a.ensureCustomProperties.attach(i,n.data);const s=a.factory({webgl:null===(o=t.canvas3d)||void 0===o?void 0:o.webgl,...t.representation.volume.themes},a.getParams);s.setTheme(v5.create(t.representation.volume.themes,{volume:n.data},r));const l=r.type.params||{};return await s.createOrUpdate(l,n.data).runInContext(e),new Jz.Volume.Representation3D({repr:s,sourceData:n.data},{label:a.label,description:g7.getDescription(l)})}))},update(e,t){let{a:n,b:r,oldParams:o,newParams:i}=e;return Tw.create("Volume Representation",(async e=>{var a;if(i.type.name!==o.type.name){return null===(a=t.representation.volume.registry.get(o.type.name).ensureCustomProperties)||void 0===a||a.detach(n.data),j_.UpdateResult.Recreate}const s={...r.data.repr.props,...i.type.params};return r.data.repr.setTheme(v5.create(t.representation.volume.themes,{volume:n.data},i)),await r.data.repr.createOrUpdate(s,n.data).runInContext(e),r.data.sourceData=n.data,r.description=g7.getDescription(s),j_.UpdateResult.Updated}))}}),y7=Zz.BuiltIn({name:"shape-representation-3d",display:"3D Representation",from:Jz.Shape.Provider,to:Jz.Shape.Representation3D,params:(e,t)=>e?e.data.params:Fk.Params})({canAutoUpdate:()=>!0,apply(e,t){let{a:n,params:r}=e;return Tw.create("Shape Representation",(async e=>{const t={...U_.getDefaultValues(n.data.params),...r},o=C6(n.data.getShape,n.data.geometryUtils);return await o.createOrUpdate(t,n.data.data).runInContext(e),new Jz.Shape.Representation3D({repr:o,sourceData:n.data},{label:n.data.label})}))},update(e,t){let{a:n,b:r,oldParams:o,newParams:i}=e;return Tw.create("Shape Representation",(async e=>{const t={...r.data.repr.props,...i};return await r.data.repr.createOrUpdate(t,n.data.data).runInContext(e),r.data.sourceData=n.data,j_.UpdateResult.Updated}))}}),v7=Zz.BuiltIn({name:"model-unitcell-3d",display:"Model Unit Cell",from:Jz.Molecule.Model,to:Jz.Shape.Representation3D,params:()=>({...j6})})({isApplicable:e=>!!xO.Provider.get(e.data),canAutoUpdate(e){let{oldParams:t,newParams:n}=e;return!0},apply(e,t){let{a:n,params:r}=e;return Tw.create("Model Unit Cell",(async e=>{var o;const i=xO.Provider.get(n.data);if(!i)return MC.Null;const a=H6(n.data,i,r),s=function(e,t){return b6.createMulti("Unit Cell",e,t,b6.StateBuilder,G6)}({webgl:null===(o=t.canvas3d)||void 0===o?void 0:o.webgl,...t.representation.structure.themes},(()=>j6));return await s.createOrUpdate(r,a).runInContext(e),new Jz.Shape.Representation3D({repr:s,sourceData:a},{label:"Unit Cell",description:i.spacegroup.name})}))},update(e){let{a:t,b:n,newParams:r}=e;return Tw.create("Model Unit Cell",(async e=>{const o=xO.Provider.get(t.data);if(!o)return j_.UpdateResult.Null;const i={...n.data.repr.props,...r},a=H6(t.data,o,i);return await n.data.repr.createOrUpdate(i,a).runInContext(e),n.data.sourceData=a,j_.UpdateResult.Updated}))}}),b7=Zz.BuiltIn({name:"structure-bounding-box-3d",display:"Bounding Box",from:Jz.Molecule.Structure,to:Jz.Shape.Representation3D,params:{radius:U_.Numeric(.05,{min:.01,max:4,step:.01},{isEssential:!0}),color:U_.Color(bk.red,{isEssential:!0}),...RY.Params}})({canAutoUpdate:()=>!0,apply(e,t){let{a:n,params:r}=e;return Tw.create("Bounding Box",(async e=>{const t=C6(((e,t,n,r)=>{const o=q9(t.box,t.radius,null===r||void 0===r?void 0:r.geometry);return dJ.create("Bouding Box",t,o,(()=>t.color),(()=>1),(()=>"Bounding Box"))}),RY.Utils);return await t.createOrUpdate(r,{box:n.data.boundary.box,radius:r.radius,color:r.color}).runInContext(e),new Jz.Shape.Representation3D({repr:t,sourceData:n.data},{label:"Bounding Box"})}))},update(e,t){let{a:n,b:r,oldParams:o,newParams:i}=e;return Tw.create("Bounding Box",(async e=>(await r.data.repr.createOrUpdate(i,{box:n.data.boundary.box,radius:i.radius,color:i.color}).runInContext(e),r.data.sourceData=n.data,j_.UpdateResult.Updated)))}}),C7=Zz.BuiltIn({name:"structure-selections-distance-3d",display:"3D Distance",from:Jz.Molecule.Structure.Selections,to:Jz.Shape.Representation3D,params:()=>({...h8})})({canAutoUpdate(e){let{oldParams:t,newParams:n}=e;return!0},apply(e,t){let{a:n,params:r}=e;return Tw.create("Structure Distance",(async e=>{var o;const i=C8(n.data),a=function(e,t){return b6.createMulti("Distance",e,t,b6.StateBuilder,p8)}({webgl:null===(o=t.canvas3d)||void 0===o?void 0:o.webgl,...t.representation.structure.themes},(()=>h8));return await a.createOrUpdate(r,i).runInContext(e),new Jz.Shape.Representation3D({repr:a,sourceData:i},{label:"Distance"})}))},update(e,t){let{a:n,b:r,oldParams:o,newParams:i}=e;return Tw.create("Structure Distance",(async e=>{const t={...r.data.repr.props,...i},o=C8(n.data);return await r.data.repr.createOrUpdate(t,o).runInContext(e),r.data.sourceData=o,j_.UpdateResult.Updated}))}}),I7=Zz.BuiltIn({name:"structure-selections-angle-3d",display:"3D Angle",from:Jz.Molecule.Structure.Selections,to:Jz.Shape.Representation3D,params:()=>({...A9})})({canAutoUpdate(e){let{oldParams:t,newParams:n}=e;return!0},apply(e,t){let{a:n,params:r}=e;return Tw.create("Structure Angle",(async e=>{var o;const i=I8(n.data),a=function(e,t){return b6.createMulti("Angle",e,t,b6.StateBuilder,d9)}({webgl:null===(o=t.canvas3d)||void 0===o?void 0:o.webgl,...t.representation.structure.themes},(()=>A9));return await a.createOrUpdate(r,i).runInContext(e),new Jz.Shape.Representation3D({repr:a,sourceData:i},{label:"Angle"})}))},update(e,t){let{a:n,b:r,oldParams:o,newParams:i}=e;return Tw.create("Structure Angle",(async e=>{const t={...r.data.repr.props,...i},o=I8(n.data);return await r.data.repr.createOrUpdate(t,o).runInContext(e),r.data.sourceData=o,j_.UpdateResult.Updated}))}}),E7=Zz.BuiltIn({name:"structure-selections-dihedral-3d",display:"3D Dihedral",from:Jz.Molecule.Structure.Selections,to:Jz.Shape.Representation3D,params:()=>({...k9})})({canAutoUpdate(e){let{oldParams:t,newParams:n}=e;return!0},apply(e,t){let{a:n,params:r}=e;return Tw.create("Structure Dihedral",(async e=>{var o;const i=E8(n.data),a=function(e,t){return b6.createMulti("Dihedral",e,t,b6.StateBuilder,T9)}({webgl:null===(o=t.canvas3d)||void 0===o?void 0:o.webgl,...t.representation.structure.themes},(()=>k9));return await a.createOrUpdate(r,i).runInContext(e),new Jz.Shape.Representation3D({repr:a,sourceData:i},{label:"Dihedral"})}))},update(e,t){let{a:n,b:r,oldParams:o,newParams:i}=e;return Tw.create("Structure Dihedral",(async e=>{const t={...r.data.repr.props,...i},o=E8(n.data);return await r.data.repr.createOrUpdate(t,o).runInContext(e),r.data.sourceData=o,j_.UpdateResult.Updated}))}}),x7=Zz.BuiltIn({name:"structure-selections-label-3d",display:"3D Label",from:Jz.Molecule.Structure.Selections,to:Jz.Shape.Representation3D,params:()=>({...D8})})({canAutoUpdate(e){let{oldParams:t,newParams:n}=e;return!0},apply(e,t){let{a:n,params:r}=e;return Tw.create("Structure Label",(async e=>{var o,i,a;const s=x8(n.data),l=function(e,t){return b6.createMulti("Label",e,t,b6.StateBuilder,S8)}({webgl:null===(o=t.canvas3d)||void 0===o?void 0:o.webgl,...t.representation.structure.themes},(()=>D8));await l.createOrUpdate(r,s).runInContext(e);const c=!(!(null===(i=r.snapshotKey)||void 0===i?void 0:i.trim())&&!(null===(a=r.tooltip)||void 0===a?void 0:a.trim()));return l.setState({pickable:c,markerActions:c?C5.Highlighting:b5.None}),new Jz.Shape.Representation3D({repr:l,sourceData:s},{label:"Label"})}))},update(e,t){let{a:n,b:r,oldParams:o,newParams:i}=e;return Tw.create("Structure Label",(async e=>{var t,o;const a={...r.data.repr.props,...i},s=x8(n.data);await r.data.repr.createOrUpdate(a,s).runInContext(e),r.data.sourceData=s;const l=!(!(null===(t=i.snapshotKey)||void 0===t?void 0:t.trim())&&!(null===(o=i.tooltip)||void 0===o?void 0:o.trim()));return r.data.repr.setState({pickable:l,markerActions:l?C5.Highlighting:b5.None}),j_.UpdateResult.Updated}))}}),B7=Zz.BuiltIn({name:"structure-selections-orientation-3d",display:"3D Orientation",from:Jz.Molecule.Structure.Selections,to:Jz.Shape.Representation3D,params:()=>({...Z8})})({canAutoUpdate(e){let{oldParams:t,newParams:n}=e;return!0},apply(e,t){let{a:n,params:r}=e;return Tw.create("Structure Orientation",(async e=>{var o;const i=B8(n.data),a=function(e,t){const n=b6.createMulti("Orientation",e,t,b6.StateBuilder,J8);return n.setState({markerActions:C5.Highlighting}),n}({webgl:null===(o=t.canvas3d)||void 0===o?void 0:o.webgl,...t.representation.structure.themes},(()=>Z8));return await a.createOrUpdate(r,i).runInContext(e),new Jz.Shape.Representation3D({repr:a,sourceData:i},{label:"Orientation"})}))},update(e,t){let{a:n,b:r,oldParams:o,newParams:i}=e;return Tw.create("Structure Orientation",(async e=>{const t={...r.data.repr.props,...i},o=B8(n.data);return await r.data.repr.createOrUpdate(t,o).runInContext(e),r.data.sourceData=o,j_.UpdateResult.Updated}))}}),w7=Zz.BuiltIn({name:"structure-selections-plane-3d",display:"3D Plane",from:Jz.Molecule.Structure.Selections,to:Jz.Shape.Representation3D,params:()=>({...J9})})({canAutoUpdate(e){let{oldParams:t,newParams:n}=e;return!0},apply(e,t){let{a:n,params:r}=e;return Tw.create("Structure Plane",(async e=>{var o;const i=w8(n.data),a=function(e,t){const n=b6.createMulti("Plane",e,t,b6.StateBuilder,K9);return n.setState({markerActions:C5.Highlighting}),n}({webgl:null===(o=t.canvas3d)||void 0===o?void 0:o.webgl,...t.representation.structure.themes},(()=>J9));return await a.createOrUpdate(r,i).runInContext(e),new Jz.Shape.Representation3D({repr:a,sourceData:i},{label:"Plane"})}))},update(e,t){let{a:n,b:r,oldParams:o,newParams:i}=e;return Tw.create("Structure Plane",(async e=>{const t={...r.data.repr.props,...i},o=w8(n.data);return await r.data.repr.createOrUpdate(t,o).runInContext(e),r.data.sourceData=o,j_.UpdateResult.Updated}))}}),_7={Data:v,Misc:b,Model:C,Volume:I,Representation:x,Shape:E},S7=new Set(["LI","NA","K","RB","CS","FR"]);const D7=new Set(["BE","MG","CA","SR","BA","RA"]);new Set(["C","P","S","SE"]);new Set(["H","N","O","F","CL","BR","I"]);new Set(["HE","NE","AR","KR","XE","RN"]);const T7=new Set(["ZN","GA","CD","IN","SN","HG","TI","PB","BI","PO","CN"]);new Set(["B","SI","GE","AS","SB","TE","AT"]);const k7=new Set(["F","CL","BR","I","AT"]);function Q7(e){return k7.has(e)}function M7(e){const t=NN(e);return t>=21&&t<=29||t>=39&&t<=47||t>=72&&t<=79||t>=104&&t<=108}function R7(e){return function(e){return S7.has(e)}(e)||function(e){return D7.has(e)}(e)||function(e){const t=NN(e);return t>=57&&t<=71}(e)||function(e){const t=NN(e);return t>=89&&t<=103}(e)||M7(e)||function(e){return T7.has(e)}(e)}var P7;function O7(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r;let o;return{label:e,expression:t,description:n.description||"",category:null!==(r=n.category)&&void 0!==r?r:P7.Misc,isHidden:!!n.isHidden,priority:n.priority||0,referencesCurrent:!!n.referencesCurrent,get query(){return o||(o=uz(t)),o},ensureCustomProperties:n.ensureCustomProperties,async getSelection(e,r,i){const a=e.managers.structure.selection.getStructure(i),s=a?_O.Sequence(i,[a]):_O.Empty(i);return n.ensureCustomProperties&&await n.ensureCustomProperties({runtime:r,assetManager:e.managers.asset},i),o||(o=uz(t)),o(new $O(i,{currentSelection:s}))}}}!function(e){e.Type="Type",e.Structure="Structure Property",e.Atom="Atom Property",e.Bond="Bond Property",e.Residue="Residue Property",e.AminoAcid="Amino Acid",e.NucleicBase="Nucleic Base",e.Manipulate="Manipulate Selection",e.Validation="Validation",e.Misc="Miscellaneous",e.Internal="Internal"}(P7||(P7={}));const F7=O7("All",FQ.struct.generator.all(),{category:"",priority:1e3}),N7=O7("Current Selection",FQ.internal.generator.current(),{category:"",referencesCurrent:!0}),L7=O7("Polymer",FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":FQ.core.logic.and([FQ.core.rel.eq([FQ.ammp("entityType"),"polymer"]),FQ.core.str.match([FQ.re("(polypeptide|cyclic-pseudo-peptide|peptide-like|nucleotide|peptide nucleic acid)","i"),FQ.ammp("entitySubtype")])])})]),{category:P7.Type}),U7=O7("Trace",FQ.struct.modifier.union([FQ.struct.combinator.merge([FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":FQ.core.rel.eq([FQ.ammp("entityType"),"polymer"]),"chain-test":FQ.core.set.has([FQ.set("sphere","gaussian"),FQ.ammp("objectPrimitive")])})]),FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":FQ.core.rel.eq([FQ.ammp("entityType"),"polymer"]),"chain-test":FQ.core.rel.eq([FQ.ammp("objectPrimitive"),"atomistic"]),"atom-test":FQ.core.set.has([FQ.set("CA","P"),FQ.ammp("label_atom_id")])})])])]),{category:P7.Structure}),G7=FQ.core.logic.and([FQ.core.rel.eq([FQ.ammp("entityType"),"polymer"]),FQ.core.str.match([FQ.re("(polypeptide|cyclic-pseudo-peptide|peptide-like)","i"),FQ.ammp("entitySubtype")])]),j7=FQ.core.logic.and([FQ.core.rel.eq([FQ.ammp("entityType"),"polymer"]),FQ.core.str.match([FQ.re("(nucleotide|peptide nucleic acid)","i"),FQ.ammp("entitySubtype")])]),z7=FQ.core.str.match([FQ.re("non-polymer|(amino|carboxy) terminus|peptide-like","i"),FQ.ammp("chemCompType")]),H7=O7("Backbone",FQ.struct.modifier.union([FQ.struct.combinator.merge([FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":G7,"chain-test":FQ.core.rel.eq([FQ.ammp("objectPrimitive"),"atomistic"]),"residue-test":FQ.core.logic.not([z7]),"atom-test":FQ.core.set.has([FQ.set(...$Q.toArray(sM)),FQ.ammp("label_atom_id")])})]),FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":j7,"chain-test":FQ.core.rel.eq([FQ.ammp("objectPrimitive"),"atomistic"]),"residue-test":FQ.core.logic.not([z7]),"atom-test":FQ.core.set.has([FQ.set(...$Q.toArray(lM)),FQ.ammp("label_atom_id")])})])])]),{category:P7.Structure}),V7=O7("Sidechain",FQ.struct.modifier.union([FQ.struct.combinator.merge([FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":G7,"chain-test":FQ.core.rel.eq([FQ.ammp("objectPrimitive"),"atomistic"]),"residue-test":FQ.core.logic.not([z7]),"atom-test":FQ.core.logic.or([FQ.core.logic.not([FQ.core.set.has([FQ.set(...$Q.toArray(sM)),FQ.ammp("label_atom_id")])])])})]),FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":j7,"chain-test":FQ.core.rel.eq([FQ.ammp("objectPrimitive"),"atomistic"]),"residue-test":FQ.core.logic.not([z7]),"atom-test":FQ.core.logic.or([FQ.core.logic.not([FQ.core.set.has([FQ.set(...$Q.toArray(lM)),FQ.ammp("label_atom_id")])])])})])])]),{category:P7.Structure}),q7=O7("Sidechain with Trace",FQ.struct.modifier.union([FQ.struct.combinator.merge([FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":G7,"chain-test":FQ.core.rel.eq([FQ.ammp("objectPrimitive"),"atomistic"]),"residue-test":FQ.core.logic.not([z7]),"atom-test":FQ.core.logic.or([FQ.core.logic.not([FQ.core.set.has([FQ.set(...$Q.toArray(sM)),FQ.ammp("label_atom_id")])]),FQ.core.rel.eq([FQ.ammp("label_atom_id"),"CA"]),FQ.core.logic.and([FQ.core.rel.eq([FQ.ammp("auth_comp_id"),"PRO"]),FQ.core.rel.eq([FQ.ammp("label_atom_id"),"N"])])])})]),FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":j7,"chain-test":FQ.core.rel.eq([FQ.ammp("objectPrimitive"),"atomistic"]),"residue-test":FQ.core.logic.not([z7]),"atom-test":FQ.core.logic.or([FQ.core.logic.not([FQ.core.set.has([FQ.set(...$Q.toArray(lM)),FQ.ammp("label_atom_id")])]),FQ.core.rel.eq([FQ.ammp("label_atom_id"),"P"])])})])])]),{category:P7.Structure}),Y7=O7("Protein",FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":G7})]),{category:P7.Type}),X7=O7("Nucleic",FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":j7})]),{category:P7.Type}),W7=O7("Helix",FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":G7,"residue-test":FQ.core.flags.hasAny([FQ.ammp("secondaryStructureFlags"),FQ.core.type.bitflags([2])])})]),{category:P7.Structure,ensureCustomProperties:(e,t)=>ML.attach(e,t)}),K7=O7("Beta Strand/Sheet",FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":G7,"residue-test":FQ.core.flags.hasAny([FQ.ammp("secondaryStructureFlags"),FQ.core.type.bitflags([4])])})]),{category:P7.Structure,ensureCustomProperties:(e,t)=>ML.attach(e,t)}),J7=O7("Water",FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":FQ.core.rel.eq([FQ.ammp("entityType"),"water"])})]),{category:P7.Type}),Z7=O7("Ion",FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":FQ.core.rel.eq([FQ.ammp("entitySubtype"),"ion"])})]),{category:P7.Type}),$7=O7("Lipid",FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":FQ.core.rel.eq([FQ.ammp("entitySubtype"),"lipid"])})]),{category:P7.Type}),eee=O7("Carbohydrate",FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":FQ.core.logic.or([FQ.core.rel.eq([FQ.ammp("entityType"),"branched"]),FQ.core.logic.and([FQ.core.rel.eq([FQ.ammp("entityType"),"non-polymer"]),FQ.core.str.match([FQ.re("oligosaccharide","i"),FQ.ammp("entitySubtype")])])])})]),{category:P7.Type}),tee=O7("Carbohydrate with Connected",FQ.struct.modifier.union([FQ.struct.modifier.includeConnected({0:eee.expression,"layer-count":1,"as-whole-residues":!0})]),{category:P7.Internal,isHidden:!0}),nee=O7("Connected to Carbohydrate",FQ.struct.modifier.union([FQ.struct.modifier.exceptBy({0:tee.expression,by:eee.expression})]),{category:P7.Internal,isHidden:!0}),ree=O7("Ligand",FQ.struct.modifier.union([FQ.struct.modifier.exceptBy({0:FQ.struct.modifier.union([FQ.struct.combinator.merge([FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":FQ.core.logic.and([FQ.core.logic.or([FQ.core.rel.eq([FQ.ammp("entityType"),"non-polymer"]),FQ.core.rel.neq([FQ.ammp("entityPrdId"),""])]),FQ.core.logic.not([FQ.core.str.match([FQ.re("(oligosaccharide|lipid|ion)","i"),FQ.ammp("entitySubtype")])])]),"chain-test":FQ.core.rel.eq([FQ.ammp("objectPrimitive"),"atomistic"]),"residue-test":FQ.core.logic.not([FQ.core.str.match([FQ.re("saccharide","i"),FQ.ammp("chemCompType")])])})]),FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":FQ.core.rel.eq([FQ.ammp("entityType"),"polymer"]),"chain-test":FQ.core.rel.eq([FQ.ammp("objectPrimitive"),"atomistic"]),"residue-test":z7})])])]),by:FQ.struct.combinator.merge([FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":FQ.core.rel.eq([FQ.ammp("entityType"),"polymer"]),"chain-test":FQ.core.rel.eq([FQ.ammp("objectPrimitive"),"atomistic"]),"residue-test":FQ.core.set.has([FQ.set(...$Q.toArray(PM)),FQ.ammp("label_comp_id")])})]),FQ.struct.generator.atomGroups({"chain-test":FQ.core.rel.eq([FQ.ammp("objectPrimitive"),"atomistic"]),"residue-test":FQ.core.set.has([FQ.set(...$Q.toArray(wM)),FQ.ammp("label_comp_id")])})])})]),{category:P7.Type}),oee=O7("Ligand with Connected",FQ.struct.modifier.union([FQ.struct.modifier.exceptBy({0:FQ.struct.modifier.union([FQ.struct.modifier.includeConnected({0:ree.expression,"layer-count":1,"as-whole-residues":!0,"bond-test":FQ.core.flags.hasAny([FQ.struct.bondProperty.flags(),FQ.core.type.bitflags([3])])})]),by:eee.expression})]),{category:P7.Internal,isHidden:!0}),iee=O7("Connected to Ligand",FQ.struct.modifier.union([FQ.struct.modifier.exceptBy({0:oee.expression,by:ree.expression})]),{category:P7.Internal,isHidden:!0}),aee=O7("Connected to Ligand or Carbohydrate",FQ.struct.modifier.union([FQ.struct.combinator.merge([nee.expression,iee.expression])]),{category:P7.Internal,isHidden:!0}),see=O7("Disulfide Bridges",FQ.struct.modifier.union([FQ.struct.combinator.merge([FQ.struct.modifier.union([FQ.struct.modifier.wholeResidues([FQ.struct.filter.isConnectedTo({0:FQ.struct.generator.atomGroups({"residue-test":FQ.core.set.has([FQ.set("CYS"),FQ.ammp("auth_comp_id")]),"atom-test":FQ.core.set.has([FQ.set("SG"),FQ.ammp("label_atom_id")])}),target:FQ.struct.generator.atomGroups({"residue-test":FQ.core.set.has([FQ.set("CYS"),FQ.ammp("auth_comp_id")]),"atom-test":FQ.core.set.has([FQ.set("SG"),FQ.ammp("label_atom_id")])}),"bond-test":!0})])]),FQ.struct.modifier.union([FQ.struct.modifier.wholeResidues([FQ.struct.modifier.union([FQ.struct.generator.bondedAtomicPairs({0:FQ.core.flags.hasAny([FQ.struct.bondProperty.flags(),FQ.core.type.bitflags([8])])})])])])])]),{category:P7.Bond}),lee=O7("NOS Bridges",FQ.struct.modifier.union([FQ.struct.modifier.wholeResidues([FQ.struct.filter.isConnectedTo({0:FQ.struct.generator.atomGroups({"residue-test":FQ.core.set.has([FQ.set("CSO","LYS"),FQ.ammp("auth_comp_id")]),"atom-test":FQ.core.set.has([FQ.set("OD","NZ"),FQ.ammp("label_atom_id")])}),target:FQ.struct.generator.atomGroups({"residue-test":FQ.core.set.has([FQ.set("CSO","LYS"),FQ.ammp("auth_comp_id")]),"atom-test":FQ.core.set.has([FQ.set("OD","NZ"),FQ.ammp("label_atom_id")])}),"bond-test":!0})])]),{category:P7.Bond}),cee=O7("Non-standard Residues in Polymers",FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"entity-test":FQ.core.rel.eq([FQ.ammp("entityType"),"polymer"]),"chain-test":FQ.core.rel.eq([FQ.ammp("objectPrimitive"),"atomistic"]),"residue-test":FQ.ammp("isNonStandard")})]),{category:P7.Residue}),uee=O7("Coarse Elements",FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"chain-test":FQ.core.set.has([FQ.set("sphere","gaussian"),FQ.ammp("objectPrimitive")])})]),{category:P7.Type}),dee=O7("Rings in Residues",FQ.struct.modifier.union([FQ.struct.generator.rings()]),{category:P7.Residue}),Aee=O7("Aromatic Rings in Residues",FQ.struct.modifier.union([FQ.struct.generator.rings({"only-aromatic":!0})]),{category:P7.Residue}),fee=O7("Surrounding Residues (5 \u212b) of Selection",FQ.struct.modifier.union([FQ.struct.modifier.exceptBy({0:FQ.struct.modifier.includeSurroundings({0:FQ.internal.generator.current(),radius:5,"as-whole-residues":!0}),by:FQ.internal.generator.current()})]),{description:"Select residues within 5 \u212b of the current selection.",category:P7.Manipulate,referencesCurrent:!0}),pee=O7("Surrounding Ligands (5 \u212b) of Selection",FQ.struct.modifier.union([FQ.struct.modifier.surroundingLigands({0:FQ.internal.generator.current(),radius:5,"include-water":!0})]),{description:"Select ligand components within 5 \u212b of the current selection.",category:P7.Manipulate,referencesCurrent:!0}),hee=O7("Surrounding Atoms (5 \u212b) of Selection",FQ.struct.modifier.union([FQ.struct.modifier.exceptBy({0:FQ.struct.modifier.includeSurroundings({0:FQ.internal.generator.current(),radius:5,"as-whole-residues":!1}),by:FQ.internal.generator.current()})]),{description:"Select atoms within 5 \u212b of the current selection.",category:P7.Manipulate,referencesCurrent:!0}),gee=O7("Inverse / Complement of Selection",FQ.struct.modifier.union([FQ.struct.modifier.exceptBy({0:FQ.struct.generator.all(),by:FQ.internal.generator.current()})]),{description:"Select everything not in the current selection.",category:P7.Manipulate,referencesCurrent:!0}),mee=O7("Residues Covalently Bonded to Selection",FQ.struct.modifier.union([FQ.struct.modifier.includeConnected({0:FQ.internal.generator.current(),"layer-count":1,"as-whole-residues":!0})]),{description:"Select residues covalently bonded to current selection.",category:P7.Manipulate,referencesCurrent:!0}),yee=O7("Covalently Bonded Component",FQ.struct.modifier.union([FQ.struct.modifier.includeConnected({0:FQ.internal.generator.current(),"fixed-point":!0})]),{description:"Select covalently bonded component based on current selection.",category:P7.Manipulate,referencesCurrent:!0}),vee=O7("Residues with Cov. or Metallic Bond to Selection",FQ.struct.modifier.union([FQ.struct.modifier.includeConnected({0:FQ.internal.generator.current(),"layer-count":1,"as-whole-residues":!0,"bond-test":FQ.core.flags.hasAny([FQ.struct.bondProperty.flags(),FQ.core.type.bitflags([3])])})]),{description:"Select residues with covalent or metallic bond to current selection.",category:P7.Manipulate,referencesCurrent:!0}),bee=O7("Whole Residues of Selection",FQ.struct.modifier.union([FQ.struct.modifier.wholeResidues({0:FQ.internal.generator.current()})]),{description:"Expand current selection to whole residues.",category:P7.Manipulate,referencesCurrent:!0});[[["HIS"],"Histidine"],[["ARG"],"Arginine"],[["LYS"],"Lysine"],[["ILE"],"Isoleucine"],[["PHE"],"Phenylalanine"],[["LEU"],"Leucine"],[["TRP"],"Tryptophan"],[["ALA"],"Alanine"],[["MET"],"Methionine"],[["PRO"],"Proline"],[["CYS"],"Cysteine"],[["ASN"],"Asparagine"],[["VAL"],"Valine"],[["GLY"],"Glycine"],[["SER"],"Serine"],[["GLN"],"Glutamine"],[["TYR"],"Tyrosine"],[["ASP"],"Aspartic Acid"],[["GLU"],"Glutamic Acid"],[["THR"],"Threonine"],[["SEC"],"Selenocysteine"],[["PYL"],"Pyrrolysine"],[["UNK"],"Unknown"]].sort(((e,t)=>e[1]<t[1]?-1:e[1]>t[1]?1:0)),[[["A","DA"],"Adenosine"],[["C","DC"],"Cytidine"],[["T","DT"],"Thymidine"],[["G","DG"],"Guanosine"],[["I","DI"],"Inosine"],[["U","DU"],"Uridine"],[["N","DN"],"Unknown"]].sort(((e,t)=>e[1]<t[1]?-1:e[1]>t[1]?1:0));$Q.unionMany(EM,_M,SM,IM);const Cee={all:F7,current:N7,polymer:L7,trace:U7,backbone:H7,sidechain:V7,sidechainWithTrace:q7,protein:Y7,nucleic:X7,helix:W7,beta:K7,water:J7,ion:Z7,lipid:$7,branched:eee,branchedPlusConnected:tee,branchedConnectedOnly:nee,ligand:ree,ligandPlusConnected:oee,ligandConnectedOnly:iee,connectedOnly:aee,disulfideBridges:see,nosBridges:lee,nonStandardPolymer:cee,coarse:uee,ring:dee,aromaticRing:Aee,surroundings:fee,surroundingLigands:pee,surroundingAtoms:hee,complement:gee,covalentlyBonded:mee,covalentlyOrMetallicBonded:vee,covalentlyBondedComponent:yee,wholeResidues:bee};const Iee={get preferWebGl1(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;if(["Version/15.1 Safari","Version/15.2 Safari","Version/15.3 Safari"].some((e=>navigator.userAgent.indexOf(e)>0)))return!0;const e=/iPad|iPhone|iPod/.test(navigator.userAgent),t=navigator.userAgent.includes("Macintosh"),n=navigator.maxTouchPoints>=4;return!window.MSStream&&(e||t&&n)}};class Eee{toString(){return this.key}valueOf(){return this.key}constructor(e,t){this.key=e,this.defaultValue=t}}function xee(e,t){return new Eee(e,t)}const Bee={item:xee,General:{IsBusyTimeoutMs:xee("plugin-config.is-busy-timeout",750),DisableAntialiasing:xee("plugin-config.disable-antialiasing",!1),DisablePreserveDrawingBuffer:xee("plugin-config.disable-preserve-drawing-buffer",!1),PixelScale:xee("plugin-config.pixel-scale",1),PickScale:xee("plugin-config.pick-scale",.25),Transparency:xee("plugin-config.transparency","wboit"),PreferWebGl1:xee("plugin-config.prefer-webgl1",Iee.preferWebGl1),AllowMajorPerformanceCaveat:xee("plugin-config.allow-major-performance-caveat",!1),PowerPreference:xee("plugin-config.power-preference","high-performance")},State:{DefaultServer:xee("plugin-state.server","https://webchem.ncbr.muni.cz/molstar-state"),CurrentServer:xee("plugin-state.server","https://webchem.ncbr.muni.cz/molstar-state"),HistoryCapacity:xee("history-capacity.server",5)},VolumeStreaming:{Enabled:xee("volume-streaming.enabled",!0),DefaultServer:xee("volume-streaming.server","https://ds.litemol.org"),CanStream:xee("volume-streaming.can-stream",((e,t)=>1===e.models.length&&Wj.probablyHasDensityMap(e.models[0]))),EmdbHeaderServer:xee("volume-streaming.emdb-header-server","https://files.wwpdb.org/pub/emdb/structures")},Viewport:{ShowExpand:xee("viewer.show-expand-button",!0),ShowControls:xee("viewer.show-controls-button",!0),ShowSettings:xee("viewer.show-settings-button",!0),ShowSelectionMode:xee("viewer.show-selection-model-button",!0),ShowAnimation:xee("viewer.show-animation-button",!0),ShowTrajectoryControls:xee("viewer.show-trajectory-controls",!0)},Download:{DefaultPdbProvider:xee("download.default-pdb-provider","pdbe"),DefaultEmdbProvider:xee("download.default-emdb-provider","pdbe")},Structure:{SizeThresholds:xee("structure.size-thresholds",aG.DefaultSizeThresholds),DefaultRepresentationPreset:xee("structure.default-representation-preset","auto"),DefaultRepresentationPresetParams:xee("structure.default-representation-preset-params",{}),SaccharideCompIdMapType:xee("structure.saccharide-comp-id-map-type","default")},Background:{Styles:xee("background.styles",[])}};function wee(e,t,n,r){let o=0;const{webgl:i}=t,a=new JS,s=new b6.GeometryState,l=lJ(),c=[],u=Ute.create();let d,A,f,p,h=v5.createEmpty();function g(e){if(Ute.update(u,e),void 0!==e.visible&&d&&d.setVisibility(e.visible&&(null===u.unitTransforms||u.unitTransforms.isIdentity)),void 0!==e.alphaFactor&&d&&d.setAlphaFactor(e.alphaFactor),void 0!==e.pickable&&d&&d.setPickable(e.pickable),void 0!==e.overpaint&&d){const t=R5.remap(e.overpaint,A);d.setOverpaint(t,i)}if(void 0!==e.transparency&&d){const t=P5.remap(e.transparency,A);d.setTransparency(t,i)}if(void 0!==e.emissive&&d){const t=g6.remap(e.emissive,A);d.setEmissive(t,i)}if(void 0!==e.substance&&d){const t=h6.remap(e.substance,A);d.setSubstance(t,i)}if(void 0!==e.clipping&&d){const t=p6.remap(e.clipping,A);d.setClipping(t)}void 0!==e.themeStrength&&d&&d.setThemeStrength(e.themeStrength),void 0!==e.transform&&d&&d.setTransform(e.transform),void 0!==e.unitTransforms&&d&&d.setVisibility(u.visible&&(null===e.unitTransforms||e.unitTransforms.isIdentity))}return{label:e,get groupCount(){return d?d.groupCount:0},get props(){return p},get params(){return f},get state(){return u},get theme(){return h},get geometryVersion(){return s.version},renderObjects:c,updated:a,createOrUpdate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=arguments.length>1?arguments[1]:void 0;return m&&m!==A&&(f=n(t,m),A=m,p||(p=U_.getDefaultValues(f))),p=Object.assign({},p,e),Tw.create("Creating or updating ComplexRepresentation",(async e=>{var t;let n=!1;d?(null===(t=d.mustRecreate)||void 0===t?void 0:t.call(d,A,p,i))&&(d.destroy(),d=r(l,A,p,i),n=!0):(d=r(l,A,p,i),n=!0);const f=d.createOrUpdate({webgl:i,runtime:e},h,p,m);f&&await f,n&&g(u),c.length=0,d&&d.renderObject&&(c.push(d.renderObject),s.add(d.renderObject.id,d.geometryVersion)),s.snapshot(),o+=1,a.next(o)}))},setState:g,setTheme:function(e){h=e},getLoci:function(e){return d?d.getLoci(e):S5},getAllLoci:function(){var e;return[aG.Loci(null!==(e=A.child)&&void 0!==e?e:A)]},eachLocation:function(e){null===d||void 0===d||d.eachLocation(e)},mark:function(e,t){if(!A)return!1;if(!C5.is(u.markerActions,t))return!1;if(aG.isLoci(e)||cG.is(e)||RP.isLoci(e)){if(!aG.areRootsEquivalent(e.structure,A))return!1;e=Q5.remap(e,A),(aG.isLoci(e)||cG.is(e)&&cG.isWholeStructure(e))&&(e=w5)}else if(!_5(e)&&!T5(e))return!1;return!Q5.isEmpty(e)&&(!!d&&d.mark(e,t))},destroy:function(){d&&d.destroy()}}}function _ee(e,t){return e.model.atomicHierarchy.atoms.type_symbol.value(e.elements[t])}function See(e,t){return e.model.atomicHierarchy.atoms.pdbx_formal_charge.value(e.elements[t])}function Dee(e,t){return e.model.atomicHierarchy.atoms.label_atom_id.value(e.elements[t])}function Tee(e,t){return e.model.atomicHierarchy.atoms.label_alt_id.value(e.elements[t])}function kee(e,t){return e.model.atomicHierarchy.atoms.label_comp_id.value(e.elements[t])}function Qee(e,t,n){return function(e,t,n){let r=0;const o=e.interUnitBonds.getEdgeIndices(n,t.id);for(let i=0,a=o.length;i<a;++i){const t=e.interUnitBonds.edges[o[i]];VM.isCovalent(t.props.flag)&&(r+=1)}return r}(e,t,n)+function(e,t){let n=0;const{offset:r,edgeProps:{flags:o}}=e.bonds;for(let i=r[t],a=r[t+1];i<a;++i)VM.isCovalent(o[i])&&(n+=1);return n}(t,n)}function Mee(e,t,n,r){let o=0;return Oee(e,t,n,((e,t)=>{_ee(e,t)===r&&(o+=1)})),o}function Ree(e,t,n,r,o){return t===r?function(e,t,n){const{offset:r,b:o,edgeProps:{flags:i}}=e.bonds;VM.is;for(let a=r[t],s=r[t+1];a<s;++a)if(o[a]===n&&VM.isCovalent(i[a]))return!0;return!1}(t,n,o):function(e,t,n,r,o){const i=e.interUnitBonds.getEdge(n,t.id,o,r.id);return i&&VM.isCovalent(i.props.flag)}(e,t,n,r,o)}function Pee(e,t,n){const{offset:r,b:o,edgeProps:{flags:i}}=e.bonds;for(let a=r[t],s=r[t+1];a<s;++a)VM.isCovalent(i[a])&&n(e,o[a])}function Oee(e,t,n,r){!function(e,t,n,r){const o=e.interUnitBonds.getEdgeIndices(n,t.id);for(let i=0,a=o.length;i<a;++i){const t=e.interUnitBonds.edges[o[i]],n=e.unitMap.get(t.unitB);VM.isCovalent(t.props.flag)&&r(n,t.indexB)}}(e,t,n,r),Pee(t,n,r)}function Fee(e,t,n){return"S"===_ee(t,n)&&3===Mee(e,t,n,"O")}function Nee(e,t,n){return"S"===_ee(t,n)&&4===Mee(e,t,n,"O")}function Lee(e,t,n){return"P"===_ee(t,n)&&Mee(e,t,n,"O")===Qee(e,t,n)}function Uee(e,t,n){let r=0;return"C"===_ee(t,n)&&2===Mee(e,t,n,"O")&&1===Mee(e,t,n,"C")&&Oee(e,t,n,((t,n)=>{"O"===_ee(t,n)&&Qee(e,t,n)-Mee(e,t,n,"H")===1&&(r+=1)})),2===r}function Gee(e,t,n){let r=0;return"C"===_ee(t,n)&&3===Qee(e,t,n)&&3===Mee(e,t,n,"N")&&Oee(e,t,n,((t,n)=>{Qee(e,t,n)-Mee(e,t,n,"H")===1&&(r+=1)})),2===r}function jee(e,t,n){let r=0;return"C"===_ee(t,n)&&3===Qee(e,t,n)&&2===Mee(e,t,n,"N")&&1===Mee(e,t,n,"C")&&Oee(e,t,n,((t,n)=>{Qee(e,t,n)-Mee(e,t,n,"H")===1&&(r+=1)})),2===r}const zee=new Set(["N","O","S","F","CL","BR","I"]);function Hee(e,t,n){let r=!1;return Oee(e,t,n,((e,t)=>{(function(e){return zee.has(e)})(_ee(e,t))&&(r=!0)})),r}const Vee=Yh.toArray;function qee(e,t,n){const{elements:r,model:o}=t;if(-1!==ey.indexOf(r,n)){const{index:i,offsets:a}=o.atomicHierarchy.residueAtomSegments,s=i[n],l=[];for(let e=a[s],t=a[s+1];e<t;++e){const t=ey.indexOf(r,e);-1!==t&&l.push(t)}return cG(e,[{unit:t,indices:ey.ofSortedArray(Em.ofSortedArray(l))}])}return S5}function Yee(e,t,n,r){const{elements:o,model:i}=t,{label_alt_id:a}=i.atomicHierarchy.atoms,{offsets:s}=i.atomicHierarchy.residueAtomSegments,l=[];for(let c=s[n],u=s[n+1];c<u;++c){const e=ey.indexOf(o,c);if(-1!==e){const t=a.value(c);r!==t&&""!==t||l.push(e)}}return cG(e,[{unit:t,indices:ey.ofSortedArray(Em.ofSortedArray(l))}])}function Xee(e,t,n,r,o,i){const{child:a}=e.structure,s=t&&a?e.group.units.filter((e=>a.unitMap.has(e.id))):e.group.units,l=s.length,c=16*l,u=i&&i.aTransform.ref.value.length>=c?i.aTransform.ref.value:new Float32Array(c);for(let d=0;d<l;d++)Vee(s[d].conformation.operator.matrix,u,16*d);return hk(u,l,n,r,o,i)}const Wee=U_.objectToOptions({atomic:{},spheres:{},gaussians:{}});const Kee=5e8;function Jee(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kee;const r=XT.size(qh(),e);qh.ceil(r,r),r.sort(((e,t)=>t-e));const o=Math.floor(Math.cbrt(n)*Math.cbrt(n)),i=r[0]*r[1];return{area:i,areaCells:Math.ceil(i/(t*t)),maxAreaCells:o}}function Zee(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kee;const{area:r,areaCells:o,maxAreaCells:i}=Jee(e,t.resolution,n),a=o>i?Math.sqrt(r/i):t.resolution;return{...t,resolution:a}}const $ee={ignoreHydrogens:U_.Boolean(!1,{description:"Whether or not to include hydrogen atoms in the surface calculation."}),ignoreHydrogensVariant:U_.Select("all",U_.arrayToOptions(["all","non-polar"])),traceOnly:U_.Boolean(!1,{description:"Whether or not to only use trace atoms in the surface calculation."}),includeParent:U_.Boolean(!1,{description:"Include elements of the parent structure in surface calculation to get a surface patch of the current structure."})},ete=(U_.getDefaultValues($ee),qh());function tte(e,t,n,r){return qh.squaredDistance(qh.set(ete,e,t,n),r)}function nte(e,t,n,r){const{ignoreHydrogens:o,ignoreHydrogensVariant:i,traceOnly:a,includeParent:s}=r,l=s?e.root.unitMap.get(t.id):t,c=s&&l!==t,{x:u,y:d,z:A}=function(e){switch(e.kind){case 0:return e.model.atomicConformation;case 1:return e.model.coarseConformation.spheres;case 2:return e.model.coarseConformation.gaussians}}(l),{elements:f}=l,{center:p,radius:h}=t.boundary.sphere,g=(h+11)*(h+11);let m,y;if(o||a||c){const t=[],n=[];for(let r=0,s=f.length;r<s;++r){const s=f[r];o&&ite(e,l,s,i)||(a&&!ste(l,s)||c&&tte(u[s],d[s],A[s],p)>g||(t.push(s),n.push(r)))}m=Em.ofSortedArray(t),y=n}else m=f,y=Z_(new Int32Array(m.length));s&&l!==t&&function(e,t,n){let r=0;const o=t.length;for(let i=0,a=n.length;i<a;++i){const a=Em.indexOfInRange(t,n[i],r,o);-1===a?e[i]=-2:(e[i]=a,r=a)}}(y,t.elements,m);const v={indices:m,x:u,y:d,z:A,id:y},b=c?bO(v):t.boundary,C=Vk.create(e,l);return{position:v,boundary:b,radius:e=>(C.element=e,n.size(C))}}function rte(e,t,n){const{ignoreHydrogens:r,ignoreHydrogensVariant:o,traceOnly:i,includeParent:a}=n,s=a&&!!e.parent,l=Vk.create(e.root),{center:c,radius:u}=e.boundary.sphere,d=(u+11)*(u+11);let A,f,p,h,g,m;if(r||i||s){const{getSerialIndex:n}=e.serialMapping,a=s?e.root.units:e.units,u=[],y=[],v=[],b=[],C=[];for(let A=0,f=a.length;A<f;++A){const f=a[A],{elements:p,conformation:h}=f,g=e.unitMap.get(f.id);l.unit=f;for(let a=0,A=p.length;a<A;++a){const A=p[a];if(r&&ite(e,f,A,o))continue;if(i&&!ste(f,A))continue;const m=h.x(A),I=h.y(A),E=h.z(A);if(!(s&&tte(m,I,E,c)>d))if(u.push(m),y.push(I),v.push(E),l.element=A,b.push(t.size(l)),s){-1===(g?Em.indexOf(g.elements,A):-1)?C.push(-2):C.push(n(g,A))}else C.push(n(f,A))}}A=u,f=y,p=v,h=b,g=C,m=ey.ofRange(0,g.length)}else{const{elementCount:n}=e,r=new Float32Array(n),o=new Float32Array(n),i=new Float32Array(n),a=new Float32Array(n);for(let s=0,c=0,u=e.units.length;s<u;++s){const n=e.units[s],{elements:u,conformation:d}=n;l.unit=n;for(let e=0,s=u.length;e<s;++e){const n=u[e],s=c+e;r[s]=d.x(n),o[s]=d.y(n),i[s]=d.z(n),l.element=n,a[s]=t.size(l)}c+=u.length}A=r,f=o,p=i,h=a,g=Z_(new Uint32Array(n)),m=ey.ofRange(0,g.length)}const y={indices:m,x:A,y:f,z:p,id:g};return{position:y,boundary:s?bO(y):e.boundary,radius:e=>h[e]}}const ote=QN.H;function ite(e,t,n,r){if(BO.isCoarse(t))return!1;if(t.model.atomicHierarchy.derived.atom.atomicNumber[n]!==ote)return!1;if("all"===r)return!0;const o=Hee(e,t,Em.indexOf(t.elements,n));return!(!o||"polar"!==r)||!o&&"non-polar"===r}function ate(e,t){return e[t]===ote}function ste(e,t){if(BO.isCoarse(e))return!0;const n=e.model.atomicHierarchy.atoms.label_atom_id.value(t);return"CA"===n||"BB"===n||"P"===n}function lte(e){return U_.MultiSelect(e,Wee,{description:"For which kinds of units/chains to show the representation visuals."})}const cte={unitKinds:lte(["atomic","spheres"]),includeParent:U_.Boolean(!1,{isHidden:!0})},ute={...RY.Params},dte={...XW.Params},Ate={...zK.Params},fte={...dW.Params},pte={...wW.Params},hte={...yW.Params},gte={...YW.Params},mte={...WW.Params};function yte(e,t){const{defaultProps:n,createGeometry:r,createLocationIterator:o,getLoci:i,eachLocation:a,setUpdateState:s,mustRecreate:l,processValues:c,dispose:u}=e,{updateValues:d,updateBoundingSphere:A,updateRenderableState:f,createPositionIterator:p}=e.geometryUtils,h=M5.create(),g={loci:S5,action:b5.None,status:-1};let m,y,v,b,C,I,E,x,B=Object.assign({},n),w=v5.createEmpty(),_=-1;function S(e){if(h.createNew){if(E=o(b,y),!e)throw new Error("expected geometry to be given");m=function(e,t,n,r,o,i){const{createValues:a,createRenderableState:s}=HK.getUtils(t),l=a(t,mk(),n,r,o),c=s(o);return cJ(t.kind,l,c,i)}(0,e,E,v,y,t),x=p(e,m.values)}else{if(!m)throw new Error("expected renderObject to be available");if((h.updateColor||h.updateSize||h.updateTransform)&&(E=o(b,y)),h.updateTransform){const{instanceCount:e,groupCount:t}=E;y.instanceGranularity?wV(e,"instance",m.values):wV(e*t,"groupInstance",m.values)}if(h.createGeometry){if(!e)throw new Error("expected geometry to be given");Sp.updateIfChanged(m.values.drawCount,HK.getDrawCount(e)),Sp.updateIfChanged(m.values.uVertexCount,HK.getVertexCount(e)),Sp.updateIfChanged(m.values.uGroupCount,HK.getGroupCount(e))}(h.updateTransform||h.createGeometry)&&(A(m.values,e||I),x=p(I,m.values)),h.updateSize&&"uSize"in m.values&&iW(E,v.size,m.values),h.updateColor&&dY(E,x,v.color,m.values),d(m.values,y),f(m.state,y)}B=y,w=v,C=b,e&&(I=e,_+=1)}function D(e,t,n){return function(e){return!!_5(e)||!(!aG.isLoci(e)||!aG.areRootsEquivalent(e.structure,C))||!!(cG.is(e)&&aG.areRootsEquivalent(e.structure,C)&&cG.isWholeStructure(e))}(e)?B.instanceGranularity?t(Gg.ofBounds(0,E.instanceCount)):t(Gg.ofBounds(0,E.groupCount*E.instanceCount)):B.instanceGranularity?function(e,t,n){let r=!1;return!(!cG.is(e)&&!RP.isLoci(e))&&!!aG.areEquivalent(e.structure,t)&&(n(Gg.ofSingleton(0))&&(r=!0),r)}(e,C,t):a(e,C,t,n)}function T(e){m&&(null===c||void 0===c||c(m.values,I,B,w,e.webgl))}return{get groupCount(){return E?E.count:0},get renderObject(){return E&&E.count?m:void 0},get geometryVersion(){return _},createOrUpdate(e,t){if(function(e,t,n){if(!n&&!C)throw new Error("missing structure");if(y=Object.assign({},B,t),v=e,b=n,M5.reset(h),!m||!C)return h.createNew=!0,void(h.createGeometry=!0);s(h,y,B,v,w,b,C),aG.areEquivalent(b,C)||(h.createGeometry=!0),aG.areHierarchiesEqual(b,C)||(h.updateTransform=!0,h.createGeometry=!0),d5.areEqual(e.color,w.color)||(h.updateColor=!0),y5.areEqual(e.size,w.size)||(h.updateSize=!0),Qp(y.unitKinds,B.unitKinds)||(h.createGeometry=!0),C.child!==b.child&&(h.createGeometry=!0),y.instanceGranularity!==B.instanceGranularity&&(h.updateTransform=!0),h.updateSize&&!("uSize"in m.values)&&(h.createGeometry=!0),h.createGeometry&&(h.updateColor=!0,h.updateSize=!0)}(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},(arguments.length>3?arguments[3]:void 0)||C),h.createGeometry){const t=r(e,b,v,y,I);if($h(t))return t.then((t=>{S(t),T(e)}));S(t)}else S();T(e)},getLoci:e=>m?i(e,C,m.id):S5,eachLocation(e){for(E.reset();E.hasNext;){const{location:t,isSecondary:n}=E.move();e(t,n)}},mark:(e,t)=>A6.mark(m,e,t,D,g),setVisibility(e){A6.setVisibility(m,e)},setAlphaFactor(e){A6.setAlphaFactor(m,e)},setPickable(e){A6.setPickable(m,e)},setColorOnly(e){A6.setColorOnly(m,e)},setTransform(e,t){A6.setTransform(m,e,t)},setOverpaint(e,t){const n={geometry:I,props:B,webgl:t};A6.setOverpaint(m,e,D,!0,n)},setTransparency(e,t){const n={geometry:I,props:B,webgl:t};A6.setTransparency(m,e,D,!0,n)},setEmissive(e,t){const n={geometry:I,props:B,webgl:t};A6.setEmissive(m,e,D,!0,n)},setSubstance(e,t){const n={geometry:I,props:B,webgl:t};A6.setSubstance(m,e,D,!0,n)},setClipping(e){A6.setClipping(m,e,D,!0)},setThemeStrength(e){A6.setThemeStrength(m,e)},destroy(){null===u||void 0===u||u(I),m&&(m.state.disposed=!0,m=void 0)},mustRecreate:l}}const vte={...ute,...cte};function bte(e,t){return yte({...e,setUpdateState:(t,n,r,o,i,a,s)=>{e.setUpdateState(t,n,r,o,i,a,s),y5.areEqual(o.size,i.size)||(t.createGeometry=!0)},geometryUtils:RY.Utils},t)}const Cte={...dte,...cte};const Ite={...Ate,...cte};const Ete={...pte,...cte};const xte={...hte,...cte};const Bte={...gte,...cte};const wte={...mte,...cte};function _te(e,t,n,r){let o=0;const{webgl:i}=t,a=new JS,s=lJ(),l=[],c=new b6.GeometryState,u=Ute.create();let d,A,f,p,h=new Map,g=v5.createEmpty();function m(e,t,n){const{visible:r,alphaFactor:o,pickable:a,overpaint:s,transparency:l,emissive:c,substance:d,clipping:A,themeStrength:f,transform:p,unitTransforms:h}=n;void 0!==r&&e.setVisibility(r),void 0!==o&&e.setAlphaFactor(o),void 0!==a&&e.setPickable(a),void 0!==s&&e.setOverpaint(s,i),void 0!==l&&e.setTransparency(l,i),void 0!==c&&e.setEmissive(c,i),void 0!==d&&e.setSubstance(d,i),void 0!==A&&e.setClipping(A),void 0!==f&&e.setThemeStrength(f),void 0!==p&&(p===u.transform&&Yh.areEqual(p,u.transform,zh)||e.setTransform(p)),void 0!==h&&(h?e.setTransform(void 0,h.getSymmetryGroupTransforms(t)):h!==u.unitTransforms&&e.setTransform(void 0,null))}return{label:e,get groupCount(){let e=0;return h.forEach((t=>{let{visual:n}=t;n.renderObject&&(e+=n.groupCount)})),e},get geometryVersion(){return c.version},get props(){return p},get params(){return f},get state(){return u},get theme(){return g},renderObjects:l,updated:a,createOrUpdate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},y=arguments.length>1?arguments[1]:void 0;return y&&y!==d&&(f=n(t,y),p||(p=U_.getDefaultValues(f))),p=Object.assign({},p,e),Tw.create("Creating or updating UnitsRepresentation",(async e=>{var n,f,v;if(!d&&!y)throw new Error("missing structure");if(y&&!d){A=y.unitSymmetryGroups;for(let t=0;t<A.length;t++){const n=A[t],o=r(s,y,p,i),a=o.createOrUpdate({webgl:i,runtime:e},g,p,{group:n,structure:y});a&&await a,m(o,n,u),h.set(n.hashCode,{visual:o,group:n}),e.shouldUpdate&&await e.update({message:"Creating or updating UnitsVisual",current:t,max:A.length})}}else if(!y||aG.areUnitIdsAndIndicesEqual(y,d)&&y.child===d.child)if(y&&y!==d&&aG.areUnitIdsAndIndicesEqual(y,d)){A=y.unitSymmetryGroups;for(let n=0;n<A.length;n++){const o=A[n],a=h.get(o.hashCode);if(!a)throw new Error(`expected to find visual for hashCode ${o.hashCode}`);{let{visual:n}=a;if(null===(f=n.mustRecreate)||void 0===f?void 0:f.call(n,{group:o,structure:y},p,t.webgl)){n.destroy(),n=r(s,y,p,t.webgl),a.visual=n;const l=n.createOrUpdate({webgl:i,runtime:e},g,p,{group:o,structure:y});l&&await l,m(n,o,u)}else{const t=n.createOrUpdate({webgl:i,runtime:e},g,p,{group:o,structure:y});t&&await t}a.group=o}e.shouldUpdate&&await e.update({message:"Creating or updating UnitsVisual",current:n,max:A.length})}}else{const n=[];h.forEach((e=>n.push(e)));for(let o=0,a=n.length;o<a;++o){let{visual:l,group:c}=n[o];if(null===(v=l.mustRecreate)||void 0===v?void 0:v.call(l,{group:c,structure:d},p,t.webgl)){l.destroy(),l=r(s,d,p,i),n[o].visual=l;const t=l.createOrUpdate({webgl:i,runtime:e},g,p,{group:c,structure:d});t&&await t,m(l,c,u)}else{const t=l.createOrUpdate({webgl:i,runtime:e},g,p);t&&await t}e.shouldUpdate&&await e.update({message:"Creating or updating UnitsVisual",current:o,max:a})}}else{A=y.unitSymmetryGroups;const t=h;h=new Map;for(let o=0;o<A.length;o++){const a=A[o],l=t.get(a.hashCode);if(l){let{visual:o}=l;if(null===(n=o.mustRecreate)||void 0===n?void 0:n.call(o,{group:a,structure:y},p,i)){o.destroy(),o=r(s,y,p,i);const t=o.createOrUpdate({webgl:i,runtime:e},g,p,{group:a,structure:y});t&&await t,m(o,a,u)}else{const t=o.createOrUpdate({webgl:i,runtime:e},g,p,{group:a,structure:y});t&&await t}if(h.set(a.hashCode,{visual:o,group:a}),t.delete(a.hashCode),o.renderObject){const e=o.renderObject.values.tMarker.ref.value.array;B5(e,Gg.ofBounds(0,e.length),b5.RemoveHighlight)}}else{const t=r(s,y,p,i),n=t.createOrUpdate({webgl:i,runtime:e},g,p,{group:a,structure:y});n&&await n,m(t,a,u),h.set(a.hashCode,{visual:t,group:a})}e.shouldUpdate&&await e.update({message:"Creating or updating UnitsVisual",current:o,max:A.length})}t.forEach((e=>{let{visual:t}=e;t.destroy()}))}l.length=0,h.forEach((e=>{let{visual:t}=e;t.renderObject&&(l.push(t.renderObject),c.add(t.renderObject.id,t.geometryVersion))})),c.snapshot(),y&&(d=y),a.next(o++)}))},setState:function(e){const{visible:t,alphaFactor:n,pickable:r,overpaint:o,transparency:i,emissive:a,substance:s,clipping:l,themeStrength:c,transform:A,unitTransforms:f,syncManually:p,markerActions:g}=e,y={};void 0!==t&&(y.visible=t),void 0!==n&&(y.alphaFactor=n),void 0!==r&&(y.pickable=r),void 0!==o&&d&&(y.overpaint=R5.remap(o,d)),void 0!==i&&d&&(y.transparency=P5.remap(i,d)),void 0!==a&&d&&(y.emissive=g6.remap(a,d)),void 0!==s&&d&&(y.substance=h6.remap(s,d)),void 0!==l&&d&&(y.clipping=p6.remap(l,d)),void 0!==c&&(y.themeStrength=c),void 0===A||Yh.areEqual(A,u.transform,zh)||(y.transform=A),f===u.unitTransforms&&(null===f||void 0===f?void 0:f.version)===u.unitTransformsVersion||(y.unitTransforms=f,u.unitTransformsVersion=f?null===f||void 0===f?void 0:f.version:-1),void 0!==p&&(y.syncManually=p),void 0!==g&&(y.markerActions=g),h.forEach((e=>{let{visual:t,group:n}=e;return m(t,n,y)})),Ute.update(u,y)},setTheme:function(e){g=e},getLoci:function(e){let t=S5;return h.forEach((n=>{let{visual:r}=n;const o=r.getLoci(e);D5(o)||(t=o)})),t},getAllLoci:function(){var e;return[aG.Loci(null!==(e=d.child)&&void 0!==e?e:d)]},eachLocation:function(e){h.forEach((t=>{let{visual:n}=t;n.eachLocation(e)}))},mark:function(e,t){if(!d)return!1;if(!C5.is(u.markerActions,t))return!1;if(aG.isLoci(e)||cG.is(e)||RP.isLoci(e)){if(!aG.areRootsEquivalent(e.structure,d))return!1;e=Q5.remap(e,d),(aG.isLoci(e)||cG.is(e)&&cG.isWholeStructure(e))&&(e=w5)}else if(!_5(e)&&!T5(e))return!1;if(Q5.isEmpty(e))return!1;let n=!1;return h.forEach((r=>{let{visual:o}=r;n=o.mark(e,t)||n})),n},destroy:function(){h.forEach((e=>{let{visual:t}=e;return t.destroy()})),h.clear()}}}function Ste(e,t){const{defaultProps:n,createGeometry:r,createLocationIterator:o,getLoci:i,eachLocation:a,setUpdateState:s,mustRecreate:l,processValues:c,dispose:u}=e,{createEmpty:d,updateValues:A,updateBoundingSphere:f,updateRenderableState:p,createPositionIterator:h}=e.geometryUtils,g=M5.create(),m={loci:S5,action:b5.None,status:-1};let y,v,b,C,I,E,x,B,w=Object.assign({},n),_=v5.createEmpty(),S=-1;function D(e){if(g.createNew){if(x=o(v,w),!e)throw new Error("expected geometry to be given");y=function(e,t,n,r,o,i){const{createValues:a,createRenderableState:s}=HK.getUtils(t),l=a(t,Xee(e,o.includeParent,t.boundingSphere,o.cellSize,o.batchSize),n,r,o),c=s(o);return cJ(t.kind,l,c,i)}(v,e,x,_,w,t),B=h(e,y.values)}else{if(!y)throw new Error("expected renderObject to be available");if((g.updateColor||g.updateSize||g.updateTransform)&&(x=o(v,w)),g.updateTransform){const{instanceCount:e,groupCount:t}=x;w.instanceGranularity?wV(e,"instance",y.values):wV(e*t,"groupInstance",y.values)}if(g.updateMatrix&&(Xee(v,w.includeParent,y.values.invariantBoundingSphere.ref.value,w.cellSize,w.batchSize,y.values),"lodLevels"in y.values&&Sp.update(y.values.lodLevels,y.values.lodLevels.ref.value)),g.createGeometry){if(!e)throw new Error("expected geometry to be given");Sp.updateIfChanged(y.values.drawCount,HK.getDrawCount(e)),Sp.updateIfChanged(y.values.uVertexCount,HK.getVertexCount(e)),Sp.updateIfChanged(y.values.uGroupCount,HK.getGroupCount(e))}(g.updateTransform||g.createGeometry)&&(f(y.values,e||E),B=h(e||E,y.values)),g.updateSize&&"uSize"in y.values&&iW(x,_.size,y.values),g.updateColor&&dY(x,B,_.color,y.values),A(y.values,w),p(y.state,w)}b=w,C=_,I=v,e&&(E=e,S+=1)}function T(e,t,n,o,i,a){return function(e,t){for(let n=0,r=e.length;n<r;++n){if(BO.isAtomic(t)&&"atomic"===e[n])return!0;if(BO.isSpheres(t)&&"spheres"===e[n])return!0;if(BO.isGaussians(t)&&"gaussians"===e[n])return!0}return!1}(i.unitKinds,t)?r(e,t,n,o,i,a):d(a)}function k(e,t,n){return function(e){return!!_5(e)||!(!aG.isLoci(e)||!aG.areRootsEquivalent(e.structure,I.structure))||!!(cG.is(e)&&aG.areRootsEquivalent(e.structure,I.structure)&&cG.isWholeStructure(e))}(e)?b.instanceGranularity?t(Gg.ofBounds(0,x.instanceCount)):t(Gg.ofBounds(0,x.groupCount*x.instanceCount)):b.instanceGranularity?function(e,t,n){let r=!1;if(RP.isLoci(e)){const{structure:o,group:i}=t;if(!aG.areEquivalent(e.structure,o))return!1;for(const t of e.bonds){if(t.aUnit!==t.bUnit)continue;const e=i.unitIndexMap.get(t.aUnit.id);void 0!==e&&n(Gg.ofSingleton(e))&&(r=!0)}}else if(cG.is(e)){const{structure:o,group:i}=t;if(!aG.areEquivalent(e.structure,o))return!1;for(const t of e.elements){const e=i.unitIndexMap.get(t.unit.id);void 0!==e&&n(Gg.ofSingleton(e))&&(r=!0)}}return r}(e,I,t):a(e,I,t,n)}function Q(e){y&&(null===c||void 0===c||c(y.values,E,b,C,e.webgl))}return{get groupCount(){return x?x.count:0},get renderObject(){return x&&x.count?y:void 0},get geometryVersion(){return S},createOrUpdate(e,t,n,r){if(function(e,t,n){if(!n&&!I)throw new Error("missing structureGroup");if(w=t,_=e,v=n,M5.reset(g),!y||!I)return g.createNew=!0,void(g.createGeometry=!0);s(g,w,b,_,C,v,I),aG.areHierarchiesEqual(I.structure,v.structure)||(g.updateTransform=!0,g.updateColor=!0,g.updateSize=!0),d5.areEqual(_.color,C.color)||(g.updateColor=!0),y5.areEqual(_.size,C.size)||(g.updateSize=!0),I.structure.child!==v.structure.child&&(g.createGeometry=!0),w.instanceGranularity===b.instanceGranularity&&w.cellSize===b.cellSize&&w.batchSize===b.batchSize||(g.updateTransform=!0),Qp(w.unitKinds,b.unitKinds)||(g.createGeometry=!0),v.group.transformHash!==I.group.transformHash&&(v.group.units.length!==I.group.units.length||g.updateColor?g.updateTransform=!0:g.updateMatrix=!0);const r=v.group.units[0],o=I.group.units[0];BO.areOperatorsEqual(r,o)||(g.updateTransform=!0),BO.areConformationsEqual(r,o)||(g.createGeometry=!0),g.updateTransform&&(g.updateMatrix=!0),g.updateSize&&!("uSize"in y.values)&&(g.createGeometry=!0),(g.createGeometry||g.updateTransform)&&(I.structure.hashCode!==v.structure.hashCode&&(g.updateColor=!0,g.updateSize=!0),(_.color.granularity.startsWith("vertex")||y.values.dColorType.ref.value.startsWith("vertex")||_.color.granularity.startsWith("volume")||y.values.dColorType.ref.value.startsWith("volume"))&&(g.updateColor=!0))}(t,n,r||I),g.createGeometry){const t=T(e,v.group.units[0],v.structure,_,w,E);if($h(t))return t.then((t=>{D(t),Q(e)}));D(t)}else D();Q(e)},getLoci:e=>y?i(e,I,y.id):S5,eachLocation(e){for(x.reset();x.hasNext;){const{location:t,isSecondary:n}=x.move();e(t,n)}},mark(e,t){let n=!0;if(cG.is(e)){n=!1;const{invariantId:t}=I.group.units[0];for(const r of e.elements)if(r.unit.invariantId===t){n=!0;break}}return!!n&&A6.mark(y,e,t,k,m)},setVisibility(e){A6.setVisibility(y,e)},setAlphaFactor(e){A6.setAlphaFactor(y,e)},setPickable(e){A6.setPickable(y,e)},setColorOnly(e){A6.setColorOnly(y,e)},setTransform(e,t){A6.setTransform(y,e,t)},setOverpaint(e,t){const n={geometry:E,props:b,webgl:t};A6.setOverpaint(y,e,k,!0,n)},setTransparency(e,t){const n={geometry:E,props:b,webgl:t};A6.setTransparency(y,e,k,!0,n)},setEmissive(e,t){const n={geometry:E,props:b,webgl:t};A6.setEmissive(y,e,k,!0,n)},setSubstance(e,t){const n={geometry:E,props:b,webgl:t};A6.setSubstance(y,e,k,!0,n)},setClipping(e){A6.setClipping(y,e,k,!0)},setThemeStrength(e){A6.setThemeStrength(y,e)},destroy(){null===u||void 0===u||u(E),y&&(y.state.disposed=!0,y=void 0)},mustRecreate:l}}const Dte={...ute,...cte};function Tte(e,t){return Ste({...e,setUpdateState:(t,n,r,o,i,a,s)=>{e.setUpdateState(t,n,r,o,i,a,s),y5.areEqual(o.size,i.size)||(t.createGeometry=!0)},geometryUtils:RY.Utils},t)}const kte={...dte,...cte};function Qte(e,t){return Ste({...e,setUpdateState:(t,n,r,o,i,a,s)=>{e.setUpdateState(t,n,r,o,i,a,s),y5.areEqual(o.size,i.size)||(t.updateSize=!0)},geometryUtils:XW.Utils},t)}const Mte={...Ate,...cte};function Rte(e,t){return Ste({...e,setUpdateState:(t,n,r,o,i,a,s)=>{e.setUpdateState(t,n,r,o,i,a,s),y5.areEqual(o.size,i.size)||(t.updateSize=!0)},geometryUtils:zK.Utils},t)}const Pte={...fte,...cte};const Ote={...pte,...cte};function Fte(e,t){return Ste({...e,setUpdateState:(t,n,r,o,i,a,s)=>{e.setUpdateState(t,n,r,o,i,a,s),y5.areEqual(o.size,i.size)||(t.updateSize=!0)},geometryUtils:wW.Utils},t)}const Nte={...gte,...cte};const Lte={...mte,...cte};const Ute={create:()=>({...b6.createState(),unitTransforms:null,unitTransformsVersion:-1}),update:(e,t)=>{b6.updateState(e,t),void 0!==t.unitTransforms&&(e.unitTransforms=t.unitTransforms)}};var Gte;function jte(e){switch(e){case Gte.Spherical:return"Spherical";case Gte.Terminal:return"Terminal";case Gte.Linear:return"Linear";case Gte.Trigonal:return"Trigonal";case Gte.Tetrahedral:return"Tetrahedral";case Gte.TrigonalBiPyramidal:return"Trigonal Bi-Pyramidal";case Gte.Octahedral:return"Octahedral";case Gte.SquarePlanar:return"Square Planar";case Gte.Unknown:return"Unknown"}}function zte(e){switch(e){case 0:return Gte.Spherical;case 1:return Gte.Terminal;case 2:return Gte.Linear;case 3:return Gte.Trigonal;case 4:return Gte.Tetrahedral;default:return Gte.Unknown}}!function(e){e[e.Spherical=0]="Spherical",e[e.Terminal=1]="Terminal",e[e.Linear=2]="Linear",e[e.Trigonal=3]="Trigonal",e[e.Tetrahedral=4]="Tetrahedral",e[e.TrigonalBiPyramidal=5]="TrigonalBiPyramidal",e[e.Octahedral=6]="Octahedral",e[e.SquarePlanar=7]="SquarePlanar",e[e.Unknown=8]="Unknown"}(Gte||(Gte={}));const Hte=new Map([[Gte.Linear,Np(180)],[Gte.Trigonal,Np(120)],[Gte.Tetrahedral,Np(109.4721)],[Gte.Octahedral,Np(90)]]),Vte=qh(),qte=qh(),Yte=qh(),Xte=qh(),Wte=qh();function Kte(e,t,n,r,o){let i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const a=[],s=[];return t.conformation.position(t.elements[n],Yte),r.conformation.position(r.elements[o],Xte),qh.sub(Vte,Xte,Yte),Oee(e,t,n,((e,t)=>{"H"!==_ee(e,t)?(e.conformation.position(e.elements[t],Wte),qh.sub(qte,Wte,Yte),a.push(qh.angle(Vte,qte))):i||(e.conformation.position(e.elements[t],Wte),qh.sub(qte,Wte,Yte),s.push(qh.angle(Vte,qte)))})),[a,s]}function Jte(e,t,n,r,o){t.conformation.position(t.elements[n],Yte),r.conformation.position(r.elements[o],Xte),qh.sub(Vte,Xte,Yte);const i=[qh(),qh()];let a,s,l=0;if(Oee(e,t,n,((e,t)=>{l>1||"H"!==_ee(e,t)&&(a=e,s=t,e.conformation.position(e.elements[t],Wte),qh.sub(i[l++],Wte,Yte))})),1===l&&a&&s&&Oee(e,a,s,((e,r)=>{l>1||e===t&&r===n||"H"!==_ee(e,r)&&(e.conformation.position(e.elements[r],Wte),qh.sub(i[l++],Wte,Yte))})),2===l)return qh.cross(qte,i[0],i[1]),Math.abs(Math.PI/2-qh.angle(qte,Vte))}const Zte=new RP.ElementBondIterator,$te=new RP.ElementBondIterator;const ene=new RP.ElementBondIterator,tne=new RP.ElementBondIterator;function nne(e,t,n,r){const o=Mee(e,t,n,"H"),i=_ee(t,n);let a=See(t,n);const s="always"===r.assignCharge||"auto"===r.assignCharge&&0===a,l="always"===r.assignH||"auto"===r.assignH&&0===o,c=Qee(e,t,n),u=function(e,t,n){let r=0;const{offset:o,edgeProps:{flags:i,order:a}}=t.bonds;for(let s=o[n],l=o[n+1];s<l;++s)VM.isCovalent(i[s])&&(r+=a[s]);return e.interUnitBonds.getEdgeIndices(n,t.id).forEach((t=>{const n=e.interUnitBonds.edges[t];VM.isCovalent(n.props.flag)&&(r+=n.props.order)})),r}(e,t,n),d=function(e,t,n){const r=_ee(t,n),o="O"===r||"N"===r;if(o&&4===Qee(e,t,n))return!1;for(Zte.setElement(e,t,n);Zte.hasNext;){const t=Zte.move();if(t.order>1)return!0;if(o){const n=_ee(t.otherUnit,t.otherIndex);for($te.setElement(e,t.otherUnit,t.otherIndex);$te.hasNext;){const e=$te.move();if(e.order>1){if(("P"===n||"S"===n)&&"O"===_ee(e.otherUnit,e.otherIndex))continue;return!0}}}}return!1}(e,t,n),A=u-c>0;let f=0,p=Gte.Unknown;switch(i){case"H":s&&(0===c?(a=1,p=Gte.Spherical):1===c&&(a=0,p=Gte.Terminal));break;case"C":s&&(a=0),l&&(f=Math.max(0,4-u-Math.abs(a))),p=zte(c+f+Math.max(0,-a));break;case"N":if(s)if(l)if(d&&u<4)a=c-o===1&&u-o===2?1:0;else for(ene.setElement(e,t,n);ene.hasNext;){const e=ene.move(),t=_ee(e.otherUnit,e.otherIndex);if("S"===t||R7(t)){a=0;break}a=1}else a=u-3;l&&(f=Math.max(0,3-u+a)),p=zte(d&&!A?c+f-a:c+f+1-a);break;case"O":if(s&&(l||(a=u-2),1===u)){ene.setElement(e,t,n);e:for(;ene.hasNext;){const r=ene.move();for(tne.setElement(e,r.otherUnit,r.otherIndex);tne.hasNext;){const e=tne.move();if((e.otherUnit!==t||e.otherIndex!==n)&&"O"===_ee(e.otherUnit,e.otherIndex)&&2===e.order){a=-1;break e}}}}l&&(f=Math.max(0,2-u+a)),p=zte(d&&!A?c+f-a+1:c+f-a+2);break;case"S":s&&(l||(a=u<=3&&0===Mee(e,t,n,"O")?u-2:0)),l&&u<2&&(f=Math.max(0,2-u+a)),u<=3&&(p=zte(c+f-a+2));break;case"F":case"CL":case"BR":case"I":case"AT":s&&(a=u-1);break;case"LI":case"NA":case"K":case"RB":case"CS":case"FR":s&&(a=1-u);break;case"BE":case"MG":case"CA":case"SR":case"BA":case"RA":s&&(a=2-u);break;default:Aw&&console.warn("Requested charge, protonation for an unhandled element",i)}return[a,f,f+o,p]}function rne(e,t,n){const r=t.elements.length,o=new Int8Array(r),i=new Int8Array(r),a=new Int8Array(r),s=new Int8Array(r),l=!!e.parent;let c;if(l){const n=e.root.unitMap.get(t.id);if(c=Em.indicesOf(n.elements,t.elements),c.length!==t.elements.length)throw new Error("expected to find an index for every element");t=n,e=e.root}for(let u=0;u<r;++u){const r=l?c[u]:u,[d,A,f,p]=nne(e,t,r,n);o[u]=d,i[u]=A,a[u]=f,s[u]=p}return{charge:o,implicitH:i,totalH:a,idealGeometry:s}}const one={assignCharge:U_.Select("auto",[["always","always"],["auto","auto"],["never","never"]]),assignH:U_.Select("auto",[["always","always"],["auto","auto"],["never","never"]])};async function ine(e,t,n){const r={...U_.getDefaultValues(one),...n},o=new Map;for(let i=0,a=t.units.length;i<a;++i){const e=t.units[i];if(BO.isAtomic(e)){const n=rne(t,e,r);o.set(e.id,n)}}return o}const ane={...one},sne=TL.createProvider({label:"Valence Model",descriptor:Jk({name:"molstar_computed_valence_model"}),type:"local",defaultParams:ane,getParams:e=>ane,isApplicable:e=>!0,obtain:async(e,t,n)=>{const r={...U_.getDefaultValues(ane),...n};return{value:await ine(e.runtime,t,r)}}});var lne,cne,une,dne,Ane,fne,pne,hne,gne;!function(e){function t(e,t){const n=new Int32Array(t+1),r=new Int32Array(t),o=new Int32Array(t),{members:i,count:a,offsets:s}=e;for(let u=0,d=s[a];u<d;++u)++o[i[u]];let l=0;for(let u=0;u<t;u++)n[u]=l,l+=o[u];n[t]=l;const c=new Int32Array(l);for(let u=0;u<a;++u)for(let e=s[u],t=s[u+1];e<t;++e){const t=i[e];c[n[t]+r[t]]=u,++r[t]}return{indices:c,offsets:n}}function n(e,t){let n;const{count:r,types:o}=e,i=[];for(let s=0;s<r;++s)t.has(o[s])&&i.push(s);const a=Em.ofSortedArray(i);return{indices:a,get lookup3d(){if(!n){const t={x:e.x,y:e.y,z:e.z,indices:a};n=ZT(t,bO(t))}return n}}}e.setPosition=function(e,t,n,r){return qh.set(e,r.x[n],r.y[n],r.z[n]),qh.transformMat4(e,e,t.conformation.operator.matrix),e},e.createElementsIndex=t,e.create=function(e,r){let o,i;return{...r,get lookup3d(){if(!o){const e={x:r.x,y:r.y,z:r.z,indices:ey.ofBounds(0,r.count)};o=ZT(e,bO(e))}return o},get elementsIndex(){return i||(i=t(r,e))},subset:e=>n(r,e)}},e.createSubset=n,e.Info=function(e,t,n){const r=sne.get(e).value;if(!r||!r.has(t.id))throw new Error("valence model required");return{unit:t,types:n.types,feature:-1,x:n.x,y:n.y,z:n.z,members:n.members,offsets:n.offsets,idealGeometry:r.get(t.id).idealGeometry}},e.position=function(e,t){return qh.set(e,t.x[t.feature],t.y[t.feature],t.z[t.feature]),qh.transformMat4(e,e,t.unit.conformation.operator.matrix),e};const r=qh(),o=qh();e.distance=function(e,t){const n=e.members[e.offsets[e.feature]],i=t.members[t.offsets[t.feature]];return e.unit.conformation.position(e.unit.elements[n],r),t.unit.conformation.position(t.unit.elements[i],o),qh.distance(r,o)},e.Provider=function(e,t){return{types:new Set(e),add:t}}}(lne||(lne={})),function(e){e.create=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2048,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=arguments.length>2?arguments[2]:void 0;const r=gh.create(Float32Array,1,t,n?n.x:e),o=gh.create(Float32Array,1,t,n?n.y:e),i=gh.create(Float32Array,1,t,n?n.z:e),a=gh.create(Uint8Array,1,t,n?n.types:e),s=gh.create(Uint8Array,1,t,n?n.groups:e),l=gh.create(Uint32Array,1,t,n?n.offsets:e),c=gh.create(Uint32Array,1,t,n?n.members:e),u={x:0,y:0,z:0,offset:0,count:0};return{startState:()=>{u.x=0,u.y=0,u.z=0,u.offset=c.elementCount,u.count=0},pushMember:(e,t,n,r)=>{gh.add(c,r),u.x+=e,u.y+=t,u.z+=n,u.count+=1},finishState:(e,t)=>{const{count:n}=u;0!==n&&(gh.add(a,e),gh.add(s,t),gh.add(r,u.x/n),gh.add(o,u.y/n),gh.add(i,u.z/n),gh.add(l,u.offset))},add:(e,t,n,u,d,A)=>{gh.add(a,e),gh.add(s,t),gh.add(r,n),gh.add(o,u),gh.add(i,d),gh.add(l,c.elementCount),gh.add(c,A)},getFeatures:e=>{gh.add(l,c.elementCount);const t=gh.compact(r,!0),n=gh.compact(o,!0),u=gh.compact(i,!0),d=r.elementCount;return lne.create(e,{x:t,y:n,z:u,count:d,types:gh.compact(a,!0),groups:gh.compact(s,!0),offsets:gh.compact(l,!0),members:gh.compact(c,!0)})}}}}(cne||(cne={})),function(e){e.createElementsIndex=function(e,t,n){const r=new Int32Array(n+1),o=new Int32Array(n),i=new Int32Array(n),{members:a,offsets:s}=t;for(let u=0,d=2*e.edgeCount;u<d;++u){const t=e.a[u],n=e.b[u];if(!(t>n)){for(let e=s[t],n=s[t+1];e<n;++e)++i[a[e]];for(let e=s[n],t=s[n+1];e<t;++e)++i[a[e]]}}let l=0;for(let u=0;u<n;u++)r[u]=l,l+=i[u];r[n]=l;const c=new Int32Array(l);for(let u=0,d=2*e.edgeCount;u<d;++u){const t=e.a[u],n=e.b[u];if(!(t>n)){for(let e=s[t],n=s[t+1];e<n;++e){const t=a[e];c[r[t]+o[t]]=u,++o[t]}for(let e=s[n],t=s[n+1];e<t;++e){const t=a[e];c[r[t]+o[t]]=u,++o[t]}}}return{indices:c,offsets:r}}}(une||(une={}));class mne extends JM{getContactIndicesForElement(e,t){return this.elementKeyIndex.get(this.getElementKey(e,t.id))||[]}getElementKey(e,t){return`${e}|${t}`}constructor(e,t){super(e),this.elementKeyIndex=new Map;for(let n=0,r=this.edges.length;n<r;++n){const{unitA:e,indexA:r}=this.edges[n],{offsets:o,members:i}=t.get(e);for(let t=o[r],a=o[r+1];t<a;++t){const r=this.getElementKey(i[t],e),o=this.elementKeyIndex.get(r);void 0===o?this.elementKeyIndex.set(r,[n]):o.push(n)}}}}function yne(e){switch(e){case Ane.HydrogenBond:return"Hydrogen Bond";case Ane.Hydrophobic:return"Hydrophobic Contact";case Ane.HalogenBond:return"Halogen Bond";case Ane.Ionic:return"Ionic Interaction";case Ane.MetalCoordination:return"Metal Coordination";case Ane.CationPi:return"Cation-Pi Interaction";case Ane.PiStacking:return"Pi Stacking";case Ane.WeakHydrogenBond:return"Weak Hydrogen Bond";case Ane.Unknown:return"Unknown Interaction"}}function vne(e){switch(e){case 0:return"None";case 1:return"Positive Charge";case 2:return"Negative Charge";case 3:return"Aromatic Ring";case 4:return"Hydrogen Donor";case 5:return"Hydrogen Acceptor";case 6:return"Halogen Donor";case 7:return"Halogen Acceptor";case 8:return"HydrophobicAtom";case 9:return"Weak Hydrogen Donor";case 10:return"Ionic Type Partner";case 11:return"Dative Bond Partner";case 12:return"Transition Metal";case 13:return"Ionic Type Metal"}}function bne(e){switch(e){case pne.None:return"None";case pne.QuaternaryAmine:return"Quaternary Amine";case pne.TertiaryAmine:return"Tertiary Amine";case pne.Sulfonium:return"Sulfonium";case pne.SulfonicAcid:return"Sulfonic Acid";case pne.Sulfate:return"Sulfate";case pne.Phosphate:return"Phosphate";case pne.Halocarbon:return"Halocarbon";case pne.Guanidine:return"Guanidine";case pne.Acetamidine:return"Acetamidine";case pne.Carboxylate:return"Carboxylate"}}!function(e){e[e.None=0]="None",e[e.Filtered=1]="Filtered"}(dne||(dne={})),function(e){e[e.Unknown=0]="Unknown",e[e.Ionic=1]="Ionic",e[e.CationPi=2]="CationPi",e[e.PiStacking=3]="PiStacking",e[e.HydrogenBond=4]="HydrogenBond",e[e.HalogenBond=5]="HalogenBond",e[e.Hydrophobic=6]="Hydrophobic",e[e.MetalCoordination=7]="MetalCoordination",e[e.WeakHydrogenBond=8]="WeakHydrogenBond"}(Ane||(Ane={})),function(e){e[e.None=0]="None",e[e.PositiveCharge=1]="PositiveCharge",e[e.NegativeCharge=2]="NegativeCharge",e[e.AromaticRing=3]="AromaticRing",e[e.HydrogenDonor=4]="HydrogenDonor",e[e.HydrogenAcceptor=5]="HydrogenAcceptor",e[e.HalogenDonor=6]="HalogenDonor",e[e.HalogenAcceptor=7]="HalogenAcceptor",e[e.HydrophobicAtom=8]="HydrophobicAtom",e[e.WeakHydrogenDonor=9]="WeakHydrogenDonor",e[e.IonicTypePartner=10]="IonicTypePartner",e[e.DativeBondPartner=11]="DativeBondPartner",e[e.TransitionMetal=12]="TransitionMetal",e[e.IonicTypeMetal=13]="IonicTypeMetal"}(fne||(fne={})),function(e){e[e.None=0]="None",e[e.QuaternaryAmine=1]="QuaternaryAmine",e[e.TertiaryAmine=2]="TertiaryAmine",e[e.Sulfonium=3]="Sulfonium",e[e.SulfonicAcid=4]="SulfonicAcid",e[e.Sulfate=5]="Sulfate",e[e.Phosphate=6]="Phosphate",e[e.Halocarbon=7]="Halocarbon",e[e.Guanidine=8]="Guanidine",e[e.Acetamidine=9]="Acetamidine",e[e.Carboxylate=10]="Carboxylate"}(pne||(pne={})),function(e){e.create=function(e,t){const n=[],r=[],o=[];return{add(e,t,i){n[n.length]=e,r[r.length]=t,o[o.length]=i},getContacts(){const i=new Uk.EdgeBuilder(e.count,n,r),a=new Int8Array(i.slotCount),s=new Int8Array(i.slotCount);for(let e=0,t=i.edgeCount;e<t;e++)i.addNextEdge(),i.assignProperty(a,o[e]);const l=i.createGraph({type:a,flag:s});let c;return Object.defineProperty(l,"elementsIndex",{get:()=>c||(c=une.createElementsIndex(l,e,t))})}}}}(hne||(hne={})),function(e){e.create=function(){const e=new JM.Builder;return{startUnitPair(t,n){e.startUnitPair(t.id,n.id)},finishUnitPair(){e.finishUnitPair()},add(t,n,r){e.add(t,n,{type:r,flag:dne.None})},getContacts:t=>new mne(e.getMap(),t)}}}(gne||(gne={}));const Cne={lineOfSightDistFactor:U_.Numeric(1,{min:0,max:3,step:.1})},Ine=3;function Ene(e,t,n){const r=t.members[t.offsets[t.feature]],o=n.members[n.offsets[n.feature]];if(r===o&&t.unit===n.unit)return!1;const i=Tee(t.unit,r),a=Tee(n.unit,o);return(!i||!a||i===a)&&(!(t.unit===n.unit&&t.unit.model.atomicHierarchy.residueAtomSegments.count>1&&t.unit.residueIndex[t.unit.elements[r]]===n.unit.residueIndex[n.unit.elements[o]])&&!Ree(e,t.unit,r,n.unit,o))}function xne(e,t,n,r){const o=Tee(e,t),i=Tee(n,r);return o&&i&&o!==i}function Bne(e,t){const{feature:n,offsets:r,members:o}=t;for(let i=r[n],a=r[n+1];i<a;++i)if(o[i]===e)return!0;return!1}const wne=qh(),_ne=qh(),Sne=qh(),Dne=NO();function Tne(e,t,n,r){const o=t.feature,i=n.feature,a=t.members[t.offsets[o]],s=n.members[n.offsets[i]];lne.position(_ne,t),lne.position(Sne,n),qh.scale(wne,qh.add(wne,_ne,Sne),.5);const l=r*Ine,{count:c,indices:u,units:d,squaredDistances:A}=e.lookup3d.find(wne[0],wne[1],wne[2],l,Dne);if(0===c)return!0;for(let f=0;f<c;++f){const e=u[f],o=d[f];if(!BO.isAtomic(o))continue;const i=_ee(o,e);if("H"===i)continue;const l=FN(i);if(!(l*l*r*r<=A[f])&&(!xne(o,e,t.unit,a)&&!xne(o,e,n.unit,s)&&!(t.unit===o&&Bne(e,t)||n.unit===o&&Bne(e,n))&&(o.conformation.position(o.elements[e],wne),!(qh.squaredDistance(wne,_ne)<1||qh.squaredDistance(wne,Sne)<1))))return!1}return!0}function kne(e,t,n,r,o,i){const{x:a,y:s,z:l}=n,{lookup3d:c,indices:u}=n.subset(o.requiredFeatures),d=lne.Info(e,t,n),A={...d},f=i.lineOfSightDistFactor;for(let p=0,h=ey.size(u);p<h;++p){const t=ey.getAt(u,p),{count:n,indices:i,squaredDistances:h}=c.find(a[t],s[t],l[t],o.maxDistance);if(0!==n){d.feature=t;for(let a=0;a<n;++a){const n=ey.getAt(u,i[a]);if(n<=t)continue;if(A.feature=n,!Ene(e,d,A))continue;const s=o.getType(e,d,A,h[a]);s&&Tne(e,d,A,f)&&r.add(t,n,s)}}}}const Qne=Yh();const Mne={distanceMax:U_.Numeric(4,{min:1,max:5,step:.1}),angleMax:U_.Numeric(30,{min:0,max:60,step:1})},Rne=["CL","BR","I","AT"];const Pne=["N","O","S"],One=["C","N","P","S"];const Fne=Np(180),Nne=Np(120);const Lne=lne.Provider([6],(function(e,t,n){const{elements:r}=t,{x:o,y:i,z:a}=t.model.atomicConformation;for(let s=0,l=r.length;s<l;++s){const e=_ee(t,s);Rne.includes(e)&&n.add(6,pne.None,o[r[s]],i[r[s]],a[r[s]],s)}})),Une=lne.Provider([7],(function(e,t,n){const{elements:r}=t,{x:o,y:i,z:a}=t.model.atomicConformation;for(let s=0,l=r.length;s<l;++s){const l=_ee(t,s);if(Pne.includes(l)){let l=!1;Oee(e,t,s,((e,t)=>{One.includes(_ee(e,t))&&(l=!0)})),l&&n.add(7,pne.None,o[r[s]],i[r[s]],a[r[s]],s)}}})),Gne={name:"halogen-bonds",params:Mne,createTester:e=>{const t=function(e){return{angleMax:Np(e.angleMax)}}(e);return{maxDistance:e.distanceMax,requiredFeatures:new Set([6,7]),getType:(e,n,r)=>function(e,t,n,r){const o=t.types[t.feature],i=n.types[n.feature];if(s=i,!(7===(a=o)&&6===s||6===a&&7===s))return;var a,s;const[l,c]=6===o?[t,n]:[n,t],u=l.members[l.offsets[l.feature]],d=c.members[c.offsets[c.feature]],[A]=Kte(e,l.unit,u,c.unit,d);if(1!==A.length)return;if(Fne-A[0]>r.angleMax)return;const[f]=Kte(e,c.unit,d,l.unit,u);return 0===f.length||f.some((e=>Nne-e>r.angleMax))?void 0:Ane.HalogenBond}(e,n,r,t)}}},jne={distanceMax:U_.Numeric(3.5,{min:1,max:5,step:.1}),backbone:U_.Boolean(!0,{description:"Include backbone-to-backbone hydrogen bonds"}),accAngleDevMax:U_.Numeric(45,{min:0,max:180,step:1},{description:"Max deviation from ideal acceptor angle"}),ignoreHydrogens:U_.Boolean(!1,{description:"Ignore explicit hydrogens in geometric constraints"}),donAngleDevMax:U_.Numeric(45,{min:0,max:180,step:1},{description:"Max deviation from ideal donor angle"}),accOutOfPlaneAngleMax:U_.Numeric(90,{min:0,max:180,step:1}),donOutOfPlaneAngleMax:U_.Numeric(45,{min:0,max:180,step:1})},zne={...jne,water:U_.Boolean(!1,{description:"Include water-to-water hydrogen bonds"}),sulfurDistanceMax:U_.Numeric(4.1,{min:1,max:5,step:.1})},Hne={...jne};function Vne(e,t){const n=sne.get(e).value;if(!n)throw Error("expected valence model to be available");const r=n.get(t.id);if(!r)throw Error("expected valence model for unit to be available");return r}function qne(e,t){const{elementAromaticRingIndices:n,all:r}=e.rings,o=n.get(t);if(void 0===o)return!1;for(let i=0,a=o.length;i<a;++i){const t=r[o[i]];for(let n=0,r=t.length;n<r;++n){const r=_ee(e,t[n]);if("N"===r||"O"===r)return!0}}return!1}function Yne(e,t){return 2===e.model.atomicHierarchy.derived.residue.moleculeType[e.residueIndex[e.elements[t]]]}function Xne(e,t){return sM.has(Dee(e,t))}function Wne(e,t){return"HIS"===kee(e,t)&&"N"===_ee(e,t)&&function(e,t){return e.rings.elementRingIndices.has(t)}(e,t)}function Kne(e){return{ignoreHydrogens:e.ignoreHydrogens,includeBackbone:e.backbone,maxAccAngleDev:Np(e.accAngleDevMax),maxDonAngleDev:Np(e.donAngleDevMax),maxAccOutOfPlaneAngle:Np(e.accOutOfPlaneAngleMax),maxDonOutOfPlaneAngle:Np(e.donOutOfPlaneAngleMax)}}const Jne=Np(120);function Zne(e,t,n,r){const o=t.members[t.offsets[t.feature]],i=n.members[n.offsets[n.feature]];if(!r.includeBackbone&&(a=t.unit,s=o,l=n.unit,c=i,Xne(a,s)&&Xne(l,c)))return;var a,s,l,c;const[u,d]=Kte(e,t.unit,o,n.unit,i,r.ignoreHydrogens),A=Hte.get(t.idealGeometry[o])||Jne;if(u.some((e=>Math.abs(A-e)>r.maxDonAngleDev)))return;if(d.length&&!d.some((e=>e<r.maxDonAngleDev)))return;if(t.idealGeometry[o]===Gte.Trigonal){const a=Jte(e,t.unit,o,n.unit,i);if(void 0!==a&&a>r.maxDonOutOfPlaneAngle)return}let f=o;!r.ignoreHydrogens&&d.length>0&&(f=function(e,t,n,r,o){let i=n;t.conformation.position(t.elements[n],Yte),r.conformation.position(r.elements[o],Xte),qh.sub(Vte,Xte,Yte);let a=qh.squaredDistance(Yte,Xte);return Oee(e,t,n,((e,t)=>{if("H"===_ee(e,t)){e.conformation.position(e.elements[t],Wte);const n=qh.squaredDistance(Wte,Xte);n<a&&(a=n,i=t)}})),i}(e,t.unit,o,n.unit,i));const[p,h]=Kte(e,n.unit,i,t.unit,f,r.ignoreHydrogens),g=Hte.get(n.idealGeometry[i])||Jne;if(!p.some((e=>g-e>r.maxAccAngleDev))&&!h.some((e=>g-e>r.maxAccAngleDev))){if(n.idealGeometry[i]===Gte.Trigonal){const a=Jte(e,n.unit,i,t.unit,o);if(void 0!==a&&a>r.maxAccOutOfPlaneAngle)return}return!0}}function $ne(e,t,n,r,o){const i=t.types[t.feature],a=n.types[n.feature];if(l=a,!(5===(s=i)&&4===l||4===s&&5===l))return;var s,l;const[c,u]=5===a?[t,n]:[n,t],d=c.members[c.offsets[c.feature]],A=u.members[u.offsets[u.feature]];var f,p,h,g;if(!(r>("S"===_ee(c.unit,d)||"S"===_ee(u.unit,A)?o.maxSulfurDistSq:o.maxDistSq))&&((o.includeWater||(f=c.unit,p=d,h=u.unit,g=A,!Yne(f,p)||!Yne(h,g)))&&Zne(e,c,u,o)))return Ane.HydrogenBond}const ere=lne.Provider([4],(function(e,t,n){const{totalH:r}=Vne(e,t),{elements:o}=t,{x:i,y:a,z:s}=t.model.atomicConformation;for(let l=0,c=o.length;l<c;++l){const e=_ee(t,l);(Wne(t,l)||r[l]>0&&("N"===e||"O"===e||"S"===e))&&n.add(4,pne.None,i[o[l]],a[o[l]],s[o[l]],l)}})),tre=lne.Provider([9],(function(e,t,n){const{totalH:r}=Vne(e,t),{elements:o}=t,{x:i,y:a,z:s}=t.model.atomicConformation;for(let l=0,c=o.length;l<c;++l)"C"===_ee(t,l)&&r[l]>0&&(Mee(e,t,l,"N")>0||Mee(e,t,l,"O")>0||qne(t,l))&&n.add(9,pne.None,i[o[l]],a[o[l]],s[o[l]],l)})),nre=lne.Provider([5],(function(e,t,n){const{charge:r,implicitH:o,idealGeometry:i}=Vne(e,t),{elements:a}=t,{x:s,y:l,z:c}=t.model.atomicConformation,u=e=>{n.add(5,pne.None,s[a[e]],l[a[e]],c[a[e]],e)};for(let d=0,A=a.length;d<A;++d){const n=_ee(t,d);if("O"===n)u(d);else if("N"===n){if(Wne(t,d))u(d);else if(r[d]<1){const n=Qee(e,t,d)+o[d],r=i[d];(r===Gte.Tetrahedral&&n<4||r===Gte.Trigonal&&n<3||r===Gte.Linear&&n<2)&&u(d)}}else if("S"===n){const e=kee(t,d);"CYS"!==e&&"MET"!==e&&-1!==See(t,d)||u(d)}}})),rre={name:"hydrogen-bonds",params:zne,createTester:e=>{const t=Math.max(e.distanceMax,e.sulfurDistanceMax),n=function(e){return{...Kne(e),includeWater:e.water,maxSulfurDistSq:e.sulfurDistanceMax*e.sulfurDistanceMax,maxDistSq:e.distanceMax*e.distanceMax}}(e);return{maxDistance:t,requiredFeatures:new Set([4,5]),getType:(e,t,r,o)=>$ne(e,t,r,o,n)}}},ore={name:"weak-hydrogen-bonds",params:Hne,createTester:e=>{const t=Kne(e);return{maxDistance:e.distanceMax,requiredFeatures:new Set([9,5]),getType:(e,n,r,o)=>function(e,t,n,r,o){const i=t.types[t.feature],a=n.types[n.feature];if(l=a,!(9===(s=i)&&5===l||5===s&&9===l))return;var s,l;const[c,u]=5===a?[t,n]:[n,t];return Zne(e,c,u,o)?Ane.WeakHydrogenBond:void 0}(e,n,r,0,t)}}},ire={distanceMax:U_.Numeric(5,{min:0,max:8,step:.1})},are={distanceMax:U_.Numeric(5.5,{min:1,max:8,step:.1}),offsetMax:U_.Numeric(2,{min:0,max:4,step:.1}),angleDevMax:U_.Numeric(30,{min:0,max:180,step:1})},sre={distanceMax:U_.Numeric(6,{min:1,max:8,step:.1}),offsetMax:U_.Numeric(2,{min:0,max:4,step:.1})},lre=["ARG","HIS","LYS"],cre=["GLU","ASP"];function ure(e,t){const n=sne.get(e).value;if(!n)throw Error("expected valence model to be available");const r=n.get(t.id);if(!r)throw Error("expected valence model for unit to be available");return r}const dre=qh(),Are=qh();const fre=qh(),pre=qh(),hre=qh(),gre=qh();function mre(e,t){const{unit:n,feature:r,offsets:o,members:i}=t,{elements:a}=n,s=o[r];return t.unit.conformation.position(a[i[s]],fre),t.unit.conformation.position(a[i[s+1]],pre),t.unit.conformation.position(a[i[s+2]],hre),qh.triangleNormal(e,fre,pre,hre)}const yre=function(e,t,n){return lne.position(fre,e),lne.position(pre,t),qh.sub(hre,fre,pre),qh.projectOnPlane(gre,hre,n),qh.add(gre,gre,pre),qh.distance(gre,pre)};const vre=Np(180),bre=Np(90),Cre=qh(),Ire=qh();function Ere(e,t,n,r,o){const i=t.types[t.feature],a=n.types[n.feature];if(l=a,(2===(s=i)&&1===l||1===s&&2===l)&&function(e,t,n){const{feature:r,offsets:o,members:i}=e,{feature:a,offsets:s,members:l}=t;for(let c=o[r],u=o[r+1];c<u;++c){const r=i[c];e.unit.conformation.position(e.unit.elements[r],dre);for(let e=s[a],o=s[a+1];e<o;++e){const r=l[e];if(t.unit.conformation.position(t.unit.elements[r],Are),qh.squaredDistance(dre,Are)<n)return!0}}return!1}(t,n,o.distanceMaxSq))return Ane.Ionic;var s,l}const xre=lne.Provider([2],(function(e,t,n){const{charge:r}=ure(e,t),{elements:o}=t,{x:i,y:a,z:s}=t.model.atomicConformation,l=new Set,{label_comp_id:c}=t.model.atomicHierarchy.atoms,u=ty.transientSegments(t.model.atomicHierarchy.residueAtomSegments,o);for(;u.hasNext;){const{index:d,start:A,end:f}=u.move(),p=c.value(t.model.atomicHierarchy.residueAtomSegments.offsets[d]);if(cre.includes(p)){n.startState();for(let e=A;e<f;++e)"O"!==_ee(t,e)||sM.has(Dee(t,e))||n.pushMember(i[o[e]],a[o[e]],s[o[e]],e);n.finishState(2,pne.None)}else if(QM.has(p))for(let r=A;r<f;++r)Lee(e,t,r)&&(n.startState(),Oee(e,t,r,((e,r)=>{"O"===_ee(t,r)&&n.pushMember(i[o[r]],a[o[r]],s[o[r]],r)})),n.finishState(2,pne.Phosphate));else if(!PM.has(p)){for(let r=A;r<f;++r){n.startState(),"N"!==_ee(t,r)||sM.has(Dee(t,r))||n.pushMember(i[o[r]],a[o[r]],s[o[r]],r),n.finishState(2,pne.None);let c=pne.None;Fee(e,t,r)?c=pne.SulfonicAcid:Lee(e,t,r)?c=pne.Phosphate:Nee(e,t,r)?c=pne.Sulfate:Uee(e,t,r)&&(c=pne.Carboxylate),c&&(n.startState(),Oee(e,t,r,((e,r)=>{"O"===_ee(t,r)&&(l.add(r),n.pushMember(i[o[r]],a[o[r]],s[o[r]],r))})),n.finishState(2,c))}for(let e=A;e<f;++e)r[e]<0&&!l.has(e)&&n.add(2,pne.None,i[o[e]],a[o[e]],s[o[e]],e)}}})),Bre=lne.Provider([1],(function(e,t,n){const{charge:r}=ure(e,t),{elements:o}=t,{x:i,y:a,z:s}=t.model.atomicConformation,l=new Set,{label_comp_id:c}=t.model.atomicHierarchy.atoms,u=ty.transientSegments(t.model.atomicHierarchy.residueAtomSegments,o);for(;u.hasNext;){const{index:d,start:A,end:f}=u.move(),p=c.value(t.model.atomicHierarchy.residueAtomSegments.offsets[d]);if(lre.includes(p)){n.startState();for(let e=A;e<f;++e)"N"!==_ee(t,e)||sM.has(Dee(t,e))||n.pushMember(i[o[e]],a[o[e]],s[o[e]],e);n.finishState(1,pne.None)}else if(!PM.has(p)){l.clear();for(let r=A;r<f;++r){let c=pne.None;Gee(e,t,r)?c=pne.Guanidine:jee(e,t,r)&&(c=pne.Acetamidine),c&&(n.startState(),Oee(e,t,r,((e,r)=>{"N"===_ee(t,r)&&(l.add(r),n.pushMember(i[o[r]],a[o[r]],s[o[r]],r))})),n.finishState(1,c))}for(let e=A;e<f;++e)r[e]>0&&!l.has(e)&&n.add(1,pne.None,i[o[e]],a[o[e]],s[o[e]],e)}}})),wre=lne.Provider([3],(function(e,t,n){const{elements:r}=t,{x:o,y:i,z:a}=t.model.atomicConformation;for(const s of t.rings.aromaticRings){const e=t.rings.all[s];n.startState();for(let t=0,s=e.length;t<s;++t){const s=e[t];n.pushMember(o[r[s]],i[r[s]],a[r[s]],s)}n.finishState(3,pne.None)}})),_re={name:"ionic",params:ire,createTester:e=>{const t=function(e){return{distanceMaxSq:e.distanceMax*e.distanceMax}}(e);return{maxDistance:e.distanceMax,requiredFeatures:new Set([2,1]),getType:(e,n,r,o)=>Ere(0,n,r,0,t)}}},Sre={name:"pi-stacking",params:are,createTester:e=>{const t=function(e){return{offsetMax:e.offsetMax,angleDevMax:Np(e.angleDevMax)}}(e);return{maxDistance:e.distanceMax,requiredFeatures:new Set([3]),getType:(e,n,r,o)=>function(e,t,n,r,o){const i=t.types[t.feature],a=n.types[n.feature];if(s=a,3===i&&3===s){mre(Cre,t),mre(Ire,n);const e=qh.angle(Cre,Ire);if(Math.min(yre(t,n,Ire),yre(n,t,Cre))<=o.offsetMax){if(e<=o.angleDevMax||e>=vre-o.angleDevMax)return Ane.PiStacking;if(e<=o.angleDevMax+bre&&e>=bre-o.angleDevMax)return Ane.PiStacking}}var s}(0,n,r,0,t)}}},Dre={name:"cation-pi",params:sre,createTester:e=>{const t=function(e){return{offsetMax:e.offsetMax}}(e);return{maxDistance:e.distanceMax,requiredFeatures:new Set([3,1]),getType:(e,n,r,o)=>function(e,t,n,r,o){const i=t.types[t.feature],a=n.types[n.feature];if(l=a,3===(s=i)&&1===l||1===s&&3===l){const[e,r]=3===i?[t,n]:[n,t];if(mre(Cre,e),yre(r,e,Cre)<=o.offsetMax)return Ane.CationPi}var s,l}(0,n,r,0,t)}}},Tre={distanceMax:U_.Numeric(4,{min:1,max:5,step:.1})};const kre=lne.Provider([8],(function(e,t,n){const{elements:r}=t,{x:o,y:i,z:a}=t.model.atomicConformation;for(let s=0,l=r.length;s<l;++s){const l=_ee(t,s);let c=!1;"C"===l?(c=!0,Oee(e,t,s,((e,t)=>{const n=_ee(e,t);"C"!==n&&"H"!==n&&(c=!1)}))):"F"===l&&(c=!0),c&&n.add(8,pne.None,o[r[s]],i[r[s]],a[r[s]],s)}})),Qre={name:"hydrophobic",params:Tre,createTester:e=>({maxDistance:e.distanceMax,requiredFeatures:new Set([8]),getType:(e,t,n,r)=>function(e,t,n){const r=t.types[t.feature],o=n.types[n.feature];if(i=o,8!==r||8!==i)return;var i;const a=t.members[t.offsets[t.feature]],s=n.members[n.offsets[n.feature]];return"F"!==_ee(t.unit,a)||"F"!==_ee(n.unit,s)?Ane.Hydrophobic:void 0}(0,t,n)})},Mre={distanceMax:U_.Numeric(3,{min:1,max:5,step:.1})},Rre=["LI","NA","K","RB","CS","MG","CA","SR","BA","AL","GA","IN","TL","SC","SN","PB","BI","SB","HG"];function Pre(e){return!sM.has(e)}function Ore(e){return sM.has(e)}function Fre(e){return lM.has(e)}function Nre(e,t){return 12===e?11===t||12===t:13===e?10===t:void 0}const Lre=lne.Provider([13,12],(function(e,t,n){const{elements:r}=t,{x:o,y:i,z:a}=t.model.atomicConformation;for(let s=0,l=r.length;s<l;++s){const e=_ee(t,s);let l=0;Rre.includes(e)?l=13:(M7(e)||"ZN"===e||"CD"===e)&&(l=12),l&&n.add(l,pne.None,o[r[s]],i[r[s]],a[r[s]],s)}})),Ure=lne.Provider([10,11],(function(e,t,n){const{elements:r}=t,{x:o,y:i,z:a}=t.model.atomicConformation;for(let s=0,l=r.length;s<l;++s){const e=_ee(t,s),l=kee(t,s),c=Dee(t,s);let u=!1,d=!1;const A=BM.has(l),f=QM.has(l);A||f?A?"O"===e?(["ASP","GLU","SER","THR","TYR","ASN","GLN"].includes(l)&&Pre(c)||Ore(c))&&(u=!0,d=!0):"S"!==e||"CYS"!==l&&"MET"!==l?"N"===e&&"HIS"===l&&Pre(c)&&(u=!0):(u=!0,d=!0):f&&("O"===e&&Fre(c)?(u=!0,d=!0):["N3","N4","N7"].includes(c)?u=!0:["O2","O4","O6"].includes(c)&&(u=!0,d=!0)):Q7(e)||"O"===e||"S"===e?(u=!0,d=!0):"N"===e&&(u=!0),u&&n.add(11,pne.None,o[r[s]],i[r[s]],a[r[s]],s),d&&n.add(10,pne.None,o[r[s]],i[r[s]],a[r[s]],s)}})),Gre={name:"metal-coordination",params:Mre,createTester:e=>({maxDistance:e.distanceMax,requiredFeatures:new Set([13,12,10,11]),getType:(e,t,n,r)=>function(e,t,n){const r=t.types[t.feature],o=n.types[n.feature];if(Nre(r,o)||Nre(o,r))return Ane.MetalCoordination}(0,t,n)})};function jre(e,t){const{contacts:n}=t,r=function(e,t,n,r,o){const[i,a]=r.get(n)||[1/0,-1];e<i?(-1!==a&&o(a),r.set(n,[e,t])):o(t)};function o(e,t,n,o,i){const a=t.members[t.offsets[t.feature]],s=n.members[n.offsets[n.feature]],l=t.unit.getResidueIndex(a),c=n.unit.getResidueIndex(s),u=`${a}|${t.unit.id}|${c}|${n.unit.id}|A`,d=`${s}|${n.unit.id}|${l}|${t.unit.id}|B`,A=lne.distance(t,n);r(A,e,u,o,i),r(A,e,d,o,i)}const i=new Map,a=e=>n.edges[e].props.flag=dne.Filtered;let s,l;return{isApplicable:e=>e===Ane.Hydrophobic,handleInterContact:(e,t,n)=>{o(e,t,n,i,a)},startUnit:(e,t,n)=>{s=new Map,l=e=>t.edgeProps.flag[e]=dne.Filtered},handleIntraContact:(e,t,n)=>{o(e,t,n,s,l)}}}function zre(e,t){const{contacts:n}=t,r=(e,r)=>{const o=9===e.types[e.feature]?r:e,i=o.members[o.offsets[o.feature]],{edgeProps:{type:a},elementsIndex:{offsets:s,indices:l}}=t.unitsContacts.get(o.unit.id);for(let t=s[i],n=s[i+1];t<n;++t)if(a[l[t]]===Ane.HydrogenBond)return!0;const c=n.getEdgeIndices(o.feature,o.unit.id);for(let t=0,u=c.length;t<u;++t)if(n.edges[c[t]].props.type===Ane.HydrogenBond)return!0;return!1};return{isApplicable:e=>e===Ane.WeakHydrogenBond,handleInterContact:(e,t,o)=>{r(t,o)&&(n.edges[e].props.flag=dne.Filtered)},startUnit:()=>{},handleIntraContact:(e,n,o)=>{if(r(n,o)){const{flag:r}=t.unitsContacts.get(n.unit.id).edgeProps;r[e]=dne.Filtered}}}}function Hre(e,t,n,r,o){const{offsets:i,feature:a}=n,{offsets:s,feature:l}=r;for(let c=i[a],u=i[a+1];c<u;++c){const i=n.members[c],a=o.getContactIndicesForElement(i,n.unit);for(let n=0,c=a.length;n<c;++n){const i=a[n];if(e.includes(o.edges[i].props.type))for(let e=s[l],n=s[l+1];e<n;++e){const n=r.members[e];if(o.getContactIndicesForElement(n,r.unit).includes(i))return void(o.edges[t].props.flag=dne.Filtered)}}}}function Vre(e,t,n,r,o){const{edgeProps:{type:i,flag:a},elementsIndex:{offsets:s,indices:l}}=o,{offsets:c,feature:u}=n,{offsets:d,feature:A}=r;for(let f=c[u],p=c[u+1];f<p;++f){const o=n.members[f];for(let n=s[o],c=s[o+1];n<c;++n){const o=l[n];if(e.includes(i[o]))for(let e=d[A],n=d[A+1];e<n;++e){const n=r.members[e];for(let e=s[n],r=s[n+1];e<r;++e)if(o===l[e])return void(a[t]=dne.Filtered)}}}}function qre(e,t){const{contacts:n}=t;return{isApplicable:e=>e===Ane.Ionic,handleInterContact:(e,t,r)=>{Hre([Ane.HydrogenBond,Ane.WeakHydrogenBond],e,t,r,n)},startUnit:()=>{},handleIntraContact:(e,n,r)=>{Vre([Ane.HydrogenBond,Ane.WeakHydrogenBond],e,n,r,t.unitsContacts.get(n.unit.id))}}}function Yre(e,t){const{contacts:n}=t;return{isApplicable:e=>e===Ane.Hydrophobic||e===Ane.CationPi,handleInterContact:(e,t,r)=>{Hre([Ane.PiStacking],e,t,r,n)},startUnit:()=>{},handleIntraContact:(e,n,r)=>{Vre([Ane.PiStacking],e,n,r,t.unitsContacts.get(n.unit.id))}}}function Xre(e,t){const{contacts:n}=t;return{isApplicable:e=>e===Ane.Ionic,handleInterContact:(e,t,r)=>{Hre([Ane.MetalCoordination],e,t,r,n)},startUnit:()=>{},handleIntraContact:(e,n,r)=>{Vre([Ane.MetalCoordination],e,n,r,t.unitsContacts.get(n.unit.id))}}}var Wre;!function(e){function t(e,t){const{unitA:n,indexA:r,unitB:o,indexB:i}=t,{contacts:a,unitsContacts:s}=e;if(n===o){const e=s.get(n.id),t=e.getDirectedEdgeIndex(r,i);return yne(e.edgeProps.type[t])}{const e=a.getEdgeIndex(r,n.id,i,o.id);return yne(a.edges[e].props.type)}}function n(e,t,n){const{unitsFeatures:r}=e;return KM.fromPairProvider(t.length,((e,n,o)=>{const i=t[e];lne.setPosition(n,i.unitA,i.indexA,r.get(i.unitA.id)),lne.setPosition(o,i.unitB,i.indexB,r.get(i.unitB.id))}),n)}function r(e,n,r){const o=r[0];if(void 0===o)return"";const{unitA:i,indexA:a,unitB:s,indexB:l}=o,{unitsFeatures:c}=n,{members:u,offsets:d}=c.get(i.id),{members:A,offsets:f}=c.get(s.id),p={granularity:"element"};return(d[a+1]-d[a]>1||f[l+1]-f[l]>1)&&(p.granularity="residue"),[t(n,o),n8(RP.Location(e,i,u[d[a]],e,s,A[f[l]]),p)].join("</br>")}e.Location=function(e,t,n,r,o,i){return ET("interactions",{structure:t,interactions:e},{unitA:n,indexA:r,unitB:o,indexB:i})},e.isLocation=function(e){return!!e&&"data-location"===e.kind&&"interactions"===e.tag},e.areLocationsEqual=function(e,t){return e.data.structure===t.data.structure&&e.data.interactions===t.data.interactions&&e.element.indexA===t.element.indexA&&e.element.indexB===t.element.indexB&&e.element.unitA===t.element.unitA&&e.element.unitB===t.element.unitB},e.locationLabel=function(e){return t(e.data.interactions,e.element)},e.Loci=function(e,t,o){return k5("interactions",{structure:e,interactions:t},o,(e=>n(t,o,e)),(()=>r(e,t,o)))},e.isLoci=function(e){return!!e&&"data-loci"===e.kind&&"interactions"===e.tag},e.getBoundingSphere=n,e.getLabel=r}(Wre||(Wre={}));const Kre=[ere,tre,nre,xre,Bre,wre,Lne,Une,kre,Lre,Ure],Jre={ionic:_re,"pi-stacking":Sre,"cation-pi":Dre,"halogen-bonds":Gne,"hydrogen-bonds":rre,"weak-hydrogen-bonds":ore,hydrophobic:Qre,"metal-coordination":Gre};const Zre=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=Object.create(null);return Object.keys(Jre).forEach((n=>{t[n]=U_.MappedStatic(e.includes(n)?"on":"off",{on:U_.Group(Jre[n].params),off:U_.Group({})},{cycle:!0})})),t}(["cation-pi","pi-stacking","hydrogen-bonds","halogen-bonds","metal-coordination"]),$re={providers:U_.Group(Zre,{isFlat:!0}),contacts:U_.Group(Cne,{label:"Advanced Options"})};async function eoe(e,t,n){const r={...U_.getDefaultValues($re),...n};await sne.attach(e,t);const o=[];Jh(Jre).forEach((e=>{const{name:t,params:n}=r.providers[e];"on"===t&&o.push(Jre[e].createTester(n))}));const i=new Set;o.forEach((e=>$Q.add(i,e.requiredFeatures)));const a=Kre.filter((e=>$Q.areIntersecting(i,e.types))),s=ny.Mutable(),l=ny.Mutable();for(let d=0,A=t.unitSymmetryGroups.length;d<A;++d){const n=t.unitSymmetryGroups[d];e.runtime.shouldUpdate&&await e.runtime.update({message:"computing interactions",current:d,max:A});const i=toe(t,n.units[0],a),c=noe(t,n.units[0],i,o,r.contacts);for(let e=0,t=n.units.length;e<t;++e){const t=n.units[e];s.set(t.id,i),l.set(t.id,c)}}const c=function(e,t,n,r){const o=gne.create();return aG.eachUnitPair(e,((i,a)=>{const s=t.get(i.id),l=t.get(a.id);!function(e,t,n,r,o,i,a,s){const{count:l,x:c,y:u,z:d}=n,{lookup3d:A}=o,f=Yh.mul(Qne,r.conformation.operator.inverse,t.conformation.operator.matrix),p=!Yh.isIdentity(f),h=qh(),g=Math.max(...a.map((e=>e.maxDistance))),{center:m,radius:y}=A.boundary.sphere,v=(y+g)*(y+g),b=s.lineOfSightDistFactor,C=lne.Info(e,t,n),I=lne.Info(e,r,o);i.startUnitPair(t,r);for(let E=0;E<l;++E){if(qh.set(h,c[E],u[E],d[E]),p&&qh.transformMat4(h,h,f),qh.squaredDistance(h,m)>v)continue;const{indices:t,count:n,squaredDistances:r}=A.find(h[0],h[1],h[2],g);if(0!==n){C.feature=E;for(let o=0;o<n;++o){const n=t[o];if(I.feature=n,!Ene(e,C,I))continue;const s=r[o];for(const t of a)if(s<t.maxDistance*t.maxDistance){const r=t.getType(e,C,I,s);if(r&&Tne(e,C,I,b)){i.add(E,n,r);break}}}}}i.finishUnitPair()}(e,i,s,a,l,o,n,r)}),{maxRadius:Math.max(...n.map((e=>e.maxDistance))),validUnit:e=>BO.isAtomic(e),validUnitPair:(t,n)=>aG.validUnitPair(e,t,n)}),o.getContacts(t)}(t,s,o,r.contacts),u={unitsFeatures:s,unitsContacts:l,contacts:c};return function(e,t){const{contacts:n,unitsContacts:r,unitsFeatures:o}=t,i=[jre(0,t),zre(0,t),qre(0,t),Yre(0,t),Xre(0,t)];for(let s=0,l=n.edgeCount;s<l;++s){const t=n.edges[s],r=e.unitMap.get(t.unitA),a=e.unitMap.get(t.unitB),l=lne.Info(e,r,o.get(t.unitA));l.feature=t.indexA;const c=lne.Info(e,a,o.get(t.unitB));c.feature=t.indexB;for(const e of i)e.isApplicable(t.props.type)&&e.handleInterContact(s,l,c)}const a=r.keys();for(;;){const{done:t,value:n}=a.next();if(t)break;const s=r.get(n),l=o.get(n),c=e.unitMap.get(n);if(!BO.isAtomic(c))continue;const u=lne.Info(e,c,l),d=lne.Info(e,c,l);for(const e of i)e.startUnit(c,s,l);for(let e=0,r=2*s.edgeCount;e<r;++e){u.feature=s.a[e],d.feature=s.b[e];for(const t of i)t.isApplicable(s.edgeProps.type[e])&&t.handleIntraContact(e,u,d)}}}(t,u),u}function toe(e,t,n){const r=t.elements.length,o=cne.create(r,r/2);if(BO.isAtomic(t))for(const i of n)i.add(e,t,o);return o.getFeatures(r)}function noe(e,t,n,r,o){const i=hne.create(n,t.elements.length);return BO.isAtomic(t)&&function(e,t,n,r,o,i){for(const a of o)kne(e,t,n,r,a,i)}(e,t,n,i,r,o),i.getContacts()}const roe={...$re},ooe=TL.createProvider({label:"Interactions",descriptor:Jk({name:"molstar_computed_interactions"}),type:"local",defaultParams:roe,getParams:e=>roe,isApplicable:e=>!e.isCoarseGrained,obtain:async(e,t,n)=>{const r={...U_.getDefaultValues(roe),...n};return{value:await eoe(e,t,r)}}}),ioe=qh(),aoe=qh(),soe=qh(),loe=gh.add,coe=gh.add3;var uoe;!function(e){e.create=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2048,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=arguments.length>2?arguments[2]:void 0;const r=gh.create(Float32Array,1,t,n?n.groupBuffer.ref.value:e),o=gh.create(Float32Array,3,t,n?n.startBuffer.ref.value:e),i=gh.create(Float32Array,3,t,n?n.endBuffer.ref.value:e),a=gh.create(Float32Array,1,t,n?n.scaleBuffer.ref.value:e),s=gh.create(Float32Array,1,t,n?n.capBuffer.ref.value:e),l=gh.create(Float32Array,1,t,n?n.colorModeBuffer.ref.value:e),c=(e,t,n,c,u,d,A,f,p,h,g)=>{for(let m=0;m<6;++m)coe(o,e,t,n),coe(i,c,u,d),loe(r,g),loe(a,A),loe(s,(f?1:0)+(p?2:0)),loe(l,h)},u=(e,t,n,r,o,i,a,s,l)=>{const u=qh.distance(e,t),d=n%2!==0,A=Math.floor((n+1)/2),f=u/(n+.5);let p=2;qh.setMagnitude(soe,qh.sub(soe,t,e),f),qh.copy(ioe,e);for(let h=0;h<A;++h)qh.add(ioe,ioe,soe),d&&h===A-1?(qh.copy(aoe,t),a||(i=!1)):qh.add(aoe,ioe,soe),s&&(p=qh.distance(e,aoe)/(2*u)),c(ioe[0],ioe[1],ioe[2],aoe[0],aoe[1],aoe[2],r,o,i,p,l),qh.add(ioe,ioe,soe)};return{add:c,addFixedCountDashes:u,addFixedLengthDashes:(e,t,n,r,o,i,a,s)=>{const l=qh.distance(e,t);u(e,t,l/n,r,o,i,!0,a,s)},getCylinders:()=>{const e=r.elementCount/6,t=gh.compact(r,!0),c=gh.compact(o,!0),u=gh.compact(i,!0),d=gh.compact(a,!0),A=gh.compact(s,!0),f=gh.compact(l,!0),p=n&&e<=n.cylinderCount?n.mappingBuffer.ref.value:new Float32Array(18*e),h=n&&e<=n.cylinderCount?n.indexBuffer.ref.value:new Uint32Array(12*e);return(!n||e>n.cylinderCount)&&function(e,t,n){for(let r=0;r<e;++r){const e=18*r;t[e]=-1,t[e+1]=1,t[e+2]=-1,t[e+3]=-1,t[e+4]=-1,t[e+5]=-1,t[e+6]=1,t[e+7]=1,t[e+8]=-1,t[e+9]=1,t[e+10]=1,t[e+11]=1,t[e+12]=1,t[e+13]=-1,t[e+14]=-1,t[e+15]=1,t[e+16]=-1,t[e+17]=1}for(let r=0;r<e;++r){const e=6*r,t=12*r;n[t]=e,n[t+1]=e+1,n[t+2]=e+2,n[t+3]=e+1,n[t+4]=e+4,n[t+5]=e+2,n[t+6]=e+2,n[t+7]=e+4,n[t+8]=e+3,n[t+9]=e+4,n[t+10]=e+5,n[t+11]=e+3}}(e,p,h),zK.create(p,h,t,c,u,d,A,f,e,n)}}}}(uoe||(uoe={}));const doe={linkScale:U_.Numeric(.45,{min:0,max:1,step:.01}),linkSpacing:U_.Numeric(1,{min:0,max:2,step:.01}),linkCap:U_.Boolean(!1),aromaticScale:U_.Numeric(.3,{min:0,max:1,step:.01}),aromaticSpacing:U_.Numeric(1.5,{min:0,max:3,step:.01}),aromaticDashCount:U_.Numeric(2,{min:1,max:6,step:1}),dashCount:U_.Numeric(4,{min:0,max:10,step:1}),dashScale:U_.Numeric(.8,{min:0,max:2,step:.1}),dashCap:U_.Boolean(!0),stubCap:U_.Boolean(!0),radialSegments:U_.Numeric(16,{min:2,max:56,step:2},Fk.CustomQualityParamInfo),colorMode:U_.Select("default",U_.arrayToOptions(["default","interpolate"]),Fk.ShadingCategory)},Aoe=(U_.getDefaultValues(doe),{linkScale:U_.Numeric(.5,{min:0,max:1,step:.1}),linkSpacing:U_.Numeric(.1,{min:0,max:2,step:.01}),aromaticDashCount:U_.Numeric(2,{min:1,max:6,step:1}),dashCount:U_.Numeric(4,{min:0,max:10,step:1})}),foe=(U_.getDefaultValues(Aoe),qh()),poe=qh(),hoe=qh(),goe=qh.create(0,1,0);function moe(e,t,n,r){qh.normalize(poe,qh.sub(poe,t,n)),null!==r?qh.sub(hoe,t,r):qh.copy(hoe,t),qh.normalize(hoe,hoe);let o=qh.dot(poe,hoe);return 1-Math.abs(o)<1e-5&&(qh.set(hoe,1,0,0),o=qh.dot(poe,hoe),1-Math.abs(o)<1e-5&&(qh.set(hoe,0,1,0),o=qh.dot(poe,hoe))),qh.setMagnitude(poe,poe,o),qh.sub(hoe,hoe,poe),qh.normalize(e,hoe)}const yoe=qh.scale,voe=qh.add,boe=qh.sub,Coe=qh.setMagnitude,Ioe=qh.dot;function Eoe(e,t,n,r){const{linkCount:o,referencePosition:i,position:a,style:s,radius:l,ignore:c,stub:u}=t;if(!o)return{mesh:RY.createEmpty(r)};const{linkScale:d,linkSpacing:A,radialSegments:f,linkCap:p,aromaticScale:h,aromaticSpacing:g,aromaticDashCount:m,dashCount:y,dashScale:v,dashCap:b,stubCap:C}=n,I=2*f*o*2,E=ZX.createState(I,I/4,r),x=qh(),B=qh(),w=qh(),_=qh();let S=0;const D={radiusTop:1,radiusBottom:1,radialSegments:f,topCap:p,bottomCap:p};for(let Q=0,M=o;Q<M;++Q){if(c&&c(Q))continue;a(x,B,Q,!0),voe(_,_,x),voe(_,_,B),S+=2,boe(foe,B,x);const e=Ioe(foe,goe)>0,t=l(Q),n=s?s(Q):0,r=C&&!!u&&u(Q),[o,f]=e?[r,p]:[p,r];if(E.currentGroup=Q,0===n)D.radiusTop=D.radiusBottom=t,D.topCap=o,D.bottomCap=f,PX(E,x,B,.5,D);else if(1===n)D.radiusTop=D.radiusBottom=t*v,D.topCap=D.bottomCap=b,FX(E,x,B,.5,y,r,D);else if(2===n||3===n||4===n||5===n||7===n||8===n){const s=2===n||3===n?2:4===n||5===n?3:1.5,l=t*(d/(.5*s)),c=(t-l)*A;if(moe(w,x,B,i?i(Q):null),D.topCap=o,D.bottomCap=f,7===n||8===n){D.radiusTop=D.radiusBottom=t,PX(E,x,B,.5,D);const e=t+h*t+h*t*g;a(x,B,Q,!1),Coe(foe,boe(foe,B,x),.5*t),voe(x,x,foe),boe(B,B,foe),D.radiusTop=D.radiusBottom=t*h,D.topCap=D.bottomCap=b,Coe(w,w,e),boe(x,x,w),boe(B,B,w),FX(E,x,B,.5,m,r,D),8===n&&(Coe(w,w,2*e),voe(x,x,w),voe(B,B,w),FX(E,x,B,.5,m,r,D))}else if(3===n||5===n){const n=t+l+d*t*A;Coe(w,w,n),D.radiusTop=D.radiusBottom=t,PX(E,x,B,.5,D),yoe(foe,foe,A*d*.2),voe(x,x,foe),boe(B,B,foe),D.radiusTop=D.radiusBottom=l,D.topCap=e?r:b,D.bottomCap=e?b:r,Coe(w,w,n),boe(x,x,w),boe(B,B,w),PX(E,x,B,.5,D),3===s&&(Coe(w,w,2*n),voe(x,x,w),voe(B,B,w),PX(E,x,B,.5,D))}else Coe(w,w,c),D.radiusTop=D.radiusBottom=l,3===s&&PX(E,x,B,.5,D),OX(E,x,B,.5,w,D)}else 6===n&&(yoe(foe,foe,.475),voe(x,x,foe),boe(B,B,foe),D.radiusTop=D.radiusBottom=t,D.topCap=o,D.bottomCap=f,PX(E,x,B,.5,D))}const T=r?YT.clone(r.boundingSphere):void 0,k=ZX.getMesh(E);return 0===S?{mesh:k}:(qh.scale(_,_,1/S),T&&qh.distance(_,T.center)/T.radius<.1?{mesh:k,boundingSphere:T}:{mesh:k})}function xoe(e,t,n,r){const{linkCount:o,referencePosition:i,position:a,style:s,radius:l,ignore:c,stub:u}=t;if(!o)return{cylinders:zK.createEmpty(r)};const{linkScale:d,linkSpacing:A,linkCap:f,aromaticScale:p,aromaticSpacing:h,aromaticDashCount:g,dashCount:m,dashScale:y,dashCap:v,stubCap:b,colorMode:C}=n,I="interpolate"===C,E=!0===I?3:2,x=2*o,B=uoe.create(x,x/4,r),w=qh(),_=qh(),S=qh(),D=qh(),T=qh();let k=0;for(let R=0,P=o;R<P;++R){if(c&&c(R))continue;a(w,_,R,!0),voe(T,T,w),voe(T,T,_),k+=2;const e=l(R),t=s?s(R):0,n=b&&!!u&&u(R);if(0===t)yoe(S,voe(S,w,_),.5),B.add(w[0],w[1],w[2],S[0],S[1],S[2],1,f,n,E,R);else if(1===t)yoe(S,voe(S,w,_),.5),B.addFixedCountDashes(w,S,m,y,v,v,n,I,R);else if(2===t||3===t||4===t||5===t||7===t||8===t){const r=2===t||3===t?2:4===t||5===t?3:1.5,o=d/(.5*r),s=(e-o*e)*A;if(yoe(S,voe(S,w,_),.5),moe(D,w,_,i?i(R):null),7===t||8===t){B.add(w[0],w[1],w[2],S[0],S[1],S[2],1,f,n,E,R);const r=e+p*e+p*e*h;a(w,_,R,!1),Coe(foe,boe(foe,_,w),.5*e),voe(w,w,foe),Coe(D,D,r),boe(w,w,D),boe(S,S,D),B.addFixedCountDashes(w,S,g,p,v,v,n,I,R),8===t&&(Coe(D,D,2*r),voe(w,w,D),voe(S,S,D),B.addFixedCountDashes(w,S,g,p,v,v,n,I,R))}else if(3===t||5===t){Coe(D,D,e+o*e+d*e*A),B.add(w[0],w[1],w[2],S[0],S[1],S[2],1,f,n,E,R),Coe(foe,boe(foe,w,S),e/1.5),boe(w,w,foe),3===r&&B.add(w[0]+D[0],w[1]+D[1],w[2]+D[2],S[0]+D[0],S[1]+D[1],S[2]+D[2],o,f,n,E,R),B.add(w[0]-D[0],w[1]-D[1],w[2]-D[2],S[0]-D[0],S[1]-D[1],S[2]-D[2],o,v,n,E,R)}else Coe(D,D,s),3===r&&B.add(w[0],w[1],w[2],S[0],S[1],S[2],o,f,n,E,R),B.add(w[0]+D[0],w[1]+D[1],w[2]+D[2],S[0]+D[0],S[1]+D[1],S[2]+D[2],o,f,n,E,R),B.add(w[0]-D[0],w[1]-D[1],w[2]-D[2],S[0]-D[0],S[1]-D[1],S[2]-D[2],o,f,n,E,R)}else 6===t&&(yoe(foe,boe(foe,S,w),.475),voe(w,w,foe),boe(S,S,foe),B.add(w[0],w[1],w[2],S[0],S[1],S[2],1,f,n,E,R))}const Q=r?YT.clone(r.boundingSphere):void 0,M=B.getCylinders();return 0===k?{cylinders:M}:(qh.scale(T,T,1/k),Q&&qh.distance(T,Q.center)/Q.radius<.1?{cylinders:M,boundingSphere:Q}:{cylinders:M})}function Boe(e,t,n,r){const{linkCount:o,referencePosition:i,position:a,style:s,ignore:l}=t;if(!o)return{lines:wW.createEmpty(r)};const{linkScale:c,linkSpacing:u,aromaticDashCount:d,dashCount:A}=n,f=2*o,p=BW.create(f,f/4,r),h=qh(),g=qh(),m=qh(),y=qh(),v=qh();let b=0;for(let E=0,x=o;E<x;++E){if(l&&l(E))continue;a(h,g,E,!0),voe(v,v,h),voe(v,v,g),b+=2;const e=s?s(E):0;if(0===e)yoe(m,voe(m,h,g),.5),p.add(h[0],h[1],h[2],m[0],m[1],m[2],E);else if(1===e)yoe(m,voe(m,h,g),.5),p.addFixedCountDashes(h,m,A,E);else if(2===e||3===e||4===e||5===e||7===e||8===e){const t=2===e||3===e?2:4===e||5===e?3:1.5,n=(1-c/(.5*t)*1)*u;if(yoe(m,voe(m,h,g),.5),moe(y,h,g,i?i(E):null),7===e||8===e){p.add(h[0],h[1],h[2],m[0],m[1],m[2],E);const t=4.5*n;Coe(foe,boe(foe,g,h),.5*t),voe(h,h,foe),Coe(y,y,t),boe(h,h,y),boe(m,m,y),p.addFixedCountDashes(h,m,d,E),8===e&&(Coe(y,y,2*t),voe(h,h,y),voe(m,m,y),p.addFixedCountDashes(h,m,d,E))}else 3===e||5===e?(Coe(y,y,3*n),p.add(h[0],h[1],h[2],m[0],m[1],m[2],E),yoe(foe,boe(foe,h,m),u*c),boe(h,h,foe),3===t&&p.add(h[0]+y[0],h[1]+y[1],h[2]+y[2],m[0]+y[0],m[1]+y[1],m[2]+y[2],E),p.add(h[0]-y[0],h[1]-y[1],h[2]-y[2],m[0]-y[0],m[1]-y[1],m[2]-y[2],E)):(Coe(y,y,1.5*n),3===t&&p.add(h[0],h[1],h[2],m[0],m[1],m[2],E),p.add(h[0]+y[0],h[1]+y[1],h[2]+y[2],m[0]+y[0],m[1]+y[1],m[2]+y[2],E),p.add(h[0]-y[0],h[1]-y[1],h[2]-y[2],m[0]-y[0],m[1]-y[1],m[2]-y[2],E))}else 6===e&&(yoe(foe,boe(foe,m,h),.475),voe(h,h,foe),boe(m,m,foe),p.add(h[0],h[1],h[2],m[0],m[1],m[2],E))}const C=r?YT.clone(r.boundingSphere):void 0,I=p.getLines();return 0===b?{lines:I}:(qh.scale(v,v,1/b),C&&qh.distance(v,C.center)/C.radius<.1?{lines:I,boundingSphere:C}:{lines:I})}const woe={sizeFactor:U_.Numeric(.3,{min:0,max:10,step:.01}),dashCount:U_.Numeric(6,{min:1,max:10,step:1}),dashScale:U_.Numeric(.4,{min:0,max:2,step:.1}),ignoreHydrogens:U_.Boolean(!1),ignoreHydrogensVariant:U_.Select("all",U_.arrayToOptions(["all","non-polar"])),includeParent:U_.Boolean(!1),parentDisplay:U_.Select("stub",U_.arrayToOptions(["stub","full","between"]),{description:'Only has an effect when "includeParent" is enabled. "Stub" shows just the child side of interactions to the parent. "Full" shows both sides of interactions to the parent. "Between" shows only interactions to the parent.'})};async function _oe(e,t,n,r,o,i){if(!BO.isAtomic(t))return RY.createEmpty(i);const{child:a}=n,s=null===a||void 0===a?void 0:a.unitMap.get(t.id);if(a&&!s)return RY.createEmpty(i);const l=Vk.create(n,t),c=ooe.get(n).value,u=c.unitsFeatures.get(t.id),d=c.unitsContacts.get(t.id),{x:A,y:f,z:p,members:h,offsets:g,types:m}=u,{edgeCount:y,a:v,b:b,edgeProps:{flag:C,type:I}}=d,{sizeFactor:E,ignoreHydrogens:x,ignoreHydrogensVariant:B,parentDisplay:w}=o;if(!y)return RY.createEmpty(i);const{elements:_,conformation:S}=t,D=qh(),T=qh(),k=qh(),Q={linkCount:2*y,position:(e,r,o)=>{const i=I[o];if(x&&"all"===B||i!==Ane.HydrogenBond&&(i!==Ane.WeakHydrogenBond||"non-polar"===B))qh.set(e,A[v[o]],f[v[o]],p[v[o]]),qh.set(r,A[b[o]],f[b[o]],p[b[o]]);else{const a=h[g[v[o]]],s=h[g[b[o]]];S.invariantPosition(_[a],T),S.invariantPosition(_[s],k);let l=qh.distance(T,k),c=l;qh.copy(e,T),qh.copy(r,k);const u=i===Ane.HydrogenBond?4:9;m[g[v[o]]]===u?Pee(t,a,((r,o)=>{if(ite(n,t,_[o],"all")){S.invariantPosition(_[o],D);const t=qh.distance(D,k);t<l&&(l=t,qh.copy(e,D))}})):Pee(t,s,((e,o)=>{if(ite(n,t,_[o],"all")){S.invariantPosition(_[o],D);const e=qh.distance(D,T);e<c&&(c=e,qh.copy(r,D))}}))}},style:e=>1,radius:e=>{l.element=_[h[g[v[e]]]];const t=r.size.size(l);l.element=_[h[g[b[e]]]];const n=r.size.size(l);return Math.min(t,n)*E},ignore:e=>{if(C[e]===dne.Filtered)return!0;if(s)if("stub"===w){const t=v[e];for(let e=g[t],n=g[t+1];e<n;++e){const t=_[h[g[e]]];if(!Em.has(s.elements,t))return!0}}else{if("full"===w||"between"===w){let t=!1,n=!1;const r=v[e];for(let e=g[r],i=g[r+1];e<i;++e){const n=_[h[g[e]]];Em.has(s.elements,n)||(t=!0)}const o=b[e];for(let e=g[o],i=g[o+1];e<i;++e){const t=_[h[g[e]]];Em.has(s.elements,t)||(n=!0)}return"full"===w?t&&n:t===n}Zh()}return!1}},{mesh:M,boundingSphere:R}=Eoe(0,Q,o,i);if(R)M.setBoundingSphere(R);else if(M.triangleCount>0){const e=YT.expand(YT(),(null!==s&&void 0!==s?s:t).boundary.sphere,1*E);M.setBoundingSphere(e)}return M}const Soe={...Dte,...doe,...woe};function Doe(e){return Tte({defaultProps:U_.getDefaultValues(Soe),createGeometry:_oe,createLocationIterator:Moe,getLoci:Toe,eachLocation:Qoe,setUpdateState:(e,t,n,r,o,i,a)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.dashCount!==n.dashCount||t.dashScale!==n.dashScale||t.dashCap!==n.dashCap||t.radialSegments!==n.radialSegments||t.ignoreHydrogens!==n.ignoreHydrogens||t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant||t.parentDisplay!==n.parentDisplay;const s=ooe.get(i.structure).version;e.info.interactionsHash!==s&&(e.createGeometry=!0,e.updateTransform=!0,e.updateColor=!0,e.info.interactionsHash=s)}},e)}function Toe(e,t,n){const{objectId:r,instanceId:o,groupId:i}=e;if(n===r){const{structure:e,group:n}=t,r=e.unitMap.get(n.units[o].id),a=ooe.get(e).value,{a:s,b:l}=a.unitsContacts.get(r.id);return Wre.Loci(e,a,[{unitA:r,indexA:s[i],unitB:r,indexB:l[i]},{unitA:r,indexA:l[i],unitB:r,indexB:s[i]}])}return S5}const koe=new Set;function Qoe(e,t,n,r){let o=!1;if(Wre.isLoci(e)){const{structure:r,group:i}=t;if(!aG.areEquivalent(e.data.structure,r))return!1;const a=ooe.get(r).value;if(e.data.interactions!==a)return!1;const s=i.units[0],l=a.unitsContacts.get(s.id),c=2*l.edgeCount;for(const t of e.elements){if(t.unitA!==t.unitB)continue;const e=i.unitIndexMap.get(t.unitA.id);if(void 0!==e){const r=l.getDirectedEdgeIndex(t.indexA,t.indexB);-1!==r&&n(Gg.ofSingleton(e*c+r))&&(o=!0)}}}else if(cG.is(e)){const{structure:i,group:a}=t;if(!aG.areEquivalent(e.structure,i))return!1;const s=ooe.get(i).value;if(!s)return!1;const l=a.units[0],c=s.unitsContacts.get(l.id),u=s.unitsFeatures.get(l.id),d=2*c.edgeCount,{offset:A}=c,{offsets:f,indices:p}=u.elementsIndex,{members:h,offsets:g}=u;for(const t of e.elements){const e=a.unitIndexMap.get(t.unit.id);void 0!==e&&(ey.forEach(t.indices,(e=>{for(let t=f[e],n=f[e+1];t<n;++t){const e=p[t];for(let t=A[e],n=A[e+1];t<n;++t)koe.add(t)}})),koe.forEach((i=>{if(r){const e=c.a[i];for(let r=g[e],o=g[e+1];r<o;++r)if(!ey.has(t.indices,h[r]))return;const n=c.b[i];for(let r=g[n],o=g[n+1];r<o;++r)if(!ey.has(t.indices,h[r]))return}n(Gg.ofSingleton(e*d+i))&&(o=!0)})),koe.clear())}}return o}function Moe(e){const{structure:t,group:n}=e,r=n.units[0],o=ooe.get(t).value,i=o.unitsContacts.get(r.id),a=2*i.edgeCount,s=n.units.length,l=Wre.Location(o,t),{element:c}=l;return xT(a,s,1,((e,t)=>{const r=n.units[t];return c.unitA=r,c.indexA=i.a[e],c.unitB=r,c.indexB=i.b[e],l}))}function Roe(e,t,n,r,o){if(!t.hasAtomic)return RY.createEmpty(o);const i=Vk.create(t),a=ooe.get(t).value,{contacts:s,unitsFeatures:l}=a,{edgeCount:c,edges:u}=s,{sizeFactor:d,ignoreHydrogens:A,ignoreHydrogensVariant:f,parentDisplay:p}=r;if(!c)return RY.createEmpty(o);const{child:h}=t,g=qh(),m=qh(),y=qh(),v={linkCount:c,position:(e,n,r)=>{const{unitA:o,indexA:i,unitB:a,indexB:s,props:{type:c}}=u[r],d=l.get(o),p=l.get(a),h=t.unitMap.get(o),v=t.unitMap.get(a);if(A&&"all"===f||c!==Ane.HydrogenBond&&(c!==Ane.WeakHydrogenBond||"non-polar"===f))qh.set(e,d.x[i],d.y[i],d.z[i]),qh.transformMat4(e,e,h.conformation.operator.matrix),qh.set(n,p.x[s],p.y[s],p.z[s]),qh.transformMat4(n,n,v.conformation.operator.matrix);else{const r=d.members[d.offsets[i]],o=p.members[p.offsets[s]];h.conformation.position(h.elements[r],m),v.conformation.position(v.elements[o],y);let a=qh.distance(m,y),l=a;qh.copy(e,m),qh.copy(n,y);const u=c===Ane.HydrogenBond?4:9;d.types[d.offsets[i]]===u?Oee(t,h,r,((n,r)=>{const o=n.elements[r];if(ite(t,n,o,"all")){n.conformation.position(o,g);const t=qh.distance(g,y);t<a&&(a=t,qh.copy(e,g))}})):Oee(t,v,o,((e,r)=>{const o=e.elements[r];if(ite(t,e,o,"all")){e.conformation.position(o,g);const t=qh.distance(g,m);t<l&&(l=t,qh.copy(n,g))}}))}},style:e=>1,radius:e=>{const r=u[e],o=l.get(r.unitA);i.unit=t.unitMap.get(r.unitA),i.element=i.unit.elements[o.members[o.offsets[r.indexA]]];const a=n.size.size(i),s=l.get(r.unitB);i.unit=t.unitMap.get(r.unitB),i.element=i.unit.elements[s.members[s.offsets[r.indexB]]];const c=n.size.size(i);return Math.min(a,c)*d},ignore:e=>{if(u[e].props.flag===dne.Filtered)return!0;if(h){const n=u[e];if("stub"===p){const e=h.unitMap.get(n.unitA);if(!e)return!0;const r=t.unitMap.get(n.unitA),{offsets:o,members:i}=l.get(n.unitA);for(let t=o[n.indexA],a=o[n.indexA+1];t<a;++t){const n=r.elements[i[t]];if(!Em.has(e.elements,n))return!0}}else{if("full"===p||"between"===p){let e=!1,r=!1;const o=h.unitMap.get(n.unitA);if(o){const r=t.unitMap.get(n.unitA),{offsets:i,members:a}=l.get(n.unitA);for(let t=i[n.indexA],s=i[n.indexA+1];t<s;++t){const n=r.elements[a[t]];Em.has(o.elements,n)||(e=!0)}}else e=!0;const i=h.unitMap.get(n.unitB);if(i){const e=t.unitMap.get(n.unitB),{offsets:o,members:a}=l.get(n.unitB);for(let t=o[n.indexB],s=o[n.indexB+1];t<s;++t){const n=e.elements[a[t]];Em.has(i.elements,n)||(r=!0)}}else r=!0;return"full"===p?e&&r:e===r}Zh()}}return!1}},{mesh:b,boundingSphere:C}=Eoe(0,v,r,o);if(C)b.setBoundingSphere(C);else if(b.triangleCount>0){const{child:e}=t,n=YT.expand(YT(),(null!==e&&void 0!==e?e:t).boundary.sphere,1*d);b.setBoundingSphere(n)}return b}const Poe={...vte,...doe,...woe};function Ooe(e){return bte({defaultProps:U_.getDefaultValues(Poe),createGeometry:Roe,createLocationIterator:Goe,getLoci:Foe,eachLocation:Uoe,setUpdateState:(e,t,n,r,o,i,a)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.dashCount!==n.dashCount||t.dashScale!==n.dashScale||t.dashCap!==n.dashCap||t.radialSegments!==n.radialSegments||t.ignoreHydrogens!==n.ignoreHydrogens||t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant||t.parentDisplay!==n.parentDisplay;const s=ooe.get(i).version;e.info.interactionsHash!==s&&(e.createGeometry=!0,e.updateTransform=!0,e.updateColor=!0,e.info.interactionsHash=s)}},e)}function Foe(e,t,n){const{objectId:r,groupId:o}=e;if(n===r){const e=ooe.get(t).value,n=e.contacts.edges[o],r=t.unitMap.get(n.unitA),i=t.unitMap.get(n.unitB);return Wre.Loci(t,e,[{unitA:r,indexA:n.indexA,unitB:i,indexB:n.indexB},{unitA:i,indexA:n.indexB,unitB:r,indexB:n.indexA}])}return S5}const Noe=new Map,Loe=new Set;function Uoe(e,t,n,r){let o=!1;if(Wre.isLoci(e)){if(!aG.areEquivalent(e.data.structure,t))return!1;const r=ooe.get(t).value;if(e.data.interactions!==r)return!1;const{contacts:i}=r;for(const t of e.elements){const e=i.getEdgeIndex(t.indexA,t.unitA.id,t.indexB,t.unitB.id);-1!==e&&n(Gg.ofSingleton(e))&&(o=!0)}}else if(cG.is(e)){if(!aG.areEquivalent(e.structure,t))return!1;if(r&&1===e.elements.length)return!1;const i=ooe.get(t).value;if(!i)return!1;const{contacts:a,unitsFeatures:s}=i;for(const t of e.elements)Noe.set(t.unit.id,t.indices);for(const t of e.elements){const{unit:e}=t;BO.isAtomic(e)&&ey.forEach(t.indices,(t=>{for(const n of a.getContactIndicesForElement(t,e))Loe.add(n)}))}Loe.forEach((e=>{if(r){const{indexA:t,unitA:n,indexB:r,unitB:o}=a.edges[e],i=Noe.get(n),l=Noe.get(o);if(!i||!l)return;const{offsets:c,members:u}=s.get(n);for(let e=c[t],a=c[t+1];e<a;++e)if(!ey.has(i,u[e]))return;const{offsets:d,members:A}=s.get(o);for(let e=d[r],a=d[r+1];e<a;++e)if(!ey.has(l,A[e]))return}n(Gg.ofSingleton(e))&&(o=!0)})),Noe.clear(),Loe.clear()}return o}function Goe(e){const t=ooe.get(e).value,{contacts:n}=t,r=n.edgeCount,o=Wre.Location(t,e),{element:i}=o;return xT(r,1,1,(t=>{const r=n.edges[t];return i.unitA=e.unitMap.get(r.unitA),i.indexA=r.indexA,i.unitB=e.unitMap.get(r.unitB),i.indexB=r.indexB,o}),!0)}const joe={"intra-unit":(e,t)=>_te("Intra-unit interactions cylinder",e,t,Doe),"inter-unit":(e,t)=>wee("Inter-unit interactions cylinder",e,t,Ooe)},zoe={...Soe,...Poe,unitKinds:lte(["atomic"]),sizeFactor:U_.Numeric(.2,{min:.01,max:1,step:.01}),visuals:U_.MultiSelect(["intra-unit","inter-unit"],U_.objectToOptions(joe))};const Hoe={name:"interactions",label:"Non-covalent Interactions",description:"Displays non-covalent interactions as dashed cylinders.",factory:function(e,t){return b6.createMulti("Interactions",e,t,Ute,joe)},getParams:function(e,t){return U_.clone(zoe)},defaultValues:U_.getDefaultValues(zoe),defaultColorTheme:{name:"interaction-type"},defaultSizeTheme:{name:"uniform"},isApplicable:e=>e.elementCount>0&&ooe.isApplicable(e),ensureCustomProperties:{attach:(e,t)=>ooe.attach(e,t,void 0,!0),detach:e=>ooe.ref(e,!1)},getData:(e,t)=>t.includeParent?e.asParent():e,mustRecreate:(e,t)=>e.includeParent!==t.includeParent},Voe=Jp(13421772),qoe={HydrogenBond:2851770,Hydrophobic:8421504,HalogenBond:4259775,Ionic:15779860,MetalCoordination:9191577,CationPi:16744448,PiStacking:9220966,WeakHydrogenBond:12967404},Yoe=[["Hydrogen Bond",qoe.HydrogenBond],["Hydrophobic",qoe.Hydrophobic],["Halogen Bond",qoe.HalogenBond],["Ionic",qoe.Ionic],["Metal Coordination",qoe.MetalCoordination],["Cation Pi",qoe.CationPi],["Pi Stacking",qoe.PiStacking],["Weak HydrogenBond",qoe.WeakHydrogenBond]];function Xoe(e){switch(e){case Ane.HydrogenBond:return qoe.HydrogenBond;case Ane.Hydrophobic:return qoe.Hydrophobic;case Ane.HalogenBond:return qoe.HalogenBond;case Ane.Ionic:return qoe.Ionic;case Ane.MetalCoordination:return qoe.MetalCoordination;case Ane.CationPi:return qoe.CationPi;case Ane.PiStacking:return qoe.PiStacking;case Ane.WeakHydrogenBond:return qoe.WeakHydrogenBond;case Ane.Unknown:return Voe}}const Woe={};const Koe={name:"interaction-type",label:"Interaction Type",category:d5.Category.Misc,factory:function e(t,n){let r;const o=t.structure?ooe.get(t.structure):void 0,i=o?Qh(o.id,o.version):-1;return r=o&&o.value?e=>{if(Wre.isLocation(e)){const{unitsContacts:t,contacts:n}=e.data.interactions,{unitA:r,unitB:o,indexA:i,indexB:a}=e.element;if(r===o){const e=t.get(r.id),n=e.getDirectedEdgeIndex(i,a);return Xoe(e.edgeProps.type[n])}{const e=n.getEdgeIndex(i,r.id,a,o.id);return Xoe(n.edges[e].props.type)}}return Voe}:()=>Voe,{factory:e,granularity:"group",color:r,props:n,contextHash:i,description:"Assigns colors according the interaction type of a link.",legend:hh(Yoe)}},getParams:function(e){return Woe},defaultValues:U_.getDefaultValues(Woe),isApplicable:e=>!!e.structure,ensureCustomProperties:{attach:(e,t)=>t.structure?ooe.attach(e,t.structure,void 0,!0):Promise.resolve(),detach:e=>e.structure&&ooe.ref(e.structure,!1)}};function Joe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=n;return"string"===typeof r.type||"string"===typeof r.color||"string"===typeof r.size?function(e,t,n){const r=n.type&&e.representation.structure.registry.get(n.type)||e.representation.structure.registry.default.provider,o=n.color&&e.representation.structure.themes.colorThemeRegistry.get(n.color)||e.representation.structure.themes.colorThemeRegistry.get(r.defaultColorTheme.name),i=n.size&&e.representation.structure.themes.sizeThemeRegistry.get(n.size)||e.representation.structure.themes.sizeThemeRegistry.get(r.defaultSizeTheme.name);return eie(e,t,{type:r,typeParams:n.typeParams,color:o,colorParams:n.colorParams,size:i,sizeParams:n.sizeParams})}(e,t||aG.Empty,n):eie(e,t||aG.Empty,n)}function Zoe(e,t,n,r,o){const{registry:i,themes:a}=e.representation.structure,s=i.get(n||i.default.name),l=a.colorThemeRegistry.get(r||s.defaultColorTheme.name),c=U_.getDefaultValues(l.getParams({structure:t||aG.Empty}));return l.name===s.defaultColorTheme.name&&Object.assign(c,s.defaultColorTheme.props),{name:l.name,params:Object.assign(c,o)}}function $oe(e,t,n,r,o){const{registry:i,themes:a}=e.representation.structure,s=i.get(n||i.default.name),l=a.sizeThemeRegistry.get(r||s.defaultSizeTheme.name),c=U_.getDefaultValues(l.getParams({structure:t||aG.Empty}));return l.name===s.defaultSizeTheme.name&&Object.assign(c,s.defaultSizeTheme.props),{name:l.name,params:Object.assign(c,o)}}function eie(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{themes:r}=e.representation.structure,o={structure:t},i=n.type||e.representation.structure.registry.default.provider,a=U_.getDefaultValues(i.getParams(r,t)),s=Object.assign(a,n.typeParams),l=n.color||r.colorThemeRegistry.get(i.defaultColorTheme.name),c=U_.getDefaultValues(l.getParams(o));l.name===i.defaultColorTheme.name&&Object.assign(c,i.defaultColorTheme.props);const u=Object.assign(c,n.colorParams),d=n.size||r.sizeThemeRegistry.get(i.defaultSizeTheme.name),A=U_.getDefaultValues(d.getParams(o));d.name===i.defaultSizeTheme.name&&Object.assign(A,i.defaultSizeTheme.props);const f=Object.assign(A,n.sizeParams);return{type:{name:i.name,params:s},colorTheme:{name:l.name,params:u},sizeTheme:{name:d.name,params:f}}}var tie;!function(e){class t extends(Jz.Create({name:"Root",typeClass:"Root"})){}e.Root=t;class n extends(Jz.Create({name:"Category",typeClass:"Object"})){}e.Category=n;class r extends(Jz.CreateBehavior({name:"Behavior"})){}e.Behavior=r,e.Categories={common:"Common",representation:"Representation",interaction:"Interaction","custom-props":"Custom Properties",misc:"Miscellaneous"},e.CreateCategory=Zz.BuiltIn({name:"create-behavior-category",display:{name:"Behavior Category"},from:t,to:n,params:{label:U_.Text("",{isHidden:!0})}})({apply(e){let{params:t}=e;return new n({},{label:t.label})}});const o=new Map;e.getCategoryId=function(e){return o.get(e.id)},e.create=function(e){const n=Zz.CreateBuiltIn({name:e.name,display:e.display,from:[t],to:[r],params:e.params,apply(t,n){let{params:o}=t;const i=e.label?e.label(o):{label:e.display.name,description:e.display.description};return new r(new e.ctor(n,o),i)},update(e){let{b:t,newParams:n}=e;return Tw.create("Update Behavior",(async()=>{if(!t.data.update)return j_.UpdateResult.Unchanged;return await t.data.update(n)?j_.UpdateResult.Updated:j_.UpdateResult.Unchanged}))},canAutoUpdate:e.canAutoUpdate});return o.set(n.id,e.category),n},e.simpleCommandHandler=function(e,t){return class{register(){this.sub=e.subscribe(this.ctx,(e=>t(e,this.ctx)))}dispose(){this.sub&&this.sub.unsubscribe(),this.sub=void 0}constructor(e){this.ctx=e,this.sub=void 0}}};e.Handler=class{subscribeCommand(e,t){this.subs.push(e.subscribe(this.ctx,t))}subscribeObservable(e,t){this.subs.push(e.subscribe(t))}track(e){this.subs.push(e)}dispose(){for(const e of this.subs)e.unsubscribe();this.subs=[]}update(e){return!Rp(e,this.params)&&(this.params=e,!0)}constructor(e,t){this.ctx=e,this.params=t,this.subs=[]}};e.WithSubscribers=class{subscribeCommand(e,t){this.subs.push(e.subscribe(this.plugin,t))}subscribeObservable(e,t){const n=e.subscribe(t);return this.subs.push(n),{unsubscribe:()=>{const e=this.subs.indexOf(n);e>=0&&(this.subs.splice(e,1),n.unsubscribe())}}}dispose(){for(const e of this.subs)e.unsubscribe();this.subs=[]}constructor(e,t){this.plugin=e,this.params=t,this.subs=[]}}}(tie||(tie={}));class nie{constructor(){this.subs=void 0}subscribe(e,t){"undefined"===typeof this.subs&&(this.subs=[]);let n=e.subscribe(t);return this.subs.push(n),{unsubscribe:()=>{n&&this.subs&&nS(this.subs,n)&&(n.unsubscribe(),n=void 0)}}}get ev(){return this._ev||(this._ev=WS.create())}dispose(){if(this._ev&&this._ev.dispose(),this.subs){for(const e of this.subs)e.unsubscribe();this.subs=void 0}}}class rie extends nie{updateState(){const e=this.state;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o=$B(e,n);return o!==e&&(this._state=o,!0)}get state(){return this._state}constructor(e){super(),this._state=e}}var oie="4.5.0";new Date("undefined"!==typeof __MOLSTAR_DEBUG_TIMESTAMP__?__MOLSTAR_DEBUG_TIMESTAMP__:1722213187189);async function iie(e,t,n){return new Promise(((r,o)=>{const i=e=>{e?r(e):o("no blob returned")};HTMLCanvasElement.prototype.toBlob?e.toBlob(i,t,n):function(e,t,n,r){const o=atob(e.toDataURL(n,r).split(",")[1]),i=o.length,a=i>>2,s=new Uint8Array(i),l=new Uint32Array(s.buffer,0,a);let c=0;for(let d=0;d<a;++d)l[d]=o.charCodeAt(c++)|o.charCodeAt(c++)<<8|o.charCodeAt(c++)<<16|o.charCodeAt(c++)<<24;let u=3&i;for(;u--;)s[c]=o.charCodeAt(c++);t(new Blob([s],{type:n||"image/png"}))}(e,i,t,n)}))}class aie extends rie{getIndex(e){return this.state.entries.indexOf(e)}getEntry(e){if(e)return this.entryMap.get(e)}remove(e){const t=this.entryMap.get(e);t&&((null===t||void 0===t?void 0:t.image)&&this.plugin.managers.asset.delete(t.image),this.entryMap.delete(e),this.updateState({current:this.state.current===e?void 0:this.state.current,entries:this.state.entries.delete(this.getIndex(t))}),this.events.changed.next(void 0))}add(e){this.entryMap.set(e.snapshot.id,e),this.updateState({current:e.snapshot.id,entries:this.state.entries.push(e)}),this.events.changed.next(void 0)}replace(e,t,n){var r,o,i;const a=this.getEntry(e);if(!a)return;this.defaultSnapshotId=void 0,(null===a||void 0===a?void 0:a.image)&&this.plugin.managers.asset.delete(a.image);const s=this.getIndex(a),l=aie.Entry(t,{key:null!==(r=null===n||void 0===n?void 0:n.key)&&void 0!==r?r:a.key,name:null!==(o=null===n||void 0===n?void 0:n.name)&&void 0!==o?o:a.name,description:null!==(i=null===n||void 0===n?void 0:n.description)&&void 0!==i?i:a.description,image:null===n||void 0===n?void 0:n.image});this.entryMap.set(t.id,l),this.updateState({current:l.snapshot.id,entries:this.state.entries.set(s,l)}),this.events.changed.next(void 0)}move(e,t){const n=this.state.entries.size;if(n<2)return;const r=this.getEntry(e);if(!r)return;const o=this.getIndex(r);let i=(o+t)%n;i<0&&(i+=n);const a=this.state.entries.get(i),s=this.state.entries.asMutable();s.set(i,r),s.set(o,a),this.updateState({current:r.snapshot.id,entries:s.asImmutable()}),this.events.changed.next(void 0)}update(e,t){var n,r,o;const i=this.getIndex(e);if(i<0)return;const a=this.state.entries.set(i,{...e,key:(null===(n=t.key)||void 0===n?void 0:n.trim())||void 0,name:(null===(r=t.name)||void 0===r?void 0:r.trim())||void 0,description:(null===(o=t.description)||void 0===o?void 0:o.trim())||void 0});this.updateState({entries:a}),this.entryMap.set(e.snapshot.id,this.state.entries.get(i)),this.events.changed.next(void 0)}clear(){0!==this.state.entries.size&&(this.entryMap.forEach((e=>{(null===e||void 0===e?void 0:e.image)&&this.plugin.managers.asset.delete(e.image)})),this.entryMap.clear(),this.updateState({current:void 0,entries:Nx()}),this.events.changed.next(void 0))}applyKey(e){const t=this.state.entries.find((t=>t.key===e));t&&(this.updateState({current:t.snapshot.id}),this.events.changed.next(void 0),this.plugin.state.setSnapshot(t.snapshot))}setCurrent(e){const t=this.getEntry(e);return t&&(this.updateState({current:e}),this.events.changed.next(void 0)),t&&t.snapshot}getNextId(e,t){const n=this.state.entries.size;if(!e){if(0===n)return;const e=-1===t?n-1:0;return this.state.entries.get(e).snapshot.id}const r=this.getEntry(e);if(!r)return;let o=this.getIndex(r);return o<0?void 0:(o=(o+t)%n,o<0&&(o+=n),this.state.entries.get(o).snapshot.id)}async setStateSnapshot(e){e.version,this.clear();const t=Nx().asMutable();for(const i of e.entries)this.entryMap.set(i.snapshot.id,i),t.push(i);const n=e.current?e.current:e.entries.length>0?e.entries[0].snapshot.id:void 0;if(this.updateState({current:n,entries:t.asImmutable(),isPlaying:!1,nextSnapshotDelayInMs:e.playback?e.playback.nextSnapshotDelayInMs:aie.DefaultNextSnapshotDelayInMs}),this.events.changed.next(void 0),!n)return;const r=this.getEntry(n),o=r&&r.snapshot;return o?(await this.plugin.state.setSnapshot(o),e.playback&&e.playback.isPlaying&&this.play(!0),o):void 0}async syncCurrent(e){var t,n;const r=0===this.state.entries.size,o=1===this.state.entries.size&&this.state.current&&this.state.current===this.defaultSnapshotId;if(!r&&!o)return;const i=this.plugin.state.getSnapshot(null===e||void 0===e?void 0:e.params),a=(null!==(n=null===(t=null===e||void 0===e?void 0:e.params)||void 0===t?void 0:t.image)&&void 0!==n?n:this.plugin.state.snapshotParams.value.image)?await aie.getCanvasImageAsset(this.plugin,`${i.id}-image.png`):void 0;if(r)this.add(aie.Entry(i,{name:null===e||void 0===e?void 0:e.name,description:null===e||void 0===e?void 0:e.description,image:a}));else if(o){const e=this.getEntry(this.state.current);(null===e||void 0===e?void 0:e.image)&&this.plugin.managers.asset.delete(e.image),this.replace(this.state.current,i,{image:a})}this.defaultSnapshotId=i.id}async getStateSnapshot(e){return await this.syncCurrent(e),{timestamp:+new Date,version:oie,name:e&&e.name,description:e&&e.description,current:this.state.current,playback:{isPlaying:!(!e||!e.playOnLoad),nextSnapshotDelayInMs:this.state.nextSnapshotDelayInMs},entries:this.state.entries.valueSeq().toArray()}}async serialize(e){const t=JSON.stringify(await this.getStateSnapshot({params:null===e||void 0===e?void 0:e.params}),null,2);if((null===e||void 0===e?void 0:e.type)&&"json"!==e.type&&"molj"!==e.type){const e=new Uint8Array(sw(t));nw(e,0,t);const n={"state.json":e},r=[];for(const{asset:t,file:i}of this.plugin.managers.asset.assets)r.push([t.id,t]),n[`assets/${t.id}`]=new Uint8Array(await i.arrayBuffer());if(r.length>0){const e=JSON.stringify(r,null,2),t=new Uint8Array(sw(e));nw(t,0,e),n["assets.json"]=t}const o=await this.plugin.runTask(B_(n));return new Blob([o],{type:"application/zip"})}return new Blob([t],{type:"application/json;charset=utf-8"})}async open(e){try{const t=e.name.toLowerCase();if(t.endsWith("json")||t.endsWith("molj")){const t=await this.plugin.runTask(D_(e,"string")),n=JSON.parse(t);aie.isStateSnapshot(n)?await this.setStateSnapshot(n):aie.isStateSnapshot(n.data)?await this.setStateSnapshot(n.data):await this.plugin.state.setSnapshot(n)}else{const t=await this.plugin.runTask(D_(e,"zip")),n=Object.create(null);tw(t,((e,t)=>{if("state.json"===t||"assets.json"===t)return;const r=t.substring(t.indexOf("/")+1);n[r]=e}));const r=new File([t["state.json"]],"state.json"),o=await this.plugin.runTask(D_(r,"string"));if(t["assets.json"]){const e=new File([t["assets.json"]],"assets.json"),r=JSON.parse(await this.plugin.runTask(D_(e,"string")));for(const[t,o]of r)this.plugin.managers.asset.set(o,new File([n[t]],o.name))}const i=JSON.parse(o);await this.setStateSnapshot(i)}this.events.opened.next(void 0)}catch(l0e){console.error(l0e),this.plugin.log.error("Error reading state")}}play(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.updateState({isPlaying:!0}),e){const e=this.getEntry(this.state.current);if(!e)return void this.next();this.events.changed.next(void 0);const t=e.snapshot,n="undefined"!==typeof t.durationInMs?t.durationInMs:this.state.nextSnapshotDelayInMs;this.timeoutHandle=setTimeout(this.next,n)}else this.next()}stop(){this.updateState({isPlaying:!1}),"undefined"!==typeof this.timeoutHandle&&clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0,this.events.changed.next(void 0)}togglePlay(){this.state.isPlaying?(this.stop(),this.plugin.managers.animation.stop()):this.play()}dispose(){super.dispose(),this.entryMap.clear()}constructor(e){super({current:void 0,entries:Nx(),isPlaying:!1,nextSnapshotDelayInMs:aie.DefaultNextSnapshotDelayInMs}),this.plugin=e,this.entryMap=new Map,this.defaultSnapshotId=void 0,this.events={changed:this.ev(),opened:this.ev()},this.timeoutHandle=void 0,this.next=async()=>{this.timeoutHandle=void 0;const e=this.getNextId(this.state.current,1);if(!e||e===this.state.current)return void this.stop();const t=this.setCurrent(e);await this.plugin.state.setSnapshot(t);const n="undefined"!==typeof t.durationInMs?t.durationInMs:this.state.nextSnapshotDelayInMs;this.state.isPlaying&&(this.timeoutHandle=setTimeout(this.next,n))}}}function sie(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(l0e){const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}function lie(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"download";if(e)if("download"in HTMLAnchorElement.prototype){const n=document.createElement("a");n.download=t,n.rel="noopener","string"===typeof e?(n.href=e,sie(n)):(n.href=URL.createObjectURL(e),setTimeout((()=>URL.revokeObjectURL(n.href)),4e4),setTimeout((()=>sie(n))))}else if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(e,t);else{const t=window.navigator.userAgent,n=/Safari/i.test(t),r=/CriOS\/[\d]+/.test(t),o=e=>{var t;t=r?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),window.open(t,"_blank")||(window.location.href=t)};if((n||r)&&FileReader)if(e instanceof Blob){const t=new FileReader;t.onloadend=()=>o(t.result),t.readAsDataURL(e)}else o(e);else{const t=URL.createObjectURL("string"===typeof e?new Blob([e]):e);location.href=t,setTimeout((()=>URL.revokeObjectURL(t)),4e4)}}}function cie(e,t){return`${e}${"/"===e[e.length-1]||"/"===t[0]?"":"/"}${t}`}function uie(){const e=(t,n)=>t.commands.dispatch(e,n||{});return e.subscribe=(t,n)=>t.commands.subscribe(e,n),e.id=Cp.create22(),e}aie.DefaultNextSnapshotDelayInMs=1500,function(e){e.Entry=function(e,t){return{timestamp:+new Date,snapshot:e,...t}},e.isStateSnapshot=function(e){const t=e;return!!t&&!!t.timestamp&&!!t.entries},e.getCanvasImageAsset=async function(e,t){if(!e.helpers.viewportScreenshot)return;const n=e.helpers.viewportScreenshot.getPreview(512);if(!n)return;const r=await iie(n.canvas,"png"),o=new File([r],t),i={kind:"file",id:Cp.create22(),name:t};return e.managers.asset.set(i,o),i}}(aie||(aie={}));const die={State:{SetCurrentObject:uie(),ApplyAction:uie(),Update:uie(),RemoveObject:uie(),ToggleExpanded:uie(),ToggleVisibility:uie(),Snapshots:{Add:uie(),Replace:uie(),Move:uie(),Remove:uie(),Apply:uie(),Clear:uie(),Upload:uie(),Fetch:uie(),DownloadToFile:uie(),OpenFile:uie(),OpenUrl:uie()}},Interactivity:{Object:{Highlight:uie()},Structure:{Highlight:uie(),Select:uie()},ClearHighlights:uie()},Layout:{Update:uie()},Toast:{Show:uie(),Hide:uie()},Camera:{Reset:uie(),SetSnapshot:uie(),Focus:uie(),OrientAxes:uie(),ResetAxes:uie()},Canvas3D:{SetSettings:uie(),ResetSettings:uie()}};function Aie(e){fie(e),pie(e),hie(e),gie(e),mie(e),yie(e),vie(e),Iie(e),Eie(e),xie(e)}function fie(e){e.state.events.object.created.subscribe((e=>{Jz.isBehavior(e.obj)&&e.obj.data.register(e.ref)})),e.state.events.object.removed.subscribe((e=>{var t,n,r,o;Jz.isBehavior(e.obj)&&(null===(n=(t=e.obj.data).unregister)||void 0===n||n.call(t),null===(o=(r=e.obj.data).dispose)||void 0===o||o.call(r))})),e.state.events.object.updated.subscribe((e=>{var t,n,r,o;"recreate"===e.action&&(e.oldObj&&Jz.isBehavior(e.oldObj)&&(null===(n=(t=e.oldObj.data).unregister)||void 0===n||n.call(t),null===(o=(r=e.oldObj.data).dispose)||void 0===o||o.call(r)),e.obj&&Jz.isBehavior(e.obj)&&e.obj.data.register(e.ref))}))}function pie(e){die.State.SetCurrentObject.subscribe(e,(e=>{let{state:t,ref:n}=e;return t.setCurrent(n)}))}function hie(e){die.State.Update.subscribe(e,(t=>{let{state:n,tree:r,options:o}=t;return e.runTask(n.updateTree(r,o))}))}function gie(e){die.State.ApplyAction.subscribe(e,(t=>{let{state:n,action:r,ref:o}=t;return e.runTask(n.applyAction(r.action,r.params,o))}))}function mie(e){function t(t,n){const r=t.build().delete(n);return e.runTask(t.updateTree(r))}die.State.RemoveObject.subscribe(e,(e=>{let{state:n,ref:r,removeParentGhosts:o}=e;if(!o)return t(n,r);{const e=n.tree;let o=e.transforms.get(r);if(o.parent===r)return t(n,r);for(;;){const r=e.children.get(o.parent);if(o.parent===o.ref||r.size>1)return t(n,o.ref);const i=e.transforms.get(o.parent);if(!i.state.isGhost)return t(n,o.ref);o=i}}}))}function yie(e){die.State.ToggleExpanded.subscribe(e,(e=>{let{state:t,ref:n}=e;return t.updateCellState(n,(e=>{let{isCollapsed:t}=e;return{isCollapsed:!t}}))}))}function vie(e){die.State.ToggleVisibility.subscribe(e,(e=>{let{state:t,ref:n}=e;return bie(t,n,!t.cells.get(n).state.isHidden)}))}function bie(e,t,n){H_.doPreOrder(e.tree,e.transforms.get(t),{state:e,value:n},Cie)}function Cie(e,t,n){n.state.updateCellState(e.ref,{isHidden:n.value})}function Iie(e){die.Interactivity.Object.Highlight.subscribe(e,(t=>{let{state:n,ref:r}=t;if(!e.canvas3d||e.isBusy)return;e.managers.interactivity.lociHighlights.clearHighlights();const o="string"===typeof r?[r]:r;for(const i of o){const t=n.cells.get(i);if(t)if(Jz.Molecule.Structure.is(t.obj))e.managers.interactivity.lociHighlights.highlight({loci:aG.Loci(t.obj.data)},!1);else if(t&&Jz.isRepresentation3D(t.obj)){const{repr:n}=t.obj.data;for(const t of n.getAllLoci())e.managers.interactivity.lociHighlights.highlight({loci:t,repr:n},!1)}else if(Jz.Molecule.Structure.Selections.is(t.obj))for(const n of t.obj.data)e.managers.interactivity.lociHighlights.highlight({loci:n.loci},!1)}}))}function Eie(e){die.Interactivity.ClearHighlights.subscribe(e,(()=>{e.managers.interactivity.lociHighlights.clearHighlights()}))}function xie(e){e.config.set(Bee.State.CurrentServer,e.config.get(Bee.State.DefaultServer)),die.State.Snapshots.Clear.subscribe(e,(()=>{e.managers.snapshot.clear()})),die.State.Snapshots.Remove.subscribe(e,(t=>{let{id:n}=t;e.managers.snapshot.remove(n)})),die.State.Snapshots.Add.subscribe(e,(async t=>{let{key:n,name:r,description:o,params:i}=t;var a;const s=e.state.getSnapshot(i),l=(null!==(a=null===i||void 0===i?void 0:i.image)&&void 0!==a?a:e.state.snapshotParams.value.image)?await aie.getCanvasImageAsset(e,`${s.id}-image.png`):void 0,c=aie.Entry(s,{key:n,name:r,description:o,image:l});e.managers.snapshot.add(c)})),die.State.Snapshots.Replace.subscribe(e,(async t=>{let{id:n,params:r}=t;var o;const i=e.state.getSnapshot(r),a=(null!==(o=null===r||void 0===r?void 0:r.image)&&void 0!==o?o:e.state.snapshotParams.value.image)?await aie.getCanvasImageAsset(e,`${i.id}-image.png`):void 0;e.managers.snapshot.replace(n,e.state.getSnapshot(r),{image:a})})),die.State.Snapshots.Move.subscribe(e,(t=>{let{id:n,dir:r}=t;e.managers.snapshot.move(n,r)})),die.State.Snapshots.Apply.subscribe(e,(t=>{let{id:n}=t;const r=e.managers.snapshot.setCurrent(n);if(r)return e.state.setSnapshot(r)})),die.State.Snapshots.Upload.subscribe(e,(async t=>{let{name:n,description:r,playOnLoad:o,serverUrl:i,params:a}=t;return fetch(cie(i,`set?name=${encodeURIComponent(n||"")}&description=${encodeURIComponent(r||"")}`),{method:"POST",mode:"cors",referrer:"no-referrer",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(await e.managers.snapshot.getStateSnapshot({name:n,description:r,playOnLoad:o}))})})),die.State.Snapshots.Fetch.subscribe(e,(async t=>{let{url:n}=t;const r=await e.runTask(e.fetch({url:n,type:"json"}));await e.managers.snapshot.setStateSnapshot(r.data)})),die.State.Snapshots.DownloadToFile.subscribe(e,(async t=>{let{name:n,type:r,params:o}=t;const i=`mol-star_state_${n||function(){const e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds()}()}.${"json"===r?"molj":"molx"}`;lie(await e.managers.snapshot.serialize({type:r,params:o}),`${i}`)})),die.State.Snapshots.OpenFile.subscribe(e,(t=>{let{file:n}=t;return e.managers.snapshot.open(n)})),die.State.Snapshots.OpenUrl.subscribe(e,(async t=>{let{url:n,type:r}=t;const o=await e.runTask(e.fetch({url:n,type:"binary"}));return e.managers.snapshot.open(new File([o],`state.${r}`))}))}function Bie(e){wie(e),_ie(e),Sie(e)}function wie(e){const t=e.state.data.events;t.object.created.subscribe((t=>{var n;Jz.isRepresentation3D(t.obj)&&(Die(t.state.cells.get(t.ref),t.obj.data.repr),t.obj.data.repr.setState({syncManually:!0}),null===(n=e.canvas3d)||void 0===n||n.add(t.obj.data.repr))})),t.object.updated.subscribe((t=>{var n,r;t.oldObj&&Jz.isRepresentation3D(t.oldObj)&&(null===(n=e.canvas3d)||void 0===n||n.remove(t.oldObj.data.repr),t.oldObj.data.repr.destroy()),Jz.isRepresentation3D(t.obj)&&(Die(t.state.cells.get(t.ref),t.obj.data.repr),"recreate"===t.action&&t.obj.data.repr.setState({syncManually:!0}),null===(r=e.canvas3d)||void 0===r||r.add(t.obj.data.repr))})),t.object.removed.subscribe((t=>{var n;Jz.isRepresentation3D(t.obj)&&(null===(n=e.canvas3d)||void 0===n||n.remove(t.obj.data.repr),t.obj.data.repr.destroy())}))}function _ie(e){const t=e.state.data.events;t.object.created.subscribe((t=>{var n;if(!Jz.Molecule.Structure.Representation3DState.is(t.obj))return;const r=t.obj.data;r.repr.setState(r.state),null===(n=e.canvas3d)||void 0===n||n.update(r.repr)})),t.object.updated.subscribe((t=>{var n;if(!Jz.Molecule.Structure.Representation3DState.is(t.obj))return;const r=t.obj.data;r.repr.setState(r.state),null===(n=e.canvas3d)||void 0===n||n.update(r.repr)})),t.object.removed.subscribe((t=>{var n;if(!Jz.Molecule.Structure.Representation3DState.is(t.obj))return;const r=t.obj.data;r.repr.setState(r.initialState),null===(n=e.canvas3d)||void 0===n||n.update(r.repr)}))}function Sie(e){e.state.data.events.cell.stateUpdated.subscribe((t=>{var n;const r=t.state.cells.get(t.ref);Jz.isRepresentation3D(r.obj)&&Die(r,r.obj.data.repr)&&(null===(n=e.canvas3d)||void 0===n||n.syncVisibility())}))}function Die(e,t){return t.state.visible===!!e.state.isHidden&&(t.setState({visible:!e.state.isHidden}),!0)}function Tie(e){kie(e),Mie(e),Qie(e),Rie(e),Pie(e)}function kie(e){die.Camera.Reset.subscribe(e,(t=>{e.managers.camera.reset(null===t||void 0===t?void 0:t.snapshot,null===t||void 0===t?void 0:t.durationMs)}))}function Qie(e){die.Camera.SetSnapshot.subscribe(e,(t=>{let{snapshot:n,durationMs:r}=t;e.managers.camera.setSnapshot(n,r)}))}function Mie(e){die.Camera.Focus.subscribe(e,(t=>{let{center:n,radius:r,durationMs:o}=t;e.managers.camera.focusSphere({center:n,radius:r},{durationMs:o}),e.events.canvas3d.settingsUpdated.next(void 0)}))}function Rie(e){die.Camera.OrientAxes.subscribe(e,(t=>{let{structures:n,durationMs:r}=t;e.managers.camera.orientAxes(n,r)}))}function Pie(e){die.Camera.ResetAxes.subscribe(e,(t=>{let{durationMs:n}=t;e.managers.camera.resetAxes(n)}))}function Oie(){return Oie.zero()}!function(e){e.zero=function(){return{x:0,y:0,width:0,height:0}},e.create=function(e,t,n,r){return{x:e,y:t,width:n,height:r}},e.clone=function(e){return{...e}},e.copy=function(e,t){return Object.assign(e,t)},e.set=function(e,t,n,r,o){return e.x=t,e.y=n,e.width=r,e.height=o,e},e.toVec4=function(e,t){return e[0]=t.x,e[1]=t.y,e[2]=t.width,e[3]=t.height,e},e.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}}(Oie||(Oie={}));const Fie=Kh();function Nie(e,t,n,r){const{x:o,y:i,width:a,height:s}=n,l=t[0]-o,c=t[1]-i,u=t[2];return e[0]=2*l/a-1,e[1]=2*c/s-1,e[2]=2*u-1,qh.transformMat4(e,e,r)}function Lie(e){if("object"===typeof e){if("buttons"in e)return e.buttons;if("which"in e){const t=e.which;if(2===t)return 4;if(3===t)return 2;if(t>0)return 1<<t-1}}return 0}function Uie(e){if("object"===typeof e&&"button"in e){const t=e.button;if(1===t)return 4;if(2===t)return 2;if(t>=0)return 1<<t}return 0}const Gie={noScroll:!0,noMiddleClickScroll:!0,noContextMenu:!0,noPinchZoom:!0,noTextSelect:!0,preventGestures:!1,mask:(e,t)=>!0,pixelScale:1};var jie,zie;!function(e){function t(e,t){return e.shift===t.shift&&e.alt===t.alt&&e.control===t.control&&e.meta===t.meta}function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{shift:!!e.shift,alt:!!e.alt,control:!!e.control,meta:!!e.meta}}e.None=n(),e.areEqual=t,e.areNone=function(n){return t(n,e.None)},e.size=function(e){if(!e)return 0;let t=0;return e.shift&&t++,e.alt&&t++,e.control&&t++,e.meta&&t++,t},e.create=n}(jie||(jie={})),function(e){let t;e.has=mp.has,e.create=mp.create,function(e){e[e.None=0]="None",e[e.Primary=1]="Primary",e[e.Secondary=2]="Secondary",e[e.Auxilary=4]="Auxilary",e[e.Forth=8]="Forth",e[e.Five=16]="Five"}(t=e.Flag||(e.Flag={}))}(zie||(zie={}));jie.None;var Hie;function Vie(){return{drag:new JS,interactionEnd:new JS,click:new JS,move:new JS,wheel:new JS,pinch:new JS,gesture:new JS,resize:new JS,leave:new JS,enter:new JS,modifiers:new JS,key:new JS,keyUp:new JS,keyDown:new JS,lock:new JS}}!function(e){e[e.Stopped=0]="Stopped",e[e.Started=1]="Started",e[e.Moving=2]="Moving"}(Hie||(Hie={}));const qie=["Backspace","Delete"];var Yie,Xie,Wie;!function(e){e.create=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{noScroll:t,noContextMenu:n}={...Gie,...e};return{noScroll:t,noContextMenu:n,pointerLock:!1,width:0,height:0,pixelRatio:1,...Vie(),setPixelScale:Dp,requestPointerLock:Dp,exitPointerLock:Dp,dispose:Dp}},e.fromElement=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{noScroll:n,noMiddleClickScroll:r,noContextMenu:o,noPinchZoom:i,noTextSelect:a,mask:s,pixelScale:l,preventGestures:c}={...Gie,...t},u=e.clientWidth*C(),d=e.clientHeight*C(),A=!1,f=Oie();const p=Wh(),h=Wh(),g=Wh(),m=Wh(),y=Wh(),v={shift:!1,alt:!1,control:!1,meta:!1},b={x:-1,y:-1,pageX:-1,pageY:-1};function C(){return window.devicePixelRatio*l}function I(){return{...v}}function E(t){return t.target===document.body||t.target===e}let x,B=Hie.Stopped,w=!1,_=zie.create(zie.Flag.None),S=zie.Flag.None,D=!1,T=!1;"undefined"!==typeof window.ResizeObserver&&(x=new window.ResizeObserver(Se));const k=Vie(),{drag:Q,interactionEnd:M,wheel:R,pinch:P,gesture:O,click:F,move:N,leave:L,enter:U,resize:G,modifiers:j,key:z,keyUp:H,keyDown:V,lock:q}=k;function Y(){A=e.ownerDocument.pointerLockElement===e,Re(A),q.next(A)}function X(){console.error("Unable to use Pointer Lock API"),A=!1,Re(A),q.next(A)}function W(e){s(e.clientX,e.clientY)&&o&&e.preventDefault()}function K(e){v.alt=e.altKey,v.shift=e.shiftKey,v.control=e.ctrlKey,v.meta=e.metaKey}function J(){(_||v.shift||v.alt||v.meta||v.control)&&(_=0,v.shift=v.alt=v.control=v.meta=!1)}function Z(e){let t=!1;!v.alt&&e.altKey&&(t=!0,v.alt=!0),!v.shift&&e.shiftKey&&(t=!0,v.shift=!0),!v.control&&e.ctrlKey&&(t=!0,v.control=!0),!v.meta&&e.metaKey&&(t=!0,v.meta=!0),t&&D&&j.next(I()),E(e)&&D&&V.next({key:e.key,code:e.code,modifiers:I(),...b,preventDefault:()=>e.preventDefault()})}function $(e){let t=!1;v.alt&&!e.altKey&&(t=!0,v.alt=!1),v.shift&&!e.shiftKey&&(t=!0,v.shift=!1),v.control&&!e.ctrlKey&&(t=!0,v.control=!1),v.meta&&!e.metaKey&&(t=!0,v.meta=!1),t&&D&&j.next(I()),qie.includes(e.key)&&ee(e),E(e)&&D&&H.next({key:e.key,code:e.code,modifiers:I(),...b,preventDefault:()=>e.preventDefault()})}function ee(e){E(e)&&D&&z.next({key:e.key,code:e.code,modifiers:I(),...b,preventDefault:()=>e.preventDefault()})}function te(e){const t=e.touches[0],n=e.touches[1];return{clientX:(t.clientX+n.clientX)/2,clientY:(t.clientY+n.clientY)/2,pageX:(t.pageX+n.pageX)/2,pageY:(t.pageY+n.pageY)/2,target:e.target}}function ne(e){const t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;return Math.sqrt(t*t+n*n)}e.addEventListener("contextmenu",W,!1),e.addEventListener("wheel",be,!1),e.addEventListener("mousedown",pe,!1),window.addEventListener("mousemove",he,!1),window.addEventListener("mouseup",ge,!1),e.addEventListener("touchstart",de,!1),e.addEventListener("touchmove",fe,!1),e.addEventListener("touchend",Ae,!1),e.addEventListener("gesturechange",we,!1),e.addEventListener("gesturestart",xe,!1),e.addEventListener("gestureend",_e,!1),window.addEventListener("blur",J),window.addEventListener("keyup",$,!1),window.addEventListener("keydown",Z,!1),window.addEventListener("keypress",ee,!1),document.addEventListener("pointerlockchange",Y,!1),document.addEventListener("pointerlockerror",X,!1),null!=x?x.observe(e.parentElement):window.addEventListener("resize",Se,!1);let re,oe=-1;const ie=Wh(),ae=Wh(),se=Wh();let le=!1,ce=0,ue=1;function de(e){if(e.preventDefault(),re=void 0,oe=-1,1===e.touches.length)_=S=zie.Flag.Primary,oe=0,Wh.set(ie,e.touches[0].pageX,e.touches[0].pageY),re=e.touches[0],ye(e.touches[0]),Wh.copy(se,h),le=!0;else if(2===e.touches.length){_=zie.Flag.Secondary|zie.Flag.Auxilary,S=zie.Flag.Secondary,K(e),ue=1,ce=ne(e);const{pageX:t,pageY:n}=ke(te(e));le||(Te(se,te(e)),le=!0),P.next({isStart:!0,distance:ce,delta:0,fraction:ue,fractionDelta:0,startX:se[0],startY:se[1],centerPageX:t,centerPageY:n,buttons:_,button:S,modifiers:I()})}else 3===e.touches.length&&(_=S=zie.Flag.Forth,ye(te(e)))}function Ae(e){if(me(),re&&oe<=4){const e=re;if(!s(e.clientX,e.clientY))return;Te(ae,e);const{pageX:t,pageY:n}=ke(e),[r,o]=ae;F.next({x:r,y:o,pageX:t,pageY:n,buttons:_,button:S,modifiers:I()})}re=void 0,le=!1}function fe(e){if(S=zie.Flag.None,i&&(e.preventDefault(),e.stopPropagation(),e.originalEvent&&(e.originalEvent.preventDefault(),e.originalEvent.stopPropagation())),re=void 0,1===e.touches.length)_=zie.Flag.Primary,re=e.touches[0],function(e){oe<0||(Wh.set(ae,e.touches[0].pageX,e.touches[0].pageY),oe+=Wh.distance(ie,ae),Wh.copy(ie,ae))}(e),ve(e.touches[0]);else if(2===e.touches.length){_=zie.Flag.Secondary|zie.Flag.Auxilary,S=zie.Flag.Secondary,K(e);const{pageX:t,pageY:n}=ke(te(e)),r=ne(e),o=ce-r,i=ce/r,a=i-ue;ue=i,P.next({isStart:!1,distance:r,delta:o,fraction:i,fractionDelta:a,startX:se[0],startY:se[1],centerPageX:t,centerPageY:n,buttons:_,button:S,modifiers:I()})}else 3===e.touches.length&&(_=zie.Flag.Forth,ve(te(e)))}function pe(e){K(e),_=Lie(e),S=Uie(e),r&&_===zie.Flag.Auxilary&&e.preventDefault,ye(e)}function he(e){K(e),_=Lie(e),S=zie.Flag.None,ve(e)}function ge(e){K(e),_=Lie(e),S=Uie(e),function(e){if(B=Hie.Stopped,!s(e.clientX,e.clientY))return;if(Te(g,e),!T&&Wh.distance(g,p)<4){const{pageX:t,pageY:n}=ke(e),[r,o]=g;F.next({x:r,y:o,pageX:t,pageY:n,buttons:_,button:S,modifiers:I()})}T=!1}(e),me()}function me(){M.next(void 0)}function ye(e){s(e.clientX,e.clientY)&&(Te(h,e),Wh.copy(p,h),De(h)&&(B=Hie.Started))}function ve(t){var n;Te(g,t);const{pageX:r,pageY:o}=ke(t),[i,l]=g,{movementX:c,movementY:u}=t,d=De(g)&&s(t.clientX,t.clientY);if(D&&!d?L.next(void 0):!D&&d&&U.next(void 0),D=d,b.x=i,b.y=l,b.pageX=r,b.pageY=o,N.next({x:i,y:l,pageX:r,pageY:o,movementX:c,movementY:u,buttons:_,button:S,modifiers:I(),inside:d,onElement:t.target===e}),B===Hie.Stopped)return;var A;if(a&&(null===(n=t.preventDefault)||void 0===n||n.call(t)),Wh.div(m,Wh.sub(m,g,h),((A=y)[0]=e.clientWidth,A[1]=e.clientHeight,A)),Wh.magnitude(m)<zh)return;const f=B===Hie.Started;if(f&&!s(t.clientX,t.clientY))return;Wh.distance(g,p)>=4&&(T=!0);const[v,C]=m;Q.next({x:i,y:l,dx:v,dy:C,pageX:r,pageY:o,buttons:_,button:S,modifiers:I(),isStart:f}),Wh.copy(h,g),B=Hie.Moving}function be(e){if(!s(e.clientX,e.clientY))return;Te(g,e);const{pageX:t,pageY:r}=ke(e),[o,i]=g;n&&e.preventDefault();const a=function(e){const t=10,n=40,r=800;let o=0,i=0,a=0,s=0,l=0;"detail"in e&&(i=e.detail);"wheelDelta"in e&&(i=-e.wheelDelta/120);"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120);"wheelDeltaX"in e&&(o=-e.wheelDeltaX/120);"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(o=i,i=0);a=o*t,s=i*t,"deltaY"in e&&(s=e.deltaY);"deltaX"in e&&(a=e.deltaX);"deltaZ"in e&&(l=e.deltaZ);(a||s||l)&&e.deltaMode&&(1===e.deltaMode?(a*=n,s*=n,l*=n):(a*=r,s*=r,l*=r));a&&!o&&(o=a<1?-1:1);s&&!i&&(i=s<1?-1:1);return{spinX:o,spinY:i,dx:a,dy:s,dz:l}}(e);_=S=zie.Flag.Auxilary,(a.dx||a.dy||a.dz)&&R.next({x:o,y:i,pageX:t,pageY:r,...a,buttons:_,button:S,modifiers:I()})}function Ce(e){var t,n;c&&(e.preventDefault(),null===(t=e.stopImmediatePropagation)||void 0===t||t.call(e),null===(n=e.stopPropagation)||void 0===n||n.call(e))}let Ie=0,Ee=0;function xe(e){Ce(e),Ie=e.scale,Ee=e.rotation,O.next({scale:e.scale,rotation:e.rotation,deltaRotation:0,deltaScale:0,isStart:!0})}function Be(e,t){O.next({scale:e.scale,rotation:e.rotation,deltaRotation:Ee-e.rotation,deltaScale:Ie-e.scale,isEnd:t}),Ee=e.rotation,Ie=e.scale}function we(e){Ce(e),Be(e)}function _e(e){Ce(e),Be(e,!0)}function Se(){u=e.clientWidth*C(),d=e.clientHeight*C(),G.next({})}function De(t){if(e instanceof Window||e instanceof Document||e===document.body)return!0;{const n=e.getBoundingClientRect();return t[0]>=0&&t[1]>=0&&t[0]<n.width&&t[1]<n.height}}function Te(t,n){if(u=e.clientWidth*C(),d=e.clientHeight*C(),A){const e=C();t[0]=(f.x+f.width/2)/e,t[1]=(d-(f.y+f.height/2))/e}else{const r=e.getBoundingClientRect();t[0]=(n.clientX||0)-r.left,t[1]=(n.clientY||0)-r.top}return t}function ke(e){return A?{pageX:Math.round(window.innerWidth/2)+f.x,pageY:Math.round(window.innerHeight/2)+f.y}:{pageX:e.pageX,pageY:e.pageY}}const Qe=30,Me=function(){var t;const n=document.createElement("div"),r="#000 30%, #0000 0 calc(100% - 30%), #000 0",o=`linear-gradient(0deg, ${r}) 50%/10% 100% no-repeat`,i=`linear-gradient(90deg, ${r}) 50%/100% 10% no-repeat`;return Object.assign(n.style,{width:`${Qe}px`,aspectRatio:1,background:`${o}, ${i}, radial-gradient(circle at 50%, #000 5%, #0000 5%)`,display:"none",zIndex:1e3,position:"absolute",mixBlendMode:"difference",filter:"invert(1)"}),null===(t=e.parentElement)||void 0===t||t.appendChild(n),n}();function Re(e){if(Me.style.display=e?"block":"none",e){const e=C(),t=(f.x+f.width/2)/e,n=(f.y+f.height/2)/e;Me.style.width=`${Qe}px`,Me.style.left=`calc(${t}px - ${Qe/2}px)`,Me.style.bottom=`calc(${n}px - ${Qe/2}px)`}}return{get noScroll(){return n},set noScroll(e){n=e},get noContextMenu(){return o},set noContextMenu(e){o=e},get width(){return u},get height(){return d},get pixelRatio(){return C()},get pointerLock(){return A},...k,setPixelScale:t=>{l=t,u=e.clientWidth*C(),d=e.clientHeight*C()},requestPointerLock:t=>{f=t,A||e.requestPointerLock()},exitPointerLock:()=>{A&&e.ownerDocument.exitPointerLock()},dispose:function(){w||(w=!0,e.removeEventListener("contextmenu",W,!1),e.removeEventListener("wheel",be,!1),e.removeEventListener("mousedown",pe,!1),window.removeEventListener("mousemove",he,!1),window.removeEventListener("mouseup",ge,!1),e.removeEventListener("touchstart",de,!1),e.removeEventListener("touchmove",fe,!1),e.removeEventListener("touchend",Ae,!1),e.removeEventListener("gesturechange",we,!1),e.removeEventListener("gesturestart",xe,!1),e.removeEventListener("gestureend",_e,!1),window.removeEventListener("blur",J),window.removeEventListener("keyup",$,!1),window.removeEventListener("keydown",Z,!1),window.removeEventListener("keypress",ee,!1),document.removeEventListener("pointerlockchange",Y,!1),document.removeEventListener("pointerlockerror",X,!1),Me.remove(),null!=x?(x.unobserve(e.parentElement),x.disconnect()):window.removeEventListener("resize",Se,!1))}}}}(Yie||(Yie={})),function(e){e[e.None=0]="None",e[e.Object=1]="Object",e[e.Instance=2]="Instance",e[e.Group=3]="Group"}(Xie||(Xie={})),function(e){e[e.None=0]="None",e[e.Depth=1]="Depth",e[e.Mask=2]="Mask"}(Wie||(Wie={}));const Kie={backgroundColor:U_.Color(Jp(0),{description:"Background color of the 3D canvas"}),pickingAlphaThreshold:U_.Numeric(.5,{min:0,max:1,step:.01},{description:"The minimum opacity value needed for an object to be pickable."}),interiorDarkening:U_.Numeric(.5,{min:0,max:1,step:.01}),interiorColorFlag:U_.Boolean(!0,{label:"Use Interior Color"}),interiorColor:U_.Color(Jp.fromNormalizedRgb(.3,.3,.3)),colorMarker:U_.Boolean(!0,{description:"Enable color marker"}),highlightColor:U_.Color(Jp.fromNormalizedRgb(1,.4,.6)),selectColor:U_.Color(Jp.fromNormalizedRgb(.2,1,.1)),dimColor:U_.Color(Jp.fromNormalizedRgb(1,1,1)),highlightStrength:U_.Numeric(.3,{min:0,max:1,step:.1}),selectStrength:U_.Numeric(.3,{min:0,max:1,step:.1}),dimStrength:U_.Numeric(0,{min:0,max:1,step:.1}),markerPriority:U_.Select(1,[[1,"Highlight"],[2,"Select"]]),xrayEdgeFalloff:U_.Numeric(1,{min:0,max:3,step:.1}),celSteps:U_.Numeric(5,{min:2,max:16,step:1}),exposure:U_.Numeric(1,{min:0,max:3,step:.01}),light:U_.ObjectList({inclination:U_.Numeric(150,{min:0,max:180,step:1}),azimuth:U_.Numeric(320,{min:0,max:360,step:1}),color:U_.Color(Jp.fromNormalizedRgb(1,1,1)),intensity:U_.Numeric(.6,{min:0,max:5,step:.01})},(e=>Jp.toHexString(e.color)),{defaultValue:[{inclination:150,azimuth:320,color:Jp.fromNormalizedRgb(1,1,1),intensity:.6}]}),ambientColor:U_.Color(Jp.fromNormalizedRgb(1,1,1)),ambientIntensity:U_.Numeric(.4,{min:0,max:2,step:.01})},Jie=qh(),Zie=qh();function $ie(e,t){const n=e.length,{direction:r,color:o}=t||{direction:new Array(3*n).fill(0),color:new Array(3*n).fill(0)};for(let i=0;i<n;++i){const t=e[i];qh.directionFromSpherical(Jie,Np(t.inclination),Np(t.azimuth),1),qh.toArray(Jie,r,3*i),qh.scale(Zie,Jp.toVec3Normalized(Zie,t.color),t.intensity),qh.toArray(Zie,o,3*i)}return{count:n,direction:r,color:o}}var eae;function tae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return tae.create(e,t,n)}!function(e){e.create=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{gl:n,state:r,stats:o}=e,i=U_.merge(Kie,U_.getDefaultValues(Kie),t),a=$ie(i.light),s=Oie(),l=Wh.create(n.drawingBufferWidth,n.drawingBufferHeight),c=Jp.toVec3Normalized(qh(),i.backgroundColor);let u=!1,d=null;const A=e.resources.texture("image-uint8","rgba","ubyte","nearest");A.define(1,1),A.load({array:new Uint8Array([255,255,255,255]),width:1,height:1});const f=[["tDepth",A]],p=Yh(),h=Yh(),g=Yh(),m=Yh(),y=Yh(),v=Yh(),b=Yh(),C=qh(),I=qh(),E=EK(),x=Wh(),B=xK(),w=qh();qh.scale(w,Jp.toArrayNormalized(i.ambientColor,w,0),i.ambientIntensity);const _={uDrawId:Sp.create(0),uModel:Sp.create(Yh.identity()),uView:Sp.create(p),uInvView:Sp.create(h),uModelView:Sp.create(g),uInvModelView:Sp.create(m),uInvProjection:Sp.create(y),uProjection:Sp.create(Yh()),uModelViewProjection:Sp.create(v),uInvModelViewProjection:Sp.create(b),uIsOrtho:Sp.create(1),uViewOffset:Sp.create(x),uPixelRatio:Sp.create(e.pixelRatio),uViewport:Sp.create(Oie.toVec4(Kh(),s)),uDrawingBufferSize:Sp.create(l),uCameraPosition:Sp.create(I),uCameraDir:Sp.create(C),uCameraPlane:Sp.create(EK.toArray(E,Kh(),0)),uNear:Sp.create(1),uFar:Sp.create(1e4),uFog:Sp.create(!0),uFogNear:Sp.create(1),uFogFar:Sp.create(1e4),uFogColor:Sp.create(c),uRenderMask:Sp.create(0),uMarkingDepthTest:Sp.create(!1),uPickType:Sp.create(Xie.None),uMarkingType:Sp.create(Wie.None),uTransparentBackground:Sp.create(!1),uLightDirection:Sp.create(a.direction),uLightColor:Sp.create(a.color),uAmbientColor:Sp.create(w),uPickingAlphaThreshold:Sp.create(i.pickingAlphaThreshold),uInteriorDarkening:Sp.create(i.interiorDarkening),uInteriorColorFlag:Sp.create(i.interiorColorFlag),uInteriorColor:Sp.create(Jp.toVec3Normalized(qh(),i.interiorColor)),uHighlightColor:Sp.create(Jp.toVec3Normalized(qh(),i.highlightColor)),uSelectColor:Sp.create(Jp.toVec3Normalized(qh(),i.selectColor)),uDimColor:Sp.create(Jp.toVec3Normalized(qh(),i.dimColor)),uHighlightStrength:Sp.create(i.highlightStrength),uSelectStrength:Sp.create(i.selectStrength),uDimStrength:Sp.create(i.dimStrength),uMarkerPriority:Sp.create(i.markerPriority),uMarkerAverage:Sp.create(0),uXrayEdgeFalloff:Sp.create(i.xrayEdgeFalloff),uCelSteps:Sp.create(i.celSteps),uExposure:Sp.create(i.exposure)},S=Object.entries(_);let D=!0;const T=(t,o,s)=>{var l,c,u;if(t.state.disposed||!t.state.visible||!t.state.pickable&&"pick"===o)return;if(!xK.intersectsSphere3D(B,t.values.boundingSphere.ref.value))return;const[A,p]=t.values.uLod.ref.value;if(0!==A||0!==p){const{center:e,radius:n}=t.values.boundingSphere.ref.value,r=EK.distanceToPoint(E,e);if(r+n<A)return;if(r-n>p)return}const h=t.values.instanceGrid.ref.value.cellSize>1;h||h&&t.values.lodLevels?t.cull(E,B,d,e.stats):t.uncull();let g=!1;t.values.dLightCount.ref.value!==a.count&&(Sp.update(t.values.dLightCount,a.count),g=!0),t.values.dColorMarker.ref.value!==i.colorMarker&&(Sp.update(t.values.dColorMarker,i.colorMarker),g=!0),g&&t.update();const m=t.getProgram(o);if(r.currentProgramId!==m.id&&(D=!0,m.use()),D&&(m.setUniforms(S),m.bindTextures(f,0),D=!1),"directVolume"===t.values.dGeometryType.ref.value){if("color"!==o)return;r.disable(n.CULL_FACE),r.frontFace(n.CCW),3===s&&(r.disable(n.DEPTH_TEST),r.depthMask(!1))}else 1===s?(r.enable(n.CULL_FACE),(null===(l=t.values.dFlipSided)||void 0===l?void 0:l.ref.value)?(r.frontFace(n.CW),r.cullFace(n.FRONT)):(r.frontFace(n.CCW),r.cullFace(n.BACK))):2===s?(r.enable(n.CULL_FACE),(null===(c=t.values.dFlipSided)||void 0===c?void 0:c.ref.value)?(r.frontFace(n.CW),r.cullFace(n.BACK)):(r.frontFace(n.CCW),r.cullFace(n.FRONT))):(t.values.uDoubleSided?t.values.uDoubleSided.ref.value||t.values.hasReflection.ref.value?r.disable(n.CULL_FACE):r.enable(n.CULL_FACE):r.disable(n.CULL_FACE),(null===(u=t.values.dFlipSided)||void 0===u?void 0:u.ref.value)?(r.frontFace(n.CW),r.cullFace(n.FRONT)):(r.frontFace(n.CCW),r.cullFace(n.BACK)));t.render(o,f.length)},k=(e,t,o,i,a)=>{iS(f,"tDepth",o||A),Sp.update(_.uModel,e.view),Sp.update(_.uModelView,Yh.mul(g,t.view,e.view)),Sp.update(_.uInvModelView,Yh.invert(m,g)),Sp.update(_.uModelViewProjection,Yh.mul(v,g,t.projection)),Sp.update(_.uInvModelViewProjection,Yh.invert(b,v)),Sp.updateIfChanged(_.uRenderMask,i),Sp.updateIfChanged(_.uMarkingDepthTest,a),r.enable(n.SCISSOR_TEST),r.colorMask(!0,!0,!0,!0);const{x:l,y:c,width:u,height:d}=s;r.viewport(l,c,u,d),r.scissor(l,c,u,d),D=!0,r.currentRenderItemId=-1},Q=function(e){var t,n,r,o;const i=zp(e.values.alpha.ref.value*e.state.alphaFactor,0,1),a="on"===(null===(t=e.values.dXrayShaded)||void 0===t?void 0:t.ref.value)||"inverted"===(null===(n=e.values.dXrayShaded)||void 0===n?void 0:n.ref.value);return 1===i&&1!==e.values.transparencyAverage.ref.value&&"directVolume"!==e.values.dGeometryType.ref.value&&"fuzzy"!==(null===(r=e.values.dPointStyle)||void 0===r?void 0:r.ref.value)&&!a||"opaque"===(null===(o=e.values.dTransparentBackfaces)||void 0===o?void 0:o.ref.value)},M=function(e){var t,n,r;const o=zp(e.values.alpha.ref.value*e.state.alphaFactor,0,1),i="on"===(null===(t=e.values.dXrayShaded)||void 0===t?void 0:t.ref.value)||"inverted"===(null===(n=e.values.dXrayShaded)||void 0===n?void 0:n.ref.value);return o<1&&0!==o||e.values.transparencyAverage.ref.value>0||"directVolume"===e.values.dGeometryType.ref.value||"fuzzy"===(null===(r=e.values.dPointStyle)||void 0===r?void 0:r.ref.value)||"text"===e.values.dGeometryType.ref.value||"image"===e.values.dGeometryType.ref.value||i},R=(t,o,i)=>{fw&&e.timer.mark("Renderer.renderBlendedOpaque"),r.disable(n.BLEND),r.enable(n.DEPTH_TEST),r.depthMask(!0),k(t,o,i,1,!1);const{renderables:a}=t;for(let e=0,n=a.length;e<n;++e){const t=a[e];Q(t)&&T(t,"color",0)}fw&&e.timer.markEnd("Renderer.renderBlendedOpaque")},P=(t,o,i)=>{var a,s;fw&&e.timer.mark("Renderer.renderBlendedTransparent"),u?r.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA):r.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),r.enable(n.BLEND),r.enable(n.DEPTH_TEST),r.depthMask(!1),k(t,o,i,2,!1);const{renderables:l}=t;for(let e=0,n=l.length;e<n;++e){const t=l[e];M(t)&&((null===(a=t.values.uDoubleSided)||void 0===a?void 0:a.ref.value)?("opaque"!==(null===(s=t.values.dTransparentBackfaces)||void 0===s?void 0:s.ref.value)&&T(t,"color",2),T(t,"color",1)):T(t,"color",0))}fw&&e.timer.markEnd("Renderer.renderBlendedTransparent")};return{clear:(e,t)=>{r.enable(n.SCISSOR_TEST),r.enable(n.DEPTH_TEST),r.colorMask(!0,!0,!0,!0),r.depthMask(!0),u&&!t?r.clearColor(0,0,0,0):e?r.clearColor(c[0],c[1],c[2],1):r.clearColor(1,1,1,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},clearDepth:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r.enable(n.SCISSOR_TEST),e?(r.colorMask(!0,!0,!0,!0),r.clearColor(1,1,1,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)):(r.enable(n.DEPTH_TEST),r.depthMask(!0),n.clear(n.DEPTH_BUFFER_BIT))},update:(e,t)=>{Sp.update(_.uView,e.view),Sp.update(_.uInvView,Yh.invert(h,e.view)),Sp.update(_.uProjection,e.projection),Sp.update(_.uInvProjection,Yh.invert(y,e.projection)),Sp.updateIfChanged(_.uIsOrtho,"orthographic"===e.state.mode?1:0),Sp.update(_.uViewOffset,e.viewOffset.enabled?Wh.set(x,16*e.viewOffset.offsetX,16*e.viewOffset.offsetY):Wh.set(x,0,0)),Sp.update(_.uCameraPosition,qh.copy(I,e.state.position)),Sp.update(_.uCameraDir,qh.normalize(C,qh.sub(C,e.state.target,e.state.position))),Sp.updateIfChanged(_.uFar,e.far),Sp.updateIfChanged(_.uNear,e.near),Sp.updateIfChanged(_.uFog,e.state.fog>0),Sp.updateIfChanged(_.uFogFar,e.fogFar),Sp.updateIfChanged(_.uFogNear,e.fogNear),Sp.updateIfChanged(_.uTransparentBackground,u),xK.fromProjectionMatrix(B,e.projectionView),EK.copy(E,B[5]),E.constant-=EK.distanceToPoint(E,I),Sp.update(_.uCameraPlane,EK.toArray(E,_.uCameraPlane.ref.value,0)),Sp.updateIfChanged(_.uMarkerAverage,t.markerAverage)},renderPick:(t,o,i,a,s)=>{fw&&e.timer.mark("Renderer.renderPick"),r.disable(n.BLEND),r.enable(n.DEPTH_TEST),r.depthMask(!0),k(t,o,a,0,!1),Sp.updateIfChanged(_.uPickType,s);const{renderables:l}=t;for(let e=0,n=l.length;e<n;++e)l[e].state.colorOnly||T(l[e],i,0);fw&&e.timer.markEnd("Renderer.renderPick")},renderDepth:(t,o,i)=>{fw&&e.timer.mark("Renderer.renderDepth"),r.disable(n.BLEND),r.enable(n.DEPTH_TEST),r.depthMask(!0),k(t,o,i,0,!1);const{renderables:a}=t;for(let e=0,n=a.length;e<n;++e)T(a[e],"depth",0);fw&&e.timer.markEnd("Renderer.renderDepth")},renderDepthOpaque:(t,o,i)=>{fw&&e.timer.mark("Renderer.renderDepthOpaque"),r.disable(n.BLEND),r.enable(n.DEPTH_TEST),r.depthMask(!0),k(t,o,i,1,!1);const{renderables:a}=t;for(let e=0,n=a.length;e<n;++e){const t=a[e];Q(t)&&T(t,"depth",0)}fw&&e.timer.markEnd("Renderer.renderDepthOpaque")},renderDepthTransparent:(t,o,i)=>{fw&&e.timer.mark("Renderer.renderDepthTransparent"),r.disable(n.BLEND),r.enable(n.DEPTH_TEST),r.depthMask(!0),k(t,o,i,2,!1);const{renderables:a}=t;for(let e=0,n=a.length;e<n;++e){const t=a[e];M(t)&&T(t,"depth",0)}fw&&e.timer.markEnd("Renderer.renderDepthTransparent")},renderMarkingDepth:(t,o,i)=>{fw&&e.timer.mark("Renderer.renderMarkingDepth"),r.disable(n.BLEND),r.enable(n.DEPTH_TEST),r.depthMask(!0),k(t,o,i,0,!1),Sp.updateIfChanged(_.uMarkingType,Wie.Depth);const{renderables:a}=t;for(let e=0,n=a.length;e<n;++e){const t=a[e];0!==zp(t.values.alpha.ref.value*t.state.alphaFactor,0,1)&&1!==t.values.transparencyAverage.ref.value&&1!==t.values.markerAverage.ref.value&&T(a[e],"marking",0)}fw&&e.timer.markEnd("Renderer.renderMarkingDepth")},renderMarkingMask:(t,o,i)=>{fw&&e.timer.mark("Renderer.renderMarkingMask"),r.disable(n.BLEND),r.enable(n.DEPTH_TEST),r.depthMask(!0),k(t,o,i,0,!!i),Sp.updateIfChanged(_.uMarkingType,Wie.Mask);const{renderables:a}=t;for(let e=0,n=a.length;e<n;++e){a[e].values.markerAverage.ref.value>0&&T(a[e],"marking",0)}fw&&e.timer.markEnd("Renderer.renderMarkingMask")},renderEmissive:(t,o,i)=>{fw&&e.timer.mark("Renderer.renderEmissive"),r.disable(n.BLEND),r.enable(n.DEPTH_TEST),r.depthMask(!0),k(t,o,i,1,!1);const{renderables:a}=t;for(let e=0,n=a.length;e<n;++e){const t=a[e];Q(t)&&T(t,"emissive",0)}fw&&e.timer.markEnd("Renderer.renderEmissive")},renderBlended:(e,t)=>{e.hasOpaque&&R(e,t,null),e.opacityAverage<1&&P(e,t,null)},renderBlendedOpaque:R,renderBlendedTransparent:P,renderBlendedVolume:(t,o,i)=>{fw&&e.timer.mark("Renderer.renderBlendedVolume"),r.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),r.enable(n.BLEND),r.depthMask(!1),k(t,o,i,2,!1);const{renderables:a}=t;for(let e=0,n=a.length;e<n;++e){const t=a[e];"directVolume"===t.values.dGeometryType.ref.value&&T(t,"color",3)}fw&&e.timer.markEnd("Renderer.renderBlendedVolume")},renderWboitOpaque:(t,o,i)=>{fw&&e.timer.mark("Renderer.renderWboitOpaque"),r.disable(n.BLEND),r.enable(n.DEPTH_TEST),r.depthMask(!0),k(t,o,i,1,!1);const{renderables:a}=t;for(let e=0,n=a.length;e<n;++e){const t=a[e];Q(t)&&T(t,"color",0)}fw&&e.timer.markEnd("Renderer.renderWboitOpaque")},renderWboitTransparent:(t,n,r)=>{fw&&e.timer.mark("Renderer.renderWboitTransparent"),k(t,n,r,2,!1);const{renderables:o}=t;for(let e=0,i=o.length;e<i;++e){const t=o[e];M(t)&&T(t,"color",0)}fw&&e.timer.markEnd("Renderer.renderWboitTransparent")},renderDpoitOpaque:(t,o,i)=>{fw&&e.timer.mark("Renderer.renderDpoitOpaque"),r.disable(n.BLEND),r.enable(n.DEPTH_TEST),r.depthMask(!0),k(t,o,i,1,!1);const{renderables:a}=t;for(let e=0,n=a.length;e<n;++e){const t=a[e];Q(t)&&T(t,"color",0)}fw&&e.timer.markEnd("Renderer.renderDpoitOpaque")},renderDpoitTransparent:(t,o,i,a)=>{fw&&e.timer.mark("Renderer.renderDpoitTransparent"),r.enable(n.BLEND),iS(f,"tDpoitDepth",a.depth),iS(f,"tDpoitFrontColor",a.frontColor),iS(f,"tDpoitBackColor",a.backColor),k(t,o,i,2,!1);const{renderables:s}=t;for(let e=0,n=s.length;e<n;++e){const t=s[e];M(t)&&T(t,"color",0)}fw&&e.timer.markEnd("Renderer.renderDpoitTransparent")},renderDpoitVolume:(t,o,i)=>{fw&&e.timer.mark("Renderer.renderDpoitVolume"),r.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),r.enable(n.BLEND),k(t,o,i,2,!1);const{renderables:a}=t;for(let e=0,n=a.length;e<n;++e){const t=a[e];"directVolume"===t.values.dGeometryType.ref.value&&T(t,"color",0)}fw&&e.timer.markEnd("Renderer.renderDpoitVolume")},setProps:e=>{void 0!==e.backgroundColor&&e.backgroundColor!==i.backgroundColor&&(i.backgroundColor=e.backgroundColor,Jp.toVec3Normalized(c,i.backgroundColor),Sp.update(_.uFogColor,qh.copy(_.uFogColor.ref.value,c))),void 0!==e.pickingAlphaThreshold&&e.pickingAlphaThreshold!==i.pickingAlphaThreshold&&(i.pickingAlphaThreshold=e.pickingAlphaThreshold,Sp.update(_.uPickingAlphaThreshold,i.pickingAlphaThreshold)),void 0!==e.interiorDarkening&&e.interiorDarkening!==i.interiorDarkening&&(i.interiorDarkening=e.interiorDarkening,Sp.update(_.uInteriorDarkening,i.interiorDarkening)),void 0!==e.interiorColorFlag&&e.interiorColorFlag!==i.interiorColorFlag&&(i.interiorColorFlag=e.interiorColorFlag,Sp.update(_.uInteriorColorFlag,i.interiorColorFlag)),void 0!==e.interiorColor&&e.interiorColor!==i.interiorColor&&(i.interiorColor=e.interiorColor,Sp.update(_.uInteriorColor,Jp.toVec3Normalized(_.uInteriorColor.ref.value,i.interiorColor))),void 0!==e.colorMarker&&e.colorMarker!==i.colorMarker&&(i.colorMarker=e.colorMarker),void 0!==e.highlightColor&&e.highlightColor!==i.highlightColor&&(i.highlightColor=e.highlightColor,Sp.update(_.uHighlightColor,Jp.toVec3Normalized(_.uHighlightColor.ref.value,i.highlightColor))),void 0!==e.selectColor&&e.selectColor!==i.selectColor&&(i.selectColor=e.selectColor,Sp.update(_.uSelectColor,Jp.toVec3Normalized(_.uSelectColor.ref.value,i.selectColor))),void 0!==e.dimColor&&e.dimColor!==i.dimColor&&(i.dimColor=e.dimColor,Sp.update(_.uDimColor,Jp.toVec3Normalized(_.uDimColor.ref.value,i.dimColor))),void 0!==e.highlightStrength&&e.highlightStrength!==i.highlightStrength&&(i.highlightStrength=e.highlightStrength,Sp.update(_.uHighlightStrength,i.highlightStrength)),void 0!==e.selectStrength&&e.selectStrength!==i.selectStrength&&(i.selectStrength=e.selectStrength,Sp.update(_.uSelectStrength,i.selectStrength)),void 0!==e.dimStrength&&e.dimStrength!==i.dimStrength&&(i.dimStrength=e.dimStrength,Sp.update(_.uDimStrength,i.dimStrength)),void 0!==e.markerPriority&&e.markerPriority!==i.markerPriority&&(i.markerPriority=e.markerPriority,Sp.update(_.uMarkerPriority,i.markerPriority)),void 0!==e.xrayEdgeFalloff&&e.xrayEdgeFalloff!==i.xrayEdgeFalloff&&(i.xrayEdgeFalloff=e.xrayEdgeFalloff,Sp.update(_.uXrayEdgeFalloff,i.xrayEdgeFalloff)),void 0!==e.celSteps&&e.celSteps!==i.celSteps&&(i.celSteps=e.celSteps,Sp.update(_.uCelSteps,i.celSteps)),void 0!==e.exposure&&e.exposure!==i.exposure&&(i.exposure=e.exposure,Sp.update(_.uExposure,i.exposure)),void 0===e.light||Qp(e.light,i.light)||(i.light=e.light,Object.assign(a,$ie(e.light,a)),Sp.update(_.uLightDirection,a.direction),Sp.update(_.uLightColor,a.color)),void 0!==e.ambientColor&&e.ambientColor!==i.ambientColor&&(i.ambientColor=e.ambientColor,qh.scale(w,Jp.toArrayNormalized(i.ambientColor,w,0),i.ambientIntensity),Sp.update(_.uAmbientColor,w)),void 0!==e.ambientIntensity&&e.ambientIntensity!==i.ambientIntensity&&(i.ambientIntensity=e.ambientIntensity,qh.scale(w,Jp.toArrayNormalized(i.ambientColor,w,0),i.ambientIntensity),Sp.update(_.uAmbientColor,w))},setViewport:(e,t,n,o)=>{r.viewport(e,t,n,o),r.scissor(e,t,n,o),e===s.x&&t===s.y&&n===s.width&&o===s.height||(Oie.set(s,e,t,n,o),Sp.update(_.uViewport,Kh.set(_.uViewport.ref.value,e,t,n,o)))},setTransparentBackground:e=>{u=e},setDrawingBufferSize:(e,t)=>{e===l[0]&&t===l[1]||Sp.update(_.uDrawingBufferSize,Wh.set(l,e,t))},setPixelRatio:e=>{Sp.update(_.uPixelRatio,e)},setOcclusionTest:e=>{d=e},props:i,get stats(){return{programCount:e.stats.resourceCounts.program,shaderCount:e.stats.resourceCounts.shader,attributeCount:e.stats.resourceCounts.attribute,elementsCount:e.stats.resourceCounts.elements,framebufferCount:e.stats.resourceCounts.framebuffer,renderbufferCount:e.stats.resourceCounts.renderbuffer,textureCount:e.stats.resourceCounts.texture,vertexArrayCount:e.stats.resourceCounts.vertexArray,drawCount:o.drawCount,instanceCount:o.instanceCount,instancedDrawCount:o.instancedDrawCount}},get light(){return a},dispose:()=>{}}}}(eae||(eae={})),function(e){function t(e){return e.triggers.map(n.format).join(" or ")}function n(e,t){return n.create(e,t)}e.create=function(e){return{triggers:e,action:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",description:arguments.length>2&&void 0!==arguments[2]?arguments[2]:""}},e.isBinding=function(e){return!!e&&Array.isArray(e.triggers)&&"string"===typeof e.action},e.Empty={triggers:[],action:"",description:""},e.isEmpty=function(e){return 0===e.triggers.length||e.triggers.every((e=>void 0===e.buttons&&void 0===e.modifiers&&!e.code))},e.match=function(e,t,r){return e.triggers.some((e=>n.match(e,t,r)))},e.matchKey=function(e,t,r,o){return e.triggers.some((e=>n.matchKey(e,t,r,o)))},e.formatTriggers=t,e.format=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(e,t){const n=Object.keys(t),r=Object.values(t);return new Function(...n,`return \`${e}\`;`)(...r)}(e.description||ah(n),{triggers:"<i>"+t(e)+"</i>"})},e.Trigger=n,e.TriggerKey=function(e,t){return n.create(void 0,t,e)},function(e){e.create=function(e,t,n){return{buttons:e,modifiers:t,code:n}},e.Empty={},e.match=function(e,t,n){const{buttons:r,modifiers:o}=e;return void 0!==r&&(r===t||zie.has(r,t))&&(!o||jie.areEqual(o,n))},e.matchKey=function(e,t,n,r){const{modifiers:o,code:i}=e;return void 0!==i&&(i===t||1===i.length&&4===t.length&&t.startsWith("Key")&&!!r&&1===r.length&&r.toUpperCase()===i.toUpperCase())&&(!o||jie.areEqual(o,n))},e.format=function(e){const t=[],n=function(e,t){const n=[];void 0!==e||t?0===e?n.push("mouse hover"):void 0!==e&&(nae.has(e,nae.Flag.Primary)&&n.push("left mouse button"),nae.has(e,nae.Flag.Secondary)&&n.push("right mouse button"),nae.has(e,nae.Flag.Auxilary)&&n.push("wheel/middle mouse button"),nae.has(e,nae.Flag.Forth)&&n.push("three fingers")):n.push("any mouse button");return n.join(" + ")}(e.buttons,e.code);n&&t.push(n);const r=function(e){(null===e||void 0===e?void 0:e.startsWith("Key"))&&(e=e.substring(3));return e&&th(e).toLowerCase()}(e.code);r&&t.push(r);const o=function(e,t){const n=[];e?(e.alt&&n.push("alt key"),e.control&&n.push("control key"),e.meta&&n.push("meta/command key"),e.shift&&n.push("shift key"),t&&0===n.length&&n.push("no key")):t&&n.push("any key");return n.join(" + ")}(e.modifiers);return o&&t.push(o),t.join(" + ")}}(n=e.Trigger||(e.Trigger={}))}(tae||(tae={}));const nae=zie;const rae=zie,oae=jie,iae=tae.Trigger,aae=tae.TriggerKey,sae={dragRotate:tae([iae(rae.Flag.Primary,oae.create())],"Rotate","Drag using ${triggers}"),dragRotateZ:tae([iae(rae.Flag.Primary,oae.create({shift:!0,control:!0}))],"Rotate around z-axis (roll)","Drag using ${triggers}"),dragPan:tae([iae(rae.Flag.Secondary,oae.create()),iae(rae.Flag.Primary,oae.create({control:!0}))],"Pan","Drag using ${triggers}"),dragZoom:tae.Empty,dragFocus:tae([iae(rae.Flag.Forth,oae.create())],"Focus","Drag using ${triggers}"),dragFocusZoom:tae([iae(rae.Flag.Auxilary,oae.create())],"Focus and zoom","Drag using ${triggers}"),scrollZoom:tae([iae(rae.Flag.Auxilary,oae.create())],"Zoom","Scroll using ${triggers}"),scrollFocus:tae([iae(rae.Flag.Auxilary,oae.create({shift:!0}))],"Clip","Scroll using ${triggers}"),scrollFocusZoom:tae.Empty,keyMoveForward:tae([aae("KeyW")],"Move forward","Press ${triggers}"),keyMoveBack:tae([aae("KeyS")],"Move back","Press ${triggers}"),keyMoveLeft:tae([aae("KeyA")],"Move left","Press ${triggers}"),keyMoveRight:tae([aae("KeyD")],"Move right","Press ${triggers}"),keyMoveUp:tae([aae("KeyR")],"Move up","Press ${triggers}"),keyMoveDown:tae([aae("KeyF")],"Move down","Press ${triggers}"),keyRollLeft:tae([aae("KeyQ")],"Roll left","Press ${triggers}"),keyRollRight:tae([aae("KeyE")],"Roll right","Press ${triggers}"),keyPitchUp:tae([aae("ArrowUp",oae.create({shift:!0}))],"Pitch up","Press ${triggers}"),keyPitchDown:tae([aae("ArrowDown",oae.create({shift:!0}))],"Pitch down","Press ${triggers}"),keyYawLeft:tae([aae("ArrowLeft",oae.create({shift:!0}))],"Yaw left","Press ${triggers}"),keyYawRight:tae([aae("ArrowRight",oae.create({shift:!0}))],"Yaw right","Press ${triggers}"),boostMove:tae([aae("ShiftLeft")],"Boost move","Press ${triggers}"),enablePointerLock:tae([aae("Space",oae.create({control:!0}))],"Enable pointer lock","Press ${triggers}")},lae={noScroll:U_.Boolean(!0,{isHidden:!0}),rotateSpeed:U_.Numeric(5,{min:1,max:10,step:1}),zoomSpeed:U_.Numeric(7,{min:1,max:15,step:1}),panSpeed:U_.Numeric(1,{min:.1,max:5,step:.1}),moveSpeed:U_.Numeric(.75,{min:.1,max:3,step:.1}),boostMoveFactor:U_.Numeric(5,{min:.1,max:10,step:.1}),flyMode:U_.Boolean(!1),animate:U_.MappedStatic("off",{off:U_.EmptyGroup(),spin:U_.Group({speed:U_.Numeric(1,{min:-20,max:20,step:1},{description:"Rotation speed in radians per second"})},{description:"Spin the 3D scene around the x-axis in view space"}),rock:U_.Group({speed:U_.Numeric(.3,{min:-5,max:5,step:.1}),angle:U_.Numeric(10,{min:0,max:90,step:1},{description:"How many degrees to rotate in each direction."})},{description:"Rock the 3D scene around the x-axis in view space"})}),staticMoving:U_.Boolean(!0,{isHidden:!0}),dynamicDampingFactor:U_.Numeric(.2,{},{isHidden:!0}),minDistance:U_.Numeric(.01,{},{isHidden:!0}),maxDistance:U_.Numeric(1e150,{},{isHidden:!0}),gestureScaleFactor:U_.Numeric(1,{},{isHidden:!0}),maxWheelDelta:U_.Numeric(.02,{},{isHidden:!0}),bindings:U_.Value(sae,{isHidden:!0}),autoAdjustMinMaxDistance:U_.MappedStatic("on",{off:U_.EmptyGroup(),on:U_.Group({minDistanceFactor:U_.Numeric(0),minDistancePadding:U_.Numeric(5),maxDistanceFactor:U_.Numeric(10),maxDistanceMin:U_.Numeric(20)})},{isHidden:!0})};var cae,uae;!function(e){e.create=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o={...U_.getDefaultValues(lae),...r,bindings:{...sae,...r.bindings}},i=o.bindings,a=Oie.clone(t.viewport);let s=!1;const l=e.drag.subscribe((function(n){let{x:r,y:o,pageX:s,pageY:l,buttons:c,modifiers:u,isStart:d}=n;const A=le(r,o);if(d&&A)return;if(!d&&!m)return;m=!0,ge();const f=tae.match(i.dragRotate,c,u),p=tae.match(i.dragRotateZ,c,u),h=tae.match(i.dragPan,c,u),g=tae.match(i.dragZoom,c,u),y=tae.match(i.dragFocus,c,u),v=tae.match(i.dragFocusZoom,c,u);G(s,l),L(s,l);const I=e.pixelRatio,E=(r*I-a.width/2-a.x)/a.width,w=-(e.height-o*I-a.height/2-a.y)/a.height;d&&(f&&(Wh.copy(C,U),Wh.copy(b,C)),p&&(Wh.set(B,E,w),Wh.copy(x,B)),(g||v)&&(Wh.copy(D,N),Wh.copy(T,D)),y&&(Wh.copy(k,N),Wh.copy(Q,k)),h&&(Wh.copy(M,N),Wh.copy(R,M)));f&&Wh.copy(C,U);p&&Wh.set(B,E,w);(g||v)&&Wh.copy(T,N);y&&Wh.copy(Q,N);if(v){const e=qh.distance(t.state.position,t.state.target);t.setState({radius:e/5})}h&&Wh.copy(R,N)})),c=e.interactionEnd.subscribe((function(){m=!1})),u=e.wheel.subscribe((function(e){let{x:t,y:n,spinX:r,spinY:a,dz:s,buttons:l,modifiers:c}=e;if(le(t,n))return;let u=function(){let e=0,t=0;for(let n=0,r=arguments.length;n<r;++n){const r=n<0||arguments.length<=n?void 0:arguments[n],o=Math.abs(r);o>t&&(e=r,t=o)}return e}(.075*r,.075*a,1e-4*s);u<-o.maxWheelDelta?u=-o.maxWheelDelta:u>o.maxWheelDelta&&(u=o.maxWheelDelta);tae.match(i.scrollZoom,l,c)&&(T[1]+=u);tae.match(i.scrollFocus,l,c)&&(Q[1]+=u)})),d=e.pinch.subscribe((function(e){let{isStart:t,startX:n,startY:r,centerPageX:a,centerPageY:s,fractionDelta:l,buttons:c,modifiers:u}=e;if(le(n,r))return;const d=tae.match(i.dragPan,c,u),A=tae.match(i.scrollZoom,c,u);m=d||A,d&&(L(a,s),t?(Wh.copy(M,N),Wh.copy(R,M)):Wh.copy(R,N));A&&(T[1]+=o.gestureScaleFactor*l)})),A=e.keyDown.subscribe((function(t){let{modifiers:n,code:r,key:o,x:s,y:l}=t;if(le(s,l))return;tae.matchKey(i.keyMoveForward,r,n,o)?oe.moveForward=1:tae.matchKey(i.keyMoveBack,r,n,o)?oe.moveBack=1:tae.matchKey(i.keyMoveLeft,r,n,o)?oe.moveLeft=1:tae.matchKey(i.keyMoveRight,r,n,o)?oe.moveRight=1:tae.matchKey(i.keyMoveUp,r,n,o)?oe.moveUp=1:tae.matchKey(i.keyMoveDown,r,n,o)?oe.moveDown=1:tae.matchKey(i.keyRollLeft,r,n,o)?oe.rollLeft=1:tae.matchKey(i.keyRollRight,r,n,o)?oe.rollRight=1:tae.matchKey(i.keyPitchUp,r,n,o)?oe.pitchUp=1:tae.matchKey(i.keyPitchDown,r,n,o)?oe.pitchDown=1:tae.matchKey(i.keyYawLeft,r,n,o)?oe.yawLeft=1:tae.matchKey(i.keyYawRight,r,n,o)&&(oe.yawRight=1);tae.matchKey(i.boostMove,r,n,o)&&(oe.boostMove=1);tae.matchKey(i.enablePointerLock,r,n,o)&&e.requestPointerLock(a)})),f=e.keyUp.subscribe((function(e){let{modifiers:t,code:n,key:r,x:o,y:a}=e;var s,l,c,u,d,A,f,p,h,g,m,y;if(le(o,a))return;let v=!1;n.startsWith("Alt")?(v=!0,t.alt=!0):n.startsWith("Shift")?(v=!0,t.shift=!0):n.startsWith("Control")?(v=!0,t.control=!0):n.startsWith("Meta")&&(v=!0,t.meta=!0);const b=[];v?(oe.moveForward&&b.push((null===(s=i.keyMoveForward.triggers[0])||void 0===s?void 0:s.code)||""),oe.moveBack&&b.push((null===(l=i.keyMoveBack.triggers[0])||void 0===l?void 0:l.code)||""),oe.moveLeft&&b.push((null===(c=i.keyMoveLeft.triggers[0])||void 0===c?void 0:c.code)||""),oe.moveRight&&b.push((null===(u=i.keyMoveRight.triggers[0])||void 0===u?void 0:u.code)||""),oe.moveUp&&b.push((null===(d=i.keyMoveUp.triggers[0])||void 0===d?void 0:d.code)||""),oe.moveDown&&b.push((null===(A=i.keyMoveDown.triggers[0])||void 0===A?void 0:A.code)||""),oe.rollLeft&&b.push((null===(f=i.keyRollLeft.triggers[0])||void 0===f?void 0:f.code)||""),oe.rollRight&&b.push((null===(p=i.keyRollRight.triggers[0])||void 0===p?void 0:p.code)||""),oe.pitchUp&&b.push((null===(h=i.keyPitchUp.triggers[0])||void 0===h?void 0:h.code)||""),oe.pitchDown&&b.push((null===(g=i.keyPitchDown.triggers[0])||void 0===g?void 0:g.code)||""),oe.yawLeft&&b.push((null===(m=i.keyYawLeft.triggers[0])||void 0===m?void 0:m.code)||""),oe.yawRight&&b.push((null===(y=i.keyYawRight.triggers[0])||void 0===y?void 0:y.code)||"")):b.push(n);for(const C of b)tae.matchKey(i.keyMoveForward,C,t,r)?oe.moveForward=0:tae.matchKey(i.keyMoveBack,C,t,r)?oe.moveBack=0:tae.matchKey(i.keyMoveLeft,C,t,r)?oe.moveLeft=0:tae.matchKey(i.keyMoveRight,C,t,r)?oe.moveRight=0:tae.matchKey(i.keyMoveUp,C,t,r)?oe.moveUp=0:tae.matchKey(i.keyMoveDown,C,t,r)?oe.moveDown=0:tae.matchKey(i.keyRollLeft,C,t,r)?oe.rollLeft=0:tae.matchKey(i.keyRollRight,C,t,r)?oe.rollRight=0:tae.matchKey(i.keyPitchUp,C,t,r)?oe.pitchUp=0:tae.matchKey(i.keyPitchDown,C,t,r)?oe.pitchDown=0:tae.matchKey(i.keyYawLeft,C,t,r)?oe.yawLeft=0:tae.matchKey(i.keyYawRight,C,t,r)&&(oe.yawRight=0);tae.matchKey(i.boostMove,n,t,r)&&(oe.boostMove=0)})),p=e.move.subscribe((function(t){let{movementX:n,movementY:r}=t;if(!e.pointerLock||void 0===n||void 0===r)return;const o=.5*a.width-a.x,i=.5*a.height-a.y;Wh.copy(b,G(o,i)),Wh.copy(C,G(n+o,r+i))})),h=e.lock.subscribe((function(e){e?de():Ae()})),g=e.leave.subscribe((function(){oe.moveForward=0,oe.moveBack=0,oe.moveLeft=0,oe.moveRight=0,oe.moveUp=0,oe.moveDown=0,oe.rollLeft=0,oe.rollRight=0,oe.pitchUp=0,oe.pitchDown=0,oe.yawLeft=0,oe.yawRight=0,oe.boostMove=0}));let m=!1;const y=qh(),v=qh(),b=Wh(),C=Wh(),I=qh();let E=0;const x=Wh(),B=Wh();let w=0,_=0,S=0;const D=Wh(),T=Wh(),k=Wh(),Q=Wh(),M=Wh(),R=Wh(),P=qh.clone(t.target),O=qh.clone(t.position),F=qh.clone(t.up),N=Wh();function L(e,t){return Wh.set(N,(e-a.x)/a.width,(t-a.y)/a.height)}const U=Wh();function G(e,t){return Wh.set(U,(e-.5*a.width-a.x)/(.5*a.width),(a.height+2*(a.y-t))/a.width)}function j(){const t=e.width/e.height||1;return o.rotateSpeed*e.pixelRatio*t}const z=qh(),H=eg(),V=qh(),q=qh(),Y=qh(),X=qh(),W=eg(),K=qh(),J=eg(),Z=qh(),$=eg(),ee=qh(),te=Wh(),ne=qh(),re=qh(),oe={moveUp:0,moveDown:0,moveLeft:0,moveRight:0,moveForward:0,moveBack:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0,boostMove:0},ie=qh(),ae=qh();function se(){const e=Math.min(Math.max(1e3*t.state.radiusMax,.01),o.maxDistance);qh.squaredMagnitude(v)>e*e&&(qh.setMagnitude(v,v,e),qh.add(t.position,t.target,v),Wh.copy(D,T),Wh.copy(k,Q)),qh.squaredMagnitude(v)<o.minDistance*o.minDistance&&(qh.setMagnitude(v,v,o.minDistance),qh.add(t.position,t.target,v),Wh.copy(D,T),Wh.copy(k,Q))}function le(t,n){return t*=e.pixelRatio,n*=e.pixelRatio,t>a.x+a.width||e.height-n>a.y+a.height||t<a.x||e.height-n<a.y}let ce=-1;function ue(r){if(ce===r)return;const i=r-ce;ce>0&&("spin"===o.animate.name?function(e){if("spin"!==o.animate.name||0===o.animate.params.speed||m)return;const t=o.animate.params.speed/1e3;fe[0]=e*t/j(),Wh.add(C,b,fe)}(i):"rock"===o.animate.name&&function(e){if("rock"!==o.animate.name||0===o.animate.params.speed||m)return;const t=e/1e3*o.animate.params.speed,n=Np(o.animate.params.angle)/j(),r=Math.sin(pe*Math.PI*2)*n,i=Math.sin((pe+t)*Math.PI*2)*n;he[0]=i-r,Wh.add(C,b,he),pe+=t,pe>=1&&(pe=0)}(i)),qh.sub(v,t.position,t.target),function(){const e=C[0]-b[0],n=C[1]-b[1];qh.set(X,e,n,0);const r=qh.magnitude(X)*j();r?(qh.sub(v,t.position,t.target),qh.normalize(V,v),qh.normalize(q,t.up),qh.normalize(Y,qh.cross(Y,q,V)),qh.setMagnitude(q,q,n),qh.setMagnitude(Y,Y,e),qh.add(X,q,Y),qh.normalize(z,qh.cross(z,X,v)),eg.setAxisAngle(H,z,r),qh.transformQuat(v,v,H),qh.transformQuat(t.up,t.up,H),qh.copy(I,z),E=r):!o.staticMoving&&E&&(E*=Math.sqrt(1-o.dynamicDampingFactor),qh.sub(v,t.position,t.target),eg.setAxisAngle(H,I,E),qh.transformQuat(v,v,H),qh.transformQuat(t.up,t.up,H)),Wh.copy(b,C)}(),function(){const e=(oe.rollRight-oe.rollLeft)/45,n=(B[0]-x[0])*-Math.sign(B[1]),r=(B[1]-x[1])*-Math.sign(B[0]),i=-o.rotateSpeed*(-n+r)+e;i?(qh.normalize(K,v),eg.setAxisAngle(W,K,i),qh.transformQuat(t.up,t.up,W),w=i):!o.staticMoving&&w&&(w*=Math.sqrt(1-o.dynamicDampingFactor),qh.normalize(K,v),eg.setAxisAngle(W,K,w),qh.transformQuat(t.up,t.up,W)),Wh.copy(x,B)}(),function(){const e=(oe.pitchUp-oe.pitchDown)/(o.flyMode?360:90),n=-o.rotateSpeed*e;n?(qh.cross(Z,v,t.up),qh.normalize(Z,Z),eg.setAxisAngle(J,Z,n),qh.transformQuat(v,v,J),qh.transformQuat(t.up,t.up,J),_=n):!o.staticMoving&&_&&(_*=Math.sqrt(1-o.dynamicDampingFactor),qh.cross(Z,v,t.up),qh.normalize(Z,Z),eg.setAxisAngle(J,Z,_),qh.transformQuat(v,v,J),qh.transformQuat(t.up,t.up,J))}(),function(){const e=(oe.yawRight-oe.yawLeft)/(o.flyMode?360:90),n=-o.rotateSpeed*e;n?(qh.normalize(ee,t.up),eg.setAxisAngle($,ee,n),qh.transformQuat(v,v,$),qh.transformQuat(t.up,t.up,$),S=n):!o.staticMoving&&S&&(S*=Math.sqrt(1-o.dynamicDampingFactor),qh.normalize(ee,t.up),eg.setAxisAngle($,ee,S),qh.transformQuat(v,v,$),qh.transformQuat(t.up,t.up,$))}(),function(){const e=1+(T[1]-D[1])*o.zoomSpeed;1!==e&&e>0&&qh.scale(v,v,e),o.staticMoving?Wh.copy(D,T):D[1]+=(T[1]-D[1])*o.dynamicDampingFactor}(),function(){const e=(Q[1]-k[1])*o.zoomSpeed;if(0!==e){const n=Math.max(1,t.state.radius+t.state.radius*e);t.setState({radius:n})}o.staticMoving?Wh.copy(k,Q):k[1]+=(Q[1]-k[1])*o.dynamicDampingFactor}(),function(){if(Wh.sub(te,Wh.copy(te,R),M),Wh.squaredMagnitude(te)){const n=e.pixelRatio*o.panSpeed;te[0]*=1/t.zoom*t.viewport.width*n,te[1]*=1/t.zoom*t.viewport.height*n,qh.cross(re,qh.copy(re,v),t.up),qh.setMagnitude(re,re,te[0]),qh.setMagnitude(ne,t.up,te[1]),qh.add(re,re,ne),qh.add(t.position,t.position,re),qh.add(t.target,t.target,re),o.staticMoving?Wh.copy(M,R):(Wh.sub(te,R,M),Wh.scale(te,te,o.dynamicDampingFactor),Wh.add(M,M,te))}}(),qh.add(t.position,t.target,v),se(),ce>0&&function(r){qh.sub(ae,t.position,t.target);const i=Math.max(t.state.minNear,o.minDistance);qh.setMagnitude(ae,ae,i);const a=.06*r*o.moveSpeed*(1===oe.boostMove?o.boostMoveFactor:1);if(1===oe.moveForward&&(qh.normalize(ie,ae),qh.scaleAndSub(t.position,t.position,ie,a),(o.flyMode||e.pointerLock)&&qh.sub(t.target,t.position,ae)),1===oe.moveBack&&(qh.normalize(ie,ae),qh.scaleAndAdd(t.position,t.position,ie,a),(o.flyMode||e.pointerLock)&&qh.sub(t.target,t.position,ae)),1===oe.moveLeft&&(qh.cross(ie,ae,t.up),qh.normalize(ie,ie),o.flyMode||e.pointerLock?(qh.scaleAndAdd(t.position,t.position,ie,a),qh.sub(t.target,t.position,ae)):(qh.scaleAndSub(t.position,t.position,ie,a),qh.sub(t.target,t.position,v))),1===oe.moveRight&&(qh.cross(ie,ae,t.up),qh.normalize(ie,ie),o.flyMode||e.pointerLock?(qh.scaleAndSub(t.position,t.position,ie,a),qh.sub(t.target,t.position,ae)):(qh.scaleAndAdd(t.position,t.position,ie,a),qh.sub(t.target,t.position,v))),1===oe.moveUp&&(qh.normalize(ie,t.up),o.flyMode||e.pointerLock?(qh.scaleAndAdd(t.position,t.position,ie,a),qh.sub(t.target,t.position,ae)):(qh.scaleAndSub(t.position,t.position,ie,a),qh.sub(t.target,t.position,v))),1===oe.moveDown&&(qh.normalize(ie,t.up),o.flyMode||e.pointerLock?(qh.scaleAndSub(t.position,t.position,ie,a),qh.sub(t.target,t.position,ae)):(qh.scaleAndAdd(t.position,t.position,ie,a),qh.sub(t.target,t.position,v))),o.flyMode||e.pointerLock){const e=qh.distance(t.position,n.boundingSphereVisible.center);t.setState({minFar:e+n.boundingSphereVisible.radius})}}(Math.min(i,250)),qh.sub(v,t.position,t.target),se(),qh.squaredDistance(y,t.position)>zh&&qh.copy(y,t.position),ce=r}function de(){qh.sub(ae,t.position,t.target);const e=Math.max(t.state.minNear,o.minDistance);qh.setMagnitude(ae,ae,e),qh.sub(t.target,t.position,ae);const r=qh.distance(t.position,n.boundingSphereVisible.center);t.setState({minFar:r+n.boundingSphereVisible.radius})}function Ae(){const{center:e,radius:r}=n.boundingSphereVisible;if(qh.distance(t.position,e)>r){const n=t.getFocus(e,r);t.setState({...n,minFar:0})}else t.setState({minFar:0,radius:n.boundingSphereVisible.radius})}const fe=Wh.create(.005,0);let pe=0;const he=Wh.create(.005,0);function ge(){pe=0}return{viewport:a,get isAnimating(){return"off"!==o.animate.name},get isMoving(){return 1===oe.moveForward||1===oe.moveBack||1===oe.moveLeft||1===oe.moveRight||1===oe.moveUp||1===oe.moveDown||1===oe.rollLeft||1===oe.rollRight||1===oe.pitchUp||1===oe.pitchDown||1===oe.yawLeft||1===oe.yawRight},get props(){return o},setProps:e=>{var t;"rock"===(null===(t=e.animate)||void 0===t?void 0:t.name)&&"rock"!==o.animate.name&&ge(),void 0!==e.flyMode&&e.flyMode!==o.flyMode&&(e.flyMode?de():Ae()),Object.assign(o,e),Object.assign(i,e.bindings)},start:function(e){ce=-1,ue(e)},update:ue,reset:function(){qh.copy(t.target,P),qh.copy(t.position,O),qh.copy(t.up,F),qh.sub(v,t.position,t.target),qh.copy(y,t.position)},dispose:function(){s||(s=!0,l.unsubscribe(),u.unsubscribe(),d.unsubscribe(),c.unsubscribe(),A.unsubscribe(),f.unsubscribe(),p.unsubscribe(),h.unsubscribe(),g.unsubscribe())}}}}(cae||(cae={})),function(e){e.create=function(){return{view:Yh.identity(),position:qh.create(0,0,0),direction:qh.create(0,0,-1),up:qh.create(0,1,0)}};const t=qh.zero();e.update=function(e){qh.add(t,e.position,e.direction),Yh.lookAt(e.view,e.position,t,e.up)}}(uae||(uae={}));class dae{constructor(){this.removeList=$D(),this.removeMap=new Map,this.addList=$D(),this.addMap=new Map}get isEmpty(){return 0===this.removeList.count&&0===this.addList.count}get size(){return this.removeMap.size+this.addMap.size}add(e){if(this.removeMap.has(e)){const t=this.removeMap.get(e);this.removeMap.delete(e),this.removeList.remove(t)}if(this.addMap.has(e))return;const t=this.addList.addLast(e);this.addMap.set(e,t)}remove(e){if(this.addMap.has(e)){const t=this.addMap.get(e);this.addMap.delete(e),this.addList.remove(t)}if(this.removeMap.has(e))return;const t=this.removeList.addLast(e);this.removeMap.set(e,t)}tryGetRemove(){const e=this.removeList.removeFirst();return e&&this.removeMap.delete(e),e}tryGetAdd(){const e=this.addList.removeFirst();return e&&this.addMap.delete(e),e}}const Aae=new lO("98");function fae(e,t,n){Aae.reset();for(let r=0,o=e.length;r<o;++r){if(n&&!e[r].state.visible)continue;const t=e[r].values.boundingSphere.ref.value;t.radius&&Aae.includeSphere(t)}Aae.finishedIncludeStep();for(let r=0,o=e.length;r<o;++r){if(n&&!e[r].state.visible)continue;const t=e[r].values.boundingSphere.ref.value;t.radius&&Aae.radiusSphere(t)}return Aae.getSphere(t)}function pae(e,t){const n=e.getProgram("color").id,r=t.getProgram("color").id,o=e.materialId,i=t.materialId;return n!==r?n-r:o!==i?o-i:e.id-t.id}var hae;!function(e){e.create=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blended";const n=new Map,r=[],o=YT(),i=YT(),a=[],s=[];let l=!0,c=!0,u=!0,d=!0,A=!0,f=!0,p=0,h=0,g=0,m=!1;const y=uae.create(),{view:v,position:b,direction:C,up:I}=y;function E(o){if(n.has(o))console.warn(`RenderObject with id '${o.id}' already present`);else{const i=uJ(e,o,t);r.push(i),"direct-volume"===o.type?s.push(i):a.push(i),n.set(o,i),l=!0,c=!0}}function x(e){const t=n.get(e);t&&(t.dispose(),nS(r,t),nS(a,t),nS(s,t),n.delete(e),l=!0,c=!0)}const B=new dae;let w=-1;function _(){const e=function(){let e=23;for(let t=0,n=r.length;t<n;++t)r[t].state.visible&&(e=31*e+r[t].id|0);return e=kh(e),-1===e&&(e=0),e}();return e!==w&&(c=!0,u=!0,d=!0,A=!0,f=!0,w=e,!0)}return{view:v,position:b,direction:C,up:I,renderables:r,primitives:{view:v,position:b,direction:C,up:I,renderables:a},volumes:{view:v,position:b,direction:C,up:I,renderables:s},syncVisibility:_,setTransparency:e=>{t=e;for(let t=0,n=r.length;t<n;++t)r[t].setTransparency(e)},update(e,t){var o;if(uae.update(y),e)for(let r=0,i=e.length;r<i;++r)null===(o=n.get(e[r]))||void 0===o||o.update();else for(let n=0,i=r.length;n<i;++n)r[n].update();t?_():(l=!0,c=!0),u=!0,d=!0,A=!0,f=!0},add:e=>B.add(e),remove:e=>B.remove(e),commit:function(){return function(e){const t=vp();let n=0;for(;;){const r=B.tryGetRemove();if(!r)break;if(x(r),++n%100===0&&vp()-t>e)return!1}for(;;){const r=B.tryGetAdd();if(!r)break;if(E(r),++n%100===0&&vp()-t>e)return!1}return r.sort(pae),u=!0,d=!0,A=!0,f=!0,!0}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.MAX_VALUE)},get commitQueueSize(){return B.size},get needsCommit(){return!B.isEmpty},has:e=>n.has(e),clear:()=>{for(let e=0,t=r.length;e<t;++e)r[e].dispose();r.length=0,a.length=0,s.length=0,n.clear(),l=!0,c=!0},forEach:e=>{n.forEach(e)},get count(){return r.length},get boundingSphere(){return l&&(fae(r,o,!1),l=!1),o},get boundingSphereVisible(){return c&&(fae(r,i,!0),c=!1),i},get markerAverage(){return u&&(p=function(){if(0===a.length)return 0;let e=0,t=0;for(let n=0,r=a.length;n<r;++n)a[n].state.visible&&(t+=a[n].values.markerAverage.ref.value,e+=1);return e>0?t/e:0}(),u=!1),p},get emissiveAverage(){return d&&(h=function(){if(0===a.length)return 0;let e=0,t=0;for(let n=0,r=a.length;n<r;++n)a[n].state.visible&&(t+=a[n].values.emissiveAverage.ref.value+a[n].values.uEmissive.ref.value,e+=1);return e>0?t/e:0}(),d=!1),h},get opacityAverage(){return A&&(g=function(){var e,t;if(0===a.length)return 0;let n=0,r=0;for(let o=0,i=a.length;o<i;++o){const i=a[o];if(!i.state.visible)continue;const s=zp(i.values.alpha.ref.value*i.state.alphaFactor,0,1),l=(null===(e=i.values.dXrayShaded)||void 0===e?void 0:e.ref.value)?.5:1,c="fuzzy"===(null===(t=i.values.dPointStyle)||void 0===t?void 0:t.ref.value)?.5:1,u="text"===i.values.dGeometryType.ref.value?.5:1;r+=(1-i.values.transparencyAverage.ref.value)*s*l*c*u,n+=1}return n>0?r/n:0}(),A=!1),g},get hasOpaque(){return f&&(m=function(){var e;if(0===a.length)return!1;for(let t=0,n=a.length;t<n;++t){const n=a[t];if(n.state.visible){if(n.state.opaque)return!0;if(1===n.state.alphaFactor&&1===n.values.alpha.ref.value&&1!==n.values.transparencyAverage.ref.value)return!0;if("opaque"===(null===(e=n.values.dTransparentBackfaces)||void 0===e?void 0:e.ref.value))return!0}}return!1}(),f=!1),m}}}}(hae||(hae={}));class gae{get source(){return this._source}get target(){return this._target}apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;(!this.inTransition||t>0)&&bae.copySnapshot(this._source,this.camera.state),this.inTransition||bae.copySnapshot(this._target,this.camera.state),bae.copySnapshot(this._target,e),this._target.radius>this._target.radiusMax&&(this._target.radius=this._target.radiusMax),this._target.radius<.01&&(this._target.radius=.01),this._target.radiusMax<.01&&(this._target.radiusMax=.01),!this.inTransition&&t<=0||"undefined"!==typeof e.mode&&e.mode!==this.camera.state.mode?this.finish(this._target):(this.inTransition=!0,this.func=n||gae.defaultTransition,(!this.inTransition||t>0)&&(this.start=this.t,this.durationMs=t))}tick(e){this.t=e,this.update()}finish(e){bae.copySnapshot(this.camera.state,e),this.inTransition=!1}update(){if(!this.inTransition)return;const e=Math.min((this.t-this.start)/this.durationMs,1);1!==e?(this.func(this._current,e,this._source,this._target),bae.copySnapshot(this.camera.state,this._current)):this.finish(this._target)}constructor(e){this.camera=e,this.t=0,this.func=gae.defaultTransition,this.start=0,this.inTransition=!1,this.durationMs=0,this._source=bae.createDefaultSnapshot(),this._target=bae.createDefaultSnapshot(),this._current=bae.createDefaultSnapshot()}}!function(e){const t=eg.identity(),n=eg.identity(),r=qh(),o=qh();e.defaultTransition=function(e,i,a,s){bae.copySnapshot(e,s),eg.slerp(t,eg.Identity,eg.rotationTo(t,a.up,s.up),i),qh.transformQuat(e.up,a.up,t),qh.lerp(e.target,a.target,s.target,i);const l=Vp(qh.distance(a.target,a.position),qh.distance(s.target,s.position),i);qh.sub(r,a.position,a.target),qh.normalize(r,r),qh.sub(o,s.position,s.target),qh.normalize(o,o),eg.rotationTo(n,r,o),eg.slerp(n,eg.Identity,n,i),qh.transformQuat(r,r,n),qh.scale(r,r,l),qh.add(e.position,e.target,r),e.radius=Vp(a.radius,s.radius,i),e.radiusMax=Vp(a.radiusMax,s.radiusMax,i),e.fov=Vp(a.fov,s.fov,i),e.fog=Vp(a.fog,s.fog,i)}}(gae||(gae={}));const mae=qh(),yae=qh(),vae=Kh();class bae{get position(){return this.state.position}set position(e){qh.copy(this.state.position,e)}get up(){return this.state.up}set up(e){qh.copy(this.state.up,e)}get target(){return this.state.target}set target(e){qh.copy(this.state.target,e)}update(){const e=this.state;if(0===e.radiusMax)return!1;const t=2*Math.tan(e.fov/2)*qh.distance(e.position,e.target);switch(this.zoom=this.viewport.height/t,function(e){let{radius:t,radiusMax:n,mode:r,fog:o,clipFar:i,minNear:a,minFar:s}=e.state;t<.01&&(t=.01);const l=Math.max(i?t:n,s),c=qh.distance(e.position,e.target);let u=c-t,d=c+l;u=Math.max(Math.min(n,a),u),d=Math.max(a,d);u===d&&(d=u+.01);const A=c-l*(-(50-o)/50),f=d;e.near=u,e.far=d,e.fogNear=A,e.fogFar=f}(this),this.state.mode){case"orthographic":!function(e){const{viewport:t,zoom:n,near:r,far:o,viewOffset:i}=e,a=-t.width/2,s=t.width/2,l=t.height/2,c=-t.height/2,u=(s-a)/(2*n),d=(l-c)/(2*n),A=(s+a)/2,f=(l+c)/2;let p=A-u,h=A+u,g=f+d,m=f-d;if(i.enabled){const e=n/(i.width/i.fullWidth),t=n/(i.height/i.fullHeight),r=(s-a)/i.width,o=(l-c)/i.height;p+=r*(i.offsetX/e),h=p+r*(i.width/e),g-=o*(i.offsetY/t),m=g-o*(i.height/t)}Yh.ortho(e.projection,p,h,g,m,r,o),Yh.lookAt(e.view,e.position,e.target,e.up)}(this);break;case"perspective":!function(e){const t=e.viewport.width/e.viewport.height,{near:n,far:r,viewOffset:o}=e;let i=n*Math.tan(.5*e.state.fov),a=2*i,s=t*a,l=-.5*s;o.enabled&&(l+=o.offsetX*s/o.fullWidth,i-=o.offsetY*a/o.fullHeight,s*=o.width/o.fullWidth,a*=o.height/o.fullHeight);Yh.perspective(e.projection,l,l+s,i,i-a,n,r),Yh.lookAt(e.view,e.position,e.target,e.up)}(this);break;default:Zh(this.state.mode)}const n=!Yh.areEqual(this.projection,this.prevProjection,zh)||!Yh.areEqual(this.view,this.prevView,zh);if(n){if(Yh.mul(this.projectionView,this.projection,this.view),!Yh.tryInvert(this.inverseProjectionView,this.projectionView))return Yh.copy(this.view,this.prevView),Yh.copy(this.projection,this.prevProjection),Yh.mul(this.projectionView,this.projection,this.view),!1;Yh.copy(this.prevView,this.view),Yh.copy(this.prevProjection,this.projection)}return n}setState(e,t){this.transition.apply(e,t),this.stateChanged.next(e)}getSnapshot(){return bae.copySnapshot(bae.createDefaultSnapshot(),this.state)}getTargetDistance(e){return bae.targetDistance(e,this.state.mode,this.state.fov,this.viewport.width,this.viewport.height)}getFocus(e,t,n,r,o){var i,a;const s=Math.max(t,.01),l=this.getTargetDistance(s);qh.sub(this.deltaDirection,null!==(i=null===o||void 0===o?void 0:o.target)&&void 0!==i?i:this.target,null!==(a=null===o||void 0===o?void 0:o.position)&&void 0!==a?a:this.position),r&&qh.matchDirection(this.deltaDirection,r,this.deltaDirection),qh.setMagnitude(this.deltaDirection,this.deltaDirection,l),qh.sub(this.newPosition,e,this.deltaDirection);const c=bae.copySnapshot(bae.createDefaultSnapshot(),this.state);return c.target=qh.clone(e),c.radius=s,c.position=qh.clone(this.newPosition),n&&qh.matchDirection(c.up,n,c.up),c}getCenter(e,t){qh.sub(this.deltaDirection,this.target,this.position),qh.sub(this.newPosition,e,this.deltaDirection);const n=bae.copySnapshot(bae.createDefaultSnapshot(),this.state);return n.target=qh.clone(e),n.position=qh.clone(this.newPosition),t&&(n.radius=Math.max(t,.01)),n}getInvariantFocus(e,t,n,r){const o=Math.max(t,.01),i=this.getTargetDistance(o);qh.copy(this.deltaDirection,r),qh.setMagnitude(this.deltaDirection,this.deltaDirection,i),qh.sub(this.newPosition,e,this.deltaDirection);const a=bae.copySnapshot(bae.createDefaultSnapshot(),this.state);return a.target=qh.clone(e),a.radius=o,a.position=qh.clone(this.newPosition),qh.copy(a.up,n),a}focus(e,t,n,r,o){t>0&&this.setState(this.getFocus(e,t,r,o),n)}center(e,t){this.setState(this.getCenter(e),t)}project(e,t){return function(e,t,n,r){const{x:o,y:i,width:a,height:s}=n;Kh.set(Fie,t[0],t[1],t[2],1),Kh.transformMat4(Fie,Fie,r);const l=Fie[3];return 0!==l&&(Fie[0]/=l,Fie[1]/=l,Fie[2]/=l),e[0]=(Fie[0]+1)*a*.5+o,e[1]=(Fie[1]+1)*s*.5+i,e[2]=.5*(Fie[2]+1),e[3]=0===l?0:1/l,e}(e,t,this.viewport,this.projectionView)}unproject(e,t){return Nie(e,t,this.viewport,this.inverseProjectionView)}getPixelSize(e){return this.project(vae,e),this.unproject(mae,vae),vae[0]+=1,this.unproject(yae,vae),qh.distance(mae,yae)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oie.create(0,0,128,128);this.view=Yh.identity(),this.projection=Yh.identity(),this.projectionView=Yh.identity(),this.inverseProjectionView=Yh.identity(),this.state=bae.createDefaultSnapshot(),this.viewOffset=bae.ViewOffset(),this.near=1,this.far=1e4,this.fogNear=5e3,this.fogFar=1e4,this.zoom=1,this.transition=new gae(this),this.stateChanged=new $S(this.state),this.prevProjection=Yh.identity(),this.prevView=Yh.identity(),this.deltaDirection=qh(),this.newPosition=qh(),this.viewport=t,bae.copySnapshot(this.state,e)}}!function(e){e.ViewOffset=function(){return{enabled:!1,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}},e.setViewOffset=function(e,t,n,r,o,i,a){e.fullWidth=t,e.fullHeight=n,e.offsetX=r,e.offsetY=o,e.width=i,e.height=a},e.copyViewOffset=function(e,t){e.enabled=t.enabled,e.fullWidth=t.fullWidth,e.fullHeight=t.fullHeight,e.offsetX=t.offsetX,e.offsetY=t.offsetY,e.width=t.width,e.height=t.height},e.targetDistance=function(e,t,n,r,o){const i=Math.max(e,.01),a=o<r?1:r/o;return"orthographic"===t?Math.abs(i/a/Math.tan(n/2)):Math.abs(i/a/Math.sin(n/2))},e.createDefaultSnapshot=function(){return{mode:"perspective",fov:Math.PI/4,position:qh.create(0,0,100),up:qh.create(0,1,0),target:qh.create(0,0,0),radius:0,radiusMax:10,fog:50,clipFar:!0,minNear:5,minFar:0}},e.copySnapshot=function(e,t){return t?("undefined"!==typeof t.mode&&(e.mode=t.mode),"undefined"!==typeof t.fov&&(e.fov=t.fov),"undefined"!==typeof t.position&&qh.copy(e.position,t.position),"undefined"!==typeof t.up&&qh.copy(e.up,t.up),"undefined"!==typeof t.target&&qh.copy(e.target,t.target),"undefined"!==typeof t.radius&&(e.radius=t.radius),"undefined"!==typeof t.radiusMax&&(e.radiusMax=t.radiusMax),"undefined"!==typeof t.fog&&(e.fog=t.fog),"undefined"!==typeof t.clipFar&&(e.clipFar=t.clipFar),"undefined"!==typeof t.minNear&&(e.minNear=t.minNear),"undefined"!==typeof t.minFar&&(e.minFar=t.minFar),e):e},e.areSnapshotsEqual=function(e,t){return e.mode===t.mode&&e.fov===t.fov&&e.radius===t.radius&&e.radiusMax===t.radiusMax&&e.fog===t.fog&&e.clipFar===t.clipFar&&e.minNear===t.minNear&&e.minFar===t.minFar&&qh.exactEquals(e.position,t.position)&&qh.exactEquals(e.up,t.up)&&qh.exactEquals(e.target,t.target)}}(bae||(bae={}));const Cae={sceneBoundingSpheres:U_.Boolean(!1,{description:"Show full scene bounding spheres."}),visibleSceneBoundingSpheres:U_.Boolean(!1,{description:"Show visible scene bounding spheres."}),objectBoundingSpheres:U_.Boolean(!1,{description:"Show bounding spheres of visible render objects."}),instanceBoundingSpheres:U_.Boolean(!1,{description:"Show bounding spheres of visible instances."})};class Iae{constructor(e,t,n){this.objectsData=new Map,this.instancesData=new Map,this.scene=hae.create(e,"blended"),this.parent=t,this._props={...U_.getDefaultValues(Cae),...n}}update(){const e=Eae(this.scene,this.parent.boundingSphere,this.sceneData,bk.lightgrey,xae);e&&(this.sceneData=e);const t=Eae(this.scene,this.parent.boundingSphereVisible,this.visibleSceneData,bk.black,Bae);t&&(this.visibleSceneData=t),this.parent.forEach(((e,t)=>{const n=this.objectsData.get(t),r=Eae(this.scene,e.values.boundingSphere.ref.value,n,bk.tomato,wae);r&&this.objectsData.set(t,r);const o=this.instancesData.get(t),i=Eae(this.scene,e.values.invariantBoundingSphere.ref.value,o,bk.skyblue,_ae,{aTransform:t.values.aTransform,matrix:t.values.matrix,transform:t.values.transform,extraTransform:t.values.extraTransform,uInstanceCount:t.values.uInstanceCount,instanceCount:t.values.instanceCount,aInstance:t.values.aInstance,hasReflection:t.values.hasReflection,instanceGrid:t.values.instanceGrid});i&&this.instancesData.set(t,i)})),this.objectsData.forEach(((e,t)=>{this.parent.has(t)||(this.scene.remove(e.renderObject),this.objectsData.delete(t))})),this.instancesData.forEach(((e,t)=>{this.parent.has(t)||(this.scene.remove(e.renderObject),this.instancesData.delete(t))})),this.scene.update(void 0,!1),this.scene.commit()}syncVisibility(){this.sceneData&&(this.sceneData.renderObject.state.visible=this._props.sceneBoundingSpheres),this.visibleSceneData&&(this.visibleSceneData.renderObject.state.visible=this._props.visibleSceneBoundingSpheres),this.parent.forEach(((e,t)=>{const n=this.objectsData.get(t);n&&(n.renderObject.state.visible=t.state.visible&&this._props.objectBoundingSpheres);const r=this.instancesData.get(t);r&&(r.renderObject.state.visible=t.state.visible&&this._props.instanceBoundingSpheres)}))}clear(){this.sceneData=void 0,this.objectsData.clear(),this.scene.clear()}get isEnabled(){return this._props.sceneBoundingSpheres||this._props.visibleSceneBoundingSpheres||this._props.objectBoundingSpheres||this._props.instanceBoundingSpheres}get props(){return this._props}setProps(e){Object.assign(this._props,e),this.isEnabled&&this.update()}}function Eae(e,t,n,r,o,i){if(!n||!YT.equals(n.boundingSphere,t)){const a=function(e,t){const n=2,r=nX(n),o=ZX.createState(r,r/2,t);if(e.radius&&(aX(o,e.center,e.radius,n),YT.hasExtrema(e)))for(const i of e.extrema)aX(o,i,1,0);return ZX.getMesh(o)}(t,n&&n.mesh),s=n?n.renderObject:function(e,t,n,r){const o=RY.Utils.createValuesSimple(e,{alpha:.1,doubleSided:!1,cellSize:0,batchSize:0},t,1,r);return cJ("mesh",o,{disposed:!1,visible:!0,alphaFactor:1,pickable:!1,colorOnly:!1,opaque:!1,writeDepth:!1},n)}(a,r,o,i);return n?Sp.updateIfChanged(s.values.drawCount,HK.getDrawCount(a)):e.add(s),{boundingSphere:YT.clone(t),renderObject:s,mesh:a}}}const xae=lJ(),Bae=lJ(),wae=lJ(),_ae=lJ();var Sae;!function(e){e[e.Move=0]="Move",e[e.Click=1]="Click",e[e.Drag=2]="Drag"}(Sae||(Sae={}));const Dae=qh(),Tae=qh(),kae=qh(),Qae={maxFps:U_.Numeric(30,{min:10,max:60,step:10}),preferAtomPixelPadding:U_.Numeric(3,{min:0,max:20,step:1},{description:"Number of extra pixels at which to prefer atoms over bonds."})};class Mae{setProps(e){Object.assign(this.props,e)}identify(e,t){const n=this.startX!==this.endX||this.startY!==this.endY||this.input.pointerLock&&!this.controls.isMoving;if(e===Sae.Drag)return void(n&&!this.outsideViewport(this.startX,this.startY)&&(this.events.drag.next({current:this.prevLoci,buttons:this.buttons,button:this.button,modifiers:this.modifiers,pageStart:Wh.create(this.startX,this.startY),pageEnd:Wh.create(this.endX,this.endY)}),this.startX=this.endX,this.startY=this.endY));if(n){const e=this.canvasIdentify(this.endX,this.endY);this.id=null===e||void 0===e?void 0:e.id,this.position=null===e||void 0===e?void 0:e.position,this.startX=this.endX,this.startY=this.endY}if(e===Sae.Click){const e=this.getLoci(this.id,this.position);return this.events.click.next({current:e,buttons:this.buttons,button:this.button,modifiers:this.modifiers,page:Wh.create(this.endX,this.endY),position:this.position}),void(this.prevLoci=e)}if(!this.inside||this.currentIdentifyT!==t||!n||this.outsideViewport(this.endX,this.endY))return;const r=this.getLoci(this.id,this.position);this.events.hover.next({current:r,buttons:this.buttons,button:this.button,modifiers:this.modifiers,page:Wh.create(this.endX,this.endY),position:this.position}),this.prevLoci=r}tick(e){this.inside&&e-this.prevT>1e3/this.props.maxFps&&(this.prevT=e,this.currentIdentifyT=e,this.identify(this.isInteracting?Sae.Drag:Sae.Move,e))}leave(){this.inside=!1,b6.Loci.isEmpty(this.prevLoci)||(this.prevLoci=b6.Loci.Empty,this.events.hover.next({current:this.prevLoci,buttons:this.buttons,button:this.button,modifiers:this.modifiers}))}move(e,t,n,r,o){this.inside=!0,this.buttons=n,this.button=r,this.modifiers=o,this.endX=e,this.endY=t}click(e,t,n,r,o){this.endX=e,this.endY=t,this.buttons=n,this.button=r,this.modifiers=o,this.identify(Sae.Click,0)}drag(e,t,n,r,o){this.endX=e,this.endY=t,this.buttons=n,this.button=r,this.modifiers=o,this.identify(Sae.Drag,0)}modify(e){jie.areEqual(e,this.modifiers)||(this.modifiers=e,this.events.hover.next({current:this.prevLoci,buttons:this.buttons,button:this.button,modifiers:this.modifiers,page:Wh.create(this.endX,this.endY),position:this.position}))}outsideViewport(e,t){const{input:n,camera:{viewport:r}}=this;return e*=n.pixelRatio,t*=n.pixelRatio,e>r.x+r.width||n.height-t>r.y+r.height||e<r.x||n.height-t<r.y}getLoci(e,t){var n;const{repr:r,loci:o}=this.lociGetter(e);if(t&&r&&RP.isLoci(o)&&2===o.bonds.length){const{aUnit:e,aIndex:i}=o.bonds[0];e.conformation.position(e.elements[i],Dae),qh.sub(kae,this.camera.state.position,this.camera.state.target),qh.projectPointOnPlane(Tae,t,kae,Dae);const a=this.camera.getPixelSize(Tae);let s=r.theme.size.size(o.bonds[0])*(null!==(n=r.props.sizeFactor)&&void 0!==n?n:1);if(!1===r.props.lineSizeAttenuation&&(s*=a/2),s+=this.props.preferAtomPixelPadding*a,qh.distance(Tae,Dae)<s)return{repr:r,loci:RP.toFirstStructureElementLoci(o)}}return{repr:r,loci:o}}dispose(){this.ev.dispose()}constructor(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.canvasIdentify=e,this.lociGetter=t,this.input=n,this.camera=r,this.controls=o,this.ev=WS.create(),this.events={hover:this.ev(),drag:this.ev(),click:this.ev()},this.startX=-1,this.startY=-1,this.endX=-1,this.endY=-1,this.id=void 0,this.position=void 0,this.currentIdentifyT=0,this.isInteracting=!1,this.prevLoci=b6.Loci.Empty,this.prevT=0,this.inside=!1,this.buttons=zie.create(0),this.button=zie.create(0),this.modifiers=jie.None,this.props={...U_.getDefaultValues(Qae),...i},n.drag.subscribe((e=>{let{x:t,y:n,buttons:r,button:o,modifiers:i}=e;this.isInteracting=!0,this.drag(t,n,r,o,i)})),n.move.subscribe((e=>{let{x:t,y:n,inside:r,buttons:o,button:i,modifiers:a,onElement:s}=e;r&&!this.isInteracting&&(s?this.move(t,n,o,i,a):this.leave())})),n.leave.subscribe((()=>{this.leave()})),n.click.subscribe((e=>{let{x:t,y:n,buttons:r,button:o,modifiers:i}=e;this.outsideViewport(t,n)||this.click(t,n,r,o,i)})),n.interactionEnd.subscribe((()=>{this.isInteracting=!1})),n.modifiers.subscribe((e=>{this.modify(e)}))}}const Rae={edgeThresholdMin:U_.Numeric(.0312,{min:.0312,max:.0833,step:1e-4},{description:"Trims the algorithm from processing darks."}),edgeThresholdMax:U_.Numeric(.063,{min:.063,max:.333,step:.001},{description:"The minimum amount of local contrast required to apply algorithm."}),iterations:U_.Numeric(12,{min:0,max:16,step:1},{description:"Number of edge exploration steps."}),subpixelQuality:U_.Numeric(.3,{min:0,max:1,step:.01},{description:"Choose the amount of sub-pixel aliasing removal."})};class Pae{constructor(e,t){this.webgl=e,this.renderable=function(e,t){const n=t.getWidth(),r=t.getHeight(),o={...RK,tColor:Sp.create(t),uTexSizeInv:Sp.create(Wh.create(1/n,1/r)),dEdgeThresholdMin:Sp.create(.0312),dEdgeThresholdMax:Sp.create(.125),dIterations:Sp.create(12),dSubpixelQuality:Sp.create(.3)},i={...Oae},a=CK(e,"triangles",Fae,i,o);return kK(a,o)}(e,t)}updateState(e){const{gl:t,state:n}=this.webgl;n.enable(t.SCISSOR_TEST),n.disable(t.BLEND),n.disable(t.DEPTH_TEST),n.depthMask(!1);const{x:r,y:o,width:i,height:a}=e;n.viewport(r,o,i,a),n.scissor(r,o,i,a),n.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)}setSize(e,t){Sp.update(this.renderable.values.uTexSizeInv,Wh.set(this.renderable.values.uTexSizeInv.ref.value,1/e,1/t))}update(e,t){const{values:n}=this.renderable,{edgeThresholdMin:r,edgeThresholdMax:o,iterations:i,subpixelQuality:a}=t;let s=!1;n.tColor.ref.value!==e&&(Sp.update(this.renderable.values.tColor,e),s=!0),n.dEdgeThresholdMin.ref.value!==r&&(s=!0),Sp.updateIfChanged(n.dEdgeThresholdMin,r),n.dEdgeThresholdMax.ref.value!==o&&(s=!0),Sp.updateIfChanged(n.dEdgeThresholdMax,o),n.dIterations.ref.value!==i&&(s=!0),Sp.updateIfChanged(n.dIterations,i),n.dSubpixelQuality.ref.value!==a&&(s=!0),Sp.updateIfChanged(n.dSubpixelQuality,a),s&&this.renderable.update()}render(e,t){fw&&this.webgl.timer.mark("FxaaPass.render"),t?t.bind():this.webgl.unbindFramebuffer(),this.updateState(e),this.renderable.render(),fw&&this.webgl.timer.markEnd("FxaaPass.render")}}const Oae={...MK,tColor:ZW("texture","rgba","ubyte","linear"),uTexSizeInv:JW("v2"),dEdgeThresholdMin:eK("number"),dEdgeThresholdMax:eK("number"),dIterations:eK("number"),dSubpixelQuality:eK("number")},Fae=jV("fxaa",pK,"\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nuniform sampler2D tColor;\nuniform vec2 uTexSizeInv;\n\n// adapted from https://github.com/kosua20/Rendu\n// MIT License Copyright (c) 2017 Simon Rodriguez\n\n#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))\n\nfloat rgb2luma(vec3 rgb){\n    return sqrt(dot(rgb, vec3(0.299, 0.587, 0.114)));\n}\n\nfloat sampleLuma(vec2 uv) {\n    return rgb2luma(texture2D(tColor, uv).rgb);\n}\n\nfloat sampleLuma(vec2 uv, float uOffset, float vOffset) {\n    uv += uTexSizeInv * vec2(uOffset, vOffset);\n    return sampleLuma(uv);\n}\n\nvoid main(void) {\n    vec2 coords = gl_FragCoord.xy * uTexSizeInv;\n    vec2 inverseScreenSize = uTexSizeInv;\n\n    vec4 colorCenter = texture2D(tColor, coords);\n\n    // Luma at the current fragment\n    float lumaCenter = rgb2luma(colorCenter.rgb);\n\n    // Luma at the four direct neighbours of the current fragment.\n    float lumaDown = sampleLuma(coords, 0.0, -1.0);\n    float lumaUp = sampleLuma(coords, 0.0, 1.0);\n    float lumaLeft = sampleLuma(coords, -1.0, 0.0);\n    float lumaRight = sampleLuma(coords, 1.0, 0.0);\n\n    // Find the maximum and minimum luma around the current fragment.\n    float lumaMin = min(lumaCenter, min(min(lumaDown, lumaUp), min(lumaLeft, lumaRight)));\n    float lumaMax = max(lumaCenter, max(max(lumaDown, lumaUp), max(lumaLeft, lumaRight)));\n\n    // Compute the delta.\n    float lumaRange = lumaMax - lumaMin;\n\n    // If the luma variation is lower that a threshold (or if we are in a really dark area),\n    // we are not on an edge, don't perform any AA.\n    if (lumaRange < max(dEdgeThresholdMin, lumaMax * dEdgeThresholdMax)) {\n        gl_FragColor = colorCenter;\n        return;\n    }\n\n    // Query the 4 remaining corners lumas.\n    float lumaDownLeft = sampleLuma(coords, -1.0, -1.0);\n    float lumaUpRight = sampleLuma(coords, 1.0, 1.0);\n    float lumaUpLeft = sampleLuma(coords, -1.0, 1.0);\n    float lumaDownRight = sampleLuma(coords, 1.0, -1.0);\n\n    // Combine the four edges lumas (using intermediary variables for future computations\n    // with the same values).\n    float lumaDownUp = lumaDown + lumaUp;\n    float lumaLeftRight = lumaLeft + lumaRight;\n\n    // Same for corners\n    float lumaLeftCorners = lumaDownLeft + lumaUpLeft;\n    float lumaDownCorners = lumaDownLeft + lumaDownRight;\n    float lumaRightCorners = lumaDownRight + lumaUpRight;\n    float lumaUpCorners = lumaUpRight + lumaUpLeft;\n\n    // Compute an estimation of the gradient along the horizontal and vertical axis.\n    float edgeHorizontal = abs(-2.0 * lumaLeft + lumaLeftCorners) + abs(-2.0 * lumaCenter + lumaDownUp) * 2.0 + abs(-2.0 * lumaRight + lumaRightCorners);\n    float edgeVertical = abs(-2.0 * lumaUp + lumaUpCorners) + abs(-2.0 * lumaCenter + lumaLeftRight) * 2.0 + abs(-2.0 * lumaDown + lumaDownCorners);\n\n    // Is the local edge horizontal or vertical ?\n    bool isHorizontal = (edgeHorizontal >= edgeVertical);\n\n    // Choose the step size (one pixel) accordingly.\n    float stepLength = isHorizontal ? inverseScreenSize.y : inverseScreenSize.x;\n\n    // Select the two neighboring texels lumas in the opposite direction to the local edge.\n    float luma1 = isHorizontal ? lumaDown : lumaLeft;\n    float luma2 = isHorizontal ? lumaUp : lumaRight;\n    // Compute gradients in this direction.\n    float gradient1 = luma1 - lumaCenter;\n    float gradient2 = luma2 - lumaCenter;\n\n    // Which direction is the steepest ?\n    bool is1Steepest = abs(gradient1) >= abs(gradient2);\n\n    // Gradient in the corresponding direction, normalized.\n    float gradientScaled = 0.25 * max(abs(gradient1), abs(gradient2));\n\n    // Average luma in the correct direction.\n    float lumaLocalAverage = 0.0;\n    if(is1Steepest){\n        // Switch the direction\n        stepLength = -stepLength;\n        lumaLocalAverage = 0.5 * (luma1 + lumaCenter);\n    } else {\n        lumaLocalAverage = 0.5 * (luma2 + lumaCenter);\n    }\n\n    // Shift UV in the correct direction by half a pixel.\n    vec2 currentUv = coords;\n    if(isHorizontal){\n        currentUv.y += stepLength * 0.5;\n    } else {\n        currentUv.x += stepLength * 0.5;\n    }\n\n    // Compute offset (for each iteration step) in the right direction.\n    vec2 offset = isHorizontal ? vec2(inverseScreenSize.x, 0.0) : vec2(0.0, inverseScreenSize.y);\n    // Compute UVs to explore on each side of the edge, orthogonally.\n    // The QUALITY allows us to step faster.\n    vec2 uv1 = currentUv - offset * QUALITY(0);\n    vec2 uv2 = currentUv + offset * QUALITY(0);\n\n    // Read the lumas at both current extremities of the exploration segment,\n    // and compute the delta wrt to the local average luma.\n    float lumaEnd1 = sampleLuma(uv1);\n    float lumaEnd2 = sampleLuma(uv2);\n    lumaEnd1 -= lumaLocalAverage;\n    lumaEnd2 -= lumaLocalAverage;\n\n    // If the luma deltas at the current extremities is larger than the local gradient,\n    // we have reached the side of the edge.\n    bool reached1 = abs(lumaEnd1) >= gradientScaled;\n    bool reached2 = abs(lumaEnd2) >= gradientScaled;\n    bool reachedBoth = reached1 && reached2;\n\n    // If the side is not reached, we continue to explore in this direction.\n    if(!reached1){\n        uv1 -= offset * QUALITY(1);\n    }\n    if(!reached2){\n        uv2 += offset * QUALITY(1);\n    }\n\n    // If both sides have not been reached, continue to explore.\n    if(!reachedBoth){\n        for(int i = 2; i < dIterations; i++){\n            // If needed, read luma in 1st direction, compute delta.\n            if(!reached1){\n                lumaEnd1 = sampleLuma(uv1);\n                lumaEnd1 = lumaEnd1 - lumaLocalAverage;\n            }\n            // If needed, read luma in opposite direction, compute delta.\n            if(!reached2){\n                lumaEnd2 = sampleLuma(uv2);\n                lumaEnd2 = lumaEnd2 - lumaLocalAverage;\n            }\n            // If the luma deltas at the current extremities is larger than the local gradient,\n            // we have reached the side of the edge.\n            reached1 = abs(lumaEnd1) >= gradientScaled;\n            reached2 = abs(lumaEnd2) >= gradientScaled;\n            reachedBoth = reached1 && reached2;\n\n            // If the side is not reached, we continue to explore in this direction,\n            // with a variable quality.\n            if(!reached1){\n                uv1 -= offset * QUALITY(i);\n            }\n            if(!reached2){\n                uv2 += offset * QUALITY(i);\n            }\n\n            // If both sides have been reached, stop the exploration.\n            if(reachedBoth){\n                break;\n            }\n        }\n    }\n\n    // Compute the distances to each side edge of the edge (!).\n    float distance1 = isHorizontal ? (coords.x - uv1.x) : (coords.y - uv1.y);\n    float distance2 = isHorizontal ? (uv2.x - coords.x) : (uv2.y - coords.y);\n\n    // In which direction is the side of the edge closer ?\n    bool isDirection1 = distance1 < distance2;\n    float distanceFinal = min(distance1, distance2);\n\n    // Thickness of the edge.\n    float edgeThickness = (distance1 + distance2);\n\n    // Is the luma at center smaller than the local average ?\n    bool isLumaCenterSmaller = lumaCenter < lumaLocalAverage;\n\n    // If the luma at center is smaller than at its neighbour,\n    // the delta luma at each end should be positive (same variation).\n    bool correctVariation1 = (lumaEnd1 < 0.0) != isLumaCenterSmaller;\n    bool correctVariation2 = (lumaEnd2 < 0.0) != isLumaCenterSmaller;\n\n    // Only keep the result in the direction of the closer side of the edge.\n    bool correctVariation = isDirection1 ? correctVariation1 : correctVariation2;\n\n    // UV offset: read in the direction of the closest side of the edge.\n    float pixelOffset = - distanceFinal / edgeThickness + 0.5;\n\n    // If the luma variation is incorrect, do not offset.\n    float finalOffset = correctVariation ? pixelOffset : 0.0;\n\n    // Sub-pixel shifting\n    // Full weighted average of the luma over the 3x3 neighborhood.\n    float lumaAverage = (1.0 / 12.0) * (2.0 * (lumaDownUp + lumaLeftRight) + lumaLeftCorners + lumaRightCorners);\n    // Ratio of the delta between the global average and the center luma,\n    // over the luma range in the 3x3 neighborhood.\n    float subPixelOffset1 = clamp(abs(lumaAverage - lumaCenter) / lumaRange, 0.0, 1.0);\n    float subPixelOffset2 = (-2.0 * subPixelOffset1 + 3.0) * subPixelOffset1 * subPixelOffset1;\n    // Compute a sub-pixel offset based on this delta.\n    float subPixelOffsetFinal = subPixelOffset2 * subPixelOffset2 * float(dSubpixelQuality);\n\n    // Pick the biggest of the two offsets.\n    finalOffset = max(finalOffset, subPixelOffsetFinal);\n\n    // Compute the final UV coordinates.\n    vec2 finalUv = coords;\n    if(isHorizontal){\n        finalUv.y += finalOffset * stepLength;\n    } else {\n        finalUv.x += finalOffset * stepLength;\n    }\n\n    // Read the color at the new UV coordinates, and use it.\n    gl_FragColor = texture2D(tColor, finalUv);\n}\n");const Nae={edgeThreshold:U_.Numeric(.1,{min:.05,max:.15,step:.01}),maxSearchSteps:U_.Numeric(16,{min:0,max:32,step:1})};class Lae{get supported(){return this._supported}constructor(e,t){if(this.webgl=e,this._supported=!1,"undefined"===typeof HTMLImageElement)return void(Aw&&console.log('Missing "HTMLImageElement" required for "SMAA"'));const n=t.getWidth(),r=t.getHeight();this.edgesTarget=e.createRenderTarget(n,r,!1,"uint8","linear"),this.weightsTarget=e.createRenderTarget(n,r,!1,"uint8","linear"),this.edgesRenderable=function(e,t){const n=t.getWidth(),r=t.getHeight(),o={...RK,tColor:Sp.create(t),uTexSizeInv:Sp.create(Wh.create(1/n,1/r)),uViewport:Sp.create(Kh()),dEdgeThreshold:Sp.create(.1)},i={...Uae},a=CK(e,"triangles",Gae,i,o);return kK(a,o)}(e,t),this.weightsRenderable=function(e,t){const n=t.getWidth(),r=t.getHeight(),o=e.resources.texture("image-uint8","rgb","ubyte","linear"),i=e.resources.texture("image-uint8","rgba","ubyte","nearest"),a={...RK,tEdges:Sp.create(t),tArea:Sp.create(o),tSearch:Sp.create(i),uTexSizeInv:Sp.create(Wh.create(1/n,1/r)),uViewport:Sp.create(Kh()),dMaxSearchSteps:Sp.create(16)};lY("data:image/png;base64,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",a.tArea,o),lY("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII=",a.tSearch,i);const s={...jae},l=CK(e,"triangles",zae,s,a);return kK(l,a)}(e,this.edgesTarget.texture),this.blendRenderable=function(e,t,n){const r=t.getWidth(),o=t.getHeight(),i={...RK,tColor:Sp.create(t),tWeights:Sp.create(n),uTexSizeInv:Sp.create(Wh.create(1/r,1/o)),uViewport:Sp.create(Kh())},a={...Hae},s=CK(e,"triangles",Vae,a,i);return kK(s,i)}(e,t,this.weightsTarget.texture),this._supported=!0}updateState(e){const{gl:t,state:n}=this.webgl;n.enable(t.SCISSOR_TEST),n.disable(t.BLEND),n.disable(t.DEPTH_TEST),n.depthMask(!1);const{x:r,y:o,width:i,height:a}=e;n.viewport(r,o,i,a),n.scissor(r,o,i,a),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),Sp.update(this.edgesRenderable.values.uViewport,Oie.toVec4(this.edgesRenderable.values.uViewport.ref.value,e)),Sp.update(this.weightsRenderable.values.uViewport,Oie.toVec4(this.weightsRenderable.values.uViewport.ref.value,e)),Sp.update(this.blendRenderable.values.uViewport,Oie.toVec4(this.blendRenderable.values.uViewport.ref.value,e))}setSize(e,t){const n=this.edgesTarget.getWidth(),r=this.edgesTarget.getHeight();e===n&&t===r||(this.edgesTarget.setSize(e,t),this.weightsTarget.setSize(e,t),Sp.update(this.edgesRenderable.values.uTexSizeInv,Wh.set(this.edgesRenderable.values.uTexSizeInv.ref.value,1/e,1/t)),Sp.update(this.weightsRenderable.values.uTexSizeInv,Wh.set(this.weightsRenderable.values.uTexSizeInv.ref.value,1/e,1/t)),Sp.update(this.blendRenderable.values.uTexSizeInv,Wh.set(this.blendRenderable.values.uTexSizeInv.ref.value,1/e,1/t)))}update(e,t){let n=!1;this.edgesRenderable.values.tColor.ref.value!==e&&(Sp.update(this.edgesRenderable.values.tColor,e),n=!0),this.edgesRenderable.values.dEdgeThreshold.ref.value!==t.edgeThreshold&&(Sp.update(this.edgesRenderable.values.dEdgeThreshold,t.edgeThreshold),n=!0),n&&this.edgesRenderable.update(),this.weightsRenderable.values.dMaxSearchSteps.ref.value!==t.maxSearchSteps&&(Sp.update(this.weightsRenderable.values.dMaxSearchSteps,t.maxSearchSteps),this.weightsRenderable.update()),this.blendRenderable.values.tColor.ref.value!==e&&(Sp.update(this.blendRenderable.values.tColor,e),this.blendRenderable.update())}render(e,t){fw&&this.webgl.timer.mark("SmaaPass.render"),this.edgesTarget.bind(),this.updateState(e),this.edgesRenderable.render(),this.weightsTarget.bind(),this.updateState(e),this.weightsRenderable.render(),t?t.bind():this.webgl.unbindFramebuffer(),this.updateState(e),this.blendRenderable.render(),fw&&this.webgl.timer.markEnd("SmaaPass.render")}}const Uae={...MK,tColor:ZW("texture","rgba","ubyte","linear"),uTexSizeInv:JW("v2"),uViewport:JW("v4"),dEdgeThreshold:eK("number")},Gae=jV("smaa-edges","\nprecision highp float;\n\nattribute vec2 aPosition;\nuniform vec2 uQuadScale;\n\nuniform vec2 uTexSizeInv;\nuniform vec4 uViewport;\n\nvarying vec2 vUv;\nvarying vec4 vOffset[3];\n\nvoid SMAAEdgeDetectionVS(vec2 texCoord) {\n    vOffset[0] = texCoord.xyxy + uTexSizeInv.xyxy * vec4(-1.0, 0.0, 0.0, 1.0); // WebGL port note: Changed sign in W component\n    vOffset[1] = texCoord.xyxy + uTexSizeInv.xyxy * vec4(1.0, 0.0, 0.0, -1.0); // WebGL port note: Changed sign in W component\n    vOffset[2] = texCoord.xyxy + uTexSizeInv.xyxy * vec4(-2.0, 0.0, 0.0, 2.0); // WebGL port note: Changed sign in W component\n}\n\nvoid main() {\n    vec2 scale = uViewport.zw * uTexSizeInv;\n    vec2 shift = uViewport.xy * uTexSizeInv;\n    vUv = (aPosition + 1.0) * 0.5 * scale + shift;\n    SMAAEdgeDetectionVS(vUv);\n    vec2 position = aPosition * uQuadScale - vec2(1.0, 1.0) + uQuadScale;\n    gl_Position = vec4(position, 0.0, 1.0);\n}\n","\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nuniform sampler2D tColor;\nuniform vec2 uTexSizeInv;\n\nvarying vec2 vUv;\nvarying vec4 vOffset[3];\n\nvec4 SMAAColorEdgeDetectionPS(vec2 texcoord, vec4 offset[3], sampler2D colorTex) {\n    vec2 threshold = vec2(dEdgeThreshold, dEdgeThreshold);\n\n    // Calculate color deltas:\n    vec4 delta;\n    vec3 C = texture2D(colorTex, texcoord).rgb;\n\n    vec3 Cleft = texture2D(colorTex, offset[0].xy).rgb;\n    vec3 t = abs(C - Cleft);\n    delta.x = max(max(t.r, t.g), t.b);\n\n    vec3 Ctop = texture2D(colorTex, offset[0].zw).rgb;\n    t = abs(C - Ctop);\n    delta.y = max(max(t.r, t.g), t.b);\n\n    // We do the usual threshold:\n    vec2 edges = step(threshold, delta.xy);\n\n    // Then discard if there is no edge:\n    if (dot(edges, vec2(1.0, 1.0 )) == 0.0)\n        discard;\n\n    // Calculate right and bottom deltas:\n    vec3 Cright = texture2D(colorTex, offset[1].xy).rgb;\n    t = abs( C - Cright );\n    delta.z = max(max(t.r, t.g), t.b);\n\n    vec3 Cbottom  = texture2D(colorTex, offset[1].zw).rgb;\n    t = abs(C - Cbottom);\n    delta.w = max(max(t.r, t.g), t.b);\n\n    // Calculate the maximum delta in the direct neighborhood:\n    float maxDelta = max(max(max(delta.x, delta.y), delta.z), delta.w );\n\n    // Calculate left-left and top-top deltas:\n    vec3 Cleftleft  = texture2D(colorTex, offset[2].xy).rgb;\n    t = abs( C - Cleftleft );\n    delta.z = max(max(t.r, t.g), t.b);\n\n    vec3 Ctoptop = texture2D(colorTex, offset[2].zw).rgb;\n    t = abs(C - Ctoptop);\n    delta.w = max(max(t.r, t.g), t.b);\n\n    // Calculate the final maximum delta:\n    maxDelta = max(max(maxDelta, delta.z), delta.w);\n\n    // Local contrast adaptation in action:\n    edges.xy *= step(0.5 * maxDelta, delta.xy);\n\n    return vec4(edges, 0.0, 0.0);\n}\n\nvoid main() {\n    gl_FragColor = SMAAColorEdgeDetectionPS(vUv, vOffset, tColor);\n}\n");const jae={...MK,tEdges:ZW("texture","rgba","ubyte","linear"),tArea:ZW("texture","rgb","ubyte","linear"),tSearch:ZW("texture","rgba","ubyte","nearest"),uTexSizeInv:JW("v2"),uViewport:JW("v4"),dMaxSearchSteps:eK("number")},zae=jV("smaa-weights","\nprecision highp float;\n\nattribute vec2 aPosition;\nuniform vec2 uQuadScale;\n\nuniform vec2 uTexSizeInv;\nuniform vec4 uViewport;\n\nvarying vec2 vUv;\nvarying vec4 vOffset[3];\nvarying vec2 vPixCoord;\n\nvoid SMAABlendingWeightCalculationVS(vec2 texCoord) {\n    vPixCoord = texCoord / uTexSizeInv;\n\n    // We will use these offsets for the searches later on (see @PSEUDO_GATHER4):\n    vOffset[0] = texCoord.xyxy + uTexSizeInv.xyxy * vec4(-0.25, 0.125, 1.25, 0.125); // WebGL port note: Changed sign in Y and W components\n    vOffset[1] = texCoord.xyxy + uTexSizeInv.xyxy * vec4(-0.125, 0.25, -0.125, -1.25); // WebGL port note: Changed sign in Y and W components\n\n    // And these for the searches, they indicate the ends of the loops:\n    vOffset[2] = vec4(vOffset[0].xz, vOffset[1].yw) + vec4(-2.0, 2.0, -2.0, 2.0) * uTexSizeInv.xxyy * float(dMaxSearchSteps);\n}\n\nvoid main() {\n    vec2 scale = uViewport.zw * uTexSizeInv;\n    vec2 shift = uViewport.xy * uTexSizeInv;\n    vUv = (aPosition + 1.0) * 0.5 * scale + shift;\n    SMAABlendingWeightCalculationVS(vUv);\n    vec2 position = aPosition * uQuadScale - vec2(1.0, 1.0) + uQuadScale;\n    gl_Position = vec4(position, 0.0, 1.0);\n}\n","\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\n#define SMAASampleLevelZeroOffset(tex, coord, offset) texture2D(tex, coord + float(offset) * uTexSizeInv, 0.0)\n\n#define SMAA_AREATEX_MAX_DISTANCE 16\n#define SMAA_AREATEX_PIXEL_SIZE (1.0 / vec2(160.0, 560.0))\n#define SMAA_AREATEX_SUBTEX_SIZE (1.0 / 7.0)\n\nuniform sampler2D tEdges;\nuniform sampler2D tArea;\nuniform sampler2D tSearch;\nuniform vec2 uTexSizeInv;\n\nvarying vec2 vUv;\nvarying vec4 vOffset[3];\nvarying vec2 vPixCoord;\n\n#if __VERSION__ == 100\n    vec2 round(vec2 x) {\n        return sign(x) * floor(abs(x) + 0.5);\n    }\n#endif\n\nfloat SMAASearchLength(sampler2D searchTex, vec2 e, float bias, float scale) {\n    // Not required if searchTex accesses are set to point:\n    // float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);\n    // e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +\n    //     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;\n    e.r = bias + e.r * scale;\n    return 255.0 * texture2D(searchTex, e, 0.0).r;\n}\n\nfloat SMAASearchXLeft(sampler2D edgesTex, sampler2D searchTex, vec2 texCoord, float end) {\n    /**\n     * @PSEUDO_GATHER4\n     * This texCoord has been offset by (-0.25, -0.125) in the vertex shader to\n     * sample between edge, thus fetching four edges in a row.\n     * Sampling with different offsets in each direction allows to disambiguate\n     * which edges are active from the four fetched ones.\n     */\n    vec2 e = vec2(0.0, 1.0);\n\n    for (int i = 0; i < dMaxSearchSteps; i++) { // WebGL port note: Changed while to for\n        e = texture2D( edgesTex, texCoord, 0.0).rg;\n        texCoord -= vec2(2.0, 0.0) * uTexSizeInv;\n        if (!(texCoord.x > end && e.g > 0.8281 && e.r == 0.0)) break;\n    }\n\n    // We correct the previous (-0.25, -0.125) offset we applied:\n    texCoord.x += 0.25 * uTexSizeInv.x;\n\n    // The searches are bias by 1, so adjust the coords accordingly:\n    texCoord.x += uTexSizeInv.x;\n\n    // Disambiguate the length added by the last step:\n    texCoord.x += 2.0 * uTexSizeInv.x; // Undo last step\n    texCoord.x -= uTexSizeInv.x * SMAASearchLength(searchTex, e, 0.0, 0.5);\n\n    return texCoord.x;\n}\n\nfloat SMAASearchXRight(sampler2D edgesTex, sampler2D searchTex, vec2 texCoord, float end) {\n    vec2 e = vec2( 0.0, 1.0 );\n\n    for (int i = 0; i < dMaxSearchSteps; i++) { // WebGL port note: Changed while to for\n        e = texture2D(edgesTex, texCoord, 0.0).rg;\n        texCoord += vec2(2.0, 0.0) * uTexSizeInv;\n        if (!(texCoord.x < end && e.g > 0.8281 && e.r == 0.0)) break;\n    }\n\n    texCoord.x -= 0.25 * uTexSizeInv.x;\n    texCoord.x -= uTexSizeInv.x;\n    texCoord.x -= 2.0 * uTexSizeInv.x;\n    texCoord.x += uTexSizeInv.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );\n\n    return texCoord.x;\n}\n\nfloat SMAASearchYUp(sampler2D edgesTex, sampler2D searchTex, vec2 texCoord, float end) {\n    vec2 e = vec2( 1.0, 0.0 );\n\n    for (int i = 0; i < dMaxSearchSteps; i++) { // WebGL port note: Changed while to for\n        e = texture2D(edgesTex, texCoord, 0.0).rg;\n        texCoord += vec2(0.0, 2.0) * uTexSizeInv; // WebGL port note: Changed sign\n        if (!(texCoord.y > end && e.r > 0.8281 && e.g == 0.0)) break;\n    }\n\n    texCoord.y -= 0.25 * uTexSizeInv.y; // WebGL port note: Changed sign\n    texCoord.y -= uTexSizeInv.y; // WebGL port note: Changed sign\n    texCoord.y -= 2.0 * uTexSizeInv.y; // WebGL port note: Changed sign\n    texCoord.y += uTexSizeInv.y * SMAASearchLength(searchTex, e.gr, 0.0, 0.5); // WebGL port note: Changed sign\n\n    return texCoord.y;\n}\n\nfloat SMAASearchYDown(sampler2D edgesTex, sampler2D searchTex, vec2 texCoord, float end) {\n    vec2 e = vec2( 1.0, 0.0 );\n\n    for (int i = 0; i < dMaxSearchSteps; i++) { // WebGL port note: Changed while to for\n        e = texture2D(edgesTex, texCoord, 0.0).rg;\n        texCoord -= vec2( 0.0, 2.0 ) * uTexSizeInv; // WebGL port note: Changed sign\n        if (!(texCoord.y < end && e.r > 0.8281 && e.g == 0.0)) break;\n    }\n\n    texCoord.y += 0.25 * uTexSizeInv.y; // WebGL port note: Changed sign\n    texCoord.y += uTexSizeInv.y; // WebGL port note: Changed sign\n    texCoord.y += 2.0 * uTexSizeInv.y; // WebGL port note: Changed sign\n    texCoord.y -= uTexSizeInv.y * SMAASearchLength(searchTex, e.gr, 0.5, 0.5); // WebGL port note: Changed sign\n\n    return texCoord.y;\n}\n\nvec2 SMAAArea(sampler2D areaTex, vec2 dist, float e1, float e2, float offset) {\n    // Rounding prevents precision errors of bilinear filtering:\n    vec2 texCoord = float(SMAA_AREATEX_MAX_DISTANCE) * round(4.0 * vec2(e1, e2)) + dist;\n\n    // We do a scale and bias for mapping to texel space:\n    texCoord = SMAA_AREATEX_PIXEL_SIZE * texCoord + (0.5 * SMAA_AREATEX_PIXEL_SIZE);\n\n    // Move to proper place, according to the subpixel offset:\n    texCoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;\n\n    return texture2D(areaTex, texCoord, 0.0).rg;\n}\n\nvec4 SMAABlendingWeightCalculationPS(vec2 texCoord, vec2 pixCoord, vec4 offset[3], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices) {\n    vec4 weights = vec4(0.0, 0.0, 0.0, 0.0);\n\n    vec2 e = texture2D(edgesTex, texCoord).rg;\n\n    if (e.g > 0.0) { // Edge at north\n        vec2 d;\n\n        // Find the distance to the left:\n        vec2 coords;\n        coords.x = SMAASearchXLeft(edgesTex, searchTex, offset[0].xy, offset[2].x );\n        coords.y = offset[1].y; // offset[1].y = texCoord.y - 0.25 * uTexSizeInv.y (@CROSSING_OFFSET)\n        d.x = coords.x;\n\n        // Now fetch the left crossing edges, two at a time using bilinear\n        // filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to\n        // discern what value each edge has:\n        float e1 = texture2D(edgesTex, coords, 0.0).r;\n\n        // Find the distance to the right:\n        coords.x = SMAASearchXRight(edgesTex, searchTex, offset[0].zw, offset[2].y);\n        d.y = coords.x;\n\n        // We want the distances to be in pixel units (doing this here allow to\n        // better interleave arithmetic and memory accesses):\n        d = d / uTexSizeInv.x - pixCoord.x;\n\n        // SMAAArea below needs a sqrt, as the areas texture is compressed\n        // quadratically:\n        vec2 sqrt_d = sqrt(abs(d));\n\n        // Fetch the right crossing edges:\n        coords.y -= 1.0 * uTexSizeInv.y; // WebGL port note: Added\n        float e2 = SMAASampleLevelZeroOffset(edgesTex, coords, ivec2(1, 0)).r;\n\n        // Ok, we know how this pattern looks like, now it is time for getting\n        // the actual area:\n        weights.rg = SMAAArea(areaTex, sqrt_d, e1, e2, float(subsampleIndices.y));\n    }\n\n    if (e.r > 0.0) { // Edge at west\n        vec2 d;\n\n        // Find the distance to the top:\n        vec2 coords;\n\n        coords.y = SMAASearchYUp(edgesTex, searchTex, offset[1].xy, offset[2].z );\n        coords.x = offset[0].x; // offset[1].x = texCoord.x - 0.25 * uTexSizeInv.x;\n        d.x = coords.y;\n\n        // Fetch the top crossing edges:\n        float e1 = texture2D(edgesTex, coords, 0.0).g;\n\n        // Find the distance to the bottom:\n        coords.y = SMAASearchYDown(edgesTex, searchTex, offset[1].zw, offset[2].w);\n        d.y = coords.y;\n\n        // We want the distances to be in pixel units:\n        d = d / uTexSizeInv.y - pixCoord.y;\n\n        // SMAAArea below needs a sqrt, as the areas texture is compressed\n        // quadratically:\n        vec2 sqrt_d = sqrt(abs(d));\n\n        // Fetch the bottom crossing edges:\n        coords.y -= 1.0 * uTexSizeInv.y; // WebGL port note: Added\n        float e2 = SMAASampleLevelZeroOffset(edgesTex, coords, ivec2(0, 1)).g;\n\n        // Get the area for this direction:\n        weights.ba = SMAAArea(areaTex, sqrt_d, e1, e2, float(subsampleIndices.x));\n    }\n\n    return weights;\n}\n\nvoid main() {\n    gl_FragColor = SMAABlendingWeightCalculationPS(vUv, vPixCoord, vOffset, tEdges, tArea, tSearch, ivec4(0.0));\n}\n");const Hae={...MK,tColor:ZW("texture","rgba","ubyte","linear"),tWeights:ZW("texture","rgba","ubyte","linear"),uTexSizeInv:JW("v2"),uViewport:JW("v4")},Vae=jV("smaa-blend","\nprecision highp float;\n\nattribute vec2 aPosition;\nuniform vec2 uQuadScale;\n\nuniform vec2 uTexSizeInv;\nuniform vec4 uViewport;\n\nvarying vec2 vUv;\nvarying vec4 vOffset[2];\n\nvoid SMAANeighborhoodBlendingVS(vec2 texCoord) {\n    vOffset[0] = texCoord.xyxy + uTexSizeInv.xyxy * vec4(-1.0, 0.0, 0.0, 1.0); // WebGL port note: Changed sign in W component\n    vOffset[1] = texCoord.xyxy + uTexSizeInv.xyxy * vec4(1.0, 0.0, 0.0, -1.0); // WebGL port note: Changed sign in W component\n}\n\nvoid main() {\n    vec2 scale = uViewport.zw * uTexSizeInv;\n    vec2 shift = uViewport.xy * uTexSizeInv;\n    vUv = (aPosition + 1.0) * 0.5 * scale + shift;\n    SMAANeighborhoodBlendingVS(vUv);\n    vec2 position = aPosition * uQuadScale - vec2(1.0, 1.0) + uQuadScale;\n    gl_Position = vec4(position, 0.0, 1.0);\n}\n","\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nuniform sampler2D tWeights;\nuniform sampler2D tColor;\nuniform vec2 uTexSizeInv;\n\nvarying vec2 vUv;\nvarying vec4 vOffset[2];\n\nvec4 SMAANeighborhoodBlendingPS(vec2 texCoord, vec4 offset[2], sampler2D colorTex, sampler2D blendTex) {\n    // Fetch the blending weights for current pixel:\n    vec4 a;\n    a.xz = texture2D(blendTex, texCoord).xz;\n    a.y = texture2D(blendTex, offset[1].zw).g;\n    a.w = texture2D(blendTex, offset[1].xy).a;\n\n    // Is there any blending weight with a value greater than 0.0?\n    if (dot(a, vec4(1.0, 1.0, 1.0, 1.0)) < 1e-5) {\n        return texture2D(colorTex, texCoord, 0.0);\n    } else {\n        // Up to 4 lines can be crossing a pixel (one through each edge). We\n        // favor blending by choosing the line with the maximum weight for each\n        // direction:\n        vec2 offset;\n        offset.x = a.a > a.b ? a.a : -a.b; // left vs. right\n        offset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs\n\n        // Then we go in the direction that has the maximum weight:\n        if (abs(offset.x) > abs(offset.y)) { // horizontal vs. vertical\n            offset.y = 0.0;\n        } else {\n            offset.x = 0.0;\n        }\n\n        // Fetch the opposite color and lerp by hand:\n        vec4 C = texture2D(colorTex, texCoord, 0.0);\n        texCoord += sign(offset) * uTexSizeInv;\n        vec4 Cop = texture2D(colorTex, texCoord, 0.0);\n        float s = abs(offset.x) > abs(offset.y) ? abs(offset.x) : abs(offset.y);\n\n        // WebGL port note: Added gamma correction\n        C.xyz = pow(C.xyz, vec3(2.2));\n        Cop.xyz = pow(Cop.xyz, vec3(2.2));\n        vec4 mixed = mix(C, Cop, s);\n        mixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));\n\n        return mixed;\n    }\n}\n\nvoid main() {\n    gl_FragColor = SMAANeighborhoodBlendingPS(vUv, vOffset, tColor, tWeights);\n}\n");function qae(){return qae.zero()}!function(e){function t(){const e=[.1,0,0];return e[0]=0,e}function n(e,t,n,r){return e[0]=t,e[0]=n,e[0]=r,e}function r(e,t,n){const r=t[0],o=t[4],i=t[8],a=t[1],s=t[5],l=t[9],c=t[2],u=t[6],d=t[10];switch(n){case"XYZ":e[1]=Math.asin(zp(i,-1,1)),Math.abs(i)<.9999999?(e[0]=Math.atan2(-l,d),e[2]=Math.atan2(-o,r)):(e[0]=Math.atan2(u,s),e[2]=0);break;case"YXZ":e[0]=Math.asin(-zp(l,-1,1)),Math.abs(l)<.9999999?(e[1]=Math.atan2(i,d),e[2]=Math.atan2(a,s)):(e[1]=Math.atan2(-c,r),e[2]=0);break;case"ZXY":e[0]=Math.asin(zp(u,-1,1)),Math.abs(u)<.9999999?(e[1]=Math.atan2(-c,d),e[2]=Math.atan2(-o,s)):(e[1]=0,e[2]=Math.atan2(a,r));break;case"ZYX":e[1]=Math.asin(-zp(c,-1,1)),Math.abs(c)<.9999999?(e[0]=Math.atan2(u,d),e[2]=Math.atan2(a,r)):(e[0]=0,e[2]=Math.atan2(-o,s));break;case"YZX":e[2]=Math.asin(zp(a,-1,1)),Math.abs(a)<.9999999?(e[0]=Math.atan2(-l,s),e[1]=Math.atan2(-c,r)):(e[0]=0,e[1]=Math.atan2(i,d));break;case"XZY":e[2]=Math.asin(-zp(o,-1,1)),Math.abs(o)<.9999999?(e[0]=Math.atan2(u,s),e[1]=Math.atan2(i,r)):(e[0]=Math.atan2(-l,d),e[1]=0);break;default:Zh()}return e}e.zero=t,e.create=function(e,n,r){const o=t();return o[0]=e,o[1]=n,o[2]=r,o},e.set=n,e.clone=function(e){const n=t();return n[0]=e[0],n[1]=e[1],n[2]=e[2],n},e.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.fromMat4=r;const o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];e.fromQuat=function(e,t,n){return Yh.fromQuat(o,t),r(e,o,n)},e.fromVec3=function(e,t){return n(e,t[0],t[1],t[2])},e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.fromArray=function(e,t,n){return e[0]=t[n+0],e[1]=t[n+1],e[2]=t[n+2],e},e.toArray=function(e,t,n){return t[n+0]=e[0],t[n+1]=e[1],t[n+2]=e[2],t}}(qae||(qae={}));const Yae={opacity:U_.Numeric(1,{min:0,max:1,step:.01}),saturation:U_.Numeric(0,{min:-1,max:1,step:.01}),lightness:U_.Numeric(0,{min:-1,max:1,step:.01})},Xae={faces:U_.MappedStatic("urls",{urls:U_.Group({nx:U_.Text("",{label:"Negative X / Left"}),ny:U_.Text("",{label:"Negative Y / Bottom"}),nz:U_.Text("",{label:"Negative Z / Back"}),px:U_.Text("",{label:"Positive X / Right"}),py:U_.Text("",{label:"Positive Y / Top"}),pz:U_.Text("",{label:"Positive Z / Front"})},{isExpanded:!0,label:"URLs"}),files:U_.Group({nx:U_.File({label:"Negative X / Left",accept:"image/*"}),ny:U_.File({label:"Negative Y / Bottom",accept:"image/*"}),nz:U_.File({label:"Negative Z / Back",accept:"image/*"}),px:U_.File({label:"Positive X / Right",accept:"image/*"}),py:U_.File({label:"Positive Y / Top",accept:"image/*"}),pz:U_.File({label:"Positive Z / Front",accept:"image/*"})},{isExpanded:!0,label:"Files"})}),blur:U_.Numeric(0,{min:0,max:1,step:.01},{description:'Note, this only works in WebGL2 or when "EXT_shader_texture_lod" is available.'}),rotation:U_.Group({x:U_.Numeric(0,{min:0,max:360,step:1},{immediateUpdate:!0}),y:U_.Numeric(0,{min:0,max:360,step:1},{immediateUpdate:!0}),z:U_.Numeric(0,{min:0,max:360,step:1},{immediateUpdate:!0})}),...Yae},Wae={source:U_.MappedStatic("url",{url:U_.Text(""),file:U_.File({accept:"image/*"})}),blur:U_.Numeric(0,{min:0,max:1,step:.01},{description:'Note, this only works in WebGL2 or with power-of-two images and when "EXT_shader_texture_lod" is available.'}),...Yae,coverage:U_.Select("viewport",U_.arrayToOptions(["viewport","canvas"]))},Kae={topColor:U_.Color(Jp(14540253)),bottomColor:U_.Color(Jp(15658734)),ratio:U_.Numeric(.5,{min:0,max:1,step:.01}),coverage:U_.Select("viewport",U_.arrayToOptions(["viewport","canvas"]))},Jae={centerColor:U_.Color(Jp(14540253)),edgeColor:U_.Color(Jp(15658734)),ratio:U_.Numeric(.5,{min:0,max:1,step:.01}),coverage:U_.Select("viewport",U_.arrayToOptions(["viewport","canvas"]))},Zae={variant:U_.MappedStatic("off",{off:U_.EmptyGroup(),skybox:U_.Group(Xae,{isExpanded:!0}),image:U_.Group(Wae,{isExpanded:!0}),horizontalGradient:U_.Group(Kae,{isExpanded:!0}),radialGradient:U_.Group(Jae,{isExpanded:!0})},{label:"Environment"})};class $ae{constructor(e,t,n,r){this.webgl=e,this.assetManager=t,this.camera=new bae,this.target=qh(),this.position=qh(),this.dir=qh(),this.renderable=function(e,t,n){const r={drawCount:Sp.create(6),instanceCount:Sp.create(1),aPosition:Sp.create(QK),tSkybox:Sp.create(uY()),tImage:Sp.create(uY()),uImageScale:Sp.create(Wh()),uImageOffset:Sp.create(Wh()),uTexSize:Sp.create(Wh.create(t,n)),uViewport:Sp.create(Kh()),uViewportAdjusted:Sp.create(!0),uViewDirectionProjectionInverse:Sp.create(Yh()),uGradientColorA:Sp.create(qh()),uGradientColorB:Sp.create(qh()),uGradientRatio:Sp.create(.5),uBlur:Sp.create(0),uOpacity:Sp.create(1),uSaturation:Sp.create(0),uLightness:Sp.create(0),uRotation:Sp.create(Xh.identity()),dVariant:Sp.create("skybox")},o={...ose},i=CK(e,"triangles",ise,o,r);return kK(i,r)}(e,n,r)}setSize(e,t){const[n,r]=this.renderable.values.uTexSize.ref.value;e===n&&t===r||Sp.update(this.renderable.values.uTexSize,Wh.set(this.renderable.values.uTexSize.ref.value,e,t))}clearSkybox(){void 0!==this.skybox&&(this.skybox.texture.destroy(),this.skybox.assets.forEach((e=>this.assetManager.release(e))),this.skybox=void 0)}updateSkybox(e,t,n){var r;const o=null===(r=this.skybox)||void 0===r?void 0:r.props.faces,i=t.faces.params;if(!i.nx||!i.ny||!i.nz||!i.px||!i.py||!i.pz)return this.clearSkybox(),void(null===n||void 0===n||n(!1));if(this.skybox&&o&&(a=t.faces,s=this.skybox.props.faces,tse(a)===tse(s)))null===n||void 0===n||n(!1);else{this.clearSkybox();const{texture:e,assets:r}=function(e,t,n,r){const o=function(e,t){return"urls"===t.name?{nx:L_.getUrlAsset(e,t.params.nx),ny:L_.getUrlAsset(e,t.params.ny),nz:L_.getUrlAsset(e,t.params.nz),px:L_.getUrlAsset(e,t.params.px),py:L_.getUrlAsset(e,t.params.py),pz:L_.getUrlAsset(e,t.params.pz)}:{nx:t.params.nx,ny:t.params.ny,nz:t.params.nz,px:t.params.px,py:t.params.py,pz:t.params.pz}}(t,n),i=function(e,t){const n=t=>e.resolve(t,"binary").run().then((e=>new Blob([e.data])));return{nx:n(t.nx),ny:n(t.ny),nz:n(t.nz),px:n(t.px),py:n(t.py),pz:n(t.pz)}}(t,o),a=[o.nx,o.ny,o.nz,o.px,o.py,o.pz];if("undefined"===typeof HTMLImageElement)return console.error('Missing "HTMLImageElement" required for background skybox'),null===r||void 0===r||r(!0),{texture:uY(),assets:a};const s=e.resources.cubeTexture(i,!0,r);return{texture:s,assets:a}}(this.webgl,this.assetManager,t.faces,(e=>{this.skybox&&(this.skybox.loaded=!e),null===n||void 0===n||n(!0)}));this.skybox={texture:e,props:{...t},assets:r,loaded:!1},Sp.update(this.renderable.values.tSkybox,e),this.renderable.update()}var a,s;if(!this.skybox)return;let l=e;"orthographic"===e.state.mode&&(this.camera.setState({...e.state,mode:"perspective"}),this.camera.update(),l=this.camera);const c=this.renderable.values.uViewDirectionProjectionInverse.ref.value;qh.sub(this.dir,l.state.position,l.state.target),qh.setMagnitude(this.dir,this.dir,.1),qh.copy(this.position,this.dir),Yh.lookAt(c,this.position,this.target,l.state.up),Yh.mul(c,l.projection,c),Yh.invert(c,c),Sp.update(this.renderable.values.uViewDirectionProjectionInverse,c);const u=this.renderable.values.uRotation.ref.value;Xh.fromEuler(u,qae.create(Np(t.rotation.x),Np(t.rotation.y),Np(t.rotation.z)),"XYZ"),Sp.update(this.renderable.values.uRotation,u),Sp.updateIfChanged(this.renderable.values.uBlur,t.blur),Sp.updateIfChanged(this.renderable.values.uOpacity,t.opacity),Sp.updateIfChanged(this.renderable.values.uSaturation,t.saturation),Sp.updateIfChanged(this.renderable.values.uLightness,t.lightness),Sp.updateIfChanged(this.renderable.values.dVariant,"skybox"),this.renderable.update()}clearImage(){void 0!==this.image&&(this.image.texture.destroy(),this.assetManager.release(this.image.asset),this.image=void 0)}updateImage(e,t){if(!e.source.params)return this.clearImage(),void(null===t||void 0===t||t(!1));if(this.image&&this.image.props.source.params&&(n=e.source,r=this.image.props.source,rse(n)===rse(r)))null===t||void 0===t||t(!1);else{this.clearImage();const{texture:n,asset:r}=function(e,t,n,r){const o="url"===n.name?L_.getUrlAsset(t,n.params):n.params;if("undefined"===typeof HTMLImageElement)return console.error('Missing "HTMLImageElement" required for background image'),null===r||void 0===r||r(!0),{texture:uY(),asset:o};const i=e.resources.texture("image-uint8","rgba","ubyte","linear"),a=new Image;return a.onload=()=>{i.load(a),(e.isWebGL2||Up(a.width)&&Up(a.height))&&i.mipmap(),null===r||void 0===r||r()},a.onerror=()=>{null===r||void 0===r||r(!0)},t.resolve(o,"binary").run().then((e=>{const t=new Blob([e.data]);a.src=URL.createObjectURL(t)})),{texture:i,asset:o}}(this.webgl,this.assetManager,e.source,(e=>{this.image&&(this.image.loaded=!e),null===t||void 0===t||t(!0)}));this.image={texture:n,props:{...e},asset:r,loaded:!1},Sp.update(this.renderable.values.tImage,n),this.renderable.update()}var n,r;this.image&&(Sp.updateIfChanged(this.renderable.values.uBlur,e.blur),Sp.updateIfChanged(this.renderable.values.uOpacity,e.opacity),Sp.updateIfChanged(this.renderable.values.uSaturation,e.saturation),Sp.updateIfChanged(this.renderable.values.uLightness,e.lightness),Sp.updateIfChanged(this.renderable.values.uViewportAdjusted,"viewport"===e.coverage),Sp.updateIfChanged(this.renderable.values.dVariant,"image"),this.renderable.update())}updateImageScaling(){var e,t;const n=this.renderable.values,[r,o]=n.uTexSize.ref.value,i=(null===(e=this.image)||void 0===e?void 0:e.texture.getWidth())||0,a=(null===(t=this.image)||void 0===t?void 0:t.texture.getHeight())||0,s=r/o;s<i/a?Sp.update(n.uImageScale,Wh.set(n.uImageScale.ref.value,i*o/a,o)):Sp.update(n.uImageScale,Wh.set(n.uImageScale.ref.value,r,a*r/i));const[l,c]=n.uImageScale.ref.value,u=l/c;u>s?Sp.update(n.uImageOffset,Wh.set(n.uImageOffset.ref.value,(1-s/u)/2,0)):Sp.update(n.uImageOffset,Wh.set(n.uImageOffset.ref.value,0,(1-u/s)/2))}updateGradient(e,t,n,r,o){Sp.update(this.renderable.values.uGradientColorA,Jp.toVec3Normalized(this.renderable.values.uGradientColorA.ref.value,e)),Sp.update(this.renderable.values.uGradientColorB,Jp.toVec3Normalized(this.renderable.values.uGradientColorB.ref.value,t)),Sp.updateIfChanged(this.renderable.values.uGradientRatio,n),Sp.updateIfChanged(this.renderable.values.uViewportAdjusted,o),Sp.updateIfChanged(this.renderable.values.dVariant,r),this.renderable.update()}update(e,t,n){if("off"===t.variant.name)return this.clearSkybox(),this.clearImage(),void(null===n||void 0===n||n(!1));"skybox"===t.variant.name?(this.clearImage(),this.updateSkybox(e,t.variant.params,n)):"image"===t.variant.name?(this.clearSkybox(),this.updateImage(t.variant.params,n)):"horizontalGradient"===t.variant.name?(this.clearSkybox(),this.clearImage(),this.updateGradient(t.variant.params.topColor,t.variant.params.bottomColor,t.variant.params.ratio,t.variant.name,"viewport"===t.variant.params.coverage),null===n||void 0===n||n(!1)):"radialGradient"===t.variant.name&&(this.clearSkybox(),this.clearImage(),this.updateGradient(t.variant.params.centerColor,t.variant.params.edgeColor,t.variant.params.ratio,t.variant.name,"viewport"===t.variant.params.coverage),null===n||void 0===n||n(!1));const{x:r,y:o,width:i,height:a}=e.viewport;Sp.update(this.renderable.values.uViewport,Kh.set(this.renderable.values.uViewport.ref.value,r,o,i,a))}isEnabled(e){return!!(this.skybox&&this.skybox.loaded||this.image&&this.image.loaded||"horizontalGradient"===e.variant.name||"radialGradient"===e.variant.name)}isReady(){return!!(this.skybox&&this.skybox.loaded||this.image&&this.image.loaded||"horizontalGradient"===this.renderable.values.dVariant.ref.value||"radialGradient"===this.renderable.values.dVariant.ref.value)}render(){this.isReady()&&("image"===this.renderable.values.dVariant.ref.value&&this.updateImageScaling(),fw&&this.webgl.timer.mark("BackgroundPass.render"),this.renderable.render(),fw&&this.webgl.timer.markEnd("BackgroundPass.render"))}dispose(){this.clearSkybox(),this.clearImage()}}const ese="background-skybox";function tse(e){var t,n,r,o,i,a;return"urls"===e.name?`${ese}_${e.params.nx}|${e.params.ny}|${e.params.nz}|${e.params.px}|${e.params.py}|${e.params.pz}`:`${ese}_${null===(t=e.params.nx)||void 0===t?void 0:t.id}|${null===(n=e.params.ny)||void 0===n?void 0:n.id}|${null===(r=e.params.nz)||void 0===r?void 0:r.id}|${null===(o=e.params.px)||void 0===o?void 0:o.id}|${null===(i=e.params.py)||void 0===i?void 0:i.id}|${null===(a=e.params.pz)||void 0===a?void 0:a.id}`}const nse="background-image";function rse(e){var t;return"url"===e.name?`${nse}_${e.params}`:`${nse}_${null===(t=e.params)||void 0===t?void 0:t.id}`}const ose={drawCount:tK("number"),instanceCount:tK("number"),aPosition:KW("float32",2,0),tSkybox:ZW("texture","rgba","ubyte","linear"),tImage:ZW("texture","rgba","ubyte","linear"),uImageScale:JW("v2"),uImageOffset:JW("v2"),uTexSize:JW("v2"),uViewport:JW("v4"),uViewportAdjusted:JW("b"),uViewDirectionProjectionInverse:JW("m4"),uGradientColorA:JW("v3"),uGradientColorB:JW("v3"),uGradientRatio:JW("f"),uBlur:JW("f"),uOpacity:JW("f"),uSaturation:JW("f"),uLightness:JW("f"),uRotation:JW("m3"),dVariant:eK("string",["skybox","image","verticalGradient","horizontalGradient","radialGradient"])},ise=jV("background","\nprecision mediump float;\n\nattribute vec2 aPosition;\n\nvarying vec4 vPosition;\n\nvoid main() {\n    vPosition = vec4(aPosition, 1.0, 1.0);\n    gl_Position = vec4(aPosition, 1.0, 1.0);\n}\n","\nprecision mediump float;\nprecision mediump samplerCube;\nprecision mediump sampler2D;\n\n#if defined(dVariant_skybox)\n    uniform samplerCube tSkybox;\n    uniform mat4 uViewDirectionProjectionInverse;\n    uniform float uBlur;\n    uniform float uOpacity;\n    uniform float uSaturation;\n    uniform float uLightness;\n    uniform mat3 uRotation;\n#elif defined(dVariant_image)\n    uniform sampler2D tImage;\n    uniform vec2 uImageScale;\n    uniform vec2 uImageOffset;\n    uniform float uBlur;\n    uniform float uOpacity;\n    uniform float uSaturation;\n    uniform float uLightness;\n#elif defined(dVariant_horizontalGradient) || defined(dVariant_radialGradient)\n    uniform vec3 uGradientColorA;\n    uniform vec3 uGradientColorB;\n    uniform float uGradientRatio;\n#endif\n\nuniform vec2 uTexSize;\nuniform vec4 uViewport;\nuniform bool uViewportAdjusted;\nvarying vec4 vPosition;\n\n// TODO: add as general pp option to remove banding?\n// Iestyn's RGB dither from http://alex.vlachos.com/graphics/Alex_Vlachos_Advanced_VR_Rendering_GDC2015.pdf\nvec3 ScreenSpaceDither(vec2 vScreenPos) {\n    vec3 vDither = vec3(dot(vec2(171.0, 231.0), vScreenPos.xy));\n    vDither.rgb = fract(vDither.rgb / vec3(103.0, 71.0, 97.0));\n    return vDither.rgb / 255.0;\n}\n\nvec3 saturateColor(vec3 c, float amount) {\n    // https://www.w3.org/TR/WCAG21/#dfn-relative-luminance\n    const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n    vec3 intensity = vec3(dot(c, W));\n    return mix(intensity, c, 1.0 + amount);\n}\n\nvec3 lightenColor(vec3 c, float amount) {\n    return c + amount;\n}\n\nvoid main() {\n    #if defined(dVariant_skybox)\n        vec4 t = uViewDirectionProjectionInverse * vPosition;\n        #ifdef enabledShaderTextureLod\n            gl_FragColor = textureCubeLodEXT(tSkybox, uRotation * normalize(t.xyz / t.w), uBlur * 8.0);\n        #else\n            gl_FragColor = textureCube(tSkybox, uRotation * normalize(t.xyz / t.w));\n        #endif\n        gl_FragColor.a = uOpacity;\n        gl_FragColor.rgb = lightenColor(saturateColor(gl_FragColor.rgb, uSaturation), uLightness);\n    #elif defined(dVariant_image)\n        vec2 coords;\n        if (uViewportAdjusted) {\n            coords = ((gl_FragCoord.xy - uViewport.xy) * (uTexSize / uViewport.zw) / uImageScale) + uImageOffset;\n        } else {\n            coords = (gl_FragCoord.xy / uImageScale) + uImageOffset;\n        }\n        #ifdef enabledShaderTextureLod\n            gl_FragColor = texture2DLodEXT(tImage, vec2(coords.x, 1.0 - coords.y), uBlur * 8.0);\n        #else\n            gl_FragColor = texture2D(tImage, vec2(coords.x, 1.0 - coords.y));\n        #endif\n        gl_FragColor.a = uOpacity;\n        gl_FragColor.rgb = lightenColor(saturateColor(gl_FragColor.rgb, uSaturation), uLightness);\n    #elif defined(dVariant_horizontalGradient)\n        float d;\n        if (uViewportAdjusted) {\n            d = ((gl_FragCoord.y - uViewport.y) * (uTexSize.y / uViewport.w) / uTexSize.y) + 1.0 - (uGradientRatio * 2.0);\n        } else {\n            d = (gl_FragCoord.y / uTexSize.y) + 1.0 - (uGradientRatio * 2.0);\n        }\n        gl_FragColor = vec4(mix(uGradientColorB, uGradientColorA, clamp(d, 0.0, 1.0)), 1.0);\n        gl_FragColor.rgb += ScreenSpaceDither(gl_FragCoord.xy);\n    #elif defined(dVariant_radialGradient)\n        float d;\n        if (uViewportAdjusted) {\n            d = distance(vec2(0.5), (gl_FragCoord.xy - uViewport.xy) * (uTexSize / uViewport.zw) / uTexSize) + uGradientRatio - 0.5;\n        } else {\n            d = distance(vec2(0.5), gl_FragCoord.xy / uTexSize) + uGradientRatio - 0.5;\n        }\n        gl_FragColor = vec4(mix(uGradientColorB, uGradientColorA, 1.0 - clamp(d, 0.0, 1.0)), 1.0);\n        gl_FragColor.rgb += ScreenSpaceDither(gl_FragCoord.xy);\n    #endif\n}\n",{shaderTextureLod:"optional"});const ase={sharpness:U_.Numeric(.5,{min:0,max:1,step:.05}),denoise:U_.Boolean(!0)};class sse{constructor(e,t){this.webgl=e,this.renderable=function(e,t){const n=t.getWidth(),r=t.getHeight(),o={...RK,tColor:Sp.create(t),uTexSizeInv:Sp.create(Wh.create(1/n,1/r)),uSharpness:Sp.create(.5),dDenoise:Sp.create(!0)},i={...lse},a=CK(e,"triangles",cse,i,o);return kK(a,o)}(e,t)}updateState(e){const{gl:t,state:n}=this.webgl;n.enable(t.SCISSOR_TEST),n.disable(t.BLEND),n.disable(t.DEPTH_TEST),n.depthMask(!1);const{x:r,y:o,width:i,height:a}=e;n.viewport(r,o,i,a),n.scissor(r,o,i,a),n.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)}setSize(e,t){Sp.update(this.renderable.values.uTexSizeInv,Wh.set(this.renderable.values.uTexSizeInv.ref.value,1/e,1/t))}update(e,t){const{values:n}=this.renderable,{sharpness:r,denoise:o}=t;let i=!1;n.tColor.ref.value!==e&&(Sp.update(this.renderable.values.tColor,e),i=!0),Sp.updateIfChanged(n.uSharpness,2-2*Math.pow(r,.25)),n.dDenoise.ref.value!==o&&(i=!0),Sp.updateIfChanged(n.dDenoise,o),i&&this.renderable.update()}render(e,t){fw&&this.webgl.timer.mark("CasPass.render"),t?t.bind():this.webgl.unbindFramebuffer(),this.updateState(e),this.renderable.render(),fw&&this.webgl.timer.markEnd("CasPass.render")}}const lse={...MK,tColor:ZW("texture","rgba","ubyte","linear"),uTexSizeInv:JW("v2"),uSharpness:JW("f"),dDenoise:eK("boolean")},cse=jV("cas",pK,"\nprecision mediump float;\nprecision mediump sampler2D;\n\nuniform sampler2D tColor;\nuniform vec2 uTexSizeInv;\n\nuniform float uSharpness;\n\n// adapted from https://www.shadertoy.com/view/stXSWB\n\n/*\n* FidelityFX Super Resolution scales up a low resolution\n* image, while adding fine detail.\n*\n* MIT Open License\n*\n* https://gpuopen.com/fsr\n*\n* Left: FSR processed\n* Right: Original texture, bilinear interpolation\n*\n* Mouse at top: Sharpness 0 stops (maximum)\n* Mouse at bottom: Sharpness 2 stops (minimum)\n*\n* It works in two passes-\n*   EASU upsamples the image with a clamped Lanczos kernel.\n*   RCAS sharpens the image at the target resolution.\n*\n* I needed to make a few changes to improve readability and\n* WebGL compatibility in an algorithm I don't fully understand.\n* Expect bugs.\n*\n* Shader not currently running for WebGL1 targets (eg. mobile Safari)\n*\n* There is kind of no point to using FSR in Shadertoy, as it renders buffers\n* at full target resolution. But this might be useful for WebGL based demos\n* running smaller-than-target render buffers.\n*\n* For sharpening with a full resolution render buffer,\n* FidelityFX CAS is a better option.\n* https://www.shadertoy.com/view/ftsXzM\n*\n* For readability and compatibility, these optimisations have been removed:\n*   * Fast approximate inverse and inversesqrt\n*   * textureGather fetches (not WebGL compatible)\n*   * Multiplying by reciprocal instead of division\n*\n* Apologies to AMD for the numerous slowdowns and errors I have introduced.\n*\n*/\n\n/***** RCAS *****/\n#define FSR_RCAS_LIMIT (0.25-(1.0/16.0))\n\n// Input callback prototypes that need to be implemented by calling shader\nvec4 FsrRcasLoadF(vec2 p);\n//------------------------------------------------------------------------------------------------------------------------------\nvoid FsrRcasCon(\n    out float con,\n    // The scale is {0.0 := maximum, to N>0, where N is the number of stops (halving) of the reduction of sharpness}.\n    float sharpness\n) {\n    // Transform from stops to linear value.\n    con = exp2(-sharpness);\n}\n\nvec3 FsrRcasF(\n    vec2 ip, // Integer pixel position in output.\n    float con\n) {\n    // Constant generated by RcasSetup().\n    // Algorithm uses minimal 3x3 pixel neighborhood.\n    //    b\n    //  d e f\n    //    h\n    vec2 sp = vec2(ip);\n    vec3 b = FsrRcasLoadF(sp + vec2( 0,-1)).rgb;\n    vec3 d = FsrRcasLoadF(sp + vec2(-1, 0)).rgb;\n    vec3 e = FsrRcasLoadF(sp).rgb;\n    vec3 f = FsrRcasLoadF(sp + vec2( 1, 0)).rgb;\n    vec3 h = FsrRcasLoadF(sp + vec2( 0, 1)).rgb;\n\n    // Luma times 2.\n    float bL = b.g + .5 * (b.b + b.r);\n    float dL = d.g + .5 * (d.b + d.r);\n    float eL = e.g + .5 * (e.b + e.r);\n    float fL = f.g + .5 * (f.b + f.r);\n    float hL = h.g + .5 * (h.b + h.r);\n\n    // Noise detection.\n    #ifdef dDenoise\n        float nz = .25 * (bL + dL + fL + hL) - eL;\n        nz=clamp(\n            abs(nz)\n            /(\n                max(max(bL,dL),max(eL,max(fL,hL)))\n                -min(min(bL,dL),min(eL,min(fL,hL)))\n            ),\n            0., 1.\n        );\n        nz=1.-.5*nz;\n    #endif\n\n    // Min and max of ring.\n    vec3 mn4 = min(b, min(f, h));\n    vec3 mx4 = max(b, max(f, h));\n\n    // Immediate constants for peak range.\n    vec2 peakC = vec2(1., -4.);\n\n    // Limiters, these need to be high precision RCPs.\n    vec3 hitMin = mn4 / (4. * mx4);\n    vec3 hitMax = (peakC.x - mx4) / (4.* mn4 + peakC.y);\n    vec3 lobeRGB = max(-hitMin, hitMax);\n    float lobe = max(\n        -FSR_RCAS_LIMIT,\n        min(max(lobeRGB.r, max(lobeRGB.g, lobeRGB.b)), 0.)\n    )*con;\n\n    // Apply noise removal.\n    #ifdef dDenoise\n        lobe *= nz;\n    #endif\n\n    // Resolve, which needs the medium precision rcp approximation to avoid visible tonality changes.\n    return (lobe * (b + d + h + f) + e) / (4. * lobe + 1.);\n}\n\n\nvec4 FsrRcasLoadF(vec2 p) {\n    return texture2D(tColor, p * uTexSizeInv);\n}\n\nvoid main() {\n    // Set up constants\n    float con;\n    FsrRcasCon(con, uSharpness);\n\n    // Perform RCAS pass\n    vec3 col = FsrRcasF(gl_FragCoord.xy, con);\n\n    gl_FragColor = vec4(col, FsrRcasLoadF(gl_FragCoord.xy).a);\n}\n");const use={blurSize:U_.Numeric(9,{min:1,max:32,step:1}),blurSpread:U_.Numeric(1,{min:0,max:10,step:.1}),inFocus:U_.Numeric(0,{min:-5e3,max:5e3,step:1},{description:"Distance from the scene center that will be in focus"}),PPM:U_.Numeric(20,{min:0,max:5e3,step:.1},{description:"Size of the area that will be in focus"}),center:U_.Select("camera-target",U_.arrayToOptions(["scene-center","camera-target"])),mode:U_.Select("plane",U_.arrayToOptions(["plane","sphere"]))};class dse{static isEnabled(e){return"off"!==e.dof.name}constructor(e,t,n){this.webgl=e,this.target=e.createRenderTarget(t,n,!1);const r=uY();this.renderable=function(e,t,n,r){const o=t.getWidth(),i=t.getHeight(),a={...RK,tDepthOpaque:Sp.create(n),tDepthTransparent:Sp.create(r),tColor:Sp.create(t),uTexSize:Sp.create(Wh.create(o,i)),uProjection:Sp.create(Yh.identity()),uInvProjection:Sp.create(Yh.identity()),uBounds:Sp.create(Kh()),uCenter:Sp.create(qh()),uMode:Sp.create(0),dOrthographic:Sp.create(0),uNear:Sp.create(1),uFar:Sp.create(1e4),dBlurSize:Sp.create(5),uBlurSpread:Sp.create(300),uInFocus:Sp.create(20),uPPM:Sp.create(20)},s={...Ase},l=CK(e,"triangles",fse,s,a);return kK(l,a)}(e,r,r,r)}updateState(e){const{gl:t,state:n}=this.webgl;n.enable(t.SCISSOR_TEST),n.disable(t.BLEND),n.disable(t.DEPTH_TEST),n.depthMask(!1);const{x:r,y:o,width:i,height:a}=e;n.viewport(r,o,i,a),n.scissor(r,o,i,a),n.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)}setSize(e,t){const n=this.target.texture.getWidth(),r=this.target.texture.getHeight();e===n&&t===r||(this.target.setSize(e,t),Sp.update(this.renderable.values.uTexSize,Wh.set(this.renderable.values.uTexSize.ref.value,e,t)))}update(e,t,n,r,o,i){let a=!1;this.renderable.values.tColor.ref.value!==t&&(Sp.update(this.renderable.values.tColor,t),a=!0),this.renderable.values.tDepthOpaque.ref.value!==n&&(Sp.update(this.renderable.values.tDepthOpaque,n),a=!0),this.renderable.values.tDepthTransparent.ref.value!==r&&(Sp.update(this.renderable.values.tDepthTransparent,r),a=!0);const s="orthographic"===e.state.mode?1:0,l=this.renderable.values.uInvProjection.ref.value;Yh.invert(l,e.projection);const[c,u]=this.renderable.values.uTexSize.ref.value,d=e.viewport;Sp.update(this.renderable.values.uProjection,e.projection),Sp.update(this.renderable.values.uInvProjection,l),Sp.update(this.renderable.values.uMode,"sphere"===o.mode?1:0),Kh.set(this.renderable.values.uBounds.ref.value,d.x/c,d.y/u,(d.x+d.width)/c,(d.y+d.height)/u),Sp.update(this.renderable.values.uBounds,this.renderable.values.uBounds.ref.value),Sp.updateIfChanged(this.renderable.values.uNear,e.near),Sp.updateIfChanged(this.renderable.values.uFar,e.far),Sp.updateIfChanged(this.renderable.values.dOrthographic,s);const A=Math.round(o.blurSize*this.webgl.pixelRatio);this.renderable.values.dBlurSize.ref.value!==A&&(Sp.update(this.renderable.values.dBlurSize,A),a=!0);const f="scene-center"===o.center?i.center:e.state.target,p=qh.distance(e.state.position,f)+o.inFocus;Sp.updateIfChanged(this.renderable.values.uInFocus,p);const h=this.renderable.values.uCenter.ref.value;qh.transformMat4(h,f,e.view),Sp.update(this.renderable.values.uCenter,h),Sp.updateIfChanged(this.renderable.values.uBlurSpread,o.blurSpread),Sp.updateIfChanged(this.renderable.values.uPPM,o.PPM),a&&this.renderable.update()}render(e,t){fw&&this.webgl.timer.mark("DofPass.render"),t?t.bind():this.webgl.unbindFramebuffer(),this.updateState(e),this.renderable.render(),fw&&this.webgl.timer.markEnd("DofPass.render")}}const Ase={...MK,tDepthOpaque:ZW("texture","rgba","ubyte","nearest"),tDepthTransparent:ZW("texture","rgba","ubyte","nearest"),tColor:ZW("texture","rgba","ubyte","nearest"),uTexSize:JW("v2"),uProjection:JW("m4"),uInvProjection:JW("m4"),uBounds:JW("v4"),uCenter:JW("v3"),uMode:JW("i"),dOrthographic:eK("number"),uNear:JW("f"),uFar:JW("f"),dBlurSize:eK("number"),uBlurSpread:JW("f"),uInFocus:JW("f"),uPPM:JW("f")},fse=jV("dof",pK,"\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\n#include common\n\nuniform sampler2D tColor;\nuniform sampler2D tDepthOpaque;\nuniform sampler2D tDepthTransparent;\n\nuniform vec2 uTexSize;\nuniform vec4 uBounds;\n\nuniform float uBlurSpread;\nuniform float uInFocus;\nuniform float uPPM;\n\nuniform float uNear; // Near plane\nuniform float uFar;  // Far plane\n\nuniform mat4 uInvProjection; // Inverse projection\nuniform mat4 uProjection; // projection\n\nuniform int uMode; // 0-planar, 1-spherical\nuniform vec3 uCenter; // Center of focus sphere in view space\n\n// Function to convert depth value from depth buffer to view space Z\nfloat getViewZ(const in float depth) {\n    #if dOrthographic == 1\n        return orthographicDepthToViewZ(depth, uNear, uFar);\n    #else\n        return perspectiveDepthToViewZ(depth, uNear, uFar);\n    #endif\n}\n\n// Retrieve depth from opaque depth texture\nfloat getDepthOpaque(const in vec2 coords) {\n    #ifdef depthTextureSupport\n        return texture2D(tDepthOpaque, coords).r;\n    #else\n        return unpackRGBAToDepth(texture2D(tDepthOpaque, coords));\n    #endif\n}\n\n// Retrieve depth from transparent depth texture\nfloat getDepthTransparent(const in vec2 coords) {\n    return unpackRGBAToDepth(texture2D(tDepthTransparent, coords));\n}\n\nbool isBackground(const in float depth) {\n    return depth == 1.0;\n}\n\nfloat getDepth(const in vec2 coords) {\n    return min(getDepthOpaque(coords), getDepthTransparent(coords));\n}\n\nfloat getCOC(vec2 uv) {\n    float depth = getDepth(uv);\n    float viewDist = getViewZ(depth);\n    vec3 aposition = screenSpaceToViewSpace(vec3(uv.xy, depth), uInvProjection);\n    float focusDist = length(aposition - uCenter);\n    float coc = 0.0;  // Circle of Confusion\n    if (uMode == 0) { // planar Depth of field\n        coc = (abs(viewDist) - uInFocus) / uPPM;  //focus distance, focus range\n    } else if(uMode == 1) { // spherical Depth of field\n        coc = focusDist / uPPM ;\n    }\n    coc = clamp(coc, -1.0, 1.0);\n    return coc;\n}\n\n// Simple box blur for blurring the image\nvec3 getBlurredImage(vec2 coords) {\n    vec4 blurColor = vec4(0);\n    vec2 texelSize = vec2(1.0 / uTexSize.x, 1.0 / uTexSize.y);\n    float count = 0.0;\n    for (int x = 0; x < int(dBlurSize); x++) {\n        for (int y = 0; y < int(dBlurSize); y++) {\n            vec2 offset = vec2(float(x) - float(dBlurSize) / 2.0, float(y) - float(dBlurSize) / 2.0);\n            vec2 uvPixel = coords.xy + offset * texelSize * uBlurSpread;\n            float coc = getCOC(uvPixel);\n            coc = smoothstep(0.0, 1.0, abs(coc));\n            // mix blurColor with new color with weight coc\n            blurColor.rgb = blurColor.rgb + texture2D(tColor, uvPixel).xyz * coc;\n            count+=coc;\n        }\n    }\n    blurColor = blurColor / count;\n    return blurColor.rgb;\n}\n\n// simplification from https://catlikecoding.com/unity/tutorials/advanced-rendering/depth-of-field/\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / uTexSize;\n    vec4 color = texture2D(tColor, uv);\n    float depth = getDepth(uv);\n\n    float viewDist = getViewZ(depth);\n\n    vec3 aposition = screenSpaceToViewSpace(vec3(uv.xy, depth), uInvProjection);\n    float focusDist = length(aposition - uCenter);\n    vec3 blurColor = getBlurredImage(uv);\n\n    float coc = getCOC(uv); // Circle of Confusion\n\n    // for debugging the coc\n    // color.rgb = (coc < 0.0) ? (1.0 - abs(coc)) * vec3(1.0,0.0,0.0) : vec3(0.0, 1.0 - coc, 0.0) ;//mix(color.rgb, blurColor.rgb, abs(coc));\n    color.rgb = mix(color.rgb, blurColor, smoothstep(0.0, 1.0, abs(coc))); // Smooth blending based on CoC\n    gl_FragColor = color;\n}\n");const pse={strength:U_.Numeric(1,{min:0,max:3,step:.1}),radius:U_.Numeric(0,{min:0,max:1,step:.01}),threshold:U_.Numeric(0,{min:0,max:1,step:.01},{description:"Luminosity threshold",hideIf:e=>"emissive"===e.mode}),mode:U_.Select("emissive",[["luminosity","Luminosity"],["emissive","Emissive"]])};class hse{static isEnabled(e){return"on"===e.bloom.name}constructor(e,t,n){this.webgl=e,this.horizontalBlurTargets=[],this.verticalBlurTargets=[],this.emissiveTarget=e.createRenderTarget(t,n,!0,"uint8","linear","rgba"),this.luminosityTarget=e.createRenderTarget(t,n,!1,"uint8","linear"),this.compositeTarget=e.createRenderTarget(t,n,!1,"uint8","linear");let r=Math.round(t/2),o=Math.round(n/2);for(let a=0;a<5;++a)this.horizontalBlurTargets[a]=e.createRenderTarget(r,o,!1,"uint8","linear"),this.verticalBlurTargets[a]=e.createRenderTarget(r,o,!1,"uint8","linear"),r=Math.round(r/2),o=Math.round(o/2);const i=uY();this.luminosityRenderable=function(e,t,n,r){const o=t.getWidth(),i=t.getHeight(),a={...RK,tColor:Sp.create(t),tEmissive:Sp.create(n),tDepth:Sp.create(r),uTexSizeInv:Sp.create(Wh.create(1/o,1/i)),uDefaultColor:Sp.create(qh()),uDefaultOpacity:Sp.create(0),uLuminosityThreshold:Sp.create(0),uSmoothWidth:Sp.create(1),dMode:Sp.create("emissive")},s={...gse},l=CK(e,"triangles",mse,s,a);return kK(l,a)}(e,i,i,i),this.blurRenderable=function(e,t){const n=t.getWidth(),r=t.getHeight(),o={...RK,tInput:Sp.create(t),uTexSizeInv:Sp.create(Wh.create(1/n,1/r)),uDirection:Sp.create(Wh()),uGaussianCoefficients:Sp.create([]),dKernelRadius:Sp.create(vse[0])},i={...Ise},a=CK(e,"triangles",Ese,i,o);return kK(a,o)}(e,i),this.compositeRenderable=function(e,t,n,r,o,i,a,s){const l={...RK,uTexSizeInv:Sp.create(Wh.create(t,n)),tBlur1:Sp.create(r),tBlur2:Sp.create(o),tBlur3:Sp.create(i),tBlur4:Sp.create(a),tBlur5:Sp.create(s),uBloomStrength:Sp.create(1),uBloomRadius:Sp.create(0),uBloomFactors:Sp.create([1,.8,.6,.4,.2]),uBloomTints:Sp.create(new Array(15).fill(1))},c={...xse},u=CK(e,"triangles",Bse,c,l);return kK(u,l)}(e,t,n,this.verticalBlurTargets[0].texture,this.verticalBlurTargets[1].texture,this.verticalBlurTargets[2].texture,this.verticalBlurTargets[3].texture,this.verticalBlurTargets[4].texture),this.copyRenderable=FK(e,this.compositeTarget.texture)}setSize(e,t){const n=this.luminosityTarget.getWidth(),r=this.luminosityTarget.getHeight();if(e!==n||t!==r){this.emissiveTarget.setSize(e,t),this.luminosityTarget.setSize(e,t),this.compositeTarget.setSize(e,t);let n=Math.round(e/2),r=Math.round(t/2);for(let e=0;e<5;++e)this.horizontalBlurTargets[e].setSize(n,r),this.verticalBlurTargets[e].setSize(n,r),n=Math.round(n/2),r=Math.round(r/2);Sp.update(this.luminosityRenderable.values.uTexSizeInv,Wh.set(this.compositeRenderable.values.uTexSizeInv.ref.value,1/e,1/t)),Sp.update(this.compositeRenderable.values.uTexSizeInv,Wh.set(this.compositeRenderable.values.uTexSizeInv.ref.value,1/e,1/t)),Sp.update(this.copyRenderable.values.uTexSize,Wh.set(this.copyRenderable.values.uTexSize.ref.value,e,t))}}update(e,t,n,r){let o=!1;this.luminosityRenderable.values.tColor.ref.value!==e&&(Sp.update(this.luminosityRenderable.values.tColor,e),o=!0),this.luminosityRenderable.values.tEmissive.ref.value!==t&&(Sp.update(this.luminosityRenderable.values.tEmissive,t),o=!0),this.luminosityRenderable.values.tDepth.ref.value!==n&&(Sp.update(this.luminosityRenderable.values.tDepth,n),o=!0),this.luminosityRenderable.values.dMode.ref.value!==r.mode&&(Sp.update(this.luminosityRenderable.values.dMode,r.mode),o=!0),Sp.updateIfChanged(this.luminosityRenderable.values.uLuminosityThreshold,r.threshold),o&&this.luminosityRenderable.update();let i=!1;this.blurRenderable.values.tInput.ref.value!==e&&(Sp.update(this.blurRenderable.values.tInput,e),i=!0),i&&this.blurRenderable.update(),Sp.update(this.compositeRenderable.values.uBloomRadius,r.radius),Sp.update(this.compositeRenderable.values.uBloomStrength,r.strength)}render(e,t){fw&&this.webgl.timer.mark("BloomPass.render");const{gl:n,state:r}=this.webgl,{x:o,y:i,width:a,height:s}=e;r.viewport(o,i,a,s),r.scissor(o,i,a,s),r.enable(n.SCISSOR_TEST),r.disable(n.BLEND),r.disable(n.DEPTH_TEST),r.depthMask(!1),this.luminosityTarget.bind(),this.luminosityRenderable.render();for(let l=0;l<5;++l){const e=this.horizontalBlurTargets[l].getWidth(),t=this.horizontalBlurTargets[l].getHeight();r.viewport(0,0,e,t),r.scissor(0,0,e,t),Sp.update(this.blurRenderable.values.dKernelRadius,vse[l]),Sp.update(this.blurRenderable.values.uGaussianCoefficients,yse(vse[l])),Sp.update(this.blurRenderable.values.uTexSizeInv,Wh.set(this.blurRenderable.values.uTexSizeInv.ref.value,1/e,1/t)),this.horizontalBlurTargets[l].bind(),Sp.update(this.blurRenderable.values.tInput,0===l?this.luminosityTarget.texture:this.verticalBlurTargets[l-1].texture),Sp.update(this.blurRenderable.values.uDirection,bse),this.blurRenderable.update(),this.blurRenderable.render(),this.verticalBlurTargets[l].bind(),Sp.update(this.blurRenderable.values.tInput,this.horizontalBlurTargets[l].texture),Sp.update(this.blurRenderable.values.uDirection,Cse),this.blurRenderable.update(),this.blurRenderable.render()}r.viewport(o,i,a,s),r.scissor(o,i,a,s),this.compositeTarget.bind(),this.compositeRenderable.update(),this.compositeRenderable.render(),t?t.bind():this.webgl.unbindFramebuffer(),r.enable(n.BLEND),r.blendFunc(n.ONE,n.ONE),this.copyRenderable.render(),fw&&this.webgl.timer.markEnd("BloomPass.render")}}const gse={...MK,tColor:ZW("texture","rgba","ubyte","linear"),tEmissive:ZW("texture","rgba","ubyte","linear"),tDepth:ZW("texture","rgba","ubyte","nearest"),uTexSizeInv:JW("v2"),uDefaultColor:JW("v3"),uDefaultOpacity:JW("f"),uLuminosityThreshold:JW("f"),uSmoothWidth:JW("f"),dMode:eK("string",["luminosity","emissive"])},mse=jV("Bloom Luminosity",pK,"\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nuniform sampler2D tColor;\nuniform sampler2D tEmissive;\nuniform sampler2D tDepth;\nuniform vec2 uTexSizeInv;\n\nuniform vec3 uDefaultColor;\nuniform float uDefaultOpacity;\nuniform float uLuminosityThreshold;\nuniform float uSmoothWidth;\n\n#include common\n\nfloat getDepth(const in vec2 coords) {\n    #ifdef depthTextureSupport\n        return texture2D(tDepth, coords).r;\n    #else\n        return unpackRGBAToDepth(texture2D(tDepth, coords));\n    #endif\n}\n\nbool isBackground(const in float depth) {\n    return depth == 1.0;\n}\n\nvoid main(void) {\n    vec2 coords = gl_FragCoord.xy * uTexSizeInv;\n    vec4 texel = texture2D(tColor, coords);\n    float emissive = texture2D(tEmissive, coords).a;\n    float depth = getDepth(coords);\n\n    if (isBackground(depth)) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        return;\n    }\n\n    vec4 outputColor = vec4(uDefaultColor.rgb, uDefaultOpacity);\n\n    #if defined(dMode_luminosity)\n        vec3 luma = vec3(0.299, 0.587, 0.114);\n        float v = dot(texel.xyz, luma);\n        float alpha = smoothstep(uLuminosityThreshold, uLuminosityThreshold + uSmoothWidth, v);\n\n        gl_FragColor = mix(outputColor, texel, alpha);\n    #elif defined(dMode_emissive)\n        gl_FragColor = mix(outputColor, texel, emissive);\n    #endif\n}\n");const yse=Rj((function(e){const t=[];for(let n=0;n<e;++n)t.push(.39894*Math.exp(-.5*n*n/(e*e))/e);return t})),vse=[3,5,7,9,11],bse=Wh.create(1,0),Cse=Wh.create(0,1),Ise={...MK,tInput:ZW("texture","rgba","ubyte","linear"),uTexSizeInv:JW("v2"),uDirection:JW("v2"),uGaussianCoefficients:JW("f[]"),dKernelRadius:eK("number")},Ese=jV("Bloom Blur",pK,"\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nuniform sampler2D tInput;\nuniform vec2 uTexSizeInv;\n\nuniform vec2 uDirection;\nuniform float uGaussianCoefficients[dKernelRadius];\n\nvoid main(void) {\n    vec2 coords = gl_FragCoord.xy * uTexSizeInv;\n    float weightSum = uGaussianCoefficients[0];\n    vec4 diffuseSum = texture2D(tInput, coords) * weightSum;\n\n    for(int i = 1; i < dKernelRadius; ++i) {\n        float x = float(i);\n        float w = uGaussianCoefficients[i];\n        vec2 offset = uDirection * uTexSizeInv * x;\n        vec4 sample1 = texture2D(tInput, coords + offset);\n        vec4 sample2 = texture2D(tInput, coords - offset);\n        diffuseSum += (sample1 + sample2) * w;\n        weightSum += 2.0 * w;\n    }\n\n    gl_FragColor = diffuseSum / weightSum;\n}\n");const xse={...MK,tBlur1:ZW("texture","rgba","ubyte","linear"),tBlur2:ZW("texture","rgba","ubyte","linear"),tBlur3:ZW("texture","rgba","ubyte","linear"),tBlur4:ZW("texture","rgba","ubyte","linear"),tBlur5:ZW("texture","rgba","ubyte","linear"),uTexSizeInv:JW("v2"),uBloomStrength:JW("f"),uBloomRadius:JW("f"),uBloomFactors:JW("f[]"),uBloomTints:JW("v3[]")},Bse=jV("Bloom Composite",pK,"\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nuniform vec2 uTexSizeInv;\n\nuniform sampler2D tBlur1;\nuniform sampler2D tBlur2;\nuniform sampler2D tBlur3;\nuniform sampler2D tBlur4;\nuniform sampler2D tBlur5;\nuniform float uBloomStrength;\nuniform float uBloomRadius;\nuniform float uBloomFactors[5];\nuniform vec3 uBloomTints[5];\n\nfloat lerpBloomFactor(const in float factor) {\n    float mirrorFactor = 1.2 - factor;\n    return mix(factor, mirrorFactor, uBloomRadius);\n}\n\nvoid main(void) {\n    vec2 coords = gl_FragCoord.xy * uTexSizeInv;\n\n    gl_FragColor = uBloomStrength * (\n        lerpBloomFactor(uBloomFactors[0]) * vec4(uBloomTints[0], 1.0) * texture2D(tBlur1, coords) +\n        lerpBloomFactor(uBloomFactors[1]) * vec4(uBloomTints[1], 1.0) * texture2D(tBlur2, coords) +\n        lerpBloomFactor(uBloomFactors[2]) * vec4(uBloomTints[2], 1.0) * texture2D(tBlur3, coords) +\n        lerpBloomFactor(uBloomFactors[3]) * vec4(uBloomTints[3], 1.0) * texture2D(tBlur4, coords) +\n        lerpBloomFactor(uBloomFactors[4]) * vec4(uBloomTints[4], 1.0) * texture2D(tBlur5, coords)\n    );\n}\n");const wse="\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nuniform sampler2D tDepthOpaque;\nuniform sampler2D tDepthTransparent;\nuniform vec2 uTexSize;\n\nuniform float uNear;\nuniform float uFar;\nuniform mat4 uInvProjection;\n\nuniform float uOutlineThreshold;\n\n#include common\n\nfloat getViewZ(const in float depth) {\n    #if dOrthographic == 1\n        return orthographicDepthToViewZ(depth, uNear, uFar);\n    #else\n        return perspectiveDepthToViewZ(depth, uNear, uFar);\n    #endif\n}\n\nfloat getDepthOpaque(const in vec2 coords) {\n    #ifdef depthTextureSupport\n        return texture2D(tDepthOpaque, coords).r;\n    #else\n        return unpackRGBAToDepth(texture2D(tDepthOpaque, coords));\n    #endif\n}\n\nfloat getDepthTransparent(const in vec2 coords) {\n    #ifdef dTransparentOutline\n        return unpackRGBAToDepth(texture2D(tDepthTransparent, coords));\n    #else\n        return 1.0;\n    #endif\n}\n\nbool isBackground(const in float depth) {\n    return depth == 1.0;\n}\n\nfloat getPixelSize(const in vec2 coords, const in float depth) {\n    vec3 viewPos0 = screenSpaceToViewSpace(vec3(coords, depth), uInvProjection);\n    vec3 viewPos1 = screenSpaceToViewSpace(vec3(coords + vec2(1.0, 0.0) / uTexSize, depth), uInvProjection);\n    return distance(viewPos0, viewPos1);\n}\n\nvoid main(void) {\n    float backgroundViewZ = 2.0 * uFar;\n\n    vec2 coords = gl_FragCoord.xy / uTexSize;\n    vec2 invTexSize = 1.0 / uTexSize;\n\n    float selfDepthOpaque = getDepthOpaque(coords);\n    float selfViewZOpaque = isBackground(selfDepthOpaque) ? backgroundViewZ : getViewZ(selfDepthOpaque);\n    float pixelSizeOpaque = getPixelSize(coords, selfDepthOpaque) * uOutlineThreshold;\n\n    float selfDepthTransparent = getDepthTransparent(coords);\n    float selfViewZTransparent = isBackground(selfDepthTransparent) ? backgroundViewZ : getViewZ(selfDepthTransparent);\n    float pixelSizeTransparent = getPixelSize(coords, selfDepthTransparent) * uOutlineThreshold;\n\n    float outline = 1.0;\n    float bestDepth = 1.0;\n    float transparentFlag = 0.0;\n\n    for (int y = -1; y <= 1; y++) {\n        for (int x = -1; x <= 1; x++) {\n            vec2 sampleCoords = coords + vec2(float(x), float(y)) * invTexSize;\n\n            float sampleDepthOpaque = getDepthOpaque(sampleCoords);\n            float sampleDepthTransparent = getDepthTransparent(sampleCoords);\n\n            float sampleViewZOpaque = isBackground(sampleDepthOpaque) ? backgroundViewZ : getViewZ(sampleDepthOpaque);\n            if (abs(selfViewZOpaque - sampleViewZOpaque) > pixelSizeOpaque && selfDepthOpaque > sampleDepthOpaque && sampleDepthOpaque <= bestDepth) {\n                outline = 0.0;\n                bestDepth = sampleDepthOpaque;\n            }\n\n            if (sampleDepthTransparent < sampleDepthOpaque) {\n                float sampleViewZTransparent = isBackground(sampleDepthTransparent) ? backgroundViewZ : getViewZ(sampleDepthTransparent);\n                if (abs(selfViewZTransparent - sampleViewZTransparent) > pixelSizeTransparent && selfDepthTransparent > sampleDepthTransparent && sampleDepthTransparent <= bestDepth) {\n                    outline = 0.0;\n                    bestDepth = sampleDepthTransparent;\n                    transparentFlag = 1.0;\n                }\n            }\n        }\n    }\n\n    gl_FragColor = vec4(outline, packUnitIntervalToRG(bestDepth), transparentFlag);\n}\n",_se={scale:U_.Numeric(1,{min:1,max:5,step:1}),threshold:U_.Numeric(.33,{min:.01,max:1,step:.01}),color:U_.Color(Jp(0)),includeTransparent:U_.Boolean(!0,{description:"Whether to show outline for transparent objects"})};class Sse{static isEnabled(e){return"off"!==e.outline.name}constructor(e,t,n,r){this.webgl=e,this.drawPass=t;const{depthTextureTransparent:o,depthTextureOpaque:i}=t;this.outlinesTarget=e.createRenderTarget(n,r,!1),this.outlinesRenderable=function(e,t,n,r){const o=t.getWidth(),i=t.getHeight(),a={...RK,tDepthOpaque:Sp.create(t),tDepthTransparent:Sp.create(n),uTexSize:Sp.create(Wh.create(o,i)),dOrthographic:Sp.create(0),uNear:Sp.create(1),uFar:Sp.create(1e4),uInvProjection:Sp.create(Yh.identity()),uOutlineThreshold:Sp.create(.33),dTransparentOutline:Sp.create(r)},s={...Dse},l=jV("outlines",pK,wse),c=CK(e,"triangles",l,s,a);return kK(c,a)}(e,i,o,!0)}setSize(e,t){const[n,r]=this.outlinesRenderable.values.uTexSize.ref.value;e===n&&t===r||(this.outlinesTarget.setSize(e,t),Sp.update(this.outlinesRenderable.values.uTexSize,Wh.set(this.outlinesRenderable.values.uTexSize.ref.value,e,t)))}update(e,t){var n;let r=!1;const o="orthographic"===e.state.mode?1:0,i=Yh.identity();Yh.invert(i,e.projection);const a=null===(n=t.includeTransparent)||void 0===n||n,s=50*t.threshold*this.webgl.pixelRatio;Sp.updateIfChanged(this.outlinesRenderable.values.uNear,e.near),Sp.updateIfChanged(this.outlinesRenderable.values.uFar,e.far),Sp.update(this.outlinesRenderable.values.uInvProjection,i),this.outlinesRenderable.values.dTransparentOutline.ref.value!==a&&(r=!0,Sp.update(this.outlinesRenderable.values.dTransparentOutline,a)),this.outlinesRenderable.values.dOrthographic.ref.value!==o&&(r=!0,Sp.update(this.outlinesRenderable.values.dOrthographic,o)),Sp.updateIfChanged(this.outlinesRenderable.values.uOutlineThreshold,s),r&&this.outlinesRenderable.update()}render(){fw&&this.webgl.timer.mark("OUTLINE.render"),this.outlinesTarget.bind(),this.outlinesRenderable.render(),fw&&this.webgl.timer.markEnd("OUTLINE.render")}}const Dse={...MK,tDepthOpaque:ZW("texture","rgba","ubyte","nearest"),tDepthTransparent:ZW("texture","rgba","ubyte","nearest"),uTexSize:JW("v2"),dOrthographic:eK("number"),uNear:JW("f"),uFar:JW("f"),uInvProjection:JW("m4"),uOutlineThreshold:JW("f"),dTransparentOutline:eK("boolean")};const Tse="\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\n#include common\n\nuniform sampler2D tDepth;\nuniform vec2 uTexSize;\nuniform vec4 uBounds;\n\nuniform float uNear;\nuniform float uFar;\n\n#if dLightCount != 0\n    uniform vec3 uLightDirection[dLightCount];\n    uniform vec3 uLightColor[dLightCount];\n#endif\n\nuniform mat4 uProjection;\nuniform mat4 uInvProjection;\n\nuniform float uMaxDistance;\nuniform float uTolerance;\nuniform float uBias;\n\nbool isBackground(const in float depth) {\n    return depth == 1.0;\n}\n\nbool outsideBounds(const in vec2 p) {\n    return p.x < uBounds.x || p.y < uBounds.y || p.x > uBounds.z || p.y > uBounds.w;\n}\n\nfloat getViewZ(const in float depth) {\n    #if dOrthographic == 1\n        return orthographicDepthToViewZ(depth, uNear, uFar);\n    #else\n        return perspectiveDepthToViewZ(depth, uNear, uFar);\n    #endif\n}\n\nfloat getDepth(const in vec2 coords) {\n    #ifdef depthTextureSupport\n        return texture2D(tDepth, coords).r;\n    #else\n        return unpackRGBAToDepth(texture2D(tDepth, coords));\n    #endif\n}\n\nfloat screenFade(const in vec2 coords) {\n    vec2 c = (coords - uBounds.xy) / (uBounds.zw - uBounds.xy);\n    vec2 fade = max(12.0 * abs(c - 0.5) - 5.0, vec2(0.0));\n    return saturate(1.0 - dot(fade, fade));\n}\n\n// based on https://panoskarabelas.com/posts/screen_space_shadows/\nfloat screenSpaceShadow(const in vec3 position, const in vec3 lightDirection, const in float stepLength) {\n    // Ray position and direction (in view-space)\n    vec3 rayPos = position;\n    vec3 rayDir = -lightDirection;\n\n    // Compute ray step\n    vec3 rayStep = rayDir * stepLength;\n\n    // Ray march towards the light\n    float occlusion = 0.0;\n    vec4 rayCoords = vec4(0.0);\n    for (int i = 0; i < dSteps; ++i) {\n        // Step the ray\n        rayPos += rayStep;\n\n        rayCoords = uProjection * vec4(rayPos, 1.0);\n        rayCoords.xyz = (rayCoords.xyz / rayCoords.w) * 0.5 + 0.5;\n\n        if (outsideBounds(rayCoords.xy))\n            return 1.0;\n\n        // Compute the difference between the ray's and the camera's depth\n        float depth = getDepth(rayCoords.xy);\n        float viewZ = getViewZ(depth);\n        float zDelta = rayPos.z - viewZ;\n\n        if (zDelta < uTolerance) {\n            occlusion = 1.0;\n\n            // Fade out as we approach the edges of the screen\n            occlusion *= screenFade(rayCoords.xy);\n\n            break;\n        }\n    }\n\n    return 1.0 - (uBias * occlusion);\n}\n\nvoid main(void) {\n    vec2 invTexSize = 1.0 / uTexSize;\n    vec2 selfCoords = gl_FragCoord.xy * invTexSize;\n\n    float selfDepth = getDepth(selfCoords);\n\n    if (isBackground(selfDepth)) {\n        gl_FragColor = vec4(0.0);\n        return;\n    }\n\n    vec3 selfViewPos = screenSpaceToViewSpace(vec3(selfCoords, selfDepth), uInvProjection);\n    float stepLength = uMaxDistance / float(dSteps);\n\n    float o = 1.0;\n    #if dLightCount != 0\n        float sh[dLightCount];\n        #pragma unroll_loop_start\n        for (int i = 0; i < dLightCount; ++i) {\n            sh[i] = screenSpaceShadow(selfViewPos, uLightDirection[i], stepLength);\n            o = min(o, sh[i]);\n        }\n        #pragma unroll_loop_end\n    #endif\n\n    gl_FragColor = vec4(o);\n}\n",kse={steps:U_.Numeric(1,{min:1,max:64,step:1}),bias:U_.Numeric(.6,{min:0,max:1,step:.01}),maxDistance:U_.Numeric(3,{min:0,max:256,step:1}),tolerance:U_.Numeric(1,{min:0,max:10,step:.1})};class Qse{static isEnabled(e){return"off"!==e.shadow.name}constructor(e,t,n,r){this.webgl=e,this.drawPass=t;const{depthTextureOpaque:o}=t;this.shadowsTarget=e.createRenderTarget(n,r,!1),this.shadowsRenderable=function(e,t){const n=t.getWidth(),r=t.getHeight(),o={...RK,tDepth:Sp.create(t),uTexSize:Sp.create(Wh.create(n,r)),uProjection:Sp.create(Yh.identity()),uInvProjection:Sp.create(Yh.identity()),uBounds:Sp.create(Kh()),dOrthographic:Sp.create(0),uNear:Sp.create(1),uFar:Sp.create(1e4),dSteps:Sp.create(1),uMaxDistance:Sp.create(3),uTolerance:Sp.create(1),uBias:Sp.create(.6),uLightDirection:Sp.create([]),uLightColor:Sp.create([]),dLightCount:Sp.create(0)},i={...Mse},a=jV("shadows",pK,Tse),s=CK(e,"triangles",a,i,o);return kK(s,o)}(e,o)}setSize(e,t){const[n,r]=this.shadowsRenderable.values.uTexSize.ref.value;e===n&&t===r||(this.shadowsTarget.setSize(e,t),Sp.update(this.shadowsRenderable.values.uTexSize,Wh.set(this.shadowsRenderable.values.uTexSize.ref.value,e,t)))}update(e,t,n){let r=!1;const o="orthographic"===e.state.mode?1:0,i=Yh.identity();Yh.invert(i,e.projection);const[a,s]=this.shadowsRenderable.values.uTexSize.ref.value,l=e.viewport;Sp.update(this.shadowsRenderable.values.uProjection,e.projection),Sp.update(this.shadowsRenderable.values.uInvProjection,i),Kh.set(this.shadowsRenderable.values.uBounds.ref.value,l.x/a,l.y/s,(l.x+l.width)/a,(l.y+l.height)/s),Sp.update(this.shadowsRenderable.values.uBounds,this.shadowsRenderable.values.uBounds.ref.value),Sp.updateIfChanged(this.shadowsRenderable.values.uNear,e.near),Sp.updateIfChanged(this.shadowsRenderable.values.uFar,e.far),this.shadowsRenderable.values.dOrthographic.ref.value!==o&&(Sp.update(this.shadowsRenderable.values.dOrthographic,o),r=!0),Sp.updateIfChanged(this.shadowsRenderable.values.uMaxDistance,n.maxDistance),Sp.updateIfChanged(this.shadowsRenderable.values.uTolerance,n.tolerance),Sp.updateIfChanged(this.shadowsRenderable.values.uBias,n.bias),this.shadowsRenderable.values.dSteps.ref.value!==n.steps&&(Sp.update(this.shadowsRenderable.values.dSteps,n.steps),r=!0),Sp.update(this.shadowsRenderable.values.uLightDirection,t.direction),Sp.update(this.shadowsRenderable.values.uLightColor,t.color),this.shadowsRenderable.values.dLightCount.ref.value!==t.count&&(Sp.update(this.shadowsRenderable.values.dLightCount,t.count),r=!0),r&&this.shadowsRenderable.update()}render(){fw&&this.webgl.timer.mark("SHADOW.render"),this.shadowsTarget.bind(),this.shadowsRenderable.render(),fw&&this.webgl.timer.markEnd("SHADOW.render")}}const Mse={...MK,tDepth:ZW("texture","rgba","ubyte","nearest"),uTexSize:JW("v2"),uProjection:JW("m4"),uInvProjection:JW("m4"),uBounds:JW("v4"),dOrthographic:eK("number"),uNear:JW("f"),uFar:JW("f"),dSteps:eK("number"),uMaxDistance:JW("f"),uTolerance:JW("f"),uBias:JW("f"),uLightDirection:JW("v3[]"),uLightColor:JW("v3[]"),dLightCount:eK("number")};const Rse="\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\n#include common\n\nuniform sampler2D tDepth;\nuniform sampler2D tDepthHalf;\nuniform sampler2D tDepthQuarter;\nuniform vec2 uTexSize;\nuniform vec4 uBounds;\n\nuniform vec3 uSamples[dNSamples];\n\nuniform mat4 uProjection;\nuniform mat4 uInvProjection;\n\n#ifdef dMultiScale\n    uniform float uLevelRadius[dLevels];\n    uniform float uLevelBias[dLevels];\n    uniform float uNearThreshold;\n    uniform float uFarThreshold;\n#else\n    uniform float uRadius;\n#endif\nuniform float uBias;\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nfloat noise(const in vec2 coords) {\n    float a = 12.9898;\n    float b = 78.233;\n    float c = 43758.5453;\n    float dt = dot(coords, vec2(a,b));\n    float sn = mod(dt, PI);\n    return abs(fract(sin(sn) * c)); // is abs necessary?\n}\n\nvec2 getNoiseVec2(const in vec2 coords) {\n    return vec2(noise(coords), noise(coords + vec2(PI, 2.71828)));\n}\n\nbool isBackground(const in float depth) {\n    return depth == 1.0;\n}\n\nfloat getDepth(const in vec2 coords) {\n    vec2 c = vec2(clamp(coords.x, uBounds.x, uBounds.z), clamp(coords.y, uBounds.y, uBounds.w));\n    #ifdef depthTextureSupport\n        return texture2D(tDepth, c).r;\n    #else\n        return unpackRGBAToDepth(texture2D(tDepth, c));\n    #endif\n}\n\n#define dQuarterThreshold 0.1\n#define dHalfThreshold 0.05\n\nfloat getMappedDepth(const in vec2 coords, const in vec2 selfCoords) {\n    vec2 c = vec2(clamp(coords.x, uBounds.x, uBounds.z), clamp(coords.y, uBounds.y, uBounds.w));\n    float d = distance(coords, selfCoords);\n    #ifdef depthTextureSupport\n        if (d > dQuarterThreshold) {\n            return texture2D(tDepthQuarter, c).r;\n        } else if (d > dHalfThreshold) {\n            return texture2D(tDepthHalf, c).r;\n        } else {\n            return texture2D(tDepth, c).r;\n        }\n    #else\n        if (d > dQuarterThreshold) {\n            return unpackRGBAToDepth(texture2D(tDepthQuarter, c));\n        } else if (d > dHalfThreshold) {\n            return unpackRGBAToDepth(texture2D(tDepthHalf, c));\n        } else {\n            return unpackRGBAToDepth(texture2D(tDepth, c));\n        }\n    #endif\n}\n\n// adapted from https://gist.github.com/bgolus/a07ed65602c009d5e2f753826e8078a0\nvec3 viewNormalAtPixelPositionAccurate(vec2 vpos) {\n    // current pixel's depth\n    float c = getDepth(vpos);\n\n    // get current pixel's view space position\n    vec3 viewSpacePos_c = screenSpaceToViewSpace(vec3(vpos, c), uInvProjection);\n\n    // get view space position at 1 pixel offsets in each major direction\n    vec3 viewSpacePos_l = screenSpaceToViewSpace(vec3(vpos + vec2(-1.0, 0.0) / uTexSize, getDepth(vpos + vec2(-1.0, 0.0) / uTexSize)), uInvProjection);\n    vec3 viewSpacePos_r = screenSpaceToViewSpace(vec3(vpos + vec2( 1.0, 0.0) / uTexSize, getDepth(vpos + vec2( 1.0, 0.0) / uTexSize)), uInvProjection);\n    vec3 viewSpacePos_d = screenSpaceToViewSpace(vec3(vpos + vec2( 0.0,-1.0) / uTexSize, getDepth(vpos + vec2( 0.0,-1.0) / uTexSize)), uInvProjection);\n    vec3 viewSpacePos_u = screenSpaceToViewSpace(vec3(vpos + vec2( 0.0, 1.0) / uTexSize, getDepth(vpos + vec2( 0.0, 1.0) / uTexSize)), uInvProjection);\n\n    // get the difference between the current and each offset position\n    vec3 l = viewSpacePos_c - viewSpacePos_l;\n    vec3 r = viewSpacePos_r - viewSpacePos_c;\n    vec3 d = viewSpacePos_c - viewSpacePos_d;\n    vec3 u = viewSpacePos_u - viewSpacePos_c;\n\n    // get depth values at 1 & 2 pixels offsets from current along the horizontal axis\n    vec4 H = vec4(\n        getDepth(vpos + vec2(-1.0, 0.0) / uTexSize),\n        getDepth(vpos + vec2( 1.0, 0.0) / uTexSize),\n        getDepth(vpos + vec2(-2.0, 0.0) / uTexSize),\n        getDepth(vpos + vec2( 2.0, 0.0) / uTexSize)\n    );\n\n    // get depth values at 1 & 2 pixels offsets from current along the vertical axis\n    vec4 V = vec4(\n        getDepth(vpos + vec2(0.0,-1.0) / uTexSize),\n        getDepth(vpos + vec2(0.0, 1.0) / uTexSize),\n        getDepth(vpos + vec2(0.0,-2.0) / uTexSize),\n        getDepth(vpos + vec2(0.0, 2.0) / uTexSize)\n    );\n\n    // current pixel's depth difference from slope of offset depth samples\n    // differs from original article because we're using non-linear depth values\n    // see article's comments\n    vec2 he = abs((2.0 * H.xy - H.zw) - c);\n    vec2 ve = abs((2.0 * V.xy - V.zw) - c);\n\n    // pick horizontal and vertical diff with the smallest depth difference from slopes\n    vec3 hDeriv = he.x < he.y ? l : r;\n    vec3 vDeriv = ve.x < ve.y ? d : u;\n\n    // get view space normal from the cross product of the best derivatives\n    vec3 viewNormal = normalize(cross(hDeriv, vDeriv));\n\n    return viewNormal;\n}\n\nfloat getPixelSize(const in vec2 coords, const in float depth) {\n    vec3 viewPos0 = screenSpaceToViewSpace(vec3(coords, depth), uInvProjection);\n    vec3 viewPos1 = screenSpaceToViewSpace(vec3(coords + vec2(1.0, 0.0) / uTexSize, depth), uInvProjection);\n    return distance(viewPos0, viewPos1);\n}\n\n// StarCraft II Ambient Occlusion by [Filion and McNaughton 2008]\nvoid main(void) {\n    vec2 invTexSize = 1.0 / uTexSize;\n    vec2 selfCoords = gl_FragCoord.xy * invTexSize;\n\n    float selfDepth = getDepth(selfCoords);\n    vec2 selfPackedDepth = packUnitIntervalToRG(selfDepth);\n\n    if (isBackground(selfDepth)) {\n        gl_FragColor = vec4(packUnitIntervalToRG(1.0), selfPackedDepth);\n        return;\n    }\n\n    vec3 selfViewNormal = viewNormalAtPixelPositionAccurate(selfCoords);\n    vec3 selfViewPos = screenSpaceToViewSpace(vec3(selfCoords, selfDepth), uInvProjection);\n\n    vec3 randomVec = normalize(vec3(getNoiseVec2(selfCoords) * 2.0 - 1.0, 0.0));\n    vec3 tangent = normalize(randomVec - selfViewNormal * dot(randomVec, selfViewNormal));\n    vec3 bitangent = cross(selfViewNormal, tangent);\n    mat3 TBN = mat3(tangent, bitangent, selfViewNormal);\n\n    float occlusion = 0.0;\n    #ifdef dMultiScale\n        float pixelSize = getPixelSize(selfCoords, selfDepth);\n\n        for(int l = 0; l < dLevels; l++) {\n            // TODO: smooth transition\n            if (pixelSize * uNearThreshold > uLevelRadius[l]) continue;\n            if (pixelSize * uFarThreshold < uLevelRadius[l]) continue;\n\n            float levelOcclusion = 0.0;\n            for(int i = 0; i < dNSamples; i++) {\n                // get sample position:\n                vec3 sampleViewPos = TBN * uSamples[i];\n                sampleViewPos = selfViewPos + sampleViewPos * uLevelRadius[l];\n\n                // project sample position:\n                vec4 offset = vec4(sampleViewPos, 1.0);\n                offset = uProjection * offset;\n                offset.xyz = (offset.xyz / offset.w) * 0.5 + 0.5;\n\n                // get sample depth:\n                float sampleDepth = getMappedDepth(offset.xy, selfCoords);\n                float sampleViewZ = screenSpaceToViewSpace(vec3(offset.xy, sampleDepth), uInvProjection).z;\n                levelOcclusion += step(sampleViewPos.z + 0.025, sampleViewZ) * smootherstep(0.0, 1.0, uLevelRadius[l] / abs(selfViewPos.z - sampleViewZ)) * uLevelBias[l];\n            }\n            occlusion = max(occlusion, levelOcclusion);\n        }\n    #else\n        for(int i = 0; i < dNSamples; i++) {\n            vec3 sampleViewPos = TBN * uSamples[i];\n            sampleViewPos = selfViewPos + sampleViewPos * uRadius;\n\n            vec4 offset = vec4(sampleViewPos, 1.0);\n            offset = uProjection * offset;\n            offset.xyz = (offset.xyz / offset.w) * 0.5 + 0.5;\n\n            float sampleDepth = getMappedDepth(offset.xy, selfCoords);\n            float sampleViewZ = screenSpaceToViewSpace(vec3(offset.xy, sampleDepth), uInvProjection).z;\n\n            occlusion += step(sampleViewPos.z + 0.025, sampleViewZ) * smootherstep(0.0, 1.0, uRadius / abs(selfViewPos.z - sampleViewZ));\n        }\n    #endif\n    occlusion = 1.0 - (uBias * occlusion / float(dNSamples));\n\n    vec2 packedOcclusion = packUnitIntervalToRG(clamp(occlusion, 0.01, 1.0));\n\n    gl_FragColor = vec4(packedOcclusion, selfPackedDepth);\n}\n",Pse={samples:U_.Numeric(32,{min:1,max:256,step:1}),multiScale:U_.MappedStatic("off",{on:U_.Group({levels:U_.ObjectList({radius:U_.Numeric(5,{min:0,max:20,step:.1},{description:"Final occlusion radius is 2^x"}),bias:U_.Numeric(1,{min:0,max:3,step:.1})},(e=>`${e.radius}, ${e.bias}`),{defaultValue:[{radius:2,bias:1},{radius:5,bias:1},{radius:8,bias:1},{radius:11,bias:1}]}),nearThreshold:U_.Numeric(10,{min:0,max:50,step:1}),farThreshold:U_.Numeric(1500,{min:0,max:1e4,step:100})}),off:U_.Group({})},{cycle:!0}),radius:U_.Numeric(5,{min:0,max:20,step:.1},{description:"Final occlusion radius is 2^x",hideIf:e=>"on"===(null===e||void 0===e?void 0:e.multiScale.name)}),bias:U_.Numeric(.8,{min:0,max:3,step:.1}),blurKernelSize:U_.Numeric(15,{min:1,max:25,step:2}),blurDepthBias:U_.Numeric(.5,{min:0,max:1,step:.01}),resolutionScale:U_.Numeric(1,{min:.1,max:1,step:.05},{description:"Adjust resolution of occlusion calculation"}),color:U_.Color(Jp(0))};class Ose{static isEnabled(e){return"off"!==e.occlusion.name}calcSsaoScale(e){return Math.min(1,1/this.webgl.pixelRatio)*e}constructor(e,t,n,r){this.webgl=e,this.drawPass=t;const{textureFloatLinear:o}=e.extensions,{depthTextureOpaque:i}=t;this.nSamples=1,this.blurKernelSize=1,this.ssaoScale=this.calcSsaoScale(1),this.texSize=[n,r],this.levels=[],this.ssaoFramebuffer=e.resources.framebuffer(),this.ssaoBlurFirstPassFramebuffer=e.resources.framebuffer(),this.ssaoBlurSecondPassFramebuffer=e.resources.framebuffer();const a=Math.floor(n*this.ssaoScale),s=Math.floor(r*this.ssaoScale),l=Math.max(1,Math.floor(.5*a)),c=Math.max(1,Math.floor(.5*s)),u=Math.max(1,Math.floor(.25*a)),d=Math.max(1,Math.floor(.25*s)),A=o?"linear":"nearest";this.downsampledDepthTarget=t.packedDepth?e.createRenderTarget(a,s,!1,"uint8",A,"rgba"):e.createRenderTarget(a,s,!1,"float32",A,e.isWebGL2?"alpha":"rgba"),this.downsampleDepthRenderable=FK(e,i);const f=1===this.ssaoScale?i:this.downsampledDepthTarget.texture;this.depthHalfTarget=t.packedDepth?e.createRenderTarget(l,c,!1,"uint8",A,"rgba"):e.createRenderTarget(l,c,!1,"float32",A,e.isWebGL2?"alpha":"rgba"),this.depthHalfRenderable=FK(e,f),this.depthQuarterTarget=t.packedDepth?e.createRenderTarget(u,d,!1,"uint8",A,"rgba"):e.createRenderTarget(u,d,!1,"float32",A,e.isWebGL2?"alpha":"rgba"),this.depthQuarterRenderable=FK(e,this.depthHalfTarget.texture),this.ssaoDepthTexture=e.resources.texture("image-uint8","rgba","ubyte",A),this.ssaoDepthTexture.define(a,s),this.ssaoDepthTexture.attachFramebuffer(this.ssaoFramebuffer,"color0"),this.ssaoDepthBlurProxyTexture=e.resources.texture("image-uint8","rgba","ubyte",A),this.ssaoDepthBlurProxyTexture.define(a,s),this.ssaoDepthBlurProxyTexture.attachFramebuffer(this.ssaoBlurFirstPassFramebuffer,"color0"),this.ssaoDepthTexture.attachFramebuffer(this.ssaoBlurSecondPassFramebuffer,"color0"),this.ssaoRenderable=function(e,t,n,r){const o={...RK,tDepth:Sp.create(t),tDepthHalf:Sp.create(n),tDepthQuarter:Sp.create(r),uSamples:Sp.create(jse(32)),dNSamples:Sp.create(32),uProjection:Sp.create(Yh.identity()),uInvProjection:Sp.create(Yh.identity()),uBounds:Sp.create(Kh()),uTexSize:Sp.create(Wh.create(e.gl.drawingBufferWidth,e.gl.drawingBufferHeight)),uRadius:Sp.create(Math.pow(2,5)),uBias:Sp.create(.8),dMultiScale:Sp.create(!1),dLevels:Sp.create(3),uLevelRadius:Sp.create([Math.pow(2,2),Math.pow(2,5),Math.pow(2,8)]),uLevelBias:Sp.create([.8,.8,.8]),uNearThreshold:Sp.create(10),uFarThreshold:Sp.create(1500)},i={...Fse},a=jV("ssao",pK,Rse),s=CK(e,"triangles",a,i,o);return kK(s,o)}(e,f,this.depthHalfTarget.texture,this.depthQuarterTarget.texture),this.ssaoBlurFirstPassRenderable=Lse(e,this.ssaoDepthTexture,"horizontal"),this.ssaoBlurSecondPassRenderable=Lse(e,this.ssaoDepthBlurProxyTexture,"vertical")}setSize(e,t){const[n,r]=this.texSize,o=this.calcSsaoScale(1);if(e!==n||t!==r||this.ssaoScale!==o){this.texSize.splice(0,2,e,t);const n=Math.floor(e*this.ssaoScale),r=Math.floor(t*this.ssaoScale);this.downsampledDepthTarget.setSize(n,r),this.ssaoDepthTexture.define(n,r),this.ssaoDepthBlurProxyTexture.define(n,r);const o=Math.max(1,Math.floor(.5*n)),i=Math.max(1,Math.floor(.5*r));this.depthHalfTarget.setSize(o,i);const a=Math.max(1,Math.floor(.25*n)),s=Math.max(1,Math.floor(.25*r));this.depthQuarterTarget.setSize(a,s),Sp.update(this.downsampleDepthRenderable.values.uTexSize,Wh.set(this.downsampleDepthRenderable.values.uTexSize.ref.value,n,r)),Sp.update(this.depthHalfRenderable.values.uTexSize,Wh.set(this.depthHalfRenderable.values.uTexSize.ref.value,o,i)),Sp.update(this.depthQuarterRenderable.values.uTexSize,Wh.set(this.depthQuarterRenderable.values.uTexSize.ref.value,a,s)),Sp.update(this.ssaoRenderable.values.uTexSize,Wh.set(this.ssaoRenderable.values.uTexSize.ref.value,n,r)),Sp.update(this.ssaoBlurFirstPassRenderable.values.uTexSize,Wh.set(this.ssaoBlurFirstPassRenderable.values.uTexSize.ref.value,n,r)),Sp.update(this.ssaoBlurSecondPassRenderable.values.uTexSize,Wh.set(this.ssaoBlurSecondPassRenderable.values.uTexSize.ref.value,n,r));const l=1===this.ssaoScale?this.drawPass.depthTextureOpaque:this.downsampledDepthTarget.texture;Sp.update(this.depthHalfRenderable.values.tColor,l),Sp.update(this.ssaoRenderable.values.tDepth,l),this.depthHalfRenderable.update(),this.ssaoRenderable.update()}}update(e,t){let n=!1,r=!1,o=!1;const i="orthographic"===e.state.mode?1:0,a=Yh.identity();Yh.invert(a,e.projection);const[s,l]=this.texSize,c=e.viewport;Sp.update(this.ssaoRenderable.values.uProjection,e.projection),Sp.update(this.ssaoRenderable.values.uInvProjection,a);const u=this.ssaoRenderable.values.uBounds,d=this.ssaoScale;Kh.set(u.ref.value,Math.floor(c.x*d)/(s*d),Math.floor(c.y*d)/(l*d),Math.ceil((c.x+c.width)*d)/(s*d),Math.ceil((c.y+c.height)*d)/(l*d)),Sp.update(u,u.ref.value),Sp.update(this.ssaoBlurFirstPassRenderable.values.uBounds,u.ref.value),Sp.update(this.ssaoBlurSecondPassRenderable.values.uBounds,u.ref.value),Sp.updateIfChanged(this.ssaoBlurFirstPassRenderable.values.uNear,e.near),Sp.updateIfChanged(this.ssaoBlurSecondPassRenderable.values.uNear,e.near),Sp.updateIfChanged(this.ssaoBlurFirstPassRenderable.values.uFar,e.far),Sp.updateIfChanged(this.ssaoBlurSecondPassRenderable.values.uFar,e.far),Sp.update(this.ssaoBlurFirstPassRenderable.values.uInvProjection,a),Sp.update(this.ssaoBlurSecondPassRenderable.values.uInvProjection,a),Sp.update(this.ssaoBlurFirstPassRenderable.values.uBlurDepthBias,t.blurDepthBias),Sp.update(this.ssaoBlurSecondPassRenderable.values.uBlurDepthBias,t.blurDepthBias),this.ssaoBlurFirstPassRenderable.values.dOrthographic.ref.value!==i&&(r=!0,Sp.update(this.ssaoBlurFirstPassRenderable.values.dOrthographic,i),Sp.update(this.ssaoBlurSecondPassRenderable.values.dOrthographic,i)),this.nSamples!==t.samples&&(n=!0,this.nSamples=t.samples,Sp.update(this.ssaoRenderable.values.uSamples,jse(this.nSamples)),Sp.updateIfChanged(this.ssaoRenderable.values.dNSamples,this.nSamples));const A="on"===t.multiScale.name;if(this.ssaoRenderable.values.dMultiScale.ref.value!==A&&(n=!0,Sp.update(this.ssaoRenderable.values.dMultiScale,A)),"on"===t.multiScale.name){const e=t.multiScale.params;if(!Qp(this.levels,e.levels)){n=!0,this.levels=e.levels;const t=function(e,t){const n=e.length,{radius:r,bias:o}=t||{radius:new Array(3*n).fill(0),bias:new Array(3*n).fill(0)};e=e.slice().sort(((e,t)=>e.radius-t.radius));for(let i=0;i<n;++i){const t=e[i];r[i]=Math.pow(2,t.radius),o[i]=t.bias}return{count:n,radius:r,bias:o}}(e.levels);Sp.updateIfChanged(this.ssaoRenderable.values.dLevels,t.count),Sp.update(this.ssaoRenderable.values.uLevelRadius,t.radius),Sp.update(this.ssaoRenderable.values.uLevelBias,t.bias)}Sp.updateIfChanged(this.ssaoRenderable.values.uNearThreshold,e.nearThreshold),Sp.updateIfChanged(this.ssaoRenderable.values.uFarThreshold,e.farThreshold)}else Sp.updateIfChanged(this.ssaoRenderable.values.uRadius,Math.pow(2,t.radius));if(Sp.updateIfChanged(this.ssaoRenderable.values.uBias,t.bias),this.blurKernelSize!==t.blurKernelSize){r=!0,this.blurKernelSize=t.blurKernelSize;const e=Use(this.blurKernelSize);Sp.update(this.ssaoBlurFirstPassRenderable.values.uKernel,e),Sp.update(this.ssaoBlurSecondPassRenderable.values.uKernel,e),Sp.update(this.ssaoBlurFirstPassRenderable.values.dOcclusionKernelSize,this.blurKernelSize),Sp.update(this.ssaoBlurSecondPassRenderable.values.dOcclusionKernelSize,this.blurKernelSize)}const f=this.calcSsaoScale(t.resolutionScale);if(this.ssaoScale!==f){n=!0,o=!0,this.ssaoScale=f;const e=Math.floor(s*this.ssaoScale),t=Math.floor(l*this.ssaoScale);this.downsampledDepthTarget.setSize(e,t),this.ssaoDepthTexture.define(e,t),this.ssaoDepthBlurProxyTexture.define(e,t);const r=Math.floor(.5*e),i=Math.floor(.5*t);this.depthHalfTarget.setSize(r,i);const a=Math.floor(.25*e),c=Math.floor(.25*t);this.depthQuarterTarget.setSize(a,c);const u=1===this.ssaoScale?this.drawPass.depthTextureOpaque:this.downsampledDepthTarget.texture;Sp.update(this.depthHalfRenderable.values.tColor,u),Sp.update(this.ssaoRenderable.values.tDepth,u),Sp.update(this.ssaoRenderable.values.tDepthHalf,this.depthHalfTarget.texture),Sp.update(this.ssaoRenderable.values.tDepthQuarter,this.depthQuarterTarget.texture),Sp.update(this.downsampleDepthRenderable.values.uTexSize,Wh.set(this.downsampleDepthRenderable.values.uTexSize.ref.value,e,t)),Sp.update(this.depthHalfRenderable.values.uTexSize,Wh.set(this.depthHalfRenderable.values.uTexSize.ref.value,r,i)),Sp.update(this.depthQuarterRenderable.values.uTexSize,Wh.set(this.depthQuarterRenderable.values.uTexSize.ref.value,a,c)),Sp.update(this.ssaoRenderable.values.uTexSize,Wh.set(this.ssaoRenderable.values.uTexSize.ref.value,e,t)),Sp.update(this.ssaoBlurFirstPassRenderable.values.uTexSize,Wh.set(this.ssaoBlurFirstPassRenderable.values.uTexSize.ref.value,e,t)),Sp.update(this.ssaoBlurSecondPassRenderable.values.uTexSize,Wh.set(this.ssaoBlurSecondPassRenderable.values.uTexSize.ref.value,e,t))}n&&this.ssaoRenderable.update(),r&&(this.ssaoBlurFirstPassRenderable.update(),this.ssaoBlurSecondPassRenderable.update()),o&&this.depthHalfRenderable.update()}render(e){fw&&this.webgl.timer.mark("SSAO.render");const{state:t}=this.webgl,{x:n,y:r,width:o,height:i}=e.viewport,a=Math.floor(n*this.ssaoScale),s=Math.floor(r*this.ssaoScale),l=Math.ceil(o*this.ssaoScale),c=Math.ceil(i*this.ssaoScale);t.viewport(a,s,l,c),t.scissor(a,s,l,c),this.ssaoScale<1&&(fw&&this.webgl.timer.mark("SSAO.downsample"),this.downsampledDepthTarget.bind(),this.downsampleDepthRenderable.render(),fw&&this.webgl.timer.markEnd("SSAO.downsample")),fw&&this.webgl.timer.mark("SSAO.half"),this.depthHalfTarget.bind(),this.depthHalfRenderable.render(),fw&&this.webgl.timer.markEnd("SSAO.half"),fw&&this.webgl.timer.mark("SSAO.quarter"),this.depthQuarterTarget.bind(),this.depthQuarterRenderable.render(),fw&&this.webgl.timer.markEnd("SSAO.quarter"),this.ssaoFramebuffer.bind(),this.ssaoRenderable.render(),this.ssaoBlurFirstPassFramebuffer.bind(),this.ssaoBlurFirstPassRenderable.render(),this.ssaoBlurSecondPassFramebuffer.bind(),this.ssaoBlurSecondPassRenderable.render(),fw&&this.webgl.timer.markEnd("SSAO.render")}}const Fse={...MK,tDepth:ZW("texture","rgba","ubyte","linear"),tDepthHalf:ZW("texture","rgba","ubyte","linear"),tDepthQuarter:ZW("texture","rgba","ubyte","linear"),uSamples:JW("v3[]"),dNSamples:eK("number"),uProjection:JW("m4"),uInvProjection:JW("m4"),uBounds:JW("v4"),uTexSize:JW("v2"),uRadius:JW("f"),uBias:JW("f"),dMultiScale:eK("boolean"),dLevels:eK("number"),uLevelRadius:JW("f[]"),uLevelBias:JW("f[]"),uNearThreshold:JW("f"),uFarThreshold:JW("f")};const Nse={...MK,tSsaoDepth:ZW("texture","rgba","ubyte","nearest"),uTexSize:JW("v2"),uKernel:JW("f[]"),dOcclusionKernelSize:eK("number"),uBlurDepthBias:JW("f"),uBlurDirectionX:JW("f"),uBlurDirectionY:JW("f"),uInvProjection:JW("m4"),uNear:JW("f"),uFar:JW("f"),uBounds:JW("v4"),dOrthographic:eK("number")};function Lse(e,t,n){const r={...RK,tSsaoDepth:Sp.create(t),uTexSize:Sp.create(Wh.create(t.getWidth(),t.getHeight())),uKernel:Sp.create(Use(15)),dOcclusionKernelSize:Sp.create(15),uBlurDepthBias:Sp.create(.5),uBlurDirectionX:Sp.create("horizontal"===n?1:0),uBlurDirectionY:Sp.create("vertical"===n?1:0),uInvProjection:Sp.create(Yh.identity()),uNear:Sp.create(0),uFar:Sp.create(1e4),uBounds:Sp.create(Kh()),dOrthographic:Sp.create(0)},o={...Nse};return kK(CK(e,"triangles",jV("ssao_blur",pK,"\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nuniform sampler2D tSsaoDepth;\nuniform vec2 uTexSize;\nuniform vec4 uBounds;\n\nuniform float uKernel[dOcclusionKernelSize];\nuniform float uBlurDepthBias;\n\nuniform float uBlurDirectionX;\nuniform float uBlurDirectionY;\n\nuniform mat4 uInvProjection;\nuniform float uNear;\nuniform float uFar;\n\n#include common\n\nfloat getViewZ(const in float depth) {\n    #if dOrthographic == 1\n        return orthographicDepthToViewZ(depth, uNear, uFar);\n    #else\n        return perspectiveDepthToViewZ(depth, uNear, uFar);\n    #endif\n}\n\nbool isBackground(const in float depth) {\n    return depth == 1.0;\n}\n\nbool isNearClip(const in float depth) {\n    return depth == 0.0;\n}\n\nbool outsideBounds(const in vec2 p) {\n    return p.x < uBounds.x || p.y < uBounds.y || p.x > uBounds.z || p.y > uBounds.w;\n}\n\nfloat getPixelSize(const in vec2 coords, const in float depth) {\n    vec3 viewPos0 = screenSpaceToViewSpace(vec3(coords, depth), uInvProjection);\n    vec3 viewPos1 = screenSpaceToViewSpace(vec3(coords + vec2(1.0, 0.0) / uTexSize, depth), uInvProjection);\n    return distance(viewPos0, viewPos1);\n}\n\nvoid main(void) {\n    vec2 coords = gl_FragCoord.xy / uTexSize;\n\n    vec2 packedDepth = texture2D(tSsaoDepth, coords).zw;\n\n    if (outsideBounds(coords)) {\n        gl_FragColor = vec4(packUnitIntervalToRG(1.0), packedDepth);\n        return;\n    }\n\n    float selfDepth = unpackRGToUnitInterval(packedDepth);\n    // (if background and if second pass) or if near clip\n    if ((isBackground(selfDepth) && uBlurDirectionY != 0.0) || isNearClip(selfDepth)) {\n        gl_FragColor = vec4(packUnitIntervalToRG(1.0), packedDepth);\n        return;\n    }\n\n    float selfViewZ = getViewZ(selfDepth);\n    float pixelSize = getPixelSize(coords, selfDepth);\n\n    vec2 offset = vec2(uBlurDirectionX, uBlurDirectionY) / uTexSize;\n\n    float sum = 0.0;\n    float kernelSum = 0.0;\n    // only if kernelSize is odd\n    for (int i = -dOcclusionKernelSize / 2; i <= dOcclusionKernelSize / 2; i++) {\n        if (abs(float(i)) > 1.0 && abs(float(i)) * pixelSize > 0.8) continue;\n\n        vec2 sampleCoords = coords + float(i) * offset;\n        if (outsideBounds(sampleCoords)) {\n            continue;\n        }\n\n        vec4 sampleSsaoDepth = texture2D(tSsaoDepth, sampleCoords);\n\n        float sampleDepth = unpackRGToUnitInterval(sampleSsaoDepth.zw);\n        if (isBackground(sampleDepth) || isNearClip(sampleDepth)) {\n            continue;\n        }\n\n        float sampleViewZ = getViewZ(sampleDepth);\n        if (abs(selfViewZ - sampleViewZ) >= uBlurDepthBias) {\n            continue;\n        }\n\n        float kernel = uKernel[int(abs(float(i)))]; // abs is not defined for int in webgl1\n        float sampleValue = unpackRGToUnitInterval(sampleSsaoDepth.xy);\n\n        sum += kernel * sampleValue;\n        kernelSum += kernel;\n    }\n    gl_FragColor = vec4(packUnitIntervalToRG(sum / kernelSum), packedDepth);\n}\n"),o,r),r)}function Use(e){const t=e/3,n=Math.floor((e+1)/2),r=[];for(let o=0;o<n;o++)r.push(1/(Math.sqrt(2*Math.PI)*t)*Math.exp(-o*o/(2*t*t)));return r}const Gse=[];for(let n=0;n<256;n++){const e=qh();e[0]=2*Math.random()-1,e[1]=2*Math.random()-1,e[2]=Math.random(),qh.normalize(e,e),qh.scale(e,e,Math.random()),Gse.push(e)}function jse(e){const t=[];for(let n=0;n<e;n++){let r=(n*n+2*n+1)/(e*e);r=.1+.9*r,t.push(Gse[n][0]*r),t.push(Gse[n][1]*r),t.push(Gse[n][2]*r)}return t}const zse={...MK,tSsaoDepth:ZW("texture","rgba","ubyte","nearest"),tColor:ZW("texture","rgba","ubyte","nearest"),tDepthOpaque:ZW("texture","rgba","ubyte","nearest"),tShadows:ZW("texture","rgba","ubyte","nearest"),tOutlines:ZW("texture","rgba","ubyte","nearest"),uTexSize:JW("v2"),dOrthographic:eK("number"),uNear:JW("f"),uFar:JW("f"),uFogNear:JW("f"),uFogFar:JW("f"),uFogColor:JW("v3"),uOutlineColor:JW("v3"),uOcclusionColor:JW("v3"),uTransparentBackground:JW("b"),dOcclusionEnable:eK("boolean"),uOcclusionOffset:JW("v2"),dShadowEnable:eK("boolean"),dOutlineEnable:eK("boolean"),dOutlineScale:eK("number"),dTransparentOutline:eK("boolean")};const Hse={occlusion:U_.MappedStatic("on",{on:U_.Group(Pse),off:U_.Group({})},{cycle:!0,description:"Darken occluded crevices with the ambient occlusion effect"}),shadow:U_.MappedStatic("off",{on:U_.Group(kse),off:U_.Group({})},{cycle:!0,description:"Simplistic shadows"}),outline:U_.MappedStatic("off",{on:U_.Group(_se),off:U_.Group({})},{cycle:!0,description:"Draw outline around 3D objects"}),dof:U_.MappedStatic("off",{on:U_.Group(use),off:U_.Group({})},{cycle:!0,description:"DOF"}),antialiasing:U_.MappedStatic("smaa",{fxaa:U_.Group(Rae),smaa:U_.Group(Nae),off:U_.Group({})},{options:[["fxaa","FXAA"],["smaa","SMAA"],["off","Off"]],description:"Smooth pixel edges"}),sharpening:U_.MappedStatic("off",{on:U_.Group(ase),off:U_.Group({})},{cycle:!0,description:"Contrast Adaptive Sharpening"}),background:U_.Group(Zae,{isFlat:!0}),bloom:U_.MappedStatic("on",{on:U_.Group(pse),off:U_.Group({})},{cycle:!0,description:"Bloom"})};class Vse{static isEnabled(e){return Ose.isEnabled(e)||Qse.isEnabled(e)||Sse.isEnabled(e)||"off"!==e.background.variant.name}static isTransparentOutlineEnabled(e){return Sse.isEnabled(e)&&e.outline.params.includeTransparent}constructor(e,t,n){this.webgl=e,this.drawPass=n,this.bgColor=qh(),this.occlusionOffset=[0,0],this.transparentBackground=!1;const{colorTarget:r,depthTextureOpaque:o}=n,i=r.getWidth(),a=r.getHeight();this.target=e.createRenderTarget(i,a,!1,"uint8","linear"),this.ssao=new Ose(e,n,i,a),this.shadow=new Qse(e,n,i,a),this.outline=new Sse(e,n,i,a),this.renderable=function(e,t,n,r,o,i,a){const s={...RK,tSsaoDepth:Sp.create(i),tColor:Sp.create(t),tDepthOpaque:Sp.create(n),tShadows:Sp.create(r),tOutlines:Sp.create(o),uTexSize:Sp.create(Wh.create(t.getWidth(),t.getHeight())),dOrthographic:Sp.create(0),uNear:Sp.create(1),uFar:Sp.create(1e4),uFogNear:Sp.create(1e4),uFogFar:Sp.create(1e4),uFogColor:Sp.create(qh.create(1,1,1)),uOutlineColor:Sp.create(qh.create(0,0,0)),uOcclusionColor:Sp.create(qh.create(0,0,0)),uTransparentBackground:Sp.create(!1),dOcclusionEnable:Sp.create(!0),uOcclusionOffset:Sp.create(Wh.create(0,0)),dShadowEnable:Sp.create(!1),dOutlineEnable:Sp.create(!1),dOutlineScale:Sp.create(1),dTransparentOutline:Sp.create(a)},l={...zse};return kK(CK(e,"triangles",jV("postprocessing",pK,"\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nuniform sampler2D tSsaoDepth;\nuniform sampler2D tColor;\nuniform sampler2D tDepthOpaque;\nuniform sampler2D tShadows;\nuniform sampler2D tOutlines;\nuniform vec2 uTexSize;\n\nuniform float uNear;\nuniform float uFar;\nuniform float uFogNear;\nuniform float uFogFar;\nuniform vec3 uFogColor;\nuniform vec3 uOutlineColor;\nuniform vec3 uOcclusionColor;\nuniform bool uTransparentBackground;\nuniform vec2 uOcclusionOffset;\n\n#include common\n\nfloat getViewZ(const in float depth) {\n    #if dOrthographic == 1\n        return orthographicDepthToViewZ(depth, uNear, uFar);\n    #else\n        return perspectiveDepthToViewZ(depth, uNear, uFar);\n    #endif\n}\n\nfloat getDepthOpaque(const in vec2 coords) {\n    #ifdef depthTextureSupport\n        return texture2D(tDepthOpaque, coords).r;\n    #else\n        return unpackRGBAToDepth(texture2D(tDepthOpaque, coords));\n    #endif\n}\n\nbool isBackground(const in float depth) {\n    return depth == 1.0;\n}\n\nfloat getOutline(const in vec2 coords, const in float opaqueDepth, out float closestTexel) {\n    float backgroundViewZ = 2.0 * uFar;\n    vec2 invTexSize = 1.0 / uTexSize;\n\n    float outline = 1.0;\n    closestTexel = 1.0;\n    for (int y = -dOutlineScale; y <= dOutlineScale; y++) {\n        for (int x = -dOutlineScale; x <= dOutlineScale; x++) {\n            if (x * x + y * y > dOutlineScale * dOutlineScale) {\n                continue;\n            }\n\n            vec2 sampleCoords = coords + vec2(float(x), float(y)) * invTexSize;\n\n            vec4 sampleOutlineCombined = texture2D(tOutlines, sampleCoords);\n            float sampleOutline = sampleOutlineCombined.r;\n            float sampleOutlineDepth = unpackRGToUnitInterval(sampleOutlineCombined.gb);\n\n            if (sampleOutline == 0.0 && sampleOutlineDepth < closestTexel) {\n                outline = 0.0;\n                closestTexel = sampleOutlineDepth;\n            }\n        }\n    }\n    return closestTexel < opaqueDepth ? outline : 1.0;\n}\n\nfloat getSsao(vec2 coords) {\n    float rawSsao = unpackRGToUnitInterval(texture2D(tSsaoDepth, coords).xy);\n    if (rawSsao > 0.999) {\n        return 1.0;\n    } else if (rawSsao > 0.001) {\n        return rawSsao;\n    }\n    // treat values close to 0.0 as errors and return no occlusion\n    return 1.0;\n}\n\nvoid main(void) {\n    vec2 coords = gl_FragCoord.xy / uTexSize;\n    vec4 color = texture2D(tColor, coords);\n\n    float viewDist;\n    float fogFactor;\n    float opaqueDepth = getDepthOpaque(coords);\n\n    #ifdef dOcclusionEnable\n        if (!isBackground(opaqueDepth)) {\n            viewDist = abs(getViewZ(opaqueDepth));\n            fogFactor = smoothstep(uFogNear, uFogFar, viewDist);\n            float occlusionFactor = getSsao(coords + uOcclusionOffset);\n            if (!uTransparentBackground) {\n                color.rgb = mix(mix(uOcclusionColor, uFogColor, fogFactor), color.rgb, occlusionFactor);\n            } else {\n                color.rgb = mix(uOcclusionColor * (1.0 - fogFactor), color.rgb, occlusionFactor);\n            }\n        }\n    #endif\n\n    #ifdef dShadowEnable\n        if (!isBackground(opaqueDepth)) {\n            viewDist = abs(getViewZ(opaqueDepth));\n            fogFactor = smoothstep(uFogNear, uFogFar, viewDist);\n            vec4 shadow = texture2D(tShadows, coords);\n            if (!uTransparentBackground) {\n                color.rgb = mix(mix(vec3(0), uFogColor, fogFactor), color.rgb, shadow.a);\n            } else {\n                color.rgb = mix(vec3(0) * (1.0 - fogFactor), color.rgb, shadow.a);\n            }\n        }\n    #endif\n\n    // outline needs to be handled after occlusion and shadow to keep them clean\n    #ifdef dOutlineEnable\n        float closestTexel;\n        float outline = getOutline(coords, opaqueDepth, closestTexel);\n        if (outline == 0.0) {\n            viewDist = abs(getViewZ(closestTexel));\n            fogFactor = smoothstep(uFogNear, uFogFar, viewDist);\n            if (!uTransparentBackground) {\n                color.rgb = mix(uOutlineColor, uFogColor, fogFactor);\n            } else {\n                color.a = 1.0 - fogFactor;\n                color.rgb = mix(uOutlineColor, color.rgb, fogFactor);\n            }\n        }\n    #endif\n\n    gl_FragColor = color;\n}\n"),l,s),s)}(e,r.texture,o,this.shadow.shadowsTarget.texture,this.outline.outlinesTarget.texture,this.ssao.ssaoDepthTexture,!0),this.background=new $ae(e,t,i,a)}setSize(e,t){const[n,r]=this.renderable.values.uTexSize.ref.value;e===n&&t===r||(this.target.setSize(e,t),Sp.update(this.renderable.values.uTexSize,Wh.set(this.renderable.values.uTexSize.ref.value,e,t))),this.ssao.setSize(e,t),this.shadow.setSize(e,t),this.outline.setSize(e,t),this.background.setSize(e,t)}updateState(e,t,n,r,o){var i;let a=!1;const s="orthographic"===e.state.mode?1:0,l=Sse.isEnabled(r),c=Qse.isEnabled(r),u=Ose.isEnabled(r),d=Yh.identity();if(Yh.invert(d,e.projection),u&&this.ssao.update(e,r.occlusion.params),c&&this.shadow.update(e,o,r.shadow.params),l){const t=r.outline.params;this.outline.update(e,t);const n=null===(i=t.includeTransparent)||void 0===i||i,o=Math.max(1,Math.round(t.scale*this.webgl.pixelRatio))-1;Sp.update(this.renderable.values.uOutlineColor,Jp.toVec3Normalized(this.renderable.values.uOutlineColor.ref.value,t.color)),this.renderable.values.dOutlineScale.ref.value!==o&&(a=!0,Sp.update(this.renderable.values.dOutlineScale,o)),this.renderable.values.dTransparentOutline.ref.value!==n&&(a=!0,Sp.update(this.renderable.values.dTransparentOutline,n))}Sp.updateIfChanged(this.renderable.values.uFar,e.far),Sp.updateIfChanged(this.renderable.values.uNear,e.near),Sp.updateIfChanged(this.renderable.values.uFogFar,e.fogFar),Sp.updateIfChanged(this.renderable.values.uFogNear,e.fogNear),Sp.update(this.renderable.values.uFogColor,Jp.toVec3Normalized(this.renderable.values.uFogColor.ref.value,n)),Sp.updateIfChanged(this.renderable.values.uTransparentBackground,t),this.renderable.values.dOrthographic.ref.value!==s&&(a=!0,Sp.update(this.renderable.values.dOrthographic,s)),this.renderable.values.dOutlineEnable.ref.value!==l&&(a=!0,Sp.update(this.renderable.values.dOutlineEnable,l)),this.renderable.values.dShadowEnable.ref.value!==c&&(a=!0,Sp.update(this.renderable.values.dShadowEnable,c)),this.renderable.values.dOcclusionEnable.ref.value!==u&&(a=!0,Sp.update(this.renderable.values.dOcclusionEnable,u)),a&&this.renderable.update();const{gl:A,state:f}=this.webgl;f.enable(A.SCISSOR_TEST),f.disable(A.BLEND),f.disable(A.DEPTH_TEST),f.depthMask(!1)}setOcclusionOffset(e,t){this.occlusionOffset[0]=e,this.occlusionOffset[1]=t,Sp.update(this.renderable.values.uOcclusionOffset,Wh.set(this.renderable.values.uOcclusionOffset.ref.value,e,t))}setTransparentBackground(e){this.transparentBackground=e}render(e,t,n,r,o,i){fw&&this.webgl.timer.mark("PostprocessingPass.render"),this.updateState(e,n,r,o,i);const{gl:a,state:s}=this.webgl,{x:l,y:c,width:u,height:d}=e.viewport;"on"===o.occlusion.name&&0===this.occlusionOffset[0]&&0===this.occlusionOffset[1]&&this.ssao.render(e),s.viewport(l,c,u,d),s.scissor(l,c,u,d),"on"===o.outline.name&&this.outline.render(),"on"===o.shadow.name&&this.shadow.render(),t?this.webgl.unbindFramebuffer():this.target.bind(),this.background.update(e,o.background),this.background.isEnabled(o.background)?(this.transparentBackground?s.clearColor(0,0,0,0):(Jp.toVec3Normalized(this.bgColor,r),s.clearColor(this.bgColor[0],this.bgColor[1],this.bgColor[2],1)),a.clear(a.COLOR_BUFFER_BIT),s.enable(a.BLEND),s.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),this.background.render()):(s.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT)),this.renderable.render(),fw&&this.webgl.timer.markEnd("PostprocessingPass.render")}}class qse{static isEnabled(e){return"off"!==e.antialiasing.name}constructor(e,t,n){this.target=e.createRenderTarget(t,n,!1),this.internalTarget=e.createRenderTarget(t,n,!1),this.fxaa=new Pae(e,this.target.texture),this.smaa=new Lae(e,this.target.texture),this.cas=new sse(e,this.target.texture)}setSize(e,t){const n=this.target.texture.getWidth(),r=this.target.texture.getHeight();e===n&&t===r||(this.target.setSize(e,t),this.internalTarget.setSize(e,t),this.fxaa.setSize(e,t),this.smaa.supported&&this.smaa.setSize(e,t),this.cas.setSize(e,t))}_renderFxaa(e,t,n,r){"fxaa"===r.antialiasing.name&&(this.fxaa.update(t,r.antialiasing.params),this.fxaa.render(e.viewport,n))}_renderSmaa(e,t,n,r){"smaa"===r.antialiasing.name&&(this.smaa.update(t,r.antialiasing.params),this.smaa.render(e.viewport,n))}_renderAntialiasing(e,t,n,r){"fxaa"===r.antialiasing.name?this._renderFxaa(e,t,n,r):"smaa"===r.antialiasing.name&&this._renderSmaa(e,t,n,r)}_renderCas(e,t,n,r){"on"===r.sharpening.name&&("off"!==r.antialiasing.name&&(t=this.internalTarget.texture),this.cas.update(t,r.sharpening.params),this.cas.render(e.viewport,n))}render(e,t,n,r){if("off"===r.antialiasing.name&&"off"===r.sharpening.name)return;if("smaa"===r.antialiasing.name&&!this.smaa.supported)return void console.error('SMAA not supported, missing "HTMLImageElement"');const o=!0===n?void 0:!1===n?this.target:n;"off"===r.sharpening.name?this._renderAntialiasing(e,t,o,r):("off"===r.antialiasing.name||this._renderAntialiasing(e,t,this.internalTarget,r),this._renderCas(e,t,o,r))}}const Yse={...MK,tColor:ZW("texture","rgba","ubyte","nearest"),uTexSize:JW("v2"),uWeight:JW("f")},Xse=jV("compose",pK,"\nprecision highp float;\nprecision highp sampler2D;\n\nuniform sampler2D tColor;\nuniform vec2 uTexSize;\nuniform float uWeight;\n\nvoid main() {\n    vec2 coords = gl_FragCoord.xy / uTexSize;\n    gl_FragColor = texture2D(tColor, coords) * uWeight;\n}\n");const Wse={mode:U_.Select("temporal",[["off","Off"],["on","On"],["temporal","Temporal"]]),sampleLevel:U_.Numeric(2,{min:0,max:5,step:1},{description:"Take level^2 samples."}),reduceFlicker:U_.Boolean(!0,{description:'Reduce flicker in "temporal" mode.'}),reuseOcclusion:U_.Boolean(!0,{description:"Reuse occlusion data. It is faster but has some artefacts."})};class Kse{static isEnabled(e){return"off"!==e.mode}constructor(e,t){this.webgl=e,this.drawPass=t;const{colorBufferFloat:n,textureFloat:r,colorBufferHalfFloat:o,textureHalfFloat:i}=e.extensions,a=t.colorTarget.getWidth(),s=t.colorTarget.getHeight();this.colorTarget=e.createRenderTarget(a,s,!1);const l=o&&i?"fp16":n&&r?"float32":"uint8";this.composeTarget=e.createRenderTarget(a,s,!1,l),this.holdTarget=e.createRenderTarget(a,s,!1),this.compose=function(e,t){const n={...RK,tColor:Sp.create(t),uTexSize:Sp.create(Wh.create(t.getWidth(),t.getHeight())),uWeight:Sp.create(1)},r={...Yse};return kK(CK(e,"triangles",Xse,r,n),n)}(e,t.colorTarget.texture)}syncSize(){const e=this.drawPass.colorTarget.getWidth(),t=this.drawPass.colorTarget.getHeight(),[n,r]=this.compose.values.uTexSize.ref.value;e===n&&t===r||(this.colorTarget.setSize(e,t),this.composeTarget.setSize(e,t),this.holdTarget.setSize(e,t),Sp.update(this.compose.values.uTexSize,Wh.set(this.compose.values.uTexSize.ref.value,e,t)))}render(e,t,n,r,o){return"temporal"!==n.multiSample.mode||o?(this.renderMultiSample(t,r,n),-2):this.renderTemporalMultiSample(e,t,n,r)}bindOutputTarget(e){e?this.webgl.unbindFramebuffer():this.colorTarget.bind()}renderMultiSample(e,t,n){const{camera:r}=e,{compose:o,composeTarget:i,drawPass:a,webgl:s}=this,{gl:l,state:c}=s;fw&&s.timer.mark("MultiSamplePass.renderMultiSample");const u=Jse[Math.max(0,Math.min(n.multiSample.sampleLevel,5))],{x:d,y:A,width:f,height:p}=r.viewport,h=1/u.length;r.viewOffset.enabled=!0,Sp.update(o.values.tColor,a.getColorTarget(n.postprocessing).texture),o.update();for(let g=0;g<u.length;++g){const t=u[g];bae.setViewOffset(r.viewOffset,f,p,t[0],t[1],f,p),r.update();const s=h+.03125*((g+.5)/u.length-.5);Sp.update(o.values.uWeight,s),0!==g&&n.multiSample.reuseOcclusion?a.postprocessing.setOcclusionOffset(t[0]/f,t[1]/p):a.postprocessing.setOcclusionOffset(0,0),a.render(e,n,!1),i.bind(),c.enable(l.BLEND),c.blendEquationSeparate(l.FUNC_ADD,l.FUNC_ADD),c.blendFuncSeparate(l.ONE,l.ONE,l.ONE,l.ONE),c.disable(l.DEPTH_TEST),c.depthMask(!1),c.viewport(d,A,f,p),c.scissor(d,A,f,p),0===g&&(c.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT)),o.render()}a.postprocessing.setOcclusionOffset(0,0),Sp.update(o.values.uWeight,1),Sp.update(o.values.tColor,i.texture),o.update(),this.bindOutputTarget(t),c.viewport(d,A,f,p),c.scissor(d,A,f,p),c.disable(l.BLEND),o.render(),r.viewOffset.enabled=!1,r.update(),fw&&s.timer.markEnd("MultiSamplePass.renderMultiSample")}renderTemporalMultiSample(e,t,n,r){const{camera:o}=t,{compose:i,composeTarget:a,holdTarget:s,drawPass:l,webgl:c}=this,{gl:u,state:d}=c;fw&&c.timer.mark("MultiSamplePass.renderTemporalMultiSample");const A=Jse[Math.max(0,Math.min(n.multiSample.sampleLevel,5))];if(-2===e||e>=A.length)return-2;const{x:f,y:p,width:h,height:g}=o.viewport,m=1/A.length;if(-1===e)l.render(t,n,!1),Sp.update(i.values.uWeight,1),Sp.update(i.values.tColor,l.getColorTarget(n.postprocessing).texture),i.update(),s.bind(),d.disable(u.BLEND),d.disable(u.DEPTH_TEST),d.depthMask(!1),d.viewport(f,p,h,g),d.scissor(f,p,h,g),i.render(),e+=1;else{o.viewOffset.enabled=!0,Sp.update(i.values.tColor,l.getColorTarget(n.postprocessing).texture),Sp.update(i.values.uWeight,m),i.update();const r=Math.pow(2,Math.max(0,n.multiSample.sampleLevel-2));for(let s=0;s<r;++s){const r=A[e];if(bae.setViewOffset(o.viewOffset,h,g,r[0],r[1],h,g),o.update(),0!==e&&n.multiSample.reuseOcclusion?l.postprocessing.setOcclusionOffset(r[0]/h,r[1]/g):l.postprocessing.setOcclusionOffset(0,0),l.render(t,n,!1),a.bind(),d.enable(u.BLEND),d.blendEquationSeparate(u.FUNC_ADD,u.FUNC_ADD),d.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE),d.disable(u.DEPTH_TEST),d.depthMask(!1),d.viewport(f,p,h,g),d.scissor(f,p,h,g),0===e&&(d.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT)),i.render(),(e+=1)>=A.length)break}}l.postprocessing.setOcclusionOffset(0,0),this.bindOutputTarget(r),d.viewport(f,p,h,g),d.scissor(f,p,h,g);const y=e*m;return y>0&&(Sp.update(i.values.uWeight,1),Sp.update(i.values.tColor,a.texture),i.update(),d.disable(u.BLEND),i.render()),y<1&&(Sp.update(i.values.uWeight,1-y),Sp.update(i.values.tColor,s.texture),i.update(),0===y?d.disable(u.BLEND):d.enable(u.BLEND),i.render()),o.viewOffset.enabled=!1,o.update(),fw&&c.timer.markEnd("MultiSamplePass.renderTemporalMultiSample"),e>=A.length?-2:e}}const Jse=[[[0,0]],[[0,0],[-4,-4]],[[0,0],[6,-2],[-6,2],[2,6]],[[0,0],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[0,0],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[0,0],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];Jse.forEach((e=>{e.forEach((e=>{e[0]*=.0625,e[1]*=.0625}))}));class Zse{update(e,t){return e&&(this.sampleIndex=-1),"temporal"===t.mode&&-2!==this.sampleIndex}render(e,t,n,r){return this.sampleIndex=this.multiSamplePass.render(this.sampleIndex,e,t,n,!!r),this.sampleIndex<0}constructor(e){this.multiSamplePass=e,this.sampleIndex=-2}}const $se={eyeSeparation:U_.Numeric(.062,{min:.02,max:.1,step:.001},{description:"Distance between left and right camera."}),focus:U_.Numeric(10,{min:1,max:20,step:.1},{description:"Apparent object distance."})},ele=U_.getDefaultValues($se);class tle{get viewport(){return this.parent.viewport}get viewOffset(){return this.parent.viewOffset}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.parent=e,this.left=new nle,this.right=new nle,this.props={...ele,...t}}setProps(e){Object.assign(this.props,e)}update(){this.parent.update(),function(e,t,n,r){Oie.copy(n.viewport,e.viewport),Yh.copy(n.view,e.view),Yh.copy(n.projection,e.projection),bae.copySnapshot(n.state,e.state),bae.copyViewOffset(n.viewOffset,e.viewOffset),n.far=e.far,n.near=e.near,n.fogFar=e.fogFar,n.fogNear=e.fogNear,Oie.copy(r.viewport,e.viewport),Yh.copy(r.view,e.view),Yh.copy(r.projection,e.projection),bae.copySnapshot(r.state,e.state),bae.copyViewOffset(r.viewOffset,e.viewOffset),r.far=e.far,r.near=e.near,r.fogFar=e.fogFar,r.fogNear=e.fogNear;const o=Math.floor(e.viewport.width/2),i=o/e.viewport.height;n.viewport.width=o,r.viewport.x+=o,r.viewport.width-=o;const a=t.eyeSeparation/2,s=a*e.near/t.focus,l=e.near*Math.tan(.5*e.state.fov);let c,u;rle[12]=-a,ole[12]=a,c=-l*i+s,u=l*i+s,n.projection[0]=2*e.near/(u-c),n.projection[8]=(u+c)/(u-c),Yh.mul(n.view,n.view,rle),Yh.mul(n.projectionView,n.projection,n.view),Yh.invert(n.inverseProjectionView,n.projectionView),c=-l*i-s,u=l*i-s,r.projection[0]=2*e.near/(u-c),r.projection[8]=(u+c)/(u-c),Yh.mul(r.view,r.view,ole),Yh.mul(r.projectionView,r.projection,r.view),Yh.invert(r.inverseProjectionView,r.projectionView)}(this.parent,this.props,this.left,this.right)}}!function(e){e.is=function(e){return"left"in e&&"right"in e}}(tle||(tle={}));class nle{constructor(){this.viewport=Oie.create(0,0,0,0),this.view=Yh(),this.projection=Yh(),this.projectionView=Yh(),this.inverseProjectionView=Yh(),this.state=bae.createDefaultSnapshot(),this.viewOffset=bae.ViewOffset(),this.far=0,this.near=0,this.fogFar=0,this.fogNear=0}}const rle=Yh.identity(),ole=Yh.identity();const ile=Math.pow(2,24)-2;class ale{constructor(e,t,n){this.webgl=e,this.drawPass=t,this.pickScale=n;const r=n/e.pixelRatio;this.pickWidth=Math.ceil(t.colorTarget.getWidth()*r),this.pickHeight=Math.ceil(t.colorTarget.getHeight()*r);const{resources:o,extensions:{drawBuffers:i},gl:a}=e;i?(this.objectPickTexture=o.texture("image-uint8","rgba","ubyte","nearest"),this.objectPickTexture.define(this.pickWidth,this.pickHeight),this.instancePickTexture=o.texture("image-uint8","rgba","ubyte","nearest"),this.instancePickTexture.define(this.pickWidth,this.pickHeight),this.groupPickTexture=o.texture("image-uint8","rgba","ubyte","nearest"),this.groupPickTexture.define(this.pickWidth,this.pickHeight),this.depthPickTexture=o.texture("image-uint8","rgba","ubyte","nearest"),this.depthPickTexture.define(this.pickWidth,this.pickHeight),this.framebuffer=o.framebuffer(),this.objectPickFramebuffer=o.framebuffer(),this.instancePickFramebuffer=o.framebuffer(),this.groupPickFramebuffer=o.framebuffer(),this.depthPickFramebuffer=o.framebuffer(),this.framebuffer.bind(),i.drawBuffers([i.COLOR_ATTACHMENT0,i.COLOR_ATTACHMENT1,i.COLOR_ATTACHMENT2,i.COLOR_ATTACHMENT3]),this.objectPickTexture.attachFramebuffer(this.framebuffer,"color0"),this.instancePickTexture.attachFramebuffer(this.framebuffer,"color1"),this.groupPickTexture.attachFramebuffer(this.framebuffer,"color2"),this.depthPickTexture.attachFramebuffer(this.framebuffer,"color3"),this.depthRenderbuffer=Xq(a)?o.renderbuffer("depth32f","depth",this.pickWidth,this.pickHeight):o.renderbuffer("depth16","depth",this.pickWidth,this.pickHeight),this.depthRenderbuffer.attachFramebuffer(this.framebuffer),this.objectPickTexture.attachFramebuffer(this.objectPickFramebuffer,"color0"),this.instancePickTexture.attachFramebuffer(this.instancePickFramebuffer,"color0"),this.groupPickTexture.attachFramebuffer(this.groupPickFramebuffer,"color0"),this.depthPickTexture.attachFramebuffer(this.depthPickFramebuffer,"color0")):(this.objectPickTarget=e.createRenderTarget(this.pickWidth,this.pickHeight),this.instancePickTarget=e.createRenderTarget(this.pickWidth,this.pickHeight),this.groupPickTarget=e.createRenderTarget(this.pickWidth,this.pickHeight),this.depthPickTarget=e.createRenderTarget(this.pickWidth,this.pickHeight))}get pickRatio(){return this.pickScale/this.webgl.pixelRatio}setPickScale(e){this.pickScale=e,this.syncSize()}bindObject(){this.webgl.extensions.drawBuffers?this.objectPickFramebuffer.bind():this.objectPickTarget.bind()}bindInstance(){this.webgl.extensions.drawBuffers?this.instancePickFramebuffer.bind():this.instancePickTarget.bind()}bindGroup(){this.webgl.extensions.drawBuffers?this.groupPickFramebuffer.bind():this.groupPickTarget.bind()}bindDepth(){this.webgl.extensions.drawBuffers?this.depthPickFramebuffer.bind():this.depthPickTarget.bind()}get drawingBufferHeight(){return this.drawPass.colorTarget.getHeight()}syncSize(){const e=this.pickScale/this.webgl.pixelRatio,t=Math.ceil(this.drawPass.colorTarget.getWidth()*e),n=Math.ceil(this.drawPass.colorTarget.getHeight()*e);t===this.pickWidth&&n===this.pickHeight||(this.pickWidth=t,this.pickHeight=n,this.webgl.extensions.drawBuffers?(this.objectPickTexture.define(this.pickWidth,this.pickHeight),this.instancePickTexture.define(this.pickWidth,this.pickHeight),this.groupPickTexture.define(this.pickWidth,this.pickHeight),this.depthPickTexture.define(this.pickWidth,this.pickHeight),this.depthRenderbuffer.setSize(this.pickWidth,this.pickHeight)):(this.objectPickTarget.setSize(this.pickWidth,this.pickHeight),this.instancePickTarget.setSize(this.pickWidth,this.pickHeight),this.groupPickTarget.setSize(this.pickWidth,this.pickHeight),this.depthPickTarget.setSize(this.pickWidth,this.pickHeight)))}renderVariant(e,t,n,r,o,i){e.clear(!1),e.update(t,n),e.renderPick(n.primitives,t,o,null,i),r.handle.isEnabled&&e.renderPick(r.handle.scene,t,o,null,i),r.camera.isEnabled&&(r.camera.update(t),e.update(r.camera.camera,r.camera.scene),e.renderPick(r.camera.scene,r.camera.camera,o,null,i))}render(e,t,n,r){this.webgl.extensions.drawBuffers?(this.framebuffer.bind(),this.renderVariant(e,t,n,r,"pick",Xie.None)):(this.objectPickTarget.bind(),this.renderVariant(e,t,n,r,"pick",Xie.Object),this.instancePickTarget.bind(),this.renderVariant(e,t,n,r,"pick",Xie.Instance),this.groupPickTarget.bind(),this.renderVariant(e,t,n,r,"pick",Xie.Group),this.depthPickTarget.bind(),this.renderVariant(e,t,n,r,"depth",Xie.None))}}class sle{setupBuffers(){const e=this.pickWidth*this.pickHeight*4;this.objectBuffer&&this.objectBuffer.length===e||(this.objectBuffer=new Uint8Array(e),this.instanceBuffer=new Uint8Array(e),this.groupBuffer=new Uint8Array(e),this.depthBuffer=new Uint8Array(e))}setViewport(e,t,n,r){Oie.set(this.viewport,e,t,n,r),this.pickRatio=this.pickPass.pickRatio,this.pickX=Math.ceil(e*this.pickRatio),this.pickY=Math.ceil(t*this.pickRatio);const o=Math.floor(n*this.pickRatio),i=Math.floor(r*this.pickRatio);o===this.pickWidth&&i===this.pickHeight||(this.pickWidth=o,this.pickHeight=i,this.halfPickWidth=Math.floor(this.pickWidth/2),this.setupBuffers()),this.spiral=function(e){let t=0,n=0;const r=[0,-1],o=2*e+1,i=o/2,a=[];for(let s=Math.pow(o,2);s>0;--s)-i<t&&t<=i&&-i<n&&n<=i&&a.push([t,n]),(t===n||t<0&&t===-n||t>0&&t===1-n)&&([r[0],r[1]]=[-r[1],r[0]]),t+=r[0],n+=r[1];return a}(Math.round(this.pickRatio*this.pickPadding))}syncBuffers(){fw&&this.webgl.timer.mark("PickHelper.syncBuffers");const{pickX:e,pickY:t,pickWidth:n,pickHeight:r}=this;this.pickPass.bindObject(),this.webgl.readPixels(e,t,n,r,this.objectBuffer),this.pickPass.bindInstance(),this.webgl.readPixels(e,t,n,r,this.instanceBuffer),this.pickPass.bindGroup(),this.webgl.readPixels(e,t,n,r,this.groupBuffer),this.pickPass.bindDepth(),this.webgl.readPixels(e,t,n,r,this.depthBuffer),fw&&this.webgl.timer.markEnd("PickHelper.syncBuffers")}getBufferIdx(e,t){return 4*(t*this.pickWidth+e)}getDepth(e,t){const n=this.getBufferIdx(e,t),r=this.depthBuffer;return function(e,t,n,r){return Kh.set(oW,e/255,t/255,n/255,r/255),Kh.dot(oW,rW)}(r[n],r[n+1],r[n+2],r[n+3])}getId(e,t,n){const r=this.getBufferIdx(e,t);return eW(n[r],n[r+1],n[r+2])}render(e){fw&&this.webgl.timer.mark("PickHelper.render",!0);const{pickX:t,pickY:n,pickWidth:r,pickHeight:o,halfPickWidth:i}=this,{renderer:a,scene:s,helper:l}=this;a.setTransparentBackground(!1),a.setDrawingBufferSize(r,o),a.setPixelRatio(this.pickRatio),tle.is(e)?(a.setViewport(t,n,i,o),this.pickPass.render(a,e.left,s,l),a.setViewport(t+i,n,r-i,o),this.pickPass.render(a,e.right,s,l)):(a.setViewport(t,n,r,o),this.pickPass.render(a,e,s,l)),this.dirty=!1,fw&&this.webgl.timer.markEnd("PickHelper.render")}identifyInternal(e,t,n){const{webgl:r,pickRatio:o}=this;if(r.isContextLost)return;e*=r.pixelRatio,t*=r.pixelRatio,t=this.pickPass.drawingBufferHeight-t;const{viewport:i}=this;if(e<i.x||t<i.y||e>i.x+i.width||t>i.y+i.height)return;this.dirty&&(fw&&this.webgl.timer.mark("PickHelper.identify"),this.render(n),this.syncBuffers(),fw&&this.webgl.timer.markEnd("PickHelper.identify"));const a=e-i.x,s=t-i.y,l=Math.floor(a*o),c=Math.floor(s*o),u=this.getId(l,c,this.objectBuffer);if(-1===u||u===ile)return;const d=this.getId(l,c,this.instanceBuffer);if(-1===d||d===ile)return;const A=this.getId(l,c,this.groupBuffer);if(-1===A||A===ile)return;const f=this.getDepth(l,c),p=qh.create(e,t,f);if(tle.is(n)){const t=Math.floor(i.width/2);e>i.x+t?(p[0]=i.x+2*(a-t),Nie(p,p,i,n.right.inverseProjectionView)):(p[0]=i.x+2*a,Nie(p,p,i,n.left.inverseProjectionView))}else Nie(p,p,i,n.inverseProjectionView);return{id:{objectId:u,instanceId:d,groupId:A},position:p}}identify(e,t,n){for(const r of this.spiral){const o=this.identifyInternal(e+r[0],t+r[1],n);if(o)return o}}constructor(e,t,n,r,o,i){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;this.webgl=e,this.renderer=t,this.scene=n,this.helper=r,this.pickPass=o,this.pickPadding=a,this.dirty=!0,this.viewport=Oie(),this.setViewport(i.x,i.y,i.width,i.height)}}const lle={...MK,tWboitA:ZW("texture","rgba","float","nearest"),tWboitB:ZW("texture","rgba","float","nearest"),uTexSize:JW("v2")},cle=jV("evaluate-wboit",pK,"\nprecision highp float;\n\nuniform sampler2D tWboitA;\nuniform sampler2D tWboitB;\nuniform vec2 uTexSize;\n\nvoid main() {\n    vec2 coords = gl_FragCoord.xy / uTexSize;\n\n    vec4 accum = texture2D(tWboitA, coords);\n    float r = 1.0 - accum.a;\n\n    accum.a = texture2D(tWboitB, coords).r;\n    // divisor needs to allow very small values for nice fading\n    gl_FragColor = vec4(accum.rgb / clamp(accum.a, 0.00000001, 50000.0), r);\n}\n");class ule{get supported(){return this._supported}bind(){const{state:e,gl:t}=this.webgl;this.framebuffer.bind(),e.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),e.disable(t.DEPTH_TEST),e.blendFuncSeparate(t.ONE,t.ONE,t.ZERO,t.ONE_MINUS_SRC_ALPHA),e.enable(t.BLEND)}render(){fw&&this.webgl.timer.mark("WboitPass.render");const{state:e,gl:t}=this.webgl;e.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),e.enable(t.BLEND),this.renderable.update(),this.renderable.render(),fw&&this.webgl.timer.markEnd("WboitPass.render")}setSize(e,t){const[n,r]=this.renderable.values.uTexSize.ref.value;e===n&&t===r||(this.textureA.define(e,t),this.textureB.define(e,t),this.depthRenderbuffer.setSize(e,t),Sp.update(this.renderable.values.uTexSize,Wh.set(this.renderable.values.uTexSize.ref.value,e,t)))}reset(){this._supported&&this._init()}_init(){const{extensions:{drawBuffers:e}}=this.webgl;this.framebuffer.bind(),e.drawBuffers([e.COLOR_ATTACHMENT0,e.COLOR_ATTACHMENT1]),this.textureA.attachFramebuffer(this.framebuffer,"color0"),this.textureB.attachFramebuffer(this.framebuffer,"color1"),this.depthRenderbuffer.attachFramebuffer(this.framebuffer)}static isSupported(e){const{extensions:{drawBuffers:t,textureFloat:n,colorBufferFloat:r,depthTexture:o}}=e;if(n&&r&&o&&t)return!0;if(Aw){const e=[];n||e.push("textureFloat"),r||e.push("colorBufferFloat"),o||e.push("depthTexture"),t||e.push("drawBuffers"),console.log(`Missing "${e.join('", "')}" extensions required for "wboit"`)}return!1}constructor(e,t,n){if(this.webgl=e,this._supported=!1,!ule.isSupported(e))return;const{resources:r,gl:o}=e;this.textureA=r.texture("image-float32","rgba","float","nearest"),this.textureA.define(t,n),this.textureB=r.texture("image-float32","rgba","float","nearest"),this.textureB.define(t,n),this.depthRenderbuffer=Xq(o)?r.renderbuffer("depth32f","depth",t,n):r.renderbuffer("depth16","depth",t,n),this.renderable=function(e,t,n){const r={...RK,tWboitA:Sp.create(t),tWboitB:Sp.create(n),uTexSize:Sp.create(Wh.create(t.getWidth(),t.getHeight()))},o={...lle};return kK(CK(e,"triangles",cle,o,r),r)}(e,this.textureA,this.textureB),this.framebuffer=r.framebuffer(),this._supported=!0,this._init()}}const dle={...MK,tDpoitBackColor:ZW("texture","rgba","float","nearest"),uTexSize:JW("v2")},Ale=jV("blend-back-dpoit",pK,"\n    precision highp float;\n\n    uniform sampler2D tDpoitBackColor;\n    uniform vec2 uTexSize;\n\n    void main() {\n        vec2 coords = gl_FragCoord.xy / uTexSize;\n        gl_FragColor = texture2D(tDpoitBackColor, coords);\n        if (gl_FragColor.a == 0.0) {\n            discard;\n        }\n    }\n");const fle={...MK,tDpoitFrontColor:ZW("texture","rgba","float","nearest"),uTexSize:JW("v2")},ple=jV("evaluate-dpoit",pK,"\nprecision highp float;\n\nuniform sampler2D tDpoitFrontColor;\nuniform vec2 uTexSize;\n\nvoid main() {\n    vec2 coords = gl_FragCoord.xy / uTexSize;\n    gl_FragColor = texture2D(tDpoitFrontColor, coords);\n}\n");class hle{get supported(){return this._supported}bind(){const{state:e,gl:t,extensions:{blendMinMax:n}}=this.webgl;return this.passCount=0,this.depthFramebuffers[0].bind(),e.clearColor(this.DEPTH_CLEAR_VALUE,this.DEPTH_CLEAR_VALUE,0,0),t.clear(t.COLOR_BUFFER_BIT),this.depthFramebuffers[1].bind(),e.clearColor(-this.MIN_DEPTH,this.MAX_DEPTH,0,0),t.clear(t.COLOR_BUFFER_BIT),this.colorFramebuffers[0].bind(),e.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),this.colorFramebuffers[1].bind(),e.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),this.depthFramebuffers[0].bind(),e.blendEquation(n.MAX),e.depthMask(!1),{depth:this.depthTextures[1],frontColor:this.colorFrontTextures[1],backColor:this.colorBackTextures[1]}}bindDualDepthPeeling(){const{state:e,gl:t,extensions:{blendMinMax:n}}=this.webgl;return this.readId=this.passCount%2,this.writeId=1-this.readId,this.passCount+=1,this.depthFramebuffers[this.writeId].bind(),e.clearColor(this.DEPTH_CLEAR_VALUE,this.DEPTH_CLEAR_VALUE,0,0),t.clear(t.COLOR_BUFFER_BIT),this.colorFramebuffers[this.writeId].bind(),e.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),this.depthFramebuffers[this.writeId].bind(),e.blendEquation(n.MAX),e.depthMask(!1),{depth:this.depthTextures[this.readId],frontColor:this.colorFrontTextures[this.readId],backColor:this.colorBackTextures[this.readId]}}renderBlendBack(){fw&&this.webgl.timer.mark("DpoitPass.renderBlendBack");const{state:e,gl:t}=this.webgl;e.blendEquation(t.FUNC_ADD),e.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),Sp.update(this.blendBackRenderable.values.tDpoitBackColor,this.colorBackTextures[this.writeId]),this.blendBackRenderable.update(),this.blendBackRenderable.render(),fw&&this.webgl.timer.markEnd("DpoitPass.renderBlendBack")}render(){fw&&this.webgl.timer.mark("DpoitPass.render");const{state:e,gl:t}=this.webgl;e.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),Sp.update(this.renderable.values.tDpoitFrontColor,this.colorFrontTextures[this.writeId]),this.renderable.update(),this.renderable.render(),fw&&this.webgl.timer.markEnd("DpoitPass.render")}setSize(e,t){const[n,r]=this.renderable.values.uTexSize.ref.value;if(e!==n||t!==r){for(let n=0;n<2;n++)this.depthTextures[n].define(e,t),this.colorFrontTextures[n].define(e,t),this.colorBackTextures[n].define(e,t);Sp.update(this.renderable.values.uTexSize,Wh.set(this.renderable.values.uTexSize.ref.value,e,t)),Sp.update(this.blendBackRenderable.values.uTexSize,Wh.set(this.blendBackRenderable.values.uTexSize.ref.value,e,t))}}reset(){this._supported&&this._init()}_init(){const{extensions:{drawBuffers:e}}=this.webgl;for(let t=0;t<2;t++)this.depthFramebuffers[t].bind(),e.drawBuffers([e.COLOR_ATTACHMENT0,e.COLOR_ATTACHMENT1,e.COLOR_ATTACHMENT2]),this.colorFrontTextures[t].attachFramebuffer(this.depthFramebuffers[t],"color0"),this.colorBackTextures[t].attachFramebuffer(this.depthFramebuffers[t],"color1"),this.depthTextures[t].attachFramebuffer(this.depthFramebuffers[t],"color2"),this.colorFramebuffers[t].bind(),e.drawBuffers([e.COLOR_ATTACHMENT0,e.COLOR_ATTACHMENT1]),this.colorFrontTextures[t].attachFramebuffer(this.colorFramebuffers[t],"color0"),this.colorBackTextures[t].attachFramebuffer(this.colorFramebuffers[t],"color1")}static isSupported(e){const{extensions:{drawBuffers:t,textureFloat:n,colorBufferFloat:r,depthTexture:o,blendMinMax:i}}=e;if(n&&r&&o&&t&&i)return!0;if(Aw){const e=[];n||e.push("textureFloat"),r||e.push("colorBufferFloat"),o||e.push("depthTexture"),t||e.push("drawBuffers"),i||e.push("blendMinMax"),console.log(`Missing "${e.join('", "')}" extensions required for "dpoit"`)}return!1}constructor(e,t,n){if(this.webgl=e,this.DEPTH_CLEAR_VALUE=-99999,this.MAX_DEPTH=1,this.MIN_DEPTH=0,this.passCount=0,this._supported=!1,!hle.isSupported(e))return;const{resources:r,extensions:{colorBufferHalfFloat:o,textureHalfFloat:i}}=e;Xq(e.gl)?(this.depthTextures=[r.texture("image-float32","rg","float","nearest"),r.texture("image-float32","rg","float","nearest")],this.colorFrontTextures=o&&i?[r.texture("image-float16","rgba","fp16","nearest"),r.texture("image-float16","rgba","fp16","nearest")]:[r.texture("image-float32","rgba","float","nearest"),r.texture("image-float32","rgba","float","nearest")],this.colorBackTextures=o&&i?[r.texture("image-float16","rgba","fp16","nearest"),r.texture("image-float16","rgba","fp16","nearest")]:[r.texture("image-float32","rgba","float","nearest"),r.texture("image-float32","rgba","float","nearest")]):(this.depthTextures=[r.texture("image-float32","rgba","float","nearest"),r.texture("image-float32","rgba","float","nearest")],this.colorFrontTextures=[r.texture("image-float32","rgba","float","nearest"),r.texture("image-float32","rgba","float","nearest")],this.colorBackTextures=[r.texture("image-float32","rgba","float","nearest"),r.texture("image-float32","rgba","float","nearest")]),this.depthTextures[0].define(t,n),this.depthTextures[1].define(t,n),this.colorFrontTextures[0].define(t,n),this.colorFrontTextures[1].define(t,n),this.colorBackTextures[0].define(t,n),this.colorBackTextures[1].define(t,n),this.depthFramebuffers=[r.framebuffer(),r.framebuffer()],this.colorFramebuffers=[r.framebuffer(),r.framebuffer()],this.blendBackRenderable=function(e,t){const n={...RK,tDpoitBackColor:Sp.create(t),uTexSize:Sp.create(Wh.create(t.getWidth(),t.getHeight()))},r={...dle};return kK(CK(e,"triangles",Ale,r,n),n)}(e,this.colorBackTextures[0]),this.renderable=function(e,t){const n={...RK,tDpoitFrontColor:Sp.create(t),uTexSize:Sp.create(Wh.create(t.getWidth(),t.getHeight()))},r={...fle};return kK(CK(e,"triangles",ple,r,n),n)}(e,this.colorFrontTextures[0]),this._supported=!0,this._init()}}const gle={enabled:U_.Boolean(!0),highlightEdgeColor:U_.Color(Jp.darken(Jp.fromNormalizedRgb(1,.4,.6),1)),selectEdgeColor:U_.Color(Jp.darken(Jp.fromNormalizedRgb(.2,1,.1),1)),edgeScale:U_.Numeric(1,{min:1,max:3,step:1},{description:"Thickness of the edge."}),highlightEdgeStrength:U_.Numeric(1,{min:0,max:1,step:.1}),selectEdgeStrength:U_.Numeric(1,{min:0,max:1,step:.1}),ghostEdgeStrength:U_.Numeric(.3,{min:0,max:1,step:.1},{description:"Opacity of the hidden edges that are covered by other geometry. When set to 1, one less geometry render pass is done."}),innerEdgeFactor:U_.Numeric(1.5,{min:0,max:3,step:.1},{description:"Factor to multiply the inner edge color with - for added contrast."})};class mle{static isEnabled(e){return e.enabled}constructor(e,t,n){this.webgl=e,this.depthTarget=e.createRenderTarget(t,n),this.maskTarget=e.createRenderTarget(t,n),this.edgesTarget=e.createRenderTarget(t,n),this.edge=function(e,t){const n=t.getWidth(),r=t.getHeight(),o={...RK,tMaskTexture:Sp.create(t),uTexSizeInv:Sp.create(Wh.create(1/n,1/r)),dEdgeScale:Sp.create(1)},i={...yle},a=CK(e,"triangles",vle,i,o);return kK(a,o)}(e,this.maskTarget.texture),this.overlay=function(e,t){const n=t.getWidth(),r=t.getHeight(),o={...RK,tEdgeTexture:Sp.create(t),uTexSizeInv:Sp.create(Wh.create(1/n,1/r)),uHighlightEdgeColor:Sp.create(qh()),uSelectEdgeColor:Sp.create(qh()),uHighlightEdgeStrength:Sp.create(1),uSelectEdgeStrength:Sp.create(1),uGhostEdgeStrength:Sp.create(0),uInnerEdgeFactor:Sp.create(0)},i={...ble},a=CK(e,"triangles",Cle,i,o);return kK(a,o)}(e,this.edgesTarget.texture)}setEdgeState(e){const{gl:t,state:n}=this.webgl;n.enable(t.SCISSOR_TEST),n.enable(t.BLEND),n.blendFunc(t.ONE,t.ONE),n.blendEquation(t.FUNC_ADD),n.disable(t.DEPTH_TEST),n.depthMask(!1);const{x:r,y:o,width:i,height:a}=e;n.viewport(r,o,i,a),n.scissor(r,o,i,a),n.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)}setOverlayState(e){const{gl:t,state:n}=this.webgl;n.enable(t.SCISSOR_TEST),n.enable(t.BLEND),n.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),n.blendEquation(t.FUNC_ADD),n.disable(t.DEPTH_TEST),n.depthMask(!1);const{x:r,y:o,width:i,height:a}=e;n.viewport(r,o,i,a),n.scissor(r,o,i,a)}setSize(e,t){const n=this.depthTarget.getWidth(),r=this.depthTarget.getHeight();e===n&&t===r||(this.depthTarget.setSize(e,t),this.maskTarget.setSize(e,t),this.edgesTarget.setSize(e,t),Sp.update(this.edge.values.uTexSizeInv,Wh.set(this.edge.values.uTexSizeInv.ref.value,1/e,1/t)),Sp.update(this.overlay.values.uTexSizeInv,Wh.set(this.overlay.values.uTexSizeInv.ref.value,1/e,1/t)))}update(e){const{highlightEdgeColor:t,selectEdgeColor:n,edgeScale:r,innerEdgeFactor:o,ghostEdgeStrength:i,highlightEdgeStrength:a,selectEdgeStrength:s}=e,{values:l}=this.edge,c=Math.max(1,Math.round(r*this.webgl.pixelRatio));l.dEdgeScale.ref.value!==c&&(Sp.update(l.dEdgeScale,c),this.edge.update());const{values:u}=this.overlay;Sp.update(u.uHighlightEdgeColor,Jp.toVec3Normalized(u.uHighlightEdgeColor.ref.value,t)),Sp.update(u.uSelectEdgeColor,Jp.toVec3Normalized(u.uSelectEdgeColor.ref.value,n)),Sp.updateIfChanged(u.uInnerEdgeFactor,o),Sp.updateIfChanged(u.uGhostEdgeStrength,i),Sp.updateIfChanged(u.uHighlightEdgeStrength,a),Sp.updateIfChanged(u.uSelectEdgeStrength,s)}render(e,t){fw&&this.webgl.timer.mark("MarkingPass.render"),this.edgesTarget.bind(),this.setEdgeState(e),this.edge.render(),t?t.bind():this.webgl.unbindFramebuffer(),this.setOverlayState(e),this.overlay.render(),fw&&this.webgl.timer.markEnd("MarkingPass.render")}}const yle={...MK,tMaskTexture:ZW("texture","rgba","ubyte","linear"),uTexSizeInv:JW("v2"),dEdgeScale:eK("number")},vle=jV("edge",pK,"\nprecision highp float;\nprecision highp sampler2D;\n\nuniform sampler2D tMaskTexture;\nuniform vec2 uTexSizeInv;\n\nvoid main() {\n    vec2 coords = gl_FragCoord.xy * uTexSizeInv;\n    vec4 offset = vec4(float(dEdgeScale), 0.0, 0.0, float(dEdgeScale)) * vec4(uTexSizeInv, uTexSizeInv);\n    vec4 c0 = texture2D(tMaskTexture, coords);\n    vec4 c1 = texture2D(tMaskTexture, coords + offset.xy);\n    vec4 c2 = texture2D(tMaskTexture, coords - offset.xy);\n    vec4 c3 = texture2D(tMaskTexture, coords + offset.yw);\n    vec4 c4 = texture2D(tMaskTexture, coords - offset.yw);\n    float diff1 = (c1.r - c2.r) * 0.5;\n    float diff2 = (c3.r - c4.r) * 0.5;\n    float d = length(vec2(diff1, diff2));\n    if (d <= 0.0)\n        discard;\n    float a1 = min(c1.g, c2.g);\n    float a2 = min(c3.g, c4.g);\n    float visibility = min(a1, a2) > 0.001 ? 1.0 : 0.0;\n    float mask = c0.r;\n    float marker = min(c1.b, min(c2.b, min(c3.b, c4.b)));\n    float fogAlpha = min(c1.a, min(c2.a, min(c3.a, c4.a)));\n    gl_FragColor = vec4(visibility, mask, marker, fogAlpha);\n}\n");const ble={...MK,tEdgeTexture:ZW("texture","rgba","ubyte","linear"),uTexSizeInv:JW("v2"),uHighlightEdgeColor:JW("v3"),uSelectEdgeColor:JW("v3"),uHighlightEdgeStrength:JW("f"),uSelectEdgeStrength:JW("f"),uGhostEdgeStrength:JW("f"),uInnerEdgeFactor:JW("f")},Cle=jV("overlay",pK,"\nprecision highp float;\nprecision highp sampler2D;\n\nuniform vec2 uTexSizeInv;\nuniform sampler2D tEdgeTexture;\nuniform vec3 uHighlightEdgeColor;\nuniform vec3 uSelectEdgeColor;\nuniform float uHighlightEdgeStrength;\nuniform float uSelectEdgeStrength;\nuniform float uGhostEdgeStrength;\nuniform float uInnerEdgeFactor;\n\nvoid main() {\n    vec2 coords = gl_FragCoord.xy * uTexSizeInv;\n    vec4 edgeValue = texture2D(tEdgeTexture, coords);\n    if (edgeValue.a > 0.0) {\n        vec3 edgeColor = edgeValue.b == 1.0 ? uHighlightEdgeColor : uSelectEdgeColor;\n        gl_FragColor.rgb = edgeValue.g > 0.0 ? edgeColor : edgeColor * uInnerEdgeFactor;\n        gl_FragColor.a = (edgeValue.r == 1.0 ? uGhostEdgeStrength : 1.0) * edgeValue.a;\n        float edgeStrength = edgeValue.b == 1.0 ? uHighlightEdgeStrength : uSelectEdgeStrength;\n        gl_FragColor.a *= edgeStrength;\n    } else {\n        gl_FragColor = vec4(0.0);\n    }\n}\n");class Ile{setTransparency(e){"wboit"===e?(this.transparencyMode=this.wboit.supported?"wboit":"blended",Aw&&!this.wboit.supported&&console.log('Missing "wboit" support, falling back to "blended".')):"dpoit"===e?(this.transparencyMode=this.dpoit.supported?"dpoit":"blended",Aw&&!this.dpoit.supported&&console.log('Missing "dpoit" support, falling back to "blended".')):this.transparencyMode="blended",this.depthTextureOpaque.detachFramebuffer(this.postprocessing.target.framebuffer,"depth")}get transparency(){return this.transparencyMode}constructor(e,t,n,r,o){this.webgl=e,this.transparencyMode="blended";const{extensions:i,resources:a,isWebGL2:s}=e;var l;this.drawTarget=(l=e.gl,{id:Oq(),texture:uY(l),framebuffer:{id:_V(),bind:()=>{},reset:()=>{},destroy:()=>{}},depthRenderbuffer:null,getWidth:()=>0,getHeight:()=>0,bind:()=>{l.bindFramebuffer(l.FRAMEBUFFER,null)},setSize:()=>{},reset:()=>{},destroy:()=>{}}),this.colorTarget=e.createRenderTarget(n,r,!0,"uint8","linear"),this.packedDepth=!i.depthTexture,this.depthTargetTransparent=e.createRenderTarget(n,r),this.depthTextureTransparent=this.depthTargetTransparent.texture,this.depthTargetOpaque=this.packedDepth?e.createRenderTarget(n,r):null,this.depthTextureOpaque=this.depthTargetOpaque?this.depthTargetOpaque.texture:a.texture("image-depth","depth",s?"float":"ushort","nearest"),this.packedDepth||this.depthTextureOpaque.define(n,r),this.wboit=new ule(e,n,r),this.dpoit=new hle(e,n,r),this.marking=new mle(e,n,r),this.postprocessing=new Vse(e,t,this),this.antialiasing=new qse(e,n,r),this.bloom=new hse(e,n,r),this.dof=new dse(e,n,r),this.copyFboTarget=FK(e,this.colorTarget.texture),this.copyFboPostprocessing=FK(e,this.postprocessing.target.texture),this.setTransparency(o)}reset(){this.wboit.reset(),this.dpoit.reset()}setSize(e,t){const n=this.colorTarget.getWidth(),r=this.colorTarget.getHeight();e===n&&t===r||(this.colorTarget.setSize(e,t),this.depthTargetTransparent.setSize(e,t),this.depthTargetOpaque?this.depthTargetOpaque.setSize(e,t):this.depthTextureOpaque.define(e,t),Sp.update(this.copyFboTarget.values.uTexSize,Wh.set(this.copyFboTarget.values.uTexSize.ref.value,e,t)),Sp.update(this.copyFboPostprocessing.values.uTexSize,Wh.set(this.copyFboPostprocessing.values.uTexSize.ref.value,e,t))),this.wboit.supported&&this.wboit.setSize(e,t),this.dpoit.supported&&this.dpoit.setSize(e,t),this.marking.setSize(e,t),this.postprocessing.setSize(e,t),this.antialiasing.setSize(e,t),this.dof.setSize(e,t),this.bloom.setSize(e,t)}_renderDpoit(e,t,n,r,o,i){if(!this.dpoit.supported)throw new Error("expected dpoit to be supported");this.depthTextureOpaque.attachFramebuffer(this.colorTarget.framebuffer,"depth"),e.clear(!0),n.hasOpaque&&e.renderDpoitOpaque(n.primitives,t,null);const a=Vse.isEnabled(i)&&Vse.isTransparentOutlineEnabled(i),s=dse.isEnabled(i);if((a||s)&&(this.depthTargetTransparent.bind(),e.clearDepth(!0),n.opacityAverage<1&&e.renderDepthTransparent(n.primitives,t,this.depthTextureOpaque)),Vse.isEnabled(i)&&this.postprocessing.render(t,!1,o,e.props.backgroundColor,i,e.light),this.depthTextureOpaque.detachFramebuffer(this.colorTarget.framebuffer,"depth"),n.opacityAverage<1){const o=Vse.isEnabled(i)?this.postprocessing.target:this.colorTarget,a=this.dpoit.bind();e.renderDpoitTransparent(n.primitives,t,this.depthTextureOpaque,a);for(let i=0;i<r;i++){fw&&this.webgl.timer.mark("DpoitPass.layer");const r=this.dpoit.bindDualDepthPeeling();e.renderDpoitTransparent(n.primitives,t,this.depthTextureOpaque,r),o.bind(),this.dpoit.renderBlendBack(),fw&&this.webgl.timer.markEnd("DpoitPass.layer")}o.bind(),this.dpoit.render()}n.volumes.renderables.length>0&&e.renderDpoitVolume(n.volumes,t,this.depthTextureOpaque)}_renderWboit(e,t,n,r,o){if(!this.wboit.supported)throw new Error("expected wboit to be supported");this.depthTextureOpaque.attachFramebuffer(this.colorTarget.framebuffer,"depth"),e.clear(!0),n.hasOpaque&&e.renderWboitOpaque(n.primitives,t,null);const i=Vse.isEnabled(o)&&Vse.isTransparentOutlineEnabled(o),a=dse.isEnabled(o);(i||a)&&(this.depthTargetTransparent.bind(),e.clearDepth(!0),n.opacityAverage<1&&e.renderDepthTransparent(n.primitives,t,this.depthTextureOpaque)),Vse.isEnabled(o)&&this.postprocessing.render(t,!1,r,e.props.backgroundColor,o,e.light),(n.opacityAverage<1||n.volumes.renderables.length>0)&&(this.wboit.bind(),n.opacityAverage<1&&e.renderWboitTransparent(n.primitives,t,this.depthTextureOpaque),n.volumes.renderables.length>0&&e.renderWboitTransparent(n.volumes,t,this.depthTextureOpaque),Vse.isEnabled(o)?this.postprocessing.target.bind():this.colorTarget.bind(),this.wboit.render())}_renderBlended(e,t,n,r,o,i){var a,s,l,c;if(r?this.drawTarget.bind():this.packedDepth?this.colorTarget.bind():this.depthTextureOpaque.attachFramebuffer(this.colorTarget.framebuffer,"depth"),e.clear(!0),n.hasOpaque&&e.renderBlendedOpaque(n.primitives,t,null),!r){this.depthTargetOpaque&&(this.depthTargetOpaque.bind(),e.clearDepth(!0),e.renderDepthOpaque(n.primitives,t,null),this.colorTarget.bind());const r=Vse.isEnabled(i)&&Vse.isTransparentOutlineEnabled(i),u=dse.isEnabled(i);if((r||u)&&(this.depthTargetTransparent.bind(),e.clearDepth(!0),n.opacityAverage<1&&e.renderDepthTransparent(n.primitives,t,this.depthTextureOpaque)),Vse.isEnabled(i)&&(this.packedDepth?null===(a=this.colorTarget.depthRenderbuffer)||void 0===a||a.detachFramebuffer(this.postprocessing.target.framebuffer):this.depthTextureOpaque.detachFramebuffer(this.postprocessing.target.framebuffer,"depth"),this.postprocessing.render(t,!1,o,e.props.backgroundColor,i,e.light),this.packedDepth?null===(s=this.colorTarget.depthRenderbuffer)||void 0===s||s.attachFramebuffer(this.postprocessing.target.framebuffer):this.depthTextureOpaque.attachFramebuffer(this.postprocessing.target.framebuffer,"depth")),n.volumes.renderables.length>0){const r=Vse.isEnabled(i)?this.postprocessing.target:this.colorTarget;this.packedDepth?null===(l=this.colorTarget.depthRenderbuffer)||void 0===l||l.detachFramebuffer(r.framebuffer):this.depthTextureOpaque.detachFramebuffer(r.framebuffer,"depth"),r.bind(),e.renderBlendedVolume(n.volumes,t,this.depthTextureOpaque),this.packedDepth?null===(c=this.colorTarget.depthRenderbuffer)||void 0===c||c.attachFramebuffer(r.framebuffer):this.depthTextureOpaque.attachFramebuffer(r.framebuffer,"depth"),r.bind()}}n.opacityAverage<1&&e.renderBlendedTransparent(n.primitives,t,null)}_render(e,t,n,r,o,i,a){var s,l;const c=n.volumes.renderables.length>0,u=Vse.isEnabled(a.postprocessing),d=qse.isEnabled(a.postprocessing),A=mle.isEnabled(a.marking),f=dse.isEnabled(a.postprocessing),{x:p,y:h,width:g,height:m}=t.viewport;e.setViewport(p,h,g,m),e.update(t,n),i&&!d&&o&&(this.drawTarget.bind(),e.clear(!1));let y=!1;"wboit"===this.transparencyMode&&this.wboit.supported?(this._renderWboit(e,t,n,i,a.postprocessing),y=!0):"dpoit"===this.transparencyMode&&this.dpoit.supported?(this._renderDpoit(e,t,n,a.dpoitIterations,i,a.postprocessing),y=!0):this._renderBlended(e,t,n,!c&&!u&&!d&&o,i,a.postprocessing);const v=u?this.postprocessing.target:!o||c||y?this.colorTarget:this.drawTarget;if(A&&n.markerAverage>0){const r=a.marking.ghostEdgeStrength<1;r&&1!==n.markerAverage&&(this.marking.depthTarget.bind(),e.clear(!1,!0),e.renderMarkingDepth(n.primitives,t,null)),this.marking.maskTarget.bind(),e.clear(!1,!0),e.renderMarkingMask(n.primitives,t,r?this.marking.depthTarget.texture:null),this.marking.update(a.marking),this.marking.render(t.viewport,v)}else v.bind();r.debug.isEnabled&&(r.debug.syncVisibility(),e.renderBlended(r.debug.scene,t)),r.handle.isEnabled&&e.renderBlended(r.handle.scene,t),r.camera.isEnabled&&(r.camera.update(t),e.update(r.camera.camera,r.camera.scene),e.renderBlended(r.camera.scene,r.camera.camera));let b=!1;if(d){const e=Vse.isEnabled(a.postprocessing)?this.postprocessing.target.texture:this.colorTarget.texture;this.antialiasing.render(t,e,o&&!f,a.postprocessing)}else o&&!dse.isEnabled(a.postprocessing)&&(b=!0);if("on"===a.postprocessing.dof.name){const e=qse.isEnabled(a.postprocessing)?this.antialiasing.target.texture:Vse.isEnabled(a.postprocessing)?this.postprocessing.target.texture:this.colorTarget.texture;this.dof.update(t,e,(null===(s=this.depthTargetOpaque)||void 0===s?void 0:s.texture)||this.depthTextureOpaque,this.depthTextureTransparent,a.postprocessing.dof.params,n.boundingSphereVisible),this.dof.render(t.viewport,o?void 0:this.getColorTarget(a.postprocessing))}else o&&!qse.isEnabled(a.postprocessing)&&(b=!0);if(b&&(this.drawTarget.bind(),this.webgl.state.disable(this.webgl.gl.DEPTH_TEST),u?this.copyFboPostprocessing.render():(c||y)&&this.copyFboTarget.render()),"on"===a.postprocessing.bloom.name){const r="emissive"===a.postprocessing.bloom.params.mode;r&&n.emissiveAverage>0&&(this.bloom.emissiveTarget.bind(),e.clear(!1,!0),e.update(t,n),e.renderEmissive(n.primitives,t,null)),(!r||n.emissiveAverage>0)&&(this.bloom.update(this.colorTarget.texture,this.bloom.emissiveTarget.texture,(null===(l=this.depthTargetOpaque)||void 0===l?void 0:l.texture)||this.depthTextureOpaque,a.postprocessing.bloom.params),this.bloom.render(t.viewport,o?void 0:this.getColorTarget(a.postprocessing)))}this.webgl.gl.flush()}render(e,t,n){fw&&this.webgl.timer.mark("DrawPass.render");const{renderer:r,camera:o,scene:i,helper:a}=e;this.postprocessing.setTransparentBackground(t.transparentBackground);const s=t.transparentBackground||this.postprocessing.background.isEnabled(t.postprocessing.background);r.setTransparentBackground(s),r.setDrawingBufferSize(this.colorTarget.getWidth(),this.colorTarget.getHeight()),r.setPixelRatio(this.webgl.pixelRatio),tle.is(o)?(fw&&this.webgl.timer.mark("StereoCamera.left"),this._render(r,o.left,i,a,n,s,t),fw&&this.webgl.timer.markEnd("StereoCamera.left"),fw&&this.webgl.timer.mark("StereoCamera.right"),this._render(r,o.right,i,a,n,s,t),fw&&this.webgl.timer.markEnd("StereoCamera.right")):this._render(r,o,i,a,n,s,t),fw&&this.webgl.timer.markEnd("DrawPass.render")}getColorTarget(e){return dse.isEnabled(e)?this.dof.target:qse.isEnabled(e)?this.antialiasing.target:Vse.isEnabled(e)?this.postprocessing.target:this.colorTarget}}const Ele={alpha:U_.Numeric(.51,{min:0,max:1,step:.01},{isEssential:!0,label:"Opacity"}),colorX:U_.Color(bk.red,{isEssential:!0}),colorY:U_.Color(bk.green,{isEssential:!0}),colorZ:U_.Color(bk.blue,{isEssential:!0}),scale:U_.Numeric(.33,{min:.1,max:2,step:.1},{isEssential:!0}),location:U_.Select("bottom-left",U_.arrayToOptions(["bottom-left","bottom-right","top-left","top-right"])),locationOffsetX:U_.Numeric(0),locationOffsetY:U_.Numeric(0),originColor:U_.Color(bk.grey),radiusScale:U_.Numeric(.075,{min:.01,max:.3,step:.001}),showPlanes:U_.Boolean(!0),planeColorXY:U_.Color(bk.grey,{label:"Plane Color XY"}),planeColorXZ:U_.Color(bk.grey,{label:"Plane Color XZ"}),planeColorYZ:U_.Color(bk.grey,{label:"Plane Color YZ"}),showLabels:U_.Boolean(!1),labelX:U_.Text("X"),labelY:U_.Text("Y"),labelZ:U_.Text("Z"),labelColorX:U_.Color(bk.grey),labelColorY:U_.Color(bk.grey),labelColorZ:U_.Color(bk.grey),labelOpacity:U_.Numeric(1,{min:0,max:1,step:.01}),labelScale:U_.Numeric(.25,{min:.1,max:1,step:.01})},xle={axes:U_.MappedStatic("on",{on:U_.Group(Ele),off:U_.Group({})},{cycle:!0,description:"Show camera orientation axes"})};class Ble{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.webgl=e,this.props={axes:{name:"off",params:{}}},this.pixelRatio=1,this.eachGroup=(e,t)=>{if(!_le(e))return!1;let n=!1;if(this.meshRenderObject){const r=this.meshRenderObject.values.uGroupCount.ref.value;for(const{groupId:o,instanceId:i}of e.elements){const e=i*r+o;t(Gg.ofSingleton(e))&&(n=!0)}}if(this.textRenderObject){const r=this.textRenderObject.values.uGroupCount.ref.value;for(const{groupId:o,instanceId:i}of e.elements){const e=i*r+o;t(Gg.ofSingleton(e))&&(n=!0)}}return n},this.scene=hae.create(e,"blended"),this.camera=new bae,qh.set(this.camera.up,0,1,0),qh.set(this.camera.target,0,0,0),this.setProps(t)}setProps(e){this.props=YD(this.props,(t=>{if(void 0!==e.axes&&(t.axes.name=e.axes.name,"on"===e.axes.name)){this.scene.clear(),this.pixelRatio=this.webgl.pixelRatio;const n={...e.axes.params,scale:e.axes.params.scale*this.pixelRatio,labelScale:e.axes.params.labelScale*this.pixelRatio};this.meshRenderObject=function(e){const t=function(e,t){const n=100*e.scale,r=function(e,t){const n=ZX.createState(512,256,t),r=100*e.scale,o=e.radiusScale*r,i=e.showLabels?100*e.labelScale/3:0,a=qh.scale(qh(),qh.unitX,r-i),s=qh.scale(qh(),qh.unitY,r-i),l=qh.scale(qh(),qh.unitZ,r-i),c={radiusTop:o,radiusBottom:o,radialSegments:32};if(n.currentGroup=wle.Origin,aX(n,qh.origin,o,2),n.currentGroup=wle.X,aX(n,a,o,2),PX(n,qh.origin,a,1,c),n.currentGroup=wle.Y,aX(n,s,o,2),PX(n,qh.origin,s,1,c),n.currentGroup=wle.Z,aX(n,l,o,2),PX(n,qh.origin,l,1,c),e.showPlanes){qh.scale(a,a,.5),qh.scale(s,s,.5),qh.scale(l,l,.5),n.currentGroup=wle.XY,ZX.addTriangle(n,qh.origin,a,s),ZX.addTriangle(n,qh.origin,s,a);const e=qh.add(qh(),a,s);ZX.addTriangle(n,e,a,s),ZX.addTriangle(n,e,s,a),n.currentGroup=wle.XZ,ZX.addTriangle(n,qh.origin,a,l),ZX.addTriangle(n,qh.origin,l,a);const t=qh.add(qh(),a,l);ZX.addTriangle(n,t,a,l),ZX.addTriangle(n,t,l,a),n.currentGroup=wle.YZ,ZX.addTriangle(n,qh.origin,s,l),ZX.addTriangle(n,qh.origin,l,s);const r=qh.add(qh(),s,l);ZX.addTriangle(n,r,s,l),ZX.addTriangle(n,r,l,s)}return ZX.getMesh(n)}(e,null===t||void 0===t?void 0:t.geometry);r.setBoundingSphere(YT.create(qh.create(n/2,n/2,n/2),n+n/4));const o=t=>{switch(t){case wle.X:return e.colorX;case wle.Y:return e.colorY;case wle.Z:return e.colorZ;case wle.XY:return e.planeColorXY;case wle.XZ:return e.planeColorXZ;case wle.YZ:return e.planeColorYZ;case wle.Origin:return e.originColor;default:return bk.grey}};return dJ.create("axes-mesh",{},r,o,(()=>1),(()=>""))}(e);return dJ.createRenderObject(t,{...U_.getDefaultValues(RY.Params),...e,ignoreLight:!0,cellSize:0})}(n),this.scene.add(this.meshRenderObject),e.axes.params.showLabels?(this.textRenderObject=function(e){const t=function(e,t){const n=100*e.scale,r=function(e,t){const n=W6.create(e,8,8,t),r=100*e.scale,o=qh.scale(qh(),qh.unitX,r),i=qh.scale(qh(),qh.unitY,r),a=qh.scale(qh(),qh.unitZ,r),s=100*e.labelScale;return n.add(e.labelX,o[0],o[1],o[2],0,s,wle.X),n.add(e.labelY,i[0],i[1],i[2],0,s,wle.Y),n.add(e.labelZ,a[0],a[1],a[2],0,s,wle.Z),n.getText()}(e,null===t||void 0===t?void 0:t.geometry);r.setBoundingSphere(YT.create(qh.create(n/2,n/2,n/2),n));const o=t=>{switch(t){case wle.X:return e.labelColorX;case wle.Y:return e.labelColorY;case wle.Z:return e.labelColorZ;default:return bk.grey}};return dJ.create("axes-text",{},r,o,(()=>1),(()=>""))}(e);return dJ.createRenderObject(t,{...U_.getDefaultValues(yW.Params),...e,alpha:e.labelOpacity,cellSize:0})}(n),this.scene.add(this.textRenderObject)):this.textRenderObject=void 0,this.scene.commit(),qh.set(this.camera.position,0,0,200*n.scale),Yh.lookAt(this.camera.view,this.camera.position,this.camera.target,this.camera.up),t.axes.params={...e.axes.params}}}))}get isEnabled(){return"on"===this.props.axes.name}getLoci(e){const{objectId:t,groupId:n,instanceId:r}=e;return(this.meshRenderObject&&t===this.meshRenderObject.id||this.textRenderObject&&t===this.textRenderObject.id)&&n!==wle.None?function(e,t,n){return k5("camera-axes",e,[{groupId:t,instanceId:n}],void 0,(()=>function(e,t){const n=t.props.axes,r="on"===n.name?n.params.labelX:"X",o="on"===n.name?n.params.labelY:"Y",i="on"===n.name?n.params.labelZ:"Z";switch(e){case wle.X:return`${r} Axis`;case wle.Y:return`${o} Axis`;case wle.Z:return`${i} Axis`;case wle.XY:return`${r}${o} Plane`;case wle.XZ:return`${r}${i} Plane`;case wle.YZ:return`${o}${i} Plane`;case wle.Origin:return"Origin";default:return"Axes"}}(t,e)))}(this,n,r):S5}mark(e,t){if(!C5.is(C5.Highlighting,t))return!1;if(!_5(e)){if(!_le(e))return!1;if(e.data!==this)return!1}return A6.mark(this.meshRenderObject,e,t,this.eachGroup)||A6.mark(this.textRenderObject,e,t,this.eachGroup)}update(e){if(!this.meshRenderObject||"off"===this.props.axes.name)return;this.pixelRatio!==this.webgl.pixelRatio&&this.setProps(this.props),function(e,t,n){const{near:r,far:o}=e,i=-t.width/2,a=t.width/2,s=t.height/2,l=-t.height/2,c=(a-i)/2,u=(s-l)/2,d=(a+i)/2,A=(s+l)/2;let f=d-c,p=d+c,h=A+u,g=A-u;if(n.enabled){const e=(a-i)/n.width,t=(s-l)/n.height;f+=e*n.offsetX,p=f+e*n.width,h-=t*n.offsetY,g=h-t*n.height}Yh.ortho(e.projection,f,p,h,g,r,o)}(this.camera,e.viewport,e.viewOffset),Yh.extractRotation(this.scene.view,e.view);const t=this.textRenderObject?this.textRenderObject.values.boundingSphere.ref.value.radius:this.meshRenderObject.values.boundingSphere.ref.value.radius,n=this.props.axes.params.location,r=this.props.axes.params.locationOffsetX*this.pixelRatio,o=this.props.axes.params.locationOffsetY*this.pixelRatio;"bottom-left"===n?Yh.setTranslation(this.scene.view,qh.create(-e.viewport.width/2+t+r,-e.viewport.height/2+t+o,0)):"bottom-right"===n?Yh.setTranslation(this.scene.view,qh.create(e.viewport.width/2-t-r,-e.viewport.height/2+t+o,0)):"top-left"===n?Yh.setTranslation(this.scene.view,qh.create(-e.viewport.width/2+t+r,e.viewport.height/2-t-o,0)):"top-right"===n?Yh.setTranslation(this.scene.view,qh.create(e.viewport.width/2-t-r,e.viewport.height/2-t-o,0)):Zh()}}var wle;function _le(e){return"data-loci"===e.kind&&"camera-axes"===e.tag}!function(e){e[e.None=0]="None",e[e.X=1]="X",e[e.Y=2]="Y",e[e.Z=3]="Z",e[e.XY=4]="XY",e[e.XZ=5]="XZ",e[e.YZ=6]="YZ",e[e.Origin=7]="Origin"}(wle||(wle={}));const Sle={transparentBackground:U_.Boolean(!1),dpoitIterations:U_.Numeric(2,{min:1,max:10,step:1}),multiSample:U_.Group(Wse),postprocessing:U_.Group(Hse),marking:U_.Group(gle),cameraHelper:U_.Group(xle)};class Dle{get colorTarget(){return this._colorTarget}get width(){return this._width}get height(){return this._height}constructor(e,t,n,r,o,i,a,s){this.webgl=e,this.renderer=n,this.scene=r,this.camera=o,this._width=0,this._height=0,this._camera=new bae,this.props={...U_.getDefaultValues(Sle),...s},this.drawPass=new Ile(e,t,128,128,a),this.multiSamplePass=new Kse(e,this.drawPass),this.multiSampleHelper=new Zse(this.multiSamplePass),this.helper={camera:new Ble(e,this.props.cameraHelper),debug:i.debug,handle:i.handle},this.setSize(1024,768)}updateBackground(){return new Promise((e=>{this.drawPass.postprocessing.background.update(this.camera,this.props.postprocessing.background,(()=>{e()}))}))}setSize(e,t){e===this._width&&t===this._height||(this._width=e,this._height=t,this.drawPass.setSize(e,t),this.multiSamplePass.syncSize())}setProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.props,e),e.cameraHelper&&this.helper.camera.setProps(e.cameraHelper)}render(){bae.copySnapshot(this._camera.state,this.camera.state),Oie.set(this._camera.viewport,0,0,this._width,this._height),this._camera.update();const e={renderer:this.renderer,camera:this._camera,scene:this.scene,helper:this.helper};Kse.isEnabled(this.props.multiSample)?(this.multiSampleHelper.render(e,this.props,!1),this._colorTarget=this.multiSamplePass.colorTarget):(this.drawPass.render(e,this.props,!1),this._colorTarget=this.drawPass.getColorTarget(this.props.postprocessing))}getImageData(e,t,n){var r,o;this.setSize(e,t),this.render(),this.colorTarget.bind();const i=null!==(r=null===n||void 0===n?void 0:n.width)&&void 0!==r?r:e,a=null!==(o=null===n||void 0===n?void 0:n.height)&&void 0!==o?o:t,s=new Uint8Array(i*a*4);n?this.webgl.readPixels(n.x,t-n.y-n.height,i,a,s):this.webgl.readPixels(0,0,i,a,s);const l=kV.create(s,i,a);return kV.flipY(l),kV.divideByAlpha(l),new ImageData(new Uint8ClampedArray(s),i,a)}}const Tle={...RY.Params,alpha:{...RY.Params.alpha,defaultValue:1},ignoreLight:{...RY.Params.ignoreLight,defaultValue:!0},colorX:U_.Color(bk.red,{isEssential:!0}),colorY:U_.Color(bk.green,{isEssential:!0}),colorZ:U_.Color(bk.blue,{isEssential:!0}),scale:U_.Numeric(.33,{min:.1,max:2,step:.1},{isEssential:!0})},kle={handle:U_.MappedStatic("off",{on:U_.Group(Tle),off:U_.Group({})},{cycle:!0,description:"Show handle tool"})};class Qle{getBoundingSphere(e,t){return this.renderObject&&(YT.copy(e,this.renderObject.values.invariantBoundingSphere.ref.value),Yh.fromArray(this._transform,this.renderObject.values.aTransform.ref.value,16*t),YT.transform(e,e,this._transform)),e}setProps(e){this.props=YD(this.props,(t=>{if(void 0!==e.handle&&(t.handle.name=e.handle.name,"on"===e.handle.name)){this.scene.clear(),this.pixelRatio=this.webgl.pixelRatio;const n={...e.handle.params,scale:e.handle.params.scale*this.webgl.pixelRatio,cellSize:0};this.renderObject=function(e){const t=function(e,t){const n=10*e.scale,r=function(e,t){const n=ZX.createState(512,256,t),r=.05*e,o=qh.scale(qh(),qh.unitX,e),i=qh.scale(qh(),qh.unitY,e),a=qh.scale(qh(),qh.unitZ,e),s={radiusTop:r,radiusBottom:r,radialSegments:32};return n.currentGroup=Mle.TranslateScreenXY,aX(n,qh.origin,3*r,2),n.currentGroup=Mle.TranslateObjectX,aX(n,o,r,2),PX(n,qh.origin,o,1,s),n.currentGroup=Mle.TranslateObjectY,aX(n,i,r,2),PX(n,qh.origin,i,1,s),n.currentGroup=Mle.TranslateObjectZ,aX(n,a,r,2),PX(n,qh.origin,a,1,s),ZX.getMesh(n)}(n,null===t||void 0===t?void 0:t.geometry);r.setBoundingSphere(YT.create(qh.create(n/2,n/2,n/2),n+n/4));const o=t=>{switch(t){case Mle.TranslateObjectX:return e.colorX;case Mle.TranslateObjectY:return e.colorY;case Mle.TranslateObjectZ:return e.colorZ;default:return bk.grey}};return dJ.create("handle",{},r,o,(()=>1),(()=>""))}(e);return dJ.createRenderObject(t,e)}(n),this.scene.add(this.renderObject),this.scene.commit(),t.handle.params={...e.handle.params}}}))}get isEnabled(){return"on"===this.props.handle.name}update(e,t,n){this.renderObject&&(this.pixelRatio!==this.webgl.pixelRatio&&this.setProps(this.props),Yh.setTranslation(this.renderObject.values.aTransform.ref.value,t),Yh.fromMat3(this.renderObject.values.aTransform.ref.value,n),Sp.update(this.renderObject.values.aTransform,this.renderObject.values.aTransform.ref.value),this.scene.update([this.renderObject],!0))}getLoci(e){const{objectId:t,groupId:n,instanceId:r}=e;return this.renderObject&&t===this.renderObject.id?function(e,t,n){return k5("handle",e,[{groupId:t,instanceId:n}],(t=>e.getBoundingSphere(t,n)),(()=>`Handle Helper | Group Id ${t} | Instance Id ${n}`))}(this,n,r):S5}mark(e,t){if(!C5.is(C5.Highlighting,t))return!1;if(!_5(e)){if(!Rle(e))return!1;if(e.data!==this)return!1}return A6.mark(this.renderObject,e,t,this.eachGroup)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.webgl=e,this.props={handle:{name:"off",params:{}}},this.pixelRatio=1,this._transform=Yh(),this.eachGroup=(e,t)=>{if(!this.renderObject)return!1;if(!Rle(e))return!1;let n=!1;const r=this.renderObject.values.uGroupCount.ref.value,{elements:o}=e;for(const{groupId:i,instanceId:a}of o){const e=a*r+i;t(Gg.ofSingleton(e))&&(n=!0)}return n},this.scene=hae.create(e,"blended"),this.setProps(t)}}const Mle={None:0,TranslateScreenXY:1,TranslateObjectX:3,TranslateObjectY:4,TranslateObjectZ:5};function Rle(e){return"data-loci"===e.kind&&"handle"===e.tag}const Ple={debug:U_.Group(Cae),camera:U_.Group({helper:U_.Group(xle)}),handle:U_.Group(kle)},Ole=U_.getDefaultValues(Ple);class Fle{constructor(e,t){const n={...Ole,...arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}};this.debug=new Iae(e,t,n.debug),this.camera=new Ble(e,n.camera.helper),this.handle=new Qle(e,n.handle)}}class Nle{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.webgl=e;const{gl:r}=e;this.draw=new Ile(e,t,r.drawingBufferWidth,r.drawingBufferHeight,n.transparency||"blended"),this.pick=new ale(e,this.draw,n.pickScale||.25),this.multiSample=new Kse(e,this.draw)}setPickScale(e){this.pick.setPickScale(e)}setTransparency(e){this.draw.setTransparency(e)}updateSize(){const{gl:e}=this.webgl,t=Math.max(e.drawingBufferWidth,2),n=Math.max(e.drawingBufferHeight,2);this.draw.setSize(t,n),this.pick.syncSize(),this.multiSample.syncSize()}}const Lle={...MK,tPreviousLevel:ZW("texture","alpha","float","nearest"),uInvSize:JW("v2"),uOffset:JW("v2")},Ule=jV("hi-z",pK,"\nprecision highp float;\nprecision highp sampler2D;\n\nuniform sampler2D tPreviousLevel;\nuniform vec2 uInvSize;\nuniform vec2 uOffset;\n\nvoid main(void) {\n    vec2 position = gl_FragCoord.xy * uInvSize + uOffset;\n\n    float x = texture(tPreviousLevel, position).r;\n    float y = textureOffset(tPreviousLevel, position, ivec2(-1, 0)).r;\n    float z = textureOffset(tPreviousLevel, position, ivec2(-1, -1)).r;\n    float w = textureOffset(tPreviousLevel, position, ivec2(0, -1)).r;\n\n    gl_FragColor = vec4(max(max(x, y), max(z, w)));\n}\n");const Gle=new ArrayBuffer(4);new Int32Array(Gle),new Float32Array(Gle);const jle=new ArrayBuffer(4),zle=new Int32Array(jle),Hle=new Float32Array(jle);function Vle(e){return function(e){const t=e<-126?-126:e;return zle[0]=(1<<23)*(t+126.94269504),Hle[0]}(1.44269504*e)}const qle=new ArrayBuffer(8);new Int32Array(qle),new Float32Array(qle);const Yle=new ArrayBuffer(4),Xle=new Int32Array(Yle),Wle=new Float32Array(Yle);function Kle(e){Wle[0]=e;return 1.1920928955078125e-7*Xle[0]-126.94269504}Math.PI,Math.PI,Math.PI,Math.PI,Math.PI,Math.PI,Math.PI,Math.PI,Math.PI;const Jle=new ArrayBuffer(16);new Int32Array(Jle),new Float32Array(Jle);const Zle=new ArrayBuffer(8);new Int32Array(Zle),new Float32Array(Zle);const $le=new ArrayBuffer(4);new Int32Array($le),new Float32Array($le);Math.PI;const ece=qh.transformMat4,tce=Kh.set,nce=Kle;function rce(e,t,n,r){return-1===r[11]?function(e,t,n){return t*n/((n-t)*e-n)}(e,t,n):function(e,t,n){return e*(t-n)-t}(e,t,n)}function oce(e,t,n,r){return-1===r[11]?function(e,t,n,r){const o=t[0]*n,i=t[1]*n,a=t[2]*n,s=t[2]*t[2]-n*n,l=Math.sqrt(t[0]*t[0]+s),c=(l*t[0]-a)/(l*t[2]+o)*r[0],u=(l*t[0]+a)/(l*t[2]-o)*r[0],d=Math.sqrt(t[1]*t[1]+s),A=(d*t[1]-a)/(d*t[2]+i)*r[5],f=(d*t[1]+a)/(d*t[2]-i)*r[5];return tce(e,-.5*u+.5,.5*A+.5,-.5*c+.5,.5*f+.5)}(e,t,n,r):function(e,t,n,r){const o=r[0],i=r[5],a=(t[0]+n)*o,s=(t[0]-n)*o,l=(t[1]+n)*i,c=(t[1]-n)*i;return tce(e,.5*s+.5,-.5*l+.5,.5*a+.5,-.5*c+.5)}(e,t,n,r)}const ice={enabled:U_.Boolean(!1,{description:"Hierarchical Z-buffer occlusion culling. Only available for WebGL2."}),maxFrameLag:U_.Numeric(10,{min:1,max:30,step:1},{description:"Maximum number of frames to wait for Z-buffer data."}),minLevel:U_.Numeric(3,{min:1,max:10,step:1})};class ace{clear(){if(!this.supported)return;const{gl:e}=this.webgl;Xq(e)&&(null!==this.sync&&(e.deleteSync(this.sync),this.sync=null),this.frameLag=0,this.ready=!1,this.debug&&(this.debug.rect.style.display="none",this.debug.container.style.display="none"))}render(e){if(!this.supported||!this.props.enabled)return;const{gl:t,state:n}=this.webgl;if(!Xq(t)||null!==this.sync)return;this.nextNear=e.near,this.nextFar=e.far,Yh.copy(this.nextView,e.view),Yh.copy(this.nextProjection,e.projection),fw&&this.webgl.timer.mark("hi-Z"),n.disable(t.CULL_FACE),n.disable(t.BLEND),n.disable(t.DEPTH_TEST),n.disable(t.SCISSOR_TEST),n.depthMask(!1),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0);const r=this.renderable.values,o=Math.pow(2,Math.ceil(Math.log(Math.max(t.drawingBufferWidth,t.drawingBufferHeight))/Math.log(2))-1);for(let s=0,l=this.levelData.length;s<l;++s){const e=this.levelData[s];e.framebuffer.bind(),s>0?(Sp.update(r.uInvSize,e.invSize),Sp.update(r.uOffset,Wh.set(r.uOffset.ref.value,0,0)),Sp.update(r.tPreviousLevel,this.levelData[s-1].texture)):(Sp.update(r.uInvSize,Wh.set(r.uInvSize.ref.value,1/o,1/o)),Sp.update(r.uOffset,Wh.set(r.uOffset.ref.value,this.viewport.x/t.drawingBufferWidth,this.viewport.y/t.drawingBufferHeight)),Sp.update(r.tPreviousLevel,this.drawPass.depthTextureOpaque)),n.currentRenderItemId=-1,n.viewport(0,0,e.size[0],e.size[1]),t.clear(t.COLOR_BUFFER_BIT),this.renderable.update(),this.renderable.render(),s>=this.props.minLevel&&(this.tex.bind(0),t.copyTexSubImage2D(t.TEXTURE_2D,0,e.offset,0,0,0,e.size[0],e.size[1]),this.tex.unbind(0))}this.tex.attachFramebuffer(this.fb,0);const i=this.tex.getWidth(),a=this.tex.getHeight();t.bindBuffer(t.PIXEL_PACK_BUFFER,this.buf),t.bufferData(t.PIXEL_PACK_BUFFER,this.buffer.byteLength,t.STREAM_READ),t.readPixels(0,0,i,a,t.RED,t.FLOAT,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),this.sync=t.fenceSync(t.SYNC_GPU_COMMANDS_COMPLETE,0),t.flush(),fw&&this.webgl.timer.markEnd("hi-Z")}tick(){if(!this.supported||!this.props.enabled||null===this.sync)return;const{gl:e}=this.webgl;if(!Xq(e))return;const t=e.clientWaitSync(this.sync,0,0);t===e.WAIT_FAILED||this.frameLag>=this.props.maxFrameLag?(e.deleteSync(this.sync),this.sync=null,this.frameLag=0,this.ready=!1):t===e.TIMEOUT_EXPIRED?this.frameLag+=1:(e.bindBuffer(e.PIXEL_PACK_BUFFER,this.buf),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,this.buffer),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),e.deleteSync(this.sync),this.sync=null,this.frameLag=0,this.ready=!0,this.near=this.nextNear,this.far=this.nextFar,Yh.copy(this.view,this.nextView),Yh.copy(this.projection,this.nextProjection))}transform(e){const{view:t,vp:n}=this;ece(n,e.center,t);return{vp:n,r:1.2*e.radius+1.52}}project(e,t){const{projection:n,aabb:r,viewport:o}=this;oce(r,e,t,n);const i=r[2]-r[0],a=r[3]-r[1],s=Math.max(i*o.width,a*o.height);return{aabb:r,w:i,h:a,pr:s,lod:Math.ceil(nce(s/2))}}setViewport(e,t,n,r){if(!this.supported)return;n=Math.max(n,2),r=Math.max(r,2),Oie.set(this.viewport,e,t,n,r);const o=Math.ceil(Math.log(Math.max(n,r))/Math.log(2));if(o===this.levelData.length)return;const{minLevel:i}=this.props;this.buffer=new Float32Array(Math.pow(2,o-i)*Math.pow(2,o-1-i)),this.tex.define(Math.pow(2,o-i),Math.pow(2,o-1-i));for(const s of this.levelData)s.framebuffer.destroy(),s.texture.destroy();this.levelData.length=0;for(let s=0;s<o;++s){const e=this.webgl.resources.framebuffer(),t=Math.pow(2,o-s-1),n=Wh.create(t,t),r=Wh.create(1/t,1/t),i=this.webgl.resources.texture("image-float32","alpha","float","nearest");i.define(t,t),i.attachFramebuffer(e,0),this.levelData.push({texture:i,framebuffer:e,size:n,invSize:r,offset:0})}let a=0;for(let s=0,l=o;s<l;++s){const e=this.levelData[s];s>=i&&(this.levelData[s].offset=a,a+=e.size[0])}this.clear()}setProps(e){if(this.supported)if(this.props.minLevel!==e.minLevel){Object.assign(this.props,e);const{x:t,y:n,width:r,height:o}=this.viewport;this.setViewport(t,n,r,o)}else Object.assign(this.props,e),this.props.enabled||this.clear()}initDebug(e){if(!e.parentElement)return;const t=document.createElement("div");Object.assign(t.style,{display:"block",position:"absolute",pointerEvents:"none"}),e.parentElement.appendChild(t);const n=document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("Could not create canvas 2d context");Object.assign(n.style,{width:"100%",height:"100%",imageRendering:"pixelated",position:"relative",pointerEvents:"none"}),t.appendChild(n);const o=document.createElement("div");Object.assign(o.style,{display:"none",position:"absolute",pointerEvents:"none"}),e.parentElement.appendChild(o),this.debug={container:t,canvas:n,ctx:r,rect:o}}canDebug(e){return this.supported&&this.props.enabled&&this.ready&&!!this.debug}showRect(e,t){if(!this.canDebug(this.debug))return;const{gl:{drawingBufferHeight:n},pixelRatio:r}=this.webgl,{viewport:{x:o,y:i,width:a,height:s}}=this,l=(e[0]*a+o)/r,c=(e[1]*s-i)/r,u=(e[2]*a+o)/r,d=(e[3]*s-i)/r,A=(n-s)/r;Object.assign(this.debug.rect.style,{border:t?"solid red":"solid green",display:"block",left:`${l}px`,top:`${c+A}px`,width:u-l+"px",height:d-c+"px"})}showBuffer(e){if(!this.canDebug(this.debug))return;if(e>=this.levelData.length||e<this.props.minLevel)return void(this.debug.container.style.display="none");const{offset:t,size:[n,r]}=this.levelData[e],o=this.tex.getWidth(),i=new Uint8ClampedArray(n*r*4);i.fill(255);for(let A=0;A<r;++A)for(let e=0;e<n;++e){const a=(r-A-1)*n+e,s=255*this.buffer[A*o+e+t];i[4*a+0]=s,i[4*a+3]=255-s}const a=new ImageData(i,n,r);this.debug.canvas.width=a.width,this.debug.canvas.height=a.height,this.debug.ctx.putImageData(a,0,0);const{viewport:{x:s,y:l,width:c,height:u},webgl:{pixelRatio:d}}=this;Object.assign(this.debug.container.style,{display:"block",bottom:l/d+"px",left:s/d+"px",width:c/d+"px",height:u/d+"px"})}debugOcclusion(e){if(!this.canDebug(this.debug))return;if(!e)return this.debug.rect.style.display="none",void(this.debug.container.style.display="none");const t=this.isOccluded(e),{vp:n,r:r}=this.transform(e),{aabb:o,lod:i}=this.project(n,r);this.showRect(o,t),this.showBuffer(i)}dispose(){if(this.supported){this.clear(),this.fb.destroy(),this.tex.destroy(),this.webgl.gl.deleteBuffer(this.buf),this.renderable.dispose();for(const e of this.levelData)e.framebuffer.destroy(),e.texture.destroy()}}constructor(e,t,n,r){this.webgl=e,this.drawPass=t,this.viewport=Oie(),this.near=0,this.far=0,this.view=Yh(),this.projection=Yh(),this.nextNear=0,this.nextFar=0,this.nextView=Yh(),this.nextProjection=Yh(),this.aabb=Kh(),this.vp=qh(),this.levelData=[],this.sync=null,this.buffer=new Float32Array(0),this.frameLag=0,this.ready=!1,this.isOccluded=e=>{if(!this.supported||!this.props.enabled||!this.ready)return!1;const{vp:t,r:n}=this.transform(e),{near:r,far:o,projection:i}=this,a=t[2]+n;if(-a<r)return!1;const{aabb:s,w:l,h:c,lod:u}=this.project(t,n);if(u>=this.levelData.length||u<this.props.minLevel)return!1;const{offset:d,size:A}=this.levelData[u],f=s[0]+l/2,p=s[1]+c/2,h=A[0],g=f*h,m=p*h,y=Math.floor(g),v=Math.ceil(m),b=this.tex.getWidth();if(y+1>=h||v+1>=h)return!1;const C=(h-v-1)*b+y+d;if(a>rce(this.buffer[C],r,o,i))return!1;if(a>rce(this.buffer[C+1],r,o,i))return!1;const I=(h-v+1-1)*b+y+d;return!(a>rce(this.buffer[I],r,o,i))&&!(a>rce(this.buffer[I+1],r,o,i))};const{gl:o,extensions:i}=e;if(!Xq(o)||!i.colorBufferFloat)return Aw&&console.log('Missing webgl2 and/or colorBufferFloat support required for "Hi-Z"'),void(this.supported=!1);this.fb=e.resources.framebuffer(),this.tex=e.resources.texture("image-float32","alpha","float","nearest"),this.tex.attachFramebuffer(this.fb,0);const a=o.getParameter(o.IMPLEMENTATION_COLOR_READ_FORMAT),s=o.getParameter(o.IMPLEMENTATION_COLOR_READ_TYPE);if(a!==o.RED||s!==o.FLOAT)return Aw&&console.log('Missing red/float reading support required for "Hi-Z"'),void(this.supported=!1);this.supported=!0,this.props={...U_.getDefaultValues(ice),...r},this.buf=yq(o),this.renderable=function(e,t){const n={...RK,tPreviousLevel:Sp.create(t),uInvSize:Sp.create(Wh()),uOffset:Sp.create(Wh())},r={...Lle};return kK(CK(e,"triangles",Ule,r,n),n)}(e,this.drawPass.depthTextureOpaque),Aw&&n&&this.initDebug(n)}}const sce={camera:U_.Group({mode:U_.Select("perspective",U_.arrayToOptions(["perspective","orthographic"]),{label:"Camera"}),helper:U_.Group(xle,{isFlat:!0}),stereo:U_.MappedStatic("off",{on:U_.Group($se),off:U_.Group({})},{cycle:!0,hideIf:e=>"perspective"!==(null===e||void 0===e?void 0:e.mode)}),fov:U_.Numeric(45,{min:10,max:130,step:1},{label:"Field of View"}),manualReset:U_.Boolean(!1,{isHidden:!0})},{pivot:"mode"}),cameraFog:U_.MappedStatic("on",{on:U_.Group({intensity:U_.Numeric(15,{min:1,max:100,step:1})}),off:U_.Group({})},{cycle:!0,description:"Show fog in the distance"}),cameraClipping:U_.Group({radius:U_.Numeric(100,{min:0,max:99,step:1},{label:"Clipping",description:"How much of the scene to show."}),far:U_.Boolean(!0,{description:"Hide scene in the distance"}),minNear:U_.Numeric(5,{min:.1,max:100,step:.1},{description:"Note, may cause performance issues rendering impostors when set too small and cause issues with outline rendering when too close to 0."})},{pivot:"radius"}),viewport:U_.MappedStatic("canvas",{canvas:U_.Group({}),"static-frame":U_.Group({x:U_.Numeric(0),y:U_.Numeric(0),width:U_.Numeric(128),height:U_.Numeric(128)}),"relative-frame":U_.Group({x:U_.Numeric(.33,{min:0,max:1,step:.01}),y:U_.Numeric(.33,{min:0,max:1,step:.01}),width:U_.Numeric(.5,{min:.01,max:1,step:.01}),height:U_.Numeric(.5,{min:.01,max:1,step:.01})})}),cameraResetDurationMs:U_.Numeric(250,{min:0,max:1e3,step:1},{description:"The time it takes to reset the camera."}),sceneRadiusFactor:U_.Numeric(1,{min:1,max:10,step:.1}),transparentBackground:U_.Boolean(!1),dpoitIterations:U_.Numeric(2,{min:1,max:10,step:1}),pickPadding:U_.Numeric(3,{min:0,max:10,step:1},{description:"extra pixels to around target to check in case target is empty"}),multiSample:U_.Group(Wse),postprocessing:U_.Group(Hse),marking:U_.Group(gle),hiZ:U_.Group(ice),renderer:U_.Group(Kie),trackball:U_.Group(lae),interaction:U_.Group(Qae),debug:U_.Group(Cae),handle:U_.Group(kle)},lce=U_.getDefaultValues(sce);var cce;!function(e){e.DefaultAttribs={powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,antialias:!0,preserveDrawingBuffer:!0,preferWebGl1:!1,handleResize:()=>{}},e.Params={pixelScale:U_.Numeric(1,{min:.1,max:2,step:.05}),pickScale:U_.Numeric(.25,{min:.1,max:1,step:.05}),transparency:U_.Select("wboit",[["blended","Blended"],["wboit","Weighted, Blended"],["dpoit","Depth Peeling"]])},e.DefaultProps=U_.getDefaultValues(e.Params),e.fromCanvas=function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i={...e.DefaultAttribs,...r},a={...e.DefaultProps,...o},{powerPreference:s,failIfMajorPerformanceCaveat:l,antialias:c,preserveDrawingBuffer:u,preferWebGl1:d}=i,A=function(e,t){function n(n){try{return e.getContext(n,t)}catch(l0e){return null}}const r=((null===t||void 0===t?void 0:t.preferWebGl1)?null:n("webgl2"))||n("webgl")||n("experimental-webgl");return Aw&&console.log(`isWebgl2: ${Xq(r)}`),r}(t,{powerPreference:s,failIfMajorPerformanceCaveat:l,antialias:c,preserveDrawingBuffer:u,alpha:!0,depth:!0,premultipliedAlpha:!0,preferWebGl1:d});if(null===A)throw new Error("Could not create a WebGL rendering context");const{pixelScale:f,pickScale:p,transparency:h}=a,g=Yie.fromElement(t,{pixelScale:f,preventGestures:!0}),m=Yq(A,{pixelScale:f}),y=new Nle(m,n,{pickScale:p,transparency:h});if(Aw){const e=A.getExtension("WEBGL_lose_context");e&&t.addEventListener("mousedown",(t=>{m.isContextLost||t.shiftKey&&t.ctrlKey&&t.altKey&&(Aw&&console.log("lose context"),e.loseContext(),setTimeout((()=>{m.isContextLost&&(Aw&&console.log("restore context"),e.restoreContext())}),1e3))}),!1)}const v=new $S(0),b=e=>{m.setContextLost(),e.preventDefault(),Aw&&console.log("context lost"),v.next(vp())},C=()=>{m.isContextLost&&(m.handleContextRestored((()=>{y.draw.reset()})),Aw&&console.log("context restored"))};t.addEventListener("webglcontextlost",b,!1),t.addEventListener("webglcontextrestored",C,!1);const I=new $S(void 0);return{canvas:t,webgl:m,input:g,passes:y,attribs:i,get props(){return{...a}},contextLost:v,contextRestored:m.contextRestored,assetManager:n,changed:I,setProps:e=>{if(!e)return;let t=!1;void 0!==e.pixelScale&&e.pixelScale!==a.pixelScale&&(a.pixelScale=e.pixelScale,g.setPixelScale(e.pixelScale),m.setPixelScale(e.pixelScale),i.handleResize(),t=!0),void 0!==e.pickScale&&e.pickScale!==a.pickScale&&(a.pickScale=e.pickScale,y.setPickScale(e.pickScale),t=!0),void 0!==e.transparency&&e.transparency!==a.transparency&&(a.transparency=e.transparency,y.setTransparency(e.transparency),t=!0),t&&I.next(void 0)},dispose:e=>{g.dispose(),t.removeEventListener("webglcontextlost",b,!1),t.removeEventListener("webglcontextrestored",C,!1),m.destroy(e)}}}}(cce||(cce={}));const uce="undefined"!==typeof window?window.requestAnimationFrame:e=>setImmediate((()=>e(Date.now()))),dce="undefined"!==typeof window?window.cancelAnimationFrame:e=>clearImmediate(e);var Ace;function fce(e){pce(e)}function pce(e){die.Canvas3D.ResetSettings.subscribe(e,(()=>{var t;null===(t=e.canvas3d)||void 0===t||t.setProps(lce),e.events.canvas3d.settingsUpdated.next(void 0)})),die.Canvas3D.SetSettings.subscribe(e,(t=>{var n;e.canvas3d&&(null===(n=e.canvas3d)||void 0===n||n.setProps(t.settings),e.events.canvas3d.settingsUpdated.next(void 0))}))}!function(e){e.create=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const{webgl:r,input:o,passes:i,assetManager:a,canvas:s}=e,l={...ew(lce),...ew(t)},c=new Map,u=new Map,d=new $S(0);let A=vp();const f=new $S(0),p=new $S(0),h=new $S(0),{gl:g,contextRestored:m}=r;let y=0,v=0,b=128,C=128,I=!1,E=0;ce();const x=hae.create(r,i.draw.transparency);function B(){return x.boundingSphere.radius*l.sceneRadiusFactor}const w=new bae({position:qh.create(0,0,100),mode:l.camera.mode,fog:"on"===l.cameraFog.name?l.cameraFog.params.intensity:0,clipFar:l.cameraClipping.far,minNear:l.cameraClipping.minNear,fov:Np(l.camera.fov)},{x:y,y:v,width:b,height:C}),_=new tle(w,l.camera.stereo.params),S=cae.create(o,w,x,l.trackball),D=new Fle(r,x,l),T=new ace(r,i.draw,s,l.hiZ),k=eae.create(r,l.renderer);k.setOcclusionTest(T.isOccluded);const Q=new sle(r,k,x,D,i.pick,{x:y,y:v,width:b,height:C},l.pickPadding),M=new Mae(J,U,o,w,S,l.interaction),R=new Zse(i.multiSample);i.draw.postprocessing.background.update(w,l.postprocessing.background,(e=>{e&&Y()}));let P,O,F=!1,N=!1,L=!0;function U(e){let t=S5,n=b6.Empty;if(e){const r=D.camera.getLoci(e);if(r!==S5)return{loci:r,repr:n};t=D.handle.getLoci(e),c.forEach(((r,o)=>{const i=o.getLoci(e);D5(i)||(D5(t)||console.warn("found another loci, this should not happen"),t=i,n=o)}))}return{loci:t,repr:n}}let G=[];function j(e,t){const{repr:n,loci:r}=e;let o=!1;return n?o=n.mark(r,t)||o:c.forEach(((e,n)=>{o=n.mark(r,t)||o})),o=D.handle.mark(r,t)||o,o=D.camera.mark(r,t)||o,o}function z(e){if(r.isContextLost)return!1;let t=!1;if(N&&(se(!1),N=!1,t=!0),y>g.drawingBufferWidth||y+b<0||v>g.drawingBufferHeight||v+C<0)return!1;const n=function(){let e=!1;for(const[t,n]of G)e=j(t,n)||e;return G=[],e&&(x.update(void 0,!0),D.handle.scene.update(void 0,!0),D.camera.scene.update(void 0,!0)),e}()&&(k.props.colorMarker||l.marking.enabled);let o=!1;S.update(E);const a=w.update(),s=e||a||t||I;I=!1;const c=R.update(n||s,l.multiSample);if(s||c||n){let e=w;"on"===l.camera.stereo.name&&(_.update(),e=_),fw&&r.timer.mark("Canvas3D.render",!0);const t={renderer:k,camera:e,scene:x,helper:D};if(Kse.isEnabled(l.multiSample)){const e=l.multiSample.reduceFlicker&&!a&&n&&!S.isAnimating;R.render(t,l,!0,e)}else i.draw.render(t,l,!0);T.render(w),fw&&r.timer.markEnd("Canvas3D.render"),Q.dirty=Q.dirty||s,o=!0}return o}let H=!1,V=!1;function q(e){V||z(!!(null===e||void 0===e?void 0:e.force))&&L&&f.next(vp()-A)}function Y(){I=!0}let X=0;function W(e,t){E=e,Z(null===t||void 0===t?void 0:t.isSynchronous),(null===t||void 0===t?void 0:t.updateControls)&&S.update(E),w.transition.tick(E),T.tick(),(null===t||void 0===t?void 0:t.manualDraw)||(q(),w.transition.inTransition||r.isContextLost||M.tick(E))}function K(){W(vp()),X=uce(K)}function J(e,t){const n="on"===l.camera.stereo.name?_:w;return r.isContextLost?void 0:Q.identify(e,t,n)}function Z(){const e=function(e){if(!x.needsCommit)return!0;if(YT.copy($,x.boundingSphereVisible),T.clear(),!x.commit(e?void 0:te))return h.next(x.commitQueueSize),!1;h.next(0),D.debug.isEnabled&&D.debug.update();l.camera.manualReset||0!==d.value&&!function(){if(0===w.state.radiusMax)return!0;if(w.transition.inTransition||O)return!1;let e=!0,t=!0;YT.set(ee,w.state.target,w.state.radius);for(const n of x.renderables){if(!n.state.visible)continue;const r=n.values.boundingSphere.ref.value;if(!r.radius)continue;t=!1;const o=qh.distance(ee.center,r.center);if((o>ee.radius||o>r.radius||r.radius>w.state.radiusMax)&&!YT.includes($,r))return!0;YT.overlaps(ee,r)&&(e=!1)}return e||!t&&ee.radius<=.1}()||(F=!0);0===$.radius&&(P=0);l.camera.manualReset||w.setState({radiusMax:B()},0);d.next(c.size),Aw&&ne();return!0}(arguments.length>0&&void 0!==arguments[0]&&arguments[0]);e&&(!function(){if(!F)return;const e=x.boundingSphereVisible,{center:t,radius:n}=e,r=S.props.autoAdjustMinMaxDistance;if("on"===r.name){const e=r.params.minDistanceFactor*n+r.params.minDistancePadding,t=Math.max(r.params.maxDistanceFactor*n,r.params.maxDistanceMin);S.setProps({minDistance:e,maxDistance:t})}if(n>0){const e=void 0===P?l.cameraResetDurationMs:P,r=w.getFocus(t,n),o="function"===typeof O?O(x,w):O,i=o?{...r,...o}:r;w.setState({...i,radiusMax:B()},e)}P=void 0,O=void 0,F=!1}(),H&&(D.debug.isEnabled&&D.debug.update(),q({force:!0}),H=!1),p.next(vp()))}const $=YT(),ee=YT(),te=250;function ne(){const e=x.renderables.map((e=>({drawCount:e.values.drawCount.ref.value,instanceCount:e.values.instanceCount.ref.value,materialId:e.materialId,renderItemId:e.id})));console.groupCollapsed(`${e.length} RenderItems`),e.length<50?console.table(e):console.log(e),console.log(JSON.stringify(r.stats,void 0,4));const{texture:t,attribute:n,elements:o}=r.resources.getByteCounts();console.log(JSON.stringify({texture:`${(t/1024/1024).toFixed(3)} MiB`,attribute:`${(n/1024/1024).toFixed(3)} MiB`,elements:`${(o/1024/1024).toFixed(3)} MiB`},void 0,4)),console.log(JSON.stringify(r.timer.formatedStats(),void 0,4)),console.groupEnd()}function re(e){!function(e){if(u.has(e))return;u.set(e,e.updated.subscribe((t=>{e.state.syncManually||re(e)})))}(e);const t=c.get(e),n=new Set;e.renderObjects.forEach((e=>n.add(e))),t?$Q.areEqual(n,t)||(n.forEach((e=>{t.has(e)||x.add(e)})),t.forEach((e=>{n.has(e)||x.remove(e)}))):e.renderObjects.forEach((e=>x.add(e))),c.set(e,n),x.update(e.renderObjects,!1),H=!0,Aw&&ne()}function oe(){const e=x.boundingSphere.radius>0?100-Math.round(w.transition.target.radius/B()*100):0;return{camera:{mode:w.state.mode,helper:{...D.camera.props},stereo:{...l.camera.stereo},fov:Math.round(Lp(w.state.fov)),manualReset:!!l.camera.manualReset},cameraFog:w.state.fog>0?{name:"on",params:{intensity:w.state.fog}}:{name:"off",params:{}},cameraClipping:{far:w.state.clipFar,radius:e,minNear:w.state.minNear},cameraResetDurationMs:l.cameraResetDurationMs,sceneRadiusFactor:l.sceneRadiusFactor,transparentBackground:l.transparentBackground,dpoitIterations:l.dpoitIterations,pickPadding:l.pickPadding,viewport:l.viewport,postprocessing:{...l.postprocessing},marking:{...l.marking},multiSample:{...l.multiSample},hiZ:{...T.props},renderer:{...k.props},trackball:{...S.props},interaction:{...M.props},debug:{...D.debug.props},handle:{...D.handle.props}}}const ie=m.subscribe((()=>{Q.dirty=!0,q({force:!0}),q({force:!0})})),ae=new $S(0);function se(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];i.updateSize(),ce(),ue(),e&&Y(),ae.next(+new Date)}!function(e){pw.includes(e)||pw.push(e)}(ne);const le=null===(n=e.changed)||void 0===n?void 0:n.subscribe((()=>{x.setTransparency(i.draw.transparency),Y()}));if(Aw&&s){let e;const t=e=>{const t=e&&Q5.getBoundingSphere(Q5.normalize(e,"residue"));T.debugOcclusion(t)};o.click.subscribe((n=>{if(!n.modifiers.control||2!==n.button)return;const r=J(n.x,n.y);if(!r)return e=void 0,void t(e);const o=U(r.id);e=o.loci,t(e)})),f.subscribe((()=>{setTimeout((()=>{t(e)}),100)}))}return{webgl:r,add:re,remove:function(e){!function(e){const t=u.get(e);t&&(t.unsubscribe(),u.delete(e))}(e);const t=c.get(e);t&&(t.forEach((e=>x.remove(e))),c.delete(e),H=!0,Aw&&ne())},commit:Z,update:(e,t)=>{if(e){if(!c.has(e))return;x.update(e.renderObjects,!!t)}else x.update(void 0,!!t);H=!0},clear:()=>{u.forEach((e=>e.unsubscribe())),u.clear(),c.clear(),x.clear(),D.debug.clear(),Y(),d.next(c.size)},syncVisibility:()=>{0===w.state.radiusMax&&(F=!0,P=0),x.syncVisibility()&&D.debug.isEnabled&&D.debug.update(),Y()},requestDraw:Y,tick:W,animate:function(){V=!1,S.start(vp()),0===X&&K()},resetTime:function(e){A=e,S.start(e)},pause:function(){V=arguments.length>0&&void 0!==arguments[0]&&arguments[0],dce(X),X=0},resume:()=>{V=!1},identify:J,mark:function(e,t){G.push([e,t])},getLoci:U,handleResize:se,requestResize:()=>{N=!0},requestCameraReset:e=>{P=null===e||void 0===e?void 0:e.durationMs,O=null===e||void 0===e?void 0:e.snapshot,F=!0},camera:w,boundingSphere:x.boundingSphere,boundingSphereVisible:x.boundingSphereVisible,get notifyDidDraw(){return L},set notifyDidDraw(e){L=e},didDraw:f,commited:p,commitQueueSize:h,reprCount:d,resized:ae,setProps:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,r,o,a;const s="function"===typeof e?YD(oe(),e):e;void 0!==s.sceneRadiusFactor&&(l.sceneRadiusFactor=s.sceneRadiusFactor,w.setState({radiusMax:B()},0));const c=Object.create(null);s.camera&&void 0!==s.camera.mode&&s.camera.mode!==w.state.mode&&(c.mode=s.camera.mode);const u=Math.round(Lp(w.state.fov));if(s.camera&&void 0!==s.camera.fov&&s.camera.fov!==u&&(c.fov=Np(s.camera.fov)),void 0!==s.cameraFog&&s.cameraFog.params){const e="on"===s.cameraFog.name?s.cameraFog.params.intensity:0;e!==w.state.fog&&(c.fog=e)}if(void 0!==s.cameraClipping&&(void 0!==s.cameraClipping.far&&s.cameraClipping.far!==w.state.clipFar&&(c.clipFar=s.cameraClipping.far),void 0!==s.cameraClipping.minNear&&s.cameraClipping.minNear!==w.state.minNear&&(c.minNear=s.cameraClipping.minNear),void 0!==s.cameraClipping.radius)){const e=B()/100*(100-s.cameraClipping.radius);e>0&&e!==c.radius&&(c.radius=Math.max(e,.01))}if(Object.keys(c).length>0&&w.setState(c),(null===(n=s.camera)||void 0===n?void 0:n.helper)&&D.camera.setProps(s.camera.helper),void 0!==(null===(r=s.camera)||void 0===r?void 0:r.manualReset)&&(l.camera.manualReset=s.camera.manualReset),void 0!==(null===(o=s.camera)||void 0===o?void 0:o.stereo)&&(Object.assign(l.camera.stereo,s.camera.stereo),_.setProps(l.camera.stereo.params)),void 0!==s.cameraResetDurationMs&&(l.cameraResetDurationMs=s.cameraResetDurationMs),void 0!==s.transparentBackground&&(l.transparentBackground=s.transparentBackground),void 0!==s.dpoitIterations&&(l.dpoitIterations=s.dpoitIterations),void 0!==s.pickPadding&&(l.pickPadding=s.pickPadding),void 0!==s.viewport){l.viewport===s.viewport||l.viewport.name===s.viewport.name&&Mp(l.viewport.params,s.viewport.params)||(l.viewport=s.viewport,ce(),ue())}(null===(a=s.postprocessing)||void 0===a?void 0:a.background)&&(Object.assign(l.postprocessing.background,s.postprocessing.background),i.draw.postprocessing.background.update(w,l.postprocessing.background,(e=>{e&&!t&&Y()}))),s.postprocessing&&Object.assign(l.postprocessing,s.postprocessing),s.marking&&Object.assign(l.marking,s.marking),s.multiSample&&Object.assign(l.multiSample,s.multiSample),s.hiZ&&T.setProps(s.hiZ),s.renderer&&k.setProps(s.renderer),s.trackball&&S.setProps(s.trackball),s.interaction&&M.setProps(s.interaction),s.debug&&D.debug.setProps(s.debug),s.handle&&D.handle.setProps(s.handle),"orthographic"===c.mode&&(l.camera.stereo.name="off"),t||Y()},getImagePass:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Dle(r,a,k,x,w,D,i.draw.transparency,e)},getRenderObjects(){const e=[];return x.forEach(((t,n)=>e.push(n))),e},get props(){return oe()},get input(){return o},get stats(){return k.stats},get interaction(){return M.events},dispose:()=>{ie.unsubscribe(),null===le||void 0===le||le.unsubscribe(),dce(X),G=[],x.clear(),D.debug.clear(),S.dispose(),k.dispose(),M.dispose(),T.dispose(),function(e){const t=pw.indexOf(e);-1!==t&&pw.splice(t,1)}(ne)}};function ce(){const e=y,t=v,n=b,o=C;"canvas"===l.viewport.name?(y=0,v=0,b=g.drawingBufferWidth,C=g.drawingBufferHeight):"static-frame"===l.viewport.name?(y=l.viewport.params.x*r.pixelRatio,C=l.viewport.params.height*r.pixelRatio,v=g.drawingBufferHeight-C-l.viewport.params.y*r.pixelRatio,b=l.viewport.params.width*r.pixelRatio):"relative-frame"===l.viewport.name&&(y=Math.round(l.viewport.params.x*g.drawingBufferWidth),C=Math.round(l.viewport.params.height*g.drawingBufferHeight),v=Math.round(g.drawingBufferHeight-C-l.viewport.params.y*g.drawingBufferHeight),b=Math.round(l.viewport.params.width*g.drawingBufferWidth)),e===y&&t===v&&n===b&&o===C||(I=!0)}function ue(){Q.setViewport(y,v,b,C),k.setViewport(y,v,b,C),Oie.set(w.viewport,y,v,b,C),Oie.set(S.viewport,y,v,b,C),T.setViewport(y,v,b,C)}}}(Ace||(Ace={}));const hce=zie,gce=jie,mce=tae.Trigger,yce={hoverHighlightOnly:tae([mce(hce.Flag.None)],"Highlight","Hover element using ${triggers}"),hoverHighlightOnlyExtend:tae([mce(hce.Flag.None,gce.create({shift:!0}))],"Extend highlight","From selected to hovered element along polymer using ${triggers}")},vce={bindings:U_.Value(yce,{isHidden:!0}),ignore:U_.Value([],{isHidden:!0}),preferAtoms:U_.Boolean(!1,{description:"Always prefer atoms over bonds"}),mark:U_.Boolean(!0)},bce=tie.create({name:"representation-highlight-loci",category:"interaction",ctor:class extends tie.Handler{constructor(){super(...arguments),this.lociMarkProvider=(e,t)=>{this.ctx.canvas3d&&this.params.mark&&this.ctx.canvas3d.mark(e,t)}}getLoci(e){return this.params.preferAtoms&&RP.isLoci(e)&&2===e.bonds.length?RP.toFirstStructureElementLoci(e):e}register(){this.subscribeObservable(this.ctx.behaviors.interaction.hover,(e=>{let{current:t,buttons:n,modifiers:r}=e;if(!this.ctx.canvas3d||this.ctx.isBusy)return;const o=this.getLoci(t.loci);if(this.params.ignore.includes(o.kind))return void this.ctx.managers.interactivity.lociHighlights.highlightOnly({repr:t.repr,loci:S5});let i=!1;tae.match(this.params.bindings.hoverHighlightOnly,n,r)&&(this.ctx.managers.interactivity.lociHighlights.highlightOnly({loci:o}),i=!0),tae.match(this.params.bindings.hoverHighlightOnlyExtend,n,r)&&(this.ctx.managers.interactivity.lociHighlights.highlightOnlyExtend({loci:o}),i=!0),i||this.ctx.managers.interactivity.lociHighlights.highlightOnly({repr:t.repr,loci:S5})})),this.ctx.managers.interactivity.lociHighlights.addProvider(this.lociMarkProvider)}unregister(){this.ctx.managers.interactivity.lociHighlights.removeProvider(this.lociMarkProvider)}},params:()=>vce,display:{name:"Highlight Loci on Canvas"}}),Cce={clickSelect:tae.Empty,clickToggleExtend:tae([mce(hce.Flag.Primary,gce.create({shift:!0}))],"Toggle extended selection","Click on element using ${triggers} to extend selection along polymer"),clickSelectOnly:tae.Empty,clickToggle:tae([mce(hce.Flag.Primary,gce.create())],"Toggle selection","Click on element using ${triggers}"),clickDeselect:tae.Empty,clickDeselectAllOnEmpty:tae([mce(hce.Flag.Primary,gce.create())],"Deselect all","Click on nothing using ${triggers}")},Ice={bindings:U_.Value(Cce,{isHidden:!0}),ignore:U_.Value([],{isHidden:!0}),preferAtoms:U_.Boolean(!1,{description:"Always prefer atoms over bonds"}),mark:U_.Boolean(!0)},Ece=tie.create({name:"representation-select-loci",category:"interaction",ctor:class extends tie.Handler{getLoci(e){return this.params.preferAtoms&&RP.isLoci(e)&&2===e.bonds.length?RP.toFirstStructureElementLoci(e):e}applySelectMark(e,t){const n=this.ctx.state.data.cells.get(e);if(n&&Jz.isRepresentation3D(n.obj)){this.spine.current=n;const e=this.spine.getRootOfType(Jz.Molecule.Structure);if(e){t&&this.lociMarkProvider({loci:aG.Loci(e.data)},b5.Deselect);const n=this.ctx.managers.structure.selection.getLoci(e.data);this.lociMarkProvider({loci:n},b5.Select)}}}register(){const e=e=>!Q5.isEmpty(e),t=[["clickSelect",e=>this.ctx.managers.interactivity.lociSelects.select(e),e],["clickToggle",e=>this.ctx.managers.interactivity.lociSelects.toggle(e),e],["clickToggleExtend",e=>this.ctx.managers.interactivity.lociSelects.toggleExtend(e),e],["clickSelectOnly",e=>this.ctx.managers.interactivity.lociSelects.selectOnly(e),e],["clickDeselect",e=>this.ctx.managers.interactivity.lociSelects.deselect(e),e],["clickDeselectAllOnEmpty",()=>this.ctx.managers.interactivity.lociSelects.deselectAll(),e=>Q5.isEmpty(e)]];t.sort(((e,t)=>{const n=this.params.bindings[e[0]],r=this.params.bindings[t[0]],o=0===n.triggers.length?0:q_(n.triggers.map((e=>gce.size(e.modifiers)))),i=0===r.triggers.length?0:q_(r.triggers.map((e=>gce.size(e.modifiers))));return i-o})),this.subscribeObservable(this.ctx.behaviors.interaction.click,(e=>{let{current:n,button:r,modifiers:o}=e;if(!this.ctx.canvas3d||this.ctx.isBusy||!this.ctx.selectionMode)return;const i=this.getLoci(n.loci);if(!this.params.ignore.includes(i.kind))for(const[a,s,l]of t)if(tae.match(this.params.bindings[a],r,o)&&(!l||l(i))){s({repr:n.repr,loci:i});break}})),this.ctx.managers.interactivity.lociSelects.addProvider(this.lociMarkProvider),this.subscribeObservable(this.ctx.state.events.object.created,(e=>{let{ref:t}=e;return this.applySelectMark(t)})),this.subscribeObservable(this.ctx.state.events.object.updated,(e=>{let{ref:t,obj:n,oldObj:r,oldData:o,action:i}=e;const a=this.ctx.state.data.cells.get(t);if(a&&Jz.Molecule.Structure.is(a.obj)){const e=n.data,a="recreate"===i?null===r||void 0===r?void 0:r.data:"in-place"===i?o:void 0;if(a&&aG.areEquivalent(e,a)&&aG.areHierarchiesEqual(e,a))return;const s=this.ctx.state.data.select(V_.children(t).ofType(Jz.Molecule.Structure.Representation3D));for(const t of s)this.applySelectMark(t.transform.ref,!0)}}))}unregister(){this.ctx.managers.interactivity.lociSelects.removeProvider(this.lociMarkProvider)}constructor(e,t){super(e,t),this.lociMarkProvider=(e,t)=>{this.ctx.canvas3d&&this.params.mark&&this.ctx.canvas3d.mark({loci:e.loci},t)},this.spine=new HD.Impl(e.state.data.cells)}},params:()=>Ice,display:{name:"Select Loci on Canvas"}}),xce=tie.create({name:"default-loci-label-provider",category:"interaction",ctor:class{register(){this.ctx.managers.lociLabels.addProvider(this.f)}unregister(){this.ctx.managers.lociLabels.removeProvider(this.f)}constructor(e){this.ctx=e,this.f={label:e=>{const t=[];if(cG.is(e)){const n=new Set;for(const{unit:t}of e.elements){const r=Vk.create(e.structure,t,t.elements[0]),o=WL.entity.pdbx_description(r).join(", ");n.add(o)}1===n.size&&n.forEach((e=>t.push(e)))}return t.push(J6(e)),t.filter((e=>!!e)).join("</br>")},group:e=>e.toString().replace(/Model [0-9]+/g,"Models"),priority:100}}},display:{name:"Provide Default Loci Label"}}),Bce={clickFocus:tae([mce(hce.Flag.Primary,gce.create())],"Representation Focus","Click element using ${triggers}"),clickFocusAdd:tae([mce(hce.Flag.Primary,gce.create({shift:!0}))],"Representation Focus Add","Click element using ${triggers}"),clickFocusSelectMode:tae([],"Representation Focus","Click element using ${triggers}"),clickFocusAddSelectMode:tae([],"Representation Focus Add","Click element using ${triggers}")},wce={bindings:U_.Value(Bce,{isHidden:!0})},_ce=tie.create({name:"representation-focus-loci",category:"interaction",ctor:class extends tie.Handler{register(){this.subscribeObservable(this.ctx.behaviors.interaction.click,(e=>{let{current:t,button:n,modifiers:r}=e;var o,i,a,s,l;const{clickFocus:c,clickFocusAdd:u,clickFocusSelectMode:d,clickFocusAddSelectMode:A}=this.params.bindings,f=this.ctx.selectionMode?d:c,p=tae.match(f,n,r),h=null!==(s=null===(a=null===(i=null===(o=t.repr)||void 0===o?void 0:o.props)||void 0===i?void 0:i.snapshotKey)||void 0===a?void 0:a.trim())&&void 0!==s?s:"";if(!this.ctx.selectionMode&&p&&h)return void this.ctx.managers.snapshot.applyKey(h);const{granularity:g}=this.ctx.managers.interactivity.props;if("residue"!==g&&"element"!==g)return;const m=this.ctx.selectionMode?A:u,y=tae.match(m,n,r);if(!p&&!y)return;const v=Q5.normalize(t.loci,"residue"),b=this.ctx.managers.structure.focus.current;if(b&&Q5.areEqual(b.loci,v))this.ctx.managers.structure.focus.clear();else if(p)this.ctx.managers.structure.focus.setFromLoci(v);else{this.ctx.managers.structure.focus.addFromLoci(v);const e=null===(l=this.ctx.managers.structure.focus.current)||void 0===l?void 0:l.loci;e&&this.ctx.managers.camera.focusLoci(e)}}))}},params:()=>wce,display:{name:"Representation Focus Loci on Canvas"}}),Sce=zie,Dce=jie,Tce=tae.Trigger,kce=tae.TriggerKey,Qce=tae([Tce(Sce.Flag.Primary,Dce.create()),Tce(Sce.Flag.Secondary,Dce.create()),Tce(Sce.Flag.Primary,Dce.create({control:!0}))],"Reset camera focus","Click on nothing using ${triggers}"),Mce=tae([Tce(Sce.Flag.Secondary,Dce.create()),Tce(Sce.Flag.Primary,Dce.create({control:!0}))],"Reset camera focus","Click on nothing using ${triggers}"),Rce={clickCenterFocus:tae([Tce(Sce.Flag.Primary,Dce.create()),Tce(Sce.Flag.Secondary,Dce.create()),Tce(Sce.Flag.Primary,Dce.create({control:!0}))],"Camera center and focus","Click element using ${triggers}"),clickCenterFocusSelectMode:tae([Tce(Sce.Flag.Secondary,Dce.create()),Tce(Sce.Flag.Primary,Dce.create({control:!0}))],"Camera center and focus","Click element using ${triggers}"),clickResetCameraOnEmpty:Qce,clickResetCameraOnEmptySelectMode:Mce},Pce={minRadius:U_.Numeric(8,{min:1,max:50,step:1}),extraRadius:U_.Numeric(4,{min:1,max:50,step:1},{description:"Value added to the bounding-sphere radius of the Loci"}),durationMs:U_.Numeric(250,{min:0,max:1e3,step:1},{description:"Camera transition duration"}),bindings:U_.Value(Rce,{isHidden:!0})},Oce=tie.create({name:"camera-focus-loci",category:"interaction",ctor:class extends tie.Handler{register(){this.subscribeObservable(this.ctx.behaviors.interaction.click,(e=>{let{current:t,button:n,modifiers:r}=e;var o,i;if(!this.ctx.canvas3d)return;const a=this.ctx.selectionMode?this.params.bindings.clickCenterFocusSelectMode:this.params.bindings.clickCenterFocus,s=this.ctx.selectionMode?null!==(o=this.params.bindings.clickResetCameraOnEmptySelectMode)&&void 0!==o?o:Mce:null!==(i=this.params.bindings.clickResetCameraOnEmpty)&&void 0!==i?i:Qce;if(Q5.isEmpty(t.loci)&&tae.match(s,n,r))die.Camera.Reset(this.ctx,{});else if(tae.match(a,n,r)){const e=Q5.normalize(t.loci,this.ctx.managers.interactivity.props.granularity);this.ctx.managers.camera.focusLoci(e,this.params)}}))}},params:()=>Pce,display:{name:"Camera Focus Loci on Canvas"}}),Fce=tie.create({name:"camera-axis-helper",category:"interaction",ctor:class extends tie.Handler{register(){let e=wle.None,t=0;this.subscribeObservable(this.ctx.behaviors.interaction.click,(n=>{let{current:r}=n;if(!this.ctx.canvas3d||!_le(r.loci))return;const o=r.loci.elements[0].groupId;if(o===wle.None)return e=wle.None,void(t=0);const{camera:i}=this.ctx.canvas3d;let a,s;if(o>=wle.X&&o<=wle.Z){e=wle.None,t=0;const n=qh.sub(qh(),i.target,i.position),r=qh.cross(qh(),n,i.up);s=qh(),s[o-1]=1,a=qh.cross(qh(),s,r),0===qh.magnitude(a)&&(a=n)}else e===o?t=(t+1)%2:(e=o,t=0),o===wle.XY?(s=t?qh.unitX:qh.unitY,a=qh.negUnitZ):o===wle.XZ?(s=t?qh.unitX:qh.unitZ,a=qh.negUnitY):(s=t?qh.unitY:qh.unitZ,a=qh.negUnitX);this.ctx.canvas3d.requestCameraReset({snapshot:(e,t)=>t.getInvariantFocus(e.boundingSphereVisible.center,e.boundingSphereVisible.radius,s,a)})}))}},params:()=>({}),display:{name:"Camera Axis Helper"}}),Nce={keySpinAnimation:tae([kce("I")],"Spin Animation","Press ${triggers}"),keyRockAnimation:tae([kce("O")],"Rock Animation","Press ${triggers}"),keyToggleFlyMode:tae([kce("Space",Dce.create({shift:!0}))],"Toggle Fly Mode","Press ${triggers}"),keyResetView:tae([kce("T")],"Reset View","Press ${triggers}")},Lce={bindings:U_.Value(Nce,{isHidden:!0})},Uce=tie.create({name:"camera-controls",category:"interaction",ctor:class extends tie.Handler{register(){this.subscribeObservable(this.ctx.behaviors.interaction.key,(e=>{let{code:t,key:n,modifiers:r}=e;var o;if(!this.ctx.canvas3d)return;const i={...Nce,...this.params.bindings},a=this.ctx.canvas3d.props.trackball;if(tae.matchKey(i.keySpinAnimation,t,r,n)){const e="spin"!==a.animate.name?"spin":"off";"off"===e?this.ctx.canvas3d.setProps({trackball:{animate:{name:e,params:{}}}}):this.ctx.canvas3d.setProps({trackball:{animate:{name:e,params:{speed:1}}}})}if(tae.matchKey(i.keyRockAnimation,t,r,n)){const e="rock"!==a.animate.name?"rock":"off";"off"===e?this.ctx.canvas3d.setProps({trackball:{animate:{name:e,params:{}}}}):this.ctx.canvas3d.setProps({trackball:{animate:{name:e,params:{speed:.3,angle:10}}}})}if(tae.matchKey(i.keyToggleFlyMode,t,r,n)){const e=!a.flyMode;this.ctx.canvas3d.setProps({trackball:{flyMode:e}}),(null===(o=this.ctx.canvas3dContext)||void 0===o?void 0:o.canvas)&&(this.ctx.canvas3dContext.canvas.style.cursor=e?"crosshair":"unset")}tae.matchKey(i.keyResetView,t,r,n)&&die.Camera.Reset(this.ctx,{})}))}},params:()=>Lce,display:{name:"Camera Controls on Canvas"}}),Gce=tie.create({name:"structure-info-prop",category:"custom-props",display:{name:"Structure Info"},ctor:class extends tie.Handler{get maxModelIndex(){var e,t;let n=-1;const r=this.ctx.state.data.select(V_.Generators.rootsOfType(Jz.Molecule.Model));for(const o of r){const r=(null===(e=o.obj)||void 0===e?void 0:e.data)&&Wj.Index.get(null===(t=o.obj)||void 0===t?void 0:t.data).value;void 0!==r&&r>n&&(n=r)}return n}get maxStructureIndex(){var e,t;let n=-1;const r=this.ctx.state.data.select(V_.Generators.rootsOfType(Jz.Molecule.Structure));for(const o of r){const r=(null===(e=o.obj)||void 0===e?void 0:e.data)&&aG.Index.get(null===(t=o.obj)||void 0===t?void 0:t.data).value;void 0!==r&&r>n&&(n=r)}return n}get asymIdOffset(){var e;let t=0,n=0;const r=this.ctx.state.data.select(V_.Generators.rootsOfType(Jz.Molecule.Model));for(const o of r){const r=null===(e=o.obj)||void 0===e?void 0:e.data;if(r){const e=Wj.AsymIdCount.get(r),o=Wj.AsymIdOffset.get(r).value;void 0!==e&&void 0!==o&&(t=Math.max(t,o.auth+e.auth),n=Math.max(n,o.label+e.label))}}return{auth:t,label:n}}setModelMaxIndex(){var e;const t=this.maxModelIndex,n=this.ctx.state.data.select(V_.Generators.rootsOfType(Jz.Molecule.Model));for(const r of n){const n=null===(e=r.obj)||void 0===e?void 0:e.data;n&&Wj.MaxIndex.get(n).value!==t&&Wj.MaxIndex.set(n,{value:t},t)}}setStructureMaxIndex(){var e;const t=this.maxModelIndex,n=this.ctx.state.data.select(V_.Generators.rootsOfType(Jz.Molecule.Structure));for(const r of n){const n=null===(e=r.obj)||void 0===e?void 0:e.data;n&&aG.MaxIndex.get(n).value!==t&&aG.MaxIndex.set(n,{value:t},t)}}handleModel(e,t){if(void 0===Wj.Index.get(e).value){const n=t&&Wj.Index.get(t).value,r=null!==n&&void 0!==n?n:this.maxModelIndex+1;Wj.Index.set(e,{value:r},r)}if(void 0===Wj.AsymIdOffset.get(e).value){const n=t&&Wj.AsymIdOffset.get(t).value,r=null!==n&&void 0!==n?n:{...this.asymIdOffset};Wj.AsymIdOffset.set(e,{value:r},r)}}handleStructure(e,t){if(void 0!==e.parent)return;if(void 0!==aG.Index.get(e).value)return;const n=t&&aG.Index.get(t).value,r=null!==n&&void 0!==n?n:this.maxStructureIndex+1;aG.Index.set(e,{value:r},r)}handle(e,t,n){if(Jz.Molecule.Structure.is(t)){this.ctx.state.data.tree.transforms.get(e).transformer.definition.isDecorator||void 0!==t.data.parent||this.handleStructure(t.data,null===n||void 0===n?void 0:n.data)}else if(Jz.Molecule.Model.is(t)){this.ctx.state.data.tree.transforms.get(e).transformer.definition.isDecorator||this.handleModel(t.data,null===n||void 0===n?void 0:n.data)}}register(){this.ctx.customModelProperties.register(Wj.AsymIdOffset,!0),this.ctx.customModelProperties.register(Wj.Index,!0),this.ctx.customModelProperties.register(Wj.MaxIndex,!0),this.ctx.customStructureProperties.register(aG.Index,!0),this.ctx.customStructureProperties.register(aG.MaxIndex,!0),this.subscribeObservable(this.ctx.state.data.events.object.created,(e=>{this.handle(e.ref,e.obj),this.setModelMaxIndex(),this.setStructureMaxIndex()})),this.subscribeObservable(this.ctx.state.data.events.object.updated,(e=>{this.handle(e.ref,e.obj,e.oldObj)}))}unregister(){this.ctx.customModelProperties.unregister(Wj.AsymIdOffset.descriptor.name),this.ctx.customModelProperties.unregister(Wj.Index.descriptor.name),this.ctx.customModelProperties.unregister(Wj.MaxIndex.descriptor.name),this.ctx.customStructureProperties.unregister(aG.Index.descriptor.name),this.ctx.customStructureProperties.unregister(aG.MaxIndex.descriptor.name)}}}),jce=[-1,1.76,1.87,1.65,1.5,1.4,1.85,1.8,1.6,1.4],zce={ALA:121,ARG:265,ASN:187,ASP:187,CYS:148,GLU:214,GLN:214,GLY:97,HIS:216,ILE:195,LEU:191,LYS:230,MET:203,PHE:228,PRO:154,SER:143,THR:163,TRP:264,TYR:255,VAL:165};function Hce(e,t,n){switch(t){case"O":return 5;case"S":return 6;case"N":return"NZ"===e?4:3;case"C":switch(e){case"C":case"CE1":case"CE2":case"CE3":case"CH2":case"CZ":case"CZ2":case"CZ3":return 1;case"CA":case"CB":case"CE":case"CG1":case"CG2":return 2;default:switch(n){case"PHE":case"TRP":case"TYR":case"HIS":case"ASP":case"ASN":return 1;case"PRO":case"LYS":case"ARG":case"MET":case"ILE":case"LEU":return 2;case"GLU":case"GLN":return"CD"===e?1:2}}}return qce(t)}function Vce(e,t,n){switch(t){case"C":return 7;case"N":return 8;case"P":return 9;case"O":return 5}return qce(t)}function qce(e){const t=FN(e);let n=jce.indexOf(t);return-1===n&&(n=jce.length,jce[n]=t),n}function Yce(e,t,n){const{structure:r,atomRadiusType:o,serialResidueIndex:i,area:a,spherePoints:s,scalingConstant:l,maxLookupRadius:c,probeSize:u}=e,{lookup3d:d,serialMapping:A,unitIndexMap:f,units:p}=r,{cumulativeUnitElementCount:h,elementIndices:g,unitIndices:m}=A;for(let y=t;y<n;++y){const e=jce[o[y]];if(e===jce[0])continue;const t=p[m[y]],n=g[y],r=t.conformation.x(n),A=t.conformation.y(n),v=t.conformation.z(n),{count:b,units:C,indices:I,squaredDistances:E}=d.find(r,A,v,c),x=u+e,B=u+x,w=[];for(let i=0;i<b;++i){const e=C[i],a=h[f.get(e.id)]+I[i],s=g[a],l=jce[o[a]];if(t===e&&n===s||l===jce[0])continue;const c=u+l;if(E[i]<(B+l)*(B+l)){const t=g[a];w[w.length]=[E[i],(E[i]+x*x-c*c)/(2*x),e.conformation.x(t)-r,e.conformation.y(t)-A,e.conformation.z(t)-v]}}w.sort(((e,t)=>e[0]-t[0]));let _=0;e:for(let o=0;o<s.length;++o){const[e,t,n]=s[o];for(let r=0;r<w.length;++r){const[,o,i,a,s]=w[r];if(e*i+t*a+n*s>o)continue e}++_}a[i[y]]+=l*_*x*x}}const Xce={numberOfSpherePoints:U_.Numeric(92,{min:12,max:360,step:1},{description:"Number of sphere points to sample per atom: 92 (original paper), 960 (BioJava), 3000 (EPPIC) - see Shrake A, Rupley JA: Environment and exposure to solvent of protein atoms. Lysozyme and insulin. J Mol Biol 1973."}),probeSize:U_.Numeric(1.4,{min:.1,max:4,step:.01},{description:"Corresponds to the size of a water molecule: 1.4 (original paper), 1.5 (occassionally used)"}),nonPolymer:U_.Boolean(!1,{description:"Include non-polymer atoms as occluders."}),traceOnly:U_.Boolean(!1,{description:"Compute only using alpha-carbons, if true increase probeSize accordingly (e.g., 4 A). Considers only canonical amino acids."})};var Wce;!function(e){function t(e){const t=[],n=Math.PI*(3-Math.sqrt(5)),r=2/e;for(let o=0;o<e;++o){const e=o*r-1+r/2,i=Math.sqrt(1-e*e),a=o*n;t[t.length]=qh.create(Math.cos(a)*i,e,Math.sin(a)*i)}return t}function n(e,t){return t/(zce[e]||121)}function r(e,t){const{area:n,serialResidueIndex:r}=t,o=r[Em.indexOf(Em.ofSortedArray(e.structure.root.serialMapping.elementIndices),e.element)];return-1===o?-1:n[o]}function o(e,t){const o=r(e,t);return-1===o?-1:n(WL.atom.label_comp_id(e),o)}e.compute=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={...U_.getDefaultValues(Xce),...n};return Tw.create("Compute Accessible Surface Area",(async n=>await async function(e,n,r){const o=function(e,n){const{elementCount:r,atomicResidueCount:o}=e,{probeSize:i,nonPolymer:a,traceOnly:s,numberOfSpherePoints:l}=n;return{structure:e,probeSize:i,nonPolymer:a,traceOnly:s,spherePoints:t(l),scalingConstant:4*Math.PI/l,maxLookupRadius:2*n.probeSize+2*jce[2],atomRadiusType:new Int8Array(r),serialResidueIndex:new Int32Array(r),area:new Float32Array(o)}}(n,r);(function(e){const{key:t}=WL.residue,{type_symbol:n,label_atom_id:r,label_comp_id:o}=WL.atom,{structure:i,atomRadiusType:a,serialResidueIndex:s}=e,l=Vk.create(i);let c=0,u=0,d=-1;l.structure=i;for(let A=0,f=0,p=i.units.length;A<p;++A){const p=i.units[A],{elements:h}=p;l.unit=p,c=-1;for(let i=0,A=h.length;i<A;++i){const A=h[i],g=f+i;l.element=A,u=t(l),c!==u&&++d,c=u;const m=n(l);if(dR(sR(m))){a[g]=0,s[g]=-1;continue}const y=r(l),v=HP(p,A);if(2===v||!e.nonPolymer&&!GM(v)){a[g]=0,s[g]=-1;continue}const b=o(l);!e.traceOnly||("CA"===y||"BB"===y)&&zce[b]?(jM(v)?a[g]=Vce(0,m):a[g]=5===v?Hce(y,m,b):qce(m),s[g]=d):(a[g]=0,s[g]=d)}f+=h.length}})(o),await async function(e,t){const{atomRadiusType:n}=t;for(let r=0;r<n.length;r+=5e3)e.shouldUpdate&&await e.update({message:"Computing per residue surface accessibility...",current:r,max:n.length}),Yce(t,r,Math.min(r+5e3,n.length))}(e,o);const{area:i,serialResidueIndex:a}=o;return{area:i,serialResidueIndex:a}}(n,e,r)))},e.Flag={NA:0,Buried:1,Accessible:2},e.normalize=n,e.getValue=r,e.getNormalizedValue=o,e.getFlag=function(e,t){const n=o(e,t);return-1===n?0:n<.16?1:2}}(Wce||(Wce={}));const Kce={...Xce},Jce={isBuried:az.Dynamic(vQ("computed","accessible-surface-area.is-buried",qk.Bool),(e=>{if(!BO.isAtomic(e.element.unit))return!1;const t=Zce.get(e.element.structure).value;return!!t&&1===Wce.getFlag(e.element,t)})),isAccessible:az.Dynamic(vQ("computed","accessible-surface-area.is-accessible",qk.Bool),(e=>{if(!BO.isAtomic(e.element.unit))return!1;const t=Zce.get(e.element.structure).value;return!!t&&2===Wce.getFlag(e.element,t)}))},Zce=TL.createProvider({label:"Accessible Surface Area",descriptor:Jk({name:"molstar_accessible_surface_area",symbols:Jce}),type:"root",defaultParams:Kce,getParams:e=>Kce,isApplicable:e=>!0,obtain:async(e,t,n)=>{const r={...U_.getDefaultValues(Kce),...n};return{value:await Wce.compute(t,r).runInContext(e.runtime)}}}),$ce=Jp(16448250),eue={list:U_.ColorList("rainbow",{presetKind:"scale"})};const tue={name:"accessible-surface-area",label:"Accessible Surface Area",category:d5.Category.Residue,factory:function e(t,n){let r;const o=yy.create({listOrName:n.list.colors,minLabel:"buried",maxLabel:"exposed",domain:[0,1]}),i=t.structure&&Zce.get(t.structure),a=i?Qh(i.id,i.version):-1;if((null===i||void 0===i?void 0:i.value)&&t.structure){const e=Vk.create(t.structure),n=i.value,a=e=>{const t=Wce.getNormalizedValue(e,n);return-1===t?$ce:o.color(t)};r=t=>Vk.is(t)&&BO.isAtomic(t.unit)?a(t):RP.isLocation(t)?(e.unit=t.aUnit,e.element=t.aUnit.elements[t.aIndex],a(e)):$ce}else r=()=>$ce;return{factory:e,granularity:"group",preferSmoothing:!0,color:r,props:n,contextHash:a,description:"Assigns a color based on the relative accessible surface area of a residue.",legend:o?o.legend:void 0}},getParams:function(e){return eue},defaultValues:U_.getDefaultValues(eue),isApplicable:e=>!!e.structure,ensureCustomProperties:{attach:(e,t)=>t.structure?Zce.attach(e,t.structure,void 0,!0):Promise.resolve(),detach:e=>e.structure&&Zce.ref(e.structure,!1)}},nue=tie.create({name:"computed-accessible-surface-area-prop",category:"custom-props",display:{name:"Accessible Surface Area"},ctor:class extends tie.Handler{constructor(){super(...arguments),this.provider=Zce,this.labelProvider={label:e=>{if(this.params.showTooltip)return function(e){if("element-loci"===e.kind){if(0===e.elements.length)return;const t=Zce.get(e.structure).value;if(!t||e.structure.customPropertyDescriptors.hasReference(Zce.descriptor))return;const{getSerialIndex:n}=e.structure.root.serialMapping,{area:r,serialResidueIndex:o}=t,i=new Set;let a=0;for(const{indices:s,unit:l}of e.elements){const{elements:e}=l;ey.forEach(s,(t=>{const s=o[n(l,e[t])];-1===s||i.has(s)||(a+=r[s],i.add(s))}))}if(0===i.size)return;return`Accessible Surface Area ${`<small>(${i.size} ${i.size>1?"Residues sum":"Residue"})</small>`}: ${a.toFixed(2)} \u212b<sup>2</sup>`}if("structure-loci"===e.kind){const t=Zce.get(e.structure).value;if(!t||e.structure.customPropertyDescriptors.hasReference(Zce.descriptor))return;return`Accessible Surface Area <small>(Whole Structure)</small>: ${W_(t.area).toFixed(2)} \u212b<sup>2</sup>`}}(e)}}}update(e){const t=this.params.autoAttach!==e.autoAttach||this.params.showTooltip!==e.showTooltip;return this.params.autoAttach=e.autoAttach,this.params.showTooltip=e.showTooltip,this.ctx.customStructureProperties.setDefaultAutoAttach(this.provider.descriptor.name,this.params.autoAttach),t}register(){tz.addCustomProp(this.provider.descriptor),this.ctx.customStructureProperties.register(this.provider,this.params.autoAttach),this.ctx.representation.structure.themes.colorThemeRegistry.add(tue),this.ctx.managers.lociLabels.addProvider(this.labelProvider),this.ctx.query.structure.registry.add(rue),this.ctx.query.structure.registry.add(oue)}unregister(){tz.removeCustomProp(this.provider.descriptor),this.ctx.customStructureProperties.unregister(this.provider.descriptor.name),this.ctx.representation.structure.themes.colorThemeRegistry.remove(tue),this.ctx.managers.lociLabels.removeProvider(this.labelProvider),this.ctx.query.structure.registry.remove(rue),this.ctx.query.structure.registry.remove(oue)}},params:()=>({autoAttach:U_.Boolean(!1),showTooltip:U_.Boolean(!0)})});const rue=O7("Buried Protein Residues",FQ.struct.modifier.union([FQ.struct.modifier.wholeResidues([FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"chain-test":FQ.core.rel.eq([FQ.ammp("objectPrimitive"),"atomistic"]),"residue-test":Jce.isBuried.symbol()})])])]),{description:"Select buried protein residues.",category:P7.Residue,ensureCustomProperties:(e,t)=>Zce.attach(e,t)}),oue=O7("Accessible Protein Residues",FQ.struct.modifier.union([FQ.struct.modifier.wholeResidues([FQ.struct.modifier.union([FQ.struct.generator.atomGroups({"chain-test":FQ.core.rel.eq([FQ.ammp("objectPrimitive"),"atomistic"]),"residue-test":Jce.isAccessible.symbol()})])])]),{description:"Select accessible protein residues.",category:P7.Residue,ensureCustomProperties:(e,t)=>Zce.attach(e,t)}),iue=tie.create({name:"computed-interactions-prop",category:"custom-props",display:{name:"Interactions"},ctor:class extends tie.Handler{constructor(){super(...arguments),this.provider=ooe,this.labelProvider={label:e=>{if(this.params.showTooltip&&"element-loci"===e.kind){if(0===e.elements.length)return;const t=[],n=this.getStructures(e.structure);for(const r of n){const n=this.provider.get(r).value;if(!n)continue;const o=cG.remap(e,r);if(1!==o.elements.length)continue;const i=o.elements[0];if(1!==ey.size(i.indices))continue;const a=n.unitsFeatures.get(i.unit.id);if(!a)continue;const s=[],l=[],c=[],u=ey.start(i.indices),{types:d,groups:A,elementsIndex:{indices:f,offsets:p}}=a;for(let e=p[u],t=p[u+1];e<t;++e){const t=f[e],n=d[t],r=A[t];n&&s.push(vne(n)),r&&l.push(bne(r))}s.length&&c.push(`<small>Types</small> ${s.join(", ")}`),l.length&&c.push(`<small>Groups</small> ${l.join(", ")}`),c.length&&t.push(`Interaction Feature: ${c.join(" | ")}`)}return t.length?t.join("<br/>"):void 0}}}}getStructures(e){const t=[],n=this.ctx.helpers.substructureParent.get(e);if(n){const e=this.ctx.state.data.select(V_.Generators.ofType(Jz.Molecule.Structure,n.transform.ref));for(const n of e)n.obj&&tS(t,n.obj.data)}return t}update(e){const t=this.params.autoAttach!==e.autoAttach||this.params.showTooltip!==e.showTooltip;return this.params.autoAttach=e.autoAttach,this.params.showTooltip=e.showTooltip,this.ctx.customStructureProperties.setDefaultAutoAttach(this.provider.descriptor.name,this.params.autoAttach),t}register(){this.ctx.customStructureProperties.register(this.provider,this.params.autoAttach),this.ctx.representation.structure.themes.colorThemeRegistry.add(Koe),this.ctx.managers.lociLabels.addProvider(this.labelProvider),this.ctx.representation.structure.registry.add(Hoe)}unregister(){this.ctx.customStructureProperties.unregister(this.provider.descriptor.name),this.ctx.representation.structure.themes.colorThemeRegistry.remove(Koe),this.ctx.managers.lociLabels.removeProvider(this.labelProvider),this.ctx.representation.structure.registry.remove(Hoe)}},params:()=>({autoAttach:U_.Boolean(!1),showTooltip:U_.Boolean(!0)})}),aue=tie.create({name:"computed-secondary-structure-prop",category:"custom-props",display:{name:"Secondary Structure"},ctor:class extends tie.Handler{constructor(){super(...arguments),this.provider=ML}update(e){const t=this.params.autoAttach!==e.autoAttach;return this.params.autoAttach=e.autoAttach,this.ctx.customStructureProperties.setDefaultAutoAttach(this.provider.descriptor.name,this.params.autoAttach),t}register(){this.ctx.customStructureProperties.register(this.provider,this.params.autoAttach)}unregister(){this.ctx.customStructureProperties.unregister(this.provider.descriptor.name)}},params:()=>({autoAttach:U_.Boolean(!1)})}),sue=tie.create({name:"computed-valence-model-prop",category:"custom-props",display:{name:"Valence Model"},ctor:class extends tie.Handler{constructor(){super(...arguments),this.provider=sne,this.labelProvider={label:e=>{if(this.params.showTooltip&&"element-loci"===e.kind){if(0===e.elements.length)return;const t=[],n=this.getStructures(e.structure);for(const r of n){const n=this.provider.get(r).value;if(!n)continue;const o=cG.remap(e,r);if(1!==o.elements.length)continue;const i=o.elements[0];if(1!==ey.size(i.indices))continue;const a=n.get(i.unit.id);if(!a)continue;const s=ey.start(i.indices),l=a.charge[s],c=a.idealGeometry[s],u=a.implicitH[s],d=a.totalH[s];t.push(`Valence Model: <small>Charge</small> ${l} | <small>Ideal Geometry</small> ${jte(c)} | <small>Implicit H</small> ${u} | <small>Total H</small> ${d}`)}return t.length?t.join("<br/>"):void 0}}}}getStructures(e){const t=[],n=this.ctx.helpers.substructureParent.get(e);if(n){const e=this.ctx.state.data.select(V_.Generators.ofType(Jz.Molecule.Structure,n.transform.ref));for(const n of e)n.obj&&tS(t,n.obj.data)}return t}update(e){const t=this.params.autoAttach!==e.autoAttach||this.params.showTooltip!==e.showTooltip;return this.params.autoAttach=e.autoAttach,this.params.showTooltip=e.showTooltip,this.ctx.customStructureProperties.setDefaultAutoAttach(this.provider.descriptor.name,this.params.autoAttach),t}register(){this.ctx.customStructureProperties.register(this.provider,this.params.autoAttach),this.ctx.managers.lociLabels.addProvider(this.labelProvider)}unregister(){this.ctx.customStructureProperties.unregister(this.provider.descriptor.name),this.ctx.managers.lociLabels.removeProvider(this.labelProvider)}},params:()=>({autoAttach:U_.Boolean(!1),showTooltip:U_.Boolean(!0)})}),lue=Jp(16448250),cue=new Map,uue={...D2({type:"colors",colorList:"set-1"})};const due={name:"sifts-mapping",label:"SIFTS Mapping",category:d5.Category.Residue,factory:function e(t,n){let r;if(t.structure){for(const n of t.structure.models){const e=AG.Provider.get(n).value;if(e)for(const t of e.accession)t&&!cue.has(t)&&cue.set(t,cue.size)}const e=Vk.create(t.structure),o=k2(cue.size+1,n,{valueLabel:e=>`${e}`}),i=new Map,a=e=>{const t=AG.getKey(e);if(!t)return lue;if(i.has(t))return i.get(t);const n=o.color(cue.get(t));return i.set(t,n),n};r=t=>Vk.is(t)&&BO.isAtomic(t.unit)?a(t):RP.isLocation(t)?(e.unit=t.aUnit,e.element=t.aUnit.elements[t.aIndex],a(e)):lue}else r=()=>lue;return{factory:e,granularity:"group",preferSmoothing:!0,color:r,props:n,description:"Assigns a color based on SIFTS mapping."}},getParams:function(e){return uue},defaultValues:U_.getDefaultValues(uue),isApplicable:e=>{var t;return!!(null===(t=e.structure)||void 0===t?void 0:t.models.some((e=>AG.Provider.isApplicable(e))))},ensureCustomProperties:{attach:async(e,t)=>{if(t.structure)for(const n of t.structure.models)await AG.Provider.attach(e,n,void 0,!0)},detach:e=>{if(e.structure)for(const t of e.structure.models)AG.Provider.ref(t,!1)}}},Aue=tie.create({name:"sifts-mapping-prop",category:"custom-props",display:{name:"SIFTS Mapping"},ctor:class extends tie.Handler{constructor(){super(...arguments),this.provider=AG.Provider,this.labelProvider={label:e=>{if(this.params.showTooltip)return function(e){if("element-loci"===e.kind){if(0===e.elements.length)return;const t=e.elements[0],n=t.unit,r=Vk.create(e.structure,n,n.elements[ey.getAt(t.indices,0)]);return AG.getLabel(r)}}(e)}}}update(e){const t=this.params.autoAttach!==e.autoAttach||this.params.showTooltip!==e.showTooltip;return this.params.autoAttach=e.autoAttach,this.params.showTooltip=e.showTooltip,this.ctx.customStructureProperties.setDefaultAutoAttach(this.provider.descriptor.name,this.params.autoAttach),t}register(){this.ctx.customModelProperties.register(this.provider,this.params.autoAttach),this.ctx.representation.structure.themes.colorThemeRegistry.add(due),this.ctx.managers.lociLabels.addProvider(this.labelProvider)}unregister(){this.ctx.customModelProperties.unregister(this.provider.descriptor.name),this.ctx.representation.structure.themes.colorThemeRegistry.remove(due),this.ctx.managers.lociLabels.removeProvider(this.labelProvider)}},params:()=>({autoAttach:U_.Boolean(!0),showTooltip:U_.Boolean(!0)})});var fue;!function(e){e.Descriptor={name:"ihm_cross_link_restraint"},e.Provider=Gk.create(e.Descriptor),e.fromTable=function(e,t){const n={entity_id:e.entity_id_1,asym_id:e.asym_id_1,seq_id:e.seq_id_1,atom_id:e.atom_id_1},r={entity_id:e.entity_id_2,asym_id:e.asym_id_2,seq_id:e.seq_id_2,atom_id:e.atom_id_2};function o(e,t,n){const r=e.get(t);r?r.push(n):e.set(t,[n])}function i(n,r){const i=r.entity_id.value(n),c=r.asym_id.value(n),u=r.seq_id.value(n);if("by-atom"===e.model_granularity.value(n)){const e=t.atomicHierarchy.index.findAtom({auth_seq_id:u,label_asym_id:c,label_atom_id:r.atom_id.value(n),label_entity_id:i});e>=0&&o(a,e,n)}else if(t.coarseHierarchy.isDefined){const e=t.coarseHierarchy.spheres.findSequenceKey(i,c,u);if(e>=0)o(s,e,n);else{const e=t.coarseHierarchy.gaussians.findSequenceKey(i,c,u);e>=0&&o(l,e,n)}}}const a=new Map,s=new Map,l=new Map,c=[];for(let u=0;u<e._rowCount;++u)i(u,n),i(u,r);return{getIndicesByElement:(e,t)=>{const n=function(e){switch(e){case 0:return a;case 1:return s;case 2:return l}}(t),r=n.get(e);return void 0!==r?r:c},data:e}}}(fue||(fue={}));const pue=[];function hue(e,t,n,r){return`${e}|${t.id}|${n}|${r.id}`}class gue{getPairIndices(e,t,n,r){const o=hue(e,t,n,r);return this.pairKeyIndices.get(o)||pue}getPairs(e,t,n,r){return this.getPairIndices(e,t,n,r).map((e=>this.pairs[e]))}constructor(e){this.pairs=e;const t=new Map;this.pairs.forEach(((e,n)=>{const r=hue(e.indexA,e.unitA,e.indexB,e.unitB),o=t.get(r);o?o.push(n):t.set(r,[n])})),this.count=e.length,this.pairKeyIndices=t}}const mue=TL.createProvider({label:"Cross Link Restraint",descriptor:Jk({name:"integrative-cross-link-restraint"}),type:"local",defaultParams:{},getParams:e=>({}),isApplicable:e=>e.models.some((e=>!!fue.Provider.get(e))),obtain:async(e,t,n)=>({value:Eue(t)})});var yue;function vue(e,t,n){const{elements:r}=t,o=r.length,i=t.kind;for(let a=0;a<o;a++){const t=r[a];n.getIndicesByElement(t,i).forEach((t=>e.set(t,a)))}}function bue(e,t,n){if(t.model!==n.model)return;if("mmCIF"!==t.model.sourceData.kind)return;const r=fue.Provider.get(t.model);if(!r)return;const o=new Map,i=new Map;vue(o,t,r),vue(i,n,r),o.forEach(((o,a)=>{const s=i.get(a);void 0!==s&&e.push(Iue(t,o,n,s,r,a),Iue(n,s,t,o,r,a))}))}function Cue(e,t){if("mmCIF"!==t.model.sourceData.kind)return;const n=fue.Provider.get(t.model);if(!n)return;const{elements:r}=t,o=r.length,i=t.kind,a=new Map;for(let s=0;s<o;s++){const e=r[s];n.getIndicesByElement(e,i).forEach((e=>{const t=a.get(e);t?t.push(s):a.set(e,[s])}))}a.forEach(((r,o)=>{if(r.length<2)return;const[i,a]=r;e.push(Iue(t,i,t,a,n,o),Iue(t,a,t,i,n,o))}))}function Iue(e,t,n,r,o,i){return{unitA:e,indexA:t,unitB:n,indexB:r,restraintType:o.data.restraint_type.value(i),distanceThreshold:o.data.distance_threshold.value(i),psi:o.data.psi.value(i),sigma1:o.data.sigma_1.value(i),sigma2:o.data.sigma_2.value(i)}}function Eue(e){const t=[];if(!e.models.some((e=>fue.Provider.get(e))))return new gue(t);const n=e.units.length;for(let r=0;r<n;++r){const o=e.units[r];Cue(t,o);for(let i=r+1;i<n;++i){const n=e.units[i];o.model===n.model&&bue(t,o,n)}}return new gue(t)}function xue(e,t,n,r,o){const i=mue.get(t).value;if(!i.count)return RY.createEmpty(o);const{sizeFactor:a}=r,s=Vk.create(t),l={linkCount:i.count,position:(e,t,n)=>{const r=i.pairs[n],o=r.unitA,a=r.unitB;o.conformation.position(o.elements[r.indexA],e),a.conformation.position(a.elements[r.indexB],t)},radius:e=>{const t=i.pairs[e];return s.unit=t.unitA,s.element=t.unitA.elements[t.indexA],n.size.size(s)*a}},{mesh:c,boundingSphere:u}=Eoe(0,l,r,o);if(u)c.setBoundingSphere(u);else if(c.triangleCount>0){const e=YT.expand(YT(),t.boundary.sphere,1*a);c.setBoundingSphere(e)}return c}!function(e){let t;!function(e){e.CrossLinkRestraint="cross-link-restraint"}(t=e.Tag||(e.Tag={})),e.isApplicable=function(e){return e.models.some((e=>!!fue.Provider.get(e)))};const n=qh(),r=qh();function o(e){return e.unitA.conformation.position(e.unitA.elements[e.indexA],n),e.unitB.conformation.position(e.unitB.elements[e.indexB],r),qh.distance(n,r)}function i(e,t){const n=e.pairs[t];return`Cross Link Restraint | Type: ${n.restraintType} | Threshold: ${n.distanceThreshold} \u212b | Psi: ${n.psi} | Sigma 1: ${n.sigma1} | Sigma 2: ${n.sigma2} | Distance: ${o(n).toFixed(2)} \u212b`}function a(e,t,n){return KM.fromPairProvider(t.length,((n,r,o)=>{const i=e.pairs[t[n]];i.unitA.conformation.position(i.unitA.elements[i.indexA],r),i.unitB.conformation.position(i.unitB.elements[i.indexB],o)}),n)}function s(e,t,n){const r=n[0];if(void 0===r)return"";const o=t.pairs[r];return[i(t,r),n8(RP.Location(e,o.unitA,o.indexA,e,o.unitB,o.indexB))].join("</br>")}e.distance=o,e.Location=function(e,t,n){return ET("cross-link-restraints",{structure:t,crossLinkRestraints:e},n)},e.isLocation=function(e){return!!e&&"data-location"===e.kind&&"cross-link-restraints"===e.tag},e.areLocationsEqual=function(e,t){return e.data.structure===t.data.structure&&e.data.crossLinkRestraints===t.data.crossLinkRestraints&&e.element===t.element},e.locationLabel=function(e){return i(e.data.crossLinkRestraints,e.element)},e.Loci=function(e,t,n){return k5("cross-link-restraints",{structure:e,crossLinkRestraints:t},n,(e=>a(t,n,e)),(()=>s(e,t,n)))},e.isLoci=function(e){return!!e&&"data-loci"===e.kind&&"interactions"===e.tag},e.getBoundingSphere=a,e.getLabel=s}(yue||(yue={}));const Bue={...vte,...doe,sizeFactor:U_.Numeric(.5,{min:0,max:10,step:.1})};function wue(e){return bte({defaultProps:U_.getDefaultValues(Bue),createGeometry:xue,createLocationIterator:_ue,getLoci:Sue,eachLocation:Due,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.radialSegments!==n.radialSegments||t.linkCap!==n.linkCap}},e)}function _ue(e){const t=mue.get(e).value,{pairs:n}=t,r=n.length,o=yue.Location(t,e);return xT(r,1,1,(e=>(o.element=e,o)),!0)}function Sue(e,t,n){const{objectId:r,groupId:o}=e;if(n===r){const e=mue.get(t).value;if(e.pairs[o])return yue.Loci(t,e,[o])}return S5}function Due(e,t,n){let r=!1;if(yue.isLoci(e)){if(!aG.areEquivalent(e.data.structure,t))return!1;const o=mue.get(t).value;if(e.data.crossLinkRestraints!==o)return!1;for(const t of e.elements)n(Gg.ofSingleton(t))&&(r=!0)}return r}const Tue={"cross-link-restraint":(e,t)=>wee("Cross-link restraint",e,t,wue)},kue={...Bue};const Que={name:yue.Tag.CrossLinkRestraint,label:"Cross Link Restraint",description:"Displays cross-link restraints.",factory:function(e,t){return b6.createMulti("CrossLinkRestraint",e,t,Ute,Tue)},getParams:function(e,t){return U_.clone(kue)},defaultValues:U_.getDefaultValues(kue),defaultColorTheme:{name:yue.Tag.CrossLinkRestraint},defaultSizeTheme:{name:"uniform"},isApplicable:e=>yue.isApplicable(e),ensureCustomProperties:{attach:(e,t)=>mue.attach(e,t,void 0,!0),detach:e=>mue.ref(e,!1)}},Mue=Jp(13421772),Rue={domain:U_.Interval([.5,1.5],{step:.01}),list:U_.ColorList("red-grey",{presetKind:"scale"})};const Pue={name:"cross-link",label:"Cross Link",category:d5.Category.Misc,factory:function e(t,n){let r,o;const i=t.structure&&mue.get(t.structure).value;if(i){o=yy.create({domain:n.domain,listOrName:n.list.colors});const e=o.color;r=t=>{if(yue.isLocation(t)){const n=i.pairs[t.element];if(n)return e(yue.distance(n)/n.distanceThreshold)}return Mue}}else r=()=>Mue;return{factory:e,granularity:"group",color:r,props:n,description:"Colors cross-links by the deviation of the observed distance versus the modeled distance (e.g. modeled / `ihm_cross_link_restraint.distance_threshold`).",legend:o?o.legend:void 0}},getParams:function(e){return Rue},defaultValues:U_.getDefaultValues(Rue),isApplicable:e=>!!e.structure&&yue.isApplicable(e.structure),ensureCustomProperties:{attach:(e,t)=>t.structure?mue.attach(e,t.structure,void 0,!0):Promise.resolve(),detach:e=>e.structure&&mue.ref(e.structure,!1)}},Oue=tie.create({name:"integrative-cross-link-restraint",category:"custom-props",display:{name:"Cross Link Restraint"},ctor:class extends tie.Handler{constructor(){super(...arguments),this.provider=fue.Provider}register(){this.provider.formatRegistry.add("mmCIF",Fue),this.ctx.representation.structure.themes.colorThemeRegistry.add(Pue),this.ctx.representation.structure.registry.add(Que)}unregister(){this.provider.formatRegistry.remove("mmCIF"),this.ctx.representation.structure.themes.colorThemeRegistry.remove(Pue),this.ctx.representation.structure.registry.remove(Que)}}});function Fue(e){if(!iL.is(e.sourceData))return;const{ihm_cross_link_restraint:t}=e.sourceData.data.db;return 0!==t._rowCount?fue.fromTable(t,e):void 0}const Nue=["target","surroundings","interactions"];var Lue;!function(e){e.TargetSel="structure-focus-target-sel",e.TargetRepr="structure-focus-target-repr",e.SurrSel="structure-focus-surr-sel",e.SurrRepr="structure-focus-surr-repr",e.SurrNciRepr="structure-focus-surr-nci-repr"}(Lue||(Lue={}));const Uue=new Set([Lue.TargetSel,Lue.TargetRepr,Lue.SurrSel,Lue.SurrRepr,Lue.SurrNciRepr]);class Gue extends tie.WithSubscribers{constructor(){super(...arguments),this.currentSource=void 0}get surrLabel(){return`[Focus] Surroundings (${this.params.expandRadius} \xc5)`}getReprParams(e){return{...e,type:{name:e.type.name,params:{...e.type.params,ignoreHydrogens:this.params.ignoreHydrogens,ignoreHydrogensVariant:this.params.ignoreHydrogensVariant,ignoreLight:this.params.ignoreLight,material:this.params.material,clip:this.params.clip}}}}ensureShape(e){var t;const n=this.plugin.state.data,r=n.tree,o=n.build(),i=V_.findUniqueTagsInSubtree(r,e.transform.ref,Uue);i[Lue.TargetSel]||(i[Lue.TargetSel]=o.to(e).apply(_7.Model.StructureSelectionFromBundle,{bundle:SO.Empty,label:"[Focus] Target"},{tags:Lue.TargetSel}).ref),i[Lue.SurrSel]||(i[Lue.SurrSel]=o.to(e).apply(_7.Model.StructureSelectionFromExpression,{expression:FQ.struct.generator.empty(),label:this.surrLabel},{tags:Lue.SurrSel}).ref);const a=this.params.components;return a.indexOf("target")>=0&&!i[Lue.TargetRepr]&&(i[Lue.TargetRepr]=o.to(i[Lue.TargetSel]).apply(_7.Representation.StructureRepresentation3D,this.getReprParams(this.params.targetParams),{tags:Lue.TargetRepr}).ref),a.indexOf("surroundings")>=0&&!i[Lue.SurrRepr]&&(i[Lue.SurrRepr]=o.to(i[Lue.SurrSel]).apply(_7.Representation.StructureRepresentation3D,this.getReprParams(this.params.surroundingsParams),{tags:Lue.SurrRepr}).ref),a.indexOf("interactions")>=0&&!i[Lue.SurrNciRepr]&&e.obj&&Hoe.isApplicable(null===(t=e.obj)||void 0===t?void 0:t.data)&&(i[Lue.SurrNciRepr]=o.to(i[Lue.SurrSel]).apply(_7.Representation.StructureRepresentation3D,this.getReprParams(this.params.nciParams),{tags:Lue.SurrNciRepr}).ref),{state:n,builder:o,refs:i}}clear(e){const t=this.plugin.state.data;this.currentSource=void 0;const n=t.select(V_.Generators.byRef(e).subtree().withTag(Lue.TargetSel)),r=t.select(V_.Generators.byRef(e).subtree().withTag(Lue.SurrSel));if(0===n.length&&0===r.length)return;const o=t.build(),i=SO.Empty;for(const s of n)o.to(s).update(_7.Model.StructureSelectionFromBundle,(e=>({...e,bundle:i})));const a=FQ.struct.generator.empty();for(const s of r)o.to(s).update(_7.Model.StructureSelectionFromExpression,(e=>({...e,expression:a})));return die.State.Update(this.plugin,{state:t,tree:o,options:{doNotLogTiming:!0,doNotUpdateCurrent:!0}})}async focus(e){const t=this.plugin.helpers.substructureParent.get(e.structure);if(!t||!t.obj)return;this.currentSource=e;const n=cG.remap(e,t.obj.data),r=cG.extendToWholeResidues(n),o=SO.fromLoci(r),i=SO.toExpression(o);let a=FQ.struct.modifier.includeSurroundings({0:i,radius:this.params.expandRadius,"as-whole-residues":!0});this.params.excludeTargetFromSurroundings&&(a=FQ.struct.modifier.exceptBy({0:a,by:i}));const{state:s,builder:l,refs:c}=this.ensureShape(t);l.to(c[Lue.TargetSel]).update(_7.Model.StructureSelectionFromBundle,(e=>({...e,bundle:o}))),l.to(c[Lue.SurrSel]).update(_7.Model.StructureSelectionFromExpression,(e=>({...e,expression:a,label:this.surrLabel}))),await die.State.Update(this.plugin,{state:s,tree:l,options:{doNotLogTiming:!0,doNotUpdateCurrent:!0}})}register(e){this.subscribeObservable(this.plugin.managers.structure.focus.behaviors.current,(e=>{e?this.focus(e.loci):this.clear(z_.RootRef)}))}async update(e){const t=this.params;if(this.params=e,t.excludeTargetFromSurroundings!==e.excludeTargetFromSurroundings)return this.currentSource&&this.focus(this.currentSource),!0;const n=this.plugin.state.data,r=n.build(),o=V_.Generators.root.subtree(),i=this.params.components;let a=i.indexOf("target")>=0;for(const s of n.select(o.withTag(Lue.TargetRepr)))a?r.to(s).update(this.getReprParams(this.params.targetParams)):r.delete(s.transform.ref);a=i.indexOf("surroundings")>=0;for(const s of n.select(o.withTag(Lue.SurrRepr)))a?r.to(s).update(this.getReprParams(this.params.surroundingsParams)):r.delete(s.transform.ref);a=i.indexOf("interactions")>=0;for(const s of n.select(o.withTag(Lue.SurrNciRepr)))a?r.to(s).update(this.getReprParams(this.params.nciParams)):r.delete(s.transform.ref);return await die.State.Update(this.plugin,{state:n,tree:r,options:{doNotLogTiming:!0,doNotUpdateCurrent:!0}}),e.expandRadius===t.expandRadius||(this.currentSource&&this.focus(this.currentSource),!0)}}const jue=tie.create({name:"create-structure-focus-representation",display:{name:"Structure Focus Representation"},category:"interaction",ctor:Gue,params:(e,t)=>(e=>{const t=_7.Representation.StructureRepresentation3D.definition.params(void 0,e);return{expandRadius:U_.Numeric(5,{min:1,max:10,step:1}),targetParams:U_.Group(t,{label:"Target",customDefault:Joe(e,void 0,{type:"ball-and-stick",size:"physical",typeParams:{sizeFactor:.22,sizeAspectRatio:.73,adjustCylinderLength:!0,xrayShaded:!0,aromaticBonds:!1,multipleBonds:"off",excludeTypes:["hydrogen-bond","metal-coordination"]}})}),surroundingsParams:U_.Group(t,{label:"Surroundings",customDefault:Joe(e,void 0,{type:"ball-and-stick",size:"physical",typeParams:{sizeFactor:.16,excludeTypes:["hydrogen-bond","metal-coordination"]}})}),nciParams:U_.Group(t,{label:"Non-covalent Int.",customDefault:Joe(e,void 0,{type:Hoe,color:Koe,size:y5.BuiltIn.uniform})}),components:U_.MultiSelect(Nue,U_.arrayToOptions(Nue)),excludeTargetFromSurroundings:U_.Boolean(!1,{label:"Exclude Target",description:'Exclude the focus "target" from the surroudings component.'}),ignoreHydrogens:U_.Boolean(!1),ignoreHydrogensVariant:U_.Select("all",U_.arrayToOptions(["all","non-polar"])),ignoreLight:U_.Boolean(!1),material:Tk.getParam(),clip:U_.Group(kk.Params)}})(t)});function zue(e){return e}!function(e){e.CommonParams={ignoreHydrogens:U_.Optional(U_.Boolean(!1)),ignoreHydrogensVariant:U_.Optional(U_.Select("all",U_.arrayToOptions(["all","non-polar"]))),ignoreLight:U_.Optional(U_.Boolean(!1)),quality:U_.Optional(U_.Select("auto",Mk)),theme:U_.Optional(U_.Group({globalName:U_.Optional(U_.Text("")),globalColorParams:U_.Optional(U_.Value({},{isHidden:!0})),carbonColor:U_.Optional(U_.Select("chain-id",U_.arrayToOptions(["chain-id","operator-name","element-symbol"]))),symmetryColor:U_.Optional(U_.Text("")),symmetryColorParams:U_.Optional(U_.Value({},{isHidden:!0})),focus:U_.Optional(U_.Group({name:U_.Optional(U_.Text("")),params:U_.Optional(U_.Value({}))}))}))},e.reprBuilder=function(e,t,n){var r,o,i,a,s,l,c,u,d,A,f,p,h,g;const m=e.state.data.build(),y=e.builders.structure.representation,v=e.managers.structure.component.state.options.hydrogens,b={quality:e.managers.structure.component.state.options.visualQuality,ignoreHydrogens:"all"!==v,ignoreHydrogensVariant:"only-polar"===v?"non-polar":"all",ignoreLight:e.managers.structure.component.state.options.ignoreLight};t.quality&&"auto"!==t.quality&&(b.quality=t.quality),void 0!==t.ignoreHydrogens&&(b.ignoreHydrogens=!!t.ignoreHydrogens),void 0!==t.ignoreHydrogensVariant&&(b.ignoreHydrogensVariant=t.ignoreHydrogensVariant),void 0!==t.ignoreLight&&(b.ignoreLight=!!t.ignoreLight);const C=(null===(r=t.theme)||void 0===r?void 0:r.globalName)?null===(o=t.theme)||void 0===o?void 0:o.globalName:void 0,I=void 0!==(null===(i=t.theme)||void 0===i?void 0:i.carbonColor)?{carbonColor:(E=null===(a=t.theme)||void 0===a?void 0:a.carbonColor,"chain-id"===E?{name:E,params:N2.defaultValues}:"operator-name"===E?{name:E,params:Y2.defaultValues}:{name:E,params:{}}),...null===(s=t.theme)||void 0===s?void 0:s.globalColorParams}:{...null===(l=t.theme)||void 0===l?void 0:l.globalColorParams};var E;const x=n&&(null===(c=t.theme)||void 0===c?void 0:c.symmetryColor)&&function(e){return e.units.some((e=>!e.conformation.operator.assembly&&e.conformation.operator.spgrOp>=0))}(n)?null===(u=t.theme)||void 0===u?void 0:u.symmetryColor:C;return{update:m,builder:y,color:C,symmetryColor:x,symmetryColorParams:(null===(d=t.theme)||void 0===d?void 0:d.symmetryColorParams)?{...null===(A=t.theme)||void 0===A?void 0:A.globalColorParams,...null===(f=t.theme)||void 0===f?void 0:f.symmetryColorParams}:{...null===(p=t.theme)||void 0===p?void 0:p.globalColorParams},globalColorParams:(null===(h=t.theme)||void 0===h?void 0:h.globalColorParams)?{...null===(g=t.theme)||void 0===g?void 0:g.globalColorParams}:void 0,typeParams:b,ballAndStickColor:I}},e.updateFocusRepr=function(e,t,n,r){if(e.state.hasBehavior(jue))return e.state.updateBehavior(jue,(o=>{const i=Zoe(e,t,"ball-and-stick",n||"element-symbol",r);o.surroundingsParams.colorTheme=i,o.targetParams.colorTheme=i}))}}(zue||(zue={}));const Hue=zue.CommonParams,Vue=zue.reprBuilder,que=zue.updateFocusRepr,Yue=zue({id:"preset-structure-representation-auto",display:{name:"Automatic",description:"Show representations based on the size of the structure. Smaller structures are shown with more detail than larger ones, ranging from atomistic display to coarse surfaces."},params:()=>Hue,apply(e,t,n){var r,o;const i=null===(o=null===(r=PC.resolveAndCheck(n.state.data,e))||void 0===r?void 0:r.obj)||void 0===o?void 0:o.data;if(!i)return{};const a=n.config.get(Bee.Structure.SizeThresholds)||aG.DefaultSizeThresholds,s=aG.getSize(i,a),l=i.polymerResidueCount/i.polymerGapCount;switch(s){case aG.Size.Gigantic:case aG.Size.Huge:return Zue.apply(e,t,n);case aG.Size.Large:return $ue.apply(e,t,n);case aG.Size.Medium:if(l>3)return Kue.apply(e,t,n);case aG.Size.Small:return ede.apply(e,{...t,showCarbohydrateSymbol:!0},n);default:Zh()}}}),Xue=zue({id:"preset-structure-representation-empty",display:{name:"Empty",description:"Removes all existing representations."},apply:async(e,t,n)=>({})}),Wue="Basic",Kue=zue({id:"preset-structure-representation-polymer-and-ligand",display:{name:"Polymer & Ligand",group:Wue,description:"Shows polymers as Cartoon, ligands as Ball & Stick, carbohydrates as 3D-SNFG and water molecules semi-transparent."},params:()=>Hue,async apply(e,t,n){var r,o,i,a,s,l,c,u,d,A;const f=PC.resolveAndCheck(n.state.data,e);if(!f)return{};const p={polymer:await rde(n,f,"polymer"),ligand:await rde(n,f,"ligand"),nonStandard:await rde(n,f,"non-standard"),branched:await rde(n,f,"branched",{label:"Carbohydrate"}),water:await rde(n,f,"water"),ion:await rde(n,f,"ion"),lipid:await rde(n,f,"lipid"),coarse:await rde(n,f,"coarse")},h=f.obj.data,g={sizeFactor:h.isCoarseGrained?.8:.2},m=((null===(i=null===(o=null===(r=p.water)||void 0===r?void 0:r.obj)||void 0===o?void 0:o.data)||void 0===i?void 0:i.elementCount)||0)>5e4?"line":"ball-and-stick",y=((null===(l=null===(s=null===(a=p.lipid)||void 0===a?void 0:a.obj)||void 0===s?void 0:s.data)||void 0===l?void 0:l.elementCount)||0)>2e4?"line":"ball-and-stick",{update:v,builder:b,typeParams:C,color:I,symmetryColor:E,symmetryColorParams:x,globalColorParams:B,ballAndStickColor:w}=Vue(n,t,h),_={polymer:b.buildRepresentation(v,p.polymer,{type:"cartoon",typeParams:{...C,...g},color:E,colorParams:x},{tag:"polymer"}),ligand:b.buildRepresentation(v,p.ligand,{type:"ball-and-stick",typeParams:C,color:I,colorParams:w},{tag:"ligand"}),nonStandard:b.buildRepresentation(v,p.nonStandard,{type:"ball-and-stick",typeParams:C,color:I,colorParams:w},{tag:"non-standard"}),branchedBallAndStick:b.buildRepresentation(v,p.branched,{type:"ball-and-stick",typeParams:{...C,alpha:.3},color:I,colorParams:w},{tag:"branched-ball-and-stick"}),branchedSnfg3d:b.buildRepresentation(v,p.branched,{type:"carbohydrate",typeParams:C,color:I,colorParams:B},{tag:"branched-snfg-3d"}),water:b.buildRepresentation(v,p.water,{type:m,typeParams:{...C,alpha:.6,visuals:"line"===m?["intra-bond","element-point"]:void 0},color:I,colorParams:{carbonColor:{name:"element-symbol",params:{}},...B}},{tag:"water"}),ion:b.buildRepresentation(v,p.ion,{type:"ball-and-stick",typeParams:C,color:I,colorParams:{carbonColor:{name:"element-symbol",params:{}},...B}},{tag:"ion"}),lipid:b.buildRepresentation(v,p.lipid,{type:y,typeParams:{...C,alpha:.6,visuals:"line"===y?["intra-bond"]:void 0},color:I,colorParams:{carbonColor:{name:"element-symbol",params:{}},...B}},{tag:"lipid"}),coarse:b.buildRepresentation(v,p.coarse,{type:"spacefill",typeParams:C,color:I||"chain-id",colorParams:B},{tag:"coarse"})};return await v.commit({revertOnError:!1}),await que(n,h,null===(u=null===(c=t.theme)||void 0===c?void 0:c.focus)||void 0===u?void 0:u.name,null===(A=null===(d=t.theme)||void 0===d?void 0:d.focus)||void 0===A?void 0:A.params),{components:p,representations:_}}}),Jue=zue({id:"preset-structure-representation-protein-and-nucleic",display:{name:"Protein & Nucleic",group:Wue,description:"Shows proteins as Cartoon and RNA/DNA as Gaussian Surface."},params:()=>Hue,async apply(e,t,n){var r,o,i,a;const s=PC.resolveAndCheck(n.state.data,e);if(!s)return{};const l={protein:await ode(n,s,"protein"),nucleic:await ode(n,s,"nucleic")},c=s.obj.data,u={sizeFactor:c.isCoarseGrained?.8:.2},d={radiusOffset:c.isCoarseGrained?2:0,smoothness:c.isCoarseGrained?1:1.5},{update:A,builder:f,typeParams:p,symmetryColor:h,symmetryColorParams:g}=Vue(n,t,c),m={protein:f.buildRepresentation(A,l.protein,{type:"cartoon",typeParams:{...p,...u},color:h,colorParams:g},{tag:"protein"}),nucleic:f.buildRepresentation(A,l.nucleic,{type:"gaussian-surface",typeParams:{...p,...d},color:h,colorParams:g},{tag:"nucleic"})};return await A.commit({revertOnError:!0}),await que(n,c,null===(o=null===(r=t.theme)||void 0===r?void 0:r.focus)||void 0===o?void 0:o.name,null===(a=null===(i=t.theme)||void 0===i?void 0:i.focus)||void 0===a?void 0:a.params),{components:l,representations:m}}}),Zue=zue({id:"preset-structure-representation-coarse-surface",display:{name:"Coarse Surface",group:Wue,description:"Shows polymers and lipids as coarse Gaussian Surface."},params:()=>Hue,async apply(e,t,n){var r,o,i,a;const s=PC.resolveAndCheck(n.state.data,e);if(!s)return{};const l={polymer:await rde(n,s,"polymer"),lipid:await rde(n,s,"lipid")},c=s.obj.data,u=n.config.get(Bee.Structure.SizeThresholds)||aG.DefaultSizeThresholds,d=aG.getSize(c,u),A=Object.create(null);d===aG.Size.Gigantic?Object.assign(A,{traceOnly:!c.isCoarseGrained,radiusOffset:2,smoothness:1,visuals:["structure-gaussian-surface-mesh"]}):d===aG.Size.Huge?Object.assign(A,{radiusOffset:c.isCoarseGrained?2:0,smoothness:1}):c.isCoarseGrained&&Object.assign(A,{radiusOffset:2,smoothness:1});const{update:f,builder:p,typeParams:h,symmetryColor:g,symmetryColorParams:m}=Vue(n,t,c),y={polymer:p.buildRepresentation(f,l.polymer,{type:"gaussian-surface",typeParams:{...h,...A},color:g,colorParams:m},{tag:"polymer"}),lipid:p.buildRepresentation(f,l.lipid,{type:"gaussian-surface",typeParams:{...h,...A},color:g,colorParams:m},{tag:"lipid"})};return await f.commit({revertOnError:!0}),await que(n,c,null===(o=null===(r=t.theme)||void 0===r?void 0:r.focus)||void 0===o?void 0:o.name,null===(a=null===(i=t.theme)||void 0===i?void 0:i.focus)||void 0===a?void 0:a.params),{components:l,representations:y}}}),$ue=zue({id:"preset-structure-representation-polymer-cartoon",display:{name:"Polymer Cartoon",group:Wue,description:"Shows polymers as Cartoon."},params:()=>Hue,async apply(e,t,n){var r,o,i,a;const s=PC.resolveAndCheck(n.state.data,e);if(!s)return{};const l={polymer:await rde(n,s,"polymer")},c=s.obj.data,u={sizeFactor:c.isCoarseGrained?.8:.2},{update:d,builder:A,typeParams:f,symmetryColor:p,symmetryColorParams:h}=Vue(n,t,c),g={polymer:A.buildRepresentation(d,l.polymer,{type:"cartoon",typeParams:{...f,...u},color:p,colorParams:h},{tag:"polymer"})};return await d.commit({revertOnError:!0}),await que(n,c,null===(o=null===(r=t.theme)||void 0===r?void 0:r.focus)||void 0===o?void 0:o.name,null===(a=null===(i=t.theme)||void 0===i?void 0:i.focus)||void 0===a?void 0:a.params),{components:l,representations:g}}}),ede=zue({id:"preset-structure-representation-atomic-detail",display:{name:"Atomic Detail",group:Wue,description:"Shows everything in atomic detail with Ball & Stick."},params:()=>({...Hue,showCarbohydrateSymbol:U_.Boolean(!1)}),async apply(e,t,n){var r,o,i,a,s,l;const c=PC.resolveAndCheck(n.state.data,e);if(!c)return{};const u={all:await rde(n,c,"all"),branched:void 0},d=c.obj.data,A=d.elementCount>1e5,f=d.atomicResidueCount&&d.elementCount>1e3&&d.atomicResidueCount/d.elementCount<3,p=d.models[0],h=!!jk.Provider.get(p)||XR.isExhaustive(p);let g="ball-and-stick";d.isCoarseGrained?g=d.elementCount>1e6?"point":"spacefill":f&&!h?g="spacefill":A&&(g="line");const m=t.showCarbohydrateSymbol&&!A&&!f;m&&Object.assign(u,{branched:await rde(n,c,"branched",{label:"Carbohydrate"})});const{update:y,builder:v,typeParams:b,color:C,ballAndStickColor:I,globalColorParams:E}=Vue(n,t,d),x=f&&!h?{carbonColor:{name:"element-symbol",params:{}},...E}:I,B={all:v.buildRepresentation(y,u.all,{type:g,typeParams:b,color:C,colorParams:x},{tag:"all"})};return m&&Object.assign(B,{snfg3d:v.buildRepresentation(y,u.branched,{type:"carbohydrate",typeParams:{...b,alpha:.4,visuals:["carbohydrate-symbol"]},color:C,colorParams:E},{tag:"snfg-3d"})}),await y.commit({revertOnError:!0}),await que(n,d,null!==(i=null===(o=null===(r=t.theme)||void 0===r?void 0:r.focus)||void 0===o?void 0:o.name)&&void 0!==i?i:C,null!==(l=null===(s=null===(a=t.theme)||void 0===a?void 0:a.focus)||void 0===s?void 0:s.params)&&void 0!==l?l:x),{components:u,representations:B}}}),tde=zue({id:"preset-structure-representation-illustrative",display:{name:"Illustrative",group:"Miscellaneous",description:"..."},params:()=>({...Hue,showCarbohydrateSymbol:U_.Boolean(!1)}),async apply(e,t,n){var r,o,i,a,s;const l=PC.resolveAndCheck(n.state.data,e);if(!l)return{};const c={all:await rde(n,l,"all"),branched:void 0},u=l.obj.data,{update:d,builder:A,typeParams:f,color:p}=Vue(n,t,u),h={all:A.buildRepresentation(d,c.all,{type:"spacefill",typeParams:{...f,ignoreLight:!0},color:"illustrative"},{tag:"all"})};return await d.commit({revertOnError:!0}),await que(n,u,null!==(i=null===(o=null===(r=t.theme)||void 0===r?void 0:r.focus)||void 0===o?void 0:o.name)&&void 0!==i?i:p,null===(s=null===(a=t.theme)||void 0===a?void 0:a.focus)||void 0===s?void 0:s.params),{components:c,representations:h}}}),nde=zue({id:"preset-structure-representation-auto-lod",display:{name:"Automatic Detail",group:"Miscellaneous",description:"Shows more (or less) detailed representations automatically based on camera distance."},params:()=>Hue,async apply(e,t,n){var r,o,i,a;const s=PC.resolveAndCheck(n.state.data,e);if(!s)return{};const l={all:await rde(n,s,"all")},c=s.obj.data,u={sizeFactor:c.isCoarseGrained?.8:.2},{update:d,builder:A,typeParams:f,color:p,symmetryColor:h,symmetryColorParams:g,ballAndStickColor:m}=Vue(n,t,c),y={gaussianSurface:A.buildRepresentation(d,l.all,{type:"gaussian-surface",typeParams:{...f,lod:qh.create(30,1e7,100)},color:h,colorParams:g},{tag:"gaussian-surface"}),cartoon:A.buildRepresentation(d,l.all,{type:"cartoon",typeParams:{...f,...u,lod:qh.create(-20,300,100)},color:h,colorParams:g},{tag:"cartoon"}),ballAndStick:A.buildRepresentation(d,l.all,{type:"ball-and-stick",typeParams:{...f,lod:qh.create(-20,40,20)},color:p,colorParams:m},{tag:"ball-and-stick"})};return await d.commit({revertOnError:!1}),await que(n,c,null===(o=null===(r=t.theme)||void 0===r?void 0:r.focus)||void 0===o?void 0:o.name,null===(a=null===(i=t.theme)||void 0===i?void 0:i.focus)||void 0===a?void 0:a.params),{components:l,representations:y}}});function rde(e,t,n,r){return e.builders.structure.tryCreateComponentStatic(t,n,r)}function ode(e,t,n,r){return e.builders.structure.tryCreateComponentFromSelection(t,Cee[n],`selection-${n}`,r)}const ide={empty:Xue,auto:Yue,"atomic-detail":ede,"polymer-cartoon":$ue,"polymer-and-ligand":Kue,"protein-and-nucleic":Jue,"coarse-surface":Zue,illustrative:tde,"auto-lod":nde};function ade(e,t){if("bcif"===e.ext)try{const{encoder:e}=NF(t);if(e.startsWith("VolumeServer"))return"dscif";if(e.startsWith("volseg-volume-server"))return"segcif"}catch(l0e){console.error(l0e)}else if("cif"===e.ext){const e=t;if(e.startsWith("data_SERVER\n#\n_density_server_result"))return"dscif";if(e.startsWith("data_SERVER\n#\ndata_SEGMENTATION_DATA"))return"segcif";if(e.includes("atom_site_fract_x")||e.includes("atom_site.fract_x"))return"coreCif"}return-1}const sde="Trajectory";function lde(e,t){return e.builders.structure.hierarchy.applyPreset(t.trajectory,"default")}const cde={label:"mmCIF",description:"mmCIF",category:sde,stringExtensions:["cif","mmcif","mcif"],binaryExtensions:["bcif"],isApplicable:(e,t)=>"mmcif"===e.ext||"mcif"===e.ext||("cif"===e.ext||"bcif"===e.ext)&&-1===ade(e,t),parse:async(e,t,n)=>{var r,o;const i=e.state.data.build().to(t).apply(_7.Data.ParseCif,void 0,{state:{isGhost:!0}}),a=await i.apply(_7.Model.TrajectoryFromMmCif,void 0,{tags:null===n||void 0===n?void 0:n.trajectoryTags}).commit({revertOnError:!0});return((null===(o=null===(r=i.selector.cell)||void 0===r?void 0:r.obj)||void 0===o?void 0:o.data.blocks.length)||0)>1&&e.state.data.updateCellState(i.ref,{isGhost:!1}),{trajectory:a}},visuals:lde},ude={label:"cifCore",description:"CIF Core",category:sde,stringExtensions:["cif"],isApplicable:(e,t)=>"cif"===e.ext&&"coreCif"===ade(e,t),parse:async(e,t,n)=>{var r,o;const i=e.state.data.build().to(t).apply(_7.Data.ParseCif,void 0,{state:{isGhost:!0}}),a=await i.apply(_7.Model.TrajectoryFromCifCore,void 0,{tags:null===n||void 0===n?void 0:n.trajectoryTags}).commit({revertOnError:!0});return((null===(o=null===(r=i.selector.cell)||void 0===r?void 0:r.obj)||void 0===o?void 0:o.data.blocks.length)||0)>1&&e.state.data.updateCellState(i.ref,{isGhost:!1}),{trajectory:a}},visuals:lde};function dde(e,t){return async(n,r,o)=>{const i=n.state.data;return{trajectory:await i.build().to(r).apply(e,t,{tags:null===o||void 0===o?void 0:o.trajectoryTags}).commit({revertOnError:!0})}}}const Ade={label:"PDB",description:"PDB",category:sde,stringExtensions:["pdb","ent"],parse:dde(_7.Model.TrajectoryFromPDB),visuals:lde},fde={label:"PDBQT",description:"PDBQT",category:sde,stringExtensions:["pdbqt"],parse:dde(_7.Model.TrajectoryFromPDB,{isPdbqt:!0}),visuals:lde},pde={label:"XYZ",description:"XYZ",category:sde,stringExtensions:["xyz"],parse:dde(_7.Model.TrajectoryFromXYZ),visuals:lde},hde=[["mmcif",cde],["cifCore",ude],["pdb",Ade],["pdbqt",fde],["gro",{label:"GRO",description:"GRO",category:sde,stringExtensions:["gro"],binaryExtensions:[],parse:dde(_7.Model.TrajectoryFromGRO),visuals:lde}],["xyz",pde],["mol",{label:"MOL",description:"MOL",category:sde,stringExtensions:["mol"],parse:dde(_7.Model.TrajectoryFromMOL),visuals:lde}],["sdf",{label:"SDF",description:"SDF",category:sde,stringExtensions:["sdf","sd"],parse:dde(_7.Model.TrajectoryFromSDF),visuals:lde}],["mol2",{label:"MOL2",description:"MOL2",category:sde,stringExtensions:["mol2"],parse:dde(_7.Model.TrajectoryFromMOL2),visuals:lde}]],gde=["gz","zip"];function mde(e){let t=e,n="";const r=t.lastIndexOf("?"),o=-1!==r?t.substring(r):"";t=t.substring(0,-1===r?t.length:r);const i=t.replace(/^.*[\\/]/,"");let a=i.substring(0,i.lastIndexOf("."));const s=i.split(".");let l=s.length>1?(s.pop()||"").toLowerCase():"";const c=t.match(/^(.+):\/\/(.+)$/);c&&(n=c[1].toLowerCase(),t=c[2]||"");const u=t.substring(0,t.lastIndexOf("/")+1);if(gde.includes(l)){const e=t.length-l.length-1;l=(t.substr(0,e).split(".").pop()||"").toLowerCase();const n=a.length-l.length-1;a=a.substr(0,n)}return{path:t,name:i,ext:l,base:a,dir:u,protocol:n,query:o}}const yde="Topology",vde="Coordinates",bde={rcsb:U_.Group({encoding:U_.Select("bcif",U_.arrayToOptions(["cif","bcif"]))},{label:"RCSB PDB",isFlat:!0}),pdbe:U_.Group({variant:U_.Select("updated-bcif",[["updated-bcif","Updated (bcif)"],["updated","Updated"],["archival","Archival"]])},{label:"PDBe",isFlat:!0}),pdbj:U_.EmptyGroup({label:"PDBj"})},Cde=G_.build({from:Jz.Root,display:{name:"Download Structure",description:"Load a structure from the provided source and create its representation."},params:(e,t)=>{const n=(e=>{const t=e.config.get(Bee.Structure.DefaultRepresentationPreset)||ide.auto.id;return U_.Group({type:r0.getParams(void 0,"auto").type,representation:U_.Select(t,e.builders.structure.representation.getPresets().map((e=>[e.id,e.display.name,e.display.group])),{description:"Which representation preset to use."}),representationParams:U_.Group(zue.CommonParams,{isHidden:!0}),asTrajectory:U_.Optional(U_.Boolean(!1,{description:"Load all entries into a single trajectory."}))},{isExpanded:!1})})(t),r=t.config.get(Bee.Download.DefaultPdbProvider)||"pdbe";return{source:U_.MappedStatic("pdb",{pdb:U_.Group({provider:U_.Group({id:U_.Text("1tqn",{label:"PDB Id(s)",description:"One or more comma/space separated PDB ids."}),server:U_.MappedStatic(r,bde)},{pivot:"id"}),options:n},{isFlat:!0,label:"PDB"}),"pdb-dev":U_.Group({provider:U_.Group({id:U_.Text("PDBDEV_00000001",{label:"PDB-Dev Id(s)",description:"One or more comma/space separated ids."}),encoding:U_.Select("bcif",U_.arrayToOptions(["cif","bcif"]))},{pivot:"id"}),options:n},{isFlat:!0,label:"PDB-Dev"}),swissmodel:U_.Group({id:U_.Text("Q9Y2I8",{label:"UniProtKB AC(s)",description:"One or more comma/space separated ACs."}),options:n},{isFlat:!0,label:"SWISS-MODEL",description:"Loads the best homology model or experimental structure"}),alphafolddb:U_.Group({id:U_.Text("Q8W3K0",{label:"UniProtKB AC(s)",description:"One or more comma/space separated ACs."}),options:n},{isFlat:!0,label:"AlphaFold DB",description:"Loads the predicted model if available"}),modelarchive:U_.Group({id:U_.Text("ma-bak-cepc-0003",{label:"Accession Code(s)",description:"One or more comma/space separated ACs."}),options:n},{isFlat:!0,label:"Model Archive"}),pubchem:U_.Group({id:U_.Text("2244,2245",{label:"PubChem ID",description:"One or more comma/space separated IDs."}),options:n},{isFlat:!0,label:"PubChem",description:"Loads 3D conformer from PubChem."}),url:U_.Group({url:U_.Url(""),format:U_.Select("mmcif",U_.arrayToOptions(hde.map((e=>e[0])),(e=>e))),isBinary:U_.Boolean(!1),label:U_.Optional(U_.Text("")),options:n},{isFlat:!0,label:"URL"})})}}})(((e,t)=>{let{params:n,state:r}=e;return Tw.create("Download Structure",(async e=>{t.behaviors.layout.leftPanelTabName.next("data");const o=n.source;let i,a=!1,s="mmcif";switch(o.name){case"url":i=[{url:o.params.url,isBinary:o.params.isBinary,label:o.params.label||void 0}],s=o.params.format;break;case"pdb":i=await("pdbe"===o.params.provider.server.name?async function(e){if("pdb"!==e.name||"pdbe"!==e.params.provider.server.name)throw new Error("expected pdbe");return"updated"===e.params.provider.server.params.variant?Ide(e.params.provider.id,(e=>`https://www.ebi.ac.uk/pdbe/static/entry/${e.toLowerCase()}_updated.cif`),(e=>`PDBe: ${e} (updated cif)`),!1):"updated-bcif"===e.params.provider.server.params.variant?Ide(e.params.provider.id,(e=>`https://www.ebi.ac.uk/pdbe/entry-files/download/${e.toLowerCase()}.bcif`),(e=>`PDBe: ${e} (updated cif)`),!0):Ide(e.params.provider.id,(e=>`https://www.ebi.ac.uk/pdbe/static/entry/${e.toLowerCase()}.cif`),(e=>`PDBe: ${e} (cif)`),!1)}(o):"pdbj"===o.params.provider.server.name?async function(e){if("pdb"!==e.name||"pdbj"!==e.params.provider.server.name)throw new Error("expected pdbj");return Ide(e.params.provider.id,(e=>`https://data.pdbjbk1.pdbj.org/pub/pdb/data/structures/divided/mmCIF/${e.toLowerCase().substring(1,3)}/${e.toLowerCase()}.cif`),(e=>`PDBj: ${e} (cif)`),!1)}(o):"rcsb"===o.params.provider.server.name?async function(e){if("pdb"!==e.name||"rcsb"!==e.params.provider.server.name)throw new Error("expected rcsb");return"cif"===e.params.provider.server.params.encoding?Ide(e.params.provider.id,(e=>`https://files.rcsb.org/download/${e.toUpperCase()}.cif`),(e=>`RCSB PDB: ${e} (cif)`),!1):Ide(e.params.provider.id,(e=>`https://models.rcsb.org/${e.toUpperCase()}.bcif`),(e=>`RCSB PDB: ${e} (bcif)`),!0)}(o):Zh()),a=!!o.params.options.asTrajectory;break;case"pdb-dev":i=await Ide(o.params.provider.id,(e=>{const t=e.toUpperCase().startsWith("PDBDEV_")?e:`PDBDEV_${e.padStart(8,"0")}`;return"bcif"===o.params.provider.encoding?`https://pdb-dev.wwpdb.org/bcif/${t.toUpperCase()}.bcif`:`https://pdb-dev.wwpdb.org/cif/${t.toUpperCase()}.cif`}),(e=>e.toUpperCase().startsWith("PDBDEV_")?e:`PDBDEV_${e.padStart(8,"0")}`),"bcif"===o.params.provider.encoding),a=!!o.params.options.asTrajectory;break;case"swissmodel":i=await Ide(o.params.id,(e=>`https://swissmodel.expasy.org/repository/uniprot/${e.toUpperCase()}.pdb`),(e=>`SWISS-MODEL: ${e}`),!1),a=!!o.params.options.asTrajectory,s="pdb";break;case"alphafolddb":i=await Ide(o.params.id,(async e=>{const n=`https://www.alphafold.ebi.ac.uk/api/prediction/${e.toUpperCase()}`,r=await t.runTask(t.fetch({url:n,type:"json"}));if(Array.isArray(r)&&r.length>0)return r[0].cifUrl;throw new Error(`No AlphaFold DB entry for '${e}'`)}),(e=>`AlphaFold DB: ${e}`),!1),a=!!o.params.options.asTrajectory,s="mmcif";break;case"modelarchive":i=await Ide(o.params.id,(e=>`https://www.modelarchive.org/doi/10.5452/${e.toLowerCase()}.cif`),(e=>`Model Archive: ${e}`),!1),a=!!o.params.options.asTrajectory,s="mmcif";break;case"pubchem":i=await Ide(o.params.id,(e=>`https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/CID/${e.trim()}/record/SDF/?record_type=3d`),(e=>`PubChem: ${e}`),!1),a=!!o.params.options.asTrajectory,s="mol";break;default:Zh()}const l=n.source.params.options.representation||t.config.get(Bee.Structure.DefaultRepresentationPreset)||ide.auto.id,c=l!==ide.empty.id,u="auto"===o.params.options.type.name?void 0:o.params.options.type;await r.transaction((async()=>{if(i.length>0&&a){const e=await t.builders.data.downloadBlob({sources:i.map(((e,t)=>({id:""+t,url:e.url,isBinary:e.isBinary}))),maxConcurrency:6},{state:{isGhost:!0}}),r=await t.builders.structure.parseTrajectory(e,{formats:i.map(((e,t)=>({id:""+t,format:"cif"})))});await t.builders.structure.hierarchy.applyPreset(r,"default",{structure:u,showUnitcell:c,representationPreset:l,representationPresetParams:n.source.params.options.representationParams})}else for(const e of i){const r=await t.builders.data.download(e,{state:{isGhost:!0}}),o=t.dataFormats.get(s);if(!o)throw new Error("unknown file format");const i=await t.builders.structure.parseTrajectory(r,o);await t.builders.structure.hierarchy.applyPreset(i,"default",{structure:u,showUnitcell:c,representationPreset:l,representationPresetParams:n.source.params.options.representationParams})}})).runInContext(e)}))}));async function Ide(e,t,n,r){const o=e.split(/[,\s]/).map((e=>e.trim())).filter((e=>!!e&&(e.length>=4||/^[1-9][0-9]*$/.test(e)))),i=[];for(const a of o)i.push({url:L_.Url(await t(a)),isBinary:r,label:n(a)});return i}const Ede=G_.build({display:{name:"Update Trajectory"},params:{action:U_.Select("advance",U_.arrayToOptions(["advance","reset"])),by:U_.Optional(U_.Numeric(1,{min:-1,max:1,step:1}))}})((e=>{let{params:t,state:n}=e;const r=n.selectQ((e=>e.ofTransformer(_7.Model.ModelFromTrajectory))),o=n.build();if("reset"===t.action)for(const i of r)o.to(i).update({modelIndex:0});else for(const i of r){const e=V_.findAncestorOfType(n.tree,n.cells,i.transform.ref,Jz.Molecule.Trajectory);if(!e||!e.obj)continue;const r=e.obj;o.to(i).update((e=>{let n=(e.modelIndex+t.by)%r.data.frameCount;return n<0&&(n+=r.data.frameCount),{modelIndex:n}}))}return n.updateTree(o)})),xde=G_.build({display:{name:"Custom Model Properties",description:"Enable parameters for custom properties of the model."},from:Jz.Molecule.Model,params:(e,t)=>t.customModelProperties.getParams(null===e||void 0===e?void 0:e.data),isApplicable:(e,t,n)=>t.transformer!==e2})(((e,t)=>{let{ref:n,params:r}=e;return t.builders.structure.insertModelProperties(n,r)})),Bde=G_.build({display:{name:"Custom Structure Properties",description:"Enable parameters for custom properties of the structure."},from:Jz.Molecule.Structure,params:(e,t)=>t.customStructureProperties.getParams(null===e||void 0===e?void 0:e.data),isApplicable:(e,t,n)=>t.transformer!==n2})(((e,t)=>{let{ref:n,params:r}=e;return t.builders.structure.insertStructureProperties(n,r)})),wde=G_.build({display:{name:"Add Trajectory",description:"Add trajectory from existing model/topology and coordinates."},from:Jz.Root,params(e,t){const n=t.state.data,r=[...n.selectQ((e=>e.rootsOfType(Jz.Molecule.Model))),...n.selectQ((e=>e.rootsOfType(Jz.Molecule.Topology)))],o=r.map((e=>[e.transform.ref,e.obj.label])),i=n.selectQ((e=>e.rootsOfType(Jz.Molecule.Coordinates))),a=i.map((e=>[e.transform.ref,e.obj.label]));return{model:U_.Select(o.length?o[0][0]:"",o),coordinates:U_.Select(a.length?a[0][0]:"",a)}}})(((e,t)=>{let{params:n,state:r}=e;return Tw.create("Add Trajectory",(e=>r.transaction((async()=>{const o=[n.model,n.coordinates],i=r.build().toRoot().apply(B1,{modelRef:n.model,coordinatesRef:n.coordinates},{dependsOn:o}).apply(_7.Model.ModelFromTrajectory,{modelIndex:0});await r.updateTree(i).runInContext(e);const a=await t.builders.structure.createStructure(i.selector);await t.builders.structure.representation.applyPreset(a,"auto")})).runInContext(e)))})),_de=G_.build({display:{name:"Load Trajectory",description:"Load trajectory of model/topology and coordinates from URL or file."},from:Jz.Root,params(e,t){const{options:n}=t.dataFormats,r=n.filter((e=>e[2]===sde||e[2]===yde)),o=n.filter((e=>e[2]===vde)),i=[],a=[];for(const{provider:s}of t.dataFormats.list)s.category===sde||s.category===yde?(s.binaryExtensions&&i.push(...s.binaryExtensions),s.stringExtensions&&i.push(...s.stringExtensions)):s.category===vde&&(s.binaryExtensions&&a.push(...s.binaryExtensions),s.stringExtensions&&a.push(...s.stringExtensions));return{source:U_.MappedStatic("file",{url:U_.Group({model:U_.Group({url:U_.Url(""),format:U_.Select(r[0][0],r),isBinary:U_.Boolean(!1)},{isExpanded:!0}),coordinates:U_.Group({url:U_.Url(""),format:U_.Select(o[0][0],o)},{isExpanded:!0})},{isFlat:!0}),file:U_.Group({model:U_.File({accept:i.map((e=>`.${e}`)).join(","),label:"Model"}),coordinates:U_.File({accept:a.map((e=>`.${e}`)).join(","),label:"Coordinates"})},{isFlat:!0})},{options:[["url","URL"],["file","File"]]})}}})(((e,t)=>{let{params:n,state:r}=e;return Tw.create("Load Trajectory",(e=>r.transaction((async()=>{const o=n.source;if("file"===o.name&&(null===o.params.model||null===o.params.coordinates))return void t.log.error("No file(s) selected");if("url"===o.name&&(!o.params.model||!o.params.coordinates))return void t.log.error("No URL(s) given");const i=async(e,n,r)=>{const o=await t.builders.data.download({url:e,isBinary:r}),i=t.dataFormats.get(n);if(i)return i.parse(t,o);t.log.warn(`LoadTrajectory: could not find data provider for '${n}'`)},a=async e=>{var n,r,o;if(!e)throw new Error("No file selected");const i=mde(null!==(r=null===(n=e.file)||void 0===n?void 0:n.name)&&void 0!==r?r:""),a=t.dataFormats.binaryExtensions.has(i.ext),{data:s}=await t.builders.data.readFile({file:e,isBinary:a}),l=t.dataFormats.auto(i,null===(o=s.cell)||void 0===o?void 0:o.obj);return l?l.parse(t,s):(t.log.warn(`LoadTrajectory: could not find data provider for '${i.ext}'`),void await t.state.data.build().delete(s).commit())};try{const n="url"===o.name?await i(o.params.model.url,o.params.model.format,o.params.model.isBinary):await a(o.params.model);let s;s="trajectory"in n?await r.build().to(n.trajectory).apply(L1,{modelIndex:0}).commit():n.topology;const l="url"===o.name?await i(o.params.coordinates.url,o.params.coordinates.format,!0):await a(o.params.coordinates),c=[s.ref,l.ref],u=r.build().toRoot().apply(B1,{modelRef:s.ref,coordinatesRef:l.ref},{dependsOn:c}).apply(_7.Model.ModelFromTrajectory,{modelIndex:0});await r.updateTree(u).runInContext(e);const d=await t.builders.structure.createStructure(u.selector);await t.builders.structure.representation.applyPreset(d,"auto")}catch(l0e){console.error(l0e),t.log.error("Error loading trajectory")}})).runInContext(e)))}));class Sde extends F.PureComponent{constructor(){super(...arguments),this.hide=()=>this.props.onSelect(void 0)}render(){const e=this.props,t=(0,ct.jsx)(Dde,{items:e.items,onSelect:e.onSelect,current:e.current,multiselect:this.props.multiselect,noOffset:this.props.noOffset,noAccent:this.props.noAccent});return(0,ct.jsxs)("div",{className:"msp-action-menu-options"+(e.header?"":" msp-action-menu-options-no-header"),children:[e.header&&(0,ct.jsx)(Xy,{header:e.header,title:e.title,initialExpanded:!0,hideExpander:!0,hideOffset:!0,onHeaderClick:this.hide,topRightIcon:Ly,children:t}),!e.header&&t]})}}!function(e){function t(t,n){const{label:r,value:o,category:i,selected:a,icon:s,addOn:l,description:c}=n||{};let u;const d=[];for(let A=0;A<t.length;A++){const f=t[A];if((null===n||void 0===n?void 0:n.filter)&&!n.filter(f))continue;const p=null===i||void 0===i?void 0:i(f),h=r?r(f):""+f,g=o?o(f):f,m=c?c(f):"string"===typeof f?f:void 0;let y;p?(u||(u=new Map),y=u.get(p),y||(y=[e.Header(p,{description:p})],u.set(p,y),d.push(y))):y=d;const v=null===l||void 0===l?void 0:l(f);y.push({kind:"item",label:h,value:g,icon:s?s(f):void 0,selected:a?a(f):void 0,addOn:v,description:m})}return d}e.Header=function(e,t){return t?{kind:"header",label:e,...t}:{kind:"header",label:e}},e.Item=function(e,t,n){return{kind:"item",label:e,value:t,...n}},e.createItems=t;const n={value:e=>e[0],label:e=>e[1],category:e=>e[2]};e.createItemsFromSelectOptions=function(e,r){return t(e,r?{...n,...r}:n)},e.hasSelectedItem=function e(t){if(Mde(t))return!1;if(Qde(t))return!!t.selected;for(const n of t){if(e(n))return!0}return!1},e.findItem=function e(t,n){if(!Mde(t)){if(Qde(t))return t.value===n?t:void 0;for(const r of t){const t=e(r,n);if(t)return t}}},e.getFirstItem=function e(t){if(!Mde(t)){if(Qde(t))return t;for(const n of t){const t=e(n);if(t)return t}}}}(Sde||(Sde={}));class Dde extends F.PureComponent{constructor(){super(...arguments),this.state=Dde.createState(this.props),this.toggleExpanded=e=>{this.setState({isExpanded:!this.state.isExpanded}),e.currentTarget.blur()},this.selectAll=()=>{const e=Rde(this.props.items,[]).filter((e=>!e.selected));this.props.onSelect(e)},this.selectNone=()=>{const e=Rde(this.props.items,[]).filter((e=>!!e.selected));this.props.onSelect(e)}}static createState(e,t){const n=kde(e.items)&&Mde(e.items[0])?e.items[0]:void 0,r=!(null===n||void 0===n?void 0:n.isIndependent)&&(e.multiselect?Sde.hasSelectedItem(e.items):!!e.current&&!!Sde.findItem(e.items,e.current.value)||Sde.hasSelectedItem(e.items));return{header:n,hasCurrent:r,isExpanded:r||(null!==t&&void 0!==t?t:!!(null===n||void 0===n?void 0:n.initiallyExpanded))}}componentDidUpdate(e){if(this.props.items!==e.items||this.props.current!==e.current){const t=kde(this.props.items)&&kde(e.items)&&Mde(this.props.items[0])&&Mde(e.items[0])&&this.props.items[0].label===e.items[0].label?this.state.isExpanded:void 0;this.setState(Dde.createState(this.props,t))}}get multiselectHeader(){const{header:e,hasCurrent:t}=this.state;return(0,ct.jsxs)("div",{className:"msp-flex-row msp-control-group-header",children:[(0,ct.jsx)(Jy,{icon:this.state.isExpanded?_y:Dy,flex:!0,noOverflow:!0,onClick:this.toggleExpanded,title:`Click to ${this.state.isExpanded?"collapse":"expand"}.${(null===e||void 0===e?void 0:e.description)?` ${null===e||void 0===e?void 0:e.description}`:""}`,children:t?(0,ct.jsx)("b",{children:null===e||void 0===e?void 0:e.label}):null===e||void 0===e?void 0:e.label}),(0,ct.jsx)(Jy,{icon:Py,flex:!0,onClick:this.selectAll,style:{flex:"0 0 50px",textAlign:"right"},children:"All"}),(0,ct.jsx)(Jy,{icon:Ly,flex:!0,onClick:this.selectNone,style:{flex:"0 0 50px",textAlign:"right"},children:"None"})]})}get basicHeader(){const{header:e,hasCurrent:t}=this.state;return(0,ct.jsx)("div",{className:"msp-control-group-header",style:{marginTop:"1px"},children:(0,ct.jsx)(Jy,{noOverflow:!0,icon:this.state.isExpanded?_y:Dy,onClick:this.toggleExpanded,title:`Click to ${this.state.isExpanded?"collapse":"expand"}. ${(null===e||void 0===e?void 0:e.description)?null===e||void 0===e?void 0:e.description:""}`,children:t?(0,ct.jsx)("b",{children:null===e||void 0===e?void 0:e.label}):null===e||void 0===e?void 0:e.label})})}render(){const{items:e,onSelect:t,current:n}=this.props;if(Mde(e))return null;if(Qde(e))return(0,ct.jsx)(Tde,{item:e,onSelect:t,current:n,multiselect:this.props.multiselect});const{header:r}=this.state;return(0,ct.jsxs)(ct.Fragment,{children:[r&&(this.props.multiselect&&this.state.isExpanded?this.multiselectHeader:this.basicHeader),(0,ct.jsx)("div",{className:this.props.noOffset?void 0:this.props.noAccent?"msp-control-offset":"msp-accent-offset",children:(!r||this.state.isExpanded)&&e.map(((e,r)=>Mde(e)?null:Qde(e)?(0,ct.jsx)(Tde,{item:e,onSelect:t,current:n,multiselect:this.props.multiselect},r):(0,ct.jsx)(Dde,{items:e,onSelect:t,current:n,multiselect:this.props.multiselect,noAccent:!0},r)))})]})}}const Tde=e=>{let{item:t,onSelect:n,current:r,multiselect:o}=e;const i=r===t,a=t.addOn?{position:"relative"}:void 0;return(0,ct.jsxs)(Jy,{icon:t.icon,noOverflow:!0,className:"msp-action-menu-button",onClick:e=>n(o?[t]:t,e),disabled:t.disabled,style:a,title:t.description,children:[i||t.selected?(0,ct.jsx)("b",{children:t.label}):t.label,t.addOn]})};function kde(e){return!!e&&Array.isArray(e)}function Qde(e){return e&&"item"===e.kind}function Mde(e){return e&&"header"===e.kind}function Rde(e,t){if(Mde(e))return t;if(Qde(e))return t.push(e),t;for(const n of e)Rde(n,t);return t}const Pde=[["black",0],["gray",8421504],["white",16777215],["red",13840661],["orange",14840576],["yellow",16565248],["green",6863872],["cyan",1484197],["blue",40160],["purple",8086783],["magenta",16394495],["violet",8200583]];class Ode extends F.PureComponent{constructor(){super(...arguments),this.state={isExpanded:!!this.props.param.isExpanded||!!this.props.hideNameRow,lightness:0},this.toggleExpanded=e=>{this.setState({isExpanded:!this.state.isExpanded}),e.currentTarget.blur()},this.onClickSwatch=e=>{const t=Jp.fromHexString(e.currentTarget.getAttribute("data-color")||"0");t!==this.props.value&&(this.props.param.isExpanded||this.setState({isExpanded:!1}),this.update(t))},this.onR=e=>{const[,t,n]=Jp.toRgb(this.props.value),r=Jp.fromRgb(e,t,n);r!==this.props.value&&this.update(r)},this.onG=e=>{const[t,,n]=Jp.toRgb(this.props.value),r=Jp.fromRgb(t,e,n);r!==this.props.value&&this.update(r)},this.onB=e=>{const[t,n]=Jp.toRgb(this.props.value),r=Jp.fromRgb(t,n,e);r!==this.props.value&&this.update(r)},this.onRGB=e=>{const t=Jp.fromHexStyle(e.currentTarget.value||"0");t!==this.props.value&&this.update(t)},this.onLighten=()=>{this.update(Jp.lighten(this.props.value,.1))},this.onDarken=()=>{this.update(Jp.darken(this.props.value,.1))}}update(e){this.props.onChange({param:this.props.param,name:this.props.name,value:e})}swatch(){return(0,ct.jsx)("div",{className:"msp-combined-color-swatch",children:Pde.map((e=>(0,ct.jsx)(Jy,{inline:!0,"data-color":e[1],onClick:this.onClickSwatch,style:{background:Jp.toStyle(e[1])}},e[1])))})}render(){const e=this.props.param.label||th(this.props.name),[t,n,r]=Jp.toRgb(this.props.value),o=(0,ct.jsxs)(ct.Fragment,{children:[this.swatch(),(0,ct.jsx)(tv,{label:"RGB",className:"msp-control-label-short",control:(0,ct.jsxs)("div",{style:{display:"flex",textAlignLast:"center",left:"80px"},children:[(0,ct.jsx)(Ky,{onChange:this.onR,numeric:!0,value:t,delayMs:250,style:{order:1,flex:"1 1 auto",minWidth:0},className:"msp-form-control",onEnter:this.props.onEnter,blurOnEnter:!0,blurOnEscape:!0}),(0,ct.jsx)(Ky,{onChange:this.onG,numeric:!0,value:n,delayMs:250,style:{order:2,flex:"1 1 auto",minWidth:0},className:"msp-form-control",onEnter:this.props.onEnter,blurOnEnter:!0,blurOnEscape:!0}),(0,ct.jsx)(Ky,{onChange:this.onB,numeric:!0,value:r,delayMs:250,style:{order:3,flex:"1 1 auto",minWidth:0},className:"msp-form-control",onEnter:this.props.onEnter,blurOnEnter:!0,blurOnEscape:!0}),(0,ct.jsx)("input",{onInput:this.onRGB,type:"color",value:Jp.toHexStyle(this.props.value),style:{order:4,flex:"1 1 auto",minWidth:"32px",width:"32px",height:"32px",padding:"0 2px 0 2px",background:"none",border:"none",cursor:"pointer"}})]})}),(0,ct.jsxs)("div",{style:{display:"flex",textAlignLast:"center"},children:[(0,ct.jsx)(Jy,{onClick:this.onLighten,style:{order:1,flex:"1 1 auto",minWidth:0},className:"msp-form-control",children:"Lighten"}),(0,ct.jsx)(Jy,{onClick:this.onDarken,style:{order:1,flex:"1 1 auto",minWidth:0},className:"msp-form-control",children:"Darken"})]})]});return this.props.hideNameRow?o:(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)(tv,{title:this.props.param.description,label:e,control:(0,ct.jsx)(Jy,{onClick:this.toggleExpanded,inline:!0,className:"msp-combined-color-button",style:{background:Jp.toStyle(this.props.value)}})}),this.state.isExpanded&&(0,ct.jsx)("div",{className:"msp-control-offset",children:o})]})}}!function(){const e=new Map;for(const t of Pde)e.set(t[1],t[0])}();class Fde extends F.PureComponent{render(){const{legend:e}=this.props,t=e.colors.map((e=>Array.isArray(e)?`${Jp.toStyle(e[0])} ${100*e[1]}%`:Jp.toStyle(e))).join(", ");return(0,ct.jsx)("div",{className:"msp-scale-legend",children:(0,ct.jsxs)("div",{style:{background:`linear-gradient(to right, ${t})`},children:[(0,ct.jsx)("span",{style:{float:"left"},children:e.minLabel}),(0,ct.jsx)("span",{style:{float:"right"},children:e.maxLabel})]})})}}class Nde extends F.PureComponent{render(){const{legend:e}=this.props;return(0,ct.jsx)("div",{className:"msp-table-legend",children:e.table.map(((e,t)=>{const[n,r]=e;return(0,ct.jsxs)("div",{children:[(0,ct.jsx)("div",{className:"msp-table-legend-color",style:{backgroundColor:Jp.toStyle(r)}}),(0,ct.jsx)("div",{className:"msp-table-legend-text",children:n})]},t)}))})}}class Lde extends F.Component{constructor(e){super(e),this.state={show:!1},this.handleHover=this.handleHover.bind(this),this.handleHoverOff=this.handleHoverOff.bind(this),this.deletePoint=this.deletePoint.bind(this)}handleHover(){this.setState({show:!0});const e=Wh.create(this.props.nX,this.props.nY);this.props.onmouseover(e)}handleHoverOff(){this.setState({show:!1}),this.props.onmouseover(void 0)}deletePoint(){this.props.delete(this.props.id)}render(){return[(0,ct.jsx)("circle",{r:"10",id:`${this.props.id}`,cx:this.props.x,cy:this.props.y,onClick:this.props.onclick,onDoubleClick:this.props.delete(this.props.id),onMouseEnter:this.handleHover,onMouseLeave:this.handleHoverOff,onMouseDown:this.props.onmousedown,fill:"black"},`${this.props.id}circle`)]}}class Ude extends F.Component{constructor(e){super(e),this.handleKeyDown=e=>{},this.handleKeyUp=e=>{},this.handleClick=e=>e=>{},this.handleMouseDown=e=>t=>{if(0===e||e===this.state.points.length-1)return;if(this.state.canSelectMultiple)return;const n=this.normalizePoint(Wh.create(this.state.points[e][0],this.state.points[e][1]));this.ghostPoints.push(document.createElementNS(this.namespace,"circle")),this.ghostPoints[0].setAttribute("r","10"),this.ghostPoints[0].setAttribute("fill","orange"),this.ghostPoints[0].setAttribute("cx",`${n[0]}`),this.ghostPoints[0].setAttribute("cy",`${n[1]}`),this.ghostPoints[0].setAttribute("style","display: none"),this.gElement.appendChild(this.ghostPoints[0]),this.updatedX=n[0],this.updatedY=n[1],this.selected=[e]},this.deletePoint=e=>t=>{if(0===e||e===this.state.points.length-1)return;const n=this.state.points.filter(((t,n)=>n!==e));n.sort(((e,t)=>e[0]===t[0]?0===e[0]?e[1]-t[1]:1===e[1]?t[1]-e[1]:e[1]-t[1]:e[0]-t[0])),this.setState({points:n}),this.change(n),t.stopPropagation()},this.myRef=F.createRef(),this.state={points:[Wh.create(0,0),Wh.create(1,0)],copyPoint:void 0,canSelectMultiple:!1},this.height=400,this.width=600,this.padding=70,this.selected=void 0,this.ghostPoints=[],this.namespace="http://www.w3.org/2000/svg";for(const t of this.props.data)this.state.points.push(t);this.state.points.sort(((e,t)=>e[0]===t[0]?0===e[0]?e[1]-t[1]:1===e[1]?t[1]-e[1]:e[1]-t[1]:e[0]-t[0])),this.handleDrag=this.handleDrag.bind(this),this.handleMultipleDrag=this.handleMultipleDrag.bind(this),this.handleDoubleClick=this.handleDoubleClick.bind(this),this.refCallBack=this.refCallBack.bind(this),this.handlePointUpdate=this.handlePointUpdate.bind(this),this.change=this.change.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this),this.handleLeave=this.handleLeave.bind(this),this.handleEnter=this.handleEnter.bind(this)}render(){const e=this.renderPoints(),t=this.renderLines(),n=this.renderHistogram();return[(0,ct.jsx)("div",{children:(0,ct.jsxs)("svg",{className:"msp-canvas",ref:this.refCallBack,viewBox:`0 0 ${this.width+this.padding} ${this.height+this.padding}`,onMouseMove:this.handleDrag,onMouseUp:this.handlePointUpdate,onMouseLeave:this.handleLeave,onMouseEnter:this.handleEnter,tabIndex:0,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onDoubleClick:this.handleDoubleClick,children:[(0,ct.jsxs)("g",{stroke:"black",fill:"black",children:[n,t,e]}),(0,ct.jsx)("g",{className:"ghost-points",stroke:"black",fill:"black"})]})},"LineGraph"),(0,ct.jsx)("div",{id:"modal-root"},"modal")]}componentDidMount(){this.gElement=document.getElementsByClassName("ghost-points")[0]}change(e){const t=e.slice();t.shift(),t.pop(),this.props.onChange(t)}handleDrag(e){if(void 0===this.selected)return;const t=this.myRef.createSVGPoint();let n;const r=this.padding/2;t.x=e.clientX,t.y=e.clientY;const o=t.matrixTransform(this.myRef.getScreenCTM().inverse());n=Wh.create(o.x,o.y),n=(o.x<r||o.x>this.width+r)&&(o.y>this.height+r||o.y<r)?Wh.create(this.updatedX,this.updatedY):o.x<r?Wh.create(r,o.y):o.x>this.width+r?Wh.create(this.width+r,o.y):o.y>this.height+r?Wh.create(o.x,this.height+r):o.y<r?Wh.create(o.x,r):Wh.create(o.x,o.y),this.updatedX=n[0],this.updatedY=n[1];const i=this.unNormalizePoint(n);this.ghostPoints[0].setAttribute("style","display: visible"),this.ghostPoints[0].setAttribute("cx",`${n[0]}`),this.ghostPoints[0].setAttribute("cy",`${n[1]}`),this.props.onDrag(i)}handleMultipleDrag(){}handlePointUpdate(e){const t=this.selected;if(this.state.canSelectMultiple)return;if(void 0===t||0===t[0]||t[0]===this.state.points.length-1)return void this.setState({copyPoint:void 0});this.selected=void 0;const n=this.unNormalizePoint(Wh.create(this.updatedX,this.updatedY)),r=this.state.points.filter(((e,n)=>n!==t[0]));r.push(n),r.sort(((e,t)=>e[0]===t[0]?0===e[0]?e[1]-t[1]:1===e[1]?t[1]-e[1]:e[1]-t[1]:e[0]-t[0])),this.setState({points:r}),this.change(r),this.gElement.innerHTML="",this.ghostPoints=[],document.removeEventListener("mousemove",this.handleDrag,!0),document.removeEventListener("mouseup",this.handlePointUpdate,!0)}handleDoubleClick(e){const t=this.myRef.createSVGPoint();t.x=e.clientX,t.y=e.clientY;const n=t.matrixTransform(this.myRef.getScreenCTM().inverse()),r=this.state.points,o=this.padding/2;if(n.x<o||n.x>this.width+o||n.y>this.height+o||n.y<this.padding/2)return;const i=this.unNormalizePoint(Wh.create(n.x,n.y));r.push(i),r.sort(((e,t)=>e[0]===t[0]?0===e[0]?e[1]-t[1]:1===e[1]?t[1]-e[1]:e[1]-t[1]:e[0]-t[0])),this.setState({points:r}),this.change(r)}handleLeave(){void 0!==this.selected&&(document.addEventListener("mousemove",this.handleDrag,!0),document.addEventListener("mouseup",this.handlePointUpdate,!0))}handleEnter(){document.removeEventListener("mousemove",this.handleDrag,!0),document.removeEventListener("mouseup",this.handlePointUpdate,!0)}normalizePoint(e){const t=this.padding/2,n=this.width+t,r=this.height+t,o=e[0]*(n-t)+t,i=e[1]*(r-t)+t,a=this.height+this.padding-i;return Wh.create(o,a)}unNormalizePoint(e){const t=this.padding/2,n=this.width+t,r=this.height+t,o=(e[0]-t)/(n-t),i=(this.height+this.padding-e[1]-t)/(r-t);return Wh.create(o,i)}refCallBack(e){e&&(this.myRef=e)}renderHistogram(){if(!this.props.volume)return null;const e=GW.getHistogram(this.props.volume.grid,40),t=[],n=e.counts.length,r=this.width/n,o=this.padding/2,i=q_(e.counts)||1;for(let a=0;a<n;a++){const s=this.width*a/(n-1)+o,l=this.height+o,c=this.height*(1-e.counts[a]/i)+o;t.push((0,ct.jsx)("line",{x1:s,x2:s,y1:l,y2:c,stroke:"#ded9ca",strokeWidth:r},`histogram${a}`))}return t}renderPoints(){const e=[];let t;for(let n=0;n<this.state.points.length;n++)0!==n&&n!==this.state.points.length-1&&(t=this.normalizePoint(this.state.points[n]),e.push((0,ct.jsx)(Lde,{id:n,x:t[0],y:t[1],nX:this.state.points[n][0],nY:this.state.points[n][1],selected:!1,delete:this.deletePoint,onmouseover:this.props.onHover,onmousedown:this.handleMouseDown(n),onclick:this.handleClick(n)},n)));return e}renderLines(){const e=[],t=[];let n,r,o,i,a;const s=this.padding/2;for(const u of this.state.points)n=this.width+s,r=this.height+this.padding,o=u[0]*(n-s)+s,i=u[1]*(r-s)+s,a=this.height+this.padding-i,e.push(Wh.create(o,a));const l=e,c=l.length;for(let u=0;u<c-1;u++){const e=l[u][0],n=l[u][1],r=l[u+1][0],o=l[u+1][1];t.push((0,ct.jsx)("line",{x1:e,x2:r,y1:n,y2:o,stroke:"#cec9ba",strokeWidth:"5"},`lineOf${u}`))}return t}}class Gde extends F.Component{constructor(){super(...arguments),this.state={isChanging:!1,current:0},this.begin=()=>{this.setState({isChanging:!0})},this.end=e=>{this.setState({isChanging:!1}),this.props.onChange(e)},this.updateCurrent=e=>{var t,n;this.setState({current:e}),null===(n=(t=this.props).onChangeImmediate)||void 0===n||n.call(t,e)},this.updateManually=e=>{this.setState({isChanging:!0});let t=e;1===this.props.step&&(t=Math.round(t)),t<this.props.min&&(t=this.props.min),t>this.props.max&&(t=this.props.max),this.setState({current:t,isChanging:!0})},this.onManualBlur=()=>{this.setState({isChanging:!1}),this.props.onChange(this.state.current)}}static getDerivedStateFromProps(e,t){return t.isChanging||e.value===t.current?null:{current:e.value}}render(){let e=this.props.step;return void 0===e&&(e=1),(0,ct.jsxs)("div",{className:"msp-slider",children:[(0,ct.jsx)("div",{children:(0,ct.jsx)(Kde,{min:this.props.min,max:this.props.max,step:e,value:this.state.current,disabled:this.props.disabled,onBeforeChange:this.begin,onChange:this.updateCurrent,onAfterChange:this.end})}),(0,ct.jsx)("div",{children:(0,ct.jsx)(Ky,{numeric:!0,delayMs:50,value:this.state.current,blurOnEnter:!0,onBlur:this.onManualBlur,isDisabled:this.props.disabled,onChange:this.updateManually})})]})}}class jde extends F.Component{constructor(){super(...arguments),this.state={isChanging:!1,current:[0,1]},this.begin=()=>{this.setState({isChanging:!0})},this.end=e=>{this.setState({isChanging:!1}),this.props.onChange(e)},this.updateCurrent=e=>{this.setState({current:e})},this.updateMax=e=>{let t=e;1===this.props.step&&(t=Math.round(t)),t<this.state.current[0]?t=this.state.current[0]:t<this.props.min&&(t=this.props.min),t>this.props.max&&(t=this.props.max),this.props.onChange([this.state.current[0],t])},this.updateMin=e=>{let t=e;1===this.props.step&&(t=Math.round(t)),t<this.props.min&&(t=this.props.min),t>this.state.current[1]?t=this.state.current[1]:t>this.props.max&&(t=this.props.max),this.props.onChange([t,this.state.current[1]])}}static getDerivedStateFromProps(e,t){return t.isChanging||e.value[0]===t.current[0]&&e.value[1]===t.current[1]?null:{current:e.value}}render(){let e=this.props.step;return void 0===e&&(e=1),(0,ct.jsxs)("div",{className:"msp-slider2",children:[(0,ct.jsx)("div",{children:(0,ct.jsx)(Ky,{numeric:!0,delayMs:50,value:this.state.current[0],onEnter:this.props.onEnter,blurOnEnter:!0,isDisabled:this.props.disabled,onChange:this.updateMin})}),(0,ct.jsx)("div",{children:(0,ct.jsx)(Kde,{min:this.props.min,max:this.props.max,step:e,value:this.state.current,disabled:this.props.disabled,onBeforeChange:this.begin,onChange:this.updateCurrent,onAfterChange:this.end,range:!0,allowCross:!0})}),(0,ct.jsx)("div",{children:(0,ct.jsx)(Ky,{numeric:!0,delayMs:50,value:this.state.current[1],onEnter:this.props.onEnter,blurOnEnter:!0,isDisabled:this.props.disabled,onChange:this.updateMax})})]})}}function zde(e){const t=[],n={}.hasOwnProperty;for(let r=0;r<arguments.length;r++){const e=arguments[r];if(!e)continue;const o=typeof e;if("string"===o||"number"===o)t.push(e);else if(Array.isArray(e))t.push(zde.apply(null,e));else if("object"===o)for(const r in e)n.call(e,r)&&e[r]&&t.push(r)}return t.join(" ")}function Hde(e){return e.touches.length>1||"touchend"===e.type.toLowerCase()&&e.touches.length>0}function Vde(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function qde(e,t){return e?t.clientY:t.pageX}function Yde(e,t){const n=t.getBoundingClientRect();return e?n.top+.5*n.height:n.left+.5*n.width}function Xde(e){e.stopPropagation(),e.preventDefault()}class Wde extends F.Component{render(){const{className:e,tipFormatter:t,vertical:n,offset:r,value:o,index:i}=this.props,a=n?{bottom:`${r}%`}:{left:`${r}%`};return(0,ct.jsx)("div",{className:e,style:a,title:t(o,i)})}}class Kde extends F.Component{constructor(e){super(e),this.sliderElement=F.createRef(),this.handleElements=[],this.dragOffset=0,this.startPosition=0,this.startValue=0,this._getPointsCache=void 0,this.onMouseDown=e=>{if(0!==e.button)return;let t=qde(this.props.vertical,e);if(this.isEventFromHandle(e)){const n=Yde(this.props.vertical,e.target);this.dragOffset=t-n,t=n}else this.dragOffset=0;this.onStart(t),this.addDocumentEvents("mouse"),Xde(e)},this.onTouchMove=e=>{if(Hde(e))return void this.end("touch");const t=Vde(this.props.vertical,e);this.onMove(e,t-this.dragOffset)},this.onTouchStart=e=>{if(Hde(e))return;let t=Vde(this.props.vertical,e);if(this.isEventFromHandle(e)){const n=Yde(this.props.vertical,e.target);this.dragOffset=t-n,t=n}else this.dragOffset=0;this.onStart(t),this.addDocumentEvents("touch"),Xde(e)},this.eventHandlers={touchmove:e=>this.onTouchMove(e),touchend:e=>this.end("touch"),mousemove:e=>this.onMouseMove(e),mouseup:e=>this.end("mouse")},this.calcOffset=e=>{const{min:t,max:n}=this.props;return 100*((e-t)/(n-t))};const{range:t,min:n,max:r}=e,o=t?Array.apply(null,Array(+t+1)).map((()=>n)):n,i="defaultValue"in e?e.defaultValue:o,a=void 0!==e.value?e.value:i,s=(t?a:[n,a]).map((e=>this.trimAlignValue(e)));let l;l=t&&s[0]===s[s.length-1]&&s[0]===r?0:s.length-1,this.state={handle:null,recent:l,bounds:s}}componentDidUpdate(e){if(!("value"in this.props||"min"in this.props||"max"in this.props))return;const{bounds:t}=this.state;if(e.range){const e=(this.props.value||t).map((e=>this.trimAlignValue(e,this.props)));if(e.every(((e,n)=>e===t[n])))return;this.setState({bounds:e}),t.some((e=>this.isValueOutOfBounds(e,this.props)))&&this.props.onChange(e)}else{const n=void 0!==this.props.value?this.props.value:t[1],r=this.trimAlignValue(n,this.props);if(r===t[1]&&t[0]===e.min)return;this.setState({bounds:[e.min,r]}),this.isValueOutOfBounds(t[1],this.props)&&this.props.onChange(r)}}onChange(e){const t=this.props;!("value"in t)?this.setState(e):void 0!==e.handle&&this.setState({handle:e.handle});const n={...this.state,...e},r=t.range?n.bounds:n.bounds[1];t.onChange(r)}onMouseMove(e){const t=qde(this.props.vertical,e);this.onMove(e,t-this.dragOffset)}onMove(e,t){Xde(e);const n=this.props,r=this.state;let o=t-this.startPosition;o=this.props.vertical?-o:o;const i=o/this.getSliderLength()*(n.max-n.min),a=this.trimAlignValue(this.startValue+i);if(a===r.bounds[r.handle])return;const s=[...r.bounds];s[r.handle]=a;let l=r.handle;if(n.pushable){const e=r.bounds[l];this.pushSurroundingHandles(s,l,e)}else n.allowCross&&(s.sort(((e,t)=>e-t)),l=s.indexOf(a));this.onChange({handle:l,bounds:s})}onStart(e){this.props.onBeforeChange(this.getValue());const t=this.calcValueByPos(e);this.startValue=t,this.startPosition=e;const n=this.state,{bounds:r}=n;let o=1;if(this.props.range){let e=0;for(let n=1;n<r.length-1;++n)t>r[n]&&(e=n);Math.abs(r[e+1]-t)<Math.abs(r[e]-t)&&(e+=1),o=e;const i=r[e+1]===r[e];i&&(o=n.recent),i&&t!==r[e+1]&&(o=t<r[e+1]?e:e+1)}this.setState({handle:o,recent:o});if(t===n.bounds[o])return;const i=[...n.bounds];i[o]=t,this.onChange({bounds:i})}getPoints(){const{marks:e,step:t,min:n,max:r}=this.props,o=this._getPointsCache;if(!o||o.marks!==e||o.step!==t){const o={...e};if(null!==t)for(let e=n;e<=r;e+=t)o[e]=e;const i=Object.keys(o).map(parseFloat);i.sort(((e,t)=>e-t)),this._getPointsCache={marks:e,step:t,points:i}}return this._getPointsCache.points}getPrecision(e){const t=e.toString();let n=0;return t.indexOf(".")>=0&&(n=t.length-t.indexOf(".")-1),n}getSliderLength(){const e=this.sliderElement.current;return e?this.props.vertical?e.clientHeight:e.clientWidth:0}getSliderStart(){const e=this.sliderElement.current.getBoundingClientRect();return this.props.vertical?e.top:e.left}getValue(){const{bounds:e}=this.state;return this.props.range?e:e[1]}addDocumentEvents(e){"touch"===e?(document.addEventListener("touchmove",this.eventHandlers.touchmove),document.addEventListener("touchend",this.eventHandlers.touchend)):"mouse"===e&&(document.addEventListener("mousemove",this.eventHandlers.mousemove),document.addEventListener("mouseup",this.eventHandlers.mouseup))}calcValue(e){const{vertical:t,min:n,max:r}=this.props,o=Math.abs(e/this.getSliderLength());return t?(1-o)*(r-n)+n:o*(r-n)+n}calcValueByPos(e){const t=e-this.getSliderStart();return this.trimAlignValue(this.calcValue(t))}end(e){this.removeEvents(e),this.props.onAfterChange(this.getValue()),this.setState({handle:null})}isEventFromHandle(e){for(const t of this.handleElements)if(t.current===e.target)return!0;return!1}isValueOutOfBounds(e,t){return e<t.min||e>t.max}pushHandle(e,t,n,r){const o=e[t];let i=e[t];for(;n*(i-o)<r;){if(!this.pushHandleOnePoint(e,t,n))return e[t]=o,!1;i=e[t]}return!0}pushHandleOnePoint(e,t,n){const r=this.getPoints(),o=r.indexOf(e[t])+n;if(o>=r.length||o<0)return!1;const i=t+n,a=r[o],{pushable:s}=this.props,l=n*(e[i]-a);return!!this.pushHandle(e,i,n,+s-l)&&(e[t]=a,!0)}pushSurroundingHandles(e,t,n){const{pushable:r}=this.props,o=e[t];let i=0;if(e[t+1]-o<+r?i=1:o-e[t-1]<+r&&(i=-1),0===i)return;const a=t+i,s=i*(e[a]-o);this.pushHandle(e,a,i,+r-s)||(e[t]=n)}removeEvents(e){"touch"===e?(document.removeEventListener("touchmove",this.eventHandlers.touchmove),document.removeEventListener("touchend",this.eventHandlers.touchend)):"mouse"===e&&(document.removeEventListener("mousemove",this.eventHandlers.mousemove),document.removeEventListener("mouseup",this.eventHandlers.mouseup))}trimAlignValue(e,t){const{handle:n,bounds:r}=this.state||{},{marks:o,step:i,min:a,max:s,allowCross:l}={...this.props,...t||{}};let c=e;c<=a&&(c=a),c>=s&&(c=s),!l&&null!=n&&n>0&&c<=r[n-1]&&(c=r[n-1]),!l&&null!=n&&n<r.length-1&&c>=r[n+1]&&(c=r[n+1]);const u=Object.keys(o).map(parseFloat);if(null!==i){const e=Math.round((c-a)/i)*i+a;u.push(e)}const d=u.map((e=>Math.abs(c-e))),A=u[d.indexOf(Math.min.apply(Math,d))];return null!==i?parseFloat(A.toFixed(this.getPrecision(i))):A}render(){const{handle:e,bounds:t}=this.state,{className:n,prefixCls:r,disabled:o,vertical:i,range:a,step:s,marks:l,tipFormatter:c}=this.props,u=this.props.handle,d=t.map(this.calcOffset),A=`${r}-handle`,f=t.map(((e,n)=>zde({[A]:!0,[`${A}-${n+1}`]:!0,[`${A}-lower`]:0===n,[`${A}-upper`]:n===t.length-1}))),p={prefixCls:r,noTip:null===s||null===c,tipFormatter:c,vertical:i};if(this.handleElements.length!==t.length){this.handleElements=[];for(let e=0;e<t.length;e++)this.handleElements.push(F.createRef())}const h=t.map(((t,n)=>F.cloneElement(u,{...p,className:f[n],value:t,offset:d[n],dragging:e===n,index:n,key:n,ref:this.handleElements[n]})));a||h.shift();const g=zde({[r]:!0,[`${r}-with-marks`]:Object.keys(l).length,[`${r}-disabled`]:o,[`${r}-vertical`]:this.props.vertical,[n]:!!n});return(0,ct.jsxs)("div",{ref:this.sliderElement,className:g,onTouchStart:o?Dp:this.onTouchStart,onMouseDown:o?Dp:this.onMouseDown,children:[(0,ct.jsx)("div",{className:`${r}-rail`}),h]})}}Kde.defaultProps={prefixCls:"msp-slider-base",className:"",min:0,max:100,step:1,marks:{},handle:(0,ct.jsx)(Wde,{className:"",vertical:!1,offset:0,tipFormatter:e=>e,value:0,index:0}),onBeforeChange:Dp,onChange:Dp,onAfterChange:Dp,tipFormatter:(e,t)=>e,disabled:!1,range:!1,vertical:!1,allowCross:!0,pushable:!1};class Jde extends F.PureComponent{constructor(){super(...arguments),this.onChange=e=>{var t,n;if(null===(n=(t=this.props).onChange)||void 0===n||n.call(t,e,this.props.values),this.props.onChangeValues){const t={...this.props.values,[e.name]:e.value};this.props.onChangeValues(t,this.props.values)}},this.paramGroups=Mj((e=>function(e){function t(e,t,n){const r=Zde(t);if(r)if(t.category){n.map||(n.map=new Map);let o=n.map.get(t.category);o||(o=[],n.map.set(t.category,o),n.params.push(o)),o.push([e,t,r])}else n.params[0].push([e,t,r])}function n(e,t){const n=e[0],r=t[0];return n&&n[1].category?r&&r[1].category&&n[1].category<r[1].category?-1:1:-1}const r=Object.keys(e),o={params:[[]],map:void 0},i={params:[[]],map:void 0};for(const a of r){const n=e[a];n.isHidden||(n.isEssential?t(a,n,o):t(a,n,i))}return o.params.sort(n),i.params.sort(n),{essentials:o.params,advanced:i.params}}(e)))}renderGroup(e){var t;if(0===e.length)return null;const n=this.props.values;let r,o=null;for(const[i,a,s]of e)(null===(t=a.hideIf)||void 0===t?void 0:t.call(a,n))||(o||(o=[]),r=a.category,o.push((0,ct.jsx)(s,{param:a,onChange:this.onChange,onEnter:this.props.onEnter,isDisabled:this.props.isDisabled,name:i,value:n[i]},i)));return o?r?[(0,ct.jsx)(ev,{header:r,children:o},r)]:o:null}renderPart(e){let t=null;for(const n of e){const e=this.renderGroup(n);if(e){t||(t=[]);for(const n of e)t.push(n)}}return t}render(){const e=this.paramGroups(this.props.params),t=this.renderPart(e.essentials),n=this.renderPart(e.advanced);return t&&n?(0,ct.jsxs)(ct.Fragment,{children:[t,(0,ct.jsx)(ev,{header:"Advanced Options",children:n})]}):t||n}}function Zde(e){switch(e.type){case"value":case"data-ref":return;case"boolean":return rAe;case"number":return"undefined"!==typeof e.min&&"undefined"!==typeof e.max?aAe:iAe;case"converted":return MAe;case"conditioned":return QAe;case"multi-select":return wAe;case"color":return Ode;case"color-list":return e.offsets?bAe:vAe;case"vec3":return CAe;case"mat4":return IAe;case"url":return EAe;case"file":return xAe;case"file-list":return BAe;case"select":return cAe;case"value-ref":return uAe;case"text":return sAe;case"interval":return"undefined"!==typeof e.min&&"undefined"!==typeof e.max?AAe:dAe;case"group":return _Ae;case"mapped":return SAe;case"line-graph":return oAe;case"script":return RAe;case"object-list":return kAe;default:const t=e;return void console.warn(`${t} has no associated UI component`)}}class $de extends F.PureComponent{render(){const{legend:e,description:t}=this.props,n=e&&function(e){switch(e.kind){case"scale-legend":return Fde;case"table-legend":return Nde;default:const t=e;return void console.warn(`${t} has no associated UI component`)}}(e);return(0,ct.jsx)("div",{className:"msp-help-text",children:(0,ct.jsxs)("div",{children:[(0,ct.jsxs)("div",{className:"msp-help-description",children:[(0,ct.jsx)(vy,{svg:zy,inline:!0}),t]}),n&&(0,ct.jsx)("div",{className:"msp-help-legend",children:(0,ct.jsx)(n,{legend:e})})]})})}}function eAe(e){const{props:t,state:n,control:r,toggleHelp:o,addOn:i}=e,a=[];t.param.shortLabel&&a.push("msp-control-label-short"),t.param.twoColumns&&a.push("msp-control-col-2"),t.param.multiline&&a.push("msp-control-twoline");const s=a.join(" "),l=t.param.label||th(t.name),c=t.param.help?t.param.help(t.value):{description:t.param.description,legend:t.param.legend},u=c.description||c.legend,d=l+(u?". Click for help.":"");return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)(tv,{className:s,title:d,label:(0,ct.jsxs)(ct.Fragment,{children:[l,u&&(0,ct.jsx)(tAe,{show:n.showHelp,toggle:o,title:d})]}),control:r}),u&&n.showHelp&&(0,ct.jsx)("div",{className:"msp-control-offset",children:(0,ct.jsx)($de,{legend:c.legend,description:c.description})}),i]})}function tAe(e){let{show:t,toggle:n,title:r}=e;return(0,ct.jsx)("button",{className:"msp-help msp-btn-link msp-btn-icon msp-control-group-expander",onClick:n,title:r||(t?"Hide":"Show")+" help",style:{background:"transparent",textAlign:"left",padding:"0"},children:(0,ct.jsx)(vy,{svg:zy})})}class nAe extends F.PureComponent{constructor(){super(...arguments),this.state={showHelp:!1},this.toggleHelp=()=>this.setState({showHelp:!this.state.showHelp})}update(e){this.props.onChange({param:this.props.param,name:this.props.name,value:e})}renderAddOn(){return null}render(){return eAe({props:this.props,state:this.state,control:this.renderControl(),toggleHelp:this.toggleHelp,addOn:this.renderAddOn()})}}class rAe extends nAe{constructor(){super(...arguments),this.onClick=e=>{this.update(!this.props.value),e.currentTarget.blur()}}renderControl(){return(0,ct.jsxs)("button",{onClick:this.onClick,disabled:this.props.isDisabled,children:[(0,ct.jsx)(vy,{svg:this.props.value?Py:Fy}),this.props.value?"On":"Off"]})}}class oAe extends F.PureComponent{constructor(){super(...arguments),this.state={isExpanded:!1,isOverPoint:!1,message:`${this.props.param.defaultValue.length} points`},this.onHover=e=>{this.setState({isOverPoint:!this.state.isOverPoint}),e?this.setState({message:this.pointToLabel(e)}):this.setState({message:`${this.props.value.length} points`})},this.onDrag=e=>{this.setState({message:this.pointToLabel(e)})},this.onChange=e=>{this.props.onChange({name:this.props.name,param:this.props.param,value:e})},this.toggleExpanded=e=>{this.setState({isExpanded:!this.state.isExpanded}),e.currentTarget.blur()}}pointToLabel(e){var t,n;if(!e)return"";const r=null===(n=(t=this.props.param).getVolume)||void 0===n?void 0:n.call(t);if(r){const{min:t,max:n,mean:o,sigma:i}=r.grid.stats,a=t+(n-t)*e[0],s=(a-o)/i;return`(${a.toFixed(2)} | ${s.toFixed(2)}\u03c3, ${e[1].toFixed(2)})`}return`(${e[0].toFixed(2)}, ${e[1].toFixed(2)})`}render(){var e,t;const n=this.props.param.label||th(this.props.name);return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)(tv,{label:n,control:(0,ct.jsx)("button",{onClick:this.toggleExpanded,disabled:this.props.isDisabled,children:`${this.state.message}`})}),(0,ct.jsx)("div",{className:"msp-control-offset",style:{display:this.state.isExpanded?"block":"none",marginTop:1},children:(0,ct.jsx)(Ude,{data:this.props.value,volume:null===(t=(e=this.props.param).getVolume)||void 0===t?void 0:t.call(e),onChange:this.onChange,onHover:this.onHover,onDrag:this.onDrag})})]})}}class iAe extends F.PureComponent{constructor(){super(...arguments),this.state={value:"0"},this.update=e=>{const t=OR(this.props.param.step||.01);e=parseFloat(e.toFixed(t)),this.props.onChange({param:this.props.param,name:this.props.name,value:e})}}render(){const e=this.props.param.label||th(this.props.name),t=this.props.param.label||th(this.props.name),n=OR(this.props.param.step||.01);return(0,ct.jsx)(tv,{title:this.props.param.description,label:t,control:(0,ct.jsx)(Ky,{numeric:!0,value:parseFloat(this.props.value.toFixed(n)),onEnter:this.props.onEnter,placeholder:e,isDisabled:this.props.isDisabled,onChange:this.update})})}}class aAe extends nAe{constructor(){super(...arguments),this.onChange=e=>{this.update(e)}}renderControl(){const e="undefined"===typeof this.props.value?this.props.param.defaultValue:this.props.value;return(0,ct.jsx)(Gde,{value:e,min:this.props.param.min,max:this.props.param.max,step:this.props.param.step,onChange:this.onChange,onChangeImmediate:this.props.param.immediateUpdate?this.onChange:void 0,disabled:this.props.isDisabled,onEnter:this.props.onEnter})}}class sAe extends nAe{constructor(){super(...arguments),this.updateValue=e=>{e!==this.props.value&&this.update(e)}}renderControl(){const e=this.props.param.placeholder||this.props.param.label||th(this.props.name);return(0,ct.jsx)(lAe,{props:this.props,placeholder:e,update:this.updateValue})}}function lAe(e){let{props:t,placeholder:n,update:r}=e;const[o,i]=F.useState(t.value);return F.useEffect((()=>i(t.value)),[t.value]),t.param.multiline?(0,ct.jsx)("div",{className:"msp-control-text-area-wrapper",children:(0,ct.jsx)("textarea",{value:t.param.disableInteractiveUpdates?o||"":t.value,placeholder:n,onChange:e=>{t.param.disableInteractiveUpdates?i(e.target.value):r(e.target.value)},onBlur:e=>{t.param.disableInteractiveUpdates&&r(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.shiftKey||e.ctrlKey||e.metaKey)&&e.currentTarget.blur()},disabled:t.isDisabled})}):(0,ct.jsx)("input",{type:"text",value:t.param.disableInteractiveUpdates?o||"":t.value,placeholder:n,onChange:e=>{t.param.disableInteractiveUpdates?i(e.target.value):r(e.target.value)},onBlur:e=>{t.param.disableInteractiveUpdates&&r(e.target.value)},disabled:t.isDisabled,onKeyDown:e=>{"Enter"===e.key&&(t.onEnter?(e.stopPropagation(),t.onEnter()):"Enter"===e.key&&(e.shiftKey||e.ctrlKey||e.metaKey)?e.currentTarget.blur():t.param.disableInteractiveUpdates&&r(o))}})}F.PureComponent;class cAe extends F.PureComponent{constructor(){super(...arguments),this.state={showHelp:!1,showOptions:!1},this.onSelect=e=>{e&&e.value!==this.props.value?this.setState({showOptions:!1},(()=>{this.props.onChange({param:this.props.param,name:this.props.name,value:e.value})})):this.setState({showOptions:!1})},this.toggle=()=>this.setState({showOptions:!this.state.showOptions}),this.cycle=()=>{const{options:e}=this.props.param,t=e.findIndex((e=>e[0]===this.props.value)),n=t===e.length-1?0:t+1;this.props.onChange({param:this.props.param,name:this.props.name,value:e[n][0]})},this.items=Mj((e=>Sde.createItemsFromSelectOptions(e.options))),this.toggleHelp=()=>this.setState({showHelp:!this.state.showHelp})}renderControl(){var e;const t=this.items(this.props.param),n=void 0!==this.props.value?Sde.findItem(t,this.props.value):void 0,r=n?n.label:"undefined"===typeof this.props.value?`${(null===(e=Sde.getFirstItem(t))||void 0===e?void 0:e.label)||""} [Default]`:`[Invalid] ${this.props.value}`,o=this.props.param.cycle?this.cycle:this.toggle,i=this.props.param.cycle?"center":"left",a=this.props.param.cycle?"on"===this.props.value?Py:"off"===this.props.value?Fy:void 0:void 0;return(0,ct.jsx)($y,{disabled:this.props.isDisabled,style:{textAlign:i,overflow:"hidden",textOverflow:"ellipsis"},label:r,title:r,icon:a,toggle:o,isSelected:this.state.showOptions})}renderAddOn(){if(!this.state.showOptions)return null;const e=this.items(this.props.param),t=Sde.findItem(e,this.props.value);return(0,ct.jsx)(Sde,{items:e,current:t,onSelect:this.onSelect})}render(){return eAe({props:this.props,state:this.state,control:this.renderControl(),toggleHelp:this.toggleHelp,addOn:this.renderAddOn()})}}class uAe extends F.PureComponent{constructor(){super(...arguments),this.state={showHelp:!1,showOptions:!1},this.onSelect=e=>{e&&e.value!==this.props.value?this.setState({showOptions:!1},(()=>{this.props.onChange({param:this.props.param,name:this.props.name,value:{ref:e.value}})})):this.setState({showOptions:!1})},this.toggle=()=>this.setState({showOptions:!this.state.showOptions}),this.toggleHelp=()=>this.setState({showHelp:!this.state.showHelp})}get items(){return Sde.createItemsFromSelectOptions(this.props.param.getOptions(this.context))}renderControl(){var e;const t=this.items,n=this.props.value.ref?Sde.findItem(t,this.props.value.ref):void 0,r=n?n.label:`[Ref] ${null!==(e=this.props.value.ref)&&void 0!==e?e:""}`;return(0,ct.jsx)($y,{disabled:this.props.isDisabled,style:{textAlign:"left",overflow:"hidden",textOverflow:"ellipsis"},label:r,title:r,toggle:this.toggle,isSelected:this.state.showOptions})}renderAddOn(){if(!this.state.showOptions)return null;const e=this.items,t=Sde.findItem(e,this.props.value.ref);return(0,ct.jsx)(Sde,{items:e,current:t,onSelect:this.onSelect})}render(){return eAe({props:this.props,state:this.state,control:this.renderControl(),toggleHelp:this.toggleHelp,addOn:this.renderAddOn()})}}uAe.contextType=nv;class dAe extends F.PureComponent{constructor(){super(...arguments),this.state={isExpanded:!1},this.components={0:U_.Numeric(0,{step:this.props.param.step},{label:"Min"}),1:U_.Numeric(0,{step:this.props.param.step},{label:"Max"})},this.componentChange=e=>{let{name:t,value:n}=e;const r=[...this.props.value];r[+t]=n,this.change(r)},this.toggleExpanded=e=>{this.setState({isExpanded:!this.state.isExpanded}),e.currentTarget.blur()}}change(e){this.props.onChange({name:this.props.name,param:this.props.param,value:e})}render(){const e=this.props.value,t=this.props.param.label||th(this.props.name),n=OR(this.props.param.step||.01),r=`[${e[0].toFixed(n)}, ${e[1].toFixed(n)}]`;return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)(tv,{label:t,control:(0,ct.jsx)("button",{onClick:this.toggleExpanded,disabled:this.props.isDisabled,children:r})}),this.state.isExpanded&&(0,ct.jsx)("div",{className:"msp-control-offset",children:(0,ct.jsx)(Jde,{params:this.components,values:e,onChange:this.componentChange,onEnter:this.props.onEnter})})]})}}class AAe extends nAe{constructor(){super(...arguments),this.onChange=e=>{this.update(e)}}renderControl(){return(0,ct.jsx)(jde,{value:this.props.value,min:this.props.param.min,max:this.props.param.max,step:this.props.param.step,onChange:this.onChange,disabled:this.props.isDisabled,onEnter:this.props.onEnter})}}function fAe(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.isArray(e)?t?`${Jp.toStyle(e[0])} ${(100*e[1]).toFixed(2)}%`:Jp.toStyle(e[0]):Jp.toStyle(e)}const pAe=Rj((e=>{const t=e.map((e=>fAe(e,!0)));return`linear-gradient(to right, ${t.join(", ")})`})),hAe=Rj((e=>{const t=e.length,n=[`${fAe(e[0])} ${1/t*100}%`];for(let r=1,o=t-1;r<o;++r)n.push(`${fAe(e[r])} ${r/t*100}%`,`${fAe(e[r])} ${(r+1)/t*100}%`);return n.push(`${fAe(e[t-1])} ${(t-1)/t*100}%`),`linear-gradient(to right, ${n.join(", ")})`}));function gAe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";return{background:(n=e.colors,r="set"===e.kind,r?hAe(n):pAe(n)),position:"absolute",bottom:"0",height:"4px",right:t,left:"0"};var n,r}let mAe;function yAe(){return mAe||(mAe=function(){const e=e=>{const t=ph(e[0]);return(0,ct.jsx)("div",{style:gAe({kind:"qualitative"!==t.type?"interpolate":"set",colors:t.list})})};return{ColorPresets:{all:Sde.createItemsFromSelectOptions(dh,{addOn:e}),scale:Sde.createItemsFromSelectOptions(Ah,{addOn:e}),set:Sde.createItemsFromSelectOptions(fh,{addOn:e})},ColorsParam:U_.ObjectList({color:U_.Color(0)},(e=>{let{color:t}=e;return Jp.toHexString(t).toUpperCase()})),OffsetColorsParam:U_.ObjectList({color:U_.Color(0),offset:U_.Numeric(0,{min:0,max:1,step:.01})},(e=>{let{color:t,offset:n}=e;return`${Jp.toHexString(t).toUpperCase()} [${n.toFixed(2)}]`})),IsInterpolatedParam:U_.Boolean(!1,{label:"Interpolated"})}}(),mAe)}class vAe extends F.PureComponent{constructor(){super(...arguments),this.state={showHelp:!1,show:void 0},this.toggleEdit=()=>this.setState({show:"edit"===this.state.show?void 0:"edit"}),this.togglePresets=()=>this.setState({show:"presets"===this.state.show?void 0:"presets"}),this.selectPreset=e=>{if(!e)return;this.setState({show:void 0});const t=ph(e.value);this.update({kind:"qualitative"!==t.type?"interpolate":"set",colors:t.list})},this.colorsChanged=e=>{let{value:t}=e;this.update({kind:this.props.value.kind,colors:t.map((e=>e.color))})},this.isInterpolatedChanged=e=>{let{value:t}=e;this.update({kind:t?"interpolate":"set",colors:this.props.value.colors})},this.toggleHelp=()=>this.setState({showHelp:!this.state.showHelp})}update(e){this.props.onChange({param:this.props.param,name:this.props.name,value:e})}renderControl(){const{value:e}=this.props;return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsxs)("button",{onClick:this.toggleEdit,style:{position:"relative",paddingRight:"33px"},children:[1===e.colors.length?"1 color":`${e.colors.length} colors`,(0,ct.jsx)("div",{style:gAe(e,"33px")})]}),(0,ct.jsx)(Zy,{svg:My,onClick:this.togglePresets,toggleState:"presets"===this.state.show,title:"Color Presets",style:{padding:0,position:"absolute",right:0,top:0,width:"32px"}})]})}renderColors(){if(!this.state.show)return null;const{ColorPresets:e,ColorsParam:t,IsInterpolatedParam:n}=yAe(),r=e[this.props.param.presetKind];if("presets"===this.state.show)return(0,ct.jsx)(Sde,{items:r,onSelect:this.selectPreset});const o=this.props.value.colors.map((e=>({color:e})));return(0,ct.jsxs)("div",{className:"msp-control-offset",children:[(0,ct.jsx)(kAe,{name:"colors",param:t,value:o,onChange:this.colorsChanged,isDisabled:this.props.isDisabled,onEnter:this.props.onEnter}),(0,ct.jsx)(rAe,{name:"isInterpolated",param:n,value:"interpolate"===this.props.value.kind,onChange:this.isInterpolatedChanged,isDisabled:this.props.isDisabled,onEnter:this.props.onEnter})]})}render(){return eAe({props:this.props,state:this.state,control:this.renderControl(),toggleHelp:this.toggleHelp,addOn:this.renderColors()})}}class bAe extends F.PureComponent{constructor(){super(...arguments),this.state={showHelp:!1,show:void 0},this.toggleEdit=()=>this.setState({show:"edit"===this.state.show?void 0:"edit"}),this.togglePresets=()=>this.setState({show:"presets"===this.state.show?void 0:"presets"}),this.selectPreset=e=>{if(!e)return;this.setState({show:void 0});const t=ph(e.value);this.update({kind:"qualitative"!==t.type?"interpolate":"set",colors:t.list})},this.colorsChanged=e=>{let{value:t}=e;const n=t.map((e=>[e.color,e.offset]));n.sort(((e,t)=>e[1]-t[1])),this.update({kind:this.props.value.kind,colors:n})},this.isInterpolatedChanged=e=>{let{value:t}=e;this.update({kind:t?"interpolate":"set",colors:this.props.value.colors})},this.toggleHelp=()=>this.setState({showHelp:!this.state.showHelp})}update(e){this.props.onChange({param:this.props.param,name:this.props.name,value:e})}renderControl(){const{value:e}=this.props;return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsxs)("button",{onClick:this.toggleEdit,style:{position:"relative",paddingRight:"33px"},children:[1===e.colors.length?"1 color":`${e.colors.length} colors`,(0,ct.jsx)("div",{style:gAe(e,"33px")})]}),(0,ct.jsx)(Zy,{svg:My,onClick:this.togglePresets,toggleState:"presets"===this.state.show,title:"Color Presets",style:{padding:0,position:"absolute",right:0,top:0,width:"32px"}})]})}renderColors(){if(!this.state.show)return null;const{ColorPresets:e,OffsetColorsParam:t,IsInterpolatedParam:n}=yAe(),r=e[this.props.param.presetKind];if("presets"===this.state.show)return(0,ct.jsx)(Sde,{items:r,onSelect:this.selectPreset});const o=this.props.value.colors,i=o.map(((e,t)=>Array.isArray(e)?{color:e[0],offset:e[1]}:{color:e,offset:t/o.length}));return i.sort(((e,t)=>e.offset-t.offset)),(0,ct.jsxs)("div",{className:"msp-control-offset",children:[(0,ct.jsx)(kAe,{name:"colors",param:t,value:i,onChange:this.colorsChanged,isDisabled:this.props.isDisabled,onEnter:this.props.onEnter}),(0,ct.jsx)(rAe,{name:"isInterpolated",param:n,value:"interpolate"===this.props.value.kind,onChange:this.isInterpolatedChanged,isDisabled:this.props.isDisabled,onEnter:this.props.onEnter})]})}render(){return eAe({props:this.props,state:this.state,control:this.renderControl(),toggleHelp:this.toggleHelp,addOn:this.renderColors()})}}class CAe extends F.PureComponent{constructor(){super(...arguments),this.state={isExpanded:!1},this.components={0:U_.Numeric(0,{step:this.props.param.step},{label:this.props.param.fieldLabels&&this.props.param.fieldLabels.x||"X"}),1:U_.Numeric(0,{step:this.props.param.step},{label:this.props.param.fieldLabels&&this.props.param.fieldLabels.y||"Y"}),2:U_.Numeric(0,{step:this.props.param.step},{label:this.props.param.fieldLabels&&this.props.param.fieldLabels.z||"Z"})},this.componentChange=e=>{let{name:t,value:n}=e;const r=qh.copy(qh.zero(),this.props.value);r[+t]=n,this.change(r)},this.toggleExpanded=e=>{this.setState({isExpanded:!this.state.isExpanded}),e.currentTarget.blur()}}change(e){this.props.onChange({name:this.props.name,param:this.props.param,value:e})}render(){const e=this.props.value,t=this.props.param.label||th(this.props.name),n=OR(this.props.param.step||.01),r=`[${e[0].toFixed(n)}, ${e[1].toFixed(n)}, ${e[2].toFixed(n)}]`;return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)(tv,{label:t,control:(0,ct.jsx)("button",{onClick:this.toggleExpanded,disabled:this.props.isDisabled,children:r})}),this.state.isExpanded&&(0,ct.jsx)("div",{className:"msp-control-offset",children:(0,ct.jsx)(Jde,{params:this.components,values:e,onChange:this.componentChange,onEnter:this.props.onEnter})})]})}}class IAe extends F.PureComponent{constructor(){super(...arguments),this.state={isExpanded:!1},this.components={json:U_.Text(JSON.stringify(Yh()),{description:"JSON array with 4x4 matrix in a column major (j * 4 + i indexing) format"})},this.componentChange=e=>{let{name:t,value:n}=e;const r=Yh.copy(Yh(),this.props.value);"json"===t?Yh.copy(r,JSON.parse(n)):r[+t]=n,this.change(r)},this.toggleExpanded=e=>{this.setState({isExpanded:!this.state.isExpanded}),e.currentTarget.blur()}}change(e){this.props.onChange({name:this.props.name,param:this.props.param,value:e})}changeValue(e){return t=>{const n=Yh.copy(Yh(),this.props.value);n[e]=t,this.change(n)}}get grid(){const e=this.props.value,t=[];for(let n=0;n<4;n++){const r=[];for(let t=0;t<4;t++)r.push((0,ct.jsx)(Ky,{numeric:!0,delayMs:50,value:Yh.getValue(e,n,t),onChange:this.changeValue(4*t+n),className:"msp-form-control",blurOnEnter:!0,isDisabled:this.props.isDisabled},t));t.push((0,ct.jsx)("div",{className:"msp-flex-row",children:r},n))}return(0,ct.jsx)("div",{className:"msp-parameter-matrix",children:t})}render(){const e={json:JSON.stringify(this.props.value)},t=this.props.param.label||th(this.props.name);return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)(tv,{label:t,control:(0,ct.jsx)("button",{onClick:this.toggleExpanded,disabled:this.props.isDisabled,children:"4\xd74 Matrix"})}),this.state.isExpanded&&(0,ct.jsxs)("div",{className:"msp-control-offset",children:[this.grid,(0,ct.jsx)(Jde,{params:this.components,values:e,onChange:this.componentChange,onEnter:this.props.onEnter})]})]})}}class EAe extends nAe{constructor(){super(...arguments),this.onChange=e=>{const t=e.target.value;t!==L_.getUrl(this.props.value||"")&&this.update(L_.Url(t))},this.onKeyPress=e=>{13!==e.keyCode&&13!==e.charCode&&"Enter"!==e.key||this.props.onEnter&&this.props.onEnter(),e.stopPropagation()}}renderControl(){const e=this.props.param.label||th(this.props.name);return(0,ct.jsx)("input",{type:"text",value:L_.getUrl(this.props.value||""),placeholder:e,onChange:this.onChange,onKeyPress:this.props.onEnter?this.onKeyPress:void 0,disabled:this.props.isDisabled})}}class xAe extends F.PureComponent{constructor(){super(...arguments),this.state={showHelp:!1},this.onChangeFile=e=>{this.change(e.target.files[0])},this.toggleHelp=()=>this.setState({showHelp:!this.state.showHelp})}change(e){this.props.onChange({name:this.props.name,param:this.props.param,value:L_.File(e)})}renderControl(){const e=this.props.value;return(0,ct.jsxs)("div",{className:"msp-btn msp-btn-block msp-btn-action msp-loader-msp-btn-file",style:{marginTop:"1px"},children:[e?e.name:"Select a file..."," ",(0,ct.jsx)("input",{disabled:this.props.isDisabled,onChange:this.onChangeFile,type:"file",multiple:!1,accept:this.props.param.accept})]})}render(){return this.props.param.label?eAe({props:this.props,state:this.state,control:this.renderControl(),toggleHelp:this.toggleHelp,addOn:null}):this.renderControl()}}class BAe extends F.PureComponent{constructor(){super(...arguments),this.state={showHelp:!1},this.onChangeFileList=e=>{this.change(e.target.files)},this.toggleHelp=()=>this.setState({showHelp:!this.state.showHelp})}change(e){const t=[];if(e)for(let n=0,r=e.length;n<r;++n)t.push(L_.File(e[n]));this.props.onChange({name:this.props.name,param:this.props.param,value:t})}renderControl(){const e=this.props.value,t=[];if(e)for(const r of e)t.push(r.name);const n=0===t.length?"Select files...":1===t.length?t[0]:`${t.length} files selected`;return(0,ct.jsxs)("div",{className:"msp-btn msp-btn-block msp-btn-action msp-loader-msp-btn-file",style:{marginTop:"1px"},children:[n," ",(0,ct.jsx)("input",{disabled:this.props.isDisabled,onChange:this.onChangeFileList,type:"file",multiple:!0,accept:this.props.param.accept})]})}render(){return this.props.param.label?eAe({props:this.props,state:this.state,control:this.renderControl(),toggleHelp:this.toggleHelp,addOn:null}):this.renderControl()}}class wAe extends F.PureComponent{constructor(){super(...arguments),this.state={isExpanded:!1},this.toggleExpanded=e=>{this.setState({isExpanded:!this.state.isExpanded}),e.currentTarget.blur()}}change(e){this.props.onChange({name:this.props.name,param:this.props.param,value:e})}toggle(e){return t=>{this.props.value.indexOf(e)<0?this.change(this.props.value.concat(e)):this.change(this.props.value.filter((t=>t!==e))),t.currentTarget.blur()}}render(){const e=this.props.value,t=this.props.param.emptyValue,n=this.props.param.label||th(this.props.name);return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)(tv,{label:n,control:(0,ct.jsx)("button",{onClick:this.toggleExpanded,disabled:this.props.isDisabled,children:0===e.length&&t?t:`${e.length} of ${this.props.param.options.length}`})}),this.state.isExpanded&&(0,ct.jsx)("div",{className:"msp-control-offset",children:this.props.param.options.map((t=>{let[n,r]=t;const o=e.indexOf(n)>=0;return(0,ct.jsx)(Jy,{onClick:this.toggle(n),disabled:this.props.isDisabled,style:{marginTop:"1px"},children:(0,ct.jsx)("span",{style:{float:o?"left":"right"},children:o?`\u2713 ${r}`:`${r} \u2717`})},n)}))})]})}}class _Ae extends F.PureComponent{constructor(){super(...arguments),this.state={isExpanded:!!this.props.param.isExpanded,showPresets:!1,showHelp:!1},this.onChangeParam=e=>{this.change({...this.props.value,[e.name]:e.value})},this.toggleExpanded=()=>this.setState({isExpanded:!this.state.isExpanded}),this.toggleShowPresets=()=>this.setState({showPresets:!this.state.showPresets}),this.presetItems=Mj((e=>{var t;return Sde.createItemsFromSelectOptions(null!==(t=e.presets)&&void 0!==t?t:[])})),this.onSelectPreset=e=>{this.setState({showPresets:!1}),this.change(null===e||void 0===e?void 0:e.value)}}change(e){this.props.onChange({name:this.props.name,param:this.props.param,value:e})}pivotedPresets(){if(!this.props.param.presets)return null;const e=this.props.param.label||th(this.props.name);return(0,ct.jsxs)("div",{className:"msp-control-group-wrapper",children:[(0,ct.jsx)("div",{className:"msp-control-group-header",children:(0,ct.jsxs)("button",{className:"msp-btn msp-form-control msp-btn-block",onClick:this.toggleShowPresets,children:[(0,ct.jsx)(vy,{svg:My}),e," Presets"]})}),this.state.showPresets&&(0,ct.jsx)(Sde,{items:this.presetItems(this.props.param),onSelect:this.onSelectPreset})]})}presets(){return this.props.param.presets?(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)("div",{className:"msp-control-group-presets-wrapper",children:(0,ct.jsx)("div",{className:"msp-control-group-header",children:(0,ct.jsxs)("button",{className:"msp-btn msp-form-control msp-btn-block",onClick:this.toggleShowPresets,children:[(0,ct.jsx)(vy,{svg:My}),"Presets"]})})}),this.state.showPresets&&(0,ct.jsx)(Sde,{items:this.presetItems(this.props.param),onSelect:this.onSelectPreset})]}):null}pivoted(){const e=this.props.param.pivot,t=this.props.param.params,n=t[e],r=Zde(n),o=(0,ct.jsx)(r,{name:e,param:n,value:this.props.value[e],onChange:this.onChangeParam,onEnter:this.props.onEnter,isDisabled:this.props.isDisabled});if(!this.state.isExpanded)return(0,ct.jsxs)("div",{className:"msp-mapped-parameter-group",children:[o,(0,ct.jsx)(Zy,{svg:Vy,onClick:this.toggleExpanded,toggleState:this.state.isExpanded,title:"More Options"})]});const i=Object.create(null);for(const a of Object.keys(t))a!==e&&(i[a]=t[a]);return(0,ct.jsxs)("div",{className:"msp-mapped-parameter-group",children:[o,(0,ct.jsx)(Zy,{svg:Vy,onClick:this.toggleExpanded,toggleState:this.state.isExpanded,title:"More Options"}),(0,ct.jsxs)("div",{className:"msp-control-offset",children:[this.pivotedPresets(),(0,ct.jsx)(Jde,{params:i,onEnter:this.props.onEnter,values:this.props.value,onChange:this.onChangeParam,isDisabled:this.props.isDisabled})]})]})}render(){const e=this.props.param.params;if(0===Object.keys(e).length)return null;if(this.props.param.pivot)return this.pivoted();const t=this.props.param.label||th(this.props.name),n=(0,ct.jsx)(Jde,{params:e,onChange:this.onChangeParam,values:this.props.value,onEnter:this.props.onEnter,isDisabled:this.props.isDisabled});return this.props.inMapped?(0,ct.jsx)("div",{className:"msp-control-offset",children:n}):this.props.param.isFlat?n:(0,ct.jsxs)("div",{className:"msp-control-group-wrapper",style:{position:"relative"},children:[(0,ct.jsx)("div",{className:"msp-control-group-header",children:(0,ct.jsxs)("button",{className:"msp-btn msp-form-control msp-btn-block",onClick:this.toggleExpanded,children:[(0,ct.jsx)(vy,{svg:this.state.isExpanded?_y:Dy}),t]})}),this.presets(),this.state.isExpanded&&(0,ct.jsx)("div",{className:"msp-control-offset",children:n})]})}}class SAe extends F.PureComponent{constructor(){super(...arguments),this.state={isExpanded:!1},this.valuesCache={},this.onChangeName=e=>{this.change({name:e.value,params:this.getValues(e.value)})},this.onChangeParam=e=>{this.setValues(this.props.value.name,e.value),this.change({name:this.props.value.name,params:e.value})},this.toggleExpanded=()=>this.setState({isExpanded:!this.state.isExpanded})}setValues(e,t){this.valuesCache[e]=t}getValues(e){return e in this.valuesCache?this.valuesCache[e]:this.props.param.map(e).defaultValue}change(e){this.props.onChange({name:this.props.name,param:this.props.param,value:e})}areParamsEmpty(e){for(const t of Object.keys(e))if(!e[t].isHidden)return!1;return!0}render(){const e=this.props.value||this.props.param.defaultValue,t=this.props.param.map(e.name),n=this.props.param.label||th(this.props.name),r=Zde(t),o=this.props.param.help,i=o?{...this.props.param.select,help:e=>o({name:e,params:this.getValues(e)})}:this.props.param.select,a=(0,ct.jsx)(cAe,{param:i,isDisabled:this.props.isDisabled,onChange:this.onChangeName,onEnter:this.props.onEnter,name:n,value:e.name});return r?"group"!==t.type||t.isFlat?(0,ct.jsxs)(ct.Fragment,{children:[a,(0,ct.jsx)(r,{param:t,value:e.params,name:e.name,onChange:this.onChangeParam,onEnter:this.props.onEnter,isDisabled:this.props.isDisabled})]}):this.areParamsEmpty(t.params)?a:(0,ct.jsxs)("div",{className:"msp-mapped-parameter-group",children:[a,(0,ct.jsx)(Zy,{svg:Vy,onClick:this.toggleExpanded,toggleState:this.state.isExpanded,title:`${n} Properties`}),this.state.isExpanded&&(0,ct.jsx)(_Ae,{inMapped:!0,param:t,value:e.params,name:e.name,onChange:this.onChangeParam,onEnter:this.props.onEnter,isDisabled:this.props.isDisabled})]}):a}}class DAe extends F.PureComponent{constructor(){super(...arguments),this.state={current:this.props.value},this.onChangeParam=e=>{this.setState({current:{...this.state.current,[e.name]:e.value}})},this.apply=()=>{this.props.apply(this.state.current)}}componentDidUpdate(e){this.props.params===e.params&&this.props.value===e.value||this.setState({current:this.props.value})}render(){return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)(Jde,{params:this.props.params,onChange:this.onChangeParam,values:this.state.current,onEnter:this.apply,isDisabled:this.props.isDisabled}),(0,ct.jsx)("button",{className:"msp-btn msp-btn-block msp-form-control msp-control-top-offset",onClick:this.apply,disabled:this.props.isDisabled,children:this.props.isUpdate?"Update":"Add"})]})}}class TAe extends F.PureComponent{constructor(){super(...arguments),this.state={isExpanded:!1},this.update=e=>{this.props.actions.update(e,this.props.index)},this.moveUp=()=>{this.props.actions.move(this.props.index,-1)},this.moveDown=()=>{this.props.actions.move(this.props.index,1)},this.remove=()=>{this.setState({isExpanded:!1}),this.props.actions.remove(this.props.index)},this.toggleExpanded=e=>{this.setState({isExpanded:!this.state.isExpanded}),e.currentTarget.blur()}}render(){return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsxs)("div",{className:"msp-param-object-list-item",children:[(0,ct.jsxs)("button",{className:"msp-btn msp-btn-block msp-form-control",onClick:this.toggleExpanded,children:[(0,ct.jsx)("span",{children:`${this.props.index+1}: `}),this.props.param.getLabel(this.props.value)]}),(0,ct.jsxs)("div",{children:[(0,ct.jsx)(Zy,{svg:By,title:"Move Up",onClick:this.moveUp,small:!0}),(0,ct.jsx)(Zy,{svg:ky,title:"Move Down",onClick:this.moveDown,small:!0}),(0,ct.jsx)(Zy,{svg:Gy,title:"Remove",onClick:this.remove,small:!0})]})]}),this.state.isExpanded&&(0,ct.jsx)("div",{className:"msp-control-offset",children:(0,ct.jsx)(DAe,{params:this.props.param.element,apply:this.update,value:this.props.value,isUpdate:!0,isDisabled:this.props.isDisabled})})]})}}class kAe extends F.PureComponent{constructor(){super(...arguments),this.state={isExpanded:!1},this.add=e=>{this.change([...this.props.value,e])},this.actions={update:(e,t)=>{const n=this.props.value.slice(0);n[t]=e,this.change(n)},move:(e,t)=>{let n=this.props.value;if(1===n.length)return;let r=(e+t)%n.length;r<0&&(r+=n.length),n=n.slice(0);const o=n[e];n[e]=n[r],n[r]=o,this.change(n)},remove:e=>{const t=this.props.value,n=[];for(let r=0;r<t.length;r++)e!==r&&n.push(t[r]);this.change(n)}},this.toggleExpanded=e=>{this.setState({isExpanded:!this.state.isExpanded}),e.currentTarget.blur()}}change(e){this.props.onChange({name:this.props.name,param:this.props.param,value:e})}render(){const e=this.props.value,t=this.props.param.label||th(this.props.name),n=`${e.length} item${1!==e.length?"s":""}`;return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)(tv,{label:t,control:(0,ct.jsx)("button",{onClick:this.toggleExpanded,disabled:this.props.isDisabled,children:n})}),this.state.isExpanded&&(0,ct.jsxs)("div",{className:"msp-control-offset",children:[this.props.value.map(((e,t)=>(0,ct.jsx)(TAe,{param:this.props.param,value:e,index:t,actions:this.actions,isDisabled:this.props.isDisabled},t))),(0,ct.jsx)(Xy,{header:"New Item",children:(0,ct.jsx)(DAe,{params:this.props.param.element,apply:this.add,value:this.props.param.ctor(),isDisabled:this.props.isDisabled})})]})]})}}class QAe extends F.PureComponent{constructor(){super(...arguments),this.onChangeCondition=e=>{this.change(this.props.param.conditionedValue(this.props.value,e.value))},this.onChangeParam=e=>{this.change(e.value)}}change(e){this.props.onChange({name:this.props.name,param:this.props.param,value:e})}render(){const e=this.props.value,t=this.props.param.conditionForValue(e),n=this.props.param.conditionParams[t],r=this.props.param.label||th(this.props.name),o=Zde(n),i=(0,ct.jsx)(cAe,{param:this.props.param.select,isDisabled:this.props.isDisabled,onChange:this.onChangeCondition,onEnter:this.props.onEnter,name:`${r} Kind`,value:t});return o?(0,ct.jsxs)(ct.Fragment,{children:[i,(0,ct.jsx)(o,{param:n,value:e,name:r,onChange:this.onChangeParam,onEnter:this.props.onEnter,isDisabled:this.props.isDisabled})]}):i}}class MAe extends F.PureComponent{constructor(){super(...arguments),this.onChange=e=>{this.props.onChange({name:this.props.name,param:this.props.param,value:this.props.param.toValue(e.value)})}}render(){const e=this.props.param.fromValue(this.props.value),t=Zde(this.props.param.converted);return t?(0,ct.jsx)(t,{param:this.props.param.converted,value:e,name:this.props.name,onChange:this.onChange,onEnter:this.props.onEnter,isDisabled:this.props.isDisabled}):null}}class RAe extends F.PureComponent{constructor(){super(...arguments),this.onChange=e=>{let{name:t,value:n}=e;const r=t;n!==this.props.value[r]&&this.props.onChange({param:this.props.param,name:this.props.name,value:{...this.props.value,[r]:n}})}}render(){const e={defaultValue:this.props.value.language,options:U_.objectToOptions(t0.Info),type:"select"},t=(0,ct.jsx)(cAe,{param:e,isDisabled:this.props.isDisabled,onChange:this.onChange,onEnter:this.props.onEnter,name:"language",value:this.props.value.language}),n={defaultValue:this.props.value.language,type:"text"},r=(0,ct.jsx)(sAe,{param:n,isDisabled:this.props.isDisabled,onChange:this.onChange,name:"expression",value:this.props.value.expression});return(0,ct.jsxs)(ct.Fragment,{children:[t,"mol-script"!==this.props.value.language&&(0,ct.jsxs)("div",{className:"msp-help-text",style:{padding:"10px"},children:[(0,ct.jsx)(vy,{svg:Yy})," Support for PyMOL, VMD, and Jmol selections is an experimental feature and may not always work as intended."]}),r]})}}const PAe="overpaint-controls";async function OAe(e,t,n,r,o){await FAe(e,t,(async(e,t,i)=>{if(o&&o.length>0&&!o.includes(t.params.values.type.name))return;const a=t.obj.data.sourceData,s=await r(a.root);if(Q5.isEmpty(s)||D5(s))return;const l={bundle:SO.fromLoci(s),color:-1===n?Jp(0):n,clear:-1===n};if(i){const t=NAe([...i.params.values.layers,l],a);e.to(i).update(R5.toBundle(t))}else{const n=NAe([l],a);e.to(t.transform.ref).apply(_7.Representation.OverpaintStructureRepresentation3DFromBundle,R5.toBundle(n),{tags:PAe})}}))}async function FAe(e,t,n){const r=e.state.data,o=r.build();for(const i of t)for(const e of i.representations){const t=r.select(V_.Generators.ofTransformer(_7.Representation.OverpaintStructureRepresentation3DFromBundle,e.cell.transform.ref).withTag(PAe));await n(o,e.cell,t[0])}return o.commit({doNotUpdateCurrent:!0})}function NAe(e,t){const n=R5.ofBundle(e,t.root),r=R5.merge(n);return R5.filter(r,t)}const LAe="clipping-controls";async function UAe(e,t,n,r,o){await async function(e,t,n){const r=e.state.data,o=r.build();for(const i of t)for(const e of i.representations){const t=r.select(V_.Generators.ofTransformer(_7.Representation.ClippingStructureRepresentation3DFromBundle,e.cell.transform.ref).withTag(LAe));await n(o,e.cell,t[0])}return o.commit({doNotUpdateCurrent:!0})}(e,t,(async(e,t,i)=>{if(o&&o.length>0&&!o.includes(t.params.values.type.name))return;const a=t.obj.data.sourceData,s=await r(a.root);if(Q5.isEmpty(s)||D5(s))return;const l={bundle:SO.fromLoci(s),groups:n};if(i){const t=GAe([...i.params.values.layers,l],a);e.to(i).update(p6.toBundle(t))}else{const n=GAe([l],a);e.to(t.transform.ref).apply(_7.Representation.ClippingStructureRepresentation3DFromBundle,p6.toBundle(n),{tags:LAe})}}))}function GAe(e,t){const n=p6.ofBundle(e,t.root),r=p6.merge(n);return p6.filter(r,t)}const jAe="transparency-controls";async function zAe(e,t,n,r,o){await HAe(e,t,(async(e,t,i)=>{if(o&&o.length>0&&!o.includes(t.params.values.type.name))return;const a=t.obj.data.sourceData,s=await r(a.root);if(Q5.isEmpty(s)||D5(s))return;const l={bundle:SO.fromLoci(s),value:n};if(i){const t=VAe([...i.params.values.layers,l],a);e.to(i).update(P5.toBundle(t))}else{const n=VAe([l],a);e.to(t.transform.ref).apply(_7.Representation.TransparencyStructureRepresentation3DFromBundle,P5.toBundle(n),{tags:jAe})}}))}async function HAe(e,t,n){const r=e.state.data,o=r.build();for(const i of t)for(const e of i.representations){const t=r.select(V_.Generators.ofTransformer(_7.Representation.TransparencyStructureRepresentation3DFromBundle,e.cell.transform.ref).withTag(jAe));await n(o,e.cell,t[0])}return o.commit({doNotUpdateCurrent:!0})}function VAe(e,t){const n=P5.ofBundle(e,t.root),r=P5.merge(n);return P5.filter(r,t)}const qAe="substance-controls";async function YAe(e,t,n,r,o){await XAe(e,t,(async(e,t,i)=>{if(o&&o.length>0&&!o.includes(t.params.values.type.name))return;const a=t.obj.data.sourceData,s=await r(a.root);if(Q5.isEmpty(s)||D5(s))return;const l={bundle:SO.fromLoci(s),material:null!==n&&void 0!==n?n:Tk(),clear:!n};if(i){const t=WAe([...i.params.values.layers,l],a);e.to(i).update(h6.toBundle(t))}else{const n=WAe([l],a);e.to(t.transform.ref).apply(_7.Representation.SubstanceStructureRepresentation3DFromBundle,h6.toBundle(n),{tags:qAe})}}))}async function XAe(e,t,n){const r=e.state.data,o=r.build();for(const i of t)for(const e of i.representations){const t=r.select(V_.Generators.ofTransformer(_7.Representation.SubstanceStructureRepresentation3DFromBundle,e.cell.transform.ref).withTag(qAe));await n(o,e.cell,t[0])}return o.commit({doNotUpdateCurrent:!0})}function WAe(e,t){const n=h6.ofBundle(e,t.root),r=h6.merge(n);return h6.filter(r,t)}const KAe="emissive-controls";async function JAe(e,t,n,r,o){await ZAe(e,t,(async(e,t,i)=>{if(o&&o.length>0&&!o.includes(t.params.values.type.name))return;const a=t.obj.data.sourceData,s=await r(a.root);if(Q5.isEmpty(s)||D5(s))return;const l={bundle:SO.fromLoci(s),value:n};if(i){const t=$Ae([...i.params.values.layers,l],a);e.to(i).update(g6.toBundle(t))}else{const n=$Ae([l],a);e.to(t.transform.ref).apply(_7.Representation.EmissiveStructureRepresentation3DFromBundle,g6.toBundle(n),{tags:KAe})}}))}async function ZAe(e,t,n){const r=e.state.data,o=r.build();for(const i of t)for(const e of i.representations){const t=r.select(V_.Generators.ofTransformer(_7.Representation.EmissiveStructureRepresentation3DFromBundle,e.cell.transform.ref).withTag(KAe));await n(o,e.cell,t[0])}return o.commit({doNotUpdateCurrent:!0})}function $Ae(e,t){const n=g6.ofBundle(e,t.root),r=g6.merge(n);return g6.filter(r,t)}class efe extends rie{get currentStructures(){return this.plugin.managers.structure.hierarchy.selection.structures}get pivotStructure(){return this.currentStructures[0]}_setSnapshotState(e){this.updateState({options:e}),this.events.optionsUpdated.next(void 0)}async setOptions(e){const t=e.interactions!==this.state.options.interactions;this.updateState({options:e}),this.events.optionsUpdated.next(void 0);const n=this.dataState.build();for(const r of this.currentStructures)for(const e of r.components)this.updateReprParams(n,e);return this.plugin.dataTransaction((async()=>{await n.commit(),await this.plugin.state.updateBehavior(jue,(t=>{t.ignoreHydrogens="all"!==e.hydrogens,t.ignoreHydrogensVariant="only-polar"===e.hydrogens?"non-polar":"all",t.ignoreLight=e.ignoreLight,t.material=e.materialStyle,t.clip=e.clipObjects})),t&&await this.updateInterationProps()}))}updateReprParams(e,t){const{hydrogens:n,visualQuality:r,ignoreLight:o,materialStyle:i,clipObjects:a}=this.state.options,s="all"!==n,l="only-polar"===n?"non-polar":"all";for(const c of t.representations){if(c.cell.transform.transformer!==t7)continue;const t=c.cell.transform.params;!!t.type.params.ignoreHydrogens===s&&t.type.params.ignoreHydrogensVariant===l&&t.type.params.quality===r&&t.type.params.ignoreLight===o&&Mp(t.type.params.material,i)&&U_.areEqual(kk.Params,t.type.params.clip,a)||e.to(c.cell).update((e=>{e.type.params.ignoreHydrogens=s,e.type.params.ignoreHydrogensVariant=l,e.type.params.quality=r,e.type.params.ignoreLight=o,e.type.params.material=i,e.type.params.clip=a}))}}async updateInterationProps(){var e,t,n;for(const r of this.currentStructures){const o=ooe.getParams(null===(e=r.cell.obj)||void 0===e?void 0:e.data);if(r.properties){const e=null===(t=r.properties.cell.transform.params)||void 0===t?void 0:t.properties[ooe.descriptor.name];if(U_.areEqual(o,e,this.state.options.interactions))continue;await this.dataState.build().to(r.properties.cell).update((e=>{e.properties[ooe.descriptor.name]=this.state.options.interactions})).commit()}else{const e=this.plugin.customStructureProperties.getParams(null===(n=r.cell.obj)||void 0===n?void 0:n.data),t=U_.getDefaultValues(e);if(U_.areEqual(o,t.properties[ooe.descriptor.name],this.state.options.interactions))continue;t.properties[ooe.descriptor.name]=this.state.options.interactions,await this.plugin.builders.structure.insertStructureProperties(r.cell,t)}}}applyPreset(e,t,n){return this.plugin.dataTransaction((async()=>{for(const r of e){const e=await this.plugin.builders.structure.representation.applyPreset(r.cell,t,n);await this.syncPreset(r,e)}}),{canUndo:"Preset"})}syncPreset(e,t){if(!t||!t.components)return this.clearComponents([e]);const n=new Set;if(tw(t.components,(e=>{e&&n.add(e.ref)})),t.representations&&tw(t.representations,(e=>{e&&n.add(e.ref)})),0===n.size)return this.clearComponents([e]);let r=!1;const o=this.dataState.build(),i=e=>{n.has(e.cell.transform.ref)||(r=!0,o.delete(e.cell))};for(const a of e.components){i(a);for(const e of a.representations)i(e);if(a.genericRepresentations)for(const e of a.genericRepresentations)i(e)}if(e.genericRepresentations)for(const a of e.genericRepresentations)i(a);return r?o.commit():void 0}clear(e){return this.clearComponents(e)}selectThis(e){var t;const n=this.plugin.managers.structure.selection;n.clear();for(const r of e){const e=aG.toSubStructureElementLoci(r.structure.cell.obj.data,null===(t=r.cell.obj)||void 0===t?void 0:t.data);n.fromLoci("set",e)}}canBeModified(e){return this.plugin.builders.structure.isComponentTransform(e.cell)}modifyByCurrentSelection(e,t){return this.plugin.runTask(Tw.create("Modify Component",(async n=>{const r=this.dataState.build();for(const o of e){if(!this.canBeModified(o))continue;const e=this.plugin.managers.structure.selection.getStructure(o.structure.cell.obj.data);e&&0!==e.elementCount&&this.modifyComponent(r,o,e,t)}await this.dataState.updateTree(r,{canUndo:"Modify Selection"}).runInContext(n)})))}toggleVisibility(e,t){if(0!==e.length)if(t){const n=e[0].representations.indexOf(t),r=!t.cell.state.isHidden;for(const t of e){const e=t.representations[n];e&&bie(this.dataState,e.cell.transform.ref,r)}}else{const t=!e[0].cell.state.isHidden;for(const n of e)bie(this.dataState,n.cell.transform.ref,t)}}removeRepresentations(e,t){if(0===e.length)return;const n=[];if(t){const r=e[0].representations.indexOf(t);if(r<0)return;for(const t of e)t.representations[r]&&n.push(t.representations[r])}else for(const r of e)for(const e of r.representations)n.push(e);return this.plugin.managers.structure.hierarchy.remove(n,!0)}updateRepresentations(e,t,n){if(0===e.length)return Promise.resolve();const r=e[0].representations.indexOf(t);if(r<0)return Promise.resolve();const o=this.dataState.build();for(const i of e){const e=i.representations[r];e&&(e.cell.transform.transformer===t.cell.transform.transformer&&o.to(e.cell).update(n))}return o.commit({canUndo:"Update Representation"})}updateRepresentationsTheme(e,t){var n,r,o,i;if(0===e.length)return;const a=this.dataState.build();for(const s of e)for(const e of s.representations){const l=e.cell.transform.params,c="function"===typeof t?t(s,e):t,u="default"===c.color?Zoe(this.plugin,null===(n=s.structure.cell.obj)||void 0===n?void 0:n.data,null===l||void 0===l?void 0:l.type.name):c.color?Zoe(this.plugin,null===(r=s.structure.cell.obj)||void 0===r?void 0:r.data,null===l||void 0===l?void 0:l.type.name,c.color,c.colorParams):void 0,d="default"===c.size?$oe(this.plugin,null===(o=s.structure.cell.obj)||void 0===o?void 0:o.data,null===l||void 0===l?void 0:l.type.name):c.color?$oe(this.plugin,null===(i=s.structure.cell.obj)||void 0===i?void 0:i.data,null===l||void 0===l?void 0:l.type.name,c.size,c.sizeParams):void 0;(u||d)&&a.to(e.cell).update((e=>{u&&(e.colorTheme=u),d&&(e.sizeTheme=d)}))}return a.commit({canUndo:"Update Theme"})}addRepresentation(e,t){if(0===e.length)return;const{hydrogens:n,visualQuality:r,ignoreLight:o,materialStyle:i,clipObjects:a}=this.state.options,s={ignoreHydrogens:"all"!==n,ignoreHydrogensVariant:"only-polar"===n?"non-polar":"all",quality:r,ignoreLight:o,material:i,clip:a};return this.plugin.dataTransaction((async()=>{for(const n of e)await this.plugin.builders.structure.representation.addRepresentation(n.cell,{type:this.plugin.representation.structure.registry.get(t),typeParams:s})}),{canUndo:"Add Representation"})}tryFindComponent(e,t){if(0!==e.components.length)return this.plugin.runTask(Tw.create("Find Component",(async n=>{var r,o;const i=null===(r=e.cell.obj)||void 0===r?void 0:r.data;if(!i)return;const a=_O.unionStructure(await t.getSelection(this.plugin,n,i));for(const t of e.components){const e=null===(o=t.cell.obj)||void 0===o?void 0:o.data;if(e&&t.cell.parent&&jO(a,e))return t.cell}})))}async add(e,t){return this.plugin.dataTransaction((async()=>{const n=t||this.currentStructures;if(0===n.length)return;const{hydrogens:r,visualQuality:o,ignoreLight:i,materialStyle:a,clipObjects:s}=this.state.options,l={ignoreHydrogens:"all"!==r,ignoreHydrogensVariant:"only-polar"===r?"non-polar":"all",quality:o,ignoreLight:i,material:a,clip:s},c=Cp.create22();for(const t of n){let n;e.options.checkExisting&&(n=await this.tryFindComponent(t,e.selection)),n||(n=await this.plugin.builders.structure.tryCreateComponentFromSelection(t.cell,e.selection,c,{label:e.options.label||(e.selection===Cee.current?"Custom Selection":"")})),"none"!==e.representation&&n&&await this.plugin.builders.structure.representation.addRepresentation(n,{type:this.plugin.representation.structure.registry.get(e.representation),typeParams:l})}}),{canUndo:"Add Selection"})}async applyTheme(e,t){return this.plugin.dataTransaction((async n=>{const r=t||this.currentStructures;if(0===r.length)return;const o=async t=>_O.toLociWithSourceUnits(await e.selection.getSelection(this.plugin,n,t));for(const t of r)if("color"===e.action.name){const n=e.action.params;await OAe(this.plugin,t.components,n.color,o,e.representations)}else if("resetColor"===e.action.name)await OAe(this.plugin,t.components,-1,o,e.representations);else if("transparency"===e.action.name){const n=e.action.params;await zAe(this.plugin,t.components,n.value,o,e.representations)}else if("emissive"===e.action.name){const n=e.action.params;await JAe(this.plugin,t.components,n.value,o,e.representations)}else if("material"===e.action.name){const n=e.action.params;await YAe(this.plugin,t.components,n.material,o,e.representations)}else if("resetMaterial"===e.action.name)await YAe(this.plugin,t.components,void 0,o,e.representations);else if("clipping"===e.action.name){const n=e.action.params;await UAe(this.plugin,t.components,p6.Groups.fromNames(n.excludeGroups),o,e.representations)}}),{canUndo:"Apply Theme"})}modifyComponent(e,t,n,r){var o,i,a;const s=null===(o=t.cell.obj)||void 0===o?void 0:o.data;if(!s)return;if(("subtract"===r||"intersect"===r)&&!zO(s,n))return;const l=null===(i=t.structure.cell.obj)||void 0===i?void 0:i.data,c="union"===r?UO(l,[s,n]):"intersect"===r?HO(s,n):VO(s,n);if(0===c.elementCount)e.delete(t.cell.transform.ref);else{const n={type:{name:"bundle",params:SO.fromSubStructure(l,c)},nullIfEmpty:!0,label:null===(a=t.cell.obj)||void 0===a?void 0:a.label};e.to(t.cell).update(n)}}updateLabel(e,t){var n,r;const o={type:null===(n=e.cell.params)||void 0===n?void 0:n.values.type,nullIfEmpty:null===(r=e.cell.params)||void 0===r?void 0:r.values.nullIfEmpty,label:t};this.dataState.build().to(e.cell).update(o).commit()}get dataState(){return this.plugin.state.data}clearComponents(e){const t=this.dataState.build();for(const n of e)for(const e of n.components)t.delete(e.cell.transform.ref);return t.commit({canUndo:"Clear Selections"})}constructor(e){super({options:U_.getDefaultValues(efe.OptionsParams)}),this.plugin=e,this.events={optionsUpdated:this.ev()}}}var tfe;!function(e){function t(e,t){var n,r;return(null===(n=null===t||void 0===t?void 0:t.cell.obj)||void 0===n?void 0:n.data)?e.representation.structure.registry.getApplicableTypes(null===(r=t.cell.obj)||void 0===r?void 0:r.data):e.representation.structure.registry.types}function n(e,n,r,o){const i=[...r,...t(e,n)];return U_.Select(i[0][0],i,{label:o})}e.OptionsParams={hydrogens:U_.Select("all",[["all","Show All"],["hide-all","Hide All"],["only-polar","Only Polar"]],{description:"Determine display of hydrogen atoms in representations"}),visualQuality:U_.Select("auto",Mk,{description:"Control the visual/rendering quality of representations"}),ignoreLight:U_.Boolean(!1,{description:"Ignore light for stylized rendering of representations"}),materialStyle:Tk.getParam(),clipObjects:U_.Group(kk.Params),interactions:U_.Group(ooe.defaultParams,{label:"Non-covalent Interactions"})},e.getAddParams=function(e,t){const{options:r}=e.query.structure.registry;return t={pivot:e.managers.structure.component.pivotStructure,allowNone:!0,hideSelection:!1,checkExisting:!1,...t},{selection:U_.Select(r[1][0],r,{isHidden:null===t||void 0===t?void 0:t.hideSelection}),representation:n(e,null===t||void 0===t?void 0:t.pivot,(null===t||void 0===t?void 0:t.allowNone)?[["none","< Create Later >"]]:[]),options:U_.Group({label:U_.Text(""),checkExisting:U_.Boolean(!!(null===t||void 0===t?void 0:t.checkExisting),{help:()=>({description:"Checks if a selection with the specifield elements already exists to avoid creating duplicate components."})})})}},e.getThemeParams=function(e,n){const{options:r}=e.query.structure.registry;return{selection:U_.Select(r[1][0],r,{isHidden:!1}),action:U_.MappedStatic("color",{color:U_.Group({color:U_.Color(bk.blue,{isExpanded:!0})},{isFlat:!0}),resetColor:U_.EmptyGroup({label:"Reset Color"}),transparency:U_.Group({value:U_.Numeric(.5,{min:0,max:1,step:.01})},{isFlat:!0}),emissive:U_.Group({value:U_.Numeric(.5,{min:0,max:1,step:.01})},{isFlat:!0}),material:U_.Group({material:Tk.getParam({isFlat:!0})},{isFlat:!0}),resetMaterial:U_.EmptyGroup({label:"Reset Material"}),clipping:U_.Group({excludeGroups:U_.MultiSelect([],U_.objectToOptions(p6.Groups.Names))},{isFlat:!0})}),representations:U_.MultiSelect([],t(e,n),{emptyValue:"All"})}},e.getRepresentationTypes=t}(efe||(efe={})),function(e){e.create=function(e){return{entries:$D(),capacity:Math.max(1,e)}},e.get=function(e,t){for(let n=e.entries.first;n;n=n.next)if(n.value.key===t)return e.entries.remove(n),e.entries.addLast(n.value),n.value.data},e.set=function(e,t,n){let r;if(e.entries.count>=e.capacity){const t=e.entries.first;r=t.value.data,e.entries.remove(t)}return e.entries.addLast(function(e,t){return{key:e,data:t}}(t,n)),r},e.remove=function(e,t){for(let n=e.entries.first;n;n=n.next)if(n.value.key===t){e.entries.remove(n);break}}}(tfe||(tfe={}));var nfe=function(e){function t(t,n){return e.call(this)||this}return dS(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(xS),rfe={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=rfe.delegate;return(null===o||void 0===o?void 0:o.setInterval)?o.setInterval.apply(o,gS([e,t],hS(n))):setInterval.apply(void 0,gS([e,t],hS(n)))},clearInterval:function(e){var t=rfe.delegate;return((null===t||void 0===t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},ofe=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return dS(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(o,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),rfe.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&rfe.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(l0e){r=!0,n=l0e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,ES(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(nfe),ife={now:function(){return(ife.delegate||Date).now()},delegate:void 0},afe=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=ife.now,e}(),sfe=function(e){function t(t,n){void 0===n&&(n=afe.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return dS(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(afe),lfe=new sfe(ofe),cfe=lfe;function ufe(e){return function(t){if(function(e){return bS(null===e||void 0===e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(n){this.error(n)}}));throw new TypeError("Unable to lift unknown Observable type")}}function dfe(e,t,n,r,o){return new Afe(e,t,n,r,o)}var Afe=function(e){function t(t,n,r,o,i,a){var s=e.call(this,t)||this;return s.onFinalize=i,s.shouldUnsubscribe=a,s._next=n?function(e){try{n(e)}catch(r){t.error(r)}}:e.prototype._next,s._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return dS(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(OS),ffe=function(e){return e&&"number"===typeof e.length&&"function"!==typeof e};function pfe(e){return bS(null===e||void 0===e?void 0:e.then)}function hfe(e){return bS(e[HS])}function gfe(e){return Symbol.asyncIterator&&bS(null===e||void 0===e?void 0:e[Symbol.asyncIterator])}function mfe(e){return new TypeError("You provided "+(null!==e&&"object"===typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var yfe="function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function vfe(e){return bS(null===e||void 0===e?void 0:e[yfe])}function bfe(e){return yS(this,arguments,(function(){var t,n,r;return fS(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,mS(t.read())];case 3:return n=o.sent(),r=n.value,n.done?[4,mS(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,mS(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function Cfe(e){return bS(null===e||void 0===e?void 0:e.getReader)}function Ife(e){if(e instanceof YS)return e;if(null!=e){if(hfe(e))return r=e,new YS((function(e){var t=r[HS]();if(bS(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(ffe(e))return function(e){return new YS((function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()}))}(e);if(pfe(e))return n=e,new YS((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,TS)}));if(gfe(e))return Efe(e);if(vfe(e))return t=e,new YS((function(e){var n,r;try{for(var o=pS(t),i=o.next();!i.done;i=o.next()){var a=i.value;if(e.next(a),e.closed)return}}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}e.complete()}));if(Cfe(e))return Efe(bfe(e))}var t,n,r;throw mfe(e)}function Efe(e){return new YS((function(t){(function(e,t){var n,r,o,i;return AS(this,void 0,void 0,(function(){var a,s;return fS(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=vS(e),l.label=1;case 1:return[4,n.next()];case 2:if((r=l.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=l.sent(),o={error:s},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function xfe(e){return e&&bS(e.schedule)}function Bfe(e,t,n){void 0===e&&(e=0),void 0===n&&(n=cfe);var r=-1;return null!=t&&(xfe(t)?n=t:r=t),new YS((function(t){var o=function(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;o<0&&(o=0);var i=0;return n.schedule((function(){t.closed||(t.next(i++),0<=r?this.schedule(void 0,r):t.complete())}),o)}))}function wfe(e,t,n){void 0===t&&(t=lfe);var r=Bfe(e,t);return function(e,t){return ufe((function(n,r){var o=null!==t&&void 0!==t?t:{},i=o.leading,a=void 0===i||i,s=o.trailing,l=void 0!==s&&s,c=!1,u=null,d=null,A=!1,f=function(){null===d||void 0===d||d.unsubscribe(),d=null,l&&(g(),A&&r.complete())},p=function(){d=null,A&&r.complete()},h=function(t){return d=Ife(e(t)).subscribe(dfe(r,f,p))},g=function(){if(c){c=!1;var e=u;u=null,r.next(e),!A&&h(e)}};n.subscribe(dfe(r,(function(e){c=!0,u=e,(!d||d.closed)&&(a?g():h(e))}),(function(){A=!0,(!(l&&c&&d)||d.closed)&&r.complete()})))}))}((function(){return r}),n)}function _fe(e,t){return ufe((function(n,r){var o=0;n.subscribe(dfe(r,(function(n){r.next(e.call(t,n,o++))})))}))}function Sfe(e,t){return e===t}function Dfe(e,t){return ufe((function(n,r){var o=0;n.subscribe(dfe(r,(function(n){return e.call(t,n,o++)&&r.next(n)})))}))}class Tfe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isRunning=!1,this.queue=[],this.counter=0,this.log=e}enqueue(e){this.log&&console.log("SingleAsyncQueue enqueue",this.counter),this.queue[0]={id:this.counter,func:e},this.counter++,this.run()}async run(){if(this.isRunning)return;const e=this.queue.pop();if(e){this.isRunning=!0;try{this.log&&console.log("SingleAsyncQueue run",e.id),await e.func(),this.log&&console.log("SingleAsyncQueue complete",e.id)}finally{this.isRunning=!1,this.run()}}}}class kfe extends(Jz.CreateBehavior({name:"Volume Streaming"})){}function Qfe(e,t){const n=function(e,t){return{state:e,oldHierarchy:t,hierarchy:Mfe(),changed:!1,added:new Set}}(e,t||Mfe());return function(e,t){const n={tree:e,state:t};npe(n,e.root),n.state}(e.tree,n),t&&t.refs.forEach(epe,n),{hierarchy:n.hierarchy,added:n.added,changed:n.changed}}function Mfe(){return{trajectories:[],models:[],structures:[],refs:new Map}}function Rfe(e){return{kind:"trajectory",cell:e,version:e.transform.version,models:[]}}function Pfe(e,t){return{kind:"model",cell:e,version:e.transform.version,trajectory:t,structures:[]}}function Ofe(e,t){return{kind:"model-properties",cell:e,version:e.transform.version,model:t}}function Ffe(e,t){return{kind:"model-unitcell",cell:e,version:e.transform.version,model:t}}function Nfe(e,t){return{kind:"structure",cell:e,version:e.transform.version,model:t,components:[]}}function Lfe(e,t){return{kind:"structure-properties",cell:e,version:e.transform.version,structure:t}}function Ufe(e,t){return{kind:"structure-transform",cell:e,version:e.transform.version,structure:t}}function Gfe(e,t){return{kind:"structure-volume-streaming",cell:e,version:e.transform.version,structure:t}}function jfe(e){return e.transform.tags?[...e.transform.tags].sort().join():e.transform.ref}function zfe(e,t){return{kind:"structure-component",cell:e,version:e.transform.version,structure:t,key:jfe(e),representations:[]}}function Hfe(e,t){return{kind:"structure-representation",cell:e,version:e.transform.version,component:t}}function Vfe(e,t){return{kind:"generic-representation",cell:e,version:e.transform.version,parent:t}}function qfe(e,t,n,r){for(var o=arguments.length,i=new Array(o>4?o-4:0),a=4;a<o;a++)i[a-4]=arguments[a];const s=r(...i);n.push(s),e.hierarchy.refs.set(t.transform.ref,s);const l=e.oldHierarchy.refs.get(t.transform.ref);return l?l.version!==t.transform.version&&(e.changed=!0):(e.added.add(s.cell.transform.ref),e.changed=!0),s}function Yfe(e,t,n){for(var r=arguments.length,o=new Array(r>3?r-3:0),i=3;i<r;i++)o[i-3]=arguments[i];const a=n(...o);e.hierarchy.refs.set(t.transform.ref,a);const s=e.oldHierarchy.refs.get(t.transform.ref);return s?s.version!==t.transform.version&&(e.changed=!0):(e.added.add(a.cell.transform.ref),e.changed=!0),a}function Xfe(e){return t=>e.is(t.obj)}function Wfe(e,t){return(n,r)=>!t(r)&&e.is(n.obj)}function Kfe(e){return t=>t.transform.transformer===e}function Jfe(){}!function(e){function t(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};var i,a,s,l;return U_.Group({isoValue:HW.createIsoValueParam(null!==(i=o.isoValue)&&void 0!==i?i:n,r),color:U_.Color(null!==(a=o.color)&&void 0!==a?a:t),wireframe:U_.Boolean(null!==(s=o.wireframe)&&void 0!==s&&s),opacity:U_.Numeric(null!==(l=o.opacity)&&void 0!==l?l:.3,{min:0,max:1,step:.01})},{label:e,isExpanded:!0})}e.RootTag="volume-streaming-info";const n={byteOffset:0,rate:1,sampleCount:[1,1,1],valuesInfo:[{mean:0,min:-1,max:1,sigma:.1},{mean:0,min:-1,max:1,sigma:.1}]};function r(r){const{entryData:i,defaultView:a,structure:s,channelParams:l={}}=r,c=i||{kind:"em",header:{sampling:[n],availablePrecisions:[{precision:0,maxVoxels:0}]},emDefaultContourLevel:HW.IsoValue.relative(0)},u=s&&s.boundary.box||XT();return{view:U_.MappedStatic(a||("em"===c.kind?"auto":"selection-box"),{off:U_.Group({}),box:U_.Group({bottomLeft:U_.Vec3(u.min),topRight:U_.Vec3(u.max)},{description:"Static box defined by cartesian coords.",isFlat:!0}),"selection-box":U_.Group({radius:U_.Numeric(5,{min:0,max:50,step:.5},{description:"Radius in \u212b within which the volume is shown."}),bottomLeft:U_.Vec3(qh.create(0,0,0),{},{isHidden:!0}),topRight:U_.Vec3(qh.create(0,0,0),{},{isHidden:!0})},{description:"Box around focused element.",isFlat:!0}),"camera-target":U_.Group({radius:U_.Numeric(.5,{min:0,max:1,step:.05},{description:"Radius within which the volume is shown (relative to the field of view)."}),dynamicDetailLevel:o(c.header.availablePrecisions,0,{label:"Dynamic Detail"}),bottomLeft:U_.Vec3(qh.create(0,0,0),{},{isHidden:!0}),topRight:U_.Vec3(qh.create(0,0,0),{},{isHidden:!0})},{description:"Box around camera target.",isFlat:!0}),cell:U_.Group({}),auto:U_.Group({radius:U_.Numeric(5,{min:0,max:50,step:.5},{description:"Radius in \u212b within which the volume is shown."}),selectionDetailLevel:o(c.header.availablePrecisions,6,{label:"Selection Detail"}),isSelection:U_.Boolean(!1,{isHidden:!0}),bottomLeft:U_.Vec3(u.min,{},{isHidden:!0}),topRight:U_.Vec3(u.max,{},{isHidden:!0})},{description:"Box around focused element.",isFlat:!0})},{options:e.ViewTypeOptions,description:'Controls what of the volume is displayed. "Off" hides the volume alltogether. "Bounded box" shows the volume inside the given box. "Around Interaction" shows the volume around the focused element/atom. "Whole Structure" shows the volume for the whole structure.'}),detailLevel:o(c.header.availablePrecisions,3),channels:"em"===c.kind?U_.Group({em:t("EM",Jp(6524815),c.emDefaultContourLevel||HW.IsoValue.relative(1),c.header.sampling[0].valuesInfo[0],l.em)},{isFlat:!0}):U_.Group({"2fo-fc":t("2Fo-Fc",Jp(3367602),HW.IsoValue.relative(1.5),c.header.sampling[0].valuesInfo[0],l["2fo-fc"]),"fo-fc(+ve)":t("Fo-Fc(+ve)",Jp(3390259),HW.IsoValue.relative(3),c.header.sampling[0].valuesInfo[1],l["fo-fc(+ve)"]),"fo-fc(-ve)":t("Fo-Fc(-ve)",Jp(12268339),HW.IsoValue.relative(-3),c.header.sampling[0].valuesInfo[1],l["fo-fc(-ve)"])},{isFlat:!0})}}function o(e,t,n){return U_.Select(Math.min(t,e.length-1),e.map(((e,t)=>[t,`${t+1} [ ${0|Math.pow(e.maxVoxels,1/3)}^3 cells ]`])),{description:"Determines the maximum number of voxels. Depending on the size of the volume options are in the range from 1 (0.52M voxels) to 7 (25.17M voxels).",...n})}function i(e){return{entry:{name:e.entry.name,params:{detailLevel:e.entry.params.detailLevel,channels:e.entry.params.channels,view:{name:e.entry.params.view.name,params:{...e.entry.params.view.params}}}}}}e.createParams=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{data:t,defaultView:n,channelParams:o}=e,i=new Map;t&&t.entries.forEach((e=>i.set(e.dataId,e)));const a=t?t.entries.map((e=>[e.dataId,e.dataId])):[],s=t?t.entries[0].dataId:"";return{entry:U_.Mapped(s,a,(e=>U_.Group(r({entryData:i.get(e),defaultView:n,structure:t&&t.structure,channelParams:o}))))}},e.createEntryParams=r,e.copyParams=i,e.ViewTypeOptions=[["off","Off"],["box","Bounded Box"],["selection-box","Around Focus"],["camera-target","Around Camera"],["cell","Whole Structure"],["auto","Auto"]],e.ChannelTypeOptions=[["em","em"],["2fo-fc","2fo-fc"],["fo-fc(+ve)","fo-fc(+ve)"],["fo-fc(-ve)","fo-fc(-ve)"]];class a extends tie.WithSubscribers{get info(){return this.infoMap.get(this.params.entry.name)}async queryData(e){let t=cie(this.data.serverUrl,`${this.info.kind}/${this.info.dataId.toLowerCase()}`);if(e){const{min:n,max:r}=e;t+=`/box/${n.map((e=>Math.round(1e3*e)/1e3)).join(",")}/${r.map((e=>Math.round(1e3*e)/1e3)).join(",")}`}else t+="/cell";let n=this.params.entry.params.detailLevel;"auto"===this.params.entry.params.view.name&&this.params.entry.params.view.params.isSelection&&(n=this.params.entry.params.view.params.selectionDetailLevel),"camera-target"===this.params.entry.params.view.name&&e&&(n=this.decideDetail(e,this.params.entry.params.view.params.dynamicDetailLevel)),t+=`?detail=${n}`;const r=tfe.get(this.cache,t);if(r)return r.data;const o=L_.getUrlAsset(this.plugin.managers.asset,t),i=await this.plugin.runTask(this.plugin.managers.asset.resolve(o,"binary")),a=await this.parseCif(i.data);if(!a)return;const s=tfe.set(this.cache,t,{data:a,asset:i});return s&&s.asset.dispose(),a}async parseCif(e){const t=await this.plugin.runTask(wN.parseBinary(e));if(t.isError)return void this.plugin.log.error("VolumeStreaming, parsing CIF: "+t.toString());if(t.result.blocks.length<2)return void this.plugin.log.error("VolumeStreaming: Invalid data.");const n={};for(let r=1;r<t.result.blocks.length;r++){const e=t.result.blocks[r],o=wN.schema.densityServer(e),i=await this.plugin.runTask(VW(o));n[e.header]=i}return n}async updateParams(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=i(this.params),r=n.entry.params.view.name;"off"!==r&&"cell"!==r&&(n.entry.params.view.params.bottomLeft=(null===e||void 0===e?void 0:e.min)||qh.zero(),n.entry.params.view.params.topRight=(null===e||void 0===e?void 0:e.max)||qh.zero()),"auto"===r&&(n.entry.params.view.params.isSelection=t);const o=this.plugin.state.data,a=o.build().to(this.ref).update(n);await die.State.Update(this.plugin,{state:o,tree:a,options:{doNotUpdateCurrent:!0}})}getStructureRoot(){return this.plugin.state.data.select(V_.Generators.byRef(this.ref).rootOfType(Jz.Molecule.Structure))[0]}register(e){this.ref=e,this.subscribeObservable(this.plugin.state.events.object.removed,(e=>{Jz.Molecule.Structure.is(e.obj)&&cG.is(this.lastLoci)&&this.lastLoci.structure===e.obj.data&&(this.lastLoci=S5)})),this.subscribeObservable(this.plugin.state.events.object.updated,(e=>{Jz.Molecule.Structure.is(e.oldObj)&&cG.is(this.lastLoci)&&this.lastLoci.structure===e.oldObj.data&&(this.lastLoci=S5)})),this.subscribeObservable(this.plugin.managers.structure.focus.behaviors.current,(e=>{if(!this.plugin.state.data.tree.children.has(this.ref))return;const t=e?e.loci:S5;switch(this.params.entry.params.view.name){case"auto":this.updateAuto(t);break;case"selection-box":this.updateSelectionBox(t);break;default:this.lastLoci=t}}))}unregister(){let e=this.cache.entries.first;for(;e;)e.value.data.asset.dispose(),e=e.next}isCameraTargetSame(e,t){if(!e||!t)return!1;const n=qh.equals(e.target,t.target),r=qh.squaredDistance(e.target,e.position),o=qh.squaredDistance(t.target,t.position),i=Math.abs(r-o)/r<.001;return n&&i}cameraTargetDistance(e){return qh.distance(e.target,e.position)}getBoxFromLoci(e){var t,n,r;if(Q5.isEmpty(e)||D5(e))return XT();const o=this.plugin.helpers.substructureParent.get(e.structure,!0);if(!o)return XT();const i=this.getStructureRoot();if(!i||(null===(t=i.obj)||void 0===t?void 0:t.data)!==(null===(n=o.obj)||void 0===n?void 0:n.data))return XT();const a=HN.get(null===(r=i.obj)||void 0===r?void 0:r.data.models[0]);a&&Yh.invert(this._invTransform,a);const s=cG.extendToWholeResidues(e),l=cG.getBoundary(s,a&&!Number.isNaN(this._invTransform[0])?this._invTransform:void 0).box;return 1===cG.size(s)&&XT.expand(l,l,qh.create(1,1,1)),l}updateAuto(e){this.updateQueue.enqueue((async()=>{this.lastLoci=e,D5(e)?await this.updateParams("x-ray"===this.info.kind?this.data.structure.boundary.box:void 0,!1):await this.updateParams(this.getBoxFromLoci(e),!0)}))}updateSelectionBox(e){this.updateQueue.enqueue((async()=>{Q5.areEqual(this.lastLoci,e)?this.lastLoci=S5:this.lastLoci=e;const t=this.getBoxFromLoci(this.lastLoci);await this.updateParams(t)}))}updateCameraTarget(e){this.updateQueue.enqueue((async()=>{var t,n,r;const o=null===(t=this.plugin.canvas3d)||void 0===t?void 0:t.props.camera.manualReset;try{o||null===(n=this.plugin.canvas3d)||void 0===n||n.setProps({camera:{manualReset:!0}});const t=this.boxFromCameraTarget(e,!0);await this.updateParams(t)}finally{o||null===(r=this.plugin.canvas3d)||void 0===r||r.setProps({camera:{manualReset:o}})}}))}boxFromCameraTarget(e,t){var n;const r=e.target,o=this.cameraTargetDistance(e);let i=Math.tan(.5*e.fov)*o;const a=null===(n=this.plugin.canvas3d)||void 0===n?void 0:n.camera.viewport;a&&a.width>a.height&&(i*=a.width/a.height);let s,l,c;if(i*="camera-target"===this.params.entry.params.view.name?this.params.entry.params.view.params.radius:.5,t){const e=qh.zero();XT.size(e,this.data.structure.boundary.box),s=Math.min(i,.5*e[0]),l=Math.min(i,.5*e[1]),c=Math.min(i,.5*e[2])}else s=l=c=i;return XT.create(qh.create(r[0]-s,r[1]-l,r[2]-c),qh.create(r[0]+s,r[1]+l,r[2]+c))}decideDetail(e,t){const n="x-ray"===this.info.kind?XT.volume(this.data.structure.boundary.box):this.info.header.spacegroup.size.reduce(((e,t)=>e*t),1);let r=XT.volume(e)/n;const o=this.info.header.availablePrecisions.length-1;let i=t;for(;r<=.5&&i<o;)r*=2,i+=1;return i}async update(e){const t="selection-box"===e.entry.params.view.name&&this.params&&this.params.entry&&this.params.entry.params&&this.params.entry.params.view&&"selection-box"!==this.params.entry.params.view.name;this.params=e;let n,r=!1;switch("camera-target"!==e.entry.params.view.name&&this.cameraTargetSubscription&&(this.cameraTargetSubscription.unsubscribe(),this.cameraTargetSubscription=void 0),e.entry.params.view.name){case"off":r=!0;break;case"box":n=XT.create(e.entry.params.view.params.bottomLeft,e.entry.params.view.params.topRight),r=XT.volume(n)<1e-4;break;case"selection-box":{n=t?this.getBoxFromLoci(this.lastLoci)||XT():XT.create(qh.clone(e.entry.params.view.params.bottomLeft),qh.clone(e.entry.params.view.params.topRight));const o=e.entry.params.view.params.radius;r=XT.volume(n)<1e-4,XT.expand(n,n,qh.create(o,o,o));break}case"camera-target":this.cameraTargetSubscription||(this.cameraTargetSubscription=this.subscribeObservable(this.cameraTargetObservable,(e=>this.updateCameraTarget(e)))),n=this.boxFromCameraTarget(this.plugin.canvas3d.camera.getSnapshot(),!0);break;case"cell":n="x-ray"===this.info.kind?this.data.structure.boundary.box:void 0;break;case"auto":if(n=e.entry.params.view.params.isSelection||"x-ray"===this.info.kind?XT.create(qh.clone(e.entry.params.view.params.bottomLeft),qh.clone(e.entry.params.view.params.topRight)):void 0,n&&(r=XT.volume(n)<1e-4,e.entry.params.view.params.isSelection)){const t=e.entry.params.view.params.radius;XT.expand(n,n,qh.create(t,t,t))}}const o=r?{}:await this.queryData(n);if(!o)return!1;const i=e.entry.params.channels;return"x-ray"===this.info.kind?(this.channels["2fo-fc"]=this.createChannel(o["2FO-FC"]||HW.One,i["2fo-fc"],this.info.header.sampling[0].valuesInfo[0]),this.channels["fo-fc(+ve)"]=this.createChannel(o["FO-FC"]||HW.One,i["fo-fc(+ve)"],this.info.header.sampling[0].valuesInfo[1]),this.channels["fo-fc(-ve)"]=this.createChannel(o["FO-FC"]||HW.One,i["fo-fc(-ve)"],this.info.header.sampling[0].valuesInfo[1])):this.channels.em=this.createChannel(o.EM||HW.One,i.em,this.info.header.sampling[0].valuesInfo[0]),!0}createChannel(e,t,n){const r=t;return{data:e,color:r.color,wireframe:r.wireframe,opacity:r.opacity,isoValue:"relative"===r.isoValue.kind?r.isoValue:HW.IsoValue.toRelative(r.isoValue,n)}}getDescription(){return"selection-box"===this.params.entry.params.view.name?"Selection":"camera-target"===this.params.entry.params.view.name?"Camera":"box"===this.params.entry.params.view.name?"Static Box":"cell"===this.params.entry.params.view.name?"Cell":""}constructor(e,t){var n,r;super(e,{}),this.plugin=e,this.data=t,this.cache=tfe.create(25),this.params={},this.lastLoci=S5,this.ref="",this.cameraTargetObservable=this.plugin.canvas3d.didDraw.pipe(wfe(500,void 0,{leading:!0,trailing:!0}),_fe((()=>{var e;return null===(e=this.plugin.canvas3d)||void 0===e?void 0:e.camera.getSnapshot()})),(n=(e,t)=>this.isCameraTargetSame(e,t),void 0===r&&(r=VS),n=null!==n&&void 0!==n?n:Sfe,ufe((function(e,t){var o,i=!0;e.subscribe(dfe(t,(function(e){var a=r(e);!i&&n(o,a)||(i=!1,o=a,t.next(e))})))}))),Dfe((e=>void 0!==e))),this.cameraTargetSubscription=void 0,this.channels={},this._invTransform=Yh(),this.infoMap=new Map,this.data.entries.forEach((e=>this.infoMap.set(e.dataId,e))),this.updateQueue=new Tfe}}e.Behavior=a}(kfe||(kfe={}));const Zfe=[[Xfe(Jz.Molecule.Trajectory),(e,t)=>{e.currentTrajectory=qfe(e,t,e.hierarchy.trajectories,Rfe,t)},e=>e.currentTrajectory=void 0],[Wfe(Jz.Molecule.Model,(e=>e.currentModel)),(e,t)=>{e.currentTrajectory?e.currentModel=qfe(e,t,e.currentTrajectory.models,Pfe,t,e.currentTrajectory):e.currentModel=Yfe(e,t,Pfe,t),e.hierarchy.models.push(e.currentModel)},e=>e.currentModel=void 0],[Kfe(_7.Model.CustomModelProperties),(e,t)=>{if(!e.currentModel)return!1;e.currentModel.properties=Yfe(e,t,Ofe,t,e.currentModel)},Jfe],[Kfe(_7.Representation.ModelUnitcell3D),(e,t)=>{if(!e.currentModel)return!1;e.currentModel.unitcell=Yfe(e,t,Ffe,t,e.currentModel)},Jfe],[Wfe(Jz.Molecule.Structure,(e=>e.currentStructure)),(e,t)=>{e.currentModel?e.currentStructure=qfe(e,t,e.currentModel.structures,Nfe,t,e.currentModel):e.currentStructure=Yfe(e,t,Nfe,t),e.hierarchy.structures.push(e.currentStructure)},e=>e.currentStructure=void 0],[Kfe(_7.Model.CustomStructureProperties),(e,t)=>{if(!e.currentStructure)return!1;e.currentStructure.properties=Yfe(e,t,Lfe,t,e.currentStructure)},Jfe],[Kfe(_7.Model.TransformStructureConformation),(e,t)=>{if(!e.currentStructure)return!1;e.currentStructure.transform=Yfe(e,t,Ufe,t,e.currentStructure)},Jfe],[Xfe(kfe),(e,t)=>!!e.currentStructure&&(e.currentStructure.volumeStreaming=Yfe(e,t,Gfe,t,e.currentStructure),!1),Jfe],[(e,t)=>!(t.currentComponent||!t.currentStructure||e.transform.transformer.definition.isDecorator)&&Jz.Molecule.Structure.is(e.obj),(e,t)=>{e.currentStructure&&(e.currentComponent=qfe(e,t,e.currentStructure.components,zfe,t,e.currentStructure))},e=>e.currentComponent=void 0],[(e,t)=>!e.state.isGhost&&!!t.currentComponent&&Jz.Molecule.Structure.Representation3D.is(e.obj),(e,t)=>(e.currentComponent&&qfe(e,t,e.currentComponent.representations,Hfe,t,e.currentComponent),!1),Jfe],[e=>!e.state.isGhost&&Jz.isRepresentation3D(e.obj),(e,t)=>{const n=e.currentComponent||e.currentStructure||e.currentModel;n&&(n.genericRepresentations||(n.genericRepresentations=[]),qfe(e,t,n.genericRepresentations,Vfe,t,n))},Jfe]];function $fe(e){if(!e||!(null===e||void 0===e?void 0:e.parent)||!e.parent.cells.has(e.transform.ref))return!1;const{obj:t}=e;return!(!t||t===MC.Null||"ok"!==e.status&&"error"!==e.status)}function epe(e){const{cell:t}=e;$fe(t)||(this.changed=!0)}function tpe(e){npe(this,this.tree.transforms.get(e))}function npe(e,t){const{state:n}=e,r=n.state.cells.get(t.ref);if(!$fe(r))return;let o,i=!1;for(const[s,l,c]of Zfe)if(s(r,n)){if(!1===l(n,r)){i=!0;break}o=c;break}if(i)return;const a=e.tree.children.get(t.ref);a&&a.size&&a.forEach(tpe,e),o&&o(n)}class rpe extends nie{get dataState(){return this.plugin.state.data}get currentComponentGroups(){return this._currentComponentGroups||(this._currentComponentGroups=rpe.getComponentGroups(this.selection.structures)),this._currentComponentGroups}get seletionSet(){if(this._currentSelectionSet)return this._currentSelectionSet;this._currentSelectionSet=new Set;for(const e of this.selection.trajectories)this._currentSelectionSet.add(e.cell.transform.ref);for(const e of this.selection.models)this._currentSelectionSet.add(e.cell.transform.ref);for(const e of this.selection.structures)this._currentSelectionSet.add(e.cell.transform.ref);return this._currentSelectionSet}get current(){return this.sync(!1),this.state.hierarchy}get selection(){return this.sync(!1),this.state.selection}getStructuresWithSelection(){const e=this.plugin.managers.structure.hierarchy.current.structures,t=[];for(const n of e)this.plugin.managers.structure.selection.structureHasSelection(n)&&t.push(n);return t}findStructure(e){if(!e)return;const t=this.plugin.helpers.substructureParent.get(e);if(!t)return;const n=this.plugin.state.data.selectQ((e=>e.byValue(t).rootOfType(Jz.Molecule.Structure)))[0];return n?this.behaviors.selection.value.structures.find((e=>e.cell===n)):void 0}syncCurrent(e,t){const n=this.seletionSet,r=[];for(const o of e){const e=o.cell.transform.ref;(n.has(e)||t.has(e))&&r.push(o)}return 0===r.length?e.length>0?[e[0]]:[]:r}sync(e){if(!e&&this.dataState.inUpdate)return;if(this.state.syncedTree===this.dataState.tree)return void(e&&!this.state.notified&&(this.state.notified=!0,this.behaviors.selection.next({hierarchy:this.state.hierarchy,...this.state.selection})));this.state.syncedTree=this.dataState.tree;const t=Qfe(this.plugin.state.data,this.current);if(!t.changed)return;const{hierarchy:n}=t,r=this.syncCurrent(n.trajectories,t.added),o=this.syncCurrent(n.models,t.added),i=this.syncCurrent(n.structures,t.added);this._currentComponentGroups=void 0,this._currentSelectionSet=void 0,this.state.hierarchy=n,this.state.selection.trajectories=r,this.state.selection.models=o,this.state.selection.structures=i,e?(this.state.notified=!0,this.behaviors.selection.next({hierarchy:n,trajectories:r,models:o,structures:i})):this.state.notified=!1}updateCurrent(e,t){const n=this.current,r="add"===t?$Q.union(this.seletionSet,new Set(e.map((e=>e.cell.transform.ref)))):$Q.difference(this.seletionSet,new Set(e.map((e=>e.cell.transform.ref)))),o=[],i=[],a=[];for(const s of n.trajectories)r.has(s.cell.transform.ref)&&o.push(s);for(const s of n.models)r.has(s.cell.transform.ref)&&i.push(s);for(const s of n.structures)r.has(s.cell.transform.ref)&&a.push(s);this._currentComponentGroups=void 0,this._currentSelectionSet=void 0,this.state.selection.trajectories=o,this.state.selection.models=i,this.state.selection.structures=a,this.behaviors.selection.next({hierarchy:n,trajectories:o,models:i,structures:a})}remove(e,t){if(0===e.length)return;const n=this.plugin.state.data.build();for(const r of e)n.delete("string"===typeof r?r:r.cell.transform.ref);return n.commit({canUndo:!!t&&"Remove"})}toggleVisibility(e,t){if(0===e.length)return;const n=void 0!==t?"show"!==t:!e[0].cell.state.isHidden;for(const r of e)bie(this.dataState,r.cell.transform.ref,n)}applyPreset(e,t,n){return this.plugin.dataTransaction((async()=>{for(const r of e)r.models.length>0&&await this.clearTrajectory(r),await this.plugin.builders.structure.hierarchy.applyPreset(r.cell,t,n)}))}async updateStructure(e,t){await this.plugin.dataTransaction((async()=>{const n=H_.getDecoratorRoot(this.dataState.tree,e.cell.transform.ref),r=this.dataState.tree.children.get(n).toArray();await this.remove(r,!1),await this.plugin.state.updateTransform(this.plugin.state.data,e.cell.transform.ref,t,"Structure Type"),await this.plugin.builders.structure.representation.applyPreset(e.cell.transform.ref,"auto")}),{canUndo:"Structure Type"}),die.Camera.Reset(this.plugin)}clearTrajectory(e){const t=this.dataState.build();for(const n of e.models)t.delete(n.cell);return t.commit()}constructor(e){super(),this.plugin=e,this.state={syncedTree:this.dataState.tree,notified:!1,hierarchy:Mfe(),selection:{trajectories:[],models:[],structures:[]}},this.behaviors={selection:this.ev.behavior({hierarchy:this.current,trajectories:this.selection.trajectories,models:this.selection.models,structures:this.selection.structures})},this._currentComponentGroups=void 0,this._currentSelectionSet=void 0,this.subscribe(e.state.data.events.changed,(t=>{t.inTransaction||e.behaviors.state.isAnimating.value||this.sync(!0)})),this.subscribe(e.behaviors.state.isAnimating,(t=>{t||e.behaviors.state.isUpdating.value||this.sync(!0)}))}}function ope(e){return Dfe((function(t,n){return e<=n}))}!function(e){e.getComponentGroups=function(e){if(!e.length)return[];if(1===e.length)return e[0].components.map((e=>[e]));const t=[],n=new Map;for(const r of e)for(const e of r.components){const r=e.key;if(!r)continue;let o=n.get(r);o||(o=[],n.set(r,o),t.push(o)),o.push(e)}return t},e.getSelectedStructuresDescription=function(e){var t,n,r,o,i,a,s,l,c;const{structures:u}=e.managers.structure.hierarchy.selection;if(0===u.length)return"";if(1===u.length){const e=u[0],s=null===(t=e.cell.obj)||void 0===t?void 0:t.data;if(!s)return(null===(n=e.cell.obj)||void 0===n?void 0:n.label)||"Structure";const l=s.models[0]||s.representativeModel||s.masterModel;if(!l)return(null===(r=e.cell.obj)||void 0===r?void 0:r.label)||"Structure";const c=l.entryId;return(null===(i=null===(o=e.model)||void 0===o?void 0:o.trajectory)||void 0===i?void 0:i.models)&&1===e.model.trajectory.models.length?c:e.model?`${null===(a=e.model.cell.obj)||void 0===a?void 0:a.label} | ${c}`:c}const d=u[0],A=null===(s=null===d||void 0===d?void 0:d.model)||void 0===s?void 0:s.trajectory;let f=!0;for(const p of u)if((null===(l=null===p||void 0===p?void 0:p.model)||void 0===l?void 0:l.trajectory)!==A){f=!1;break}return f&&A?`${null===(c=A.cell.obj)||void 0===c?void 0:c.label} | ${u.length} structures`:`${u.length} structures`}}(rpe||(rpe={}));class ipe extends ov{constructor(){super(...arguments),this.onChange=e=>{let{name:t,value:n}=e;const r={...this.props.params,[t]:n};this.props.events.onChange(r,this.areInitial(r),this.validate(r))}}validate(e){}areInitial(e){return U_.areEqual(this.props.info.params,e,this.props.info.initialValues)}render(){return(0,ct.jsx)(Jde,{params:this.props.info.params,values:this.props.params,onChange:this.onChange,onEnter:this.props.events.onEnter,isDisabled:this.props.isDisabled})}}!function(e){function t(e){const t=Object.keys(e);for(const n of t)if(!e[n].isHidden)return!1;return!0}e.infoFromAction=function(e,n,r,o){const i=n.cells.get(o).obj,a=r.definition.params?r.definition.params(i,e):{};return{initialValues:U_.getDefaultValues(a),params:a,isEmpty:t(a)}},e.infoFromTransform=function(e,n,r){const o=n.cells.get(r.ref),i=o.params&&o.params.definition||{};return{initialValues:o.params&&o.params.values||{},params:i,isEmpty:t(i)}}}(ipe||(ipe={}));const ape={distanceUnitLabel:U_.Text("\u212b",{isEssential:!0}),textColor:c8.textColor};U_.getDefaultValues(ape);class spe extends rie{get props(){return{...this.state.props}}setProps(e){const t=this.props,n={...this.state.props,...e};ZB(t,n)||(this.updateState({props:n}),this.lociSelects.setProps(n),this.lociHighlights.setProps(n),this.events.propsUpdated.next(void 0))}dispose(){super.dispose(),this.lociSelects.dispose(),this.lociHighlights.dispose()}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super({props:{...U_.getDefaultValues(spe.Params),...t}}),this.plugin=e,this._props=U_.getDefaultValues(spe.Params),this.events={propsUpdated:this.ev()},this.lociSelects=new spe.LociSelectManager(e,this._props),this.lociHighlights=new spe.LociHighlightManager(e,this._props)}}!function(e){e.Params={granularity:U_.Select("residue",Q5.GranularityOptions,{label:"Picking Level",description:"Controls if selections are expanded upon picking to whole residues, chains, structures, instances, or left as atoms and coarse elements"})};class t{setProps(e){Object.assign(this.props,e)}addProvider(e){this.providers.push(e)}removeProvider(e){this.providers=this.providers.filter((t=>t!==e))}normalizedLoci(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{loci:r,repr:o}=e,i=t?this.props.granularity:void 0;return{loci:Q5.normalize(r,i,n),repr:o}}mark(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Q5.isEmpty(e.loci))for(const r of this.providers)r(e,t,n)}dispose(){this.providers.length=0,this.sel.dispose()}constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.ctx=t,this.providers=[],this.props=U_.getDefaultValues(e.Params),this.sel=t.managers.structure.selection,this.setProps(n)}}e.LociMarkManager=t;e.LociHighlightManager=class extends t{constructor(){var e;super(...arguments),e=this,this.prev=[],this.clearHighlights=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(const n of e.prev)e.mark(n,b5.RemoveHighlight,t);e.prev.length=0}}isHighlighted(e){for(const t of this.prev)if(b6.Loci.areEqual(t,e))return!0;return!1}addHighlight(e){this.mark(e,b5.Highlight),this.prev.push(e)}highlight(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.normalizedLoci(e,t);this.isHighlighted(n)||this.addHighlight(n)}highlightOnly(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.normalizedLoci(e,t);this.isHighlighted(n)||(Q5.isEmpty(n.loci)?this.clearHighlights():(this.clearHighlights(!0),this.addHighlight(n)))}highlightOnlyExtend(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.normalizedLoci(e,t);if(cG.is(n.loci)){const e={loci:this.sel.tryGetRange(n.loci)||n.loci,repr:n.repr};this.isHighlighted(e)||(Q5.isEmpty(e.loci)?this.clearHighlights():(this.clearHighlights(!0),this.addHighlight(e)))}}dispose(){super.dispose(),this.prev.length=0}};e.LociSelectManager=class extends t{toggle(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Q5.isEmpty(e.loci))return;const n=this.normalizedLoci(e,t,!0);cG.is(n.loci)?this.toggleSel(n):super.mark(n,b5.Toggle)}toggleExtend(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Q5.isEmpty(e.loci))return;const n=this.normalizedLoci(e,t,!0);if(cG.is(n.loci)){const e=this.sel.tryGetRange(n.loci)||n.loci;this.toggleSel({loci:e,repr:n.repr})}}select(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.normalizedLoci(e,t,!0);cG.is(n.loci)&&this.sel.modify("add",n.loci),this.mark(n,b5.Select)}selectJoin(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.normalizedLoci(e,t,!0);cG.is(n.loci)&&this.sel.modify("intersect",n.loci),this.mark(n,b5.Select)}selectOnly(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.normalizedLoci(e,t,!0);cG.is(n.loci)&&(this.mark({loci:aG.Loci(n.loci.structure),repr:n.repr},b5.Deselect),this.sel.modify("set",n.loci)),this.mark(n,b5.Select)}deselect(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.normalizedLoci(e,t,!0);cG.is(n.loci)&&this.sel.modify("remove",n.loci),this.mark(n,b5.Deselect)}deselectAll(){this.sel.clear(),this.mark({loci:w5},b5.Deselect)}deselectAllOnEmpty(e){D5(e.loci)&&this.deselectAll()}mark(e,t){const{loci:n}=e;if(!Q5.isEmpty(n))if(cG.is(n)){const e=this.sel.getLoci(n.structure);super.mark({loci:aG.Loci(n.structure)},b5.Deselect,!Q5.isEmpty(e)),super.mark({loci:e},b5.Select)}else super.mark(e,t)}toggleSel(e){this.sel.has(e.loci)?(this.sel.modify("remove",e.loci),this.mark(e,b5.Deselect)):(this.sel.modify("add",e.loci),this.mark(e,b5.Select))}}}(spe||(spe={}));F.PureComponent;F.PureComponent;F.PureComponent;spe.Params.granularity,new Map([["add","Add/Union Selection"],["remove","Remove/Subtract Selection"],["intersect","Intersect Selection"],["set","Set Selection"]]);const lpe={idType:U_.Select("auth",U_.arrayToOptions(["auth","label","atom-id"])),identifiers:U_.Text("",{description:"A comma separated list of atom identifiers (e.g. 10, 15-25) or residue ranges in given chain (e.g. A 10-15, B 25, C 30:i)"})};U_.getDefaultValues(lpe);function cpe(e,t){const n=function(e,t){return{state:e,oldHierarchy:t,hierarchy:upe(),changed:!1,added:new Set}}(e,t||upe());return function(e,t){const n={tree:e,state:t};bpe(n,e.root),n.state}(e.tree,n),t&&t.refs.forEach(ype,n),{hierarchy:n.hierarchy,added:n.added,changed:n.changed}}function upe(){return{volumes:[],lazyVolumes:[],refs:new Map}}function dpe(e){return{kind:"volume",cell:e,version:e.transform.version,representations:[]}}function Ape(e){return{kind:"lazy-volume",cell:e,version:e.transform.version}}function fpe(e,t){return{kind:"volume-representation",cell:e,version:e.transform.version,volume:t}}function ppe(e,t,n,r){for(var o=arguments.length,i=new Array(o>4?o-4:0),a=4;a<o;a++)i[a-4]=arguments[a];const s=r(...i);n.push(s),e.hierarchy.refs.set(t.transform.ref,s);const l=e.oldHierarchy.refs.get(t.transform.ref);return l?l.version!==t.transform.version&&(e.changed=!0):(e.added.add(s.cell.transform.ref),e.changed=!0),s}function hpe(){}const gpe=[[function(e,t){return(n,r)=>!t(r)&&e.is(n.obj)}(Jz.Volume.Data,(e=>e.currentVolume)),(e,t)=>{e.currentVolume=ppe(e,t,e.hierarchy.volumes,dpe,t)},e=>e.currentVolume=void 0],[e=>Jz.Volume.Lazy.is(e.obj),(e,t)=>{ppe(e,t,e.hierarchy.lazyVolumes,Ape,t)},hpe],[(e,t)=>!e.state.isGhost&&!!t.currentVolume&&Jz.Volume.Representation3D.is(e.obj),(e,t)=>(e.currentVolume&&ppe(e,t,e.currentVolume.representations,fpe,t,e.currentVolume),!1),hpe]];function mpe(e){if(!e||!(null===e||void 0===e?void 0:e.parent)||!e.parent.cells.has(e.transform.ref))return!1;const{obj:t}=e;return!(!t||t===MC.Null||"ok"!==e.status&&"error"!==e.status)}function ype(e){const{cell:t}=e;mpe(t)||(this.changed=!0)}function vpe(e){bpe(this,this.tree.transforms.get(e))}function bpe(e,t){const{state:n}=e,r=n.state.cells.get(t.ref);if(!mpe(r))return;let o,i=!1;for(const[s,l,c]of gpe)if(s(r,n)){if(!1===l(n,r)){i=!0;break}o=c;break}if(i)return;const a=e.tree.children.get(t.ref);a&&a.size&&a.forEach(vpe,e),o&&o(n)}function Cpe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=n;return"string"===typeof r.type||"string"===typeof r.color||"string"===typeof r.size?function(e,t,n){const r=n.type&&e.representation.volume.registry.get(n.type)||e.representation.volume.registry.default.provider,o=n.color&&e.representation.volume.themes.colorThemeRegistry.get(n.color)||e.representation.volume.themes.colorThemeRegistry.get(r.defaultColorTheme.name),i=n.size&&e.representation.volume.themes.sizeThemeRegistry.get(n.size)||e.representation.volume.themes.sizeThemeRegistry.get(r.defaultSizeTheme.name);return Ipe(e,t,{type:r,typeParams:n.typeParams,color:o,colorParams:n.colorParams,size:i,sizeParams:n.sizeParams})}(e,t||HW.One,n):Ipe(e,t||HW.One,n)}function Ipe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{themes:r}=e.representation.volume,o={volume:t},i=n.type||e.representation.volume.registry.default.provider,a=U_.getDefaultValues(i.getParams(r,t)),s=Object.assign(a,n.typeParams),l=n.color||r.colorThemeRegistry.get(i.defaultColorTheme.name),c=U_.getDefaultValues(l.getParams(o));l.name===i.defaultColorTheme.name&&Object.assign(c,i.defaultColorTheme.props);const u=Object.assign(c,n.colorParams),d=n.size||r.sizeThemeRegistry.get(i.defaultSizeTheme.name),A=U_.getDefaultValues(d.getParams(o));d.name===i.defaultSizeTheme.name&&Object.assign(A,i.defaultSizeTheme.props);const f=Object.assign(A,n.sizeParams);return{type:{name:i.name,params:s},colorTheme:{name:l.name,params:u},sizeTheme:{name:d.name,params:f}}}class Epe extends nie{get dataState(){return this.plugin.state.data}get current(){return this.sync(!1),this.state.hierarchy}get selection(){return this.sync(!1),this.state.selection}sync(e){if(!e&&this.dataState.inUpdate)return;if(this.state.syncedTree===this.dataState.tree)return void(e&&!this.state.notified&&(this.state.notified=!0,this.behaviors.selection.next({hierarchy:this.state.hierarchy,volume:this.state.selection})));this.state.syncedTree=this.dataState.tree;const t=cpe(this.plugin.state.data,this.current);if(!t.changed)return;const{hierarchy:n}=t;this.state.hierarchy=n,this.state.selection?this.state.selection=n.refs.has(this.state.selection.cell.transform.ref)?n.refs.get(this.state.selection.cell.transform.ref):n.volumes[0]:this.state.selection=n.volumes[0],e?(this.state.notified=!0,this.behaviors.selection.next({hierarchy:n,volume:this.state.selection})):this.state.notified=!1}setCurrent(e){this.state.selection=e||this.state.hierarchy.volumes[0],this.behaviors.selection.next({hierarchy:this.state.hierarchy,volume:e||this.state.hierarchy.volumes[0]})}remove(e,t){if(0===e.length)return;const n=this.plugin.state.data.build();for(const r of e)n.delete("string"===typeof r?r:r.cell.transform.ref);return n.commit({canUndo:!!t&&"Remove"})}toggleVisibility(e,t){if(0===e.length)return;const n=void 0!==t?"show"!==t:!e[0].cell.state.isHidden;for(const r of e)bie(this.dataState,r.cell.transform.ref,n)}addRepresentation(e,t){var n;return this.dataState.build().to(e.cell).apply(_7.Representation.VolumeRepresentation3D,Cpe(this.plugin,null===(n=e.cell.obj)||void 0===n?void 0:n.data,{type:t})).commit({canUndo:"Add Representation"})}constructor(e){super(),this.plugin=e,this.state={syncedTree:this.dataState.tree,notified:!1,hierarchy:upe(),selection:void 0},this.behaviors={selection:this.ev.behavior({hierarchy:this.current,volume:this.selection})},this.subscribe(e.state.data.events.changed,(t=>{t.inTransaction||e.behaviors.state.isAnimating.value||this.sync(!0)})),this.subscribe(e.behaviors.state.isAnimating,(t=>{t||e.behaviors.state.isUpdating.value||this.sync(!0)}))}}!function(e){e.getRepresentationTypes=function(e,t){var n,r;return(null===(n=null===t||void 0===t?void 0:t.cell.obj)||void 0===n?void 0:n.data)?e.representation.volume.registry.getApplicableTypes(null===(r=t.cell.obj)||void 0===r?void 0:r.data):e.representation.volume.registry.types}}(Epe||(Epe={}));class xpe extends(Jz.Create({name:"Volume Streaming",typeClass:"Object"})){}var Bpe;function wpe(e,t){if(!t||!t.models.length)return[];const n=t.models[0];switch(e){case"em":return function(e){const t=[];if(!iL.is(e.sourceData))return[e.entryId];const{db_id:n,db_name:r,content_type:o}=e.sourceData.data.db.pdbx_database_related;if(!r.isDefined)return[e.entryId];for(let i=0,a=r.rowCount;i<a;++i)"EMDB"===r.value(i).toUpperCase()&&"associated EM volume"===o.value(i)&&t.push(n.value(i));return t}(n);case"x-ray":return function(e){return[e.entryId]}(n)}}async function _pe(e,t,n,r){switch(e){case"emdb":return Spe(t,n,r);case"pdbe":return async function(e,t,n){var r,o,i,a;n=n.toUpperCase();const s=await e.fetch({url:`https://www.ebi.ac.uk/emdb/api/entry/map/${n}`,type:"json"}).runInContext(t),l=null===(o=null===(r=null===s||void 0===s?void 0:s.map)||void 0===r?void 0:r.contour_list)||void 0===o?void 0:o.contour;if(!l||0===l.length)return async function(e,t,n){var r,o,i;n=n.toUpperCase();const a=await e.fetch({url:`https://www.ebi.ac.uk/pdbe/api/emdb/entry/map/${n}`,type:"json"}).runInContext(t),s=null===a||void 0===a?void 0:a[n];let l;void 0!==(null===(i=null===(o=null===(r=null===s||void 0===s?void 0:s[0])||void 0===r?void 0:r.map)||void 0===o?void 0:o.contour_level)||void 0===i?void 0:i.value)&&(l=+s[0].map.contour_level.value);return l}(e,t,n);return null!==(a=null===(i=l.find((e=>e.primary)))||void 0===i?void 0:i.level)&&void 0!==a?a:l[0].level}(t,n,r)}}async function Spe(e,t,n){const r=e.config.get(Bee.VolumeStreaming.EmdbHeaderServer),o=(await e.fetch({url:`${r}/${n.toUpperCase()}/header/${n.toLowerCase()}.xml`,type:"xml"}).runInContext(t)).getElementsByTagName("map")[0].getElementsByTagName("contour");let i=o[0];for(let a=1;a<o.length;a++)if("true"===o[a].getAttribute("primary")){i=o[a];break}return parseFloat(i.getElementsByTagName("level")[0].textContent)}async function Dpe(e,t,n){var r;const o=await e.fetch({url:`https://www.ebi.ac.uk/pdbe/api/pdb/entry/summary/${n}`,type:"json"}).runInContext(t),i=null===o||void 0===o?void 0:o[n],a=[];if(!(null===(r=null===i||void 0===i?void 0:i[0])||void 0===r?void 0:r.related_structures))throw new Error(`No related EMDB entry found for '${n}'.`);{const e=i[0].related_structures.filter((e=>"EMDB"===e.resource&&"associated EM volume"===e.relationship));if(!e.length)throw new Error(`No related EMDB entry found for '${n}'.`);a.push(...e.map((e=>e.accession)))}return a}function Tpe(e,t,n){return{i:e,j:t,k:n}}function kpe(e,t){return{a:e,b:t}}!function(e){let t;!function(e){e.Float32="float32",e.Int8="int8"}(t=e.ValueType||(e.ValueType={}))}(Bpe||(Bpe={}));const Qpe=[Tpe(0,0,0),Tpe(1,0,0),Tpe(1,1,0),Tpe(0,1,0),Tpe(0,0,1),Tpe(1,0,1),Tpe(1,1,1),Tpe(0,1,1)],Mpe=[kpe(Qpe[0],Qpe[1]),kpe(Qpe[1],Qpe[2]),kpe(Qpe[2],Qpe[3]),kpe(Qpe[3],Qpe[0]),kpe(Qpe[4],Qpe[5]),kpe(Qpe[5],Qpe[6]),kpe(Qpe[6],Qpe[7]),kpe(Qpe[7],Qpe[4]),kpe(Qpe[0],Qpe[4]),kpe(Qpe[1],Qpe[5]),kpe(Qpe[2],Qpe[6]),kpe(Qpe[3],Qpe[7])],Rpe=[{i:0,j:0,k:0,e:0},{i:1,j:0,k:0,e:1},{i:0,j:1,k:0,e:0},{i:0,j:0,k:0,e:1},{i:0,j:0,k:1,e:0},{i:1,j:0,k:1,e:1},{i:0,j:1,k:1,e:0},{i:0,j:0,k:1,e:1},{i:0,j:0,k:0,e:2},{i:1,j:0,k:0,e:2},{i:1,j:1,k:0,e:2},{i:0,j:1,k:0,e:2}],Ppe=[0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0],Ope=[[],[0,8,3],[0,1,9],[1,8,3,9,8,1],[1,2,10],[0,8,3,1,2,10],[9,2,10,0,2,9],[2,8,3,2,10,8,10,9,8],[3,11,2],[0,11,2,8,11,0],[1,9,0,2,3,11],[1,11,2,1,9,11,9,8,11],[3,10,1,11,10,3],[0,10,1,0,8,10,8,11,10],[3,9,0,3,11,9,11,10,9],[9,8,10,10,8,11],[4,7,8],[4,3,0,7,3,4],[0,1,9,8,4,7],[4,1,9,4,7,1,7,3,1],[1,2,10,8,4,7],[3,4,7,3,0,4,1,2,10],[9,2,10,9,0,2,8,4,7],[2,10,9,2,9,7,2,7,3,7,9,4],[8,4,7,3,11,2],[11,4,7,11,2,4,2,0,4],[9,0,1,8,4,7,2,3,11],[4,7,11,9,4,11,9,11,2,9,2,1],[3,10,1,3,11,10,7,8,4],[1,11,10,1,4,11,1,0,4,7,11,4],[4,7,8,9,0,11,9,11,10,11,0,3],[4,7,11,4,11,9,9,11,10],[9,5,4],[9,5,4,0,8,3],[0,5,4,1,5,0],[8,5,4,8,3,5,3,1,5],[1,2,10,9,5,4],[3,0,8,1,2,10,4,9,5],[5,2,10,5,4,2,4,0,2],[2,10,5,3,2,5,3,5,4,3,4,8],[9,5,4,2,3,11],[0,11,2,0,8,11,4,9,5],[0,5,4,0,1,5,2,3,11],[2,1,5,2,5,8,2,8,11,4,8,5],[10,3,11,10,1,3,9,5,4],[4,9,5,0,8,1,8,10,1,8,11,10],[5,4,0,5,0,11,5,11,10,11,0,3],[5,4,8,5,8,10,10,8,11],[9,7,8,5,7,9],[9,3,0,9,5,3,5,7,3],[0,7,8,0,1,7,1,5,7],[1,5,3,3,5,7],[9,7,8,9,5,7,10,1,2],[10,1,2,9,5,0,5,3,0,5,7,3],[8,0,2,8,2,5,8,5,7,10,5,2],[2,10,5,2,5,3,3,5,7],[7,9,5,7,8,9,3,11,2],[9,5,7,9,7,2,9,2,0,2,7,11],[2,3,11,0,1,8,1,7,8,1,5,7],[11,2,1,11,1,7,7,1,5],[9,5,8,8,5,7,10,1,3,10,3,11],[5,7,0,5,0,9,7,11,0,1,0,10,11,10,0],[11,10,0,11,0,3,10,5,0,8,0,7,5,7,0],[11,10,5,7,11,5],[10,6,5],[0,8,3,5,10,6],[9,0,1,5,10,6],[1,8,3,1,9,8,5,10,6],[1,6,5,2,6,1],[1,6,5,1,2,6,3,0,8],[9,6,5,9,0,6,0,2,6],[5,9,8,5,8,2,5,2,6,3,2,8],[2,3,11,10,6,5],[11,0,8,11,2,0,10,6,5],[0,1,9,2,3,11,5,10,6],[5,10,6,1,9,2,9,11,2,9,8,11],[6,3,11,6,5,3,5,1,3],[0,8,11,0,11,5,0,5,1,5,11,6],[3,11,6,0,3,6,0,6,5,0,5,9],[6,5,9,6,9,11,11,9,8],[5,10,6,4,7,8],[4,3,0,4,7,3,6,5,10],[1,9,0,5,10,6,8,4,7],[10,6,5,1,9,7,1,7,3,7,9,4],[6,1,2,6,5,1,4,7,8],[1,2,5,5,2,6,3,0,4,3,4,7],[8,4,7,9,0,5,0,6,5,0,2,6],[7,3,9,7,9,4,3,2,9,5,9,6,2,6,9],[3,11,2,7,8,4,10,6,5],[5,10,6,4,7,2,4,2,0,2,7,11],[0,1,9,4,7,8,2,3,11,5,10,6],[9,2,1,9,11,2,9,4,11,7,11,4,5,10,6],[8,4,7,3,11,5,3,5,1,5,11,6],[5,1,11,5,11,6,1,0,11,7,11,4,0,4,11],[0,5,9,0,6,5,0,3,6,11,6,3,8,4,7],[6,5,9,6,9,11,4,7,9,7,11,9],[10,4,9,6,4,10],[4,10,6,4,9,10,0,8,3],[10,0,1,10,6,0,6,4,0],[8,3,1,8,1,6,8,6,4,6,1,10],[1,4,9,1,2,4,2,6,4],[3,0,8,1,2,9,2,4,9,2,6,4],[0,2,4,4,2,6],[8,3,2,8,2,4,4,2,6],[10,4,9,10,6,4,11,2,3],[0,8,2,2,8,11,4,9,10,4,10,6],[3,11,2,0,1,6,0,6,4,6,1,10],[6,4,1,6,1,10,4,8,1,2,1,11,8,11,1],[9,6,4,9,3,6,9,1,3,11,6,3],[8,11,1,8,1,0,11,6,1,9,1,4,6,4,1],[3,11,6,3,6,0,0,6,4],[6,4,8,11,6,8],[7,10,6,7,8,10,8,9,10],[0,7,3,0,10,7,0,9,10,6,7,10],[10,6,7,1,10,7,1,7,8,1,8,0],[10,6,7,10,7,1,1,7,3],[1,2,6,1,6,8,1,8,9,8,6,7],[2,6,9,2,9,1,6,7,9,0,9,3,7,3,9],[7,8,0,7,0,6,6,0,2],[7,3,2,6,7,2],[2,3,11,10,6,8,10,8,9,8,6,7],[2,0,7,2,7,11,0,9,7,6,7,10,9,10,7],[1,8,0,1,7,8,1,10,7,6,7,10,2,3,11],[11,2,1,11,1,7,10,6,1,6,7,1],[8,9,6,8,6,7,9,1,6,11,6,3,1,3,6],[0,9,1,11,6,7],[7,8,0,7,0,6,3,11,0,11,6,0],[7,11,6],[7,6,11],[3,0,8,11,7,6],[0,1,9,11,7,6],[8,1,9,8,3,1,11,7,6],[10,1,2,6,11,7],[1,2,10,3,0,8,6,11,7],[2,9,0,2,10,9,6,11,7],[6,11,7,2,10,3,10,8,3,10,9,8],[7,2,3,6,2,7],[7,0,8,7,6,0,6,2,0],[2,7,6,2,3,7,0,1,9],[1,6,2,1,8,6,1,9,8,8,7,6],[10,7,6,10,1,7,1,3,7],[10,7,6,1,7,10,1,8,7,1,0,8],[0,3,7,0,7,10,0,10,9,6,10,7],[7,6,10,7,10,8,8,10,9],[6,8,4,11,8,6],[3,6,11,3,0,6,0,4,6],[8,6,11,8,4,6,9,0,1],[9,4,6,9,6,3,9,3,1,11,3,6],[6,8,4,6,11,8,2,10,1],[1,2,10,3,0,11,0,6,11,0,4,6],[4,11,8,4,6,11,0,2,9,2,10,9],[10,9,3,10,3,2,9,4,3,11,3,6,4,6,3],[8,2,3,8,4,2,4,6,2],[0,4,2,4,6,2],[1,9,0,2,3,4,2,4,6,4,3,8],[1,9,4,1,4,2,2,4,6],[8,1,3,8,6,1,8,4,6,6,10,1],[10,1,0,10,0,6,6,0,4],[4,6,3,4,3,8,6,10,3,0,3,9,10,9,3],[10,9,4,6,10,4],[4,9,5,7,6,11],[0,8,3,4,9,5,11,7,6],[5,0,1,5,4,0,7,6,11],[11,7,6,8,3,4,3,5,4,3,1,5],[9,5,4,10,1,2,7,6,11],[6,11,7,1,2,10,0,8,3,4,9,5],[7,6,11,5,4,10,4,2,10,4,0,2],[3,4,8,3,5,4,3,2,5,10,5,2,11,7,6],[7,2,3,7,6,2,5,4,9],[9,5,4,0,8,6,0,6,2,6,8,7],[3,6,2,3,7,6,1,5,0,5,4,0],[6,2,8,6,8,7,2,1,8,4,8,5,1,5,8],[9,5,4,10,1,6,1,7,6,1,3,7],[1,6,10,1,7,6,1,0,7,8,7,0,9,5,4],[4,0,10,4,10,5,0,3,10,6,10,7,3,7,10],[7,6,10,7,10,8,5,4,10,4,8,10],[6,9,5,6,11,9,11,8,9],[3,6,11,0,6,3,0,5,6,0,9,5],[0,11,8,0,5,11,0,1,5,5,6,11],[6,11,3,6,3,5,5,3,1],[1,2,10,9,5,11,9,11,8,11,5,6],[0,11,3,0,6,11,0,9,6,5,6,9,1,2,10],[11,8,5,11,5,6,8,0,5,10,5,2,0,2,5],[6,11,3,6,3,5,2,10,3,10,5,3],[5,8,9,5,2,8,5,6,2,3,8,2],[9,5,6,9,6,0,0,6,2],[1,5,8,1,8,0,5,6,8,3,8,2,6,2,8],[1,5,6,2,1,6],[1,3,6,1,6,10,3,8,6,5,6,9,8,9,6],[10,1,0,10,0,6,9,5,0,5,6,0],[0,3,8,5,6,10],[10,5,6],[11,5,10,7,5,11],[11,5,10,11,7,5,8,3,0],[5,11,7,5,10,11,1,9,0],[10,7,5,10,11,7,9,8,1,8,3,1],[11,1,2,11,7,1,7,5,1],[0,8,3,1,2,7,1,7,5,7,2,11],[9,7,5,9,2,7,9,0,2,2,11,7],[7,5,2,7,2,11,5,9,2,3,2,8,9,8,2],[2,5,10,2,3,5,3,7,5],[8,2,0,8,5,2,8,7,5,10,2,5],[9,0,1,5,10,3,5,3,7,3,10,2],[9,8,2,9,2,1,8,7,2,10,2,5,7,5,2],[1,3,5,3,7,5],[0,8,7,0,7,1,1,7,5],[9,0,3,9,3,5,5,3,7],[9,8,7,5,9,7],[5,8,4,5,10,8,10,11,8],[5,0,4,5,11,0,5,10,11,11,3,0],[0,1,9,8,4,10,8,10,11,10,4,5],[10,11,4,10,4,5,11,3,4,9,4,1,3,1,4],[2,5,1,2,8,5,2,11,8,4,5,8],[0,4,11,0,11,3,4,5,11,2,11,1,5,1,11],[0,2,5,0,5,9,2,11,5,4,5,8,11,8,5],[9,4,5,2,11,3],[2,5,10,3,5,2,3,4,5,3,8,4],[5,10,2,5,2,4,4,2,0],[3,10,2,3,5,10,3,8,5,4,5,8,0,1,9],[5,10,2,5,2,4,1,9,2,9,4,2],[8,4,5,8,5,3,3,5,1],[0,4,5,1,0,5],[8,4,5,8,5,3,9,0,5,0,3,5],[9,4,5],[4,11,7,4,9,11,9,10,11],[0,8,3,4,9,7,9,11,7,9,10,11],[1,10,11,1,11,4,1,4,0,7,4,11],[3,1,4,3,4,8,1,10,4,7,4,11,10,11,4],[4,11,7,9,11,4,9,2,11,9,1,2],[9,7,4,9,11,7,9,1,11,2,11,1,0,8,3],[11,7,4,11,4,2,2,4,0],[11,7,4,11,4,2,8,3,4,3,2,4],[2,9,10,2,7,9,2,3,7,7,4,9],[9,10,7,9,7,4,10,2,7,8,7,0,2,0,7],[3,7,10,3,10,2,7,4,10,1,10,0,4,0,10],[1,10,2,8,7,4],[4,9,1,4,1,7,7,1,3],[4,9,1,4,1,7,0,8,1,8,7,1],[4,0,3,7,4,3],[4,8,7],[9,10,8,10,11,8],[3,0,9,3,9,11,11,9,10],[0,1,10,0,10,8,8,10,11],[3,1,10,11,3,10],[1,2,11,1,11,9,9,11,8],[3,0,9,3,9,11,1,2,9,2,11,9],[0,2,11,8,0,11],[3,2,11],[2,3,8,2,8,10,10,8,9],[9,10,2,0,9,2],[2,3,8,2,8,10,0,1,8,1,10,8],[1,10,2],[1,3,8,9,1,8],[0,9,1],[0,3,8],[]],Fpe=[[0,4,4,4,2,0,0,0,2,2,0,0],[4,0,4,4,0,8,0,0,0,8,8,0],[4,4,0,4,0,0,8,0,0,0,8,8],[4,4,4,0,0,0,0,1,1,0,0,1],[2,0,0,0,0,8,8,8,2,2,0,0],[0,8,0,0,8,0,8,8,0,8,8,0],[0,0,8,0,8,8,0,8,0,0,8,8],[0,0,0,1,8,8,8,0,1,0,0,1],[2,0,0,1,2,0,0,1,0,2,0,1],[2,8,0,0,2,8,0,0,2,0,8,0],[0,8,8,0,0,8,8,0,0,8,0,8],[0,0,8,1,0,0,8,1,1,0,8,0]];function Npe(e){return{...e,bottomLeft:Pp(e.bottomLeft,[0,0,0]),topRight:Pp(e.topRight,e.scalarField.space.dimensions)}}function Lpe(e){return{dX:e.topRight[0]-e.bottomLeft[0],dY:e.topRight[1]-e.bottomLeft[1],dZ:e.topRight[2]-e.bottomLeft[2]}}function Upe(e,t){return Tw.create("Marching Cubes Mesh",(async n=>{const r=Npe(e),{dX:o,dY:i,dZ:a}=Lpe(r),s=function(e,t){const n=Math.min(65536,4*e),r=gh.create(Float32Array,3,e,t&&t.vertexBuffer.ref.value),o=gh.create(Float32Array,3,e,t&&t.normalBuffer.ref.value),i=gh.create(Float32Array,1,e,t&&t.groupBuffer.ref.value),a=gh.create(Uint32Array,3,n,t&&t.indexBuffer.ref.value);let s=0,l=0;return{addVertex:(e,t,n)=>(++s,gh.add3(r,e,t,n)),addNormal:(e,t,n)=>{gh.add3(o,e,t,n)},addGroup:e=>{gh.add(i,e)},addTriangle:(e,t,n,r)=>{const o=e[t],i=e[n],s=e[r];o>=0&&i>=0&&s>=0&&(++l,gh.add3(a,o,i,s))},get:()=>{const e=gh.compact(r,!0),n=gh.compact(o,!0),c=gh.compact(a,!0),u=gh.compact(i,!0);return RY.create(e,c,n,u,s,l,t)}}}(Math.min(262144,Math.max(o*i*a/32,1024)),t);return await new jpe(n,s,r).run(),s.get()}))}function Gpe(e,t){return Tw.create("Marching Cubes Lines",(async n=>{const r=Npe(e),{dX:o,dY:i,dZ:a}=Lpe(r),s=function(e,t){const n=gh.create(Float32Array,3,e),r=gh.create(Float32Array,1,e),o=gh.create(Float32Array,2,e);let i=0;return{addVertex:(e,t,r)=>gh.add3(n,e,t,r),addNormal:()=>Dp,addGroup:e=>{gh.add(r,e)},addTriangle:(e,t,n,r,a)=>{const s=e[t],l=e[n],c=e[r];s>=0&&l>=0&&c>=0&&(Fpe[t][n]&a&&(++i,gh.add2(o,e[t],e[n])),Fpe[n][r]&a&&(++i,gh.add2(o,e[n],e[r])),Fpe[t][r]&a&&(++i,gh.add2(o,e[t],e[r])))},get:()=>{const e=gh.compact(n,!0),a=gh.compact(o,!0),s=gh.compact(r,!0),l=BW.create(i,i/10,t);for(let t=0;t<i;++t){const n=a[2*t],r=a[2*t+1];l.add(e[3*n],e[3*n+1],e[3*n+2],e[3*r],e[3*r+1],e[3*r+2],s[n])}return l.getLines()}}}(Math.min(262144,Math.max(o*i*a/32,1024)),t);return await new jpe(n,s,r).run(),s.get()}))}class jpe{async doSlices(){let e=0;this.edgeFilter=15;for(let t=this.minZ;t<this.maxZ;t++,this.edgeFilter&=-5)this.slice(t),e+=this.sliceSize,this.ctx.shouldUpdate&&await this.ctx.update({message:"Computing surface...",current:e,max:this.size})}slice(e){this.edgeFilter|=2;for(let t=this.minY;t<this.maxY;t++,this.edgeFilter&=-3){this.edgeFilter|=1;for(let n=this.minX;n<this.maxX;n++,this.edgeFilter&=-2)this.state.processCell(n,t,e,this.edgeFilter)}this.state.clearEdgeVertexIndexSlice(e)}async run(){await this.doSlices()}constructor(e,t,n){this.ctx=e,this.minX=0,this.minY=0,this.minZ=0,this.maxX=0,this.maxY=0,this.maxZ=0,this.state=new zpe(t,n),this.minX=n.bottomLeft[0],this.minY=n.bottomLeft[1],this.minZ=n.bottomLeft[2],this.maxX=n.topRight[0]-1,this.maxY=n.topRight[1]-1,this.maxZ=n.topRight[2]-1,this.size=(this.maxX-this.minX)*(this.maxY-this.minY)*(this.maxZ-this.minZ),this.sliceSize=(this.maxX-this.minX)*(this.maxY-this.minY)}}class zpe{get3dOffsetFromEdgeInfo(e){return this.nX*((this.k+e.k)%2*this.nY+this.j+e.j)+this.i+e.i}clearEdgeVertexIndexSlice(e){const t=e%2===0?0:3*this.nX*this.nY,n=e%2===0?3*this.nX*this.nY:this.verticesOnEdges.length;this.verticesOnEdges.fill(0,t,n)}interpolate(e){const t=Rpe[e],n=3*this.get3dOffsetFromEdgeInfo(t)+t.e,r=this.verticesOnEdges[n];if(r>0)return r-1;const o=this.scalarField,i=this.scalarFieldGet,a=Mpe[e],s=a.a,l=a.b,c=s.i+this.i,u=s.j+this.j,d=s.k+this.k,A=l.i+this.i,f=l.j+this.j,p=l.k+this.k,h=i(o,c,u,d),g=i(o,A,f,p),m=(this.isoLevel-h)/(h-g);if(this.idField){const e=this.idFieldGet(this.idField,c,u,d),t=this.idFieldGet(this.idField,A,f,p);let n=m<.5?e:t;if(-1===n&&(n=m<.5?t:e),-2===n)return-1;this.builder.addGroup(n)}else this.builder.addGroup(0);const y=this.builder.addVertex(c+m*(c-A),u+m*(u-f),d+m*(d-p));this.verticesOnEdges[n]=y+1;const v=i(o,Math.max(0,c-1),u,d)-i(o,Math.min(this.nX-1,c+1),u,d),b=i(o,c,Math.max(0,u-1),d)-i(o,c,Math.min(this.nY-1,u+1),d),C=i(o,c,u,Math.max(0,d-1))-i(o,c,u,Math.min(this.nZ,d+1)),I=v+m*(v-(i(o,Math.max(0,A-1),f,p)-i(o,Math.min(this.nX-1,A+1),f,p))),E=b+m*(b-(i(o,A,Math.max(0,f-1),p)-i(o,A,Math.min(this.nY-1,f+1),p))),x=C+m*(C-(i(o,A,f,Math.max(0,p-1))-i(o,A,f,Math.min(this.nZ-1,p+1))));return this.isoLevel>=0?this.builder.addNormal(I,E,x):this.builder.addNormal(-I,-E,-x),y}constructor(e,t){this.builder=e,this.vertList=[0,0,0,0,0,0,0,0,0,0,0,0],this.i=0,this.j=0,this.k=0;const n=t.scalarField.space.dimensions;this.nX=n[0],this.nY=n[1],this.nZ=n[2],this.isoLevel=t.isoLevel,this.scalarFieldGet=t.scalarField.space.get,this.scalarField=t.scalarField.data,t.idField&&(this.idField=t.idField.data,this.idFieldGet=t.idField.space.get),this.verticesOnEdges=new Int32Array(3*this.nX*this.nY*2)}get(e,t,n){return this.scalarFieldGet(this.scalarField,e,t,n)}processCell(e,t,n,r){let o=0;if(this.get(e,t,n)<this.isoLevel&&(o|=1),this.get(e+1,t,n)<this.isoLevel&&(o|=2),this.get(e+1,t+1,n)<this.isoLevel&&(o|=4),this.get(e,t+1,n)<this.isoLevel&&(o|=8),this.get(e,t,n+1)<this.isoLevel&&(o|=16),this.get(e+1,t,n+1)<this.isoLevel&&(o|=32),this.get(e+1,t+1,n+1)<this.isoLevel&&(o|=64),this.get(e,t+1,n+1)<this.isoLevel&&(o|=128),0===o||255===o)return;this.i=e,this.j=t,this.k=n;const i=Ppe[o];(1&i)>0&&(this.vertList[0]=this.interpolate(0)),(2&i)>0&&(this.vertList[1]=this.interpolate(1)),(4&i)>0&&(this.vertList[2]=this.interpolate(2)),(8&i)>0&&(this.vertList[3]=this.interpolate(3)),(16&i)>0&&(this.vertList[4]=this.interpolate(4)),(32&i)>0&&(this.vertList[5]=this.interpolate(5)),(64&i)>0&&(this.vertList[6]=this.interpolate(6)),(128&i)>0&&(this.vertList[7]=this.interpolate(7)),(256&i)>0&&(this.vertList[8]=this.interpolate(8)),(512&i)>0&&(this.vertList[9]=this.interpolate(9)),(1024&i)>0&&(this.vertList[10]=this.interpolate(10)),(2048&i)>0&&(this.vertList[11]=this.interpolate(11));const a=Ope[o];for(let s=0;s<a.length;s+=3){const e=a[s],t=a[s+1],n=a[s+2];this.isoLevel>=0?this.builder.addTriangle(this.vertList,e,t,n,r):this.builder.addTriangle(this.vertList,n,t,e,r)}}}function Hpe(e,t){const{defaultProps:n,createGeometry:r,createLocationIterator:o,getLoci:i,eachLocation:a,setUpdateState:s,mustRecreate:l,dispose:c}=e,{updateValues:u,updateBoundingSphere:d,updateRenderableState:A,createPositionIterator:f}=e.geometryUtils,p=M5.create();let h,g,m,y,v,b,C,I,E,x,B=Object.assign({},n),w=v5.createEmpty(),_=-1;function S(e){if(p.createNew){if(E=o(y,v),!e)throw new Error("expected geometry to be given");h=function(e,t,n,r,o,i){const{createValues:a,createRenderableState:s}=HK.getUtils(t),l=a(t,mk(),n,r,o),c=s(o);return cJ(t.kind,l,c,i)}(0,e,E,m,g,t),x=f(e,h.values)}else{if(!h)throw new Error("expected renderObject to be available");if(p.updateTransform){E=o(y,v);const{instanceCount:e,groupCount:t}=E;g.instanceGranularity?wV(e,"instance",h.values):wV(e*t,"groupInstance",h.values)}else E.reset();if(p.createGeometry){if(!e)throw new Error("expected geometry to be given");Sp.updateIfChanged(h.values.drawCount,HK.getDrawCount(e)),Sp.updateIfChanged(h.values.uVertexCount,HK.getVertexCount(e)),Sp.updateIfChanged(h.values.uGroupCount,HK.getGroupCount(e))}(p.updateTransform||p.createGeometry)&&(d(h.values,e||I),x=f(e||I,h.values)),p.updateSize&&"uSize"in h.values&&iW(E,m.size,h.values),p.updateColor&&dY(E,x,m.color,h.values),u(h.values,g),A(h.state,g)}B=g,w=m,b=y,C=v,e&&(I=e,_+=1)}function D(e,t){return _5(e)?B.instanceGranularity?t(Gg.ofBounds(0,E.instanceCount)):t(Gg.ofBounds(0,E.groupCount*E.instanceCount)):B.instanceGranularity?function(e,t,n,r){let o=!1;if(HW.Cell.isLoci(e)){if(HW.Cell.isLociEmpty(e))return!1;if(!HW.areEquivalent(e.volume,t))return!1;r(Gg.ofSingleton(0))&&(o=!0)}else if(HW.Segment.isLoci(e)){if(HW.Segment.isLociEmpty(e))return!1;if(!HW.areEquivalent(e.volume,t))return!1;if(!Em.has(e.segments,n))return!1;r(Gg.ofSingleton(0))&&(o=!0)}return o}(e,b,C,t):a(e,b,C,B,t)}return{get groupCount(){return E?E.count:0},get renderObject(){return h},get geometryVersion(){return _},async createOrUpdate(e,t){let n=arguments.length>3?arguments[3]:void 0;if(function(e,t,n,r){if(!n&&!b)throw new Error("missing volume");g=Object.assign({},B,t),m=e,y=n,v=r,M5.reset(p),h&&HW.areEquivalent(y,b)&&v===C||(p.createNew=!0),p.createNew?p.createGeometry=!0:(s(p,n,g,B,m,w),d5.areEqual(e.color,w.color)||(p.updateColor=!0),p.createGeometry&&(p.updateColor=!0),g.instanceGranularity!==B.instanceGranularity&&(p.updateTransform=!0))}(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},(null===n||void 0===n?void 0:n.volume)||b,(null===n||void 0===n?void 0:n.key)||C),p.createGeometry){const t=r(e,y,v,m,g,I);return $h(t)?t.then(S):S(t)}S()},getLoci:e=>h?i(e,b,C,B,h.id):S5,eachLocation(e){for(E.reset();E.hasNext;){const{location:t,isSecondary:n}=E.move();e(t,n)}},mark:(e,t)=>A6.mark(h,e,t,D),setVisibility(e){A6.setVisibility(h,e)},setAlphaFactor(e){A6.setAlphaFactor(h,e)},setPickable(e){A6.setPickable(h,e)},setColorOnly(e){A6.setColorOnly(h,e)},setTransform(e,t){A6.setTransform(h,e,t)},setOverpaint:e=>A6.setOverpaint(h,e,D,!0),setTransparency:e=>A6.setTransparency(h,e,D,!0),setEmissive:e=>A6.setEmissive(h,e,D,!0),setSubstance:e=>A6.setSubstance(h,e,D,!0),setClipping:e=>A6.setClipping(h,e,D,!0),setThemeStrength(e){A6.setThemeStrength(h,e)},destroy(){null===c||void 0===c||c(I),h&&(h.state.disposed=!0,h=void 0)},mustRecreate:l}}Fk.Params;function Vpe(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>[-1],a=0;const{webgl:s}=t,l=new JS,c=new b6.GeometryState,u=lJ(),d=[],A=b6.createState(),f=new Map;let p,h,g,m,y=v5.createEmpty();async function v(e,t){var n;let o=f.get(t);return o?(null===(n=o.mustRecreate)||void 0===n?void 0:n.call(o,{volume:p,key:t},m,s))&&(o.destroy(),o=r(u,p,t,m,s),f.set(t,o)):(o=r(u,p,t,m,s),f.set(t,o)),o.createOrUpdate({webgl:s,runtime:e},y,m,{volume:p,key:t})}return{label:e,get groupCount(){let e=0;return f.forEach((t=>{t.renderObject&&(e+=t.groupCount)})),e},get props(){return m},get params(){return g},get state(){return A},get theme(){return y},get geometryVersion(){return c.version},renderObjects:d,updated:l,createOrUpdate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;r&&r!==p&&(g=n(t,r),p=r,m||(m=U_.getDefaultValues(g)));const o=N5(Object.assign({},m,e),p);return Object.assign(m,e,o),h=i(m),Tw.create("Creating or updating VolumeRepresentation",(async e=>{const t=new Set(f.keys());for(let n=0,r=h.length;n<r;++n){const r=h[n];t.delete(r);const o=v(e,r);o&&await o}t.forEach((e=>{var t;null===(t=f.get(e))||void 0===t||t.destroy(),f.delete(e)})),d.length=0,f.forEach((e=>{e.renderObject&&(d.push(e.renderObject),c.add(e.renderObject.id,e.geometryVersion))})),c.snapshot(),l.next(a++)}))},setState:function(e){const{visible:t,alphaFactor:n,pickable:r,overpaint:o,transparency:i,emissive:a,substance:s,clipping:l,transform:c,themeStrength:u,syncManually:d,markerActions:p}=e,h={};void 0!==t&&(h.visible=t),void 0!==n&&(h.alphaFactor=n),void 0!==r&&(h.pickable=r),void 0!==o&&(h.overpaint=o),void 0!==i&&(h.transparency=i),void 0!==a&&(h.emissive=a),void 0!==s&&(h.substance=s),void 0!==l&&(h.clipping=l),void 0!==u&&(h.themeStrength=u),void 0===c||Yh.areEqual(c,A.transform,zh)||(h.transform=c),void 0!==d&&(h.syncManually=d),void 0!==p&&(h.markerActions=p),f.forEach((e=>function(e,t){void 0!==t.visible&&e&&e.setVisibility(t.visible),void 0!==t.alphaFactor&&e&&e.setAlphaFactor(t.alphaFactor),void 0!==t.pickable&&e&&e.setPickable(t.pickable),void 0!==t.overpaint&&e&&e.setOverpaint(t.overpaint),void 0!==t.transparency&&e&&e.setTransparency(t.transparency),void 0!==t.emissive&&e&&e.setEmissive(t.emissive),void 0!==t.substance&&e&&e.setSubstance(t.substance),void 0!==t.clipping&&e&&e.setClipping(t.clipping),void 0!==t.transform&&e&&e.setTransform(t.transform),void 0!==t.themeStrength&&e&&e.setThemeStrength(t.themeStrength)}(e,h))),b6.updateState(A,e)},setTheme:function(e){y=e},getLoci:e=>{let t=S5;return f.forEach((n=>{const r=n.getLoci(e);D5(r)||(t=r)})),t},getAllLoci:()=>[o(p,m)],eachLocation:e=>{f.forEach((t=>{t.eachLocation(e)}))},mark:function(e,t){let n=!1;return f.forEach((r=>{n=r.mark(e,t)||n})),n},destroy:function(){f.forEach((e=>e.destroy())),f.clear()}}}const qpe="\nprecision highp float;\nprecision highp int;\n\n#if __VERSION__ == 100\n    precision highp sampler2D;\n    uniform sampler2D tTexture;\n#else\n    precision highp isampler2D;\n    uniform isampler2D tTexture;\n#endif\n\nvoid main(void) {\n    #if __VERSION__ == 100\n        gl_FragColor = texture2D(tTexture, vec2(0.5));\n    #else\n        gl_FragColor = ivec4(texture2D(tTexture, vec2(0.5)).r);\n    #endif\n}\n",Ype={...MK,tTexture:ZW("texture","rgba","float","nearest")},Xpe="histopyramid-sum";function Wpe(e,t){if(e.namedComputeRenderables[Xpe]){const n=e.namedComputeRenderables[Xpe].values;Sp.update(n.tTexture,t),e.namedComputeRenderables[Xpe].update()}else e.namedComputeRenderables[Xpe]=function(e,t){const n={...RK,tTexture:Sp.create(t)},r={...Ype},o=jV("sum",pK,qpe,{},{0:"ivec4"}),i=CK(e,"triangles",o,r,n);return kK(i,n)}(e,t);return e.namedComputeRenderables[Xpe]}const Kpe=new Uint8Array(4),Jpe=new Int32Array(4);const Zpe="\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nuniform sampler2D tInputLevel;\n\n// previous level used to evaluate the new level\n#if __VERSION__ == 100\n    uniform sampler2D tPreviousLevel;\n#else\n    precision highp isampler2D;\n    uniform isampler2D tPreviousLevel;\n#endif\n\n// inverted size of the previous level texture.\nuniform float uSize;\nuniform float uTexSize;\nuniform bool uFirst;\n\n#include common\n\nvoid main(void) {\n    float k = 0.5 * uSize;\n    vec2 position = floor((gl_FragCoord.xy / uTexSize) / uSize) * uSize;\n\n    #if __VERSION__ == 100\n        float a, b, c, d;\n\n        if (uFirst) {\n            a = texture2D(tInputLevel, position).r * 255.0;\n            b = texture2D(tInputLevel, position + vec2(k, 0.0)).r * 255.0;\n            c = texture2D(tInputLevel, position + vec2(0.0, k)).r * 255.0;\n            d = texture2D(tInputLevel, position + vec2(k, k)).r * 255.0;\n        } else {\n            a = unpackRGBToInt(texture2D(tPreviousLevel, position).rgb);\n            b = unpackRGBToInt(texture2D(tPreviousLevel, position + vec2(k, 0.0)).rgb);\n            c = unpackRGBToInt(texture2D(tPreviousLevel, position + vec2(0.0, k)).rgb);\n            d = unpackRGBToInt(texture2D(tPreviousLevel, position + vec2(k, k)).rgb);\n        }\n        gl_FragColor = vec4(packIntToRGB(a + b + c + d), 1.0);\n    #else\n        int a, b, c, d;\n\n        if (uFirst) {\n            a = int(texture2D(tInputLevel, position).r * 255.0);\n            b = int(texture2D(tInputLevel, position + vec2(k, 0.0)).r * 255.0);\n            c = int(texture2D(tInputLevel, position + vec2(0.0, k)).r * 255.0);\n            d = int(texture2D(tInputLevel, position + vec2(k, k)).r * 255.0);\n        } else {\n            a = texture2D(tPreviousLevel, position).r;\n            b = texture2D(tPreviousLevel, position + vec2(k, 0.0)).r;\n            c = texture2D(tPreviousLevel, position + vec2(0.0, k)).r;\n            d = texture2D(tPreviousLevel, position + vec2(k, k)).r;\n        }\n        gl_FragColor = ivec4(a + b + c + d);\n    #endif\n}\n",$pe={...MK,tInputLevel:ZW("texture","rgba","float","nearest"),tPreviousLevel:ZW("texture","rgba","float","nearest"),uSize:JW("f"),uTexSize:JW("f"),uFirst:JW("b")},ehe="histogram-pyramid";function the(e,t,n){if(e.namedComputeRenderables[ehe]){const r=e.namedComputeRenderables[ehe].values;Sp.update(r.tInputLevel,t),Sp.update(r.tPreviousLevel,n),e.namedComputeRenderables[ehe].update()}else e.namedComputeRenderables[ehe]=function(e,t,n){const r={...RK,tInputLevel:Sp.create(t),tPreviousLevel:Sp.create(n),uSize:Sp.create(0),uTexSize:Sp.create(0),uFirst:Sp.create(!0)},o={...$pe},i=jV("reduction",pK,Zpe,{},{0:"ivec4"}),a=CK(e,"triangles",i,o,r);return kK(a,r)}(e,t,n);return e.namedComputeRenderables[ehe]}function nhe(e,t){const n=Math.pow(2,t),r=`level${t}`,o=e.isWebGL2?ohe(r,e,"image-int32","alpha","int","nearest"):ohe(r,e,"image-uint8","rgba","ubyte","nearest");o.define(n,n);let i=function(e,t){const n=`${ehe}-${e}`;return t.namedFramebuffers[n]}(r,e);return i||(i=rhe(r,e),o.attachFramebuffer(i,0)),{texture:o,framebuffer:i}}function rhe(e,t){const n=`${ehe}-${e}`;return t.namedFramebuffers[n]||(t.namedFramebuffers[n]=t.resources.framebuffer()),t.namedFramebuffers[n]}function ohe(e,t,n,r,o,i){const a=`${ehe}-${e}`;return t.namedTextures[a]||(t.namedTextures[a]=t.resources.texture(n,r,o,i)),t.namedTextures[a]}function ihe(e,t,n,r){fw&&e.timer.mark("createHistogramPyramid");const{gl:o,state:i}=e,a=t.getWidth();if(a!==t.getHeight()||!Up(a))throw new Error("inputTexture must be of square power-of-two size");const s=Math.ceil(Math.log(a)/Math.log(2)),l=Math.pow(2,s),c=Math.pow(2,s),u=Math.pow(2,s-1),d=e.isWebGL2?ohe("pyramid",e,"image-int32","alpha","int","nearest"):ohe("pyramid",e,"image-uint8","rgba","ubyte","nearest");d.define(c,u);const A=rhe("pyramid",e);d.attachFramebuffer(A,0),i.viewport(0,0,c,u),Xq(o)?o.clearBufferiv(o.COLOR,0,[0,0,0,0]):o.clear(o.COLOR_BUFFER_BIT);const f=[];for(let m=0;m<s;++m)f.push(nhe(e,m));const p=the(e,t,f[0].texture);i.currentRenderItemId=-1,function(e){const{gl:t,state:n}=e;n.disable(t.CULL_FACE),n.disable(t.BLEND),n.disable(t.DEPTH_TEST),n.enable(t.SCISSOR_TEST),n.depthMask(!1),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0)}(e);let h=0;for(let m=0;m<s;m++){const e=s-1-m;f[e].framebuffer.bind();const t=Math.pow(2,e);Sp.update(p.values.uSize,Math.pow(2,m+1)/l),Sp.update(p.values.uTexSize,t),Sp.updateIfChanged(p.values.uFirst,0===m),m>0&&(Sp.update(p.values.tPreviousLevel,f[s-m].texture),p.update()),i.currentRenderItemId=-1,i.viewport(0,0,t,t),i.scissor(0,0,t,t),Xq(o)?o.clearBufferiv(o.COLOR,0,[0,0,0,0]):o.clear(o.COLOR_BUFFER_BIT),i.scissor(0,0,r[0],r[1]),p.render(),d.bind(0),o.copyTexSubImage2D(o.TEXTURE_2D,0,h,0,0,0,t,t),d.unbind(0),h+=t}o.finish(),fw&&e.timer.markEnd("createHistogramPyramid");const g=Math.max(1,function(e,t){fw&&e.timer.mark("getHistopyramidSum");const{gl:n,state:r,resources:o}=e,i=Wpe(e,t);e.state.currentRenderItemId=-1,e.namedFramebuffers[Xpe]||(e.namedFramebuffers[Xpe]=o.framebuffer());const a=e.namedFramebuffers[Xpe];return e.namedTextures[Xpe]||(e.namedTextures[Xpe]=Xq(n)?o.texture("image-int32","rgba","int","nearest"):o.texture("image-uint8","rgba","ubyte","nearest"),e.namedTextures[Xpe].define(1,1)),e.namedTextures[Xpe].attachFramebuffer(a,0),function(e){const{gl:t,state:n}=e;n.disable(t.CULL_FACE),n.disable(t.BLEND),n.disable(t.DEPTH_TEST),n.disable(t.SCISSOR_TEST),n.depthMask(!1),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0)}(e),r.viewport(0,0,1,1),i.render(),n.finish(),e.readPixels(0,0,1,1,Xq(n)?Jpe:Kpe),e.unbindFramebuffer(),fw&&e.timer.markEnd("getHistopyramidSum"),Xq(n)?Jpe[0]:eW(Kpe[0],Kpe[1],Kpe[2])}(e,f[0].texture));return{pyramidTex:d,count:g,height:Math.ceil(g/Math.pow(2,s)),levels:s,scale:n}}let ahe,she;function lhe(){if(void 0!==ahe)return ahe;ahe=gV(256,1,Uint8Array);const{array:e}=ahe;for(let t=0,n=Ope.length;t<n;++t)e[t]=Ope[t].length/3;return ahe}function che(){if(void 0!==she)return she;she=gV(4096,1,Uint8Array);const{array:e}=she;for(let t=0,n=Ope.length;t<n;++t)for(let r=0;r<16;++r)r<Ope[t].length?e[16*t+r]=Ope[t][r]:e[16*t+r]=255;return she}const uhe="\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\n#if __VERSION__ == 100\n    uniform sampler2D tActiveVoxelsPyramid;\n#else\n    precision highp isampler2D;\n    uniform isampler2D tActiveVoxelsPyramid;\n#endif\n\nuniform sampler2D tActiveVoxelsBase;\nuniform sampler2D tVolumeData;\nuniform sampler2D tTriIndices;\n\nuniform float uIsoValue;\nuniform float uLevels;\nuniform float uSize;\nuniform float uCount;\nuniform bool uInvert;\n\nuniform vec3 uGridDim;\nuniform vec3 uGridTexDim;\nuniform mat4 uGridTransform;\n\n// scale to volume data coord\nuniform vec2 uScale;\n\n#include common\n\n// cube corners (excluding origin)\nconst vec3 c1 = vec3(1., 0., 0.);\nconst vec3 c2 = vec3(1., 1., 0.);\nconst vec3 c3 = vec3(0., 1., 0.);\nconst vec3 c4 = vec3(0., 0., 1.);\nconst vec3 c5 = vec3(1., 0., 1.);\nconst vec3 c6 = vec3(1., 1., 1.);\nconst vec3 c7 = vec3(0., 1., 1.);\n\nvec3 index3dFrom2d(vec2 coord) {\n    vec2 gridTexPos = coord * uGridTexDim.xy;\n    vec2 columnRow = ivec2Div(gridTexPos, uGridDim.xy);\n    vec2 posXY = gridTexPos - columnRow * uGridDim.xy;\n    float posZ = columnRow.y * intDiv(uGridTexDim.x, uGridDim.x) + columnRow.x;\n    return vec3(posXY, posZ);\n}\n\nvec4 texture3dFrom2dNearest(sampler2D tex, vec3 pos, vec3 gridDim, vec2 texDim) {\n    float zSlice = floor(pos.z * gridDim.z + 0.5); // round to nearest z-slice\n    float column = intDiv(intMod(zSlice * gridDim.x, texDim.x), gridDim.x);\n    float row = intDiv(zSlice * gridDim.x, texDim.x);\n    vec2 coord = (vec2(column * gridDim.x, row * gridDim.y) + (pos.xy * gridDim.xy)) / (texDim / uScale);\n    return texture2D(tex, coord + 0.5 / (texDim / uScale));\n}\n\nvec4 voxel(vec3 pos) {\n    pos = min(max(vec3(0.0), pos), uGridDim - vec3(1.0));\n    return texture3dFrom2dNearest(tVolumeData, pos / uGridDim, uGridDim, uGridTexDim.xy);\n}\n\nvec4 voxelPadded(vec3 pos) {\n    pos = min(max(vec3(0.0), pos), uGridDim - vec3(vec2(2.0), 1.0)); // remove xy padding\n    return texture3dFrom2dNearest(tVolumeData, pos / uGridDim, uGridDim, uGridTexDim.xy);\n}\n\nint idot2(const in ivec2 a, const in ivec2 b) {\n    return a.x * b.x + a.y * b.y;\n}\n\nint idot4(const in ivec4 a, const in ivec4 b) {\n    return a.x * b.x + a.y * b.y + a.z * b.z + a.w * b.w;\n}\n\n#if __VERSION__ == 100\n    int pyramidVoxel(vec2 pos) {\n        return int(unpackRGBToInt(texture2D(tActiveVoxelsPyramid, pos / (vec2(1.0, 0.5) * uSize)).rgb));\n    }\n#else\n    int pyramidVoxel(vec2 pos) {\n        return texture2D(tActiveVoxelsPyramid, pos / (vec2(1.0, 0.5) * uSize)).r;\n    }\n#endif\n\nvec4 baseVoxel(vec2 pos) {\n    return texture2D(tActiveVoxelsBase, pos / uSize);\n}\n\nvec4 getGroup(const in vec3 p) {\n    vec3 gridDim = uGridDim - vec3(1.0, 1.0, 0.0); // remove xy padding\n    // note that we swap x and z because the texture is flipped around y\n    #if defined(dAxisOrder_012)\n        float group = p.z + p.y * gridDim.z + p.x * gridDim.z * gridDim.y; // 210\n    #elif defined(dAxisOrder_021)\n        float group = p.y + p.z * gridDim.y + p.x * gridDim.y * gridDim.z; // 120\n    #elif defined(dAxisOrder_102)\n        float group = p.z + p.x * gridDim.z + p.y * gridDim.z * gridDim.x; // 201\n    #elif defined(dAxisOrder_120)\n        float group = p.x + p.z * gridDim.x + p.y * gridDim.x * gridDim.z; // 021\n    #elif defined(dAxisOrder_201)\n        float group = p.y + p.x * gridDim.y + p.z * gridDim.y * gridDim.x; // 102\n    #elif defined(dAxisOrder_210)\n        float group = p.x + p.y * gridDim.x + p.z * gridDim.x * gridDim.y; // 012\n    #endif\n    return vec4(group > 16777215.5 ? vec3(1.0) : packIntToRGB(group), 1.0);\n}\n\nvoid main(void) {\n    // get 1D index\n    int vI = int(gl_FragCoord.x) + int(gl_FragCoord.y) * int(uSize);\n\n    // ignore 1D indices outside of the grid\n    if(vI >= int(uCount)) discard;\n\n    ivec2 offset = ivec2(int(uSize) - 2, 0);\n\n    int start = 0;\n    ivec4 starts = ivec4(0);\n    ivec4 ends = ivec4(0);\n    int diff = 2;\n    ivec4 m = ivec4(0);\n    ivec2 position = ivec2(0);\n    ivec4 vI4 = ivec4(vI);\n\n    ivec2 relativePosition = ivec2(0);\n    int end = 0;\n    ivec2 pos1 = ivec2(0);\n    ivec2 pos2 = ivec2(0);\n    ivec2 pos3 = ivec2(0);\n    ivec2 pos4 = ivec2(0);\n    ivec3 vI3 = ivec3(vI);\n    ivec3 mask = ivec3(0);\n\n    // traverse the different levels of the pyramid\n    for(int i = 1; i < 14; i++) {\n        if(float(i) >= uLevels) break;\n\n        offset.x -= diff;\n        diff *= 2;\n        relativePosition = position + offset;\n\n        end = start + pyramidVoxel(vec2(relativePosition));\n        pos1 = ivec2(relativePosition);\n        starts.x = start;\n        ends.x = end;\n        pos2 = ivec2(relativePosition + ivec2(1, 0));\n        starts.y = ends.x;\n        ends.y = ends.x + pyramidVoxel(vec2(pos2));\n        pos3 = relativePosition + ivec2(0, 1);\n        starts.z = ends.y;\n        ends.z = ends.y + pyramidVoxel(vec2(pos3));\n        pos4 = relativePosition + ivec2(1, 1);\n        starts.w = ends.z;\n        mask = ivec3(greaterThanEqual(vI3, starts.rgb)) * ivec3(lessThan(vI3, ends.rgb));\n        m = ivec4(mask, 1 - int(any(bvec3(mask))));\n\n        relativePosition = m.x * pos1 + m.y * pos2 + m.z * pos3 + m.w * pos4;\n        start = idot4(m, starts);\n        position = 2 * (relativePosition - offset);\n    }\n\n    end = start + int(baseVoxel(vec2(position)).r * 255.0);\n    pos1 = position;\n    starts.x = start;\n    ends.x = end;\n    pos2 = position + ivec2(1, 0);\n    starts.y = ends.x;\n    ends.y = ends.x + int(baseVoxel(vec2(pos2)).r * 255.0);\n    pos3 = position + ivec2(0, 1);\n    starts.z = ends.y;\n    ends.z = ends.y + int(baseVoxel(vec2(pos3)).r * 255.0);\n    pos4 = position + ivec2(1, 1);\n    starts.w = ends.z;\n    mask = ivec3(greaterThanEqual(vI3, starts.rgb)) * ivec3(lessThan(vI3, ends.rgb));\n    m = ivec4(mask, 1 - int(any(bvec3(mask))));\n    position = m.x * pos1 + m.y * pos2 + m.z * pos3 + m.w * pos4;\n\n    vec2 coord2d = (vec2(position) / uSize) / uScale;\n    vec3 coord3d = floor(index3dFrom2d(coord2d) + 0.5);\n\n    float edgeIndex = floor(baseVoxel(vec2(position)).a * 255.0 + 0.5);\n\n    // current vertex for the up to 15 MC cases\n    int currentVertex = vI - idot4(m, starts);\n\n    // ensure winding-order is the same for negative and positive iso-levels\n    if (uInvert) {\n        int v = imod(currentVertex + 1, 3);\n        if (v == 1) currentVertex += 2;\n        else if (v == 0) currentVertex -= 2;\n    }\n\n    // get index into triIndices table\n    int mcIndex = 16 * int(edgeIndex) + currentVertex;\n    vec4 mcData = texture2D(tTriIndices, vec2(imod(mcIndex, 64), mcIndex / 64) / 64.);\n\n    // bit mask to avoid conditionals (see comment below) for getting MC case corner\n    vec4 m0 = vec4(floor(mcData.a * 255.0 + 0.5));\n\n    // get edge value masks\n    vec4 m1 = vec4(equal(m0, vec4(0., 1., 2., 3.)));\n    vec4 m2 = vec4(equal(m0, vec4(4., 5., 6., 7.)));\n    vec4 m3 = vec4(equal(m0, vec4(8., 9., 10., 11.)));\n\n    // apply bit masks\n    vec3 b0 = coord3d +\n                m1.y * c1 +\n                m1.z * c2 +\n                m1.w * c3 +\n                m2.x * c4 +\n                m2.y * c5 +\n                m2.z * c6 +\n                m2.w * c7 +\n                m3.y * c1 +\n                m3.z * c2 +\n                m3.w * c3;\n    vec3 b1 = coord3d +\n                m1.x * c1 +\n                m1.y * c2 +\n                m1.z * c3 +\n                m2.x * c5 +\n                m2.y * c6 +\n                m2.z * c7 +\n                m2.w * c4 +\n                m3.x * c4 +\n                m3.y * c5 +\n                m3.z * c6 +\n                m3.w * c7;\n\n    // the conditionals that are avoided by above bitmasks\n    // vec3 b0 = coord3d;\n    // vec3 b1 = coord3d;\n    // if (mcIndex == 0.0) {\n    //     b1 += c1;\n    // } else if (mcIndex == 1.0) {\n    //     b0 += c1; b1 += c2;\n    // } else if (mcIndex == 2.0) {\n    //     b0 += c2; b1 += c3;\n    // } else if (mcIndex == 3.0) {\n    //     b0 += c3;\n    // } else if (mcIndex == 4.0) {\n    //     b0 += c4; b1 += c5;\n    // } else if (mcIndex == 5.0) {\n    //     b0 += c5; b1 += c6;\n    // } else if (mcIndex == 6.0) {\n    //     b0 += c6; b1 += c7;\n    // } else if (mcIndex == 7.0) {\n    //     b0 += c7; b1 += c4;\n    // } else if (mcIndex == 8.0) {\n    //     b1 += c4;\n    // } else if (mcIndex == 9.0) {\n    //     b0 += c1; b1 += c5;\n    // } else if (mcIndex == 10.0) {\n    //     b0 += c2; b1 += c6;\n    // } else if (mcIndex == 11.0) {\n    //     b0 += c3; b1 += c7;\n    // }\n    // b0 = floor(b0 + 0.5);\n    // b1 = floor(b1 + 0.5);\n\n    vec4 d0 = voxel(b0);\n    vec4 d1 = voxel(b1);\n\n    float v0 = d0.a;\n    float v1 = d1.a;\n\n    float t = (uIsoValue - v0) / (v0 - v1);\n    gl_FragData[0].xyz = (uGridTransform * vec4(b0 + t * (b0 - b1), 1.0)).xyz;\n\n    // group id\n    #if __VERSION__ == 100 || defined(dConstantGroup)\n        // webgl1 does not support 'flat' interpolation (i.e. no interpolation)\n        // ensure a constant group id per triangle as needed\n        #ifdef dPackedGroup\n            gl_FragData[1] = vec4(voxel(coord3d).rgb, 1.0);\n        #else\n            gl_FragData[1] = getGroup(coord3d);\n        #endif\n    #else\n        #ifdef dPackedGroup\n            gl_FragData[1] = vec4(t < 0.5 ? d0.rgb : d1.rgb, 1.0);\n        #else\n            gl_FragData[1] = getGroup(t < 0.5 ? b0 : b1);\n        #endif\n    #endif\n\n    // normals from gradients\n    vec3 n0 = -normalize(vec3(\n        voxelPadded(b0 - c1).a - voxelPadded(b0 + c1).a,\n        voxelPadded(b0 - c3).a - voxelPadded(b0 + c3).a,\n        voxelPadded(b0 - c4).a - voxelPadded(b0 + c4).a\n    ));\n    vec3 n1 = -normalize(vec3(\n        voxelPadded(b1 - c1).a - voxelPadded(b1 + c1).a,\n        voxelPadded(b1 - c3).a - voxelPadded(b1 + c3).a,\n        voxelPadded(b1 - c4).a - voxelPadded(b1 + c4).a\n    ));\n    gl_FragData[2].xyz = -vec3(\n        n0.x + t * (n0.x - n1.x),\n        n0.y + t * (n0.y - n1.y),\n        n0.z + t * (n0.z - n1.z)\n    );\n\n    // ensure normal-direction is the same for negative and positive iso-levels\n    if (uInvert) {\n        gl_FragData[2].xyz *= -1.0;\n    }\n\n    // apply normal matrix\n    gl_FragData[2].xyz *= transpose3(inverse3(mat3(uGridTransform)));\n}\n",dhe="\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nuniform sampler2D tTriCount;\nuniform sampler2D tVolumeData;\n\nuniform float uIsoValue;\nuniform vec3 uGridDim;\nuniform vec3 uGridTexDim;\nuniform vec2 uScale;\n\n#include common\n\n// cube corners (excluding origin)\nconst vec3 c1 = vec3(1., 0., 0.);\nconst vec3 c2 = vec3(1., 1., 0.);\nconst vec3 c3 = vec3(0., 1., 0.);\nconst vec3 c4 = vec3(0., 0., 1.);\nconst vec3 c5 = vec3(1., 0., 1.);\nconst vec3 c6 = vec3(1., 1., 1.);\nconst vec3 c7 = vec3(0., 1., 1.);\n\nvec3 index3dFrom2d(vec2 coord) {\n    vec2 gridTexPos = coord * uGridTexDim.xy;\n    vec2 columnRow = ivec2Div(gridTexPos, uGridDim.xy);\n    vec2 posXY = gridTexPos - columnRow * uGridDim.xy;\n    float posZ = columnRow.y * intDiv(uGridTexDim.x, uGridDim.x) + columnRow.x;\n    return vec3(posXY, posZ);\n}\n\nvec4 texture3dFrom2dNearest(sampler2D tex, vec3 pos, vec3 gridDim, vec2 texDim) {\n    float zSlice = floor(pos.z * gridDim.z + 0.5); // round to nearest z-slice\n    float column = intDiv(intMod(zSlice * gridDim.x, texDim.x), gridDim.x);\n    float row = intDiv(zSlice * gridDim.x, texDim.x);\n    vec2 coord = (vec2(column * gridDim.x, row * gridDim.y) + (pos.xy * gridDim.xy)) / (texDim / uScale);\n    return texture2D(tex, coord);\n}\n\nvec4 voxel(vec3 pos) {\n    pos = min(max(vec3(0.0), pos), uGridDim - vec3(1.0));\n    return texture3dFrom2dNearest(tVolumeData, pos / uGridDim, uGridDim, uGridTexDim.xy);\n}\n\nvoid main(void) {\n    vec2 uv = gl_FragCoord.xy / uGridTexDim.xy;\n    vec3 posXYZ = index3dFrom2d(uv);\n\n    // get MC case as the sum of corners that are below the given iso level\n    float c = step(voxel(posXYZ).a, uIsoValue)\n        + 2. * step(voxel(posXYZ + c1).a, uIsoValue)\n        + 4. * step(voxel(posXYZ + c2).a, uIsoValue)\n        + 8. * step(voxel(posXYZ + c3).a, uIsoValue)\n        + 16. * step(voxel(posXYZ + c4).a, uIsoValue)\n        + 32. * step(voxel(posXYZ + c5).a, uIsoValue)\n        + 64. * step(voxel(posXYZ + c6).a, uIsoValue)\n        + 128. * step(voxel(posXYZ + c7).a, uIsoValue);\n    c *= step(c, 254.);\n\n    // handle out of bounds positions\n    posXYZ += 1.0;\n    posXYZ.xy += 1.0; // pixel padding (usually ok even if the texture has no padding)\n    if (posXYZ.x >= uGridDim.x || posXYZ.y >= uGridDim.y || posXYZ.z >= uGridDim.z)\n        c = 0.0;\n\n    // get total triangles to generate for calculated MC case from triCount texture\n    float totalTrianglesToGenerate = texture2D(tTriCount, vec2(intMod(c, 16.), floor(c / 16.)) / 16.).a;\n    gl_FragColor = vec4(vec3(totalTrianglesToGenerate * 3.0), c / 255.0);\n}\n",Ahe={...MK,tTriCount:ZW("image-uint8","alpha","ubyte","nearest"),tVolumeData:ZW("texture","rgba","ubyte","nearest"),uIsoValue:JW("f"),uGridDim:JW("v3"),uGridTexDim:JW("v3"),uScale:JW("v2")},fhe="active-voxels";function phe(e,t,n,r,o,i){if(e.namedComputeRenderables[fhe]){const a=e.namedComputeRenderables[fhe].values;Sp.update(a.uQuadScale,i),Sp.update(a.tVolumeData,t),Sp.updateIfChanged(a.uIsoValue,o),Sp.update(a.uGridDim,n),Sp.update(a.uGridTexDim,r),Sp.update(a.uScale,i),e.namedComputeRenderables[fhe].update()}else e.namedComputeRenderables[fhe]=function(e,t,n,r,o,i){const a={...RK,tTriCount:Sp.create(lhe()),uQuadScale:Sp.create(i),tVolumeData:Sp.create(t),uIsoValue:Sp.create(o),uGridDim:Sp.create(n),uGridTexDim:Sp.create(r),uScale:Sp.create(i)},s={...Ahe},l=jV("active-voxels",pK,dhe),c=CK(e,"triangles",l,s,a);return kK(c,a)}(e,t,n,r,o,i);return e.namedComputeRenderables[fhe]}const hhe={...MK,tTriIndices:ZW("image-uint8","alpha","ubyte","nearest"),tActiveVoxelsPyramid:ZW("texture","rgba","float","nearest"),tActiveVoxelsBase:ZW("texture","rgba","float","nearest"),tVolumeData:ZW("texture","rgba","ubyte","nearest"),uIsoValue:JW("f"),uSize:JW("f"),uLevels:JW("f"),uCount:JW("f"),uInvert:JW("b"),uGridDim:JW("v3"),uGridTexDim:JW("v3"),uGridTransform:JW("m4"),uScale:JW("v2"),dPackedGroup:eK("boolean"),dAxisOrder:eK("string",["012","021","102","120","201","210"]),dConstantGroup:eK("boolean")},ghe="isosurface";function mhe(e,t,n,r,o,i,a,s,l,c,u,d,A,f,p){if(e.namedComputeRenderables[ghe]){const h=e.namedComputeRenderables[ghe].values;Sp.update(h.tActiveVoxelsPyramid,t),Sp.update(h.tActiveVoxelsBase,n),Sp.update(h.tVolumeData,r),Sp.updateIfChanged(h.uIsoValue,s),Sp.updateIfChanged(h.uSize,Math.pow(2,l)),Sp.updateIfChanged(h.uLevels,l),Sp.updateIfChanged(h.uCount,u),Sp.updateIfChanged(h.uInvert,d),Sp.update(h.uGridDim,o),Sp.update(h.uGridTexDim,i),Sp.update(h.uGridTransform,a),Sp.update(h.uScale,c),Sp.updateIfChanged(h.dPackedGroup,A),Sp.updateIfChanged(h.dAxisOrder,f.join("")),Sp.updateIfChanged(h.dConstantGroup,p),e.namedComputeRenderables[ghe].update()}else e.namedComputeRenderables[ghe]=function(e,t,n,r,o,i,a,s,l,c,u,d,A,f,p){const h={...RK,tTriIndices:Sp.create(che()),tActiveVoxelsPyramid:Sp.create(t),tActiveVoxelsBase:Sp.create(n),tVolumeData:Sp.create(r),uIsoValue:Sp.create(s),uSize:Sp.create(Math.pow(2,l)),uLevels:Sp.create(l),uCount:Sp.create(u),uInvert:Sp.create(d),uGridDim:Sp.create(o),uGridTexDim:Sp.create(i),uGridTransform:Sp.create(a),uScale:Sp.create(c),dPackedGroup:Sp.create(A),dAxisOrder:Sp.create(f.join("")),dConstantGroup:Sp.create(p)},g={...hhe},m=jV("isosurface",pK,uhe,{drawBuffers:"required"}),y=CK(e,"triangles",m,g,h);return kK(y,h)}(e,t,n,r,o,i,a,s,l,c,u,d,A,f,p);return e.namedComputeRenderables[ghe]}function yhe(e,t,n,r,o,i,a,s,l,c,u,d,A,f){fw&&e.timer.mark("extractIsosurface");const p=function(e,t,n,r,o,i){fw&&e.timer.mark("calcActiveVoxels");const{gl:a,state:s,resources:l}=e,c=t.getWidth(),u=t.getHeight();e.namedFramebuffers[fhe]||(e.namedFramebuffers[fhe]=l.framebuffer());const d=e.namedFramebuffers[fhe];d.bind(),e.namedTextures[fhe]||(e.namedTextures[fhe]=l.texture("image-uint8","rgba","ubyte","nearest"));const A=e.namedTextures[fhe];A.define(c,u);const f=phe(e,t,n,r,o,i);return e.state.currentRenderItemId=-1,A.attachFramebuffer(d,0),function(e){const{gl:t,state:n}=e;n.disable(t.CULL_FACE),n.disable(t.BLEND),n.disable(t.DEPTH_TEST),n.enable(t.SCISSOR_TEST),n.depthMask(!1),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0)}(e),s.viewport(0,0,c,u),s.scissor(0,0,c,u),a.clear(a.COLOR_BUFFER_BIT),s.scissor(0,0,r[0],r[1]),f.render(),a.finish(),fw&&e.timer.markEnd("calcActiveVoxels"),A}(e,t,n,r,a,o),h=function(e,t,n,r,o,i,a,s,l,c,u,d,A,f,p){const{drawBuffers:h}=e.extensions;if(!h)throw new Error("need WebGL draw buffers");fw&&e.timer.mark("createIsosurfaceBuffers");const{gl:g,state:m,resources:y,extensions:v}=e,{pyramidTex:b,height:C,levels:I,scale:E,count:x}=r,B=b.getWidth();e.namedFramebuffers[ghe]||(e.namedFramebuffers[ghe]=y.framebuffer());const w=e.namedFramebuffers[ghe];Xq(g)?(A||(A=y.texture("image-float32","rgba","float","nearest")),f||(f=y.texture("image-uint8","rgba","ubyte","nearest")),p||(p=v.colorBufferHalfFloat&&v.textureHalfFloat?y.texture("image-float16","rgba","fp16","nearest"):y.texture("image-float32","rgba","float","nearest"))):(A||(A=y.texture("image-float32","rgba","float","nearest")),f||(f=y.texture("image-float32","rgba","float","nearest")),p||(p=y.texture("image-float32","rgba","float","nearest"))),A.define(B,C),f.define(B,C),p.define(B,C),A.attachFramebuffer(w,0),f.attachFramebuffer(w,1),p.attachFramebuffer(w,2);const _=mhe(e,b,t,n,o,i,a,s,I,E,x,l,c,u,d);return e.state.currentRenderItemId=-1,w.bind(),h.drawBuffers([h.COLOR_ATTACHMENT0,h.COLOR_ATTACHMENT1,h.COLOR_ATTACHMENT2]),function(e){const{gl:t,state:n}=e;n.disable(t.CULL_FACE),n.disable(t.BLEND),n.disable(t.DEPTH_TEST),n.disable(t.SCISSOR_TEST),n.depthMask(!1),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0)}(e),m.viewport(0,0,B,C),g.clear(g.COLOR_BUFFER_BIT),_.render(),g.finish(),fw&&e.timer.markEnd("createIsosurfaceBuffers"),{vertexTexture:A,groupTexture:f,normalTexture:p,vertexCount:x}}(e,p,t,ihe(e,p,o,r),n,r,i,a,s,l,c,u,d,A,f);return fw&&e.timer.markEnd("extractIsosurface"),h}const vhe={isoValue:HW.IsoValueParam};const bhe=1;function Che(e,t){if(e.grid.cells.data.length<Math.pow(10,3))return!1;const n=e.grid.cells.space.dimensions,{powerOfTwoSize:r}=q5(n,bhe);return r<=t.maxTextureSize/2}function Ihe(e,t,n,r,o){return r.tryUseGpu&&o&&function(e){return e.extensions.colorBufferFloat&&e.extensions.textureFloat&&e.extensions.drawBuffers}(o)&&Che(t,o)?function(e){return Hpe({defaultProps:U_.getDefaultValues(_he),createGeometry:Dhe,createLocationIterator:e=>xT(e.grid.cells.data.length,1,1,(()=>IT)),getLoci:xhe,eachLocation:Bhe,setUpdateState:(e,t,n,r)=>{HW.IsoValue.areSame(n.isoValue,r.isoValue,t.grid.stats)||(e.createGeometry=!0)},geometryUtils:WW.Utils,mustRecreate:(e,t,n)=>!t.tryUseGpu||!n||!Che(e.volume,n),dispose:e=>{e.vertexTexture.ref.value.destroy(),e.groupTexture.ref.value.destroy(),e.normalTexture.ref.value.destroy(),e.doubleBuffer.destroy()}},e)}(e):function(e){return Hpe({defaultProps:U_.getDefaultValues(_he),createGeometry:whe,createLocationIterator:e=>xT(e.grid.cells.data.length,1,1,(()=>IT)),getLoci:xhe,eachLocation:Bhe,setUpdateState:(e,t,n,r)=>{HW.IsoValue.areSame(n.isoValue,r.isoValue,t.grid.stats)||(e.createGeometry=!0)},geometryUtils:RY.Utils,mustRecreate:(e,t,n)=>t.tryUseGpu&&!!n&&Che(e.volume,n)},e)}(e)}function Ehe(e,t){return HW.Isosurface.Loci(e,t.isoValue)}function xhe(e,t,n,r,o){const{objectId:i,groupId:a}=e;if(o===i){const e=HW.PickingGranularity.get(t);return"volume"===e?HW.Loci(t):"object"===e?HW.Isosurface.Loci(t,r.isoValue):HW.Cell.Loci(t,Gg.ofSingleton(a))}return S5}function Bhe(e,t,n,r,o){return V5(e,t,{isoValue:r.isoValue},o)}async function whe(e,t,n,r,o,i){e.runtime.update({message:"Marching cubes..."});const a=Z_(new Int32Array(t.grid.cells.data.length)),s=await Upe({isoLevel:HW.IsoValue.toAbsolute(o.isoValue,t.grid.stats).absoluteValue,scalarField:t.grid.cells,idField:tg.create(t.grid.cells.space,tg.Data1(a))},i).runAsChild(e.runtime),l=GW.getGridToCartesianTransform(t.grid);return RY.transform(s,l),e.webgl&&!e.webgl.isWebGL2?(RY.uniformTriangleGroup(s,!1),Sp.updateIfChanged(s.varyingGroup,!1)):Sp.updateIfChanged(s.varyingGroup,!0),s.setBoundingSphere(HW.Isosurface.getBoundingSphere(t,o.isoValue)),s}const _he={...RY.Params,...WW.Params,...vhe,quality:{...RY.Params.quality,isEssential:!1},tryUseGpu:U_.Boolean(!0)};var She;async function Dhe(e,t,n,r,o,i){if(!e.webgl)throw new Error("webgl context required to create volume isosurface texture-mesh");if(t.grid.cells.data.length<=1)return WW.createEmpty(i);const{max:a,min:s}=t.grid.stats,l=a-s,c=HW.IsoValue.toAbsolute(o.isoValue,t.grid.stats).absoluteValue,u=(c-s)/l,{texture:d,gridDimension:A,gridTexDim:f,gridTexScale:p,transform:h}=She.get(t,e.webgl),g=t.grid.cells.space.axisOrderSlowToFast,m=null===i||void 0===i?void 0:i.doubleBuffer.get(),y=yhe(e.webgl,d,A,f,p,h,u,c<0,!1,g,!0,null===m||void 0===m?void 0:m.vertex,null===m||void 0===m?void 0:m.group,null===m||void 0===m?void 0:m.normal),v=t.grid.cells.data.length,b=HW.getBoundingSphere(t),C=WW.create(y.vertexCount,v,y.vertexTexture,y.groupTexture,y.normalTexture,b,i);return C.meta.webgl=e.webgl,C}async function The(e,t,n,r,o,i){e.runtime.update({message:"Marching cubes..."});const a=Z_(new Int32Array(t.grid.cells.data.length)),s=await Gpe({isoLevel:HW.IsoValue.toAbsolute(o.isoValue,t.grid.stats).absoluteValue,scalarField:t.grid.cells,idField:tg.create(t.grid.cells.space,tg.Data1(a))},i).runAsChild(e.runtime),l=GW.getGridToCartesianTransform(t.grid);return wW.transform(s,l),s.setBoundingSphere(HW.Isosurface.getBoundingSphere(t,o.isoValue)),s}!function(e){const t="volume-isosurface-texture";e.descriptor=Jk({name:t}),e.get=function(n,r){const{resources:o}=r,i=GW.getGridToCartesianTransform(n.grid),a=qh.clone(n.grid.cells.space.dimensions),{width:s,height:l,powerOfTwoSize:c}=q5(a,bhe),u=qh.create(s,l,0),d=Wh.create(s/c,l/c);if(c>r.maxTextureSize/2)throw new Error("volume too large for gpu isosurface extraction");if(!n._propertyData[t]){n._propertyData[t]=o.texture("image-uint8","alpha","ubyte","linear");const r=n._propertyData[t];r.define(c,c),r.load(Y5(n,"data",bhe),!0),n.customProperties.add(e.descriptor),n.customProperties.assets(e.descriptor,[{dispose:()=>r.destroy()}])}return a[0]+=bhe,a[1]+=bhe,{texture:n._propertyData[t],transform:i,gridDimension:a,gridTexDim:u,gridTexScale:d}}}(She||(She={}));const khe={...wW.Params,...vhe,quality:{...wW.Params.quality,isEssential:!1},sizeFactor:U_.Numeric(3,{min:0,max:10,step:.1})};function Qhe(e){return Hpe({defaultProps:U_.getDefaultValues(khe),createGeometry:The,createLocationIterator:e=>xT(e.grid.cells.data.length,1,1,(()=>IT)),getLoci:xhe,eachLocation:Bhe,setUpdateState:(e,t,n,r)=>{HW.IsoValue.areSame(n.isoValue,r.isoValue,t.grid.stats)||(e.createGeometry=!0)},geometryUtils:wW.Utils},e)}const Mhe={solid:(e,t)=>Vpe("Isosurface mesh",e,t,Ihe,Ehe),wireframe:(e,t)=>Vpe("Isosurface wireframe",e,t,Qhe,Ehe)},Rhe={..._he,...khe,visuals:U_.MultiSelect(["solid"],U_.objectToOptions(Mhe)),bumpFrequency:U_.Numeric(1,{min:0,max:10,step:.1},Fk.ShadingCategory)};const Phe={name:"isosurface",label:"Isosurface",description:"Displays a triangulated isosurface of volumetric data.",factory:function(e,t){return b6.createMulti("Isosurface",e,t,b6.StateBuilder,Mhe)},getParams:function(e,t){const n=U_.clone(Rhe);return n.isoValue=HW.createIsoValueParam(HW.IsoValue.relative(2),t.grid.stats),n},defaultValues:U_.getDefaultValues(Rhe),defaultColorTheme:{name:"uniform"},defaultSizeTheme:{name:"uniform"},isApplicable:e=>!HW.isEmpty(e)&&!HW.Segmentation.get(e)};async function Ohe(e,t,n,r,o,i){const{dimension:{name:a},isoValue:s}=o,{space:l,data:c}=t.grid.cells,{min:u,max:d}=t.grid.stats,A=HW.IsoValue.toAbsolute(s,t.grid.stats).absoluteValue,f="color"in r.color?r.color.color(IT,!1):Jp(16777215),[p,h,g]=Jp.toRgbNormalized(f),{width:m,height:y,x:v,y:b,z:C,x0:I,y0:E,z0:x,nx:B,ny:w,nz:_}=Fhe(t.grid,o),S=new Float32Array("x"===a?[v,0,0,v,b,0,v,0,C,v,b,C]:"y"===a?[0,b,0,v,b,0,0,b,C,v,b,C]:[0,0,C,0,b,C,v,0,C,v,b,C]),D=new Uint8Array(m*y*4),T=function(e,t){const{space:n}=e.cells,{width:r,height:o,x0:i,y0:a,z0:s,nx:l,ny:c,nz:u}=Fhe(e,t),d=new Uint8Array(r*o*4);let A=0;for(let f=a;f<c;++f)for(let e=i;e<l;++e)for(let t=s;t<u;++t)$X(n.dataOffset(e,f,t),d,A),A+=4;return d}(t.grid,o);let k=0;for(let R=E;R<w;++R)for(let e=I;e<B;++e)for(let t=x;t<_;++t){const n=l.get(c,e,R,t),r=(n-u)/(d-u);D[k]=p*r*2*255,D[k+1]=h*r*2*255,D[k+2]=g*r*2*255,D[k+3]=n>=A?255:0,k+=4}const Q={width:m,height:y,array:D,flipY:!0},M={width:m,height:y,array:T,flipY:!0};return aV(GW.getGridToCartesianTransform(t.grid),S,0,4),jK.create(Q,S,M,i)}function Fhe(e,t){const{dimension:{name:n,params:r}}=t,{space:o}=e.cells;let i,a,s,l,c,u=0,d=0,A=0,[f,p,h]=o.dimensions;return"x"===n?(s=r,l=p-1,c=h-1,i=h,a=p,u=s,f=u+1):"y"===n?(s=f-1,l=r,c=h-1,i=h,a=f,d=l,p=d+1):(s=f-1,l=p-1,c=r,i=f,a=p,A=c,h=A+1),{width:i,height:a,x:s,y:l,z:c,x0:u,y0:d,z0:A,nx:f,ny:p,nz:h}}function Nhe(e,t){const n=function(e,t){const{space:n}=e.cells,{width:r,height:o,x0:i,y0:a,z0:s,nx:l,ny:c,nz:u}=Fhe(e,t),d=new Uint32Array(r*o);let A=0;for(let f=a;f<c;++f)for(let e=i;e<l;++e)for(let t=s;t<u;++t)d[A]=n.dataOffset(e,f,t),A+=1;return d}(e.grid,t);return HW.Cell.Loci(e,Em.ofUnsortedArray(n))}function Lhe(e,t,n,r,o){const{objectId:i,groupId:a}=e;if(o===i){const e=HW.PickingGranularity.get(t);return"volume"===e?HW.Loci(t):"object"===e?Nhe(t,r):HW.Cell.Loci(t,Gg.ofSingleton(a))}return S5}function Uhe(e,t,n,r,o){return V5(e,t,void 0,o)}const Ghe={...jK.Params,quality:{...jK.Params.quality,isEssential:!1},dimension:U_.MappedStatic("x",{x:U_.Numeric(0,{min:0,max:0,step:1}),y:U_.Numeric(0,{min:0,max:0,step:1}),z:U_.Numeric(0,{min:0,max:0,step:1})},{isEssential:!0}),isoValue:HW.IsoValueParam};function jhe(e){return Hpe({defaultProps:U_.getDefaultValues(Ghe),createGeometry:Ohe,createLocationIterator:e=>xT(e.grid.cells.data.length,1,1,(()=>IT)),getLoci:Lhe,eachLocation:Uhe,setUpdateState:(e,t,n,r,o,i)=>{e.createGeometry=n.dimension.name!==r.dimension.name||n.dimension.params!==r.dimension.params||!HW.IsoValue.areSame(n.isoValue,r.isoValue,t.grid.stats)||!d5.areEqual(o.color,i.color)},geometryUtils:{...jK.Utils,createRenderableState:e=>{const t=jK.Utils.createRenderableState(e);return zhe(t,e),t},updateRenderableState:zhe}},e)}function zhe(e,t){jK.Utils.updateRenderableState(e,t),e.opaque=!1,e.writeDepth=!0}const Hhe={name:"slice",label:"Slice",description:"Slice of volume rendered as image with interpolation.",factory:function(e,t){return Vpe("Slice",e,t,jhe,Nhe)},getParams:function(e,t){const n=U_.clone(Ghe),r=t.grid.cells.space.dimensions;return n.dimension=U_.MappedStatic("x",{x:U_.Numeric(0,{min:0,max:r[0]-1,step:1}),y:U_.Numeric(0,{min:0,max:r[1]-1,step:1}),z:U_.Numeric(0,{min:0,max:r[2]-1,step:1})},{isEssential:!0}),n.isoValue=HW.createIsoValueParam(HW.IsoValue.absolute(t.grid.stats.min),t.grid.stats),n},defaultValues:U_.getDefaultValues(Ghe),defaultColorTheme:{name:"uniform"},defaultSizeTheme:{name:"uniform"},isApplicable:e=>!HW.isEmpty(e)&&!HW.Segmentation.get(e)};function Vhe(e,t){const n=XT();return XT.add(n,e),XT.transform(n,n,t),n}function qhe(e){if("matrix"===e.transform.kind)return{unitToCartn:Yh.mul(Yh(),e.transform.matrix,Yh.fromScaling(Yh(),e.cells.space.dimensions)),cellDim:Yh.getScaling(qh(),e.transform.matrix)};const t=e.transform.fractionalBox,n=XT.size(qh(),t);return{unitToCartn:Yh.mul3(Yh(),e.transform.cell.fromFractional,Yh.fromTranslation(Yh(),t.min),Yh.fromScaling(Yh(),n)),cellDim:qh.div(qh(),e.transform.cell.size,e.cells.space.dimensions)}}function Yhe(e,t,n,r){const o=n.grid.cells.space.dimensions;if(Math.max(...o)>t.max3dTextureSize/2)throw new Error("volume too large for direct-volume rendering");const i=function(e){const{cells:{space:t,data:n},stats:{max:r,min:o}}=e.grid,[i,a,s]=t.dimensions,{dataOffset:l}=t,c=new Uint8Array(i*a*s*4),u={array:c,width:i,height:a,depth:s},d=r-o,A=qh(),f=qh(),p=i-1,h=a-1,g=s-1;let m=0;for(let y=0;y<s;++y)for(let e=0;e<a;++e)for(let t=0;t<i;++t){const r=l(t,e,y);L5(A,n[l(Math.max(0,t-1),e,y)],n[l(t,Math.max(0,e-1),y)],n[l(t,e,Math.max(0,y-1))]),L5(f,n[l(Math.min(p,t+1),e,y)],n[l(t,Math.min(h,e+1),y)],n[l(t,e,Math.min(g,y+1))]),U5(A,G5(A,A,f)),j5(A,z5(A,A,.5),.5),H5(z5(A,A,255),c,m),c[m+3]=Math.round((n[r]-o)/d*255),m+=4}return u}(n),a=GW.getGridToCartesianTransform(n.grid),s=Vhe(o,a),l=r?r.gridTexture.ref.value:t.resources.texture("volume-uint8","rgba","ubyte","linear");l.load(i);const{unitToCartn:c,cellDim:u}=qhe(n.grid),d=n.grid.cells.space.axisOrderSlowToFast;return YW.create(s,o,a,c,u,l,n.grid.stats,!1,d,r)}async function Xhe(e,t,n,r,o,i){const{runtime:a,webgl:s}=e;if(void 0===s)throw new Error("DirectVolumeVisual requires `webgl` in props");return s.isWebGL2?Yhe(0,s,t,i):function(e,t,n,r){const o=n.grid.cells.space.dimensions,{width:i,height:a}=q5(o);if(Math.max(i,a)>t.maxTextureSize/2)throw new Error("volume too large for direct-volume rendering");const s=Y5(n,"normals"),l=GW.getGridToCartesianTransform(n.grid),c=Vhe(o,l),u=r?r.gridTexture.ref.value:t.resources.texture("image-uint8","rgba","ubyte","linear");u.load(s);const{unitToCartn:d,cellDim:A}=qhe(n.grid),f=n.grid.cells.space.axisOrderSlowToFast;return YW.create(c,o,l,d,A,u,n.grid.stats,!1,f,r)}(0,s,t,i)}function Whe(e,t){return HW.Loci(e)}function Khe(e,t,n,r,o){const{objectId:i,groupId:a}=e;return o===i?HW.Cell.Loci(t,Gg.ofSingleton(a)):S5}function Jhe(e,t,n,r,o){return V5(e,t,void 0,o)}const Zhe={...YW.Params,quality:{...YW.Params.quality,isEssential:!1}};function $he(e){return Hpe({defaultProps:U_.getDefaultValues(Zhe),createGeometry:Xhe,createLocationIterator:e=>xT(e.grid.cells.data.length,1,1,(()=>IT)),getLoci:Khe,eachLocation:Jhe,setUpdateState:(e,t,n,r)=>{},geometryUtils:YW.Utils,dispose:e=>{e.gridTexture.ref.value.destroy()}},e)}const ege={name:"direct-volume",label:"Direct Volume",description:"Direct rendering of volumetric data.",factory:function(e,t){return Vpe("Direct Volume",e,t,$he,Whe)},getParams:function(e,t){const n=U_.clone(Zhe);return n.controlPoints.getVolume=()=>t,n},defaultValues:U_.getDefaultValues(Zhe),defaultColorTheme:{name:"volume-value"},defaultSizeTheme:{name:"uniform"},isApplicable:e=>!HW.isEmpty(e)&&!HW.Segmentation.get(e)},tge={segments:U_.Converted((e=>e.map((e=>`${e}`))),(e=>e.map((e=>parseInt(e)))),U_.MultiSelect(["0"],U_.arrayToOptions(["0"]),{isEssential:!0}))};const nge=1;function rge(e,t){if(e.grid.cells.data.length<Math.pow(10,3))return!1;const n=e.grid.cells.space.dimensions,{powerOfTwoSize:r}=q5(n,nge);return r<=t.maxTextureSize/2}const oge=Yh();function ige(e,t){const n=GW.getGridToCartesianTransform(e),r=Yh.fromTranslation(oge,t.min);return Yh.mul(Yh(),n,r)}function age(e,t,n,r,o){return r.tryUseGpu&&o&&function(e){return e.extensions.colorBufferFloat&&e.extensions.textureFloat&&e.extensions.drawBuffers}(o)&&rge(t,o)?function(e){return Hpe({defaultProps:U_.getDefaultValues(dge),createGeometry:pge,createLocationIterator:(e,t)=>{const n=HW.Segment.Location(e,t);return xT(e.grid.cells.data.length,1,1,(()=>n))},getLoci:lge,eachLocation:cge,setUpdateState:(e,t,n,r)=>{},geometryUtils:WW.Utils,mustRecreate:(e,t,n)=>!t.tryUseGpu||!n||!rge(e.volume,n),dispose:e=>{e.vertexTexture.ref.value.destroy(),e.groupTexture.ref.value.destroy(),e.normalTexture.ref.value.destroy(),e.doubleBuffer.destroy()}},e)}(e):function(e){return Hpe({defaultProps:U_.getDefaultValues(dge),createGeometry:uge,createLocationIterator:(e,t)=>{const n=HW.Segment.Location(e,t);return xT(e.grid.cells.data.length,1,1,(()=>n))},getLoci:lge,eachLocation:cge,setUpdateState:(e,t,n,r)=>{},geometryUtils:RY.Utils,mustRecreate:(e,t,n)=>t.tryUseGpu&&!!n&&rge(e.volume,n)},e)}(e)}function sge(e,t){return HW.Segment.Loci(e,t.segments)}function lge(e,t,n,r,o){const{objectId:i,groupId:a}=e;if(o===i){const e=HW.PickingGranularity.get(t);return"volume"===e?HW.Loci(t):"object"===e?HW.Segment.Loci(t,[n]):HW.Cell.Loci(t,Gg.ofSingleton(a))}return S5}function cge(e,t,n,r,o){return V5(e,t,{segments:Em.ofSingleton(n)},o)}async function uge(e,t,n,r,o,i){const a=HW.Segmentation.get(t);if(!a)throw new Error("missing volume segmentation");e.runtime.update({message:"Marching cubes..."});const s=XT.clone(a.bounds[n]);XT.expand(s,s,qh.create(2,2,2));const l=function(e,t,n){const r=n.data,o=n.space.dataOffset,i=XT.size(qh(),t),[a,s,l]=i,c=a-1,u=s-1,d=l-1,[A,f,p]=t.min,[h,g,m]=t.max,y=[...n.space.axisOrderSlowToFast],v=tg.Space(i,y,Uint8Array),b=tg.create(v,v.create()),C=b.data,I=v.set;for(let E=0;E<l;++E)for(let t=0;t<s;++t)for(let n=0;n<a;++n){const i=e.includes(r[o(n+A,t+f,E+p)])?255:0,a=e.includes(r[o(Math.min(c+h,n+1+A),t+f,E+p)])?255:0,s=e.includes(r[o(Math.max(0,n-1+A),t+f,E+p)])?255:0,l=e.includes(r[o(n+A,Math.min(u+g,t+1+f),E+p)])?255:0,y=e.includes(r[o(n+A,Math.max(0,t-1+f),E+p)])?255:0,v=e.includes(r[o(n+A,t+f,Math.min(d+m,E+1+p))])?255:0,b=e.includes(r[o(n+A,t+f,Math.max(0,E-1+p))])?255:0;I(C,n,t,E,Math.round((i+i+a+s+l+y+v+b)/8))}return b}(Array.from(a.segments.get(n).values()),s,t.grid.cells),c=Z_(new Int32Array(l.data.length)),u=await Upe({isoLevel:128,scalarField:l,idField:tg.create(l.space,tg.Data1(c))},i).runAsChild(e.runtime),d=ige(t.grid,s);return RY.transform(u,d),e.webgl&&!e.webgl.isWebGL2?(RY.uniformTriangleGroup(u,!1),Sp.updateIfChanged(u.varyingGroup,!1)):Sp.updateIfChanged(u.varyingGroup,!0),u.setBoundingSphere(HW.Segment.getBoundingSphere(t,[n])),u}const dge={...RY.Params,...WW.Params,...tge,quality:{...RY.Params.quality,isEssential:!1},tryUseGpu:U_.Boolean(!0)};const Age="segment-texture";function fge(e,t,n){const r=HW.Segmentation.get(e);if(!r)throw new Error("missing volume segmentation");const{resources:o}=n,i=XT.clone(r.bounds[t]);XT.expand(i,i,qh.create(2,2,2));const a=ige(e.grid,i),s=XT.size(qh(),i),{width:l,height:c,powerOfTwoSize:u}=q5(s,nge),d=qh.create(l,c,0),A=Wh.create(l/u,c/u);if(u>n.maxTextureSize/2)throw new Error("volume too large for gpu segment extraction");n.namedTextures[Age]||(n.namedTextures[Age]=o.texture("image-uint8","alpha","ubyte","linear"));const f=n.namedTextures[Age];f.define(u,u);const p=Array.from(r.segments.get(t).values());return f.load(function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=e.grid.cells.data,i=XT.size(qh(),n),a=e.grid.cells.space.dataOffset,{width:s,height:l}=q5(i,r),c=new Uint8Array(s*l*1),u={array:c,width:s,height:l},[d,A,f]=i,p=d-1,h=A-1,g=f-1,m=d+r,y=A+r,[v,b,C]=n.min,[I,E,x]=n.max;for(let B=0;B<f;++B)for(let e=0;e<A;++e)for(let n=0;n<d;++n){const r=Math.floor(B*m%s/m),i=1*(Math.floor(B*m/s)*y*s+e*s+(r*m+n)),l=t.includes(o[a(n+v,e+b,B+C)])?255:0,u=t.includes(o[a(Math.min(p+I,n+1+v),e+b,B+C)])?255:0,d=t.includes(o[a(Math.max(0,n-1+v),e+b,B+C)])?255:0,A=t.includes(o[a(n+v,Math.min(h+E,e+1+b),B+C)])?255:0,f=t.includes(o[a(n+v,Math.max(0,e-1+b),B+C)])?255:0,w=t.includes(o[a(n+v,e+b,Math.min(g+x,B+1+C))])?255:0,_=t.includes(o[a(n+v,e+b,Math.max(0,B-1+C))])?255:0;c[i]=Math.round((l+l+u+d+A+f+w+_)/8)}return u}(e,p,i,nge),!0),s[0]+=nge,s[1]+=nge,{texture:f,transform:a,gridDimension:s,gridTexDim:d,gridTexScale:A}}async function pge(e,t,n,r,o,i){if(!e.webgl)throw new Error("webgl context required to create volume segment texture-mesh");if(t.grid.cells.data.length<=1)return WW.createEmpty(i);const{texture:a,gridDimension:s,gridTexDim:l,gridTexScale:c,transform:u}=fge(t,n,e.webgl),d=t.grid.cells.space.axisOrderSlowToFast,A=null===i||void 0===i?void 0:i.doubleBuffer.get(),f=yhe(e.webgl,a,s,l,c,u,.5,!1,!1,d,!0,null===A||void 0===A?void 0:A.vertex,null===A||void 0===A?void 0:A.group,null===A||void 0===A?void 0:A.normal),p=t.grid.cells.data.length;return WW.create(f.vertexCount,p,f.vertexTexture,f.groupTexture,f.normalTexture,HW.Segment.getBoundingSphere(t,[n]),i)}function hge(e){return Em.ofUnsortedArray(e.segments)}const gge={segment:(e,t)=>Vpe("Segment mesh",e,t,age,sge,hge)},mge={...dge,visuals:U_.MultiSelect(["segment"],U_.objectToOptions(gge)),bumpFrequency:U_.Numeric(1,{min:0,max:10,step:.1},Fk.ShadingCategory)};const yge={name:"segment",label:"Segment",description:"Displays a triangulated segment of volumetric data.",factory:function(e,t){return b6.createMulti("Segment",e,t,b6.StateBuilder,gge)},getParams:function(e,t){const n=U_.clone(mge),r=HW.Segmentation.get(t);if(r){const e=Array.from(r.segments.keys());n.segments=U_.Converted((e=>e.map((e=>`${e}`))),(e=>e.map((e=>parseInt(e)))),U_.MultiSelect(e.map((e=>`${e}`)),U_.arrayToOptions(e.map((e=>`${e}`))),{isEssential:!0}))}return n},defaultValues:U_.getDefaultValues(mge),defaultColorTheme:{name:"volume-segment"},defaultSizeTheme:{name:"uniform"},isApplicable:e=>!HW.isEmpty(e)&&!!HW.Segmentation.get(e)};class vge extends v6{constructor(){super(),tw(vge.BuiltIn,((e,t)=>{if(e.name!==t)throw new Error(`Fix BuiltInVolumeRepresentations to have matching names. ${e.name} ${t}`);this.add(e)}))}}function bge(e,t,n,r){e.push({source:"em"===t?{name:"em",params:{isoValue:HW.IsoValue.absolute(r||0)}}:{name:"x-ray",params:{}},dataId:n})}!function(e){e.BuiltIn={isosurface:Phe,slice:Hhe,"direct-volume":ege,segment:yge}}(vge||(vge={}));G_.build({display:{name:"Volume Streaming"},from:Jz.Molecule.Structure,params(e,t){const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-ray";if(!e)return t;const n=e.models[0];return iL.is(n.sourceData)?Wj.hasEmMap(n)?"em":Wj.hasXrayMap(n)?"x-ray":Wj.isFromEm(n)?"em":Wj.isFromXray(n)?"x-ray":t:t}(e&&e.data),r=wpe(n,e&&e.data);return{method:U_.Select(n,[["em","EM"],["x-ray","X-Ray"]]),entries:U_.ObjectList({id:U_.Text(r[0]||"")},(e=>{let{id:t}=e;return t}),{defaultValue:r.map((e=>({id:e})))}),defaultView:U_.Select("em"===n?"auto":"selection-box",kfe.ViewTypeOptions),options:U_.Group({serverUrl:U_.Text(t.config.get(Bee.VolumeStreaming.DefaultServer)||"https://ds.litemol.org"),behaviorRef:U_.Text("",{isHidden:!0}),emContourProvider:U_.Select("emdb",[["emdb","EMDB"],["pdbe","PDBe"]],{isHidden:!0}),channelParams:U_.Value({},{isHidden:!0})})}},isApplicable:(e,t,n)=>{const r=n.config.get(Bee.VolumeStreaming.CanStream);return r?r(e.data,n):1===e.data.models.length&&Wj.probablyHasDensityMap(e.data.models[0])}})(((e,t)=>{let{ref:n,state:r,params:o}=e;return Tw.create("Volume Streaming",(async e=>{const i=[];for(let n=0,r=o.entries.length;n<r;++n){const r=o.entries[n].id.toLowerCase();let a;if("em"===o.method){if(!r.toUpperCase().startsWith("EMD")){await e.update("Getting EMDB info...");const n=await Dpe(t,e,r);for(let r=0,a=n.length;r<a;++r){const a=n[r];let s;try{s=await _pe(o.options.emContourProvider,t,e,a)}catch(l0e){console.info(`Could not get map info for ${a}: ${l0e}`);continue}bge(i,o.method,a,s||0)}continue}try{a=await _pe(o.options.emContourProvider,t,e,r)}catch(l0e){console.info(`Could not get map info for ${r}: ${l0e}`);continue}}bge(i,o.method,r,a||0)}const a=r.build().to(n).applyOrUpdateTagged(kfe.RootTag,Ige,{serverUrl:o.options.serverUrl,entries:i});await a.commit();const s=a.selector;if(!s.isOk)return;const l=r.tree.children.get(s.ref);(null===l||void 0===l?void 0:l.size)>0&&await t.managers.structure.hierarchy.remove(null===l||void 0===l?void 0:l.toArray());const c=s.cell.obj,u=r.build().to(a.ref).apply(Ege,U_.getDefaultValues(kfe.createParams({data:c.data,defaultView:o.defaultView,channelParams:o.options.channelParams})),{ref:o.options.behaviorRef?o.options.behaviorRef:void 0});"em"===o.method?u.apply(xge,{channel:"em"},{state:{isGhost:!0},tags:"em"}):(u.apply(xge,{channel:"2fo-fc"},{state:{isGhost:!0},tags:"2fo-fc"}),u.apply(xge,{channel:"fo-fc(+ve)"},{state:{isGhost:!0},tags:"fo-fc(+ve)"}),u.apply(xge,{channel:"fo-fc(-ve)"},{state:{isGhost:!0},tags:"fo-fc(-ve)"})),await r.updateTree(u).runInContext(e)}))})),G_.build({display:{name:"Boxify Volume Streaming",description:"Make the current box permanent."},from:kfe,isApplicable:e=>"selection-box"===e.data.params.entry.params.view.name})(((e,t)=>{let{a:n,ref:r,state:o}=e;const i=n.data.params;if("selection-box"!==i.entry.params.view.name)return;const a=XT.create(qh.clone(i.entry.params.view.params.bottomLeft),qh.clone(i.entry.params.view.params.topRight)),s=i.entry.params.view.params.radius;XT.expand(a,a,qh.create(s,s,s));const l={...i,entry:{name:i.entry.name,params:{...i.entry.params,view:{name:"box",params:{bottomLeft:a.min,topRight:a.max}}}}};return o.updateTree(o.build().to(r).update(l))}));const Cge={dataId:U_.Text(""),source:U_.MappedStatic("x-ray",{em:U_.Group({isoValue:HW.createIsoValueParam(HW.IsoValue.relative(1))}),"x-ray":U_.Group({})})},Ige=Zz.BuiltIn({name:"create-volume-streaming-info",display:{name:"Volume Streaming Info"},from:Jz.Molecule.Structure,to:xpe,params:e=>({serverUrl:U_.Text("https://ds.litemol.org"),entries:U_.ObjectList(Cge,(e=>{let{dataId:t}=e;return t}),{defaultValue:[{dataId:"",source:{name:"x-ray",params:{}}}]})})})({apply:(e,t)=>{let{a:n,params:r}=e;return Tw.create("",(async e=>{const o=[];for(let n=0,a=r.entries.length;n<a;++n){const i=r.entries[n],a=i.dataId,s="em"===i.source.name?i.source.params.isoValue:HW.IsoValue.relative(1);await e.update("Getting server header...");const l=await t.fetch({url:cie(r.serverUrl,`${i.source.name}/${a.toLocaleLowerCase()}`),type:"json"}).runInContext(e);o.push({dataId:a,kind:i.source.name,header:l,emDefaultContourLevel:s})}const i={serverUrl:r.serverUrl,entries:o,structure:n.data};return new xpe(i,{label:"Volume Server",description:`${o.map((e=>e.dataId)).join(", ")}`})}))}}),Ege=Zz.BuiltIn({name:"create-volume-streaming-behavior",display:{name:"Volume Streaming Behavior"},from:xpe,to:kfe,params:e=>kfe.createParams({data:e&&e.data})})({canAutoUpdate:e=>{let{oldParams:t,newParams:n}=e;return t.entry.params.view===n.entry.params.view||"selection-box"===n.entry.params.view.name||"camera-target"===n.entry.params.view.name||"off"===n.entry.params.view.name},apply:(e,t)=>{let{a:n,params:r}=e;return Tw.create("Volume streaming",(async e=>{const o=new kfe.Behavior(t,n.data);return await o.update(r),new kfe(o,{label:"Volume Streaming",description:o.getDescription()})}))},update(e){let{a:t,b:n,oldParams:r,newParams:o}=e;return Tw.create("Update Volume Streaming",(async e=>{if(r.entry.name!==o.entry.name&&"em"in o.entry.params.channels){const{emDefaultContourLevel:e}=n.data.infoMap.get(o.entry.name);e&&(o.entry.params.channels.em.isoValue=e)}const t=await n.data.update(o)?j_.UpdateResult.Updated:j_.UpdateResult.Unchanged;return n.description=n.data.getDescription(),t}))}}),xge=Zz.BuiltIn({name:"create-volume-streaming-visual",display:{name:"Volume Streaming Visual"},from:kfe,to:Jz.Volume.Representation3D,params:{channel:U_.Select("em",kfe.ChannelTypeOptions,{isHidden:!0})}})({apply:(e,t)=>{let{a:n,params:r,spine:o}=e;return Tw.create("Volume Representation",(async e=>{var i,a;const s=n.data.channels[r.channel];if(!s)return MC.Null;const l=Bge(n.data,r.channel),c=vge.BuiltIn.isosurface,u=l.type.params||{},d=c.factory({webgl:null===(i=t.canvas3d)||void 0===i?void 0:i.webgl,...t.representation.volume.themes},c.getParams);d.setTheme(v5.create(t.representation.volume.themes,{volume:s.data},l));const A=null===(a=o.getAncestorOfType(Jz.Molecule.Structure))||void 0===a?void 0:a.data,f=0===(null===A||void 0===A?void 0:A.models.length)?void 0:HN.get(null===A||void 0===A?void 0:A.models[0]);return await d.createOrUpdate(u,s.data).runInContext(e),f&&d.setState({transform:f}),new Jz.Volume.Representation3D({repr:d,sourceData:s.data},{label:`${Math.round(100*s.isoValue.relativeValue)/100} \u03c3 [${r.channel}]`})}))},update:(e,t)=>{let{a:n,b:r,newParams:o,spine:i}=e;return Tw.create("Volume Representation",(async e=>{const i=n.data.channels[o.channel];if(!i)return j_.UpdateResult.Unchanged;const a=r.data.repr.state.visible,s=Bge(n.data,o.channel),l={...r.data.repr.props,...s.type.params};return r.data.repr.setTheme(v5.create(t.representation.volume.themes,{volume:i.data},s)),await r.data.repr.createOrUpdate(l,i.data).runInContext(e),r.data.repr.setState({visible:a}),r.data.sourceData=i.data,j_.UpdateResult.Updated}))}});function Bge(e,t){const n=e.channels[t];return g7.getDefaultParamsStatic(e.plugin,"isosurface",{isoValue:n.isoValue,alpha:n.opacity,visuals:n.wireframe?["wireframe"]:["solid"]},"uniform",{value:n.color})}U_.Color(Jp(1184274));var wge,_ge;function Sge(e,t){if(Math.abs(e)>Math.abs(t)){const n=t/e;return Math.abs(e)*Math.sqrt(1+n*n)}if(0!==t){const n=e/t;return Math.abs(t)*Math.sqrt(1+n*n)}return 0}!function(e){e.createCache=function(e){return{size:e,matrix:LT.create(e,e),eigenValues:new Float64Array(e),D:new Float64Array(e),E:new Float64Array(e)}},e.compute=function(e){!function(e,t,n,r,o){for(let a=0;a<e;a++)o[a]=0;const i=e-1;for(let a=0;a<e;a++)r[a]=t[a*e+i];(function(e,t,n,r){for(let o=r-1;o>0;o--){let i=0,a=0;for(let e=0;e<o;e++)i+=Math.abs(t[e]);if(0===i){n[o]=t[o-1];for(let n=0;n<o;n++)t[n]=e[n*r+o-1],e[n*r+o]=0,e[o*r+n]=0}else{for(let e=0;e<o;e++)t[e]/=i,a+=t[e]*t[e];let s=t[o-1],l=Math.sqrt(a);s>0&&(l=-l),n[o]=i*l,a-=s*l,t[o-1]=s-l;for(let e=0;e<o;e++)n[e]=0;for(let i=0;i<o;i++){s=t[i],e[o*r+i]=s,l=n[i]+e[i*r+i]*s;for(let a=i+1;a<=o-1;a++)l+=e[i*r+a]*t[a],n[a]+=e[i*r+a]*s;n[i]=l}s=0;for(let e=0;e<o;e++)n[e]/=a,s+=n[e]*t[e];const c=s/(a+a);for(let e=0;e<o;e++)n[e]-=c*t[e];for(let i=0;i<o;i++){s=t[i],l=n[i];for(let a=i;a<=o-1;a++)e[i*r+a]-=s*n[a]+l*t[a];t[i]=e[i*r+o-1],e[i*r+o]=0}}t[o]=a}for(let o=0;o<r-1;o++){e[o*r+r-1]=e[o*r+o],e[o*r+o]=1;const n=t[o+1];if(0!==n){for(let i=0;i<=o;i++)t[i]=e[(o+1)*r+i]/n;for(let n=0;n<=o;n++){let i=0;for(let t=0;t<=o;t++)i+=e[(o+1)*r+t]*e[n*r+t];for(let a=0;a<=o;a++)e[n*r+a]-=i*t[a]}}for(let t=0;t<=o;t++)e[(o+1)*r+t]=0}for(let o=0;o<r;o++)t[o]=e[o*r+r-1],e[o*r+r-1]=0;e[r*r-1]=1,n[0]=0})(t,r,o,e),function(e,t,n,r){const o=1e3;for(let l=1;l<r;l++)n[l-1]=n[l];n[r-1]=0;let i=0,a=0;const s=Math.pow(2,-53);for(let l=0;l<r;l++){a=Math.max(a,Math.abs(t[l])+Math.abs(n[l]));let c=l;for(;c<r&&!(Math.abs(n[c])<=s*a);)c++;if(c>l){let u=0;do{u+=1;let a=t[l],s=(t[l+1]-a)/(2*n[l]),d=Sge(s,1);s<0&&(d=-d),t[l]=n[l]/(s+d),t[l+1]=n[l]*(s+d);const A=t[l+1];let f=a-t[l];for(let e=l+2;e<r;e++)t[e]-=f;i+=f,s=t[c];let p=1,h=p,g=p;const m=n[l+1];let y=0,v=0;for(let o=c-1;o>=l;o--){g=h,h=p,v=y,a=p*n[o],f=p*s,d=Sge(s,n[o]),n[o+1]=y*d,y=n[o]/d,p=s/d,s=p*t[o]-y*a,t[o+1]=f+y*(p*a+y*t[o]);for(let t=0;t<r;t++)f=e[(o+1)*r+t],e[(o+1)*r+t]=y*e[o*r+t]+p*f,e[o*r+t]=p*e[o*r+t]-y*f}if(s=-y*v*g*m*n[l]/A,n[l]=y*s,t[l]=p*s,u>=o)throw new Error("SVD: Not converging.")}while(Math.abs(n[l])>s*a)}t[l]=t[l]+i,n[l]=0}for(let l=0;l<r-1;l++){let n=l,o=t[l];for(let e=l+1;e<r;e++)t[e]<o&&(n=e,o=t[e]);if(n!==l){t[n]=t[l],t[l]=o;for(let t=0;t<r;t++)o=e[l*r+t],e[l*r+t]=e[n*r+t],e[n*r+t]=o}}}(t,r,o,e);for(let a=0;a<e;a++)n[a]=r[a]}(e.size,e.matrix.data,e.eigenValues,e.D,e.E)}}(wge||(wge={})),function(e){let t;!function(e){e.empty=function(e){return{x:new Float64Array(e),y:new Float64Array(e),z:new Float64Array(e)}}}(t=e.Positions||(e.Positions={})),e.compute=function(e,t){return"undefined"===typeof t&&(t={bTransform:Yh.zero(),rmsd:0}),function(e){const t=function(e){const t=e.evdCache.matrix;LT.makeZero(t);const n=e.a.x,r=e.a.y,o=e.a.z,i=e.b.x,a=e.b.y,s=e.b.z,l=e.centerA,c=e.centerB;let u=0;const d=Math.min(e.a.x.length,e.b.x.length);for(let A=0;A<d;A++){const e=n[A]-l[0],d=r[A]-l[1],f=o[A]-l[2],p=i[A]-c[0],h=a[A]-c[1],g=s[A]-c[2];u+=e*e+d*d+f*f+p*p+h*h+g*g,LT.add(t,0,0,e*p+d*h+f*g),LT.add(t,0,1,-f*h+d*g),LT.add(t,0,2,f*p-e*g),LT.add(t,0,3,-d*p+e*h),LT.add(t,1,0,-f*h+d*g),LT.add(t,1,1,e*p-d*h-f*g),LT.add(t,1,2,d*p+e*h),LT.add(t,1,3,f*p+e*g),LT.add(t,2,0,f*p-e*g),LT.add(t,2,1,d*p+e*h),LT.add(t,2,2,-e*p+d*h-f*g),LT.add(t,2,3,f*h+d*g),LT.add(t,3,0,-d*p+e*h),LT.add(t,3,1,f*p+e*g),LT.add(t,3,2,f*h+d*g),LT.add(t,3,3,-e*p-d*h+f*g)}return u}(e);wge.compute(e.evdCache);let n=t-2*e.evdCache.eigenValues[3];n=n<0?0:Math.sqrt(n/e.a.x.length),function(e){const t=e.evdCache.matrix,n=LT.get(t,1,3),r=LT.get(t,2,3),o=LT.get(t,3,3),i=LT.get(t,0,3),a=2*r*r,s=2*o*o,l=2*n*n,c=2*n*r,u=2*i*o,d=2*n*o,A=2*i*r,f=2*r*o,p=2*i*n;let h=e.translateB;Yh.setValue(h,0,3,-e.centerB[0]),Yh.setValue(h,1,3,-e.centerB[1]),Yh.setValue(h,2,3,-e.centerB[2]),h=e.rotateB,Yh.setValue(h,0,0,1-a-s),Yh.setValue(h,0,1,c+u),Yh.setValue(h,0,2,d-A),Yh.setValue(h,1,0,c-u),Yh.setValue(h,1,1,1-l-s),Yh.setValue(h,1,2,f+p),Yh.setValue(h,2,0,d+A),Yh.setValue(h,2,1,f-p),Yh.setValue(h,2,2,1-l-a),Yh.setValue(h,3,3,1),Yh.mul(e.tempMatrix,e.rotateB,e.translateB),h=e.translateB,Yh.setValue(h,0,3,e.centerA[0]),Yh.setValue(h,1,3,e.centerA[1]),Yh.setValue(h,2,3,e.centerA[2]),Yh.mul(e.result.bTransform,e.translateB,e.tempMatrix)}(e),e.result.rmsd=n}(new Dge(e,t)),t}}(_ge||(_ge={}));class Dge{constructor(e,t){this.evdCache=wge.createCache(4),this.translateB=Yh.identity(),this.rotateB=Yh.identity(),this.tempMatrix=Yh.identity(),this.a=e.a,this.b=e.b,e.centerA?this.centerA=e.centerA:this.centerA=e.centerA=KM.fromArrays(e.a,YT()).center,e.centerB?this.centerB=e.centerB:this.centerB=e.centerB=KM.fromArrays(e.b,YT()).center,this.result=t}}const Tge=[[4,0,-2,-1,-2,0,-2,-1,-1,-1,-1,-2,-1,-1,-1,1,0,0,-3,-2],[0,9,-3,-4,-2,-3,-3,-1,-3,-1,-1,-3,-3,-3,-3,-1,-1,-1,-2,-2],[-2,-3,6,2,-3,-1,-1,-3,-1,-4,-3,1,-1,0,-2,0,-1,-3,-4,-3],[-1,-4,2,5,-3,-2,0,-3,1,-3,-2,0,-1,2,0,0,-1,-2,-3,-2],[-2,-2,-3,-3,6,-3,-1,0,-3,0,0,-3,-4,-3,-3,-2,-2,-1,1,3],[0,-3,-1,-2,-3,6,-2,-4,-2,-4,-3,0,-2,-2,-2,0,-2,-3,-2,-3],[-2,-3,-1,0,-1,-2,8,-3,-1,-3,-2,1,-2,0,0,-1,-2,-3,-2,2],[-1,-1,-3,-3,0,-4,-3,4,-3,2,1,-3,-3,-3,-3,-2,-1,3,-3,-1],[-1,-3,-1,1,-3,-2,-1,-3,5,-2,-1,0,-1,1,2,0,-1,-2,-3,-2],[-1,-1,-4,-3,0,-4,-3,2,-2,4,2,-3,-3,-2,-2,-2,-1,1,-2,-1],[-1,-1,-3,-2,0,-3,-2,1,-1,2,5,-2,-2,0,-1,-1,-1,1,-1,-1],[-2,-3,1,0,-3,0,1,-3,0,-3,-2,6,-2,0,0,1,0,-3,-4,-2],[-1,-3,-1,-1,-4,-2,-2,-3,-1,-3,-2,-2,7,-1,-2,-1,-1,-2,-4,-3],[-1,-3,0,2,-3,-2,0,-3,1,-2,0,0,-1,5,1,0,-1,-2,-2,-1],[-1,-3,-2,0,-3,-2,0,-3,2,-2,-1,0,-2,1,5,-1,-1,-3,-3,-2],[1,-1,0,0,-2,0,-1,-2,0,-2,-1,1,-1,0,-1,4,1,-2,-3,-2],[0,-1,-1,-1,-2,-2,-2,-1,-1,-1,-1,0,-1,-1,-1,1,5,0,-2,-2],[0,-1,-3,-2,-1,-3,-3,3,-2,1,1,-3,-2,-2,-3,-2,0,4,-3,-1],[-3,-2,-4,-3,1,-2,-2,-3,-3,-2,-1,-4,-4,-2,-3,-3,-2,-3,11,2],[-2,-2,-3,-2,3,-3,2,-1,-2,-1,-1,-2,-3,-1,-2,-2,-2,-1,2,7]];function kge(e,t){let n,r=0;const o={};return t.forEach((t=>{n=0;const i={};t.forEach((t=>i[e[n++]]=t)),o[e[r++]]=i})),o}const Qge={blosum62:kge("ARNDCQEGHILKMFPSTWYVBZX",[[4,-1,-2,-2,0,-1,-1,0,-2,-1,-1,-1,-1,-2,-1,1,0,-3,-2,0,-2,-1,0],[-1,5,0,-2,-3,1,0,-2,0,-3,-2,2,-1,-3,-2,-1,-1,-3,-2,-3,-1,0,-1],[-2,0,6,1,-3,0,0,0,1,-3,-3,0,-2,-3,-2,1,0,-4,-2,-3,3,0,-1],[-2,-2,1,6,-3,0,2,-1,-1,-3,-4,-1,-3,-3,-1,0,-1,-4,-3,-3,4,1,-1],[0,-3,-3,-3,9,-3,-4,-3,-3,-1,-1,-3,-1,-2,-3,-1,-1,-2,-2,-1,-3,-3,-2],[-1,1,0,0,-3,5,2,-2,0,-3,-2,1,0,-3,-1,0,-1,-2,-1,-2,0,3,-1],[-1,0,0,2,-4,2,5,-2,0,-3,-3,1,-2,-3,-1,0,-1,-3,-2,-2,1,4,-1],[0,-2,0,-1,-3,-2,-2,6,-2,-4,-4,-2,-3,-3,-2,0,-2,-2,-3,-3,-1,-2,-1],[-2,0,1,-1,-3,0,0,-2,8,-3,-3,-1,-2,-1,-2,-1,-2,-2,2,-3,0,0,-1],[-1,-3,-3,-3,-1,-3,-3,-4,-3,4,2,-3,1,0,-3,-2,-1,-3,-1,3,-3,-3,-1],[-1,-2,-3,-4,-1,-2,-3,-4,-3,2,4,-2,2,0,-3,-2,-1,-2,-1,1,-4,-3,-1],[-1,2,0,-1,-3,1,1,-2,-1,-3,-2,5,-1,-3,-1,0,-1,-3,-2,-2,0,1,-1],[-1,-1,-2,-3,-1,0,-2,-3,-2,1,2,-1,5,0,-2,-1,-1,-1,-1,1,-3,-1,-1],[-2,-3,-3,-3,-2,-3,-3,-3,-1,0,0,-3,0,6,-4,-2,-2,1,3,-1,-3,-3,-1],[-1,-2,-2,-1,-3,-1,-1,-2,-2,-3,-3,-1,-2,-4,7,-1,-1,-4,-3,-2,-2,-1,-2],[1,-1,1,0,-1,0,0,0,-1,-2,-2,0,-1,-2,-1,4,1,-3,-2,-2,0,0,0],[0,-1,0,-1,-1,-1,-1,-2,-2,-1,-1,-1,-1,-2,-1,1,5,-2,-2,0,-1,-1,0],[-3,-3,-4,-4,-2,-2,-3,-2,-2,-3,-2,-3,-1,1,-4,-3,-2,11,2,-3,-4,-3,-2],[-2,-2,-2,-3,-2,-1,-2,-3,2,-1,-1,-2,-1,3,-3,-2,-2,2,7,-1,-3,-2,-1],[0,-3,-3,-3,-1,-2,-2,-3,-3,3,1,-2,1,-1,-2,-2,0,-3,-1,4,-3,-2,-1],[-2,-1,3,4,-3,0,1,-1,0,-3,-4,0,-3,-3,-2,0,-1,-4,-3,-3,4,1,-1],[-1,0,0,1,-3,3,4,-2,0,-3,-3,1,-1,-3,-1,0,-1,-3,-2,-2,1,4,-1],[0,-1,-1,-1,-2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-2,0,0,-2,-1,-1,-1,-1,-1]]),blosum62x:kge("ACDEFGHIKLMNPQRSTVWY",Tge)},Mge={gapPenalty:-11,gapExtensionPenalty:-1,substMatrix:"default"};class Rge{constructor(e,t,n){this.seqA=e,this.seqB=t,this.S=[],this.V=[],this.H=[],this.gapPenalty=n.gapPenalty,this.gapExtensionPenalty=n.gapExtensionPenalty,this.substMatrix="default"===n.substMatrix?void 0:Qge[n.substMatrix],this.n=this.seqA.length,this.m=this.seqB.length}initMatrices(){const{n:e,m:t,gapPenalty:n,S:r,V:o,H:i}=this;for(let a=0;a<=e;++a){r[a]=[],o[a]=[],i[a]=[];for(let e=0;e<=t;++e)r[a][e]=0,o[a][e]=0,i[a][e]=0}for(let a=0;a<=e;++a)r[a][0]=n,i[a][0]=-1/0;for(let a=0;a<=t;++a)r[0][a]=n,o[0][a]=-1/0;r[0][0]=0}makeScoreFn(){const{seqA:e,seqB:t,substMatrix:n}=this;return n?function(r,o){var i,a;const s=e[r],l=t[o];return null!==(a=null===(i=n[s])||void 0===i?void 0:i[l])&&void 0!==a?a:-4}:function(n,r){return e[n]===t[r]?5:-3}}calculate(){this.initMatrices();const e=this.makeScoreFn(),{V:t,H:n,S:r,n:o,m:i,gapExtensionPenalty:a,gapPenalty:s}=this;let l,c,u,d,A;for(let f=1;f<=o;++f){c=r[f-1],l=t[f-1],u=t[f],d=n[f],A=r[f];for(let t=1;t<=i;++t)u[t]=Math.max(c[t]+s,l[t]+a),d[t]=Math.max(A[t-1]+s,d[t-1]+a),A[t]=Math.max(c[t-1]+e(f-1,t-1),u[t],d[t])}}trace(){const e=this.makeScoreFn(),{V:t,H:n,S:r,seqA:o,seqB:i,gapExtensionPenalty:a,gapPenalty:s}=this;let l,c,u=this.n,d=this.m,A="",f="";for(r[u][d]>=t[u][d]?(l="S",c=r[u][d]):t[u][d]>=n[u][d]?(l="V",c=t[u][d]):(l="H",c=n[u][d]);u>0&&d>0;)"S"===l?r[u][d]===r[u-1][d-1]+e(u-1,d-1)?(A=o[u-1]+A,f=i[d-1]+f,--u,--d,l="S"):r[u][d]===t[u][d]?l="V":r[u][d]===n[u][d]?l="H":(--u,--d):"V"===l?t[u][d]===t[u-1][d]+a?(A=o[u-1]+A,f="-"+f,--u,l="V"):t[u][d]===r[u-1][d]+s?(A=o[u-1]+A,f="-"+f,--u,l="S"):--u:"H"===l&&(n[u][d]===n[u][d-1]+a?(A="-"+A,f=i[d-1]+f,--d,l="H"):n[u][d]===r[u][d-1]+s?(A="-"+A,f=i[d-1]+f,--d,l="S"):--d);for(;u>0;)A=o[u-1]+A,f="-"+f,--u;for(;d>0;)A="-"+A,f=i[d-1]+f,--d;return{aliA:A,aliB:f,score:c}}}var Pge;function Oge(e){return e.model.sequence.byEntityKey[function(e){switch(e.kind){case 0:return e.model.atomicHierarchy.index.getEntityFromChain(e.chainIndex[e.elements[0]]);case 1:return e.model.coarseHierarchy.spheres.entityKey[e.elements[0]];case 2:return e.model.coarseHierarchy.gaussians.entityKey[e.elements[0]]}}(e)].sequence}!function(e){function t(e){const t=new Map;if(BO.isAtomic(e.unit)){const{label_seq_id:n}=e.unit.model.atomicHierarchy.residues,{residueIndex:r}=e.unit;for(let o=0,i=ey.size(e.indices);o<i;++o){const i=ey.getAt(e.indices,o),a=e.unit.elements[i],s=n.value(r[a]);t.has(s)?t.get(s).push(i):t.set(s,[i])}}else if(BO.isCoarse(e.unit)){const{seq_id_begin:n}=BO.isSpheres(e.unit)?e.unit.model.coarseHierarchy.spheres:e.unit.model.coarseHierarchy.gaussians;for(let r=0,o=ey.size(e.indices);r<o;++r){const o=ey.getAt(e.indices,r),i=e.unit.elements[o],a=n.value(i);t.set(a,[o])}}return t}e.createSeqIdIndicesMap=t,e.compute=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=Oge(e.a.unit),o=Oge(e.b.unit),i=t(e.a),a=t(e.b),s=[],l=[],{aliA:c,aliB:u,score:d}=function(e,t){const n={...Mge,...arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}},r=new Rge(e,t,n);return r.calculate(),r.trace()}(r.code.toArray(),o.code.toArray(),n);let A=0,f=0;for(let t=0,g=c.length;t<g;++t){if("-"===c[t]||"-"===u[t]){"-"!==c[t]&&(A+=1),"-"!==u[t]&&(f+=1);continue}const e=r.seqId.value(A),n=o.seqId.value(f);if(i.has(e)&&a.has(n)){const t=i.get(e),r=a.get(n);for(let e=0,n=Math.min(t.length,r.length);e<n;++e)s.push(t[e]),l.push(r[e])}A+=1,f+=1}const p=ey.intersect(ey.ofSortedArray(s),e.a.indices),h=ey.intersect(ey.ofSortedArray(l),e.b.indices);return{a:{unit:e.a.unit,indices:p},b:{unit:e.b.unit,indices:h},score:d}}}(Pge||(Pge={}));const Fge={alignSequences:U_.Boolean(!0,{isEssential:!0,description:"For Chain-based 3D superposition, perform a sequence alignment and use the aligned residue pairs to guide the 3D superposition."}),traceOnly:U_.Boolean(!0,{description:"For Chain- and Uniprot-based 3D superposition, base superposition only on CA (and equivalent) atoms."})};U_.getDefaultValues(Fge);function Nge(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=!1);var i=t.schedule((function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(i),!o)return i}function Lge(e,t,n){return void 0===n&&(n=1/0),bS(t)?Lge((function(n,r){return _fe((function(e,o){return t(n,e,r,o)}))(Ife(e(n,r)))}),n):("number"===typeof t&&(n=t),ufe((function(t,r){return function(e,t,n,r,o,i,a,s){var l=[],c=0,u=0,d=!1,A=function(){!d||l.length||c||t.complete()},f=function(e){return c<r?p(e):l.push(e)},p=function(e){i&&t.next(e),c++;var s=!1;Ife(n(e,u++)).subscribe(dfe(t,(function(e){null===o||void 0===o||o(e),i?f(e):t.next(e)}),(function(){s=!0}),void 0,(function(){if(s)try{c--;for(var e=function(){var e=l.shift();a?Nge(t,a,(function(){return p(e)})):p(e)};l.length&&c<r;)e();A()}catch(n){t.error(n)}})))};return e.subscribe(dfe(t,f,(function(){d=!0,A()}))),function(){null===s||void 0===s||s()}}(t,r,e,n)})))}var Uge=new YS((function(e){return e.complete()}));function Gge(e){return e[e.length-1]}function jge(e,t){return void 0===t&&(t=0),ufe((function(n,r){n.subscribe(dfe(r,(function(n){return Nge(r,e,(function(){return r.next(n)}),t)}),(function(){return Nge(r,e,(function(){return r.complete()}),t)}),(function(n){return Nge(r,e,(function(){return r.error(n)}),t)})))}))}function zge(e,t){return void 0===t&&(t=0),ufe((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function Hge(e,t){if(!e)throw new Error("Iterable cannot be null");return new YS((function(n){Nge(n,t,(function(){var r=e[Symbol.asyncIterator]();Nge(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function Vge(e,t){if(null!=e){if(hfe(e))return function(e,t){return Ife(e).pipe(zge(t),jge(t))}(e,t);if(ffe(e))return function(e,t){return new YS((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}(e,t);if(pfe(e))return function(e,t){return Ife(e).pipe(zge(t),jge(t))}(e,t);if(gfe(e))return Hge(e,t);if(vfe(e))return function(e,t){return new YS((function(n){var r;return Nge(n,t,(function(){r=e[yfe](),Nge(n,t,(function(){var e,t,o;try{t=(e=r.next()).value,o=e.done}catch(i){return void n.error(i)}o?n.complete():n.next(t)}),0,!0)})),function(){return bS(null===r||void 0===r?void 0:r.return)&&r.return()}}))}(e,t);if(Cfe(e))return function(e,t){return Hge(bfe(e),t)}(e,t)}throw mfe(e)}function qge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(e){return xfe(Gge(e))?e.pop():void 0}(e),r=function(e,t){return"number"===typeof Gge(e)?e.pop():t}(e,1/0),o=e;return o.length?1===o.length?Ife(o[0]):function(e){return void 0===e&&(e=1/0),Lge(VS,e)}(r)(function(e,t){return t?Vge(e,t):Ife(e)}(o,n)):Uge}class Yge extends nie{get animation(){return this.plugin.managers.animation}getSnapshot(e){var t,n,r;const o={...this.snapshotParams.value,...e};return{id:Cp.create22(),data:o.data?this.data.getSnapshot():void 0,behaviour:o.behavior?this.behaviors.getSnapshot():void 0,animation:o.animation?this.animation.getSnapshot():void 0,startAnimation:o.startAnimation?!!o.startAnimation:void 0,camera:o.camera?{current:this.plugin.canvas3d.camera.getSnapshot(),transitionStyle:o.cameraTransition.name,transitionDurationInMs:"animate"===(null===(t=null===o||void 0===o?void 0:o.cameraTransition)||void 0===t?void 0:t.name)?o.cameraTransition.params.durationInMs:void 0}:void 0,canvas3dContext:o.canvas3dContext?{props:null===(n=this.plugin.canvas3dContext)||void 0===n?void 0:n.props}:void 0,canvas3d:o.canvas3d?{props:null===(r=this.plugin.canvas3d)||void 0===r?void 0:r.props}:void 0,interactivity:o.interactivity?{props:this.plugin.managers.interactivity.props}:void 0,structureFocus:this.plugin.managers.structure.focus.getSnapshot(),structureSelection:o.structureSelection?this.plugin.managers.structure.selection.getSnapshot():void 0,structureComponentManager:o.componentManager?{options:this.plugin.managers.structure.component.state.options}:void 0,durationInMs:null===o||void 0===o?void 0:o.durationInMs}}async setSnapshot(e){var t,n,r,o,i;if(await this.animation.stop(),(null===(t=e.structureComponentManager)||void 0===t?void 0:t.options)&&this.plugin.managers.structure.component._setSnapshotState(null===(n=e.structureComponentManager)||void 0===n?void 0:n.options),e.behaviour&&await this.plugin.runTask(this.behaviors.setSnapshot(e.behaviour)),e.data&&await this.plugin.runTask(this.data.setSnapshot(e.data)),null===(r=e.canvas3d)||void 0===r?void 0:r.props){const t=U_.normalizeParams(sce,e.canvas3d.props,"children");await die.Canvas3D.SetSettings(this.plugin,{settings:t})}if(null===(o=e.canvas3dContext)||void 0===o?void 0:o.props){const t=U_.normalizeParams(cce.Params,e.canvas3dContext.props,"children");null===(i=this.plugin.canvas3dContext)||void 0===i||i.setProps(t)}e.interactivity&&e.interactivity.props&&this.plugin.managers.interactivity.setProps(e.interactivity.props),e.structureFocus&&this.plugin.managers.structure.focus.setSnapshot(e.structureFocus),e.structureSelection&&this.plugin.managers.structure.selection.setSnapshot(e.structureSelection),e.animation&&this.animation.setSnapshot(e.animation),e.camera&&die.Camera.Reset(this.plugin,{snapshot:e.camera.current,durationMs:"animate"===e.camera.transitionStyle?e.camera.transitionDurationInMs:void 0}),e.startAnimation&&this.animation.start()}updateTransform(e,t,n,r){const o=e.build().to(t).update(n);return die.State.Update(this.plugin,{state:e,tree:o,options:{canUndo:r}})}hasBehavior(e){return this.behaviors.tree.transforms.has(e.id)}updateBehavior(e,t){const n=this.behaviors.build();if(this.behaviors.tree.transforms.has(e.id))n.to(e.id).update(t);else{const r=e.createDefaultParams(void 0,this.plugin);n.to(tie.getCategoryId(e)).apply(e,YD(r,t),{ref:e.id})}return this.plugin.runTask(this.behaviors.updateTree(n))}dispose(){this.behaviors.cells.forEach((e=>{var t,n,r,o;tie.Behavior.is(e.obj)&&(null===(n=(t=e.obj.data).unregister)||void 0===n||n.call(t),null===(o=(r=e.obj.data).dispose)||void 0===o||o.call(r))})),super.dispose(),this.data.dispose(),this.behaviors.dispose(),this.animation.dispose()}constructor(e){super(),this.plugin=e,this.data=nT.create(new Jz.Root({}),{runTask:this.plugin.runTask,globalContext:this.plugin,historyCapacity:this.plugin.config.get(Bee.State.HistoryCapacity)}),this.behaviors=nT.create(new tie.Root({}),{runTask:this.plugin.runTask,globalContext:this.plugin,rootState:{isLocked:!0}}),this.events={cell:{stateUpdated:qge(this.data.events.cell.stateUpdated,this.behaviors.events.cell.stateUpdated),created:qge(this.data.events.cell.created,this.behaviors.events.cell.created),removed:qge(this.data.events.cell.removed,this.behaviors.events.cell.removed)},object:{created:qge(this.data.events.object.created,this.behaviors.events.object.created),removed:qge(this.data.events.object.removed,this.behaviors.events.object.removed),updated:qge(this.data.events.object.updated,this.behaviors.events.object.updated)}},this.snapshotParams=this.ev.behavior(Yge.DefaultSnapshotParams),this.setSnapshotParams=e=>{this.snapshotParams.next({...Yge.DefaultSnapshotParams,...e})}}}!function(e){e.SnapshotParams={durationInMs:U_.Numeric(1500,{min:100,max:15e3,step:100},{label:"Duration in ms"}),data:U_.Boolean(!0),behavior:U_.Boolean(!1),structureSelection:U_.Boolean(!1),componentManager:U_.Boolean(!0),animation:U_.Boolean(!0),startAnimation:U_.Boolean(!1),canvas3d:U_.Boolean(!0),canvas3dContext:U_.Boolean(!0),interactivity:U_.Boolean(!0),camera:U_.Boolean(!0),cameraTransition:U_.MappedStatic("animate",{animate:U_.Group({durationInMs:U_.Numeric(250,{min:100,max:5e3,step:500},{label:"Duration in ms"})}),instant:U_.Group({})},{options:[["animate","Animate"],["instant","Instant"]]}),image:U_.Boolean(!1)},e.DefaultSnapshotParams=U_.getDefaultValues(e.SnapshotParams)}(Yge||(Yge={}));class Xge extends rv{constructor(){super(...arguments),this.state={params:U_.getDefaultValues(Xge.Params)},this.add=()=>{die.State.Snapshots.Add(this.plugin,{name:this.state.params.name,description:this.state.params.description})},this.updateParams=e=>this.setState({params:e}),this.clear=()=>{die.State.Snapshots.Clear(this.plugin,{})}}shouldComponentUpdate(e,t){return!Rp(this.props,e)||!Rp(this.state,t)}render(){return(0,ct.jsx)("div",{children:(0,ct.jsx)(Kge,{parent:this})})}}function Wge(e,t,n){return!!t&&e.managers.snapshot.state.entries.some((e=>(!n||e.snapshot.id!==n)&&e.key===t))}function Kge(e){let{parent:t}=e;const[n,r]=F.useState({key:"",name:"",description:""}),o=()=>{die.State.Snapshots.Add(t.plugin,{key:n.key,name:n.name,description:n.description}),r({key:"",name:"",description:""})},i=Wge(t.plugin,n.key);return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)(Jge,{state:n,setState:r,apply:o}),(0,ct.jsxs)("div",{className:"msp-flex-row",children:[(0,ct.jsx)(Zy,{onClick:t.clear,svg:Gy,title:"Remove All"}),(0,ct.jsx)(Jy,{onClick:o,icon:i?void 0:Ey,style:{textAlign:"right"},commit:i?"off":"on",disabled:i,children:i?"Key must be unique":"Add"})]})]})}Xge.Params={name:U_.Text(),description:U_.Text()};function Jge(e){let{state:t,setState:n,apply:r}=e;const o=F.useRef(),i=F.useRef(),[a,s]=F.useState(!1);return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)(tv,{label:"Name",control:(0,ct.jsx)("input",{type:"text",value:t.name,placeholder:"Name",onChange:e=>n({...t,name:e.target.value}),onKeyUp:e=>{var t;"Enter"===e.key&&(null===(t=o.current)||void 0===t||t.focus())}})}),(0,ct.jsx)(tv,{label:(0,ct.jsxs)(ct.Fragment,{children:["Key",(0,ct.jsx)(tAe,{show:a,toggle:()=>s((e=>!e))})]}),control:(0,ct.jsx)("input",{type:"text",ref:o,value:t.key,placeholder:"Key (optional)",onChange:e=>n({...t,key:e.target.value}),onKeyUp:e=>{var t;"Enter"===e.key&&(null===(t=i.current)||void 0===t||t.focus())}})}),a&&(0,ct.jsx)("div",{className:"msp-control-offset",children:(0,ct.jsx)($de,{description:"Optional snapshot key used to activate snapshots from descriptions, labels, etc."})}),(0,ct.jsx)("div",{className:"msp-flex-row msp-text-area-wrapper",style:{marginBottom:1},children:(0,ct.jsx)("textarea",{ref:i,placeholder:"Markdown Description\n\n- Use [title](#key) to link to a snapshot",className:"msp-form-control",value:t.description,onChange:e=>n({...t,description:e.target.value}),onKeyUp:e=>{"Enter"===e.key&&e.ctrlKey&&r(t)}})})]})}U_.Select("single",[["single","Chain"],["polymers","Polymers"],["all","Everything"]]);const Zge=F.useSyncExternalStore?function(e){return F.useSyncExternalStore(F.useCallback((t=>{const n=null===e||void 0===e?void 0:e.pipe(ope(1)).subscribe(t);return()=>null===n||void 0===n?void 0:n.unsubscribe()}),[e]),F.useCallback((()=>null===e||void 0===e?void 0:e.value),[e]))}:function(e){const[,t]=F.useState({}),n=F.useRef();return n.current=null===e||void 0===e?void 0:e.value,F.useEffect((()=>{if(!e)return;const r=e.subscribe((e=>{n.current!==e&&t({})}));return()=>r.unsubscribe()}),[e]),null===e||void 0===e?void 0:e.value};function $ge(e){return Zge(e)}F.memo((e=>{const{plugin:t,cropFrameColor:n}=e,r=t.helpers.viewportScreenshot,[o,i]=(0,F.useState)(null),a=(0,F.useRef)(null),s=(0,F.useRef)(e);return(0,F.useEffect)((()=>{s.current=e}),Object.values(e)),(0,F.useEffect)((()=>{o!==a.current&&i(a.current)})),(0,F.useEffect)((()=>{var e;let n=!1;const o=[];function i(e,t){e&&o.push(e.subscribe(t))}function l(){const e=s.current;!e.suspend&&a.current&&eme(r,a.current,e.customBackground,e.borderColor,e.borderWidth),a.current||(n=!0)}const c=setInterval((()=>{n&&(n=!1,l())}),125);let u;i(t.events.canvas3d.settingsUpdated,(()=>n=!0)),i(null===(e=t.canvas3d)||void 0===e?void 0:e.didDraw,(()=>n=!0)),i(t.state.data.behaviors.isUpdating,(e=>{e||(n=!0)})),i(null===r||void 0===r?void 0:r.behaviors.values,(()=>n=!0)),i(null===r||void 0===r?void 0:r.behaviors.cropParams,(()=>n=!0)),"undefined"!==typeof ResizeObserver&&(u=new ResizeObserver((()=>n=!0)));const d=a.current;return null===u||void 0===u||u.observe(d),l(),()=>{clearInterval(c),o.forEach((e=>e.unsubscribe())),null===u||void 0===u||u.unobserve(d)}}),[r]),(0,F.useLayoutEffect)((()=>{a.current&&eme(r,a.current,e.customBackground,e.borderColor,e.borderWidth)}),[...Object.values(e)]),(0,ct.jsx)(ct.Fragment,{children:(0,ct.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[(0,ct.jsx)("canvas",{ref:a,onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},style:{display:"block",width:"100%",height:"100%"}}),(0,ct.jsx)(tme,{plugin:t,canvas:o,color:n})]})})}),((e,t)=>ZB(e,t)));function eme(e,t,n,r,o){if(!e)return;const{canvas:i,width:a,height:s}=e.getPreview(),l=t.getContext("2d");if(!l)return;const c=t.clientWidth,u=t.clientHeight;t.width=c,t.height=u,l.clearRect(0,0,c,u);const d=rme(a,s,c,u);if(n)l.fillStyle=n,l.fillRect(d.x,d.y,d.width,d.height);else if(e.values.transparent){const e=13;for(let t=0;t<d.width;t+=e)for(let n=0;n<d.height;n+=e){l.fillStyle=(t+n)%2?"#ffffff":"#bfbfbf";const r=d.x+t,o=d.y+n,i=t+e>d.width?d.width-t:e,a=n+e>d.height?d.height-n:e;l.fillRect(r,o,i,a)}}if(l.drawImage(i,d.x,d.y,d.width,d.height),r&&o){const e=o;l.rect(d.x,d.y,d.width,d.height),l.rect(d.x+e,d.y+e,d.width-2*e,d.height-2*e),l.fillStyle=r,l.fill("evenodd")}}function tme(e){let{plugin:t,canvas:n,color:r="rgba(255, 87, 45, 0.75)"}=e;var o;const i=t.helpers.viewportScreenshot,a=$ge(null===i||void 0===i?void 0:i.behaviors.values),s=$ge(null===i||void 0===i?void 0:i.behaviors.cropParams),l=$ge(null===i||void 0===i?void 0:i.behaviors.relativeCrop),c=(0,F.useRef)({x:0,y:0,width:0,height:0});$ge("viewport"===(null===a||void 0===a?void 0:a.resolution.name)?null===(o=t.canvas3d)||void 0===o?void 0:o.resized:void 0);const[u,d]=F.useState(""),[A,f]=(0,F.useState)([0,0]),[p,h]=(0,F.useState)([0,0]);if(!i||!n||!l)return null;const{width:g,height:m}=i.getSizeAndViewport(),y=rme(g,m,n.clientWidth,n.clientHeight),v={x:y.x+Math.floor(y.width*l.x),y:y.y+Math.floor(y.height*l.y),width:Math.ceil(y.width*l.width),height:Math.ceil(y.height*l.height)},b=nme(v),C=nme(y);if("move"===u?(b.l+=p[0]-A[0],b.r+=p[0]-A[0],b.t+=p[1]-A[1],b.b+=p[1]-A[1]):u&&(u.indexOf("left")>=0?b.l+=p[0]-A[0]:u.indexOf("right")>=0&&(b.r+=p[0]-A[0]),u.indexOf("top")>=0?b.t+=p[1]-A[1]:u.indexOf("bottom")>=0&&(b.b+=p[1]-A[1])),b.l>b.r){const e=b.l;b.l=b.r,b.r=e}if(b.t>b.b){const e=b.t;b.t=b.b,b.b=e}b.l=Math.min(C.r-40,Math.max(C.l,b.l)),b.r=Math.max(C.l+40,Math.min(C.r,b.r)),b.t=Math.min(C.b-40,Math.max(C.t,b.t)),b.b=Math.max(C.t+40,Math.min(C.b,b.b)),v.x=b.l,v.y=b.t,v.width=b.r-b.l+1,v.height=b.b-b.t+1,c.current=v;const I=e=>{e.preventDefault(),h([e.pageX,e.pageY])},E=e=>{e.preventDefault();const t=e.touches[0];h([t.pageX,t.pageY])},x=e=>{e.preventDefault(),d(e.currentTarget.getAttribute("data-drag"));const t=e.touches[0],n=[t.pageX,t.pageY];f(n),h(n),window.addEventListener("touchend",_),window.addEventListener("touchmove",E)},B=e=>{e.preventDefault(),d(e.currentTarget.getAttribute("data-drag"));const t=[e.pageX,e.pageY];f(t),h(t),window.addEventListener("mouseup",w),window.addEventListener("mousemove",I)},w=()=>{window.removeEventListener("mouseup",w),window.removeEventListener("mousemove",I),S()},_=()=>{window.removeEventListener("touchend",_),window.removeEventListener("touchmove",E),S()};function S(){const e=c.current;(null===s||void 0===s?void 0:s.auto)&&(null===i||void 0===i||i.behaviors.cropParams.next({...s,auto:!1})),null===i||void 0===i||i.behaviors.relativeCrop.next({x:(e.x-y.x)/y.width,y:(e.y-y.y)/y.height,width:e.width/y.width,height:e.height/y.height}),d("");const t=[0,0];f(t),h(t)}const D=e=>{e.preventDefault(),e.stopPropagation()},T=`3px solid ${r}`,k="transparent";return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)("div",{"data-drag":"move",style:{position:"absolute",left:v.x,top:v.y,width:v.width,height:v.height,border:T,cursor:"move"},onMouseDown:B,onTouchStart:x,draggable:!1,onContextMenu:D}),(0,ct.jsx)("div",{"data-drag":"left",style:{position:"absolute",left:v.x-4,top:v.y+4,width:16,height:v.height-4,background:k,cursor:"w-resize"},onMouseDown:B,onTouchStart:x,draggable:!1,onContextMenu:D}),(0,ct.jsx)("div",{"data-drag":"right",style:{position:"absolute",left:b.r-8,top:v.y,width:16,height:v.height-4,background:k,cursor:"w-resize"},onMouseDown:B,onTouchStart:x,draggable:!1,onContextMenu:D}),(0,ct.jsx)("div",{"data-drag":"top",style:{position:"absolute",left:v.x-4,top:v.y-4,width:v.width+8,height:16,background:k,cursor:"n-resize"},onMouseDown:B,onTouchStart:x,draggable:!1,onContextMenu:D}),(0,ct.jsx)("div",{"data-drag":"bottom",style:{position:"absolute",left:v.x-4,top:b.b-8,width:v.width+8,height:16,background:k,cursor:"n-resize"},onMouseDown:B,onTouchStart:x,draggable:!1,onContextMenu:D}),(0,ct.jsx)("div",{"data-drag":"top, left",style:{position:"absolute",left:b.l-4,top:b.t-4,width:16,height:16,background:k,cursor:"nw-resize"},onMouseDown:B,onTouchStart:x,draggable:!1,onContextMenu:D}),(0,ct.jsx)("div",{"data-drag":"bottom, right",style:{position:"absolute",left:b.r-8,top:b.b-8,width:16,height:16,background:k,cursor:"nw-resize"},onMouseDown:B,onTouchStart:x,draggable:!1,onContextMenu:D}),(0,ct.jsx)("div",{"data-drag":"top, right",style:{position:"absolute",left:b.r-8,top:b.t-4,width:16,height:16,background:k,cursor:"ne-resize"},onMouseDown:B,onTouchStart:x,draggable:!1,onContextMenu:D}),(0,ct.jsx)("div",{"data-drag":"bottom, left",style:{position:"absolute",left:b.l-4,top:b.b-8,width:16,height:16,background:k,cursor:"ne-resize"},onMouseDown:B,onTouchStart:x,draggable:!1,onContextMenu:D})]})}function nme(e){return{l:e.x,t:e.y,r:e.x+e.width-1,b:e.y+e.height-1}}function rme(e,t,n,r){const o=e/t;if(o<=n/r){const e=r*o;return{x:Math.round((n-e)/2),y:0,width:Math.round(e),height:r}}{const e=n/o;return{x:0,y:Math.round((r-e)/2),width:n,height:Math.round(e)}}}const ome={sequence:"Sequence",log:"Log",left:"Left Panel",right:"Right Panel"},ime={animate:sce.trackball.params.animate,camera:sce.camera,background:U_.Group({color:U_.Color(Jp(16579577),{label:"Background",description:"Custom background color"}),transparent:U_.Boolean(!1),style:sce.postprocessing.params.background},{pivot:"color"}),lighting:U_.Group({occlusion:sce.postprocessing.params.occlusion,shadow:sce.postprocessing.params.shadow,outline:sce.postprocessing.params.outline,dof:sce.postprocessing.params.dof,fog:sce.cameraFog},{isFlat:!0}),clipping:U_.Group({...sce.cameraClipping.params},{pivot:"radius"}),layout:U_.MultiSelect([],U_.objectToOptions(ome)),advanced:U_.Group({multiSample:sce.multiSample,hiZ:sce.hiZ,sharpening:sce.postprocessing.params.sharpening,pixelScale:cce.Params.pixelScale,transparency:cce.Params.transparency})};(ame={params:e=>{var t;const n=U_.clone(ime),r=null===(t=e.spec.components)||void 0===t?void 0:t.controls;if(r){const e=[];"none"!==r.top&&e.push(["sequence",ome.sequence]),"none"!==r.bottom&&e.push(["log",ome.log]),"none"!==r.left&&e.push(["left",ome.left]),"none"!==r.right&&e.push(["right",ome.right]),n.layout.options=e}const o=e.config.get(Bee.Background.Styles)||[];return o.length>0&&Object.assign(n.background.params.style,{presets:ew(o),isFlat:!1}),n},target(e){var t,n,r;const o=null===(t=e.spec.components)||void 0===t?void 0:t.controls,i=e.layout.state.regionState,a=[];"hidden"===i.top||o&&"none"===o.top||a.push("sequence"),"hidden"===i.bottom||o&&"none"===o.bottom||a.push("log"),"hidden"===i.left||o&&"none"===o.left||a.push("left"),"hidden"===i.right||o&&"none"===o.right||a.push("right");const{pixelScale:s,transparency:l}=null===(n=e.canvas3dContext)||void 0===n?void 0:n.props;return{canvas:null===(r=e.canvas3d)||void 0===r?void 0:r.props,layout:a,pixelScale:s,transparency:l}}},e=>{let{values:t,update:n,apply:r}=e;return{params:"function"===typeof ame.params?ame.params:e=>ame.params,getTarget:ame.target,getValues:t,update(e,t){const r=ame.target(t);return YD(r,(r=>n(e,r,t)))},apply:r||(()=>{})}})({values(e,t){const{canvas:n}=e,r=n.renderer;return{layout:e.layout,animate:n.trackball.animate,camera:n.camera,background:{color:r.backgroundColor,transparent:n.transparentBackground,style:n.postprocessing.background},lighting:{occlusion:n.postprocessing.occlusion,shadow:n.postprocessing.shadow,outline:n.postprocessing.outline,dof:n.postprocessing.dof,fog:n.cameraFog},clipping:{...n.cameraClipping},advanced:{multiSample:n.multiSample,hiZ:n.hiZ,sharpening:n.postprocessing.sharpening,pixelScale:e.pixelScale,transparency:e.transparency}}},update(e,t){const n=t.canvas;n.trackball.animate=e.animate,n.camera=e.camera,n.transparentBackground=e.background.transparent,n.renderer.backgroundColor=e.background.color,n.postprocessing.occlusion=e.lighting.occlusion,n.postprocessing.shadow=e.lighting.shadow,n.postprocessing.outline=e.lighting.outline,n.postprocessing.background=e.background.style,n.cameraFog=e.lighting.fog,n.cameraClipping={radius:e.clipping.radius,far:e.clipping.far,minNear:e.clipping.minNear},n.multiSample=e.advanced.multiSample,n.hiZ=e.advanced.hiZ,n.postprocessing.sharpening=e.advanced.sharpening,n.postprocessing.dof=e.lighting.dof,t.layout=e.layout,t.pixelScale=e.advanced.pixelScale,t.transparency=e.advanced.transparency},async apply(e,t){var n;await die.Canvas3D.SetSettings(t,{settings:e.canvas});const r=e.layout.indexOf("left")<0,o=YD(t.layout.state,(n=>{n.regionState.top=e.layout.indexOf("sequence")>=0?"full":"hidden",n.regionState.bottom=e.layout.indexOf("log")>=0?"full":"hidden",n.regionState.left=r?"hidden":"none"===t.behaviors.layout.leftPanelTabName.value?"collapsed":"full",n.regionState.right=e.layout.indexOf("right")>=0?"full":"hidden"}));await die.Layout.Update(t,{state:o}),r&&die.State.SetCurrentObject(t,{state:t.state.data,ref:z_.RootRef}),null===(n=t.canvas3dContext)||void 0===n||n.setProps({pixelScale:e.pixelScale,transparency:e.transparency})}});var ame;async function sme(e,t,n,r){var o,i,a,s;const l=mde(null!==(i=null===(o=e.file)||void 0===o?void 0:o.name)&&void 0!==i?i:""),c=t.dataFormats.binaryExtensions.has(l.ext),{data:u}=await t.builders.data.readFile({file:e,isBinary:c}),d="auto"===n?t.dataFormats.auto(l,null===(a=u.cell)||void 0===a?void 0:a.obj):t.dataFormats.get(n);if(!d)return t.log.warn(`OpenFiles: could not find data provider for '${l.ext}'`),void await t.state.data.build().delete(u).commit();const A=await d.parse(t,u);r&&await(null===(s=d.visuals)||void 0===s?void 0:s.call(d,t,A))}const lme=G_.build({display:{name:"Open Files",description:"Load one or more files and optionally create default visuals"},from:Jz.Root,params:(e,t)=>{const{extensions:n,options:r}=t.dataFormats;return{files:U_.FileList({accept:Array.from(n.values()).map((e=>`.${e}`)).join(",")+",.gz,.zip",multiple:!0}),format:U_.MappedStatic("auto",{auto:U_.EmptyGroup(),specific:U_.Select(r[0][0],r)}),visuals:U_.Boolean(!0,{description:"Add default visuals"})}}})(((e,t)=>{let{params:n,state:r}=e;return Tw.create("Open Files",(async e=>{t.behaviors.layout.leftPanelTabName.next("data"),await r.transaction((async()=>{if(null!==n.files)for(const r of n.files)try{if(r.file&&r.name.toLowerCase().endsWith(".zip")){const o=await b_(e,await r.file.arrayBuffer());for(const[e,r]of Object.entries(o)){if(!(r instanceof Uint8Array)||0===r.length)continue;const o=L_.File(new File([r],e));await sme(o,t,"auto",n.visuals)}}else{const e="auto"===n.format.name?"auto":n.format.params;await sme(r,t,e,n.visuals)}}catch(l0e){console.error(l0e),t.log.error(`Error opening file '${r.name}'`)}else t.log.error("No file(s) selected")})).runInContext(e)}))})),cme=G_.build({display:{name:"Download File",description:"Load one or more file from an URL"},from:Jz.Root,params:(e,t)=>{const n=[...t.dataFormats.options,["zip","Zip"],["gzip","Gzip"]];return{url:U_.Url(""),format:U_.Select(n[0][0],n),isBinary:U_.Boolean(!1),visuals:U_.Boolean(!0,{description:"Add default visuals"})}}})(((e,t)=>{let{params:n,state:r}=e;return Tw.create("Open Files",(async e=>{t.behaviors.layout.leftPanelTabName.next("data"),await r.transaction((async()=>{var r,o,i;try{if("zip"===n.format||"gzip"===n.format){const i=await t.builders.data.download({url:n.url,isBinary:!0});if("zip"===n.format){const o=await b_(e,(null===(r=i.obj)||void 0===r?void 0:r.data).buffer);for(const[e,r]of Object.entries(o)){if(!(r instanceof Uint8Array)||0===r.length)continue;const o=L_.File(new File([r],e));await sme(o,t,"auto",n.visuals)}}else{const e=mde(L_.getUrl(n.url)).name;await sme(L_.File(new File([null===(o=i.obj)||void 0===o?void 0:o.data],e)),t,"auto",n.visuals)}}else{const e=t.dataFormats.get(n.format);if(!e)return void t.log.warn(`DownloadFile: could not find data provider for '${n.format}'`);const r=await t.builders.data.download({url:n.url,isBinary:n.isBinary}),o=await e.parse(t,r);n.visuals&&await(null===(i=e.visuals)||void 0===i?void 0:i.call(e,t,o))}}catch(l0e){console.error(l0e),t.log.error(`Error downloading '${"string"===typeof n.url?n.url:n.url.url}'`)}})).runInContext(e)}))}));F.Component;var ume;!function(e){e.Registry=class{constructor(){this.providers=Zx().asMutable(),this.defaultAutoAttachValues=new Map}getParams(e){const t={},n=[],r=[];if(e){const o=this.providers.values();for(;;){const i=o.next();if(i.done)break;const a=i.value;a.isApplicable(e)&&(a.isHidden||(n.push([a.descriptor.name,a.label]),this.defaultAutoAttachValues.get(a.descriptor.name)&&r.push(a.descriptor.name)),t[a.descriptor.name]=U_.Group({...a.getParams(e)},{label:a.label,isHidden:a.isHidden}))}}return{autoAttach:U_.MultiSelect(r,n),properties:U_.Group(t,{isFlat:!0})}}setDefaultAutoAttach(e,t){this.defaultAutoAttachValues.set(e,t)}get(e){if(!this.providers.get(e))throw new Error(`Custom property '${e}' is not registered.`);return this.providers.get(e)}register(e,t){this.providers.set(e.descriptor.name,e),this.defaultAutoAttachValues.set(e.descriptor.name,t)}unregister(e){this.providers.delete(e),this.defaultAutoAttachValues.delete(e)}}}(ume||(ume={}));function dme(e){return e}!function(e){e.CommonParams=(e,t)=>({modelProperties:U_.Optional(U_.Group(j_.getParamDefinition(_7.Model.CustomModelProperties,void 0,t))),structureProperties:U_.Optional(U_.Group(j_.getParamDefinition(_7.Model.CustomStructureProperties,void 0,t))),representationPreset:U_.Optional(U_.Text("auto"))})}(dme||(dme={}));const Ame=dme.CommonParams,fme=dme({id:"preset-trajectory-default",display:{name:"Default (Assembly)",group:"Preset",description:"Shows the first assembly or, if that is unavailable, the first model."},isApplicable:e=>!0,params:(e,t)=>({model:U_.Optional(U_.Group(j_.getParamDefinition(_7.Model.ModelFromTrajectory,e,t))),showUnitcell:U_.Optional(U_.Boolean(!1)),structure:U_.Optional(r0.getParams(void 0,"assembly").type),representationPresetParams:U_.Optional(U_.Group(zue.CommonParams)),...Ame(e,t)}),async apply(e,t,n){const r=n.builders.structure,o=await r.createModel(e,t.model),i=await r.insertModelProperties(o,t.modelProperties),a=await r.createStructure(i||o,t.structure),s=await r.insertStructureProperties(a,t.structureProperties),l=void 0===t.showUnitcell||t.showUnitcell?await r.tryCreateUnitcell(i,void 0,{isHidden:!0}):void 0,c=t.representationPreset||n.config.get(Bee.Structure.DefaultRepresentationPreset)||ide.auto.id;return{model:o,modelProperties:i,unitcell:l,structure:a,structureProperties:s,representation:await n.builders.structure.representation.applyPreset(s,c,t.representationPresetParams)}}}),pme=(dme({id:"preset-trajectory-all-models",display:{name:"All Models",group:"Preset",description:"Shows all models; colored by trajectory-index."},isApplicable:e=>e.data.frameCount>1,params:(e,t)=>({useDefaultIfSingleModel:U_.Optional(U_.Boolean(!1)),representationPresetParams:U_.Optional(U_.Group(zue.CommonParams)),...Ame(e,t)}),async apply(e,t,n){var r,o;const i=null===(o=null===(r=PC.resolveAndCheck(n.state.data,e))||void 0===r?void 0:r.obj)||void 0===o?void 0:o.data;if(!i)return{};if(1===i.frameCount&&t.useDefaultIfSingleModel)return fme.apply(e,t,n);const a=n.builders.structure,s=[],l=[];for(let c=0;c<i.frameCount;c++){const r=await a.createModel(e,{modelIndex:c}),o=await a.insertModelProperties(r,t.modelProperties,{isCollapsed:!0}),u=await a.createStructure(o||r,{name:"model",params:{}}),d=await a.insertStructureProperties(u,t.structureProperties);s.push(r),l.push(u);const A=u.obj?F5(u.obj.data,{elementCountFactor:i.frameCount}):"medium",f=t.representationPreset||n.config.get(Bee.Structure.DefaultRepresentationPreset)||ide.auto.id;await a.representation.applyPreset(d,f,{theme:{globalName:"trajectory-index"},quality:A})}return{models:s,structures:l}}}),(e,t)=>({model:U_.Optional(U_.Group(j_.getParamDefinition(_7.Model.ModelFromTrajectory,e,t))),...Ame(e,t)}));async function hme(e,t,n,r){const o=r.builders.structure,i=await o.createModel(t,n.model),a=await o.insertModelProperties(i,n.modelProperties),s=await o.createStructure(a||i,{name:"symmetry",params:e}),l=await o.insertStructureProperties(s,n.structureProperties),c=await o.tryCreateUnitcell(a,void 0,{isHidden:!1}),u=n.representationPreset||r.config.get(Bee.Structure.DefaultRepresentationPreset)||ide.auto.id;return{model:i,modelProperties:a,unitcell:c,structure:s,structureProperties:l,representation:await r.builders.structure.representation.applyPreset(l,u,{theme:{globalName:e.theme}})}}dme({id:"preset-trajectory-unitcell",display:{name:"Unit Cell",group:"Preset",description:"Shows the fully populated unit cell."},isApplicable:e=>Wj.hasCrystalSymmetry(e.data.representative),params:pme,apply:async(e,t,n)=>await hme({ijkMin:qh.create(0,0,0),ijkMax:qh.create(0,0,0)},e,t,n)}),dme({id:"preset-trajectory-supercell",display:{name:"Super Cell",group:"Preset",description:"Shows the super cell, i.e. the central unit cell and all adjacent unit cells."},isApplicable:e=>Wj.hasCrystalSymmetry(e.data.representative),params:pme,apply:async(e,t,n)=>await hme({ijkMin:qh.create(-1,-1,-1),ijkMax:qh.create(1,1,1),theme:"operator-hkl"},e,t,n)}),dme({id:"preset-trajectory-crystal-contacts",display:{name:"Crystal Contacts",group:"Preset",description:"Showsasymetric unit and chains from neighbours within 5 \u212b, i.e., symmetry mates."},isApplicable:e=>Wj.hasCrystalSymmetry(e.data.representative),params:(e,t)=>({model:U_.Optional(U_.Group(j_.getParamDefinition(_7.Model.ModelFromTrajectory,e,t))),...Ame(e,t)}),async apply(e,t,n){const r=n.builders.structure,o=await r.createModel(e,t.model),i=await r.insertModelProperties(o,t.modelProperties),a=await r.createStructure(i||o,{name:"symmetry-mates",params:{radius:5}}),s=await r.insertStructureProperties(a,t.structureProperties),l=await r.tryCreateUnitcell(i,void 0,{isHidden:!0}),c=t.representationPreset||n.config.get(Bee.Structure.DefaultRepresentationPreset)||ide.auto.id;return{model:o,modelProperties:i,unitcell:l,structure:a,structureProperties:s,representation:await n.builders.structure.representation.applyPreset(s,c,{theme:{globalName:"operator-name",carbonColor:"operator-name",focus:{name:"element-symbol",params:{carbonColor:{name:"operator-name",params:Y2.defaultValues}}}}})}}});var gme,mme;!function(e){e.create=function(e){const{name:t}=e;return{descriptor:e,get:e=>e._propertyData[t],set(n,r){n.customProperties.add(e),n._propertyData[t]=r}}}}(gme||(gme={})),function(e){e.Descriptor={name:"recommended_iso_value"},e.Provider=gme.create(e.Descriptor)}(mme||(mme={}));Xh.create(1,0,0,0,1,0,0,0,1),Xh.create(1,0,0,0,0,1,0,-1,0),Xh.create(0,0,-1,0,1,0,1,0,0),Xh.create(0,1,0,-1,0,0,0,0,1),Xh.create(1,0,0,0,0,-1,0,1,0),Xh.create(0,0,1,0,1,0,-1,0,0),Xh.create(0,-1,0,1,0,0,0,0,1),Xh.create(1,0,0,0,-1,0,0,0,-1),Xh.create(-1,0,0,0,1,0,0,0,-1),Xh.create(-1,0,0,0,-1,0,0,0,1);new lO("98");const yme=[["full","Full"],["hidden","Hidden"]];U_.Boolean(!1),U_.Boolean(!0),U_.Group({left:U_.Select("full",[["full","Full"],["collapsed","Collapsed"],["hidden","Hidden"]]),top:U_.Select("full",yme),right:U_.Select("full",yme),bottom:U_.Select("full",yme)}),U_.Value("outside",{isHidden:!0});const vme={includeTypes:U_.MultiSelect(Jh(VM.Names),U_.objectToOptions(VM.Names)),excludeTypes:U_.MultiSelect([],U_.objectToOptions(VM.Names)),ignoreHydrogens:U_.Boolean(!1),ignoreHydrogensVariant:U_.Select("all",U_.arrayToOptions(["all","non-polar"])),aromaticBonds:U_.Boolean(!0,{description:"Display aromatic bonds with dashes"}),multipleBonds:U_.Select("symmetric",U_.arrayToOptions(["off","symmetric","offset"]))},bme=(U_.getDefaultValues(vme),{...doe,...vme,adjustCylinderLength:U_.Boolean(!1,{description:"Shorten cylinders to reduce overlap with spheres. Useful for for transparent bonds. Not working well with aromatic bonds."})}),Cme=(U_.getDefaultValues(bme),{...Aoe,...vme});U_.getDefaultValues(Cme);function Ime(e,t,n){return!VM.is(e,n)||VM.is(t,n)}function Eme(e,t,n){const r=t.elements,o=t.bonds,{a:i,b:a,edgeProps:s}=o,{flags:l}=s,{ignoreHydrogens:c,ignoreHydrogensVariant:u,includeTypes:d,excludeTypes:A}=n,f=VM.fromNames(d),p=VM.fromNames(A),h=VM.isAll(f)&&0===p,{child:g}=e,m=null===g||void 0===g?void 0:g.unitMap.get(t.id);if(g&&!m)throw new Error("expected childUnit to exist if child exists");if(!h||c||g)return n=>{const o=i[n],s=a[n];return!(!m||Em.has(m.elements,r[o]))||(!(h||!Ime(f,p,l[n]))||!!c&&!(!ite(e,t,r[o],u)&&!ite(e,t,r[s],u)))}}function xme(e,t){const n=e.interUnitBonds,{edges:r}=n,{ignoreHydrogens:o,ignoreHydrogensVariant:i,includeTypes:a,excludeTypes:s}=t,l=VM.fromNames(a),c=VM.fromNames(s),u=VM.isAll(l)&&0===c,{child:d}=e;if(!u||o||d)return t=>{if(d){const n=r[t],o=d.unitMap.get(n.unitA);if(!o)return!0;const i=e.unitMap.get(n.unitA).elements[n.indexA];if(!Em.has(o.elements,i))return!0}if(o){const n=r[t],o=e.unitMap.get(n.unitA),a=e.unitMap.get(n.unitB);if(ite(e,o,o.elements[n.indexA],i)||ite(e,a,a.elements[n.indexB],i))return!0}return!(u||!Ime(l,c,r[t].props.flag))}}var Bme;function wme(e,t,n){const{objectId:r,instanceId:o,groupId:i}=e;if(n===r){const{structure:e,group:n}=t,r=n.units[o];if(BO.isAtomic(r)){const{target:t}=e,n=r.bonds.a[i],o=r.bonds.b[i];return RP.Loci(t,[RP.Location(t,r,n,t,r,o),RP.Location(t,r,o,t,r,n)])}}return S5}function _me(e,t,n,r){let o=!1;if(RP.isLoci(e)){const{structure:r,group:i}=t;if(!aG.areEquivalent(e.structure,r))return!1;const a=i.units[0];if(!BO.isAtomic(a))return!1;const s=2*a.bonds.edgeCount;for(const t of e.bonds){if(t.aUnit!==t.bUnit)continue;const e=i.unitIndexMap.get(t.aUnit.id);if(void 0!==e){const r=a.bonds.getDirectedEdgeIndex(t.aIndex,t.bIndex);-1!==r&&n(Gg.ofSingleton(e*s+r))&&(o=!0)}}}else if(cG.is(e)){const{structure:i,group:a}=t;if(!aG.areEquivalent(e.structure,i))return!1;const s=a.units[0];if(!BO.isAtomic(s))return!1;const l=2*s.bonds.edgeCount;for(const t of e.elements){const e=a.unitIndexMap.get(t.unit.id);if(void 0!==e){const{offset:i,b:a}=s.bonds;ey.forEach(t.indices,(s=>{for(let c=i[s],u=i[s+1];c<u;c++)r&&!ey.has(t.indices,a[c])||n(Gg.ofSingleton(e*l+c))&&(o=!0)}))}}}return o}function Sme(e,t,n){const{objectId:r,groupId:o}=e;if(n===r){const{target:e}=t,n=t.interUnitBonds.edges[o],r=t.unitMap.get(n.unitA),i=t.unitMap.get(n.unitB);return RP.Loci(e,[RP.Location(e,r,n.indexA,e,i,n.indexB),RP.Location(e,i,n.indexB,e,r,n.indexA)])}return S5}!function(e){e.fromGroup=function(e,t){const{group:n,structure:r}=e,o=n.units[0],i=BO.isAtomic(o)?2*o.bonds.edgeCount:0,a=n.units.length,s=RP.Location(r,void 0,void 0,r,void 0,void 0),l=(e,t)=>{const r=n.units[t];return s.aUnit=r,s.bUnit=r,s.aIndex=r.bonds.a[e],s.bIndex=r.bonds.b[e],s};if(null===t||void 0===t?void 0:t.includeLocation2){const e=RP.Location(r,void 0,void 0,r,void 0,void 0),t=(t,r)=>{const o=n.units[r];return e.aUnit=o,e.bUnit=o,e.aIndex=o.bonds.b[t],e.bIndex=o.bonds.a[t],e};return xT(i,a,1,l,!1,(()=>!1),t)}return xT(i,a,1,l)},e.fromStructure=function(e,t){const n=e.interUnitBonds.edgeCount,r=RP.Location(e,void 0,void 0,e,void 0,void 0),o=t=>{const n=e.interUnitBonds.edges[t];return r.aUnit=e.unitMap.get(n.unitA),r.aIndex=n.indexA,r.bUnit=e.unitMap.get(n.unitB),r.bIndex=n.indexB,r};if(null===t||void 0===t?void 0:t.includeLocation2){const t=RP.Location(e,void 0,void 0,e,void 0,void 0);return xT(n,1,1,o,!0,(()=>!1),(n=>{const r=e.interUnitBonds.edges[n];return t.aUnit=e.unitMap.get(r.unitB),t.aIndex=r.indexB,t.bUnit=e.unitMap.get(r.unitA),t.bIndex=r.indexA,t}))}return xT(n,1,1,o,!0)}}(Bme||(Bme={}));const Dme=new Map;function Tme(e,t,n,r){let o=!1;if(RP.isLoci(e)){if(!aG.areEquivalent(e.structure,t))return!1;for(const r of e.bonds){const e=t.interUnitBonds.getBondIndexFromLocation(r);-1!==e&&n(Gg.ofSingleton(e))&&(o=!0)}}else if(cG.is(e)){if(!aG.areEquivalent(e.structure,t))return!1;if(r&&1===e.elements.length)return!1;for(const t of e.elements)Dme.set(t.unit.id,t.indices);for(const i of e.elements){const{unit:e}=i;BO.isAtomic(e)&&t.interUnitBonds.getConnectedUnits(e.id).forEach((a=>{const s=Dme.get(a.unitB);r&&!s||ey.forEach(i.indices,(i=>{a.connectedIndices.includes(i)&&a.getEdges(i).forEach((l=>{if(!r||s&&ey.has(s,l.indexB)){const r=t.interUnitBonds.getEdgeIndex(i,e.id,l.indexB,a.unitB);n(Gg.ofSingleton(r))&&(o=!0)}}))}))}))}Dme.clear()}return o}const kme=VM.is;function Qme(e,t,n,r){const o=e.elements,i=e.bonds,{edgeCount:a,a:s,b:l,edgeProps:c,offset:u}=i,{order:d,flags:A}=c,{sizeFactor:f,sizeAspectRatio:p,adjustCylinderLength:h,aromaticBonds:g,includeTypes:m,excludeTypes:y,multipleBonds:v}=r,b="off"===v,C="symmetric"===v,I=Ime(VM.fromNames(m),VM.fromNames(y),32),E=qh(),x=qh(),B=e.conformation;let w;const _=Vk.create(t,e),S=RP.Location(t,e,void 0,t,e,void 0),{child:D}=t;if(r.includeParent&&D){const t=D.unitMap.get(e.id);if(!t)throw new Error("expected childUnit to exist");w=e=>{const n=o[s[e]],r=o[l[e]];return Em.has(t.elements,n)&&!Em.has(t.elements,r)}}const{elementRingIndices:T,elementAromaticRingIndices:k}=e.rings,Q=g?e.resonance.delocalizedTriplets:void 0;return{linkCount:2*a,referencePosition:e=>{let t=s[e],n=l[e];const r=null===Q||void 0===Q?void 0:Q.getThirdElement(t,n);if(void 0!==r)return B.invariantPosition(o[r],E);t>n&&([t,n]=[n,t]),u[t+1]-u[t]===1&&([t,n]=[n,t]);const i=k.get(t)||T.get(t);let a=0;for(let s=u[t],c=u[t+1];s<c;++s){const e=l[s];if(e!==n&&e!==t){if(!i)return B.invariantPosition(o[e],E);{const t=k.get(e)||T.get(e);if(!t)continue;const n=rS(i,t);n>a&&(a=n,B.invariantPosition(o[e],E))}}}return a>0?E:null},position:(e,t,r,i)=>{if(B.invariantPosition(o[s[r]],e),B.invariantPosition(o[l[r]],t),i&&h){const i=(e=>(_.element=o[s[e]],n.size.size(_)*f))(r),a=(e=>(_.element=o[l[e]],n.size.size(_)*f))(r),c=Math.min(i,a)*p,u=Math.sqrt(Math.max(0,i*i-c*c))-.05,d=Math.sqrt(Math.max(0,a*a-c*c))-.05;if(u<=.01&&d<=.01)return;qh.normalize(x,qh.sub(x,t,e)),qh.scaleAndAdd(e,e,x,u),qh.scaleAndAdd(t,t,x,-d)}},style:e=>{const t=d[e],n=A[e];if(kme(n,2)||kme(n,4))return 1;if(3===t)return b?0:C?4:5;if(g){const t=s[e],r=l[e],o=k.get(t),i=k.get(r),a=o&&i?rS(o,i):0;if(kme(n,16)||a&&!I)return 2===a?8:7}return 2!==t||b?0:C?2:3},radius:e=>(e=>(S.aIndex=s[e],S.bIndex=l[e],n.size.size(S)*f))(e)*p,ignore:Eme(t,e,r),stub:w}}function Mme(e,t,n,r,o,i){if(!BO.isAtomic(t))return zK.createEmpty(i);if(!t.bonds.edgeCount)return zK.createEmpty(i);const{child:a}=n,s=null===a||void 0===a?void 0:a.unitMap.get(t.id);if(a&&!s)return zK.createEmpty(i);const l=Qme(t,n,r,o),{cylinders:c,boundingSphere:u}=xoe(0,l,o,i);if(u)c.setBoundingSphere(u);else if(c.cylinderCount>0){const e=YT.expand(YT(),(null!==s&&void 0!==s?s:t).boundary.sphere,1*o.sizeFactor);c.setBoundingSphere(e)}return c}function Rme(e,t,n,r,o,i){if(!BO.isAtomic(t))return RY.createEmpty(i);if(!t.bonds.edgeCount)return RY.createEmpty(i);const{child:a}=n,s=null===a||void 0===a?void 0:a.unitMap.get(t.id);if(a&&!s)return RY.createEmpty(i);const l=Qme(t,n,r,o),{mesh:c,boundingSphere:u}=Eoe(0,l,o,i);if(u)c.setBoundingSphere(u);else if(c.triangleCount>0){const e=YT.expand(YT(),(null!==s&&void 0!==s?s:t).boundary.sphere,1*o.sizeFactor);c.setBoundingSphere(e)}return c}const Pme={...Dte,...Mte,...bme,sizeFactor:U_.Numeric(.3,{min:0,max:10,step:.01}),sizeAspectRatio:U_.Numeric(2/3,{min:0,max:3,step:.01}),tryUseImpostor:U_.Boolean(!0),includeParent:U_.Boolean(!1)};function Ome(e,t,n,r){return n.tryUseImpostor&&r&&r.extensions.fragDepth?function(e){return Rte({defaultProps:U_.getDefaultValues(Pme),createGeometry:Mme,createLocationIterator:(e,t)=>Bme.fromGroup(e,{includeLocation2:"interpolate"===t.colorMode}),getLoci:wme,eachLocation:_me,setUpdateState:(e,t,n,r,o,i,a)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.sizeAspectRatio!==n.sizeAspectRatio||t.linkScale!==n.linkScale||t.linkSpacing!==n.linkSpacing||t.ignoreHydrogens!==n.ignoreHydrogens||t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant||t.linkCap!==n.linkCap||t.aromaticScale!==n.aromaticScale||t.aromaticSpacing!==n.aromaticSpacing||t.aromaticDashCount!==n.aromaticDashCount||t.dashCount!==n.dashCount||t.dashScale!==n.dashScale||t.dashCap!==n.dashCap||t.stubCap!==n.stubCap||!Tp(t.includeTypes,n.includeTypes)||!Tp(t.excludeTypes,n.excludeTypes)||t.adjustCylinderLength!==n.adjustCylinderLength||t.aromaticBonds!==n.aromaticBonds||t.multipleBonds!==n.multipleBonds||t.adjustCylinderLength&&!y5.areEqual(r.size,o.size),t.colorMode!==n.colorMode&&(e.createGeometry=!0,e.updateTransform=!0,e.updateColor=!0);const s=i.group.units[0],l=a.group.units[0];BO.isAtomic(s)&&BO.isAtomic(l)&&(Uk.areEqual(s.bonds,l.bonds)||(e.createGeometry=!0,e.updateTransform=!0,e.updateColor=!0,e.updateSize=!0))},mustRecreate:(e,t,n)=>!t.tryUseImpostor||!n},e)}(e):function(e){return Tte({defaultProps:U_.getDefaultValues(Pme),createGeometry:Rme,createLocationIterator:e=>Bme.fromGroup(e),getLoci:wme,eachLocation:_me,setUpdateState:(e,t,n,r,o,i,a)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.sizeAspectRatio!==n.sizeAspectRatio||t.radialSegments!==n.radialSegments||t.linkScale!==n.linkScale||t.linkSpacing!==n.linkSpacing||t.ignoreHydrogens!==n.ignoreHydrogens||t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant||t.linkCap!==n.linkCap||t.aromaticScale!==n.aromaticScale||t.aromaticSpacing!==n.aromaticSpacing||t.aromaticDashCount!==n.aromaticDashCount||t.dashCount!==n.dashCount||t.dashScale!==n.dashScale||t.dashCap!==n.dashCap||t.stubCap!==n.stubCap||!Tp(t.includeTypes,n.includeTypes)||!Tp(t.excludeTypes,n.excludeTypes)||t.adjustCylinderLength!==n.adjustCylinderLength||t.aromaticBonds!==n.aromaticBonds||t.multipleBonds!==n.multipleBonds;const s=i.group.units[0],l=a.group.units[0];BO.isAtomic(s)&&BO.isAtomic(l)&&(Uk.areEqual(s.bonds,l.bonds)||(e.createGeometry=!0,e.updateTransform=!0,e.updateColor=!0,e.updateSize=!0))},mustRecreate:(e,t,n)=>t.tryUseImpostor&&!!n},e)}(e)}const Fme=new RP.ElementBondIterator;function Nme(e,t,n,r){for(Fme.setElement(t,n,r);Fme.hasNext;){const t=Fme.move();return t.otherUnit.conformation.position(t.otherUnit.elements[t.otherIndex],e),e}return null}const Lme=qh();function Ume(e,t,n){const r=Vk.create(e),o=RP.Location(e,void 0,void 0,e,void 0,void 0),i=e.interUnitBonds,{edgeCount:a,edges:s}=i,{sizeFactor:l,sizeAspectRatio:c,adjustCylinderLength:u,aromaticBonds:d,multipleBonds:A}=n,f="off"===A,p="symmetric"===A,h=qh();let g;const{child:m}=e;n.includeParent&&m&&(g=t=>{const n=s[t],r=m.unitMap.get(n.unitA),o=m.unitMap.get(n.unitB),i=e.unitMap.get(n.unitA).elements[n.indexA],a=e.unitMap.get(n.unitB).elements[n.indexB];return r&&Em.has(r.elements,i)&&(!o||!Em.has(o.elements,a))});return{linkCount:a,referencePosition:t=>{const n=s[t];let r,o,i,a;if(n.unitA<n.unitB)r=e.unitMap.get(n.unitA),o=e.unitMap.get(n.unitB),i=n.indexA,a=n.indexB;else{if(!(n.unitA>n.unitB))throw new Error("same units in createInterUnitBondCylinderMesh");r=e.unitMap.get(n.unitB),o=e.unitMap.get(n.unitA),i=n.indexB,a=n.indexA}return Nme(Lme,e,r,i)||Nme(Lme,e,o,a)},position:(n,o,i,a)=>{const d=s[i],A=e.unitMap.get(d.unitA),f=e.unitMap.get(d.unitB);if(A.conformation.position(A.elements[d.indexA],n),f.conformation.position(f.elements[d.indexB],o),a&&u){const a=(n=>{const o=s[n];return r.unit=e.unitMap.get(o.unitA),r.element=r.unit.elements[o.indexA],t.size.size(r)*l})(i),u=(n=>{const o=s[n];return r.unit=e.unitMap.get(o.unitB),r.element=r.unit.elements[o.indexB],t.size.size(r)*l})(i),d=Math.min(a,u)*c,A=Math.sqrt(Math.max(0,a*a-d*d))-.05,f=Math.sqrt(Math.max(0,u*u-d*d))-.05;if(A<=.01&&f<=.01)return;qh.normalize(h,qh.sub(h,o,n)),qh.scaleAndAdd(n,n,h,A),qh.scaleAndAdd(o,o,h,-f)}},style:e=>{const t=s[e].props.order,n=mp.create(s[e].props.flag);return VM.is(n,2)||VM.is(n,4)?1:3===t?f?0:p?4:5:d&&VM.is(n,16)?7:2!==t||f?0:p?2:3},radius:n=>(n=>{const r=s[n];return o.aUnit=e.unitMap.get(r.unitA),o.aIndex=r.indexA,o.bUnit=e.unitMap.get(r.unitB),o.bIndex=r.indexB,t.size.size(o)*l})(n)*c,ignore:xme(e,n),stub:g}}function Gme(e,t,n,r,o){if(!t.interUnitBonds.edgeCount)return zK.createEmpty(o);const i=Ume(t,n,r),{cylinders:a,boundingSphere:s}=xoe(0,i,r,o);if(s)a.setBoundingSphere(s);else if(a.cylinderCount>0){const{child:e}=t,n=YT.expand(YT(),(null!==e&&void 0!==e?e:t).boundary.sphere,1*r.sizeFactor);a.setBoundingSphere(n)}return a}function jme(e,t,n,r,o){if(!t.interUnitBonds.edgeCount)return RY.createEmpty(o);const i=Ume(t,n,r),{mesh:a,boundingSphere:s}=Eoe(0,i,r,o);if(s)a.setBoundingSphere(s);else if(a.triangleCount>0){const{child:e}=t,n=YT.expand(YT(),(null!==e&&void 0!==e?e:t).boundary.sphere,1*r.sizeFactor);a.setBoundingSphere(n)}return a}const zme={...vte,...Ite,...bme,sizeFactor:U_.Numeric(.3,{min:0,max:10,step:.01}),sizeAspectRatio:U_.Numeric(2/3,{min:0,max:3,step:.01}),tryUseImpostor:U_.Boolean(!0),includeParent:U_.Boolean(!1)};function Hme(e,t,n,r){return n.tryUseImpostor&&r&&r.extensions.fragDepth?function(e){return function(e,t){return yte({...e,setUpdateState:(t,n,r,o,i,a,s)=>{e.setUpdateState(t,n,r,o,i,a,s),y5.areEqual(o.size,i.size)||(t.updateSize=!0)},geometryUtils:zK.Utils},t)}({defaultProps:U_.getDefaultValues(zme),createGeometry:Gme,createLocationIterator:(e,t)=>Bme.fromStructure(e,{includeLocation2:"interpolate"===t.colorMode}),getLoci:Sme,eachLocation:Tme,setUpdateState:(e,t,n,r,o,i,a)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.sizeAspectRatio!==n.sizeAspectRatio||t.linkScale!==n.linkScale||t.linkSpacing!==n.linkSpacing||t.ignoreHydrogens!==n.ignoreHydrogens||t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant||t.linkCap!==n.linkCap||t.aromaticScale!==n.aromaticScale||t.aromaticSpacing!==n.aromaticSpacing||t.aromaticDashCount!==n.aromaticDashCount||t.dashCount!==n.dashCount||t.dashScale!==n.dashScale||t.dashCap!==n.dashCap||t.stubCap!==n.stubCap||!Tp(t.includeTypes,n.includeTypes)||!Tp(t.excludeTypes,n.excludeTypes)||t.adjustCylinderLength!==n.adjustCylinderLength||t.multipleBonds!==n.multipleBonds,t.colorMode!==n.colorMode&&(e.createGeometry=!0,e.updateTransform=!0,e.updateColor=!0),i.interUnitBonds!==a.interUnitBonds&&(e.createGeometry=!0,e.updateTransform=!0,e.updateColor=!0,e.updateSize=!0)},mustRecreate:(e,t,n)=>!t.tryUseImpostor||!n},e)}(e):function(e){return bte({defaultProps:U_.getDefaultValues(zme),createGeometry:jme,createLocationIterator:e=>Bme.fromStructure(e),getLoci:Sme,eachLocation:Tme,setUpdateState:(e,t,n,r,o,i,a)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.sizeAspectRatio!==n.sizeAspectRatio||t.radialSegments!==n.radialSegments||t.linkScale!==n.linkScale||t.linkSpacing!==n.linkSpacing||t.ignoreHydrogens!==n.ignoreHydrogens||t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant||t.linkCap!==n.linkCap||t.aromaticScale!==n.aromaticScale||t.aromaticSpacing!==n.aromaticSpacing||t.aromaticDashCount!==n.aromaticDashCount||t.dashCount!==n.dashCount||t.dashScale!==n.dashScale||t.dashCap!==n.dashCap||t.stubCap!==n.stubCap||!Tp(t.includeTypes,n.includeTypes)||!Tp(t.excludeTypes,n.excludeTypes)||t.adjustCylinderLength!==n.adjustCylinderLength||t.multipleBonds!==n.multipleBonds||t.adjustCylinderLength&&!y5.areEqual(r.size,o.size),i.interUnitBonds!==a.interUnitBonds&&(e.createGeometry=!0,e.updateTransform=!0,e.updateColor=!0,e.updateSize=!0)},mustRecreate:(e,t,n)=>t.tryUseImpostor&&!!n},e)}(e)}const Vme=gh.add3,qme=gh.add;var Yme;!function(e){e.create=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2048,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=arguments.length>2?arguments[2]:void 0;const r=gh.create(Float32Array,3,t,n?n.centerBuffer.ref.value:e),o=gh.create(Float32Array,1,t,n?n.groupBuffer.ref.value:e);return{add:(e,t,n,i)=>{Vme(r,e,t,n),qme(o,i)},getSpheres:()=>{const e=gh.compact(r,!0),t=gh.compact(o,!0);return XW.create(e,t,r.elementCount,n)}}}}(Yme||(Yme={}));const Xme=qh.add;function Wme(e,t,n){const{ignoreHydrogens:r,ignoreHydrogensVariant:o,traceOnly:i}=n,a=BO.isCoarse(t),{child:s}=e,l=null===s||void 0===s?void 0:s.unitMap.get(t.id);if(s&&!l)throw new Error("expected childUnit to exist if child exists");if(s||r||i)return n=>!!l&&!Em.has(l.elements,n)||!a&&r&&ite(e,t,n,o)||i&&!ste(t,n)}function Kme(e,t,n,r,o,i){const{child:a}=n,s=null===a||void 0===a?void 0:a.unitMap.get(t.id);if(a&&!s)return RY.createEmpty(i);const{detail:l,sizeFactor:c,stride:u}=o,{elements:d,conformation:A}=t,f=d.length,p=f*nX(l),h=ZX.createState(p,p/2,i),g=qh(),m=Wme(n,t,o),y=Vk.create(n,t),v=r.size.size,b=qh();let C=0,I=0;for(let w=0;w<f;w++){if(u&&w%u!==0)continue;if(m&&m(d[w]))continue;A.invariantPosition(d[w],g),Xme(b,b,g),I+=1,y.element=d[w];const e=v(y);e>C&&(C=e),h.currentGroup=w,aX(h,g,e*c,l)}const E=i?YT.clone(i.boundingSphere):void 0,x=ZX.getMesh(h);if(0===I)return x;let B;return qh.scale(b,b,1/I),B=E&&qh.distance(b,E.center)/E.radius<.1?E:YT.expand(YT(),(null!==s&&void 0!==s?s:t).boundary.sphere,C*c+.05),x.setBoundingSphere(B),x}function Jme(e,t,n,r,o,i){const{child:a}=n,s=null===a||void 0===a?void 0:a.unitMap.get(t.id);if(a&&!s)return XW.createEmpty(i);const{sizeFactor:l,stride:c}=o,{elements:u,conformation:d}=t,A=u.length,f=Yme.create(A,A/2,i),p=qh(),h=Wme(n,t,o),g=Vk.create(n,t),m=r.size.size,y=qh();let v=0,b=0;if(c&&c>1||h||"uniform"!==r.size.granularity)for(let x=0;x<A;x++){if(c&&x%c!==0)continue;if(h&&h(u[x]))continue;d.invariantPosition(u[x],p),f.add(p[0],p[1],p[2],x),Xme(y,y,p),b+=1,g.element=u[x];const e=m(g);e>v&&(v=e)}else{for(let e=0;e<A;e++)d.invariantPosition(u[e],p),f.add(p[0],p[1],p[2],e),Xme(y,y,p);b=A,v=m(g)}const C=i?YT.clone(i.boundingSphere):void 0,I=f.getSpheres();if(0===b)return I;let E;return qh.scale(y,y,1/b),E=C&&qh.distance(y,C.center)/C.radius<.1?C:YT.expand(YT(),(null!==s&&void 0!==s?s:t).boundary.sphere,v*l+.05),I.setBoundingSphere(E),I}function Zme(e,t,n){let r=!1;if(!cG.is(e))return!1;const{structure:o,group:i}=t;if(!aG.areEquivalent(e.structure,o))return!1;const a=i.elements.length,{unitIndexMap:s}=i;for(const l of e.elements){const e=s.get(l.unit.id);if(void 0!==e){const t=e*a;if(Gg.is(l.indices)){const e=t+Gg.start(l.indices),o=t+Gg.end(l.indices);n(Gg.ofBounds(e,o))&&(r=!0)}else for(let e=0,o=l.indices.length;e<o;e++){const i=l.indices[e];let a=e+1;for(;a<o&&l.indices[a]===i;)a++;e=a-1;const s=l.indices[e];r=n(Gg.ofRange(t+i,t+s))||r}}}return r}function $me(e,t,n){const{objectId:r,instanceId:o,groupId:i}=e;if(n===r){const{structure:e,group:n}=t,r=n.units[o],a=ey.ofSingleton(i);return cG(e.target,[{unit:r,indices:a}])}return S5}function eye(e,t,n,r,o){const{child:i}=t,{detail:a,sizeFactor:s,stride:l}=r,{getSerialIndex:c}=t.serialMapping,u=t.elementCount*nX(a),d=ZX.createState(u,u/2,o),A=n.size.size,f=qh();let p=0,h=0;for(const v of t.units){const e=null===i||void 0===i?void 0:i.unitMap.get(v.id);if(i&&!e)continue;const{elements:n,conformation:o}=v,u=n.length,g=qh(),m=Wme(t,v,r),y=Vk.create(t,v);for(let t=0;t<u;t++){const e=n[t];if(l&&t%l!==0)continue;if(m&&m(e))continue;o.position(e,g),Xme(f,f,g),h+=1,y.element=e;const r=A(y);r>p&&(p=r),d.currentGroup=c(v,e),aX(d,g,r*s,a)}}const g=o?YT.clone(o.boundingSphere):void 0,m=ZX.getMesh(d);if(0===h)return m;let y;return qh.scale(f,f,1/h),y=g&&qh.distance(f,g.center)/g.radius<1?g:YT.expand(YT(),(null!==i&&void 0!==i?i:t).boundary.sphere,p*s+.05),m.setBoundingSphere(y),m}function tye(e,t,n,r,o){const{child:i}=t,{sizeFactor:a,stride:s}=r,{getSerialIndex:l}=t.serialMapping,c=t.elementCount,u=Yme.create(c,c/2,o),d=n.size.size,A=qh();let f=0,p=0;for(const y of t.units){const e=null===i||void 0===i?void 0:i.unitMap.get(y.id);if(i&&!e)return XW.createEmpty(o);const{elements:a,conformation:c}=y,h=a.length,g=qh(),m=Wme(t,y,r),v=Vk.create(t,y);if(s&&s>1||m||"uniform"!==n.size.granularity)for(let t=0;t<h;t++){const e=a[t];if(s&&t%s!==0)continue;if(m&&m(e))continue;c.position(e,g),u.add(g[0],g[1],g[2],l(y,e)),Xme(A,A,g),p+=1,v.element=e;const n=d(v);n>f&&(f=n)}else{for(let e=0;e<h;e++){const t=a[e];c.position(t,g),u.add(g[0],g[1],g[2],l(y,t)),Xme(A,A,g)}p+=h,f=d(v)}}const h=o?YT.clone(o.boundingSphere):void 0,g=u.getSpheres();if(0===p)return g;let m;return qh.scale(A,A,1/p),m=h&&qh.distance(A,h.center)/h.radius<1?h:YT.expand(YT(),(null!==i&&void 0!==i?i:t).boundary.sphere,f*a+.05),g.setBoundingSphere(m),g}function nye(e,t,n){let r=!1;if(!cG.is(e))return!1;if(!aG.areEquivalent(e.structure,t))return!1;const{cumulativeUnitElementCount:o}=t.serialMapping;for(const i of e.elements){const e=t.unitIndexMap.get(i.unit.id);if(void 0!==e)if(Gg.is(i.indices)){const t=o[e]+Gg.start(i.indices),a=o[e]+Gg.end(i.indices);n(Gg.ofBounds(t,a))&&(r=!0)}else for(let t=0,a=i.indices.length;t<a;t++){const a=o[e]+i.indices[t];n(Gg.ofSingleton(a))&&(r=!0)}}return r}function rye(e,t,n){const{objectId:r,groupId:o}=e;if(n===r){const{unitIndices:e,cumulativeUnitElementCount:n}=t.serialMapping,r=e[o],i=t.units[r],a=o-n[r];return cG(t,[{unit:i,indices:ey.ofSingleton(a)}])}return S5}var oye;!function(e){e.fromGroup=function(e){const{group:t,structure:n}=e,r=t.elements.length,o=t.units.length,i=Vk.create(n);return xT(r,o,1,((e,n)=>{const r=t.units[n];return i.unit=r,i.element=r.elements[e],i}))},e.fromStructure=function(e){const{units:t,elementCount:n}=e,r=n,{unitIndices:o,elementIndices:i}=e.serialMapping,a=Vk.create(e);return xT(r,1,1,(e=>(a.unit=t[o[e]],a.element=i[e],a)),!0)}}(oye||(oye={}));const iye={sizeFactor:U_.Numeric(1,{min:0,max:10,step:.1}),detail:U_.Numeric(0,{min:0,max:3,step:1},Fk.CustomQualityParamInfo),ignoreHydrogens:U_.Boolean(!1),ignoreHydrogensVariant:U_.Select("all",U_.arrayToOptions(["all","non-polar"])),traceOnly:U_.Boolean(!1),tryUseImpostor:U_.Boolean(!0),stride:U_.Numeric(1,{min:1,max:100,step:1})},aye={...Dte,...kte,...iye};function sye(e,t,n,r){return n.tryUseImpostor&&r&&r.extensions.fragDepth&&r.extensions.textureFloat?function(e){return Qte({defaultProps:U_.getDefaultValues(aye),createGeometry:Jme,createLocationIterator:oye.fromGroup,getLoci:$me,eachLocation:Zme,setUpdateState:(e,t,n)=>{e.createGeometry=t.ignoreHydrogens!==n.ignoreHydrogens||t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant||t.traceOnly!==n.traceOnly||t.stride!==n.stride},mustRecreate:(e,t,n)=>!t.tryUseImpostor||!n},e)}(e):function(e){return Tte({defaultProps:U_.getDefaultValues(aye),createGeometry:Kme,createLocationIterator:oye.fromGroup,getLoci:$me,eachLocation:Zme,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.detail!==n.detail||t.ignoreHydrogens!==n.ignoreHydrogens||t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant||t.traceOnly!==n.traceOnly||t.stride!==n.stride},mustRecreate:(e,t,n)=>t.tryUseImpostor&&!!n},e)}(e)}const lye={...vte,...Cte,...iye};function cye(e,t,n,r){return n.tryUseImpostor&&r&&r.extensions.fragDepth&&r.extensions.textureFloat?function(e){return function(e,t){return yte({...e,setUpdateState:(t,n,r,o,i,a,s)=>{e.setUpdateState(t,n,r,o,i,a,s),y5.areEqual(o.size,i.size)||(t.updateSize=!0)},geometryUtils:XW.Utils},t)}({defaultProps:U_.getDefaultValues(lye),createGeometry:tye,createLocationIterator:oye.fromStructure,getLoci:rye,eachLocation:nye,setUpdateState:(e,t,n)=>{e.createGeometry=t.ignoreHydrogens!==n.ignoreHydrogens||t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant||t.traceOnly!==n.traceOnly||t.stride!==n.stride},mustRecreate:(e,t,n)=>!t.tryUseImpostor||!n},e)}(e):function(e){return bte({defaultProps:U_.getDefaultValues(lye),createGeometry:eye,createLocationIterator:oye.fromStructure,getLoci:rye,eachLocation:nye,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.detail!==n.detail||t.ignoreHydrogens!==n.ignoreHydrogens||t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant||t.traceOnly!==n.traceOnly||t.stride!==n.stride},mustRecreate:(e,t,n)=>t.tryUseImpostor&&!!n},e)}(e)}const uye={"element-sphere":(e,t)=>_te("Element sphere",e,t,sye),"intra-bond":(e,t)=>_te("Intra-unit bond cylinder",e,t,Ome),"inter-bond":(e,t)=>wee("Inter-unit bond cylinder",e,t,Hme)},dye={...aye,traceOnly:U_.Boolean(!1,{isHidden:!0}),...Pme,...zme,includeParent:U_.Boolean(!1),unitKinds:lte(["atomic"]),sizeFactor:U_.Numeric(.15,{min:.01,max:10,step:.01}),sizeAspectRatio:U_.Numeric(2/3,{min:.01,max:3,step:.01}),visuals:U_.MultiSelect(["element-sphere","intra-bond","inter-bond"],U_.objectToOptions(uye)),bumpFrequency:U_.Numeric(0,{min:0,max:10,step:.1},Fk.ShadingCategory)};const Aye={name:"ball-and-stick",label:"Ball & Stick",description:"Displays atoms as spheres and bonds as cylinders.",factory:function(e,t){return b6.createMulti("Ball & Stick",e,t,Ute,uye)},getParams:function(e,t){if(aG.getSize(t)>=aG.Size.Huge){const e=U_.clone(dye);return e.visuals.defaultValue=["element-sphere","intra-bond"],e}return dye},defaultValues:U_.getDefaultValues(dye),defaultColorTheme:{name:"element-symbol"},defaultSizeTheme:{name:"physical"},isApplicable:e=>e.elementCount>0,getData:(e,t)=>t.includeParent?e.asParent():e,mustRecreate:(e,t)=>e.includeParent!==t.includeParent};function fye(e,t,n,r,o){const{links:i,elements:a}=t.carbohydrates,{linkSizeFactor:s}=r,l=Vk.create(t),c={linkCount:i.length,position:(e,t,n)=>{const r=i[n];qh.copy(e,a[r.carbohydrateIndexA].geometry.center),qh.copy(t,a[r.carbohydrateIndexB].geometry.center)},radius:e=>{const t=i[e],r=a[t.carbohydrateIndexA],o=r.unit.rings.all[r.ringIndex];return l.unit=r.unit,l.element=r.unit.elements[o[0]],n.size.size(l)*s}},{mesh:u,boundingSphere:d}=Eoe(0,c,r,o);if(d)u.setBoundingSphere(d);else if(u.triangleCount>0){const e=YT.expand(YT(),t.boundary.sphere,1*s);u.setBoundingSphere(e)}return u}const pye={...Dte,...doe,linkSizeFactor:U_.Numeric(.3,{min:0,max:3,step:.01})};function hye(e){return bte({defaultProps:U_.getDefaultValues(pye),createGeometry:fye,createLocationIterator:gye,getLoci:mye,eachLocation:vye,setUpdateState:(e,t,n)=>{e.createGeometry=t.linkSizeFactor!==n.linkSizeFactor||t.radialSegments!==n.radialSegments||t.linkCap!==n.linkCap}},e)}function gye(e){const{elements:t,links:n}=e.carbohydrates,r=n.length,o=Vk.create(e);return xT(r,1,1,(e=>{const r=n[e],i=t[r.carbohydrateIndexA],a=i.unit.rings.all[i.ringIndex];return o.unit=i.unit,o.element=i.unit.elements[a[0]],o}),!0)}function mye(e,t,n){const{objectId:r,groupId:o}=e;if(n===r){const{links:e,elements:n}=t.carbohydrates,r=e[o],i=n[r.carbohydrateIndexA],a=n[r.carbohydrateIndexB];return cG.union(Yee(t,i.unit,i.residueIndex,i.altId),Yee(t,a.unit,a.residueIndex,a.altId))}return S5}const yye=new Set;function vye(e,t,n){let r=!1;if(!cG.is(e))return!1;if(!aG.areEquivalent(e.structure,t))return!1;const{getLinkIndices:o}=t.carbohydrates;for(const{unit:i,indices:a}of e.elements)BO.isAtomic(i)&&(yye.clear(),ey.forEach(a,(e=>{const t=o(i,i.elements[e]);for(let o=0,i=t.length;o<i;++o)yye.has(t[o])||(yye.add(t[o]),n(Gg.ofSingleton(t[o]))&&(r=!0))})));return r}const bye=qh.create(0,0,-.5),Cye=qh.create(0,0,.5),Iye=qh(),Eye=qh(),xye=qh(),Bye=qh();function wye(e){const t=e.length/3,n=(3===t?1:4===t?2:t)+t,r=jY(n,4===t?3*t+4:3*n);for(let o=0;o<t;++o){const n=(o+1)%t;qh.set(Iye,e[3*o],e[3*o+1],-.5),qh.set(Eye,e[3*n],e[3*n+1],-.5),r.add(Iye,Eye,Cye)}if(3===t)qh.set(Iye,e[0],e[1],-.5),qh.set(Eye,e[3],e[4],-.5),qh.set(xye,e[6],e[7],-.5),r.add(xye,Eye,Iye);else if(4===t)qh.set(Iye,e[0],e[1],-.5),qh.set(Eye,e[3],e[4],-.5),qh.set(xye,e[6],e[7],-.5),qh.set(Bye,e[9],e[10],-.5),r.addQuad(Bye,xye,Eye,Iye);else for(let o=0;o<t;++o){const n=(o+1)%t;qh.set(Iye,e[3*o],e[3*o+1],-.5),qh.set(Eye,e[3*n],e[3*n+1],-.5),r.add(bye,Eye,Iye)}return r.getPrimitive()}let _ye,Sye;const Dye={pointCount:5,outerRadius:1,innerRadius:.5,thickness:.3},Tye=qh.zero(),kye=qh.zero(),Qye=qh.zero(),Mye=qh.zero(),Rye=qh.zero();const Pye=[.5,0,0,-.5,0,0,0,.5,0,0,-.5,0,0,0,.5,0,0,-.5],Oye=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],Fye=[0,2,4,0,4,3,1,2,5,1,5,3];let Nye,Lye;qY(Pye,[0,2,1,3,2,1,3,0,0,4,1,4,2,4,3,4,0,5,1,5,2,5,3,5]);const Uye=Yh.identity(),Gye=qh(),jye=qh(),zye=1.612,Hye=OW(),Vye=(RW||(RW=QW(!0)),RW),qye=(_ye||(_ye=wye(lX(8,!0))),_ye),Yye=function(){if(!Sye){const e=lX(8,!0),t=new Float32Array(30);for(let n=0;n<8;++n)t[3*n]=e[3*n],t[3*n+1]=e[3*n+1],t[3*n+2]=-.5;t[24]=0,t[25]=0,t[26]=-.5,t[27]=0,t[28]=0,t[29]=.5;Sye=UY(t,[0,1,8,1,2,8,4,5,8,5,6,8,2,3,9,3,4,9,6,7,9,7,0,9])}return Sye}(),Xye=function(e){const{outerRadius:t,innerRadius:n,thickness:r,pointCount:o}={...Dye,...e},i=jY(2*o*2),a=new Float32Array(2*o),s=new Float32Array(2*o);for(let l=0;l<o;++l){const e=2*l,r=2*l+1,i=(e+1)/o*Math.PI,c=(r+1)/o*Math.PI;s[e]=Math.cos(i)*t,s[r]=Math.sin(i)*t,a[e]=Math.cos(c)*n,a[r]=Math.sin(c)*n}qh.set(Tye,0,0,r/2),qh.set(kye,0,0,-r/2);for(let l=0;l<o;++l){const e=(l+1)%o;qh.set(Qye,s[2*l],s[2*l+1],0),qh.set(Mye,a[2*l],a[2*l+1],0),qh.set(Rye,s[2*e],s[2*e+1],0),i.add(Tye,Qye,Mye),i.add(Mye,Qye,kye),i.add(Tye,Mye,Rye),i.add(Rye,Mye,kye)}return i.getPrimitive()}({outerRadius:1,innerRadius:.5,thickness:.5,pointCount:5}),Wye=(Nye||(Nye=UY(Pye,Oye)),Nye),Kye=(Lye||(Lye=UY(Pye,Fye)),Lye),Jye=(mX||(mX=gX(lX(4,!1))),mX),Zye=(yX||(yX=gX(lX(5,!1))),yX),$ye=(vX||(vX=gX(lX(6,!1))),vX),eve=(bX||(bX=gX(lX(6,!0))),bX),tve=(CX||(CX=gX(lX(7,!1))),CX);function nve(e,t,n,r,o){const i=ZX.createState(256,128,o),{detail:a,sizeFactor:s}=r,l=t.carbohydrates,c=l.elements.length,u=Vk.create(t);for(let d=0;d<c;++d){const e=l.elements[d],t=e.unit.rings.all[e.ringIndex],r=zQ(e.component.type,t.length);u.unit=e.unit,u.element=e.unit.elements[t[0]];const o=n.size.size(u),c=o*s,A=o*s*zye,{center:f,normal:p,direction:h}=e.geometry;switch(qh.add(jye,f,h),Yh.targetTo(Uye,f,jye,p),Yh.setTranslation(Uye,f),i.currentGroup=2*d,r){case LQ.FilledSphere:aX(i,f,c,a);break;case LQ.FilledCube:Yh.scaleUniformly(Uye,Uye,A),ZX.addPrimitive(i,Uye,Hye);break;case LQ.CrossedCube:Yh.scaleUniformly(Uye,Uye,A),ZX.addPrimitive(i,Uye,Vye),Yh.mul(Uye,Uye,Yh.rotZ90X180),i.currentGroup+=1,ZX.addPrimitive(i,Uye,Vye);break;case LQ.FilledCone:Yh.scaleUniformly(Uye,Uye,1.2*A),ZX.addPrimitive(i,Uye,qye);break;case LQ.DevidedCone:Yh.scaleUniformly(Uye,Uye,1.2*A),ZX.addPrimitive(i,Uye,Yye),Yh.mul(Uye,Uye,Yh.rotZ90),i.currentGroup+=1,ZX.addPrimitive(i,Uye,Yye);break;case LQ.FlatBox:Yh.mul(Uye,Uye,Yh.rotZY90),Yh.scale(Uye,Uye,qh.set(Gye,A,A,A/2)),ZX.addPrimitive(i,Uye,Hye);break;case LQ.FilledStar:Yh.scaleUniformly(Uye,Uye,A),Yh.mul(Uye,Uye,Yh.rotZY90),ZX.addPrimitive(i,Uye,Xye);break;case LQ.FilledDiamond:Yh.mul(Uye,Uye,Yh.rotZY90),Yh.scale(Uye,Uye,qh.set(Gye,1.4*A,1.4*A,1.4*A)),ZX.addPrimitive(i,Uye,Wye);break;case LQ.DividedDiamond:Yh.mul(Uye,Uye,Yh.rotZY90),Yh.scale(Uye,Uye,qh.set(Gye,1.4*A,1.4*A,1.4*A)),ZX.addPrimitive(i,Uye,Kye),Yh.mul(Uye,Uye,Yh.rotY90),i.currentGroup+=1,ZX.addPrimitive(i,Uye,Kye);break;case LQ.FlatDiamond:Yh.mul(Uye,Uye,Yh.rotZY90),Yh.scale(Uye,Uye,qh.set(Gye,A,A/2,A/2)),ZX.addPrimitive(i,Uye,Jye);break;case LQ.DiamondPrism:Yh.mul(Uye,Uye,Yh.rotZY90),Yh.scale(Uye,Uye,qh.set(Gye,A,A,A/2)),ZX.addPrimitive(i,Uye,Jye);break;case LQ.PentagonalPrism:case LQ.Pentagon:Yh.mul(Uye,Uye,Yh.rotZY90),Yh.scale(Uye,Uye,qh.set(Gye,A,A,A/2)),ZX.addPrimitive(i,Uye,Zye);break;case LQ.HexagonalPrism:Yh.mul(Uye,Uye,Yh.rotZY90),Yh.scale(Uye,Uye,qh.set(Gye,A,A,A/2)),ZX.addPrimitive(i,Uye,$ye);break;case LQ.HeptagonalPrism:Yh.mul(Uye,Uye,Yh.rotZY90),Yh.scale(Uye,Uye,qh.set(Gye,A,A,A/2)),ZX.addPrimitive(i,Uye,tve);break;case LQ.FlatHexagon:default:Yh.mul(Uye,Uye,Yh.rotZYZ90),Yh.scale(Uye,Uye,qh.set(Gye,A/1.5,A,A/2)),ZX.addPrimitive(i,Uye,eve)}}return ZX.getMesh(i)}const rve={...vte,detail:U_.Numeric(0,{min:0,max:3,step:1},Fk.CustomQualityParamInfo),sizeFactor:U_.Numeric(1.75,{min:0,max:10,step:.01})};function ove(e){return bte({defaultProps:U_.getDefaultValues(rve),createGeometry:nve,createLocationIterator:ive,getLoci:ave,eachLocation:lve,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.detail!==n.detail}},e)}function ive(e){const t=e.carbohydrates.elements,n=2*t.length,r=Vk.create(e);return xT(n,1,1,(function(e,n){const o=t[Math.floor(e/2)],i=o.unit.rings.all[o.ringIndex];return r.unit=o.unit,r.element=o.unit.elements[i[0]],r}),!0,(function(e,t){return e%2===1}))}function ave(e,t,n){const{objectId:r,groupId:o}=e;if(n===r){const e=t.carbohydrates.elements[Math.floor(o/2)];return Yee(t,e.unit,e.residueIndex,e.altId)}return S5}const sve=new Set;function lve(e,t,n){const{getElementIndices:r}=t.carbohydrates;let o=!1;if(!cG.is(e))return!1;if(!aG.areEquivalent(e.structure,t))return!1;for(const{unit:i,indices:a}of e.elements)BO.isAtomic(i)&&(sve.clear(),ey.forEach(a,(e=>{const t=r(i,i.elements[e]);for(let r=0,i=t.length;r<i;++r)sve.has(t[r])||(sve.add(t[r]),n(Gg.ofSingleton(2*t[r]))&&(o=!0))})));return o}function cve(e,t,n,r,o){const{terminalLinks:i,elements:a}=t.carbohydrates,{terminalLinkSizeFactor:s}=r,l=Vk.create(t),c={linkCount:i.length,position:(e,t,n)=>{const r=i[n];r.fromCarbohydrate?(qh.copy(e,a[r.carbohydrateIndex].geometry.center),r.elementUnit.conformation.position(r.elementUnit.elements[r.elementIndex],t)):(r.elementUnit.conformation.position(r.elementUnit.elements[r.elementIndex],e),qh.copy(t,a[r.carbohydrateIndex].geometry.center))},radius:e=>{const t=i[e];if(t.fromCarbohydrate){const e=a[t.carbohydrateIndex],n=e.unit.rings.all[e.ringIndex];l.unit=e.unit,l.element=e.unit.elements[n[0]]}else l.unit=t.elementUnit,l.element=t.elementUnit.elements[t.elementIndex];return n.size.size(l)*s},style:e=>{const t=i[e],n=t.elementUnit.elements[t.elementIndex],r=sR(t.elementUnit.model.atomicHierarchy.atoms.type_symbol.value(n));return aR.has(r)?1:0}},{mesh:u,boundingSphere:d}=Eoe(0,c,r,o);if(d)u.setBoundingSphere(d);else if(u.triangleCount>0){const e=YT.expand(YT(),t.boundary.sphere,1*s);u.setBoundingSphere(e)}return u}const uve={...Dte,...doe,terminalLinkSizeFactor:U_.Numeric(.2,{min:0,max:3,step:.01})};function dve(e){return bte({defaultProps:U_.getDefaultValues(uve),createGeometry:cve,createLocationIterator:Ave,getLoci:fve,eachLocation:hve,setUpdateState:(e,t,n)=>{e.createGeometry=t.terminalLinkSizeFactor!==n.terminalLinkSizeFactor||t.radialSegments!==n.radialSegments||t.linkCap!==n.linkCap}},e)}function Ave(e){const{elements:t,terminalLinks:n}=e.carbohydrates,r=n.length,o=Vk.create(e);return xT(r,1,1,(e=>{const r=n[e];if(r.fromCarbohydrate){const e=t[r.carbohydrateIndex],n=e.unit.rings.all[e.ringIndex];o.unit=e.unit,o.element=e.unit.elements[n[0]]}else o.unit=r.elementUnit,o.element=r.elementUnit.elements[r.elementIndex];return o}),!0)}function fve(e,t,n){const{objectId:r,groupId:o}=e;if(n===r){const{terminalLinks:e,elements:n}=t.carbohydrates,r=e[o],i=n[r.carbohydrateIndex];return cG.union(Yee(t,i.unit,i.residueIndex,i.altId),function(e,t,n){const{elements:r,model:o}=t,{label_alt_id:i}=o.atomicHierarchy.atoms,a=i.value(n);if(-1!==ey.indexOf(r,n)){const{index:r}=o.atomicHierarchy.residueAtomSegments;return Yee(e,t,r[n],a)}return cG(e,[])}(t,r.elementUnit,r.elementUnit.elements[r.elementIndex]))}return S5}const pve=new Set;function hve(e,t,n){let r=!1;if(!cG.is(e))return!1;if(!aG.areEquivalent(e.structure,t))return!1;const{getTerminalLinkIndices:o}=t.carbohydrates;for(const{unit:i,indices:a}of e.elements)BO.isAtomic(i)&&(pve.clear(),ey.forEach(a,(e=>{const t=o(i,i.elements[e]);for(let o=0,i=t.length;o<i;++o)pve.has(t[o])||(pve.add(t[o]),n(Gg.ofSingleton(t[o]))&&(r=!0))})));return r}const gve={"carbohydrate-symbol":(e,t)=>wee("Carbohydrate symbol mesh",e,t,ove),"carbohydrate-link":(e,t)=>wee("Carbohydrate link cylinder",e,t,hye),"carbohydrate-terminal-link":(e,t)=>wee("Carbohydrate terminal link cylinder",e,t,dve)},mve={...rve,...pye,...uve,visuals:U_.MultiSelect(["carbohydrate-symbol","carbohydrate-link","carbohydrate-terminal-link"],U_.objectToOptions(gve)),bumpFrequency:U_.Numeric(0,{min:0,max:10,step:.1},Fk.ShadingCategory)};const yve={name:"carbohydrate",label:"Carbohydrate",description:"Displays carbohydrate symbols (3D SNFG).",factory:function(e,t){return b6.createMulti("Carbohydrate",e,t,Ute,gve)},getParams:function(e,t){return mve},defaultValues:U_.getDefaultValues(mve),defaultColorTheme:{name:"carbohydrate-symbol"},defaultSizeTheme:{name:"uniform"},isApplicable:e=>e.models.some((e=>Wj.hasCarbohydrate(e)))};function vve(e,t){switch(e.kind){case 0:return function(e,t){const n=e.model.atomicRanges.cyclicPolymerMap,r=JP.transientSegments(pbe(e),e.elements),o=ty.transientSegments(e.model.atomicHierarchy.residueAtomSegments,e.elements),i=e.model.atomicHierarchy.derived.residue.traceElementIndex,{moleculeType:a}=e.model.atomicHierarchy.derived.residue;let s=-1,l=-1,c=!0,u=-1,d=0;for(;r.hasNext;){for(c=!0,u=d,o.setSegment(r.move());o.hasNext;){if(c){const e=o.move().index;if(++d,!o.hasNext)continue;c=!1,l=e}s=l,l=o.move().index,t(i[s],i[l],d-1,d,a[s]),++d}n.has(l)&&(s=l,l=n.get(s),t(i[s],i[l],d-1,u,a[s]))}}(e,t);case 1:case 2:return function(e,t){const n=JP.transientSegments(pbe(e),e.elements),{elements:r}=e;let o=!0,i=0;for(;n.hasNext;){o=!0;const e=n.move();for(let n=e.start,a=e.end;n<a;++n){if(o){if(++n,++i,n>a)continue;o=!1}t(r[n-1],r[n],i-1,i,0),++i}}}(e,t)}}function bve(e,t){switch(e.kind){case 0:return function(e,t){const n=JP.transientSegments(pbe(e),e.elements),r=ty.transientSegments(e.model.atomicHierarchy.residueAtomSegments,e.elements),o=e.model.atomicHierarchy.derived.residue.traceElementIndex;let i=0;for(;n.hasNext;)for(r.setSegment(n.move());r.hasNext;){t(o[r.move().index],i),++i}}(e,t);case 1:case 2:return function(e,t){const n=JP.transientSegments(pbe(e),e.elements),{elements:r}=e;let o=0;for(;n.hasNext;){const e=n.move();for(let n=e.start,i=e.end;n<i;++n)t(r[n],o),++o}}(e,t)}}function Cve(e,t){return{centerA:Vk.create(e,t),centerB:Vk.create(e,t)}}class Ive{move(){const{elements:e,residueIndex:t}=this.unit,n=this.gapIt.move();return this.value.centerA.element=this.traceElementIndex[t[e[n.start]]],this.value.centerB.element=this.traceElementIndex[t[e[n.end-1]]],this.hasNext=this.gapIt.hasNext,this.value}constructor(e,t){this.unit=t,this.hasNext=!1,this.traceElementIndex=t.model.atomicHierarchy.derived.residue.traceElementIndex,this.gapIt=JP.transientSegments(hbe(t),t.elements),this.value=Cve(e,t),this.hasNext=this.gapIt.hasNext}}class Eve{move(){const e=this.gapIt.move();return this.value.centerA.element=this.unit.elements[e.start],this.value.centerB.element=this.unit.elements[e.end-1],this.hasNext=this.gapIt.hasNext,this.value}constructor(e,t){this.unit=t,this.hasNext=!1,this.gapIt=JP.transientSegments(hbe(t),t.elements),this.value=Cve(e,t),this.hasNext=this.gapIt.hasNext}}function xve(e){const{x:t,y:n,z:r}=e.atomicConformation,{polymerType:o,traceElementIndex:i}=e.atomicHierarchy.derived.residue,a=o.length,s=ey.ofBounds(0,e.atomicConformation.atomId.rowCount),l=JP.transientSegments(e.atomicRanges.polymerRanges,s),c=ty.transientSegments(e.atomicHierarchy.residueAtomSegments,s),u=new Float32Array(3*a),d=new Float32Array(3*a);let A=0,f=-1,p=-1;const h=qh(),g=qh(),m=qh(),y=qh(),v=qh(),b=qh(),C=qh(),I=qh(),E=qh(),x=qh(),B=qh(),w=qh(),_=qh(),S=qh();for(;l.hasNext;){const e=l.move();for(c.setSegment(e),A=-1,p=-1;c.hasNext;){A+=1;const{index:e}=c.move();0===A&&(p=e),f=e-2;const o=3*f;qh.copy(h,g),qh.copy(g,m),qh.copy(m,y);const a=i[e];if(qh.set(y,t[a],n[a],r[a]),A<3)continue;qh.sub(v,g,h),qh.sub(b,m,g),qh.sub(C,y,m),qh.sub(B,v,b),qh.sub(w,b,C),qh.cross(_,B,w),qh.normalize(_,_),qh.toArray(_,d,o);const s=Math.cos(qh.angle(B,w)),l=qh.magnitude(B),x=qh.magnitude(w),D=Math.sqrt(x*l)/Math.max(2,2*(1-s));qh.scale(I,B,D/l),qh.sub(I,g,I),qh.toArray(I,u,o),qh.scale(E,w,D/x),qh.sub(E,m,E),qh.toArray(E,u,o+3),qh.copy(S,_)}const o=3*p;qh.fromArray(I,u,o+3),qh.fromArray(E,u,o+6),qh.normalize(_,qh.sub(_,I,E));const a=i[p];qh.set(h,t[a],n[a],r[a]),qh.copy(x,h),qh.projectPointOnVector(x,x,_,I),qh.toArray(x,u,o);const s=f+2,D=3*s;qh.fromArray(I,u,D-3),qh.fromArray(E,u,D-6),qh.normalize(_,qh.sub(_,I,E));const T=i[s];qh.set(h,t[T],n[T],r[T]),qh.copy(x,h),qh.projectPointOnVector(x,x,_,I),qh.toArray(x,u,D)}return{centers:u}}const Bve=dG.createProvider({label:"Helix Orientation",descriptor:Jk({name:"molstar_helix_orientation"}),type:"dynamic",defaultParams:{},getParams:()=>({}),isApplicable:e=>!0,obtain:async(e,t)=>({value:xve(t)})});function wve(e){return HM.is(e,2)}function _ve(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(e.kind){case 0:return new Mve(e,t,n);case 1:case 2:return new Rve(e,t)}}const Sve=HM.create(536870912);function Dve(e,t){return{center:Vk.create(e,t),centerPrev:Vk.create(e,t),centerNext:Vk.create(e,t),first:!1,last:!1,initial:!1,final:!1,secStrucFirst:!1,secStrucLast:!1,secStrucType:Sve,moleculeType:0,coarseBackboneFirst:!1,coarseBackboneLast:!1,isCoarseBackbone:!1,p0:qh(),p1:qh(),p2:qh(),p3:qh(),p4:qh(),d12:qh(),d23:qh()}}const Tve=qh(),kve=qh(),Qve=qh();class Mve{atomicPos(e,t){-1!==t&&(e[0]=this.atomicConformation.x[t],e[1]=this.atomicConformation.y[t],e[2]=this.atomicConformation.z[t])}pos(e,t,n){const r=this.traceElementIndex[t];this.helixOrientationCenters&&wve(n)?qh.fromArray(e,this.helixOrientationCenters,3*t):this.atomicPos(e,r)}updateResidueSegmentRange(e){const{index:t}=this.residueAtomSegments;this.residueSegmentMin=t[this.polymerRanges[2*e.index]],this.residueSegmentMax=t[this.polymerRanges[2*e.index+1]]}getResidueIndex(e){if(e<this.residueSegmentMin){const t=this.cyclicPolymerMap.get(this.residueSegmentMin);e=void 0!==t?t-(this.residueSegmentMin-e-1):this.residueSegmentMin}else if(e>this.residueSegmentMax){const t=this.cyclicPolymerMap.get(this.residueSegmentMax);e=void 0!==t?t+(e-this.residueSegmentMax-1):this.residueSegmentMax}return e}getSecStruc(e){if(this.secondaryStructure){const{type:t,getIndex:n}=this.secondaryStructure,r=t[n(e)];return wve(r)?2:r}return Sve}setControlPoint(e,t,n,r,o){(function(e){return HM.is(e,4)})(o)||this.helixOrientationCenters&&wve(o)?qh.scale(e,qh.add(e,t,qh.add(e,r,qh.add(e,n,n))),1/4):qh.copy(e,n)}setFromToVector(e,t,n){this.value.isCoarseBackbone||this.helixOrientationCenters&&wve(n)?qh.set(e,1,0,0):(this.atomicPos(kve,this.directionFromElementIndex[t]),this.atomicPos(Qve,this.directionToElementIndex[t]),qh.sub(e,Qve,kve))}setDirection(e,t,n,r){qh.matchDirection(kve,t,n),qh.matchDirection(Qve,r,n),qh.scale(e,qh.add(e,kve,qh.add(e,Qve,qh.add(e,n,n))),1/4)}move(){const{residueIt:e,polymerIt:t,value:n}=this;if(0===this.state)for(;t.hasNext;)if(this.polymerSegment=t.move(),e.setSegment(this.polymerSegment),this.updateResidueSegmentRange(this.polymerSegment),e.hasNext){this.state=1;const e=this.residueAtomSegments.index[this.unit.elements[this.polymerSegment.start]],t=this.getResidueIndex(e-1);this.currSecStrucType=e===t?Sve:this.getSecStruc(t),this.nextSecStrucType=this.getSecStruc(e),this.currCoarseBackbone=-1===this.directionFromElementIndex[t]||-1===this.directionToElementIndex[t],this.nextCoarseBackbone=-1===this.directionFromElementIndex[e]||-1===this.directionToElementIndex[e];break}if(1===this.state){const{index:t}=e.move(),r=this.getResidueIndex(t-3),o=this.getResidueIndex(t-2),i=this.getResidueIndex(t-1),a=this.getResidueIndex(t+1),s=this.getResidueIndex(t+2),l=this.getResidueIndex(t+3);this.prevSecStrucType=this.getSecStruc(i),this.currSecStrucType=this.getSecStruc(t),this.nextSecStrucType=t===a?Sve:this.getSecStruc(a),this.prevCoarseBackbone=this.currCoarseBackbone,this.currCoarseBackbone=this.nextCoarseBackbone,this.nextCoarseBackbone=-1===this.directionFromElementIndex[a]||-1===this.directionToElementIndex[a],n.secStrucType=this.currSecStrucType,n.secStrucFirst=this.prevSecStrucType!==this.currSecStrucType,n.secStrucLast=this.currSecStrucType!==this.nextSecStrucType,n.isCoarseBackbone=this.currCoarseBackbone,n.coarseBackboneFirst=this.prevCoarseBackbone!==this.currCoarseBackbone,n.coarseBackboneLast=this.currCoarseBackbone!==this.nextCoarseBackbone,n.first=t===this.residueSegmentMin,n.last=t===this.residueSegmentMax,n.moleculeType=this.moleculeType[t],n.initial=t===i,n.final=t===a,n.centerPrev.element=this.traceElementIndex[i],n.center.element=this.traceElementIndex[t],n.centerNext.element=this.traceElementIndex[a];const c=this.getSecStruc(r),u=this.getSecStruc(o),d=this.getSecStruc(i),A=this.getSecStruc(t),f=this.getSecStruc(a),p=this.getSecStruc(s),h=this.getSecStruc(l);this.pos(this.p0,r,c),this.pos(this.p1,o,u),this.pos(this.p2,i,d),this.pos(this.p3,t,A),this.pos(this.p4,a,f),this.pos(this.p5,s,p),this.pos(this.p6,l,h);const g=wve(c),m=wve(u),y=wve(d),v=wve(A),b=wve(f),C=wve(p),I=wve(h);this.helixOrientationCenters&&(v!==y?v?(qh.copy(this.p0,this.p3),qh.copy(this.p1,this.p3),qh.copy(this.p2,this.p3)):y&&(qh.scale(Tve,qh.sub(Tve,this.p2,this.p3),2),qh.add(this.p2,this.p3,Tve),qh.add(this.p1,this.p2,Tve),qh.add(this.p0,this.p1,Tve)):v!==m?v?(qh.copy(this.p0,this.p2),qh.copy(this.p1,this.p2)):m&&(qh.scale(Tve,qh.sub(Tve,this.p1,this.p2),2),qh.add(this.p1,this.p2,Tve),qh.add(this.p0,this.p1,Tve)):v!==g&&(v?qh.copy(this.p0,this.p1):g&&(qh.scale(Tve,qh.sub(Tve,this.p0,this.p1),2),qh.add(this.p0,this.p1,Tve))),v!==b?v?(qh.copy(this.p4,this.p3),qh.copy(this.p5,this.p3),qh.copy(this.p6,this.p3)):b&&(qh.scale(Tve,qh.sub(Tve,this.p4,this.p3),2),qh.add(this.p4,this.p3,Tve),qh.add(this.p5,this.p4,Tve),qh.add(this.p6,this.p5,Tve)):v!==C?v?(qh.copy(this.p5,this.p4),qh.copy(this.p6,this.p4)):C&&(qh.scale(Tve,qh.sub(Tve,this.p5,this.p4),2),qh.add(this.p5,this.p4,Tve),qh.add(this.p6,this.p5,Tve)):v!==I&&(v?qh.copy(this.p6,this.p5):I&&(qh.scale(Tve,qh.sub(Tve,this.p6,this.p5),2),qh.add(this.p6,this.p5,Tve)))),this.setFromToVector(this.d01,i,d),this.setFromToVector(this.d12,t,A),this.setFromToVector(this.d23,a,f),this.setFromToVector(this.d34,s,p);const E=v&&this.helixOrientationCenters,x=1.5;t===i||A!==d&&E?(qh.setMagnitude(Tve,qh.sub(Tve,this.p3,this.p4),x),qh.add(this.p2,this.p3,Tve),qh.add(this.p1,this.p2,Tve),qh.add(this.p0,this.p1,Tve)):i===o||A!==u&&E?(qh.setMagnitude(Tve,qh.sub(Tve,this.p2,this.p3),x),qh.add(this.p1,this.p2,Tve),qh.add(this.p0,this.p1,Tve)):(o===r||A!==c&&E)&&(qh.setMagnitude(Tve,qh.sub(Tve,this.p1,this.p2),x),qh.add(this.p0,this.p1,Tve)),t===a||A!==f&&E?(qh.setMagnitude(Tve,qh.sub(Tve,this.p3,this.p2),x),qh.add(this.p4,this.p3,Tve),qh.add(this.p5,this.p4,Tve),qh.add(this.p6,this.p5,Tve)):a===s||A!==p&&E?(qh.setMagnitude(Tve,qh.sub(Tve,this.p4,this.p3),x),qh.add(this.p5,this.p4,Tve),qh.add(this.p6,this.p5,Tve)):(s===l||A!==h&&E)&&(qh.setMagnitude(Tve,qh.sub(Tve,this.p5,this.p4),x),qh.add(this.p6,this.p5,Tve)),this.setControlPoint(n.p0,this.p0,this.p1,this.p2,u),this.setControlPoint(n.p1,this.p1,this.p2,this.p3,d),this.setControlPoint(n.p2,this.p2,this.p3,this.p4,A),this.setControlPoint(n.p3,this.p3,this.p4,this.p5,f),this.setControlPoint(n.p4,this.p4,this.p5,this.p6,p),this.setDirection(n.d12,this.d01,this.d12,this.d23),this.setDirection(n.d23,this.d12,this.d23,this.d34),e.hasNext||(this.state=0)}return this.hasNext=e.hasNext||t.hasNext,this.value}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r;if(this.unit=e,this.state=0,this.p0=qh(),this.p1=qh(),this.p2=qh(),this.p3=qh(),this.p4=qh(),this.p5=qh(),this.p6=qh(),this.d01=qh(),this.d12=qh(),this.d23=qh(),this.d34=qh(),this.hasNext=!1,this.atomicConformation=e.model.atomicConformation,this.residueAtomSegments=e.model.atomicHierarchy.residueAtomSegments,this.polymerRanges=e.model.atomicRanges.polymerRanges,this.traceElementIndex=e.model.atomicHierarchy.derived.residue.traceElementIndex,this.directionFromElementIndex=e.model.atomicHierarchy.derived.residue.directionFromElementIndex,this.directionToElementIndex=e.model.atomicHierarchy.derived.residue.directionToElementIndex,this.moleculeType=e.model.atomicHierarchy.derived.residue.moleculeType,this.cyclicPolymerMap=e.model.atomicRanges.cyclicPolymerMap,this.polymerIt=JP.transientSegments(this.polymerRanges,e.elements),this.residueIt=ty.transientSegments(this.residueAtomSegments,e.elements),this.value=Dve(t,e),this.hasNext=this.residueIt.hasNext&&this.polymerIt.hasNext,n.ignoreSecondaryStructure||(this.secondaryStructure=null===(r=ML.get(t).value)||void 0===r?void 0:r.get(e.invariantId)),n.useHelixOrientation){const t=Bve.get(e.model).value;if(!t)throw new Error("missing helix-orientation");this.helixOrientationCenters=t.centers}}}class Rve{getElementIndex(e){return Math.min(Math.max(this.polymerSegment.start,e),this.polymerSegment.end-1)}pos(e,t){const n=this.unit.elements[t];e[0]=this.conformation.x[n],e[1]=this.conformation.y[n],e[2]=this.conformation.z[n]}move(){if(0===this.state)for(;this.polymerIt.hasNext;)if(this.polymerSegment=this.polymerIt.move(),this.elementIndex=this.polymerSegment.start,this.elementIndex<this.polymerSegment.end){this.state=1;break}if(1===this.state){const e=this.getElementIndex(this.elementIndex-2),t=this.getElementIndex(this.elementIndex-1),n=this.getElementIndex(this.elementIndex+1),r=this.getElementIndex(this.elementIndex+2);this.value.centerPrev.element=this.value.center.unit.elements[t],this.value.center.element=this.value.center.unit.elements[this.elementIndex],this.value.centerNext.element=this.value.center.unit.elements[n],this.pos(this.value.p0,e),this.pos(this.value.p1,t),this.pos(this.value.p2,this.elementIndex),this.pos(this.value.p3,n),this.pos(this.value.p4,r);const o=.5;this.elementIndex===t?(qh.scale(Tve,qh.sub(Tve,this.value.p2,this.value.p3),o),qh.add(this.value.p1,this.value.p2,Tve),qh.add(this.value.p0,this.value.p1,Tve)):t===e&&(qh.scale(Tve,qh.sub(Tve,this.value.p1,this.value.p2),o),qh.add(this.value.p0,this.value.p1,Tve)),this.elementIndex===n?(qh.scale(Tve,qh.sub(Tve,this.value.p2,this.value.p1),o),qh.add(this.value.p3,this.value.p2,Tve),qh.add(this.value.p4,this.value.p3,Tve)):n===r&&(qh.scale(Tve,qh.sub(Tve,this.value.p3,this.value.p2),o),qh.add(this.value.p4,this.value.p3,Tve)),this.value.first=this.elementIndex===this.polymerSegment.start,this.value.last=this.elementIndex===this.polymerSegment.end-1,this.elementIndex+1>=this.polymerSegment.end&&(this.state=0)}return this.hasNext=this.elementIndex+1<this.polymerSegment.end||this.polymerIt.hasNext,this.elementIndex+=1,this.value}constructor(e,t){switch(this.unit=e,this.state=0,this.hasNext=!1,this.polymerIt=JP.transientSegments(pbe(e),e.elements),this.value=Dve(t,e),qh.set(this.value.d12,1,0,0),qh.set(this.value.d23,1,0,0),e.kind){case 1:this.conformation=e.model.coarseConformation.spheres;break;case 2:this.conformation=e.model.coarseConformation.gaussians}this.hasNext=this.polymerIt.hasNext}}const Pve=qh.fromArray,Ove=qh.toArray,Fve=qh.normalize,Nve=qh.sub,Lve=qh.spline,Uve=qh.slerp,Gve=qh.copy,jve=qh.cross,zve=qh.orthogonalize,Hve=qh.matchDirection,Vve=qh.scale,qve=qh.add;function Yve(e){const t=e+1,n=3*t;return{curvePoints:new Float32Array(n),tangentVectors:new Float32Array(n),normalVectors:new Float32Array(n),binormalVectors:new Float32Array(n),widthValues:new Float32Array(t),heightValues:new Float32Array(t),linearSegments:e}}function Xve(e,t,n,r){!function(e,t,n,r){const{curvePoints:o,tangentVectors:i,linearSegments:a}=e,{p0:s,p1:l,p2:c,p3:u,p4:d,secStrucFirst:A,secStrucLast:f}=t,p=1-r,h=A?.5:n,g=f?.5:n;for(let m=0;m<=a;++m){const e=1*m/a;if(e<p){const t=Vp(h,n,e);Lve(Jve,s,l,c,u,e+r,t),Lve(Wve,s,l,c,u,e+r+.01,h),Lve(Kve,s,l,c,u,e+r-.01,h)}else{const t=Vp(n,g,e);Lve(Jve,l,c,u,d,e-p,t),Lve(Wve,l,c,u,d,e-p+.01,t),Lve(Kve,l,c,u,d,e-p-.01,t)}Ove(Jve,o,3*m),Fve($ve,Nve($ve,Wve,Kve)),Ove($ve,i,3*m)}}(e,t,n,r),function(e,t){const{curvePoints:n,tangentVectors:r,normalVectors:o,binormalVectors:i}=e,{d12:a,d23:s}=t,l=n.length/3;Pve(obe,r,0),Pve(ibe,r,3*(l-1)),zve(abe,obe,a),zve(sbe,ibe,s),Hve(sbe,sbe,abe),Gve(nbe,abe);const c=l-1;for(let u=0;u<l;++u){const e=Xp(0,c,u)*c,t=0===u?0:1/(l-e);Pve($ve,r,3*u),zve(ebe,$ve,Uve(Zve,nbe,sbe,t)),Ove(ebe,o,3*u),Gve(nbe,ebe),Fve(tbe,jve(tbe,$ve,ebe)),Ove(tbe,i,3*u)}for(let u=1;u<c;++u)Pve(nbe,o,3*(u-1)),Pve(ebe,o,3*u),Pve(rbe,o,3*(u+1)),Vve(ebe,qve(ebe,nbe,qve(ebe,rbe,ebe)),1/3),Ove(ebe,o,3*u),Pve($ve,r,3*u),Fve(tbe,jve(tbe,$ve,ebe)),Ove(tbe,i,3*u)}(e,t)}const Wve=qh(),Kve=qh(),Jve=qh();const Zve=qh(),$ve=qh(),ebe=qh(),tbe=qh(),nbe=qh(),rbe=qh(),obe=qh(),ibe=qh(),abe=qh(),sbe=qh();function lbe(e,t,n,r,o,i,a,s){const{widthValues:l,heightValues:c,linearSegments:u}=e,d=1-s;for(let A=0;A<=u;++A){const e=1*A/u;e<d?(l[A]=Vp(t,n,e+s),c[A]=Vp(o,i,e+s)):(l[A]=Vp(n,r,e-d),c[A]=Vp(i,a,e-d))}}const cbe=.5,ube=.9,dbe=.5,Abe=.3,fbe=2;function pbe(e){switch(e.kind){case 0:return e.model.atomicRanges.polymerRanges;case 1:return e.model.coarseHierarchy.spheres.polymerRanges;case 2:return e.model.coarseHierarchy.gaussians.polymerRanges}}function hbe(e){switch(e.kind){case 0:return e.model.atomicRanges.gapRanges;case 1:return e.model.coarseHierarchy.spheres.gapRanges;case 2:return e.model.coarseHierarchy.gaussians.gapRanges}}var gbe,mbe,ybe;function vbe(e,t,n){const{objectId:r,instanceId:o,groupId:i}=e;if(n===r){const{structure:e,group:n}=t,r=n.units[o];if(BO.isAtomic(r))return qee(e,r,r.polymerElements[i]);{const{elements:t}=r,n=r.polymerElements[i],o=ey.indexOf(t,n);if(-1!==o){return cG(e,[{unit:r,indices:ey.ofSingleton(o)}])}}}return S5}function bbe(e,t,n,r,o,i){let a=-1,s=-1;for(let c=o;c<=i;c++){const e=n[c];if(!(e<0)&&(a=ey.indexOf(t,e),a>=0)){s=c;break}}if(a<0)return!1;let l=a;for(let c=i;c>s;c--){const e=n[c];if(e<0)continue;const r=ey.indexOf(t,e);if(r>=0){l=r;break}}return r(Gg.ofRange(e+a,e+l))}function Cbe(e,t,n,r,o){let i=!1;const{elements:a}=o.unit,{traceElementIndex:s}=o.unit.model.atomicHierarchy.derived.residue,{index:l}=o.unit.model.atomicHierarchy.residueAtomSegments,c=n(o.unit);if(Gg.is(o.indices))if(0===Gg.start(o.indices)&&Gg.end(o.indices)===o.unit.elements.length)i=r(Gg.ofBounds(e,e+t))||i;else{i=bbe(e,c,s,r,l[a[Gg.min(o.indices)]],l[a[Gg.max(o.indices)]])||i}else{const{indices:t}=o;for(let n=0,o=t.length;n<o;n++){const u=l[a[t[n]]];let d=u,A=n+1;for(;A<o;){const e=l[a[t[A]]];if(e-d>1)break;d=e,A++}n=A-1,i=bbe(e,c,s,r,u,d)||i}}return i}function Ibe(e){return e.polymerElements}function Ebe(e,t,n){let r=!1;if(!cG.is(e))return!1;const{structure:o,group:i}=t;if(!aG.areEquivalent(e.structure,o))return!1;const a=i.units[0].polymerElements.length;for(const s of e.elements){if(!i.unitIndexMap.has(s.unit.id))continue;const e=i.unitIndexMap.get(s.unit.id)*a;if(BO.isAtomic(s.unit))r=Cbe(e,a,Ibe,n,s)||r;else if(Gg.is(s.indices)){const t=e+Gg.start(s.indices),o=e+Gg.end(s.indices);r=n(Gg.ofBounds(t,o))||r}else for(let t=0,o=s.indices.length;t<o;t++){const i=s.indices[t];let a=t+1;for(;a<o&&s.indices[a]===i;)a++;t=a-1;const l=s.indices[t];r=n(Gg.ofRange(e+i,e+l))||r}}return r}function xbe(e,t,n){const{objectId:r,instanceId:o,groupId:i}=e;if(n===r){const{structure:e,group:n}=t,r=n.units[o],a=ey.indexOf(r.elements,r.gapElements[i]),s=ey.indexOf(r.elements,r.gapElements[i%2?i-1:i+1]);if(-1!==a&&-1!==s)return RP.Loci(e,[RP.Location(e,r,a,e,r,s),RP.Location(e,r,s,e,r,a)])}return S5}function Bbe(e,t,n){let r=!1;if(RP.isLoci(e)){const{structure:o,group:i}=t;if(!aG.areRootsEquivalent(e.structure,o))return!1;e=RP.remapLoci(e,o);const a=i.units[0].gapElements.length;for(const t of e.bonds){const e=i.unitIndexMap.get(t.aUnit.id);if(void 0!==e){const o=ey.indexOf(t.aUnit.gapElements,t.aUnit.elements[t.aIndex]),i=ey.indexOf(t.bUnit.gapElements,t.bUnit.elements[t.bIndex]);-1!==o&&-1!==i&&n(Gg.ofSingleton(e*a+o))&&(r=!0)}}}else if(cG.is(e)){const{structure:o,group:i}=t;if(!aG.areRootsEquivalent(e.structure,o))return!1;e=cG.remap(e,o);const a=i.units[0].gapElements.length;for(const t of e.elements){const e=i.unitIndexMap.get(t.unit.id);void 0!==e&&ey.forEach(t.indices,(o=>{const i=ey.indexOf(t.unit.gapElements,t.unit.elements[o]);-1!==i&&n(Gg.ofSingleton(e*a+i))&&(r=!0)}))}}return r}function wbe(e,t,n){const{objectId:r,instanceId:o,groupId:i}=e;if(n===r){const{structure:e,group:n}=t,r=n.units[o];if(BO.isAtomic(r))return qee(e,r,r.nucleotideElements[i])}return S5}function _be(e){return e.nucleotideElements}function Sbe(e,t,n){let r=!1;if(!cG.is(e))return!1;const{structure:o,group:i}=t;if(!aG.areEquivalent(e.structure,o))return!1;const a=i.units[0];if(!BO.isAtomic(a))return!1;const{nucleotideElements:s}=a,l=s.length;for(const c of e.elements){if(!BO.isAtomic(c.unit))continue;if(!i.unitIndexMap.has(c.unit.id))continue;const e=i.unitIndexMap.get(c.unit.id)*l;BO.isAtomic(c.unit)&&(r=Cbe(e,l,_be,n,c)||r)}return r}!function(e){e.fromGroup=function(e,t){const{group:n,structure:r}=e,o=n.units[0].polymerElements,i=o.length,a=n.units.length,s=Vk.create(r),l=!!(null===t||void 0===t?void 0:t.asSecondary);return xT(i,a,1,((e,t)=>{const r=n.units[t];return s.unit=r,s.element=o[e],s}),!1,(function(e,t){return l}))}}(gbe||(gbe={})),function(e){e.fromGroup=function(e){const{group:t,structure:n}=e,r=t.units[0].gapElements,o=r.length,i=t.units.length,a=Vk.create(n);return xT(o,i,1,((e,n)=>{const o=t.units[n];return a.unit=o,a.element=r[e],a}))}}(mbe||(mbe={})),function(e){e.fromGroup=function(e){const{group:t,structure:n}=e,r=t.units[0],o=BO.isAtomic(r)?r.nucleotideElements:[],i=o.length,a=t.units.length,s=Vk.create(n);return xT(i,a,1,((e,n)=>{const r=t.units[n];return s.unit=r,s.element=o[e],s}))}}(ybe||(ybe={}));const Dbe=qh(),Tbe=qh();function kbe(e,t){const{model:n,conformation:r}=e,{residueAtomSegments:o,atoms:i,index:a}=n.atomicHierarchy,{label_comp_id:s}=i,l=s.value(o.offsets[t]);let c=MM(l),u=RM(l);if(!c&&!u){const e=a.findAtomOnResidue(t,"C4"),n=a.findAtomOnResidue(t,"N9");-1!==e&&-1!==n&&qh.distance(r.invariantPosition(e,Dbe),r.invariantPosition(n,Tbe))<1.6?c=!0:u=!0}return{isPurine:c,isPyrimidine:u}}function Qbe(e,t,n){const r=t.model.atomicHierarchy.index,{traceElementIndex:o}=t.model.atomicHierarchy.derived.residue;return e.trace=o[n],e.N1=r.findAtomOnResidue(n,"N1"),e.C2=r.findAtomOnResidue(n,"C2"),e.N3=r.findAtomOnResidue(n,"N3"),e.C4=r.findAtomOnResidue(n,"C4"),e.C5=r.findAtomOnResidue(n,"C5"),-1===e.C5&&(e.C5=r.findAtomOnResidue(n,"N5")),e.C6=r.findAtomOnResidue(n,"C6"),e.N7=r.findAtomOnResidue(n,"N7"),-1===e.N7&&(e.N7=r.findAtomOnResidue(n,"C7")),e.C8=r.findAtomOnResidue(n,"C8"),e.N9=r.findAtomOnResidue(n,"N9"),e}function Mbe(e){return-1!==e.trace&&-1!==e.N1&&-1!==e.C2&&-1!==e.N3&&-1!==e.C4&&-1!==e.C5&&-1!==e.C6&&-1!==e.N7&&-1!==e.C8&&-1!==e.N9}function Rbe(e,t,n){const r=t.model.atomicHierarchy.index,{traceElementIndex:o}=t.model.atomicHierarchy.derived.residue;return e.trace=o[n],e.N1=r.findAtomOnResidue(n,"N1"),-1===e.N1&&(e.N1=r.findAtomOnResidue(n,"C1")),e.C2=r.findAtomOnResidue(n,"C2"),e.N3=r.findAtomOnResidue(n,"N3"),e.C4=r.findAtomOnResidue(n,"C4"),e.C5=r.findAtomOnResidue(n,"C5"),e.C6=r.findAtomOnResidue(n,"C6"),e}function Pbe(e){return-1!==e.trace&&-1!==e.N1&&-1!==e.C2&&-1!==e.N3&&-1!==e.C4&&-1!==e.C5&&-1!==e.C6}function Obe(e,t,n){const r=t.model.atomicHierarchy.index,{traceElementIndex:o}=t.model.atomicHierarchy.derived.residue;return e.trace=o[n],e.C1_1=r.findAtomOnResidue(n,"C1'"),e.C2_1=r.findAtomOnResidue(n,"C2'"),e.C3_1=r.findAtomOnResidue(n,"C3'"),e.C4_1=r.findAtomOnResidue(n,"C4'"),e.O4_1=r.findAtomOnResidue(n,"O4'"),e}function Fbe(e){return-1!==e.trace&&-1!==e.C1_1&&-1!==e.C2_1&&-1!==e.C3_1&&-1!==e.C4_1&&-1!==e.O4_1}const Nbe=qh(),Lbe=qh(),Ube=qh(),Gbe=qh(),jbe=qh(),zbe=qh(),Hbe=qh(),Vbe=qh(),qbe=qh(),Ybe=qh(),Xbe=Yh.identity(),Wbe=qh(),Kbe=OW(),Jbe={sizeFactor:U_.Numeric(.2,{min:0,max:10,step:.01}),thicknessFactor:U_.Numeric(1,{min:0,max:2,step:.01}),radialSegments:U_.Numeric(16,{min:2,max:56,step:2},Fk.CustomQualityParamInfo)};U_.getDefaultValues(Jbe);function Zbe(e,t,n,r,o,i){if(!BO.isAtomic(t))return RY.createEmpty(i);const a=t.nucleotideElements.length;if(!a)return RY.createEmpty(i);const{sizeFactor:s,thicknessFactor:l,radialSegments:c}=o,u=a*(Kbe.vertices.length/3+2*c),d=ZX.createState(u,u/4,i),{elements:A,model:f,conformation:p}=t,{chainAtomSegments:h,residueAtomSegments:g}=f.atomicHierarchy,{moleculeType:m}=f.atomicHierarchy.derived.residue,y=ty.transientSegments(h,A),v=ty.transientSegments(g,A),b=1*s,C=l*s*2,I={radiusTop:b,radiusBottom:b,radialSegments:c,bottomCap:!0};let E=0;for(;y.hasNext;)for(v.setSegment(y.move());v.hasNext;){const{index:e}=v.move();if(jM(m[e])){const n={trace:-1,N1:-1,C2:-1,N3:-1,C4:-1,C5:-1,C6:-1,N7:-1,C8:-1,N9:-1,C1_1:-1,C2_1:-1,C3_1:-1,C4_1:-1,O4_1:-1};let r=-1,o=-1,i=-1,a=-1,s=-1,l=4.5;const{isPurine:c,isPyrimidine:u}=kbe(t,e);c?(l=4.5,Qbe(n,t,e),r=n.N1,o=n.C4,i=n.C6,a=n.C2,s=n.N9):u&&(l=3,Rbe(n,t,e),r=n.N3,o=n.C6,i=n.C4,a=n.C2,s=n.N1),-1!==s&&-1!==n.trace&&(p.invariantPosition(s,jbe),p.invariantPosition(n.trace,zbe),d.currentGroup=E,PX(d,jbe,zbe,1,I),-1!==r&&-1!==o&&-1!==i&&-1!==a&&(p.invariantPosition(r,Nbe),p.invariantPosition(o,Lbe),p.invariantPosition(i,Ube),p.invariantPosition(a,Gbe),qh.normalize(Hbe,qh.sub(Hbe,Lbe,Nbe)),qh.normalize(Vbe,qh.sub(Vbe,Gbe,Ube)),qh.normalize(qbe,qh.cross(qbe,Hbe,Vbe)),Yh.targetTo(Xbe,Nbe,Lbe,qbe),qh.scaleAndAdd(Ybe,Nbe,Hbe,l/2-.2),Yh.scale(Xbe,Xbe,qh.set(Wbe,4.5,C,l)),Yh.setTranslation(Xbe,Ybe),ZX.addPrimitive(d,Xbe,Kbe))),++E}}const x=ZX.getMesh(d),B=YT.expand(YT(),t.boundary.sphere,b);return x.setBoundingSphere(B),x}const $be={...Dte,...Jbe};function eCe(e){return Tte({defaultProps:U_.getDefaultValues($be),createGeometry:Zbe,createLocationIterator:ybe.fromGroup,getLoci:wbe,eachLocation:Sbe,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.thicknessFactor!==n.thicknessFactor||t.radialSegments!==n.radialSegments}},e)}const tCe=qh(),nCe=qh(),rCe=qh(),oCe=qh(),iCe=qh(),aCe=qh(),sCe=qh(),lCe=qh(),cCe=qh(),uCe=qh(),dCe=qh(),ACe={sizeFactor:U_.Numeric(.2,{min:0,max:10,step:.01}),thicknessFactor:U_.Numeric(1,{min:0,max:2,step:.01}),radialSegments:U_.Numeric(16,{min:2,max:56,step:2},Fk.CustomQualityParamInfo),detail:U_.Numeric(0,{min:0,max:3,step:1},Fk.CustomQualityParamInfo)},fCe=(U_.getDefaultValues(ACe),new Float32Array(54)),pCe=new Uint32Array([0,1,2,3,4,5,6,7,16,17,14,15,12,13,8,9,10,11,0,1]),hCe=new Uint32Array([8,12,14,16,6,4,2,0,10]),gCe=new Uint32Array([9,11,1,3,5,7,17,15,13]),mCe=new Float32Array(36),yCe=new Uint32Array([0,1,2,3,4,5,6,7,8,9,10,11,0,1]),vCe=new Uint32Array([0,10,8,6,4,2]),bCe=new Uint32Array([1,3,5,7,9,11]),CCe=qh();function ICe(e,t){for(let n=0,r=arguments.length<=2?0:arguments.length-2;n<r;++n){const r=n+2<2||arguments.length<=n+2?void 0:arguments[n+2];qh.toArray(qh.add(CCe,r,t),e,2*n*3),qh.toArray(qh.sub(CCe,r,t),e,3*(2*n+1))}}function ECe(e,t,n,r,o,i){if(!BO.isAtomic(t))return RY.createEmpty(i);const a=t.nucleotideElements.length;if(!a)return RY.createEmpty(i);const{sizeFactor:s,thicknessFactor:l,radialSegments:c,detail:u}=o,d=a*(26+2*c),A=ZX.createState(d,d/4,i),{elements:f,model:p,conformation:h}=t,{chainAtomSegments:g,residueAtomSegments:m}=p.atomicHierarchy,{moleculeType:y}=p.atomicHierarchy.derived.residue,v=ty.transientSegments(g,f),b=ty.transientSegments(m,f),C=1*s,I=l*s,E={radiusTop:C,radiusBottom:C,radialSegments:c};let x=0;for(;v.hasNext;)for(b.setSegment(v.move());b.hasNext;){const{index:e}=b.move();if(jM(y[e])){const n={trace:-1,N1:-1,C2:-1,N3:-1,C4:-1,C5:-1,C6:-1,N7:-1,C8:-1,N9:-1,C1_1:-1,C2_1:-1,C3_1:-1,C4_1:-1,O4_1:-1};A.currentGroup=x;const{isPurine:r,isPyrimidine:o}=kbe(t,e);r?(Qbe(n,t,e),-1!==n.N9&&-1!==n.trace&&(h.invariantPosition(n.N9,uCe),h.invariantPosition(n.trace,tCe),A.currentGroup=x,PX(A,uCe,tCe,1,E),aX(A,uCe,C,u)),Mbe(n)&&(h.invariantPosition(n.N1,nCe),h.invariantPosition(n.C2,rCe),h.invariantPosition(n.N3,oCe),h.invariantPosition(n.C4,iCe),h.invariantPosition(n.C5,aCe),h.invariantPosition(n.C6,sCe),h.invariantPosition(n.N7,lCe),h.invariantPosition(n.C8,cCe),qh.triangleNormal(dCe,nCe,iCe,aCe),qh.scale(dCe,dCe,I),ICe(fCe,dCe,nCe,rCe,oCe,iCe,aCe,sCe,lCe,cCe,uCe),ZX.addTriangleStrip(A,fCe,pCe),ZX.addTriangleFan(A,fCe,hCe),ZX.addTriangleFan(A,fCe,gCe))):o&&(Rbe(n,t,e),-1!==n.N1&&-1!==n.trace&&(h.invariantPosition(n.N1,nCe),h.invariantPosition(n.trace,tCe),A.currentGroup=x,PX(A,nCe,tCe,1,E),aX(A,nCe,C,u)),Pbe(n)&&(h.invariantPosition(n.C2,rCe),h.invariantPosition(n.N3,oCe),h.invariantPosition(n.C4,iCe),h.invariantPosition(n.C5,aCe),h.invariantPosition(n.C6,sCe),qh.triangleNormal(dCe,nCe,iCe,aCe),qh.scale(dCe,dCe,I),ICe(mCe,dCe,nCe,rCe,oCe,iCe,aCe,sCe),ZX.addTriangleStrip(A,mCe,yCe),ZX.addTriangleFan(A,mCe,vCe),ZX.addTriangleFan(A,mCe,bCe))),++x}}const B=ZX.getMesh(A),w=YT.expand(YT(),t.boundary.sphere,C);return B.setBoundingSphere(w),B}const xCe={...Dte,...ACe};function BCe(e){return Tte({defaultProps:U_.getDefaultValues(xCe),createGeometry:ECe,createLocationIterator:ybe.fromGroup,getLoci:wbe,eachLocation:Sbe,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.thicknessFactor!==n.thicknessFactor||t.radialSegments!==n.radialSegments}},e)}const wCe=qh(),_Ce=qh(),SCe=qh(),DCe=qh(),TCe=qh(),kCe=qh(),QCe=qh(),MCe=qh(),RCe=qh(),PCe=qh(),OCe=qh(),FCe=qh(),NCe=qh(),LCe=qh(),UCe=qh(),GCe=qh(),jCe=qh(),zCe={sizeFactor:U_.Numeric(.2,{min:0,max:10,step:.01}),thicknessFactor:U_.Numeric(1,{min:0,max:2,step:.01})},HCe=(U_.getDefaultValues(zCe),new Float32Array(54)),VCe=new Uint32Array([0,1,2,3,4,5,6,7,16,17,14,15,12,13,8,9,10,11,0,1]),qCe=new Uint32Array([8,12,14,16,6,4,2,0,10]),YCe=new Uint32Array([9,11,1,3,5,7,17,15,13]),XCe=new Float32Array(36),WCe=new Uint32Array([2,3,4,5,6,7,8,9,10,11,2,3]),KCe=new Uint32Array([0,10,8,6,4,2,10]),JCe=new Uint32Array([1,3,5,7,9,11,3]),ZCe=new Float32Array(36),$Ce=new Uint32Array([0,1,2,3,4,5,6,7,8,9,10,11,0,1]),eIe=new Uint32Array([0,10,8,6,4,2]),tIe=new Uint32Array([1,3,5,7,9,11]),nIe=qh();function rIe(e,t){for(let n=0,r=arguments.length<=2?0:arguments.length-2;n<r;++n){const r=n+2<2||arguments.length<=n+2?void 0:arguments[n+2];qh.toArray(qh.add(nIe,r,t),e,2*n*3),qh.toArray(qh.sub(nIe,r,t),e,3*(2*n+1))}}function oIe(e,t,n,r,o,i){if(!BO.isAtomic(t))return RY.createEmpty(i);const a=t.nucleotideElements.length;if(!a)return RY.createEmpty(i);const{sizeFactor:s,thicknessFactor:l}=o,c=25*a,u=ZX.createState(c,c/4,i),{elements:d,model:A,conformation:f}=t,{chainAtomSegments:p,residueAtomSegments:h}=A.atomicHierarchy,{moleculeType:g}=A.atomicHierarchy.derived.residue,m=ty.transientSegments(p,d),y=ty.transientSegments(h,d),v=s*l;let b=0;for(;m.hasNext;)for(y.setSegment(m.move());y.hasNext;){const{index:e}=y.move();if(jM(g[e])){const n={trace:-1,N1:-1,C2:-1,N3:-1,C4:-1,C5:-1,C6:-1,N7:-1,C8:-1,N9:-1,C1_1:-1,C2_1:-1,C3_1:-1,C4_1:-1,O4_1:-1};u.currentGroup=b,Obe(n,t,e),Fbe(n)&&(f.invariantPosition(n.C1_1,PCe),f.invariantPosition(n.C2_1,OCe),f.invariantPosition(n.C3_1,FCe),f.invariantPosition(n.C4_1,NCe),f.invariantPosition(n.O4_1,LCe),qh.triangleNormal(GCe,FCe,NCe,PCe),qh.scale(UCe,qh.add(UCe,LCe,qh.add(UCe,NCe,qh.add(UCe,FCe,qh.add(UCe,PCe,OCe)))),.2),qh.scale(jCe,GCe,v),rIe(XCe,jCe,UCe,FCe,NCe,LCe,PCe,OCe),ZX.addTriangleStrip(u,XCe,WCe),ZX.addTriangleFanWithNormal(u,XCe,KCe,GCe),qh.negate(GCe,GCe),ZX.addTriangleFanWithNormal(u,XCe,JCe,GCe));const{isPurine:r,isPyrimidine:o}=kbe(t,e);r?(Qbe(n,t,e),Mbe(n)&&(f.invariantPosition(n.N1,wCe),f.invariantPosition(n.C2,_Ce),f.invariantPosition(n.N3,SCe),f.invariantPosition(n.C4,DCe),f.invariantPosition(n.C5,TCe),f.invariantPosition(n.C6,kCe),f.invariantPosition(n.N7,QCe),f.invariantPosition(n.C8,MCe),f.invariantPosition(n.N9,RCe),qh.triangleNormal(GCe,wCe,DCe,TCe),qh.scale(jCe,GCe,v),rIe(HCe,jCe,wCe,_Ce,SCe,DCe,TCe,kCe,QCe,MCe,RCe),ZX.addTriangleStrip(u,HCe,VCe),ZX.addTriangleFanWithNormal(u,HCe,qCe,GCe),qh.negate(GCe,GCe),ZX.addTriangleFanWithNormal(u,HCe,YCe,GCe))):o&&(Rbe(n,t,e),Pbe(n)&&(f.invariantPosition(n.N1,wCe),f.invariantPosition(n.C2,_Ce),f.invariantPosition(n.N3,SCe),f.invariantPosition(n.C4,DCe),f.invariantPosition(n.C5,TCe),f.invariantPosition(n.C6,kCe),qh.triangleNormal(GCe,wCe,DCe,TCe),qh.scale(jCe,GCe,v),rIe(ZCe,jCe,wCe,_Ce,SCe,DCe,TCe,kCe),ZX.addTriangleStrip(u,ZCe,$Ce),ZX.addTriangleFanWithNormal(u,ZCe,eIe,GCe),qh.negate(GCe,GCe),ZX.addTriangleFanWithNormal(u,ZCe,tIe,GCe))),++b}}const C=ZX.getMesh(u),I=YT.expand(YT(),t.boundary.sphere,v);return C.setBoundingSphere(I),C}const iIe={...Dte,...zCe};function aIe(e){return Tte({defaultProps:U_.getDefaultValues(iIe),createGeometry:oIe,createLocationIterator:ybe.fromGroup,getLoci:wbe,eachLocation:Sbe,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.thicknessFactor!==n.thicknessFactor}},e)}const sIe=qh(),lIe=qh(),cIe=qh(),uIe=qh(),dIe=qh(),AIe=qh(),fIe=qh(),pIe=qh(),hIe=qh(),gIe=qh(),mIe=qh(),yIe=qh(),vIe=qh(),bIe=qh(),CIe=qh(),IIe={...Dte,...Mte,sizeFactor:U_.Numeric(.3,{min:0,max:10,step:.01}),radialSegments:U_.Numeric(16,{min:2,max:56,step:2},Fk.CustomQualityParamInfo),tryUseImpostor:U_.Boolean(!0)};function EIe(e,t,n,r){return n.tryUseImpostor&&r&&r.extensions.fragDepth?function(e){return Rte({defaultProps:U_.getDefaultValues(IIe),createGeometry:xIe,createLocationIterator:ybe.fromGroup,getLoci:wbe,eachLocation:Sbe,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor},mustRecreate:(e,t,n)=>!t.tryUseImpostor||!n},e)}(e):function(e){return Tte({defaultProps:U_.getDefaultValues(IIe),createGeometry:BIe,createLocationIterator:ybe.fromGroup,getLoci:wbe,eachLocation:Sbe,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.radialSegments!==n.radialSegments},mustRecreate:(e,t,n)=>t.tryUseImpostor&&!!n},e)}(e)}function xIe(e,t,n,r,o,i){if(!BO.isAtomic(t))return zK.createEmpty(i);const a=t.nucleotideElements.length;if(!a)return zK.createEmpty(i);const s=15*a,l=uoe.create(s,s/4,i),{elements:c,model:u,conformation:d}=t,{chainAtomSegments:A,residueAtomSegments:f}=u.atomicHierarchy,{moleculeType:p}=u.atomicHierarchy.derived.residue,h=ty.transientSegments(A,c),g=ty.transientSegments(f,c);let m=0;for(;h.hasNext;)for(g.setSegment(h.move());g.hasNext;){const{index:e}=g.move();if(jM(p[e])){const n={trace:-1,N1:-1,C2:-1,N3:-1,C4:-1,C5:-1,C6:-1,N7:-1,C8:-1,N9:-1,C1_1:-1,C2_1:-1,C3_1:-1,C4_1:-1,O4_1:-1};Obe(n,t,e),Fbe(n)&&(d.invariantPosition(n.C1_1,mIe),d.invariantPosition(n.C2_1,yIe),d.invariantPosition(n.C3_1,vIe),d.invariantPosition(n.C4_1,bIe),d.invariantPosition(n.O4_1,CIe),d.invariantPosition(n.trace,sIe),l.add(vIe[0],vIe[1],vIe[2],sIe[0],sIe[1],sIe[2],1,!0,!0,2,m),l.add(vIe[0],vIe[1],vIe[2],bIe[0],bIe[1],bIe[2],1,!0,!0,2,m),l.add(bIe[0],bIe[1],bIe[2],CIe[0],CIe[1],CIe[2],1,!0,!0,2,m),l.add(CIe[0],CIe[1],CIe[2],mIe[0],mIe[1],mIe[2],1,!0,!0,2,m),l.add(mIe[0],mIe[1],mIe[2],yIe[0],yIe[1],yIe[2],1,!0,!0,2,m),l.add(yIe[0],yIe[1],yIe[2],vIe[0],vIe[1],vIe[2],1,!0,!0,2,m));const{isPurine:r,isPyrimidine:o}=kbe(t,e);r?(Qbe(n,t,e),-1!==n.C1_1&&-1!==n.N9?(d.invariantPosition(n.C1_1,mIe),d.invariantPosition(n.N9,gIe),l.add(gIe[0],gIe[1],gIe[2],mIe[0],mIe[1],mIe[2],1,!0,!0,2,m)):-1!==n.N9&&-1!==n.trace&&(d.invariantPosition(n.N9,gIe),d.invariantPosition(n.trace,sIe),l.add(gIe[0],gIe[1],gIe[2],sIe[0],sIe[1],sIe[2],1,!0,!0,2,m)),Mbe(n)&&(d.invariantPosition(n.N1,lIe),d.invariantPosition(n.C2,cIe),d.invariantPosition(n.N3,uIe),d.invariantPosition(n.C4,dIe),d.invariantPosition(n.C5,AIe),d.invariantPosition(n.C6,fIe),d.invariantPosition(n.N7,pIe),d.invariantPosition(n.C8,hIe),d.invariantPosition(n.N9,gIe),l.add(gIe[0],gIe[1],gIe[2],hIe[0],hIe[1],hIe[2],1,!0,!0,2,m),l.add(hIe[0],hIe[1],hIe[2],pIe[0],pIe[1],pIe[2],1,!0,!0,2,m),l.add(pIe[0],pIe[1],pIe[2],AIe[0],AIe[1],AIe[2],1,!0,!0,2,m),l.add(AIe[0],AIe[1],AIe[2],fIe[0],fIe[1],fIe[2],1,!0,!0,2,m),l.add(fIe[0],fIe[1],fIe[2],lIe[0],lIe[1],lIe[2],1,!0,!0,2,m),l.add(lIe[0],lIe[1],lIe[2],cIe[0],cIe[1],cIe[2],1,!0,!0,2,m),l.add(cIe[0],cIe[1],cIe[2],uIe[0],uIe[1],uIe[2],1,!0,!0,2,m),l.add(uIe[0],uIe[1],uIe[2],dIe[0],dIe[1],dIe[2],1,!0,!0,2,m),l.add(dIe[0],dIe[1],dIe[2],AIe[0],AIe[1],AIe[2],1,!0,!0,2,m),l.add(dIe[0],dIe[1],dIe[2],gIe[0],gIe[1],gIe[2],1,!0,!0,2,m))):o&&(Rbe(n,t,e),-1!==n.C1_1&&-1!==n.N1?(d.invariantPosition(n.N1,lIe),d.invariantPosition(n.C1_1,mIe),l.add(lIe[0],lIe[1],lIe[2],mIe[0],mIe[1],mIe[2],1,!0,!0,2,m)):-1!==n.N1&&-1!==n.trace&&(d.invariantPosition(n.N1,lIe),d.invariantPosition(n.trace,sIe),l.add(lIe[0],lIe[1],lIe[2],sIe[0],sIe[1],sIe[2],1,!0,!0,2,m)),Pbe(n)&&(d.invariantPosition(n.N1,lIe),d.invariantPosition(n.C2,cIe),d.invariantPosition(n.N3,uIe),d.invariantPosition(n.C4,dIe),d.invariantPosition(n.C5,AIe),d.invariantPosition(n.C6,fIe),l.add(lIe[0],lIe[1],lIe[2],fIe[0],fIe[1],fIe[2],1,!0,!0,2,m),l.add(fIe[0],fIe[1],fIe[2],AIe[0],AIe[1],AIe[2],1,!0,!0,2,m),l.add(AIe[0],AIe[1],AIe[2],dIe[0],dIe[1],dIe[2],1,!0,!0,2,m),l.add(dIe[0],dIe[1],dIe[2],uIe[0],uIe[1],uIe[2],1,!0,!0,2,m),l.add(uIe[0],uIe[1],uIe[2],cIe[0],cIe[1],cIe[2],1,!0,!0,2,m),l.add(cIe[0],cIe[1],cIe[2],lIe[0],lIe[1],lIe[2],1,!0,!0,2,m))),++m}}const y=l.getCylinders(),v=YT.expand(YT(),t.boundary.sphere,1*o.sizeFactor);return y.setBoundingSphere(v),y}function BIe(e,t,n,r,o,i){if(!BO.isAtomic(t))return RY.createEmpty(i);const a=t.nucleotideElements.length;if(!a)return RY.createEmpty(i);const{sizeFactor:s,radialSegments:l}=o,c=a*(15*l),u=ZX.createState(c,c/4,i),{elements:d,model:A,conformation:f}=t,{chainAtomSegments:p,residueAtomSegments:h}=A.atomicHierarchy,{moleculeType:g}=A.atomicHierarchy.derived.residue,m=ty.transientSegments(p,d),y=ty.transientSegments(h,d),v={radiusTop:1*s,radiusBottom:1*s,radialSegments:l};let b=0;for(;m.hasNext;)for(y.setSegment(m.move());y.hasNext;){const{index:e}=y.move();if(jM(g[e])){const n={trace:-1,N1:-1,C2:-1,N3:-1,C4:-1,C5:-1,C6:-1,N7:-1,C8:-1,N9:-1,C1_1:-1,C2_1:-1,C3_1:-1,C4_1:-1,O4_1:-1};u.currentGroup=b,Obe(n,t,e),Fbe(n)&&(f.invariantPosition(n.C1_1,mIe),f.invariantPosition(n.C2_1,yIe),f.invariantPosition(n.C3_1,vIe),f.invariantPosition(n.C4_1,bIe),f.invariantPosition(n.O4_1,CIe),f.invariantPosition(n.trace,sIe),PX(u,vIe,sIe,1,v),PX(u,vIe,bIe,1,v),PX(u,bIe,CIe,1,v),PX(u,CIe,mIe,1,v),PX(u,mIe,yIe,1,v),PX(u,yIe,vIe,1,v));const{isPurine:r,isPyrimidine:o}=kbe(t,e);r?(Qbe(n,t,e),-1!==n.C1_1&&-1!==n.N9?(f.invariantPosition(n.C1_1,mIe),f.invariantPosition(n.N9,gIe),PX(u,gIe,mIe,1,v)):-1!==n.N9&&-1!==n.trace&&(f.invariantPosition(n.N9,gIe),f.invariantPosition(n.trace,sIe),PX(u,gIe,sIe,1,v)),Mbe(n)&&(f.invariantPosition(n.N1,lIe),f.invariantPosition(n.C2,cIe),f.invariantPosition(n.N3,uIe),f.invariantPosition(n.C4,dIe),f.invariantPosition(n.C5,AIe),f.invariantPosition(n.C6,fIe),f.invariantPosition(n.N7,pIe),f.invariantPosition(n.C8,hIe),f.invariantPosition(n.N9,gIe),PX(u,gIe,hIe,1,v),PX(u,hIe,pIe,1,v),PX(u,pIe,AIe,1,v),PX(u,AIe,fIe,1,v),PX(u,fIe,lIe,1,v),PX(u,lIe,cIe,1,v),PX(u,cIe,uIe,1,v),PX(u,uIe,dIe,1,v),PX(u,dIe,AIe,1,v),PX(u,dIe,gIe,1,v))):o&&(Rbe(n,t,e),-1!==n.C1_1&&-1!==n.N1?(f.invariantPosition(n.N1,lIe),f.invariantPosition(n.C1_1,mIe),PX(u,lIe,mIe,1,v)):-1!==n.N1&&-1!==n.trace&&(f.invariantPosition(n.N1,lIe),f.invariantPosition(n.trace,sIe),PX(u,lIe,sIe,1,v)),Pbe(n)&&(f.invariantPosition(n.N1,lIe),f.invariantPosition(n.C2,cIe),f.invariantPosition(n.N3,uIe),f.invariantPosition(n.C4,dIe),f.invariantPosition(n.C5,AIe),f.invariantPosition(n.C6,fIe),PX(u,lIe,fIe,1,v),PX(u,fIe,AIe,1,v),PX(u,AIe,dIe,1,v),PX(u,dIe,uIe,1,v),PX(u,uIe,cIe,1,v),PX(u,cIe,lIe,1,v))),++b}}const C=ZX.getMesh(u),I=YT.expand(YT(),t.boundary.sphere,1*o.sizeFactor);return C.setBoundingSphere(I),C}const wIe=qh(),_Ie=qh(),SIe=qh(),DIe=qh(),TIe=qh(),kIe=qh(),QIe=qh(),MIe=qh(),RIe=qh(),PIe=qh(),OIe=qh(),FIe=qh(),NIe=qh(),LIe=qh(),UIe=qh(),GIe={...Dte,...kte,sizeFactor:U_.Numeric(.3,{min:0,max:10,step:.01}),detail:U_.Numeric(0,{min:0,max:3,step:1},Fk.CustomQualityParamInfo),tryUseImpostor:U_.Boolean(!0)};function jIe(e,t,n,r){return n.tryUseImpostor&&r&&r.extensions.fragDepth?function(e){return Qte({defaultProps:U_.getDefaultValues(GIe),createGeometry:zIe,createLocationIterator:ybe.fromGroup,getLoci:wbe,eachLocation:Sbe,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor},mustRecreate:(e,t,n)=>!t.tryUseImpostor||!n},e)}(e):function(e){return Tte({defaultProps:U_.getDefaultValues(GIe),createGeometry:HIe,createLocationIterator:ybe.fromGroup,getLoci:wbe,eachLocation:Sbe,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.detail!==n.detail},mustRecreate:(e,t,n)=>t.tryUseImpostor&&!!n},e)}(e)}function zIe(e,t,n,r,o,i){if(!BO.isAtomic(t))return XW.createEmpty(i);const a=t.nucleotideElements.length;if(!a)return XW.createEmpty(i);const s=15*a,l=Yme.create(s,s/4,i),{elements:c,model:u,conformation:d}=t,{chainAtomSegments:A,residueAtomSegments:f}=u.atomicHierarchy,{moleculeType:p}=u.atomicHierarchy.derived.residue,h=ty.transientSegments(A,c),g=ty.transientSegments(f,c);let m=0;for(;h.hasNext;)for(g.setSegment(h.move());g.hasNext;){const{index:e}=g.move();if(jM(p[e])){const n={trace:-1,N1:-1,C2:-1,N3:-1,C4:-1,C5:-1,C6:-1,N7:-1,C8:-1,N9:-1,C1_1:-1,C2_1:-1,C3_1:-1,C4_1:-1,O4_1:-1};Obe(n,t,e),Fbe(n)&&(d.invariantPosition(n.C1_1,OIe),d.invariantPosition(n.C2_1,FIe),d.invariantPosition(n.C3_1,NIe),d.invariantPosition(n.C4_1,LIe),d.invariantPosition(n.O4_1,UIe),d.invariantPosition(n.trace,wIe),l.add(wIe[0],wIe[1],wIe[2],m),l.add(NIe[0],NIe[1],NIe[2],m),l.add(LIe[0],LIe[1],LIe[2],m),l.add(UIe[0],UIe[1],UIe[2],m),l.add(OIe[0],OIe[1],OIe[2],m),l.add(FIe[0],FIe[1],FIe[2],m));const{isPurine:r,isPyrimidine:o}=kbe(t,e);r?(Qbe(n,t,e),Mbe(n)&&(d.invariantPosition(n.N1,_Ie),d.invariantPosition(n.C2,SIe),d.invariantPosition(n.N3,DIe),d.invariantPosition(n.C4,TIe),d.invariantPosition(n.C5,kIe),d.invariantPosition(n.C6,QIe),d.invariantPosition(n.N7,MIe),d.invariantPosition(n.C8,RIe),d.invariantPosition(n.N9,PIe),l.add(PIe[0],PIe[1],PIe[2],m),l.add(RIe[0],RIe[1],RIe[2],m),l.add(MIe[0],MIe[1],MIe[2],m),l.add(kIe[0],kIe[1],kIe[2],m),l.add(QIe[0],QIe[1],QIe[2],m),l.add(_Ie[0],_Ie[1],_Ie[2],m),l.add(SIe[0],SIe[1],SIe[2],m),l.add(DIe[0],DIe[1],DIe[2],m),l.add(TIe[0],TIe[1],TIe[2],m))):o&&(Rbe(n,t,e),Pbe(n)&&(d.invariantPosition(n.N1,_Ie),d.invariantPosition(n.C2,SIe),d.invariantPosition(n.N3,DIe),d.invariantPosition(n.C4,TIe),d.invariantPosition(n.C5,kIe),d.invariantPosition(n.C6,QIe),l.add(_Ie[0],_Ie[1],_Ie[2],m),l.add(QIe[0],QIe[1],QIe[2],m),l.add(kIe[0],kIe[1],kIe[2],m),l.add(TIe[0],TIe[1],TIe[2],m),l.add(DIe[0],DIe[1],DIe[2],m),l.add(SIe[0],SIe[1],SIe[2],m))),++m}}const y=l.getSpheres(),v=YT.expand(YT(),t.boundary.sphere,1*o.sizeFactor);return y.setBoundingSphere(v),y}function HIe(e,t,n,r,o,i){if(!BO.isAtomic(t))return RY.createEmpty(i);const a=t.nucleotideElements.length;if(!a)return RY.createEmpty(i);const{sizeFactor:s,detail:l}=o,c=a*nX(l),u=ZX.createState(c,c/2,i),{elements:d,model:A,conformation:f}=t,{chainAtomSegments:p,residueAtomSegments:h}=A.atomicHierarchy,{moleculeType:g}=A.atomicHierarchy.derived.residue,m=ty.transientSegments(p,d),y=ty.transientSegments(h,d),v=1*s;let b=0;for(;m.hasNext;)for(y.setSegment(m.move());y.hasNext;){const{index:e}=y.move();if(jM(g[e])){const n={trace:-1,N1:-1,C2:-1,N3:-1,C4:-1,C5:-1,C6:-1,N7:-1,C8:-1,N9:-1,C1_1:-1,C2_1:-1,C3_1:-1,C4_1:-1,O4_1:-1};u.currentGroup=b,Obe(n,t,e),Fbe(n)&&(f.invariantPosition(n.C1_1,OIe),f.invariantPosition(n.C2_1,FIe),f.invariantPosition(n.C3_1,NIe),f.invariantPosition(n.C4_1,LIe),f.invariantPosition(n.O4_1,UIe),f.invariantPosition(n.trace,wIe),aX(u,wIe,v,l),aX(u,LIe,v,l),aX(u,UIe,v,l),aX(u,OIe,v,l),aX(u,FIe,v,l),aX(u,NIe,v,l));const{isPurine:r,isPyrimidine:o}=kbe(t,e);r?(Qbe(n,t,e),Mbe(n)&&(f.invariantPosition(n.N1,_Ie),f.invariantPosition(n.C2,SIe),f.invariantPosition(n.N3,DIe),f.invariantPosition(n.C4,TIe),f.invariantPosition(n.C5,kIe),f.invariantPosition(n.C6,QIe),f.invariantPosition(n.N7,MIe),f.invariantPosition(n.C8,RIe),f.invariantPosition(n.N9,PIe),aX(u,RIe,v,l),aX(u,MIe,v,l),aX(u,kIe,v,l),aX(u,QIe,v,l),aX(u,_Ie,v,l),aX(u,SIe,v,l),aX(u,DIe,v,l),aX(u,TIe,v,l),aX(u,kIe,v,l),aX(u,PIe,v,l))):o&&(Rbe(n,t,e),Pbe(n)&&(f.invariantPosition(n.N1,_Ie),f.invariantPosition(n.C2,SIe),f.invariantPosition(n.N3,DIe),f.invariantPosition(n.C4,TIe),f.invariantPosition(n.C5,kIe),f.invariantPosition(n.C6,QIe),aX(u,QIe,v,l),aX(u,kIe,v,l),aX(u,TIe,v,l),aX(u,DIe,v,l),aX(u,SIe,v,l),aX(u,_Ie,v,l))),++b}}const C=ZX.getMesh(u),I=YT.expand(YT(),t.boundary.sphere,1*o.sizeFactor);return C.setBoundingSphere(I),C}const VIe=qh.zero(),qIe=qh.zero(),YIe=qh.zero(),XIe=qh.zero(),WIe=lX(3,!1);let KIe;const JIe=Yh.identity(),ZIe=qh.zero(),$Ie=qh.zero(),eEe=qh.zero(),tEe=qh.zero(),nEe=4,rEe=4,oEe=6,iEe=(KIe||(KIe=function(){const e=jY(8);for(let t=0;t<3;++t){const n=(t+1)%3;qh.set(VIe,WIe[3*t],WIe[3*t+1],-.5),qh.set(qIe,WIe[3*n],WIe[3*n+1],-.5),qh.set(YIe,WIe[3*n],WIe[3*n+1],.5),qh.set(XIe,WIe[3*t],WIe[3*t+1],.5),e.add(VIe,qIe,YIe),e.add(YIe,XIe,VIe)}return qh.set(VIe,WIe[0],WIe[1],-.5),qh.set(qIe,WIe[3],WIe[4],-.5),qh.set(YIe,WIe[6],WIe[7],-.5),e.add(YIe,qIe,VIe),qh.set(VIe,WIe[0],WIe[1],.5),qh.set(qIe,WIe[3],WIe[4],.5),qh.set(YIe,WIe[6],WIe[7],.5),e.add(VIe,qIe,YIe),e.getPrimitive()}()),KIe),aEe={sizeFactor:U_.Numeric(.2,{min:0,max:10,step:.01})};U_.getDefaultValues(aEe);function sEe(e,t,n,r,o,i){const a=t.polymerElements.length;if(!a)return RY.createEmpty(i);const{sizeFactor:s}=o,l=24*a,c=ZX.createState(l,l/10,i),u=Yve(1),{normalVectors:d,binormalVectors:A}=u;let f=0;const p=_ve(t,n);for(;p.hasNext;){const e=p.move();c.currentGroup=f;const t=jM(e.moleculeType),n=HM.is(e.secStrucType,4);if(Xve(u,e,t||n?.5:.9,t?.3:.5),n&&!e.secStrucLast||!n){const n=r.size.size(e.center)*s,o=nEe*n,i=rEe*n,a=oEe*n,l=t?A:d;qh.fromArray($Ie,l,0),qh.fromArray(eEe,l,3),qh.normalize(tEe,qh.add(tEe,$Ie,eEe)),Yh.targetTo(JIe,e.p3,e.p1,tEe),Yh.mul(JIe,JIe,Yh.rotY90Z180),Yh.scale(JIe,JIe,qh.set(ZIe,a,i,o)),Yh.setTranslation(JIe,e.p2),ZX.addPrimitive(c,JIe,iEe)}++f}const h=ZX.getMesh(c),g=YT.expand(YT(),t.boundary.sphere,1*o.sizeFactor);return h.setBoundingSphere(g),h}const lEe={...Dte,...aEe};function cEe(e){return Tte({defaultProps:U_.getDefaultValues(lEe),createGeometry:sEe,createLocationIterator:e=>gbe.fromGroup(e),getLoci:vbe,eachLocation:Ebe,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor}},e)}const uEe=10,dEe={sizeFactor:U_.Numeric(.2,{min:0,max:10,step:.01}),radialSegments:U_.Numeric(16,{min:2,max:56,step:2},Fk.CustomQualityParamInfo)};U_.getDefaultValues(dEe);function AEe(e,t,n,r,o,i){const a=t.gapElements.length;if(!a)return RY.createEmpty(i);const{sizeFactor:s,radialSegments:l}=o,c=uEe*l*2*a*2,u=ZX.createState(c,c/10,i),d=qh(),A=qh(),f={radiusTop:1,radiusBottom:1,topCap:!0,bottomCap:!0,radialSegments:l};let p=0;const h=function(e,t){switch(t.kind){case 0:return new Ive(e,t);case 1:case 2:return new Eve(e,t)}}(n,t);for(;h.hasNext;){const{centerA:e,centerB:n}=h.move();e.element===n.element||(t.conformation.invariantPosition(e.element,d),t.conformation.invariantPosition(n.element,A),f.radiusTop=f.radiusBottom=r.size.size(e)*s,u.currentGroup=p,FX(u,d,A,.5,uEe,!1,f),f.radiusTop=f.radiusBottom=r.size.size(n)*s,u.currentGroup=p+1,FX(u,A,d,.5,uEe,!1,f)),p+=2}const g=ZX.getMesh(u),m=YT.expand(YT(),t.boundary.sphere,1*o.sizeFactor);return g.setBoundingSphere(m),g}const fEe={...Dte,...dEe};function pEe(e){return Tte({defaultProps:U_.getDefaultValues(fEe),createGeometry:AEe,createLocationIterator:mbe.fromGroup,getLoci:xbe,eachLocation:Bbe,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.radialSegments!==n.radialSegments}},e)}const hEe=qh(),gEe=qh(),mEe=qh(),yEe=qh(),vEe=qh(),bEe=qh(),CEe=qh(),IEe=qh(),EEe=qh(),xEe=qh(),BEe=qh(),wEe=qh(),_Ee=qh(),SEe=qh(),DEe=qh(),TEe=qh.fromArray,kEe=qh.scale,QEe=qh.add,MEe=qh.sub,REe=qh.magnitude,PEe=qh.negate,OEe=qh.copy,FEe=qh.cross,NEe=qh.set,LEe=gh.add3,UEe=gh.add;function GEe(e,t,n,r,o,i,a,s,l){const{vertices:c,normals:u,indices:d}=t,A=c.elementCount;if(TEe(hEe,r,e),kEe(CEe,hEe,a),kEe(bEe,hEe,s),TEe(gEe,o,e),kEe(yEe,gEe,i),FEe(xEe,gEe,hEe),TEe(EEe,n,e),QEe(wEe,QEe(wEe,EEe,yEe),bEe),MEe(_Ee,QEe(_Ee,EEe,yEe),CEe),MEe(SEe,MEe(SEe,EEe,yEe),CEe),QEe(DEe,MEe(DEe,EEe,yEe),bEe),a<s?(LEe(c,DEe[0],DEe[1],DEe[2]),LEe(c,SEe[0],SEe[1],SEe[2]),LEe(c,_Ee[0],_Ee[1],_Ee[2]),LEe(c,wEe[0],wEe[1],wEe[2]),OEe(vEe,bEe)):(LEe(c,wEe[0],wEe[1],wEe[2]),LEe(c,_Ee[0],_Ee[1],_Ee[2]),LEe(c,SEe[0],SEe[1],SEe[2]),LEe(c,DEe[0],DEe[1],DEe[2]),OEe(vEe,CEe)),l){for(let e=0;e<4;++e)LEe(u,-xEe[0],-xEe[1],-xEe[2]);LEe(d,A,A+1,A+2),LEe(d,A+2,A+3,A)}else{for(let e=0;e<4;++e)LEe(u,xEe[0],xEe[1],xEe[2]);LEe(d,A+2,A+1,A),LEe(d,A,A+3,A+2)}}function jEe(e,t,n,r,o,i,a,s,l,c){const{currentGroup:u,vertices:d,normals:A,indices:f,groups:p}=e,h=d.elementCount;let g=0;s>0?(TEe(hEe,t,0),TEe(gEe,t,3*o),g=s/REe(MEe(mEe,gEe,hEe))):NEe(IEe,0,0,0);for(let m=0;m<=o;++m){const e=i[m],l=a[m],c=0===s?l:s*(1-m/o),u=3*m;TEe(vEe,n,u),kEe(vEe,vEe,c),TEe(yEe,r,u),kEe(yEe,yEe,e),s>0&&(TEe(hEe,n,u),TEe(gEe,r,u),kEe(IEe,FEe(IEe,hEe,gEe),g)),TEe(EEe,t,u),TEe(xEe,n,u),TEe(BEe,r,u),QEe(hEe,QEe(hEe,EEe,yEe),vEe),QEe(gEe,xEe,IEe),LEe(d,hEe[0],hEe[1],hEe[2]),LEe(A,gEe[0],gEe[1],gEe[2]),QEe(hEe,MEe(hEe,EEe,yEe),vEe),LEe(d,hEe[0],hEe[1],hEe[2]),LEe(A,gEe[0],gEe[1],gEe[2]),PEe(gEe,BEe),LEe(d,hEe[0],hEe[1],hEe[2]),LEe(A,gEe[0],gEe[1],gEe[2]),MEe(hEe,MEe(hEe,EEe,yEe),vEe),LEe(d,hEe[0],hEe[1],hEe[2]),LEe(A,gEe[0],gEe[1],gEe[2]),QEe(gEe,PEe(gEe,xEe),IEe),LEe(d,hEe[0],hEe[1],hEe[2]),LEe(A,gEe[0],gEe[1],gEe[2]),MEe(hEe,QEe(hEe,EEe,yEe),vEe),LEe(d,hEe[0],hEe[1],hEe[2]),LEe(A,gEe[0],gEe[1],gEe[2]),OEe(gEe,BEe),LEe(d,hEe[0],hEe[1],hEe[2]),LEe(A,gEe[0],gEe[1],gEe[2]),QEe(hEe,QEe(hEe,EEe,yEe),vEe),LEe(d,hEe[0],hEe[1],hEe[2]),LEe(A,gEe[0],gEe[1],gEe[2])}for(let m=0;m<o;++m){for(let e=0;e<2;e++)LEe(f,h+8*m+2*e,h+8*(m+1)+2*e+1,h+8*m+2*e+1),LEe(f,h+8*m+2*e,h+8*(m+1)+2*e,h+8*(m+1)+2*e+1);for(let e=2;e<4;e++)LEe(f,h+8*m+2*e,h+8*(m+1)+2*e,h+8*m+2*e+1),LEe(f,h+8*(m+1)+2*e,h+8*(m+1)+2*e+1,h+8*m+2*e+1)}if(l){const o=i[0],l=a[0],c=0===s?l:s;GEe(0,e,t,n,r,o,c,c,!1)}else if(s>0){const o=i[0],l=a[0];GEe(0,e,t,n,r,o,s,-l,!1),GEe(0,e,t,n,r,o,-s,l,!1)}if(c&&0===s){const s=i[o],l=a[o];GEe(3*o,e,t,n,r,s,l,l,!0)}for(let m=0,y=8*(o+1)+(l?4:s>0?8:0)+(c&&0===s?4:0);m<y;++m)UEe(p,u)}const zEe=qh(),HEe=qh(),VEe=qh(),qEe=qh(),YEe=qh();function XEe(e,t,n,r,o){e[0]=t[0]*r+n[0]*o,e[1]=t[1]*r+n[1]*o,e[2]=t[2]*r+n[2]*o}function WEe(e,t,n,r,o,i){e[0]=t[0]*o+n[0]*i+r[0],e[1]=t[1]*o+n[1]*i+r[1],e[2]=t[2]*o+n[2]*i+r[2]}const KEe=qh.fromArray,JEe=qh.normalize,ZEe=qh.scaleAndAdd,$Ee=qh.cross,exe=qh.dot,txe=qh.unitX,nxe=gh.add3,rxe=new Map;function oxe(e,t,n,r,o,i,a,s,l,c,u){const{currentGroup:d,vertices:A,normals:f,indices:p,groups:h}=e;let g=A.elementCount;const{cos:m,sin:y}=function(e,t){const n=t?1:0,r=Rh(e,n);if(!rxe.has(r)){const t=[],o=[];for(let r=0;r<e;++r){const i=(2*r+n)/e*Math.PI;t[r]=Math.cos(i),o[r]=Math.sin(i)}rxe.set(r,{cos:t,sin:o})}return rxe.get(r)}(i,"rounded"===u),v=Math.round(i/4),b=3*v;for(let E=0;E<=o;++E){const e=3*E;KEe(qEe,n,e),KEe(YEe,r,e),KEe(VEe,t,e);const o=a[E],l=s[E],c="rounded"===u&&l>o;for(let t=0;t<i;++t){if(c){WEe(HEe,qEe,YEe,VEe,o*m[t],o*y[t]);const e=exe(YEe,txe)<0?t<v||t>=b?l-o:-l+o:t>=v&&t<b?-l+o:l-o;ZEe(HEe,HEe,qEe,e),t===v||t===v-1?XEe(zEe,qEe,YEe,0,1):t===b||t===b-1?XEe(zEe,qEe,YEe,0,-1):XEe(zEe,qEe,YEe,m[t],y[t])}else WEe(HEe,qEe,YEe,VEe,l*m[t],o*y[t]),XEe(zEe,qEe,YEe,o*m[t],l*y[t]);JEe(zEe,zEe),nxe(A,HEe[0],HEe[1],HEe[2]),nxe(f,zEe[0],zEe[1],zEe[2])}}const C=Math.round(i/2);for(let E=0;E<o;++E){for(let e=0;e<C;++e)nxe(p,g+E*i+(e+1)%i,g+(E+1)*i+(e+1)%i,g+E*i+e),nxe(p,g+(E+1)*i+(e+1)%i,g+(E+1)*i+e,g+E*i+e);for(let e=C;e<i;++e)nxe(p,g+E*i+(e+1)%i,g+(E+1)*i+e,g+E*i+e),nxe(p,g+(E+1)*i+(e+1)%i,g+(E+1)*i+e,g+E*i+(e+1)%i)}if(l){const e=0,o=A.elementCount;KEe(qEe,n,e),KEe(YEe,r,e),KEe(VEe,t,e),$Ee(zEe,YEe,qEe),nxe(A,VEe[0],VEe[1],VEe[2]),nxe(f,zEe[0],zEe[1],zEe[2]);const l=a[0];let c=s[0];const d="rounded"===u&&c>l;d&&(c-=l),g=A.elementCount;for(let t=0;t<i;++t)d?(WEe(HEe,qEe,YEe,VEe,l*m[t],l*y[t]),ZEe(HEe,HEe,qEe,t<v||t>=b?c:-c)):WEe(HEe,qEe,YEe,VEe,c*m[t],l*y[t]),nxe(A,HEe[0],HEe[1],HEe[2]),nxe(f,zEe[0],zEe[1],zEe[2]),nxe(p,g+(t+1)%i,g+t,o)}if(c){const e=3*o,l=A.elementCount;KEe(qEe,n,e),KEe(YEe,r,e),KEe(VEe,t,e),$Ee(zEe,qEe,YEe),nxe(A,VEe[0],VEe[1],VEe[2]),nxe(f,zEe[0],zEe[1],zEe[2]);const c=a[o];let d=s[o];const h="rounded"===u&&d>c;h&&(d-=c),g=A.elementCount;for(let t=0;t<i;++t)h?(WEe(HEe,qEe,YEe,VEe,c*m[t],c*y[t]),ZEe(HEe,HEe,qEe,t<v||t>=b?d:-d)):WEe(HEe,qEe,YEe,VEe,d*m[t],c*y[t]),nxe(A,HEe[0],HEe[1],HEe[2]),nxe(f,zEe[0],zEe[1],zEe[2]),nxe(p,g+t,g+(t+1)%i,l)}const I=(o+1)*i+(l?i+1:0)+(c?i+1:0);gh.addRepeat(h,I,d)}const ixe=qh.fromArray,axe=qh.magnitude,sxe=qh.sub,lxe=qh.add,cxe=qh.scale,uxe=qh.negate,dxe=qh.copy,Axe=qh.cross,fxe=gh.add3,pxe=gh.add,hxe=qh(),gxe=qh(),mxe=qh(),yxe=qh(),vxe=qh(),bxe=qh(),Cxe=qh(),Ixe=qh(),Exe=qh();function xxe(e,t,n,r,o,i,a,s){const{currentGroup:l,vertices:c,normals:u,indices:d,groups:A}=e,f=c.elementCount;let p=0;s>0&&(ixe(hxe,t,0),ixe(gxe,t,3*o),p=s/axe(sxe(mxe,gxe,hxe)));for(let h=0;h<=o;++h){const e=i[h],l=a[h],d=0===s?l:s*(1-h/o),A=3*h;ixe(vxe,n,A),cxe(vxe,vxe,d),ixe(yxe,r,A),cxe(yxe,yxe,e),s>0&&(ixe(hxe,n,A),ixe(gxe,r,A),cxe(bxe,Axe(bxe,hxe,gxe),p)),ixe(Cxe,t,A),ixe(Ixe,n,A),ixe(Exe,r,A),lxe(hxe,Cxe,vxe),uxe(gxe,Exe),fxe(c,hxe[0],hxe[1],hxe[2]),fxe(u,gxe[0],gxe[1],gxe[2]),sxe(hxe,Cxe,vxe),fxe(c,hxe[0],hxe[1],hxe[2]),fxe(u,gxe[0],gxe[1],gxe[2]),lxe(hxe,Cxe,vxe),dxe(gxe,Exe),fxe(c,hxe[0],hxe[1],hxe[2]),fxe(u,gxe[0],gxe[1],gxe[2]),sxe(hxe,Cxe,vxe),fxe(c,hxe[0],hxe[1],hxe[2]),fxe(u,gxe[0],gxe[1],gxe[2])}for(let h=0;h<o;++h)fxe(d,f+4*h,f+4*(h+1)+1,f+4*h+1),fxe(d,f+4*h,f+4*(h+1),f+4*(h+1)+1),fxe(d,f+4*h+2+1,f+4*(h+1)+2+1,f+4*h+2),fxe(d,f+4*h+2,f+4*(h+1)+2+1,f+4*(h+1)+2);for(let h=0,g=4*(o+1);h<g;++h)pxe(A,l)}const Bxe={sizeFactor:U_.Numeric(.2,{min:0,max:10,step:.01}),aspectRatio:U_.Numeric(5,{min:.1,max:10,step:.1}),arrowFactor:U_.Numeric(1.5,{min:0,max:3,step:.1},{description:"Size factor for sheet arrows"}),tubularHelices:U_.Boolean(!1,{description:"Draw alpha helices as tubes"}),helixProfile:U_.Select("elliptical",U_.arrayToOptions(["elliptical","rounded","square"]),{description:"Protein helix trace profile"}),nucleicProfile:U_.Select("square",U_.arrayToOptions(["elliptical","rounded","square"]),{description:"Nucleic strand trace profile"}),detail:U_.Numeric(0,{min:0,max:3,step:1},Fk.CustomQualityParamInfo),linearSegments:U_.Numeric(8,{min:1,max:48,step:1},Fk.CustomQualityParamInfo),radialSegments:U_.Numeric(16,{min:2,max:56,step:2},Fk.CustomQualityParamInfo)},wxe=(U_.getDefaultValues(Bxe),qh());function _xe(e,t,n,r,o,i){const a=t.polymerElements.length;if(!a)return RY.createEmpty(i);const{sizeFactor:s,detail:l,linearSegments:c,radialSegments:u,aspectRatio:d,arrowFactor:A,tubularHelices:f,helixProfile:p,nucleicProfile:h}=o,g=c*u*a+(u+1)*a*2,m=ZX.createState(g,g/10,i),y=BO.isCoarse(t),v=Yve(c),{curvePoints:b,normalVectors:C,binormalVectors:I,widthValues:E,heightValues:x}=v;let B=0;const w=_ve(t,n,{ignoreSecondaryStructure:!1,useHelixOrientation:f});for(;w.hasNext;){const e=w.move();m.currentGroup=B;const t=jM(e.moleculeType),n=HM.is(e.secStrucType,4),o=HM.is(e.secStrucType,2),i=t?Abe:dbe;Xve(v,e,o&&!f?ube:cbe,i);let a=r.size.size(e.centerPrev)*s,g=r.size.size(e.center)*s,_=r.size.size(e.centerNext)*s;y&&(a*=d/2,g*=d/2,_*=d/2);const S=e.secStrucFirst||e.coarseBackboneFirst||e.first,D=e.secStrucLast||e.coarseBackboneLast||e.last;let T=c;if(e.initial){T=Math.max(Math.round(c*i),1);const t=c-T;b.copyWithin(0,3*t),I.copyWithin(0,3*t),C.copyWithin(0,3*t),qh.fromArray(wxe,b,3),qh.normalize(wxe,qh.sub(wxe,e.p2,wxe)),qh.scaleAndAdd(wxe,e.p2,wxe,g*fbe),qh.toArray(wxe,b,0)}else e.final&&(T=Math.max(Math.round(c*(1-i)),1),qh.fromArray(wxe,b,3*T-3),qh.normalize(wxe,qh.sub(wxe,e.p2,wxe)),qh.scaleAndAdd(wxe,e.p2,wxe,g*fbe),qh.toArray(wxe,b,3*T));if(!0===e.initial&&!0===e.final)aX(m,e.p2,2*g,l);else if(n){const t=a*d,n=g*d,r=_*d,o=e.secStrucLast?n*A:0;lbe(v,a,g,_,t,n,r,i),2===u?xxe(m,b,C,I,T,E,x,o):jEe(m,b,C,I,T,E,x,o,S,D)}else{let n,r,s;o&&!e.isCoarseBackbone?f?(a*=1.5*d,g*=1.5*d,_*=1.5*d,n=a,r=g,s=_):(n=a*d,r=g*d,s=_*d):t&&!e.isCoarseBackbone?(n=a*d,r=g*d,s=_*d):(n=a,r=g,s=_),lbe(v,a,g,_,n,r,s,i);const[l,c]=t&&!e.isCoarseBackbone?[I,C]:[C,I];if(t&&!e.isCoarseBackbone)for(let e=0,t=l.length;e<t;e++)l[e]*=-1;const A=t?h:p;2===u?t&&!e.isCoarseBackbone?xxe(m,b,l,c,T,x,E,0):xxe(m,b,l,c,T,E,x,0):4===u?jEe(m,b,l,c,T,E,x,0,S,D):r===g?oxe(m,b,l,c,T,u,E,x,S,D,"elliptical"):"square"===A?jEe(m,b,l,c,T,E,x,0,S,D):oxe(m,b,l,c,T,u,E,x,S,D,A)}++B}const _=ZX.getMesh(m),S=YT.expand(YT(),t.boundary.sphere,1*o.sizeFactor);return _.setBoundingSphere(S),_}const Sxe={...Dte,...Bxe};function Dxe(e){return Tte({defaultProps:U_.getDefaultValues(Sxe),createGeometry:_xe,createLocationIterator:e=>gbe.fromGroup(e,{asSecondary:!0}),getLoci:vbe,eachLocation:Ebe,setUpdateState:(e,t,n,r,o,i,a)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.tubularHelices!==n.tubularHelices||t.detail!==n.detail||t.linearSegments!==n.linearSegments||t.radialSegments!==n.radialSegments||t.aspectRatio!==n.aspectRatio||t.arrowFactor!==n.arrowFactor||t.helixProfile!==n.helixProfile||t.nucleicProfile!==n.nucleicProfile;const s=ML.get(i.structure).version;e.info.secondaryStructureHash!==s&&(void 0!==e.info.secondaryStructureHash&&(e.createGeometry=!0),e.info.secondaryStructureHash=s)}},e)}const Txe={"polymer-trace":(e,t)=>_te("Polymer trace mesh",e,t,Dxe),"polymer-gap":(e,t)=>_te("Polymer gap cylinder",e,t,pEe),"nucleotide-block":(e,t)=>_te("Nucleotide block mesh",e,t,eCe),"nucleotide-ring":(e,t)=>_te("Nucleotide ring mesh",e,t,BCe),"nucleotide-atomic-ring-fill":(e,t)=>_te("Nucleotide atomic ring fill",e,t,aIe),"nucleotide-atomic-bond":(e,t)=>_te("Nucleotide atomic bond",e,t,EIe),"nucleotide-atomic-element":(e,t)=>_te("Nucleotide atomic element",e,t,jIe),"direction-wedge":(e,t)=>_te("Polymer direction wedge",e,t,cEe)},kxe={...Sxe,...fEe,...$be,...xCe,...IIe,...GIe,...iIe,...lEe,sizeFactor:U_.Numeric(.2,{min:0,max:10,step:.01}),visuals:U_.MultiSelect(["polymer-trace","polymer-gap","nucleotide-ring","nucleotide-atomic-ring-fill","nucleotide-atomic-bond","nucleotide-atomic-element"],U_.objectToOptions(Txe)),bumpFrequency:U_.Numeric(2,{min:0,max:10,step:.1},Fk.ShadingCategory),colorMode:U_.Select("default",U_.arrayToOptions(["default","interpolate"]),{...Fk.ShadingCategory,isHidden:!0})};const Qxe={name:"cartoon",label:"Cartoon",description:"Displays ribbons, planks, tubes smoothly following the trace atoms of polymers.",factory:function(e,t){return b6.createMulti("Cartoon",e,t,Ute,Txe)},getParams:function(e,t){const n=U_.clone(kxe);let r=!1,o=!1;return t.units.forEach((e=>{!r&&BO.isAtomic(e)&&e.nucleotideElements.length&&(r=!0),!o&&e.gapElements.length&&(o=!0)})),n.visuals.defaultValue=["polymer-trace"],r&&n.visuals.defaultValue.push("nucleotide-ring"),o&&n.visuals.defaultValue.push("polymer-gap"),n},defaultValues:U_.getDefaultValues(kxe),defaultColorTheme:{name:"chain-id"},defaultSizeTheme:{name:"uniform"},isApplicable:e=>e.polymerResidueCount>0,ensureCustomProperties:{attach:async(e,t)=>{await ML.attach(e,t,void 0,!0);for(const n of t.models)await Bve.attach(e,n,void 0,!0)},detach:e=>{ML.ref(e,!1);for(const t of e.models)Bve.ref(t,!1)}}},Mxe={...Dte,sizeFactor:U_.Numeric(1,{min:0,max:10,step:.1}),detail:U_.Numeric(0,{min:0,max:3,step:1},Fk.CustomQualityParamInfo),ignoreHydrogens:U_.Boolean(!1)};function Rxe(e){return Tte({defaultProps:U_.getDefaultValues(Mxe),createGeometry:Pxe,createLocationIterator:oye.fromGroup,getLoci:$me,eachLocation:Zme,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.detail!==n.detail||t.ignoreHydrogens!==n.ignoreHydrogens}},e)}function Pxe(e,t,n,r,o,i){const{child:a}=n,s=null===a||void 0===a?void 0:a.unitMap.get(t.id);if(a&&!s)return RY.createEmpty(i);const{detail:l,sizeFactor:c,ignoreHydrogens:u}=o,{elements:d,model:A}=t,{atomicNumber:f}=t.model.atomicHierarchy.derived.atom,p=d.length,h=p*nX(l),g=ZX.createState(h,h/2,i),m=zN.Provider.get(A);if(!m)return RY.createEmpty(i);const y=qh(),v=Xh(),b=qh(),C=qh(),I=qh(),{elementToAnsiotrop:E,data:x}=m,{U:B}=x,w=x._schema.U.space,_=t.conformation,S=Vk.create(n);S.unit=t;for(let k=0;k<p;k++){const e=d[k],t=E[e];if(-1!==t&&!(s&&!Em.has(s.elements,e)||u&&ate(f,e))){S.element=e,_.invariantPosition(e,y),g.currentGroup=k,tg.toMat3(v,w,B.value(t)),Xh.symmtricFromLower(v,v),Xh.symmetricEigenvalues(b,v),Xh.eigenvector(C,v,b[1]),Xh.eigenvector(I,v,b[2]);for(let e=0;e<3;++e)b[e]=1.5958*c*Math.sqrt(Math.abs(b[e]));Hh(b[0],b[1],zh)&&Hh(b[1],b[2],zh)?aX(g,y,b[0],l):q8(g,y,I,C,b,l)}}const D=ZX.getMesh(g),T=YT.expand(YT(),(s||t).boundary.sphere,1*c);return D.setBoundingSphere(T),D}const Oxe={"ellipsoid-mesh":(e,t)=>_te("Ellipsoid Mesh",e,t,Rxe),"intra-bond":(e,t)=>_te("Intra-unit bond cylinder",e,t,Ome),"inter-bond":(e,t)=>wee("Inter-unit bond cylinder",e,t,Hme)},Fxe={...Mxe,...Pme,...zme,includeParent:U_.Boolean(!1),adjustCylinderLength:U_.Boolean(!1,{isHidden:!0}),unitKinds:lte(["atomic"]),sizeFactor:U_.Numeric(1,{min:.01,max:10,step:.01}),sizeAspectRatio:U_.Numeric(.1,{min:.01,max:3,step:.01}),linkCap:U_.Boolean(!0),visuals:U_.MultiSelect(["ellipsoid-mesh","intra-bond","inter-bond"],U_.objectToOptions(Oxe)),bumpFrequency:U_.Numeric(0,{min:0,max:10,step:.1},Fk.ShadingCategory)};const Nxe={name:"ellipsoid",label:"Ellipsoid",description:"Displays anisotropic displacement ellipsoids of atomic elements plus bonds as cylinders.",factory:function(e,t){return b6.createMulti("Ellipsoid",e,t,Ute,Oxe)},getParams:function(e,t){return Fxe},defaultValues:U_.getDefaultValues(Fxe),defaultColorTheme:{name:"element-symbol"},defaultSizeTheme:{name:"uniform"},isApplicable:e=>e.elementCount>0&&e.models.some((e=>zN.Provider.isApplicable(e))),getData:(e,t)=>t.includeParent?e.asParent():e,mustRecreate:(e,t)=>e.includeParent!==t.includeParent},Lxe="\nprecision highp float;\n\nattribute vec3 aPosition;\nattribute float aRadius;\n\nvarying vec3 vPosition;\nvarying float vRadiusSqInv;\n\n#if defined(dCalcType_groupId)\n    attribute float aGroup;\n    varying float vGroup;\n#endif\n\nuniform vec3 uBboxSize;\nuniform vec3 uBboxMin;\nuniform float uResolution;\n\nvoid main() {\n    vRadiusSqInv = 1.0 / (aRadius * aRadius);\n    #if defined(dCalcType_groupId)\n        vGroup = aGroup;\n    #endif\n    gl_PointSize = ceil(((aRadius * 3.0) / uResolution) + uResolution);\n    vPosition = (aPosition - uBboxMin) / uResolution;\n    gl_Position = vec4(((aPosition - uBboxMin) / uBboxSize) * 2.0 - 1.0, 1.0);\n}\n",Uxe="\nprecision highp float;\n\nvarying vec3 vPosition;\nvarying float vRadiusSqInv;\n#if defined(dCalcType_groupId)\n    #if defined(dGridTexType_2d)\n        precision highp sampler2D;\n        uniform sampler2D tMinDistanceTex;\n        uniform vec3 uGridTexDim;\n    #elif defined(dGridTexType_3d)\n        precision highp sampler3D;\n        uniform sampler3D tMinDistanceTex;\n    #endif\n    varying float vGroup;\n#endif\n\n#include common\n\nuniform vec3 uGridDim;\nuniform vec2 uGridTexScale;\nuniform float uCurrentSlice;\nuniform float uCurrentX;\nuniform float uCurrentY;\nuniform float uAlpha;\nuniform float uResolution;\nuniform float uRadiusFactorInv;\n\nvoid main() {\n    vec2 v = gl_FragCoord.xy - vec2(uCurrentX, uCurrentY) - 0.5;\n    vec3 fragPos = vec3(v.x, v.y, uCurrentSlice);\n    float dist = distance(fragPos, vPosition) * uResolution;\n\n    #if defined(dCalcType_density)\n        float density = exp(-uAlpha * ((dist * dist) * vRadiusSqInv));\n        gl_FragColor.a = density * uRadiusFactorInv;\n    #elif defined(dCalcType_minDistance)\n        gl_FragColor.a = 1.0 - dist * uRadiusFactorInv;\n    #elif defined(dCalcType_groupId)\n        #if defined(dGridTexType_2d)\n            float minDistance = 1.0 - texture2D(tMinDistanceTex, (gl_FragCoord.xy) / (uGridTexDim.xy / uGridTexScale)).a;\n        #elif defined(dGridTexType_3d)\n            float minDistance = 1.0 - texelFetch(tMinDistanceTex, ivec3(gl_FragCoord.xy, uCurrentSlice), 0).a;\n        #endif\n        if (dist * uRadiusFactorInv > minDistance + uResolution * 0.05)\n            discard;\n        gl_FragColor.rgb = packIntToRGB(vGroup);\n    #endif\n}\n",Gxe={drawCount:tK("number"),instanceCount:tK("number"),aRadius:KW("float32",1,0),aPosition:KW("float32",3,0),aGroup:KW("float32",1,0),uCurrentSlice:JW("f"),uCurrentX:JW("f"),uCurrentY:JW("f"),uBboxMin:JW("v3","material"),uBboxSize:JW("v3","material"),uGridDim:JW("v3","material"),uGridTexDim:JW("v3","material"),uGridTexScale:JW("v2","material"),uAlpha:JW("f","material"),uResolution:JW("f","material"),uRadiusFactorInv:JW("f","material"),tMinDistanceTex:ZW("texture","rgba","float","nearest","material"),dGridTexType:eK("string",["2d","3d"]),dCalcType:eK("string",["density","minDistance","groupId"])},jxe="gaussian-density";function zxe(e){return e.namedFramebuffers[jxe]||(e.namedFramebuffers[jxe]=e.resources.framebuffer()),e.namedFramebuffers[jxe]}function Hxe(e,t,n,r,o,i){const a=`${jxe}-${e}`;return t.namedTextures[a]||(t.namedTextures[a]=t.resources.texture(n,r,o,i)),t.namedTextures[a]}function Vxe(e,t,n,r,o,i){return e.isWebGL2?function(e,t,n,r,o,i){fw&&e.timer.mark("GaussianDensityTexture3d");const a=function(e,t,n,r,o,i){const{gl:a,resources:s,state:l,extensions:{colorBufferFloat:c,textureFloat:u,colorBufferHalfFloat:d,textureHalfFloat:A}}=e,{smoothness:f,resolution:p}=o,{drawCount:h,positions:g,radii:m,groups:y,scale:v,expandedBox:b,dim:C,maxRadius:I}=Kxe(t,n,r,o),[E,x,B]=C,w=Hxe("min-dist-3d",e,"volume-uint8","rgba","ubyte","nearest");w.define(E,x,B);const _=Wh.create(1,1),S=2*I,D=Jxe(e,h,g,m,y,w,b,C,C,_,f,p,S),{uCurrentSlice:T}=D.values,k=zxe(e);k.bind(),Zxe(e),l.viewport(0,0,E,x),l.scissor(0,0,E,x),i||(i=d&&A?s.texture("volume-float16","rgba","fp16","linear"):c&&u?s.texture("volume-float32","rgba","float","linear"):s.texture("volume-uint8","rgba","ubyte","linear"));function Q(e,t){l.currentRenderItemId=-1;for(let n=0;n<B;++n)Sp.update(T,n),e.attachFramebuffer(k,0,n),t&&a.clear(a.COLOR_BUFFER_BIT),D.render();a.flush()}return i.define(E,x,B),eBe(e,D),Q(i,!0),$xe(e,D),Q(w,!0),tBe(e,D),Q(i,!1),{texture:i,scale:v,bbox:b,gridDim:C,gridTexDim:C,gridTexScale:_,radiusFactor:S,resolution:p,maxRadius:I}}(e,t,n,r,o,i);fw&&e.timer.markEnd("GaussianDensityTexture3d");return Yxe(a)}(e,t,n,r,o,i):qxe(e,t,n,r,!1,o,i)}function qxe(e,t,n,r,o,i,a){fw&&e.timer.mark("GaussianDensityTexture2d");const s=Wxe(e,t,n,r,o,i,a);return fw&&e.timer.markEnd("GaussianDensityTexture2d"),Yxe(s)}function Yxe(e){let{texture:t,scale:n,bbox:r,gridDim:o,gridTexDim:i,gridTexScale:a,radiusFactor:s,resolution:l,maxRadius:c}=e;return{transform:Xxe(n,r),texture:t,bbox:r,gridDim:o,gridTexDim:i,gridTexScale:a,radiusFactor:s,resolution:l,maxRadius:c}}function Xxe(e,t){const n=Yh.identity();return Yh.fromScaling(n,e),Yh.setTranslation(n,t.min),n}function Wxe(e,t,n,r,o,i,a){const{gl:s,resources:l,state:c,extensions:{colorBufferFloat:u,textureFloat:d,colorBufferHalfFloat:A,textureHalfFloat:f,blendMinMax:p}}=e,{smoothness:h,resolution:g}=i,{drawCount:m,positions:y,radii:v,groups:b,scale:C,expandedBox:I,dim:E,maxRadius:x}=Kxe(t,n,r,i),[B,w,_]=E,{texDimX:S,texDimY:D,texCols:T,powerOfTwoSize:k}=function(e){const t=e[0]*e[1]*e[2],n=Math.sqrt(t),r=Math.pow(2,Math.ceil(Math.log(n)/Math.log(2)));let o=0,i=e[1],a=1,s=e[2];r<e[0]*e[2]?(s=Math.floor(r/e[0]),a=Math.ceil(e[2]/s),o=s*e[0],i*=a):o=e[0]*e[2];return{texDimX:o,texDimY:i,texRows:a,texCols:s,powerOfTwoSize:i<r?r:2*r}}(E),Q=qh.create(S,D,0),M=Wh.create(S/k,D/k),R=2*x,P=o?k:S,O=o?k:D,F=Hxe("min-dist-2d",e,"image-uint8","rgba","ubyte","nearest");F.define(P,O);const N=Jxe(e,m,y,v,b,F,I,E,Q,M,h,g,R),{uCurrentSlice:L,uCurrentX:U,uCurrentY:G}=N.values,j=zxe(e);function z(e,t){c.currentRenderItemId=-1,e.attachFramebuffer(j,0),t&&(c.viewport(0,0,P,O),c.scissor(0,0,P,O),s.clear(s.COLOR_BUFFER_BIT)),Sp.update(G,0);let n=0,r=0,o=0;for(let i=0;i<_;++i)n>=T&&(n-=T,r+=w,o=0,Sp.update(G,r)),Sp.update(U,o),Sp.update(L,i),c.viewport(o,r,B,w),c.scissor(o,r,B,w),N.render(),++n,o+=B;s.flush()}return j.bind(),Zxe(e),a||(a=A&&f?l.texture("image-float16","rgba","fp16","linear"):u&&d?l.texture("image-float32","rgba","float","linear"):l.texture("image-uint8","rgba","ubyte","linear")),a.define(P,O),eBe(e,N),z(a,!0),p&&($xe(e,N),z(F,!0),tBe(e,N),z(a,!1)),{texture:a,scale:C,bbox:I,gridDim:E,gridTexDim:Q,gridTexScale:M,radiusFactor:R,resolution:g,maxRadius:x}}function Kxe(e,t,n,r){const{resolution:o,radiusOffset:i}=r,a=1/o,{indices:s,x:l,y:c,z:u,id:d}=e,A=ey.size(s),f=new Float32Array(3*A),p=new Float32Array(A),h=new Float32Array(A);let g=0;for(let C=0;C<A;++C){const e=ey.getAt(s,C);f[3*C]=l[e],f[3*C+1]=c[e],f[3*C+2]=u[e];const t=n(e)+i;g<t&&(g=t),p[C]=t,h[C]=d?d[C]:C}const m=2*g+4*o,y=XT.expand(XT(),t,qh.create(m,m,m)),v=XT.scale(XT(),y,a),b=XT.size(qh(),v);qh.ceil(b,b);return{drawCount:A,positions:f,radii:p,groups:h,scale:qh.create(o,o,o),expandedBox:y,dim:b,maxRadius:g}}function Jxe(e,t,n,r,o,i,a,s,l,c,u,d,A){if(e.namedComputeRenderables[jxe]){const f=qh.sub(qh(),a.max,a.min),p=e.namedComputeRenderables[jxe].values;Sp.updateIfChanged(p.drawCount,t),Sp.updateIfChanged(p.instanceCount,1),Sp.update(p.aRadius,r),Sp.update(p.aPosition,n),Sp.update(p.aGroup,o),Sp.updateIfChanged(p.uCurrentSlice,0),Sp.updateIfChanged(p.uCurrentX,0),Sp.updateIfChanged(p.uCurrentY,0),Sp.update(p.uBboxMin,a.min),Sp.update(p.uBboxSize,f),Sp.update(p.uGridDim,s),Sp.update(p.uGridTexDim,l),Sp.update(p.uGridTexScale,c),Sp.updateIfChanged(p.uAlpha,u),Sp.updateIfChanged(p.uResolution,d),Sp.updateIfChanged(p.uRadiusFactorInv,1/A),Sp.update(p.tMinDistanceTex,i),Sp.updateIfChanged(p.dGridTexType,i.getDepth()>0?"3d":"2d"),Sp.updateIfChanged(p.dCalcType,"density"),e.namedComputeRenderables[jxe].update()}else e.namedComputeRenderables[jxe]=function(e,t,n,r,o,i,a,s,l,c,u,d,A){const f=qh.sub(qh(),a.max,a.min),p={drawCount:Sp.create(t),instanceCount:Sp.create(1),aRadius:Sp.create(r),aPosition:Sp.create(n),aGroup:Sp.create(o),uCurrentSlice:Sp.create(0),uCurrentX:Sp.create(0),uCurrentY:Sp.create(0),uBboxMin:Sp.create(a.min),uBboxSize:Sp.create(f),uGridDim:Sp.create(s),uGridTexDim:Sp.create(l),uGridTexScale:Sp.create(c),uAlpha:Sp.create(u),uResolution:Sp.create(d),uRadiusFactorInv:Sp.create(1/A),tMinDistanceTex:Sp.create(i),dGridTexType:Sp.create(i.getDepth()>0?"3d":"2d"),dCalcType:Sp.create("density")},h={...Gxe},g=jV(jxe,Lxe,Uxe),m=CK(e,"points",g,h,p);return kK(m,p)}(e,t,n,r,o,i,a,s,l,c,u,d,A);return e.namedComputeRenderables[jxe]}function Zxe(e){const{gl:t,state:n}=e;n.disable(t.CULL_FACE),n.enable(t.BLEND),n.disable(t.DEPTH_TEST),n.enable(t.SCISSOR_TEST),n.depthMask(!1),n.clearColor(0,0,0,0)}function $xe(e,t){const{gl:n,state:r}=e;if(Sp.update(t.values.dCalcType,"minDistance"),t.update(),r.colorMask(!1,!1,!1,!0),r.blendFunc(n.ONE,n.ONE),!e.extensions.blendMinMax)throw new Error("GPU gaussian surface calculation requires EXT_blend_minmax");r.blendEquation(e.extensions.blendMinMax.MAX)}function eBe(e,t){const{gl:n,state:r}=e;Sp.update(t.values.dCalcType,"density"),t.update(),r.colorMask(!1,!1,!1,!0),r.blendFunc(n.ONE,n.ONE),r.blendEquation(n.FUNC_ADD)}function tBe(e,t){const{gl:n,state:r}=e;Sp.update(t.values.dCalcType,"groupId"),t.update(),r.colorMask(!0,!0,!0,!1),r.blendFunc(n.ONE,n.ZERO),r.blendEquation(n.FUNC_ADD)}async function nBe(e,t,n,r,o){const{resolution:i,radiusOffset:a,smoothness:s}=o,l=1/i,{indices:c,x:u,y:d,z:A,id:f}=t,p=ey.size(c),h=new Float32Array(p);let g=0;for(let U=0;U<p;++U){const e=r(ey.getAt(c,U))+a;g<e&&(g=e),h[U]=e}const m=2*g+i,y=XT.expand(XT(),n,qh.create(m,m,m)),v=y.min,b=XT.scale(XT(),y,l),C=XT.size(qh(),b);qh.ceil(C,C);const I=tg.Space(C,[0,1,2],Float32Array),E=I.create(),x=tg.create(I,E),B=I.create();B.fill(-1);const w=tg.create(I,B),[_,S,D]=C,T=D,k=T*S,Q=wT(C[0],v[0],i),M=wT(C[1],v[1],i),R=wT(C[2],v[2],i),P=I.create(),O=s,F=Math.ceil(1e5/(Math.pow(Math.pow(g,3),3)*l));function N(e,t){for(let n=e;n<t;++n){const e=ey.getAt(c,n),t=u[e],r=d[e],o=A[e],i=h[n],a=1/(i*i),s=2*i,p=s*s,g=Math.ceil(s*l),m=Math.floor(l*(t-v[0])),y=Math.floor(l*(r-v[1])),b=Math.floor(l*(o-v[2])),C=Math.max(0,m-g),I=Math.max(0,y-g),x=Math.max(0,b-g),w=Math.min(_,m+g+2),F=Math.min(S,y+g+2),N=Math.min(D,b+g+2);for(let l=C;l<w;++l){const e=Q[l]-t,i=l*k;for(let t=I;t<F;++t){const s=M[t]-r,l=e*e+s*s,c=t*T+i;for(let e=x;e<N;++e){const t=R[e]-o,r=l+t*t;if(r<=p){const t=Vle(r*a*-O),o=e+c;E[o]+=t,t>P[o]&&(P[o]=t,B[o]=f?f[n]:n)}}}}}}await async function(){for(let t=0;t<p;t+=F)N(t,Math.min(t+F,p)),e.shouldUpdate&&await e.update({message:"filling density grid",current:t,max:p})}();const L=Yh.identity();return Yh.fromScaling(L,qh.create(i,i,i)),Yh.setTranslation(L,y.min),{field:x,idField:w,transform:L,radiusFactor:1,resolution:i,maxRadius:g}}const rBe={resolution:U_.Numeric(1,{min:.1,max:20,step:.1},{description:"Grid resolution/cell spacing.",...Fk.CustomQualityParamInfo}),radiusOffset:U_.Numeric(0,{min:0,max:10,step:.1},{description:"Extra/offset radius added to the atoms/coarse elements for gaussian calculation. Useful to create coarse, low resolution surfaces."}),smoothness:U_.Numeric(1.5,{min:.5,max:2.5,step:.1},{description:"Smoothness of the gausian surface, lower is smoother."}),...$ee};U_.getDefaultValues(rBe);function oBe(e,t){const n=e.maxTextureSize/3;return n*n/Math.max(1,t?t.units.length/16:1)}function iBe(e,t,n,r){const{position:o,boundary:i,radius:a}=nte(e,t,n,r),s=Zee(i.box,r);return Tw.create("Gaussian Density",(async e=>await nBe(e,o,i.box,a,s)))}const aBe={...rBe,...Rk,ignoreHydrogens:U_.Boolean(!1),ignoreHydrogensVariant:U_.Select("all",U_.arrayToOptions(["all","non-polar"])),tryUseGpu:U_.Boolean(!0),includeParent:U_.Boolean(!1,{isHidden:!0})},sBe={...Dte,...Lte,...aBe},lBe={...vte,...wte,...aBe};function cBe(e){return e.extensions.colorBufferFloat&&e.extensions.textureFloat&&e.extensions.textureFloatLinear&&e.extensions.blendMinMax&&e.extensions.drawBuffers}function uBe(e,t,n){if(t.resolution>1)return!1;const r=n.maxTextureSize/3,{areaCells:o,maxAreaCells:i}=Jee(e.boundary.box,t.resolution,r*r);return o<i}function dBe(e,t,n,r){return n.tryUseGpu&&r&&cBe(r)&&uBe(t,n,r)?function(e){return function(e,t){return Ste({...e,setUpdateState:(t,n,r,o,i,a,s)=>{e.setUpdateState(t,n,r,o,i,a,s),y5.areEqual(o.size,i.size)||(t.createGeometry=!0)},geometryUtils:WW.Utils},t)}({defaultProps:U_.getDefaultValues(sBe),createGeometry:gBe,createLocationIterator:oye.fromGroup,getLoci:$me,eachLocation:Zme,setUpdateState:(e,t,n)=>{t.resolution!==n.resolution&&(e.createGeometry=!0),t.radiusOffset!==n.radiusOffset&&(e.createGeometry=!0),t.smoothness!==n.smoothness&&(e.createGeometry=!0),t.ignoreHydrogens!==n.ignoreHydrogens&&(e.createGeometry=!0),t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant&&(e.createGeometry=!0),t.traceOnly!==n.traceOnly&&(e.createGeometry=!0),t.includeParent!==n.includeParent&&(e.createGeometry=!0),t.smoothColors.name!==n.smoothColors.name?e.updateColor=!0:"on"===t.smoothColors.name&&"on"===n.smoothColors.name&&(t.smoothColors.params.resolutionFactor!==n.smoothColors.params.resolutionFactor&&(e.updateColor=!0),t.smoothColors.params.sampleStride!==n.smoothColors.params.sampleStride&&(e.updateColor=!0))},mustRecreate:(e,t,n)=>!t.tryUseGpu||!n||!uBe(e.structure,t,n),processValues:(e,t,n,r,o)=>{const{resolution:i,colorTexture:a}=t.meta,s=Ok(n.smoothColors,r.color.preferSmoothing,i);s&&o&&(d6(e,s.resolution,s.stride,o,a),t.meta.colorTexture=e.tColorGrid.ref.value)},dispose:e=>{var t;e.vertexTexture.ref.value.destroy(),e.groupTexture.ref.value.destroy(),e.normalTexture.ref.value.destroy(),e.doubleBuffer.destroy(),null===(t=e.meta.colorTexture)||void 0===t||t.destroy()}},e)}(e):function(e){return Tte({defaultProps:U_.getDefaultValues(sBe),createGeometry:fBe,createLocationIterator:oye.fromGroup,getLoci:$me,eachLocation:Zme,setUpdateState:(e,t,n)=>{t.resolution!==n.resolution&&(e.createGeometry=!0),t.radiusOffset!==n.radiusOffset&&(e.createGeometry=!0),t.smoothness!==n.smoothness&&(e.createGeometry=!0),t.ignoreHydrogens!==n.ignoreHydrogens&&(e.createGeometry=!0),t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant&&(e.createGeometry=!0),t.traceOnly!==n.traceOnly&&(e.createGeometry=!0),t.includeParent!==n.includeParent&&(e.createGeometry=!0),t.smoothColors.name!==n.smoothColors.name?e.updateColor=!0:"on"===t.smoothColors.name&&"on"===n.smoothColors.name&&(t.smoothColors.params.resolutionFactor!==n.smoothColors.params.resolutionFactor&&(e.updateColor=!0),t.smoothColors.params.sampleStride!==n.smoothColors.params.sampleStride&&(e.updateColor=!0))},mustRecreate:(e,t,n)=>t.tryUseGpu&&!!n&&uBe(e.structure,t,n),processValues:(e,t,n,r,o)=>{const{resolution:i,colorTexture:a}=t.meta,s=Ok(n.smoothColors,r.color.preferSmoothing,i);s&&(W5(e,s.resolution,s.stride,o,a),t.meta.colorTexture=e.tColorGrid.ref.value)},dispose:e=>{var t;null===(t=e.meta.colorTexture)||void 0===t||t.destroy()}},e)}(e)}function ABe(e,t,n,r){return n.tryUseGpu&&r&&cBe(r)&&uBe(t,n,r)?function(e){return function(e,t){return yte({...e,setUpdateState:(t,n,r,o,i,a,s)=>{e.setUpdateState(t,n,r,o,i,a,s),y5.areEqual(o.size,i.size)||(t.createGeometry=!0)},geometryUtils:WW.Utils},t)}({defaultProps:U_.getDefaultValues(lBe),createGeometry:mBe,createLocationIterator:oye.fromStructure,getLoci:rye,eachLocation:nye,setUpdateState:(e,t,n)=>{t.resolution!==n.resolution&&(e.createGeometry=!0),t.radiusOffset!==n.radiusOffset&&(e.createGeometry=!0),t.smoothness!==n.smoothness&&(e.createGeometry=!0),t.ignoreHydrogens!==n.ignoreHydrogens&&(e.createGeometry=!0),t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant&&(e.createGeometry=!0),t.traceOnly!==n.traceOnly&&(e.createGeometry=!0),t.includeParent!==n.includeParent&&(e.createGeometry=!0),t.smoothColors.name!==n.smoothColors.name?e.updateColor=!0:"on"===t.smoothColors.name&&"on"===n.smoothColors.name&&(t.smoothColors.params.resolutionFactor!==n.smoothColors.params.resolutionFactor&&(e.updateColor=!0),t.smoothColors.params.sampleStride!==n.smoothColors.params.sampleStride&&(e.updateColor=!0))},mustRecreate:(e,t,n)=>!t.tryUseGpu||!n||!uBe(e,t,n),processValues:(e,t,n,r,o)=>{const{resolution:i,colorTexture:a}=t.meta,s=Ok(n.smoothColors,r.color.preferSmoothing,i);s&&o&&(d6(e,s.resolution,s.stride,o,a),t.meta.colorTexture=e.tColorGrid.ref.value)},dispose:e=>{var t;e.vertexTexture.ref.value.destroy(),e.groupTexture.ref.value.destroy(),e.normalTexture.ref.value.destroy(),e.doubleBuffer.destroy(),null===(t=e.meta.colorTexture)||void 0===t||t.destroy()}},e)}(e):function(e){return bte({defaultProps:U_.getDefaultValues(lBe),createGeometry:pBe,createLocationIterator:oye.fromStructure,getLoci:rye,eachLocation:nye,setUpdateState:(e,t,n)=>{t.resolution!==n.resolution&&(e.createGeometry=!0),t.radiusOffset!==n.radiusOffset&&(e.createGeometry=!0),t.smoothness!==n.smoothness&&(e.createGeometry=!0),t.ignoreHydrogens!==n.ignoreHydrogens&&(e.createGeometry=!0),t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant&&(e.createGeometry=!0),t.traceOnly!==n.traceOnly&&(e.createGeometry=!0),t.smoothColors.name!==n.smoothColors.name?e.updateColor=!0:"on"===t.smoothColors.name&&"on"===n.smoothColors.name&&(t.smoothColors.params.resolutionFactor!==n.smoothColors.params.resolutionFactor&&(e.updateColor=!0),t.smoothColors.params.sampleStride!==n.smoothColors.params.sampleStride&&(e.updateColor=!0))},mustRecreate:(e,t,n)=>t.tryUseGpu&&!!n&&uBe(e,t,n),processValues:(e,t,n,r,o)=>{const{resolution:i,colorTexture:a}=t.meta,s=Ok(n.smoothColors,r.color.preferSmoothing,i);s&&(W5(e,s.resolution,s.stride,o,a),t.meta.colorTexture=e.tColorGrid.ref.value)},dispose:e=>{var t;null===(t=e.meta.colorTexture)||void 0===t||t.destroy()}},e)}(e)}async function fBe(e,t,n,r,o,i){const{smoothness:a}=o,{transform:s,field:l,idField:c,radiusFactor:u,resolution:d,maxRadius:A}=await iBe(n,t,r.size,o).runInContext(e.runtime),f={isoLevel:Math.exp(-a)/u,scalarField:l,idField:c},p=await Upe(f,i).runAsChild(e.runtime);p.meta.resolution=d,RY.transform(p,s),e.webgl&&!e.webgl.isWebGL2?(RY.uniformTriangleGroup(p),Sp.updateIfChanged(p.varyingGroup,!1)):Sp.updateIfChanged(p.varyingGroup,!0);const h=YT.expand(YT(),t.boundary.sphere,A);return p.setBoundingSphere(h),p}async function pBe(e,t,n,r,o){const{smoothness:i}=r,{transform:a,field:s,idField:l,radiusFactor:c,resolution:u,maxRadius:d}=await function(e,t,n){const{position:r,boundary:o,radius:i}=rte(e,t,n),a=Zee(o.box,n);return Tw.create("Gaussian Density",(async e=>await nBe(e,r,o.box,i,a)))}(t,n.size,r).runInContext(e.runtime),A={isoLevel:Math.exp(-i)/c,scalarField:s,idField:l},f=await Upe(A,o).runAsChild(e.runtime);f.meta.resolution=u,RY.transform(f,a),e.webgl&&!e.webgl.isWebGL2?(RY.uniformTriangleGroup(f),Sp.updateIfChanged(f.varyingGroup,!1)):Sp.updateIfChanged(f.varyingGroup,!0);const p=YT.expand(YT(),t.boundary.sphere,d);return f.setBoundingSphere(p),f}const hBe="gaussian-surface";async function gBe(e,t,n,r,o,i){if(!e.webgl)throw new Error("webgl context required to create gaussian surface texture-mesh");fw&&e.webgl.timer.mark("createGaussianSurfaceTextureMesh");const{namedTextures:a,resources:s,extensions:{colorBufferFloat:l,textureFloat:c,colorBufferHalfFloat:u,textureHalfFloat:d}}=e.webgl;a[hBe]||(a[hBe]=u&&d?s.texture("image-float16","rgba","fp16","linear"):l&&c?s.texture("image-float32","rgba","float","linear"):s.texture("image-uint8","rgba","ubyte","linear"));const A=await function(e,t,n,r,o,i,a){const{position:s,boundary:l,radius:c}=nte(e,t,n,o),u=Zee(l.box,o,oBe(i,e));return Tw.create("Gaussian Density",(async e=>qxe(i,s,l.box,c,r,u,a)))}(n,t,r.size,!0,o,e.webgl,a[hBe]).runInContext(e.runtime),f=Math.exp(-o.smoothness)/A.radiusFactor,p=qh.create(0,1,2),h=null===i||void 0===i?void 0:i.doubleBuffer.get(),g=yhe(e.webgl,A.texture,A.gridDim,A.gridTexDim,A.gridTexScale,A.transform,f,!1,!0,p,!0,null===h||void 0===h?void 0:h.vertex,null===h||void 0===h?void 0:h.group,null===h||void 0===h?void 0:h.normal);fw&&e.webgl.timer.markEnd("createGaussianSurfaceTextureMesh");const m=t.elements.length,y=YT.expand(YT(),t.boundary.sphere,A.maxRadius),v=WW.create(g.vertexCount,m,g.vertexTexture,g.groupTexture,g.normalTexture,y,i);return v.meta.resolution=A.resolution,v.meta.webgl=e.webgl,v}async function mBe(e,t,n,r,o){if(!e.webgl)throw new Error("webgl context required to create structure gaussian surface texture-mesh");fw&&e.webgl.timer.mark("createStructureGaussianSurfaceTextureMesh");const{namedTextures:i,resources:a,extensions:{colorBufferFloat:s,textureFloat:l,colorBufferHalfFloat:c,textureHalfFloat:u}}=e.webgl;i[hBe]||(i[hBe]=c&&u?a.texture("image-float16","rgba","fp16","linear"):s&&l?a.texture("image-float32","rgba","float","linear"):a.texture("image-uint8","rgba","ubyte","linear"));const d=await function(e,t,n,r,o,i){const{box:a}=e.lookup3d.boundary,{position:s,boundary:l,radius:c}=rte(e,t,r),u=Zee(l.box,r);return Tw.create("Gaussian Density",(async e=>qxe(o,s,a,c,n,u,i)))}(t,n.size,!0,r,e.webgl,i[hBe]).runInContext(e.runtime),A=Math.exp(-r.smoothness)/d.radiusFactor,f=qh.create(0,1,2),p=null===o||void 0===o?void 0:o.doubleBuffer.get(),h=yhe(e.webgl,d.texture,d.gridDim,d.gridTexDim,d.gridTexScale,d.transform,A,!1,!0,f,!0,null===p||void 0===p?void 0:p.vertex,null===p||void 0===p?void 0:p.group,null===p||void 0===p?void 0:p.normal);fw&&e.webgl.timer.markEnd("createStructureGaussianSurfaceTextureMesh");const g=t.elementCount,m=YT.expand(YT(),t.boundary.sphere,d.maxRadius),y=WW.create(h.vertexCount,g,h.vertexTexture,h.groupTexture,h.normalTexture,m,o);return y.meta.resolution=d.resolution,y.meta.webgl=e.webgl,y}async function yBe(e,t,n,r,o,i){const{smoothness:a}=o,{transform:s,field:l,idField:c,maxRadius:u}=await iBe(n,t,r.size,o).runInContext(e.runtime),d={isoLevel:Math.exp(-a),scalarField:l,idField:c},A=await Gpe(d,i).runAsChild(e.runtime);wW.transform(A,s);const f=YT.expand(YT(),t.boundary.sphere,u);return A.setBoundingSphere(f),A}const vBe={...Ote,...rBe,sizeFactor:U_.Numeric(3,{min:0,max:10,step:.1}),lineSizeAttenuation:U_.Boolean(!1),ignoreHydrogens:U_.Boolean(!1),ignoreHydrogensVariant:U_.Select("all",U_.arrayToOptions(["all","non-polar"])),includeParent:U_.Boolean(!1,{isHidden:!0})};function bBe(e){return Fte({defaultProps:U_.getDefaultValues(vBe),createGeometry:yBe,createLocationIterator:oye.fromGroup,getLoci:$me,eachLocation:Zme,setUpdateState:(e,t,n)=>{t.resolution!==n.resolution&&(e.createGeometry=!0),t.radiusOffset!==n.radiusOffset&&(e.createGeometry=!0),t.smoothness!==n.smoothness&&(e.createGeometry=!0),t.ignoreHydrogens!==n.ignoreHydrogens&&(e.createGeometry=!0),t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant&&(e.createGeometry=!0),t.traceOnly!==n.traceOnly&&(e.createGeometry=!0),t.includeParent!==n.includeParent&&(e.createGeometry=!0)}},e)}const CBe={"gaussian-surface-mesh":(e,t)=>_te("Gaussian surface mesh",e,t,dBe),"structure-gaussian-surface-mesh":(e,t)=>wee("Structure-Gaussian surface mesh",e,t,ABe),"gaussian-surface-wireframe":(e,t)=>_te("Gaussian surface wireframe",e,t,bBe)},IBe={...sBe,...vBe,visuals:U_.MultiSelect(["gaussian-surface-mesh"],U_.objectToOptions(CBe)),bumpFrequency:U_.Numeric(1,{min:0,max:10,step:.1},Fk.ShadingCategory)};const EBe={name:"gaussian-surface",label:"Gaussian Surface",description:"Displays a gaussian molecular surface.",factory:function(e,t){return b6.createMulti("Gaussian Surface",e,t,Ute,CBe)},getParams:function(e,t){return IBe},defaultValues:U_.getDefaultValues(IBe),defaultColorTheme:{name:"chain-id"},defaultSizeTheme:{name:"physical"},isApplicable:e=>e.elementCount>0},xBe={...xte,background:U_.Boolean(!1),backgroundMargin:U_.Numeric(0,{min:0,max:1,step:.01}),backgroundColor:U_.Color(bk.black),backgroundOpacity:U_.Numeric(.5,{min:0,max:1,step:.01}),borderWidth:U_.Numeric(.25,{min:0,max:.5,step:.01}),level:U_.Select("residue",[["chain","Chain"],["residue","Residue"],["element","Element"]],{isEssential:!0}),ignoreHydrogens:U_.Boolean(!1),ignoreHydrogensVariant:U_.Select("all",U_.arrayToOptions(["all","non-polar"])),chainScale:U_.Numeric(10,{min:0,max:20,step:.1}),residueScale:U_.Numeric(1,{min:0,max:20,step:.1}),elementScale:U_.Numeric(.5,{min:0,max:20,step:.1})};function BBe(e){return function(e,t){return yte({...e,setUpdateState:(t,n,r,o,i,a,s)=>{e.setUpdateState(t,n,r,o,i,a,s),y5.areEqual(o.size,i.size)||(t.updateSize=!0),n.background!==r.background&&(t.createGeometry=!0),n.backgroundMargin!==r.backgroundMargin&&(t.createGeometry=!0),n.tether!==r.tether&&(t.createGeometry=!0),n.tetherLength!==r.tetherLength&&(t.createGeometry=!0),n.tetherBaseWidth!==r.tetherBaseWidth&&(t.createGeometry=!0),n.attachment!==r.attachment&&(t.createGeometry=!0),n.fontFamily!==r.fontFamily&&(t.createGeometry=!0),n.fontQuality!==r.fontQuality&&(t.createGeometry=!0),n.fontStyle!==r.fontStyle&&(t.createGeometry=!0),n.fontVariant!==r.fontVariant&&(t.createGeometry=!0),n.fontWeight!==r.fontWeight&&(t.createGeometry=!0)},geometryUtils:yW.Utils},t)}({defaultProps:U_.getDefaultValues(xBe),createGeometry:wBe,createLocationIterator:oye.fromStructure,getLoci:rye,eachLocation:nye,setUpdateState:(e,t,n)=>{e.createGeometry=t.level!==n.level||"chain"===t.level&&t.chainScale!==n.chainScale||"residue"===t.level&&t.residueScale!==n.residueScale||"element"===t.level&&t.elementScale!==n.elementScale||t.ignoreHydrogens!==n.ignoreHydrogens||t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant}},e)}function wBe(e,t,n,r,o){switch(r.level){case"chain":return function(e,t,n,r,o){const i=Vk.create(t),{units:a,serialMapping:s}=t,{auth_asym_id:l,label_asym_id:c}=WL.chain,{cumulativeUnitElementCount:u}=s,d=a.length,{chainScale:A}=r,f=W6.create(r,d,d/2,o);for(let p=0,h=a.length;p<h;++p){const e=a[p];i.unit=e,i.element=e.elements[0];const{center:t,radius:n}=e.lookup3d.boundary.sphere;qh.transformMat4(_Be,t,e.conformation.operator.matrix);const r=l(i),o=c(i),s=r===o?o:`${o} [${r}]`;f.add(s,_Be[0],_Be[1],_Be[2],n,A,u[p])}return f.getText()}(0,t,0,r,o);case"residue":return function(e,t,n,r,o){const i=Vk.create(t),{units:a,serialMapping:s}=t,{label_comp_id:l}=WL.atom,{auth_seq_id:c}=WL.residue,{cumulativeUnitElementCount:u}=s,d=2*t.polymerResidueCount,{residueScale:A}=r,f=W6.create(r,d,d/2,o);for(let p=0,h=a.length;p<h;++p){const e=a[p],t=e.conformation,{elements:n}=e;i.unit=e,i.element=e.elements[0];const r=e.model.atomicHierarchy.residueAtomSegments.index,o=u[p];let s=0;const d=n.length;for(;s<d;){const e=s,a=r[n[s]];for(s++;s<d&&r[n[s]]===a;)s++;SBe.reset();for(let r=e;r<s;r++)t.position(n[r],_Be),SBe.includePosition(_Be);SBe.finishedIncludeStep();for(let r=e;r<s;r++)t.position(n[r],_Be),SBe.radiusPosition(_Be);i.element=n[e];const{center:u,radius:p}=SBe.getSphere(),h=c(i),g=`${l(i)} ${h}`;f.add(g,u[0],u[1],u[2],p,A,o+e)}}return f.getText()}(0,t,0,r,o);case"element":return function(e,t,n,r,o){const i=Vk.create(t),{units:a,serialMapping:s}=t,{label_atom_id:l,label_alt_id:c}=WL.atom,{cumulativeUnitElementCount:u}=s,d=n.size,A=t.elementCount,{elementScale:f}=r,p=W6.create(r,A,A/2,o);for(let h=0,g=a.length;h<g;++h){const e=a[h],n=e.conformation,{elements:o}=e;i.unit=e;const s=u[h],A=Wme(t,e,{...r,traceOnly:!1});for(let t=0,r=o.length;t<r;t++){if(A&&A(o[t]))continue;i.element=o[t],n.position(i.element,_Be);const e=l(i),r=c(i),a=r?`${e}%${r}`:e;p.add(a,_Be[0],_Be[1],_Be[2],d.size(i),f,s+t)}}return p.getText()}(0,t,n,r,o)}}const _Be=qh(),SBe=new lO("98");const DBe={"label-text":(e,t)=>wee("Label text",e,t,BBe)},TBe={...xBe,visuals:U_.MultiSelect(["label-text"],U_.objectToOptions(DBe))};const kBe={name:"label",label:"Label",description:"Displays labels.",factory:function(e,t){const n=b6.createMulti("Label",e,t,Ute,DBe);return n.setState({pickable:!1,markerActions:b5.None}),n},getParams:function(e,t){return TBe},defaultValues:U_.getDefaultValues(TBe),defaultColorTheme:{name:"uniform"},defaultSizeTheme:{name:"physical"},isApplicable:e=>e.elementCount>0};const QBe={probeRadius:U_.Numeric(1.4,{min:0,max:10,step:.1},{description:"Radius of the probe tracing the molecular surface."}),resolution:U_.Numeric(.5,{min:.01,max:20,step:.01},{description:"Grid resolution/cell spacing.",...Fk.CustomQualityParamInfo}),probePositions:U_.Numeric(36,{min:12,max:90,step:1},{description:"Number of positions tested for probe target intersection.",...Fk.CustomQualityParamInfo})};U_.getDefaultValues(QBe);async function MBe(e,t,n,r,o,i){let a=-1;function s(e,t,n,r,o){if(-1!==a){const i=a;if(i!==r&&i!==o&&l(i,e,t,n))return i;a=-1}for(let i=0,s=E.count;i<s;++i){const s=ey.getAt(x,E.indices[i]);if(s!==r&&s!==o&&l(s,e,t,n))return a=s,s}return-1}function l(e,t,n,r){const o=D[e],i=B[e]-t,a=w[e]-n,s=_[e]-r;return i*i+a*a+s*s<o*o}function c(e,t){for(let n=e;n<t;++n){const e=ey.getAt(x,n),t=B[e],r=w[e],o=_[e],i=D[e],a=i*i;I.find(t,r,o,i);const l=Math.ceil(i*v),c=Math.floor(v*(t-M)),u=Math.floor(v*(r-R)),d=Math.floor(v*(o-P)),A=Math.max(0,c-l),f=Math.max(0,u-l),p=Math.max(0,d-l),h=Math.min(N,c+l+2),g=Math.min(L,u+l+2),m=Math.min(U,d+l+2);for(let y=A;y<h;++y){const l=X[y]-t,c=y*j;for(let u=f;u<g;++u){const d=W[u]-r,A=l*l+d*d,f=u*G+c;for(let c=p;c<m;++c){const u=K[c]-o,p=A+u*u;if(p<a){const a=c+f;q[a]<0&&(q[a]*=-1);const A=Math.sqrt(p),h=i/A;if(-1===s(l*h+t,d*h+r,u*h+o,e,-1)){const e=i-A;e<q[a]&&(q[a]=e,Y[a]=S[n])}}}}}}}const u=qh(),d=qh(),A=qh(),f=qh();function p(e,t){const n=D[e],r=D[t],o=u[0]=B[t]-B[e],i=u[1]=w[t]-w[e],l=u[2]=_[t]-_[e],c=o*o+i*i+l*l,p=Math.sqrt(c),h=n*((n*n+p*p-r*r)/(2*n*p));qh.normalize(u,u),function(e,t){e[0]=e[1]=e[2]=1,0!==t[0]?e[0]=(t[1]+t[2])/-t[0]:0!==t[1]?e[1]=(t[0]+t[2])/-t[1]:0!==t[2]&&(e[2]=(t[0]+t[1])/-t[2])}(A,u),qh.normalize(A,A),qh.cross(f,u,A),qh.normalize(f,f);const g=Math.sqrt(n*n-h*h);qh.scale(A,A,g),qh.scale(f,f,g),qh.scale(u,u,h),d[0]=u[0]+B[e],d[1]=u[1]+w[e],d[2]=u[2]+_[e],a=-1;for(let a=0;a<y;++a){const n=z[a],r=H[a],o=d[0]+n*A[0]+r*f[0],i=d[1]+n*A[1]+r*f[1],l=d[2]+n*A[2]+r*f[2];if(-1===s(o,i,l,e,t)){const n=Math.floor(v*(o-M)),r=Math.floor(v*(i-R)),a=Math.floor(v*(l-P)),s=Math.max(0,n-b),c=Math.max(0,r-b),d=Math.max(0,a-b),A=Math.min(N,n+b+2),f=Math.min(L,r+b+2),p=Math.min(U,a+b+2);for(let h=s;h<A;++h){const n=o-X[h],r=h*j;for(let o=c;o<f;++o){const a=i-W[o],s=n*n+a*a,c=o*G+r;for(let r=d;r<p;++r){const o=l-K[r],i=s+o*o,d=r+c,A=q[d];if(A>0&&i<A*A){q[d]=Math.sqrt(i);const r=n*u[0]+a*u[1]+o*u[2];Y[d]=S[ey.indexOf(x,r<0?t:e)]}}}}}}}function h(e,t){for(let n=e;n<t;++n){const e=ey.getAt(x,n);I.find(B[e],w[e],_[e],D[e]);for(let t=0,n=E.count;t<n;++t){const n=ey.getAt(x,E.indices[t]);e<n&&p(e,n)}}}const{resolution:g,probeRadius:m,probePositions:y}=i,v=1/g,b=Math.max(5,2+Math.floor(m*v)),C=qh.create(r,r,r);qh.scale(C,C,2);const I=ZT(t,n,C),E=I.result;null===o&&(o=I.boundary.box);const{indices:x,x:B,y:w,z:_,id:S,radius:D}=t,T=ey.size(x),k=r+g,Q=XT.expand(XT(),o,qh.create(k,k,k)),[M,R,P]=Q.min,O=XT.scale(XT(),Q,v),F=XT.size(qh(),O);qh.ceil(F,F);const[N,L,U]=F,G=U,j=G*L,{cosTable:z,sinTable:H}=function(e){let t=0;const n=2*Math.PI/e,r=new Float32Array(e),o=new Float32Array(e);for(let i=0;i<e;i++)r[i]=Math.cos(t),o[i]=Math.sin(t),t+=n;return{cosTable:r,sinTable:o}}(y),V=tg.Space(F,[0,1,2],Float32Array),q=V.create(),Y=V.create();q.fill(-1001),Y.fill(-1);const X=wT(N,M,g),W=wT(L,R,g),K=wT(U,P,g),J=Math.ceil(1e5/(Math.pow(Math.pow(r,3),3)*v));await async function(){for(let t=0;t<T;t+=J)c(t,Math.min(t+J,T)),e.shouldUpdate&&await e.update({message:"projecting points",current:t,max:T})}(),await async function(){for(let t=0;t<T;t+=J)h(t,Math.min(t+J,T)),e.shouldUpdate&&await e.update({message:"projecting torii",current:t,max:T})}();const Z=tg.create(V,q),$=tg.create(V,Y),ee=Yh.identity();return Yh.fromScaling(ee,qh.create(g,g,g)),Yh.setTranslation(ee,Q.min),{field:Z,idField:$,transform:ee,resolution:g,maxRadius:r}}function RBe(e,t,n,r){const{position:o,boundary:i,maxRadius:a}=function(e,t,n,r){const{probeRadius:o}=r,{position:i,boundary:a,radius:s}=nte(e,t,n,r),{indices:l}=i,c=ey.size(l),u=new Float32Array(ey.end(l));let d=0;for(let A=0;A<c;++A){const e=ey.getAt(l,A),t=s(e);d<t&&(d=t),u[e]=t+o}return{position:{...i,radius:u},boundary:a,maxRadius:d}}(e,t,n,r),s=Zee(i.box,r);return Tw.create("Molecular Surface",(async e=>await OBe(e,o,i,a,i.box,s)))}function PBe(e,t,n){const{position:r,boundary:o,maxRadius:i}=function(e,t,n){const{probeRadius:r}=n,{position:o,boundary:i,radius:a}=rte(e,t,n),{indices:s}=o,l=ey.size(s),c=new Float32Array(ey.end(s));let u=0;for(let d=0;d<l;++d){const e=ey.getAt(s,d),t=a(e);u<t&&(u=t),c[e]=t+r}return{position:{...o,radius:c},boundary:i,maxRadius:u}}(e,t,n),a=Zee(o.box,n);return Tw.create("Molecular Surface",(async e=>await OBe(e,r,o,i,o.box,a)))}async function OBe(e,t,n,r,o,i){return MBe(e,t,n,r,o,i)}const FBe={...Dte,...QBe,...$ee,...Rk};async function NBe(e,t,n,r,o,i){const{transform:a,field:s,idField:l,resolution:c,maxRadius:u}=await RBe(n,t,r.size,o).runInContext(e.runtime),d={isoLevel:o.probeRadius,scalarField:s,idField:l},A=await Upe(d,i).runAsChild(e.runtime);if(o.includeParent){const e=Math.ceil(2/o.resolution);RY.smoothEdges(A,{iterations:e,maxNewEdgeLength:Math.sqrt(2)})}RY.transform(A,a),e.webgl&&!e.webgl.isWebGL2?(RY.uniformTriangleGroup(A),Sp.updateIfChanged(A.varyingGroup,!1)):Sp.updateIfChanged(A.varyingGroup,!0);const f=YT.expand(YT(),t.boundary.sphere,u);return A.setBoundingSphere(f),A.meta.resolution=c,A}function LBe(e){return Tte({defaultProps:U_.getDefaultValues(FBe),createGeometry:NBe,createLocationIterator:oye.fromGroup,getLoci:$me,eachLocation:Zme,setUpdateState:(e,t,n)=>{t.resolution!==n.resolution&&(e.createGeometry=!0),t.probeRadius!==n.probeRadius&&(e.createGeometry=!0),t.probePositions!==n.probePositions&&(e.createGeometry=!0),t.ignoreHydrogens!==n.ignoreHydrogens&&(e.createGeometry=!0),t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant&&(e.createGeometry=!0),t.traceOnly!==n.traceOnly&&(e.createGeometry=!0),t.includeParent!==n.includeParent&&(e.createGeometry=!0),t.smoothColors.name!==n.smoothColors.name?e.updateColor=!0:"on"===t.smoothColors.name&&"on"===n.smoothColors.name&&(t.smoothColors.params.resolutionFactor!==n.smoothColors.params.resolutionFactor&&(e.updateColor=!0),t.smoothColors.params.sampleStride!==n.smoothColors.params.sampleStride&&(e.updateColor=!0))},processValues:(e,t,n,r,o)=>{const{resolution:i,colorTexture:a}=t.meta,s=Ok(n.smoothColors,r.color.preferSmoothing,i);s&&(W5(e,s.resolution,s.stride,o,a),t.meta.colorTexture=e.tColorGrid.ref.value)},dispose:e=>{var t;null===(t=e.meta.colorTexture)||void 0===t||t.destroy()}},e)}async function UBe(e,t,n,r,o){const{transform:i,field:a,idField:s,resolution:l,maxRadius:c}=await PBe(t,n.size,r).runInContext(e.runtime),u={isoLevel:r.probeRadius,scalarField:a,idField:s},d=await Upe(u,o).runAsChild(e.runtime);if(r.includeParent){const e=Math.ceil(2/r.resolution);RY.smoothEdges(d,{iterations:e,maxNewEdgeLength:Math.sqrt(2)})}RY.transform(d,i),e.webgl&&!e.webgl.isWebGL2?(RY.uniformTriangleGroup(d),Sp.updateIfChanged(d.varyingGroup,!1)):Sp.updateIfChanged(d.varyingGroup,!0);const A=YT.expand(YT(),t.boundary.sphere,c);return d.setBoundingSphere(A),d.meta.resolution=l,d}function GBe(e){return bte({defaultProps:U_.getDefaultValues(FBe),createGeometry:UBe,createLocationIterator:oye.fromStructure,getLoci:rye,eachLocation:nye,setUpdateState:(e,t,n)=>{t.resolution!==n.resolution&&(e.createGeometry=!0),t.probeRadius!==n.probeRadius&&(e.createGeometry=!0),t.probePositions!==n.probePositions&&(e.createGeometry=!0),t.ignoreHydrogens!==n.ignoreHydrogens&&(e.createGeometry=!0),t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant&&(e.createGeometry=!0),t.traceOnly!==n.traceOnly&&(e.createGeometry=!0),t.includeParent!==n.includeParent&&(e.createGeometry=!0),t.smoothColors.name!==n.smoothColors.name?e.updateColor=!0:"on"===t.smoothColors.name&&"on"===n.smoothColors.name&&(t.smoothColors.params.resolutionFactor!==n.smoothColors.params.resolutionFactor&&(e.updateColor=!0),t.smoothColors.params.sampleStride!==n.smoothColors.params.sampleStride&&(e.updateColor=!0))},processValues:(e,t,n,r,o)=>{const{resolution:i,colorTexture:a}=t.meta,s=Ok(n.smoothColors,r.color.preferSmoothing,i);s&&(W5(e,s.resolution,s.stride,o,a),t.meta.colorTexture=e.tColorGrid.ref.value)},dispose:e=>{var t;null===(t=e.meta.colorTexture)||void 0===t||t.destroy()}},e)}const jBe={...Ote,...QBe,...$ee,sizeFactor:U_.Numeric(1.5,{min:0,max:10,step:.1})};async function zBe(e,t,n,r,o,i){const{transform:a,field:s,idField:l,maxRadius:c}=await RBe(n,t,r.size,o).runInContext(e.runtime),u={isoLevel:o.probeRadius,scalarField:s,idField:l},d=await Gpe(u,i).runAsChild(e.runtime);wW.transform(d,a);const A=YT.expand(YT(),t.boundary.sphere,c);return d.setBoundingSphere(A),d}function HBe(e){return Fte({defaultProps:U_.getDefaultValues(jBe),createGeometry:zBe,createLocationIterator:oye.fromGroup,getLoci:$me,eachLocation:Zme,setUpdateState:(e,t,n)=>{t.resolution!==n.resolution&&(e.createGeometry=!0),t.probeRadius!==n.probeRadius&&(e.createGeometry=!0),t.probePositions!==n.probePositions&&(e.createGeometry=!0),t.ignoreHydrogens!==n.ignoreHydrogens&&(e.createGeometry=!0),t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant&&(e.createGeometry=!0),t.includeParent!==n.includeParent&&(e.createGeometry=!0)}},e)}const VBe={"molecular-surface-mesh":(e,t)=>_te("Molecular surface mesh",e,t,LBe),"structure-molecular-surface-mesh":(e,t)=>wee("Structure Molecular surface mesh",e,t,GBe),"molecular-surface-wireframe":(e,t)=>_te("Molecular surface wireframe",e,t,HBe)},qBe={...FBe,...jBe,visuals:U_.MultiSelect(["molecular-surface-mesh"],U_.objectToOptions(VBe)),bumpFrequency:U_.Numeric(1,{min:0,max:10,step:.1},Fk.ShadingCategory)};const YBe={name:"molecular-surface",label:"Molecular Surface",description:"Displays a molecular surface.",factory:function(e,t){return b6.createMulti("Molecular Surface",e,t,Ute,VBe)},getParams:function(e,t){return qBe},defaultValues:U_.getDefaultValues(qBe),defaultColorTheme:{name:"chain-id"},defaultSizeTheme:{name:"physical"},isApplicable:e=>e.elementCount>0},XBe={...Dte,sizeFactor:U_.Numeric(1,{min:0,max:2,step:.1}),detail:U_.Numeric(0,{min:0,max:3,step:1},Fk.CustomQualityParamInfo)};function WBe(e){return Tte({defaultProps:U_.getDefaultValues(XBe),createGeometry:KBe,createLocationIterator:JBe,getLoci:ZBe,eachLocation:$Be,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.detail!==n.detail}},e)}function KBe(e,t,n,r,o,i){if(!function(e){if(BO.Traits.is(e.traits,BO.Trait.MultiChain))return!1;if(BO.Traits.is(e.traits,BO.Trait.Partitioned))return!1;if(BO.isCoarse(e))return!0;if(0===e.elements.length)return!1;e.model.atomicHierarchy.derived.residue.moleculeType;const t=e.residueIndex[e.elements[0]],n=e.model.atomicHierarchy.derived.residue.moleculeType[t];return 3!==n&&2!==n}(t))return RY.createEmpty(i);const{detail:a,sizeFactor:s}=o,l=ZX.createState(256,128,i),c=t.principalAxes.boxAxes,{origin:u,dirA:d,dirB:A}=c,f=UT.size(qh(),c);qh.scale(f,f,s/2);const p=qh.create(f[2],f[1],f[0]);l.currentGroup=0,q8(l,u,d,A,p,a+1);const h=ZX.getMesh(l),g=YT.expand(YT(),t.boundary.sphere,1*o.sizeFactor);return h.setBoundingSphere(g),h}function JBe(e){const{group:t,structure:n}=e,r=t.units.length,o=Vk.create(n);return xT(1,r,1,((e,n)=>{const r=t.units[n];return o.unit=r,o.element=r.elements[e],o}))}function ZBe(e,t,n){const{objectId:r,instanceId:o}=e;if(n===r){const{structure:e,group:n}=t,r=n.units[o];return cG(e,[{unit:r,indices:ey.ofBounds(0,r.elements.length)}])}return S5}function $Be(e,t,n){let r=!1;if(!cG.is(e))return!1;const{structure:o,group:i}=t;if(!aG.areEquivalent(e.structure,o))return!1;const a=i.elements.length;for(const s of e.elements){const e=i.unitIndexMap.get(s.unit.id);void 0!==e&&ey.size(s.indices)===a&&n(Gg.ofSingleton(e))&&(r=!0)}return r}const ewe={"orientation-ellipsoid-mesh":(e,t)=>_te("Orientation ellipsoid mesh",e,t,WBe)},twe={...XBe,visuals:U_.MultiSelect(["orientation-ellipsoid-mesh"],U_.objectToOptions(ewe)),bumpFrequency:U_.Numeric(1,{min:0,max:10,step:.1},Fk.ShadingCategory)};const nwe={name:"orientation",label:"Orientation",description:"Displays orientation ellipsoids for polymer chains.",factory:function(e,t){return b6.createMulti("Orientation",e,t,Ute,ewe)},getParams:function(e,t){return twe},defaultValues:U_.getDefaultValues(twe),defaultColorTheme:{name:"chain-id"},defaultSizeTheme:{name:"uniform"},isApplicable:e=>e.elementCount>0},rwe=gh.add3,owe=gh.add;var iwe;!function(e){e.create=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2048,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=arguments.length>2?arguments[2]:void 0;const r=gh.create(Float32Array,3,t,n?n.centerBuffer.ref.value:e),o=gh.create(Float32Array,1,t,n?n.groupBuffer.ref.value:e);return{add:(e,t,n,i)=>{rwe(r,e,t,n),owe(o,i)},getPoints:()=>{const e=gh.compact(r,!0),t=gh.compact(o,!0);return dW.create(e,t,r.elementCount,n)}}}}(iwe||(iwe={}));const awe=qh.add,swe={...Pte,pointSizeAttenuation:U_.Boolean(!1),ignoreHydrogens:U_.Boolean(!1),ignoreHydrogensVariant:U_.Select("all",U_.arrayToOptions(["all","non-polar"])),traceOnly:U_.Boolean(!1),stride:U_.Numeric(1,{min:1,max:100,step:1})};function lwe(e,t,n,r,o,i){const{child:a}=n;if(a&&!a.unitMap.get(t.id))return dW.createEmpty(i);const s=t.elements,l=s.length,c=iwe.create(l,l/10,i),u=qh(),d=t.conformation,A=Wme(n,t,o),f=qh();let p=0;if(A)for(let y=0;y<l;++y)A(s[y])||(d.invariantPosition(s[y],u),awe(f,f,u),p+=1,c.add(u[0],u[1],u[2],y));else for(let y=0;y<l;++y)d.invariantPosition(s[y],u),awe(f,f,u),p+=1,c.add(u[0],u[1],u[2],y);const h=i?YT.clone(i.boundingSphere):void 0,g=c.getPoints();if(0===p)return g;let m;return qh.scale(f,f,1/p),m=h&&qh.distance(f,h.center)/h.radius<.1?h:YT.expand(YT(),t.boundary.sphere,1*o.sizeFactor),g.setBoundingSphere(m),g}function cwe(e){return function(e,t){return Ste({...e,setUpdateState:(t,n,r,o,i,a,s)=>{e.setUpdateState(t,n,r,o,i,a,s),y5.areEqual(o.size,i.size)||(t.updateSize=!0)},geometryUtils:dW.Utils},t)}({defaultProps:U_.getDefaultValues(swe),createGeometry:lwe,createLocationIterator:oye.fromGroup,getLoci:$me,eachLocation:Zme,setUpdateState:(e,t,n)=>{e.createGeometry=t.ignoreHydrogens!==n.ignoreHydrogens||t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant||t.traceOnly!==n.traceOnly||t.stride!==n.stride}},e)}const uwe={"element-point":(e,t)=>_te("Points",e,t,cwe)},dwe={...swe};const Awe={name:"point",label:"Point",description:"Displays elements (atoms, coarse spheres) as points.",factory:function(e,t){return b6.createMulti("Point",e,t,Ute,uwe)},getParams:function(e,t){return dwe},defaultValues:U_.getDefaultValues(dwe),defaultColorTheme:{name:"element-symbol"},defaultSizeTheme:{name:"uniform"},isApplicable:e=>e.elementCount>0},fwe={sizeFactor:U_.Numeric(.2,{min:0,max:10,step:.01}),detail:U_.Numeric(0,{min:0,max:3,step:1},Fk.CustomQualityParamInfo),linearSegments:U_.Numeric(8,{min:1,max:48,step:1},Fk.CustomQualityParamInfo),radialSegments:U_.Numeric(16,{min:2,max:56,step:2},Fk.CustomQualityParamInfo)},pwe=(U_.getDefaultValues(fwe),qh());function hwe(e,t,n,r,o,i){const a=t.polymerElements.length;if(!a)return RY.createEmpty(i);const{sizeFactor:s,detail:l,linearSegments:c,radialSegments:u}=o,d=c*u*a+(u+1)*a*2,A=ZX.createState(d,d/10,i),f=Yve(c),{curvePoints:p,normalVectors:h,binormalVectors:g,widthValues:m,heightValues:y}=f;let v=0;const b=_ve(t,n,{ignoreSecondaryStructure:!0});for(;b.hasNext;){const e=b.move();A.currentGroup=v;const t=jM(e.moleculeType)?Abe:dbe;Xve(f,e,cbe,t);const n=e.coarseBackboneFirst||e.first,o=e.coarseBackboneLast||e.last,i=r.size.size(e.centerPrev)*s,a=r.size.size(e.center)*s,d=r.size.size(e.centerNext)*s;lbe(f,i,a,d,i,a,d,t);let C=c;if(e.initial){C=Math.max(Math.round(c*t),1);const n=c-C;p.copyWithin(0,3*n),g.copyWithin(0,3*n),h.copyWithin(0,3*n),m.copyWithin(0,3*n),y.copyWithin(0,3*n),qh.fromArray(pwe,p,3),qh.normalize(pwe,qh.sub(pwe,e.p2,pwe)),qh.scaleAndAdd(pwe,e.p2,pwe,a*fbe),qh.toArray(pwe,p,0)}else e.final&&(C=Math.max(Math.round(c*(1-t)),1),qh.fromArray(pwe,p,3*C-3),qh.normalize(pwe,qh.sub(pwe,e.p2,pwe)),qh.scaleAndAdd(pwe,e.p2,pwe,a*fbe),qh.toArray(pwe,p,3*C));!0===e.initial&&!0===e.final?aX(A,e.p2,2*a,l):2===u?xxe(A,p,h,g,C,m,y,0):4===u?jEe(A,p,h,g,C,m,y,0,n,o):oxe(A,p,h,g,C,u,m,y,n,o,"elliptical"),++v}const C=ZX.getMesh(A),I=YT.expand(YT(),t.boundary.sphere,1*o.sizeFactor);return C.setBoundingSphere(I),C}const gwe={...Dte,...fwe};function mwe(e){return Tte({defaultProps:U_.getDefaultValues(gwe),createGeometry:hwe,createLocationIterator:e=>gbe.fromGroup(e,{asSecondary:!0}),getLoci:vbe,eachLocation:Ebe,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.detail!==n.detail||t.linearSegments!==n.linearSegments||t.radialSegments!==n.radialSegments}},e)}const ywe={"polymer-tube":(e,t)=>_te("Polymer tube mesh",e,t,mwe),"polymer-gap":(e,t)=>_te("Polymer gap cylinder",e,t,pEe)},vwe={...gwe,...fEe,sizeFactor:U_.Numeric(.2,{min:0,max:10,step:.01}),visuals:U_.MultiSelect(["polymer-tube","polymer-gap"],U_.objectToOptions(ywe)),bumpFrequency:U_.Numeric(2,{min:0,max:10,step:.1},Fk.ShadingCategory)};const bwe={name:"putty",label:"Putty",description:"Displays a tube smoothly following the trace atoms of polymers.",factory:function(e,t){return b6.createMulti("Putty",e,t,Ute,ywe)},getParams:function(e,t){const n=U_.clone(vwe);let r=!1,o=!1;return t.units.forEach((e=>{!r&&BO.isAtomic(e)&&e.nucleotideElements.length&&(r=!0),!o&&e.gapElements.length&&(o=!0)})),n.visuals.defaultValue=["polymer-tube"],o&&n.visuals.defaultValue.push("polymer-gap"),n},defaultValues:U_.getDefaultValues(vwe),defaultColorTheme:{name:"chain-id"},defaultSizeTheme:{name:"uncertainty"},isApplicable:e=>e.polymerResidueCount>0},Cwe={"element-sphere":(e,t)=>_te("Sphere mesh/impostor",e,t,sye),"structure-element-sphere":(e,t)=>wee("Structure sphere mesh/impostor",e,t,cye)},Iwe={...aye,bumpFrequency:U_.Numeric(1,{min:0,max:10,step:.1},Fk.ShadingCategory),visuals:U_.MultiSelect(["element-sphere"],U_.objectToOptions(Cwe))};let Ewe;const xwe={name:"spacefill",label:"Spacefill",description:"Displays atomic/coarse elements as spheres.",factory:function(e,t){return b6.createMulti("Spacefill",e,t,Ute,Cwe)},getParams:function(e,t){return t.isCoarseGrained?(Ewe||(Ewe=U_.clone(Iwe),Ewe.sizeFactor.defaultValue=2),Ewe):Iwe},defaultValues:U_.getDefaultValues(Iwe),defaultColorTheme:{name:"element-symbol"},defaultSizeTheme:{name:"physical"},isApplicable:e=>e.elementCount>0},Bwe=VM.is;function wwe(e,t,n,r,o,i){if(!BO.isAtomic(t))return wW.createEmpty(i);const{child:a}=n,s=null===a||void 0===a?void 0:a.unitMap.get(t.id);if(a&&!s)return wW.createEmpty(i);const l=Vk.create(n,t),c=t.elements,u=t.bonds,{edgeCount:d,a:A,b:f,edgeProps:p,offset:h}=u;if(!d)return wW.createEmpty(i);const{order:g,flags:m}=p,{sizeFactor:y,aromaticBonds:v,includeTypes:b,excludeTypes:C,multipleBonds:I}=o,E="off"===I,x="symmetric"===I,B=Ime(VM.fromNames(b),VM.fromNames(C),32),w=qh(),_=t.conformation,{elementRingIndices:S,elementAromaticRingIndices:D}=t.rings,T=v?t.resonance.delocalizedTriplets:void 0,k={linkCount:2*d,referencePosition:e=>{let t=A[e],n=f[e];const r=null===T||void 0===T?void 0:T.getThirdElement(t,n);if(void 0!==r)return _.invariantPosition(c[r],w);t>n&&([t,n]=[n,t]),h[t+1]-h[t]===1&&([t,n]=[n,t]);const o=D.get(t)||S.get(t);let i=0;for(let a=h[t],s=h[t+1];a<s;++a){const e=f[a];if(e!==n&&e!==t){if(!o)return _.invariantPosition(c[e],w);{const t=D.get(e)||S.get(e);if(!t)continue;const n=rS(o,t);n>i&&(i=n,_.invariantPosition(c[e],w))}}}return i>0?w:null},position:(e,t,n,r)=>{_.invariantPosition(c[A[n]],e),_.invariantPosition(c[f[n]],t)},style:e=>{const t=g[e],n=m[e];if(Bwe(n,2)||Bwe(n,4))return 1;if(3===t)return E?0:x?4:5;if(v){const t=A[e],r=f[e],o=D.get(t),i=D.get(r),a=o&&i?rS(o,i):0;if(Bwe(n,16)||a&&!B)return 2===a?8:7}return 2!==t||E?0:x?2:3},radius:e=>{l.element=c[A[e]];const t=r.size.size(l);l.element=c[f[e]];const n=r.size.size(l);return Math.min(t,n)*y},ignore:Eme(n,t,o)},{lines:Q,boundingSphere:M}=Boe(0,k,o,i);if(M)Q.setBoundingSphere(M);else if(Q.lineCount>0){const e=YT.expand(YT(),(null!==s&&void 0!==s?s:t).boundary.sphere,1*y);Q.setBoundingSphere(e)}return Q}const _we={...Ote,...Cme,includeParent:U_.Boolean(!1)};function Swe(e){return Fte({defaultProps:U_.getDefaultValues(_we),createGeometry:wwe,createLocationIterator:e=>Bme.fromGroup(e),getLoci:wme,eachLocation:_me,setUpdateState:(e,t,n,r,o,i,a)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.linkScale!==n.linkScale||t.linkSpacing!==n.linkSpacing||t.aromaticDashCount!==n.aromaticDashCount||t.dashCount!==n.dashCount||t.ignoreHydrogens!==n.ignoreHydrogens||t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant||!Tp(t.includeTypes,n.includeTypes)||!Tp(t.excludeTypes,n.excludeTypes)||t.aromaticBonds!==n.aromaticBonds||t.multipleBonds!==n.multipleBonds;const s=i.group.units[0],l=a.group.units[0];BO.isAtomic(s)&&BO.isAtomic(l)&&(Uk.areEqual(s.bonds,l.bonds)||(e.createGeometry=!0,e.updateTransform=!0,e.updateColor=!0,e.updateSize=!0))}},e)}const Dwe=new RP.ElementBondIterator;function Twe(e,t,n,r){for(Dwe.setElement(t,n,r);Dwe.hasNext;){const t=Dwe.move();return t.otherUnit.conformation.position(t.otherUnit.elements[t.otherIndex],e),e}return null}function kwe(e,t,n,r,o){const i=t.interUnitBonds,{edgeCount:a,edges:s}=i;if(!a)return wW.createEmpty(o);const{sizeFactor:l,aromaticBonds:c,multipleBonds:u}=r,d="off"===u,A="symmetric"===u,f=qh(),p=Vk.create(),h={linkCount:a,referencePosition:e=>{const n=s[e];let r,o,i,a;if(n.unitA<n.unitB)r=t.unitMap.get(n.unitA),o=t.unitMap.get(n.unitB),i=n.indexA,a=n.indexB;else{if(!(n.unitA>n.unitB))throw new Error("same units in createInterUnitBondLines");r=t.unitMap.get(n.unitB),o=t.unitMap.get(n.unitA),i=n.indexB,a=n.indexA}return Twe(f,t,r,i)||Twe(f,t,o,a)},position:(e,n,r,o)=>{const i=s[r],a=t.unitMap.get(i.unitA),l=t.unitMap.get(i.unitB);a.conformation.position(a.elements[i.indexA],e),l.conformation.position(l.elements[i.indexB],n)},style:e=>{const t=s[e].props.order,n=mp.create(s[e].props.flag);return VM.is(n,2)||VM.is(n,4)?1:3===t?d?0:A?4:5:c&&VM.is(n,16)?7:2!==t||d?0:A?2:3},radius:e=>{const r=s[e];p.structure=t,p.unit=t.unitMap.get(r.unitA),p.element=p.unit.elements[r.indexA];const o=n.size.size(p);p.unit=t.unitMap.get(r.unitB),p.element=p.unit.elements[r.indexB];const i=n.size.size(p);return Math.min(o,i)*l},ignore:xme(t,r)},{lines:g,boundingSphere:m}=Boe(0,h,r,o);if(m)g.setBoundingSphere(m);else if(g.lineCount>0){const{child:e}=t,n=YT.expand(YT(),(null!==e&&void 0!==e?e:t).boundary.sphere,1*l);g.setBoundingSphere(n)}return g}const Qwe={...Ete,...Cme,includeParent:U_.Boolean(!1)};function Mwe(e){return function(e,t){return yte({...e,setUpdateState:(t,n,r,o,i,a,s)=>{e.setUpdateState(t,n,r,o,i,a,s),y5.areEqual(o.size,i.size)||(t.updateSize=!0)},geometryUtils:wW.Utils},t)}({defaultProps:U_.getDefaultValues(Qwe),createGeometry:kwe,createLocationIterator:e=>Bme.fromStructure(e),getLoci:Sme,eachLocation:Tme,setUpdateState:(e,t,n,r,o,i,a)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.linkScale!==n.linkScale||t.linkSpacing!==n.linkSpacing||t.aromaticDashCount!==n.aromaticDashCount||t.dashCount!==n.dashCount||t.ignoreHydrogens!==n.ignoreHydrogens||t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant||!Tp(t.includeTypes,n.includeTypes)||!Tp(t.excludeTypes,n.excludeTypes)||t.multipleBonds!==n.multipleBonds,i.interUnitBonds!==a.interUnitBonds&&(e.createGeometry=!0,e.updateTransform=!0,e.updateColor=!0,e.updateSize=!0)}},e)}const Rwe=qh.scaleAndAdd,Pwe=qh.unitX,Owe=qh.unitY,Fwe=qh.unitZ,Nwe={...Ote,lineSizeAttenuation:U_.Boolean(!1),ignoreHydrogens:U_.Boolean(!1),ignoreHydrogensVariant:U_.Select("all",U_.arrayToOptions(["all","non-polar"])),traceOnly:U_.Boolean(!1),crosses:U_.Select("lone",U_.arrayToOptions(["lone","all"])),crossSize:U_.Numeric(.35,{min:0,max:2,step:.01})};function Lwe(e,t,n,r,o,i){const{child:a}=n;if(a&&!a.unitMap.get(t.id))return wW.createEmpty(i);const s=t.elements,l=s.length,c=BW.create(l,l/10,i),u=qh(),d=qh(),A=qh(),f=t.conformation,p=Wme(n,t,o),h=o.crossSize/2,g="lone"===o.crosses;for(let v=0;v<l;++v)p&&p(s[v])||g&&BO.isAtomic(t)&&0!==Qee(n,t,v)||(f.invariantPosition(s[v],u),Rwe(d,u,Pwe,h),Rwe(A,u,Pwe,-h),c.add(d[0],d[1],d[2],A[0],A[1],A[2],v),Rwe(d,u,Owe,h),Rwe(A,u,Owe,-h),c.add(d[0],d[1],d[2],A[0],A[1],A[2],v),Rwe(d,u,Fwe,h),Rwe(A,u,Fwe,-h),c.add(d[0],d[1],d[2],A[0],A[1],A[2],v));const m=c.getLines(),y=YT.expand(YT(),t.boundary.sphere,1*o.sizeFactor);return m.setBoundingSphere(y),m}function Uwe(e){return Fte({defaultProps:U_.getDefaultValues(Nwe),createGeometry:Lwe,createLocationIterator:oye.fromGroup,getLoci:$me,eachLocation:Zme,setUpdateState:(e,t,n)=>{e.createGeometry=t.ignoreHydrogens!==n.ignoreHydrogens||t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant||t.traceOnly!==n.traceOnly||t.crosses!==n.crosses||t.crossSize!==n.crossSize}},e)}const Gwe={"intra-bond":(e,t)=>_te("Intra-unit bond line",e,t,Swe),"inter-bond":(e,t)=>wee("Inter-unit bond line",e,t,Mwe),"element-point":(e,t)=>_te("Points",e,t,cwe),"element-cross":(e,t)=>_te("Crosses",e,t,Uwe)},jwe={..._we,...Qwe,...swe,...Nwe,pointStyle:U_.Select("circle",U_.objectToOptions(dW.StyleTypes)),multipleBonds:U_.Select("offset",U_.arrayToOptions(["off","symmetric","offset"])),includeParent:U_.Boolean(!1),sizeFactor:U_.Numeric(2,{min:.01,max:10,step:.01}),unitKinds:lte(["atomic"]),visuals:U_.MultiSelect(["intra-bond","inter-bond","element-point","element-cross"],U_.objectToOptions(Gwe))};const zwe={name:"line",label:"Line",description:"Displays bonds as lines and atoms as points or croses.",factory:function(e,t){return b6.createMulti("Line",e,t,Ute,Gwe)},getParams:function(e,t){if(aG.getSize(t)>=aG.Size.Huge){const e=U_.clone(jwe);return e.visuals.defaultValue=["intra-bond","element-point","element-cross"],e}return jwe},defaultValues:U_.getDefaultValues(jwe),defaultColorTheme:{name:"element-symbol"},defaultSizeTheme:{name:"uniform"},isApplicable:e=>e.elementCount>0,getData:(e,t)=>t.includeParent?e.asParent():e,mustRecreate:(e,t)=>e.includeParent!==t.includeParent};async function Hwe(e,t,n,r,o){const{runtime:i,webgl:a}=e;if(!a||!a.extensions.blendMinMax)throw new Error("GaussianDensityVolume requires `webgl` and `blendMinMax` extension");const s=o?o.gridTexture.ref.value:void 0,l=await function(e,t,n,r,o){const{position:i,boundary:a,radius:s}=rte(e,t,n),l=Zee(a.box,n);return Tw.create("Gaussian Density",(async e=>Vxe(r,i,a.box,s,l,o)))}(t,n.size,r,a,s).runInContext(i),{transform:c,texture:u,bbox:d,gridDim:A}=l,f=Yh.mul(Yh(),c,Yh.fromScaling(Yh(),A)),p=Yh.getScaling(qh(),c),h=qh.create(0,1,2),g=YW.create(d,A,c,f,p,u,{min:0,max:1,mean:.04,sigma:.01},!0,h,o),m=YT.expand(YT(),t.boundary.sphere,l.maxRadius);return g.setBoundingSphere(m),g}const Vwe={...Bte,...rBe,ignoreHydrogens:U_.Boolean(!1),ignoreHydrogensVariant:U_.Select("all",U_.arrayToOptions(["all","non-polar"])),includeParent:U_.Boolean(!1,{isHidden:!0})};function qwe(e){return function(e,t){return yte({...e,setUpdateState:(t,n,r,o,i,a,s)=>{e.setUpdateState(t,n,r,o,i,a,s),y5.areEqual(o.size,i.size)||(t.createGeometry=!0)},geometryUtils:YW.Utils},t)}({defaultProps:U_.getDefaultValues(Vwe),createGeometry:Hwe,createLocationIterator:oye.fromStructure,getLoci:rye,eachLocation:nye,setUpdateState:(e,t,n)=>{t.resolution!==n.resolution&&(e.createGeometry=!0),t.radiusOffset!==n.radiusOffset&&(e.createGeometry=!0),t.smoothness!==n.smoothness&&(e.createGeometry=!0),t.ignoreHydrogens!==n.ignoreHydrogens&&(e.createGeometry=!0),t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant&&(e.createGeometry=!0),t.traceOnly!==n.traceOnly&&(e.createGeometry=!0),t.includeParent!==n.includeParent&&(e.createGeometry=!0)},dispose:e=>{e.gridTexture.ref.value.destroy()}},e)}async function Ywe(e,t,n,r,o,i){const{runtime:a,webgl:s}=e;if(!s)throw new Error("GaussianDensityVolume requires `webgl`");const l=i?i.gridTexture.ref.value:void 0,c=await function(e,t,n,r,o,i){const{position:a,boundary:s,radius:l}=nte(e,t,n,r),c=Zee(s.box,r,oBe(o,e));return Tw.create("Gaussian Density",(async e=>Vxe(o,a,s.box,l,c,i)))}(n,t,r.size,o,s,l).runInContext(a),{transform:u,texture:d,bbox:A,gridDim:f}=c,p=Yh.mul(Yh(),u,Yh.fromScaling(Yh(),f)),h=Yh.getScaling(qh(),u),g=qh.create(0,1,2),m=YW.create(A,f,u,p,h,d,{min:0,max:1,mean:.04,sigma:.01},!0,g,i),y=YT.expand(YT(),t.boundary.sphere,c.maxRadius);return m.setBoundingSphere(y),m}const Xwe={...Nte,...rBe,ignoreHydrogens:U_.Boolean(!1),ignoreHydrogensVariant:U_.Select("all",U_.arrayToOptions(["all","non-polar"])),includeParent:U_.Boolean(!1,{isHidden:!0})};function Wwe(e){return function(e,t){return Ste({...e,setUpdateState:(t,n,r,o,i,a,s)=>{e.setUpdateState(t,n,r,o,i,a,s),y5.areEqual(o.size,i.size)||(t.createGeometry=!0)},geometryUtils:YW.Utils},t)}({defaultProps:U_.getDefaultValues(Xwe),createGeometry:Ywe,createLocationIterator:oye.fromGroup,getLoci:$me,eachLocation:Zme,setUpdateState:(e,t,n)=>{t.resolution!==n.resolution&&(e.createGeometry=!0),t.radiusOffset!==n.radiusOffset&&(e.createGeometry=!0),t.smoothness!==n.smoothness&&(e.createGeometry=!0),t.ignoreHydrogens!==n.ignoreHydrogens&&(e.createGeometry=!0),t.ignoreHydrogensVariant!==n.ignoreHydrogensVariant&&(e.createGeometry=!0),t.traceOnly!==n.traceOnly&&(e.createGeometry=!0),t.includeParent!==n.includeParent&&(e.createGeometry=!0)},dispose:e=>{e.gridTexture.ref.value.destroy()}},e)}const Kwe={"gaussian-volume":(e,t)=>wee("Gaussian volume",e,t,qwe),"units-gaussian-volume":(e,t)=>_te("Units-Gaussian volume",e,t,Wwe)},Jwe={...Vwe,jumpLength:U_.Numeric(4,{min:0,max:20,step:.1}),visuals:U_.MultiSelect(["gaussian-volume"],U_.objectToOptions(Kwe))};const Zwe={name:"gaussian-volume",label:"Gaussian Volume",description:"Displays a gaussian molecular density using direct volume rendering.",factory:function(e,t){return b6.createMulti("Gaussian Volume",e,t,Ute,Kwe)},getParams:function(e,t){return Jwe},defaultValues:U_.getDefaultValues(Jwe),defaultColorTheme:{name:"chain-id"},defaultSizeTheme:{name:"physical"},isApplicable:e=>e.elementCount>0},$we=qh.scale,e_e=qh.add,t_e=qh.sub,n_e={...Dte,...Mte,sizeFactor:U_.Numeric(.3,{min:0,max:10,step:.01}),radialSegments:U_.Numeric(16,{min:2,max:56,step:2},Fk.CustomQualityParamInfo),tryUseImpostor:U_.Boolean(!0)};function r_e(e,t,n,r){return n.tryUseImpostor&&r&&r.extensions.fragDepth?function(e){return Rte({defaultProps:U_.getDefaultValues(n_e),createGeometry:o_e,createLocationIterator:e=>gbe.fromGroup(e),getLoci:vbe,eachLocation:Ebe,setUpdateState:(e,t,n)=>{},mustRecreate:(e,t,n)=>!t.tryUseImpostor||!n},e)}(e):function(e){return Tte({defaultProps:U_.getDefaultValues(n_e),createGeometry:i_e,createLocationIterator:e=>gbe.fromGroup(e),getLoci:vbe,eachLocation:Ebe,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.radialSegments!==n.radialSegments},mustRecreate:(e,t,n)=>t.tryUseImpostor&&!!n},e)}(e)}function o_e(e,t,n,r,o,i){const a=t.polymerElements.length;if(!a)return zK.createEmpty(i);const s=2*a,l=uoe.create(s,s/4,i),c=t.conformation,u=qh(),d=qh(),A=qh();vve(t,(function(e,t,n,r,o){c.invariantPosition(e,u),c.invariantPosition(t,d);const i=jM(o)?Abe:dbe;e_e(A,u,$we(A,t_e(A,d,u),i)),l.add(u[0],u[1],u[2],A[0],A[1],A[2],1,!1,!1,2,n),l.add(A[0],A[1],A[2],d[0],d[1],d[2],1,!1,!1,2,r)}));const f=l.getCylinders(),p=YT.expand(YT(),t.boundary.sphere,1*o.sizeFactor);return f.setBoundingSphere(p),f}function i_e(e,t,n,r,o,i){const a=t.polymerElements.length;if(!a)return RY.createEmpty(i);const{radialSegments:s,sizeFactor:l}=o,c=2*s*a*2,u=ZX.createState(c,c/10,i),d=t.conformation,A=qh(),f=qh(),p={radiusTop:1,radiusBottom:1,radialSegments:s},h=Vk.create(n,t),g=Vk.create(n,t);vve(t,(function(e,t,n,o,i){h.element=e,g.element=t,d.invariantPosition(h.element,A),d.invariantPosition(g.element,f);const a=jM(i)?Abe:dbe;p.radiusTop=p.radiusBottom=r.size.size(h)*l,u.currentGroup=n,PX(u,A,f,a,p),p.radiusTop=p.radiusBottom=r.size.size(g)*l,u.currentGroup=o,PX(u,f,A,1-a,p)}));const m=ZX.getMesh(u),y=YT.expand(YT(),t.boundary.sphere,1*o.sizeFactor);return m.setBoundingSphere(y),m}const a_e={...Dte,...kte,sizeFactor:U_.Numeric(.3,{min:0,max:10,step:.01}),detail:U_.Numeric(0,{min:0,max:3,step:1},Fk.CustomQualityParamInfo),tryUseImpostor:U_.Boolean(!0)};function s_e(e,t,n,r){return n.tryUseImpostor&&r&&r.extensions.fragDepth&&r.extensions.textureFloat?function(e){return Qte({defaultProps:U_.getDefaultValues(a_e),createGeometry:l_e,createLocationIterator:e=>gbe.fromGroup(e),getLoci:vbe,eachLocation:Ebe,setUpdateState:(e,t,n)=>{},mustRecreate:(e,t,n)=>!t.tryUseImpostor||!n},e)}(e):function(e){return Tte({defaultProps:U_.getDefaultValues(a_e),createGeometry:c_e,createLocationIterator:e=>gbe.fromGroup(e),getLoci:vbe,eachLocation:Ebe,setUpdateState:(e,t,n)=>{e.createGeometry=t.sizeFactor!==n.sizeFactor||t.detail!==n.detail},mustRecreate:(e,t,n)=>t.tryUseImpostor&&!!n},e)}(e)}function l_e(e,t,n,r,o,i){const a=t.polymerElements.length;if(!a)return XW.createEmpty(i);const s=Yme.create(a,a/2,i),l=t.conformation,c=qh();bve(t,((e,t)=>{l.invariantPosition(e,c),s.add(c[0],c[1],c[2],t)}));const u=s.getSpheres(),d=YT.expand(YT(),t.boundary.sphere,1*o.sizeFactor);return u.setBoundingSphere(d),u}function c_e(e,t,n,r,o,i){const a=t.polymerElements.length;if(!a)return RY.createEmpty(i);const{detail:s,sizeFactor:l}=o,c=a*nX(s),u=ZX.createState(c,c/2,i),d=t.conformation,A=qh(),f=Vk.create(n,t);bve(t,((e,t)=>{f.element=e,d.invariantPosition(f.element,A),u.currentGroup=t,aX(u,A,r.size.size(f)*l,s)}));const p=ZX.getMesh(u),h=YT.expand(YT(),t.boundary.sphere,1*o.sizeFactor);return p.setBoundingSphere(h),p}const u_e={"polymer-backbone-cylinder":(e,t)=>_te("Polymer backbone cylinder",e,t,r_e),"polymer-backbone-sphere":(e,t)=>_te("Polymer backbone sphere",e,t,s_e),"polymer-gap":(e,t)=>_te("Polymer gap cylinder",e,t,pEe)},d_e={...a_e,...n_e,...fEe,sizeAspectRatio:U_.Numeric(1,{min:.1,max:3,step:.1}),visuals:U_.MultiSelect(["polymer-backbone-cylinder","polymer-backbone-sphere","polymer-gap"],U_.objectToOptions(u_e)),bumpFrequency:U_.Numeric(0,{min:0,max:10,step:.1},Fk.ShadingCategory),colorMode:U_.Select("default",U_.arrayToOptions(["default","interpolate"]),{...Fk.ShadingCategory,isHidden:!0})};const A_e={name:"backbone",label:"Backbone",description:"Displays polymer backbone with cylinders and spheres.",factory:function(e,t){return b6.createMulti("Backbone",e,t,Ute,u_e)},getParams:function(e,t){const n=U_.clone(d_e);let r=!1;return t.units.forEach((e=>{!r&&e.gapElements.length&&(r=!0)})),n.visuals.defaultValue=["polymer-backbone-cylinder","polymer-backbone-sphere"],r&&n.visuals.defaultValue.push("polymer-gap"),n},defaultValues:U_.getDefaultValues(d_e),defaultColorTheme:{name:"chain-id"},defaultSizeTheme:{name:"uniform"},isApplicable:e=>e.polymerResidueCount>0};class f_e extends v6{constructor(){super(),tw(f_e.BuiltIn,((e,t)=>{if(e.name!==t)throw new Error(`Fix BuiltInStructureRepresentations to have matching names. ${e.name} ${t}`);this.add(e)}))}}!function(e){e.BuiltIn={cartoon:Qxe,backbone:A_e,"ball-and-stick":Aye,carbohydrate:yve,ellipsoid:Nxe,"gaussian-surface":EBe,"gaussian-volume":Zwe,label:kBe,line:zwe,"molecular-surface":YBe,orientation:nwe,point:Awe,putty:bwe,spacefill:xwe}}(f_e||(f_e={}));class p_e{constructor(){this.ev=WS.create(),this.id=0,this.runningTasks=new Set,this.abortRequests=new Map,this.options=new Map,this.currentContext=[],this.events={progress:this.ev(),finished:this.ev()}}tryGetAbortTaskId(e){if(this.abortRequests.has(e.progress.taskId))return e.progress.taskId;for(const t of e.children){const e=this.tryGetAbortTaskId(t);if(void 0!==e)return e}}track(e,t){return n=>{var r;if(n.canAbort&&n.requestAbort){const e=this.tryGetAbortTaskId(n.root);void 0!==e&&n.requestAbort(this.abortRequests.get(e))}const o=vp()-n.root.progress.startedTime;this.events.progress.next({id:e,useOverlay:null===(r=this.options.get(t))||void 0===r?void 0:r.useOverlay,level:o<250?"none":"background",progress:n})}}async run(e,t){const n=this.id++;let r;(null===t||void 0===t?void 0:t.createNewContext)||0===this.currentContext.length?r={ctx:mw(e,this.track(n,e.id),100),refCount:1}:(r=this.currentContext[this.currentContext.length-1],r.refCount++);try{this.options.set(e.id,{useOverlay:!!(null===t||void 0===t?void 0:t.useOverlay)}),this.runningTasks.add(e.id);return await yw(r.ctx,e)}finally{this.options.delete(e.id),this.runningTasks.delete(e.id),this.events.finished.next({id:n}),this.abortRequests.delete(e.id),r.refCount--,0===r.refCount&&$_(this.currentContext,r)}}requestAbortAll(e){this.runningTasks.forEach((t=>this.abortRequests.set(t,e)))}requestAbort(e,t){const n="number"===typeof e?e:e.root.progress.taskId;this.abortRequests.set(n,t)}dispose(){this.ev.dispose()}}!function(e){function t(e){return new Promise((t=>setTimeout(t,e)))}e.testTask=function(e){return Tw.create("Test",(async n=>{let r=0;for(;r<e;)await t(100+200*Math.random()),n.shouldUpdate&&await n.update({message:"Step "+r,current:r,max:e,isIndeterminate:!1}),r++}))}}(p_e||(p_e={}));var h_e;!function(e){e.create=function(e){return e},e.getDuration=function(e,t){var n,r;if(t.customDurationMs)return t.customDurationMs;const o=null===(r=(n=t.definition).getDuration)||void 0===r?void 0:r.call(n,t.params,e);return"fixed"===(null===o||void 0===o?void 0:o.kind)?o.durationMs:void 0}}(h_e||(h_e={}));h_e.create({name:"built-in.animate-assembly-unwind",display:{name:"Unwind Assembly"},isExportable:!0,params:e=>{const t=[["all","All"]],n=e.state.data.select(V_.Generators.rootsOfType(Jz.Molecule.Structure));for(const r of n)t.push([r.transform.ref,r.obj.data.models[0].label]);return{durationInMs:U_.Numeric(3e3,{min:100,max:1e4,step:100}),playOnce:U_.Boolean(!1),target:U_.Select(t[0][0],t)}},canApply(e){const t=e.state.data,n=z_.RootRef;return{canApply:t.select(V_.Generators.ofType(Jz.Molecule.Structure.Representation3D,n)).length>0}},getDuration:e=>({kind:"fixed",durationMs:e.durationInMs}),initialState:()=>({t:0}),setup(e,t,n){const r=n.state.data,o=e.target&&"all"!==e.target?e.target:z_.RootRef,i=r.select(V_.Generators.ofType(Jz.Molecule.Structure.Representation3D,o)),a=r.build();let s=!1;for(const l of i){r.select(V_.Generators.ofTransformer(_7.Representation.UnwindStructureAssemblyRepresentation3D,l.transform.ref)).length>0||(s=!0,a.to(l).apply(_7.Representation.UnwindStructureAssemblyRepresentation3D,{t:0},{tags:"animate-assembly-unwind"}))}if(s)return a.commit({doNotUpdateCurrent:!0})},teardown(e,t,n){const r=n.state.data,o=r.select(V_.Generators.ofType(Jz.Molecule.Structure.Representation3DState).withTag("animate-assembly-unwind"));if(0===o.length)return;const i=r.build();for(const a of o)i.delete(a.transform.ref);return i.commit()},async apply(e,t,n){const r=n.plugin.state.data,o=n.params.target&&"all"!==n.params.target?n.params.target:z_.RootRef,i=r.select(V_.Generators.ofTransformer(_7.Representation.UnwindStructureAssemblyRepresentation3D,o));if(0===i.length)return{kind:"finished"};const a=r.build(),s=(t.current-t.lastApplied)/n.params.durationInMs;let l=e.t+s,c=!1;n.params.playOnce&&l>=1?(c=!0,l=1):l%=1;for(const u of i)a.to(u).update({t:l});return await die.State.Update(n.plugin,{state:r,tree:a,options:{doNotLogTiming:!0}}),c?{kind:"finished"}:{kind:"next",state:{t:l}}}});const g_e=qh(),m_e=qh(),y_e=eg();h_e.create({name:"built-in.animate-camera-spin",display:{name:"Camera Spin",description:"Spin the 3D scene around the x-axis in view space"},isExportable:!0,params:()=>({durationInMs:U_.Numeric(4e3,{min:100,max:2e4,step:100}),speed:U_.Numeric(1,{min:1,max:10,step:1},{description:"How many times to spin in the specified duration."}),direction:U_.Select("cw",[["cw","Clockwise"],["ccw","Counter Clockwise"]],{cycle:!0})}),initialState:(e,t)=>{var n;return{snapshot:null===(n=t.canvas3d)||void 0===n?void 0:n.camera.getSnapshot()}},getDuration:e=>({kind:"fixed",durationMs:e.durationInMs}),teardown:(e,t,n)=>{var r;null===(r=n.canvas3d)||void 0===r||r.requestCameraReset({snapshot:t.snapshot,durationMs:0})},async apply(e,t,n){var r,o;if(0===t.current)return{kind:"next",state:e};const i=e.snapshot;if(i.radiusMax<1e-4)return{kind:"finished"};const a=t.animation?(null===(r=t.animation)||void 0===r?void 0:r.currentFrame)/(t.animation.frameCount+1):zp(t.current/n.params.durationInMs,0,1),s=2*Math.PI*a*n.params.speed*("ccw"===n.params.direction?-1:1);qh.sub(g_e,i.position,i.target),qh.normalize(m_e,i.up),eg.setAxisAngle(y_e,m_e,s),qh.transformQuat(g_e,g_e,y_e);const l=qh.add(qh(),i.target,g_e);return null===(o=n.plugin.canvas3d)||void 0===o||o.requestCameraReset({snapshot:{...i,position:l},durationMs:0}),a>=.99999?{kind:"finished"}:{kind:"next",state:e}}}),h_e.create({name:"built-in.animate-model-index",display:{name:"Animate Trajectory"},isExportable:!0,params:()=>({mode:U_.MappedStatic("loop",{palindrome:U_.Group({}),loop:U_.Group({direction:U_.Select("forward",[["forward","Forward"],["backward","Backward"]])}),once:U_.Group({direction:U_.Select("forward",[["forward","Forward"],["backward","Backward"]])},{isFlat:!0})},{options:[["palindrome","Palindrome"],["loop","Loop"],["once","Once"]]}),duration:U_.MappedStatic("fixed",{fixed:U_.Group({durationInS:U_.Numeric(5,{min:1,max:120,step:.1},{description:"Duration in seconds"})},{isFlat:!0}),computed:U_.Group({targetFps:U_.Numeric(30,{min:5,max:250,step:1},{label:"Target FPS"})},{isFlat:!0}),sequential:U_.Group({maxFps:U_.Numeric(30,{min:5,max:60,step:1})},{isFlat:!0})})}),canApply(e){const t=e.state.data,n=t.select(V_.Generators.ofTransformer(_7.Model.ModelFromTrajectory));for(const r of n){const e=V_.findAncestorOfType(t.tree,t.cells,r.transform.ref,Jz.Molecule.Trajectory);if(e&&e.obj&&e.obj.data.frameCount>1)return{canApply:!0}}return{canApply:!1,reason:"No trajectory to animate"}},getDuration:(e,t)=>{var n;if("fixed"===(null===(n=e.duration)||void 0===n?void 0:n.name))return{kind:"fixed",durationMs:1e3*e.duration.params.durationInS};if("computed"===e.duration.name){const n=t.state.data,r=n.select(V_.Generators.ofTransformer(_7.Model.ModelFromTrajectory));let o=0;for(const t of r){const r=V_.findAncestorOfType(n.tree,n.cells,t.transform.ref,Jz.Molecule.Trajectory);if(!r||!r.obj)continue;const i=r.obj;o=Math.max(Math.ceil(1e3*i.data.frameCount/e.duration.params.targetFps),o)}return{kind:"fixed",durationMs:o}}return{kind:"unknown"}},initialState:()=>({}),async apply(e,t,n){if("sequential"===n.params.duration.name&&t.current>0&&t.current-t.lastApplied<1e3/n.params.duration.params.maxFps)return{kind:"skip"};const r=n.plugin.state.data,o=r.select(V_.Generators.ofTransformer(_7.Model.ModelFromTrajectory));if(0===o.length)return{kind:"finished"};const i=r.build(),a=n.params,s=e.palindromeDirections||{};let l=!1,c=!0;for(const u of o){const e=V_.findAncestorOfType(r.tree,r.cells,u.transform.ref,Jz.Molecule.Trajectory);if(!e||!e.obj)continue;const n=e.obj;n.data.frameCount<=1||i.to(u).update((e=>{const r=n.data.frameCount;if(1===r)return e;if(c=!1,"sequential"===a.duration.name){let t=1;if("once"===a.mode.name){if(t="backward"===a.mode.params.direction?-1:1,-1===t&&0===e.modelIndex||1===t&&e.modelIndex===r-1)return l=!0,e}else"palindrome"===a.mode.name&&(t=0===e.modelIndex?1:e.modelIndex===r-1?-1:s[u.transform.ref]||1);s[u.transform.ref]=t;let n=(e.modelIndex+t)%r;return n<0&&(n+=r),l=l||-1===t&&0===n||1===t&&n===r-1,{modelIndex:n}}{const e="fixed"===a.duration.name?1e3*a.duration.params.durationInS:Math.ceil(1e3*n.data.frameCount/a.duration.params.targetFps);if("once"===a.mode.name&&t.current>=e)return l=!0,{modelIndex:n.data.frameCount-1};let r=t.current%e/e;"loop"===a.mode.name&&"backward"===a.mode.params.direction&&(r=1-r),"palindrome"===a.mode.name&&(r*=2,r>1&&(r=2-r));return{modelIndex:Math.min(Math.floor(n.data.frameCount*r),n.data.frameCount-1)}}}))}return c||await die.State.Update(n.plugin,{state:r,tree:i,options:{doNotLogTiming:!0}}),c||"once"===a.mode.name&&l?{kind:"finished"}:"palindrome"===a.mode.name?{kind:"next",state:{palindromeDirections:s}}:{kind:"next",state:{}}}});async function v_e(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r,o,i,a;t.snapshot.data&&(await e.runTask(e.state.data.setSnapshot(t.snapshot.data)),null===(r=e.canvas3d)||void 0===r||r.setProps({trackball:null===(i=null===(o=t.snapshot.canvas3d)||void 0===o?void 0:o.props)||void 0===i?void 0:i.trackball})),t.snapshot.camera&&(null===(a=e.canvas3d)||void 0===a||a.requestCameraReset({snapshot:t.snapshot.camera.current,durationMs:n||"instant"===t.snapshot.camera.transitionStyle?0:t.snapshot.camera.transitionDurationInMs}))}h_e.create({name:"built-in.animate-state-snapshots",display:{name:"State Snapshots"},isExportable:!0,params:()=>({}),canApply(e){const t=e.managers.snapshot.state.entries;return t.size<2?{canApply:!1,reason:"At least 2 states required."}:t.some((e=>!!(null===e||void 0===e?void 0:e.snapshot.startAnimation)))?{canApply:!1,reason:"Nested animations not supported."}:{canApply:e.managers.snapshot.state.entries.size>1}},setup(e,t,n){const r=n.managers.snapshot.state.entries.get(0);v_e(n,r,!0)},getDuration:(e,t)=>({kind:"fixed",durationMs:t.managers.snapshot.state.entries.toArray().reduce(((e,t)=>{var n;return e+(null!==(n=t.snapshot.durationInMs)&&void 0!==n?n:0)}),0)}),initialState:(e,t)=>{const n=t.managers.snapshot.state.entries.toArray();return{totalDuration:n.reduce(((e,t)=>{var n;return e+(null!==(n=t.snapshot.durationInMs)&&void 0!==n?n:0)}),0),snapshots:n,currentIndex:0}},async apply(e,t,n){var r;if(t.current>=e.totalDuration)return{kind:"finished"};let o=0,i=0;for(const a of e.snapshots){if(o+=null!==(r=a.snapshot.durationInMs)&&void 0!==r?r:0,t.current<o)break;i++}return i>=e.snapshots.length?{kind:"finished"}:i===e.currentIndex?{kind:"skip"}:(await v_e(n.plugin,e.snapshots[i]),{kind:"next",state:{...e,currentIndex:i}})}});const b_e=G_.build({from:Jz.Root,display:{name:"Download Density",description:"Load a density from the provided source and create its default visual."},params:(e,t)=>{const{options:n}=t.dataFormats;return{source:U_.MappedStatic("pdb-xray",{"pdb-xray":U_.Group({provider:U_.Group({id:U_.Text("1tqn",{label:"Id"}),server:U_.Select("pdbe",[["pdbe","PDBe"]])},{pivot:"id"}),type:U_.Select("2fofc",[["2fofc","2Fo-Fc"],["fofc","Fo-Fc"]])},{isFlat:!0}),"pdb-xray-ds":U_.Group({provider:U_.Group({id:U_.Text("1tqn",{label:"Id"}),server:U_.Select("pdbe",[["pdbe","PDBe"],["rcsb","RCSB PDB"]])},{pivot:"id"}),detail:U_.Numeric(3,{min:0,max:6,step:1},{label:"Detail"})},{isFlat:!0}),"pdb-emd-ds":U_.Group({provider:U_.Group({id:U_.Text("emd-8004",{label:"Id"}),server:U_.Select("pdbe",[["pdbe","PDBe"],["rcsb","RCSB PDB"]])},{pivot:"id"}),detail:U_.Numeric(3,{min:0,max:6,step:1},{label:"Detail"})},{isFlat:!0}),url:U_.Group({url:U_.Url(""),isBinary:U_.Boolean(!1),format:U_.Select("auto",n)},{isFlat:!0})},{options:[["pdb-xray","PDB X-ray maps"],["pdb-emd-ds","PDB EMD Density Server"],["pdb-xray-ds","PDB X-ray Density Server"],["url","URL"]]})}}})(((e,t)=>{let{params:n}=e;return Tw.create("Download Density",(async e=>{var r,o;const i=n.source;let a,s;switch(i.name){case"url":a=i.params;break;case"pdb-xray":a={url:L_.Url("2fofc"===i.params.type?`https://www.ebi.ac.uk/pdbe/coordinates/files/${i.params.provider.id.toLowerCase()}.ccp4`:`https://www.ebi.ac.uk/pdbe/coordinates/files/${i.params.provider.id.toLowerCase()}_diff.ccp4`),isBinary:!0,label:`PDBe X-ray map: ${i.params.provider.id}`};break;case"pdb-emd-ds":a="pdbe"===i.params.provider.server?{url:L_.Url(`https://www.ebi.ac.uk/pdbe/densities/emd/${i.params.provider.id.toLowerCase()}/cell?detail=${i.params.detail}`),isBinary:!0,label:`PDBe EMD Density Server: ${i.params.provider.id}`}:{url:L_.Url(`https://maps.rcsb.org/em/${i.params.provider.id.toLowerCase()}/cell?detail=${i.params.detail}`),isBinary:!0,label:`RCSB PDB EMD Density Server: ${i.params.provider.id}`};break;case"pdb-xray-ds":a="pdbe"===i.params.provider.server?{url:L_.Url(`https://www.ebi.ac.uk/pdbe/densities/x-ray/${i.params.provider.id.toLowerCase()}/cell?detail=${i.params.detail}`),isBinary:!0,label:`PDBe X-ray Density Server: ${i.params.provider.id}`}:{url:L_.Url(`https://maps.rcsb.org/x-ray/${i.params.provider.id.toLowerCase()}/cell?detail=${i.params.detail}`),isBinary:!0,label:`RCSB PDB X-ray Density Server: ${i.params.provider.id}`};break;default:Zh()}const l=await t.builders.data.download(a);let c;switch(i.name){case"url":a=i.params,s="auto"===i.params.format?t.dataFormats.auto(mde(L_.getUrl(a.url)),null===(r=l.cell)||void 0===r?void 0:r.obj):t.dataFormats.get(i.params.format);break;case"pdb-xray":c=i.params.provider.id,s=t.dataFormats.get("ccp4");break;case"pdb-emd-ds":case"pdb-xray-ds":c=i.params.provider.id,s=t.dataFormats.get("dscif");break;default:Zh()}if(!s)return void t.log.warn("DownloadDensity: Format provider not found.");const u=await s.parse(t,l,{entryId:c});await(null===(o=s.visuals)||void 0===o?void 0:o.call(s,t,u))}))})),C_e=G_.build({display:{name:"Assign Volume Colors",description:"Assigns another volume to be available for coloring."},from:Jz.Volume.Data,isApplicable:e=>!e.data.colorVolume,params(e,t){const n=t.state.data.select(V_.Generators.root.subtree().ofType(Jz.Volume.Data).filter((t=>{var n;return!!t.obj&&!(null===(n=t.obj)||void 0===n?void 0:n.data.colorVolume)&&t.obj!==e})));return 0===n.length?{ref:U_.Text("",{isHidden:!0,label:"Volume"})}:{ref:U_.Select(n[0].transform.ref,n.map((e=>[e.transform.ref,e.obj.label])),{label:"Volume"})}}})(((e,t)=>{let{ref:n,params:r,state:o}=e;return t.build().to(n).apply(_7.Volume.AssignColorVolume,{ref:r.ref},{dependsOn:[r.ref]}).commit()})),I_e=(h_e.create({name:"built-in.animate-state-interpolation",display:{name:"Animate State (experimental)"},params:()=>({transtionDurationInMs:U_.Numeric(2e3,{min:100,max:3e4,step:10})}),canApply:e=>({canApply:e.managers.snapshot.state.entries.size>1}),initialState:()=>({}),async apply(e,t,n){const r=n.plugin.managers.snapshot.state.entries;if(r.size<2)return{kind:"finished"};const o=t.current%n.params.transtionDurationInMs/n.params.transtionDurationInMs,i=Math.floor(t.current/n.params.transtionDurationInMs)%r.size;let a=Math.ceil(t.current/n.params.transtionDurationInMs);a===i&&a++,a%=r.size;const s=r.get(i).snapshot,l=r.get(a).snapshot;if(!s.data||!l.data)return{kind:"skip"};const c=s.data.tree.transforms,u=l.data.tree.transforms,d=n.plugin.state.data,A=d.build();for(const f of c)for(const e of u){if(e.ref!==f.ref)continue;if(e.version===f.version)continue;const t=z_.fromJSON(f),r=z_.fromJSON(e),i=d.cells.get(f.ref);if(!i)continue;let a;a=t.transformer.definition.interpolate?t.transformer.definition.interpolate(t.params,r.params,o,n.plugin):o<=.5?t.params:r.params,Mp(i,a)||A.to(f.ref).update(a)}return await die.State.Update(n.plugin,{state:d,tree:A,options:{doNotLogTiming:!0}}),{kind:"next",state:{}}}}),h_e.create({name:"built-in.animate-structure-spin",display:{name:"Spin Structure"},isExportable:!0,params:()=>({durationInMs:U_.Numeric(3e3,{min:100,max:1e4,step:100})}),initialState:()=>({t:0}),getDuration:e=>({kind:"fixed",durationMs:e.durationInMs}),async setup(e,t,n){const r=n.state.data,o=r.select(V_.Generators.ofType(Jz.Molecule.Structure.Representation3D)),i=r.build();let a=!1;for(const s of o){r.select(V_.Generators.ofTransformer(_7.Representation.SpinStructureRepresentation3D,s.transform.ref)).length>0||(a=!0,i.to(s.transform.ref).apply(_7.Representation.SpinStructureRepresentation3D,{t:0},{tags:"animate-structure-spin"}))}if(a)return i.commit({doNotUpdateCurrent:!0})},teardown(e,t,n){const r=n.state.data,o=r.select(V_.Generators.ofType(Jz.Molecule.Structure.Representation3DState).withTag("animate-structure-spin"));if(0===o.length)return;const i=r.build();for(const a of o)i.delete(a.transform.ref);return i.commit()},async apply(e,t,n){var r;const o=n.plugin.state.data,i=o.select(V_.Generators.ofTransformer(_7.Representation.SpinStructureRepresentation3D));if(0===i.length)return{kind:"finished"};const a=o.build(),s=(t.current-t.lastApplied)/n.params.durationInMs,l=(e.t+s)%1;for(const c of i)a.to(c).update({...null===(r=c.params)||void 0===r?void 0:r.values,t:l});return await die.State.Update(n.plugin,{state:o,tree:a,options:{doNotLogTiming:!0}}),{kind:"next",state:{t:l}}}}),qh()),E_e=qh(),x_e=eg();h_e.create({name:"built-in.animate-camera-rock",display:{name:"Camera Rock",description:"Rock the 3D scene around the x-axis in view space"},isExportable:!0,params:()=>({durationInMs:U_.Numeric(4e3,{min:100,max:2e4,step:100}),speed:U_.Numeric(1,{min:1,max:10,step:1},{description:"How many times to rock from side to side."}),angle:U_.Numeric(10,{min:0,max:180,step:1},{description:"How many degrees to rotate in each direction."})}),initialState:(e,t)=>({snapshot:t.canvas3d.camera.getSnapshot()}),getDuration:e=>({kind:"fixed",durationMs:e.durationInMs}),teardown:(e,t,n)=>{var r;null===(r=n.canvas3d)||void 0===r||r.requestCameraReset({snapshot:t.snapshot,durationMs:0})},async apply(e,t,n){var r,o;if(0===t.current)return{kind:"next",state:e};const i=e.snapshot;if(i.radiusMax<1e-4)return{kind:"finished"};const a=t.animation?(null===(r=t.animation)||void 0===r?void 0:r.currentFrame)/(t.animation.frameCount+1):zp(t.current/n.params.durationInMs,0,1),s=Math.sin(a*n.params.speed*Math.PI*2)*Np(n.params.angle);qh.sub(I_e,i.position,i.target),qh.normalize(E_e,i.up),eg.setAxisAngle(x_e,E_e,s),qh.transformQuat(I_e,I_e,x_e);const l=qh.add(qh(),i.target,I_e);return null===(o=n.plugin.canvas3d)||void 0===o||o.requestCameraReset({snapshot:{...i,position:l},durationMs:0}),a>=.99999?{kind:"finished"}:{kind:"next",state:e}}});var B_e;!function(e){e.Action=function(e,t){return{action:e,customControl:t&&t.customControl,autoUpdate:t&&t.autoUpdate}},e.Behavior=function(e){return{transformer:e,defaultParams:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}}}(B_e||(B_e={}));U_.Color(bk.black,{description:"Display color of the volume."}),U_.Boolean(!1,{description:"Control display of the volume as a wireframe."}),U_.Numeric(.3,{min:0,max:1,step:.01},{description:"Opacity of the volume."}),new Map([["em",[-5,5]],["2fo-fc",[0,3]],["fo-fc(+ve)",[1,5]],["fo-fc(-ve)",[-5,-1]]]);var w_e=n(152);function __e(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var S_e="function"===typeof Symbol&&Symbol.observable||"@@observable",D_e=function(){return Math.random().toString(36).substring(7).split("").join(".")},T_e={INIT:"@@redux/INIT"+D_e(),REPLACE:"@@redux/REPLACE"+D_e(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+D_e()}};function k_e(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Q_e(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(__e(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(__e(1));return n(Q_e)(e,t)}if("function"!==typeof e)throw new Error(__e(2));var o=e,i=t,a=[],s=a,l=!1;function c(){s===a&&(s=a.slice())}function u(){if(l)throw new Error(__e(3));return i}function d(e){if("function"!==typeof e)throw new Error(__e(4));if(l)throw new Error(__e(5));var t=!0;return c(),s.push(e),function(){if(t){if(l)throw new Error(__e(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),a=null}}}function A(e){if(!k_e(e))throw new Error(__e(7));if("undefined"===typeof e.type)throw new Error(__e(8));if(l)throw new Error(__e(9));try{l=!0,i=o(i,e)}finally{l=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}return A({type:T_e.INIT}),(r={dispatch:A,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(__e(10));o=e,A({type:T_e.REPLACE})}})[S_e]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(__e(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[S_e]=function(){return this},e},r}function M_e(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if("undefined"!==typeof process&&void 0===t)throw new Error("invariant requires an error message argument");if(!e){let e;if(void 0===t)e=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let n=0;e=new Error(t.replace(/%s/g,(function(){return r[n++]}))),e.name="Invariant Violation"}throw e.framesToPop=1,e}}function R_e(e,t,n){return t.split(".").reduce(((e,t)=>e&&e[t]?e[t]:n||null),e)}function P_e(e,t){return e.filter((e=>e!==t))}function O_e(e){return"object"===typeof e}const F_e="dnd-core/INIT_COORDS",N_e="dnd-core/BEGIN_DRAG",L_e="dnd-core/PUBLISH_DRAG_SOURCE",U_e="dnd-core/HOVER",G_e="dnd-core/DROP",j_e="dnd-core/END_DRAG";function z_e(e,t){return{type:F_e,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const H_e={type:F_e,payload:{clientOffset:null,sourceClientOffset:null}};function V_e(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0};const{publishSource:r=!0,clientOffset:o,getSourceClientOffset:i}=n,a=e.getMonitor(),s=e.getRegistry();e.dispatch(z_e(o)),function(e,t,n){M_e(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach((function(e){M_e(n.getSource(e),"Expected sourceIds to be registered.")}))}(t,a,s);const l=function(e,t){let n=null;for(let r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}(t,a);if(null==l)return void e.dispatch(H_e);let c=null;if(o){if(!i)throw new Error("getSourceClientOffset must be defined");!function(e){M_e("function"===typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(i),c=i(l)}e.dispatch(z_e(o,c));const u=s.getSource(l).beginDrag(a,l);if(null==u)return;!function(e){M_e(O_e(e),"Item must be an object.")}(u),s.pinSource(l);const d=s.getSourceType(l);return{type:N_e,payload:{itemType:d,item:u,sourceId:l,clientOffset:o||null,sourceClientOffset:c||null,isSourcePublic:!!r}}}}function q_e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y_e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){q_e(e,t,n[t])}))}return e}function X_e(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=e.getMonitor(),r=e.getRegistry();!function(e){M_e(e.isDragging(),"Cannot call drop while not dragging."),M_e(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(n);const o=function(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(n);o.forEach(((o,i)=>{const a=function(e,t,n,r){const o=n.getTarget(e);let i=o?o.drop(r,e):void 0;(function(e){M_e("undefined"===typeof e||O_e(e),"Drop result must either be an object or undefined.")})(i),"undefined"===typeof i&&(i=0===t?{}:r.getDropResult());return i}(o,i,r,n),s={type:G_e,payload:{dropResult:Y_e({},t,a)}};e.dispatch(s)}))}}function W_e(e){return function(){const t=e.getMonitor(),n=e.getRegistry();!function(e){M_e(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);const r=t.getSourceId();if(null!=r){n.getSource(r,!0).endDrag(t,r),n.unpinSource()}return{type:j_e}}}function K_e(e,t){return null===t?null===e:Array.isArray(e)?e.some((e=>e===t)):e===t}function J_e(e){return function(t){let{clientOffset:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e){M_e(Array.isArray(e),"Expected targetIds to be an array.")}(t);const r=t.slice(0),o=e.getMonitor(),i=e.getRegistry();return function(e,t,n){for(let r=e.length-1;r>=0;r--){const o=e[r];K_e(t.getTargetType(o),n)||e.splice(r,1)}}(r,i,o.getItemType()),function(e,t,n){M_e(t.isDragging(),"Cannot call hover while not dragging."),M_e(!t.didDrop(),"Cannot call hover after drop.");for(let r=0;r<e.length;r++){const t=e[r];M_e(e.lastIndexOf(t)===r,"Expected targetIds to be unique in the passed array.");M_e(n.getTarget(t),"Expected targetIds to be registered.")}}(r,o,i),function(e,t,n){e.forEach((function(e){n.getTarget(e).hover(t,e)}))}(r,o,i),{type:U_e,payload:{targetIds:r,clientOffset:n||null}}}}function Z_e(e){return function(){if(e.getMonitor().isDragging())return{type:L_e}}}class $_e{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;const n=function(e){return{beginDrag:V_e(e),publishDragSource:Z_e(e),hover:J_e(e),drop:X_e(e),endDrag:W_e(e)}}(this);return Object.keys(n).reduce(((r,o)=>{const i=n[o];var a;return r[o]=(a=i,function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const i=a.apply(e,r);"undefined"!==typeof i&&t(i)}),r}),{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function eSe(e,t){return{x:e.x-t.x,y:e.y-t.y}}const tSe=[],nSe=[];tSe.__IS_NONE__=!0,nSe.__IS_ALL__=!0;class rSe{subscribeToStateChange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{handlerIds:n}=t;M_e("function"===typeof e,"listener must be a function."),M_e("undefined"===typeof n||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let r=this.store.getState().stateId;return this.store.subscribe((()=>{const t=this.store.getState(),o=t.stateId;try{const i=o===r||o===r+1&&!function(e,t){if(e===tSe)return!1;if(e===nSe||"undefined"===typeof t)return!0;const n=(r=e,t.filter((e=>r.indexOf(e)>-1)));var r;return n.length>0}(t.dirtyHandlerIds,n);i||e()}finally{r=o}}))}subscribeToOffsetChange(e){M_e("function"===typeof e,"listener must be a function.");let t=this.store.getState().dragOffset;return this.store.subscribe((()=>{const n=this.store.getState().dragOffset;n!==t&&(t=n,e())}))}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return M_e(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()&&t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(M_e(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;return K_e(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}isDragging(){return Boolean(this.getItemType())}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(M_e(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;return this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}isOverTarget(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1};if(!e)return!1;const{shallow:n}=t;if(!this.isDragging())return!1;const r=this.registry.getTargetType(e),o=this.getItemType();if(o&&!K_e(r,o))return!1;const i=this.getTargetIds();if(!i.length)return!1;const a=i.indexOf(e);return n?a===i.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return function(e){const{clientOffset:t,initialClientOffset:n,initialSourceClientOffset:r}=e;return t&&n&&r?eSe(function(e,t){return{x:e.x+t.x,y:e.y+t.y}}(t,r),n):null}(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return function(e){const{clientOffset:t,initialClientOffset:n}=e;return t&&n?eSe(t,n):null}(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const oSe="undefined"!==typeof global?global:self,iSe=oSe.MutationObserver||oSe.WebKitMutationObserver;function aSe(e){return function(){const t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}const sSe="function"===typeof iSe?function(e){let t=1;const n=new iSe(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}:aSe;class lSe{call(){try{this.task&&this.task()}catch(PF){this.onError(PF)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}const cSe=new class{enqueueTask(e){const{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,n=e.length-this.index;t<n;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=sSe(this.flush),this.requestErrorThrow=aSe((()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()}))}},uSe=new class{create(e){const t=this.freeTasks,n=t.length?t.pop():new lSe(this.onError,(e=>t[t.length]=e));return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}(cSe.registerPendingError);const dSe="dnd-core/ADD_SOURCE",ASe="dnd-core/ADD_TARGET",fSe="dnd-core/REMOVE_SOURCE",pSe="dnd-core/REMOVE_TARGET";function hSe(e,t){t&&Array.isArray(e)?e.forEach((e=>hSe(e,!1))):M_e("string"===typeof e||"symbol"===typeof e,t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var gSe;!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(gSe||(gSe={}));let mSe=0;function ySe(e){const t=(mSe++).toString();switch(e){case gSe.SOURCE:return`S${t}`;case gSe.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function vSe(e){switch(e[0]){case"S":return gSe.SOURCE;case"T":return gSe.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function bSe(e,t){const n=e.entries();let r=!1;do{const{done:e,value:[,o]}=n.next();if(o===t)return!0;r=!!e}while(!r);return!1}class CSe{addSource(e,t){hSe(e),function(e){M_e("function"===typeof e.canDrag,"Expected canDrag to be a function."),M_e("function"===typeof e.beginDrag,"Expected beginDrag to be a function."),M_e("function"===typeof e.endDrag,"Expected endDrag to be a function.")}(t);const n=this.addHandler(gSe.SOURCE,e,t);return this.store.dispatch(function(e){return{type:dSe,payload:{sourceId:e}}}(n)),n}addTarget(e,t){hSe(e,!0),function(e){M_e("function"===typeof e.canDrop,"Expected canDrop to be a function."),M_e("function"===typeof e.hover,"Expected hover to be a function."),M_e("function"===typeof e.drop,"Expected beginDrag to be a function.")}(t);const n=this.addHandler(gSe.TARGET,e,t);return this.store.dispatch(function(e){return{type:ASe,payload:{targetId:e}}}(n)),n}containsHandler(e){return bSe(this.dragSources,e)||bSe(this.dropTargets,e)}getSource(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];M_e(this.isSourceId(e),"Expected a valid source ID.");return t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return M_e(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return M_e(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return M_e(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return vSe(e)===gSe.SOURCE}isTargetId(e){return vSe(e)===gSe.TARGET}removeSource(e){var t;M_e(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:fSe,payload:{sourceId:e}}}(e)),t=()=>{this.dragSources.delete(e),this.types.delete(e)},cSe.enqueueTask(uSe.create(t))}removeTarget(e){M_e(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:pSe,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);M_e(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){M_e(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,n){const r=ySe(e);return this.types.set(r,t),e===gSe.SOURCE?this.dragSources.set(r,n):e===gSe.TARGET&&this.dropTargets.set(r,n),r}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const ISe=(e,t)=>e===t;function ESe(){let e=arguments.length>1?arguments[1]:void 0;switch(e.type){case U_e:break;case dSe:case ASe:case pSe:case fSe:return tSe;default:return nSe}const{targetIds:t=[],prevTargetIds:n=[]}=e.payload,r=function(e,t){const n=new Map,r=e=>{n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);const o=[];return n.forEach(((e,t)=>{1===e&&o.push(t)})),o}(t,n),o=r.length>0||!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ISe;if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}(t,n);if(!o)return tSe;const i=n[n.length-1],a=t[t.length-1];return i!==a&&(i&&r.push(i),a&&r.push(a)),r}function xSe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const BSe={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function wSe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BSe,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case F_e:case N_e:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case U_e:return r=e.clientOffset,o=n.clientOffset,!r&&!o||r&&o&&r.x===o.x&&r.y===o.y?e:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xSe(e,t,n[t])}))}return e}({},e,{clientOffset:n.clientOffset});case j_e:case G_e:return BSe;default:return e}var r,o}function _Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SSe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_Se(e,t,n[t])}))}return e}const DSe={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function TSe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DSe,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case N_e:return SSe({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case L_e:return SSe({},e,{isSourcePublic:!0});case U_e:return SSe({},e,{targetIds:n.targetIds});case pSe:return-1===e.targetIds.indexOf(n.targetId)?e:SSe({},e,{targetIds:P_e(e.targetIds,n.targetId)});case G_e:return SSe({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case j_e:return SSe({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function kSe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case dSe:case ASe:return e+1;case fSe:case pSe:return e-1;default:return e}}function QSe(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1}function MSe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RSe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){MSe(e,t,n[t])}))}return e}function PSe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:ESe(e.dirtyHandlerIds,{type:t.type,payload:RSe({},t.payload,{prevTargetIds:R_e(e,"dragOperation.targetIds",[])})}),dragOffset:wSe(e.dragOffset,t),refCount:kSe(e.refCount,t),dragOperation:TSe(e.dragOperation,t),stateId:QSe(e.stateId)}}function OSe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=function(e){const t="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return Q_e(PSe,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(arguments.length>3&&void 0!==arguments[3]&&arguments[3]),o=new rSe(r,new CSe(r)),i=new $_e(r,o),a=e(i,t,n);return i.receiveBackend(a),i}const FSe=(0,F.createContext)({dragDropManager:void 0});function NSe(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}let LSe=0;const USe=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var GSe=(0,F.memo)((function(e){var{children:t}=e,n=NSe(e,["children"]);const[r,o]=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jSe(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const o=t;o[USe]||(o[USe]={dragDropManager:OSe(e,t,n,r)});return o[USe]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(n);return(0,F.useEffect)((()=>{if(o){const e=jSe();return++LSe,()=>{0===--LSe&&(e[USe]=null)}}}),[]),(0,ct.jsx)(FSe.Provider,{value:r,children:t})}));function jSe(){return"undefined"!==typeof global?global:window}function zSe(e){let t=null;return()=>(null==t&&(t=e()),t)}class HSe{enter(e){const t=this.entered.length;return this.entered=function(e,t){const n=new Set,r=e=>n.add(e);e.forEach(r),t.forEach(r);const o=[];return n.forEach((e=>o.push(e))),o}(this.entered.filter((t=>this.isNodeInDocument(t)&&(!t.contains||t.contains(e)))),[e]),0===t&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=function(e,t){return e.filter((e=>e!==t))}(this.entered.filter(this.isNodeInDocument),e),t>0&&0===this.entered.length}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class VSe{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach((e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get:()=>(console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null)})}))}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach((n=>{const r=this.config.exposeProperties[n];null!=r&&(t[n]={value:r(e,this.config.matchesTypes),configurable:!0,enumerable:!0})})),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const qSe="__NATIVE_FILE__",YSe="__NATIVE_URL__",XSe="__NATIVE_TEXT__",WSe="__NATIVE_HTML__";function KSe(e,t,n){const r=t.reduce(((t,n)=>t||e.getData(n)),"");return null!=r?r:n}const JSe={[qSe]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[WSe]:{exposeProperties:{html:(e,t)=>KSe(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[YSe]:{exposeProperties:{urls:(e,t)=>KSe(e,t,"").split("\n"),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[XSe]:{exposeProperties:{text:(e,t)=>KSe(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function ZSe(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(JSe).filter((e=>{const n=JSe[e];return!!(null===n||void 0===n?void 0:n.matchesTypes)&&n.matchesTypes.some((e=>t.indexOf(e)>-1))}))[0]||null}const $Se=zSe((()=>/firefox/i.test(navigator.userAgent))),eDe=zSe((()=>Boolean(window.safari)));class tDe{interpolate(e){const{xs:t,ys:n,c1s:r,c2s:o,c3s:i}=this;let a=t.length-1;if(e===t[a])return n[a];let s,l=0,c=i.length-1;for(;l<=c;){s=Math.floor(.5*(l+c));const r=t[s];if(r<e)l=s+1;else{if(!(r>e))return n[s];c=s-1}}a=Math.max(0,c);const u=e-t[a],d=u*u;return n[a]+r[a]*u+o[a]*d+i[a]*u*d}constructor(e,t){const{length:n}=e,r=[];for(let f=0;f<n;f++)r.push(f);r.sort(((t,n)=>e[t]<e[n]?-1:1));const o=[],i=[],a=[];let s,l;for(let f=0;f<n-1;f++)s=e[f+1]-e[f],l=t[f+1]-t[f],i.push(s),o.push(l),a.push(l/s);const c=[a[0]];for(let f=0;f<i.length-1;f++){const e=a[f],t=a[f+1];if(e*t<=0)c.push(0);else{s=i[f];const n=i[f+1],r=s+n;c.push(3*r/((r+n)/e+(r+s)/t))}}c.push(a[a.length-1]);const u=[],d=[];let A;for(let f=0;f<c.length-1;f++){A=a[f];const e=c[f],t=1/i[f],n=e+c[f+1]-A-A;u.push((A-e-n)*t),d.push(n*t*t)}this.xs=e,this.ys=t,this.c1s=c,this.c2s=u,this.c3s=d}}const nDe=1;function rDe(e){const t=e.nodeType===nDe?e:e.parentElement;if(!t)return null;const{top:n,left:r}=t.getBoundingClientRect();return{x:r,y:n}}function oDe(e){return{x:e.clientX,y:e.clientY}}function iDe(e,t,n,r,o){const i=function(e){var t;return"IMG"===e.nodeName&&($Se()||!(null===(t=document.documentElement)||void 0===t?void 0:t.contains(e)))}(t),a=rDe(i?e:t),s={x:n.x-a.x,y:n.y-a.y},{offsetWidth:l,offsetHeight:c}=e,{anchorX:u,anchorY:d}=r,{dragPreviewWidth:A,dragPreviewHeight:f}=function(e,t,n,r){let o=e?t.width:n,i=e?t.height:r;return eDe()&&e&&(i/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:i}}(i,t,l,c),{offsetX:p,offsetY:h}=o,g=0===h||h;return{x:0===p||p?p:new tDe([0,.5,1],[s.x,s.x/l*A,s.x+A-l]).interpolate(u),y:g?h:(()=>{let e=new tDe([0,.5,1],[s.y,s.y/c*f,s.y+f-c]).interpolate(d);return eDe()&&i&&(e+=(window.devicePixelRatio-1)*f),e})()}}class aDe{get window(){return this.globalContext?this.globalContext:"undefined"!==typeof window?window:void 0}get document(){var e;return(null===(e=this.globalContext)||void 0===e?void 0:e.document)?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null===(e=this.optionsArgs)||void 0===e?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function sDe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lDe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){sDe(e,t,n[t])}))}return e}class cDe{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(void 0!==e){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;var t;void 0!==e&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&(null===(t=this.window)||void 0===t||t.cancelAnimationFrame(this.asyncEndDragFrameId)))}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,n){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);const r=t=>this.handleDragStart(t,e),o=e=>this.handleSelectStart(e);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",r),t.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",r),t.removeEventListener("selectstart",o),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const n=t=>this.handleDragEnter(t,e),r=t=>this.handleDragOver(t,e),o=t=>this.handleDrop(t,e);return t.addEventListener("dragenter",n),t.addEventListener("dragover",r),t.addEventListener("drop",o),()=>{t.removeEventListener("dragenter",n),t.removeEventListener("dragover",r),t.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return lDe({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId();return lDe({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(P).some((t=>P[t]===e))}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){const n=JSe[e];if(!n)throw new Error(`native type ${e} has no configuration`);const r=new VSe(n);return r.loadDataTransfer(t),r}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout((()=>{var e;return null===(e=this.rootElement)||void 0===e?void 0:e.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){var e;if(this.currentDragSourceNode=null,this.rootElement)null===(e=this.window)||void 0===e||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0);return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=e=>{const t=this.sourceNodes.get(e);return t&&rDe(t)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=e=>Boolean(e&&this.document&&this.document.body&&this.document.body.contains(e)),this.endDragIfSourceWasRemovedFromDOM=()=>{const e=this.currentDragSourceNode;null==e||this.isNodeInDocument(e)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=e=>{null===this.hoverRafId&&"undefined"!==typeof requestAnimationFrame&&(this.hoverRafId=requestAnimationFrame((()=>{this.monitor.isDragging()&&this.actions.hover(e||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null})))},this.cancelHover=()=>{null!==this.hoverRafId&&"undefined"!==typeof cancelAnimationFrame&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=e=>{if(e.defaultPrevented)return;const{dragStartSourceIds:t}=this;this.dragStartSourceIds=null;const n=oDe(e);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:n});const{dataTransfer:r}=e,o=ZSe(r);if(this.monitor.isDragging()){if(r&&"function"===typeof r.setDragImage){const e=this.monitor.getSourceId(),t=this.sourceNodes.get(e),o=this.sourcePreviewNodes.get(e)||t;if(o){const{anchorX:e,anchorY:i,offsetX:a,offsetY:s}=this.getCurrentSourcePreviewNodeOptions(),l=iDe(t,o,n,{anchorX:e,anchorY:i},{offsetX:a,offsetY:s});r.setDragImage(o,l.x,l.y)}}try{null===r||void 0===r||r.setData("application/json",{})}catch(i){}this.setCurrentDragSourceNode(e.target);const{captureDraggingState:t}=this.getCurrentSourcePreviewNodeOptions();t?this.actions.publishDragSource():setTimeout((()=>this.actions.publishDragSource()),0)}else if(o)this.beginDragNativeItem(o);else{if(r&&!r.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=e=>{var t;(this.dragEnterTargetIds=[],this.isDraggingNativeItem())&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer));if(!this.enterLeaveCounter.enter(e.target)||this.monitor.isDragging())return;const{dataTransfer:n}=e,r=ZSe(n);r&&this.beginDragNativeItem(r,n)},this.handleTopDragEnter=e=>{const{dragEnterTargetIds:t}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=e.altKey,t.length>0&&this.actions.hover(t,{clientOffset:oDe(e)});t.some((e=>this.monitor.canDropOnTarget(e)))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=e=>{var t;(this.dragOverTargetIds=[],this.isDraggingNativeItem())&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer))},this.handleTopDragOver=e=>{const{dragOverTargetIds:t}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));this.altKeyPressed=e.altKey,this.lastClientOffset=oDe(e),this.scheduleHover(t);(t||[]).some((e=>this.monitor.canDropOnTarget(e)))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=e=>{this.isDraggingNativeItem()&&e.preventDefault();this.enterLeaveCounter.leave(e.target)&&(this.isDraggingNativeItem()&&setTimeout((()=>this.endDragNativeItem()),0),this.cancelHover())},this.handleTopDropCapture=e=>{var t;(this.dropTargetIds=[],this.isDraggingNativeItem())?(e.preventDefault(),null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer)):ZSe(e.dataTransfer)&&e.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=e=>{const{dropTargetIds:t}=this;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:oDe(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=e=>{const t=e.target;"function"===typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new aDe(t,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new HSe(this.isNodeInDocument)}}const uDe=function(e,t,n){return new cDe(e,t,n)};var dDe=n(805),ADe=n.n(dDe);const fDe=e=>(0,ct.jsx)("g",{children:(0,ct.jsx)("path",{...e,d:"M 0 100 L 33 0 L 66 0 L 100 100 L 75 100\n               L 66 75 L 33 75 L 25 100 L 0 100 Z\n               M 41 55 L 50 25 L 58 55 L 41 55 Z",fillRule:"evenodd"})}),pDe=e=>(0,ct.jsx)("path",{...e,d:"M 100 28 C 100 -13 0 -13 0 50\n         C 0 113 100 111 100 72 L 75 72\n         C 75 90 30 90 30 50 C 30 10 75 10 75 28\n         L 100 28"}),hDe=e=>(0,ct.jsx)("g",{children:(0,ct.jsx)("path",{...e,d:"M 0 0 L 60 0 C 110 0 110 100 60 100\n               L 0 100 L 0 0 Z\n               M 20 15 L 40 15 C 85 15 85 85 40 85\n               L 20 85 L 20 15 Z",fillRule:"evenodd"})}),gDe=e=>(0,ct.jsx)("path",{...e,d:"M 0 0 L 100 0 L 100 20 L 20 20 L 20 40\n               L 90 40 L 90 60 L 20 60 L 20 80 L 100 80\n               L 100 100 L 0 100 L 0 0"}),mDe=e=>(0,ct.jsx)("path",{...e,d:"M 0 0 L 100 0 L 100 20 L 20 20 L 20 40\n               L 80 40 L 80 60 L 20 60 L 20 100 L 0 100\n               L 0 0"}),yDe=e=>(0,ct.jsx)("path",{...e,d:"M 100 28 C 100 -13 0 -13 0 50 C 0 111 100 113 100 72\n         L 100 48 L 55 48 L 55 72 L 75 72 C 75 90 30 90 30 50\n         C 30 10 75 5 75 28 L 100 28"}),vDe=e=>(0,ct.jsx)("path",{...e,d:"M 0 0 L 20 0 L 20 40 L 80 40 L 80 0\n               L 100 0 L 100 100 L 80 100 L 80 60\n               L 20 60 L 20 100 L 0 100 L 0 0"}),bDe=e=>(0,ct.jsx)("path",{...e,d:"M 40 0 L 60 0 L 60 100 L 40 100 L 40 0"}),CDe=e=>(0,ct.jsx)("path",{...e,d:"M 0 0 L 20 0 L 20 40 L 75 0 L 100 0\n               L 50 50 L 100 100 L 75 100 L 30 65\n               L 20 75 L 20 100 L 0 100 L 0 0"}),IDe=e=>(0,ct.jsx)("path",{...e,d:"M 0 0 L 0 100 L 100 100 L 100 80\n               L 20 80 L 20 0 L 0 0"}),EDe=e=>(0,ct.jsx)("path",{...e,d:"M 0 0 L 20 0 L 50 35 L 80 0 L 100 0 L 100 100\n               L 80 100 L 80 30 L 50 65 L 20 30 L 20 100\n               L 0 100 L 0 0"}),xDe=e=>(0,ct.jsx)("path",{...e,d:"M 0 100 L 0 0 L 20 0 L 80 75 L 80 0\n         L 100 0 L 100 100 L 80 100 L 20 25 L 20 100 L 0 100"}),BDe=e=>(0,ct.jsxs)("g",{children:[(0,ct.jsx)("circle",{cx:"50",cy:"50",r:"50",...e}),(0,ct.jsx)("circle",{cx:"50",cy:"50",r:"32",fill:"#ffffff"})]}),wDe=e=>(0,ct.jsx)("g",{children:(0,ct.jsx)("path",{...e,d:"M 0 0 L 80 0 C 105 0 105 50 80 50\n               L 20 50 L 20 100 L 0 100 L 0 0 Z\n               M 20 15 L 70 15 C 80 15 80 35 70 35 L 20 35 L 20 15 Z",fillRule:"evenodd"})}),_De=e=>(0,ct.jsxs)("g",{children:[(0,ct.jsx)("path",{d:"M 50,0\n                    A 50,50 0 1,1 50,100\n                    A 50,50 0 1,1 50,0 Z\n                    M 50,18\n                    A 32,32 0 1,0 50,82\n                    A 32,32 0 1,0 50,18 Z",fillRule:"evenodd",...e}),(0,ct.jsx)("path",{d:"M 85 100 L 55 70 L 70 55 L 100 85 L 85 100",...e})]}),SDe=e=>(0,ct.jsx)("g",{children:(0,ct.jsx)("path",{...e,d:"M 0 0 L 80 0 C 105 0 105 50 80 50\n                C 100 50 100 70 100 70 L 100 100 L 80 100\n                L 80 80 C 80 80 80 60 50 60 L 20 60\n                L 20 100 L 0 100 L 0 0 Z\n                M 20 15 L 70 15 C 80 15 80 35 70 35 L 20 35 L 20 15 Z",fillRule:"evenodd"})}),DDe=e=>{let{fill:t,fillOpacity:n}=e;return(0,ct.jsx)("path",{fill:"#ffffff",stroke:t,strokeOpacity:n,fillOpacity:"0",strokeWidth:"18",d:"M92 26 A43 18.5 0 1 0 43 46 A42 22.5 0 1 1 9 68"})},TDe=e=>(0,ct.jsx)("path",{...e,d:"M 0 0 L 0 20 L 35 20 L 35 100\n         L 65 100 L 65 20 L 100 20\n         L 100 0 L 0 0"}),kDe=e=>(0,ct.jsx)("path",{...e,d:"M 0 0 L 20 0 L 50 80 L 80 0\n               L 100 0 L 60 100 L 40 100 L 0 0"}),QDe=e=>(0,ct.jsx)("path",{...e,d:"M 0 0 L 20 0 L 30 70 L 50 30 L 70 70 L 80 0\n               L 100 0 L 90 100 L 70 100 L 50 65 L 30 100\n               L 10 100 L 0 0"}),MDe=e=>(0,ct.jsx)("path",{...e,d:"M 0 0 L 20 0 L 50 40 L 80 0 L 100 0 L 70 50\n               L 100 100 L 80 100 L 50 60 L 20 100 L 0 100\n               L 30 50 L 0 0"}),RDe=e=>(0,ct.jsx)("path",{...e,d:"M 0 0 L 20 0 L 50 45 L 80 0 L 100 0\n               L 60 60 L 60 100 L 40 100 L 40 60 L 0 0"}),PDe=e=>(0,ct.jsx)("path",{...e,d:"M 0 0 L 100 0 L 100 20 L 35 80 L 100 80\n               L 100 100 L 0 100 L 0 80 L 65 20 L 0 20\n               L 0 0"}),ODe=[{component:fDe,regex:"A",color:"red"},{component:e=>(0,ct.jsxs)("g",{children:[(0,ct.jsx)("path",{...e,d:"M 0 0 L 80 0 C 105 0 105 50 80 50\n               C 105 50 105 100 80 100 L 00 100\n               L 0 0"}),(0,ct.jsx)("path",{d:"M 20 15 L 70 15 C 80 15 80 35 70 35 L 20 35 L 20 15",fill:"#ffffff"}),(0,ct.jsx)("path",{d:"M 20 65 L 70 65 C 80 65 80 85 70 85 L 20 85 L 20 65",fill:"#ffffff"})]}),regex:"B",color:"maroon"},{component:pDe,regex:"C",color:"blue"},{component:hDe,regex:"D",color:"green"},{component:gDe,regex:"E",color:"olive"},{component:mDe,regex:"F",color:"navy"},{component:yDe,regex:"G",color:"orange"},{component:vDe,regex:"H",color:"teal"},{component:bDe,regex:"I",color:"cadetblue"},{component:e=>(0,ct.jsx)("path",{...e,d:"M 0 60 C 0 111 100 111 100 60\n         L 100 0 L 75 0 L 75 60\n         C 80 90 20 90 25 60"}),regex:"J",color:"lavender"},{component:CDe,regex:"K",color:"chocolate"},{component:IDe,regex:"L",color:"coral"},{component:EDe,regex:"M",color:"darkolivegreen"},{component:xDe,regex:"N",color:"darkorange"},{component:BDe,regex:"O",color:"gold"},{component:wDe,regex:"P",color:"darkorchid"},{component:_De,regex:"Q",color:"darkslateblue"},{component:SDe,regex:"R",color:"firebrick"},{component:DDe,regex:"S",color:"darkslategrey"},{component:TDe,regex:"T",color:"#228b22"},{component:e=>(0,ct.jsx)("path",{...e,d:"M 0 0 L 0 60 C 0 111 100 111 100 60\n         L 100 0 L 75 0 L 75 60\n         C 80 90 20 90 25 60 L 25 0 L 0 0"}),regex:"U",color:"seagreen"},{component:kDe,regex:"V",color:"indigo"},{component:QDe,regex:"W",color:"mediumseagreen"},{component:MDe,regex:"X",color:"black"},{component:RDe,regex:"Y",color:"palevioletred"},{component:PDe,regex:"Z",color:"peru"},{component:e=>(0,ct.jsxs)("g",{children:[(0,ct.jsx)("path",{d:"M 10 20 C 5 -5 95 -10 100 35 L 100 100 L 80 100 L 80 90 C 90 105 10 105 0 80 C 0 45 40 40 60 45 L 80 50 C 95 30 40 5 10 35",...e}),(0,ct.jsx)("path",{fill:"#ffffff",d:"M 77 70 C 70 90 30 90 22 80 C 10 50 80 60 77 70"})]}),regex:"a",color:"red"},{component:e=>(0,ct.jsxs)("g",{children:[(0,ct.jsx)("path",{d:"M 20 0 L 0 0 L 0 100 L 20 100 L 20 80 C 10 110 90 110 100 70 L 100 60 C 90 10 10 10 20 40 L 20 40 L 20 0",...e}),(0,ct.jsx)("path",{d:"M 79 60 C 80 95 20 95 20 65 C 20 30 80 30 79 65",fill:"#ffffff"})]}),regex:"b",color:"maroon"},{component:pDe,regex:"c",color:"purple"},{component:e=>(0,ct.jsxs)("g",{children:[(0,ct.jsx)("path",{d:"M 80 0 L 100 0 L 100 100 L 80 100 L 80 80 C 90 110 10 110 0 70 L 0 60 C 10 10 90 10 80 40 L 80 40 L 80 0",...e}),(0,ct.jsx)("path",{d:"M 79 60 C 80 95 20 95 20 65 C 20 30 80 30 79 65",fill:"#ffffff"})]}),regex:"d",color:"green"},{component:e=>(0,ct.jsxs)("g",{children:[(0,ct.jsx)("path",{d:"M 25 50 L 100 50 C 85 -17 15 -17 0 50 C 0 75 25 100 50 100 L 95 100 L 95 80 L 50 80 Q 25 70 25 50",...e}),(0,ct.jsx)("path",{d:"M 33 37 L 68 37 C 58 10 42 10 33 37",fill:"#ffffff"})]}),regex:"e",color:"olive"},{component:e=>(0,ct.jsx)("path",{d:"M 95 32 C 80 -17 20 -5 20 37 L 7 37 L 7 50 L 20 50 L 20 100 L 45 100 L 45 50 L 57 50 L 57 37 L 45 37 C 45 10 70 10 75 32 L 95 32",...e}),regex:"f",color:"navy"},{component:e=>(0,ct.jsxs)("g",{children:[(0,ct.jsx)("path",{d:"M 100 15 L 100 0 L 80 0 L 80 15 C 85 -8 15 -8 0 25 C 2 75 80 75 80 50 L 75 65 C 65 85 45 85 10 75 L 10 90 C 25 110 85 110 100 75 L 100 25",...e}),(0,ct.jsx)("path",{d:"M 67 30 C 70 10 25 10 27 30 C 25 50 70 50 67 30",fill:"#ffffff"})]}),regex:"g",color:"orange"},{component:e=>(0,ct.jsx)("path",{d:"M 0 0 L 0 100 L 20 100 L 20 80 C 20 40 80 40 80 80 L 80 100 L 100 100 L 100 50 C 80 20 20 20 20 45 L 20 0 L 0 0",...e}),regex:"h",color:"teal"},{component:e=>(0,ct.jsxs)("g",{children:[(0,ct.jsx)("rect",{...e,x:40,y:20,width:20,height:80}),(0,ct.jsx)("rect",{...e,x:40,y:0,width:20,height:15})]}),regex:"i",color:"cadetblue"},{component:e=>(0,ct.jsxs)("g",{children:[(0,ct.jsx)("path",{d:"M 0 60 C 0 115 100 115 100 60 L 100 20 L 80 20 L 80 60 C 80 90 20 90 25 60",...e}),(0,ct.jsx)("rect",{x:80,width:20,height:15,...e})]}),regex:"j",color:"lavender"},{component:e=>(0,ct.jsx)("path",{d:"M 0 0 L 20 0 L 20 60 L 75 30 L 100 30 L 50 65 L 100 100 L 75 100 L 27 80 L 20 85 L 20 100 L 0 100 L 0 0",...e}),regex:"k",color:"chocolate"},{component:e=>(0,ct.jsx)("rect",{x:40,y:0,width:20,height:100,...e}),regex:"l",color:"coral"},{component:e=>(0,ct.jsx)("path",{d:"M 0 0 L 0 100 L 20 100 L 20 60 C 20 20 40 20 40 50 L 40 100 L 60 100 L 60 50 C 60 20 80 20 80 50 L 80 100 L 100 100 L 100 50 C 100 -10 40 -10 50 50 C 50 -5 20 -5 20 20 L 20 0 L 0 0",...e}),regex:"m",color:"darkolivegreen"},{component:e=>(0,ct.jsx)("path",{d:"M 0 0 L 0 100 L 20 100 L 20 60 C 20 0 80 0 80 50 L 80 100 L 100 100 L 100 25 C 80 -10 20 -10 20 20 L 20 0 L 0 0",...e}),regex:"n",color:"darkorange"},{component:BDe,regex:"o",color:"gold"},{component:e=>(0,ct.jsxs)("g",{children:[(0,ct.jsx)("path",{d:"M 20 100 L 0 100 L 0 0 L 20 0 L 20 20 C 10 -10 90 -10 100 30 L 100 40 C 90 90 10 90 20 60 L 20 60 L 20 100",...e}),(0,ct.jsx)("path",{d:"M 79 40 C 80 5 20 5 20 35 C 20 70 80 70 79 35",fill:"#ffffff"})]}),regex:"p",color:"darkorchid"},{component:e=>(0,ct.jsxs)("g",{children:[(0,ct.jsx)("path",{d:"M 80 100 L 100 100 L 100 0 L 80 0 L 80 20 C 90 -10 10 -10 0 30 L 0 40 C 10 90 90 90 80 60 L 80 60 L 80 100",...e}),(0,ct.jsx)("path",{d:"M 79 40 C 80 5 20 5 20 35 C 20 70 80 70 79 35",fill:"#ffffff"})]}),regex:"q",color:"darkslateblue"},{component:e=>(0,ct.jsx)("path",{d:"M 0 0 L 0 100 L 20 100 L 20 60 C 20 0 80 0 80 50 L 100 50 L 100 25 C 80 -10 20 -10 20 20 L 20 0 L 0 0",...e}),regex:"r",color:"firebrick"},{component:DDe,regex:"s",color:"darkslategrey"},{component:e=>(0,ct.jsx)("path",{d:"M 95 68 C 80 117 20 105 20 63 L 20 47 L 7 47 L 7 27 L 20 27 L 20 0 L 45 0 L 45 27 L 57 27 L 57 47 L 45 47 L 45 63 C 45 90 70 90 75 68 L 95 68",...e}),regex:"t",color:"#228b22"},{component:e=>(0,ct.jsxs)("g",{children:[(0,ct.jsx)("path",{d:"M 0 0 L 0 60 C 0 111 100 111 100 60 L 100 0 L 75 0 L 75 60 C 80 90 20 90 25 60 L 25 0 L 0 0",...e}),(0,ct.jsx)("rect",{...e,x:75,y:0,height:100,width:25})]}),regex:"u",color:"seagreen"},{component:kDe,regex:"v",color:"indigo"},{component:QDe,regex:"w",color:"mediumseagreen"},{component:MDe,regex:"x",color:"black"},{component:e=>(0,ct.jsx)("path",{d:"M 0 0 L 25 0 L 50 36 L 75 0 L 100 0 L 40 100 L 12 100 L 37 55 L 0 0",...e}),regex:"y",color:"palevioletred"},{component:PDe,regex:"z",color:"peru"},{component:BDe,regex:"0",color:"indianred"},{component:e=>(0,ct.jsx)("path",{...e,d:"M 0 80 L 0 100 L 100 100 L 100 80 L 68 80 L 68 0 L 32 0 L 0 15 L 0 40 L 32 25 L 32 80 L 0 80"}),regex:"1",color:"red"},{component:e=>(0,ct.jsx)("path",{...e,d:"M 0 25 C 20 -8 80 -8 100 25 C 100 90 30 50 20 85 L 100 85 L 100 100 L 0 100 L 0 70 C 10 40 75 70 75 25 C 70 10 30 10 25 28 L 0 25"}),regex:"2",color:"green"},{component:e=>(0,ct.jsx)("path",{...e,d:"M 0 35 L 0 25 C 20 -8 80 -8 100 25 C 100 30 100 50 75 50 C 100 50 100 70 100 75 C 80 108 20 108 0 75 L 0 65 L 25 65 L 25 75 C 30 88 70 88 75 75 C 75 68 75 65 47 58 L 47 42 C 75 32 75 35 75 25 C 70 12 30 12 25 25 L 25 35"}),regex:"3",color:"purple"},{component:e=>(0,ct.jsx)("path",{...e,d:"M 50 0 L 0 50 L 0 70 L 50 70 L 50 100 L 75 100 L 75 70 L 100 70 L 100 50 L 75 50 L 75 0 L 50 15 L 50 50 L 30 50 L 75 0 L 50 0"}),regex:"4",color:"navy"},{component:e=>(0,ct.jsx)("path",{...e,d:"M 95 20 L 100 0 L 10 0 L 0 60 L 25 60 C 30 45 90 50 75 77 C 66 87 30 90 26 72 L 0 80 C 20 110 80 110 100 70 C 100 25 10 25 25 40 L 30 20 L 95 20"}),regex:"5",color:"teal"},{component:e=>(0,ct.jsx)("path",{...e,d:"M 50 0 C -40 70 10 100 50 100 C 90 100 100 80 100 55 C 80 30 30 30 35 50 L 30 60 C 80 50 80 85 50 80 C 10 80 48 10 90 0 L 50 0"}),regex:"6",color:"gold"},{component:e=>(0,ct.jsx)("path",{...e,d:"M 0 0 L 100 0 L 50 100 L 20 100 L 60 20 L 0 20 L 0 0"}),regex:"7",color:"olive"},{component:e=>(0,ct.jsxs)("g",{children:[(0,ct.jsx)("path",{...e,d:"M 0 35 L 0 25 C 20 -8 80 -8 100 25 C 100 30 100 50 75 50 C 100 50 100 70 100 75 C 80 108 20 108 0 75 L 0 65 L 25 65 L 25 75 C 30 88 70 88 75 75 C 75 68 75 65 47 58 L 47 42 C 75 32 75 35 75 25 C 70 12 30 12 25 25 L 25 35"}),(0,ct.jsx)("path",{...e,d:"M 100 35 L 100 25 C 80 -8 20 -8 0 25 C 0 30 0 50 25 50 C 0 50 0 70 0 75 C 20 108 80 108 100 75 L 100 65 L 75 65 L 75 75 C 70 88 30 88 25 75 C 25 68 25 65 53 58 L 53 42 C 25 32 25 35 25 25 C 30 12 70 12 75 25 L 75 35"})]}),regex:"8",color:"slate"},{component:e=>(0,ct.jsx)("path",{...e,d:"M 50 100 C 140 30 90 0 50 0 C 10 0 0 20 0 45 C 20 70 70 70 65 50 L 70 40 C 20 50 20 15 50 20 C 90 20 52 90 10 100 L 50 100"}),regex:"9",color:"firebrick"}],FDe="FREQUENCY",NDe=(()=>{let e={};return ODe.forEach((t=>{e[t.regex]=t})),e})(),LDe=e=>e.map((e=>{if(1===e.regex.length)return Object.assign({},e,{component:NDe[e.regex].component});const t=(e.color&&e.color.map&&e.color.length>=1?e.color[0]:e.color)||"#000000";let n=Object.assign({},e,{component:[],color:e.color&&e.color.map&&e.color.length===e.regex.length?e.color:[]});for(let r=0;r<n.regex.length;++r)n.component.push(NDe[n.regex[r]].component),n.color.length===r&&n.color.push(t);return n})),UDe=e=>[...Array(Math.floor(e)).keys()],GDe=(e,t,n)=>{const r=[],o=Math.max(...n.map((e=>e.length)));for(let i=0;i<o;++i)r.push(e.map((e=>0)));return n.forEach((e=>{for(let n=0;n<e.length;++n)++r[n][t[e[n]]]})),{count:n.length,pfm:r}},jDe=(e,t)=>{const n={},r=[];return e.forEach(((e,t)=>{n[e.regex]=t})),t.split("\n").forEach((e=>{">"===e[0]?r.push(""):r[r.length-1]+=e.trim()})),GDe(e,n,r)},zDe=(e,t)=>{const n={};return e.forEach(((e,t)=>{n[e.regex]=t})),GDe(e,n,t.split("\n").map((e=>e.trim())))},HDe=e=>{let{yscale:t,inverted:n,xscale:r,children:o}=e;const i=t*(n?-1:1);return(0,ct.jsx)("g",{transform:"scale("+r+","+i+")",children:o})},VDe=e=>{let{height:t,width:n,indices:r,alphabet:o,lv:i,transform:a,alpha:s,inverted:l,onSymbolMouseOver:c,onSymbolMouseOut:u,onSymbolClick:d,curr:A,important:f}=e,p=t,h=n/100;s=s||1;let g=r.map((e=>{if(!o[e]||!o[e].component)return null;if(0===i[e])return null;p-=100*i[e];const t=l?p+100*i[e]:p;if(!o[e].component.map){let n=o[e].component;return(0,ct.jsx)("g",{transform:"translate(0,"+t+")",onMouseOver:c&&(()=>c(o[e])),onMouseOut:u&&(()=>u(o[e])),onClick:d&&(()=>d(o[e])),children:(0,ct.jsx)(HDe,{xscale:h,yscale:i[e],inverted:l,children:(0,ct.jsx)(n,{fill:o[e].color,fillOpacity:s,...o[e]})})},e)}let r=.8*h/o[e].component.length;return o[e].color.map||(o[e].color=o[e].component.map((t=>o[e].color))),o[e].component.map(((a,A)=>(0,ct.jsx)("g",{transform:"translate("+(A*n*.8/o[e].component.length+.1*n)+","+t+")",onMouseOver:c&&(()=>c(o[e])),onMouseOut:u&&(()=>u(o[e])),onClick:d&&(()=>d(o[e])),children:(0,ct.jsx)(HDe,{xscale:r,yscale:i[e],inverted:l,children:(0,ct.jsx)(a,{fill:o[e].color[A],fillOpacity:s,...o[e]})})},e+"_"+A)))}));return(0,ct.jsxs)("g",{transform:a,children:[g,(0,ct.jsx)("rect",{className:"glyphrect",style:{width:"73px",height:"500px",fill:f?"blue":"red",fillOpacity:f?".2":""},onClick:d&&(()=>d(o)),onMouseOver:c&&(()=>c(o))})]})},qDe=e=>{let{n:t,transform:n,glyphWidth:r,startpos:o}=e;const i=UDe(t);return(0,ct.jsx)("g",{transform:n,children:(0,ct.jsx)("g",{transform:"rotate(-90)",children:i.map((e=>(0,ct.jsx)("text",{x:"0",y:r*(e+.66),fontSize:"30",textAnchor:"end",children:e+o},e)))})})},YDe=e=>{let{bits:t,transform:n,height:r,width:o,zeroPoint:i}=e;const a=UDe(t+1);return void 0===i&&(i=1),(0,ct.jsxs)("g",{transform:n,className:"yaxis",children:[(0,ct.jsx)("rect",{height:r,width:o+2,x:"-2",fill:"#FFFFFF"}),(0,ct.jsx)("rect",{height:r,width:4,x:o+1,y:0,fill:"#000000"}),a.map((e=>(0,ct.jsxs)("g",{transform:"translate(0,"+(r*i-Math.floor(e*(r*i)/t))+")",children:[(0,ct.jsx)("text",{x:o-15,textAnchor:"end",y:"4",fontSize:"18",children:e}),(0,ct.jsx)("rect",{x:o-10,width:"15",height:"4",y:"-2",fill:"#000000"})]},e))),(0,ct.jsx)("g",{transform:"rotate(-90)",children:(0,ct.jsx)("text",{y:"20",x:-r/2,textAnchor:"middle",fontSize:"22",children:"Information"})})]})},XDe=e=>{let{ticks:t,transform:n,height:r,width:o}=e;const i=UDe(t+1).map((e=>e/t));return(0,ct.jsxs)("g",{transform:n,className:"yaxis",children:[(0,ct.jsx)("rect",{height:r,width:o+2,x:"-2",fill:"#FFFFFF"}),(0,ct.jsx)("rect",{height:r,width:4,x:o+1,y:"0",fill:"#000000"}),i.map((e=>(0,ct.jsxs)("g",{transform:"translate(0,"+(r-Math.floor(e*r))+")",children:[(0,ct.jsx)("text",{x:o-10,textAnchor:"end",y:"4",fontSize:"18",children:(e+"").substring(0,4)}),(0,ct.jsx)("rect",{x:o-5,width:"10",height:"4",y:"-2",fill:"#000000"})]},e))),(0,ct.jsx)("g",{transform:"rotate(-90)",children:(0,ct.jsx)("text",{y:"15",x:-r/2,textAnchor:"middle",fontSize:"22",children:"Probability"})})]})},WDe=e=>{let{minrange:t,maxrange:n,xstart:r,width:o,height:i,xaxis_y:a,numberofgridlines:s,stroke:l}=e;const c=((e,t)=>n=>t[0]+(t[1]-t[0])*((n-e[0])/(e[1]-e[0])))([t,n],[r,o]),u=n-t,d=a+i,A=Math.ceil(u)/s,f=Math.ceil(u/A),p=Array.from(Array(f).keys());return(0,ct.jsxs)("g",{stroke:l,children:[p.map((e=>{const n=t+A*e;return(0,ct.jsx)("line",{x1:c(n),x2:c(n),y1:a,y2:d},e)})),(0,ct.jsx)("line",{x1:c(n),x2:c(n),y1:a,y2:d}),";"]})},KDe=e=>{let{values:t,glyphWidth:n,stackHeight:r,alphabet:o,onSymbolMouseOver:i,onSymbolMouseOut:a,onSymbolClick:s,importantResidues:l}=e;const c=((e,t)=>(n,r,o,i,a,s)=>{const l=(e=>{let t=e.map(((e,t)=>t));return t.sort(((t,n)=>e[t]<e[n]?-1:e[t]===e[n]?0:1))})(n),{onSymbolMouseOver:c,onSymbolMouseOut:u,onSymbolClick:d}=a||{};return(0,ct.jsx)(VDe,{indices:l,alphabet:i,onSymbolMouseOver:c?e=>c(o,e):null,onSymbolClick:d?e=>d(o,e):null,onSymbolMouseOut:u?e=>u(o,e):null,lv:n,transform:r,width:e,height:t,curr:o,important:s},o)})(n,r);for(const u in o)if(!u.component){o=LDe(o);break}return t.map(((e,t)=>l.includes(t)?c(e,"translate("+n*t+",0)",t,o,{onSymbolMouseOver:i,onSymbolMouseOut:a,onSymbolClick:s},!0):c(e,"translate("+n*t+",0)",t,o,{onSymbolMouseOver:i,onSymbolMouseOut:a,onSymbolClick:s})))},JDe=F.forwardRef(((e,t)=>{let{ppm:n,pfm:r,values:o,fasta:i,mode:a,height:s,width:l,alphabet:c,glyphwidth:u,scale:d,startpos:A,showGridLines:f,backgroundFrequencies:p,constantPseudocount:h,smallSampleCorrectionOff:g,yAxisMax:m,onSymbolMouseOver:y,onSymbolMouseOut:v,onSymbolClick:b,noFastaNames:C,countUnaligned:I,importantResidues:E}=e,x=null;const B=!(!r&&!i||h||I)&&!g,w=B?0:(h||0)/c.length;if(!n&&!r&&i){const e=(C?zDe:jDe)(c,i.toUpperCase());r=e.pfm,x=e.count||1}const _=B&&r&&r.map&&r.map((e=>e.reduce(((e,t,n)=>void 0===n?e:t+e),0))).map((e=>0===e?0:(c.length-1)/(2*Math.log(2)*e)));if(!n&&r&&r.map&&(n=r.map(((e,t)=>{const n=(x&&I?x:e.reduce(((e,t)=>e+t),0)+w*c.length)||1;return e.map((e=>(e+w)/n))}))),0===n.length||0===n[0].length)return(0,ct.jsx)("div",{});let S=n[0].length;p||(p=n[0].map((e=>1/S)));let D=o||(a!==FDe?n.map(((e,t)=>(e=>(t,n)=>{let r=0,o=n||0;return t.map(((t,n)=>r+=0===t?0:t*Math.log2(t/(e[n]||.01)))),t.map((e=>{const t=e*(r-o);return t<=0?0:t}))})(p)(e,_[t]))):n.map((e=>e.map((e=>e*Math.log2(S))))));const T=a===FDe?[Math.log2(S)]:p.map((e=>Math.log2(1/(e||.01)))),k=m||Math.max(...T),Q=Math.min(...T),M=Q<0?k/(k-Q):1;A=!isNaN(parseFloat(A))&&isFinite(A)?A:1;let R=100*k,P=R/6*(u||1),O=D.length*P+80,F=R+18*(((e,t)=>{let n=(""+e).length;for(let r=e+1;r<e+t;++r)(""+r).length>n&&(n=(""+r).length);return n})(A,D.length)+1);return d&&(O>F?l=d:s=d),(0,ct.jsxs)("svg",{width:"fit-content",height:"150",viewBox:"0 0 "+O+" "+F,ref:t,children:[(0,ct.jsx)("g",{transform:"translate(80,10)",children:(0,ct.jsx)(KDe,{values:D,glyphWidth:P,stackHeight:R,alphabet:c,onSymbolMouseOver:y,onSymbolMouseOut:v,onSymbolClick:b,importantResidues:E.differing_residues})}),f&&(0,ct.jsx)(WDe,{minrange:A,maxrange:A+n.length,xstart:70,width:O,height:R,xaxis_y:10,numberofgridlines:10*D.length}),(0,ct.jsx)(qDe,{transform:"translate(80,"+(R+20)+")",n:D.length,glyphWidth:P,startpos:A}),a===FDe?(0,ct.jsx)(XDe,{className:"yaxis",transform:"translate(0,10)",width:65,height:R,ticks:2}):(0,ct.jsx)(YDe,{className:"yaxis",transform:"translate(0,10)",width:65,height:R,bits:k,zeroPoint:M})]})})),ZDe=JDe;var $De=n(122);const eTe="undefined"!==typeof window?F.useLayoutEffect:F.useEffect;function tTe(e,t,n){const[r,o]=function(e,t,n){const[r,o]=(0,F.useState)((()=>t(e))),i=(0,F.useCallback)((()=>{const i=t(e);$De(r,i)||(o(i),n&&n())}),[r,e,n]);return eTe(i),[r,i]}(e,t,n);return eTe((function(){const t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(o,{handlerIds:[t]})}),[e,o]),r}function nTe(e,t,n){return tTe(t,e||(()=>({})),(()=>n.reconnect()))}function rTe(e,t){const n=[...t||[]];return null==t&&"function"!==typeof e&&n.push(e),(0,F.useMemo)((()=>"function"===typeof e?e():e),n)}function oTe(e){return(0,F.useMemo)((()=>e.hooks.dropTarget()),[e])}function iTe(e,t,n,r){let o=n?n.call(r,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;const s=Object.prototype.hasOwnProperty.bind(t);for(let l=0;l<i.length;l++){const a=i[l];if(!s(a))return!1;const c=e[a],u=t[a];if(o=n?n.call(r,c,u,a):void 0,!1===o||void 0===o&&c!==u)return!1}return!0}function aTe(e){return null!==e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function sTe(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(0,F.isValidElement)(t)){const r=t;return e(r,n),r}const r=t;!function(e){if("string"===typeof e.type)return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}(r);const o=n?t=>e(t,n):e;return function(e,t){const n=e.ref;return M_e("string"!==typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?(0,F.cloneElement)(e,{ref:e=>{cTe(n,e),cTe(t,e)}}):(0,F.cloneElement)(e,{ref:t})}(r,o)}}function lTe(e){const t={};return Object.keys(e).forEach((n=>{const r=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{const e=sTe(r);t[n]=()=>e}})),t}function cTe(e,t){"function"===typeof e?e(t):e.current=t}class uTe{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!iTe(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=lTe({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,aTe(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function dTe(){const{dragDropManager:e}=(0,F.useContext)(FSe);return M_e(null!=e,"Expected drag drop context"),e}let ATe=!1;class fTe{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;M_e(!ATe,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return ATe=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{ATe=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}class pTe{canDrop(){const e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function hTe(e,t,n){const r=dTe(),o=function(e,t){const n=(0,F.useMemo)((()=>new pTe(e,t)),[t]);return(0,F.useEffect)((()=>{n.spec=e}),[e]),n}(e,t),i=function(e){const{accept:t}=e;return(0,F.useMemo)((()=>(M_e(null!=e.accept,"accept must be defined"),Array.isArray(t)?t:[t])),[t])}(e);eTe((function(){const[e,a]=function(e,t,n){const r=n.getRegistry(),o=r.addTarget(e,t);return[o,()=>r.removeTarget(o)]}(i,o,r);return t.receiveHandlerId(e),n.receiveHandlerId(e),a}),[r,t,o,n,i.map((e=>e.toString())).join("|")])}function gTe(e,t){const n=rTe(e,t),r=function(){const e=dTe();return(0,F.useMemo)((()=>new fTe(e)),[e])}(),o=function(e){const t=dTe(),n=(0,F.useMemo)((()=>new uTe(t.getBackend())),[t]);return eTe((()=>(n.dropTargetOptions=e||null,n.reconnect(),()=>n.disconnectDropTarget())),[e]),n}(n.options);return hTe(n,r,o),[nTe(n.collect,r,o),oTe(o)]}function mTe(e){return(0,F.useMemo)((()=>e.hooks.dragSource()),[e])}function yTe(e){return(0,F.useMemo)((()=>e.hooks.dragPreview()),[e])}class vTe{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();n&&this.disconnectDragPreview(),this.handlerId&&(t?n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions)):this.lastConnectedDragPreview=t)}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!iTe(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!iTe(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=lTe({dragSource:(e,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,aTe(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,aTe(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}let bTe=!1,CTe=!1;class ITe{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){M_e(!bTe,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return bTe=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{bTe=!1}}isDragging(){if(!this.sourceId)return!1;M_e(!CTe,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return CTe=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{CTe=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}class ETe{beginDrag(){const e=this.spec,t=this.monitor;let n=null;return n="object"===typeof e.item?e.item:"function"===typeof e.item?e.item(t):{},null!==n&&void 0!==n?n:null}canDrag(){const e=this.spec,t=this.monitor;return"boolean"===typeof e.canDrag?e.canDrag:"function"!==typeof e.canDrag||e.canDrag(t)}isDragging(e,t){const n=this.spec,r=this.monitor,{isDragging:o}=n;return o?o(r):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,n=this.connector,{end:r}=e;r&&r(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}}function xTe(e,t,n){const r=dTe(),o=function(e,t,n){const r=(0,F.useMemo)((()=>new ETe(e,t,n)),[t,n]);return(0,F.useEffect)((()=>{r.spec=e}),[e]),r}(e,t,n),i=function(e){return(0,F.useMemo)((()=>{const t=e.type;return M_e(null!=t,"spec.type must be defined"),t}),[e])}(e);eTe((function(){if(null!=i){const[e,a]=function(e,t,n){const r=n.getRegistry(),o=r.addSource(e,t);return[o,()=>r.removeSource(o)]}(i,o,r);return t.receiveHandlerId(e),n.receiveHandlerId(e),a}}),[r,t,n,o,i])}function BTe(e,t){const n=rTe(e,t);M_e(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=function(){const e=dTe();return(0,F.useMemo)((()=>new ITe(e)),[e])}(),o=function(e,t){const n=dTe(),r=(0,F.useMemo)((()=>new vTe(n.getBackend())),[n]);return eTe((()=>(r.dragSourceOptions=e||null,r.reconnect(),()=>r.disconnectDragSource())),[r,e]),eTe((()=>(r.dragPreviewOptions=t||null,r.reconnect(),()=>r.disconnectDragPreview())),[r,t]),r}(n.options,n.previewOptions);return xTe(n,r,o),[nTe(n.collect,r,o),mTe(o),yTe(o)]}const wTe="card",_Te=[[{component:fDe,regex:"A",color:"black"},{component:pDe,regex:"C",color:"#008811"},{component:hDe,regex:"D",color:"#ff0000"},{component:gDe,regex:"E",color:"#ff0022"},{component:mDe,regex:"F",color:"#333333"},{component:yDe,regex:"G",color:"#007700"},{component:vDe,regex:"H",color:"#220099"},{component:bDe,regex:"I",color:"#111111"},{component:CDe,regex:"K",color:"#0000aa"},{component:IDe,regex:"L",color:"#002222"},{component:EDe,regex:"M",color:"#220022"},{component:xDe,regex:"N",color:"#009911"},{component:wDe,regex:"P",color:"#080808"},{component:_De,regex:"Q",color:"#00aa00"},{component:SDe,regex:"R",color:"#0022aa"},{component:DDe,regex:"S",color:"#008f00"},{component:TDe,regex:"T",color:"#006600"},{component:kDe,regex:"V",color:"#222200"},{component:QDe,regex:"W",color:"#080808"},{component:RDe,regex:"Y",color:"#00a800"}],[{component:fDe,regex:"A",color:"#F0C987"},{component:pDe,regex:"C",color:"#E6E600"},{component:hDe,regex:"D",color:"#E60A0A"},{component:gDe,regex:"E",color:"#E60A0A"},{component:mDe,regex:"F",color:"#3232AA"},{component:yDe,regex:"G",color:"#EBEBEB"},{component:vDe,regex:"H",color:"#8282D2"},{component:bDe,regex:"I",color:"#0F820F"},{component:CDe,regex:"K",color:"#145AFF"},{component:IDe,regex:"L",color:"#0F820F"},{component:EDe,regex:"M",color:"#E6CC00"},{component:xDe,regex:"N",color:"#00DCDC"},{component:wDe,regex:"P",color:"#DC9682"},{component:_De,regex:"Q",color:"#00DCDC"},{component:SDe,regex:"R",color:"#145AFF"},{component:DDe,regex:"S",color:"#FA9600"},{component:TDe,regex:"T",color:"#FA9600"},{component:kDe,regex:"V",color:"#0F820F"},{component:QDe,regex:"W",color:"#B45AB4"},{component:RDe,regex:"Y",color:"#3232AA"}],[{component:fDe,regex:"A",color:"#C8C8C8"},{component:pDe,regex:"C",color:"#E6E600"},{component:hDe,regex:"D",color:"#E60A0A"},{component:gDe,regex:"E",color:"#E60A0A"},{component:mDe,regex:"F",color:"#3232AA"},{component:yDe,regex:"G",color:"#EBEBEB"},{component:vDe,regex:"H",color:"#8282D2"},{component:bDe,regex:"I",color:"#0F820F"},{component:CDe,regex:"K",color:"#145AFF"},{component:IDe,regex:"L",color:"#0F820F"},{component:EDe,regex:"M",color:"#E6E600"},{component:xDe,regex:"N",color:"#00DCDC"},{component:wDe,regex:"P",color:"#DC9682"},{component:_De,regex:"Q",color:"#00DCDC"},{component:SDe,regex:"R",color:"#145AFF"},{component:DDe,regex:"S",color:"#FA9600"},{component:TDe,regex:"T",color:"#FA9600"},{component:kDe,regex:"V",color:"#0F820F"},{component:QDe,regex:"W",color:"#B45AB4"},{component:RDe,regex:"Y",color:"#3232AA"}],[{component:fDe,regex:"A",color:"orange"},{component:pDe,regex:"C",color:"green"},{component:hDe,regex:"D",color:"red"},{component:gDe,regex:"E",color:"red"},{component:mDe,regex:"F",color:"blue"},{component:yDe,regex:"G",color:"orange"},{component:vDe,regex:"H",color:"red"},{component:bDe,regex:"I",color:"green"},{component:CDe,regex:"K",color:"red"},{component:IDe,regex:"L",color:"green"},{component:EDe,regex:"M",color:"green"},{component:xDe,regex:"N",color:"#fff"},{component:wDe,regex:"P",color:"orange"},{component:_De,regex:"Q",color:"#fff"},{component:SDe,regex:"R",color:"red"},{component:DDe,regex:"S",color:"orange"},{component:TDe,regex:"T",color:"orange"},{component:kDe,regex:"V",color:"green"},{component:QDe,regex:"W",color:"blue"},{component:RDe,regex:"Y",color:"blue"}],[{component:fDe,regex:"A",color:"#80a0f0"},{component:pDe,regex:"C",color:"#f08080"},{component:hDe,regex:"D",color:"#c048c0"},{component:gDe,regex:"E",color:"#c048c0"},{component:mDe,regex:"F",color:"#80a0f0"},{component:yDe,regex:"G",color:"#f09048"},{component:vDe,regex:"H",color:"#15a4a4"},{component:bDe,regex:"I",color:"#80a0f0"},{component:CDe,regex:"K",color:"#f01505"},{component:IDe,regex:"L",color:"#80a0f0"},{component:EDe,regex:"M",color:"#80a0f0"},{component:xDe,regex:"N",color:"#00ff00"},{component:wDe,regex:"P",color:"#ffff00"},{component:_De,regex:"Q",color:"#00ff00"},{component:SDe,regex:"R",color:"#f01505"},{component:DDe,regex:"S",color:"#00ff00"},{component:TDe,regex:"T",color:"#00ff00"},{component:kDe,regex:"V",color:"#80a0f0"},{component:QDe,regex:"W",color:"#80a0f0"},{component:RDe,regex:"Y",color:"#15a4a4"}],[{component:fDe,regex:"A",color:"#ad0052"},{component:pDe,regex:"C",color:"#c2003d"},{component:hDe,regex:"D",color:"#0c00f3"},{component:gDe,regex:"E",color:"#0c00f3"},{component:mDe,regex:"F",color:"#cb0034"},{component:yDe,regex:"G",color:"#6a0095"},{component:vDe,regex:"H",color:"#1500ea"},{component:bDe,regex:"I",color:"#ff0000"},{component:CDe,regex:"K",color:"#0000ff"},{component:IDe,regex:"L",color:"#ea0015"},{component:EDe,regex:"M",color:"#b0004f"},{component:xDe,regex:"N",color:"#0c00f3"},{component:wDe,regex:"P",color:"#4600b9"},{component:_De,regex:"Q",color:"#0c00f3"},{component:SDe,regex:"R",color:"#0000ff"},{component:DDe,regex:"S",color:"#5e00a1"},{component:TDe,regex:"T",color:"#61009e"},{component:kDe,regex:"V",color:"#f60009"},{component:QDe,regex:"W",color:"#5b00a4"},{component:RDe,regex:"Y",color:"#4f00b0"}],[{component:fDe,regex:"A",color:"#BBBBBB"},{component:pDe,regex:"C",color:"yellow"},{component:hDe,regex:"D",color:"red"},{component:gDe,regex:"E",color:"red"},{component:mDe,regex:"F",color:"magenta"},{component:yDe,regex:"G",color:"brown"},{component:vDe,regex:"H",color:"#00FFFF"},{component:bDe,regex:"I",color:"#BBBBBB"},{component:CDe,regex:"K",color:"#00FFFF"},{component:IDe,regex:"L",color:"#BBBBBB"},{component:EDe,regex:"M",color:"#BBBBBB"},{component:xDe,regex:"N",color:"green"},{component:wDe,regex:"P",color:"brown"},{component:_De,regex:"Q",color:"green"},{component:SDe,regex:"R",color:"#00FFFF"},{component:DDe,regex:"S",color:"green"},{component:TDe,regex:"T",color:"green"},{component:kDe,regex:"V",color:"#BBBBBB"},{component:QDe,regex:"W",color:"magenta"},{component:RDe,regex:"Y",color:"magenta"}],[{component:fDe,regex:"A",color:"#e718e7"},{component:pDe,regex:"C",color:"#23dc23"},{component:hDe,regex:"D",color:"#778877"},{component:gDe,regex:"E",color:"#ff00ff"},{component:mDe,regex:"F",color:"#986798"},{component:yDe,regex:"G",color:"#00ff00"},{component:vDe,regex:"H",color:"#758a75"},{component:bDe,regex:"I",color:"#8a758a"},{component:CDe,regex:"K",color:"#a05fa0"},{component:IDe,regex:"L",color:"#ae51ae"},{component:EDe,regex:"M",color:"#ef10ef"},{component:xDe,regex:"N",color:"#1be41b"},{component:wDe,regex:"P",color:"#00ff00"},{component:_De,regex:"Q",color:"#926d92"},{component:SDe,regex:"R",color:"#6f906f"},{component:DDe,regex:"S",color:"#36c936"},{component:TDe,regex:"T",color:"#47b847"},{component:kDe,regex:"V",color:"#857a85"},{component:QDe,regex:"W",color:"#8a758a"},{component:RDe,regex:"Y",color:"#21de21"}],[{component:fDe,regex:"A",color:"orange"},{component:pDe,regex:"C",color:"green"},{component:hDe,regex:"D",color:"red"},{component:gDe,regex:"E",color:"red"},{component:mDe,regex:"F",color:"green"},{component:yDe,regex:"G",color:"orange"},{component:vDe,regex:"H",color:"magenta"},{component:bDe,regex:"I",color:"green"},{component:CDe,regex:"K",color:"red"},{component:IDe,regex:"L",color:"green"},{component:EDe,regex:"M",color:"green"},{component:xDe,regex:"N",color:"magenta"},{component:wDe,regex:"P",color:"green"},{component:_De,regex:"Q",color:"magenta"},{component:SDe,regex:"R",color:"red"},{component:DDe,regex:"S",color:"orange"},{component:TDe,regex:"T",color:"orange"},{component:kDe,regex:"V",color:"green"},{component:QDe,regex:"W",color:"green"},{component:RDe,regex:"Y",color:"green"}],[{component:fDe,regex:"A",color:"#77dd88"},{component:pDe,regex:"C",color:"#99ee66"},{component:hDe,regex:"D",color:"#55bb33"},{component:gDe,regex:"E",color:"#55bb33"},{component:mDe,regex:"F",color:"#9999ff"},{component:yDe,regex:"G",color:"#77dd88"},{component:vDe,regex:"H",color:"#5555ff"},{component:bDe,regex:"I",color:"#66bbff"},{component:CDe,regex:"K",color:"#ffcc77"},{component:IDe,regex:"L",color:"#66bbff"},{component:EDe,regex:"M",color:"#66bbff"},{component:xDe,regex:"N",color:"#55bb33"},{component:wDe,regex:"P",color:"#eeaaaa"},{component:_De,regex:"Q",color:"#55bb33"},{component:SDe,regex:"R",color:"#ffcc77"},{component:DDe,regex:"S",color:"#ff4455"},{component:TDe,regex:"T",color:"#ff4455"},{component:kDe,regex:"V",color:"#66bbff"},{component:QDe,regex:"W",color:"#9999ff"},{component:RDe,regex:"Y",color:"#9999ff"}],[{component:fDe,regex:"A",color:"#5858a7"},{component:pDe,regex:"C",color:"#9d9d62"},{component:hDe,regex:"D",color:"#2121de"},{component:gDe,regex:"E",color:"#0000ff"},{component:mDe,regex:"F",color:"#c2c23d"},{component:yDe,regex:"G",color:"#4949b6"},{component:vDe,regex:"H",color:"#60609f"},{component:bDe,regex:"I",color:"#ecec13"},{component:CDe,regex:"K",color:"#4747b8"},{component:IDe,regex:"L",color:"#b2b24d"},{component:EDe,regex:"M",color:"#82827d"},{component:xDe,regex:"N",color:"#64649b"},{component:wDe,regex:"P",color:"#2323dc"},{component:_De,regex:"Q",color:"#8c8c73"},{component:SDe,regex:"R",color:"#6b6b94"},{component:DDe,regex:"S",color:"#4949b6"},{component:TDe,regex:"T",color:"#9d9d62"},{component:kDe,regex:"V",color:"#ffff00"},{component:QDe,regex:"W",color:"#c0c03f"},{component:RDe,regex:"Y",color:"#d3d32c"}],[{component:fDe,regex:"A",color:"#ccff00"},{component:pDe,regex:"C",color:"#ffff00"},{component:hDe,regex:"D",color:"#ff0000"},{component:gDe,regex:"E",color:"#ff0066"},{component:mDe,regex:"F",color:"#00ff66"},{component:yDe,regex:"G",color:"#ff9900"},{component:vDe,regex:"H",color:"#0066ff"},{component:bDe,regex:"I",color:"#66ff00"},{component:CDe,regex:"K",color:"#6600ff"},{component:IDe,regex:"L",color:"#33ff00"},{component:EDe,regex:"M",color:"#00ff00"},{component:xDe,regex:"N",color:"#cc00ff"},{component:wDe,regex:"P",color:"#ffcc00"},{component:_De,regex:"Q",color:"#ff00cc"},{component:SDe,regex:"R",color:"#0000ff"},{component:DDe,regex:"S",color:"#ff3300"},{component:TDe,regex:"T",color:"#ff6600"},{component:kDe,regex:"V",color:"#99ff00"},{component:QDe,regex:"W",color:"#00ccff"},{component:RDe,regex:"Y",color:"#00ffcc"}],[{component:fDe,regex:"A",color:"#2cd3d3"},{component:pDe,regex:"C",color:"#a85757"},{component:hDe,regex:"D",color:"#e81717"},{component:gDe,regex:"E",color:"#778888"},{component:mDe,regex:"F",color:"#1ee1e1"},{component:yDe,regex:"G",color:"#ff0000"},{component:vDe,regex:"H",color:"#708f8f"},{component:bDe,regex:"I",color:"#00ffff"},{component:CDe,regex:"K",color:"#7e8181"},{component:IDe,regex:"L",color:"#1ce3e3"},{component:EDe,regex:"M",color:"#1ee1e1"},{component:xDe,regex:"N",color:"#ff0000"},{component:wDe,regex:"P",color:"#f60909"},{component:_De,regex:"Q",color:"#3fc0c0"},{component:SDe,regex:"R",color:"#708f8f"},{component:DDe,regex:"S",color:"#e11e1e"},{component:TDe,regex:"T",color:"#738c8c"},{component:kDe,regex:"V",color:"#07f8f8"},{component:QDe,regex:"W",color:"#738c8c"},{component:RDe,regex:"Y",color:"#9d6262"}],[{component:fDe,regex:"A",color:"#ffafaf"},{component:pDe,regex:"C",color:"#ffff00"},{component:hDe,regex:"D",color:"#ff0000"},{component:gDe,regex:"E",color:"#ff0000"},{component:mDe,regex:"F",color:"#ffc800"},{component:yDe,regex:"G",color:"#ff00ff"},{component:vDe,regex:"H",color:"#6464ff"},{component:bDe,regex:"I",color:"#ffafaf"},{component:CDe,regex:"K",color:"#6464ff"},{component:IDe,regex:"L",color:"#ffafaf"},{component:EDe,regex:"M",color:"#ffafaf"},{component:xDe,regex:"N",color:"#00ff00"},{component:wDe,regex:"P",color:"#ff00ff"},{component:_De,regex:"Q",color:"#00ff00"},{component:SDe,regex:"R",color:"#6464ff"},{component:DDe,regex:"S",color:"#00ff00"},{component:TDe,regex:"T",color:"#00ff00"},{component:kDe,regex:"V",color:"#ffafaf"},{component:QDe,regex:"W",color:"#ffc800"},{component:RDe,regex:"Y",color:"#ffc800"}]];function STe(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=STe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const DTe=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=STe(e))&&(r&&(r+=" "),r+=t);return r};function TTe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};for(const o in e){const i=e[o];let a="",s=!0;for(let e=0;e<i.length;e+=1){const r=i[e];r&&(a+=(!0===s?"":" ")+t(r),s=!1,n&&n[r]&&(a+=" "+n[r]))}r[o]=a}return r}function kTe(e){const t=new URL(`https://mui.com/production-error/?code=${e}`);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach((e=>t.searchParams.append("args[]",e))),`Minified MUI error #${e}; visit ${t} for the full message.`}function QTe(e){if("string"!==typeof e)throw new Error(kTe(7));return e.charAt(0).toUpperCase()+e.slice(1)}const MTe=QTe;function RTe(){return RTe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RTe.apply(null,arguments)}function PTe(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var OTe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,FTe=PTe((function(e){return OTe.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var NTe=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(l0e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),LTe=Math.abs,UTe=String.fromCharCode,GTe=Object.assign;function jTe(e){return e.trim()}function zTe(e,t,n){return e.replace(t,n)}function HTe(e,t){return e.indexOf(t)}function VTe(e,t){return 0|e.charCodeAt(t)}function qTe(e,t,n){return e.slice(t,n)}function YTe(e){return e.length}function XTe(e){return e.length}function WTe(e,t){return t.push(e),e}var KTe=1,JTe=1,ZTe=0,$Te=0,eke=0,tke="";function nke(e,t,n,r,o,i,a){return{value:e,root:t,parent:n,type:r,props:o,children:i,line:KTe,column:JTe,length:a,return:""}}function rke(e,t){return GTe(nke("",null,null,"",null,null,0),e,{length:-e.length},t)}function oke(){return eke=$Te>0?VTe(tke,--$Te):0,JTe--,10===eke&&(JTe=1,KTe--),eke}function ike(){return eke=$Te<ZTe?VTe(tke,$Te++):0,JTe++,10===eke&&(JTe=1,KTe++),eke}function ake(){return VTe(tke,$Te)}function ske(){return $Te}function lke(e,t){return qTe(tke,e,t)}function cke(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function uke(e){return KTe=JTe=1,ZTe=YTe(tke=e),$Te=0,[]}function dke(e){return tke="",e}function Ake(e){return jTe(lke($Te-1,hke(91===e?e+2:40===e?e+1:e)))}function fke(e){for(;(eke=ake())&&eke<33;)ike();return cke(e)>2||cke(eke)>3?"":" "}function pke(e,t){for(;--t&&ike()&&!(eke<48||eke>102||eke>57&&eke<65||eke>70&&eke<97););return lke(e,ske()+(t<6&&32==ake()&&32==ike()))}function hke(e){for(;ike();)switch(eke){case e:return $Te;case 34:case 39:34!==e&&39!==e&&hke(eke);break;case 40:41===e&&hke(e);break;case 92:ike()}return $Te}function gke(e,t){for(;ike()&&e+eke!==57&&(e+eke!==84||47!==ake()););return"/*"+lke(t,$Te-1)+"*"+UTe(47===e?e:ike())}function mke(e){for(;!cke(ake());)ike();return lke(e,$Te)}var yke="-ms-",vke="-moz-",bke="-webkit-",Cke="comm",Ike="rule",Eke="decl",xke="@keyframes";function Bke(e,t){for(var n="",r=XTe(e),o=0;o<r;o++)n+=t(e[o],o,e,t)||"";return n}function wke(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case Eke:return e.return=e.return||e.value;case Cke:return"";case xke:return e.return=e.value+"{"+Bke(e.children,r)+"}";case Ike:e.value=e.props.join(",")}return YTe(n=Bke(e.children,r))?e.return=e.value+"{"+n+"}":""}function _ke(e){return dke(Ske("",null,null,null,[""],e=uke(e),0,[0],e))}function Ske(e,t,n,r,o,i,a,s,l){for(var c=0,u=0,d=a,A=0,f=0,p=0,h=1,g=1,m=1,y=0,v="",b=o,C=i,I=r,E=v;g;)switch(p=y,y=ike()){case 40:if(108!=p&&58==VTe(E,d-1)){-1!=HTe(E+=zTe(Ake(y),"&","&\f"),"&\f")&&(m=-1);break}case 34:case 39:case 91:E+=Ake(y);break;case 9:case 10:case 13:case 32:E+=fke(p);break;case 92:E+=pke(ske()-1,7);continue;case 47:switch(ake()){case 42:case 47:WTe(Tke(gke(ike(),ske()),t,n),l);break;default:E+="/"}break;case 123*h:s[c++]=YTe(E)*m;case 125*h:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:-1==m&&(E=zTe(E,/\f/g,"")),f>0&&YTe(E)-d&&WTe(f>32?kke(E+";",r,n,d-1):kke(zTe(E," ","")+";",r,n,d-2),l);break;case 59:E+=";";default:if(WTe(I=Dke(E,t,n,c,u,o,s,v,b=[],C=[],d),i),123===y)if(0===u)Ske(E,t,I,I,b,i,d,s,C);else switch(99===A&&110===VTe(E,3)?100:A){case 100:case 108:case 109:case 115:Ske(e,I,I,r&&WTe(Dke(e,I,I,0,0,o,s,v,o,b=[],d),C),o,C,d,s,r?b:C);break;default:Ske(E,I,I,I,[""],C,0,s,C)}}c=u=f=0,h=m=1,v=E="",d=a;break;case 58:d=1+YTe(E),f=p;default:if(h<1)if(123==y)--h;else if(125==y&&0==h++&&125==oke())continue;switch(E+=UTe(y),y*h){case 38:m=u>0?1:(E+="\f",-1);break;case 44:s[c++]=(YTe(E)-1)*m,m=1;break;case 64:45===ake()&&(E+=Ake(ike())),A=ake(),u=d=YTe(v=E+=mke(ske())),y++;break;case 45:45===p&&2==YTe(E)&&(h=0)}}return i}function Dke(e,t,n,r,o,i,a,s,l,c,u){for(var d=o-1,A=0===o?i:[""],f=XTe(A),p=0,h=0,g=0;p<r;++p)for(var m=0,y=qTe(e,d+1,d=LTe(h=a[p])),v=e;m<f;++m)(v=jTe(h>0?A[m]+" "+y:zTe(y,/&\f/g,A[m])))&&(l[g++]=v);return nke(e,t,n,0===o?Ike:s,l,c,u)}function Tke(e,t,n){return nke(e,t,n,Cke,UTe(eke),qTe(e,2,-2),0)}function kke(e,t,n,r){return nke(e,t,n,Eke,qTe(e,0,r),qTe(e,r+1,-1),r)}var Qke=function(e,t,n){for(var r=0,o=0;r=o,o=ake(),38===r&&12===o&&(t[n]=1),!cke(o);)ike();return lke(e,$Te)},Mke=function(e,t){return dke(function(e,t){var n=-1,r=44;do{switch(cke(r)){case 0:38===r&&12===ake()&&(t[n]=1),e[n]+=Qke($Te-1,t,n);break;case 2:e[n]+=Ake(r);break;case 4:if(44===r){e[++n]=58===ake()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=UTe(r)}}while(r=ike());return e}(uke(e),t))},Rke=new WeakMap,Pke=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Rke.get(n))&&!r){Rke.set(e,!0);for(var o=[],i=Mke(t,o),a=n.props,s=0,l=0;s<i.length;s++)for(var c=0;c<a.length;c++,l++)e.props[l]=o[s]?i[s].replace(/&\f/g,a[c]):a[c]+" "+i[s]}}},Oke=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function Fke(e,t){switch(function(e,t){return 45^VTe(e,0)?(((t<<2^VTe(e,0))<<2^VTe(e,1))<<2^VTe(e,2))<<2^VTe(e,3):0}(e,t)){case 5103:return bke+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return bke+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return bke+e+vke+e+yke+e+e;case 6828:case 4268:return bke+e+yke+e+e;case 6165:return bke+e+yke+"flex-"+e+e;case 5187:return bke+e+zTe(e,/(\w+).+(:[^]+)/,bke+"box-$1$2"+yke+"flex-$1$2")+e;case 5443:return bke+e+yke+"flex-item-"+zTe(e,/flex-|-self/,"")+e;case 4675:return bke+e+yke+"flex-line-pack"+zTe(e,/align-content|flex-|-self/,"")+e;case 5548:return bke+e+yke+zTe(e,"shrink","negative")+e;case 5292:return bke+e+yke+zTe(e,"basis","preferred-size")+e;case 6060:return bke+"box-"+zTe(e,"-grow","")+bke+e+yke+zTe(e,"grow","positive")+e;case 4554:return bke+zTe(e,/([^-])(transform)/g,"$1"+bke+"$2")+e;case 6187:return zTe(zTe(zTe(e,/(zoom-|grab)/,bke+"$1"),/(image-set)/,bke+"$1"),e,"")+e;case 5495:case 3959:return zTe(e,/(image-set\([^]*)/,bke+"$1$`$1");case 4968:return zTe(zTe(e,/(.+:)(flex-)?(.*)/,bke+"box-pack:$3"+yke+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+bke+e+e;case 4095:case 3583:case 4068:case 2532:return zTe(e,/(.+)-inline(.+)/,bke+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(YTe(e)-1-t>6)switch(VTe(e,t+1)){case 109:if(45!==VTe(e,t+4))break;case 102:return zTe(e,/(.+:)(.+)-([^]+)/,"$1"+bke+"$2-$3$1"+vke+(108==VTe(e,t+3)?"$3":"$2-$3"))+e;case 115:return~HTe(e,"stretch")?Fke(zTe(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==VTe(e,t+1))break;case 6444:switch(VTe(e,YTe(e)-3-(~HTe(e,"!important")&&10))){case 107:return zTe(e,":",":"+bke)+e;case 101:return zTe(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+bke+(45===VTe(e,14)?"inline-":"")+"box$3$1"+bke+"$2$3$1"+yke+"$2box$3")+e}break;case 5936:switch(VTe(e,t+11)){case 114:return bke+e+yke+zTe(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return bke+e+yke+zTe(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return bke+e+yke+zTe(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return bke+e+yke+e+e}return e}var Nke=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case Eke:e.return=Fke(e.value,e.length);break;case xke:return Bke([rke(e,{value:zTe(e.value,"@","@"+bke)})],r);case Ike:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Bke([rke(e,{props:[zTe(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Bke([rke(e,{props:[zTe(t,/:(plac\w+)/,":"+bke+"input-$1")]}),rke(e,{props:[zTe(t,/:(plac\w+)/,":-moz-$1")]}),rke(e,{props:[zTe(t,/:(plac\w+)/,yke+"input-$1")]})],r)}return""}))}}],Lke=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,o,i=e.stylisPlugins||Nke,a={},s=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;s.push(e)}));var l,c,u=[wke,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],d=function(e){var t=XTe(e);return function(n,r,o,i){for(var a="",s=0;s<t;s++)a+=e[s](n,r,o,i)||"";return a}}([Pke,Oke].concat(i,u));o=function(e,t,n,r){l=n,function(e){Bke(_ke(e),d)}(e?e+"{"+t.styles+"}":t.styles),r&&(A.inserted[t.name]=!0)};var A={key:t,sheet:new NTe({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:o};return A.sheet.hydrate(s),A};var Uke={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Gke=!1,jke=/[A-Z]|^ms/g,zke=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Hke=function(e){return 45===e.charCodeAt(1)},Vke=function(e){return null!=e&&"boolean"!==typeof e},qke=PTe((function(e){return Hke(e)?e:e.replace(jke,"-$&").toLowerCase()})),Yke=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(zke,(function(e,t,n){return Kke={name:t,styles:n,next:Kke},t}))}return 1===Uke[e]||Hke(e)||"number"!==typeof t||0===t?t:t+"px"},Xke="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Wke(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var o=n;if(1===o.anim)return Kke={name:o.name,styles:o.styles,next:Kke},o.name;var i=n;if(void 0!==i.styles){var a=i.next;if(void 0!==a)for(;void 0!==a;)Kke={name:a.name,styles:a.styles,next:Kke},a=a.next;return i.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=Wke(e,t,n[o])+";";else for(var i in n){var a=n[i];if("object"!==typeof a){var s=a;null!=t&&void 0!==t[s]?r+=i+"{"+t[s]+"}":Vke(s)&&(r+=qke(i)+":"+Yke(i,s)+";")}else{if("NO_COMPONENT_SELECTOR"===i&&Gke)throw new Error(Xke);if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var l=Wke(e,t,a);switch(i){case"animation":case"animationName":r+=qke(i)+":"+l+";";break;default:r+=i+"{"+l+"}"}}else for(var c=0;c<a.length;c++)Vke(a[c])&&(r+=qke(i)+":"+Yke(i,a[c])+";")}}return r}(e,t,n);case"function":if(void 0!==e){var s=Kke,l=n(e);return Kke=s,Wke(e,t,l)}}var c=n;if(null==t)return c;var u=t[c];return void 0!==u?u:c}var Kke,Jke=/label:\s*([^\s;{]+)\s*(;|$)/g;function Zke(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,o="";Kke=void 0;var i=e[0];null==i||void 0===i.raw?(r=!1,o+=Wke(n,t,i)):o+=i[0];for(var a=1;a<e.length;a++){if(o+=Wke(n,t,e[a]),r)o+=i[a]}Jke.lastIndex=0;for(var s,l="";null!==(s=Jke.exec(o));)l+="-"+s[1];var c=function(e){for(var t,n=0,r=0,o=e.length;o>=4;++r,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(o)+l;return{name:c,styles:o,next:Kke}}var $ke=!!N.useInsertionEffect&&N.useInsertionEffect,eQe=$ke||function(e){return e()},tQe=$ke||F.useLayoutEffect,nQe=F.createContext("undefined"!==typeof HTMLElement?Lke({key:"css"}):null),rQe=(nQe.Provider,function(e){return(0,F.forwardRef)((function(t,n){var r=(0,F.useContext)(nQe);return e(t,r,n)}))}),oQe=F.createContext({});var iQe=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},aQe=function(e,t,n){iQe(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}},sQe=FTe,lQe=function(e){return"theme"!==e},cQe=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?sQe:lQe},uQe=function(e,t,n){var r;if(t){var o=t.shouldForwardProp;r=e.__emotion_forwardProp&&o?function(t){return e.__emotion_forwardProp(t)&&o(t)}:o}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},dQe=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return iQe(t,n,r),eQe((function(){return aQe(t,n,r)})),null},AQe=function e(t,n){var r,o,i=t.__emotion_real===t,a=i&&t.__emotion_base||t;void 0!==n&&(r=n.label,o=n.target);var s=uQe(t,n,i),l=s||cQe(a),c=!l("as");return function(){var u=arguments,d=i&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&d.push("label:"+r+";"),null==u[0]||void 0===u[0].raw)d.push.apply(d,u);else{d.push(u[0][0]);for(var A=u.length,f=1;f<A;f++)d.push(u[f],u[0][f])}var p=rQe((function(e,t,n){var r=c&&e.as||a,i="",u=[],A=e;if(null==e.theme){for(var f in A={},e)A[f]=e[f];A.theme=F.useContext(oQe)}"string"===typeof e.className?i=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}(t.registered,u,e.className):null!=e.className&&(i=e.className+" ");var p=Zke(d.concat(u),t.registered,A);i+=t.key+"-"+p.name,void 0!==o&&(i+=" "+o);var h=c&&void 0===s?cQe(r):l,g={};for(var m in e)c&&"as"===m||h(m)&&(g[m]=e[m]);return g.className=i,n&&(g.ref=n),F.createElement(F.Fragment,null,F.createElement(dQe,{cache:t,serialized:p,isStringTag:"string"===typeof r}),F.createElement(r,g))}));return p.displayName=void 0!==r?r:"Styled("+("string"===typeof a?a:a.displayName||a.name||"Component")+")",p.defaultProps=t.defaultProps,p.__emotion_real=p,p.__emotion_base=a,p.__emotion_styles=d,p.__emotion_forwardProp=s,Object.defineProperty(p,"toString",{value:function(){return"."+o}}),p.withComponent=function(t,r){return e(t,RTe({},n,r,{shouldForwardProp:uQe(p,r,!0)})).apply(void 0,d)},p}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){AQe[e]=AQe(e)}));const fQe=[];function pQe(e){return fQe[0]=e,Zke(fQe)}function hQe(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function gQe(e){if(F.isValidElement(e)||!hQe(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=gQe(e[n])})),t}function mQe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const r=n.clone?{...e}:e;return hQe(e)&&hQe(t)&&Object.keys(t).forEach((o=>{F.isValidElement(t[o])?r[o]=t[o]:hQe(t[o])&&Object.prototype.hasOwnProperty.call(e,o)&&hQe(e[o])?r[o]=mQe(e[o],t[o],n):n.clone?r[o]=hQe(t[o])?gQe(t[o]):t[o]:r[o]=t[o]})),r}const yQe=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>({...e,[t.key]:t.val})),{})};const vQe={borderRadius:4},bQe={xs:0,sm:600,md:900,lg:1200,xl:1536},CQe={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${bQe[e]}px)`},IQe={containerQueries:e=>({up:t=>{let n="number"===typeof t?t:bQe[t]||t;return"number"===typeof n&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function EQe(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||CQe;return t.reduce(((r,o,i)=>(r[e.up(e.keys[i])]=n(t[i]),r)),{})}if("object"===typeof t){const e=r.breakpoints||CQe;return Object.keys(t).reduce(((o,i)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some((e=>t.startsWith(`@${e}`)))||!!t.match(/^@\d/))}(e.keys,i)){const e=function(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,o]=n,i=Number.isNaN(+r)?r||0:+r;return e.containerQueries(o).up(i)}(r.containerQueries?r:IQe,i);e&&(o[e]=n(t[i],i))}else if(Object.keys(e.values||bQe).includes(i)){o[e.up(i)]=n(t[i],i)}else{const e=i;o[e]=t[e]}return o}),{})}return n(t)}function xQe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.keys?.reduce(((t,n)=>(t[e.up(n)]={},t)),{});return t||{}}function BQe(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function wQe(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function _Qe(e,t,n){let r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||o:wQe(e,n)||o,t&&(r=t(r,o,e)),r}const SQe=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:o}=e,i=e=>{if(null==e[t])return null;const i=e[t],a=wQe(e.theme,r)||{};return EQe(e,i,(e=>{let r=_Qe(a,o,e);return e===r&&"string"===typeof e&&(r=_Qe(a,o,`${t}${"default"===e?"":QTe(e)}`,e)),!1===n?r:{[n]:r}}))};return i.propTypes={},i.filterProps=[t],i};const DQe=function(e,t){return t?mQe(e,t,{clone:!1}):e};const TQe={m:"margin",p:"padding"},kQe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},QQe={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},MQe=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!QQe[e])return[e];e=QQe[e]}const[t,n]=e.split(""),r=TQe[t],o=kQe[n]||"";return Array.isArray(o)?o.map((e=>r+e)):[r+o]})),RQe=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],PQe=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],OQe=[...RQe,...PQe];function FQe(e,t,n,r){const o=wQe(e,t,!0)??n;return"number"===typeof o||"string"===typeof o?e=>"string"===typeof e?e:"string"===typeof o?`calc(${e} * ${o})`:o*e:Array.isArray(o)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const n=o[t];return e>=0?n:"number"===typeof n?-n:`-${n}`}:"function"===typeof o?o:()=>{}}function NQe(e){return FQe(e,"spacing",8)}function LQe(e,t){return"string"===typeof t||null==t?t:e(t)}function UQe(e,t,n,r){if(!t.includes(n))return null;const o=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=LQe(t,n),e)),{})}(MQe(n),r);return EQe(e,e[n],o)}function GQe(e,t){const n=NQe(e.theme);return Object.keys(e).map((r=>UQe(e,t,r,n))).reduce(DQe,{})}function jQe(e){return GQe(e,RQe)}function zQe(e){return GQe(e,PQe)}function HQe(e){return GQe(e,OQe)}jQe.propTypes={},jQe.filterProps=RQe,zQe.propTypes={},zQe.filterProps=PQe,HQe.propTypes={},HQe.filterProps=OQe;function VQe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NQe({spacing:e});if(e.mui)return e;const n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?`${n}px`:n})).join(" ")};return n.mui=!0,n}const qQe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),o=e=>Object.keys(e).reduce(((t,n)=>r[n]?DQe(t,r[n](e)):t),{});return o.propTypes={},o.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),o};function YQe(e){return"number"!==typeof e?e:`${e}px solid`}function XQe(e,t){return SQe({prop:e,themeKey:"borders",transform:t})}const WQe=XQe("border",YQe),KQe=XQe("borderTop",YQe),JQe=XQe("borderRight",YQe),ZQe=XQe("borderBottom",YQe),$Qe=XQe("borderLeft",YQe),eMe=XQe("borderColor"),tMe=XQe("borderTopColor"),nMe=XQe("borderRightColor"),rMe=XQe("borderBottomColor"),oMe=XQe("borderLeftColor"),iMe=XQe("outline",YQe),aMe=XQe("outlineColor"),sMe=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=FQe(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:LQe(t,e)});return EQe(e,e.borderRadius,n)}return null};sMe.propTypes={},sMe.filterProps=["borderRadius"];qQe(WQe,KQe,JQe,ZQe,$Qe,eMe,tMe,nMe,rMe,oMe,sMe,iMe,aMe);const lMe=e=>{if(void 0!==e.gap&&null!==e.gap){const t=FQe(e.theme,"spacing",8),n=e=>({gap:LQe(t,e)});return EQe(e,e.gap,n)}return null};lMe.propTypes={},lMe.filterProps=["gap"];const cMe=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=FQe(e.theme,"spacing",8),n=e=>({columnGap:LQe(t,e)});return EQe(e,e.columnGap,n)}return null};cMe.propTypes={},cMe.filterProps=["columnGap"];const uMe=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=FQe(e.theme,"spacing",8),n=e=>({rowGap:LQe(t,e)});return EQe(e,e.rowGap,n)}return null};uMe.propTypes={},uMe.filterProps=["rowGap"];qQe(lMe,cMe,uMe,SQe({prop:"gridColumn"}),SQe({prop:"gridRow"}),SQe({prop:"gridAutoFlow"}),SQe({prop:"gridAutoColumns"}),SQe({prop:"gridAutoRows"}),SQe({prop:"gridTemplateColumns"}),SQe({prop:"gridTemplateRows"}),SQe({prop:"gridTemplateAreas"}),SQe({prop:"gridArea"}));function dMe(e,t){return"grey"===t?t:e}qQe(SQe({prop:"color",themeKey:"palette",transform:dMe}),SQe({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:dMe}),SQe({prop:"backgroundColor",themeKey:"palette",transform:dMe}));function AMe(e){return e<=1&&0!==e?100*e+"%":e}const fMe=SQe({prop:"width",transform:AMe}),pMe=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{const n=e.theme?.breakpoints?.values?.[t]||bQe[t];return n?"px"!==e.theme?.breakpoints?.unit?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:AMe(t)}};return EQe(e,e.maxWidth,t)}return null};pMe.filterProps=["maxWidth"];const hMe=SQe({prop:"minWidth",transform:AMe}),gMe=SQe({prop:"height",transform:AMe}),mMe=SQe({prop:"maxHeight",transform:AMe}),yMe=SQe({prop:"minHeight",transform:AMe}),vMe=(SQe({prop:"size",cssProperty:"width",transform:AMe}),SQe({prop:"size",cssProperty:"height",transform:AMe}),qQe(fMe,pMe,hMe,gMe,mMe,yMe,SQe({prop:"boxSizing"})),{border:{themeKey:"borders",transform:YQe},borderTop:{themeKey:"borders",transform:YQe},borderRight:{themeKey:"borders",transform:YQe},borderBottom:{themeKey:"borders",transform:YQe},borderLeft:{themeKey:"borders",transform:YQe},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:YQe},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:sMe},color:{themeKey:"palette",transform:dMe},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:dMe},backgroundColor:{themeKey:"palette",transform:dMe},p:{style:zQe},pt:{style:zQe},pr:{style:zQe},pb:{style:zQe},pl:{style:zQe},px:{style:zQe},py:{style:zQe},padding:{style:zQe},paddingTop:{style:zQe},paddingRight:{style:zQe},paddingBottom:{style:zQe},paddingLeft:{style:zQe},paddingX:{style:zQe},paddingY:{style:zQe},paddingInline:{style:zQe},paddingInlineStart:{style:zQe},paddingInlineEnd:{style:zQe},paddingBlock:{style:zQe},paddingBlockStart:{style:zQe},paddingBlockEnd:{style:zQe},m:{style:jQe},mt:{style:jQe},mr:{style:jQe},mb:{style:jQe},ml:{style:jQe},mx:{style:jQe},my:{style:jQe},margin:{style:jQe},marginTop:{style:jQe},marginRight:{style:jQe},marginBottom:{style:jQe},marginLeft:{style:jQe},marginX:{style:jQe},marginY:{style:jQe},marginInline:{style:jQe},marginInlineStart:{style:jQe},marginInlineEnd:{style:jQe},marginBlock:{style:jQe},marginBlockStart:{style:jQe},marginBlockEnd:{style:jQe},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:lMe},rowGap:{style:uMe},columnGap:{style:cMe},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:AMe},maxWidth:{style:pMe},minWidth:{transform:AMe},height:{transform:AMe},maxHeight:{transform:AMe},minHeight:{transform:AMe},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}}),bMe=vMe;const CMe=function(){function e(e,t,n,r){const o={[e]:t,theme:n},i=r[e];if(!i)return{[e]:t};const{cssProperty:a=e,themeKey:s,transform:l,style:c}=i;if(null==t)return null;if("typography"===s&&"inherit"===t)return{[e]:t};const u=wQe(n,s)||{};if(c)return c(o);return EQe(o,t,(t=>{let n=_Qe(u,l,t);return t===n&&"string"===typeof t&&(n=_Qe(u,l,`${e}${"default"===t?"":QTe(t)}`,t)),!1===a?n:{[a]:n}}))}return function t(n){const{sx:r,theme:o={}}=n||{};if(!r)return null;const i=o.unstable_sxConfig??bMe;function a(n){let r=n;if("function"===typeof n)r=n(o);else if("object"!==typeof n)return n;if(!r)return null;const a=xQe(o.breakpoints),s=Object.keys(a);let l=a;return Object.keys(r).forEach((n=>{const a=function(e,t){return"function"===typeof e?e(t):e}(r[n],o);if(null!==a&&void 0!==a)if("object"===typeof a)if(i[n])l=DQe(l,e(n,a,o,i));else{const e=EQe({theme:o},a,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),o=new Set(r);return t.every((e=>o.size===Object.keys(e).length))}(e,a)?l=DQe(l,e):l[n]=t({sx:a,theme:o})}else l=DQe(l,e(n,a,o,i))})),function(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter((e=>e.startsWith("@container"))).sort(((e,t)=>{const n=/min-width:\s*([0-9.]+)/;return+(e.match(n)?.[1]||0)-+(t.match(n)?.[1]||0)}));return n.length?n.reduce(((e,n)=>{const r=t[n];return delete e[n],e[n]=r,e}),{...t}):t}(o,BQe(s,l))}return Array.isArray(r)?r.map(a):a(r)}}();CMe.filterProps=["sx"];const IMe=CMe;function EMe(e,t){const n=this;if(n.vars){if(!n.colorSchemes?.[e]||"function"!==typeof n.getColorSchemeSelector)return{};let r=n.getColorSchemeSelector(e);return"&"===r?t:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:t})}return n.palette.mode===e?t:{}}const xMe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:r,shape:o={},...i}=e,a=function(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...o}=e,i=yQe(t),a=Object.keys(i);function s(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function l(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-r/100}${n})`}function c(e,o){const i=a.indexOf(o);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==i&&"number"===typeof t[a[i]]?t[a[i]]:o)-r/100}${n})`}return{keys:a,values:i,up:s,down:l,between:c,only:function(e){return a.indexOf(e)+1<a.length?c(e,a[a.indexOf(e)+1]):s(e)},not:function(e){const t=a.indexOf(e);return 0===t?s(a[1]):t===a.length-1?l(a[t]):c(e,a[a.indexOf(e)+1]).replace("@media","@media not all and")},unit:n,...o}}(t);let s=mQe({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:VQe(r),shape:{...vQe,...o}},i);s=function(e){const t=(e,t)=>e.replace("@media",t?`@container ${t}`:"@container");function n(n,r){n.up=function(){return t(e.breakpoints.up(...arguments),r)},n.down=function(){return t(e.breakpoints.down(...arguments),r)},n.between=function(){return t(e.breakpoints.between(...arguments),r)},n.only=function(){return t(e.breakpoints.only(...arguments),r)},n.not=function(){const n=t(e.breakpoints.not(...arguments),r);return n.includes("not all and")?n.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):n}}const r={},o=e=>(n(r,e),r);return n(o),{...e,containerQueries:o}}(s),s.applyStyles=EMe;for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];return s=c.reduce(((e,t)=>mQe(e,t)),s),s.unstable_sxConfig={...bMe,...i?.unstable_sxConfig},s.unstable_sx=function(e){return IMe({sx:e,theme:this})},s};function BMe(e){const{variants:t,...n}=e,r={variants:t,style:pQe(n),isProcessed:!0};return r.style===n||t&&t.forEach((e=>{"function"!==typeof e.style&&(e.style=pQe(e.style))})),r}const wMe=xMe();function _Me(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function SMe(e){return e?(t,n)=>n[e]:null}function DMe(e,t){const n="function"===typeof t?t(e):t;if(Array.isArray(n))return n.flatMap((t=>DMe(e,t)));if(Array.isArray(n?.variants)){let t;if(n.isProcessed)t=n.style;else{const{variants:e,...r}=n;t=r}return TMe(e,n.variants,[t])}return n?.isProcessed?n.style:n}function TMe(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e:for(let o=0;o<t.length;o+=1){const i=t[o];if("function"===typeof i.props){if(n??={...e,...e.ownerState,ownerState:e.ownerState},!i.props(n))continue}else for(const t in i.props)if(e[t]!==i.props[t]&&e.ownerState?.[t]!==i.props[t])continue e;"function"===typeof i.style?(n??={...e,...e.ownerState,ownerState:e.ownerState},r.push(i.style(n))):r.push(i.style)}return r}function kMe(e,t){}function QMe(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}const MMe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))};function RMe(e){return MMe(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function PMe(e){if(e.type)return e;if("#"===e.charAt(0))return PMe(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(kTe(9,e));let r,o=e.substring(t+1,e.length-1);if("color"===n){if(o=o.split(" "),r=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(kTe(10,r))}else o=o.split(",");return o=o.map((e=>parseFloat(e))),{type:n,values:o,colorSpace:r}}const OMe=(e,t)=>{try{return(e=>{const t=PMe(e);return t.values.slice(0,3).map(((e,n)=>t.type.includes("hsl")&&0!==n?`${e}%`:e)).join(" ")})(e)}catch(PF){return e}};function FMe(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=t.includes("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function NMe(e){e=PMe(e);const{values:t}=e,n=t[0],r=t[1]/100,o=t[2]/100,i=r*Math.min(o,1-o),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return o-i*Math.max(Math.min(t-3,9-t,1),-1)};let s="rgb";const l=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",l.push(t[3])),FMe({type:s,values:l})}function LMe(e){let t="hsl"===(e=PMe(e)).type||"hsla"===e.type?PMe(NMe(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function UMe(e,t){return e=PMe(e),t=RMe(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,FMe(e)}function GMe(e,t,n){try{return UMe(e,t)}catch(PF){return e}}function jMe(e,t){if(e=PMe(e),t=RMe(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return FMe(e)}function zMe(e,t,n){try{return jMe(e,t)}catch(PF){return e}}function HMe(e,t){if(e=PMe(e),t=RMe(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return FMe(e)}function VMe(e,t,n){try{return HMe(e,t)}catch(PF){return e}}function qMe(e,t,n){try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return LMe(e)>.5?jMe(e,t):HMe(e,t)}(e,t)}catch(PF){return e}}const YMe={black:"#000",white:"#fff"},XMe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},WMe={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},KMe={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},JMe={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},ZMe={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},$Me={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},eRe={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function tRe(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:YMe.white,default:YMe.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const nRe=tRe();function rRe(){return{text:{primary:YMe.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:YMe.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const oRe=rRe();function iRe(e,t,n,r){const o=r.light||r,i=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=HMe(e.main,o):"dark"===t&&(e.dark=jMe(e.main,i)))}function aRe(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2,...o}=e,i=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ZMe[200],light:ZMe[50],dark:ZMe[400]}:{main:ZMe[700],light:ZMe[400],dark:ZMe[800]}}(t),a=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:WMe[200],light:WMe[50],dark:WMe[400]}:{main:WMe[500],light:WMe[300],dark:WMe[700]}}(t),s=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:KMe[500],light:KMe[300],dark:KMe[700]}:{main:KMe[700],light:KMe[400],dark:KMe[800]}}(t),l=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:$Me[400],light:$Me[300],dark:$Me[700]}:{main:$Me[700],light:$Me[500],dark:$Me[900]}}(t),c=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:eRe[400],light:eRe[300],dark:eRe[700]}:{main:eRe[800],light:eRe[500],dark:eRe[900]}}(t),u=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:JMe[400],light:JMe[300],dark:JMe[700]}:{main:"#ed6c02",light:JMe[500],dark:JMe[900]}}(t);function d(e){const t=function(e,t){const n=LMe(e),r=LMe(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,oRe.text.primary)>=n?oRe.text.primary:nRe.text.primary;return t}const A=e=>{let{color:t,name:n,mainShade:o=500,lightShade:i=300,darkShade:a=700}=e;if(t={...t},!t.main&&t[o]&&(t.main=t[o]),!t.hasOwnProperty("main"))throw new Error(kTe(11,n?` (${n})`:"",o));if("string"!==typeof t.main)throw new Error(kTe(12,n?` (${n})`:"",JSON.stringify(t.main)));return iRe(t,"light",i,r),iRe(t,"dark",a,r),t.contrastText||(t.contrastText=d(t.main)),t};let f;"light"===t?f=tRe():"dark"===t&&(f=rRe());return mQe({common:{...YMe},mode:t,primary:A({color:i,name:"primary"}),secondary:A({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:A({color:s,name:"error"}),warning:A({color:u,name:"warning"}),info:A({color:l,name:"info"}),success:A({color:c,name:"success"}),grey:XMe,contrastThreshold:n,getContrastText:d,augmentColor:A,tonalOffset:r,...f},o)}function sRe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(!r.length)return"";const i=r[0];return"string"!==typeof i||i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, ${i}`:`, var(--${e?`${e}-`:""}${i}${t(...r.slice(1))})`}return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return`var(--${e?`${e}-`:""}${n}${t(...o)})`}}function lRe(e){const t={};return Object.entries(e).forEach((e=>{const[n,r]=e;"object"===typeof r&&(t[n]=`${r.fontStyle?`${r.fontStyle} `:""}${r.fontVariant?`${r.fontVariant} `:""}${r.fontWeight?`${r.fontWeight} `:""}${r.fontStretch?`${r.fontStretch} `:""}${r.fontSize||""}${r.lineHeight?`/${r.lineHeight} `:""}${r.fontFamily||""}`)})),t}const cRe=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=e;t.forEach(((e,i)=>{i===t.length-1?Array.isArray(o)?o[Number(e)]=n:o&&"object"===typeof o&&(o[e]=n):o&&"object"===typeof o&&(o[e]||(o[e]=r.includes(e)?[]:{}),o=o[e])}))},uRe=(e,t,n)=>{!function e(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.entries(r).forEach((r=>{let[a,s]=r;(!n||n&&!n([...o,a]))&&void 0!==s&&null!==s&&("object"===typeof s&&Object.keys(s).length>0?e(s,[...o,a],Array.isArray(s)?[...i,a]:i):t([...o,a],s,i))}))}(e)},dRe=(e,t)=>{if("number"===typeof t){if(["lineHeight","fontWeight","opacity","zIndex"].some((t=>e.includes(t))))return t;return e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`}return t};function ARe(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},o={},i={},a={};return uRe(e,((e,t,s)=>{if(("string"===typeof t||"number"===typeof t)&&(!r||!r(e,t))){const r=`--${n?`${n}-`:""}${e.join("-")}`,l=dRe(e,t);Object.assign(o,{[r]:l}),cRe(i,e,`var(${r})`,s),cRe(a,e,`var(${r}, ${l})`,s)}}),(e=>"vars"===e[0])),{css:o,vars:i,varsWithDefaults:a}}const fRe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getSelector:n=g,disableCssColorScheme:r,colorSchemeSelector:o}=t,{colorSchemes:i={},components:a,defaultColorScheme:s="light",...l}=e,{vars:c,css:u,varsWithDefaults:d}=ARe(l,t);let A=d;const f={},{[s]:p,...h}=i;if(Object.entries(h||{}).forEach((e=>{let[n,r]=e;const{vars:o,css:i,varsWithDefaults:a}=ARe(r,t);A=mQe(A,a),f[n]={css:i,vars:o}})),p){const{css:e,vars:n,varsWithDefaults:r}=ARe(p,t);A=mQe(A,r),f[s]={css:e,vars:n}}function g(t,n){let r=o;if("class"===o&&(r=".%s"),"data"===o&&(r="[data-%s]"),o?.startsWith("data-")&&!o.includes("%s")&&(r=`[${o}="%s"]`),t){if("media"===r){if(e.defaultColorScheme===t)return":root";const r=i[t]?.palette?.mode||t;return{[`@media (prefers-color-scheme: ${r})`]:{":root":n}}}if(r)return e.defaultColorScheme===t?`:root, ${r.replace("%s",String(t))}`:r.replace("%s",String(t))}return":root"}return{vars:A,generateThemeVars:()=>{let e={...c};return Object.entries(f).forEach((t=>{let[,{vars:n}]=t;e=mQe(e,n)})),e},generateStyleSheets:()=>{const t=[],o=e.defaultColorScheme||"light";function a(e,n){Object.keys(n).length&&t.push("string"===typeof e?{[e]:{...n}}:e)}a(n(void 0,{...u}),u);const{[o]:s,...l}=f;if(s){const{css:e}=s,t=i[o]?.palette?.mode,l=!r&&t?{colorScheme:t,...e}:{...e};a(n(o,{...l}),l)}return Object.entries(l).forEach((e=>{let[t,{css:o}]=e;const s=i[t]?.palette?.mode,l=!r&&s?{colorScheme:s,...o}:{...o};a(n(t,{...l}),l)})),t}}};function pRe(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function hRe(e){return Math.round(1e5*e)/1e5}const gRe={textTransform:"uppercase"},mRe='"Roboto", "Helvetica", "Arial", sans-serif';function yRe(e,t){const{fontFamily:n=mRe,fontSize:r=14,fontWeightLight:o=300,fontWeightRegular:i=400,fontWeightMedium:a=500,fontWeightBold:s=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...d}="function"===typeof t?t(e):t;const A=r/14,f=u||(e=>e/l*A+"rem"),p=(e,t,r,o,i)=>({fontFamily:n,fontWeight:e,fontSize:f(t),lineHeight:r,...n===mRe?{letterSpacing:`${hRe(o/t)}em`}:{},...i,...c}),h={h1:p(o,96,1.167,-1.5),h2:p(o,60,1.2,-.5),h3:p(i,48,1.167,0),h4:p(i,34,1.235,.25),h5:p(i,24,1.334,0),h6:p(a,20,1.6,.15),subtitle1:p(i,16,1.75,.15),subtitle2:p(a,14,1.57,.1),body1:p(i,16,1.5,.15),body2:p(i,14,1.43,.15),button:p(a,14,1.75,.4,gRe),caption:p(i,12,1.66,.4),overline:p(i,12,2.66,1,gRe),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return mQe({htmlFontSize:l,pxToRem:f,fontFamily:n,fontSize:r,fontWeightLight:o,fontWeightRegular:i,fontWeightMedium:a,fontWeightBold:s,...h},d,{clone:!1})}function vRe(){return[`${arguments.length<=0?void 0:arguments[0]}px ${arguments.length<=1?void 0:arguments[1]}px ${arguments.length<=2?void 0:arguments[2]}px ${arguments.length<=3?void 0:arguments[3]}px rgba(0,0,0,0.2)`,`${arguments.length<=4?void 0:arguments[4]}px ${arguments.length<=5?void 0:arguments[5]}px ${arguments.length<=6?void 0:arguments[6]}px ${arguments.length<=7?void 0:arguments[7]}px rgba(0,0,0,0.14)`,`${arguments.length<=8?void 0:arguments[8]}px ${arguments.length<=9?void 0:arguments[9]}px ${arguments.length<=10?void 0:arguments[10]}px ${arguments.length<=11?void 0:arguments[11]}px rgba(0,0,0,0.12)`].join(",")}const bRe=["none",vRe(0,2,1,-1,0,1,1,0,0,1,3,0),vRe(0,3,1,-2,0,2,2,0,0,1,5,0),vRe(0,3,3,-2,0,3,4,0,0,1,8,0),vRe(0,2,4,-1,0,4,5,0,0,1,10,0),vRe(0,3,5,-1,0,5,8,0,0,1,14,0),vRe(0,3,5,-1,0,6,10,0,0,1,18,0),vRe(0,4,5,-2,0,7,10,1,0,2,16,1),vRe(0,5,5,-3,0,8,10,1,0,3,14,2),vRe(0,5,6,-3,0,9,12,1,0,3,16,2),vRe(0,6,6,-3,0,10,14,1,0,4,18,3),vRe(0,6,7,-4,0,11,15,1,0,4,20,3),vRe(0,7,8,-4,0,12,17,2,0,5,22,4),vRe(0,7,8,-4,0,13,19,2,0,5,24,4),vRe(0,7,9,-4,0,14,21,2,0,5,26,4),vRe(0,8,9,-5,0,15,22,2,0,6,28,5),vRe(0,8,10,-5,0,16,24,2,0,6,30,5),vRe(0,8,11,-5,0,17,26,2,0,6,32,5),vRe(0,9,11,-5,0,18,28,2,0,7,34,6),vRe(0,9,12,-6,0,19,29,2,0,7,36,6),vRe(0,10,13,-6,0,20,31,3,0,8,38,7),vRe(0,10,13,-6,0,21,33,3,0,8,40,7),vRe(0,10,14,-6,0,22,35,3,0,8,42,7),vRe(0,11,14,-7,0,23,36,3,0,9,44,8),vRe(0,11,15,-7,0,24,38,3,0,9,46,8)],CRe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},IRe={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function ERe(e){return`${Math.round(e)}ms`}function xRe(e){if(!e)return 0;const t=e/36;return Math.min(Math.round(10*(4+15*t**.25+t/5)),3e3)}function BRe(e){const t={...CRe,...e.easing},n={...IRe,...e.duration};return{getAutoHeightDuration:xRe,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:o=n.standard,easing:i=t.easeInOut,delay:a=0,...s}=r;return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"===typeof o?o:ERe(o)} ${i} ${"string"===typeof a?a:ERe(a)}`)).join(",")},...e,easing:t,duration:n}}const wRe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function _Re(){const e={...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return function e(t){const n=Object.entries(t);for(let o=0;o<n.length;o++){const[i,a]=n[o];!hQe(r=a)&&"undefined"!==typeof r&&"string"!==typeof r&&"boolean"!==typeof r&&"number"!==typeof r&&!Array.isArray(r)||i.startsWith("unstable_")?delete t[i]:hQe(a)&&(t[i]={...a},e(t[i]))}var r}(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';\n\nconst theme = ${JSON.stringify(e,null,2)};\n\ntheme.breakpoints = createBreakpoints(theme.breakpoints || {});\ntheme.transitions = createTransitions(theme.transitions || {});\n\nexport default theme;`}function SRe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t,mixins:n={},spacing:r,palette:o={},transitions:i={},typography:a={},shape:s,...l}=e;if(e.vars)throw new Error(kTe(20));const c=aRe(o),u=xMe(e);let d=mQe(u,{mixins:pRe(u.breakpoints,n),palette:c,shadows:bRe.slice(),typography:yRe(c,a),transitions:BRe(i),zIndex:{...wRe}});d=mQe(d,l);for(var A=arguments.length,f=new Array(A>1?A-1:0),p=1;p<A;p++)f[p-1]=arguments[p];return d=f.reduce(((e,t)=>mQe(e,t)),d),d.unstable_sxConfig={...bMe,...l?.unstable_sxConfig},d.unstable_sx=function(e){return IMe({sx:e,theme:this})},d.toRuntimeSource=_Re,d}const DRe=SRe;function TRe(e){let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,Math.round(10*t)/1e3}const kRe=[...Array(25)].map(((e,t)=>{if(0===t)return"none";const n=TRe(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`}));function QRe(e){return{inputPlaceholder:"dark"===e?.5:.42,inputUnderline:"dark"===e?.7:.42,switchTrackDisabled:"dark"===e?.2:.12,switchTrack:"dark"===e?.3:.38}}function MRe(e){return"dark"===e?kRe:[]}function RRe(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||"palette"===e[0]&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const PRe=e=>[...[...Array(25)].map(((t,n)=>`--${e?`${e}-`:""}overlays-${n}`)),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],ORe=e=>(t,n)=>{const r=e.rootSelector||":root",o=e.colorSchemeSelector;let i=o;if("class"===o&&(i=".%s"),"data"===o&&(i="[data-%s]"),o?.startsWith("data-")&&!o.includes("%s")&&(i=`[${o}="%s"]`),e.defaultColorScheme===t){if("dark"===t){const o={};return PRe(e.cssVarPrefix).forEach((e=>{o[e]=n[e],delete n[e]})),"media"===i?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:o}}:i?{[i.replace("%s",t)]:o,[`${r}, ${i.replace("%s",t)}`]:n}:{[r]:{...n,...o}}}if(i&&"media"!==i)return`${r}, ${i.replace("%s",String(t))}`}else if(t){if("media"===i)return{[`@media (prefers-color-scheme: ${String(t)})`]:{[r]:n}};if(i)return i.replace("%s",String(t))}return r};function FRe(e,t,n){!e[t]&&n&&(e[t]=n)}function NRe(e){return"string"===typeof e&&e.startsWith("hsl")?NMe(e):e}function LRe(e,t){`${t}Channel`in e||(e[`${t}Channel`]=OMe(NRe(e[t]),`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().\nTo suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}const URe=e=>{try{return e()}catch(PF){}},GRe=function(){return sRe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mui")};function jRe(e,t,n,r){if(!t)return;t=!0===t?{}:t;const o="dark"===r?"dark":"light";if(!n)return void(e[r]=function(e){const{palette:t={mode:"light"},opacity:n,overlays:r,...o}=e,i=aRe(t);return{palette:i,opacity:{...QRe(i.mode),...n},overlays:r||MRe(i.mode),...o}}({...t,palette:{mode:o,...t?.palette}}));const{palette:i,...a}=DRe({...n,palette:{mode:o,...t?.palette}});return e[r]={...t,palette:i,opacity:{...QRe(o),...t?.opacity},overlays:t?.overlays||MRe(o)},a}function zRe(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...!0!==n&&n,palette:aRe({...!0===n?{}:n.palette,mode:t})})}const HRe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{palette:t,cssVariables:n=!1,colorSchemes:r=(t?void 0:{light:!0}),defaultColorScheme:o=t?.mode,...i}=e,a=o||"light",s=r?.[a],l={...r,...t?{[a]:{..."boolean"!==typeof s&&s,palette:t}}:void 0};for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];if(!1===n){if(!("colorSchemes"in e))return DRe(e,...u);let n=t;"palette"in e||l[a]&&(!0!==l[a]?n=l[a].palette:"dark"===a&&(n={mode:"dark"}));const r=DRe({...e,palette:n},...u);return r.defaultColorScheme=a,r.colorSchemes=l,"light"===r.palette.mode&&(r.colorSchemes.light={...!0!==l.light&&l.light,palette:r.palette},zRe(r,"dark",l.dark)),"dark"===r.palette.mode&&(r.colorSchemes.dark={...!0!==l.dark&&l.dark,palette:r.palette},zRe(r,"light",l.light)),r}return t||"light"in l||"light"!==a||(l.light=!0),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{colorSchemes:t={light:!0},defaultColorScheme:n,disableCssColorScheme:r=!1,cssVarPrefix:o="mui",shouldSkipGeneratingVar:i=RRe,colorSchemeSelector:a=(t.light&&t.dark?"media":void 0),rootSelector:s=":root",...l}=e,c=Object.keys(t)[0],u=n||(t.light&&"light"!==c?"light":c),d=GRe(o),{[u]:A,light:f,dark:p,...h}=t,g={...h};let m=A;if(("dark"===u&&!("dark"in t)||"light"===u&&!("light"in t))&&(m=!0),!m)throw new Error(kTe(21,u));const y=jRe(g,m,l,u);f&&!g.light&&jRe(g,f,void 0,"light"),p&&!g.dark&&jRe(g,p,void 0,"dark");let v={defaultColorScheme:u,...y,cssVarPrefix:o,colorSchemeSelector:a,rootSelector:s,getCssVar:d,colorSchemes:g,font:{...lRe(y.typography),...y.font},spacing:(b=l.spacing,"number"===typeof b?`${b}px`:"string"===typeof b||"function"===typeof b||Array.isArray(b)?b:"8px")};var b;Object.keys(v.colorSchemes).forEach((e=>{const t=v.colorSchemes[e].palette,n=e=>{const n=e.split("-"),r=n[1],o=n[2];return d(e,t[r][o])};if("light"===t.mode&&(FRe(t.common,"background","#fff"),FRe(t.common,"onBackground","#000")),"dark"===t.mode&&(FRe(t.common,"background","#000"),FRe(t.common,"onBackground","#fff")),r=t,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"].forEach((e=>{r[e]||(r[e]={})})),"light"===t.mode){FRe(t.Alert,"errorColor",zMe(t.error.light,.6)),FRe(t.Alert,"infoColor",zMe(t.info.light,.6)),FRe(t.Alert,"successColor",zMe(t.success.light,.6)),FRe(t.Alert,"warningColor",zMe(t.warning.light,.6)),FRe(t.Alert,"errorFilledBg",n("palette-error-main")),FRe(t.Alert,"infoFilledBg",n("palette-info-main")),FRe(t.Alert,"successFilledBg",n("palette-success-main")),FRe(t.Alert,"warningFilledBg",n("palette-warning-main")),FRe(t.Alert,"errorFilledColor",URe((()=>t.getContrastText(t.error.main)))),FRe(t.Alert,"infoFilledColor",URe((()=>t.getContrastText(t.info.main)))),FRe(t.Alert,"successFilledColor",URe((()=>t.getContrastText(t.success.main)))),FRe(t.Alert,"warningFilledColor",URe((()=>t.getContrastText(t.warning.main)))),FRe(t.Alert,"errorStandardBg",VMe(t.error.light,.9)),FRe(t.Alert,"infoStandardBg",VMe(t.info.light,.9)),FRe(t.Alert,"successStandardBg",VMe(t.success.light,.9)),FRe(t.Alert,"warningStandardBg",VMe(t.warning.light,.9)),FRe(t.Alert,"errorIconColor",n("palette-error-main")),FRe(t.Alert,"infoIconColor",n("palette-info-main")),FRe(t.Alert,"successIconColor",n("palette-success-main")),FRe(t.Alert,"warningIconColor",n("palette-warning-main")),FRe(t.AppBar,"defaultBg",n("palette-grey-100")),FRe(t.Avatar,"defaultBg",n("palette-grey-400")),FRe(t.Button,"inheritContainedBg",n("palette-grey-300")),FRe(t.Button,"inheritContainedHoverBg",n("palette-grey-A100")),FRe(t.Chip,"defaultBorder",n("palette-grey-400")),FRe(t.Chip,"defaultAvatarColor",n("palette-grey-700")),FRe(t.Chip,"defaultIconColor",n("palette-grey-700")),FRe(t.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),FRe(t.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),FRe(t.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),FRe(t.LinearProgress,"primaryBg",VMe(t.primary.main,.62)),FRe(t.LinearProgress,"secondaryBg",VMe(t.secondary.main,.62)),FRe(t.LinearProgress,"errorBg",VMe(t.error.main,.62)),FRe(t.LinearProgress,"infoBg",VMe(t.info.main,.62)),FRe(t.LinearProgress,"successBg",VMe(t.success.main,.62)),FRe(t.LinearProgress,"warningBg",VMe(t.warning.main,.62)),FRe(t.Skeleton,"bg",`rgba(${n("palette-text-primaryChannel")} / 0.11)`),FRe(t.Slider,"primaryTrack",VMe(t.primary.main,.62)),FRe(t.Slider,"secondaryTrack",VMe(t.secondary.main,.62)),FRe(t.Slider,"errorTrack",VMe(t.error.main,.62)),FRe(t.Slider,"infoTrack",VMe(t.info.main,.62)),FRe(t.Slider,"successTrack",VMe(t.success.main,.62)),FRe(t.Slider,"warningTrack",VMe(t.warning.main,.62));const e=qMe(t.background.default,.8);FRe(t.SnackbarContent,"bg",e),FRe(t.SnackbarContent,"color",URe((()=>t.getContrastText(e)))),FRe(t.SpeedDialAction,"fabHoverBg",qMe(t.background.paper,.15)),FRe(t.StepConnector,"border",n("palette-grey-400")),FRe(t.StepContent,"border",n("palette-grey-400")),FRe(t.Switch,"defaultColor",n("palette-common-white")),FRe(t.Switch,"defaultDisabledColor",n("palette-grey-100")),FRe(t.Switch,"primaryDisabledColor",VMe(t.primary.main,.62)),FRe(t.Switch,"secondaryDisabledColor",VMe(t.secondary.main,.62)),FRe(t.Switch,"errorDisabledColor",VMe(t.error.main,.62)),FRe(t.Switch,"infoDisabledColor",VMe(t.info.main,.62)),FRe(t.Switch,"successDisabledColor",VMe(t.success.main,.62)),FRe(t.Switch,"warningDisabledColor",VMe(t.warning.main,.62)),FRe(t.TableCell,"border",VMe(GMe(t.divider,1),.88)),FRe(t.Tooltip,"bg",GMe(t.grey[700],.92))}var r;if("dark"===t.mode){FRe(t.Alert,"errorColor",VMe(t.error.light,.6)),FRe(t.Alert,"infoColor",VMe(t.info.light,.6)),FRe(t.Alert,"successColor",VMe(t.success.light,.6)),FRe(t.Alert,"warningColor",VMe(t.warning.light,.6)),FRe(t.Alert,"errorFilledBg",n("palette-error-dark")),FRe(t.Alert,"infoFilledBg",n("palette-info-dark")),FRe(t.Alert,"successFilledBg",n("palette-success-dark")),FRe(t.Alert,"warningFilledBg",n("palette-warning-dark")),FRe(t.Alert,"errorFilledColor",URe((()=>t.getContrastText(t.error.dark)))),FRe(t.Alert,"infoFilledColor",URe((()=>t.getContrastText(t.info.dark)))),FRe(t.Alert,"successFilledColor",URe((()=>t.getContrastText(t.success.dark)))),FRe(t.Alert,"warningFilledColor",URe((()=>t.getContrastText(t.warning.dark)))),FRe(t.Alert,"errorStandardBg",zMe(t.error.light,.9)),FRe(t.Alert,"infoStandardBg",zMe(t.info.light,.9)),FRe(t.Alert,"successStandardBg",zMe(t.success.light,.9)),FRe(t.Alert,"warningStandardBg",zMe(t.warning.light,.9)),FRe(t.Alert,"errorIconColor",n("palette-error-main")),FRe(t.Alert,"infoIconColor",n("palette-info-main")),FRe(t.Alert,"successIconColor",n("palette-success-main")),FRe(t.Alert,"warningIconColor",n("palette-warning-main")),FRe(t.AppBar,"defaultBg",n("palette-grey-900")),FRe(t.AppBar,"darkBg",n("palette-background-paper")),FRe(t.AppBar,"darkColor",n("palette-text-primary")),FRe(t.Avatar,"defaultBg",n("palette-grey-600")),FRe(t.Button,"inheritContainedBg",n("palette-grey-800")),FRe(t.Button,"inheritContainedHoverBg",n("palette-grey-700")),FRe(t.Chip,"defaultBorder",n("palette-grey-700")),FRe(t.Chip,"defaultAvatarColor",n("palette-grey-300")),FRe(t.Chip,"defaultIconColor",n("palette-grey-300")),FRe(t.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),FRe(t.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),FRe(t.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),FRe(t.LinearProgress,"primaryBg",zMe(t.primary.main,.5)),FRe(t.LinearProgress,"secondaryBg",zMe(t.secondary.main,.5)),FRe(t.LinearProgress,"errorBg",zMe(t.error.main,.5)),FRe(t.LinearProgress,"infoBg",zMe(t.info.main,.5)),FRe(t.LinearProgress,"successBg",zMe(t.success.main,.5)),FRe(t.LinearProgress,"warningBg",zMe(t.warning.main,.5)),FRe(t.Skeleton,"bg",`rgba(${n("palette-text-primaryChannel")} / 0.13)`),FRe(t.Slider,"primaryTrack",zMe(t.primary.main,.5)),FRe(t.Slider,"secondaryTrack",zMe(t.secondary.main,.5)),FRe(t.Slider,"errorTrack",zMe(t.error.main,.5)),FRe(t.Slider,"infoTrack",zMe(t.info.main,.5)),FRe(t.Slider,"successTrack",zMe(t.success.main,.5)),FRe(t.Slider,"warningTrack",zMe(t.warning.main,.5));const e=qMe(t.background.default,.98);FRe(t.SnackbarContent,"bg",e),FRe(t.SnackbarContent,"color",URe((()=>t.getContrastText(e)))),FRe(t.SpeedDialAction,"fabHoverBg",qMe(t.background.paper,.15)),FRe(t.StepConnector,"border",n("palette-grey-600")),FRe(t.StepContent,"border",n("palette-grey-600")),FRe(t.Switch,"defaultColor",n("palette-grey-300")),FRe(t.Switch,"defaultDisabledColor",n("palette-grey-600")),FRe(t.Switch,"primaryDisabledColor",zMe(t.primary.main,.55)),FRe(t.Switch,"secondaryDisabledColor",zMe(t.secondary.main,.55)),FRe(t.Switch,"errorDisabledColor",zMe(t.error.main,.55)),FRe(t.Switch,"infoDisabledColor",zMe(t.info.main,.55)),FRe(t.Switch,"successDisabledColor",zMe(t.success.main,.55)),FRe(t.Switch,"warningDisabledColor",zMe(t.warning.main,.55)),FRe(t.TableCell,"border",zMe(GMe(t.divider,1),.68)),FRe(t.Tooltip,"bg",GMe(t.grey[700],.92))}LRe(t.background,"default"),LRe(t.background,"paper"),LRe(t.common,"background"),LRe(t.common,"onBackground"),LRe(t,"divider"),Object.keys(t).forEach((e=>{const n=t[e];"tonalOffset"!==e&&n&&"object"===typeof n&&(n.main&&FRe(t[e],"mainChannel",OMe(NRe(n.main))),n.light&&FRe(t[e],"lightChannel",OMe(NRe(n.light))),n.dark&&FRe(t[e],"darkChannel",OMe(NRe(n.dark))),n.contrastText&&FRe(t[e],"contrastTextChannel",OMe(NRe(n.contrastText))),"text"===e&&(LRe(t[e],"primary"),LRe(t[e],"secondary")),"action"===e&&(n.active&&LRe(t[e],"active"),n.selected&&LRe(t[e],"selected")))}))}));for(var C=arguments.length,I=new Array(C>1?C-1:0),E=1;E<C;E++)I[E-1]=arguments[E];v=I.reduce(((e,t)=>mQe(e,t)),v);const x={prefix:o,disableCssColorScheme:r,shouldSkipGeneratingVar:i,getSelector:ORe(v)},{vars:B,generateThemeVars:w,generateStyleSheets:_}=fRe(v,x);return v.vars=B,Object.entries(v.colorSchemes[v.defaultColorScheme]).forEach((e=>{let[t,n]=e;v[t]=n})),v.generateThemeVars=w,v.generateStyleSheets=_,v.generateSpacing=function(){return VQe(l.spacing,NQe(this))},v.getColorSchemeSelector=function(e){return function(t){return"media"===e?`@media (prefers-color-scheme: ${t})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${t}"] &`:"class"===e?`.${t} &`:"data"===e?`[data-${t}] &`:`${e.replace("%s",t)} &`:"&"}}(a),v.spacing=v.generateSpacing(),v.shouldSkipGeneratingVar=i,v.unstable_sxConfig={...bMe,...l?.unstable_sxConfig},v.unstable_sx=function(e){return IMe({sx:e,theme:this})},v.toRuntimeSource=_Re,v}({...i,colorSchemes:l,defaultColorScheme:a,..."boolean"!==typeof n&&n},...u)}(),VRe=HRe,qRe="$$material";const YRe=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},XRe=e=>YRe(e)&&"classes"!==e,WRe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=wMe,rootShouldForwardProp:r=_Me,slotShouldForwardProp:o=_Me}=e;function i(e){!function(e,t,n){e.theme=function(e){for(const t in e)return!1;return!0}(e.theme)?n:e.theme[t]||e.theme}(e,t,n)}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(e=>e.filter((e=>e!==IMe))));const{name:n,slot:a,skipVariantsResolver:s,skipSx:l,overridesResolver:c=SMe(QMe(a)),...u}=t,d=void 0!==s?s:a&&"Root"!==a&&"root"!==a||!1,A=l||!1;let f=_Me;"Root"===a||"root"===a?f=r:a?f=o:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(f=void 0);const p=function(e,t){return AQe(e,t)}(e,{shouldForwardProp:f,label:kMe(n,a),...u}),h=e=>{if("function"===typeof e&&e.__emotion_real!==e)return function(t){return DMe(t,e)};if(hQe(e)){const t=BMe(e);return t.variants?function(e){return DMe(e,t)}:t.style}return e},g=function(){const t=[];for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];const s=o.map(h),l=[];if(t.push(i),n&&c&&l.push((function(e){const t=e.theme,r=t.components?.[n]?.styleOverrides;if(!r)return null;const o={};for(const n in r)o[n]=DMe(e,r[n]);return c(e,o)})),n&&!d&&l.push((function(e){const t=e.theme,r=t?.components?.[n]?.variants;return r?TMe(e,r):null})),A||l.push(IMe),Array.isArray(s[0])){const e=s.shift(),n=new Array(t.length).fill(""),r=new Array(l.length).fill("");let o;o=[...n,...e,...r],o.raw=[...n,...e.raw,...r],t.unshift(o)}const u=[...t,...s,...l],f=p(...u);return e.muiName&&(f.muiName=e.muiName),f};return p.withConfig&&(g.withConfig=p.withConfig),g}}({themeId:qRe,defaultTheme:VRe,rootShouldForwardProp:XRe}),KRe=WRe,JRe={theme:void 0};const ZRe=function(e){let t,n;return function(r){let o=t;return void 0!==o&&r.theme===n||(JRe.theme=r.theme,o=BMe(e(JRe)),t=o,n=r.theme),o}},$Re=ZRe;function ePe(e,t){const n={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const o=r;if("components"===o||"slots"===o)n[o]={...e[o],...n[o]};else if("componentsProps"===o||"slotProps"===o){const r=e[o],i=t[o];if(i)if(r){n[o]={...i};for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){const t=e;n[o][t]=ePe(r[t],i[t])}}else n[o]=i;else n[o]=r||{}}else void 0===n[o]&&(n[o]=e[o])}return n}const tPe=F.createContext(void 0);function nPe(e){let{props:t,name:n}=e;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const o=t.components[n];return o.defaultProps?ePe(o.defaultProps,r):o.styleOverrides||o.variants?r:ePe(o,r)}({props:t,name:n,theme:{components:F.useContext(tPe)}})}function rPe(e){return nPe(e)}const oPe=e=>e,iPe=(()=>{let e=oPe;return{configure(t){e=t},generate:t=>e(t),reset(){e=oPe}}})(),aPe=iPe,sPe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function lPe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r=sPe[t];return r?`${n}-${r}`:`${aPe.generate(e)}-${t}`}function cPe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return t.forEach((t=>{r[t]=lPe(e,t,n)})),r}function uPe(e){return lPe("MuiSvgIcon",e)}cPe("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const dPe=KRe("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${MTe(n.color)}`],t[`fontSize${MTe(n.fontSize)}`]]}})($Re((e=>{let{theme:t}=e;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter((e=>{let[,t]=e;return t&&t.main})).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars??t).palette?.[n]?.main}}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}}))),APe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiSvgIcon"}),{children:r,className:o,color:i="inherit",component:a="svg",fontSize:s="medium",htmlColor:l,inheritViewBox:c=!1,titleAccess:u,viewBox:d="0 0 24 24",...A}=n,f=F.isValidElement(r)&&"svg"===r.type,p={...n,color:i,component:a,fontSize:s,instanceFontSize:e.fontSize,inheritViewBox:c,viewBox:d,hasSvgAsChild:f},h={};c||(h.viewBox=d);const g=(e=>{const{color:t,fontSize:n,classes:r}=e;return TTe({root:["root","inherit"!==t&&`color${MTe(t)}`,`fontSize${MTe(n)}`]},uPe,r)})(p);return(0,ct.jsxs)(dPe,{as:a,className:DTe(g.root,o),focusable:"false",color:l,"aria-hidden":!u||void 0,role:u?"img":void 0,ref:t,...h,...A,...f&&r.props,ownerState:p,children:[f?r.props.children:r,u?(0,ct.jsx)("title",{children:u}):null]})}));APe&&(APe.muiName="SvgIcon");const fPe=APe;function pPe(e,t){function n(n,r){return(0,ct.jsx)(fPe,{"data-testid":`${t}Icon`,ref:r,...n,children:e})}return n.muiName=fPe.muiName,F.memo(F.forwardRef(n))}const hPe=pPe((0,ct.jsx)("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2m-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"DragIndicator"),gPe=(0,F.createContext)(),mPe=e=>{let{children:t}=e;const[n,r]=(0,F.useState)(null);return(0,ct.jsx)(gPe.Provider,{value:{activeButton:n,setActiveButton:r},children:t})},yPe={};function vPe(e,t){const n=F.useRef(yPe);return n.current===yPe&&(n.current=e(t)),n}const bPe=[];class CPe{static create(){return new CPe}currentId=null;start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function IPe(){const e=vPe(CPe.create).current;var t;return t=e.disposeEffect,F.useEffect(t,bPe),e}const EPe=F.createContext();const xPe=()=>F.useContext(EPe)??!1;function BPe(e){try{return e.matches(":focus-visible")}catch(PF){0}return!1}function wPe(e){return parseInt(F.version,10)>=19?e?.props?.ref||null:e?.ref||null}const _Pe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=F.useContext(oQe);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n},SPe=xMe();const DPe=function(){return _Pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:SPe)};function TPe(){const e=DPe(VRe);return e[qRe]||e}function kPe(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function QPe(e,t){return QPe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},QPe(e,t)}function MPe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,QPe(e,t)}const RPe=!1,PPe=F.createContext(null);var OPe="unmounted",FPe="exited",NPe="entering",LPe="entered",UPe="exiting",GPe=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var o,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(o=FPe,r.appearStatus=NPe):o=LPe:o=t.unmountOnExit||t.mountOnEnter?OPe:FPe,r.state={status:o},r.nextCallback=null,r}MPe(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===OPe?{status:FPe}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==NPe&&n!==LPe&&(t=NPe):n!==NPe&&n!==LPe||(t=UPe)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===NPe){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:U.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===FPe&&this.setState({status:OPe})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[U.findDOMNode(this),r],i=o[0],a=o[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||RPe?this.safeSetState({status:LPe},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,a),this.safeSetState({status:NPe},(function(){t.props.onEntering(i,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:LPe},(function(){t.props.onEntered(i,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:U.findDOMNode(this);t&&!RPe?(this.props.onExit(r),this.safeSetState({status:UPe},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:FPe},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:FPe},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:U.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=o[0],a=o[1];this.props.addEndListener(i,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===OPe)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,kPe(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return F.createElement(PPe.Provider,{value:null},"function"===typeof n?n(e,r):F.cloneElement(F.Children.only(n),r))},t}(F.Component);function jPe(){}GPe.contextType=PPe,GPe.propTypes={},GPe.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:jPe,onEntering:jPe,onEntered:jPe,onExit:jPe,onExiting:jPe,onExited:jPe},GPe.UNMOUNTED=OPe,GPe.EXITED=FPe,GPe.ENTERING=NPe,GPe.ENTERED=LPe,GPe.EXITING=UPe;const zPe=GPe,HPe=e=>e.scrollTop;function VPe(e,t){const{timeout:n,easing:r,style:o={}}=e;return{duration:o.transitionDuration??("number"===typeof n?n:n[t.mode]||0),easing:o.transitionTimingFunction??("object"===typeof r?r[t.mode]:r),delay:o.transitionDelay}}function qPe(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function YPe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return F.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{qPe(t,e)}))}),t)}const XPe=YPe;function WPe(e){return`scale(${e}, ${e**2})`}const KPe={entering:{opacity:1,transform:WPe(1)},entered:{opacity:1,transform:"none"}},JPe="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),ZPe=F.forwardRef((function(e,t){const{addEndListener:n,appear:r=!0,children:o,easing:i,in:a,onEnter:s,onEntered:l,onEntering:c,onExit:u,onExited:d,onExiting:A,style:f,timeout:p="auto",TransitionComponent:h=zPe,...g}=e,m=IPe(),y=F.useRef(),v=TPe(),b=F.useRef(null),C=XPe(b,wPe(o),t),I=e=>t=>{if(e){const n=b.current;void 0===t?e(n):e(n,t)}},E=I(c),x=I(((e,t)=>{HPe(e);const{duration:n,delay:r,easing:o}=VPe({style:f,timeout:p,easing:i},{mode:"enter"});let a;"auto"===p?(a=v.transitions.getAutoHeightDuration(e.clientHeight),y.current=a):a=n,e.style.transition=[v.transitions.create("opacity",{duration:a,delay:r}),v.transitions.create("transform",{duration:JPe?a:.666*a,delay:r,easing:o})].join(","),s&&s(e,t)})),B=I(l),w=I(A),_=I((e=>{const{duration:t,delay:n,easing:r}=VPe({style:f,timeout:p,easing:i},{mode:"exit"});let o;"auto"===p?(o=v.transitions.getAutoHeightDuration(e.clientHeight),y.current=o):o=t,e.style.transition=[v.transitions.create("opacity",{duration:o,delay:n}),v.transitions.create("transform",{duration:JPe?o:.666*o,delay:JPe?n:n||.333*o,easing:r})].join(","),e.style.opacity=0,e.style.transform=WPe(.75),u&&u(e)})),S=I(d);return(0,ct.jsx)(h,{appear:r,in:a,nodeRef:b,onEnter:x,onEntered:B,onEntering:E,onExit:_,onExited:S,onExiting:w,addEndListener:e=>{"auto"===p&&m.start(y.current||0,e),n&&n(b.current,e)},timeout:"auto"===p?null:p,...g,children:(e,t)=>F.cloneElement(o,{style:{opacity:0,transform:WPe(.75),visibility:"exited"!==e||a?void 0:"hidden",...KPe[e],...f,...o.props.style},ref:C,...t})})}));ZPe&&(ZPe.muiSupportAuto=!0);const $Pe=ZPe,eOe="undefined"!==typeof window?F.useLayoutEffect:F.useEffect;function tOe(e){return e&&e.ownerDocument||document}function nOe(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function rOe(e){return e instanceof nOe(e).Element||e instanceof Element}function oOe(e){return e instanceof nOe(e).HTMLElement||e instanceof HTMLElement}function iOe(e){return"undefined"!==typeof ShadowRoot&&(e instanceof nOe(e).ShadowRoot||e instanceof ShadowRoot)}var aOe=Math.max,sOe=Math.min,lOe=Math.round;function cOe(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function uOe(){return!/^((?!chrome|android).)*safari/i.test(cOe())}function dOe(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),o=1,i=1;t&&oOe(e)&&(o=e.offsetWidth>0&&lOe(r.width)/e.offsetWidth||1,i=e.offsetHeight>0&&lOe(r.height)/e.offsetHeight||1);var a=(rOe(e)?nOe(e):window).visualViewport,s=!uOe()&&n,l=(r.left+(s&&a?a.offsetLeft:0))/o,c=(r.top+(s&&a?a.offsetTop:0))/i,u=r.width/o,d=r.height/i;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function AOe(e){var t=nOe(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function fOe(e){return e?(e.nodeName||"").toLowerCase():null}function pOe(e){return((rOe(e)?e.ownerDocument:e.document)||window.document).documentElement}function hOe(e){return dOe(pOe(e)).left+AOe(e).scrollLeft}function gOe(e){return nOe(e).getComputedStyle(e)}function mOe(e){var t=gOe(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function yOe(e,t,n){void 0===n&&(n=!1);var r=oOe(t),o=oOe(t)&&function(e){var t=e.getBoundingClientRect(),n=lOe(t.width)/e.offsetWidth||1,r=lOe(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),i=pOe(t),a=dOe(e,o,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==fOe(t)||mOe(i))&&(s=function(e){return e!==nOe(e)&&oOe(e)?function(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}(e):AOe(e)}(t)),oOe(t)?((l=dOe(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):i&&(l.x=hOe(i))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function vOe(e){var t=dOe(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function bOe(e){return"html"===fOe(e)?e:e.assignedSlot||e.parentNode||(iOe(e)?e.host:null)||pOe(e)}function COe(e){return["html","body","#document"].indexOf(fOe(e))>=0?e.ownerDocument.body:oOe(e)&&mOe(e)?e:COe(bOe(e))}function IOe(e,t){var n;void 0===t&&(t=[]);var r=COe(e),o=r===(null==(n=e.ownerDocument)?void 0:n.body),i=nOe(r),a=o?[i].concat(i.visualViewport||[],mOe(r)?r:[]):r,s=t.concat(a);return o?s:s.concat(IOe(bOe(a)))}function EOe(e){return["table","td","th"].indexOf(fOe(e))>=0}function xOe(e){return oOe(e)&&"fixed"!==gOe(e).position?e.offsetParent:null}function BOe(e){for(var t=nOe(e),n=xOe(e);n&&EOe(n)&&"static"===gOe(n).position;)n=xOe(n);return n&&("html"===fOe(n)||"body"===fOe(n)&&"static"===gOe(n).position)?t:n||function(e){var t=/firefox/i.test(cOe());if(/Trident/i.test(cOe())&&oOe(e)&&"fixed"===gOe(e).position)return null;var n=bOe(e);for(iOe(n)&&(n=n.host);oOe(n)&&["html","body"].indexOf(fOe(n))<0;){var r=gOe(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var wOe="top",_Oe="bottom",SOe="right",DOe="left",TOe="auto",kOe=[wOe,_Oe,SOe,DOe],QOe="start",MOe="end",ROe="clippingParents",POe="viewport",OOe="popper",FOe="reference",NOe=kOe.reduce((function(e,t){return e.concat([t+"-"+QOe,t+"-"+MOe])}),[]),LOe=[].concat(kOe,[TOe]).reduce((function(e,t){return e.concat([t,t+"-"+QOe,t+"-"+MOe])}),[]),UOe=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function GOe(e){var t=new Map,n=new Set,r=[];function o(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&o(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||o(e)})),r}function jOe(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var zOe={placement:"bottom",modifiers:[],strategy:"absolute"};function HOe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function VOe(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,o=t.defaultOptions,i=void 0===o?zOe:o;return function(e,t,n){void 0===n&&(n=i);var o={placement:"bottom",orderedModifiers:[],options:Object.assign({},zOe,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],s=!1,l={state:o,setOptions:function(n){var s="function"===typeof n?n(o.options):n;c(),o.options=Object.assign({},i,o.options,s),o.scrollParents={reference:rOe(e)?IOe(e):e.contextElement?IOe(e.contextElement):[],popper:IOe(t)};var u=function(e){var t=GOe(e);return UOe.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,o.options.modifiers)));return o.orderedModifiers=u.filter((function(e){return e.enabled})),o.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"===typeof i){var s=i({state:o,name:t,instance:l,options:r}),c=function(){};a.push(s||c)}})),l.update()},forceUpdate:function(){if(!s){var e=o.elements,t=e.reference,n=e.popper;if(HOe(t,n)){o.rects={reference:yOe(t,BOe(n),"fixed"===o.options.strategy),popper:vOe(n)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach((function(e){return o.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<o.orderedModifiers.length;r++)if(!0!==o.reset){var i=o.orderedModifiers[r],a=i.fn,c=i.options,u=void 0===c?{}:c,d=i.name;"function"===typeof a&&(o=a({state:o,options:u,name:d,instance:l})||o)}else o.reset=!1,r=-1}}},update:jOe((function(){return new Promise((function(e){l.forceUpdate(),e(o)}))})),destroy:function(){c(),s=!0}};if(!HOe(e,t))return l;function c(){a.forEach((function(e){return e()})),a=[]}return l.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var qOe={passive:!0};function YOe(e){return e.split("-")[0]}function XOe(e){return e.split("-")[1]}function WOe(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function KOe(e){var t,n=e.reference,r=e.element,o=e.placement,i=o?YOe(o):null,a=o?XOe(o):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(i){case wOe:t={x:s,y:n.y-r.height};break;case _Oe:t={x:s,y:n.y+n.height};break;case SOe:t={x:n.x+n.width,y:l};break;case DOe:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=i?WOe(i):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case QOe:t[c]=t[c]-(n[u]/2-r[u]/2);break;case MOe:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var JOe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ZOe(e){var t,n=e.popper,r=e.popperRect,o=e.placement,i=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,A=a.x,f=void 0===A?0:A,p=a.y,h=void 0===p?0:p,g="function"===typeof u?u({x:f,y:h}):{x:f,y:h};f=g.x,h=g.y;var m=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),v=DOe,b=wOe,C=window;if(c){var I=BOe(n),E="clientHeight",x="clientWidth";if(I===nOe(n)&&"static"!==gOe(I=pOe(n)).position&&"absolute"===s&&(E="scrollHeight",x="scrollWidth"),o===wOe||(o===DOe||o===SOe)&&i===MOe)b=_Oe,h-=(d&&I===C&&C.visualViewport?C.visualViewport.height:I[E])-r.height,h*=l?1:-1;if(o===DOe||(o===wOe||o===_Oe)&&i===MOe)v=SOe,f-=(d&&I===C&&C.visualViewport?C.visualViewport.width:I[x])-r.width,f*=l?1:-1}var B,w=Object.assign({position:s},c&&JOe),_=!0===u?function(e,t){var n=e.x,r=e.y,o=t.devicePixelRatio||1;return{x:lOe(n*o)/o||0,y:lOe(r*o)/o||0}}({x:f,y:h},nOe(n)):{x:f,y:h};return f=_.x,h=_.y,l?Object.assign({},w,((B={})[b]=y?"0":"",B[v]=m?"0":"",B.transform=(C.devicePixelRatio||1)<=1?"translate("+f+"px, "+h+"px)":"translate3d("+f+"px, "+h+"px, 0)",B)):Object.assign({},w,((t={})[b]=y?h+"px":"",t[v]=m?f+"px":"",t.transform="",t))}const $Oe={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},o=t.elements[e];oOe(o)&&fOe(o)&&(Object.assign(o.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],o=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});oOe(r)&&fOe(r)&&(Object.assign(r.style,i),Object.keys(o).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};const eFe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.offset,i=void 0===o?[0,0]:o,a=LOe.reduce((function(e,n){return e[n]=function(e,t,n){var r=YOe(e),o=[DOe,wOe].indexOf(r)>=0?-1:1,i="function"===typeof n?n(Object.assign({},t,{placement:e})):n,a=i[0],s=i[1];return a=a||0,s=(s||0)*o,[DOe,SOe].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,i),e}),{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}};var tFe={left:"right",right:"left",bottom:"top",top:"bottom"};function nFe(e){return e.replace(/left|right|bottom|top/g,(function(e){return tFe[e]}))}var rFe={start:"end",end:"start"};function oFe(e){return e.replace(/start|end/g,(function(e){return rFe[e]}))}function iFe(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&iOe(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function aFe(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function sFe(e,t,n){return t===POe?aFe(function(e,t){var n=nOe(e),r=pOe(e),o=n.visualViewport,i=r.clientWidth,a=r.clientHeight,s=0,l=0;if(o){i=o.width,a=o.height;var c=uOe();(c||!c&&"fixed"===t)&&(s=o.offsetLeft,l=o.offsetTop)}return{width:i,height:a,x:s+hOe(e),y:l}}(e,n)):rOe(t)?function(e,t){var n=dOe(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):aFe(function(e){var t,n=pOe(e),r=AOe(e),o=null==(t=e.ownerDocument)?void 0:t.body,i=aOe(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=aOe(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-r.scrollLeft+hOe(e),l=-r.scrollTop;return"rtl"===gOe(o||n).direction&&(s+=aOe(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:a,x:s,y:l}}(pOe(e)))}function lFe(e,t,n,r){var o="clippingParents"===t?function(e){var t=IOe(bOe(e)),n=["absolute","fixed"].indexOf(gOe(e).position)>=0&&oOe(e)?BOe(e):e;return rOe(n)?t.filter((function(e){return rOe(e)&&iFe(e,n)&&"body"!==fOe(e)})):[]}(e):[].concat(t),i=[].concat(o,[n]),a=i[0],s=i.reduce((function(t,n){var o=sFe(e,n,r);return t.top=aOe(o.top,t.top),t.right=sOe(o.right,t.right),t.bottom=sOe(o.bottom,t.bottom),t.left=aOe(o.left,t.left),t}),sFe(e,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function cFe(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function uFe(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function dFe(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=void 0===r?e.placement:r,i=n.strategy,a=void 0===i?e.strategy:i,s=n.boundary,l=void 0===s?ROe:s,c=n.rootBoundary,u=void 0===c?POe:c,d=n.elementContext,A=void 0===d?OOe:d,f=n.altBoundary,p=void 0!==f&&f,h=n.padding,g=void 0===h?0:h,m=cFe("number"!==typeof g?g:uFe(g,kOe)),y=A===OOe?FOe:OOe,v=e.rects.popper,b=e.elements[p?y:A],C=lFe(rOe(b)?b:b.contextElement||pOe(e.elements.popper),l,u,a),I=dOe(e.elements.reference),E=KOe({reference:I,element:v,strategy:"absolute",placement:o}),x=aFe(Object.assign({},v,E)),B=A===OOe?x:I,w={top:C.top-B.top+m.top,bottom:B.bottom-C.bottom+m.bottom,left:C.left-B.left+m.left,right:B.right-C.right+m.right},_=e.modifiersData.offset;if(A===OOe&&_){var S=_[o];Object.keys(w).forEach((function(e){var t=[SOe,_Oe].indexOf(e)>=0?1:-1,n=[wOe,_Oe].indexOf(e)>=0?"y":"x";w[e]+=S[n]*t}))}return w}const AFe={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,i=void 0===o||o,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,A=n.altBoundary,f=n.flipVariations,p=void 0===f||f,h=n.allowedAutoPlacements,g=t.options.placement,m=YOe(g),y=l||(m===g||!p?[nFe(g)]:function(e){if(YOe(e)===TOe)return[];var t=nFe(e);return[oFe(e),t,oFe(t)]}(g)),v=[g].concat(y).reduce((function(e,n){return e.concat(YOe(n)===TOe?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=n.boundary,i=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?LOe:l,u=XOe(r),d=u?s?NOe:NOe.filter((function(e){return XOe(e)===u})):kOe,A=d.filter((function(e){return c.indexOf(e)>=0}));0===A.length&&(A=d);var f=A.reduce((function(t,n){return t[n]=dFe(e,{placement:n,boundary:o,rootBoundary:i,padding:a})[YOe(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:h}):n)}),[]),b=t.rects.reference,C=t.rects.popper,I=new Map,E=!0,x=v[0],B=0;B<v.length;B++){var w=v[B],_=YOe(w),S=XOe(w)===QOe,D=[wOe,_Oe].indexOf(_)>=0,T=D?"width":"height",k=dFe(t,{placement:w,boundary:u,rootBoundary:d,altBoundary:A,padding:c}),Q=D?S?SOe:DOe:S?_Oe:wOe;b[T]>C[T]&&(Q=nFe(Q));var M=nFe(Q),R=[];if(i&&R.push(k[_]<=0),s&&R.push(k[Q]<=0,k[M]<=0),R.every((function(e){return e}))){x=w,E=!1;break}I.set(w,R)}if(E)for(var P=function(e){var t=v.find((function(t){var n=I.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return x=t,"break"},O=p?3:1;O>0;O--){if("break"===P(O))break}t.placement!==x&&(t.modifiersData[r]._skip=!0,t.placement=x,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function fFe(e,t,n){return aOe(e,sOe(t,n))}const pFe={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,i=void 0===o||o,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,A=n.tether,f=void 0===A||A,p=n.tetherOffset,h=void 0===p?0:p,g=dFe(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),m=YOe(t.placement),y=XOe(t.placement),v=!y,b=WOe(m),C=function(e){return"x"===e?"y":"x"}(b),I=t.modifiersData.popperOffsets,E=t.rects.reference,x=t.rects.popper,B="function"===typeof h?h(Object.assign({},t.rects,{placement:t.placement})):h,w="number"===typeof B?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),_=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,S={x:0,y:0};if(I){if(i){var D,T="y"===b?wOe:DOe,k="y"===b?_Oe:SOe,Q="y"===b?"height":"width",M=I[b],R=M+g[T],P=M-g[k],O=f?-x[Q]/2:0,F=y===QOe?E[Q]:x[Q],N=y===QOe?-x[Q]:-E[Q],L=t.elements.arrow,U=f&&L?vOe(L):{width:0,height:0},G=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},j=G[T],z=G[k],H=fFe(0,E[Q],U[Q]),V=v?E[Q]/2-O-H-j-w.mainAxis:F-H-j-w.mainAxis,q=v?-E[Q]/2+O+H+z+w.mainAxis:N+H+z+w.mainAxis,Y=t.elements.arrow&&BOe(t.elements.arrow),X=Y?"y"===b?Y.clientTop||0:Y.clientLeft||0:0,W=null!=(D=null==_?void 0:_[b])?D:0,K=M+q-W,J=fFe(f?sOe(R,M+V-W-X):R,M,f?aOe(P,K):P);I[b]=J,S[b]=J-M}if(s){var Z,$="x"===b?wOe:DOe,ee="x"===b?_Oe:SOe,te=I[C],ne="y"===C?"height":"width",re=te+g[$],oe=te-g[ee],ie=-1!==[wOe,DOe].indexOf(m),ae=null!=(Z=null==_?void 0:_[C])?Z:0,se=ie?re:te-E[ne]-x[ne]-ae+w.altAxis,le=ie?te+E[ne]+x[ne]-ae-w.altAxis:oe,ce=f&&ie?function(e,t,n){var r=fFe(e,t,n);return r>n?n:r}(se,te,le):fFe(f?se:re,te,f?le:oe);I[C]=ce,S[C]=ce-te}t.modifiersData[r]=S}},requiresIfExists:["offset"]};const hFe={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,o=e.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,s=YOe(n.placement),l=WOe(s),c=[DOe,SOe].indexOf(s)>=0?"height":"width";if(i&&a){var u=function(e,t){return cFe("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:uFe(e,kOe))}(o.padding,n),d=vOe(i),A="y"===l?wOe:DOe,f="y"===l?_Oe:SOe,p=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],h=a[l]-n.rects.reference[l],g=BOe(i),m=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=p/2-h/2,v=u[A],b=m-d[c]-u[f],C=m/2-d[c]/2+y,I=fFe(v,C,b),E=l;n.modifiersData[r]=((t={})[E]=I,t.centerOffset=I-C,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&iFe(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function gFe(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function mFe(e){return[wOe,SOe,_Oe,DOe].some((function(t){return e[t]>=0}))}var yFe=VOe({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,i=void 0===o||o,a=r.resize,s=void 0===a||a,l=nOe(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach((function(e){e.addEventListener("scroll",n.update,qOe)})),s&&l.addEventListener("resize",n.update,qOe),function(){i&&c.forEach((function(e){e.removeEventListener("scroll",n.update,qOe)})),s&&l.removeEventListener("resize",n.update,qOe)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=KOe({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=void 0===r||r,i=n.adaptive,a=void 0===i||i,s=n.roundOffsets,l=void 0===s||s,c={placement:YOe(t.placement),variation:XOe(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,ZOe(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,ZOe(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},$Oe,eFe,AFe,pFe,hFe,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,a=dFe(t,{elementContext:"reference"}),s=dFe(t,{altBoundary:!0}),l=gFe(a,r),c=gFe(s,o,i),u=mFe(l),d=mFe(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]});const vFe=function(e){return"string"===typeof e};const bFe=function(e,t,n){return void 0===e||vFe(e)?t:{...t,ownerState:{...t.ownerState,...n}}};function CFe(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=CFe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const IFe=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=CFe(e))&&(r&&(r+=" "),r+=t);return r};const EFe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n};const xFe=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t};const BFe=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:o,className:i}=e;if(!t){const e=IFe(n?.className,i,o?.className,r?.className),t={...n?.style,...o?.style,...r?.style},a={...n,...o,...r};return e.length>0&&(a.className=e),Object.keys(t).length>0&&(a.style=t),{props:a,internalRef:void 0}}const a=EFe({...o,...r}),s=xFe(r),l=xFe(o),c=t(a),u=IFe(c?.className,n?.className,i,o?.className,r?.className),d={...c?.style,...n?.style,...o?.style,...r?.style},A={...c,...n,...l,...s};return u.length>0&&(A.className=u),Object.keys(d).length>0&&(A.style=d),{props:A,internalRef:c.ref}};const wFe=function(e,t,n){return"function"===typeof e?e(t,n):e};const _Fe=function(e){const{elementType:t,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:o=!1,...i}=e,a=o?{}:wFe(n,r),{props:s,internalRef:l}=BFe({...i,externalSlotProps:a}),c=YPe(l,a?.ref,e.additionalProps?.ref);return bFe(t,{...s,ref:c},r)};const SFe=F.forwardRef((function(e,t){const{children:n,container:r,disablePortal:o=!1}=e,[i,a]=F.useState(null),s=YPe(F.isValidElement(n)?wPe(n):null,t);if(eOe((()=>{o||a(function(e){return"function"===typeof e?e():e}(r)||document.body)}),[r,o]),eOe((()=>{if(i&&!o)return qPe(t,i),()=>{qPe(t,null)}}),[t,i,o]),o){if(F.isValidElement(n)){const e={ref:s};return F.cloneElement(n,e)}return n}return i?U.createPortal(n,i):i}));const DFe=SFe;function TFe(e){return lPe("MuiPopper",e)}cPe("MuiPopper",["root"]);function kFe(e){return"function"===typeof e?e():e}function QFe(e){return void 0!==e.nodeType}const MFe={},RFe=F.forwardRef((function(e,t){const{anchorEl:n,children:r,direction:o,disablePortal:i,modifiers:a,open:s,placement:l,popperOptions:c,popperRef:u,slotProps:d={},slots:A={},TransitionProps:f,ownerState:p,...h}=e,g=F.useRef(null),m=YPe(g,t),y=F.useRef(null),v=YPe(y,u),b=F.useRef(v);eOe((()=>{b.current=v}),[v]),F.useImperativeHandle(u,(()=>y.current),[]);const C=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(l,o),[I,E]=F.useState(C),[x,B]=F.useState(kFe(n));F.useEffect((()=>{y.current&&y.current.forceUpdate()})),F.useEffect((()=>{n&&B(kFe(n))}),[n]),eOe((()=>{if(!x||!s)return;let e=[{name:"preventOverflow",options:{altBoundary:i}},{name:"flip",options:{altBoundary:i}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:e=>{let{state:t}=e;(e=>{E(e.placement)})(t)}}];null!=a&&(e=e.concat(a)),c&&null!=c.modifiers&&(e=e.concat(c.modifiers));const t=yFe(x,g.current,{placement:C,...c,modifiers:e});return b.current(t),()=>{t.destroy(),b.current(null)}}),[x,i,a,s,c,C]);const w={placement:I};null!==f&&(w.TransitionProps=f);const _=(e=>{const{classes:t}=e;return TTe({root:["root"]},TFe,t)})(e),S=A.root??"div",D=_Fe({elementType:S,externalSlotProps:d.root,externalForwardedProps:h,additionalProps:{role:"tooltip",ref:m},ownerState:e,className:_.root});return(0,ct.jsx)(S,{...D,children:"function"===typeof r?r(w):r})})),PFe=F.forwardRef((function(e,t){const{anchorEl:n,children:r,container:o,direction:i="ltr",disablePortal:a=!1,keepMounted:s=!1,modifiers:l,open:c,placement:u="bottom",popperOptions:d=MFe,popperRef:A,style:f,transition:p=!1,slotProps:h={},slots:g={},...m}=e,[y,v]=F.useState(!0);if(!s&&!c&&(!p||y))return null;let b;if(o)b=o;else if(n){const e=kFe(n);b=e&&QFe(e)?tOe(e).body:tOe(null).body}const C=c||!s||p&&!y?void 0:"none",I=p?{in:c,onEnter:()=>{v(!1)},onExited:()=>{v(!0)}}:void 0;return(0,ct.jsx)(DFe,{disablePortal:a,container:b,children:(0,ct.jsx)(RFe,{anchorEl:n,direction:i,disablePortal:a,modifiers:l,ref:t,open:p?!y:c,placement:u,popperOptions:d,popperRef:A,slotProps:h,slots:g,...m,style:{position:"fixed",top:0,left:0,display:C,...f},TransitionProps:I,children:r})})})),OFe=KRe(PFe,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),FFe=F.forwardRef((function(e,t){const n=xPe(),r=rPe({props:e,name:"MuiPopper"}),{anchorEl:o,component:i,components:a,componentsProps:s,container:l,disablePortal:c,keepMounted:u,modifiers:d,open:A,placement:f,popperOptions:p,popperRef:h,transition:g,slots:m,slotProps:y,...v}=r,b=m?.root??a?.Root,C={anchorEl:o,container:l,disablePortal:c,keepMounted:u,modifiers:d,open:A,placement:f,popperOptions:p,popperRef:h,transition:g,...v};return(0,ct.jsx)(OFe,{as:i,direction:n?"rtl":"ltr",slots:{root:b},slotProps:y??s,...C,ref:t})})),NFe=FFe;const LFe=function(e){const t=F.useRef(e);return eOe((()=>{t.current=e})),F.useRef((function(){return(0,t.current)(...arguments)})).current},UFe=LFe;let GFe=0;const jFe={...N}.useId;function zFe(e){if(void 0!==jFe){const t=jFe();return e??t}return function(e){const[t,n]=F.useState(e),r=e||t;return F.useEffect((()=>{null==t&&(GFe+=1,n(`mui-${GFe}`))}),[t]),r}(e)}const HFe=zFe;function VFe(e){let{controlled:t,default:n,name:r,state:o="value"}=e;const{current:i}=F.useRef(void 0!==t),[a,s]=F.useState(n);return[i?t:a,F.useCallback((e=>{i||s(e)}),[])]}const qFe=VFe;function YFe(e,t){const{className:n,elementType:r,ownerState:o,externalForwardedProps:i,internalForwardedProps:a,...s}=t,{component:l,slots:c={[e]:void 0},slotProps:u={[e]:void 0},...d}=i,A=c[e]||r,f=wFe(u[e],o),{props:{component:p,...h},internalRef:g}=BFe({className:n,...s,externalForwardedProps:"root"===e?d:void 0,externalSlotProps:f}),m=YPe(g,f?.ref,t.ref),y="root"===e?p||l:p;return[A,bFe(A,{..."root"===e&&!l&&!c[e]&&a,..."root"!==e&&!c[e]&&a,...h,...y&&{as:y},ref:m},o)]}function XFe(e){return lPe("MuiTooltip",e)}const WFe=cPe("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function KFe(e){return Math.round(1e5*e)/1e5}const JFe=KRe(NFe,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})($Re((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:e=>{let{ownerState:t}=e;return!t.disableInteractive},style:{pointerEvents:"auto"}},{props:e=>{let{open:t}=e;return!t},style:{pointerEvents:"none"}},{props:e=>{let{ownerState:t}=e;return t.arrow},style:{[`&[data-popper-placement*="bottom"] .${WFe.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${WFe.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${WFe.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${WFe.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:e=>{let{ownerState:t}=e;return t.arrow&&!t.isRtl},style:{[`&[data-popper-placement*="right"] .${WFe.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:e=>{let{ownerState:t}=e;return t.arrow&&!!t.isRtl},style:{[`&[data-popper-placement*="right"] .${WFe.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:e=>{let{ownerState:t}=e;return t.arrow&&!t.isRtl},style:{[`&[data-popper-placement*="left"] .${WFe.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:e=>{let{ownerState:t}=e;return t.arrow&&!!t.isRtl},style:{[`&[data-popper-placement*="left"] .${WFe.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}}))),ZFe=KRe("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${MTe(n.placement.split("-")[0])}`]]}})($Re((e=>{let{theme:t}=e;return{backgroundColor:t.vars?t.vars.palette.Tooltip.bg:UMe(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${WFe.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${WFe.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${WFe.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${WFe.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:e=>{let{ownerState:t}=e;return t.arrow},style:{position:"relative",margin:0}},{props:e=>{let{ownerState:t}=e;return t.touch},style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${KFe(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:e=>{let{ownerState:t}=e;return!t.isRtl},style:{[`.${WFe.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${WFe.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:e=>{let{ownerState:t}=e;return!t.isRtl&&t.touch},style:{[`.${WFe.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${WFe.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:e=>{let{ownerState:t}=e;return!!t.isRtl},style:{[`.${WFe.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${WFe.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:e=>{let{ownerState:t}=e;return!!t.isRtl&&t.touch},style:{[`.${WFe.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${WFe.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:e=>{let{ownerState:t}=e;return t.touch},style:{[`.${WFe.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:e=>{let{ownerState:t}=e;return t.touch},style:{[`.${WFe.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}}))),$Fe=KRe("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})($Re((e=>{let{theme:t}=e;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:UMe(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}})));let eNe=!1;const tNe=new CPe;let nNe={x:0,y:0};function rNe(e,t){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];t&&t(n,...o),e(n,...o)}}const oNe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiTooltip"}),{arrow:r=!1,children:o,classes:i,components:a={},componentsProps:s={},describeChild:l=!1,disableFocusListener:c=!1,disableHoverListener:u=!1,disableInteractive:d=!1,disableTouchListener:A=!1,enterDelay:f=100,enterNextDelay:p=0,enterTouchDelay:h=700,followCursor:g=!1,id:m,leaveDelay:y=0,leaveTouchDelay:v=1500,onClose:b,onOpen:C,open:I,placement:E="bottom",PopperComponent:x,PopperProps:B={},slotProps:w={},slots:_={},title:S,TransitionComponent:D,TransitionProps:T,...k}=n,Q=F.isValidElement(o)?o:(0,ct.jsx)("span",{children:o}),M=TPe(),R=xPe(),[P,O]=F.useState(),[N,L]=F.useState(null),U=F.useRef(!1),G=d||g,j=IPe(),z=IPe(),H=IPe(),V=IPe(),[q,Y]=qFe({controlled:I,default:!1,name:"Tooltip",state:"open"});let X=q;const W=HFe(m),K=F.useRef(),J=UFe((()=>{void 0!==K.current&&(document.body.style.WebkitUserSelect=K.current,K.current=void 0),V.clear()}));F.useEffect((()=>J),[J]);const Z=e=>{tNe.clear(),eNe=!0,Y(!0),C&&!X&&C(e)},$=UFe((e=>{tNe.start(800+y,(()=>{eNe=!1})),Y(!1),b&&X&&b(e),j.start(M.transitions.duration.shortest,(()=>{U.current=!1}))})),ee=e=>{U.current&&"touchstart"!==e.type||(P&&P.removeAttribute("title"),z.clear(),H.clear(),f||eNe&&p?z.start(eNe?p:f,(()=>{Z(e)})):Z(e))},te=e=>{z.clear(),H.start(y,(()=>{$(e)}))},[,ne]=F.useState(!1),re=e=>{BPe(e.target)||(ne(!1),te(e))},oe=e=>{P||O(e.currentTarget),BPe(e.target)&&(ne(!0),ee(e))},ie=e=>{U.current=!0;const t=Q.props;t.onTouchStart&&t.onTouchStart(e)},ae=e=>{ie(e),H.clear(),j.clear(),J(),K.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",V.start(h,(()=>{document.body.style.WebkitUserSelect=K.current,ee(e)}))},se=e=>{Q.props.onTouchEnd&&Q.props.onTouchEnd(e),J(),H.start(v,(()=>{$(e)}))};F.useEffect((()=>{if(X)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"===e.key&&$(e)}}),[$,X]);const le=XPe(wPe(Q),O,t);S||0===S||(X=!1);const ce=F.useRef(),ue={},de="string"===typeof S;l?(ue.title=X||!de||u?null:S,ue["aria-describedby"]=X?W:null):(ue["aria-label"]=de?S:null,ue["aria-labelledby"]=X&&!de?W:null);const Ae={...ue,...k,...Q.props,className:DTe(k.className,Q.props.className),onTouchStart:ie,ref:le,...g?{onMouseMove:e=>{const t=Q.props;t.onMouseMove&&t.onMouseMove(e),nNe={x:e.clientX,y:e.clientY},ce.current&&ce.current.update()}}:{}};const fe={};A||(Ae.onTouchStart=ae,Ae.onTouchEnd=se),u||(Ae.onMouseOver=rNe(ee,Ae.onMouseOver),Ae.onMouseLeave=rNe(te,Ae.onMouseLeave),G||(fe.onMouseOver=ee,fe.onMouseLeave=te)),c||(Ae.onFocus=rNe(oe,Ae.onFocus),Ae.onBlur=rNe(re,Ae.onBlur),G||(fe.onFocus=oe,fe.onBlur=re));const pe={...n,isRtl:R,arrow:r,disableInteractive:G,placement:E,PopperComponentProp:x,touch:U.current},he="function"===typeof w.popper?w.popper(pe):w.popper,ge=F.useMemo((()=>{let e=[{name:"arrow",enabled:Boolean(N),options:{element:N,padding:4}}];return B.popperOptions?.modifiers&&(e=e.concat(B.popperOptions.modifiers)),he?.popperOptions?.modifiers&&(e=e.concat(he.popperOptions.modifiers)),{...B.popperOptions,...he?.popperOptions,modifiers:e}}),[N,B.popperOptions,he?.popperOptions]),me=(e=>{const{classes:t,disableInteractive:n,arrow:r,touch:o,placement:i}=e;return TTe({popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",o&&"touch",`tooltipPlacement${MTe(i.split("-")[0])}`],arrow:["arrow"]},XFe,t)})(pe),ye="function"===typeof w.transition?w.transition(pe):w.transition,ve={slots:{popper:a.Popper,transition:a.Transition??D,tooltip:a.Tooltip,arrow:a.Arrow,..._},slotProps:{arrow:w.arrow??s.arrow,popper:{...B,...he??s.popper},tooltip:w.tooltip??s.tooltip,transition:{...T,...ye??s.transition}}},[be,Ce]=YFe("popper",{elementType:JFe,externalForwardedProps:ve,ownerState:pe,className:DTe(me.popper,B?.className)}),[Ie,Ee]=YFe("transition",{elementType:$Pe,externalForwardedProps:ve,ownerState:pe}),[xe,Be]=YFe("tooltip",{elementType:ZFe,className:me.tooltip,externalForwardedProps:ve,ownerState:pe}),[we,_e]=YFe("arrow",{elementType:$Fe,className:me.arrow,externalForwardedProps:ve,ownerState:pe,ref:L});return(0,ct.jsxs)(F.Fragment,{children:[F.cloneElement(Q,Ae),(0,ct.jsx)(be,{as:x??NFe,placement:E,anchorEl:g?{getBoundingClientRect:()=>({top:nNe.y,left:nNe.x,right:nNe.x,bottom:nNe.y,width:0,height:0})}:P,popperRef:ce,open:!!P&&X,id:W,transition:!0,...fe,...Ce,popperOptions:ge,children:e=>{let{TransitionProps:t}=e;return(0,ct.jsx)(Ie,{timeout:M.transitions.duration.shorter,...t,...Ee,children:(0,ct.jsxs)(xe,{...Be,children:[S,r?(0,ct.jsx)(we,{..._e}):null]})})}})]})})),iNe=oNe;let aNe;function sNe(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let o of e)null!=(o=t(o,++r,e))&&(n<o||void 0===n&&o>=o)&&(n=o)}return n}function lNe(){}function cNe(e){return null==e?lNe:function(){return this.querySelector(e)}}function uNe(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function dNe(){return[]}function ANe(e){return null==e?dNe:function(){return this.querySelectorAll(e)}}function fNe(e){return function(){return this.matches(e)}}function pNe(e){return function(t){return t.matches(e)}}var hNe=Array.prototype.find;function gNe(){return this.firstElementChild}var mNe=Array.prototype.filter;function yNe(){return Array.from(this.children)}function vNe(e){return new Array(e.length)}function bNe(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function CNe(e,t,n,r,o,i){for(var a,s=0,l=t.length,c=i.length;s<c;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new bNe(e,i[s]);for(;s<l;++s)(a=t[s])&&(o[s]=a)}function INe(e,t,n,r,o,i,a){var s,l,c,u=new Map,d=t.length,A=i.length,f=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(f[s]=c=a.call(l,l.__data__,s,t)+"",u.has(c)?o[s]=l:u.set(c,l));for(s=0;s<A;++s)c=a.call(e,i[s],s,i)+"",(l=u.get(c))?(r[s]=l,l.__data__=i[s],u.delete(c)):n[s]=new bNe(e,i[s]);for(s=0;s<d;++s)(l=t[s])&&u.get(f[s])===l&&(o[s]=l)}function ENe(e){return e.__data__}function xNe(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function BNe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}bNe.prototype={constructor:bNe,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var wNe="http://www.w3.org/1999/xhtml";const _Ne={svg:"http://www.w3.org/2000/svg",xhtml:wNe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function SNe(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),_Ne.hasOwnProperty(t)?{space:_Ne[t],local:e}:e}function DNe(e){return function(){this.removeAttribute(e)}}function TNe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kNe(e,t){return function(){this.setAttribute(e,t)}}function QNe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function MNe(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function RNe(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function PNe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ONe(e){return function(){this.style.removeProperty(e)}}function FNe(e,t,n){return function(){this.style.setProperty(e,t,n)}}function NNe(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function LNe(e,t){return e.style.getPropertyValue(t)||PNe(e).getComputedStyle(e,null).getPropertyValue(t)}function UNe(e){return function(){delete this[e]}}function GNe(e,t){return function(){this[e]=t}}function jNe(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function zNe(e){return e.trim().split(/^|\s+/)}function HNe(e){return e.classList||new VNe(e)}function VNe(e){this._node=e,this._names=zNe(e.getAttribute("class")||"")}function qNe(e,t){for(var n=HNe(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function YNe(e,t){for(var n=HNe(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function XNe(e){return function(){qNe(this,e)}}function WNe(e){return function(){YNe(this,e)}}function KNe(e,t){return function(){(t.apply(this,arguments)?qNe:YNe)(this,e)}}function JNe(){this.textContent=""}function ZNe(e){return function(){this.textContent=e}}function $Ne(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function eLe(){this.innerHTML=""}function tLe(e){return function(){this.innerHTML=e}}function nLe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function rLe(){this.nextSibling&&this.parentNode.appendChild(this)}function oLe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function iLe(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===wNe&&t.documentElement.namespaceURI===wNe?t.createElement(e):t.createElementNS(n,e)}}function aLe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function sLe(e){var t=SNe(e);return(t.local?aLe:iLe)(t)}function lLe(){return null}function cLe(){var e=this.parentNode;e&&e.removeChild(this)}function uLe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dLe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ALe(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function fLe(e,t,n){return function(){var r,o=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var a=0,s=o.length;a<s;++a)if((r=o[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=t);this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function pLe(e,t,n){var r=PNe(e),o=r.CustomEvent;"function"===typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function hLe(e,t){return function(){return pLe(this,e,t)}}function gLe(e,t){return function(){return pLe(this,e,t.apply(this,arguments))}}VNe.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var mLe=[null];function yLe(e,t){this._groups=e,this._parents=t}function vLe(){return new yLe([[document.documentElement]],mLe)}yLe.prototype=vLe.prototype={constructor:yLe,select:function(e){"function"!==typeof e&&(e=cNe(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a,s=t[o],l=s.length,c=r[o]=new Array(l),u=0;u<l;++u)(i=s[u])&&(a=e.call(i,i.__data__,u,s))&&("__data__"in i&&(a.__data__=i.__data__),c[u]=a);return new yLe(r,this._parents)},selectAll:function(e){e="function"===typeof e?function(e){return function(){return uNe(e.apply(this,arguments))}}(e):ANe(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a,s=t[i],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(e.call(a,a.__data__,c,s)),o.push(a));return new yLe(r,o)},selectChild:function(e){return this.select(null==e?gNe:function(e){return function(){return hNe.call(this.children,e)}}("function"===typeof e?e:pNe(e)))},selectChildren:function(e){return this.selectAll(null==e?yNe:function(e){return function(){return mNe.call(this.children,e)}}("function"===typeof e?e:pNe(e)))},filter:function(e){"function"!==typeof e&&(e=fNe(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,l=r[o]=[],c=0;c<s;++c)(i=a[c])&&e.call(i,i.__data__,c,a)&&l.push(i);return new yLe(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,ENe);var n=t?INe:CNe,r=this._parents,o=this._groups;"function"!==typeof e&&(e=function(e){return function(){return e}}(e));for(var i=o.length,a=new Array(i),s=new Array(i),l=new Array(i),c=0;c<i;++c){var u=r[c],d=o[c],A=d.length,f=xNe(e.call(u,u&&u.__data__,c,r)),p=f.length,h=s[c]=new Array(p),g=a[c]=new Array(p);n(u,d,h,g,l[c]=new Array(A),f,t);for(var m,y,v=0,b=0;v<p;++v)if(m=h[v]){for(v>=b&&(b=v+1);!(y=g[b])&&++b<p;);m._next=y||null}}return(a=new yLe(a,r))._enter=s,a._exit=l,a},enter:function(){return new yLe(this._enter||this._groups.map(vNe),this._parents)},exit:function(){return new yLe(this._exit||this._groups.map(vNe),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,a=Math.min(o,i),s=new Array(o),l=0;l<a;++l)for(var c,u=n[l],d=r[l],A=u.length,f=s[l]=new Array(A),p=0;p<A;++p)(c=u[p]||d[p])&&(f[p]=c);for(;l<o;++l)s[l]=n[l];return new yLe(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=BNe);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a,s=n[i],l=s.length,c=o[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new yLe(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],a=0,s=i.length;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this},attr:function(e,t){var n=SNe(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?TNe:DNe:"function"===typeof t?n.local?RNe:MNe:n.local?QNe:kNe)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?ONe:"function"===typeof t?NNe:FNe)(e,t,null==n?"":n)):LNe(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?UNe:"function"===typeof t?jNe:GNe)(e,t)):this.node()[e]},classed:function(e,t){var n=zNe(e+"");if(arguments.length<2){for(var r=HNe(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"===typeof t?KNe:t?XNe:WNe)(n,t))},text:function(e){return arguments.length?this.each(null==e?JNe:("function"===typeof e?$Ne:ZNe)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?eLe:("function"===typeof e?nLe:tLe)(e)):this.node().innerHTML},raise:function(){return this.each(rLe)},lower:function(){return this.each(oLe)},append:function(e){var t="function"===typeof e?e:sLe(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:sLe(e),r=null==t?lLe:"function"===typeof t?t:cNe(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(cLe)},clone:function(e){return this.select(e?dLe:uLe)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=i.length;if(!(arguments.length<2)){for(s=t?fLe:ALe,r=0;r<a;++r)this.each(s(i[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?gLe:hLe)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],i=0,a=o.length;i<a;++i)(r=o[i])&&(yield r)}};const bLe=vLe;var CLe={value:()=>{}};function ILe(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new ELe(r)}function ELe(e){this._=e}function xLe(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function BLe(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=CLe,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}ELe.prototype=ILe.prototype={constructor:ELe,on:function(e,t){var n,r=this._,o=function(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}(e+"",r),i=-1,a=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++i<a;)if(n=(e=o[i]).type)r[n]=BLe(r[n],e.name,t);else if(null==t)for(n in r)r[n]=BLe(r[n],e.name,null);return this}for(;++i<a;)if((n=(e=o[i]).type)&&(n=xLe(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ELe(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};const wLe=ILe;var _Le,SLe,DLe=0,TLe=0,kLe=0,QLe=1e3,MLe=0,RLe=0,PLe=0,OLe="object"===typeof performance&&performance.now?performance:Date,FLe="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function NLe(){return RLe||(FLe(LLe),RLe=OLe.now()+PLe)}function LLe(){RLe=0}function ULe(){this._call=this._time=this._next=null}function GLe(e,t,n){var r=new ULe;return r.restart(e,t,n),r}function jLe(){RLe=(MLe=OLe.now())+PLe,DLe=TLe=0;try{!function(){NLe(),++DLe;for(var e,t=_Le;t;)(e=RLe-t._time)>=0&&t._call.call(void 0,e),t=t._next;--DLe}()}finally{DLe=0,function(){var e,t,n=_Le,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:_Le=t);SLe=e,HLe(r)}(),RLe=0}}function zLe(){var e=OLe.now(),t=e-MLe;t>QLe&&(PLe-=t,MLe=e)}function HLe(e){DLe||(TLe&&(TLe=clearTimeout(TLe)),e-RLe>24?(e<1/0&&(TLe=setTimeout(jLe,e-OLe.now()-PLe)),kLe&&(kLe=clearInterval(kLe))):(kLe||(MLe=OLe.now(),kLe=setInterval(zLe,QLe)),DLe=1,FLe(jLe)))}function VLe(e,t,n){var r=new ULe;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}ULe.prototype=GLe.prototype={constructor:ULe,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?NLe():+n)+(null==t?0:+t),this._next||SLe===this||(SLe?SLe._next=this:_Le=this,SLe=this),this._call=e,this._time=n,HLe()},stop:function(){this._call&&(this._call=null,this._time=1/0,HLe())}};var qLe=wLe("start","end","cancel","interrupt"),YLe=[],XLe=0,WLe=1,KLe=2,JLe=3,ZLe=4,$Le=5,eUe=6;function tUe(e,t,n,r,o,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(e){n.state=WLe,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(i){var c,u,d,A;if(n.state!==WLe)return l();for(c in o)if((A=o[c]).name===n.name){if(A.state===JLe)return VLe(a);A.state===ZLe?(A.state=eUe,A.timer.stop(),A.on.call("interrupt",e,e.__data__,A.index,A.group),delete o[c]):+c<t&&(A.state=eUe,A.timer.stop(),A.on.call("cancel",e,e.__data__,A.index,A.group),delete o[c])}if(VLe((function(){n.state===JLe&&(n.state=ZLe,n.timer.restart(s,n.delay,n.time),s(i))})),n.state=KLe,n.on.call("start",e,e.__data__,n.index,n.group),n.state===KLe){for(n.state=JLe,r=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(A=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=A);r.length=u+1}}function s(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=$Le,1),i=-1,a=r.length;++i<a;)r[i].call(e,o);n.state===$Le&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=eUe,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=GLe(i,0,n.time)}(e,n,{name:t,index:r,group:o,on:qLe,tween:YLe,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:XLe})}function nUe(e,t){var n=oUe(e,t);if(n.state>XLe)throw new Error("too late; already scheduled");return n}function rUe(e,t){var n=oUe(e,t);if(n.state>JLe)throw new Error("too late; already running");return n}function oUe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function iUe(e,t){var n,r,o,i=e.__transition,a=!0;if(i){for(o in t=null==t?null:t+"",i)(n=i[o]).name===t?(r=n.state>KLe&&n.state<$Le,n.state=eUe,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]):a=!1;a&&delete e.__transition}}function aUe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var sUe,lUe=180/Math.PI,cUe={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uUe(e,t,n,r,o,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*lUe,skewX:Math.atan(l)*lUe,scaleX:a,scaleY:s}}function dUe(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(i,a){var s=[],l=[];return i=e(i),a=e(a),function(e,r,o,i,a,s){if(e!==o||r!==i){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:aUe(e,o)},{i:l-2,x:aUe(r,i)})}else(o||i)&&a.push("translate("+o+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,s,l),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(o(n)+"rotate(",null,r)-2,x:aUe(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(i.rotate,a.rotate,s,l),function(e,t,n,i){e!==t?i.push({i:n.push(o(n)+"skewX(",null,r)-2,x:aUe(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(i.skewX,a.skewX,s,l),function(e,t,n,r,i,a){if(e!==n||t!==r){var s=i.push(o(i)+"scale(",null,",",null,")");a.push({i:s-4,x:aUe(e,n)},{i:s-2,x:aUe(t,r)})}else 1===n&&1===r||i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,s,l),i=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var AUe=dUe((function(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?cUe:uUe(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),fUe=dUe((function(e){return null==e?cUe:(sUe||(sUe=document.createElementNS("http://www.w3.org/2000/svg","g")),sUe.setAttribute("transform",e),(e=sUe.transform.baseVal.consolidate())?uUe((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):cUe)}),", ",")",")");function pUe(e,t){var n,r;return function(){var o=rUe(this,e),i=o.tween;if(i!==n)for(var a=0,s=(r=n=i).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}o.tween=r}}function hUe(e,t,n){var r,o;if("function"!==typeof n)throw new Error;return function(){var i=rUe(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:t,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===t){o[l]=s;break}l===c&&o.push(s)}i.tween=o}}function gUe(e,t,n){var r=e._id;return e.each((function(){var e=rUe(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return oUe(e,r).value[t]}}function mUe(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function yUe(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function vUe(){}var bUe=.7,CUe=1/bUe,IUe="\\s*([+-]?\\d+)\\s*",EUe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xUe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",BUe=/^#([0-9a-f]{3,8})$/,wUe=new RegExp(`^rgb\\(${IUe},${IUe},${IUe}\\)$`),_Ue=new RegExp(`^rgb\\(${xUe},${xUe},${xUe}\\)$`),SUe=new RegExp(`^rgba\\(${IUe},${IUe},${IUe},${EUe}\\)$`),DUe=new RegExp(`^rgba\\(${xUe},${xUe},${xUe},${EUe}\\)$`),TUe=new RegExp(`^hsl\\(${EUe},${xUe},${xUe}\\)$`),kUe=new RegExp(`^hsla\\(${EUe},${xUe},${xUe},${EUe}\\)$`),QUe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function MUe(){return this.rgb().formatHex()}function RUe(){return this.rgb().formatRgb()}function PUe(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=BUe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?OUe(t):3===n?new LUe(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?FUe(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?FUe(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=wUe.exec(e))?new LUe(t[1],t[2],t[3],1):(t=_Ue.exec(e))?new LUe(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=SUe.exec(e))?FUe(t[1],t[2],t[3],t[4]):(t=DUe.exec(e))?FUe(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=TUe.exec(e))?VUe(t[1],t[2]/100,t[3]/100,1):(t=kUe.exec(e))?VUe(t[1],t[2]/100,t[3]/100,t[4]):QUe.hasOwnProperty(e)?OUe(QUe[e]):"transparent"===e?new LUe(NaN,NaN,NaN,0):null}function OUe(e){return new LUe(e>>16&255,e>>8&255,255&e,1)}function FUe(e,t,n,r){return r<=0&&(e=t=n=NaN),new LUe(e,t,n,r)}function NUe(e,t,n,r){return 1===arguments.length?function(e){return e instanceof vUe||(e=PUe(e)),e?new LUe((e=e.rgb()).r,e.g,e.b,e.opacity):new LUe}(e):new LUe(e,t,n,null==r?1:r)}function LUe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function UUe(){return`#${HUe(this.r)}${HUe(this.g)}${HUe(this.b)}`}function GUe(){const e=jUe(this.opacity);return`${1===e?"rgb(":"rgba("}${zUe(this.r)}, ${zUe(this.g)}, ${zUe(this.b)}${1===e?")":`, ${e})`}`}function jUe(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zUe(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function HUe(e){return((e=zUe(e))<16?"0":"")+e.toString(16)}function VUe(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new YUe(e,t,n,r)}function qUe(e){if(e instanceof YUe)return new YUe(e.h,e.s,e.l,e.opacity);if(e instanceof vUe||(e=PUe(e)),!e)return new YUe;if(e instanceof YUe)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,s=i-o,l=(i+o)/2;return s?(a=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=l<.5?i+o:2-i-o,a*=60):s=l>0&&l<1?0:a,new YUe(a,s,l,e.opacity)}function YUe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function XUe(e){return(e=(e||0)%360)<0?e+360:e}function WUe(e){return Math.max(0,Math.min(1,e||0))}function KUe(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function JUe(e,t,n,r,o){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*n+(1+3*e+3*i-3*a)*r+a*o)/6}mUe(vUe,PUe,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:MUe,formatHex:MUe,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return qUe(this).formatHsl()},formatRgb:RUe,toString:RUe}),mUe(LUe,NUe,yUe(vUe,{brighter(e){return e=null==e?CUe:Math.pow(CUe,e),new LUe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?bUe:Math.pow(bUe,e),new LUe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new LUe(zUe(this.r),zUe(this.g),zUe(this.b),jUe(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:UUe,formatHex:UUe,formatHex8:function(){return`#${HUe(this.r)}${HUe(this.g)}${HUe(this.b)}${HUe(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:GUe,toString:GUe})),mUe(YUe,(function(e,t,n,r){return 1===arguments.length?qUe(e):new YUe(e,t,n,null==r?1:r)}),yUe(vUe,{brighter(e){return e=null==e?CUe:Math.pow(CUe,e),new YUe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?bUe:Math.pow(bUe,e),new YUe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new LUe(KUe(e>=240?e-240:e+120,o,r),KUe(e,o,r),KUe(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new YUe(XUe(this.h),WUe(this.s),WUe(this.l),jUe(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jUe(this.opacity);return`${1===e?"hsl(":"hsla("}${XUe(this.h)}, ${100*WUe(this.s)}%, ${100*WUe(this.l)}%${1===e?")":`, ${e})`}`}}));const ZUe=e=>()=>e;function $Ue(e,t){return function(n){return e+n*t}}function eGe(e){return 1===(e=+e)?tGe:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):ZUe(isNaN(t)?n:t)}}function tGe(e,t){var n=t-e;return n?$Ue(e,n):ZUe(isNaN(e)?t:e)}const nGe=function e(t){var n=eGe(t);function r(e,t){var r=n((e=NUe(e)).r,(t=NUe(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),a=tGe(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=i(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function rGe(e){return function(t){var n,r,o=t.length,i=new Array(o),a=new Array(o),s=new Array(o);for(n=0;n<o;++n)r=NUe(t[n]),i[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return i=e(i),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=i(e),r.g=a(e),r.b=s(e),r+""}}}rGe((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],i=e[r+1],a=r>0?e[r-1]:2*o-i,s=r<t-1?e[r+2]:2*i-o;return JUe((n-r/t)*t,a,o,i,s)}})),rGe((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],i=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return JUe((n-r/t)*t,o,i,a,s)}}));var oGe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,iGe=new RegExp(oGe.source,"g");function aGe(e,t){var n,r,o,i=oGe.lastIndex=iGe.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=oGe.exec(e))&&(r=iGe.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:aUe(n,r)})),i=iGe.lastIndex;return i<t.length&&(o=t.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function sGe(e,t){var n;return("number"===typeof t?aUe:t instanceof PUe?nGe:(n=PUe(t))?(t=n,nGe):aGe)(e,t)}function lGe(e){return function(){this.removeAttribute(e)}}function cGe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function uGe(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function dGe(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function AGe(e,t,n){var r,o,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,l));this.removeAttribute(e)}}function fGe(e,t,n){var r,o,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}function pGe(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return o._value=t,o}function hGe(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return o._value=t,o}function gGe(e,t){return function(){nUe(this,e).delay=+t.apply(this,arguments)}}function mGe(e,t){return t=+t,function(){nUe(this,e).delay=t}}function yGe(e,t){return function(){rUe(this,e).duration=+t.apply(this,arguments)}}function vGe(e,t){return t=+t,function(){rUe(this,e).duration=t}}var bGe=bLe.prototype.constructor;function CGe(e){return function(){this.style.removeProperty(e)}}var IGe=0;function EGe(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function xGe(e){return bLe().transition(e)}function BGe(){return++IGe}var wGe=bLe.prototype;EGe.prototype=xGe.prototype={constructor:EGe,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=cNe(e));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var s,l,c=r[a],u=c.length,d=i[a]=new Array(u),A=0;A<u;++A)(s=c[A])&&(l=e.call(s,s.__data__,A,c))&&("__data__"in s&&(l.__data__=s.__data__),d[A]=l,tUe(d[A],t,n,A,d,oUe(s,n)));return new EGe(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=ANe(e));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var l,c=r[s],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var A,f=e.call(l,l.__data__,d,c),p=oUe(l,n),h=0,g=f.length;h<g;++h)(A=f[h])&&tUe(A,t,n,h,f,p);i.push(f),a.push(l)}return new EGe(i,a,t,n)},selectChild:wGe.selectChild,selectChildren:wGe.selectChildren,filter:function(e){"function"!==typeof e&&(e=fNe(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,l=r[o]=[],c=0;c<s;++c)(i=a[c])&&e.call(i,i.__data__,c,a)&&l.push(i);return new EGe(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l,c=t[s],u=n[s],d=c.length,A=a[s]=new Array(d),f=0;f<d;++f)(l=c[f]||u[f])&&(A[f]=l);for(;s<r;++s)a[s]=t[s];return new EGe(a,this._parents,this._name,this._id)},selection:function(){return new bGe(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=BGe(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=oUe(a,t);tUe(a,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new EGe(r,this._parents,e,n)},call:wGe.call,nodes:wGe.nodes,node:wGe.node,size:wGe.size,empty:wGe.empty,each:wGe.each,on:function(e,t){var n=this._id;return arguments.length<2?oUe(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?nUe:rUe;return function(){var a=i(this,e),s=a.on;s!==r&&(o=(r=s).copy()).on(t,n),a.on=o}}(n,e,t))},attr:function(e,t){var n=SNe(e),r="transform"===n?fUe:sGe;return this.attrTween(e,"function"===typeof t?(n.local?fGe:AGe)(n,r,gUe(this,"attr."+e,t)):null==t?(n.local?cGe:lGe)(n):(n.local?dGe:uGe)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=SNe(e);return this.tween(n,(r.local?pGe:hGe)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?AUe:sGe;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var i=LNe(this,e),a=(this.style.removeProperty(e),LNe(this,e));return i===a?null:i===n&&a===r?o:o=t(n=i,r=a)}}(e,r)).on("end.style."+e,CGe(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,o,i;return function(){var a=LNe(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=LNe(this,e)),a===l?null:a===r&&l===o?i:(o=l,i=t(r=a,s))}}(e,r,gUe(this,"style."+e,t))).each(function(e,t){var n,r,o,i,a="style."+t,s="end."+a;return function(){var l=rUe(this,e),c=l.on,u=null==l.value[a]?i||(i=CGe(t)):void 0;c===n&&o===u||(r=(n=c).copy()).on(s,o=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,i=n+"";return function(){var a=LNe(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,i,n)),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(gUe(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=oUe(this.node(),n).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?pUe:hUe)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?gGe:mGe)(t,e)):oUe(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?yGe:vGe)(t,e)):oUe(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){rUe(this,e).ease=t}}(t,e)):oUe(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;rUe(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise((function(i,a){var s={value:a},l={value:function(){0===--o&&i()}};n.each((function(){var n=rUe(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===o&&i()}))},[Symbol.iterator]:wGe[Symbol.iterator]};var _Ge={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function SGe(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}bLe.prototype.interrupt=function(e){return this.each((function(){iUe(this,e)}))},bLe.prototype.transition=function(e){var t,n;e instanceof EGe?(t=e._id,e=e._name):(t=BGe(),(n=_Ge).time=NLe(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,c=0;c<l;++c)(a=s[c])&&tUe(a,e,t,c,s,n||SGe(a,t));return new EGe(r,this._parents,e,t)};const{abs:DGe,max:TGe,min:kGe}=Math;function QGe(e){return[+e[0],+e[1]]}function MGe(e){return[QGe(e[0]),QGe(e[1])]}["w","e"].map(RGe),["n","s"].map(RGe),["n","w","e","s","nw","ne","sw","se"].map(RGe);function RGe(e){return{type:e}}function PGe(e,t){return e.parent===t.parent?1:2}function OGe(e,t){return e+t.x}function FGe(e,t){return Math.max(e,t.y)}function NGe(){var e=PGe,t=1,n=1,r=!1;function o(o){var i,a=0;o.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(OGe,0)/e.length}(n),t.y=function(e){return 1+e.reduce(FGe,0)}(n)):(t.x=i?a+=e(t,i):0,t.y=0,i=t)}));var s=function(e){for(var t;t=e.children;)e=t[0];return e}(o),l=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(o),c=s.x-e(s,l)/2,u=l.x+e(l,s)/2;return o.eachAfter(r?function(e){e.x=(e.x-o.x)*t,e.y=(o.y-e.y)*n}:function(e){e.x=(e.x-c)/(u-c)*t,e.y=(1-(o.y?e.y/o.y:1))*n})}return o.separation=function(t){return arguments.length?(e=t,o):e},o.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],o):r?null:[t,n]},o.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],o):r?[t,n]:null},o}function LGe(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function UGe(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=jGe)):void 0===t&&(t=GGe);for(var n,r,o,i,a,s=new VGe(e),l=[s];n=l.pop();)if((o=t(n.data))&&(a=(o=Array.from(o)).length))for(n.children=o,i=a-1;i>=0;--i)l.push(r=o[i]=new VGe(o[i])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(HGe)}function GGe(e){return e.children}function jGe(e){return Array.isArray(e)?e[1]:null}function zGe(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function HGe(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function VGe(e){this.data=e,this.depth=this.height=0,this.parent=null}function qGe(e,t){return e.parent===t.parent?1:2}function YGe(e){var t=e.children;return t?t[0]:e.t}function XGe(e){var t=e.children;return t?t[t.length-1]:e.t}function WGe(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function KGe(e,t,n){return e.a.parent===t.parent?e.a:n}function JGe(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function ZGe(){var e=qGe,t=1,n=1,r=null;function o(o){var l=function(e){for(var t,n,r,o,i,a=new JGe(e,0),s=[a];t=s.pop();)if(r=t._.children)for(t.children=new Array(i=r.length),o=i-1;o>=0;--o)s.push(n=t.children[o]=new JGe(r[o],o)),n.parent=t;return(a.parent=new JGe(null,0)).children=[a],a}(o);if(l.eachAfter(i),l.parent.m=-l.z,l.eachBefore(a),r)o.eachBefore(s);else{var c=o,u=o,d=o;o.eachBefore((function(e){e.x<c.x&&(c=e),e.x>u.x&&(u=e),e.depth>d.depth&&(d=e)}));var A=c===u?1:e(c,u)/2,f=A-c.x,p=t/(u.x+A+f),h=n/(d.depth||1);o.eachBefore((function(e){e.x=(e.x+f)*p,e.y=e.depth*h}))}return o}function i(t){var n=t.children,r=t.parent.children,o=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,o=e.children,i=o.length;--i>=0;)(t=o[i]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var i=(n[0].z+n[n.length-1].z)/2;o?(t.z=o.z+e(t._,o._),t.m=t.z-i):t.z=i}else o&&(t.z=o.z+e(t._,o._));t.parent.A=function(t,n,r){if(n){for(var o,i=t,a=t,s=n,l=i.parent.children[0],c=i.m,u=a.m,d=s.m,A=l.m;s=XGe(s),i=YGe(i),s&&i;)l=YGe(l),(a=XGe(a)).a=t,(o=s.z+d-i.z-c+e(s._,i._))>0&&(WGe(KGe(s,t,r),t,o),c+=o,u+=o),d+=s.m,c+=i.m,A+=l.m,u+=a.m;s&&!XGe(a)&&(a.t=s,a.m+=d-u),i&&!YGe(l)&&(l.t=i,l.m+=c-A,r=t)}return r}(t,o,t.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return o.separation=function(t){return arguments.length?(e=t,o):e},o.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],o):r?null:[t,n]},o.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],o):r?[t,n]:null},o}function $Ge(e){return"string"===typeof e?new yLe([[document.querySelector(e)]],[document.documentElement]):new yLe([[e]],mLe)}function eje(e){return"string"===typeof e?new yLe([document.querySelectorAll(e)],[document.documentElement]):new yLe([uNe(e)],mLe)}function tje(e){return function(){return e}}VGe.prototype=UGe.prototype={constructor:VGe,count:function(){return this.eachAfter(LGe)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,o,i=this,a=[i],s=[],l=-1;i=a.pop();)if(s.push(i),n=i.children)for(r=0,o=n.length;r<o;++r)a.push(n[r]);for(;i=s.pop();)e.call(t,i,++l,this);return this},eachBefore:function(e,t){for(var n,r,o=this,i=[o],a=-1;o=i.pop();)if(e.call(t,o,++a,this),n=o.children)for(r=n.length-1;r>=0;--r)i.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,o=r&&r.length;--o>=0;)n+=r[o].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),o=null;e=n.pop(),t=r.pop();for(;e===t;)o=e,e=n.pop(),t=r.pop();return o}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var o=r.length;e!==n;)r.splice(o,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return UGe(this).eachBefore(zGe)},[Symbol.iterator]:function*(){var e,t,n,r,o=this,i=[o];do{for(e=i.reverse(),i=[];o=e.pop();)if(yield o,t=o.children)for(n=0,r=t.length;n<r;++n)i.push(t[n])}while(i.length)}},JGe.prototype=Object.create(VGe.prototype);const nje=Math.abs,rje=Math.atan2,oje=Math.cos,ije=Math.max,aje=Math.min,sje=Math.sin,lje=Math.sqrt,cje=1e-12,uje=Math.PI,dje=uje/2,Aje=2*uje;function fje(e){return e>=1?dje:e<=-1?-dje:Math.asin(e)}const pje=Math.PI,hje=2*pje,gje=1e-6,mje=hje-gje;function yje(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class vje{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?yje:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return yje;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,o,i){this._append`C${+e},${+t},${+n},${+r},${this._x1=+o},${this._y1=+i}`}arcTo(e,t,n,r,o){if(e=+e,t=+t,n=+n,r=+r,(o=+o)<0)throw new Error(`negative radius: ${o}`);let i=this._x1,a=this._y1,s=n-e,l=r-t,c=i-e,u=a-t,d=c*c+u*u;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(d>gje)if(Math.abs(u*s-l*c)>gje&&o){let A=n-i,f=r-a,p=s*s+l*l,h=A*A+f*f,g=Math.sqrt(p),m=Math.sqrt(d),y=o*Math.tan((pje-Math.acos((p+d-h)/(2*g*m)))/2),v=y/m,b=y/g;Math.abs(v-1)>gje&&this._append`L${e+v*c},${t+v*u}`,this._append`A${o},${o},0,0,${+(u*A>c*f)},${this._x1=e+b*s},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,r,o,i){if(e=+e,t=+t,i=!!i,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),s=n*Math.sin(r),l=e+a,c=t+s,u=1^i,d=i?r-o:o-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>gje||Math.abs(this._y1-c)>gje)&&this._append`L${l},${c}`,n&&(d<0&&(d=d%hje+hje),d>mje?this._append`A${n},${n},0,1,${u},${e-a},${t-s}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:d>gje&&this._append`A${n},${n},0,${+(d>=pje)},${u},${this._x1=e+n*Math.cos(o)},${this._y1=t+n*Math.sin(o)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function bje(e){return e.innerRadius}function Cje(e){return e.outerRadius}function Ije(e){return e.startAngle}function Eje(e){return e.endAngle}function xje(e){return e&&e.padAngle}function Bje(e,t,n,r,o,i,a){var s=e-n,l=t-r,c=(a?i:-i)/lje(s*s+l*l),u=c*l,d=-c*s,A=e+u,f=t+d,p=n+u,h=r+d,g=(A+p)/2,m=(f+h)/2,y=p-A,v=h-f,b=y*y+v*v,C=o-i,I=A*h-p*f,E=(v<0?-1:1)*lje(ije(0,C*C*b-I*I)),x=(I*v-y*E)/b,B=(-I*y-v*E)/b,w=(I*v+y*E)/b,_=(-I*y+v*E)/b,S=x-g,D=B-m,T=w-g,k=_-m;return S*S+D*D>T*T+k*k&&(x=w,B=_),{cx:x,cy:B,x01:-u,y01:-d,x11:x*(o/C-1),y11:B*(o/C-1)}}function wje(){var e=bje,t=Cje,n=tje(0),r=null,o=Ije,i=Eje,a=xje,s=null,l=function(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new vje(t)}(c);function c(){var c,u,d=+e.apply(this,arguments),A=+t.apply(this,arguments),f=o.apply(this,arguments)-dje,p=i.apply(this,arguments)-dje,h=nje(p-f),g=p>f;if(s||(s=c=l()),A<d&&(u=A,A=d,d=u),A>cje)if(h>Aje-cje)s.moveTo(A*oje(f),A*sje(f)),s.arc(0,0,A,f,p,!g),d>cje&&(s.moveTo(d*oje(p),d*sje(p)),s.arc(0,0,d,p,f,g));else{var m,y,v=f,b=p,C=f,I=p,E=h,x=h,B=a.apply(this,arguments)/2,w=B>cje&&(r?+r.apply(this,arguments):lje(d*d+A*A)),_=aje(nje(A-d)/2,+n.apply(this,arguments)),S=_,D=_;if(w>cje){var T=fje(w/d*sje(B)),k=fje(w/A*sje(B));(E-=2*T)>cje?(C+=T*=g?1:-1,I-=T):(E=0,C=I=(f+p)/2),(x-=2*k)>cje?(v+=k*=g?1:-1,b-=k):(x=0,v=b=(f+p)/2)}var Q=A*oje(v),M=A*sje(v),R=d*oje(I),P=d*sje(I);if(_>cje){var O,F=A*oje(b),N=A*sje(b),L=d*oje(C),U=d*sje(C);if(h<uje)if(O=function(e,t,n,r,o,i,a,s){var l=n-e,c=r-t,u=a-o,d=s-i,A=d*l-u*c;if(!(A*A<cje))return[e+(A=(u*(t-i)-d*(e-o))/A)*l,t+A*c]}(Q,M,L,U,F,N,R,P)){var G=Q-O[0],j=M-O[1],z=F-O[0],H=N-O[1],V=1/sje(function(e){return e>1?0:e<-1?uje:Math.acos(e)}((G*z+j*H)/(lje(G*G+j*j)*lje(z*z+H*H)))/2),q=lje(O[0]*O[0]+O[1]*O[1]);S=aje(_,(d-q)/(V-1)),D=aje(_,(A-q)/(V+1))}else S=D=0}x>cje?D>cje?(m=Bje(L,U,Q,M,A,D,g),y=Bje(F,N,R,P,A,D,g),s.moveTo(m.cx+m.x01,m.cy+m.y01),D<_?s.arc(m.cx,m.cy,D,rje(m.y01,m.x01),rje(y.y01,y.x01),!g):(s.arc(m.cx,m.cy,D,rje(m.y01,m.x01),rje(m.y11,m.x11),!g),s.arc(0,0,A,rje(m.cy+m.y11,m.cx+m.x11),rje(y.cy+y.y11,y.cx+y.x11),!g),s.arc(y.cx,y.cy,D,rje(y.y11,y.x11),rje(y.y01,y.x01),!g))):(s.moveTo(Q,M),s.arc(0,0,A,v,b,!g)):s.moveTo(Q,M),d>cje&&E>cje?S>cje?(m=Bje(R,P,F,N,d,-S,g),y=Bje(Q,M,L,U,d,-S,g),s.lineTo(m.cx+m.x01,m.cy+m.y01),S<_?s.arc(m.cx,m.cy,S,rje(m.y01,m.x01),rje(y.y01,y.x01),!g):(s.arc(m.cx,m.cy,S,rje(m.y01,m.x01),rje(m.y11,m.x11),!g),s.arc(0,0,d,rje(m.cy+m.y11,m.cx+m.x11),rje(y.cy+y.y11,y.cx+y.x11),g),s.arc(y.cx,y.cy,S,rje(y.y11,y.x11),rje(y.y01,y.x01),!g))):s.arc(0,0,d,I,C,g):s.lineTo(R,P)}else s.moveTo(0,0);if(s.closePath(),c)return s=null,c+""||null}return c.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+o.apply(this,arguments)+ +i.apply(this,arguments))/2-uje/2;return[oje(r)*n,sje(r)*n]},c.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:tje(+t),c):e},c.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:tje(+e),c):t},c.cornerRadius=function(e){return arguments.length?(n="function"===typeof e?e:tje(+e),c):n},c.padRadius=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:tje(+e),c):r},c.startAngle=function(e){return arguments.length?(o="function"===typeof e?e:tje(+e),c):o},c.endAngle=function(e){return arguments.length?(i="function"===typeof e?e:tje(+e),c):i},c.padAngle=function(e){return arguments.length?(a="function"===typeof e?e:tje(+e),c):a},c.context=function(e){return arguments.length?(s=null==e?null:e,c):s},c}vje.prototype;const _je={capture:!0,passive:!1};function Sje(e){e.preventDefault(),e.stopImmediatePropagation()}function Dje(e){return((e=Math.exp(e))+1/e)/2}const Tje=function e(t,n,r){function o(e,o){var i,a,s=e[0],l=e[1],c=e[2],u=o[0],d=o[1],A=o[2],f=u-s,p=d-l,h=f*f+p*p;if(h<1e-12)a=Math.log(A/c)/t,i=function(e){return[s+e*f,l+e*p,c*Math.exp(t*e*a)]};else{var g=Math.sqrt(h),m=(A*A-c*c+r*h)/(2*c*n*g),y=(A*A-c*c-r*h)/(2*A*n*g),v=Math.log(Math.sqrt(m*m+1)-m),b=Math.log(Math.sqrt(y*y+1)-y);a=(b-v)/t,i=function(e){var r=e*a,o=Dje(v),i=c/(n*g)*(o*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+v)-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[s+i*f,l+i*p,c*o/Dje(t*r+v)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4);function kje(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Qje=e=>()=>e;function Mje(e,t){let{sourceEvent:n,target:r,transform:o,dispatch:i}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Rje(e,t,n){this.k=e,this.x=t,this.y=n}Rje.prototype={constructor:Rje,scale:function(e){return 1===e?this:new Rje(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Rje(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Pje=new Rje(1,0,0);function Oje(e){e.stopImmediatePropagation()}function Fje(e){e.preventDefault(),e.stopImmediatePropagation()}function Nje(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function Lje(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Uje(){return this.__zoom||Pje}function Gje(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function jje(){return navigator.maxTouchPoints||"ontouchstart"in this}function zje(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function Hje(){var e,t,n,r=Nje,o=Lje,i=zje,a=Gje,s=jje,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=Tje,A=wLe("start","zoom","end"),f=500,p=150,h=0,g=10;function m(e){e.property("__zoom",Uje).on("wheel.zoom",x,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",w).filter(s).on("touchstart.zoom",_).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Rje(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new Rje(e.k,r,o)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function C(e,t,n,r){e.on("start.zoom",(function(){I(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){I(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,i=arguments,a=I(e,i).event(r),s=o.apply(e,i),l=null==n?b(s):"function"===typeof n?n.apply(e,i):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=e.__zoom,A="function"===typeof t?t.apply(e,i):t,f=d(u.invert(l).concat(c/u.k),A.invert(l).concat(c/A.k));return function(e){if(1===e)e=A;else{var t=f(e),n=c/t[2];e=new Rje(n,l[0]-t[0]*n,l[1]-t[1]*n)}a.zoom(null,e)}}))}function I(e,t,n){return!n&&e.__zooming||new E(e,t)}function E(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function x(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(r.apply(this,arguments)){var s=I(this,n).event(e),u=this.__zoom,d=Math.max(l[0],Math.min(l[1],u.k*Math.pow(2,a.apply(this,arguments)))),A=kje(e);if(s.wheel)s.mouse[0][0]===A[0]&&s.mouse[0][1]===A[1]||(s.mouse[1]=u.invert(s.mouse[0]=A)),clearTimeout(s.wheel);else{if(u.k===d)return;s.mouse=[A,u.invert(A)],iUe(this),s.start()}Fje(e),s.wheel=setTimeout((function(){s.wheel=null,s.end()}),p),s.zoom("mouse",i(v(y(u,d),s.mouse[0],s.mouse[1]),s.extent,c))}}function B(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];if(!n&&r.apply(this,arguments)){var s=e.currentTarget,l=I(this,o,!0).event(e),u=$Ge(e.view).on("mousemove.zoom",(function(e){if(Fje(e),!l.moved){var t=e.clientX-A,n=e.clientY-f;l.moved=t*t+n*n>h}l.event(e).zoom("mouse",i(v(l.that.__zoom,l.mouse[0]=kje(e,s),l.mouse[1]),l.extent,c))}),!0).on("mouseup.zoom",(function(e){u.on("mousemove.zoom mouseup.zoom",null),function(e,t){var n=e.document.documentElement,r=$Ge(e).on("dragstart.drag",null);t&&(r.on("click.drag",Sje,_je),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(e.view,l.moved),Fje(e),l.event(e).end()}),!0),d=kje(e,s),A=e.clientX,f=e.clientY;!function(e){var t=e.document.documentElement,n=$Ge(e).on("dragstart.drag",Sje,_je);"onselectstart"in t?n.on("selectstart.drag",Sje,_je):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}(e.view),Oje(e),l.mouse=[d,this.__zoom.invert(d)],iUe(this),l.start()}}function w(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(r.apply(this,arguments)){var s=this.__zoom,l=kje(e.changedTouches?e.changedTouches[0]:e,this),d=s.invert(l),A=s.k*(e.shiftKey?.5:2),f=i(v(y(s,A),l,d),o.apply(this,n),c);Fje(e),u>0?$Ge(this).transition().duration(u).call(C,f,l,e):$Ge(this).call(m.transform,f,l,e)}}function _(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];if(r.apply(this,arguments)){var s,l,c,u,d=n.touches,A=d.length,p=I(this,i,n.changedTouches.length===A).event(n);for(Oje(n),l=0;l<A;++l)u=[u=kje(c=d[l],this),this.__zoom.invert(u),c.identifier],p.touch0?p.touch1||p.touch0[2]===u[2]||(p.touch1=u,p.taps=0):(p.touch0=u,s=!0,p.taps=1+!!e);e&&(e=clearTimeout(e)),s&&(p.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),f)),iUe(this),p.start())}}function S(e){if(this.__zooming){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o,a,s,l,u=I(this,n).event(e),d=e.changedTouches,A=d.length;for(Fje(e),o=0;o<A;++o)s=kje(a=d[o],this),u.touch0&&u.touch0[2]===a.identifier?u.touch0[0]=s:u.touch1&&u.touch1[2]===a.identifier&&(u.touch1[0]=s);if(a=u.that.__zoom,u.touch1){var f=u.touch0[0],p=u.touch0[1],h=u.touch1[0],g=u.touch1[1],m=(m=h[0]-f[0])*m+(m=h[1]-f[1])*m,b=(b=g[0]-p[0])*b+(b=g[1]-p[1])*b;a=y(a,Math.sqrt(m/b)),s=[(f[0]+h[0])/2,(f[1]+h[1])/2],l=[(p[0]+g[0])/2,(p[1]+g[1])/2]}else{if(!u.touch0)return;s=u.touch0[0],l=u.touch0[1]}u.zoom("touch",i(v(a,s,l),u.extent,c))}}function D(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];if(this.__zooming){var a,s,l=I(this,o).event(e),c=e.changedTouches,u=c.length;for(Oje(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),f),a=0;a<u;++a)s=c[a],l.touch0&&l.touch0[2]===s.identifier?delete l.touch0:l.touch1&&l.touch1[2]===s.identifier&&delete l.touch1;if(l.touch1&&!l.touch0&&(l.touch0=l.touch1,delete l.touch1),l.touch0)l.touch0[1]=this.__zoom.invert(l.touch0[0]);else if(l.end(),2===l.taps&&(s=kje(s,this),Math.hypot(t[0]-s[0],t[1]-s[1])<g)){var d=$Ge(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return m.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",Uje),e!==o?C(e,t,n,r):o.interrupt().each((function(){I(this,arguments).event(r).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()}))},m.scaleBy=function(e,t,n,r){m.scaleTo(e,(function(){return this.__zoom.k*("function"===typeof t?t.apply(this,arguments):t)}),n,r)},m.scaleTo=function(e,t,n,r){m.transform(e,(function(){var e=o.apply(this,arguments),r=this.__zoom,a=null==n?b(e):"function"===typeof n?n.apply(this,arguments):n,s=r.invert(a),l="function"===typeof t?t.apply(this,arguments):t;return i(v(y(r,l),a,s),e,c)}),n,r)},m.translateBy=function(e,t,n,r){m.transform(e,(function(){return i(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),o.apply(this,arguments),c)}),null,r)},m.translateTo=function(e,t,n,r,a){m.transform(e,(function(){var e=o.apply(this,arguments),a=this.__zoom,s=null==r?b(e):"function"===typeof r?r.apply(this,arguments):r;return i(Pje.translate(s[0],s[1]).scale(a.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,c)}),r,a)},E.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=$Ge(this.that).datum();A.call(e,this.that,new Mje(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:A}),t)}},m.wheelDelta=function(e){return arguments.length?(a="function"===typeof e?e:Qje(+e),m):a},m.filter=function(e){return arguments.length?(r="function"===typeof e?e:Qje(!!e),m):r},m.touchable=function(e){return arguments.length?(s="function"===typeof e?e:Qje(!!e),m):s},m.extent=function(e){return arguments.length?(o="function"===typeof e?e:Qje([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):o},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(e){return arguments.length?(i=e,m):i},m.duration=function(e){return arguments.length?(u=+e,m):u},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=A.on.apply(A,arguments);return e===A?m:e},m.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,m):Math.sqrt(h)},m.tapDistance=function(e){return arguments.length?(g=+e,m):g},m}Rje.prototype;const Vje={width:"24px",height:"auto",display:"flex",cursor:"move",alignItems:"center",backgroundColor:"whitesmoke",zIndex:1,margin:".5rem 0rem",borderRadius:".5rem"},qje=e=>{let{id:t,index:n,header:r,moveCard:o,ppm:i=null,fasta:a=null,applyEntropyStructColor:s,applyImportantStructColor:l,removeLogo:c,onSymbolClick:u,onSymbolHover:d,importantResiduesList:A,findAndZoom:f,addLogoRef:p}=e;const h=(0,F.useRef)(null),{activeButton:g,setActiveButton:m}=(0,F.useContext)(gPe),{logoContent:y,setLogoContent:v,logoAlphabet:b,setLogoAlphabet:C}=(0,F.useContext)(dt),I=(0,F.useRef)(null);var E="";E=r.includes("ASR")?r.replace("ASR Probability Logo for ",""):r.replace("Information Logo of Clade ","");const[{handlerId:x},B]=gTe({accept:wTe,collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var r;if(!h.current)return;const i=e.index,a=n;if(i===a)return;const s=null===(r=h.current)||void 0===r?void 0:r.getBoundingClientRect(),l=(s.bottom-s.top)/2,c=t.getClientOffset().y-s.top;i<a&&c<l||i>a&&c>l||(o(i,a),e.index=a)}}),[{isDragging:w},_,S]=BTe({type:wTe,item:()=>({id:t,index:n}),collect:e=>({isDragging:e.isDragging()})}),D=w?.6:1;_(h),(0,F.useEffect)((()=>{S((aNe||(aNe=new Image,aNe.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),aNe))}));return(0,ct.jsxs)("div",{ref:B,className:"dnd-container",style:{display:"flex",padding:"0.5rem 0rem"},children:[(0,ct.jsx)("div",{ref:h,style:{...Vje,opacity:D,backgroundColor:"whitesmoke"},"data-handler-id":x,children:(0,ct.jsx)(hPe,{})}),(0,ct.jsxs)("div",{className:"logo-scrollable-box",style:{width:"95%"},children:[(0,ct.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",height:"30px",padding:"3px",justifyContent:"space-between"},children:[(0,ct.jsx)("p",{style:{paddingLeft:"30px"},children:(0,ct.jsx)("button",{className:"logo-btn",style:{outline:"none",cursor:"pointer",borderRadius:"5px",border:"black solid 1px"},onClick:()=>{f(E)},children:(0,ct.jsx)("b",{children:r})})}),(0,ct.jsxs)("span",{style:{paddingRight:"30px"},children:[a&&(0,ct.jsx)(iNe,{title:"Color Conservation",placement:"top",children:(0,ct.jsx)("button",{className:"logo-color-btn logo-btn "+(g===`entropy-${n}`?"active":""),style:{...Yje.colorBtn,backgroundColor:g===`entropy-${n}`?"#639fc7":"#95bee8",boxShadow:g===`entropy-${n}`?"inset 0px 4px 6px rgba(0, 0, 0, 0.4)":"none",transform:g===`entropy-${n}`?"translateY(2px)":"none",border:g===`entropy-${n}`?"2px solid #4a7fa5":"1px solid #95bee8"},onClick:()=>{g===`entropy-${n}`?(m(null),s(null,!0)):(m(`entropy-${n}`),s(E))},children:(0,ct.jsx)("svg",{fill:"#000000",width:"23px",height:"25px",viewBox:"0 0 1920 1920",xmlns:"http://www.w3.org/2000/svg",children:(0,ct.jsx)("path",{d:"M392.26 1042.5c137.747-57.67 292.85-15.269 425.873 116.217l4.394 4.833c116.656 146.425 149.5 279.119 97.873 394.237-128.85 287.138-740.692 328.77-810.005 332.504L0 1896.442l61.953-91.83c.989-1.539 105.013-158.728 105.013-427.192 0-141.811 92.6-279.558 225.294-334.92ZM1728.701 23.052c54.923-1.099 99.96 15.268 135.111 49.43 40.643 40.644 58.109 87.877 56.021 140.603C1908.85 474.52 1423.33 953.447 1053.15 1280.79c-24.276-64.81-63.711-136.21-125.335-213.102l-8.787-9.886c-80.078-80.187-169.163-135.11-262.423-161.473C955.276 558.002 1460.677 33.927 1728.701 23.052Z"})})})}),(0,ct.jsx)(iNe,{title:"Download Individual",placement:"top",children:(0,ct.jsx)("button",{className:"logo-download-btn logo-btn",style:Yje.downloadBtn,onClick:()=>((e,t)=>{if(!I.current)return void console.error("Logo not found");const n=I.current.querySelector("svg").cloneNode(!0),r=new XMLSerializer,o=n.querySelector(".yaxis");o&&(o.style.transform="translate(-10px, 10px)");let i=r.serializeToString(n);i=i.replace("</svg>","\n            <style>\n                .glyphrect {\n                    fill-opacity: 0.0 !important;\n                }\n            </style></svg>");const a=new Blob([i],{type:"image/svg+xml;charset=utf-8"}),s=URL.createObjectURL(a),l=document.createElement("a");l.href=s,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l)})(0,"seqlogo_"+r+".svg"),children:(0,ct.jsx)("svg",{width:"25px",height:"25px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,ct.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12ZM12 6.25C12.4142 6.25 12.75 6.58579 12.75 7V12.1893L14.4697 10.4697C14.7626 10.1768 15.2374 10.1768 15.5303 10.4697C15.8232 10.7626 15.8232 11.2374 15.5303 11.5303L12.5303 14.5303C12.3897 14.671 12.1989 14.75 12 14.75C11.8011 14.75 11.6103 14.671 11.4697 14.5303L8.46967 11.5303C8.17678 11.2374 8.17678 10.7626 8.46967 10.4697C8.76256 10.1768 9.23744 10.1768 9.53033 10.4697L11.25 12.1893V7C11.25 6.58579 11.5858 6.25 12 6.25ZM8 16.25C7.58579 16.25 7.25 16.5858 7.25 17C7.25 17.4142 7.58579 17.75 8 17.75H16C16.4142 17.75 16.75 17.4142 16.75 17C16.75 16.5858 16.4142 16.25 16 16.25H8Z",fill:"#1C274C"})})})}),(0,ct.jsx)(iNe,{title:"Download Individual",placement:"top",children:(0,ct.jsx)("button",{className:"logo-remove-btn logo-btn",style:Yje.removeBtn,onClick:()=>c(r),children:(0,ct.jsx)("svg",{width:"25px",height:"25px",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:(0,ct.jsx)("path",{fill:"#000000",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zM288 512a38.4 38.4 0 0 0 38.4 38.4h371.2a38.4 38.4 0 0 0 0-76.8H326.4A38.4 38.4 0 0 0 288 512z"})})})})]})]}),(0,ct.jsx)("div",{id:"logo-stack",className:"logo_render",style:{display:"flex",height:"150px",width:"max-content",overflowX:"hidden"},ref:e=>{p(e),I.current=e},children:(0,ct.jsx)(ZDe,{fasta:a,ppm:i,header:r,alphabet:_Te[b],onSymbolClick:u,onSymbolMouseOver:d,importantResidues:A[E]||{differing_residues:[]},mode:i?"FREQUENCY":"INFORMATION_CONTENT",height:150,countUnaligned:!0})})]})]})},Yje={downloadBtn:{display:"inline-flex",flexDirection:"row",alignItems:"center",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"14px",justifyContent:"center",padding:"5px 10px",textAlign:"center",verticalAlign:"middle",height:"30px",padding:"5px",backgroundColor:"#def2b3",alignItems:"center"},removeBtn:{display:"inline-flex",flexDirection:"row",alignItems:"center",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"14px",justifyContent:"center",padding:"5px 10px",textAlign:"left",verticalAlign:"middle",height:"30px",padding:"5px",backgroundColor:"#f2b4b3"},colorBtn:{display:"inline-flex",flexDirection:"row",alignItems:"center",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"14px",justifyContent:"center",padding:"5px 10px",textAlign:"center",verticalAlign:"middle",height:"30px",padding:"5px",backgroundColor:"#95bee8",alignItems:"center"}},Xje={display:"flex",flexDirection:"column",width:"100%",overflowX:"hidden"},Wje=e=>{let{fastaContent:t,applyEntropyStructColor:n,applyImportantStructColor:r,removeLogo:o,onSymbolClick:i,onSymbolHover:a,importantResiduesList:s,findAndZoom:l,addLogoRef:c}=e;{const[e,u]=(0,F.useState)([]),{logoContent:d,setLogoContent:A}=(0,F.useContext)(dt);(0,F.useEffect)((()=>{u(Object.keys(t).map(((e,t)=>({id:t,text:e}))))}),[t]);const f=(0,F.useCallback)(((e,t)=>{u((n=>ADe()(n,{$splice:[[e,1],[t,0,n[e]]]})))}),[e]),p=(0,F.useCallback)(((e,u)=>(0,ct.jsx)(qje,{index:u,id:e.id,header:e.text,moveCard:f,...e.text.includes("ASR")?{ppm:t[e.text]}:{fasta:t[e.text]},applyEntropyStructColor:n,applyImportantStructColor:r,removeLogo:o,onSymbolClick:i,onSymbolHover:a,importantResiduesList:s,findAndZoom:l,addLogoRef:c},e.id)),[e]);return(0,ct.jsx)(mPe,{children:(0,ct.jsx)("div",{style:Xje,children:e.map(((e,t)=>p(e,t)))})})}},Kje=F.forwardRef(((e,t)=>{let{data:n,onColumnClick:r,onColumnHover:o,importantResiduesList:i,removeNodeHandle:a,applyEntropyStructColor:s,applyImportantStructColor:l,findAndZoom:c}=e;const[u,d]=(0,F.useState)({}),A=(0,F.useRef)([]),f=(0,F.useRef)([]),p=(0,F.useRef)([]),[h,g]=(0,F.useState)(!1),[m,y]=(0,F.useState)(!1),{scrollPosition:v,setScrollPosition:b,seqLength:C,setSeqLength:I,logoContent:E,setLogoContent:x}=(0,F.useContext)(dt);(0,F.useEffect)((()=>{n?(A.current=[],d(n)):console.error("No data provided to render Logo")}),[n]),(0,F.useEffect)((()=>{y(!0)}),[u]);const B=e=>{var t=C>999?20:21.5;f.current.forEach((n=>{n.scroller.__publish(e*t,1,1,!0)})),1===f.current.length&&p.current[0].scroller.__publish(e*t,1,1,!0)};(0,F.useEffect)((()=>(f.current.forEach((e=>{e.destroy()})),p.current.forEach((e=>{e.destroy()})),A.current.forEach((e=>{const t=new w_e.EasyScroller(e,{scrollingX:!0,scrollingY:!1,animating:!1,zooming:0,minZoom:1,maxZoom:1,bouncing:!1}),n=new w_e.EasyScroller(e,{scrollingX:!0,scrollingY:!1,animating:!1,zooming:0,minZoom:1,maxZoom:1,bouncing:!1});f.current.push(n),p.current.push(t)})),f.current.forEach(((e,t)=>{e.scroller.__callback=e=>{f.current.forEach(((n,r)=>{t!==r&&(n.scroller.__scrollLeft=e)})),p.current.forEach(((n,r)=>{t!==r&&n.scroller.__publish(e,0,1,!0)}));const n=document.getElementsByClassName("yaxis");Array.from(n).forEach((t=>{const n=e/4.7603;t.style.transform=`translate(${n}em, 10px)`})),b(Math.floor(e/21.5))}})),()=>{f.current.forEach((e=>{e.destroy()})),p.current.forEach((e=>{e.destroy()})),f.current=[],p.current=[]})),[u,h]);return(0,F.useImperativeHandle)(t,(()=>({scrollToHighlightIndex:e=>{var t=C>999?20:21.5,n=0;A.current.forEach(((t,r)=>{try{n=t.parentNode.clientWidth/2;const r=t.firstChild.firstChild.children[e-1].lastChild;r.style.transition="fill-opacity 0.3s ease";let o=0;const i=setInterval((()=>{"0.3"===r.style.fillOpacity?r.style.fillOpacity="0":r.style.fillOpacity="0.3",o++,o>=6&&(clearInterval(i),r.style.fillOpacity="0")}),300)}catch(l0e){throw l0e}})),f.current.forEach((r=>{r.scroller.__publish(e*t-n,1,1,!0)})),1===f.current.length&&p.current[0].scroller.__publish(e*t-n,1,1,!0)},scrollToIndex:B,appendLogo:(e,t)=>{(async e=>{let t={};const n=Object.keys(e).map((async n=>{try{const r=await fetch(e[n]),o=await r.text();t[n]=o}catch(PF){console.error(`Error fetching file for ${n}:`,PF)}}));return await Promise.all(n),t})({[e]:t}).then((e=>{d({...u,...e})})).catch((e=>console.error("Error fetching data:",e)))}}))),(0,ct.jsx)("div",{style:{overflowX:"hidden"},children:m?(0,ct.jsx)(GSe,{backend:uDe,children:(0,ct.jsx)(Wje,{fastaContent:u,applyEntropyStructColor:s,onSymbolClick:r,onSymbolHover:o,importantResiduesList:i,applyImportantStructColor:l,removeLogo:e=>{const t={...u};delete t[e];const n=[...A.current];A.current=n,d(t),a(e)},findAndZoom:c,addLogoRef:e=>{e&&!A.current.includes(e)&&(A.current.push(e),g(!h))}})}):(0,ct.jsx)("p",{children:"Loading..."})})})),Jje=Kje;n(261);var Zje="/index.js",$je="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function eze(e){var t={exports:{}};return e(t,t.exports),t.exports}var tze=function(e){return e&&e.Math==Math&&e},nze=tze("object"==typeof globalThis&&globalThis)||tze("object"==typeof window&&window)||tze("object"==typeof self&&self)||tze("object"==typeof $je&&$je)||function(){return this}()||Function("return this")(),rze=function(e){try{return!!e()}catch(e){return!0}},oze=!rze((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),ize={}.propertyIsEnumerable,aze=Object.getOwnPropertyDescriptor,sze={f:aze&&!ize.call({1:2},1)?function(e){var t=aze(this,e);return!!t&&t.enumerable}:ize},lze=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},cze={}.toString,uze=function(e){return cze.call(e).slice(8,-1)},dze="".split,Aze=rze((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==uze(e)?dze.call(e,""):Object(e)}:Object,fze=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},pze=function(e){return Aze(fze(e))},hze=function(e){return"object"==typeof e?null!==e:"function"==typeof e},gze=function(e,t){if(!hze(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!hze(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!hze(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!hze(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},mze={}.hasOwnProperty,yze=function(e,t){return mze.call(e,t)},vze=nze.document,bze=hze(vze)&&hze(vze.createElement),Cze=function(e){return bze?vze.createElement(e):{}},Ize=!oze&&!rze((function(){return 7!=Object.defineProperty(Cze("div"),"a",{get:function(){return 7}}).a})),Eze=Object.getOwnPropertyDescriptor,xze={f:oze?Eze:function(e,t){if(e=pze(e),t=gze(t,!0),Ize)try{return Eze(e,t)}catch(e){}if(yze(e,t))return lze(!sze.f.call(e,t),e[t])}},Bze=function(e){if(!hze(e))throw TypeError(String(e)+" is not an object");return e},wze=Object.defineProperty,_ze={f:oze?wze:function(e,t,n){if(Bze(e),t=gze(t,!0),Bze(n),Ize)try{return wze(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Sze=oze?function(e,t,n){return _ze.f(e,t,lze(1,n))}:function(e,t,n){return e[t]=n,e},Dze=function(e,t){try{Sze(nze,e,t)}catch(KY){nze[e]=t}return t},Tze=nze["__core-js_shared__"]||Dze("__core-js_shared__",{}),kze=Function.toString;"function"!=typeof Tze.inspectSource&&(Tze.inspectSource=function(e){return kze.call(e)});var Qze,Mze,Rze,Pze=Tze.inspectSource,Oze=nze.WeakMap,Fze="function"==typeof Oze&&/native code/.test(Pze(Oze)),Nze=eze((function(e){(e.exports=function(e,t){return Tze[e]||(Tze[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.9.0",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})})),Lze=0,Uze=Math.random(),Gze=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Lze+Uze).toString(36)},jze=Nze("keys"),zze=function(e){return jze[e]||(jze[e]=Gze(e))},Hze={},Vze=nze.WeakMap;if(Fze){var qze=Tze.state||(Tze.state=new Vze),Yze=qze.get,Xze=qze.has,Wze=qze.set;Qze=function(e,t){return t.facade=e,Wze.call(qze,e,t),t},Mze=function(e){return Yze.call(qze,e)||{}},Rze=function(e){return Xze.call(qze,e)}}else{var Kze=zze("state");Hze[Kze]=!0,Qze=function(e,t){return t.facade=e,Sze(e,Kze,t),t},Mze=function(e){return yze(e,Kze)?e[Kze]:{}},Rze=function(e){return yze(e,Kze)}}var Jze={set:Qze,get:Mze,has:Rze,enforce:function(e){return Rze(e)?Mze(e):Qze(e,{})},getterFor:function(e){return function(t){var n;if(!hze(t)||(n=Mze(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Zze=eze((function(e){var t=Jze.get,n=Jze.enforce,r=String(String).split("String");(e.exports=function(e,t,o,i){var a,s=!!i&&!!i.unsafe,l=!!i&&!!i.enumerable,c=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof t||yze(o,"name")||Sze(o,"name",t),(a=n(o)).source||(a.source=r.join("string"==typeof t?t:""))),e!==nze?(s?!c&&e[t]&&(l=!0):delete e[t],l?e[t]=o:Sze(e,t,o)):l?e[t]=o:Dze(t,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||Pze(this)}))})),$ze=nze,eHe=function(e){return"function"==typeof e?e:void 0},tHe=function(e,t){return arguments.length<2?eHe($ze[e])||eHe(nze[e]):$ze[e]&&$ze[e][t]||nze[e]&&nze[e][t]},nHe=Math.ceil,rHe=Math.floor,oHe=function(e){return isNaN(e=+e)?0:(e>0?rHe:nHe)(e)},iHe=Math.min,aHe=function(e){return e>0?iHe(oHe(e),9007199254740991):0},sHe=Math.max,lHe=Math.min,cHe=function(e,t){var n=oHe(e);return n<0?sHe(n+t,0):lHe(n,t)},uHe=function(e){return function(t,n,r){var o,i=pze(t),a=aHe(i.length),s=cHe(r,a);if(e&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},dHe=(uHe(!0),uHe(!1)),AHe=function(e,t){var n,r=pze(e),o=0,i=[];for(n in r)!yze(Hze,n)&&yze(r,n)&&i.push(n);for(;t.length>o;)yze(r,n=t[o++])&&(~dHe(i,n)||i.push(n));return i},fHe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],pHe=fHe.concat("length","prototype"),hHe={f:Object.getOwnPropertyNames||function(e){return AHe(e,pHe)}},gHe={f:Object.getOwnPropertySymbols},mHe=tHe("Reflect","ownKeys")||function(e){var t=hHe.f(Bze(e)),n=gHe.f;return n?t.concat(n(e)):t},yHe=function(e,t){for(var n=mHe(t),r=_ze.f,o=xze.f,i=0;i<n.length;i++){var a=n[i];yze(e,a)||r(e,a,o(t,a))}},vHe=/#|\.prototype\./,bHe=function(e,t){var n=IHe[CHe(e)];return n==xHe||n!=EHe&&("function"==typeof t?rze(t):!!t)},CHe=bHe.normalize=function(e){return String(e).replace(vHe,".").toLowerCase()},IHe=bHe.data={},EHe=bHe.NATIVE="N",xHe=bHe.POLYFILL="P",BHe=bHe,wHe=xze.f,_He=function(e,t){var n,r,o,i,a,s=e.target,l=e.global,c=e.stat;if(n=l?nze:c?nze[s]||Dze(s,{}):(nze[s]||{}).prototype)for(r in t){if(i=t[r],o=e.noTargetGet?(a=wHe(n,r))&&a.value:n[r],!BHe(l?r:s+(c?".":"#")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;yHe(i,o)}(e.sham||o&&o.sham)&&Sze(i,"sham",!0),Zze(n,r,i,e)}},SHe=Object.keys||function(e){return AHe(e,fHe)},DHe=function(e){return Object(fze(e))},THe=Object.assign,kHe=Object.defineProperty,QHe=!THe||rze((function(){if(oze&&1!==THe({b:1},THe(kHe({},"a",{enumerable:!0,get:function(){kHe(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=THe({},e)[n]||SHe(THe({},t)).join("")!=r}))?function(e,t){for(var n=DHe(e),r=arguments.length,o=1,i=gHe.f,a=sze.f;r>o;)for(var s,l=Aze(arguments[o++]),c=i?SHe(l).concat(i(l)):SHe(l),u=c.length,d=0;u>d;)s=c[d++],oze&&!a.call(l,s)||(n[s]=l[s]);return n}:THe;_He({target:"Object",stat:!0,forced:Object.assign!==QHe},{assign:QHe}),$ze.Object.assign;var MHe="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,RHe=!!Object.getOwnPropertySymbols&&!rze((function(){return!String(Symbol())})),PHe=RHe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,OHe=Nze("wks"),FHe=nze.Symbol,NHe=PHe?FHe:FHe&&FHe.withoutSetter||Gze,LHe=function(e){return yze(OHe,e)||(RHe&&yze(FHe,e)?OHe[e]=FHe[e]:OHe[e]=NHe("Symbol."+e)),OHe[e]},UHe={};UHe[LHe("toStringTag")]="z";var GHe,jHe="[object z]"===String(UHe),zHe=LHe("toStringTag"),HHe="Arguments"==uze(function(){return arguments}()),VHe=jHe?uze:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),zHe))?n:HHe?uze(t):"Object"==(r=uze(t))&&"function"==typeof t.callee?"Arguments":r},qHe=!rze((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),YHe=zze("IE_PROTO"),XHe=Object.prototype,WHe=qHe?Object.getPrototypeOf:function(e){return e=DHe(e),yze(e,YHe)?e[YHe]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?XHe:null},KHe=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Bze(n),function(e){if(!hze(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),JHe=_ze.f,ZHe=nze.Int8Array,$He=ZHe&&ZHe.prototype,eVe=nze.Uint8ClampedArray,tVe=eVe&&eVe.prototype,nVe=ZHe&&WHe(ZHe),rVe=$He&&WHe($He),oVe=Object.prototype,iVe=(oVe.isPrototypeOf,LHe("toStringTag")),aVe=Gze("TYPED_ARRAY_TAG"),sVe=MHe&&!!KHe&&"Opera"!==VHe(nze.opera),lVe={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},cVe={BigInt64Array:8,BigUint64Array:8};for(GHe in lVe)nze[GHe]||(sVe=!1);if((!sVe||"function"!=typeof nVe||nVe===Function.prototype)&&(nVe=function(){throw TypeError("Incorrect invocation")},sVe))for(GHe in lVe)nze[GHe]&&KHe(nze[GHe],nVe);if((!sVe||!rVe||rVe===oVe)&&(rVe=nVe.prototype,sVe))for(GHe in lVe)nze[GHe]&&KHe(nze[GHe].prototype,rVe);if(sVe&&WHe(tVe)!==rVe&&KHe(tVe,rVe),oze&&!yze(rVe,iVe))for(GHe in JHe(rVe,iVe,{get:function(){return hze(this)?this[aVe]:void 0}}),lVe)nze[GHe]&&Sze(nze[GHe],aVe,GHe);var uVe=Math.min,dVe=[].copyWithin||function(e,t){var n=DHe(this),r=aHe(n.length),o=cHe(e,r),i=cHe(t,r),a=arguments.length>2?arguments[2]:void 0,s=uVe((void 0===a?r:cHe(a,r))-i,r-o),l=1;for(i<o&&o<i+s&&(l=-1,i+=s-1,o+=s-1);s-- >0;)i in n?n[o]=n[i]:delete n[o],o+=l,i+=l;return n},AVe=function(e){if(function(e){if(!hze(e))return!1;var t=VHe(e);return yze(lVe,t)||yze(cVe,t)}(e))return e;throw TypeError("Target is not a typed array")};!function(e,t,n){if(oze){if(n)for(var r in lVe){var o=nze[r];o&&yze(o.prototype,e)&&delete o.prototype[e]}rVe[e]&&!n||Zze(rVe,e,n?t:sVe&&$He[e]||t)}}("copyWithin",(function(e,t){return dVe.call(AVe(this),e,t,arguments.length>2?arguments[2]:void 0)}));var fVe,pVe=oze?Object.defineProperties:function(e,t){Bze(e);for(var n,r=SHe(t),o=r.length,i=0;o>i;)_ze.f(e,n=r[i++],t[n]);return e},hVe=tHe("document","documentElement"),gVe=zze("IE_PROTO"),mVe=function(){},yVe=function(e){return"<script>"+e+"<\/script>"},vVe=function(){try{fVe=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;vVe=fVe?function(e){e.write(yVe("")),e.close();var t=e.parentWindow.Object;return e=null,t}(fVe):((t=Cze("iframe")).style.display="none",hVe.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(yVe("document.F=Object")),e.close(),e.F);for(var n=fHe.length;n--;)delete vVe.prototype[fHe[n]];return vVe()};Hze[gVe]=!0;var bVe=Object.create||function(e,t){var n;return null!==e?(mVe.prototype=Bze(e),n=new mVe,mVe.prototype=null,n[gVe]=e):n=vVe(),void 0===t?n:pVe(n,t)},CVe={},IVe=LHe("iterator"),EVe=Array.prototype,xVe=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},BVe=function(e,t,n){if(xVe(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},wVe=LHe("iterator"),_Ve=function(e){var t=e.return;if(void 0!==t)return Bze(t.call(e)).value},SVe=function(e,t){this.stopped=e,this.result=t},DVe=function(e,t,n){var r,o,i,a,s,l,c,u,d=n&&n.that,A=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),h=BVe(t,d,1+A+p),g=function(e){return r&&_Ve(r),new SVe(!0,e)},m=function(e){return A?(Bze(e),p?h(e[0],e[1],g):h(e[0],e[1])):p?h(e,g):h(e)};if(f)r=e;else{if("function"!=typeof(o=function(e){if(null!=e)return e[wVe]||e["@@iterator"]||CVe[VHe(e)]}(e)))throw TypeError("Target is not iterable");if(void 0!==(u=o)&&(CVe.Array===u||EVe[IVe]===u)){for(i=0,a=aHe(e.length);a>i;i++)if((s=m(e[i]))&&s instanceof SVe)return s;return new SVe(!1)}r=o.call(e)}for(l=r.next;!(c=l.call(r)).done;){try{s=m(c.value)}catch(e){throw _Ve(r),e}if("object"==typeof s&&s&&s instanceof SVe)return s}return new SVe(!1)},TVe=function(e,t){var n=this;if(!(n instanceof TVe))return new TVe(e,t);KHe&&(n=KHe(new Error(void 0),WHe(n))),void 0!==t&&Sze(n,"message",String(t));var r=[];return DVe(e,r.push,{that:r}),Sze(n,"errors",r),n};TVe.prototype=bVe(Error.prototype,{constructor:lze(5,TVe),message:lze(5,""),name:lze(5,"AggregateError")}),_He({global:!0},{AggregateError:TVe});var kVe=nze.Promise,QVe=_ze.f,MVe=LHe("toStringTag"),RVe=function(e,t,n){e&&!yze(e=n?e:e.prototype,MVe)&&QVe(e,MVe,{configurable:!0,value:t})},PVe=LHe("species"),OVe=LHe("iterator"),FVe=!1;try{var NVe=0,LVe={next:function(){return{done:!!NVe++}},return:function(){FVe=!0}};LVe[OVe]=function(){return this},Array.from(LVe,(function(){throw 2}))}catch(fDe){}var UVe,GVe,jVe,zVe=LHe("species"),HVe=function(e,t){var n,r=Bze(e).constructor;return void 0===r||null==(n=Bze(r)[zVe])?t:xVe(n)},VVe=tHe("navigator","userAgent")||"",qVe=/(iphone|ipod|ipad).*applewebkit/i.test(VVe),YVe="process"==uze(nze.process),XVe=nze.location,WVe=nze.setImmediate,KVe=nze.clearImmediate,JVe=nze.process,ZVe=nze.MessageChannel,$Ve=nze.Dispatch,eqe=0,tqe={},nqe=function(e){if(tqe.hasOwnProperty(e)){var t=tqe[e];delete tqe[e],t()}},rqe=function(e){return function(){nqe(e)}},oqe=function(e){nqe(e.data)},iqe=function(e){nze.postMessage(e+"",XVe.protocol+"//"+XVe.host)};WVe&&KVe||(WVe=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return tqe[++eqe]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},UVe(eqe),eqe},KVe=function(e){delete tqe[e]},YVe?UVe=function(e){JVe.nextTick(rqe(e))}:$Ve&&$Ve.now?UVe=function(e){$Ve.now(rqe(e))}:ZVe&&!qVe?(jVe=(GVe=new ZVe).port2,GVe.port1.onmessage=oqe,UVe=BVe(jVe.postMessage,jVe,1)):nze.addEventListener&&"function"==typeof postMessage&&!nze.importScripts&&XVe&&"file:"!==XVe.protocol&&!rze(iqe)?(UVe=iqe,nze.addEventListener("message",oqe,!1)):UVe="onreadystatechange"in Cze("script")?function(e){hVe.appendChild(Cze("script")).onreadystatechange=function(){hVe.removeChild(this),nqe(e)}}:function(e){setTimeout(rqe(e),0)});var aqe,sqe,lqe,cqe,uqe,dqe,Aqe,fqe,pqe={set:WVe,clear:KVe},hqe=/web0s(?!.*chrome)/i.test(VVe),gqe=xze.f,mqe=pqe.set,yqe=nze.MutationObserver||nze.WebKitMutationObserver,vqe=nze.document,bqe=nze.process,Cqe=nze.Promise,Iqe=gqe(nze,"queueMicrotask"),Eqe=Iqe&&Iqe.value;Eqe||(aqe=function(){var e,t;for(YVe&&(e=bqe.domain)&&e.exit();sqe;){t=sqe.fn,sqe=sqe.next;try{t()}catch(e){throw sqe?cqe():lqe=void 0,e}}lqe=void 0,e&&e.enter()},qVe||YVe||hqe||!yqe||!vqe?Cqe&&Cqe.resolve?(Aqe=Cqe.resolve(void 0),fqe=Aqe.then,cqe=function(){fqe.call(Aqe,aqe)}):cqe=YVe?function(){bqe.nextTick(aqe)}:function(){mqe.call(nze,aqe)}:(uqe=!0,dqe=vqe.createTextNode(""),new yqe(aqe).observe(dqe,{characterData:!0}),cqe=function(){dqe.data=uqe=!uqe}));var xqe,Bqe,wqe=Eqe||function(e){var t={fn:e,next:void 0};lqe&&(lqe.next=t),sqe||(sqe=t,cqe()),lqe=t},_qe=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=xVe(t),this.reject=xVe(n)},Sqe={f:function(e){return new _qe(e)}},Dqe=function(e,t){if(Bze(e),hze(t)&&t.constructor===e)return t;var n=Sqe.f(e);return(0,n.resolve)(t),n.promise},Tqe=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},kqe=nze.process,Qqe=kqe&&kqe.versions,Mqe=Qqe&&Qqe.v8;Mqe?Bqe=(xqe=Mqe.split("."))[0]+xqe[1]:VVe&&(!(xqe=VVe.match(/Edge\/(\d+)/))||xqe[1]>=74)&&(xqe=VVe.match(/Chrome\/(\d+)/))&&(Bqe=xqe[1]);var Rqe,Pqe,Oqe,Fqe,Nqe=Bqe&&+Bqe,Lqe=pqe.set,Uqe=LHe("species"),Gqe="Promise",jqe=Jze.get,zqe=Jze.set,Hqe=Jze.getterFor(Gqe),Vqe=kVe,qqe=nze.TypeError,Yqe=nze.document,Xqe=nze.process,Wqe=tHe("fetch"),Kqe=Sqe.f,Jqe=Kqe,Zqe=!!(Yqe&&Yqe.createEvent&&nze.dispatchEvent),$qe="function"==typeof PromiseRejectionEvent,eYe=BHe(Gqe,(function(){if(Pze(Vqe)===String(Vqe)){if(66===Nqe)return!0;if(!YVe&&!$qe)return!0}if(Nqe>=51&&/native code/.test(Vqe))return!1;var e=Vqe.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[Uqe]=t,!(e.then((function(){}))instanceof t)})),tYe=eYe||!function(){if(!FVe)return!1;var e=!1;try{var t={};t[OVe]=function(){return{next:function(){return{done:e=!0}}}},function(e){Vqe.all(e).catch((function(){}))}(t)}catch(fDe){}return e}(),nYe=function(e){var t;return!(!hze(e)||"function"!=typeof(t=e.then))&&t},rYe=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;wqe((function(){for(var r=e.value,o=1==e.state,i=0;n.length>i;){var a,s,l,c=n[i++],u=o?c.ok:c.fail,d=c.resolve,A=c.reject,f=c.domain;try{u?(o||(2===e.rejection&&sYe(e),e.rejection=1),!0===u?a=r:(f&&f.enter(),a=u(r),f&&(f.exit(),l=!0)),a===c.promise?A(qqe("Promise-chain cycle")):(s=nYe(a))?s.call(a,d,A):d(a)):A(r)}catch(e){f&&!l&&f.exit(),A(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&iYe(e)}))}},oYe=function(e,t,n){var r,o;Zqe?((r=Yqe.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),nze.dispatchEvent(r)):r={promise:t,reason:n},!$qe&&(o=nze["on"+e])?o(r):"unhandledrejection"===e&&function(e,t){var n=nze.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},iYe=function(e){Lqe.call(nze,(function(){var t,n=e.facade,r=e.value;if(aYe(e)&&(t=Tqe((function(){YVe?Xqe.emit("unhandledRejection",r,n):oYe("unhandledrejection",n,r)})),e.rejection=YVe||aYe(e)?2:1,t.error))throw t.value}))},aYe=function(e){return 1!==e.rejection&&!e.parent},sYe=function(e){Lqe.call(nze,(function(){var t=e.facade;YVe?Xqe.emit("rejectionHandled",t):oYe("rejectionhandled",t,e.value)}))},lYe=function(e,t,n){return function(r){e(t,r,n)}},cYe=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,rYe(e,!0))},uYe=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw qqe("Promise can't be resolved itself");var r=nYe(t);r?wqe((function(){var n={done:!1};try{r.call(t,lYe(uYe,n,e),lYe(cYe,n,e))}catch(t){cYe(n,t,e)}})):(e.value=t,e.state=1,rYe(e,!1))}catch(t){cYe({done:!1},t,e)}}};eYe&&(Vqe=function(e){!function(e,t){if(!(e instanceof t))throw TypeError("Incorrect Promise invocation")}(this,Vqe),xVe(e),Rqe.call(this);var t=jqe(this);try{e(lYe(uYe,t),lYe(cYe,t))}catch(e){cYe(t,e)}},(Rqe=function(e){zqe(this,{type:Gqe,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(e,t){for(var n in t)Zze(e,n,t[n],undefined);return e}(Vqe.prototype,{then:function(e,t){var n=Hqe(this),r=Kqe(HVe(this,Vqe));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=YVe?Xqe.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&rYe(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),Pqe=function(){var e=new Rqe,t=jqe(e);this.promise=e,this.resolve=lYe(uYe,t),this.reject=lYe(cYe,t)},Sqe.f=Kqe=function(e){return e===Vqe||e===Oqe?new Pqe(e):Jqe(e)},"function"==typeof kVe&&(Fqe=kVe.prototype.then,Zze(kVe.prototype,"then",(function(e,t){var n=this;return new Vqe((function(e,t){Fqe.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof Wqe&&_He({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return Dqe(Vqe,Wqe.apply(nze,arguments))}}))),_He({global:!0,wrap:!0,forced:eYe},{Promise:Vqe}),RVe(Vqe,Gqe,!1),function(e){var t=tHe(e),n=_ze.f;oze&&t&&!t[PVe]&&n(t,PVe,{configurable:!0,get:function(){return this}})}(Gqe),Oqe=tHe(Gqe),_He({target:Gqe,stat:!0,forced:eYe},{reject:function(e){var t=Kqe(this);return t.reject.call(void 0,e),t.promise}}),_He({target:Gqe,stat:!0,forced:eYe},{resolve:function(e){return Dqe(this,e)}}),_He({target:Gqe,stat:!0,forced:tYe},{all:function(e){var t=this,n=Kqe(t),r=n.resolve,o=n.reject,i=Tqe((function(){var n=xVe(t.resolve),i=[],a=0,s=1;DVe(e,(function(e){var l=a++,c=!1;i.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,i[l]=e,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=Kqe(t),r=n.reject,o=Tqe((function(){var o=xVe(t.resolve);DVe(e,(function(e){o.call(t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}}),_He({target:"Promise",stat:!0},{any:function(e){var t=this,n=Sqe.f(t),r=n.resolve,o=n.reject,i=Tqe((function(){var n=xVe(t.resolve),i=[],a=0,s=1,l=!1;DVe(e,(function(e){var c=a++,u=!1;i.push(void 0),s++,n.call(t,e).then((function(e){u||l||(l=!0,r(e))}),(function(e){u||l||(u=!0,i[c]=e,--s||o(new(tHe("AggregateError"))(i,"No one promise resolved")))}))})),--s||o(new(tHe("AggregateError"))(i,"No one promise resolved"))}));return i.error&&o(i.value),n.promise}});var dYe,AYe,fYe,pYe=function(e){return function(t,n){var r,o,i=String(fze(t)),a=oHe(n),s=i.length;return a<0||a>=s?e?"":void 0:(r=i.charCodeAt(a))<55296||r>56319||a+1===s||(o=i.charCodeAt(a+1))<56320||o>57343?e?i.charAt(a):r:e?i.slice(a,a+2):o-56320+(r-55296<<10)+65536}},hYe={codeAt:pYe(!1),charAt:pYe(!0)},gYe=LHe("iterator"),mYe=!1;[].keys&&("next"in(fYe=[].keys())?(AYe=WHe(WHe(fYe)))!==Object.prototype&&(dYe=AYe):mYe=!0),(null==dYe||rze((function(){var e={};return dYe[gYe].call(e)!==e})))&&(dYe={}),yze(dYe,gYe)||Sze(dYe,gYe,(function(){return this}));var yYe={IteratorPrototype:dYe,BUGGY_SAFARI_ITERATORS:mYe},vYe=yYe.IteratorPrototype,bYe=function(){return this},CYe=yYe.IteratorPrototype,IYe=yYe.BUGGY_SAFARI_ITERATORS,EYe=LHe("iterator"),xYe=function(){return this},BYe=function(e,t,n,r,o,i,a){!function(e,t,n){var r=t+" Iterator";e.prototype=bVe(vYe,{next:lze(1,n)}),RVe(e,r,!1),CVe[r]=bYe}(n,t,r);var s,l,c,u=function(e){if(e===o&&h)return h;if(!IYe&&e in f)return f[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",A=!1,f=e.prototype,p=f[EYe]||f["@@iterator"]||o&&f[o],h=!IYe&&p||u(o),g="Array"==t&&f.entries||p;if(g&&(s=WHe(g.call(new e)),CYe!==Object.prototype&&s.next&&(WHe(s)!==CYe&&(KHe?KHe(s,CYe):"function"!=typeof s[EYe]&&Sze(s,EYe,xYe)),RVe(s,d,!0))),"values"==o&&p&&"values"!==p.name&&(A=!0,h=function(){return p.call(this)}),f[EYe]!==h&&Sze(f,EYe,h),CVe[t]=h,o)if(l={values:u("values"),keys:i?h:u("keys"),entries:u("entries")},a)for(c in l)(IYe||A||!(c in f))&&Zze(f,c,l[c]);else _He({target:t,proto:!0,forced:IYe||A},l);return l},wYe=hYe.charAt,_Ye=Jze.set,SYe=Jze.getterFor("String Iterator");BYe(String,"String",(function(e){_Ye(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=SYe(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=wYe(n,r),t.index+=e.length,{value:e,done:!1})}));var DYe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},TYe=LHe("unscopables"),kYe=Array.prototype;null==kYe[TYe]&&_ze.f(kYe,TYe,{configurable:!0,value:bVe(null)});var QYe=function(e){kYe[TYe][e]=!0},MYe=Jze.set,RYe=Jze.getterFor("Array Iterator"),PYe=BYe(Array,"Array",(function(e,t){MYe(this,{type:"Array Iterator",target:pze(e),index:0,kind:t})}),(function(){var e=RYe(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");CVe.Arguments=CVe.Array,QYe("keys"),QYe("values"),QYe("entries");var OYe=LHe("iterator"),FYe=LHe("toStringTag"),NYe=PYe.values;for(var LYe in DYe){var UYe=nze[LYe],GYe=UYe&&UYe.prototype;if(GYe){if(GYe[OYe]!==NYe)try{Sze(GYe,OYe,NYe)}catch(fDe){GYe[OYe]=NYe}if(GYe[FYe]||Sze(GYe,FYe,LYe),DYe[LYe])for(var jYe in PYe)if(GYe[jYe]!==PYe[jYe])try{Sze(GYe,jYe,PYe[jYe])}catch(fDe){GYe[jYe]=PYe[jYe]}}}$ze.Promise.any;var zYe=!!kVe&&rze((function(){kVe.prototype.finally.call({then:function(){}},(function(){}))}));_He({target:"Promise",proto:!0,real:!0,forced:zYe},{finally:function(e){var t=HVe(this,tHe("Promise")),n="function"==typeof e;return this.then(n?function(n){return Dqe(t,e()).then((function(){return n}))}:e,n?function(n){return Dqe(t,e()).then((function(){throw n}))}:e)}}),"function"!=typeof kVe||kVe.prototype.finally||Zze(kVe.prototype,"finally",tHe("Promise").prototype.finally);var HYe=Function.call;BVe(HYe,nze.Promise.prototype.finally,undefined),_He({target:"Promise",stat:!0},{try:function(e){var t=Sqe.f(this),n=Tqe(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}}),$ze.Promise.try,_He({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=Sqe.f(t),r=n.resolve,o=n.reject,i=Tqe((function(){var n=xVe(t.resolve),o=[],i=0,a=1;DVe(e,(function(e){var s=i++,l=!1;o.push(void 0),a++,n.call(t,e).then((function(e){l||(l=!0,o[s]={status:"fulfilled",value:e},--a||r(o))}),(function(e){l||(l=!0,o[s]={status:"rejected",reason:e},--a||r(o))}))})),--a||r(o)}));return i.error&&o(i.value),n.promise}}),$ze.Promise.allSettled;var VYe=jHe?{}.toString:function(){return"[object "+VHe(this)+"]"};jHe||Zze(Object.prototype,"toString",VYe,{unsafe:!0}),$ze.Promise;var qYe=function(e,t){return(qYe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function YYe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}qYe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var XYe=eze((function(e,t){var r,o=(r=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||Zje,function(e){var t;e=e||{},t||(t=void 0!==e?e:{});var o,i,a=function(){function e(){}function t(e){if(!(this instanceof t))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(e,this)}function n(e,n){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,t._immediateFn((function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var i;try{i=t(e._value)}catch(e){return void o(n.promise,e)}r(n.promise,i)}else(1===e._state?r:o)(n.promise,e._value)}))):e._deferreds.push(n)}function r(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var r=n.then;if(n instanceof t)return e._state=3,e._value=n,void i(e);if("function"==typeof r)return void s((a=r,l=n,function(){a.apply(l,arguments)}),e)}e._state=1,e._value=n,i(e)}catch(t){o(e,t)}var a,l}function o(e,t){e._state=2,e._value=t,i(e)}function i(e){2===e._state&&0===e._deferreds.length&&t._immediateFn((function(){e._handled||t._unhandledRejectionFn(e._value)}));for(var r=0,o=e._deferreds.length;r<o;r++)n(e,e._deferreds[r]);e._deferreds=null}function a(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function s(e,t){var n=!1;try{e((function(e){n||(n=!0,r(t,e))}),(function(e){n||(n=!0,o(t,e))}))}catch(e){if(n)return;n=!0,o(t,e)}}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(t,r){var o=new this.constructor(e);return n(this,new a(t,r,o)),o},t.all=function(e){return new t((function(t,n){if(!Array.isArray(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function i(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){i(e,t)}),n)}r[e]=a,0==--o&&t(r)}catch(e){n(e)}}for(var a=0;a<r.length;a++)i(a,r[a])}))},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t((function(t){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(n,r){if(!Array.isArray(e))return r(new TypeError("Promise.race accepts an array"));for(var o=0,i=e.length;o<i;o++)t.resolve(e[o]).then(n,r)}))},t._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){setTimeout(e,0)},t._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t}();t.ready=new a((function(e,t){o=e,i=t})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_getErrorName")||(Object.defineProperty(t.ready,"_ZSTD_getErrorName",{configurable:!0,get:function(){te("You are getting _ZSTD_getErrorName on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_getErrorName",{configurable:!0,set:function(){te("You are setting _ZSTD_getErrorName on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_isError")||(Object.defineProperty(t.ready,"_ZSTD_isError",{configurable:!0,get:function(){te("You are getting _ZSTD_isError on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_isError",{configurable:!0,set:function(){te("You are setting _ZSTD_isError on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_DStreamInSize")||(Object.defineProperty(t.ready,"_ZSTD_DStreamInSize",{configurable:!0,get:function(){te("You are getting _ZSTD_DStreamInSize on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_DStreamInSize",{configurable:!0,set:function(){te("You are setting _ZSTD_DStreamInSize on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_DStreamOutSize")||(Object.defineProperty(t.ready,"_ZSTD_DStreamOutSize",{configurable:!0,get:function(){te("You are getting _ZSTD_DStreamOutSize on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_DStreamOutSize",{configurable:!0,set:function(){te("You are setting _ZSTD_DStreamOutSize on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_createDStream")||(Object.defineProperty(t.ready,"_ZSTD_createDStream",{configurable:!0,get:function(){te("You are getting _ZSTD_createDStream on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_createDStream",{configurable:!0,set:function(){te("You are setting _ZSTD_createDStream on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_initDStream")||(Object.defineProperty(t.ready,"_ZSTD_initDStream",{configurable:!0,get:function(){te("You are getting _ZSTD_initDStream on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_initDStream",{configurable:!0,set:function(){te("You are setting _ZSTD_initDStream on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_decompressStream_simpleArgs")||(Object.defineProperty(t.ready,"_ZSTD_decompressStream_simpleArgs",{configurable:!0,get:function(){te("You are getting _ZSTD_decompressStream_simpleArgs on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_decompressStream_simpleArgs",{configurable:!0,set:function(){te("You are setting _ZSTD_decompressStream_simpleArgs on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_freeDStream")||(Object.defineProperty(t.ready,"_ZSTD_freeDStream",{configurable:!0,get:function(){te("You are getting _ZSTD_freeDStream on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_freeDStream",{configurable:!0,set:function(){te("You are setting _ZSTD_freeDStream on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_decompress")||(Object.defineProperty(t.ready,"_ZSTD_decompress",{configurable:!0,get:function(){te("You are getting _ZSTD_decompress on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_decompress",{configurable:!0,set:function(){te("You are setting _ZSTD_decompress on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_getFrameContentSize")||(Object.defineProperty(t.ready,"_ZSTD_getFrameContentSize",{configurable:!0,get:function(){te("You are getting _ZSTD_getFrameContentSize on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_getFrameContentSize",{configurable:!0,set:function(){te("You are setting _ZSTD_getFrameContentSize on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_emscripten_stack_get_end")||(Object.defineProperty(t.ready,"_emscripten_stack_get_end",{configurable:!0,get:function(){te("You are getting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_emscripten_stack_get_end",{configurable:!0,set:function(){te("You are setting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_emscripten_stack_get_free")||(Object.defineProperty(t.ready,"_emscripten_stack_get_free",{configurable:!0,get:function(){te("You are getting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_emscripten_stack_get_free",{configurable:!0,set:function(){te("You are setting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_emscripten_stack_init")||(Object.defineProperty(t.ready,"_emscripten_stack_init",{configurable:!0,get:function(){te("You are getting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_emscripten_stack_init",{configurable:!0,set:function(){te("You are setting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"___cxa_demangle")||(Object.defineProperty(t.ready,"___cxa_demangle",{configurable:!0,get:function(){te("You are getting ___cxa_demangle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"___cxa_demangle",{configurable:!0,set:function(){te("You are setting ___cxa_demangle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_stackSave")||(Object.defineProperty(t.ready,"_stackSave",{configurable:!0,get:function(){te("You are getting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_stackSave",{configurable:!0,set:function(){te("You are setting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_stackRestore")||(Object.defineProperty(t.ready,"_stackRestore",{configurable:!0,get:function(){te("You are getting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_stackRestore",{configurable:!0,set:function(){te("You are setting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_stackAlloc")||(Object.defineProperty(t.ready,"_stackAlloc",{configurable:!0,get:function(){te("You are getting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_stackAlloc",{configurable:!0,set:function(){te("You are setting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"___wasm_call_ctors")||(Object.defineProperty(t.ready,"___wasm_call_ctors",{configurable:!0,get:function(){te("You are getting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"___wasm_call_ctors",{configurable:!0,set:function(){te("You are setting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_fflush")||(Object.defineProperty(t.ready,"_fflush",{configurable:!0,get:function(){te("You are getting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_fflush",{configurable:!0,set:function(){te("You are setting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"___errno_location")||(Object.defineProperty(t.ready,"___errno_location",{configurable:!0,get:function(){te("You are getting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"___errno_location",{configurable:!0,set:function(){te("You are setting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_malloc")||(Object.defineProperty(t.ready,"_malloc",{configurable:!0,get:function(){te("You are getting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_malloc",{configurable:!0,set:function(){te("You are setting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_free")||(Object.defineProperty(t.ready,"_free",{configurable:!0,get:function(){te("You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_free",{configurable:!0,set:function(){te("You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"onRuntimeInitialized")||(Object.defineProperty(t.ready,"onRuntimeInitialized",{configurable:!0,get:function(){te("You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"onRuntimeInitialized",{configurable:!0,set:function(){te("You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}));var s,l,c,u,d,A={};for(s in t)t.hasOwnProperty(s)&&(A[s]=t[s]);if(l="object"==typeof window,c="function"==typeof importScripts,u="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,d=!l&&!u&&!c,t.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var f,p,h,g,m,y="";if(u)y=c?n(46).dirname(y)+"/":"//",f=function(e,t){var r=ye(e);return r?t?r:r.toString():(g||(g=n(862)),m||(m=n(46)),e=m.normalize(e),g.readFileSync(e,t?null:"utf8"))},h=function(e){var t=f(e,!0);return t.buffer||(t=new Uint8Array(t)),w(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof Se))throw e})),process.on("unhandledRejection",te),t.inspect=function(){return"[Emscripten Module object]"};else if(d)"undefined"!=typeof read&&(f=function(e){var t=ye(e);return t?ge(t):read(e)}),h=function(e){var t;return(t=ye(e))?t:"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(w("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs&&scriptArgs,"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print);else{if(!l&&!c)throw new Error("environment detection error");c?y=self.location.href:"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),r&&(y=r),y=0!==y.indexOf("blob:")?y.substr(0,y.lastIndexOf("/")+1):"",f=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}catch(t){var n=ye(e);if(n)return ge(n);throw t}},c&&(h=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}catch(t){var n=ye(e);if(n)return n;throw t}}),p=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||0==r.status&&r.response)t(r.response);else{var o=ye(e);o?t(o.buffer):n()}},r.onerror=n,r.send(null)}}t.print||console.log.bind(console);var v=t.printErr||console.warn.bind(console);for(s in A)A.hasOwnProperty(s)&&(t[s]=A[s]);function b(e){b.shown||(b.shown={}),b.shown[e]||(b.shown[e]=1,v(e))}A=null,t.arguments&&t.arguments,Object.getOwnPropertyDescriptor(t,"arguments")||Object.defineProperty(t,"arguments",{configurable:!0,get:function(){te("Module.arguments has been replaced with plain arguments_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),t.thisProgram&&t.thisProgram,Object.getOwnPropertyDescriptor(t,"thisProgram")||Object.defineProperty(t,"thisProgram",{configurable:!0,get:function(){te("Module.thisProgram has been replaced with plain thisProgram (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),t.quit&&t.quit,Object.getOwnPropertyDescriptor(t,"quit")||Object.defineProperty(t,"quit",{configurable:!0,get:function(){te("Module.quit has been replaced with plain quit_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),w(void 0===t.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),w(void 0===t.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),w(void 0===t.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),w(void 0===t.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),w(void 0===t.read,"Module.read option was removed (modify read_ in JS)"),w(void 0===t.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),w(void 0===t.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),w(void 0===t.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),w(void 0===t.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Object.getOwnPropertyDescriptor(t,"read")||Object.defineProperty(t,"read",{configurable:!0,get:function(){te("Module.read has been replaced with plain read_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(t,"readAsync")||Object.defineProperty(t,"readAsync",{configurable:!0,get:function(){te("Module.readAsync has been replaced with plain readAsync (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(t,"readBinary")||Object.defineProperty(t,"readBinary",{configurable:!0,get:function(){te("Module.readBinary has been replaced with plain readBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(t,"setWindowTitle")||Object.defineProperty(t,"setWindowTitle",{configurable:!0,get:function(){te("Module.setWindowTitle has been replaced with plain setWindowTitle (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}});var C,I=0;t.wasmBinary&&(C=t.wasmBinary),Object.getOwnPropertyDescriptor(t,"wasmBinary")||Object.defineProperty(t,"wasmBinary",{configurable:!0,get:function(){te("Module.wasmBinary has been replaced with plain wasmBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),t.noExitRuntime,Object.getOwnPropertyDescriptor(t,"noExitRuntime")||Object.defineProperty(t,"noExitRuntime",{configurable:!0,get:function(){te("Module.noExitRuntime has been replaced with plain noExitRuntime (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}});var E,x={Memory:function(e){this.buffer=new ArrayBuffer(65536*e.initial)},Module:function(e){},Instance:function(e,t){this.exports=function(e){for(var t,n=new Uint8Array(123),r=25;r>=0;--r)n[48+r]=52+r,n[65+r]=r,n[97+r]=26+r;function o(e,t,r){for(var o,i,a=0,s=t,l=r.length,c=t+(3*l>>2)-("="==r[l-2])-("="==r[l-1]);a<l;a+=4)o=n[r.charCodeAt(a+1)],i=n[r.charCodeAt(a+2)],e[s++]=n[r.charCodeAt(a)]<<2|o>>4,s<c&&(e[s++]=o<<4|i>>2),s<c&&(e[s++]=i<<6|n[r.charCodeAt(a+3)])}n[43]=62,n[47]=63;var i=new ArrayBuffer(16),a=new Int32Array(i),s=new Float64Array(i);function l(e){return a[e]}function c(e,t){a[e]=t}function u(){return s[0]}function d(e){s[0]=e}return function(e){var n=e.memory,r=n.buffer;n.grow=function(e){e|=0;var o=0|Zn(),l=o+e|0;if(o<l&&l<65536){var c=new ArrayBuffer(m(l,65536));new Int8Array(c).set(i),i=new Int8Array(c),a=new Int16Array(c),s=new Int32Array(c),A=new Uint8Array(c),f=new Uint16Array(c),p=new Uint32Array(c),h=new Float32Array(c),g=new Float64Array(c),r=c,n.buffer=r,t=A}return o};var i=new Int8Array(r),a=new Int16Array(r),s=new Int32Array(r),A=new Uint8Array(r),f=new Uint16Array(r),p=new Uint32Array(r),h=new Float32Array(r),g=new Float64Array(r),m=Math.imul,y=Math.abs,v=Math.clz32,b=e.abort,C=e.emscripten_resize_heap,I=e.emscripten_memcpy_big,E=e.setTempRet0,x=5259632,B=0,w=0;function _(e,t,n,r,o){var a,l,c=0,u=0,d=0,f=0,h=0,g=0,m=0,y=0,b=0,C=0,I=0,E=0,B=0,w=0,_=0,S=0,D=0,M=0,R=0,O=0,F=0,N=0,L=0,U=0,G=0,j=0,z=0,H=0,V=0,q=0,Y=0,W=0,J=0,Z=0,$=0;x=a=x-224|0,l=!(u=s[4+(c=e+29384|0)>>2])&(c=s[c>>2])>>>0>33554432|0!=(0|u),E=-72;e:if(!(o>>>0>131071||(E=function(e,t,n){var r=0,o=0,a=0,l=0,c=0,u=0,d=0,f=0;d=-20;t:if(!(n>>>0<3)){n:{r:{o:{i:{a:switch((u=3&(c=A[0|t]))-1|0){case 0:break o;case 1:break i;case 2:break a;default:break r}if(!s[e+29432>>2])return-30}if(n>>>0<5)break t;l=3,r=A[0|t]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24;i:{a:{s:{l:{switch((a=c>>>2&3)-2|0){case 0:break l;case 1:break s}o=r>>>14&1023,r=r>>>4&1023,a=!a;break i}o=r>>>18|0,l=4,r=r>>>4&16383;break a}o=A[t+4|0]<<10|r>>>22,l=5,r=r>>>4&262143}a=0}if(r>>>0>131072)break t;if((f=o+l|0)>>>0>n>>>0)break t;if(!s[e+29588>>2]|r>>>0<769)break n;for(n=0;;){if(n>>>0>=16324)break n;n=n+512|0}}o=2;o:{switch((c>>>2&3)-1|0){default:o=1,n=c>>>3|0;break o;case 0:n=(A[0|t]|A[t+1|0]<<8)>>>4|0;break o;case 2:}if(n>>>0<4)break t;if((n=A[0|t]|A[t+1|0]<<8|A[t+2|0]<<16)>>>0>2097167)break t;o=3,n=n>>>4|0}t=fe(e+29672|0,A[t+o|0],n+32|0),s[e+29560>>2]=n,s[e+29544>>2]=t,d=o+1|0;break t}o=2,a=n;r:{switch((c>>>2&3)-1|0){default:o=1,r=c>>>3|0;break r;case 0:r=(A[0|t]|A[t+1|0]<<8)>>>4|0;break r;case 2:}o=3,r=(A[0|t]|A[t+1|0]<<8|A[t+2|0]<<16)>>>4|0}if((l=a)>>>0<32+(a=r+o|0)>>>0){if(n>>>0<a>>>0)break t;return t=te(e+29672|0,t+o|0,r),s[e+29560>>2]=r,s[e+29544>>2]=t,i[24+(e=t+r|0)|0]=0,i[e+25|0]=0,i[e+26|0]=0,i[e+27|0]=0,i[e+28|0]=0,i[e+29|0]=0,i[e+30|0]=0,i[e+31|0]=0,i[e+16|0]=0,i[e+17|0]=0,i[e+18|0]=0,i[e+19|0]=0,i[e+20|0]=0,i[e+21|0]=0,i[e+22|0]=0,i[e+23|0]=0,i[e+8|0]=0,i[e+9|0]=0,i[e+10|0]=0,i[e+11|0]=0,i[e+12|0]=0,i[e+13|0]=0,i[e+14|0]=0,i[e+15|0]=0,i[0|e]=0,i[e+1|0]=0,i[e+2|0]=0,i[e+3|0]=0,i[e+4|0]=0,i[e+5|0]=0,i[e+6|0]=0,i[e+7|0]=0,a}return s[e+29560>>2]=r,s[e+29544>>2]=t+o,a}n:if(3!=(0|u))if(n=e+10280|0,a){if((t=P(n,a=t+l|0,o,e+27308|0))>>>0>4294967176|t>>>0>=o>>>0)break t;t=K(e+29672|0,r,t+a|0,o-t|0,n)}else t=we(n,e+29672|0,r,t+l|0,o,e+27308|0);else{if(t=t+l|0,n=e+29672|0,l=s[e+12>>2],c=s[l>>2]>>>8|0,a){if(255&c){t=X(n,r,t,o,l);break n}t=K(n,r,t,o,l);break n}if(255&c){t=T(n,r,t,o,l);break n}t=Q(n,r,t,o,l)}if(!(t>>>0>4294967176))return s[e+29560>>2]=r,s[e+29432>>2]=1,s[e+29544>>2]=e+29672,2==(0|u)&&(s[e+12>>2]=e+10280),i[0|(e=29696+(t=e+r|0)|0)]=0,i[e+1|0]=0,i[e+2|0]=0,i[e+3|0]=0,i[e+4|0]=0,i[e+5|0]=0,i[e+6|0]=0,i[e+7|0]=0,i[0|(e=t+29688|0)]=0,i[e+1|0]=0,i[e+2|0]=0,i[e+3|0]=0,i[e+4|0]=0,i[e+5|0]=0,i[e+6|0]=0,i[e+7|0]=0,i[0|(e=t+29680|0)]=0,i[e+1|0]=0,i[e+2|0]=0,i[e+3|0]=0,i[e+4|0]=0,i[e+5|0]=0,i[e+6|0]=0,i[e+7|0]=0,i[0|(e=t+29672|0)]=0,i[e+1|0]=0,i[e+2|0]=0,i[e+3|0]=0,i[e+4|0]=0,i[e+5|0]=0,i[e+6|0]=0,i[e+7|0]=0,f}return d}(e,r,o))>>>0>4294967176))if(u=s[e+29588>>2],h=r+E|0,c=r,(r=function(e,t,n,r){var o=0,i=0,a=0,l=0,c=0;c=-72;t:{n:if(r){if(!(o=A[0|n]))break t;if(i=n+1|0,!((0|(l=o<<24>>24))>-1))if(-1!=(0|l)){if((0|r)<2)break n;o=(A[n+1|0]|o<<8)-32768|0,i=n+2|0}else{if((0|r)<3)break n;o=32512+(A[n+1|0]|A[n+2|0]<<8)|0,i=n+3|0}s[t>>2]=o,(t=i+1|0)>>>0>(r=n+r|0)>>>0||(c=-20,l=e+27308|0,(a=ye(e+16|0,e,(i=A[0|i])>>>6|0,35,9,t,r-t|0,2144,2288,2448,s[e+29436>>2],s[e+29588>>2],o,l))>>>0>4294967176||(a=ye(e+4120|0,e+8|0,i>>>4&3,31,8,t=a>>>0<4294967177?t+a|0:t,r-t|0,1440,1568,2976,s[e+29436>>2],s[e+29588>>2],o,l))>>>0>4294967176||(e=ye(e+6176|0,e+4|0,i>>>2&3,52,9,t=a>>>0<4294967177?t+a|0:t,r-t|0,1696,1920,3248,s[e+29436>>2],s[e+29588>>2],o,l))>>>0>4294967176||(c=(e+t|0)-n|0))}return c}return s[t>>2]=0,1==(0|r)?1:-72}(e,a+52|0,c=(r=E>>>0<4294967177)?h:c,o=o-(r?E:0)|0))>>>0>4294967176)E=r;else if(M=s[a+52>>2],t||(E=-70,!((0|M)>0))){h=o-r|0,I=r+c|0;t:{n:{if(u)s[e+29588>>2]=0;else{if((0|M)<5)break n;if(r=s[(o=e+29384|0)>>2],!s[o+4>>2]&r>>>0<=16777216)break n;for(r=(o=s[e+8>>2])+8|0,c=s[o+4>>2],E=0,o=0;E=(A[2+(r+(o<<3)|0)|0]>22)+E|0,!((o=o+1|0)>>>c|0););if(s[e+29588>>2]=0,E<<8-c>>>0<20)break t}if(o=s[e+29544>>2],s[a+204>>2]=o,H=t+n|0,Y=s[e+29560>>2]+o|0,r=t,M){if(j=s[e+29368>>2],W=s[e+29364>>2],R=s[e+29360>>2],s[e+29436>>2]=1,s[a+108>>2]=s[e+26676>>2],n=s[4+(r=N=e+26668|0)>>2],s[a+100>>2]=s[r>>2],s[a+104>>2]=n,s[a+116>>2]=j,s[a+112>>2]=R,D=t-R|0,s[a+120>>2]=D,E=-20,!h)break e;if(s[a+68>>2]=I,s[a+72>>2]=I+4,h>>>0>=4){if(n=I+(r=h-4|0)|0,s[a+64>>2]=n,o=A[0|n]|A[n+1|0]<<8|A[n+2|0]<<16|A[n+3|0]<<24,s[a+56>>2]=o,!(n=A[(h+I|0)-1|0])|h>>>0>4294967176)break e;n=v(n)-23|0}else{switch(s[a+64>>2]=I,o=A[0|I],s[a+56>>2]=o,h-2|0){case 1:o=A[I+2|0]<<16|o;case 0:o=(A[I+1|0]<<8)+o|0,s[a+56>>2]=o}if(!(n=A[(h+I|0)-1|0]))break e;r=0,n=9+(v(n)-(h<<3)|0)|0}f=s[e>>2],g=o>>>0-(n=(c=s[f+4>>2])+n|0)&s[3776+(c<<2)>>2],s[a+76>>2]=g,n>>>0>32?u=n:(0|r)>=4?(u=7&n,s[a+60>>2]=u,n=I+(r=r-(n>>>3|0)|0)|0,s[a+64>>2]=n,o=A[0|n]|A[n+1|0]<<8|A[n+2|0]<<16|A[n+3|0]<<24,s[a+56>>2]=o):r?(o=I+(r=r-(c=I>>>0>(r+I|0)-(o=n>>>3|0)>>>0?r:o)|0)|0,s[a+64>>2]=o,o=A[0|o]|A[o+1|0]<<8|A[o+2|0]<<16|A[o+3|0]<<24,s[a+56>>2]=o,u=n-(c<<3)|0):(r=0,u=n),h=(0|M)<4,O=f+8|0,s[a+80>>2]=O,c=u,u=s[e+8>>2],b=o>>>0-(c=c+(n=s[u+4>>2])|0)&s[3776+(n<<2)>>2],s[a+84>>2]=b,c>>>0>32||((0|r)>=4?(n=I+(r=r-(c>>>3|0)|0)|0,s[a+64>>2]=n,o=A[0|n]|A[n+1|0]<<8|A[n+2|0]<<16|A[n+3|0]<<24,s[a+56>>2]=o,c&=7):r?(o=I+(r=r-(n=I>>>0>(r+I|0)-(n=c>>>3|0)>>>0?r:n)|0)|0,s[a+64>>2]=o,o=A[0|o]|A[o+1|0]<<8|A[o+2|0]<<16|A[o+3|0]<<24,s[a+56>>2]=o,c=c-(n<<3)|0):r=0),J=h?M:4,F=u+8|0,s[a+88>>2]=F,u=s[e+4>>2],c=(e=s[u+4>>2])+c|0,s[a+60>>2]=c,n=0,S=s[3776+(e<<2)>>2]&o>>>0-c,s[a+92>>2]=S;r:{o:if(c>>>0>=33)s[a+96>>2]=u+8;else{i:{a:{if((0|r)>=4)n=7&c,s[a+60>>2]=n,r=I+(e=r-(c>>>3|0)|0)|0,s[a+64>>2]=r,o=A[0|r]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24,s[a+56>>2]=o,c=n;else{if(r)break a;e=0}s[a+96>>2]=u+8;break i}if(c=c-((e=I>>>0>(r+I|0)-(e=c>>>3|0)>>>0?r:e)<<3)|0,s[a+60>>2]=c,n=I+(e=r-e|0)|0,s[a+64>>2]=n,o=A[0|n]|A[n+1|0]<<8|A[n+2|0]<<16|A[n+3|0]<<24,s[a+96>>2]=u+8,s[a+56>>2]=o,n=0,c>>>0>32)break o}for(z=(0|J)>0?J:0,G=u+8|0,m=e,h=e,f=e,d=e,r=e,n=0;;){y=a;i:{if((0|r)>=4)u=7&c,s[a+60>>2]=u,r=I+(e=r-(c>>>3|0)|0)|0,s[a+64>>2]=r,o=A[0|r]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24;else{if(!r){u=c,r=0;break i}u=c-((e=I>>>0>(r+I|0)-(e=c>>>3|0)>>>0?r:e)<<3)|0,s[a+60>>2]=u,r=I+(e=r-e|0)|0,s[a+64>>2]=r,o=A[0|r]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24}s[y+56>>2]=o,m=e,h=e,f=e,d=e,r=e}if((0|n)==(0|z)){c=u,n=z;break r}Z=255&(L=(65535&(g=y=s[4+(c=(g<<3)+O|0)>>2]))<<16|(w=s[c>>2])>>>16),$=255&(U=(65535&(y=C=s[4+(c=(S<<3)+G|0)>>2]))<<16|(S=s[c>>2])>>>16),B=s[4+(c=(b<<3)+F|0)>>2],C=s[c>>2],b=c=B,V=y,B=g;i:if((_=255&(c=(65535&c)<<16|C>>>16))>>>0>=2){a:if(!l|_>>>0<25)if(b=b+(o<<u>>>0-c|0)|0,(u=u+_|0)>>>0>32)c=u;else{if(r=a,(0|d)>=4)c=7&u,s[a+60>>2]=c,o=I+(e=d-(u>>>3|0)|0)|0,s[a+64>>2]=o,o=A[0|o]|A[o+1|0]<<8|A[o+2|0]<<16|A[o+3|0]<<24;else{if(!d){d=0,c=u,r=0;break a}c=u-((e=I>>>0>(d+I|0)-(e=u>>>3|0)>>>0?d:e)<<3)|0,s[a+60>>2]=c,o=I+(e=d-e|0)|0,s[a+64>>2]=o,o=A[0|o]|A[o+1|0]<<8|A[o+2|0]<<16|A[o+3|0]<<24}s[r+56>>2]=o,m=e,h=e,f=e,d=e,r=e}else{q=_,c=o<<u>>>0-(_=(c=32-u|0)>>>0>_>>>0?_:c)<<(q=q-_|0);s:if(!((u=u+_|0)>>>0>32)){if((0|f)>=4)r=I+(e=f-(u>>>3|0)|0)|0,s[a+64>>2]=r,o=A[0|r]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24,s[a+56>>2]=o,u&=7;else{if(!f){f=0,d=0,r=0;break s}o=I+(e=f-(r=I>>>0>(f+I|0)-(e=u>>>3|0)>>>0?f:e)|0)|0,s[a+64>>2]=o,o=A[0|o]|A[o+1|0]<<8|A[o+2|0]<<16|A[o+3|0]<<24,s[a+56>>2]=o,u=u-(r<<3)|0}m=e,h=e,f=e,d=e,r=e}if(b=c+b|0,!q){c=u;break a}c=u+q|0,s[a+60>>2]=c,b=(o<<u>>>0-q|0)+b|0}_=s[a+104>>2],u=s[a+100>>2],s[a+100>>2]=b,s[a+104>>2]=u,s[a+108>>2]=_}else if(_){c=u+1|0,s[a+60>>2]=c;a:{if(3!=(0|(_=b+(!B+(o<<u>>>31|0)|0)|0))){if(b=!(u=s[100+((_<<2)+a|0)>>2])+u|0,1==(0|_))break a}else b=!(u=s[a+100>>2]-1|0)+u|0;s[a+108>>2]=s[a+104>>2]}s[a+104>>2]=s[a+100>>2],s[a+100>>2]=b}else{if(B){b=s[a+100>>2],c=u;break i}b=s[a+104>>2],s[a+104>>2]=s[a+100>>2],s[a+100>>2]=b,c=u}u=V,$&&(u=(o<<c>>>0-U|0)+u|0,c=c+$|0);i:if(!(Z+$>>>0<20|c>>>0>32)){if((0|h)>=4)r=I+(e=h-(c>>>3|0)|0)|0,s[a+64>>2]=r,o=A[0|r]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24,s[a+56>>2]=o,c&=7;else{if(!h){h=0,f=0,d=0,r=0;break i}o=I+(e=h-(r=I>>>0>(h+I|0)-(e=c>>>3|0)>>>0?h:e)|0)|0,s[a+64>>2]=o,o=A[0|o]|A[o+1|0]<<8|A[o+2|0]<<16|A[o+3|0]<<24,s[a+56>>2]=o,c=c-(r<<3)|0}m=e,h=e,f=e,d=e,r=e}V=w,S=(16777215&y)<<8|(_=S)>>>24,g=(16777215&g)<<8|w>>>24,Z&&(B=(o<<c>>>0-L|0)+B|0,c=c+Z|0);i:if(c>>>0>32)y=c;else{if(r=a,(0|m)>=4)y=7&c,s[a+60>>2]=y,o=I+(e=m-(c>>>3|0)|0)|0,s[a+64>>2]=o,o=A[0|o]|A[o+1|0]<<8|A[o+2|0]<<16|A[o+3|0]<<24;else{if(!m){m=0,h=0,f=0,d=0,r=0,y=c;break i}y=c-((e=I>>>0>(m+I|0)-(e=c>>>3|0)>>>0?m:e)<<3)|0,s[a+60>>2]=y,o=I+(e=m-e|0)|0,s[a+64>>2]=o,o=A[0|o]|A[o+1|0]<<8|A[o+2|0]<<16|A[o+3|0]<<24}s[r+56>>2]=o,m=e,h=e,f=e,d=e,r=e}D=(w=B+D|0)+u|0,s[a+120>>2]=D,g=(o>>>0-(c=(c=y)+(y=255&g)|0)&s[3776+(y<<2)>>2])+(65535&V)|0,s[a+76>>2]=g,c=(y=255&S)+c|0,S=(s[3776+(y<<2)>>2]&o>>>0-c)+(65535&_)|0,s[a+92>>2]=S,y=(w+(b>>>0>w>>>0?j:R)|0)-b|0;i:if(!(c>>>0>32)){if((0|e)>=4)r=I+(e=e-(c>>>3|0)|0)|0,s[a+64>>2]=r,o=A[0|r]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24,s[a+56>>2]=o,c&=7;else{if(!e){e=0,m=0,h=0,f=0,d=0,r=0;break i}o=I+(e=e-(r=I>>>0>(e+I|0)-(r=c>>>3|0)>>>0?e:r)|0)|0,s[a+64>>2]=o,o=A[0|o]|A[o+1|0]<<8|A[o+2|0]<<16|A[o+3|0]<<24,s[a+56>>2]=o,c=c-(r<<3)|0}m=e,h=e,f=e,d=e,r=e}if(s[12+(w=(a+128|0)+(n<<4)|0)>>2]=y,s[w+8>>2]=b,s[w+4>>2]=u,s[w>>2]=B,c=(u=C>>>24|0)+c|0,s[a+60>>2]=c,b=(s[3776+(u<<2)>>2]&o>>>0-c)+(65535&C)|0,s[a+84>>2]=b,n=n+1|0,!(c>>>0<=32))break}}if((0|n)<(0|J))break e}z=H-32|0,_=a+112|0,V=a+116|0,r=t;r:{for(;;){if(c>>>0>=33){if((0|n)<(0|M))break e;break r}if((e=s[a+64>>2])>>>0>=(D=s[a+72>>2])>>>0?(u=7&c,s[a+60>>2]=u,e=e-(c>>>3|0)|0,s[a+64>>2]=e,s[a+56>>2]=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24):(0|(u=s[a+68>>2]))!=(0|e)?(e=e-(o=u>>>0>e-(o=c>>>3|0)>>>0?e-u|0:o)|0,s[a+64>>2]=e,u=c-(o<<3)|0,s[a+60>>2]=u,s[a+56>>2]=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24):u=c,(0|n)>=(0|M))break r;o=s[a+80>>2]+(s[a+76>>2]<<3)|0,h=c=s[o+4>>2],F=255&(w=(65535&c)<<16|(y=s[o>>2])>>>16),o=s[a+96>>2]+(s[a+92>>2]<<3)|0,G=255&(S=(65535&(c=f=s[o+4>>2]))<<16|(m=s[o>>2])>>>16),o=s[a+88>>2]+(s[a+84>>2]<<3)|0,f=s[o+4>>2],d=s[o>>2],L=o=f,g=c,B=h;o:if((f=255&(o=(65535&o)<<16|d>>>16))>>>0>=2){i:if(!l|f>>>0<25)b=L+(s[a+56>>2]<<u>>>0-o|0)|0,(u=u+f|0)>>>0>32?o=u:e>>>0>=D>>>0?(o=7&u,s[a+60>>2]=o,e=e-(u>>>3|0)|0,s[a+64>>2]=e,s[a+56>>2]=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24):(0|(f=s[a+68>>2]))!=(0|e)?(e=e-(o=f>>>0>e-(o=u>>>3|0)>>>0?e-f|0:o)|0,s[a+64>>2]=e,o=u-(o<<3)|0,s[a+60>>2]=o,s[a+56>>2]=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24):o=u;else{if(O=f-(o=(o=32-u|0)>>>0>f>>>0?f:o)|0,C=(f=s[a+56>>2])<<u>>>0-o<<O,(u=o+u|0)>>>0>32||(e>>>0>=D>>>0?(e=e-(u>>>3|0)|0,s[a+64>>2]=e,f=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,s[a+56>>2]=f,u&=7):(0|(U=s[a+68>>2]))!=(0|e)&&(e=e-(o=U>>>0>e-(o=u>>>3|0)>>>0?e-U|0:o)|0,s[a+64>>2]=e,f=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,s[a+56>>2]=f,u=u-(o<<3)|0)),b=C+L|0,!O){o=u;break i}o=u+O|0,s[a+60>>2]=o,b=(f<<u>>>0-O|0)+b|0}f=s[a+104>>2],u=s[a+100>>2],s[a+100>>2]=b,s[a+104>>2]=u,s[a+108>>2]=f}else if(f){o=u+1|0,s[a+60>>2]=o;i:{if(3!=(0|(f=L+!B+(s[a+56>>2]<<u>>>31)|0))){if(b=!(u=s[100+((f<<2)+a|0)>>2])+u|0,1==(0|f))break i}else b=!(u=s[a+100>>2]-1|0)+u|0;s[a+108>>2]=s[a+104>>2]}s[a+104>>2]=s[a+100>>2],s[a+100>>2]=b}else{if(B){b=s[a+100>>2],o=u;break o}b=s[a+104>>2],s[a+104>>2]=s[a+100>>2],s[a+100>>2]=b,o=u}u=g,G&&(u=(s[a+56>>2]<<o>>>0-S|0)+u|0,o=o+G|0),F+G>>>0<20|o>>>0>32||(e>>>0>=D>>>0?(e=e-(o>>>3|0)|0,s[a+64>>2]=e,s[a+56>>2]=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,o&=7):(0|(g=s[a+68>>2]))!=(0|e)&&(e=e-(f=g>>>0>e-(f=o>>>3|0)>>>0?e-g|0:f)|0,s[a+64>>2]=e,s[a+56>>2]=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,o=o-(f<<3)|0)),C=m,m=(16777215&c)<<8|m>>>24,h=(16777215&h)<<8|(g=y)>>>24,F&&(B=(s[a+56>>2]<<o>>>0-w|0)+B|0,o=o+F|0),o>>>0>32?f=o:e>>>0>=D>>>0?(f=7&o,s[a+60>>2]=f,e=e-(o>>>3|0)|0,s[a+64>>2]=e,s[a+56>>2]=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24):(0|(f=s[a+68>>2]))!=(0|e)?(e=e-(c=f>>>0>e-(c=o>>>3|0)>>>0?e-f|0:c)|0,s[a+64>>2]=e,f=o-(c<<3)|0,s[a+60>>2]=f,s[a+56>>2]=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24):f=o,S=s[a+120>>2]+B|0,s[a+120>>2]=S+u,c=s[a+56>>2],o=(h&=255)+f|0,s[a+76>>2]=(c>>>0-o&s[3776+(h<<2)>>2])+(65535&g),o=(h=255&m)+o|0,s[a+92>>2]=(s[3776+(h<<2)>>2]&c>>>0-o)+(65535&C),y=s[(b>>>0>S>>>0?V:_)>>2],o>>>0>32||(e>>>0>=D>>>0?(e=e-(o>>>3|0)|0,s[a+64>>2]=e,c=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,s[a+56>>2]=c,o&=7):(0|(h=s[a+68>>2]))!=(0|e)&&(c=(f=e)-(e=h>>>0>e-(c=o>>>3|0)>>>0?e-h|0:c)|0,s[a+64>>2]=c,c=A[0|c]|A[c+1|0]<<8|A[c+2|0]<<16|A[c+3|0]<<24,s[a+56>>2]=c,o=o-(e<<3)|0)),e=(e=o)+(o=d>>>24|0)|0,s[a+60>>2]=e,s[a+84>>2]=(s[3776+(o<<2)>>2]&c>>>0-e)+(65535&d),e=s[12+(h=w=(a+128|0)+((3&n)<<4)|0)>>2],c=s[h+8>>2],s[a+216>>2]=c,s[a+220>>2]=e,o=s[h+4>>2],e=s[h>>2],s[a+208>>2]=e,s[a+212>>2]=o;o:if(!((d=e+(C=s[a+204>>2])|0)>>>0>Y>>>0||z>>>0<(h=e+(f=s[a+212>>2])|0)+r>>>0)&&h+32>>>0<=H-r>>>0){if(o=e+r|0,g=A[C+4|0]|A[C+5|0]<<8|A[C+6|0]<<16|A[C+7|0]<<24,m=A[0|C]|A[C+1|0]<<8|A[C+2|0]<<16|A[C+3|0]<<24,i[0|r]=m,i[r+1|0]=m>>>8,i[r+2|0]=m>>>16,i[r+3|0]=m>>>24,i[r+4|0]=g,i[r+5|0]=g>>>8,i[r+6|0]=g>>>16,i[r+7|0]=g>>>24,g=A[C+12|0]|A[C+13|0]<<8|A[C+14|0]<<16|A[C+15|0]<<24,m=A[C+8|0]|A[C+9|0]<<8|A[C+10|0]<<16|A[C+11|0]<<24,i[r+8|0]=m,i[r+9|0]=m>>>8,i[r+10|0]=m>>>16,i[r+11|0]=m>>>24,i[r+12|0]=g,i[r+13|0]=g>>>8,i[r+14|0]=g>>>16,i[r+15|0]=g>>>24,!(e>>>0<17||(g=A[C+20|0]|A[C+21|0]<<8|A[C+22|0]<<16|A[C+23|0]<<24,m=A[C+16|0]|A[C+17|0]<<8|A[C+18|0]<<16|A[C+19|0]<<24,i[r+16|0]=m,i[r+17|0]=m>>>8,i[r+18|0]=m>>>16,i[r+19|0]=m>>>24,i[r+20|0]=g,i[r+21|0]=g>>>8,i[r+22|0]=g>>>16,i[r+23|0]=g>>>24,g=A[C+28|0]|A[C+29|0]<<8|A[C+30|0]<<16|A[C+31|0]<<24,m=A[C+24|0]|A[C+25|0]<<8|A[C+26|0]<<16|A[C+27|0]<<24,i[r+24|0]=m,i[r+25|0]=m>>>8,i[r+26|0]=m>>>16,i[r+27|0]=m>>>24,i[r+28|0]=g,i[r+29|0]=g>>>8,i[r+30|0]=g>>>16,i[r+31|0]=g>>>24,(e-16|0)<17)))for(e=C+16|0,m=r+32|0;C=A[e+20|0]|A[e+21|0]<<8|A[e+22|0]<<16|A[e+23|0]<<24,g=A[e+16|0]|A[e+17|0]<<8|A[e+18|0]<<16|A[e+19|0]<<24,i[0|m]=g,i[m+1|0]=g>>>8,i[m+2|0]=g>>>16,i[m+3|0]=g>>>24,i[m+4|0]=C,i[m+5|0]=C>>>8,i[m+6|0]=C>>>16,i[m+7|0]=C>>>24,C=A[e+28|0]|A[e+29|0]<<8|A[e+30|0]<<16|A[e+31|0]<<24,g=A[e+24|0]|A[e+25|0]<<8|A[e+26|0]<<16|A[e+27|0]<<24,i[m+8|0]=g,i[m+9|0]=g>>>8,i[m+10|0]=g>>>16,i[m+11|0]=g>>>24,i[m+12|0]=C,i[m+13|0]=C>>>8,i[m+14|0]=C>>>16,i[m+15|0]=C>>>24,C=A[e+36|0]|A[e+37|0]<<8|A[e+38|0]<<16|A[e+39|0]<<24,g=A[e+32|0]|A[e+33|0]<<8|A[e+34|0]<<16|A[e+35|0]<<24,i[m+16|0]=g,i[m+17|0]=g>>>8,i[m+18|0]=g>>>16,i[m+19|0]=g>>>24,i[m+20|0]=C,i[m+21|0]=C>>>8,i[m+22|0]=C>>>16,i[m+23|0]=C>>>24,C=A[e+44|0]|A[e+45|0]<<8|A[e+46|0]<<16|A[e+47|0]<<24,g=A[e+40|0]|A[e+41|0]<<8|A[e+42|0]<<16|A[e+43|0]<<24,i[m+24|0]=g,i[m+25|0]=g>>>8,i[m+26|0]=g>>>16,i[m+27|0]=g>>>24,i[m+28|0]=C,i[m+29|0]=C>>>8,i[m+30|0]=C>>>16,i[m+31|0]=C>>>24,e=e+32|0,(m=m+32|0)>>>0<o>>>0;);if(e=o-c|0,s[a+204>>2]=d,c>>>0>o-R>>>0){if(c>>>0>o-W>>>0)break e;if(j>>>0>=(e=(d=e-R|0)+j|0)+f>>>0){de(o,e,f);break o}e=de(o,e,0-d|0),f=d+f|0,s[a+212>>2]=f,o=e-d|0,e=R}if(c>>>0>=16){if(d=A[e+4|0]|A[e+5|0]<<8|A[e+6|0]<<16|A[e+7|0]<<24,c=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,i[0|o]=c,i[o+1|0]=c>>>8,i[o+2|0]=c>>>16,i[o+3|0]=c>>>24,i[o+4|0]=d,i[o+5|0]=d>>>8,i[o+6|0]=d>>>16,i[o+7|0]=d>>>24,d=A[e+12|0]|A[e+13|0]<<8|A[e+14|0]<<16|A[e+15|0]<<24,c=A[e+8|0]|A[e+9|0]<<8|A[e+10|0]<<16|A[e+11|0]<<24,i[o+8|0]=c,i[o+9|0]=c>>>8,i[o+10|0]=c>>>16,i[o+11|0]=c>>>24,i[o+12|0]=d,i[o+13|0]=d>>>8,i[o+14|0]=d>>>16,i[o+15|0]=d>>>24,(0|f)<17)break o;for(c=o+f|0,o=o+16|0;d=A[e+20|0]|A[e+21|0]<<8|A[e+22|0]<<16|A[e+23|0]<<24,f=A[e+16|0]|A[e+17|0]<<8|A[e+18|0]<<16|A[e+19|0]<<24,i[0|o]=f,i[o+1|0]=f>>>8,i[o+2|0]=f>>>16,i[o+3|0]=f>>>24,i[o+4|0]=d,i[o+5|0]=d>>>8,i[o+6|0]=d>>>16,i[o+7|0]=d>>>24,d=A[e+28|0]|A[e+29|0]<<8|A[e+30|0]<<16|A[e+31|0]<<24,f=A[e+24|0]|A[e+25|0]<<8|A[e+26|0]<<16|A[e+27|0]<<24,i[o+8|0]=f,i[o+9|0]=f>>>8,i[o+10|0]=f>>>16,i[o+11|0]=f>>>24,i[o+12|0]=d,i[o+13|0]=d>>>8,i[o+14|0]=d>>>16,i[o+15|0]=d>>>24,d=A[e+36|0]|A[e+37|0]<<8|A[e+38|0]<<16|A[e+39|0]<<24,f=A[e+32|0]|A[e+33|0]<<8|A[e+34|0]<<16|A[e+35|0]<<24,i[o+16|0]=f,i[o+17|0]=f>>>8,i[o+18|0]=f>>>16,i[o+19|0]=f>>>24,i[o+20|0]=d,i[o+21|0]=d>>>8,i[o+22|0]=d>>>16,i[o+23|0]=d>>>24,d=A[e+44|0]|A[e+45|0]<<8|A[e+46|0]<<16|A[e+47|0]<<24,f=A[e+40|0]|A[e+41|0]<<8|A[e+42|0]<<16|A[e+43|0]<<24,i[o+24|0]=f,i[o+25|0]=f>>>8,i[o+26|0]=f>>>16,i[o+27|0]=f>>>24,i[o+28|0]=d,i[o+29|0]=d>>>8,i[o+30|0]=d>>>16,i[o+31|0]=d>>>24,e=e+32|0,c>>>0>(o=o+32|0)>>>0;);}else if(c>>>0<=7?(i[0|o]=A[0|e],i[o+1|0]=A[e+1|0],i[o+2|0]=A[e+2|0],i[o+3|0]=A[e+3|0],d=(m=e)+s[3936+(e=c<<2)>>2]|0,c=A[0|d]|A[d+1|0]<<8|A[d+2|0]<<16|A[d+3|0]<<24,i[o+4|0]=c,i[o+5|0]=c>>>8,i[o+6|0]=c>>>16,i[o+7|0]=c>>>24,e=d-s[e+3968>>2]|0):(d=A[e+4|0]|A[e+5|0]<<8|A[e+6|0]<<16|A[e+7|0]<<24,c=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,i[0|o]=c,i[o+1|0]=c>>>8,i[o+2|0]=c>>>16,i[o+3|0]=c>>>24,i[o+4|0]=d,i[o+5|0]=d>>>8,i[o+6|0]=d>>>16,i[o+7|0]=d>>>24),!(f>>>0<9)){if(d=o+f|0,((c=o+8|0)-(e=e+8|0)|0)<=15)for(;;)if(f=A[e+4|0]|A[e+5|0]<<8|A[e+6|0]<<16|A[e+7|0]<<24,o=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,i[0|c]=o,i[c+1|0]=o>>>8,i[c+2|0]=o>>>16,i[c+3|0]=o>>>24,i[c+4|0]=f,i[c+5|0]=f>>>8,i[c+6|0]=f>>>16,i[c+7|0]=f>>>24,e=e+8|0,!(d>>>0>(c=c+8|0)>>>0))break o;if(g=A[e+4|0]|A[e+5|0]<<8|A[e+6|0]<<16|A[e+7|0]<<24,m=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,i[0|c]=m,i[c+1|0]=m>>>8,i[c+2|0]=m>>>16,i[c+3|0]=m>>>24,i[c+4|0]=g,i[c+5|0]=g>>>8,i[c+6|0]=g>>>16,i[c+7|0]=g>>>24,g=A[e+12|0]|A[e+13|0]<<8|A[e+14|0]<<16|A[e+15|0]<<24,m=A[e+8|0]|A[e+9|0]<<8|A[e+10|0]<<16|A[e+11|0]<<24,i[c+8|0]=m,i[c+9|0]=m>>>8,i[c+10|0]=m>>>16,i[c+11|0]=m>>>24,i[c+12|0]=g,i[c+13|0]=g>>>8,i[c+14|0]=g>>>16,i[c+15|0]=g>>>24,!((0|f)<25))for(o=o+24|0;f=A[e+20|0]|A[e+21|0]<<8|A[e+22|0]<<16|A[e+23|0]<<24,c=A[e+16|0]|A[e+17|0]<<8|A[e+18|0]<<16|A[e+19|0]<<24,i[0|o]=c,i[o+1|0]=c>>>8,i[o+2|0]=c>>>16,i[o+3|0]=c>>>24,i[o+4|0]=f,i[o+5|0]=f>>>8,i[o+6|0]=f>>>16,i[o+7|0]=f>>>24,f=A[e+28|0]|A[e+29|0]<<8|A[e+30|0]<<16|A[e+31|0]<<24,c=A[e+24|0]|A[e+25|0]<<8|A[e+26|0]<<16|A[e+27|0]<<24,i[o+8|0]=c,i[o+9|0]=c>>>8,i[o+10|0]=c>>>16,i[o+11|0]=c>>>24,i[o+12|0]=f,i[o+13|0]=f>>>8,i[o+14|0]=f>>>16,i[o+15|0]=f>>>24,f=A[e+36|0]|A[e+37|0]<<8|A[e+38|0]<<16|A[e+39|0]<<24,c=A[e+32|0]|A[e+33|0]<<8|A[e+34|0]<<16|A[e+35|0]<<24,i[o+16|0]=c,i[o+17|0]=c>>>8,i[o+18|0]=c>>>16,i[o+19|0]=c>>>24,i[o+20|0]=f,i[o+21|0]=f>>>8,i[o+22|0]=f>>>16,i[o+23|0]=f>>>24,f=A[e+44|0]|A[e+45|0]<<8|A[e+46|0]<<16|A[e+47|0]<<24,c=A[e+40|0]|A[e+41|0]<<8|A[e+42|0]<<16|A[e+43|0]<<24,i[o+24|0]=c,i[o+25|0]=c>>>8,i[o+26|0]=c>>>16,i[o+27|0]=c>>>24,i[o+28|0]=f,i[o+29|0]=f>>>8,i[o+30|0]=f>>>16,i[o+31|0]=f>>>24,e=e+32|0,d>>>0>(o=o+32|0)>>>0;);}}else e=s[a+220>>2],s[a+40>>2]=s[a+216>>2],s[a+44>>2]=e,e=s[a+212>>2],s[a+32>>2]=s[a+208>>2],s[a+36>>2]=e,h=k(r,H,a+32|0,a+204|0,Y,R,W,j);if(!(h>>>0<=4294967176))break;s[w>>2]=B,s[w+12>>2]=(y+S|0)-b,s[w+8>>2]=b,s[w+4>>2]=u,n=n+1|0,r=r+h|0,c=s[a+60>>2]}E=h;break e}if((0|M)>(0|(m=n-J|0)))for(f=H-32|0;;){c=s[8+(o=(a+128|0)+((3&m)<<4)|0)>>2],e=s[o+12>>2],s[a+216>>2]=c,s[a+220>>2]=e,n=s[o+4>>2],e=s[o>>2],s[a+208>>2]=e,s[a+212>>2]=n;r:if(!((h=e+(g=s[a+204>>2])|0)>>>0>Y>>>0||f>>>0<(u=e+(n=s[a+212>>2])|0)+r>>>0)&&u+32>>>0<=H-r>>>0){if(o=e+r|0,y=A[g+4|0]|A[g+5|0]<<8|A[g+6|0]<<16|A[g+7|0]<<24,d=A[0|g]|A[g+1|0]<<8|A[g+2|0]<<16|A[g+3|0]<<24,i[0|r]=d,i[r+1|0]=d>>>8,i[r+2|0]=d>>>16,i[r+3|0]=d>>>24,i[r+4|0]=y,i[r+5|0]=y>>>8,i[r+6|0]=y>>>16,i[r+7|0]=y>>>24,y=A[g+12|0]|A[g+13|0]<<8|A[g+14|0]<<16|A[g+15|0]<<24,d=A[g+8|0]|A[g+9|0]<<8|A[g+10|0]<<16|A[g+11|0]<<24,i[r+8|0]=d,i[r+9|0]=d>>>8,i[r+10|0]=d>>>16,i[r+11|0]=d>>>24,i[r+12|0]=y,i[r+13|0]=y>>>8,i[r+14|0]=y>>>16,i[r+15|0]=y>>>24,!(e>>>0<17||(y=A[g+20|0]|A[g+21|0]<<8|A[g+22|0]<<16|A[g+23|0]<<24,d=A[g+16|0]|A[g+17|0]<<8|A[g+18|0]<<16|A[g+19|0]<<24,i[r+16|0]=d,i[r+17|0]=d>>>8,i[r+18|0]=d>>>16,i[r+19|0]=d>>>24,i[r+20|0]=y,i[r+21|0]=y>>>8,i[r+22|0]=y>>>16,i[r+23|0]=y>>>24,y=A[g+28|0]|A[g+29|0]<<8|A[g+30|0]<<16|A[g+31|0]<<24,d=A[g+24|0]|A[g+25|0]<<8|A[g+26|0]<<16|A[g+27|0]<<24,i[r+24|0]=d,i[r+25|0]=d>>>8,i[r+26|0]=d>>>16,i[r+27|0]=d>>>24,i[r+28|0]=y,i[r+29|0]=y>>>8,i[r+30|0]=y>>>16,i[r+31|0]=y>>>24,(e-16|0)<17)))for(e=g+16|0,b=r+32|0;y=A[e+20|0]|A[e+21|0]<<8|A[e+22|0]<<16|A[e+23|0]<<24,d=A[e+16|0]|A[e+17|0]<<8|A[e+18|0]<<16|A[e+19|0]<<24,i[0|b]=d,i[b+1|0]=d>>>8,i[b+2|0]=d>>>16,i[b+3|0]=d>>>24,i[b+4|0]=y,i[b+5|0]=y>>>8,i[b+6|0]=y>>>16,i[b+7|0]=y>>>24,y=A[e+28|0]|A[e+29|0]<<8|A[e+30|0]<<16|A[e+31|0]<<24,d=A[e+24|0]|A[e+25|0]<<8|A[e+26|0]<<16|A[e+27|0]<<24,i[b+8|0]=d,i[b+9|0]=d>>>8,i[b+10|0]=d>>>16,i[b+11|0]=d>>>24,i[b+12|0]=y,i[b+13|0]=y>>>8,i[b+14|0]=y>>>16,i[b+15|0]=y>>>24,y=A[e+36|0]|A[e+37|0]<<8|A[e+38|0]<<16|A[e+39|0]<<24,d=A[e+32|0]|A[e+33|0]<<8|A[e+34|0]<<16|A[e+35|0]<<24,i[b+16|0]=d,i[b+17|0]=d>>>8,i[b+18|0]=d>>>16,i[b+19|0]=d>>>24,i[b+20|0]=y,i[b+21|0]=y>>>8,i[b+22|0]=y>>>16,i[b+23|0]=y>>>24,y=A[e+44|0]|A[e+45|0]<<8|A[e+46|0]<<16|A[e+47|0]<<24,d=A[e+40|0]|A[e+41|0]<<8|A[e+42|0]<<16|A[e+43|0]<<24,i[b+24|0]=d,i[b+25|0]=d>>>8,i[b+26|0]=d>>>16,i[b+27|0]=d>>>24,i[b+28|0]=y,i[b+29|0]=y>>>8,i[b+30|0]=y>>>16,i[b+31|0]=y>>>24,e=e+32|0,(b=b+32|0)>>>0<o>>>0;);if(e=o-c|0,s[a+204>>2]=h,c>>>0>o-R>>>0){if(c>>>0>o-W>>>0)break e;if(j>>>0>=(e=(h=e-R|0)+j|0)+n>>>0){de(o,e,n);break r}e=de(o,e,0-h|0),n=n+h|0,s[a+212>>2]=n,o=e-h|0,e=R}if(c>>>0>=16){if(h=A[e+4|0]|A[e+5|0]<<8|A[e+6|0]<<16|A[e+7|0]<<24,c=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,i[0|o]=c,i[o+1|0]=c>>>8,i[o+2|0]=c>>>16,i[o+3|0]=c>>>24,i[o+4|0]=h,i[o+5|0]=h>>>8,i[o+6|0]=h>>>16,i[o+7|0]=h>>>24,h=A[e+12|0]|A[e+13|0]<<8|A[e+14|0]<<16|A[e+15|0]<<24,c=A[e+8|0]|A[e+9|0]<<8|A[e+10|0]<<16|A[e+11|0]<<24,i[o+8|0]=c,i[o+9|0]=c>>>8,i[o+10|0]=c>>>16,i[o+11|0]=c>>>24,i[o+12|0]=h,i[o+13|0]=h>>>8,i[o+14|0]=h>>>16,i[o+15|0]=h>>>24,(0|n)<17)break r;for(n=n+o|0,o=o+16|0;h=A[e+20|0]|A[e+21|0]<<8|A[e+22|0]<<16|A[e+23|0]<<24,c=A[e+16|0]|A[e+17|0]<<8|A[e+18|0]<<16|A[e+19|0]<<24,i[0|o]=c,i[o+1|0]=c>>>8,i[o+2|0]=c>>>16,i[o+3|0]=c>>>24,i[o+4|0]=h,i[o+5|0]=h>>>8,i[o+6|0]=h>>>16,i[o+7|0]=h>>>24,h=A[e+28|0]|A[e+29|0]<<8|A[e+30|0]<<16|A[e+31|0]<<24,c=A[e+24|0]|A[e+25|0]<<8|A[e+26|0]<<16|A[e+27|0]<<24,i[o+8|0]=c,i[o+9|0]=c>>>8,i[o+10|0]=c>>>16,i[o+11|0]=c>>>24,i[o+12|0]=h,i[o+13|0]=h>>>8,i[o+14|0]=h>>>16,i[o+15|0]=h>>>24,h=A[e+36|0]|A[e+37|0]<<8|A[e+38|0]<<16|A[e+39|0]<<24,c=A[e+32|0]|A[e+33|0]<<8|A[e+34|0]<<16|A[e+35|0]<<24,i[o+16|0]=c,i[o+17|0]=c>>>8,i[o+18|0]=c>>>16,i[o+19|0]=c>>>24,i[o+20|0]=h,i[o+21|0]=h>>>8,i[o+22|0]=h>>>16,i[o+23|0]=h>>>24,h=A[e+44|0]|A[e+45|0]<<8|A[e+46|0]<<16|A[e+47|0]<<24,c=A[e+40|0]|A[e+41|0]<<8|A[e+42|0]<<16|A[e+43|0]<<24,i[o+24|0]=c,i[o+25|0]=c>>>8,i[o+26|0]=c>>>16,i[o+27|0]=c>>>24,i[o+28|0]=h,i[o+29|0]=h>>>8,i[o+30|0]=h>>>16,i[o+31|0]=h>>>24,e=e+32|0,n>>>0>(o=o+32|0)>>>0;);}else if(c>>>0<=7?(i[0|o]=A[0|e],i[o+1|0]=A[e+1|0],i[o+2|0]=A[e+2|0],i[o+3|0]=A[e+3|0],h=(h=e)+s[3936+(e=c<<2)>>2]|0,c=A[0|h]|A[h+1|0]<<8|A[h+2|0]<<16|A[h+3|0]<<24,i[o+4|0]=c,i[o+5|0]=c>>>8,i[o+6|0]=c>>>16,i[o+7|0]=c>>>24,e=h-s[e+3968>>2]|0):(h=A[e+4|0]|A[e+5|0]<<8|A[e+6|0]<<16|A[e+7|0]<<24,c=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,i[0|o]=c,i[o+1|0]=c>>>8,i[o+2|0]=c>>>16,i[o+3|0]=c>>>24,i[o+4|0]=h,i[o+5|0]=h>>>8,i[o+6|0]=h>>>16,i[o+7|0]=h>>>24),!(n>>>0<9)){if(h=n+o|0,((c=o+8|0)-(e=e+8|0)|0)<=15)for(;;)if(o=A[e+4|0]|A[e+5|0]<<8|A[e+6|0]<<16|A[e+7|0]<<24,n=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,i[0|c]=n,i[c+1|0]=n>>>8,i[c+2|0]=n>>>16,i[c+3|0]=n>>>24,i[c+4|0]=o,i[c+5|0]=o>>>8,i[c+6|0]=o>>>16,i[c+7|0]=o>>>24,e=e+8|0,!(h>>>0>(c=c+8|0)>>>0))break r;if(y=A[e+4|0]|A[e+5|0]<<8|A[e+6|0]<<16|A[e+7|0]<<24,d=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,i[0|c]=d,i[c+1|0]=d>>>8,i[c+2|0]=d>>>16,i[c+3|0]=d>>>24,i[c+4|0]=y,i[c+5|0]=y>>>8,i[c+6|0]=y>>>16,i[c+7|0]=y>>>24,y=A[e+12|0]|A[e+13|0]<<8|A[e+14|0]<<16|A[e+15|0]<<24,d=A[e+8|0]|A[e+9|0]<<8|A[e+10|0]<<16|A[e+11|0]<<24,i[c+8|0]=d,i[c+9|0]=d>>>8,i[c+10|0]=d>>>16,i[c+11|0]=d>>>24,i[c+12|0]=y,i[c+13|0]=y>>>8,i[c+14|0]=y>>>16,i[c+15|0]=y>>>24,!((0|n)<25))for(o=o+24|0;c=A[e+20|0]|A[e+21|0]<<8|A[e+22|0]<<16|A[e+23|0]<<24,n=A[e+16|0]|A[e+17|0]<<8|A[e+18|0]<<16|A[e+19|0]<<24,i[0|o]=n,i[o+1|0]=n>>>8,i[o+2|0]=n>>>16,i[o+3|0]=n>>>24,i[o+4|0]=c,i[o+5|0]=c>>>8,i[o+6|0]=c>>>16,i[o+7|0]=c>>>24,c=A[e+28|0]|A[e+29|0]<<8|A[e+30|0]<<16|A[e+31|0]<<24,n=A[e+24|0]|A[e+25|0]<<8|A[e+26|0]<<16|A[e+27|0]<<24,i[o+8|0]=n,i[o+9|0]=n>>>8,i[o+10|0]=n>>>16,i[o+11|0]=n>>>24,i[o+12|0]=c,i[o+13|0]=c>>>8,i[o+14|0]=c>>>16,i[o+15|0]=c>>>24,c=A[e+36|0]|A[e+37|0]<<8|A[e+38|0]<<16|A[e+39|0]<<24,n=A[e+32|0]|A[e+33|0]<<8|A[e+34|0]<<16|A[e+35|0]<<24,i[o+16|0]=n,i[o+17|0]=n>>>8,i[o+18|0]=n>>>16,i[o+19|0]=n>>>24,i[o+20|0]=c,i[o+21|0]=c>>>8,i[o+22|0]=c>>>16,i[o+23|0]=c>>>24,c=A[e+44|0]|A[e+45|0]<<8|A[e+46|0]<<16|A[e+47|0]<<24,n=A[e+40|0]|A[e+41|0]<<8|A[e+42|0]<<16|A[e+43|0]<<24,i[o+24|0]=n,i[o+25|0]=n>>>8,i[o+26|0]=n>>>16,i[o+27|0]=n>>>24,i[o+28|0]=c,i[o+29|0]=c>>>8,i[o+30|0]=c>>>16,i[o+31|0]=c>>>24,e=e+32|0,h>>>0>(o=o+32|0)>>>0;);}}else e=s[a+220>>2],s[a+24>>2]=s[a+216>>2],s[a+28>>2]=e,e=s[a+212>>2],s[a+16>>2]=s[a+208>>2],s[a+20>>2]=e,u=k(r,H,a+16|0,a+204|0,Y,R,W,j);if(u>>>0>4294967176){E=u;break e}if(r=r+u|0,(0|M)==(0|(m=m+1|0)))break}e=s[a+104>>2],s[N>>2]=s[a+100>>2],s[N+4>>2]=e,s[N+8>>2]=s[a+108>>2],o=s[a+204>>2]}if(E=-70,(e=Y-o|0)>>>0>H-r>>>0)break e;if(!r){E=0-t|0;break e}E=(te(r,o,e)+e|0)-t|0;break e}s[e+29588>>2]=0}if(o=s[e+29544>>2],s[a+208>>2]=o,O=t+n|0,G=s[e+29560>>2]+o|0,M){if(L=s[e+29368>>2],_=s[e+29364>>2],S=s[e+29360>>2],s[e+29436>>2]=1,s[a+108>>2]=s[e+26676>>2],n=s[4+(r=C=e+26668|0)>>2],s[a+100>>2]=s[r>>2],s[a+104>>2]=n,!h){E=-20;break e}s[a+68>>2]=I,s[a+72>>2]=I+4;t:{n:{if(h>>>0>=4){if(n=I+(c=h-4|0)|0,s[a+64>>2]=n,E=A[0|n]|A[n+1|0]<<8|A[n+2|0]<<16|A[n+3|0]<<24,s[a+56>>2]=E,n=A[(h+I|0)-1|0])break n;E=-20;break e}switch(s[a+64>>2]=I,E=A[0|I],s[a+56>>2]=E,h-2|0){case 1:E=A[I+2|0]<<16|E;case 0:E=(A[I+1|0]<<8)+E|0,s[a+56>>2]=E}if(!(n=A[(h+I|0)-1|0])){E=-20;break e}c=0,n=9+(v(n)-(h<<3)|0)|0;break t}if(h>>>0>4294967176){E=-20;break e}n=v(n)-23|0}for(u=s[e>>2],o=E>>>0-(n=(r=s[u+4>>2])+n|0)&s[3776+(r<<2)>>2],s[a+76>>2]=o,n>>>0>32?B=n:(0|c)>=4?(B=7&n,s[a+60>>2]=B,n=I+(c=c-(n>>>3|0)|0)|0,s[a+64>>2]=n,E=A[0|n]|A[n+1|0]<<8|A[n+2|0]<<16|A[n+3|0]<<24,s[a+56>>2]=E):c?(h=I+(c=c-(r=I>>>0>(c+I|0)-(r=n>>>3|0)>>>0?c:r)|0)|0,s[a+64>>2]=h,E=A[0|h]|A[h+1|0]<<8|A[h+2|0]<<16|A[h+3|0]<<24,s[a+56>>2]=E,B=n-(r<<3)|0):(c=0,B=n),n=u+8|0,s[a+80>>2]=n,h=s[e+8>>2],b=E>>>0-(r=(u=s[h+4>>2])+B|0)&s[3776+(u<<2)>>2],s[a+84>>2]=b,r>>>0>32||((0|c)>=4?(u=I+(c=c-(r>>>3|0)|0)|0,s[a+64>>2]=u,E=A[0|u]|A[u+1|0]<<8|A[u+2|0]<<16|A[u+3|0]<<24,s[a+56>>2]=E,r&=7):c?(f=I+(c=c-(u=I>>>0>(c+I|0)-(u=r>>>3|0)>>>0?c:u)|0)|0,s[a+64>>2]=f,E=A[0|f]|A[f+1|0]<<8|A[f+2|0]<<16|A[f+3|0]<<24,s[a+56>>2]=E,r=r-(u<<3)|0):c=0),B=h+8|0,s[a+88>>2]=B,u=s[e+4>>2],r=(e=s[u+4>>2])+r|0,s[a+60>>2]=r,e=s[3776+(e<<2)>>2]&E>>>0-r,s[a+92>>2]=e,r>>>0>32?c=r:(h=c+I|0,(0|c)>=4?(c=7&r,s[a+60>>2]=c,r=h-(r>>>3|0)|0,s[a+64>>2]=r,s[a+56>>2]=A[0|r]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24):c?(c=(f=r)-((r=I>>>0>h-(r=r>>>3|0)>>>0?c:r)<<3)|0,s[a+60>>2]=c,r=h-r|0,s[a+64>>2]=r,s[a+56>>2]=A[0|r]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24):c=r),m=u+8|0,s[a+96>>2]=m,V=O-32|0,r=t,E=0;;){u=o=s[4+(n=(o<<3)+n|0)>>2],U=255&(R=(65535&o)<<16|(d=s[n>>2])>>>16),n=o=s[4+(e=(e<<3)+m|0)>>2],z=255&(w=(65535&o)<<16|(h=s[e>>2])>>>16),o=s[4+(e=(b<<3)+B|0)>>2],f=s[e>>2],N=e=o,y=n,o=u;t:if((g=255&(e=(65535&e)<<16|f>>>16))>>>0>=2){n:if(!l|g>>>0<25)m=N+(s[a+56>>2]<<c>>>0-e|0)|0,(c=c+g|0)>>>0>32?e=c:(B=s[a+64>>2])>>>0>=p[a+72>>2]?(e=7&c,s[a+60>>2]=e,c=B-(c>>>3|0)|0,s[a+64>>2]=c,s[a+56>>2]=A[0|c]|A[c+1|0]<<8|A[c+2|0]<<16|A[c+3|0]<<24):(0|(g=s[a+68>>2]))!=(0|B)?(e=(N=c)-((c=g>>>0>B-(e=c>>>3|0)>>>0?B-g|0:e)<<3)|0,s[a+60>>2]=e,c=B-c|0,s[a+64>>2]=c,s[a+56>>2]=A[0|c]|A[c+1|0]<<8|A[c+2|0]<<16|A[c+3|0]<<24):e=c;else{if(F=g-(e=(e=32-c|0)>>>0>g>>>0?g:e)|0,m=(B=s[a+56>>2])<<c>>>0-e<<F,(c=e+c|0)>>>0>32||((D=s[a+64>>2])>>>0>=p[a+72>>2]?(e=D-(c>>>3|0)|0,s[a+64>>2]=e,B=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,s[a+56>>2]=B,c&=7):(0|(g=s[a+68>>2]))!=(0|D)&&(g=D-(e=g>>>0>D-(e=c>>>3|0)>>>0?D-g|0:e)|0,s[a+64>>2]=g,B=A[0|g]|A[g+1|0]<<8|A[g+2|0]<<16|A[g+3|0]<<24,s[a+56>>2]=B,c=c-(e<<3)|0)),m=m+N|0,!F){e=c;break n}e=c+F|0,s[a+60>>2]=e,m=(B<<c>>>0-F|0)+m|0}g=s[a+104>>2],c=s[a+100>>2],s[a+100>>2]=m,s[a+104>>2]=c,s[a+108>>2]=g}else if(g){e=c+1|0,s[a+60>>2]=e;n:{if(3!=(0|(g=N+!o+(s[a+56>>2]<<c>>>31)|0))){if(m=!(c=s[100+((g<<2)+a|0)>>2])+c|0,1==(0|g))break n}else m=!(c=s[a+100>>2]-1|0)+c|0;s[a+108>>2]=s[a+104>>2]}s[a+104>>2]=s[a+100>>2],s[a+100>>2]=m}else{if(o){m=s[a+100>>2],e=c;break t}m=s[a+104>>2],s[a+104>>2]=s[a+100>>2],s[a+100>>2]=m,e=c}c=y,z&&(c=(s[a+56>>2]<<e>>>0-w|0)+c|0,e=e+z|0),z+U>>>0<20|e>>>0>32||((w=s[a+64>>2])>>>0>=p[a+72>>2]?(y=w-(e>>>3|0)|0,s[a+64>>2]=y,s[a+56>>2]=A[0|y]|A[y+1|0]<<8|A[y+2|0]<<16|A[y+3|0]<<24,e&=7):(0|(g=s[a+68>>2]))!=(0|w)&&(g=w-(y=g>>>0>w-(y=e>>>3|0)>>>0?w-g|0:y)|0,s[a+64>>2]=g,s[a+56>>2]=A[0|g]|A[g+1|0]<<8|A[g+2|0]<<16|A[g+3|0]<<24,e=e-(y<<3)|0)),y=d,w=(16777215&n)<<8|(g=h)>>>24,u=(16777215&u)<<8|d>>>24,U&&(o=(s[a+56>>2]<<e>>>0-R|0)+o|0,e=e+U|0),e>>>0>32?h=e:(d=s[a+64>>2])>>>0>=p[a+72>>2]?(h=7&e,s[a+60>>2]=h,e=d-(e>>>3|0)|0,s[a+64>>2]=e,s[a+56>>2]=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24):(0|(h=s[a+68>>2]))!=(0|d)?(h=d-(n=h>>>0>d-(n=e>>>3|0)>>>0?d-h|0:n)|0,s[a+64>>2]=h,s[a+56>>2]=A[0|h]|A[h+1|0]<<8|A[h+2|0]<<16|A[h+3|0]<<24,h=e-(n<<3)|0):h=e,n=s[a+56>>2],e=(u&=255)+h|0,s[a+76>>2]=(n>>>0-e&s[3776+(u<<2)>>2])+(65535&y),e=(u=255&w)+e|0,s[a+92>>2]=(n>>>0-e&s[3776+(u<<2)>>2])+(65535&g),e>>>0>32||((h=s[a+64>>2])>>>0>=p[a+72>>2]?(n=h-(e>>>3|0)|0,s[a+64>>2]=n,n=A[0|n]|A[n+1|0]<<8|A[n+2|0]<<16|A[n+3|0]<<24,s[a+56>>2]=n,e&=7):(0|(u=s[a+68>>2]))!=(0|h)&&(n=h-(u=u>>>0>h-(n=e>>>3|0)>>>0?h-u|0:n)|0,s[a+64>>2]=n,n=A[0|n]|A[n+1|0]<<8|A[n+2|0]<<16|A[n+3|0]<<24,s[a+56>>2]=n,e=e-(u<<3)|0)),e=(u=f>>>24|0)+e|0,s[a+60>>2]=e,s[a+84>>2]=(s[3776+(u<<2)>>2]&n>>>0-e)+(65535&f),s[a+128>>2]=o,d=s[a+208>>2],s[a+136>>2]=m,s[a+132>>2]=c;t:if(!(V>>>0<(h=o+c|0)+r>>>0||(u=o+d|0)>>>0>G>>>0)&&h+32>>>0<=O-r>>>0){if(n=r+o|0,f=A[d+4|0]|A[d+5|0]<<8|A[d+6|0]<<16|A[d+7|0]<<24,e=A[0|d]|A[d+1|0]<<8|A[d+2|0]<<16|A[d+3|0]<<24,i[0|r]=e,i[r+1|0]=e>>>8,i[r+2|0]=e>>>16,i[r+3|0]=e>>>24,i[r+4|0]=f,i[r+5|0]=f>>>8,i[r+6|0]=f>>>16,i[r+7|0]=f>>>24,f=A[d+12|0]|A[d+13|0]<<8|A[d+14|0]<<16|A[d+15|0]<<24,e=A[d+8|0]|A[d+9|0]<<8|A[d+10|0]<<16|A[d+11|0]<<24,i[r+8|0]=e,i[r+9|0]=e>>>8,i[r+10|0]=e>>>16,i[r+11|0]=e>>>24,i[r+12|0]=f,i[r+13|0]=f>>>8,i[r+14|0]=f>>>16,i[r+15|0]=f>>>24,!(o>>>0<17||(f=A[d+20|0]|A[d+21|0]<<8|A[d+22|0]<<16|A[d+23|0]<<24,e=A[d+16|0]|A[d+17|0]<<8|A[d+18|0]<<16|A[d+19|0]<<24,i[r+16|0]=e,i[r+17|0]=e>>>8,i[r+18|0]=e>>>16,i[r+19|0]=e>>>24,i[r+20|0]=f,i[r+21|0]=f>>>8,i[r+22|0]=f>>>16,i[r+23|0]=f>>>24,f=A[d+28|0]|A[d+29|0]<<8|A[d+30|0]<<16|A[d+31|0]<<24,e=A[d+24|0]|A[d+25|0]<<8|A[d+26|0]<<16|A[d+27|0]<<24,i[r+24|0]=e,i[r+25|0]=e>>>8,i[r+26|0]=e>>>16,i[r+27|0]=e>>>24,i[r+28|0]=f,i[r+29|0]=f>>>8,i[r+30|0]=f>>>16,i[r+31|0]=f>>>24,(o-16|0)<17)))for(e=d+16|0,o=r+32|0;d=A[e+20|0]|A[e+21|0]<<8|A[e+22|0]<<16|A[e+23|0]<<24,f=A[e+16|0]|A[e+17|0]<<8|A[e+18|0]<<16|A[e+19|0]<<24,i[0|o]=f,i[o+1|0]=f>>>8,i[o+2|0]=f>>>16,i[o+3|0]=f>>>24,i[o+4|0]=d,i[o+5|0]=d>>>8,i[o+6|0]=d>>>16,i[o+7|0]=d>>>24,d=A[e+28|0]|A[e+29|0]<<8|A[e+30|0]<<16|A[e+31|0]<<24,f=A[e+24|0]|A[e+25|0]<<8|A[e+26|0]<<16|A[e+27|0]<<24,i[o+8|0]=f,i[o+9|0]=f>>>8,i[o+10|0]=f>>>16,i[o+11|0]=f>>>24,i[o+12|0]=d,i[o+13|0]=d>>>8,i[o+14|0]=d>>>16,i[o+15|0]=d>>>24,d=A[e+36|0]|A[e+37|0]<<8|A[e+38|0]<<16|A[e+39|0]<<24,f=A[e+32|0]|A[e+33|0]<<8|A[e+34|0]<<16|A[e+35|0]<<24,i[o+16|0]=f,i[o+17|0]=f>>>8,i[o+18|0]=f>>>16,i[o+19|0]=f>>>24,i[o+20|0]=d,i[o+21|0]=d>>>8,i[o+22|0]=d>>>16,i[o+23|0]=d>>>24,d=A[e+44|0]|A[e+45|0]<<8|A[e+46|0]<<16|A[e+47|0]<<24,f=A[e+40|0]|A[e+41|0]<<8|A[e+42|0]<<16|A[e+43|0]<<24,i[o+24|0]=f,i[o+25|0]=f>>>8,i[o+26|0]=f>>>16,i[o+27|0]=f>>>24,i[o+28|0]=d,i[o+29|0]=d>>>8,i[o+30|0]=d>>>16,i[o+31|0]=d>>>24,e=e+32|0,(o=o+32|0)>>>0<n>>>0;);if(e=n-m|0,s[a+208>>2]=u,n-S>>>0<m>>>0){if(n-_>>>0<m>>>0){h=-20;break t}if(L>>>0>=(e=(o=e-S|0)+L|0)+c>>>0){de(n,e,c);break t}e=de(n,e,0-o|0),c=o+c|0,s[a+132>>2]=c,n=e-o|0,e=S}if(m>>>0>=16){if(u=A[e+4|0]|A[e+5|0]<<8|A[e+6|0]<<16|A[e+7|0]<<24,o=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,i[0|n]=o,i[n+1|0]=o>>>8,i[n+2|0]=o>>>16,i[n+3|0]=o>>>24,i[n+4|0]=u,i[n+5|0]=u>>>8,i[n+6|0]=u>>>16,i[n+7|0]=u>>>24,u=A[e+12|0]|A[e+13|0]<<8|A[e+14|0]<<16|A[e+15|0]<<24,o=A[e+8|0]|A[e+9|0]<<8|A[e+10|0]<<16|A[e+11|0]<<24,i[n+8|0]=o,i[n+9|0]=o>>>8,i[n+10|0]=o>>>16,i[n+11|0]=o>>>24,i[n+12|0]=u,i[n+13|0]=u>>>8,i[n+14|0]=u>>>16,i[n+15|0]=u>>>24,(0|c)<17)break t;for(c=n+c|0,o=n+16|0;u=A[e+20|0]|A[e+21|0]<<8|A[e+22|0]<<16|A[e+23|0]<<24,n=A[e+16|0]|A[e+17|0]<<8|A[e+18|0]<<16|A[e+19|0]<<24,i[0|o]=n,i[o+1|0]=n>>>8,i[o+2|0]=n>>>16,i[o+3|0]=n>>>24,i[o+4|0]=u,i[o+5|0]=u>>>8,i[o+6|0]=u>>>16,i[o+7|0]=u>>>24,u=A[e+28|0]|A[e+29|0]<<8|A[e+30|0]<<16|A[e+31|0]<<24,n=A[e+24|0]|A[e+25|0]<<8|A[e+26|0]<<16|A[e+27|0]<<24,i[o+8|0]=n,i[o+9|0]=n>>>8,i[o+10|0]=n>>>16,i[o+11|0]=n>>>24,i[o+12|0]=u,i[o+13|0]=u>>>8,i[o+14|0]=u>>>16,i[o+15|0]=u>>>24,u=A[e+36|0]|A[e+37|0]<<8|A[e+38|0]<<16|A[e+39|0]<<24,n=A[e+32|0]|A[e+33|0]<<8|A[e+34|0]<<16|A[e+35|0]<<24,i[o+16|0]=n,i[o+17|0]=n>>>8,i[o+18|0]=n>>>16,i[o+19|0]=n>>>24,i[o+20|0]=u,i[o+21|0]=u>>>8,i[o+22|0]=u>>>16,i[o+23|0]=u>>>24,u=A[e+44|0]|A[e+45|0]<<8|A[e+46|0]<<16|A[e+47|0]<<24,n=A[e+40|0]|A[e+41|0]<<8|A[e+42|0]<<16|A[e+43|0]<<24,i[o+24|0]=n,i[o+25|0]=n>>>8,i[o+26|0]=n>>>16,i[o+27|0]=n>>>24,i[o+28|0]=u,i[o+29|0]=u>>>8,i[o+30|0]=u>>>16,i[o+31|0]=u>>>24,e=e+32|0,c>>>0>(o=o+32|0)>>>0;);}else if(m>>>0<=7?(i[0|n]=A[0|e],i[n+1|0]=A[e+1|0],i[n+2|0]=A[e+2|0],i[n+3|0]=A[e+3|0],u=(o=e)+s[3936+(e=m<<2)>>2]|0,o=A[0|u]|A[u+1|0]<<8|A[u+2|0]<<16|A[u+3|0]<<24,i[n+4|0]=o,i[n+5|0]=o>>>8,i[n+6|0]=o>>>16,i[n+7|0]=o>>>24,e=u-s[e+3968>>2]|0):(u=A[e+4|0]|A[e+5|0]<<8|A[e+6|0]<<16|A[e+7|0]<<24,o=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,i[0|n]=o,i[n+1|0]=o>>>8,i[n+2|0]=o>>>16,i[n+3|0]=o>>>24,i[n+4|0]=u,i[n+5|0]=u>>>8,i[n+6|0]=u>>>16,i[n+7|0]=u>>>24),!(c>>>0<9)){if(u=n+c|0,((o=n+8|0)-(e=e+8|0)|0)<=15)for(;;)if(c=A[e+4|0]|A[e+5|0]<<8|A[e+6|0]<<16|A[e+7|0]<<24,n=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,i[0|o]=n,i[o+1|0]=n>>>8,i[o+2|0]=n>>>16,i[o+3|0]=n>>>24,i[o+4|0]=c,i[o+5|0]=c>>>8,i[o+6|0]=c>>>16,i[o+7|0]=c>>>24,e=e+8|0,!(u>>>0>(o=o+8|0)>>>0))break t;if(d=A[e+4|0]|A[e+5|0]<<8|A[e+6|0]<<16|A[e+7|0]<<24,f=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,i[0|o]=f,i[o+1|0]=f>>>8,i[o+2|0]=f>>>16,i[o+3|0]=f>>>24,i[o+4|0]=d,i[o+5|0]=d>>>8,i[o+6|0]=d>>>16,i[o+7|0]=d>>>24,d=A[e+12|0]|A[e+13|0]<<8|A[e+14|0]<<16|A[e+15|0]<<24,f=A[e+8|0]|A[e+9|0]<<8|A[e+10|0]<<16|A[e+11|0]<<24,i[o+8|0]=f,i[o+9|0]=f>>>8,i[o+10|0]=f>>>16,i[o+11|0]=f>>>24,i[o+12|0]=d,i[o+13|0]=d>>>8,i[o+14|0]=d>>>16,i[o+15|0]=d>>>24,!((0|c)<25))for(o=n+24|0;c=A[e+20|0]|A[e+21|0]<<8|A[e+22|0]<<16|A[e+23|0]<<24,n=A[e+16|0]|A[e+17|0]<<8|A[e+18|0]<<16|A[e+19|0]<<24,i[0|o]=n,i[o+1|0]=n>>>8,i[o+2|0]=n>>>16,i[o+3|0]=n>>>24,i[o+4|0]=c,i[o+5|0]=c>>>8,i[o+6|0]=c>>>16,i[o+7|0]=c>>>24,c=A[e+28|0]|A[e+29|0]<<8|A[e+30|0]<<16|A[e+31|0]<<24,n=A[e+24|0]|A[e+25|0]<<8|A[e+26|0]<<16|A[e+27|0]<<24,i[o+8|0]=n,i[o+9|0]=n>>>8,i[o+10|0]=n>>>16,i[o+11|0]=n>>>24,i[o+12|0]=c,i[o+13|0]=c>>>8,i[o+14|0]=c>>>16,i[o+15|0]=c>>>24,c=A[e+36|0]|A[e+37|0]<<8|A[e+38|0]<<16|A[e+39|0]<<24,n=A[e+32|0]|A[e+33|0]<<8|A[e+34|0]<<16|A[e+35|0]<<24,i[o+16|0]=n,i[o+17|0]=n>>>8,i[o+18|0]=n>>>16,i[o+19|0]=n>>>24,i[o+20|0]=c,i[o+21|0]=c>>>8,i[o+22|0]=c>>>16,i[o+23|0]=c>>>24,c=A[e+44|0]|A[e+45|0]<<8|A[e+46|0]<<16|A[e+47|0]<<24,n=A[e+40|0]|A[e+41|0]<<8|A[e+42|0]<<16|A[e+43|0]<<24,i[o+24|0]=n,i[o+25|0]=n>>>8,i[o+26|0]=n>>>16,i[o+27|0]=n>>>24,i[o+28|0]=c,i[o+29|0]=c>>>8,i[o+30|0]=c>>>16,i[o+31|0]=c>>>24,e=e+32|0,u>>>0>(o=o+32|0)>>>0;);}}else e=s[a+140>>2],s[a+8>>2]=s[a+136>>2],s[a+12>>2]=e,e=s[a+132>>2],s[a>>2]=s[a+128>>2],s[a+4>>2]=e,h=k(r,O,a,a+208|0,G,S,_,L);if((e=s[a+60>>2])>>>0>32?c=e:(o=s[a+64>>2])>>>0>=p[a+72>>2]?(c=7&e,s[a+60>>2]=c,e=o-(e>>>3|0)|0,s[a+64>>2]=e,s[a+56>>2]=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24):(0|(n=s[a+68>>2]))!=(0|o)?(c=(c=e)-((e=n>>>0>o-(e=e>>>3|0)>>>0?o-n|0:e)<<3)|0,s[a+60>>2]=c,e=o-e|0,s[a+64>>2]=e,s[a+56>>2]=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24):c=e,n=M-1|0,M=(e=h>>>0<4294967177)?n:M,E=e?E:h,r=r+h|0,!n|h>>>0>4294967176)break;b=s[a+84>>2],B=s[a+88>>2],e=s[a+92>>2],m=s[a+96>>2],o=s[a+76>>2],n=s[a+80>>2]}if(E>>>0>4294967176)break e;if(M){E=-20;break e}if(c>>>0<=32){if(32!=(0|c)){E=-20;break e}if((e=s[a+64>>2])>>>0>=p[a+72>>2]){E=-20;break e}if(E=-20,(0|e)!=s[a+68>>2])break e}e=s[a+104>>2],s[C>>2]=s[a+100>>2],s[C+4>>2]=e,s[C+8>>2]=s[a+108>>2],o=s[a+208>>2]}else r=t;E=-70,(e=G-o|0)>>>0>O-r>>>0||(E=(e=r?te(r,o,e)+e|0:0)-t|0)}return x=a+224|0,E}function S(e){var t,n=0,r=0,o=0,a=0,l=0,c=0;x=t=x-704|0,r=on(t+688|0,6044),o=s[r+4>>2],s[t+328>>2]=s[r>>2],s[t+332>>2]=o,l=t,c=Je(e,t+328|0),i[l+703|0]=c;e:if(!(s[e+4>>2]-s[e>>2]>>>0<2)){t:{n:{r:{o:{i:{a:{s:{l:{c:{u:{d:{A:{f:{p:{h:{g:{m:{y:{v:{b:{C:{I:switch(r=s[e>>2],(o=i[0|r])-76|0){case 36:break c;case 35:break u;case 34:break d;case 33:break A;case 32:break f;case 29:break p;case 27:break h;case 25:break g;case 24:break m;case 23:break y;case 21:break v;case 26:break b;case 8:break C;case 0:break I;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 22:case 28:case 30:case 31:break r;case 40:break i;case 39:break a;case 38:break s;case 37:break l;default:break o}n=j(e);break e}n=ge(e);break e}b:{if(n=s[e>>2],112!=(0|(n=(r=s[e+4>>2]-n>>>0>1?i[n+1|0]:0)<<24>>24))){if(76!=(255&n))break b;if(n=s[e>>2],((r=s[e+4>>2]-n>>>0>2?i[n+2|0]:0)<<24>>24)-48>>>0>9)break b}n=_e(e);break e}n=function(e){var t,n=0,r=0,o=0,a=0,l=0;x=t=x-528|0;b:if(Wt(e,102)){r=t,l=(o=(0|(n=s[e>>2]))!=s[e+4>>2]?i[0|n]:0)<<24>>24,o=1;C:if(76!=(0|l)){if(114!=(0|(n=255&l))){if(o=1,108==(0|n))break C;if(82!=(0|n))break b}o=0}if(i[r+527|0]=o,s[e>>2]=s[e>>2]+1,s[(r=o=t+512|0)>>2]=0,s[r+4>>2]=0,n=on(t+504|0,8376),r=s[n+4>>2],s[t+240>>2]=s[n>>2],s[t+244>>2]=r,Je(e,t+240|0))on(t+496|0,6047);else if(n=on(t+488|0,8379),r=s[n+4>>2],s[t+232>>2]=s[n>>2],s[t+236>>2]=r,Je(e,t+232|0))on(t+496|0,6050);else if(n=on(t+480|0,8382),r=s[n+4>>2],s[t+224>>2]=s[n>>2],s[t+228>>2]=r,Je(e,t+224|0))on(t+496|0,6052);else if(n=on(t+472|0,8385),r=s[n+4>>2],s[t+216>>2]=s[n>>2],s[t+220>>2]=r,Je(e,t+216|0))on(t+496|0,6055);else if(n=on(t+464|0,8388),r=s[n+4>>2],s[t+208>>2]=s[n>>2],s[t+212>>2]=r,Je(e,t+208|0))on(t+496|0,6078);else if(n=on(t+456|0,8391),r=s[n+4>>2],s[t+200>>2]=s[n>>2],s[t+204>>2]=r,Je(e,t+200|0))on(t+496|0,6097);else if(n=on(t+448|0,8394),r=s[n+4>>2],s[t+192>>2]=s[n>>2],s[t+196>>2]=r,Je(e,t+192|0))on(t+496|0,6102);else if(n=on(t+440|0,8397),r=s[n+4>>2],s[t+184>>2]=s[n>>2],s[t+188>>2]=r,Je(e,t+184|0))on(t+496|0,6104);else if(n=on(t+432|0,8400),r=s[n+4>>2],s[t+176>>2]=s[n>>2],s[t+180>>2]=r,Je(e,t+176|0))on(t+496|0,6107);else if(n=on(t+424|0,8403),r=s[n+4>>2],s[t+168>>2]=s[n>>2],s[t+172>>2]=r,Je(e,t+168|0))on(t+496|0,6109);else if(n=on(t+416|0,8406),r=s[n+4>>2],s[t+160>>2]=s[n>>2],s[t+164>>2]=r,Je(e,t+160|0))on(t+496|0,6112);else if(n=on(t+408|0,8409),r=s[n+4>>2],s[t+152>>2]=s[n>>2],s[t+156>>2]=r,Je(e,t+152|0))on(t+496|0,6115);else if(n=on(t+400|0,8412),r=s[n+4>>2],s[t+144>>2]=s[n>>2],s[t+148>>2]=r,Je(e,t+144|0))on(t+496|0,6118);else if(n=on(t+392|0,8415),r=s[n+4>>2],s[t+136>>2]=s[n>>2],s[t+140>>2]=r,Je(e,t+136|0))on(t+496|0,6120);else if(n=on(t+384|0,8418),r=s[n+4>>2],s[t+128>>2]=s[n>>2],s[t+132>>2]=r,Je(e,t+128|0))on(t+496|0,6123);else if(n=on(t+376|0,8421),r=s[n+4>>2],s[t+120>>2]=s[n>>2],s[t+124>>2]=r,Je(e,t+120|0))on(t+496|0,6126);else if(n=on(t+368|0,8424),r=s[n+4>>2],s[t+112>>2]=s[n>>2],s[t+116>>2]=r,Je(e,t+112|0))on(t+496|0,6130);else if(n=on(t+360|0,8427),r=s[n+4>>2],s[t+104>>2]=s[n>>2],s[t+108>>2]=r,Je(e,t+104|0))on(t+496|0,6132);else if(n=on(t+352|0,8430),r=s[n+4>>2],s[t+96>>2]=s[n>>2],s[t+100>>2]=r,Je(e,t+96|0))on(t+496|0,6134);else if(n=on(t+344|0,8433),r=s[n+4>>2],s[t+88>>2]=s[n>>2],s[t+92>>2]=r,Je(e,t+88|0))on(t+496|0,6095);else if(n=on(t+336|0,8436),r=s[n+4>>2],s[t+80>>2]=s[n>>2],s[t+84>>2]=r,Je(e,t+80|0))on(t+496|0,6137);else if(n=on(t+328|0,8439),r=s[n+4>>2],s[t+72>>2]=s[n>>2],s[t+76>>2]=r,Je(e,t+72|0))on(t+496|0,6143);else if(n=on(t+320|0,8442),r=s[n+4>>2],s[t+64>>2]=s[n>>2],s[t+68>>2]=r,Je(e,t- -64|0))on(t+496|0,6159);else if(n=on(t+312|0,8445),r=s[n+4>>2],s[t+56>>2]=s[n>>2],s[t+60>>2]=r,Je(e,t+56|0))on(t+496|0,6162);else if(n=on(t+304|0,8448),r=s[n+4>>2],s[t+48>>2]=s[n>>2],s[t+52>>2]=r,Je(e,t+48|0))on(t+496|0,6164);else if(n=on(t+296|0,8451),r=s[n+4>>2],s[t+40>>2]=s[n>>2],s[t+44>>2]=r,Je(e,t+40|0))on(t+496|0,6171);else if(n=on(t+288|0,8454),r=s[n+4>>2],s[t+32>>2]=s[n>>2],s[t+36>>2]=r,Je(e,t+32|0))on(t+496|0,6173);else if(n=on(t+280|0,8457),r=s[n+4>>2],s[t+24>>2]=s[n>>2],s[t+28>>2]=r,Je(e,t+24|0))on(t+496|0,6199);else if(n=on(t+272|0,8460),r=s[n+4>>2],s[t+16>>2]=s[n>>2],s[t+20>>2]=r,Je(e,t+16|0))on(t+496|0,6201);else if(n=on(t+264|0,8463),r=s[n+4>>2],s[t+8>>2]=s[n>>2],s[t+12>>2]=r,Je(e,t+8|0))on(t+496|0,6204);else{if(n=on(t+256|0,8466),r=s[n+4>>2],s[t>>2]=s[n>>2],s[t+4>>2]=r,!Je(e,t))break b;on(t+496|0,6207)}r=s[t+500>>2],s[t+512>>2]=s[t+496>>2],s[t+516>>2]=r,r=S(e),s[t+496>>2]=r,s[t+252>>2]=0,r&&(76!=(255&l)&&82!=(0|l)||(a=S(e),s[t+252>>2]=a,a)?(!A[t+527|0]|!a||(r=s[t+496>>2],s[t+496>>2]=s[t+252>>2],s[t+252>>2]=r),a=function(e,t,n,r,o){var a,l;return x=a=x-16|0,l=ct(e,28),t=A[0|t],e=s[n+4>>2],n=s[n>>2],s[a+8>>2]=n,s[a+12>>2]=e,o=s[o>>2],r=s[r>>2],s[a>>2]=n,s[a+4>>2]=e,e=function(e,t,n,r,o){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=62,s[e>>2]=5508,s[e+12>>2]=o,s[e+8>>2]=r,s[e>>2]=8480,r=s[n+4>>2],n=s[n>>2],i[e+24|0]=t,s[e+16>>2]=n,s[e+20>>2]=r,e}(l,t,a,r,o),x=a+16|0,e}(e+416|0,t+527|0,o,t+496|0,t+252|0)):a=0)}return x=t+528|0,a}(e);break e}v:{b:{C:{I:{E:{x:{switch((o=i[r+1|0])-97|0){case 1:case 2:break e;case 3:break E;case 0:break x}if(78==(0|o))break C;if(83==(0|o))break b;if(110==(0|o))break I;if(116==(0|o))break v;if(122!=(0|o))break e;if(s[e>>2]=r+2,n=S(e),s[t+632>>2]=n,!n)break t;n=Qn(e,6057,t+632|0);break e}s[e>>2]=r+2,n=on(t+680|0,6047),r=s[n+4>>2],s[t+16>>2]=s[n>>2],s[t+20>>2]=r,n=ht(e,t+16|0);break e}s[e>>2]=r+2,n=on(t+672|0,6050),r=s[n+4>>2],s[t+24>>2]=s[n>>2],s[t+28>>2]=r,n=Ut(e,t+24|0);break e}s[e>>2]=r+2,n=on(t+664|0,6050),r=s[n+4>>2],s[t+32>>2]=s[n>>2],s[t+36>>2]=r,n=ht(e,t+32|0);break e}s[e>>2]=r+2,n=on(t+656|0,6052),r=s[n+4>>2],s[t+40>>2]=s[n>>2],s[t+44>>2]=r,n=ht(e,t+40|0);break e}s[e>>2]=r+2,n=on(t+648|0,6055),r=s[n+4>>2],s[t+48>>2]=s[n>>2],s[t+52>>2]=r,n=ht(e,t+48|0);break e}if(s[e>>2]=r+2,n=R(e),s[t+632>>2]=n,!n)break t;n=Qn(e,6057,t+632|0);break e}y:{v:{b:{C:{switch((o=i[r+1|0])-108|0){case 2:break e;case 3:break v;case 1:break b;case 0:break C}if(118==(0|o))break y;if(99!=(0|o))break e;if(s[e>>2]=r+2,n=R(e),s[t+632>>2]=n,!n)break t;if(n=S(e),s[t+644>>2]=n,!n)break t;n=vt(e+416|0,6067,t+632|0,t+644|0);break e}if(s[e>>2]=r+2,r=S(e),s[t+644>>2]=r,!r)break e;for(o=s[4+(r=e+8|0)>>2]-s[r>>2]>>2;!Wt(e,69);){if(a=S(e),s[t+632>>2]=a,!a)break e;Qt(r,t+632|0)}Jt(t+632|0,e,o),n=function(e,t,n){var r,o;return x=r=x-16|0,o=ct(e,20),t=s[t>>2],e=s[n+4>>2],n=s[n>>2],s[r>>2]=n,s[r+4>>2]=e,s[r+8>>2]=n,s[r+12>>2]=e,e=function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=55,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=9028,t=s[n+4>>2],s[e+12>>2]=s[n>>2],s[e+16>>2]=t,e}(o,t,r),x=r+16|0,e}(e+416|0,t+644|0,t+632|0);break e}s[e>>2]=r+2,n=on(t+624|0,6078),r=s[n+4>>2],s[t+56>>2]=s[n>>2],s[t+60>>2]=r,n=ht(e,t+56|0);break e}s[e>>2]=r+2,n=on(t+616|0,6080),r=s[n+4>>2],s[t+64>>2]=s[n>>2],s[t+68>>2]=r,n=Ut(e,t- -64|0);break e}n=function(e){var t,n=0,r=0,o=0,a=0;x=t=x-48|0,n=on(t+40|0,9120),r=s[n+4>>2],s[t+8>>2]=s[n>>2],s[t+12>>2]=r;y:if(Je(e,t+8|0)&&(n=Mt(t+24|0,e+388|0,0),r=R(e),s[t+36>>2]=r,A[n+5|0]&&(i[s[n>>2]]=A[n+4|0]),r))if(Wt(e,95)){for(r=s[4+(n=e+8|0)>>2]-s[n>>2]>>2;!Wt(e,69);){if(o=S(e),s[t+24>>2]=o,!o)break y;Qt(n,t+24|0)}Jt(t+24|0,e,r),a=Mn(e,t+36|0,t+24|0)}else n=S(e),s[t+20>>2]=n,n&&(Kt(t+24|0,e,t+20|0,t+24|0),a=Mn(e,t+36|0,t+24|0));return x=t+48|0,a}(e);break e}m:{y:{v:{b:{C:{I:{switch((o=i[r+1|0])-108|0){case 1:case 3:case 4:case 5:case 6:case 9:break e;case 10:break y;case 8:break v;case 7:break b;case 2:break C;case 0:break I}E:switch(o-97|0){case 0:if(s[e>>2]=r+2,n=S(e),s[t+632>>2]=n,!n)break t;i[t+644|0]=1,n=un(e,t+632|0,t+703|0,t+644|0);break e;case 2:if(s[e>>2]=r+2,n=R(e),s[t+632>>2]=n,!n)break t;if(n=S(e),s[t+644>>2]=n,!n)break t;n=vt(e+416|0,6082,t+632|0,t+644|0);break e;case 1:case 3:break e;case 4:break E;default:break m}s[e>>2]=r+2,n=on(t+608|0,6095),r=s[n+4>>2],s[t+72>>2]=s[n>>2],s[t+76>>2]=r,n=Ut(e,t+72|0);break e}if(s[e>>2]=r+2,n=S(e),s[t+632>>2]=n,!n)break t;i[t+644|0]=0,n=un(e,t+632|0,t+703|0,t+644|0);break e}n=J(e);break e}if(s[e>>2]=r+2,n=S(e),s[t+632>>2]=n,!n)break t;if(n=S(e),s[t+644>>2]=n,!n)break t;n=Sn(e,t+632|0,6097,t+644|0);break e}if(s[e>>2]=r+2,n=S(e),s[t+632>>2]=n,!n)break t;if(n=S(e),s[t+644>>2]=n,!n)break t;n=yt(e+416|0,t+632|0,6100,t+644|0);break e}s[e>>2]=r+2,n=on(t+600|0,6102),r=s[n+4>>2],s[t+80>>2]=s[n>>2],s[t+84>>2]=r,n=ht(e,t+80|0);break e}if(86!=(0|o))break e;s[e>>2]=r+2,n=on(t+592|0,6104),r=s[n+4>>2],s[t+88>>2]=s[n>>2],s[t+92>>2]=r,n=ht(e,t+88|0);break e}g:{m:{y:switch((o=i[r+1|0])-111|0){case 1:break e;case 2:break g;case 0:break y;default:break m}s[e>>2]=r+2,n=on(t+584|0,6107),r=s[n+4>>2],s[t+96>>2]=s[n>>2],s[t+100>>2]=r,n=ht(e,t+96|0);break e}if(79!=(0|o))break e;s[e>>2]=r+2,n=on(t+576|0,6109),r=s[n+4>>2],s[t+104>>2]=s[n>>2],s[t+108>>2]=r,n=ht(e,t+104|0);break e}s[e>>2]=r+2,n=on(t+568|0,6112),r=s[n+4>>2],s[t+112>>2]=s[n>>2],s[t+116>>2]=r,n=ht(e,t+112|0);break e}if(116!=(0|(o=i[r+1|0]))){if(101!=(0|o))break e;s[e>>2]=r+2,n=on(t+560|0,6115),r=s[n+4>>2],s[t+120>>2]=s[n>>2],s[t+124>>2]=r,n=ht(e,t+120|0);break e}s[e>>2]=r+2,n=on(t+552|0,6118),r=s[n+4>>2],s[t+128>>2]=s[n>>2],s[t+132>>2]=r,n=ht(e,t+128|0);break e}if(108!=(0|(o=i[r+1|0]))){if(120!=(0|o))break e;if(s[e>>2]=r+2,n=S(e),s[t+632>>2]=n,!n)break t;if(n=S(e),s[t+644>>2]=n,!n)break t;n=function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=48,s[e>>2]=5508,s[e+12>>2]=n,s[e+8>>2]=t,s[e>>2]=10572,e}(ct(e+416|0,16),s[t+632>>2],s[t+644>>2]);break e}for(s[e>>2]=r+2,o=s[4+(r=e+8|0)>>2]-s[r>>2]>>2;!Wt(e,69);){if(a=Ae(e),s[t+632>>2]=a,!a)break e;Qt(r,t+632|0)}s[t+644>>2]=0,Jt(t+632|0,e,o),n=function(e,t){var n,r;return x=n=x-16|0,r=ct(e,20),e=s[t+4>>2],t=s[t>>2],s[n>>2]=t,s[n+4>>2]=e,s[n+8>>2]=t,s[n+12>>2]=e,e=It(r,0,n),x=n+16|0,e}(e+416|0,t+632|0);break e}f:{p:{h:{switch((o=i[r+1|0])-115|0){case 1:break f;case 0:break h}if(83==(0|o))break p;if(101!=(0|o))break e;s[e>>2]=r+2,n=on(t+544|0,6120),r=s[n+4>>2],s[t+136>>2]=s[n>>2],s[t+140>>2]=r,n=ht(e,t+136|0);break e}s[e>>2]=r+2,n=on(t+536|0,6123),r=s[n+4>>2],s[t+144>>2]=s[n>>2],s[t+148>>2]=r,n=ht(e,t+144|0);break e}s[e>>2]=r+2,n=on(t+528|0,6126),r=s[n+4>>2],s[t+152>>2]=s[n>>2],s[t+156>>2]=r,n=ht(e,t+152|0);break e}s[e>>2]=r+2,n=on(t+520|0,6130),r=s[n+4>>2],s[t+160>>2]=s[n>>2],s[t+164>>2]=r,n=ht(e,t+160|0);break e}A:{f:{p:{h:{g:{switch((o=i[r+1|0])-105|0){case 1:case 2:break e;case 4:break A;case 3:break p;case 0:break g}switch(o-73|0){case 3:break f;case 0:break h;default:break e}}s[e>>2]=r+2,n=on(t+512|0,6132),r=s[n+4>>2],s[t+168>>2]=s[n>>2],s[t+172>>2]=r,n=ht(e,t+168|0);break e}s[e>>2]=r+2,n=on(t+504|0,6134),r=s[n+4>>2],s[t+176>>2]=s[n>>2],s[t+180>>2]=r,n=ht(e,t+176|0);break e}s[e>>2]=r+2,n=on(t+496|0,6095),r=s[n+4>>2],s[t+184>>2]=s[n>>2],s[t+188>>2]=r,n=ht(e,t+184|0);break e}s[e>>2]=r+2,n=on(t+488|0,6137),r=s[n+4>>2],s[t+192>>2]=s[n>>2],s[t+196>>2]=r,n=ht(e,t+192|0);break e}if(s[e>>2]=r+2,Wt(e,95)){n=on(t+480|0,6140),r=s[n+4>>2],s[t+200>>2]=s[n>>2],s[t+204>>2]=r,n=Ut(e,t+200|0);break e}if(n=S(e),s[t+632>>2]=n,!n)break t;n=Pn(e,t+632|0,6140);break e}d:{A:{f:{p:{h:{switch((o=i[r+1|0])-97|0){case 1:case 2:case 3:case 5:break e;case 6:break f;case 4:break p;case 0:break h}switch(o-116|0){case 4:break d;case 0:break A;case 3:break h;default:break e}}n=function(e){var t,n,r,o=0,a=0,l=0,c=0;x=t=x-112|0,o=on(t+96|0,6044),a=s[o+4>>2],s[t+32>>2]=s[o>>2],s[t+36>>2]=a,n=t,r=Je(e,t+32|0),i[n+111|0]=r,l=t,o=s[e>>2],o=s[e+4>>2]-o>>>0>1?A[o+1|0]:0,i[l+95|0]=97==(255&o),o=on(t+80|0,11120),a=s[o+4>>2],s[t+24>>2]=s[o>>2],s[t+28>>2]=a;h:if(Je(e,t+24|0)||(o=on(t+72|0,11123),a=s[o+4>>2],s[t+16>>2]=s[o>>2],s[t+20>>2]=a,Je(e,t+16|0))){o=s[4+(l=e+8|0)>>2]-s[l>>2]>>2;g:{for(;!Wt(e,95);){if(a=S(e),s[t+64>>2]=a,!a)break g;Qt(l,t- -64|0)}if(Jt(t- -64|0,e,o),a=R(e),s[t+60>>2]=a,!a)break h;if(o=on(t+48|0,11126),a=s[o+4>>2],s[t+8>>2]=s[o>>2],s[t+12>>2]=a,Je(e,t+8|0)){for(o=s[l+4>>2]-s[l>>2]>>2;!Wt(e,69);){if(a=S(e),s[t+40>>2]=a,!a)break h;Qt(l,t+40|0)}Jt(t+40|0,e,o),c=mn(e,t- -64|0,t+60|0,t+40|0,t+111|0,t+95|0);break h}if(!Wt(e,69))break h;s[(a=t+40|0)>>2]=0,s[a+4>>2]=0,c=mn(e,t- -64|0,t+60|0,a,t+111|0,t+95|0);break h}}return x=t+112|0,c}(e);break e}s[e>>2]=r+2,n=on(t+472|0,6143),r=s[n+4>>2],s[t+208>>2]=s[n>>2],s[t+212>>2]=r,n=ht(e,t+208|0);break e}s[e>>2]=r+2,n=on(t+464|0,6132),r=s[n+4>>2],s[t+216>>2]=s[n>>2],s[t+220>>2]=r,n=Ut(e,t+216|0);break e}s[e>>2]=r+2,n=on(t+456|0,6146),r=s[n+4>>2],s[t+224>>2]=s[n>>2],s[t+228>>2]=r,n=Ut(e,t+224|0);break e}if(s[e>>2]=r+2,n=S(e),s[t+632>>2]=n,!n)break t;n=nt(e+416|0,6148,t+632|0);break e}u:{d:{A:{f:switch((o=i[r+1|0])-110|0){case 2:case 3:break e;case 4:break d;case 1:break A;case 0:break f;default:break u}n=J(e);break e}s[e>>2]=r+2,n=on(t+448|0,6159),r=s[n+4>>2],s[t+232>>2]=s[n>>2],s[t+236>>2]=r,n=ht(e,t+232|0);break e}s[e>>2]=r+2,n=on(t+440|0,6162),r=s[n+4>>2],s[t+240>>2]=s[n>>2],s[t+244>>2]=r,n=ht(e,t+240|0);break e}if(82!=(0|o))break e;s[e>>2]=r+2,n=on(t+432|0,6164),r=s[n+4>>2],s[t+248>>2]=s[n>>2],s[t+252>>2]=r,n=ht(e,t+248|0);break e}c:{u:{d:{A:{f:{p:switch((o=i[r+1|0])-108|0){case 2:case 3:case 5:case 6:break e;case 8:break c;case 7:break u;case 4:break d;case 0:break f;case 1:break p;default:break A}s[e>>2]=r+2,n=on(t+424|0,6167),r=s[n+4>>2],s[t+256>>2]=s[n>>2],s[t+260>>2]=r,n=ht(e,t+256|0);break e}s[e>>2]=r+2,n=on(t+416|0,6171),r=s[n+4>>2],s[t+264>>2]=s[n>>2],s[t+268>>2]=r,n=ht(e,t+264|0);break e}if(76!=(0|o))break e;s[e>>2]=r+2,n=on(t+408|0,6173),r=s[n+4>>2],s[t+272>>2]=s[n>>2],s[t+276>>2]=r,n=ht(e,t+272|0);break e}if(s[e>>2]=r+2,Wt(e,95)){n=on(t+400|0,6176),r=s[n+4>>2],s[t+280>>2]=s[n>>2],s[t+284>>2]=r,n=Ut(e,t+280|0);break e}if(n=S(e),s[t+632>>2]=n,!n)break t;n=Pn(e,t+632|0,6176);break e}s[e>>2]=r+2,n=on(t+392|0,6171),r=s[n+4>>2],s[t+288>>2]=s[n>>2],s[t+292>>2]=r,n=Ut(e,t+288|0);break e}if(s[e>>2]=r+2,n=S(e),s[t+632>>2]=n,!n)break t;if(n=S(e),s[t+644>>2]=n,!n)break t;n=Sn(e,t+632|0,6179,t+644|0);break e}if(117!=A[r+1|0])break e;if(s[e>>2]=r+2,n=S(e),s[t+632>>2]=n,!n)break t;if(n=S(e),s[t+644>>2]=n,!n)break t;if(n=S(e),s[t+388>>2]=n,!n)break t;n=function(e,t,n,r){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=50,s[e>>2]=5508,s[e+16>>2]=r,s[e+12>>2]=n,s[e+8>>2]=t,s[e>>2]=11364,e}(ct(e+416|0,20),s[t+632>>2],s[t+644>>2],s[t+388>>2]);break e}s:{l:{if(77!=(0|(o=i[r+1|0]))){if(83==(0|o))break s;if(115==(0|o))break l;if(109!=(0|o)){if(99!=(0|o))break e;if(s[e>>2]=r+2,n=R(e),s[t+632>>2]=n,!n)break t;if(n=S(e),s[t+644>>2]=n,!n)break t;n=vt(e+416|0,6182,t+632|0,t+644|0);break e}s[e>>2]=r+2,n=on(t+376|0,6199),r=s[n+4>>2],s[t+296>>2]=s[n>>2],s[t+300>>2]=r,n=ht(e,t+296|0);break e}s[e>>2]=r+2,n=on(t+368|0,6201),r=s[n+4>>2],s[t+304>>2]=s[n>>2],s[t+308>>2]=r,n=ht(e,t+304|0);break e}s[e>>2]=r+2,n=on(t+360|0,6204),r=s[n+4>>2],s[t+312>>2]=s[n>>2],s[t+316>>2]=r,n=ht(e,t+312|0);break e}s[e>>2]=r+2,n=on(t+352|0,6207),r=s[n+4>>2],s[t+320>>2]=s[n>>2],s[t+324>>2]=r,n=ht(e,t+320|0);break e}a:{s:{l:{c:{u:{d:{switch((o=i[r+1|0])-112|0){case 1:case 3:break e;case 4:break c;case 2:break u;case 0:break d}if(80==(0|o))break a;if(90==(0|o))break s;if(122==(0|o))break l;if(99!=(0|o))break e;if(s[e>>2]=r+2,n=R(e),s[t+632>>2]=n,!n)break t;if(n=S(e),s[t+644>>2]=n,!n)break t;n=vt(e+416|0,6211,t+632|0,t+644|0);break e}if(s[e>>2]=r+2,n=S(e),s[t+632>>2]=n,!n)break t;n=bn(e,t+632|0);break e}n=J(e);break e}if(s[e>>2]=r+2,n=R(e),s[t+632>>2]=n,!n)break t;n=Qn(e,6223,t+632|0);break e}if(s[e>>2]=r+2,n=S(e),s[t+632>>2]=n,!n)break t;n=Qn(e,6223,t+632|0);break e}if(s[e>>2]=r+2,102!=(0|(r=(r=(0|(r=s[e>>2]))!=s[e+4>>2]?i[0|r]:0)<<24>>24))){if(84!=(255&r))break e;if(n=ge(e),s[t+632>>2]=n,!n)break t;n=function(e,t){return e=ct(e,12),t=s[t>>2],i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=54,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=11484,e}(e+416|0,t+632|0);break e}if(n=_e(e),s[t+632>>2]=n,!n)break t;n=kn(e,t+632|0);break e}for(s[e>>2]=r+2,o=s[4+(r=e+8|0)>>2]-s[r>>2]>>2;!Wt(e,69);){if(a=ve(e),s[t+632>>2]=a,!a)break e;Qt(r,t+632|0)}Jt(t+632|0,e,o),l=t,c=function(e,t){var n,r,o;return x=r=x-16|0,n=ct(e,16),o=s[t+4>>2],e=s[t>>2],s[r>>2]=e,s[r+4>>2]=o,s[r+8>>2]=e,s[r+12>>2]=o,i[n+7|0]=1,i[n+6|0]=1,i[n+5|0]=1,i[n+4|0]=0,s[n>>2]=5508,s[n>>2]=11608,e=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=e,x=r+16|0,n}(e+416|0,t+632|0),s[l+644>>2]=c,n=kn(e,t+644|0);break e}i:{a:{s:{l:{switch((o=i[r+1|0])-105|0){case 1:case 2:break e;case 3:break s;case 0:break l}if(119==(0|o))break i;if(114==(0|o))break a;if(101!=(0|o))break e;if(s[e>>2]=r+2,n=S(e),s[t+632>>2]=n,!n)break t;n=Qn(e,6244,t+632|0);break e}if(s[e>>2]=r+2,n=R(e),s[t+632>>2]=n,!n)break t;n=Qn(e,6244,t+632|0);break e}if(s[e>>2]=r+2,n=R(e),s[t+644>>2]=n,!n)break t;for(r=s[4+(n=e+8|0)>>2]-s[n>>2]>>2;!Wt(e,69);){if(o=Ae(e),s[t+632>>2]=o,!o)break t;Qt(n,t+632|0)}Jt(t+632|0,e,r),n=function(e,t,n){var r,o;return x=r=x-16|0,o=ct(e,20),t=s[t>>2],e=s[n+4>>2],n=s[n>>2],s[r>>2]=n,s[r+4>>2]=e,s[r+8>>2]=n,s[r+12>>2]=e,e=It(o,t,r),x=r+16|0,e}(e+416|0,t+644|0,t+632|0);break e}s[e>>2]=r+2,n=Nn(e,6253);break e}if(s[e>>2]=r+2,n=S(e),s[t+632>>2]=n,!n)break t;n=function(e,t){return e=ct(e,12),t=s[t>>2],i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=63,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=11716,e}(e+416|0,t+632|0);break e}if(o-49>>>0<9)break n}if(r=on(t+344|0,6259),o=s[r+4>>2],s[t+8>>2]=s[r>>2],s[t+12>>2]=o,Je(e,t+8|0)){if(n=R(e),s[t+632>>2]=n,!n)break t;n=In(e,t+632|0);break e}if(r=on(t+336|0,6271),o=s[r+4>>2],s[t>>2]=s[r>>2],s[t+4>>2]=o,!Je(e,t))break e;if(n=S(e),s[t+632>>2]=n,!n)break t;n=In(e,t+632|0);break e}n=J(e);break e}n=0}return x=t+704|0,n}function D(e){var t,n=0,r=0,o=0,i=0,a=0,l=0,c=0,u=0,d=0,f=0,h=0,g=0,m=0;x=t=x-16|0;e:{t:{n:{r:{o:{i:{a:{s:{l:{c:{u:{d:{if((e|=0)>>>0<=244){if(3&(n=(a=s[4042])>>>(r=(u=e>>>0<11?16:e+11&-8)>>>3|0)|0)){e=(i=s[16216+(n=(o=r+(1&~n)|0)<<3)>>2])+8|0,(0|(r=s[i+8>>2]))!=(0|(n=n+16208|0))?(s[r+12>>2]=n,s[n+8>>2]=r):(g=16168,m=sn(o)&a,s[g>>2]=m),n=o<<3,s[i+4>>2]=3|n,s[4+(n=n+i|0)>>2]=1|s[n+4>>2];break e}if((f=s[4044])>>>0>=u>>>0)break d;if(n){r=e=(n=(0-(e=(0-(e=2<<r)|e)&n<<r)&e)-1|0)>>>12&16,r|=e=(n=n>>>e|0)>>>5&8,r|=e=(n=n>>>e|0)>>>2&4,l=s[16216+(e=(r=((r|=e=(n=n>>>e|0)>>>1&2)|(e=(n=n>>>e|0)>>>1&1))+(n>>>e|0)|0)<<3)>>2],(0|(n=s[l+8>>2]))!=(0|(e=e+16208|0))?(s[n+12>>2]=e,s[e+8>>2]=n):(a=sn(r)&a,s[4042]=a),e=l+8|0,s[l+4>>2]=3|u,i=(n=r<<3)-u|0,s[4+(o=l+u|0)>>2]=1|i,s[n+l>>2]=i,f&&(r=16208+((n=f>>>3|0)<<3)|0,l=s[4047],(n=1<<n)&a?n=s[r+8>>2]:(s[4042]=n|a,n=r),s[r+8>>2]=l,s[n+12>>2]=l,s[l+12>>2]=r,s[l+8>>2]=n),s[4047]=o,s[4044]=i;break e}if(!(c=s[4043]))break d;for(r=e=(n=(c&0-c)-1|0)>>>12&16,r|=e=(n=n>>>e|0)>>>5&8,r|=e=(n=n>>>e|0)>>>2&4,n=s[16472+(((r|=e=(n=n>>>e|0)>>>1&2)|(e=(n=n>>>e|0)>>>1&1))+(n>>>e|0)<<2)>>2],i=(-8&s[n+4>>2])-u|0,r=n;(e=s[r+16>>2])||(e=s[r+20>>2]);)i=(o=(r=(-8&s[e+4>>2])-u|0)>>>0<i>>>0)?r:i,n=o?e:n,r=e;if((d=n+u|0)>>>0<=n>>>0)break u;if(h=s[n+24>>2],(0|(o=s[n+12>>2]))!=(0|n)){e=s[n+8>>2],s[e+12>>2]=o,s[o+8>>2]=e;break t}if(!(e=s[(r=n+20|0)>>2])){if(!(e=s[n+16>>2]))break c;r=n+16|0}for(;l=r,o=e,(e=s[(r=e+20|0)>>2])||(r=o+16|0,e=s[o+16>>2]););s[l>>2]=0;break t}if(u=-1,!(e>>>0>4294967231)&&(u=-8&(e=e+11|0),d=s[4043])){a=31,i=0-u|0,u>>>0<=16777215&&(e=e>>>8|0,e<<=l=e+1048320>>>16&8,a=28+((e=((e<<=r=e+520192>>>16&4)<<(n=e+245760>>>16&2)>>>15|0)-(n|r|l)|0)<<1|u>>>e+21&1)|0);A:{f:{if(r=s[16472+(a<<2)>>2])for(e=0,n=u<<(31==(0|a)?0:25-(a>>>1|0));;){if(!((l=(-8&s[r+4>>2])-u|0)>>>0>=i>>>0||(o=r,i=l))){i=0,e=r;break f}if(l=s[r+20>>2],r=s[16+((n>>>29&4)+r|0)>>2],e=l?(0|l)==(0|r)?e:l:e,n<<=1,!r)break}else e=0;if(!(e|o)){if(!(e=(0-(e=2<<a)|e)&d))break d;r=e=(n=(e&0-e)-1|0)>>>12&16,r|=e=(n=n>>>e|0)>>>5&8,r|=e=(n=n>>>e|0)>>>2&4,e=s[16472+(((r|=e=(n=n>>>e|0)>>>1&2)|(e=(n=n>>>e|0)>>>1&1))+(n>>>e|0)<<2)>>2]}if(!e)break A}for(;i=(r=(n=(-8&s[e+4>>2])-u|0)>>>0<i>>>0)?n:i,o=r?e:o,e=(n=s[e+16>>2])||s[e+20>>2];);}if(!(!o|s[4044]-u>>>0<=i>>>0)){if((c=o+u|0)>>>0<=o>>>0)break u;if(a=s[o+24>>2],(0|o)!=(0|(n=s[o+12>>2]))){e=s[o+8>>2],s[e+12>>2]=n,s[n+8>>2]=e;break n}if(!(e=s[(r=o+20|0)>>2])){if(!(e=s[o+16>>2]))break l;r=o+16|0}for(;l=r,n=e,(e=s[(r=e+20|0)>>2])||(r=n+16|0,e=s[n+16>>2]););s[l>>2]=0;break n}}}if((r=s[4044])>>>0>=u>>>0){o=s[4047],(n=r-u|0)>>>0>=16?(s[4044]=n,e=o+u|0,s[4047]=e,s[e+4>>2]=1|n,s[r+o>>2]=n,s[o+4>>2]=3|u):(s[4047]=0,s[4044]=0,s[o+4>>2]=3|r,s[4+(e=r+o|0)>>2]=1|s[e+4>>2]),e=o+8|0;break e}if((c=s[4045])>>>0>u>>>0){n=c-u|0,s[4045]=n,e=(r=s[4048])+u|0,s[4048]=e,s[e+4>>2]=1|n,s[r+4>>2]=3|u,e=r+8|0;break e}if(e=0,n=d=u+47|0,s[4160]?r=s[4162]:(s[4163]=-1,s[4164]=-1,s[4161]=4096,s[4162]=4096,s[4160]=t+12&-16^1431655768,s[4165]=0,s[4153]=0,r=4096),(r=(l=n+r|0)&(i=0-r|0))>>>0<=u>>>0)break e;if((o=s[4152])&&o>>>0<(a=(n=s[4150])+r|0)>>>0|n>>>0>=a>>>0)break e;if(4&A[16612])break i;d:{A:{if(o=s[4048])for(e=16616;;){if(o>>>0<(n=s[e>>2])+s[e+4>>2]>>>0&&n>>>0<=o>>>0)break A;if(!(e=s[e+8>>2]))break}if(-1==(0|(n=ft(0))))break a;if(a=r,(e=(o=s[4161])-1|0)&n&&(a=(r-n|0)+(e+n&0-o)|0),a>>>0<=u>>>0|a>>>0>2147483646)break a;if((o=s[4152])&&o>>>0<(i=(e=s[4150])+a|0)>>>0|e>>>0>=i>>>0)break a;if((0|n)!=(0|(e=ft(a))))break d;break o}if((a=i&l-c)>>>0>2147483646)break a;if((0|(n=ft(a)))==(s[e>>2]+s[e+4>>2]|0))break s;e=n}if(!(-1==(0|e)|u+48>>>0<=a>>>0)){if((n=(n=s[4162])+(d-a|0)&0-n)>>>0>2147483646){n=e;break o}if(-1!=(0|ft(n))){a=n+a|0,n=e;break o}ft(0-a|0);break a}if(n=e,-1!=(0|e))break o;break a}b()}o=0;break t}n=0;break n}if(-1!=(0|n))break o}s[4153]=4|s[4153]}if(r>>>0>2147483646)break r;if((n=ft(r))>>>0>=(e=ft(0))>>>0|-1==(0|n)|-1==(0|e))break r;if((a=e-n|0)>>>0<=u+40>>>0)break r}e=s[4150]+a|0,s[4150]=e,e>>>0>p[4151]&&(s[4151]=e);o:{i:{a:{if(l=s[4048]){for(e=16616;;){if(((o=s[e>>2])+(r=s[e+4>>2])|0)==(0|n))break a;if(!(e=s[e+8>>2]))break}break i}for((e=s[4046])>>>0<=n>>>0&&e||(s[4046]=n),e=0,s[4155]=a,s[4154]=n,s[4050]=-1,s[4051]=s[4160],s[4157]=0;r=16208+(o=e<<3)|0,s[o+16216>>2]=r,s[o+16220>>2]=r,32!=(0|(e=e+1|0)););r=(o=a-40|0)-(e=n+8&7?-8-n&7:0)|0,s[4045]=r,e=e+n|0,s[4048]=e,s[e+4>>2]=1|r,s[4+(n+o|0)>>2]=40,s[4049]=s[4164];break o}if(!(8&s[e+12>>2]|n>>>0<=l>>>0|o>>>0>l>>>0)){s[e+4>>2]=r+a,r=(e=l+8&7?-8-l&7:0)+l|0,s[4048]=r,e=(n=s[4045]+a|0)-e|0,s[4045]=e,s[r+4>>2]=1|e,s[4+(n+l|0)>>2]=40,s[4049]=s[4164];break o}}(o=s[4046])>>>0>n>>>0&&(s[4046]=n,o=0),r=n+a|0,e=16616;i:{a:{s:{l:{c:{u:{for(;;){if((0|r)!=s[e>>2]){if(e=s[e+8>>2])continue;break u}break}if(!(8&A[e+12|0]))break c}for(e=16616;;){if((r=s[e>>2])>>>0<=l>>>0&&(i=r+s[e+4>>2]|0)>>>0>l>>>0)break l;e=s[e+8>>2]}}if(s[e>>2]=n,s[e+4>>2]=s[e+4>>2]+a,s[4+(d=(n+8&7?-8-n&7:0)+n|0)>>2]=3|u,r=((a=r+(r+8&7?-8-r&7:0)|0)-d|0)-u|0,c=u+d|0,(0|a)==(0|l)){s[4048]=c,e=s[4045]+r|0,s[4045]=e,s[c+4>>2]=1|e;break a}if(s[4047]==(0|a)){s[4047]=c,e=s[4044]+r|0,s[4044]=e,s[c+4>>2]=1|e,s[e+c>>2]=e;break a}if(1==(3&(e=s[a+4>>2]))){l=-8&e;c:if(e>>>0<=255){if(o=s[a+8>>2],e=e>>>3|0,(0|(n=s[a+12>>2]))==(0|o)){g=16168,m=s[4042]&sn(e),s[g>>2]=m;break c}s[o+12>>2]=n,s[n+8>>2]=o}else{if(u=s[a+24>>2],(0|a)==(0|(n=s[a+12>>2])))if((i=s[(e=a+20|0)>>2])||(i=s[(e=a+16|0)>>2])){for(;o=e,(i=s[(e=(n=i)+20|0)>>2])||(e=n+16|0,i=s[n+16>>2]););s[o>>2]=0}else n=0;else e=s[a+8>>2],s[e+12>>2]=n,s[n+8>>2]=e;if(u){o=s[a+28>>2];u:{if(s[(e=16472+(o<<2)|0)>>2]==(0|a)){if(s[e>>2]=n,n)break u;g=16172,m=s[4043]&sn(o),s[g>>2]=m;break c}if(s[u+(s[u+16>>2]==(0|a)?16:20)>>2]=n,!n)break c}s[n+24>>2]=u,(e=s[a+16>>2])&&(s[n+16>>2]=e,s[e+24>>2]=n),(e=s[a+20>>2])&&(s[n+20>>2]=e,s[e+24>>2]=n)}}a=a+l|0,r=r+l|0}if(s[a+4>>2]=-2&s[a+4>>2],s[c+4>>2]=1|r,s[r+c>>2]=r,r>>>0<=255){n=16208+((e=r>>>3|0)<<3)|0,(r=s[4042])&(e=1<<e)?e=s[n+8>>2]:(s[4042]=e|r,e=n),s[n+8>>2]=c,s[e+12>>2]=c,s[c+12>>2]=n,s[c+8>>2]=e;break a}if(e=31,r>>>0<=16777215&&(e=r>>>8|0,e<<=i=e+1048320>>>16&8,e=28+((e=((e<<=o=e+520192>>>16&4)<<(n=e+245760>>>16&2)>>>15|0)-(n|o|i)|0)<<1|r>>>e+21&1)|0),s[c+28>>2]=e,s[c+16>>2]=0,s[c+20>>2]=0,i=16472+(e<<2)|0,(o=s[4043])&(n=1<<e)){for(e=r<<(31==(0|e)?0:25-(e>>>1|0)),n=s[i>>2];;){if(o=n,(-8&s[n+4>>2])==(0|r))break s;if(n=e>>>29|0,e<<=1,!(n=s[16+(i=o+(4&n)|0)>>2]))break}s[i+16>>2]=c,s[c+24>>2]=o}else s[4043]=n|o,s[i>>2]=c,s[c+24>>2]=i;s[c+12>>2]=c,s[c+8>>2]=c;break a}for(r=(o=a-40|0)-(e=n+8&7?-8-n&7:0)|0,s[4045]=r,e=e+n|0,s[4048]=e,s[e+4>>2]=1|r,s[4+(n+o|0)>>2]=40,s[4049]=s[4164],s[(r=(e=(i+(i-39&7?39-i&7:0)|0)-47|0)>>>0<l+16>>>0?l:e)+4>>2]=27,e=s[4157],s[r+16>>2]=s[4156],s[r+20>>2]=e,e=s[4155],s[r+8>>2]=s[4154],s[r+12>>2]=e,s[4156]=r+8,s[4155]=a,s[4154]=n,s[4157]=0,e=r+24|0;s[e+4>>2]=7,n=e+8|0,e=e+4|0,n>>>0<i>>>0;);if((0|r)==(0|l))break o;if(s[r+4>>2]=-2&s[r+4>>2],i=r-l|0,s[l+4>>2]=1|i,s[r>>2]=i,i>>>0<=255){n=16208+((e=i>>>3|0)<<3)|0,(r=s[4042])&(e=1<<e)?e=s[n+8>>2]:(s[4042]=e|r,e=n),s[n+8>>2]=l,s[e+12>>2]=l,s[l+12>>2]=n,s[l+8>>2]=e;break o}if(e=31,s[l+16>>2]=0,s[l+20>>2]=0,i>>>0<=16777215&&(e=i>>>8|0,e<<=o=e+1048320>>>16&8,e=28+((e=((e<<=r=e+520192>>>16&4)<<(n=e+245760>>>16&2)>>>15|0)-(n|r|o)|0)<<1|i>>>e+21&1)|0),s[l+28>>2]=e,o=16472+(e<<2)|0,(r=s[4043])&(n=1<<e)){for(e=i<<(31==(0|e)?0:25-(e>>>1|0)),n=s[o>>2];;){if(r=n,(0|i)==(-8&s[n+4>>2]))break i;if(n=e>>>29|0,e<<=1,!(n=s[16+(o=r+(4&n)|0)>>2]))break}s[o+16>>2]=l,s[l+24>>2]=r}else s[4043]=n|r,s[o>>2]=l,s[l+24>>2]=o;s[l+12>>2]=l,s[l+8>>2]=l;break o}e=s[o+8>>2],s[e+12>>2]=c,s[o+8>>2]=c,s[c+24>>2]=0,s[c+12>>2]=o,s[c+8>>2]=e}e=d+8|0;break e}e=s[r+8>>2],s[e+12>>2]=l,s[r+8>>2]=l,s[l+24>>2]=0,s[l+12>>2]=r,s[l+8>>2]=e}if(!((e=s[4045])>>>0<=u>>>0)){n=e-u|0,s[4045]=n,e=(r=s[4048])+u|0,s[4048]=e,s[e+4>>2]=1|n,s[r+4>>2]=3|u,e=r+8|0;break e}}s[4041]=48,e=0;break e}n:if(a){r=s[o+28>>2];r:{if(s[(e=16472+(r<<2)|0)>>2]==(0|o)){if(s[e>>2]=n,n)break r;d=sn(r)&d,s[4043]=d;break n}if(s[a+(s[a+16>>2]==(0|o)?16:20)>>2]=n,!n)break n}s[n+24>>2]=a,(e=s[o+16>>2])&&(s[n+16>>2]=e,s[e+24>>2]=n),(e=s[o+20>>2])&&(s[n+20>>2]=e,s[e+24>>2]=n)}n:if(i>>>0<=15)e=i+u|0,s[o+4>>2]=3|e,s[4+(e=e+o|0)>>2]=1|s[e+4>>2];else if(s[o+4>>2]=3|u,s[c+4>>2]=1|i,s[i+c>>2]=i,i>>>0<=255)n=16208+((e=i>>>3|0)<<3)|0,(r=s[4042])&(e=1<<e)?e=s[n+8>>2]:(s[4042]=e|r,e=n),s[n+8>>2]=c,s[e+12>>2]=c,s[c+12>>2]=n,s[c+8>>2]=e;else{e=31,i>>>0<=16777215&&(e=i>>>8|0,e<<=l=e+1048320>>>16&8,e=28+((e=((e<<=r=e+520192>>>16&4)<<(n=e+245760>>>16&2)>>>15|0)-(n|r|l)|0)<<1|i>>>e+21&1)|0),s[c+28>>2]=e,s[c+16>>2]=0,s[c+20>>2]=0,r=16472+(e<<2)|0;r:{if((n=1<<e)&d){for(e=i<<(31==(0|e)?0:25-(e>>>1|0)),u=s[r>>2];;){if((-8&s[(n=u)+4>>2])==(0|i))break r;if(r=e>>>29|0,e<<=1,!(u=s[16+(r=n+(4&r)|0)>>2]))break}s[r+16>>2]=c,s[c+24>>2]=n}else s[4043]=n|d,s[r>>2]=c,s[c+24>>2]=r;s[c+12>>2]=c,s[c+8>>2]=c;break n}e=s[n+8>>2],s[e+12>>2]=c,s[n+8>>2]=c,s[c+24>>2]=0,s[c+12>>2]=n,s[c+8>>2]=e}e=o+8|0;break e}t:if(h){r=s[n+28>>2];n:{if(s[(e=16472+(r<<2)|0)>>2]==(0|n)){if(s[e>>2]=o,o)break n;g=16172,m=sn(r)&c,s[g>>2]=m;break t}if(s[(s[h+16>>2]==(0|n)?16:20)+h>>2]=o,!o)break t}s[o+24>>2]=h,(e=s[n+16>>2])&&(s[o+16>>2]=e,s[e+24>>2]=o),(e=s[n+20>>2])&&(s[o+20>>2]=e,s[e+24>>2]=o)}i>>>0<=15?(e=i+u|0,s[n+4>>2]=3|e,s[4+(e=e+n|0)>>2]=1|s[e+4>>2]):(s[n+4>>2]=3|u,s[d+4>>2]=1|i,s[i+d>>2]=i,f&&(r=16208+((e=f>>>3|0)<<3)|0,o=s[4047],(e=1<<e)&a?e=s[r+8>>2]:(s[4042]=e|a,e=r),s[r+8>>2]=o,s[e+12>>2]=o,s[o+12>>2]=r,s[o+8>>2]=e),s[4047]=d,s[4044]=i),e=n+8|0}return x=t+16|0,0|e}function T(e,t,n,r,o){var a=0,s=0,l=0,c=0,u=0,d=0,p=0,h=0,g=0,m=0,y=0,b=0,C=0,I=0,E=0,x=0,B=0,w=0,_=0,S=0,D=0,T=0,k=0,Q=0,M=0,R=0,P=0,O=0,F=0,N=0,L=0,U=0,G=0,j=0;e:if(!(r>>>0<10||(g=(u=A[n+4|0]|A[n+5|0]<<8)+((p=6+(s=A[0|n]|A[n+1|0]<<8)|0)+(a=A[n+2|0]|A[n+3|0]<<8)|0)|0)>>>0>r>>>0)){if(!s)return-72;l=n+6|0,P=f[o+2>>1];t:{if(s>>>0>=4){if(m=-1,!(l=A[(s+l|0)-1|0]))break t;c=A[0|(s=(C=s+2|0)+n|0)]|A[s+1|0]<<8|A[s+2|0]<<16|A[s+3|0]<<24,d=v(l)-23|0}else{switch(c=A[0|l],s-2|0){case 1:c=A[n+8|0]<<16|c;case 0:c=(A[n+7|0]<<8)+c|0}if(!(l=A[(s+l|0)-1|0]))break e;C=6,d=9+(v(l)-(s<<3)|0)|0}if(!a)return-72;if(w=n+p|0,a>>>0>=4){if(m=-1,!(l=A[(a+w|0)-1|0]))break t;I=A[0|(s=w+(E=a-4|0)|0)]|A[s+1|0]<<8|A[s+2|0]<<16|A[s+3|0]<<24,s=v(l)-23|0}else{switch(I=A[0|w],a-2|0){case 1:I=A[w+2|0]<<16|I;case 0:I=(A[w+1|0]<<8)+I|0}if(!(s=A[(a+w|0)-1|0]))break e;s=9+(v(s)-(a<<3)|0)|0}if(!u)return-72;if(_=a+w|0,u>>>0>=4){if(m=-1,!(l=A[(u+_|0)-1|0]))break t;S=A[0|(a=_+(x=u-4|0)|0)]|A[a+1|0]<<8|A[a+2|0]<<16|A[a+3|0]<<24,l=v(l)-23|0}else{switch(S=A[0|_],u-2|0){case 1:S=A[_+2|0]<<16|S;case 0:S=(A[_+1|0]<<8)+S|0}if(!(a=A[(u+_|0)-1|0]))break e;l=9+(v(a)-(u<<3)|0)|0}if(m=-72,r=r-g|0){D=u+_|0;n:{r:{if(r>>>0>=4){if(m=-1,!(a=A[(r+D|0)-1|0]))break t;if(r>>>0<=4294967176)break r;return r}switch(T=A[0|D],r-2|0){case 1:T=A[D+2|0]<<16|T;case 0:T=(A[D+1|0]<<8)+T|0}if(!(a=A[(r+D|0)-1|0]))break e;r=9+(v(a)-(r<<3)|0)|0;break n}T=A[0|(r=D+(B=r-4|0)|0)]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24,r=v(a)-23|0}h=o+4|0;n:if((M=(o=t+3>>>2|0)+(Q=o+(b=o+e|0)|0)|0)>>>0>=(U=(N=e+t|0)-3|0)>>>0)g=M,p=Q,u=b;else for(o=0-P&31,u=b,p=Q,g=M;;){if(y=f[(a=(c<<d>>>o<<2)+h|0)>>1],i[0|e]=y,i[e+1|0]=y>>>8,m=A[a+2|0],y=A[a+3|0],k=f[(a=(I<<s>>>o<<2)+h|0)>>1],i[0|u]=k,i[u+1|0]=k>>>8,k=A[a+2|0],R=A[a+3|0],O=f[(a=(S<<l>>>o<<2)+h|0)>>1],i[0|p]=O,i[p+1|0]=O>>>8,O=A[a+2|0],L=A[a+3|0],F=f[(a=(T<<r>>>o<<2)+h|0)>>1],i[0|g]=F,i[g+1|0]=F>>>8,F=A[a+2|0],a=A[a+3|0],y=e+y|0,m=f[(e=(c<<(d=d+m|0)>>>o<<2)+h|0)>>1],i[0|y]=m,i[y+1|0]=m>>>8,m=A[e+2|0],G=A[e+3|0],u=u+R|0,k=f[(e=(I<<(s=s+k|0)>>>o<<2)+h|0)>>1],i[0|u]=k,i[u+1|0]=k>>>8,k=A[e+2|0],j=A[e+3|0],p=p+L|0,R=f[(e=(S<<(l=l+O|0)>>>o<<2)+h|0)>>1],i[0|p]=R,i[p+1|0]=R>>>8,R=A[e+2|0],O=A[e+3|0],g=a+g|0,e=f[(r=(T<<(L=r+F|0)>>>o<<2)+h|0)>>1],i[0|g]=e,i[g+1|0]=e>>>8,d=d+m|0,(0|C)<10?m=3:(c=A[0|(e=(C=C-(d>>>3|0)|0)+n|0)]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,d&=7,m=0),F=A[r+3|0],r=A[r+2|0],s=s+k|0,a=3,(0|E)<4?k=3:(I=A[0|(e=w+(E=E-(s>>>3|0)|0)|0)]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,s&=7,k=0),l=l+R|0,(0|x)>=4&&(S=A[0|(e=_+(x=x-(l>>>3|0)|0)|0)]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,a=0,l&=7),g=g+F|0,r=r+L|0,(0|B)<4?R=3:(T=A[0|(e=D+(B=B-(r>>>3|0)|0)|0)]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,r&=7,R=0),e=y+G|0,u=u+j|0,p=p+O|0,g>>>0>=U>>>0)break n;if(R|m|k|a)break}if(p>>>0>M>>>0|u>>>0>Q>>>0)break e;if(m=-20,!(e>>>0>b>>>0)){n:{r:{o:{if(d>>>0>=33)o=0-P&31;else for(m=b-3|0,o=0-P&31;;){if((0|C)>=10)c=d>>>3|0,y=0,a=7&d;else{if(6==(0|C)){y=b-2|0,C=6,a=d;break r}a=d-((c=(y=(C-(a=d>>>3|0)|0)<6)?C-6|0:a)<<3)|0}if(c=A[0|(d=(C=C-c|0)+n|0)]|A[d+1|0]<<8|A[d+2|0]<<16|A[d+3|0]<<24,y|e>>>0>=m>>>0)break o;if(y=f[(d=(c<<a>>>o<<2)+h|0)>>1],i[0|e]=y,i[e+1|0]=y>>>8,e=A[d+3|0]+e|0,d=A[d+2|0]+a|0,y=f[(a=(c<<d>>>o<<2)+h|0)>>1],i[0|e]=y,i[e+1|0]=y>>>8,e=e+A[a+3|0]|0,!((d=d+A[a+2|0]|0)>>>0<33))break}y=b-2|0;break n}if(y=b-2|0,!(a>>>0<=32)){d=a;break n}}for(;;){if((0|C)>=10)d=7&a,c=a>>>3|0,a=0;else{if(6==(0|C)){C=6,d=a;break n}d=(d=a)-((c=(a=(C-(c=a>>>3|0)|0)<6)?C-6|0:c)<<3)|0}if(c=A[0|(c=(C=C-c|0)+n|0)]|A[c+1|0]<<8|A[c+2|0]<<16|A[c+3|0]<<24,a|e>>>0>y>>>0)break n;if(m=f[(a=(c<<d>>>o<<2)+h|0)>>1],i[0|e]=m,i[e+1|0]=m>>>8,e=A[a+3|0]+e|0,!((a=A[a+2|0]+d|0)>>>0<=32))break}d=a}if(e>>>0<=y>>>0)for(;a=f[(n=(c<<d>>>o<<2)+h|0)>>1],i[0|e]=a,i[e+1|0]=a>>>8,d=A[n+2|0]+d|0,y>>>0>=(e=A[n+3|0]+e|0)>>>0;);e>>>0>=b>>>0||(a=e,e=((n=c<<d>>>o|0)<<2)+h|0,i[0|a]=A[0|e],1!=A[e+3|0]?d>>>0>31||(d=(e=A[2+((n<<2)+h|0)|0]+d|0)>>>0<32?e:32):d=A[e+2|0]+d|0);n:{r:{o:{if(s>>>0>=33)e=0-P&31;else for(b=Q-3|0,e=0-P&31;;){if((0|E)>=4)o=s>>>3|0,c=0,n=7&s;else{if(!E){o=Q-2|0,E=0,a=w,n=s;break r}n=s-((o=(c=(w+E|0)-(n=s>>>3|0)>>>0<w>>>0)?E:n)<<3)|0}if(I=A[0|(a=w+(E=E-o|0)|0)]|A[a+1|0]<<8|A[a+2|0]<<16|A[a+3|0]<<24,c|u>>>0>=b>>>0)break o;if(a=f[(o=(I<<n>>>e<<2)+h|0)>>1],i[0|u]=a,i[u+1|0]=a>>>8,a=A[o+3|0]+u|0,o=A[o+2|0]+n|0,s=f[(n=(I<<o>>>e<<2)+h|0)>>1],i[0|a]=s,i[a+1|0]=s>>>8,u=a+A[n+3|0]|0,!((s=o+A[n+2|0]|0)>>>0<33))break}a=w+E|0,o=Q-2|0;break n}if(o=Q-2|0,!(n>>>0<=32)){s=n;break n}}for(;;){if((0|E)>=4)c=n>>>3|0,y=0,s=7&n;else{if(!E){s=n;break n}s=n-((c=(y=(s=a)-(a=n>>>3|0)>>>0<w>>>0)?E:a)<<3)|0}if(I=A[0|(a=w+(E=E-c|0)|0)]|A[a+1|0]<<8|A[a+2|0]<<16|A[a+3|0]<<24,y|o>>>0<u>>>0)break n;if(b=f[(n=(I<<s>>>e<<2)+h|0)>>1],i[0|u]=b,i[u+1|0]=b>>>8,u=A[n+3|0]+u|0,!((n=A[n+2|0]+s|0)>>>0<=32))break}s=n}if(o>>>0>=u>>>0)for(;b=f[(n=(I<<s>>>e<<2)+h|0)>>1],i[0|u]=b,i[u+1|0]=b>>>8,s=A[n+2|0]+s|0,(u=A[n+3|0]+u|0)>>>0<=o>>>0;);u>>>0>=Q>>>0||(e=((n=I<<s>>>e|0)<<2)+h|0,i[0|u]=A[0|e],1!=A[e+3|0]?s>>>0>31||(s=(e=A[2+((n<<2)+h|0)|0]+s|0)>>>0<32?e:32):s=A[e+2|0]+s|0);n:{r:{o:{if(l>>>0>=33)e=0-P&31;else for(b=M-3|0,e=0-P&31;;){if((0|x)>=4)o=l>>>3|0,c=0,n=7&l;else{if(!x){o=M-2|0,x=0,u=_,n=l;break r}n=l-((o=(c=(_+x|0)-(n=l>>>3|0)>>>0<_>>>0)?x:n)<<3)|0}if(S=A[0|(u=_+(x=x-o|0)|0)]|A[u+1|0]<<8|A[u+2|0]<<16|A[u+3|0]<<24,c|p>>>0>=b>>>0)break o;if(l=f[(o=(S<<n>>>e<<2)+h|0)>>1],i[0|p]=l,i[p+1|0]=l>>>8,l=A[o+3|0]+p|0,o=A[o+2|0]+n|0,u=f[(n=(S<<o>>>e<<2)+h|0)>>1],i[0|l]=u,i[l+1|0]=u>>>8,p=l+A[n+3|0]|0,!((l=o+A[n+2|0]|0)>>>0<33))break}u=_+x|0,o=M-2|0;break n}if(o=M-2|0,!(n>>>0<=32)){l=n;break n}}for(;;){if((0|x)>=4)c=n>>>3|0,I=0,l=7&n;else{if(!x){l=n;break n}l=n-((c=(I=u-(l=n>>>3|0)>>>0<_>>>0)?x:l)<<3)|0}if(S=A[0|(u=_+(x=x-c|0)|0)]|A[u+1|0]<<8|A[u+2|0]<<16|A[u+3|0]<<24,I|o>>>0<p>>>0)break n;if(b=f[(n=(S<<l>>>e<<2)+h|0)>>1],i[0|p]=b,i[p+1|0]=b>>>8,p=A[n+3|0]+p|0,!((n=A[n+2|0]+l|0)>>>0<=32))break}l=n}if(o>>>0>=p>>>0)for(;b=f[(n=(S<<l>>>e<<2)+h|0)>>1],i[0|p]=b,i[p+1|0]=b>>>8,l=A[n+2|0]+l|0,(p=A[n+3|0]+p|0)>>>0<=o>>>0;);p>>>0>=M>>>0||(e=((n=S<<l>>>e|0)<<2)+h|0,i[0|p]=A[0|e],1!=A[e+3|0]?l>>>0>31||(l=(e=A[2+((n<<2)+h|0)|0]+l|0)>>>0<32?e:32):l=A[e+2|0]+l|0),e=0-P&31;n:{r:{o:{if(r>>>0<=32)for(;;){if((0|B)>=4)o=r>>>3|0,p=0,n=7&r;else{if(!B){o=N-2|0,B=0,c=D,n=r;break r}n=r-((o=(p=(B+D|0)-(n=r>>>3|0)>>>0<D>>>0)?B:n)<<3)|0}if(T=A[0|(c=D+(B=B-o|0)|0)]|A[c+1|0]<<8|A[c+2|0]<<16|A[c+3|0]<<24,p|g>>>0>=U>>>0)break o;if(o=f[(r=(T<<n>>>e<<2)+h|0)>>1],i[0|g]=o,i[g+1|0]=o>>>8,o=A[r+3|0]+g|0,r=A[r+2|0]+n|0,p=f[(n=(T<<r>>>e<<2)+h|0)>>1],i[0|o]=p,i[o+1|0]=p>>>8,g=o+A[n+3|0]|0,!((r=r+A[n+2|0]|0)>>>0<33))break}c=B+D|0,o=N-2|0;break n}if(o=N-2|0,!(n>>>0<=32)){r=n;break n}}for(;;){if((0|B)>=4)p=n>>>3|0,I=0,r=7&n;else{if(!B){r=n;break n}r=n-((p=(I=c-(r=n>>>3|0)>>>0<D>>>0)?B:r)<<3)|0}if(T=A[0|(c=D+(B=B-p|0)|0)]|A[c+1|0]<<8|A[c+2|0]<<16|A[c+3|0]<<24,I|o>>>0<g>>>0)break n;if(p=f[(n=(T<<r>>>e<<2)+h|0)>>1],i[0|g]=p,i[g+1|0]=p>>>8,g=A[n+3|0]+g|0,!((n=A[n+2|0]+r|0)>>>0<=32))break}r=n}if(o>>>0>=g>>>0)for(;p=f[(n=(T<<r>>>e<<2)+h|0)>>1],i[0|g]=p,i[g+1|0]=p>>>8,r=A[n+2|0]+r|0,(g=A[n+3|0]+g|0)>>>0<=o>>>0;);g>>>0>=N>>>0||(e=((n=T<<r>>>e|0)<<2)+h|0,i[0|g]=A[0|e],1!=A[e+3|0]?r>>>0>31||(r=(e=A[2+((n<<2)+h|0)|0]+r|0)>>>0<32?e:32):r=A[e+2|0]+r|0),m=6==(0|C)&&32==(0|d)&&(0|a)==(0|w)&&32==(0|s)&&(0|u)==(0|_)&&32==(0|l)&&(0|c)==(0|D)&&32==(0|r)?t:-20}}}return m}return-20}function k(e,t,n,r,o,a,l,c){var u,d=0,f=0,p=0,h=0,g=0,m=0,y=0,v=0;m=-70;e:if(!((u=(p=s[n>>2])+s[n+4>>2]|0)>>>0>t-e>>>0||(m=-20,p>>>0>o-(d=s[r>>2])>>>0))){o=t-32|0,v=d+p|0,t=e+p|0,g=s[n+8>>2];t:if((0|p)<=7){if(f=g,(0|p)<1)break t;for(;i[0|e]=A[0|d],d=d+1|0,t>>>0>(e=e+1|0)>>>0;);f=g}else if(t>>>0<=o>>>0){if(f=A[d+4|0]|A[d+5|0]<<8|A[d+6|0]<<16|A[d+7|0]<<24,h=A[0|d]|A[d+1|0]<<8|A[d+2|0]<<16|A[d+3|0]<<24,i[0|e]=h,i[e+1|0]=h>>>8,i[e+2|0]=h>>>16,i[e+3|0]=h>>>24,i[e+4|0]=f,i[e+5|0]=f>>>8,i[e+6|0]=f>>>16,i[e+7|0]=f>>>24,f=A[d+12|0]|A[d+13|0]<<8|A[d+14|0]<<16|A[d+15|0]<<24,h=A[d+8|0]|A[d+9|0]<<8|A[d+10|0]<<16|A[d+11|0]<<24,i[e+8|0]=h,i[e+9|0]=h>>>8,i[e+10|0]=h>>>16,i[e+11|0]=h>>>24,i[e+12|0]=f,i[e+13|0]=f>>>8,i[e+14|0]=f>>>16,i[e+15|0]=f>>>24,f=g,(0|p)<17)break t;for(e=e+16|0;f=A[d+20|0]|A[d+21|0]<<8|A[d+22|0]<<16|A[d+23|0]<<24,p=A[d+16|0]|A[d+17|0]<<8|A[d+18|0]<<16|A[d+19|0]<<24,i[0|e]=p,i[e+1|0]=p>>>8,i[e+2|0]=p>>>16,i[e+3|0]=p>>>24,i[e+4|0]=f,i[e+5|0]=f>>>8,i[e+6|0]=f>>>16,i[e+7|0]=f>>>24,f=A[d+28|0]|A[d+29|0]<<8|A[d+30|0]<<16|A[d+31|0]<<24,p=A[d+24|0]|A[d+25|0]<<8|A[d+26|0]<<16|A[d+27|0]<<24,i[e+8|0]=p,i[e+9|0]=p>>>8,i[e+10|0]=p>>>16,i[e+11|0]=p>>>24,i[e+12|0]=f,i[e+13|0]=f>>>8,i[e+14|0]=f>>>16,i[e+15|0]=f>>>24,f=A[d+36|0]|A[d+37|0]<<8|A[d+38|0]<<16|A[d+39|0]<<24,p=A[d+32|0]|A[d+33|0]<<8|A[d+34|0]<<16|A[d+35|0]<<24,i[e+16|0]=p,i[e+17|0]=p>>>8,i[e+18|0]=p>>>16,i[e+19|0]=p>>>24,i[e+20|0]=f,i[e+21|0]=f>>>8,i[e+22|0]=f>>>16,i[e+23|0]=f>>>24,f=A[d+44|0]|A[d+45|0]<<8|A[d+46|0]<<16|A[d+47|0]<<24,p=A[d+40|0]|A[d+41|0]<<8|A[d+42|0]<<16|A[d+43|0]<<24,i[e+24|0]=p,i[e+25|0]=p>>>8,i[e+26|0]=p>>>16,i[e+27|0]=p>>>24,i[e+28|0]=f,i[e+29|0]=f>>>8,i[e+30|0]=f>>>16,i[e+31|0]=f>>>24,d=d+32|0,t>>>0>(e=e+32|0)>>>0;);f=g}else{if(e>>>0<=o>>>0){if(f=A[d+4|0]|A[d+5|0]<<8|A[d+6|0]<<16|A[d+7|0]<<24,p=A[0|d]|A[d+1|0]<<8|A[d+2|0]<<16|A[d+3|0]<<24,i[0|e]=p,i[e+1|0]=p>>>8,i[e+2|0]=p>>>16,i[e+3|0]=p>>>24,i[e+4|0]=f,i[e+5|0]=f>>>8,i[e+6|0]=f>>>16,i[e+7|0]=f>>>24,f=A[d+12|0]|A[d+13|0]<<8|A[d+14|0]<<16|A[d+15|0]<<24,p=A[d+8|0]|A[d+9|0]<<8|A[d+10|0]<<16|A[d+11|0]<<24,i[e+8|0]=p,i[e+9|0]=p>>>8,i[e+10|0]=p>>>16,i[e+11|0]=p>>>24,i[e+12|0]=f,i[e+13|0]=f>>>8,i[e+14|0]=f>>>16,i[e+15|0]=f>>>24,(0|(y=o-e|0))>=17)for(e=e+16|0,f=d;p=A[f+20|0]|A[f+21|0]<<8|A[f+22|0]<<16|A[f+23|0]<<24,h=A[f+16|0]|A[f+17|0]<<8|A[f+18|0]<<16|A[f+19|0]<<24,i[0|e]=h,i[e+1|0]=h>>>8,i[e+2|0]=h>>>16,i[e+3|0]=h>>>24,i[e+4|0]=p,i[e+5|0]=p>>>8,i[e+6|0]=p>>>16,i[e+7|0]=p>>>24,p=A[f+28|0]|A[f+29|0]<<8|A[f+30|0]<<16|A[f+31|0]<<24,h=A[f+24|0]|A[f+25|0]<<8|A[f+26|0]<<16|A[f+27|0]<<24,i[e+8|0]=h,i[e+9|0]=h>>>8,i[e+10|0]=h>>>16,i[e+11|0]=h>>>24,i[e+12|0]=p,i[e+13|0]=p>>>8,i[e+14|0]=p>>>16,i[e+15|0]=p>>>24,p=A[f+36|0]|A[f+37|0]<<8|A[f+38|0]<<16|A[f+39|0]<<24,h=A[f+32|0]|A[f+33|0]<<8|A[f+34|0]<<16|A[f+35|0]<<24,i[e+16|0]=h,i[e+17|0]=h>>>8,i[e+18|0]=h>>>16,i[e+19|0]=h>>>24,i[e+20|0]=p,i[e+21|0]=p>>>8,i[e+22|0]=p>>>16,i[e+23|0]=p>>>24,p=A[f+44|0]|A[f+45|0]<<8|A[f+46|0]<<16|A[f+47|0]<<24,h=A[f+40|0]|A[f+41|0]<<8|A[f+42|0]<<16|A[f+43|0]<<24,i[e+24|0]=h,i[e+25|0]=h>>>8,i[e+26|0]=h>>>16,i[e+27|0]=h>>>24,i[e+28|0]=p,i[e+29|0]=p>>>8,i[e+30|0]=p>>>16,i[e+31|0]=p>>>24,f=f+32|0,o>>>0>(e=e+32|0)>>>0;);d=d+y|0,e=o}if(f=g,!(e>>>0>=t>>>0)){for(;i[0|e]=A[0|d],d=d+1|0,(0|t)!=(0|(e=e+1|0)););f=s[n+8>>2]}}e=t-g|0,s[r>>2]=v;t:{if(f>>>0>t-a>>>0){if(f>>>0>t-l>>>0)break e;if((r=(e=e-a|0)+c|0)+(l=s[n+4>>2])>>>0<=c>>>0){de(t,r,l);break t}t=de(t,r,0-e|0),f=e+l|0,s[n+4>>2]=f,t=t-e|0}else f=s[n+4>>2],a=e;if(n=t+f|0,(0|f)<=7){if((0|f)<1)break t;for(;i[0|t]=A[0|a],a=a+1|0,n>>>0>(t=t+1|0)>>>0;);}else if((e=t-a|0)>>>0<=7?(i[0|t]=A[0|a],i[t+1|0]=A[a+1|0],i[t+2|0]=A[a+2|0],i[t+3|0]=A[a+3|0],e=(r=a)+s[3936+(a=e<<2)>>2]|0,r=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24,i[t+4|0]=r,i[t+5|0]=r>>>8,i[t+6|0]=r>>>16,i[t+7|0]=r>>>24,a=e-s[a+3968>>2]|0):(e=A[a+4|0]|A[a+5|0]<<8|A[a+6|0]<<16|A[a+7|0]<<24,r=A[0|a]|A[a+1|0]<<8|A[a+2|0]<<16|A[a+3|0]<<24,i[0|t]=r,i[t+1|0]=r>>>8,i[t+2|0]=r>>>16,i[t+3|0]=r>>>24,i[t+4|0]=e,i[t+5|0]=e>>>8,i[t+6|0]=e>>>16,i[t+7|0]=e>>>24),e=t+8|0,d=a+8|0,n>>>0<=o>>>0){if(o=e+f|0,(e-d|0)<=15)for(;;)if(t=A[d+4|0]|A[d+5|0]<<8|A[d+6|0]<<16|A[d+7|0]<<24,n=A[0|d]|A[d+1|0]<<8|A[d+2|0]<<16|A[d+3|0]<<24,i[0|e]=n,i[e+1|0]=n>>>8,i[e+2|0]=n>>>16,i[e+3|0]=n>>>24,i[e+4|0]=t,i[e+5|0]=t>>>8,i[e+6|0]=t>>>16,i[e+7|0]=t>>>24,d=d+8|0,!(o>>>0>(e=e+8|0)>>>0))break t;if(n=A[d+4|0]|A[d+5|0]<<8|A[d+6|0]<<16|A[d+7|0]<<24,r=A[0|d]|A[d+1|0]<<8|A[d+2|0]<<16|A[d+3|0]<<24,i[0|e]=r,i[e+1|0]=r>>>8,i[e+2|0]=r>>>16,i[e+3|0]=r>>>24,i[e+4|0]=n,i[e+5|0]=n>>>8,i[e+6|0]=n>>>16,i[e+7|0]=n>>>24,n=A[d+12|0]|A[d+13|0]<<8|A[d+14|0]<<16|A[d+15|0]<<24,r=A[d+8|0]|A[d+9|0]<<8|A[d+10|0]<<16|A[d+11|0]<<24,i[e+8|0]=r,i[e+9|0]=r>>>8,i[e+10|0]=r>>>16,i[e+11|0]=r>>>24,i[e+12|0]=n,i[e+13|0]=n>>>8,i[e+14|0]=n>>>16,i[e+15|0]=n>>>24,(0|f)<17)break t;for(e=t+24|0;t=A[d+20|0]|A[d+21|0]<<8|A[d+22|0]<<16|A[d+23|0]<<24,n=A[d+16|0]|A[d+17|0]<<8|A[d+18|0]<<16|A[d+19|0]<<24,i[0|e]=n,i[e+1|0]=n>>>8,i[e+2|0]=n>>>16,i[e+3|0]=n>>>24,i[e+4|0]=t,i[e+5|0]=t>>>8,i[e+6|0]=t>>>16,i[e+7|0]=t>>>24,t=A[d+28|0]|A[d+29|0]<<8|A[d+30|0]<<16|A[d+31|0]<<24,n=A[d+24|0]|A[d+25|0]<<8|A[d+26|0]<<16|A[d+27|0]<<24,i[e+8|0]=n,i[e+9|0]=n>>>8,i[e+10|0]=n>>>16,i[e+11|0]=n>>>24,i[e+12|0]=t,i[e+13|0]=t>>>8,i[e+14|0]=t>>>16,i[e+15|0]=t>>>24,t=A[d+36|0]|A[d+37|0]<<8|A[d+38|0]<<16|A[d+39|0]<<24,n=A[d+32|0]|A[d+33|0]<<8|A[d+34|0]<<16|A[d+35|0]<<24,i[e+16|0]=n,i[e+17|0]=n>>>8,i[e+18|0]=n>>>16,i[e+19|0]=n>>>24,i[e+20|0]=t,i[e+21|0]=t>>>8,i[e+22|0]=t>>>16,i[e+23|0]=t>>>24,t=A[d+44|0]|A[d+45|0]<<8|A[d+46|0]<<16|A[d+47|0]<<24,n=A[d+40|0]|A[d+41|0]<<8|A[d+42|0]<<16|A[d+43|0]<<24,i[e+24|0]=n,i[e+25|0]=n>>>8,i[e+26|0]=n>>>16,i[e+27|0]=n>>>24,i[e+28|0]=t,i[e+29|0]=t>>>8,i[e+30|0]=t>>>16,i[e+31|0]=t>>>24,d=d+32|0,o>>>0>(e=e+32|0)>>>0;);}else{if(e>>>0>o>>>0)o=e;else{if(l=o-e|0,(e-d|0)<=15)for(t=d;r=A[t+4|0]|A[t+5|0]<<8|A[t+6|0]<<16|A[t+7|0]<<24,a=A[0|t]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24,i[0|e]=a,i[e+1|0]=a>>>8,i[e+2|0]=a>>>16,i[e+3|0]=a>>>24,i[e+4|0]=r,i[e+5|0]=r>>>8,i[e+6|0]=r>>>16,i[e+7|0]=r>>>24,t=t+8|0,o>>>0>(e=e+8|0)>>>0;);else if(r=A[d+4|0]|A[d+5|0]<<8|A[d+6|0]<<16|A[d+7|0]<<24,a=A[0|d]|A[d+1|0]<<8|A[d+2|0]<<16|A[d+3|0]<<24,i[0|e]=a,i[e+1|0]=a>>>8,i[e+2|0]=a>>>16,i[e+3|0]=a>>>24,i[e+4|0]=r,i[e+5|0]=r>>>8,i[e+6|0]=r>>>16,i[e+7|0]=r>>>24,r=A[d+12|0]|A[d+13|0]<<8|A[d+14|0]<<16|A[d+15|0]<<24,a=A[d+8|0]|A[d+9|0]<<8|A[d+10|0]<<16|A[d+11|0]<<24,i[e+8|0]=a,i[e+9|0]=a>>>8,i[e+10|0]=a>>>16,i[e+11|0]=a>>>24,i[e+12|0]=r,i[e+13|0]=r>>>8,i[e+14|0]=r>>>16,i[e+15|0]=r>>>24,!((0|l)<17))for(e=t+24|0,t=d;r=A[t+20|0]|A[t+21|0]<<8|A[t+22|0]<<16|A[t+23|0]<<24,a=A[t+16|0]|A[t+17|0]<<8|A[t+18|0]<<16|A[t+19|0]<<24,i[0|e]=a,i[e+1|0]=a>>>8,i[e+2|0]=a>>>16,i[e+3|0]=a>>>24,i[e+4|0]=r,i[e+5|0]=r>>>8,i[e+6|0]=r>>>16,i[e+7|0]=r>>>24,r=A[t+28|0]|A[t+29|0]<<8|A[t+30|0]<<16|A[t+31|0]<<24,a=A[t+24|0]|A[t+25|0]<<8|A[t+26|0]<<16|A[t+27|0]<<24,i[e+8|0]=a,i[e+9|0]=a>>>8,i[e+10|0]=a>>>16,i[e+11|0]=a>>>24,i[e+12|0]=r,i[e+13|0]=r>>>8,i[e+14|0]=r>>>16,i[e+15|0]=r>>>24,r=A[t+36|0]|A[t+37|0]<<8|A[t+38|0]<<16|A[t+39|0]<<24,a=A[t+32|0]|A[t+33|0]<<8|A[t+34|0]<<16|A[t+35|0]<<24,i[e+16|0]=a,i[e+17|0]=a>>>8,i[e+18|0]=a>>>16,i[e+19|0]=a>>>24,i[e+20|0]=r,i[e+21|0]=r>>>8,i[e+22|0]=r>>>16,i[e+23|0]=r>>>24,r=A[t+44|0]|A[t+45|0]<<8|A[t+46|0]<<16|A[t+47|0]<<24,a=A[t+40|0]|A[t+41|0]<<8|A[t+42|0]<<16|A[t+43|0]<<24,i[e+24|0]=a,i[e+25|0]=a>>>8,i[e+26|0]=a>>>16,i[e+27|0]=a>>>24,i[e+28|0]=r,i[e+29|0]=r>>>8,i[e+30|0]=r>>>16,i[e+31|0]=r>>>24,t=t+32|0,o>>>0>(e=e+32|0)>>>0;);d=l+d|0}if(!(n>>>0<=o>>>0))for(;i[0|o]=A[0|d],d=d+1|0,(0|n)!=(0|(o=o+1|0)););}}m=u}return m}function Q(e,t,n,r,o){var a=0,s=0,l=0,c=0,u=0,d=0,p=0,h=0,g=0,m=0,y=0,b=0,C=0,I=0,E=0,x=0,B=0,w=0,_=0,S=0,D=0,T=0,k=0,Q=0,M=0,R=0,P=0,O=0,F=0,N=0,L=0,U=0,G=0;e:if(!(r>>>0<10||(g=(s=A[n+4|0]|A[n+5|0]<<8)+((u=6+(a=A[0|n]|A[n+1|0]<<8)|0)+(c=A[n+2|0]|A[n+3|0]<<8)|0)|0)>>>0>r>>>0)){if(!a)return-72;l=n+6|0,k=f[o+2>>1];t:{if(a>>>0>=4){if(E=-1,!(l=A[(a+l|0)-1|0]))break t;h=v(l)-23|0,d=A[0|(l=(a=a+2|0)+n|0)]|A[l+1|0]<<8|A[l+2|0]<<16|A[l+3|0]<<24}else{switch(d=A[0|l],a-2|0){case 1:d=A[n+8|0]<<16|d;case 0:d=(A[n+7|0]<<8)+d|0}if(!(l=A[(a+l|0)-1|0]))break e;h=9+(v(l)-(a<<3)|0)|0,a=6}if(!c)return-72;if(B=n+u|0,c>>>0>=4){if(E=-1,!(u=A[(c+B|0)-1|0]))break t;S=A[0|(l=B+(I=c-4|0)|0)]|A[l+1|0]<<8|A[l+2|0]<<16|A[l+3|0]<<24,l=v(u)-23|0}else{switch(S=A[0|B],c-2|0){case 1:S=A[B+2|0]<<16|S;case 0:S=(A[B+1|0]<<8)+S|0}if(!(l=A[(c+B|0)-1|0]))break e;l=9+(v(l)-(c<<3)|0)|0}if(!s)return-72;if(w=c+B|0,s>>>0>=4){if(E=-1,!(u=A[(s+w|0)-1|0]))break t;D=A[0|(c=(T=s-4|0)+w|0)]|A[c+1|0]<<8|A[c+2|0]<<16|A[c+3|0]<<24,c=v(u)-23|0}else{switch(D=A[0|w],s-2|0){case 1:D=A[w+2|0]<<16|D;case 0:D=(A[w+1|0]<<8)+D|0}if(!(c=A[(s+w|0)-1|0]))break e;c=9+(v(c)-(s<<3)|0)|0}if(E=-72,r=r-g|0){_=s+w|0;n:{r:{if(r>>>0>=4){if(E=-1,!(s=A[(r+_|0)-1|0]))break t;if(r>>>0<=4294967176)break r;return r}switch(x=A[0|_],r-2|0){case 1:x=A[_+2|0]<<16|x;case 0:x=(A[_+1|0]<<8)+x|0}if(!(s=A[(r+_|0)-1|0]))break e;r=9+(v(s)-(r<<3)|0)|0;break n}x=A[0|(r=_+(p=r-4|0)|0)]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24,r=v(s)-23|0}if(b=o+4|0,(R=(M=(Q=(o=t+3>>>2|0)+e|0)+o|0)+o|0)>>>0>=(F=(O=e+t|0)-3|0)>>>0)g=I,C=T,y=p,u=a,o=R,m=M,s=Q;else for(E=0-k&31,s=Q,m=M,o=R,N=1;g=A[1+(u=(d<<h>>>E<<1)+b|0)|0],i[0|e]=A[0|u],C=A[1+(u=(S<<l>>>E<<1)+b|0)|0],i[0|s]=A[0|u],y=A[1+(u=(D<<c>>>E<<1)+b|0)|0],i[0|m]=A[0|u],P=A[1+(u=(x<<r>>>E<<1)+b|0)|0],i[0|o]=A[0|u],g=A[1+(u=(d<<(h=h+g|0)>>>E<<1)+b|0)|0],i[e+1|0]=A[0|u],C=A[1+(u=(S<<(l=l+C|0)>>>E<<1)+b|0)|0],i[s+1|0]=A[0|u],y=A[1+(u=(D<<(c=c+y|0)>>>E<<1)+b|0)|0],i[m+1|0]=A[0|u],L=A[1+(r=(x<<(P=r+P|0)>>>E<<1)+b|0)|0],i[o+1|0]=A[0|r],h=h+g|0,(0|a)<10?u=a:(d=A[0|(r=(u=a-(h>>>3|0)|0)+n|0)]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24,h&=7),l=l+C|0,(0|I)<4?g=I:(S=A[0|(r=B+(g=I-(l>>>3|0)|0)|0)]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24,l&=7),c=c+y|0,(0|T)<4?C=T:(D=A[0|(r=w+(C=T-(c>>>3|0)|0)|0)]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24,c&=7),y=P+L|0,o=o+2|0,(0|p)<4?(r=y,y=p):(r=7&y,x=A[0|(x=_+(y=p-(y>>>3|0)|0)|0)]|A[x+1|0]<<8|A[x+2|0]<<16|A[x+3|0]<<24),m=m+2|0,s=s+2|0,e=e+2|0,P=(0|I)>3,L=(0|T)>3,U=(0|p)>3,G=(0|a)>9,a=u,p=y,T=C,I=g,(N&=P&L&U&G)&o>>>0<F>>>0;);if(m>>>0>R>>>0|s>>>0>M>>>0)break e;if(E=-20,!(e>>>0>Q>>>0)){n:{r:{o:if(h>>>0>=33)p=0-k&31;else{T=Q-3|0,p=0-k&31;i:{a:{for(;;){if((0|u)>=10)d=h>>>3|0,I=0,a=7&h;else{if(6==(0|u)){a=h,u=6;break a}a=h-((d=(I=(u-(a=h>>>3|0)|0)<6)?u-6|0:a)<<3)|0}if(d=A[0|(h=(u=u-d|0)+n|0)]|A[h+1|0]<<8|A[h+2|0]<<16|A[h+3|0]<<24,!(I|e>>>0>=T>>>0)){if(I=A[1+(h=(d<<a>>>p<<1)+b|0)|0],i[0|e]=A[0|h],I=A[1+(h=(d<<(a=a+I|0)>>>p<<1)+b|0)|0],i[e+1|0]=A[0|h],e=e+2|0,(h=a+I|0)>>>0<=32)continue;break o}break}if(a>>>0>32)break i}for(;;){if((0|u)>=10)d=a>>>3|0,I=0,h=7&a;else{if(6==(0|u)){u=6;break i}h=a-((d=(I=(u-(h=a>>>3|0)|0)<6)?u-6|0:h)<<3)|0}if(d=A[0|(a=(u=u-d|0)+n|0)]|A[a+1|0]<<8|A[a+2|0]<<16|A[a+3|0]<<24,a=e>>>0>=Q>>>0,I||a){if(a)break n;break r}if(I=A[1+(a=(d<<h>>>p<<1)+b|0)|0],i[0|e]=A[0|a],e=e+1|0,!((a=h+I|0)>>>0<=32))break}}h=a}if(e>>>0>=Q>>>0)break n}for(;a=A[1+(n=(d<<h>>>p<<1)+b|0)|0],i[0|e]=A[0|n],h=a+h|0,(0|Q)!=(0|(e=e+1|0)););}n:{r:{o:if(l>>>0>=33)n=0-k&31,a=g+B|0;else{I=M-3|0,n=0-k&31;i:{a:{s:{for(;;){if((0|g)>=4)p=l>>>3|0,d=0,e=7&l;else{if(!g){g=0,a=B,e=l;break a}e=l-((p=(d=(g+B|0)-(e=l>>>3|0)>>>0<B>>>0)?g:e)<<3)|0}if(S=A[0|(a=B+(g=g-p|0)|0)]|A[a+1|0]<<8|A[a+2|0]<<16|A[a+3|0]<<24,d|s>>>0>=I>>>0)break s;if(l=A[1+(a=(S<<e>>>n<<1)+b|0)|0],i[0|s]=A[0|a],l=A[1+(a=(S<<(e=e+l|0)>>>n<<1)+b|0)|0],i[s+1|0]=A[0|a],s=s+2|0,!((l=e+l|0)>>>0<33))break}a=g+B|0;break o}if(e>>>0>32)break i}for(;;){if((0|g)>=4)p=e>>>3|0,d=0,l=7&e;else{if(!g)break i;l=e-((p=(d=(l=a)-(a=e>>>3|0)>>>0<B>>>0)?g:a)<<3)|0}if(S=A[0|(a=B+(g=g-p|0)|0)]|A[a+1|0]<<8|A[a+2|0]<<16|A[a+3|0]<<24,e=s>>>0>=M>>>0,d||e){if(e)break n;break r}if(p=A[1+(e=(S<<l>>>n<<1)+b|0)|0],i[0|s]=A[0|e],s=s+1|0,!((e=l+p|0)>>>0<=32))break}}l=e}if(s>>>0>=M>>>0)break n}for(;p=A[1+(e=(S<<l>>>n<<1)+b|0)|0],i[0|s]=A[0|e],l=l+p|0,(0|M)!=(0|(s=s+1|0)););}n:{r:{o:if(c>>>0>=33)n=0-k&31,d=C+w|0;else{g=R-3|0,n=0-k&31;i:{a:{s:{for(;;){if((0|C)>=4)p=c>>>3|0,s=0,e=7&c;else{if(!C){C=0,d=w,e=c;break a}e=c-((p=(s=(C+w|0)-(e=c>>>3|0)>>>0<w>>>0)?C:e)<<3)|0}if(D=A[0|(d=w+(C=C-p|0)|0)]|A[d+1|0]<<8|A[d+2|0]<<16|A[d+3|0]<<24,s|m>>>0>=g>>>0)break s;if(s=A[1+(c=(D<<e>>>n<<1)+b|0)|0],i[0|m]=A[0|c],s=A[1+(c=(D<<(e=e+s|0)>>>n<<1)+b|0)|0],i[m+1|0]=A[0|c],m=m+2|0,!((c=e+s|0)>>>0<33))break}d=C+w|0;break o}if(e>>>0>32)break i}for(;;){if((0|C)>=4)p=e>>>3|0,s=0,c=7&e;else{if(!C)break i;c=e-((p=(s=d-(c=e>>>3|0)>>>0<w>>>0)?C:c)<<3)|0}if(D=A[0|(d=w+(C=C-p|0)|0)]|A[d+1|0]<<8|A[d+2|0]<<16|A[d+3|0]<<24,e=m>>>0>=R>>>0,s||e){if(e)break n;break r}if(s=A[1+(e=(D<<c>>>n<<1)+b|0)|0],i[0|m]=A[0|e],m=m+1|0,!((e=s+c|0)>>>0<=32))break}}c=e}if(m>>>0>=R>>>0)break n}for(;s=A[1+(e=(D<<c>>>n<<1)+b|0)|0],i[0|m]=A[0|e],c=s+c|0,(0|R)!=(0|(m=m+1|0)););}n=0-k&31;n:{r:{o:{i:{a:{if(r>>>0<=32)for(;;){if((0|y)>=4)p=r>>>3|0,m=0,e=7&r;else{if(!y){y=0,s=_,e=r;break i}e=r-((p=(m=(y+_|0)-(e=r>>>3|0)>>>0<_>>>0)?y:e)<<3)|0}if(x=A[0|(s=_+(y=y-p|0)|0)]|A[s+1|0]<<8|A[s+2|0]<<16|A[s+3|0]<<24,m|o>>>0>=F>>>0)break a;if(s=A[1+(r=(x<<e>>>n<<1)+b|0)|0],i[0|o]=A[0|r],s=A[1+(r=(x<<(e=e+s|0)>>>n<<1)+b|0)|0],i[o+1|0]=A[0|r],o=o+2|0,!((r=e+s|0)>>>0<33))break}s=y+_|0;break o}if(!(e>>>0<=32)){r=e;break o}}for(r=e;;){if((0|y)>=4)p=r>>>3|0,m=0,r&=7;else{if(!y)break o;r=r-((p=(m=s-(e=r>>>3|0)>>>0<_>>>0)?y:e)<<3)|0}if(x=A[0|(s=_+(y=y-p|0)|0)]|A[s+1|0]<<8|A[s+2|0]<<16|A[s+3|0]<<24,e=o>>>0>=O>>>0,m||e){if(e)break n;break r}if(p=A[1+(e=(x<<r>>>n<<1)+b|0)|0],i[0|o]=A[0|e],o=o+1|0,!((r=r+p|0)>>>0<=32))break}}if(o>>>0>=O>>>0)break n}for(;p=A[1+(e=(x<<r>>>n<<1)+b|0)|0],i[0|o]=A[0|e],r=r+p|0,(0|O)!=(0|(o=o+1|0)););}E=6==(0|u)&&32==(0|h)&&32==(0|l)&&(0|a)==(0|B)&&32==(0|c)&&(0|d)==(0|w)&&32==(0|r)&&(0|s)==(0|_)?t:-20}}}return E}return-20}function M(e,t){var n,r=0,o=0,a=0,l=0;x=n=x-32|0;e:{t:{n:{r:{o:{i:{a:{s:{l:{c:{u:{d:{A:{f:{p:{h:{g:switch(((o=(0|(o=s[e>>2]))!=s[e+4>>2]?i[0|o]:0)<<24>>24)-97|0){case 12:break c;case 11:break u;case 8:break d;case 6:break A;case 4:break f;case 3:break p;case 2:break h;case 0:break g;case 21:break n;case 18:break r;case 17:break o;case 16:break i;case 15:break a;case 14:break s;case 13:break l;default:break e}g:{m:{y:{switch(t=s[e>>2],(t=(t=s[e+4>>2]-t>>>0>1?i[t+1|0]:0)<<24>>24)-97|0){case 1:case 2:break e;case 0:break t;case 3:break y}if(78==(0|t))break m;if(83==(0|t))break g;if(110!=(0|t))break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9619);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9629);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9640);break e}h:{g:{m:{y:switch(o=s[e>>2],(o=(o=s[e+4>>2]-o>>>0>1?i[o+1|0]:0)<<24>>24)-108|0){case 2:break e;case 3:break g;case 1:break m;case 0:break y;default:break h}s[e>>2]=s[e>>2]+2,r=Nn(e,9650);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9661);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9671);break e}if(118!=(0|o))break e;s[e>>2]=s[e>>2]+2,o=Mt(n+24|0,e+388|0,0),a=Mt(n+16|0,e+389|0,0!=(A[e+389|0]|t)),l=R(e),s[n+12>>2]=l,l&&(t&&(i[0|t]=1),r=En(e,n+12|0)),A[a+5|0]&&(i[s[a>>2]]=A[a+4|0]),A[o+5|0]&&(i[s[o>>2]]=A[o+4|0]);break e}p:{h:{g:{m:{switch(t=s[e>>2],(t=(t=s[e+4>>2]-t>>>0>1?i[t+1|0]:0)<<24>>24)-97|0){case 1:case 2:case 3:break e;case 4:break g;case 0:break m}if(86==(0|t))break p;if(108==(0|t))break h;if(118!=(0|t))break e;s[e>>2]=s[e>>2]+2,r=Nn(e,9725);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9681);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9699);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9709);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9735);break e}f:{p:{h:switch(t=s[e>>2],(t=(t=s[e+4>>2]-t>>>0>1?i[t+1|0]:0)<<24>>24)-111|0){case 1:break e;case 2:break f;case 0:break h;default:break p}s[e>>2]=s[e>>2]+2,r=Nn(e,9746);break e}if(79!=(0|t))break e;s[e>>2]=s[e>>2]+2,r=Nn(e,9756);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9767);break e}if(t=s[e>>2],116!=(0|(t=(t=s[e+4>>2]-t>>>0>1?i[t+1|0]:0)<<24>>24))){if(101!=(0|t))break e;s[e>>2]=s[e>>2]+2,r=Nn(e,9778);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9789);break e}if(t=s[e>>2],120!=(255&(t=s[e+4>>2]-t>>>0>1?A[t+1|0]:0)))break e;s[e>>2]=s[e>>2]+2,r=Nn(e,9799);break e}u:{d:{A:{f:{p:{switch(t=s[e>>2],(t=(t=s[e+4>>2]-t>>>0>1?i[t+1|0]:0)<<24>>24)-101|0){case 1:case 2:case 3:break e;case 4:break f;case 0:break p}switch(t-115|0){case 1:break u;case 0:break A;default:break d}}s[e>>2]=s[e>>2]+2,r=Nn(e,9810);break e}if(s[e>>2]=s[e>>2]+2,t=Pe(e),s[n+24>>2]=t,!t)break e;r=function(e,t){return e=ct(e,12),t=s[t>>2],i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=19,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=10236,e}(e+416|0,n+24|0);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9821);break e}if(83!=(0|t))break e;s[e>>2]=s[e>>2]+2,r=Nn(e,9832);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9844);break e}c:{u:{d:{A:{f:{switch(t=s[e>>2],(t=(t=s[e+4>>2]-t>>>0>1?i[t+1|0]:0)<<24>>24)-105|0){case 1:case 2:break e;case 4:break c;case 3:break d;case 0:break f}switch(t-73|0){case 3:break u;case 0:break A;default:break e}}s[e>>2]=s[e>>2]+2,r=Nn(e,9854);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9864);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9699);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9875);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9886);break e}l:{c:{u:{d:{A:{switch(t=s[e>>2],(t=(t=s[e+4>>2]-t>>>0>1?i[t+1|0]:0)<<24>>24)-97|0){case 1:case 2:case 3:case 5:break e;case 6:break u;case 4:break d;case 0:break A}switch(t-116|0){case 3:break l;case 0:break c;default:break e}}s[e>>2]=s[e>>2]+2,r=Nn(e,9897);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9912);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9854);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9923);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9933);break e}s:{l:{c:switch(t=s[e>>2],(t=(t=s[e+4>>2]-t>>>0>1?i[t+1|0]:0)<<24>>24)-111|0){case 1:case 2:break e;case 3:break l;case 0:break c;default:break s}s[e>>2]=s[e>>2]+2,r=Nn(e,9946);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9957);break e}if(82!=(0|t))break e;s[e>>2]=s[e>>2]+2,r=Nn(e,9967);break e}a:{s:{l:{c:{u:{d:switch(t=s[e>>2],(t=(t=s[e+4>>2]-t>>>0>1?i[t+1|0]:0)<<24>>24)-108|0){case 2:case 3:case 5:case 6:break e;case 8:break a;case 7:break s;case 4:break l;case 0:break u;case 1:break d;default:break c}s[e>>2]=s[e>>2]+2,r=Nn(e,9978);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9990);break e}if(76!=(0|t))break e;s[e>>2]=s[e>>2]+2,r=Nn(e,1e4);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,10011);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9990);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,10022);break e}if(t=s[e>>2],117!=(255&(t=s[e+4>>2]-t>>>0>1?A[t+1|0]:0)))break e;s[e>>2]=s[e>>2]+2,r=Nn(e,10033);break e}o:{i:{if(t=s[e>>2],77!=(0|(t=(t=s[e+4>>2]-t>>>0>1?i[t+1|0]:0)<<24>>24))){if(83==(0|t))break o;if(115==(0|t))break i;if(109!=(0|t))break e;s[e>>2]=s[e>>2]+2,r=Nn(e,10043);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,10053);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,10064);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,10075);break e}if(t=s[e>>2],115!=(255&(t=s[e+4>>2]-t>>>0>1?A[t+1|0]:0)))break e;s[e>>2]=s[e>>2]+2,r=Nn(e,10087);break e}if(t=s[e>>2],((t=s[e+4>>2]-t>>>0>1?i[t+1|0]:0)<<24>>24)-48>>>0>9)break e;if(s[e>>2]=s[e>>2]+2,t=Pe(e),s[n+24>>2]=t,!t)break e;r=En(e,n+24|0);break e}s[e>>2]=s[e>>2]+2,r=Nn(e,9608)}return x=n+32|0,r}function R(e){var t,n,r=0,o=0,a=0,l=0,c=0,u=0,d=0;x=t=x-32|0,s[t+28>>2]=0,n=t;e:{t:{n:{r:{o:{i:{a:{s:{l:{c:{u:{d:{A:{f:{p:{h:{g:{m:{y:{v:{b:{C:{I:{E:{x:{B:{w:{_:{S:{D:{T:{k:{Q:{M:{R:{P:{O:{F:{N:{L:{U:{G:switch((r=(r=(0|(r=s[e>>2]))!=s[e+4>>2]?i[0|r]:0)<<24>>24)-65|0){case 6:break c;case 2:break u;case 14:break d;case 17:break A;case 15:break f;case 19:break p;case 12:break h;case 0:break g;case 5:break m;case 3:break y;case 52:break v;case 57:break b;case 38:break C;case 36:break I;case 35:break E;case 37:break x;case 46:break B;case 45:break w;case 56:break _;case 55:break S;case 44:break D;case 43:break T;case 41:break k;case 40:break Q;case 51:break M;case 50:break R;case 39:break P;case 32:break O;case 34:break F;case 33:break N;case 54:break L;case 53:break U;case 10:case 21:case 49:break G;case 20:break o;case 18:break l;default:break s}l=(r=114==(0|r))?2:1,c=r,a=s[e>>2],a=r=86==(255&(r=r>>>0<s[e+4>>2]-a>>>0?A[r+a|0]:0))?l:c,c=r,l=s[e>>2],a=r=c+(75==(255&(r=r>>>0<s[e+4>>2]-l>>>0?A[a+l|0]:0)))|0;G:switch(l=s[e>>2],((a=r>>>0<s[e+4>>2]-l>>>0?i[a+l|0]:0)<<24>>24&255)-68|0){case 2:break r;case 0:break G;default:break o}if(r=r+1|0,a=s[e>>2],(a=(r=(r=r>>>0<s[e+4>>2]-a>>>0?i[r+a|0]:0)<<24>>24&255)-111|0)>>>0>9|!(1<<a&769))break i;break r}s[e>>2]=s[e>>2]+1,o=Nn(e,13984);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,6283);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,13989);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,6299);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,6304);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,6316);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,6330);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,6336);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,13994);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,13998);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,14011);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,14016);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,14030);break e}s[e>>2]=s[e>>2]+1,o=Tt(e+416|0,14040);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,6366);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,6375);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,14059);break e}s[e>>2]=s[e>>2]+1,o=Tt(e+416|0,14065);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,14072);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,14084);break e}s[e>>2]=s[e>>2]+1,o=Nn(e,7916);break e}if(s[e>>2]=s[e>>2]+1,He(t+16|0,e),s[t+16>>2]==s[t+20>>2])break a;u=t,d=Fn(e,t+16|0),s[u+28>>2]=d;break t}y:{v:{b:{C:{I:{E:{x:{B:{w:{_:{S:{D:{T:{k:switch(r=s[e>>2],((r=s[e+4>>2]-r>>>0>1?i[r+1|0]:0)<<24>>24)-79|0){case 0:case 32:case 40:case 41:break y;case 33:break v;case 39:break b;case 5:case 37:break C;case 31:break I;case 20:break E;case 18:break x;case 38:break B;case 36:break w;case 26:break _;case 25:break S;case 23:break D;case 22:break T;case 21:break k;default:break e}s[e>>2]=s[e>>2]+2,o=Nn(e,14095);break e}s[e>>2]=s[e>>2]+2,o=Nn(e,14105);break e}s[e>>2]=s[e>>2]+2,o=Nn(e,14116);break e}s[e>>2]=s[e>>2]+2,o=Nn(e,14126);break e}s[e>>2]=s[e>>2]+2,o=Nn(e,14136);break e}s[e>>2]=s[e>>2]+2,o=Nn(e,14145);break e}s[e>>2]=s[e>>2]+2,o=Nn(e,14154);break e}s[e>>2]=s[e>>2]+2,o=Nn(e,5907);break e}s[e>>2]=s[e>>2]+2,o=Nn(e,14162);break e}s[e>>2]=s[e>>2]+2,o=Nn(e,14177);break e}r=st(e);break n}r=function(e){var t,n,r=0,o=0,a=0,l=0;x=t=x-32|0,o=on(t+24|0,14924),n=s[o+4>>2],s[t>>2]=s[o>>2],s[t+4>>2]=n;b:if(Je(e,t)){C:{if((((o=(0|(o=s[e>>2]))!=s[e+4>>2]?i[0|o]:0)<<24>>24)-49&255)>>>0<=8){if(We(t+8|0,e,0),a=t,l=Fn(e,t+8|0),s[a+20>>2]=l,!Wt(e,95))break b;if(Wt(e,112)){r=function(e,t){return e=ct(e,12),t=s[t>>2],i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=26,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=14936,e}(e+416|0,t+20|0);break b}if(r=R(e),s[t+8>>2]=r,!r)break C;r=pn(e,t+8|0,t+20|0);break b}if(!Wt(e,95)){if(o=S(e),s[t+8>>2]=o,!o)break b;if(!Wt(e,95))break b;if(r=R(e),s[t+20>>2]=r,!r)break C;r=pn(e,t+20|0,t+8|0);break b}if(r=R(e),s[t+8>>2]=r,r){s[t+20>>2]=0,r=Nt(ct(e+416|0,16),s[t+8>>2],0);break b}}r=0}return x=t+32|0,r}(e);break n}if(s[e>>2]=s[e>>2]+2,r=R(e),s[t+16>>2]=r,!r)break e;u=t,d=bn(e,t+16|0),s[u+28>>2]=d;break t}r=Z(e);break n}r=Z(e);break n}r=function(e){var t,n=0,r=0,o=0,a=0;x=t=x-16|0;g:if(Wt(e,65)){s[t+12>>2]=0;m:{if(((n=(0|(n=s[e>>2]))!=s[e+4>>2]?i[0|n]:0)<<24>>24)-48>>>0<=9){if(We(t,e,0),o=t,a=Fn(e,t),s[o+12>>2]=a,Wt(e,95))break m;break g}if(!Wt(e,95)){if(!(n=S(e)))break g;if(!Wt(e,95))break g;s[t+12>>2]=n}}n=R(e),s[t>>2]=n,n&&(r=function(e,t,n){return i[e+7|0]=1,i[e+6|0]=0,i[e+5|0]=0,i[e+4|0]=14,s[e>>2]=5508,s[e+12>>2]=n,s[e+8>>2]=t,s[e>>2]=15176,e}(ct(e+416|0,16),s[t>>2],s[t+12>>2]))}return x=t+16|0,r}(e);break n}r=function(e){var t,n=0;return x=t=x-16|0,n=0,Wt(e,77)&&(n=R(e),s[t+12>>2]=n,n=n&&(n=R(e),s[t+8>>2]=n,n)?function(e,t,n){var r;return r=A[n+5|0],i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=r,i[e+4|0]=13,s[e>>2]=5508,s[e+12>>2]=n,s[e+8>>2]=t,s[e>>2]=15284,e}(ct(e+416|0,16),s[t+12>>2],s[t+8>>2]):0),x=t+16|0,n}(e);break n}p:{h:{switch(r=s[e>>2],(r=(r=s[e+4>>2]-r>>>0>1?i[r+1|0]:0)<<24>>24&255)-115|0){case 1:break p;case 0:case 2:break h}if(101!=(0|r))break p}r=me(e);break n}if(r=ge(e),s[t+28>>2]=r,!r)break a;if(!A[e+388|0])break t;if(73!=(255&(r=(0|(r=s[e>>2]))!=s[e+4>>2]?A[0|r]:0)))break t;if(r=be(e,0),s[t+16>>2]=r,!r)break a;u=t,d=An(e,t+28|0,t+16|0),s[u+28>>2]=d;break t}if(s[e>>2]=s[e>>2]+1,r=R(e),s[t+16>>2]=r,!r)break a;u=t,d=function(e,t){var n;return e=ct(e,12),t=s[t>>2],n=A[t+5|0],i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=n,i[e+4|0]=11,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=15544,e}(e+416|0,t+16|0),s[u+28>>2]=d;break t}if(s[e>>2]=s[e>>2]+1,r=R(e),s[t+16>>2]=r,!r)break a;s[t+12>>2]=0,u=t,d=dn(e,t+16|0,t+12|0),s[u+28>>2]=d;break t}if(s[e>>2]=s[e>>2]+1,r=R(e),s[t+16>>2]=r,!r)break a;s[t+12>>2]=1,u=t,d=dn(e,t+16|0,t+12|0),s[u+28>>2]=d;break t}if(s[e>>2]=s[e>>2]+1,r=R(e),s[t+16>>2]=r,!r)break e;u=t,d=wt(e+416|0,t+16|0,14192),s[u+28>>2]=d;break t}if(s[e>>2]=s[e>>2]+1,r=R(e),s[t+16>>2]=r,!r)break a;u=t,d=wt(e+416|0,t+16|0,14201),s[u+28>>2]=d;break t}if(r=s[e>>2],!(!(r=(r=s[e+4>>2]-r>>>0>1?i[r+1|0]:0)<<24>>24)|116==(255&r))){if(o=oe(e),s[t+16>>2]=o,!o|!A[e+388|0])break e;if(73!=(255&(r=(0|(r=s[e>>2]))!=s[e+4>>2]?A[0|r]:0)))break e;if(r=be(e,0),s[t+12>>2]=r,!r)break a;u=t,d=An(e,t+16|0,t+12|0),s[u+28>>2]=d;break t}}r=me(e);break n}o=0;break e}if(79==(0|r))break r}r=ce(e);break n}r=Z(e)}if(s[n+28>>2]=r,!r)break e}Qt(e+148|0,t+28|0),o=s[t+28>>2]}return x=t+32|0,o}function P(e,t,n,r){var o,a,l=0,c=0,u=0,d=0,f=0,p=0,h=0,g=0,y=0,v=0,b=0,C=0,I=0,E=0,B=0;x=o=x-16|0,s[o+12>>2]=0,s[o+8>>2]=0,c=-44;e:{if(!((a=ee(v=r+740|0,r,o+8|0,o+12|0,t,n,r+128|0))>>>0>4294967176)){if((I=s[o+12>>2])>>>0>1+(255&(t=s[e>>2]))>>>0)break e;if(s[e>>2]=-16776961&t|I<<16&16711680,C=s[o+8>>2],c=0,!((0|I)<0)){if(f=r- -64|0,g=3&(n=I+1|0),t=0,I>>>0>=3)for(h=-4&n;l=s[(d=c<<2)+r>>2],s[d+f>>2]=t,u=s[(n=4|d)+r>>2],p=n+f|0,n=t+l|0,s[p>>2]=n,l=s[(t=8|d)+r>>2],u=n+u|0,s[t+f>>2]=u,n=s[(t=12|d)+r>>2],d=t+f|0,t=l+u|0,s[d>>2]=t,t=t+n|0,c=c+4|0,h=h-4|0;);if(g)for(;n=s[(u=c<<2)+r>>2],s[u+f>>2]=t,c=c+1|0,t=t+n|0,g=g-1|0;);}if(c=0,(0|C)>=4)for(u=C-3|0,d=r- -64|0,g=r+484|0;t=d+(A[c+v|0]<<2)|0,n=s[t>>2],s[t>>2]=n+1,i[n+g|0]=c,t=d+(A[(n=1|c)+v|0]<<2)|0,l=s[t>>2],s[t>>2]=l+1,i[l+g|0]=n,t=d+(A[(n=2|c)+v|0]<<2)|0,l=s[t>>2],s[t>>2]=l+1,i[l+g|0]=n,t=d+(A[(n=3|c)+v|0]<<2)|0,l=s[t>>2],s[t>>2]=l+1,i[l+g|0]=n,(0|u)>(0|(c=c+4|0)););if(!((0|c)>=(0|C))&&(t=c+1|0,g=r- -64|0,l=r+484|0,C-c&1&&(n=g+(A[c+v|0]<<2)|0,u=s[n>>2],s[n>>2]=u+1,i[l+u|0]=c,c=t),(0|t)!=(0|C)))for(;t=g+(A[c+v|0]<<2)|0,n=s[t>>2],s[t>>2]=n+1,i[n+l|0]=c,t=g+(A[(n=c+1|0)+v|0]<<2)|0,u=s[t>>2],s[t>>2]=u+1,i[l+u|0]=n,(0|C)!=(0|(c=c+2|0)););if(!((B=I+1|0)>>>0<2))for(b=e+4|0,y=r+484|0,h=s[r>>2],t=0,c=1;;){g=c,d=B-c|0,p=s[(c<<2)+r>>2];t:{n:{r:{o:{i:{a:switch((E=(e=1<<c)>>1)-1|0){case 0:break r;case 1:break o;case 3:break i;case 7:break a;default:break n}if((0|p)<1)break t;if(f=d<<8&65280,c=0,n=t,1!=(0|p))for(u=-2&p;l=b+(n<<1)|0,d=e=Tn(f|A[y+(c+h|0)|0],0,65537,65537),i[l+8|0]=d,i[l+9|0]=d>>>8,i[l+10|0]=d>>>16,i[l+11|0]=d>>>24,d=w,i[l+12|0]=d,i[l+13|0]=d>>>8,i[l+14|0]=d>>>16,i[l+15|0]=d>>>24,i[0|l]=e,i[l+1|0]=e>>>8,i[l+2|0]=e>>>16,i[l+3|0]=e>>>24,i[l+4|0]=d,i[l+5|0]=d>>>8,i[l+6|0]=d>>>16,i[l+7|0]=d>>>24,d=e=Tn(f|A[y+((1|c)+h|0)|0],0,65537,65537),i[l+24|0]=d,i[l+25|0]=d>>>8,i[l+26|0]=d>>>16,i[l+27|0]=d>>>24,d=w,i[l+28|0]=d,i[l+29|0]=d>>>8,i[l+30|0]=d>>>16,i[l+31|0]=d>>>24,i[l+16|0]=e,i[l+17|0]=e>>>8,i[l+18|0]=e>>>16,i[l+19|0]=e>>>24,i[l+20|0]=d,i[l+21|0]=d>>>8,i[l+22|0]=d>>>16,i[l+23|0]=d>>>24,c=c+2|0,n=n+16|0,u=u-2|0;);if(!(1&p))break t;u=b+(n<<1)|0,n=e=Tn(f|A[y+(c+h|0)|0],0,65537,65537),i[u+8|0]=n,i[u+9|0]=n>>>8,i[u+10|0]=n>>>16,i[u+11|0]=n>>>24,n=w,i[u+12|0]=n,i[u+13|0]=n>>>8,i[u+14|0]=n>>>16,i[u+15|0]=n>>>24,i[0|u]=e,i[u+1|0]=e>>>8,i[u+2|0]=e>>>16,i[u+3|0]=e>>>24,i[u+4|0]=n,i[u+5|0]=n>>>8,i[u+6|0]=n>>>16,i[u+7|0]=n>>>24;break t}if((0|p)<1)break t;if(l=d<<8&65280,c=0,d=t,1!=(0|p))for(n=-2&p;f=e=b+(d<<1)|0,u=Tn(l|A[y+(c+h|0)|0],0,65537,65537),i[0|f]=u,i[f+1|0]=u>>>8,i[f+2|0]=u>>>16,i[f+3|0]=u>>>24,u=w,i[f+4|0]=u,i[f+5|0]=u>>>8,i[f+6|0]=u>>>16,i[f+7|0]=u>>>24,u=Tn(l|A[y+((1|c)+h|0)|0],0,65537,65537),i[f+8|0]=u,i[f+9|0]=u>>>8,i[f+10|0]=u>>>16,i[f+11|0]=u>>>24,u=w,i[f+12|0]=u,i[f+13|0]=u>>>8,i[f+14|0]=u>>>16,i[f+15|0]=u>>>24,c=c+2|0,d=d+8|0,n=n-2|0;);if(!(1&p))break t;n=b+(d<<1)|0,e=Tn(l|A[y+(c+h|0)|0],0,65537,65537),i[0|n]=e,i[n+1|0]=e>>>8,i[n+2|0]=e>>>16,i[n+3|0]=e>>>24,e=w,i[n+4|0]=e,i[n+5|0]=e>>>8,i[n+6|0]=e>>>16,i[n+7|0]=e>>>24;break t}if((0|p)<1)break t;if(n=0,u=t,1!=(0|p))for(e=-2&p;l=b+(u<<1)|0,c=A[y+(n+h|0)|0],i[l+2|0]=c,i[l+3|0]=d,i[l+1|0]=d,i[0|l]=c,c=A[y+((1|n)+h|0)|0],i[l+5|0]=d,i[l+4|0]=c,i[l+6|0]=c,i[l+7|0]=d,n=n+2|0,u=u+4|0,e=e-2|0;);if(!(1&p))break t;e=A[y+(n+h|0)|0],i[3+(n=b+(u<<1)|0)|0]=d,i[n+1|0]=d,i[0|n]=e,i[n+2|0]=e;break t}if((0|p)<1)break t;if(c=0,u=t,1!=(0|p))for(e=-2&p;n=A[y+(c+h|0)|0],i[1+(l=b+(u<<1)|0)|0]=d,i[0|l]=n,n=A[y+((1|c)+h|0)|0],i[l+3|0]=d,i[l+2|0]=n,c=c+2|0,u=u+2|0,e=e-2|0;);if(!(1&p))break t;n=A[y+(c+h|0)|0],i[1+(e=b+(u<<1)|0)|0]=d,i[0|e]=n;break t}if(!((0|p)<1|(0|e)<2))for(v=d<<8&65280,u=0,e=t;;){for(C=b+(e<<1)|0,n=Tn(v|A[y+(u+h|0)|0],0,65537,65537),c=w,d=0;l=n,i[24+(f=C+(d<<1)|0)|0]=l,i[f+25|0]=l>>>8,i[f+26|0]=l>>>16,i[f+27|0]=l>>>24,i[f+28|0]=c,i[f+29|0]=c>>>8,i[f+30|0]=c>>>16,i[f+31|0]=c>>>24,i[f+16|0]=l,i[f+17|0]=l>>>8,i[f+18|0]=l>>>16,i[f+19|0]=l>>>24,i[f+20|0]=c,i[f+21|0]=c>>>8,i[f+22|0]=c>>>16,i[f+23|0]=c>>>24,i[f+8|0]=l,i[f+9|0]=l>>>8,i[f+10|0]=l>>>16,i[f+11|0]=l>>>24,i[f+12|0]=c,i[f+13|0]=c>>>8,i[f+14|0]=c>>>16,i[f+15|0]=c>>>24,i[0|f]=l,i[f+1|0]=l>>>8,i[f+2|0]=l>>>16,i[f+3|0]=l>>>24,i[f+4|0]=c,i[f+5|0]=c>>>8,i[f+6|0]=c>>>16,i[f+7|0]=c>>>24,(0|E)>(0|(d=d+16|0)););if(e=e+E|0,(0|p)==(0|(u=u+1|0)))break}}if(c=g+1|0,h=p+h|0,t=m(p,E)+t|0,(0|g)==(0|I))break}}c=a}return x=o+16|0,c}function O(e,t,n,r,o){var l,c,u,d=0,f=0,p=0,h=0,y=0,v=0,b=0,C=0,I=0,E=0,B=0,w=0;x=l=x-80|0,s[l+76>>2]=t,u=l+55|0,c=l+56|0,t=0;e:{t:for(;;){(0|C)<0||((2147483647-C|0)<(0|t)?(s[4041]=61,C=-1):C=t+C|0);n:{r:{o:{if(p=s[l+76>>2],d=A[0|(t=p)])for(;;){i:{a:if(d&=255){if(37!=(0|d))break i;for(d=t;;){if(37!=A[t+1|0])break a;if(f=t+2|0,s[l+76>>2]=f,d=d+1|0,h=A[t+2|0],t=f,37!=(0|h))break}}else d=t;if(t=d-p|0,e&&_n(e,p,t),t)continue t;d=l,t=s[l+76>>2],36!=A[t+2|0]|i[s[l+76>>2]+1|0]-48>>>0>=10?(E=-1,t=t+1|0):(E=i[t+1|0]-48|0,B=1,t=t+3|0),s[d+76>>2]=t,y=0;a:if((f=(I=i[0|t])-32|0)>>>0>31)d=t;else if(d=t,75913&(f=1<<f))for(;;){if(d=t+1|0,s[l+76>>2]=d,y|=f,(f=(I=i[t+1|0])-32|0)>>>0>=32)break a;if(t=d,!(75913&(f=1<<f)))break}a:if(42!=(0|I)){if((0|(v=gt(l+76|0)))<0)break o;t=s[l+76>>2]}else{if(f=l,i[d+1|0]-48>>>0>=10||(t=s[l+76>>2],36!=A[t+2|0])){if(B)break o;B=0,v=0,e&&(t=s[n>>2],s[n>>2]=t+4,v=s[t>>2]),t=s[l+76>>2]+1|0}else s[((i[t+1|0]<<2)+o|0)-192>>2]=10,v=s[((i[t+1|0]<<3)+r|0)-384>>2],B=1,t=t+3|0;if(s[f+76>>2]=t,(0|v)>-1)break a;v=0-v|0,y|=8192}h=-1;a:if(46==A[0|t])if(42!=A[t+1|0])s[l+76>>2]=t+1,h=gt(l+76|0),t=s[l+76>>2];else{if(!(i[t+2|0]-48>>>0>=10)&&(t=s[l+76>>2],36==A[t+3|0])){s[((i[t+2|0]<<2)+o|0)-192>>2]=10,h=s[((i[t+2|0]<<3)+r|0)-384>>2],t=t+4|0,s[l+76>>2]=t;break a}if(B)break o;e?(t=s[n>>2],s[n>>2]=t+4,h=s[t>>2]):h=0,t=s[l+76>>2]+2|0,s[l+76>>2]=t}for(d=0;;){if(w=d,b=-1,i[0|t]-65>>>0>57)break e;if(I=t+1|0,s[l+76>>2]=I,d=i[0|t],t=I,!((d=A[4015+(d+m(w,58)|0)|0])-1>>>0<8))break}a:{s:{if(19!=(0|d)){if(!d)break e;if((0|E)>=0){s[(E<<2)+o>>2]=d,d=s[4+(t=(E<<3)+r|0)>>2],s[l+64>>2]=s[t>>2],s[l+68>>2]=d;break s}if(!e)break n;pe(l- -64|0,d,n),I=s[l+76>>2];break a}if((0|E)>-1)break e}if(t=0,!e)continue t}f=-65537&y,d=8192&y?f:y,b=0,E=4052,y=c;a:{s:{l:{c:{u:{d:{A:{f:{p:{h:{g:{m:{y:{v:{b:{switch(t=i[I-1|0],(t=w&&3==(15&t)?-33&t:t)-88|0){case 11:break a;case 9:case 13:case 14:case 15:break s;case 27:break A;case 12:case 17:break h;case 23:break g;case 0:case 32:break m;case 24:break y;case 22:break v;case 29:break b;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 10:case 16:case 18:case 19:case 20:case 21:case 25:case 26:case 28:case 30:case 31:break r}switch(t-65|0){case 0:case 4:case 5:case 6:break s;case 2:break u;case 1:case 3:break r}if(83==(0|t))break d;break r}t=s[l+64>>2],p=s[l+68>>2],E=4052;break p}t=0;v:switch(255&w){case 0:case 1:case 6:s[s[l+64>>2]>>2]=C;continue t;case 2:d=s[l+64>>2],s[d>>2]=C,s[d+4>>2]=C>>31;continue t;case 3:a[s[l+64>>2]>>1]=C;continue t;case 4:i[s[l+64>>2]]=C;continue t;case 7:break v;default:continue t}d=s[l+64>>2],s[d>>2]=C,s[d+4>>2]=C>>31;continue t}h=h>>>0>8?h:8,d|=8,t=120}if(p=kt(s[l+64>>2],s[l+68>>2],c,32&t),!(8&d)|!(s[l+64>>2]|s[l+68>>2]))break f;E=4052+(t>>>4|0)|0,b=2;break f}if(p=Lt(s[l+64>>2],s[l+68>>2],c),!(8&d))break f;h=(0|(t=c-p|0))<(0|h)?h:t+1|0;break f}p=f=s[l+68>>2],t=s[l+64>>2],(0|f)<-1||(0|f)<=-1?(p=0-(p+(0!=(0|t))|0)|0,t=0-t|0,s[l+64>>2]=t,s[l+68>>2]=p,b=1,E=4052):2048&d?(b=1,E=4053):E=(b=1&d)?4054:4052}p=ze(t,p,c)}if(d=(0|h)>-1?-65537&d:d,!(!!((t=s[l+64>>2])|(f=s[l+68>>2]))|h)){h=0,p=c;break r}h=(0|(t=!(t|f)+(c-p|0)|0))<(0|h)?h:t;break r}y=(t=Be(p=(t=s[l+64>>2])||4062,0,h))||h+p|0,d=f,h=t?t-p|0:h;break r}if(f=s[l+64>>2],h)break c;t=0,lt(e,32,v,0,d);break l}s[l+12>>2]=0,s[l+8>>2]=s[l+64>>2],s[l+64>>2]=l+8,h=-1,f=l+8|0}t=0;c:{for(;;){if(!(p=s[f>>2]))break c;if(!((y=(0|(p=wn(l+4|0,p)))<0)|p>>>0>h-t>>>0)){if(f=f+4|0,h>>>0>(t=t+p|0)>>>0)continue;break c}break}if(b=-1,y)break e}if(lt(e,32,v,t,d),t)for(f=0,I=s[l+64>>2];;){if(!(p=s[I>>2]))break l;if((0|(f=(p=wn(l+4|0,p))+f|0))>(0|t))break l;if(_n(e,l+4|0,p),I=I+4|0,!(t>>>0>f>>>0))break}else t=0}lt(e,32,v,t,8192^d),t=(0|t)<(0|v)?v:t;continue t}t=0|Jn[2](e,g[l+64>>3],v,h,d,t);continue t}i[l+55|0]=s[l+64>>2],h=1,p=u,d=f;break r}f=t+1|0,s[l+76>>2]=f,d=A[t+1|0],t=f}if(b=C,e)break e;if(!B)break n;for(t=1;;){if(e=s[(t<<2)+o>>2]){if(pe((t<<3)+r|0,e,n),b=1,10!=(0|(t=t+1|0)))continue;break e}break}if(b=1,t>>>0>=10)break e;for(;;){if(s[(t<<2)+o>>2])break o;if(10==(0|(t=t+1|0)))break}break e}b=-1;break e}lt(e,32,t=(0|(f=(h=(0|h)<(0|(y=y-p|0))?y:h)+b|0))>(0|v)?f:v,f,d),_n(e,E,b),lt(e,48,t,f,65536^d),lt(e,48,h,y,0),_n(e,p,y),lt(e,32,t,f,8192^d);continue}break}b=0}return x=l+80|0,b}function F(e,t,n,r,o){var l,c=0,u=0,d=0,f=0,p=0,h=0,g=0,y=0,v=0,b=0,C=0,I=0,E=0,B=0,w=0,_=0,S=0,D=0,T=0,k=0,Q=0,M=0,R=0;x=l=x-448|0,c=-44;e:if(!(o>>>0<1500||(o=s[e>>2],y=fe(r+624|0,0,108),(I=255&o)>>>0>12))){if((D=ee(h=r+1244|0,y,l+8|0,l+12|0,t,n,l+80|0))>>>0<=4294967176){if((b=s[l+12>>2])>>>0>I>>>0)break e;for(w=r+732|0,Q=r+676|0,_=e+4|0,M=-16777216&o,n=r+680|0,t=b;o=t,t=t-1|0,!s[y+(o<<2)>>2];);if(t=1,!((C=o+1|0)>>>0<2)){if(d=3&o,o-1>>>0>=3)for(c=-4&o;g=s[(u=t<<2)+y>>2],s[n+u>>2]=v,E=s[(p=u+4|0)+y>>2],v=g+v|0,s[n+p>>2]=v,p=s[(g=u+8|0)+y>>2],v=v+E|0,s[n+g>>2]=v,g=s[(u=u+12|0)+y>>2],f=n+u|0,u=p+v|0,s[f>>2]=u,v=u+g|0,t=t+4|0,c=c-4|0;);if(d)for(;u=s[(c=t<<2)+y>>2],s[n+c>>2]=v,t=t+1|0,v=u+v|0,d=d-1|0;);}if(s[n>>2]=v,c=s[l+8>>2]){if(t=0,1!=(0|c))for(u=-2&c;g=A[t+h|0],d=s[(p=n+(g<<2)|0)>>2],s[p>>2]=d+1,i[1+(d=(d<<1)+w|0)|0]=g,i[0|d]=t,p=A[(g=1|t)+h|0],d=s[(E=n+(p<<2)|0)>>2],s[E>>2]=d+1,i[1+(d=(d<<1)+w|0)|0]=p,i[0|d]=g,t=t+2|0,u=u-2|0;);1&c&&(c=A[t+h|0],n=s[(u=n+(c<<2)|0)>>2],s[u>>2]=n+1,i[1+(n=(n<<1)+w|0)|0]=c,i[0|n]=t)}n=0,s[r+680>>2]=0;t:if(C>>>0>=2){if(t=1,1!=(0|o))for(c=~b+I|0,h=-2&o;d=s[(u=t<<2)+y>>2],s[r+u>>2]=n,p=s[(g=(u=t+1|0)<<2)+y>>2],n=(d<<t+c)+n|0,s[r+g>>2]=n,n=n+(p<<c+u)|0,t=t+2|0,h=h-2|0;);if(1&o&&(s[(t<<2)+r>>2]=n),b=(g=b+1|0)-o|0,C>>>0<2)break t;if((d=1+(I-b|0)|0)>>>0<=b>>>0)break t;for(n=-4&o,h=3&o,C=o-1>>>0<3,o=b;;){if(c=1,u=n,!C)for(;y=m(o,52)+r|0,s[y+(t=c<<2)>>2]=s[t+r>>2]>>>o,s[(p=t+4|0)+y>>2]=s[r+p>>2]>>>o,s[(p=t+8|0)+y>>2]=s[r+p>>2]>>>o,s[(t=t+12|0)+y>>2]=s[t+r>>2]>>>o,c=c+4|0,u=u-4|0;);if(t=h)for(;s[(u=c<<2)+(m(o,52)+r|0)>>2]=s[r+u>>2]>>>o,c=c+1|0,t=t-1|0;);if(!(d>>>0>(o=o+1|0)>>>0))break}}else b=(g=b+1|0)-o|0;if(s[l- -64>>2]=s[r+48>>2],t=s[r+44>>2],s[l+56>>2]=s[r+40>>2],s[l+60>>2]=t,t=s[r+36>>2],s[l+48>>2]=s[r+32>>2],s[l+52>>2]=t,t=s[r+28>>2],s[l+40>>2]=s[r+24>>2],s[l+44>>2]=t,t=s[r+20>>2],s[l+32>>2]=s[r+16>>2],s[l+36>>2]=t,t=s[r+4>>2],s[l+16>>2]=s[r>>2],s[l+20>>2]=t,t=s[r+12>>2],s[l+24>>2]=s[r+8>>2],s[l+28>>2]=t,v)for(R=g-I|0,p=0;;){if(E=1<<(C=I-(y=g-(n=A[1+(t=(p<<1)+w|0)|0])|0)|0),S=A[0|t],h=s[(T=(l+16|0)+(n<<2)|0)>>2],b>>>0<=C>>>0){if(B=s[(o=((0|(n=y+R|0))>1?n:1)<<2)+Q>>2],t=m(y,52)+r|0,s[l+128>>2]=s[t+48>>2],c=s[t+44>>2],s[l+120>>2]=s[t+40>>2],s[l+124>>2]=c,c=s[t+36>>2],s[l+112>>2]=s[t+32>>2],s[l+116>>2]=c,c=s[t+28>>2],s[l+104>>2]=s[t+24>>2],s[l+108>>2]=c,c=s[t+20>>2],s[l+96>>2]=s[t+16>>2],s[l+100>>2]=c,c=s[t+12>>2],s[l+88>>2]=s[t+8>>2],s[l+92>>2]=c,c=s[t+4>>2],s[l+80>>2]=s[t>>2],s[l+84>>2]=c,k=v-B|0,c=(h<<2)+_|0,!((0|n)<2)&&(o=s[o+(l+80|0)>>2])){if(u=7&o,t=y<<16&16711680|S|16777216,n=0,o-1>>>0>=7)for(d=-8&o;a[(f=(o=n<<2)+c|0)>>1]=t,a[f+2>>1]=t>>>16,a[(f=c+(4|o)|0)>>1]=t,a[f+2>>1]=t>>>16,a[(f=c+(8|o)|0)>>1]=t,a[f+2>>1]=t>>>16,a[(f=c+(12|o)|0)>>1]=t,a[f+2>>1]=t>>>16,a[(f=c+(16|o)|0)>>1]=t,a[f+2>>1]=t>>>16,a[(f=c+(20|o)|0)>>1]=t,a[f+2>>1]=t>>>16,a[(f=c+(24|o)|0)>>1]=t,a[f+2>>1]=t>>>16,a[(o=c+(28|o)|0)>>1]=t,a[o+2>>1]=t>>>16,n=n+8|0,d=d-8|0;);if(u)for(;a[(o=c+(n<<2)|0)>>1]=t,a[o+2>>1]=t>>>16,n=n+1|0,u=u-1|0;);}if(k)for(d=(B<<1)+w|0,u=0;;){for(t=g-(n=A[1+(B=d+(u<<1)|0)|0])|0,n=(o=s[(f=(l+80|0)+(n<<2)|0)>>2])+(1<<C-t)|0,t=t+y<<16&16711680|A[0|B]<<8|S|33554432;a[(B=c+(o<<2)|0)>>1]=t,a[B+2>>1]=t>>>16,n>>>0>(o=o+1|0)>>>0;);if(s[f>>2]=n,(0|k)==(0|(u=u+1|0)))break}t=h+E|0}else if(!(h>>>0>=(t=h+E|0)>>>0)){if(n=y<<16&16711680|S|16777216,C>>>0<=2)for(c=7&E;a[(o=(h<<2)+_|0)>>1]=n,a[o+2>>1]=n>>>16,h=h+1|0,c=c-1|0;);if(!(C>>>0<3))for(;a[(o=(h<<2)+_|0)>>1]=n,a[o+2>>1]=n>>>16,a[o+28>>1]=n,a[o+30>>1]=n>>>16,a[o+24>>1]=n,a[o+26>>1]=n>>>16,a[o+20>>1]=n,a[o+22>>1]=n>>>16,a[o+16>>1]=n,a[o+18>>1]=n>>>16,a[o+12>>1]=n,a[o+14>>1]=n>>>16,a[o+8>>1]=n,a[o+10>>1]=n>>>16,a[o+4>>1]=n,a[o+6>>1]=n>>>16,(0|(h=h+8|0))!=(0|t););}if(s[T>>2]=t,(0|v)==(0|(p=p+1|0)))break}s[e>>2]=I<<16|M|I|256}c=D}return x=l+448|0,c}function N(e,t,n,r,o,i){var a=0,l=0,c=0,u=0,d=0,f=0,p=0,h=0,g=0,m=0,y=0,v=0,b=0,C=0,I=0,E=0,x=0,B=0,w=0,S=0,D=0,T=0,k=0,Q=0,M=0;i&&(C=s[i+8>>2],I=s[i+4>>2]);e:{t:{n:if((c=(a=s[e+29532>>2])?1:5)>>>0>o>>>0)d=t;else for(y=e+29440|0,E=e+29376|0,x=i+10276|0,B=i+4116|0,w=i+6172|0,S=i+12|0,D=e+4120|0,T=e+6176|0,k=e+16|0,h=e+26668|0,Q=e+10280|0,v=e+29356|0,b=p=e+29480|0,d=t;;){if(407710288==(-16&(A[0|r]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24)))for(c=a?1:5;;){if(o>>>0<8)return-72;if((a=A[r+4|0]|A[r+5|0]<<8|A[r+6|0]<<16|A[r+7|0]<<24)>>>0>4294967287)return-14;if((a=o>>>0<(a=a+8|0)>>>0?-72:a)>>>0>4294967176)break t;if(c>>>0>(o=o-a|0)>>>0)break n;if(407710288!=(-16&(A[0|(r=r+a|0)]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24)))break}r:if(i){if(l=s[i+8>>2],a=s[i+4>>2],s[e+29428>>2]=0,s[e+29372>>2]=c,s[e+29416>>2]=0,s[e+29420>>2]=0,s[e+29588>>2]=s[e+29368>>2]!=(a+l|0),s[(a=v)+8>>2]=0,s[a+12>>2]=0,s[a>>2]=0,s[a+4>>2]=0,s[e+10280>>2]=201326604,s[e+29432>>2]=0,s[e+29436>>2]=0,s[e+29424>>2]=3,s[h+8>>2]=s[610],a=s[609],s[h>>2]=s[608],s[h+4>>2]=a,s[e+12>>2]=Q,s[e+8>>2]=D,s[e+4>>2]=T,s[e>>2]=k,s[e+29584>>2]=s[i+27304>>2],a=s[i+4>>2],s[e+29364>>2]=a,s[e+29360>>2]=a,a=a+s[i+8>>2]|0,s[e+29356>>2]=a,s[e+29368>>2]=a,s[i+27308>>2]){s[e+29432>>2]=1,s[e+29436>>2]=1,s[e+12>>2]=x,s[e+8>>2]=B,s[e+4>>2]=w,s[e>>2]=S,s[e+26668>>2]=s[i+26664>>2],s[e+26672>>2]=s[i+26668>>2],s[e+26676>>2]=s[i+26672>>2];break r}s[e+29432>>2]=0,s[e+29436>>2]=0}else{if((a=se(e,I,C))>>>0>4294967176)break t;a=s[v>>2]}if((0|a)!=(0|d)&&(s[e+29368>>2]=a,s[e+29356>>2]=d,l=s[e+29360>>2],s[e+29360>>2]=d,s[e+29364>>2]=(l-a|0)+d),((u=s[e+29532>>2])?5:9)>>>0>o>>>0){a=-72;break e}if(c=A[((a=u?1:5)+r|0)-1|0],(a=((f=s[3920+((l=c>>>6|0)<<2)>>2]+(a+s[3904+((3&c)<<2)>>2]|0)|0)+!(a=32&c)|0)+(!l&a>>>5)|0)>>>0>4294967176)break e;if(a+3>>>0>o>>>0){a=-72;break e}if((l=Y(E,r,a,u))>>>0>4294967176){a=l;break e}if(l){a=-72;break e}if(!(!(l=s[e+29404>>2])|(0|l)==s[e+29584>>2])){a=-32;break e}for(s[e+29408>>2]?(l=s[e+29536>>2],s[e+29540>>2]=!l,l||(s[e+29472>>2]=2048144761,s[e+29476>>2]=1640531534,s[e+29464>>2]=0,s[e+29468>>2]=0,s[e+29456>>2]=668265295,s[e+29460>>2]=-1028477379,s[e+29448>>2]=-1379879466,s[e+29452>>2]=1625958382,s[e+29440>>2]=0,s[e+29444>>2]=0,s[p+32>>2]=0,s[p+36>>2]=0,s[b+24>>2]=0,s[b+28>>2]=0,s[(l=p)+16>>2]=0,s[l+20>>2]=0,s[l+8>>2]=0,s[l+12>>2]=0,s[l>>2]=0,s[l+4>>2]=0)):s[e+29540>>2]=0,g=n+d|0,o=o-a|0,r=r+a|0,u=d;;){if(o>>>0<3){a=-72;break e}l=((m=A[0|r]|A[r+1|0]<<8)|A[r+2|0]<<16)>>>3|0,a=-20;r:{switch((c=f=m>>>1&3)-1|0){case 2:break e;case 0:break r}c=l}if((o=o-3|0)>>>0<c>>>0){a=-72;break e}r=r+3|0;r:{o:switch(0|f){case 0:if(g-u>>>0<c>>>0){a=-70;break e}if(!u){if(a=0,!c)break r;a=-74;break e}te(u,r,c),a=c;break r;case 1:if(l>>>0>g-u>>>0){a=-70;break e}if(!u){if(a=0,!l)break r;a=-74;break e}fe(u,A[0|r],l),a=l;break r;case 2:break o;default:break e}if((a=_(e,u,g-u|0,r,c))>>>0>4294967176)break e}if(s[e+29540>>2]&&V(y,u,a),o=o-c|0,r=r+c|0,u=a+u|0,1&m)break}if(c=a=s[e+29380>>2],-1!=(0|(l=s[e+29376>>2]))|-1!=(0|a)&&(a=-20,(0|(f=l))!=(0|(l=u-d|0))|l>>31!=(0|c)))break e;if(s[e+29408>>2]){if(a=-22,o>>>0<4)break e;if(!s[e+29536>>2]&&(A[0|r]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24)!=(0|q(y)))break e;o=o-4|0,r=r+4|0}if((a=u-d|0)>>>0>=4294967177)break e;if(d=a?u:d,M=1,n=n-a|0,!((c=(a=s[e+29532>>2])?1:5)>>>0<=o>>>0))break}a=-72,o||(a=d-t|0)}return a}return M&&-10==(0|a)?-72:a}function L(e,t,n,r,o,s){var l=0,c=0,u=0,d=0,p=0,h=0,g=0,m=0,y=0,b=0,C=0,I=0,E=0,x=0,B=0;d=-46;e:if(!(n>>>0>255||(m=s,u=31&(s=r),(63&s)>>>0>=32?(s=1<<u,u=0):(s=(1<<u)-1&1>>>32-u,u=1<<u),s=(c=u+((l=n+1|0)<<1)|0)>>>0<u>>>0?s+1|0:s,(u=c+8|0)>>>0<8&&(s=s+1|0),!s&u>>>0>m>>>0|s||(d=-44,r>>>0>12)))){C=e+4|0,m=(y=1<<r)-1|0,B=2+((n<<1)+o|0)|0;t:{n:if(l){if(b=1,x=1&l,I=65536<<r-1>>16,n)for(u=-2&l,d=m,s=0;65535!=(0|(p=f[(c=s<<1)+t>>1]))?b=(0|I)>p<<16>>16?b:0:(i[2+((d<<2)+C|0)|0]=s,d=d-1|0,p=1),a[o+c>>1]=p,65535==(0|(p=f[(c=(E=1|s)<<1)+t>>1]))?(i[2+((d<<2)+C|0)|0]=E,d=d-1|0,p=1):b=(0|I)>p<<16>>16?b:0,a[o+c>>1]=p,s=s+2|0,u=u-2|0;);else s=0,d=m;if(x&&(65535==(0|(p=f[(s<<1)+t>>1]))?(i[2+((d<<2)+C|0)|0]=s,d=d-1|0,p=1):b=(0|I)>p<<16>>16?b:0,a[(s<<1)+o>>1]=p),a[e+2>>1]=b,a[e>>1]=r,(0|d)!=(0|m)){if(!l)break t;for(c=3+((y>>>3)+(y>>>1)|0)|0,s=0,u=0;;){if(e=u,!((0|(u=(g=f[(u<<1)+t>>1])<<16>>16))<1)){if(g=1&(h=g>>>0>1?g:1),1!=(0|u))for(u=65534&h;;){for(i[2+((s<<2)+C|0)|0]=e;d>>>0<(s=m&s+c)>>>0;);for(i[2+((s<<2)+C|0)|0]=e;d>>>0<(s=m&s+c)>>>0;);if(!(u=u-2|0))break}if(g)for(i[2+((s<<2)+C|0)|0]=e;d>>>0<(s=m&s+c)>>>0;);}if(u=e+1|0,(0|e)==(0|n))break}if(d=-1,s)break e;break t}if(b=3+((y>>>3)+(y>>>1)|0)|0,!l)break n;for(I=0,s=0;;){if(e=s,x=a[(s<<1)+t>>1],s=g,i[0|(d=E=I+B|0)]=s,i[d+1|0]=s>>>8,i[d+2|0]=s>>>16,i[d+3|0]=s>>>24,i[d+4|0]=h,i[d+5|0]=h>>>8,i[d+6|0]=h>>>16,i[d+7|0]=h>>>24,!((0|x)<9)){if(p=7&(s=1+((u=x-9|0)>>>3|0)|0),d=8,u>>>0>=56)for(u=1073741816&s;s=g,i[0|(l=d+E|0)]=s,i[l+1|0]=s>>>8,i[l+2|0]=s>>>16,i[l+3|0]=s>>>24,c=h,i[l+4|0]=c,i[l+5|0]=c>>>8,i[l+6|0]=c>>>16,i[l+7|0]=c>>>24,i[l+56|0]=s,i[l+57|0]=s>>>8,i[l+58|0]=s>>>16,i[l+59|0]=s>>>24,i[l+60|0]=c,i[l+61|0]=c>>>8,i[l+62|0]=c>>>16,i[l+63|0]=c>>>24,i[l+48|0]=s,i[l+49|0]=s>>>8,i[l+50|0]=s>>>16,i[l+51|0]=s>>>24,i[l+52|0]=c,i[l+53|0]=c>>>8,i[l+54|0]=c>>>16,i[l+55|0]=c>>>24,i[l+40|0]=s,i[l+41|0]=s>>>8,i[l+42|0]=s>>>16,i[l+43|0]=s>>>24,i[l+44|0]=c,i[l+45|0]=c>>>8,i[l+46|0]=c>>>16,i[l+47|0]=c>>>24,i[l+32|0]=s,i[l+33|0]=s>>>8,i[l+34|0]=s>>>16,i[l+35|0]=s>>>24,i[l+36|0]=c,i[l+37|0]=c>>>8,i[l+38|0]=c>>>16,i[l+39|0]=c>>>24,i[l+24|0]=s,i[l+25|0]=s>>>8,i[l+26|0]=s>>>16,i[l+27|0]=s>>>24,i[l+28|0]=c,i[l+29|0]=c>>>8,i[l+30|0]=c>>>16,i[l+31|0]=c>>>24,i[l+16|0]=s,i[l+17|0]=s>>>8,i[l+18|0]=s>>>16,i[l+19|0]=s>>>24,i[l+20|0]=c,i[l+21|0]=c>>>8,i[l+22|0]=c>>>16,i[l+23|0]=c>>>24,i[l+8|0]=s,i[l+9|0]=s>>>8,i[l+10|0]=s>>>16,i[l+11|0]=s>>>24,i[l+12|0]=c,i[l+13|0]=c>>>8,i[l+14|0]=c>>>16,i[l+15|0]=c>>>24,d=d- -64|0,u=u-8|0;);if(p)for(;s=g,i[0|(u=d+E|0)]=s,i[u+1|0]=s>>>8,i[u+2|0]=s>>>16,i[u+3|0]=s>>>24,i[u+4|0]=h,i[u+5|0]=h>>>8,i[u+6|0]=h>>>16,i[u+7|0]=h>>>24,d=d+8|0,p=p-1|0;);}if(h=h+16843009|0,h=(s=g+16843009|0)>>>0<16843009?h+1|0:h,g=s,s=e+1|0,I=I+x|0,(0|e)==(0|n))break}}else a[e+2>>1]=1,a[e>>1]=r,b=3+((y>>>3)+(y>>>1)|0)|0;for(e=b<<1,s=0,d=0;i[2+(((d&m)<<2)+C|0)|0]=A[s+B|0],i[2+(((m&d+b)<<2)+C|0)|0]=A[(1|s)+B|0],d=m&e+d,y>>>0>(s=s+2|0)>>>0;);}for(n=y>>>0>1?y:1,t=r+1|0,d=0,s=0;e=(A[2+(r=(s<<2)+C|0)|0]<<1)+o|0,g=f[e>>1],a[e>>1]=g+1,e=t+(-32^v(g))|0,i[r+3|0]=e,a[r>>1]=(g<<e)-y,(0|n)!=(0|(s=s+1|0)););}return d}function U(e,t,n,r,o){var i=0,a=0,l=0;l=s[e+29428>>2],a=s[e+29372>>2],l-3>>>0>=2||(a=s[e+29372>>2],s[e+29424>>2]||(a=(i=o>>>0>1?o:1)>>>0<(a=s[e+29372>>2])>>>0?i:a)),i=-72;e:{t:{n:if((0|o)==(0|a)){n&&(0|(i=s[e+29356>>2]))!=(0|t)&&(s[e+29368>>2]=i,s[e+29356>>2]=t,a=s[e+29360>>2],s[e+29360>>2]=t,s[e+29364>>2]=(a-i|0)+t),i=-1;r:{o:{i:{a:{s:switch(0|l){case 0:if(i=1,!s[e+29532>>2]&&(i=5,407710288==(-16&(A[0|r]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24)))){te(e+160776|0,r,o),s[e+29428>>2]=6,s[e+29372>>2]=8-o;break e}if(o>>>0<i>>>0)return s[e+29528>>2]=-72,-72;if(t=A[(r+i|0)-1|0],i=((i=s[3920+((n=t>>>6|0)<<2)>>2]+(s[3904+((3&t)<<2)>>2]+i|0)|0)+!(t&=32)|0)+(!n&t>>>5)|0,s[e+29528>>2]=i,i>>>0>4294967176)break n;te(e+160776|0,r,o),s[e+29428>>2]=1,s[e+29372>>2]=i-o;break e;case 1:if(te((t=e+160776|0)+(s[e+29528>>2]-o|0)|0,r,o),(t=Y(e+29376|0,t,s[e+29528>>2],s[e+29532>>2]))>>>0>4294967176)return t;if(i=-72,t)break n;if((t=s[e+29404>>2])&&(i=-32,(0|t)!=s[e+29584>>2]))break n;s[e+29408>>2]?(t=s[e+29536>>2],s[e+29540>>2]=!t,t||(s[e+29440>>2]=0,s[e+29444>>2]=0,s[(t=e+29480|0)>>2]=0,s[t+4>>2]=0,s[(t=e+29472|0)>>2]=2048144761,s[t+4>>2]=1640531534,s[(t=e+29464|0)>>2]=0,s[t+4>>2]=0,s[(t=e+29456|0)>>2]=668265295,s[t+4>>2]=-1028477379,s[(t=e+29448|0)>>2]=-1379879466,s[t+4>>2]=1625958382,s[(t=e+29488|0)>>2]=0,s[t+4>>2]=0,s[(t=e+29496|0)>>2]=0,s[t+4>>2]=0,s[(t=e+29504|0)>>2]=0,s[t+4>>2]=0,s[(t=e+29512|0)>>2]=0,s[t+4>>2]=0)):s[e+29540>>2]=0;break t;case 2:t=((n=A[0|r]|A[r+1|0]<<8)|A[r+2|0]<<16)>>>3|0,i=-20;l:{switch((o=r=n>>>1&3)-1|0){case 0:break l;case 2:break n}o=t}if(p[e+29392>>2]<o>>>0)break n;if(n&=1,s[e+29564>>2]=t,s[e+29424>>2]=r,s[e+29372>>2]=o,o){s[e+29428>>2]=n?4:3;break e}if(n){if(!s[e+29408>>2])break a;s[e+29428>>2]=5,s[e+29372>>2]=4;break e}break t;case 3:case 4:i=-20;l:{c:switch(s[e+29424>>2]){case 2:i=_(e,t,n,r,o);break l;case 0:if(i=-70,n>>>0<o>>>0)break n;if(!t){if(i=-74,o)break n;break o}if(te(t,r,o),o>>>0<=4294967176)break o;return o;case 1:break c;default:break n}i=-70,(o=n)>>>0<(n=s[e+29564>>2])>>>0||(i=n?-74:0,t&&(fe(t,A[0|r],n),i=n))}if(a=0,s[e+29372>>2]=0,i>>>0>4294967176)break n;break r;case 6:break i;case 7:break a;case 5:break s;default:break n}if(s[e+29540>>2]&&(i=-22,(A[0|r]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24)!=(0|q(e+29440|0))))break n}i=0,s[e+29428>>2]=0,s[e+29372>>2]=0;break n}te(160784+(e-o|0)|0,r,o),s[e+29428>>2]=7,t=e,e=e+160780|0,s[t+29372>>2]=A[0|e]|A[e+1|0]<<8|A[e+2|0]<<16|A[e+3|0]<<24;break e}a=s[e+29372>>2]-o|0,s[e+29372>>2]=a,i=o}if((n=i)>>>0>p[e+29392>>2])return-20;if(i=s[e+29420>>2],i=(l=(o=n)+s[e+29416>>2]|0)>>>0<o>>>0?i+1|0:i,s[e+29416>>2]=l,s[e+29420>>2]=i,s[e+29540>>2]&&(V(e+29440|0,t,n),a=s[e+29372>>2]),s[e+29356>>2]=t+n,a)return n;if(4==s[e+29428>>2]){if(r=t=s[e+29380>>2],-1!=(0|(o=s[e+29376>>2]))|-1!=(0|t)&&(i=-20,(0|o)!=s[e+29416>>2]|(0|r)!=s[e+29420>>2]))break n;return s[e+29408>>2]?(s[e+29428>>2]=5,s[e+29372>>2]=4,n):(s[e+29428>>2]=0,s[e+29372>>2]=0,n)}return s[e+29372>>2]=3,s[e+29428>>2]=2,n}return i}s[e+29428>>2]=2,s[e+29372>>2]=3}return 0}function G(e,t,n,r,o,l,c){var u,d,p,h,g=0,m=0,y=0,b=0,C=0,I=0,E=0,x=0,B=0,w=0,_=0,S=0;h=c+106|0,d=e+8|0,E=1,p=(u=1<<l)-1|0;e:{t:{if(-1!=(0|n)){if(m=1&(y=n+1|0),w=65536<<l-1>>16,n)for(I=-2&y,y=p;65535!=(0|(C=f[(B=g<<1)+t>>1]))?E=C<<16>>16<(0|w)?E:0:(s[4+((y<<3)+d|0)>>2]=g,y=y-1|0,C=1),a[c+B>>1]=C,65535==(0|(C=f[(_=(B=1|g)<<1)+t>>1]))?(s[4+((y<<3)+d|0)>>2]=B,y=y-1|0,C=1):E=C<<16>>16<(0|w)?E:0,a[c+_>>1]=C,g=g+2|0,I=I-2|0;);else y=p;if(m&&(65535==(0|(C=f[(g<<1)+t>>1]))?(s[4+((y<<3)+d|0)>>2]=g,y=y-1|0,C=1):E=C<<16>>16<(0|w)?E:0,a[(g<<1)+c>>1]=C),s[e+4>>2]=l,s[e>>2]=E,_=u>>>3|0,(0|y)!=(0|p))break t;for(E=0,g=0;;){if(w=g,B=a[(g<<1)+t>>1],e=x,i[0|(y=S=E+h|0)]=e,i[y+1|0]=e>>>8,i[y+2|0]=e>>>16,i[y+3|0]=e>>>24,i[y+4|0]=b,i[y+5|0]=b>>>8,i[y+6|0]=b>>>16,i[y+7|0]=b>>>24,!((0|B)<9)){if(C=7&(g=1+((e=B-9|0)>>>3|0)|0),y=8,e>>>0>=56)for(I=1073741816&g;e=x,i[0|(m=y+S|0)]=e,i[m+1|0]=e>>>8,i[m+2|0]=e>>>16,i[m+3|0]=e>>>24,e=b,i[m+4|0]=e,i[m+5|0]=e>>>8,i[m+6|0]=e>>>16,i[m+7|0]=e>>>24,g=x,i[m+56|0]=g,i[m+57|0]=g>>>8,i[m+58|0]=g>>>16,i[m+59|0]=g>>>24,i[m+60|0]=e,i[m+61|0]=e>>>8,i[m+62|0]=e>>>16,i[m+63|0]=e>>>24,i[m+48|0]=g,i[m+49|0]=g>>>8,i[m+50|0]=g>>>16,i[m+51|0]=g>>>24,i[m+52|0]=e,i[m+53|0]=e>>>8,i[m+54|0]=e>>>16,i[m+55|0]=e>>>24,i[m+40|0]=g,i[m+41|0]=g>>>8,i[m+42|0]=g>>>16,i[m+43|0]=g>>>24,i[m+44|0]=e,i[m+45|0]=e>>>8,i[m+46|0]=e>>>16,i[m+47|0]=e>>>24,i[m+32|0]=g,i[m+33|0]=g>>>8,i[m+34|0]=g>>>16,i[m+35|0]=g>>>24,i[m+36|0]=e,i[m+37|0]=e>>>8,i[m+38|0]=e>>>16,i[m+39|0]=e>>>24,i[m+24|0]=g,i[m+25|0]=g>>>8,i[m+26|0]=g>>>16,i[m+27|0]=g>>>24,i[m+28|0]=e,i[m+29|0]=e>>>8,i[m+30|0]=e>>>16,i[m+31|0]=e>>>24,i[m+16|0]=g,i[m+17|0]=g>>>8,i[m+18|0]=g>>>16,i[m+19|0]=g>>>24,i[m+20|0]=e,i[m+21|0]=e>>>8,i[m+22|0]=e>>>16,i[m+23|0]=e>>>24,i[m+8|0]=g,i[m+9|0]=g>>>8,i[m+10|0]=g>>>16,i[m+11|0]=g>>>24,i[m+12|0]=e,i[m+13|0]=e>>>8,i[m+14|0]=e>>>16,i[m+15|0]=e>>>24,y=y- -64|0,I=I-8|0;);if(C)for(;e=x,i[0|(g=y+S|0)]=e,i[g+1|0]=e>>>8,i[g+2|0]=e>>>16,i[g+3|0]=e>>>24,i[g+4|0]=b,i[g+5|0]=b>>>8,i[g+6|0]=b>>>16,i[g+7|0]=b>>>24,y=y+8|0,C=C-1|0;);}if(b=b+16843009|0,b=(e=x+16843009|0)>>>0<16843009?b+1|0:b,x=e,g=w+1|0,E=E+B|0,(0|n)==(0|w))break}e=3+(_+(u>>>1|0)|0)|0}else s[e+4>>2]=l,s[e>>2]=1,e=3+((u>>>3)+(u>>>1)|0)|0;for(t=e<<1,g=0,y=0;s[4+(((y&p)<<3)+d|0)>>2]=A[g+h|0],s[4+(((p&e+y)<<3)+d|0)>>2]=A[(1|g)+h|0],y=p&t+y,u>>>0>(g=g+2|0)>>>0;);break e}for(x=3+(_+(u>>>1|0)|0)|0,g=0,I=0;;){if(!((0|(b=a[((e=I)<<1)+t>>1]))<1)){if(1!=(0|b))for(I=-2&b;;){for(s[4+((g<<3)+d|0)>>2]=e;y>>>0<(g=p&g+x)>>>0;);for(s[4+((g<<3)+d|0)>>2]=e;y>>>0<(g=p&g+x)>>>0;);if(!(I=I-2|0))break}if(1&b)for(s[4+((g<<3)+d|0)>>2]=e;y>>>0<(g=p&g+x)>>>0;);}if(I=e+1|0,(0|e)==(0|n))break}}for(x=u>>>0>1?u:1,l=l+1|0,t=0;y=s[4+(e=(t<<3)+d|0)>>2],n=f[(b=(y<<1)+c|0)>>1],a[b>>1]=n+1,b=l+(-32^v(n))|0,i[e+3|0]=b,a[e>>1]=(n<<b)-u,n=y<<2,i[e+2|0]=s[n+o>>2],s[e+4>>2]=s[n+r>>2],(0|x)!=(0|(t=t+1|0)););}function j(e){var t,n=0,r=0,o=0;x=t=x-304|0;e:if(Wt(e,76)){t:{n:{r:{o:{i:{a:{s:{l:{c:{u:{d:{A:{f:{p:{h:{g:{m:{y:{v:{b:{C:{I:{E:switch(((r=(0|(r=s[e>>2]))!=s[e+4>>2]?i[0|r]:0)<<24>>24)-65|0){case 19:break e;case 46:break c;case 45:break u;case 56:break d;case 55:break A;case 44:break f;case 43:break p;case 41:break h;case 40:break g;case 51:break m;case 50:break y;case 39:break v;case 32:break b;case 34:break C;case 33:break I;case 54:break E;case 20:break n;case 3:break r;case 0:break o;case 30:break i;case 36:break a;case 35:break s;case 37:break l;default:break t}s[e>>2]=s[e>>2]+1,n=on(t+296|0,6283),r=s[n+4>>2],s[t>>2]=s[n>>2],s[t+4>>2]=r,n=Et(e,t);break e}if(r=on(t+288|0,6291),o=s[r+4>>2],s[t+16>>2]=s[r>>2],s[t+20>>2]=o,Je(e,t+16|0)){s[t+144>>2]=0,n=yn(e,t+144|0);break e}if(r=on(t+280|0,6295),o=s[r+4>>2],s[t+8>>2]=s[r>>2],s[t+12>>2]=o,!Je(e,t+8|0))break e;s[t+144>>2]=1,n=yn(e,t+144|0);break e}s[e>>2]=s[e>>2]+1,n=on(t+272|0,6299),r=s[n+4>>2],s[t+24>>2]=s[n>>2],s[t+28>>2]=r,n=Et(e,t+24|0);break e}s[e>>2]=s[e>>2]+1,n=on(t+264|0,6304),r=s[n+4>>2],s[t+32>>2]=s[n>>2],s[t+36>>2]=r,n=Et(e,t+32|0);break e}s[e>>2]=s[e>>2]+1,n=on(t+256|0,6316),r=s[n+4>>2],s[t+40>>2]=s[n>>2],s[t+44>>2]=r,n=Et(e,t+40|0);break e}s[e>>2]=s[e>>2]+1,n=on(t+248|0,6330),r=s[n+4>>2],s[t+48>>2]=s[n>>2],s[t+52>>2]=r,n=Et(e,t+48|0);break e}s[e>>2]=s[e>>2]+1,n=on(t+240|0,6336),r=s[n+4>>2],s[t+56>>2]=s[n>>2],s[t+60>>2]=r,n=Et(e,t+56|0);break e}s[e>>2]=s[e>>2]+1,n=on(t+232|0,6351),r=s[n+4>>2],s[t+64>>2]=s[n>>2],s[t+68>>2]=r,n=Et(e,t- -64|0);break e}s[e>>2]=s[e>>2]+1,n=on(t+224|0,6352),r=s[n+4>>2],s[t+72>>2]=s[n>>2],s[t+76>>2]=r,n=Et(e,t+72|0);break e}s[e>>2]=s[e>>2]+1,n=on(t+216|0,6354),r=s[n+4>>2],s[t+80>>2]=s[n>>2],s[t+84>>2]=r,n=Et(e,t+80|0);break e}s[e>>2]=s[e>>2]+1,n=on(t+208|0,6356),r=s[n+4>>2],s[t+88>>2]=s[n>>2],s[t+92>>2]=r,n=Et(e,t+88|0);break e}s[e>>2]=s[e>>2]+1,n=on(t+200|0,6359),r=s[n+4>>2],s[t+96>>2]=s[n>>2],s[t+100>>2]=r,n=Et(e,t+96|0);break e}s[e>>2]=s[e>>2]+1,n=on(t+192|0,6362),r=s[n+4>>2],s[t+104>>2]=s[n>>2],s[t+108>>2]=r,n=Et(e,t+104|0);break e}s[e>>2]=s[e>>2]+1,n=on(t+184|0,6366),r=s[n+4>>2],s[t+112>>2]=s[n>>2],s[t+116>>2]=r,n=Et(e,t+112|0);break e}s[e>>2]=s[e>>2]+1,n=on(t+176|0,6375),r=s[n+4>>2],s[t+120>>2]=s[n>>2],s[t+124>>2]=r,n=Et(e,t+120|0);break e}s[e>>2]=s[e>>2]+1,n=function(e){var t,n=0,r=0,o=0,a=0;x=t=x-16|0,n=0;l:if(!(s[e+4>>2]-s[e>>2]>>>0<9)){r=t+8|0,n=s[e>>2],s[r+4>>2]=n+8,s[r>>2]=n,n=s[r>>2],a=s[r+4>>2];c:{for(;;){if((0|n)==(0|a))break c;if(o=i[0|n],n=n+1|0,!(o-48>>>0<10|(32|o)-97>>>0<6))break}n=0;break l}s[e>>2]=s[e>>2]+8,n=0,Wt(e,69)&&(n=function(e,t){var n,r,o;return x=r=x-16|0,n=ct(e,16),o=s[t+4>>2],e=s[t>>2],s[r>>2]=e,s[r+4>>2]=o,s[r+8>>2]=e,s[r+12>>2]=o,i[n+7|0]=1,i[n+6|0]=1,i[n+5|0]=1,i[n+4|0]=70,s[n>>2]=5508,s[n>>2]=6640,e=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=e,x=r+16|0,n}(e+416|0,r))}return x=t+16|0,n}(e);break e}s[e>>2]=s[e>>2]+1,n=function(e){var t,n=0,r=0,o=0,a=0;x=t=x-16|0,n=0;s:if(!(s[e+4>>2]-s[e>>2]>>>0<17)){r=t+8|0,n=s[e>>2],s[r+4>>2]=n+16,s[r>>2]=n,n=s[r>>2],a=s[r+4>>2];l:{for(;;){if((0|n)==(0|a))break l;if(o=i[0|n],n=n+1|0,!(o-48>>>0<10|(32|o)-97>>>0<6))break}n=0;break s}s[e>>2]=s[e>>2]+16,n=0,Wt(e,69)&&(n=function(e,t){var n,r,o;return x=r=x-16|0,n=ct(e,16),o=s[t+4>>2],e=s[t>>2],s[r>>2]=e,s[r+4>>2]=o,s[r+8>>2]=e,s[r+12>>2]=o,i[n+7|0]=1,i[n+6|0]=1,i[n+5|0]=1,i[n+4|0]=71,s[n>>2]=5508,s[n>>2]=6756,e=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=e,x=r+16|0,n}(e+416|0,r))}return x=t+16|0,n}(e);break e}s[e>>2]=s[e>>2]+1,n=function(e){var t,n=0,r=0,o=0,a=0;x=t=x-16|0,n=0;a:if(!(s[e+4>>2]-s[e>>2]>>>0<33)){r=t+8|0,n=s[e>>2],s[r+4>>2]=n+32,s[r>>2]=n,n=s[r>>2],a=s[r+4>>2];s:{for(;;){if((0|n)==(0|a))break s;if(o=i[0|n],n=n+1|0,!(o-48>>>0<10|(32|o)-97>>>0<6))break}n=0;break a}s[e>>2]=s[e>>2]+32,n=0,Wt(e,69)&&(n=function(e,t){var n,r,o;return x=r=x-16|0,n=ct(e,16),o=s[t+4>>2],e=s[t>>2],s[r>>2]=e,s[r+4>>2]=o,s[r+8>>2]=e,s[r+12>>2]=o,i[n+7|0]=1,i[n+6|0]=1,i[n+5|0]=1,i[n+4|0]=72,s[n>>2]=5508,s[n>>2]=6872,e=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=e,x=r+16|0,n}(e+416|0,r))}return x=t+16|0,n}(e);break e}if(n=on(t+168|0,5024),r=s[n+4>>2],s[t+128>>2]=s[n>>2],s[t+132>>2]=r,Je(e,t+128|0)&&(n=ie(e))&&Wt(e,69))break e;n=0;break e}if(r=R(e),s[t+144>>2]=r,!r)break e;if(!Wt(e,69))break e;n=function(e,t){return e=ct(e,12),t=s[t>>2],i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=66,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=6992,e}(e+416|0,t+144|0);break e}if(r=on(t+160|0,6393),o=s[r+4>>2],s[t+136>>2]=s[r>>2],s[t+140>>2]=o,!Je(e,t+136|0))break e;n=Nn(e,6397);break e}if(r=s[e>>2],108!=(255&(r=s[e+4>>2]-r>>>0>1?A[r+1|0]:0)))break e;if(r=$(e,0),s[t+144>>2]=r,!r)break e;if(!Wt(e,69))break e;n=function(e,t){return e=ct(e,12),t=s[t>>2],i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=67,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=8044,e}(e+416|0,t+144|0);break e}r=R(e),s[t+156>>2]=r,r&&(We(t+144|0,e,0),s[t+144>>2]!=s[t+148>>2]&&Wt(e,69)&&(n=function(e,t,n){var r,o;return x=r=x-16|0,o=ct(e,20),t=s[t>>2],e=s[n+4>>2],n=s[n>>2],s[r>>2]=n,s[r+4>>2]=e,s[r+8>>2]=n,s[r+12>>2]=e,e=function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=68,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=8160,t=s[n+4>>2],s[e+12>>2]=s[n>>2],s[e+16>>2]=t,e}(o,t,r),x=r+16|0,e}(e+416|0,t+156|0,t+144|0)))}return x=t+304|0,n}function z(e){var t=0,n=0,r=0,o=0,i=0,a=0,l=0,c=0,u=0;e:if(e|=0){i=(r=e-8|0)+(e=-8&(t=s[e-4>>2]))|0;t:if(!(1&t)){if(!(3&t))break e;if((r=r-(t=s[r>>2])|0)>>>0<p[4046])break e;if(e=e+t|0,s[4047]==(0|r)){if(3==(3&(t=s[i+4>>2])))return s[4044]=e,s[i+4>>2]=-2&t,s[r+4>>2]=1|e,void(s[e+r>>2]=e)}else{if(t>>>0<=255){if(o=s[r+8>>2],t=t>>>3|0,(0|(n=s[r+12>>2]))==(0|o)){c=16168,u=s[4042]&sn(t),s[c>>2]=u;break t}s[o+12>>2]=n,s[n+8>>2]=o;break t}if(l=s[r+24>>2],(0|r)==(0|(t=s[r+12>>2])))if((n=s[(o=r+20|0)>>2])||(n=s[(o=r+16|0)>>2])){for(;a=o,(n=s[(o=(t=n)+20|0)>>2])||(o=t+16|0,n=s[t+16>>2]););s[a>>2]=0}else t=0;else n=s[r+8>>2],s[n+12>>2]=t,s[t+8>>2]=n;if(!l)break t;o=s[r+28>>2];n:{if(s[(n=16472+(o<<2)|0)>>2]==(0|r)){if(s[n>>2]=t,t)break n;c=16172,u=s[4043]&sn(o),s[c>>2]=u;break t}if(s[l+(s[l+16>>2]==(0|r)?16:20)>>2]=t,!t)break t}if(s[t+24>>2]=l,(n=s[r+16>>2])&&(s[t+16>>2]=n,s[n+24>>2]=t),!(n=s[r+20>>2]))break t;s[t+20>>2]=n,s[n+24>>2]=t}}if(!(r>>>0>=i>>>0)&&1&(t=s[i+4>>2])){t:{if(!(2&t)){if(s[4048]==(0|i)){if(s[4048]=r,e=s[4045]+e|0,s[4045]=e,s[r+4>>2]=1|e,s[4047]!=(0|r))break e;return s[4044]=0,void(s[4047]=0)}if(s[4047]==(0|i))return s[4047]=r,e=s[4044]+e|0,s[4044]=e,s[r+4>>2]=1|e,void(s[e+r>>2]=e);e=(-8&t)+e|0;n:if(t>>>0<=255){if(t=t>>>3|0,(0|(n=s[i+8>>2]))==(0|(o=s[i+12>>2]))){c=16168,u=s[4042]&sn(t),s[c>>2]=u;break n}s[n+12>>2]=o,s[o+8>>2]=n}else{if(l=s[i+24>>2],(0|i)==(0|(t=s[i+12>>2])))if((n=s[(o=i+20|0)>>2])||(n=s[(o=i+16|0)>>2])){for(;a=o,(n=s[(o=(t=n)+20|0)>>2])||(o=t+16|0,n=s[t+16>>2]););s[a>>2]=0}else t=0;else n=s[i+8>>2],s[n+12>>2]=t,s[t+8>>2]=n;if(l){o=s[i+28>>2];r:{if(s[(n=16472+(o<<2)|0)>>2]==(0|i)){if(s[n>>2]=t,t)break r;c=16172,u=s[4043]&sn(o),s[c>>2]=u;break n}if(s[l+(s[l+16>>2]==(0|i)?16:20)>>2]=t,!t)break n}s[t+24>>2]=l,(n=s[i+16>>2])&&(s[t+16>>2]=n,s[n+24>>2]=t),(n=s[i+20>>2])&&(s[t+20>>2]=n,s[n+24>>2]=t)}}if(s[r+4>>2]=1|e,s[e+r>>2]=e,s[4047]!=(0|r))break t;return void(s[4044]=e)}s[i+4>>2]=-2&t,s[r+4>>2]=1|e,s[e+r>>2]=e}if(e>>>0<=255)return t=16208+((e=e>>>3|0)<<3)|0,(n=s[4042])&(e=1<<e)?e=s[t+8>>2]:(s[4042]=e|n,e=t),s[t+8>>2]=r,s[e+12>>2]=r,s[r+12>>2]=t,void(s[r+8>>2]=e);o=31,s[r+16>>2]=0,s[r+20>>2]=0,e>>>0<=16777215&&(t=e>>>8|0,t<<=a=t+1048320>>>16&8,o=28+((t=((t<<=o=t+520192>>>16&4)<<(n=t+245760>>>16&2)>>>15|0)-(n|o|a)|0)<<1|e>>>t+21&1)|0),s[r+28>>2]=o,a=16472+(o<<2)|0;t:{n:{if((n=s[4043])&(t=1<<o)){for(o=e<<(31==(0|o)?0:25-(o>>>1|0)),t=s[a>>2];;){if(n=t,(-8&s[t+4>>2])==(0|e))break n;if(t=o>>>29|0,o<<=1,!(t=s[16+(a=n+(4&t)|0)>>2]))break}s[a+16>>2]=r,s[r+24>>2]=n}else s[4043]=t|n,s[a>>2]=r,s[r+24>>2]=a;s[r+12>>2]=r,s[r+8>>2]=r;break t}e=s[n+8>>2],s[e+12>>2]=r,s[n+8>>2]=r,s[r+24>>2]=0,s[r+12>>2]=n,s[r+8>>2]=e}e=s[4050]-1|0,s[4050]=e||-1}}}function H(e,t){var n,r=0,o=0,i=0,a=0,l=0,c=0,u=0;n=e+t|0;e:{t:if(!(1&(r=s[e+4>>2]))){if(!(3&r))break e;if(t=(r=s[e>>2])+t|0,(0|(e=e-r|0))==s[4047]){if(3==(3&(r=s[n+4>>2])))return s[4044]=t,s[n+4>>2]=-2&r,s[e+4>>2]=1|t,void(s[n>>2]=t)}else{if(r>>>0<=255){if(i=s[e+8>>2],r=r>>>3|0,(0|(o=s[e+12>>2]))==(0|i)){c=16168,u=s[4042]&sn(r),s[c>>2]=u;break t}s[i+12>>2]=o,s[o+8>>2]=i;break t}if(l=s[e+24>>2],(0|(r=s[e+12>>2]))==(0|e))if((o=s[(i=e+20|0)>>2])||(o=s[(i=e+16|0)>>2])){for(;a=i,(o=s[(i=(r=o)+20|0)>>2])||(i=r+16|0,o=s[r+16>>2]););s[a>>2]=0}else r=0;else o=s[e+8>>2],s[o+12>>2]=r,s[r+8>>2]=o;if(!l)break t;i=s[e+28>>2];n:{if(s[(o=16472+(i<<2)|0)>>2]==(0|e)){if(s[o>>2]=r,r)break n;c=16172,u=s[4043]&sn(i),s[c>>2]=u;break t}if(s[l+(s[l+16>>2]==(0|e)?16:20)>>2]=r,!r)break t}if(s[r+24>>2]=l,(o=s[e+16>>2])&&(s[r+16>>2]=o,s[o+24>>2]=r),!(o=s[e+20>>2]))break t;s[r+20>>2]=o,s[o+24>>2]=r}}t:{if(!(2&(r=s[n+4>>2]))){if(s[4048]==(0|n)){if(s[4048]=e,t=s[4045]+t|0,s[4045]=t,s[e+4>>2]=1|t,s[4047]!=(0|e))break e;return s[4044]=0,void(s[4047]=0)}if(s[4047]==(0|n))return s[4047]=e,t=s[4044]+t|0,s[4044]=t,s[e+4>>2]=1|t,void(s[e+t>>2]=t);t=(-8&r)+t|0;n:if(r>>>0<=255){if(i=s[n+8>>2],r=r>>>3|0,(0|(o=s[n+12>>2]))==(0|i)){c=16168,u=s[4042]&sn(r),s[c>>2]=u;break n}s[i+12>>2]=o,s[o+8>>2]=i}else{if(l=s[n+24>>2],(0|n)==(0|(r=s[n+12>>2])))if((i=s[(o=n+20|0)>>2])||(i=s[(o=n+16|0)>>2])){for(;a=o,(i=s[(o=(r=i)+20|0)>>2])||(o=r+16|0,i=s[r+16>>2]););s[a>>2]=0}else r=0;else o=s[n+8>>2],s[o+12>>2]=r,s[r+8>>2]=o;if(l){i=s[n+28>>2];r:{if(s[(o=16472+(i<<2)|0)>>2]==(0|n)){if(s[o>>2]=r,r)break r;c=16172,u=s[4043]&sn(i),s[c>>2]=u;break n}if(s[l+(s[l+16>>2]==(0|n)?16:20)>>2]=r,!r)break n}s[r+24>>2]=l,(o=s[n+16>>2])&&(s[r+16>>2]=o,s[o+24>>2]=r),(o=s[n+20>>2])&&(s[r+20>>2]=o,s[o+24>>2]=r)}}if(s[e+4>>2]=1|t,s[e+t>>2]=t,s[4047]!=(0|e))break t;return void(s[4044]=t)}s[n+4>>2]=-2&r,s[e+4>>2]=1|t,s[e+t>>2]=t}if(t>>>0<=255)return r=16208+((t=t>>>3|0)<<3)|0,(o=s[4042])&(t=1<<t)?t=s[r+8>>2]:(s[4042]=t|o,t=r),s[r+8>>2]=e,s[t+12>>2]=e,s[e+12>>2]=r,void(s[e+8>>2]=t);i=31,s[e+16>>2]=0,s[e+20>>2]=0,t>>>0<=16777215&&(r=t>>>8|0,r<<=a=r+1048320>>>16&8,i=28+((r=((r<<=i=r+520192>>>16&4)<<(o=r+245760>>>16&2)>>>15|0)-(o|i|a)|0)<<1|t>>>r+21&1)|0),s[e+28>>2]=i,a=16472+(i<<2)|0;t:{if((o=s[4043])&(r=1<<i)){for(i=t<<(31==(0|i)?0:25-(i>>>1|0)),r=s[a>>2];;){if(o=r,(-8&s[r+4>>2])==(0|t))break t;if(r=i>>>29|0,i<<=1,!(r=s[16+(a=o+(4&r)|0)>>2]))break}s[a+16>>2]=e,s[e+24>>2]=o}else s[4043]=r|o,s[a>>2]=e,s[e+24>>2]=a;return s[e+12>>2]=e,void(s[e+8>>2]=e)}t=s[o+8>>2],s[t+12>>2]=e,s[o+8>>2]=e,s[e+24>>2]=0,s[e+12>>2]=o,s[e+8>>2]=t}}function V(e,t,n){var r=0,o=0,i=0,a=0,l=0,c=0,u=0,d=0,f=0,p=0,h=0,g=0,m=0;o=s[e+4>>2],l=n+s[e>>2]|0,s[e>>2]=l,s[e+4>>2]=n>>>0>l>>>0?o+1|0:o;e:{t:if((i=(r=s[e+72>>2])+n|0)>>>0<=31){if(!t)break t;te(40+(e+r|0)|0,t,n),i=s[e+72>>2]+n|0}else{if(u=t+n|0,r&&(te(r+(e+40|0)|0,t,32-r|0),l=s[e+72>>2],s[e+72>>2]=0,i=s[e+12>>2],n=s[e+8>>2],c=Tn(A[e+40|0]|A[e+41|0]<<8|A[e+42|0]<<16|A[e+43|0]<<24,A[e+44|0]|A[e+45|0]<<8|A[e+46|0]<<16|A[e+47|0]<<24,668265295,-1028477379),o=w+i|0,g=e,m=Tn(Se(r=n+c|0,r>>>0<c>>>0?o+1|0:o,31),w,-2048144761,-1640531535),s[g+8>>2]=m,s[e+12>>2]=w,r=s[e+20>>2],n=s[e+16>>2],o=Tn(A[e+48|0]|A[e+49|0]<<8|A[e+50|0]<<16|A[e+51|0]<<24,A[e+52|0]|A[e+53|0]<<8|A[e+54|0]<<16|A[e+55|0]<<24,668265295,-1028477379),r=w+r|0,g=e,m=Tn(Se(i=n+o|0,o>>>0>i>>>0?r+1|0:r,31),w,-2048144761,-1640531535),s[g+16>>2]=m,s[e+20>>2]=w,r=s[e+28>>2],n=s[e+24>>2],o=Tn(A[e+56|0]|A[e+57|0]<<8|A[e+58|0]<<16|A[e+59|0]<<24,A[e+60|0]|A[e+61|0]<<8|A[e+62|0]<<16|A[e+63|0]<<24,668265295,-1028477379),r=w+r|0,g=e,m=Tn(Se(i=n+o|0,o>>>0>i>>>0?r+1|0:r,31),w,-2048144761,-1640531535),s[g+24>>2]=m,s[e+28>>2]=w,i=s[e+36>>2],n=s[e+32>>2],c=Tn(A[0|(r=e- -64|0)]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24,A[r+4|0]|A[r+5|0]<<8|A[r+6|0]<<16|A[r+7|0]<<24,668265295,-1028477379),o=w+i|0,g=e,m=Tn(Se(r=n+c|0,r>>>0<c>>>0?o+1|0:o,31),w,-2048144761,-1640531535),s[g+32>>2]=m,s[e+36>>2]=w,t=32+(t-l|0)|0),u>>>0>=t+32>>>0){for(h=u-32|0,n=s[e+32>>2],c=s[e+36>>2],r=s[e+24>>2],d=s[e+28>>2],i=s[e+16>>2],f=s[e+20>>2],l=s[e+8>>2],p=s[e+12>>2];a=Tn(A[t+24|0]|A[t+25|0]<<8|A[t+26|0]<<16|A[t+27|0]<<24,A[t+28|0]|A[t+29|0]<<8|A[t+30|0]<<16|A[t+31|0]<<24,668265295,-1028477379)+n|0,o=c+w|0,n=Tn(Se(a,n>>>0>a>>>0?o+1|0:o,31),w,-2048144761,-1640531535),c=w,a=Tn(A[t+16|0]|A[t+17|0]<<8|A[t+18|0]<<16|A[t+19|0]<<24,A[t+20|0]|A[t+21|0]<<8|A[t+22|0]<<16|A[t+23|0]<<24,668265295,-1028477379)+r|0,o=d+w|0,r=Tn(Se(a,r>>>0>a>>>0?o+1|0:o,31),w,-2048144761,-1640531535),d=w,a=Tn(A[t+8|0]|A[t+9|0]<<8|A[t+10|0]<<16|A[t+11|0]<<24,A[t+12|0]|A[t+13|0]<<8|A[t+14|0]<<16|A[t+15|0]<<24,668265295,-1028477379)+i|0,o=f+w|0,i=Tn(Se(a,i>>>0>a>>>0?o+1|0:o,31),w,-2048144761,-1640531535),f=w,a=Tn(A[0|t]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24,A[t+4|0]|A[t+5|0]<<8|A[t+6|0]<<16|A[t+7|0]<<24,668265295,-1028477379)+l|0,o=p+w|0,l=Tn(Se(a,a>>>0<l>>>0?o+1|0:o,31),w,-2048144761,-1640531535),p=w,h>>>0>=(t=t+32|0)>>>0;);s[e+32>>2]=n,s[e+36>>2]=c,s[e+24>>2]=r,s[e+28>>2]=d,s[e+16>>2]=i,s[e+20>>2]=f,s[e+8>>2]=l,s[e+12>>2]=p}if(t>>>0>=u>>>0)break e;te(e+40|0,t,i=u-t|0)}s[e+72>>2]=i}}function q(e){var t,n,r,o=0,i=0,a=0,l=0,c=0,u=0,d=0,f=0,p=0,h=0,g=0,m=0,y=0;if(t=(a=e+40|0)+(n=s[e+72>>2])|0,r=o=s[e+4>>2],!o&(l=s[e>>2])>>>0>=32|o?(g=o=s[e+20>>2],i=Se(f=s[e+16>>2],o,7),c=w,m=o=s[e+12>>2],u=i,i=Se(p=s[e+8>>2],o,1),o=w+c|0,o=i>>>0>(u=u+i|0)>>>0?o+1|0:o,c=u,y=i=s[e+28>>2],i=Se(h=s[e+24>>2],i,12),o=w+o|0,o=i>>>0>(c=i+c|0)>>>0?o+1|0:o,u=i=s[e+36>>2],d=(d=c)+(i=Se(c=s[e+32>>2],i,18))|0,o=w+o|0,i=(o=Tn(Tn(Se(Tn(p,m,668265295,-1028477379),w,31),w,-2048144761,-1640531535)^d,w^(i>>>0>d>>>0?o+1:o),-2048144761,-1640531535))-1028477341|0,o=w-((o>>>0<1028477341)+2048144776|0)|0,i=(o=Tn(Tn(Se(Tn(f,g,668265295,-1028477379),w,31),w,-2048144761,-1640531535)^i,w^o,-2048144761,-1640531535))-1028477341|0,o=w-((o>>>0<1028477341)+2048144776|0)|0,i=(o=Tn(Tn(Se(Tn(h,y,668265295,-1028477379),w,31),w,-2048144761,-1640531535)^i,w^o,-2048144761,-1640531535))-1028477341|0,o=w-((o>>>0<1028477341)+2048144776|0)|0,i=(o=Tn(Tn(Se(Tn(c,u,668265295,-1028477379),w,31),w,-2048144761,-1640531535)^i,w^o,-2048144761,-1640531535))-1028477341|0,o=w-((o>>>0<1028477341)+2048144776|0)|0):(o=s[e+28>>2]+668265263|0,o=(i=s[e+24>>2]+374761413|0)>>>0<374761413?o+1|0:o),o=o+r|0,o=(i=i+l|0)>>>0<l>>>0?o+1|0:o,c=i,(i=e+48|0)>>>0>t>>>0)l=a;else for(;c=(l=Tn(Se(Tn(Se(Tn(A[0|a]|A[a+1|0]<<8|A[a+2|0]<<16|A[a+3|0]<<24,A[a+4|0]|A[a+5|0]<<8|A[a+6|0]<<16|A[a+7|0]<<24,668265295,-1028477379),w,31),w,-2048144761,-1640531535)^c,o^w,27),w,-2048144761,-1640531535))-1028477341|0,o=w-((l>>>0<1028477341)+2048144776|0)|0,l=i,a=i,(i=i+8|0)>>>0<=t>>>0;);if(t>>>0<(a=l+4|0)>>>0?a=l:(l=Tn(Se(Tn(A[0|l]|A[l+1|0]<<8|A[l+2|0]<<16|A[l+3|0]<<24,0,-2048144761,-1640531535)^c,o^w,23),w,668265295,-1028477379)-1640531463|0,o=w+374761393|0,o=l>>>0<2654435833?o+1|0:o,c=l),a>>>0<t>>>0)for(e=40+(e+n|0)|0;c=Tn(Se(Tn(A[0|a],0,374761413,668265263)^c,o^w,11),w,-2048144761,-1640531535),o=w,(0|e)!=(0|(a=a+1|0)););return l=Tn(c^o>>>1,o,668265295,-1028477379),e=Tn(((536870911&(i=w))<<3|(e=l)>>>29)^e,i^i>>>29,-1640531463,374761393),w=a=w,e^a}function Y(e,t,n,r){var o=0,i=0,a=0,l=0,c=0,u=0,d=0;if(s[e>>2]=0,s[e+4>>2]=0,s[e+32>>2]=0,s[e+36>>2]=0,s[e+24>>2]=0,s[e+28>>2]=0,s[e+16>>2]=0,s[e+20>>2]=0,s[e+8>>2]=0,s[e+12>>2]=0,(i=r?1:5)>>>0>n>>>0)return i;if(!t)return-1;o=1;e:{t:{n:{r:{o:{i:{a:{s:{if(1==(0|r)){if(r=t,n)break s;r=-72;break a}if(-47205080!=(0|(o=A[0|t]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24)))break i;o=i,r=(t+i|0)-1|0}r=A[0|r],r=((o=s[3920+((a=r>>>6|0)<<2)>>2]+(s[3904+((3&r)<<2)>>2]+o|0)|0)+!(r&=32)|0)+(!a&r>>>5)|0}if(r>>>0>n>>>0)break e;if(s[e+24>>2]=r,r=-14,8&(a=A[(n=t+i|0)-1|0]))break e;if(!(c=32&a)){if(r=-16,(n=A[0|n])>>>0>167)break e;r=7&n,l=31&(n=10+(n>>>3|0)|0),(63&n)>>>0>=32?(o=1<<l,n=0):(o=(1<<l)-1&1>>>32-l,n=1<<l),r=Tn(r,0,(7&o)<<29|n>>>3,o>>>3|0)+n|0,l=o+w|0,l=n>>>0>r>>>0?l+1|0:l,u=r,i=i+1|0}switch(d=a>>>6|0,o=a>>>2|0,r=0,(3&a)-1|0){case 2:break n;case 1:break r;case 0:break o;default:break t}}if(r=-10,407710288!=(-16&o))break e;if(r=8,n>>>0<8)break e;return s[e>>2]=0,s[e+4>>2]=0,s[e+32>>2]=0,s[e+36>>2]=0,s[e+24>>2]=0,s[e+28>>2]=0,s[e+16>>2]=0,s[e+20>>2]=0,s[e+8>>2]=0,s[e+12>>2]=0,t=A[t+4|0]|A[t+5|0]<<8|A[t+6|0]<<16|A[t+7|0]<<24,s[e+20>>2]=1,s[e>>2]=t,s[e+4>>2]=0,0}r=A[t+i|0],i=i+1|0;break t}r=A[0|(n=t+i|0)]|A[n+1|0]<<8,i=i+2|0;break t}r=A[0|(n=t+i|0)]|A[n+1|0]<<8|A[n+2|0]<<16|A[n+3|0]<<24,i=i+4|0}a=1&o;t:{switch(d-1|0){default:if(o=-1,n=-1,!c)break t;o=A[t+i|0],n=0;break t;case 0:n=0,n=(t=256+(A[0|(t=t+i|0)]|A[t+1|0]<<8)|0)>>>0<256?1:n,o=t;break t;case 1:o=A[0|(t=t+i|0)]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24,n=0;break t;case 2:}o=A[0|(t=t+i|0)]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24,n=A[t+4|0]|A[t+5|0]<<8|A[t+6|0]<<16|A[t+7|0]<<24}s[e+32>>2]=a,s[e+28>>2]=r,t=o,s[e>>2]=t,s[e+4>>2]=n,r=0,s[e+20>>2]=0,o=c?t:u,s[e+8>>2]=o,t=c?n:l,s[e+12>>2]=t,s[e+16>>2]=!t&o>>>0<131072?o:131072}return r}function X(e,t,n,r,o){var a=0,s=0,l=0,c=0,u=0,d=0,p=0,h=0;if(!r)return-72;e:{t:{n:{if(r>>>0>=4){if(a=-1,!(s=A[(n+r|0)-1|0]))break e;if(r>>>0<=4294967176)break n;return r}switch(l=A[0|n],r-2|0){case 1:l=A[n+2|0]<<16|l;case 0:l=(A[n+1|0]<<8)+l|0}if(!(a=A[(n+r|0)-1|0]))return-20;s=9+(v(a)-(r<<3)|0)|0,r=0;break t}s=v(s)-23|0,l=A[0|(a=(r=r-4|0)+n|0)]|A[a+1|0]<<8|A[a+2|0]<<16|A[a+3|0]<<24}d=o+4|0,p=e+t|0,o=f[o+2>>1];t:{n:{r:{if(s>>>0>=33)o=0-o&31;else for(h=p-3|0,o=0-o&31;;){if((0|r)>=4)l=s>>>3|0,u=0,a=7&s;else{if(!r){u=p-2|0,r=0,c=n,a=s;break n}a=s-((l=(u=(n+r|0)-(a=s>>>3|0)>>>0<n>>>0)?r:a)<<3)|0}if(l=A[0|(c=(r=r-l|0)+n|0)]|A[c+1|0]<<8|A[c+2|0]<<16|A[c+3|0]<<24,u|e>>>0>=h>>>0)break r;if(c=f[(s=(l<<a>>>o<<2)+d|0)>>1],i[0|e]=c,i[e+1|0]=c>>>8,e=A[s+3|0]+e|0,s=A[s+2|0]+a|0,c=f[(a=(l<<s>>>o<<2)+d|0)>>1],i[0|e]=c,i[e+1|0]=c>>>8,e=e+A[a+3|0]|0,!((s=s+A[a+2|0]|0)>>>0<33))break}c=n+r|0,u=p-2|0;break t}if(u=p-2|0,!(a>>>0<=32)){s=a;break t}}for(;;){if((0|r)>=4)s=7&a,l=a>>>3|0,a=0;else{if(!r){s=a;break t}s=(s=a)-((l=(a=(l=c)-(c=a>>>3|0)>>>0<n>>>0)?r:c)<<3)|0}if(l=A[0|(c=(r=r-l|0)+n|0)]|A[c+1|0]<<8|A[c+2|0]<<16|A[c+3|0]<<24,a|e>>>0>u>>>0)break t;if(h=f[(a=(l<<s>>>o<<2)+d|0)>>1],i[0|e]=h,i[e+1|0]=h>>>8,e=A[a+3|0]+e|0,!((a=A[a+2|0]+s|0)>>>0<=32))break}s=a}if(e>>>0<=u>>>0)for(;a=f[(r=(l<<s>>>o<<2)+d|0)>>1],i[0|e]=a,i[e+1|0]=a>>>8,s=A[r+2|0]+s|0,u>>>0>=(e=A[r+3|0]+e|0)>>>0;);e>>>0>=p>>>0||(a=e,e=((r=l<<s>>>o|0)<<2)+d|0,i[0|a]=A[0|e],1!=A[e+3|0]?s>>>0>31||(s=(e=A[2+((r<<2)+d|0)|0]+s|0)>>>0<32?e:32):s=A[e+2|0]+s|0),a=(0|n)!=(0|c)||32!=(0|s)?-20:t}return a}function W(e,t,n,r,o){var i,l=0,c=0,u=0,d=0,f=0,p=0,h=0,g=0,y=0,b=0,C=0,I=0;if(x=i=x-16|0,o>>>0<=7)s[i+8>>2]=0,s[i+12>>2]=0,te(i+8|0,r,o),u=(e=W(e,t,n,i+8|0,8))>>>0<4294967177&&e>>>0>o>>>0?-20:e;else if(I=fe(e,0,(h=s[t>>2]+1|0)<<1),u=-44,!((c=15&(d=A[0|r]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24))>>>0>10)){s[n>>2]=c+5,u=(e=r+o|0)-4|0,g=e-7|0,y=c+6|0,e=4,d=d>>>4|0,f=1|(p=32<<c),n=0,o=r;e:{for(;;){if(l){if((l=vn(-2147483648|~d))>>>0>=24)for(;l=o-g|0,n=n+36|0,e=(c=o>>>0>g>>>0)?(l<<3)+e&31:e,(l=vn(-2147483648|~(d=(A[0|(o=c?u:o+3|0)]|A[o+1|0]<<8|A[o+2|0]<<16|A[o+3|0]<<24)>>>e|0)))>>>0>23;);if(e=2+((c=30&l)+e|0)|0,h>>>0<=(n=(m(l>>>1|0,3)+n|0)+(d>>>c&3)|0)>>>0)break e;c=7&e,u>>>0<(l=(e>>3)+o|0)>>>0&&o>>>0>g>>>0&&(c=(o-(l=u)<<3)+e&31),e=c,d=(A[0|l]|A[l+1|0]<<8|A[l+2|0]<<16|A[l+3|0]<<24)>>>e|0}else l=o;b=y-1|0,(o=p-1&d)>>>0<(c=(C=(p<<1)-1|0)-f|0)>>>0||(o=(o=d&C)-((0|o)<(0|p)?0:c)|0,b=y),c=b,d=o-1|0,a[(n<<1)+I>>1]=d,n=n+1|0,e=e+c|0;t:{if((0|(f=((0|o)>0?1-o|0:d)+f|0))<(0|p)){if((0|f)<2)break t;y=32-(o=v(f))|0,p=1<<(31^o)}if(!(n>>>0>=h>>>0)){c=7&e,u>>>0<(o=(e>>3)+l|0)>>>0&&l>>>0>g>>>0&&(c=(l-(o=u)<<3)+e&31),l=!d,e=c,d=(A[0|o]|A[o+1|0]<<8|A[o+2|0]<<16|A[o+3|0]<<24)>>>e|0;continue}}break}o=l}u=-20,1==(0|f)&&(u=-48,n>>>0>h>>>0||(u=-20,(0|e)>32||(s[t>>2]=n-1,u=((e+7>>3)+o|0)-r|0)))}return x=i+16|0,u}function K(e,t,n,r,o){var a=0,s=0,l=0,c=0,u=0,d=0,p=0,h=0;if(!r)return-72;c=f[o+2>>1];e:{t:{n:{if(r>>>0>=4){if(a=-1,!(s=A[(n+r|0)-1|0]))break e;if(r>>>0<=4294967176)break n;return r}switch(l=A[0|n],r-2|0){case 1:l=A[n+2|0]<<16|l;case 0:l=(A[n+1|0]<<8)+l|0}if(!(a=A[(n+r|0)-1|0]))return-20;a=9+(v(a)-(r<<3)|0)|0,r=0;break t}a=v(s)-23|0,l=A[0|(s=(r=r-4|0)+n|0)]|A[s+1|0]<<8|A[s+2|0]<<16|A[s+3|0]<<24}d=o+4|0,p=e+t|0;t:{n:{r:if(a>>>0>=33)u=0-c&31,s=n+r|0;else{h=p-3|0,u=0-c&31;o:{i:{a:{for(;;){if((0|r)>=4)l=a>>>3|0,c=0,o=7&a;else{if(!r){r=0,s=n,o=a;break i}o=a-((l=(c=(n+r|0)-(o=a>>>3|0)>>>0<n>>>0)?r:o)<<3)|0}if(l=A[0|(s=(r=r-l|0)+n|0)]|A[s+1|0]<<8|A[s+2|0]<<16|A[s+3|0]<<24,c|e>>>0>=h>>>0)break a;if(s=A[1+(a=(l<<o>>>u<<1)+d|0)|0],i[0|e]=A[0|a],s=A[1+(a=(l<<(o=o+s|0)>>>u<<1)+d|0)|0],i[e+1|0]=A[0|a],e=e+2|0,!((a=o+s|0)>>>0<33))break}s=n+r|0;break r}if(o>>>0>32)break o}for(;;){if((0|r)>=4)l=o>>>3|0,c=0,a=7&o;else{if(!r)break o;a=o-((l=(c=s-(a=o>>>3|0)>>>0<n>>>0)?r:a)<<3)|0}if(l=A[0|(s=(r=r-l|0)+n|0)]|A[s+1|0]<<8|A[s+2|0]<<16|A[s+3|0]<<24,o=e>>>0>=p>>>0,c||o){if(o)break t;break n}if(c=A[1+(o=(l<<a>>>u<<1)+d|0)|0],i[0|e]=A[0|o],e=e+1|0,!((o=a+c|0)>>>0<=32))break}}a=o}if(e>>>0>=p>>>0)break t}for(;o=A[1+(r=(l<<a>>>u<<1)+d|0)|0],i[0|e]=A[0|r],a=o+a|0,(0|p)!=(0|(e=e+1|0)););}a=(0|n)!=(0|s)||32!=(0|a)?-20:t}return a}function J(e){var t,n=0,r=0,o=0,a=0,l=0,c=0;x=t=x+-64|0,s[t+60>>2]=0,n=on(t+48|0,9351),o=s[n+4>>2],s[t+16>>2]=s[n>>2],s[t+20>>2]=o;e:{t:{if(Je(e,t+16|0)){if(n=Ue(e),s[t+60>>2]=n,!n)break e;if(73==(255&(n=(0|(n=s[e>>2]))!=s[e+4>>2]?A[0|n]:0))){if(n=be(e,0),s[t+44>>2]=n,!n)break t;l=t,c=An(e,t+60|0,t+44|0),s[l+60>>2]=c}for(;!Wt(e,69);){if(n=$e(e),s[t+44>>2]=n,!n)break t;l=t,c=fn(e,t+60|0,t+44|0),s[l+60>>2]=c}if(n=Ie(e),s[t+44>>2]=n,!n)break t;r=fn(e,t+60|0,t+44|0);break e}if(n=on(t+32|0,6044),o=s[n+4>>2],s[t+8>>2]=s[n>>2],s[t+12>>2]=o,o=Je(e,t+8|0),n=on(t+24|0,9355),a=s[n+4>>2],s[t>>2]=s[n>>2],s[t+4>>2]=a,!Je(e,t)){if(r=Ie(e),s[t+60>>2]=r,!r|1^o)break e;r=xn(e,t+60|0);break e}if(((n=(0|(n=s[e>>2]))!=s[e+4>>2]?i[0|n]:0)<<24>>24)-48>>>0<=9)for(n=e;;){if(a=$e(n),s[t+44>>2]=a,!a)break e;if(s[t+60>>2]?(l=t,c=fn(e,t+60|0,t+44|0),s[l+60>>2]=c):o?(l=t,c=xn(e,t+44|0),s[l+60>>2]=c):s[t+60>>2]=a,Wt(e,69))break}else{if(n=e,o=Ue(e),s[t+60>>2]=o,!o)break e;if(73==(255&(r=(0|(r=s[e>>2]))!=s[e+4>>2]?A[0|r]:0))){if(r=be(n,0),s[t+44>>2]=r,!r)break t;l=t,c=An(e,t+60|0,t+44|0),s[l+60>>2]=c}}if(n=Ie(n),s[t+44>>2]=n,n){r=fn(e,t+60|0,t+44|0);break e}}r=0}return x=t- -64|0,r}function Z(e){var t,n=0,r=0,o=0,a=0,l=0,c=0;x=t=x-128|0,l=t,c=dt(e),s[l+124>>2]=c,s[t+120>>2]=0,n=on(t+112|0,14212),r=s[n+4>>2],s[t+48>>2]=s[n>>2],s[t+52>>2]=r;e:{t:{if(Je(e,t+48|0))l=t,c=Nn(e,14215),s[l+120>>2]=c;else if(n=on(t+104|0,14224),r=s[n+4>>2],s[t+40>>2]=s[n>>2],s[t+44>>2]=r,Je(e,t+40|0)){if(n=S(e),s[t+88>>2]=n,!n)break t;if(!Wt(e,69))break t;l=t,c=function(e,t){return e=ct(e,12),t=s[t>>2],i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=16,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=14248,e}(e+416|0,t+88|0),s[l+120>>2]=c}else if(n=on(t+96|0,14227),r=s[n+4>>2],s[t+32>>2]=s[n>>2],s[t+36>>2]=r,Je(e,t+32|0)){for(r=s[4+(n=e+8|0)>>2]-s[n>>2]>>2;!Wt(e,69);){if(o=R(e),s[t+88>>2]=o,!o)break t;Qt(n,t+88|0)}Jt(t+88|0,e,r),l=t,c=function(e,t){var n,r,o;return x=r=x-16|0,n=ct(e,16),o=s[t+4>>2],e=s[t>>2],s[r>>2]=e,s[r+4>>2]=o,s[r+8>>2]=e,s[r+12>>2]=o,i[n+7|0]=1,i[n+6|0]=1,i[n+5|0]=1,i[n+4|0]=17,s[n>>2]=5508,s[n>>2]=14368,e=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=e,x=r+16|0,n}(e+416|0,t+88|0),s[l+120>>2]=c}if(n=on(t+80|0,14230),r=s[n+4>>2],s[t+24>>2]=s[n>>2],s[t+28>>2]=r,Je(e,t+24|0),n=0,!Wt(e,70))break e;if(Wt(e,89),n=R(e),s[t+76>>2]=n,n)for(i[t+75|0]=0,r=s[4+(n=e+8|0)>>2]-s[n>>2]>>2;;){n:{if(!Wt(e,69)){if(Wt(e,118))continue;if(o=on(t- -64|0,14233),a=s[o+4>>2],s[t+16>>2]=s[o>>2],s[t+20>>2]=a,Je(e,t+16|0))i[t+75|0]=1;else{if(o=on(t+56|0,14236),a=s[o+4>>2],s[t+8>>2]=s[o>>2],s[t+12>>2]=a,!Je(e,t+8|0))break n;i[t+75|0]=2}}Jt(t+88|0,e,r),n=at(e+416|0,t+76|0,t+88|0,t+124|0,t+75|0,t+120|0);break e}if(o=R(e),s[t+88>>2]=o,!o)break t;Qt(n,t+88|0)}}n=0}return x=t+128|0,n}function $(e,t){var n,r=0,o=0,a=0,l=0,c=0;x=n=x-160|0,t&&(s[e+336>>2]=s[e+332>>2]),t=on(n+152|0,7098),o=s[t+4>>2],s[n+24>>2]=s[t>>2],s[n+28>>2]=o;e:if(Je(e,n+24|0)){if(t=0,We(n+72|0,e,0),!Wt(e,95))break e;t=function(e,t){var n,r,o;return x=r=x-16|0,n=ct(e,16),o=s[t+4>>2],e=s[t>>2],s[r>>2]=e,s[r+4>>2]=o,s[r+8>>2]=e,s[r+12>>2]=o,i[n+7|0]=1,i[n+6|0]=1,i[n+5|0]=1,i[n+4|0]=44,s[n>>2]=5508,s[n>>2]=7140,e=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=e,x=r+16|0,n}(e+416|0,n+72|0)}else if(t=on(n+144|0,7101),o=s[t+4>>2],s[n+16>>2]=s[t>>2],s[n+20>>2]=o,Je(e,n+16|0)){o=St(n+128|0,e+392|0,s[e+336>>2]-s[e+332>>2]>>2),c=bt(n+72|0,e),l=s[4+(t=e+8|0)>>2]-s[t>>2]>>2;t:{n:{for(;84==(255&(r=(0|(r=s[e>>2]))!=s[e+4>>2]?A[0|r]:0))&&(a=on(n- -64|0,7104),r=s[e>>2],-1!=(0|Ge(a,(r=s[e+4>>2]-r>>>0>1?i[r+1|0]:0)<<24>>24)));){if(r=re(e),s[n+64>>2]=r,!r)break n;Qt(t,n- -64|0)}if(Jt(n- -64|0,e,l),s[4+(n- -64|0)>>2]||(s[e+336>>2]=s[e+336>>2]-4),r=on(n+56|0,7109),a=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=a,!Je(e,n))for(;;){if(r=R(e),s[n+48>>2]=r,!r)break n;if(Qt(t,n+48|0),Wt(e,69))break}if(Jt(n+48|0,e,l),We(n+40|0,e,0),t=0,!Wt(e,95))break t;t=function(e,t,n,r){var o,a,l,c,u;return x=o=x-48|0,u=ct(e,32),a=s[t+4>>2],l=s[t>>2],s[o+40>>2]=l,s[o+44>>2]=a,c=s[n+4>>2],t=s[n>>2],s[o+32>>2]=t,s[o+36>>2]=c,n=s[r+4>>2],e=s[r>>2],s[o+24>>2]=e,s[o+28>>2]=n,s[o+16>>2]=l,s[o+20>>2]=a,s[o+8>>2]=t,s[o+12>>2]=c,s[o>>2]=e,s[o+4>>2]=n,e=function(e,t,n,r){var o;return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=45,s[e>>2]=5508,s[e>>2]=7928,o=s[t+4>>2],s[e+8>>2]=s[t>>2],s[e+12>>2]=o,t=s[n+4>>2],s[e+16>>2]=s[n>>2],s[e+20>>2]=t,t=s[r+4>>2],s[e+24>>2]=s[r>>2],s[e+28>>2]=t,e}(u,o+16|0,o+8|0,o),x=o+48|0,e}(e+416|0,n- -64|0,n+48|0,n+40|0);break t}t=0}en(c),A[o+8|0]&&(s[s[o>>2]>>2]=s[o+4>>2])}else t=on(n+32|0,7112),o=s[t+4>>2],s[n+8>>2]=s[t>>2],s[n+12>>2]=o,t=0,Je(e,n+8|0)&&(We(n+72|0,e,0),Wt(e,95)&&(t=Nn(e,7115)));return x=n+160|0,t}function ee(e,t,n,r,o,a,l){var c=0,u=0,d=0,p=0;d=-72;e:{t:if(a){if(u=255&(c=i[0|o]),(0|c)<=-1){if((l=u-126>>>1|0)>>>0>=a>>>0)break t;if(d=-20,(c=u-127|0)>>>0>=256)break t;if(!c)break e;for(o=o+1|0,a=0;u=o+(a>>>1|0)|0,i[e+a|0]=A[0|u]>>>4,i[(1|a)+e|0]=15&A[0|u],c>>>0>(a=a+2|0)>>>0;);u=l}else{if(a>>>0<=u>>>0)break t;if(c=function(e,t,n,r){var o,a=0,l=0,c=0,u=0,d=0,p=0,h=0,g=0,m=0,y=0,b=0,C=0,I=0;x=o=x-528|0,s[o+8>>2]=255;n:if((d=W(o+16|0,o+8|0,o+12|0,t,n))>>>0>4294967176)u=d;else if(u=-44,!((c=s[o+12>>2])>>>0>6||(h=31&(a=c),(63&a)>>>0>=32?(a=1<<h,g=0):(a=(1<<h)-1&1>>>32-h,g=1<<h),a=a+(l=(l=(h=1+(1<<c)|0)>>31)<<2|(p=h)>>>30)|0,a=(p=g+(m=p<<2)|0)>>>0<m>>>0?a+1|0:a,a=(l=p)>>>0>(p=l+(2+((g=s[o+8>>2])<<1)|0)|0)>>>0?a+1|0:a,(p=p+11|0)>>>0<11&&(a=a+1|0),!a&(p&=-4)>>>0>356|a||(u=L(r,o+16|0,g,c,(a=h<<2)+r|0,356-a|0))>>>0>4294967176))){n=n-d|0,l=t+d|0,b=(g=e+255|0)-3|0;r:{o:{if(f[r+2>>1]){if(!n){u=-72;break n}i:{a:{if(n>>>0>=4){if(u=-1,!(t=A[(n+l|0)-1|0]))break n;if(n>>>0<=4294967176)break a;u=n;break n}switch(c=A[0|l],n-2|0){case 1:c=A[l+2|0]<<16|c;case 0:c=(A[l+1|0]<<8)+c|0}if(!(t=A[(n+l|0)-1|0])){u=-20;break n}u=9+(v(t)-(n<<3)|0)|0,n=0;break i}u=v(t)-23|0,c=A[0|(t=l+(n=n-4|0)|0)]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24}if(h=c>>>0-(t=(a=f[r>>1])+u|0)|0,u=s[3776+(a<<2)>>2],t>>>0>32?d=t:(0|n)>=4?(d=7&t,c=A[0|(t=l+(n=n-(t>>>3|0)|0)|0)]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24):n?(d=(d=t)-((t=(n+l|0)-(t=t>>>3|0)>>>0<l>>>0?n:t)<<3)|0,c=A[0|(t=l+(n=n-t|0)|0)]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24):(n=0,d=t),p=u&h,m=r+4|0,d=u&c>>>0-(t=a+d|0),t>>>0>32){a=t,t=e;break r}if((0|n)>=4){a=7&t,c=A[0|(t=l+(n=n-(t>>>3|0)|0)|0)]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24;break o}if(!n){n=0,a=t;break o}if(c=A[0|(r=l+(n=n-(a=(n+l|0)-(r=t>>>3|0)>>>0<l>>>0?n:r)|0)|0)]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24,(a=t-(a<<3)|0)>>>0<=32)break o;t=e;break r}if(!n){u=-72;break n}i:{a:{if(n>>>0>=4){if(u=-1,!(t=A[(n+l|0)-1|0]))break n;if(n>>>0<=4294967176)break a;u=n;break n}switch(c=A[0|l],n-2|0){case 1:c=A[l+2|0]<<16|c;case 0:c=(A[l+1|0]<<8)+c|0}if(!(t=A[(n+l|0)-1|0])){u=-20;break n}u=9+(v(t)-(n<<3)|0)|0,n=0;break i}u=v(t)-23|0,c=A[0|(t=l+(n=n-4|0)|0)]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24}h=c>>>0-(t=(a=f[r>>1])+u|0)|0,u=s[3776+(a<<2)>>2],t>>>0>32?d=t:(0|n)>=4?(d=7&t,c=A[0|(t=l+(n=n-(t>>>3|0)|0)|0)]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24):n?(d=(d=t)-((t=(n+l|0)-(t=t>>>3|0)>>>0<l>>>0?n:t)<<3)|0,c=A[0|(t=l+(n=n-t|0)|0)]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24):(n=0,d=t),p=u&h,m=r+4|0,d=u&c>>>0-(t=a+d|0);i:if(t>>>0>32)a=t,t=e;else{if((0|n)>=4)a=7&t,c=A[0|(t=l+(n=n-(t>>>3|0)|0)|0)]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24;else if(n){if(c=A[0|(r=l+(n=n-(a=(n+l|0)-(r=t>>>3|0)>>>0<l>>>0?n:r)|0)|0)]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24,!((a=t-(a<<3)|0)>>>0<=32)){t=e;break i}}else n=0,a=t;for(t=e;;){if((0|n)>=4)u=a>>>3|0,h=0,a&=7;else{if(!n){n=0;break i}a=a-((u=(h=(n+l|0)-(r=a>>>3|0)>>>0<l>>>0)?n:r)<<3)|0}if(c=A[0|(u=l+(n=n-u|0)|0)]|A[u+1|0]<<8|A[u+2|0]<<16|A[u+3|0]<<24,h|t>>>0>=b>>>0)break i;p=f[(r=m+(p<<2)|0)>>1],h=A[r+3|0],i[0|t]=A[r+2|0],y=f[(r=m+(d<<2)|0)>>1],d=A[r+3|0],i[t+1|0]=A[r+2|0],r=a+h|0,p=p+(s[3776+(h<<2)>>2]&c>>>0-r)|0,r=r+d|0,d=y+(s[3776+(d<<2)>>2]&c>>>0-r)|0;a:{if(r>>>0>32)a=r;else{if((0|n)>=4){a=7&r,c=A[0|(r=l+(n=n-(r>>>3|0)|0)|0)]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24;break a}if(n){if(a=(c=r)-((r=l>>>0>(u=u-(a=r>>>3|0)|0)>>>0?n:a)<<3)|0,c=A[0|(r=l+(n=n-r|0)|0)]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24,l>>>0<=u>>>0)break a}else n=0,a=r}t=t+2|0;break i}if(h=f[(r=m+(p<<2)|0)>>1],u=A[r+3|0],i[t+2|0]=A[r+2|0],y=f[(r=m+(d<<2)|0)>>1],d=A[r+3|0],i[t+3|0]=A[r+2|0],r=a+u|0,p=h+(s[3776+(u<<2)>>2]&c>>>0-r)|0,a=r+d|0,d=y+(s[3776+(d<<2)>>2]&c>>>0-a)|0,t=t+4|0,!(a>>>0<33))break}}if(u=-70,(y=g-2|0)>>>0<t>>>0)break n;for(b=2;;){I=f[(r=m+(p<<2)|0)>>1],C=A[r+3|0],i[0|t]=A[r+2|0],g=t+1|0;i:{if((a=a+C|0)>>>0>32)p=d;else{a:{if((0|n)>=4)p=a>>>3|0,h=7&a;else{if(!n){n=0,h=a,r=c;break a}h=a-((p=(n+l|0)-(r=a>>>3|0)>>>0<l>>>0?n:r)<<3)|0}r=A[0|(r=l+(n=n-p|0)|0)]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24}if(g>>>0>y>>>0)break n;if(p=(s[3776+(C<<2)>>2]&c>>>0-a)+I|0,C=f[(a=m+(d<<2)|0)>>1],d=A[a+3|0],i[t+1|0]=A[a+2|0],g=t+2|0,(a=d+h|0)>>>0<=32)break i;b=3}i[0|g]=A[2+(m+(p<<2)|0)|0],u=(t+b|0)-e|0;break n}d=s[3776+(d<<2)>>2]&r>>>0-a;i:{if((0|n)>=4)r=a>>>3|0,a&=7;else{if(!n){n=0;break i}a=a-((r=(n+l|0)-(t=a>>>3|0)>>>0<l>>>0?n:t)<<3)|0}r=A[0|(t=l+(n=n-r|0)|0)]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24}if(c=r,d=d+C|0,!(y>>>0>=(t=g)>>>0))break}break n}for(t=e;;){if((0|n)>=4)c=a>>>3|0,r=0,a&=7;else{if(!n){n=0;break r}a=a-((c=(r=(n+l|0)-(c=a>>>3|0)>>>0<l>>>0)?n:c)<<3)|0}if(c=A[0|(u=l+(n=n-c|0)|0)]|A[u+1|0]<<8|A[u+2|0]<<16|A[u+3|0]<<24,r|t>>>0>=b>>>0)break r;p=f[(r=m+(p<<2)|0)>>1],h=A[r+3|0],i[0|t]=A[r+2|0],d=f[(r=m+(d<<2)|0)>>1],y=A[r+3|0],i[t+1|0]=A[r+2|0],p=p+(c<<a>>>0-h|0)|0,d=d+(c<<(r=a+h|0)>>>0-y|0)|0;o:{if((r=r+y|0)>>>0>32)a=r;else{if((0|n)>=4){a=7&r,c=A[0|(r=l+(n=n-(r>>>3|0)|0)|0)]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24;break o}if(n){if(a=(c=r)-((r=l>>>0>(u=u-(a=r>>>3|0)|0)>>>0?n:a)<<3)|0,c=A[0|(r=l+(n=n-r|0)|0)]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24,l>>>0<=u>>>0)break o}else n=0,a=r}t=t+2|0;break r}if(p=f[(r=m+(p<<2)|0)>>1],u=A[r+3|0],i[t+2|0]=A[r+2|0],d=f[(r=m+(d<<2)|0)>>1],h=A[r+3|0],i[t+3|0]=A[r+2|0],p=p+(c<<a>>>0-u|0)|0,d=d+(c<<(r=a+u|0)>>>0-h|0)|0,t=t+4|0,!((a=r+h|0)>>>0<33))break}}if(u=-70,!((y=g-2|0)>>>0<t>>>0))for(b=2;;){C=f[(r=m+(p<<2)|0)>>1],p=A[r+3|0],i[0|t]=A[r+2|0],g=t+1|0;r:{if((r=a+p|0)>>>0>32)p=d;else{o:{if((0|n)>=4)h=7&r,r=r>>>3|0;else{if(!n){n=0,h=r,r=c;break o}h=(h=r)-((r=(n+l|0)-(r=r>>>3|0)>>>0<l>>>0?n:r)<<3)|0}r=A[0|(r=l+(n=n-r|0)|0)]|A[r+1|0]<<8|A[r+2|0]<<16|A[r+3|0]<<24}if(g>>>0>y>>>0)break n;if(p=C+(c<<a>>>0-p|0)|0,C=f[(a=m+(d<<2)|0)>>1],d=A[a+3|0],i[t+1|0]=A[a+2|0],g=t+2|0,(a=d+h|0)>>>0<=32)break r;b=3}i[0|g]=A[2+(m+(p<<2)|0)|0],u=(t+b|0)-e|0;break n}d=r<<h>>>0-d|0;r:{if((0|n)>=4)r=a>>>3|0,a&=7;else{if(!n){n=0;break r}a=a-((r=(n+l|0)-(t=a>>>3|0)>>>0<l>>>0?n:t)<<3)|0}r=A[0|(t=l+(n=n-r|0)|0)]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24}if(c=r,d=d+C|0,!(y>>>0>=(t=g)>>>0))break}}return x=o+528|0,u}(e,o+1|0,u,l),d=c,c>>>0>4294967176)break t}if(s[(a=t)>>2]=0,s[a+4>>2]=0,o=0,s[a+48>>2]=0,s[a+40>>2]=0,s[a+44>>2]=0,s[a+32>>2]=0,s[a+36>>2]=0,s[a+24>>2]=0,s[a+28>>2]=0,s[a+16>>2]=0,s[a+20>>2]=0,s[a+8>>2]=0,s[a+12>>2]=0,d=-20,c){for(a=0;;){if((p=A[0|(l=e+a|0)])>>>0>11)break t;if(s[(p=(p<<2)+t|0)>>2]=s[p>>2]+1,o=(1<<A[0|l]>>1)+o|0,(0|c)==(0|(a=a+1|0)))break}!o|o>>>0>4095||(a=r,r=32-v(o)|0,s[a>>2]=r,1<<(o=31^v(r=(1<<r)-o|0))==(0|r)&&(r=e+c|0,e=o+1|0,i[0|r]=e,s[(e=(e<<2)+t|0)>>2]=s[e>>2]+1,(e=s[t+4>>2])>>>0<2|1&e||(s[n>>2]=c+1,d=u+1|0)))}}return d}return s[t>>2]=0,s[t+4>>2]=0,s[t+48>>2]=0,s[t+40>>2]=0,s[t+44>>2]=0,s[t+32>>2]=0,s[t+36>>2]=0,s[t+24>>2]=0,s[t+28>>2]=0,s[t+16>>2]=0,s[t+20>>2]=0,s[t+8>>2]=0,s[t+12>>2]=0,-20}function te(e,t,n){var r,o=0,a=0;if(n>>>0>=512)return I(0|e,0|t,0|n),e;r=e+n|0;e:if(3&(e^t))if(r>>>0<4)n=e;else if((o=r-4|0)>>>0<e>>>0)n=e;else for(n=e;i[0|n]=A[0|t],i[n+1|0]=A[t+1|0],i[n+2|0]=A[t+2|0],i[n+3|0]=A[t+3|0],t=t+4|0,o>>>0>=(n=n+4|0)>>>0;);else{t:if((0|n)<1)n=e;else if(3&e)for(n=e;;){if(i[0|n]=A[0|t],t=t+1|0,r>>>0<=(n=n+1|0)>>>0)break t;if(!(3&n))break}else n=e;if(!((o=-4&r)>>>0<64||(a=o+-64|0)>>>0<n>>>0))for(;s[n>>2]=s[t>>2],s[n+4>>2]=s[t+4>>2],s[n+8>>2]=s[t+8>>2],s[n+12>>2]=s[t+12>>2],s[n+16>>2]=s[t+16>>2],s[n+20>>2]=s[t+20>>2],s[n+24>>2]=s[t+24>>2],s[n+28>>2]=s[t+28>>2],s[n+32>>2]=s[t+32>>2],s[n+36>>2]=s[t+36>>2],s[n+40>>2]=s[t+40>>2],s[n+44>>2]=s[t+44>>2],s[n+48>>2]=s[t+48>>2],s[n+52>>2]=s[t+52>>2],s[n+56>>2]=s[t+56>>2],s[n+60>>2]=s[t+60>>2],t=t- -64|0,a>>>0>=(n=n- -64|0)>>>0;);if(n>>>0>=o>>>0)break e;for(;s[n>>2]=s[t>>2],t=t+4|0,o>>>0>(n=n+4|0)>>>0;);}if(n>>>0<r>>>0)for(;i[0|n]=A[0|t],t=t+1|0,(0|r)!=(0|(n=n+1|0)););return e}function ne(e){var t,n=0,r=0,o=0,a=0,l=0;x=t=x-96|0,n=on(t+88|0,5024),o=s[n+4>>2],s[t+32>>2]=s[n>>2],s[t+36>>2]=o;e:if(Je(e,t+32|0)||(n=on(t+80|0,5027),o=s[n+4>>2],s[t+24>>2]=s[n>>2],s[t+28>>2]=o,Je(e,t+24|0))){if(r=ie(e),s[t+76>>2]=r,!r){r=0;break e}46==(255&(n=(0|(n=s[e>>2]))!=s[e+4>>2]?A[0|n]:0))&&(n=s[e>>2],s[4+(r=t- -64|0)>>2]=s[e+4>>2],s[r>>2]=n,r=function(e,t,n){var r,o;return x=r=x-16|0,o=ct(e,20),t=s[t>>2],e=s[n+4>>2],n=s[n>>2],s[r>>2]=n,s[r+4>>2]=e,s[r+8>>2]=n,s[r+12>>2]=e,e=function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=1,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=13888,t=s[n+4>>2],s[e+12>>2]=s[n>>2],s[e+16>>2]=t,e}(o,t,r),x=r+16|0,e}(e+416|0,t+76|0,r),s[t+76>>2]=r,s[e>>2]=s[e+4>>2]),r=s[e+4>>2]-s[e>>2]|0?0:r}else if(n=on(t+56|0,5031),o=s[n+4>>2],s[t+16>>2]=s[n>>2],s[t+20>>2]=o,Je(e,t+16|0)||(n=on(t+48|0,5036),o=s[n+4>>2],s[t+8>>2]=s[n>>2],s[t+12>>2]=o,Je(e,t+8|0))){if(n=ie(e),s[t+76>>2]=n,!n)break e;if(n=on(t+40|0,5042),o=s[n+4>>2],s[t>>2]=s[n>>2],s[t+4>>2]=o,!Je(e,t))break e;if(n=Wt(e,95),We(t- -64|0,e,0),o=n,s[(n=t- -64|0)>>2]==s[n+4>>2]&&o)break e;if(46==(255&(n=(0|(n=s[e>>2]))!=s[e+4>>2]?A[0|n]:0))&&(s[e>>2]=s[e+4>>2]),s[e+4>>2]-s[e>>2]|0)break e;r=Rn(e,5056,t+76|0)}else a=0,l=R(e),r=s[e+4>>2]-s[e>>2]|0?a:l;return x=t+96|0,r}function re(e){var t,n=0,r=0,o=0,a=0,l=0;x=t=x-160|0,s[t+152>>2]=e,r=on(t+144|0,7251),o=s[r+4>>2],s[t+40>>2]=s[r>>2],s[t+44>>2]=o;e:if(Je(e,t+40|0)){if(r=tt(t+152|0,0),s[t+72>>2]=r,!r)break e;n=function(e,t){return e=ct(e,12),t=s[t>>2],i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=0,i[e+4|0]=28,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=7408,e}(e+416|0,t+72|0)}else{r=on(t+136|0,7254),o=s[r+4>>2],s[t+32>>2]=s[r>>2],s[t+36>>2]=o;t:{if(Je(e,t+32|0)){if(n=tt(t+152|0,1),s[t+72>>2]=n,!n)break t;if(n=R(e),s[t+56>>2]=n,!n)break t;n=function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=0,i[e+4|0]=29,s[e>>2]=5508,s[e+12>>2]=n,s[e+8>>2]=t,s[e>>2]=7536,e}(ct(e+416|0,16),s[t+72>>2],s[t+56>>2]);break e}if(r=on(t+128|0,7257),o=s[r+4>>2],s[t+24>>2]=s[r>>2],s[t+28>>2]=o,Je(e,t+24|0)){if(n=tt(t+152|0,2),s[t+124>>2]=n,!n)break t;r=s[4+(n=e+8|0)>>2]-s[n>>2]>>2,o=bt(t+72|0,e);n:{r:{for(;a=on(t- -64|0,7260),l=s[a+4>>2],s[t+8>>2]=s[a>>2],s[t+12>>2]=l,!Je(e,t+8|0);){if(a=re(e),s[t+56>>2]=a,!a)break r;Qt(n,t+56|0)}Jt(t+56|0,e,r),n=function(e,t,n){var r,o;return x=r=x-16|0,o=ct(e,20),t=s[t>>2],e=s[n+4>>2],n=s[n>>2],s[r>>2]=n,s[r+4>>2]=e,s[r+8>>2]=n,s[r+12>>2]=e,e=function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=0,i[e+4|0]=30,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=7660,t=s[n+4>>2],s[e+12>>2]=s[n>>2],s[e+16>>2]=t,e}(o,t,r),x=r+16|0,e}(e+416|0,t+124|0,t+56|0);break n}n=0}en(o);break e}if(r=on(t+48|0,7262),o=s[r+4>>2],s[t+16>>2]=s[r>>2],s[t+20>>2]=o,!Je(e,t+16|0))break e;if(n=re(e),s[t+72>>2]=n,n){n=function(e,t){return e=ct(e,12),t=s[t>>2],i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=0,i[e+4|0]=31,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=7808,e}(e+416|0,t+72|0);break e}}n=0}return x=t+160|0,n}function oe(e){var t,n=0,r=0,o=0,a=0;x=t=x-16|0;e:if(Wt(e,83))if((n=(o=(0|(n=s[e>>2]))!=s[e+4>>2]?i[0|n]:0)<<24>>24)-97>>>0<26){a=t,o=e;t:{n:{r:{o:{i:{a:switch(n-97|0){default:switch(n-111|0){case 0:break r;case 4:break i;default:break e}case 0:s[e>>2]=s[e>>2]+1,s[t+12>>2]=0,r=Cn(e,t+12|0);break t;case 2:case 4:case 5:case 6:case 7:break e;case 1:break a;case 3:break n;case 8:break o}s[e>>2]=s[e>>2]+1,s[t+12>>2]=1,r=Cn(e,t+12|0);break t}s[e>>2]=s[e>>2]+1,s[t+12>>2]=2,r=Cn(e,t+12|0);break t}s[e>>2]=s[e>>2]+1,s[t+12>>2]=3,r=Cn(e,t+12|0);break t}s[e>>2]=s[e>>2]+1,s[t+12>>2]=4,r=Cn(e,t+12|0);break t}s[e>>2]=s[e>>2]+1,s[t+12>>2]=5,r=Cn(e,t+12|0)}if(n=et(o,r),s[a+12>>2]=n,(0|n)==(0|r))break e;Qt(e+148|0,t+12|0),r=n}else if(Wt(e,95)){if(s[(e=e+148|0)>>2]==s[e+4>>2])break e;r=s[s[e>>2]>>2]}else s[t+12>>2]=0,ke(e,t+12|0)||(n=s[t+12>>2],Wt(e,95)&&((n=n+1|0)>>>0>=s[4+(e=e+148|0)>>2]-s[e>>2]>>2>>>0||(r=s[s[e>>2]+(n<<2)>>2])));return x=t+16|0,r}function ie(e){var t,n=0,r=0,o=0,l=0,c=0,u=0;x=t=x+-64|0;e:if(71!=(255&(n=(n=(0|(n=s[e>>2]))!=s[e+4>>2]?i[0|n]:0)<<24>>24))&&84!=(0|n)){if(s[t+56>>2]=e,i[8+(r=t+40|0)|0]=0,s[r+4>>2]=0,a[r>>1]=0,n=e,s[r+12>>2]=s[n+364>>2]-s[n+360>>2]>>2,o=ue(n,r),s[t+36>>2]=o,e=0,o&&!function(e,t){var n,r,o,i=0,a=0,l=0,c=0;r=s[4+(i=n=e+360|0)>>2]-s[i>>2]>>2,o=(t=s[t+12>>2])>>>0<r>>>0?r:t,i=e+332|0,e=t;t:{for(;(0|e)!=(0|o);){if(s[i>>2]==s[i+4>>2])break t;if(!(a=s[s[i>>2]>>2]))break t;if(l=s[s[n>>2]+(e<<2)>>2],(c=s[l+8>>2])>>>0>=s[a+4>>2]-s[a>>2]>>2>>>0)break t;s[l+12>>2]=s[s[a>>2]+(c<<2)>>2],e=e+1|0}s[n+4>>2]=s[n>>2]+(t<<2)}return e>>>0<r>>>0}(n,r)&&(e=o,!Ye(t+56|0))){s[t+32>>2]=0,e=on(t+24|0,5090),o=s[e+4>>2],s[t>>2]=s[e>>2],s[t+4>>2]=o;t:{if(Je(n,t)){for(o=s[4+(e=n+8|0)>>2]-s[e>>2]>>2;!Wt(n,69);){if(l=ve(n),s[t+16>>2]=l,!l)break t;Qt(e,t+16|0)}Jt(t+16|0,n,o),c=t,u=function(e,t){var n,r,o;return x=r=x-16|0,n=ct(e,16),o=s[t+4>>2],e=s[t>>2],s[r>>2]=e,s[r+4>>2]=o,s[r+8>>2]=e,s[r+12>>2]=o,i[n+7|0]=1,i[n+6|0]=1,i[n+5|0]=1,i[n+4|0]=9,s[n>>2]=5508,s[n>>2]=13616,e=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=e,x=r+16|0,n}(n+416|0,t+16|0),s[c+32>>2]=u}if(s[t+12>>2]=0,A[t+40|0]|!A[r+1|0]||(e=R(n),s[t+12>>2]=e,e)){if(Wt(n,118)){s[(e=t+16|0)>>2]=0,s[e+4>>2]=0,e=gn(n,t+12|0,t+36|0,e,t+32|0,r+4|0,r+8|0);break e}for(o=s[4+(e=n+8|0)>>2]-s[e>>2]>>2;;){if(l=R(n),s[t+16>>2]=l,!l)break t;if(Qt(e,t+16|0),Ye(t+56|0))break}Jt(t+16|0,n,o),e=gn(n,t+12|0,t+36|0,t+16|0,t+32|0,r+4|0,r+8|0);break e}}e=0}}else e=function(e){var t,n=0,r=0;x=t=x-16|0;t:{n:{r:{if(71!=(0|(n=(n=(0|(n=s[e>>2]))!=s[e+4>>2]?i[0|n]:0)<<24>>24))){if(84!=(0|n))break t;o:{i:{a:{s:{l:{c:{u:{d:{A:{switch(n=s[e>>2],(n=(n=s[e+4>>2]-n>>>0>1?i[n+1|0]:0)<<24>>24)-83|0){case 4:break s;case 0:break c;case 1:break d;case 3:break A;case 2:break o}switch(n-67|0){case 0:break l;case 6:break u;case 1:case 2:case 3:case 4:break o;case 5:break a;default:break i}}if(s[e>>2]=s[e>>2]+2,r=R(e),s[t>>2]=r,!r)break n;r=Bt(e+416|0,5104,t);break t}if(s[e>>2]=s[e>>2]+2,r=R(e),s[t>>2]=r,!r)break n;r=Bt(e+416|0,5116,t);break t}if(s[e>>2]=s[e>>2]+2,r=R(e),s[t>>2]=r,!r)break n;r=Bt(e+416|0,5125,t);break t}if(s[e>>2]=s[e>>2]+2,r=R(e),s[t>>2]=r,!r)break n;r=Bt(e+416|0,5139,t);break t}if(s[e>>2]=s[e>>2]+2,n=R(e),s[t+12>>2]=n,!n)break t;if(We(t,e,1),s[t>>2]==s[t+4>>2])break t;if(!Wt(e,95))break t;if(r=R(e),s[t>>2]=r,!r)break n;r=function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=21,s[e>>2]=5508,s[e+12>>2]=n,s[e+8>>2]=t,s[e>>2]=5552,e}(ct(e+416|0,16),s[t>>2],s[t+12>>2]);break t}if(s[e>>2]=s[e>>2]+2,n=ue(e,0),s[t>>2]=n,!n)break t;r=Rn(e,5185,t);break t}if(s[e>>2]=s[e>>2]+2,n=ue(e,0),s[t>>2]=n,!n)break t;r=Bt(e+416|0,5219,t);break t}if(99==(0|n))break r}if(s[e>>2]=s[e>>2]+1,n=(0|(n=s[e>>2]))!=s[e+4>>2]?i[0|n]:0,Le(e))break t;if(r=ie(e),s[t>>2]=r,!r)break n;if(118==(255&n)){r=Bt(e+416|0,5260,t);break t}r=Bt(e+416|0,5278,t);break t}o:{i:switch(n=s[e>>2],((n=s[e+4>>2]-n>>>0>1?i[n+1|0]:0)<<24>>24)-82|0){case 0:break o;case 4:break i;default:break t}if(s[e>>2]=s[e>>2]+2,n=ue(e,0),s[t>>2]=n,!n)break t;r=Bt(e+416|0,5300,t);break t}if(s[e>>2]=s[e>>2]+2,n=ue(e,0),s[t>>2]=n,!n)break t;if(r=ke(e,t+12|0),n=Wt(e,95),!r&&(r=0,!n))break t;r=Bt(e+416|0,5320,t);break t}if(s[e>>2]=s[e>>2]+2,Le(e))break t;if(Le(e))break t;if(r=ie(e),s[t>>2]=r,r){r=Bt(e+416|0,5158,t);break t}}r=0}return x=t+16|0,r}(e);return x=t- -64|0,e}function ae(e,t,n){var r,o=0,i=0,a=0,l=0,c=0,u=0;if(x=r=x-48|0,407710288!=(-16&(A[0|t]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24))|n>>>0<8){l=e;e:if((o=Y(r+8|0,t,n,0))>>>0>=4294967177)s[e>>2]=o,e=-2,t=-1;else if(o)s[e>>2]=-72,e=-2,t=-1;else{n=n-(o=s[r+32>>2])|0,o=t+o|0;t:{for(;;){if(n>>>0<3){i=-72;break t}i=-20;n:{switch((c=(a=A[0|o]|A[o+1|0]<<8)>>>1&3)-1|0){case 2:break t;case 0:break n}c=(A[o+2|0]<<16|a)>>>3|0}if((i=c+3|0)>>>0>n>>>0){s[e>>2]=-72,e=-2,t=-1;break e}if(u=u+1|0,n=n-i|0,o=o+i|0,1&a)break}if(s[r+40>>2]){if(n>>>0<=3){s[e>>2]=-72,e=-2,t=-1;break e}o=o+4|0}a=s[r+24>>2],n=s[r+8>>2],i=s[r+12>>2],s[e+4>>2]=0,s[e>>2]=o-t,e=(t=-1==(0|n)&-1==(0|i))?m(a,u):n,t=t?0:i;break e}s[e>>2]=i,e=-2,t=-1}s[l+8>>2]=e,s[l+12>>2]=t}else t=A[t+4|0]|A[t+5|0]<<8|A[t+6|0]<<16|A[t+7|0]<<24,s[e+8>>2]=0,s[e+12>>2]=0,s[e+4>>2]=0,l=e,e=t+8|0,s[l>>2]=t>>>0>4294967287?-14:e>>>0>n>>>0?-72:e;x=r+48|0}function se(e,t,n){var r=0,o=0,i=0;s[e+29416>>2]=0,s[e+29420>>2]=0,s[e+29356>>2]=0,s[e+29360>>2]=0,s[e+29584>>2]=0,s[e+29432>>2]=0,s[e+29436>>2]=0,s[e+29424>>2]=3,s[e+29428>>2]=0,s[(r=e+29364|0)>>2]=0,s[r+4>>2]=0,s[(r=e+10280|0)>>2]=201326604,s[e+29372>>2]=s[e+29532>>2]?1:5,s[e+12>>2]=r,s[e+8>>2]=e+4120,s[e+4>>2]=e+6176,s[e>>2]=e+16,i=s[609],s[(r=e+26668|0)>>2]=s[608],s[r+4>>2]=i,s[e+26676>>2]=s[610];e:{if(!(!t|!n)){if(-332356553!=(A[0|t]|A[t+1|0]<<8|A[t+2|0]<<16|A[t+3|0]<<24)|n>>>0<=7)break e;s[e+29584>>2]=A[t+4|0]|A[t+5|0]<<8|A[t+6|0]<<16|A[t+7|0]<<24,o=-30,(r=function(e,t,n){var r,o=0,i=0,a=0,l=0,c=0,u=0,d=0;return x=r=x-128|0,u=-30,n>>>0<9||(o=F(e+10264|0,i=t+8|0,n-8|0,e,10264))>>>0>4294967176||(s[r+124>>2]=31,(n=W(r,r+124|0,r+120|0,o=o>>>0<4294967177?o+i|0:i,(i=t+n|0)-o|0))>>>0>4294967176||(a=s[r+124>>2])>>>0>31||(l=s[r+120>>2])>>>0>=9||(G(e+4104|0,r,c=a,1440,1568,l,a=e+26664|0),s[r+124>>2]=52,(o=W(r,r+124|0,r+120|0,n=n+o|0,i-n|0))>>>0>4294967176||(l=s[r+124>>2])>>>0>52||(c=s[r+120>>2])>>>0>=10||(G(e+6160|0,r,l,1696,1920,c,a),s[r+124>>2]=35,(d=(o=W(r,r+124|0,r+120|0,n=n+o|0,i-n|0))>>>0>4294967176|(l=s[r+124>>2])>>>0>35|(c=s[r+120>>2])>>>0>9)||(G(e,r,l,2144,2288,c,a),n=n+o|0),(o=n+12|0)>>>0>i>>>0|d||(i=i-o|0)>>>0<=(a=A[0|n]|A[n+1|0]<<8|A[n+2|0]<<16|A[n+3|0]<<24)-1>>>0||(s[e+26652>>2]=a,i>>>0<=(o=A[n+4|0]|A[n+5|0]<<8|A[n+6|0]<<16|A[n+7|0]<<24)-1>>>0||(s[e+26656>>2]=o,(a=i)>>>0<=(i=A[n+8|0]|A[n+9|0]<<8|A[n+10|0]<<16|A[n+11|0]<<24)-1>>>0||(s[e+26660>>2]=i,u=12+(n-t|0)|0)))))),x=r+128|0,u}(e+16|0,t,n))>>>0>4294967176||(s[e+29432>>2]=1,s[e+29436>>2]=1,o=s[e+29356>>2],s[e+29368>>2]=o,i=s[e+29360>>2],t=r>>>0<4294967177?t+r|0:t,s[e+29360>>2]=t,s[e+29356>>2]=t+(n-r|0),s[e+29364>>2]=t+(i-o|0),o=0)}return o}return s[e+29364>>2]=t,s[e+29368>>2]=0,s[e+29360>>2]=t,s[e+29356>>2]=t+n,0}function le(e,t,n){var r,o=0,a=0,l=0,c=0,u=0,d=0;x=r=x-32|0,o=s[t>>2],41==A[o+4|0]&&(o=s[o+8>>2],s[r+28>>2]=o,o-2>>>0>3||(u=t,d=function(e,t){return e=ct(e,12),t=s[t>>2],i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=40,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=11944,e}(e+416|0,r+28|0),s[u>>2]=d));e:if(Wt(e,67)){if(c=Wt(e,73),(((a=(0|(o=s[e>>2]))!=s[e+4>>2]?i[0|o]:0)<<24>>24)-49&255)>>>0>4)break e;if(a=r,o=(0|(o=s[e>>2]))!=s[e+4>>2]?i[0|o]:0,s[a+24>>2]=(o<<24>>24)-48,s[e>>2]=s[e>>2]+1,n&&(i[0|n]=1),c&&!ue(e,n))break e;i[r+23|0]=0,l=ln(e,t,r+23|0,r+24|0)}else 68==(255&(a=(0|(o=s[e>>2]))!=s[e+4>>2]?A[0|o]:0))&&(o=s[e>>2],(o=((a=s[e+4>>2]-o>>>0>1?i[o+1|0]:0)<<24>>24&255)-48|0)>>>0>5|3==(0|o)||(a=r,l=s[e>>2],o=s[e+4>>2]-l>>>0>1?i[l+1|0]:0,s[a+16>>2]=(o<<24>>24)-48,s[e>>2]=s[e>>2]+2,n&&(i[0|n]=1),i[r+15|0]=1,l=ln(e,t,r+15|0,r+16|0)));return x=r+32|0,l}function ce(e){var t,n=0,r=0,o=0,a=0;x=t=x-80|0;e:{t:{if(Wt(e,85)){if(He(t+72|0,e),s[t+72>>2]==s[t+76>>2])break e;if(n=on(t- -64|0,14592),r=s[n+4>>2],s[t>>2]=s[n>>2],s[t+4>>2]=r,zt(t+72|0,t)){if(qt(t+56|0,t+72|0,9),s[(r=t+48|0)>>2]=0,s[r+4>>2]=0,n=St(t+32|0,e,s[t+56>>2]),o=St(t+16|0,e+4|0,s[t+60>>2]),He(t+8|0,e),a=s[t+12>>2],s[t+48>>2]=s[t+8>>2],s[t+52>>2]=a,A[o+8|0]&&(s[s[o>>2]>>2]=s[o+4>>2]),A[n+8|0]&&(s[s[n>>2]>>2]=s[n+4>>2]),n=0,s[r>>2]==s[r+4>>2])break e;if(n=ce(e),s[t+32>>2]=n,!n)break t;n=function(e,t,n){var r,o;return x=r=x-16|0,o=ct(e,20),t=s[t>>2],e=s[n+4>>2],n=s[n>>2],s[r>>2]=n,s[r+4>>2]=e,s[r+8>>2]=n,s[r+12>>2]=e,e=function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=10,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=14612,t=s[n+4>>2],s[e+12>>2]=s[n>>2],s[e+16>>2]=t,e}(o,t,r),x=r+16|0,e}(e+416|0,t+32|0,r);break e}if(n=ce(e),s[t+32>>2]=n,!n)break t;n=function(e,t,n){var r,o;return x=r=x-16|0,o=ct(e,20),t=s[t>>2],e=s[n+4>>2],n=s[n>>2],s[r>>2]=n,s[r+4>>2]=e,s[r+8>>2]=n,s[r+12>>2]=e,e=function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=2,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=14720,t=s[n+4>>2],s[e+12>>2]=s[n>>2],s[e+16>>2]=t,e}(o,t,r),x=r+16|0,e}(e+416|0,t+32|0,t+72|0);break e}if(r=dt(e),s[t+32>>2]=r,n=R(e),s[t+16>>2]=n,n){if(!r)break e;n=function(e,t,n){var r,o;return r=A[t+5|0],o=A[t+6|0],i[e+7|0]=A[t+7|0],i[e+6|0]=o,i[e+5|0]=r,i[e+4|0]=3,s[e>>2]=5508,s[e+12>>2]=t,s[e+8>>2]=n,s[e>>2]=14832,e}(ct(e+416|0,16),s[t+16>>2],s[t+32>>2]);break e}}n=0}return x=t+80|0,n}function ue(e,t){var n,r=0,o=0;x=n=x-16|0,Wt(e,76);e:{t:{n:{r:{if(90!=(0|(r=(r=(0|(r=s[e>>2]))!=s[e+4>>2]?i[0|r]:0)<<24>>24))){if(83==(0|(r&=255)))break r;if(78!=(0|r))break n;r=function(e,t){var n,r=0,o=0,a=0,l=0;x=n=x-48|0,s[n+44>>2]=t;o:if(Wt(e,78)){r=dt(e),t&&(s[t+4>>2]=r);i:if(Wt(e,79)){if(!t)break i;i[t+8|0]=2}else if(Wt(e,82)){if(!t)break i;i[t+8|0]=1}else t&&(i[t+8|0]=0);s[n+40>>2]=0,s[n+28>>2]=e,s[n+32>>2]=n+44,s[n+24>>2]=n+40,t=on(n+16|0,5690),r=s[t+4>>2],s[n>>2]=s[t>>2],s[n+4>>2]=r,Je(e,n)&&(a=n,l=Nn(e,5693),s[a+40>>2]=l),t=e+148|0;i:{for(;!Wt(e,69);){if(Wt(e,76),Wt(e,77)){if(s[n+40>>2])continue;break i}a:{s:{l:{c:{u:{switch((r=(r=(0|(r=s[e>>2]))!=s[e+4>>2]?i[0|r]:0)<<24>>24&255)-67|0){case 2:case 3:case 4:case 5:break a;case 0:break s;case 1:break c;case 6:break u}d:switch(r-83|0){case 0:break l;case 1:break d;default:break a}if(!Ke(n+24|0,ge(e)))break i;Qt(t,n+40|0);continue}if(r=be(e,0!=s[n+44>>2]),s[n+12>>2]=r,!r|!s[n+40>>2])break i;a=n,l=An(e,n+40|0,n+12|0),s[a+40>>2]=l,(r=s[n+44>>2])&&(i[r+1|0]=1),Qt(t,n+40|0);continue}if(r=s[e>>2],67==(0|(r=(r=s[e+4>>2]-r>>>0>1?i[r+1|0]:0)<<24>>24)))break a;if(84!=(0|(r&=255))&&116!=(0|r))break s;if(!Ke(n+24|0,st(e)))break i;Qt(t,n+40|0);continue}if(r=s[e>>2],116==(255&(r=s[e+4>>2]-r>>>0>1?A[r+1|0]:0)))break a;if(r=oe(e),s[n+12>>2]=r,!Ke(n+24|0,r))break i;if((0|r)==s[n+40>>2])continue;Qt(t,n+12|0);continue}if(r=0,!s[n+40>>2])break o;if(!Ke(n+24|0,le(e,n+40|0,s[n+44>>2])))break o;if(o=et(e,s[n+40>>2]),s[n+40>>2]=o,!o)break o;Qt(t,n+40|0);continue}if(!Ke(n+24|0,Ee(e,s[n+44>>2])))break i;Qt(t,n+40|0)}if(r=0,!s[n+40>>2]|s[t>>2]==s[t+4>>2])break o;s[t+4>>2]=s[t+4>>2]-4,r=s[n+40>>2];break o}r=0}return x=n+48|0,r}(e,t);break e}r=function(e,t){var n,r=0,o=0,i=0,a=0;x=n=x-16|0;o:if(Wt(e,90)&&(o=ie(e),s[n+12>>2]=o,o&&Wt(e,69)))if(Wt(e,115))i=e,a=De(s[e>>2],s[e+4>>2]),s[i>>2]=a,i=n,a=Nn(e,12720),s[i>>2]=a,r=hn(e,n+12|0,n);else i:{if(Wt(e,100)){if(We(n,e,1),!Wt(e,95))break o;if(t=ue(e,t),s[n>>2]=t,!t)break i;r=hn(e,n+12|0,n);break o}t=ue(e,t),s[n>>2]=t,t&&(i=e,a=De(s[e>>2],s[e+4>>2]),s[i>>2]=a,r=hn(e,n+12|0,n))}return x=n+16|0,r}(e,t);break e}if(r=s[e>>2],116!=(255&(r=s[e+4>>2]-r>>>0>1?A[r+1|0]:0))){if(r=oe(e),s[n+12>>2]=r,!r)break t;if(r=0,73!=(255&(o=(0|(o=s[e>>2]))!=s[e+4>>2]?A[0|o]:0)))break e;if(o=be(e,0!=(0|t)),s[n+8>>2]=o,!o)break e;t&&(i[t+1|0]=1),r=An(e,n+12|0,n+8|0);break e}}if(r=function(e,t){var n,r=0,o=0;x=n=x-48|0,r=on(n+40|0,13368),o=s[r+4>>2],s[n+16>>2]=s[r>>2],s[n+20>>2]=o;n:if(Je(e,n+16|0)||(r=on(n+32|0,5690),o=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=o,Je(e,n+8|0))){if(r=Ee(e,t),s[n+28>>2]=r,t=0,!r)break n;t=function(e,t){return e=ct(e,12),t=s[t>>2],i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=39,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=13380,e}(e+416|0,n+28|0)}else t=Ee(e,t);return x=n+48|0,t}(e,t),s[n+12>>2]=r,r){if(73!=(255&(o=(0|(o=s[e>>2]))!=s[e+4>>2]?A[0|o]:0)))break e;Qt(e+148|0,n+12|0),r=be(e,0!=(0|t)),s[n+8>>2]=r,r?(t&&(i[t+1|0]=1),r=An(e,n+12|0,n+8|0)):r=0;break e}}r=0}return x=n+16|0,r}function de(e,t,n){var r=0;e:if((0|e)!=(0|t)){if((t-e|0)-n>>>0<=0-(n<<1)>>>0)return te(e,t,n);if(r=3&(e^t),e>>>0<t>>>0){if(r)r=e;else{if(3&e)for(r=e;;){if(!n)break e;if(i[0|r]=A[0|t],t=t+1|0,n=n-1|0,!(3&(r=r+1|0)))break}else r=e;if(!(n>>>0<=3))for(;s[r>>2]=s[t>>2],t=t+4|0,r=r+4|0,(n=n-4|0)>>>0>3;);}if(n)for(;i[0|r]=A[0|t],r=r+1|0,t=t+1|0,n=n-1|0;);}else{if(!r){if(e+n&3)for(;;){if(!n)break e;if(i[0|(r=(n=n-1|0)+e|0)]=A[t+n|0],!(3&r))break}if(!(n>>>0<=3))for(;s[(n=n-4|0)+e>>2]=s[t+n>>2],n>>>0>3;);}if(!n)break e;for(;i[(n=n-1|0)+e|0]=A[t+n|0],n;);}}return e}function Ae(e){var t,n=0;x=t=x-16|0;e:{t:{n:if(100==(255&(n=(0|(n=s[e>>2]))!=s[e+4>>2]?A[0|n]:0))){if(n=s[e>>2],88!=(0|(n=(n=s[e+4>>2]-n>>>0>1?i[n+1|0]:0)<<24>>24))){if(120!=(0|n)){if(105!=(0|n))break n;if(s[e>>2]=s[e>>2]+2,n=Pe(e),s[t+12>>2]=n,!n)break t;if(n=Ae(e),s[t+8>>2]=n,!n)break t;i[t+4|0]=0,e=cn(e,t+12|0,t+8|0,t+4|0);break e}if(s[e>>2]=s[e>>2]+2,n=S(e),s[t+12>>2]=n,!n)break t;if(n=Ae(e),s[t+8>>2]=n,!n)break t;i[t+4|0]=1,e=cn(e,t+12|0,t+8|0,t+4|0);break e}if(s[e>>2]=s[e>>2]+2,n=S(e),s[t+12>>2]=n,!n)break t;if(n=S(e),s[t+8>>2]=n,!n)break t;if(n=Ae(e),s[t+4>>2]=n,!n)break t;e=function(e,t,n,r){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=74,s[e>>2]=5508,s[e+16>>2]=r,s[e+12>>2]=n,s[e+8>>2]=t,s[e>>2]=10800,e}(ct(e+416|0,20),s[t+12>>2],s[t+8>>2],s[t+4>>2]);break e}e=S(e);break e}e=0}return x=t+16|0,e}function fe(e,t,n){var r=0,o=0,a=0;if(n&&(i[(a=e+n|0)-1|0]=t,i[0|e]=t,!(n>>>0<3||(i[a-2|0]=t,i[e+1|0]=t,i[a-3|0]=t,i[e+2|0]=t,n>>>0<7||(i[a-4|0]=t,i[e+3|0]=t,n>>>0<9||(o=(a=0-e&3)+e|0,r=m(255&t,16843009),s[o>>2]=r,s[(n=(t=n-a&-4)+o|0)-4>>2]=r,t>>>0<9||(s[o+8>>2]=r,s[o+4>>2]=r,s[n-8>>2]=r,s[n-12>>2]=r,t>>>0<25||(s[o+24>>2]=r,s[o+20>>2]=r,s[o+16>>2]=r,s[o+12>>2]=r,s[n-16>>2]=r,s[n-20>>2]=r,s[n-24>>2]=r,s[n-28>>2]=r,(n=(n=t)-(t=4&o|24)|0)>>>0<32))))))))for(r=Tn(r,0,1,1),a=w,t=t+o|0;s[t+24>>2]=r,o=a,s[t+28>>2]=o,s[t+16>>2]=r,s[t+20>>2]=o,s[t+8>>2]=r,s[t+12>>2]=o,s[t>>2]=r,s[t+4>>2]=o,t=t+32|0,(n=n-32|0)>>>0>31;);return e}function pe(e,t,n){e:if(!(t>>>0>20)){t:switch(t-9|0){case 0:return t=s[n>>2],s[n>>2]=t+4,void(s[e>>2]=s[t>>2]);case 1:return t=s[n>>2],s[n>>2]=t+4,t=s[t>>2],s[e>>2]=t,void(s[e+4>>2]=t>>31);case 2:return t=s[n>>2],s[n>>2]=t+4,s[e>>2]=s[t>>2],void(s[e+4>>2]=0);case 3:return t=s[n>>2]+7&-8,s[n>>2]=t+8,n=s[t+4>>2],s[e>>2]=s[t>>2],void(s[e+4>>2]=n);case 4:return t=s[n>>2],s[n>>2]=t+4,t=a[t>>1],s[e>>2]=t,void(s[e+4>>2]=t>>31);case 5:return t=s[n>>2],s[n>>2]=t+4,s[e>>2]=f[t>>1],void(s[e+4>>2]=0);case 6:return t=s[n>>2],s[n>>2]=t+4,t=i[0|t],s[e>>2]=t,void(s[e+4>>2]=t>>31);case 7:return t=s[n>>2],s[n>>2]=t+4,s[e>>2]=A[0|t],void(s[e+4>>2]=0);case 8:return t=s[n>>2]+7&-8,s[n>>2]=t+8,void(g[e>>3]=g[t>>3]);case 9:break t;default:break e}Jn[3](e,n)}}function he(e,t){e|=0;var n,r,o,i=0,a=0,l=0,c=0;x=n=x+-64|0,r=Dt(n+48|0,12+(t|=0)|0),o=Dt(n+32|0,t+16|0),a=s[t+4>>2],i=s[e+8>>2],Jn[s[s[i>>2]+16>>2]](i,t),1!=A[i+5|0]&&Jn[s[s[i>>2]+20>>2]](i,t);e:{t:{n:{r:switch((i=s[t+16>>2])+1|0){case 0:break t;case 1:break r;default:break n}s[t+4>>2]=a;break e}for(l=i>>>0>1?i:1,i=1;;){if((0|i)==(0|l))break e;a=on(n+16|0,7794),c=s[a+4>>2],s[n>>2]=s[a>>2],s[n+4>>2]=c,Gt(t,n),s[t+12>>2]=i,a=s[e+8>>2],Jn[s[s[a>>2]+16>>2]](a,t),1!=A[a+5|0]&&Jn[s[s[a>>2]+20>>2]](a,t),i=i+1|0}}e=on(n+24|0,7916),i=s[e+4>>2],s[n+8>>2]=s[e>>2],s[n+12>>2]=i,Gt(t,n+8|0)}A[o+8|0]&&(s[s[o>>2]>>2]=s[o+4>>2]),A[r+8|0]&&(s[s[r>>2]>>2]=s[r+4>>2]),x=n- -64|0}function ge(e){var t,n=0,r=0,o=0,a=0,l=0;x=t=x-16|0;e:if(Wt(e,84)){if(s[t+12>>2]=0,Wt(e,76)){if(Ne(e,t+12|0))break e;if(r=s[t+12>>2],!Wt(e,95))break e;r=r+1|0}if(s[t+8>>2]=0,!Wt(e,95)){if(Ne(e,t+8|0))break e;if(o=s[t+8>>2]+1|0,s[t+8>>2]=o,!Wt(e,95))break e}if(r|!A[e+389|0])if(!((l=s[4+(n=a=e+332|0)>>2]-s[n>>2]>>2)>>>0<=r>>>0)&&(n=s[s[a>>2]+(r<<2)>>2])&&s[n+4>>2]-s[n>>2]>>2>>>0>o>>>0)n=s[s[n>>2]+(o<<2)>>2];else{if(n=0,s[e+392>>2]!=(0|r)|r>>>0>l>>>0)break e;(0|r)==(0|l)&&(s[t+4>>2]=0,Qt(a,t+4|0)),n=Nn(e,5907)}else n=function(e,t){return i[e+7|0]=2,i[e+6|0]=2,i[e+5|0]=2,i[e+4|0]=36,s[e>>2]=5508,i[e+16|0]=0,s[e+12>>2]=0,s[e+8>>2]=t,s[e>>2]=5920,e}(ct(e+416|0,20),s[t+8>>2]),s[t+4>>2]=n,Qt(e+360|0,t+4|0)}return x=t+16|0,n}function me(e){var t,n,r=0,o=0;return x=t=x+-64|0,s[(r=n=t+56|0)>>2]=0,s[r+4>>2]=0,r=on(t+48|0,15392),o=s[r+4>>2],s[t+16>>2]=s[r>>2],s[t+20>>2]=o,Je(e,t+16|0)?(on(t+40|0,15395),r=s[t+44>>2],s[t+56>>2]=s[t+40>>2],s[t+60>>2]=r):(r=on(t+32|0,15402),o=s[r+4>>2],s[t+8>>2]=s[r>>2],s[t+12>>2]=o,Je(e,t+8|0)?(on(t+40|0,15405),r=s[t+44>>2],s[t+56>>2]=s[t+40>>2],s[t+60>>2]=r):(r=on(t+24|0,15411),o=s[r+4>>2],s[t>>2]=s[r>>2],s[t+4>>2]=o,Je(e,t)&&(on(t+40|0,15414),r=s[t+44>>2],s[t+56>>2]=s[t+40>>2],s[t+60>>2]=r))),o=ue(e,0),s[t+40>>2]=o,r=0,o&&(r=o,s[n>>2]!=s[n+4>>2]&&(r=function(e,t,n){var r,o;return x=r=x-16|0,o=ct(e,20),e=s[t+4>>2],t=s[t>>2],s[r+8>>2]=t,s[r+12>>2]=e,n=s[n>>2],s[r>>2]=t,s[r+4>>2]=e,e=function(e,t,n){var r;return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=6,s[e>>2]=5508,s[e>>2]=15428,r=s[t+4>>2],t=s[t>>2],s[e+16>>2]=n,s[e+8>>2]=t,s[e+12>>2]=r,e}(o,r,n),x=r+16|0,e}(e+416|0,n,t+40|0))),x=t- -64|0,r}function ye(e,t,n,r,o,l,c,u,d,f,p,h,g,m){var y,v=0;x=y=x-128|0,s[y+124>>2]=r,v=-1;e:{t:switch(0|n){case 1:if(!c){v=-72;break e}if(v=-20,(n=A[0|l])>>>0>r>>>0)break e;r=s[(n<<=2)+d>>2],n=s[n+u>>2],i[e+11|0]=0,s[e>>2]=0,s[e+4>>2]=0,s[e+12>>2]=n,i[e+10|0]=r,a[e+8>>1]=0,s[t>>2]=e,v=1;break e;case 0:s[t>>2]=f,v=0;break e;case 3:if(!p){v=-20;break e}if(v=0,!h|(0|g)<25)break e;if(!(e=8+(8<<o)|0))break e;for(r=0;e>>>0>(r=r- -64|0)>>>0;);break e;case 2:break t;default:break e}v=-20,(n=W(y,y+124|0,y+120|0,l,c))>>>0>4294967176||(r=s[y+120>>2])>>>0>o>>>0||(G(e,y,s[y+124>>2],u,d,r,m),s[t>>2]=e,v=n)}return x=y+128|0,v}function ve(e){var t,n=0,r=0,o=0;x=t=x-16|0;e:{t:{n:{r:{o:{switch((n=(n=(0|(n=s[e>>2]))!=s[e+4>>2]?i[0|n]:0)<<24>>24)-74|0){case 1:break n;case 2:break r;case 0:break o}if(88!=(0|n))break n;if(s[e>>2]=s[e>>2]+1,!(n=S(e)))break t;return e=Wt(e,69),x=t+16|0,e?n:0}for(s[e>>2]=s[e>>2]+1,o=s[4+(n=e+8|0)>>2]-s[n>>2]>>2;!Wt(e,69);){if(r=ve(e),s[t+12>>2]=r,!r)break t;Qt(n,t+12|0)}Jt(t,e,o),e=function(e,t){var n,r,o;return x=r=x-16|0,n=ct(e,16),o=s[t+4>>2],e=s[t>>2],s[r>>2]=e,s[r+4>>2]=o,s[r+8>>2]=e,s[r+12>>2]=o,i[n+7|0]=1,i[n+6|0]=1,i[n+5|0]=1,i[n+4|0]=33,s[n>>2]=5508,s[n>>2]=13500,e=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=e,x=r+16|0,n}(e+416|0,t);break e}if(n=s[e>>2],90==(255&(n=s[e+4>>2]-n>>>0>1?A[n+1|0]:0))){if(s[e>>2]=s[e>>2]+2,!(n=ie(e)))break t;e=Wt(e,69)?n:0;break e}e=j(e);break e}e=R(e);break e}e=0}return x=t+16|0,e}function be(e,t){var n,r=0,o=0,a=0,l=0,c=0,u=0,d=0,f=0,p=0;x=n=x-48|0;e:if(Wt(e,73)){t&&(s[4+(r=o=e+332|0)>>2]=s[r>>2],r=e+288|0,s[n+16>>2]=r,Qt(o,n+16|0),s[r+4>>2]=s[r>>2]),o=e+332|0,c=s[4+(r=a=e+8|0)>>2]-s[r>>2]>>2;t:{for(;!Wt(e,69);)if(t){if(l=qe(n+16|0,o),r=ve(e),s[n+12>>2]=r,xe(o,l),!r)break t;Qt(a,n+12|0),s[n+8>>2]=r,33==A[r+4|0]&&(u=s[r+12>>2],s[n>>2]=s[r+8>>2],s[n+4>>2]=u,f=n,p=xt(e+416|0,n),s[f+8>>2]=p),Qt(s[s[o+4>>2]-4>>2],n+8|0),Bn(l)}else{if(r=ve(e),s[n+16>>2]=r,!r)break e;Qt(a,n+16|0)}Jt(n+16|0,e,c),d=function(e,t){var n,r,o;return x=r=x-16|0,n=ct(e,16),o=s[t+4>>2],e=s[t>>2],s[r>>2]=e,s[r+4>>2]=o,s[r+8>>2]=e,s[r+12>>2]=o,i[n+7|0]=1,i[n+6|0]=1,i[n+5|0]=1,i[n+4|0]=35,s[n>>2]=5508,s[n>>2]=13152,e=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=e,x=r+16|0,n}(e+416|0,n+16|0);break e}Bn(l)}return x=n+48|0,d}function Ce(e){var t=0,n=0,r=0,o=0,i=0,a=0;e:{t:if(e){if(t=-64,s[e+29568>>2])break e;o=s[e+29556>>2],n=s[e+29552>>2];n:if(t=s[e+29576>>2]){i=s[t+27320>>2],r=s[t+27316>>2];r:{o:{if(a=s[t>>2]){if(!r)break o;Jn[0|r](i,a),Jn[0|r](i,t);break n}if(!r)break r;Jn[0|r](i,t);break n}z(a)}z(t)}s[e+29592>>2]=0,s[e+29576>>2]=0,s[e+29580>>2]=0;n:{r:{if(t=s[e+29600>>2]){if(!n)break r;Jn[0|n](o,t),s[e+29600>>2]=0,Jn[0|n](o,e);break t}if(s[e+29600>>2]=0,!n)break n;Jn[0|n](o,e);break t}z(t),s[e+29600>>2]=0}z(e)}t=0}return t}function Ie(e){var t,n=0,r=0;return x=t=x-48|0,((n=(0|(n=s[e>>2]))!=s[e+4>>2]?i[0|n]:0)<<24>>24)-48>>>0<=9?n=$e(e):(n=on(t+40|0,9500),r=s[n+4>>2],s[t+16>>2]=s[n>>2],s[t+20>>2]=r,Je(e,t+16|0)?n=function(e){var t,n,r=0;return x=t=x-16|0,n=t,r=((r=(0|(r=s[e>>2]))!=s[e+4>>2]?i[0|r]:0)<<24>>24)-48>>>0<=9?$e(e):Ue(e),s[n+12>>2]=r,e=r?function(e,t){return e=ct(e,12),t=s[t>>2],i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=43,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=9516,e}(e+416|0,t+12|0):0,x=t+16|0,e}(e):(n=on(t+32|0,9503),r=s[n+4>>2],s[t+8>>2]=s[n>>2],s[t+12>>2]=r,Je(e,t+8|0),r=M(e,0),s[t+28>>2]=r,n=0,r&&(n=r,73==(255&(r=(0|(r=s[e>>2]))!=s[e+4>>2]?A[0|r]:0))&&(n=be(e,0),s[t+24>>2]=n,n=n?An(e,t+28|0,t+24|0):0)))),x=t+48|0,n}function Ee(e,t){var n,r=0,o=0;x=n=x-32|0;e:{t:{n:{if(85!=(0|(r=(r=(0|(r=s[e>>2]))!=s[e+4>>2]?i[0|r]:0)<<24>>24)))if((r-49&255)>>>0<=8)t=Pe(e);else{if(r=on(n+24|0,12598),o=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=o,Je(e,n+8|0)){for(r=s[4+(r=t=e+8|0)>>2]-s[r>>2]>>2;;){if(o=Pe(e),s[n+16>>2]=o,!o)break n;if(Qt(t,n+16|0),Wt(e,69))break}Jt(n+16|0,e,r),t=function(e,t){var n,r,o;return x=r=x-16|0,n=ct(e,16),o=s[t+4>>2],e=s[t>>2],s[r>>2]=e,s[r+4>>2]=o,s[r+8>>2]=e,s[r+12>>2]=o,i[n+7|0]=1,i[n+6|0]=1,i[n+5|0]=1,i[n+4|0]=46,s[n>>2]=5508,s[n>>2]=12612,e=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=e,x=r+16|0,n}(e+416|0,n+16|0);break t}t=M(e,t)}else t=$(e,t);if(t)break t}e=0;break e}e=et(e,t)}return x=n+32|0,e}function xe(e,t){var n=0;if(n=s[e>>2]==(e+12|0),s[t>>2]!=(t+12|0)){if(n)return s[e>>2]=s[t>>2],s[e+4>>2]=s[t+4>>2],s[e+8>>2]=s[t+8>>2],s[t+8>>2]=t+28,e=t+12|0,s[t+4>>2]=e,void(s[t>>2]=e);n=s[e>>2],s[e>>2]=s[t>>2],s[t>>2]=n,n=s[e+4>>2],s[e+4>>2]=s[t+4>>2],s[t+4>>2]=n,n=s[e+8>>2],s[e+8>>2]=s[t+8>>2],s[t+8>>2]=n}else n||(z(s[e>>2]),s[e+8>>2]=e+28,n=e+12|0,s[e+4>>2]=n,s[e>>2]=n),Dn(s[t>>2],s[t+4>>2],s[e>>2]),s[e+4>>2]=s[e>>2]+(s[t+4>>2]-s[t>>2]>>2<<2);s[t+4>>2]=s[t>>2]}function Be(e,t,n){var r=0,o=0;r=0!=(0|n);e:{t:{n:if(!(!n|!(3&e)))for(o=255&t;;){if((0|o)==A[0|e])break t;if(e=e+1|0,r=0!=(0|(n=n-1|0)),!n)break n;if(!(3&e))break}if(!r)break e}t:if(!(A[0|e]==(255&t)|n>>>0<4))for(r=m(255&t,16843009);;){if(~(o=r^s[e>>2])&o-16843009&-2139062144)break t;if(e=e+4|0,!((n=n-4|0)>>>0>3))break}if(n)for(t&=255;;){if((0|t)==A[0|e])return e;if(e=e+1|0,!(n=n-1|0))break}}return 0}function we(e,t,n,r,o,i){var a,l,c=0;if(!n)return-70;if(!o)return-20;a=n>>>8|0,c=m(n>>>0>o>>>0?(o<<4>>>0)/(n>>>0)|0:15,24);e:{if((l=m(a,s[c+1068>>2])+s[c+1064>>2]|0)+(l>>>3|0)>>>0<s[c+1056>>2]+m(s[c+1060>>2],a)>>>0){if((i=F(e,r,o,i,2048))>>>0>4294967176)return i;if(c=-72,o>>>0<=i>>>0)break e;return T(t,n,r+i|0,o-i|0,e)}if((i=P(e,r,o,i))>>>0>4294967176)return i;c=-72,o>>>0<=i>>>0||(c=Q(t,n,r+i|0,o-i|0,e))}return c}function _e(e){var t,n=0,r=0,o=0;x=t=x-48|0,n=on(t+40|0,8260),r=s[n+4>>2],s[t+16>>2]=s[n>>2],s[t+20>>2]=r;e:if(Je(e,t+16|0)){if(dt(e),We(t+32|0,e,0),!Wt(e,95))break e;o=Un(e,t+32|0)}else n=on(t+24|0,8263),r=s[n+4>>2],s[t+8>>2]=s[n>>2],s[t+12>>2]=r,Je(e,t+8|0)&&(We(t+32|0,e,0),s[t+32>>2]!=s[t+36>>2]&&Wt(e,112)&&(dt(e),We(t+32|0,e,0),Wt(e,95)&&(o=Un(e,t+32|0))));return x=t+48|0,o}function Se(e,t,n){var r=0,o=0,i=0,a=0;return r=31&(i=a=63&n),i>>>0>=32?r=-1>>>r|0:(o=-1>>>r|0,r=(1<<r)-1<<32-r|-1>>>r),i=r&e,r=t&o,o=31&a,a>>>0>=32?(r=i<<o,a=0):(r=(1<<o)-1&i>>>32-o|r<<o,a=i<<o),i=r,n=31&(r=o=0-n&63),r>>>0>=32?(r=-1<<n,n=0):(r=(1<<n)-1&-1>>>32-n|-1<<n,n=-1<<n),e&=n,r&=t,t=31&o,o>>>0>=32?(n=0,e=r>>>t|0):(n=r>>>t|0,e=((1<<t)-1&r)<<32-t|e>>>t),w=n|i,e|a}function De(e,t){var n=0,r=0;e:if((0|e)!=(0|t)){if(95==(0|(n=i[0|e]))){if((e+1|0)==(0|t))break e;if((n=i[e+1|0])-48>>>0<=9)return e+2|0;if(95!=(0|n))break e;for(n=e+2|0;;){if((0|t)==(0|n))break e;if(!((r=i[0|n])-48>>>0<=9))break;n=n+1|0}return 95==(0|r)?n+1|0:e}if(!(n-48>>>0>9))for(n=e;;){if((0|(n=n+1|0))==(0|t))return t;if(!(i[0|n]-48>>>0<10))break}}return e}function Te(e,t){var n,r=0,o=0,i=0;x=n=x+-64|0,s[4+(r=e+8|0)>>2]&&(o=on(n+56|0,6130),i=s[o+4>>2],s[n+24>>2]=s[o>>2],s[n+28>>2]=i,Gt(t,n+24|0),Me(r,t),r=on(n+48|0,6118),o=s[r+4>>2],s[n+16>>2]=s[r>>2],s[n+20>>2]=o,Gt(t,n+16|0)),r=on(n+40|0,6516),o=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=o,Gt(t,n+8|0),Me(e+16|0,t),e=on(n+32|0,6042),r=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=r,Gt(t,n),x=n- -64|0}function ke(e,t){var n=0,r=0,o=0;r=1;e:if(!((0|(n=(n=(0|(n=s[e>>2]))!=s[e+4>>2]?i[0|n]:0)<<24>>24))<48|((n-65&255)>>>0>25?(0|n)>=58:0)))for(r=0;;){t:{if((0|(n=(n=(0|(n=s[e>>2]))!=s[e+4>>2]?i[0|n]:0)<<24>>24))>=48){if(o=-48,(0|n)<58)break t;if(o=-55,(n-65&255)>>>0<26)break t}s[t>>2]=r,r=0;break e}s[e>>2]=s[e>>2]+1,r=(m(r,36)+o|0)+(255&n)|0}return r}function Qe(e,t){e|=0,t|=0;var n,r=0,o=0;x=n=x-48|0,r=on(n+40|0,6516),o=s[r+4>>2],s[n+16>>2]=s[r>>2],s[n+20>>2]=o,Gt(t,n+16|0),r=s[e+8>>2],Jn[s[s[r>>2]+16>>2]](r,t),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,t),r=on(n+32|0,6042),o=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=o,Gt(t,n+8|0),r=s[e+16>>2],e=s[e+12>>2],s[n>>2]=e,s[n+4>>2]=r,s[n+24>>2]=e,s[n+28>>2]=r,Gt(t,n),x=n+48|0}function Me(e,t){var n,r=0,o=0,i=0,a=0,l=0;for(x=n=x-16|0,a=1;s[e+4>>2]!=(0|o);)l=s[t+4>>2],a||(r=on(n+8|0,7794),i=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=i,Gt(t,n)),i=s[t+4>>2],r=s[s[e>>2]+(o<<2)>>2],Jn[s[s[r>>2]+16>>2]](r,t),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,t),o=o+1|0,s[t+4>>2]==(0|i)?s[t+4>>2]=l:a=0;x=n+16|0}function Re(e,t,n,r){i[e+53|0]=1;e:if(s[e+4>>2]==(0|n)){if(i[e+52|0]=1,!(n=s[e+16>>2])){if(s[e+36>>2]=1,s[e+24>>2]=r,s[e+16>>2]=t,1!=(0|r)|1!=s[e+48>>2])break e;return void(i[e+54|0]=1)}if((0|t)==(0|n)){if(2==(0|(n=s[e+24>>2]))&&(s[e+24>>2]=r,n=r),1!=s[e+48>>2]|1!=(0|n))break e;return void(i[e+54|0]=1)}i[e+54|0]=1,s[e+36>>2]=s[e+36>>2]+1}}function Pe(e){var t,n=0,r=0,o=0;return x=t=x-32|0,s[t+28>>2]=0,Ne(e,t+28|0)||(r=s[t+28>>2])-1>>>0>=s[e+4>>2]-s[e>>2]>>>0||(n=t+16|0,o=s[e>>2],s[n+4>>2]=o+r,s[n>>2]=o,s[e>>2]=s[e>>2]+r,r=on(t+8|0,9358),o=s[r+4>>2],s[t>>2]=s[r>>2],s[t+4>>2]=o,n=zt(n,t)?Tt(e+416|0,9369):Fn(e,n)),x=t+32|0,n}function Oe(e){var t=0,n=0,r=0;e:{t:if(3&(t=e)){if(!A[0|e])return 0;for(;;){if(!(3&(t=t+1|0)))break t;if(!A[0|t])break}break e}for(;n=t,t=t+4|0,!(~(r=s[n>>2])&r-16843009&-2139062144););if(!(255&r))return n-e|0;for(;r=A[n+1|0],n=t=n+1|0,r;);}return t-e|0}function Fe(e,t,n,r,o,a){var l,c;return x=l=x-32|0,e=ct(e,32),c=s[t+4>>2],s[l+24>>2]=s[t>>2],s[l+28>>2]=c,t=s[n>>2],n=s[r+4>>2],s[l+16>>2]=s[r>>2],s[l+20>>2]=n,n=A[0|o],r=A[0|a],o=s[l+28>>2],s[l+8>>2]=s[l+24>>2],s[l+12>>2]=o,o=s[l+20>>2],s[l>>2]=s[l+16>>2],s[l+4>>2]=o,e=function(e,t,n,r,o,a){var l;return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=56,s[e>>2]=5508,s[e>>2]=11140,l=s[t+4>>2],t=s[t>>2],s[e+16>>2]=n,s[e+8>>2]=t,s[e+12>>2]=l,t=s[r+4>>2],n=s[r>>2],i[e+29|0]=a,i[e+28|0]=o,s[e+20>>2]=n,s[e+24>>2]=t,e}(e,l+8|0,t,l,n,r),x=l+32|0,e}function Ne(e,t){var n=0,r=0,o=0;s[t>>2]=0;e:if(!(r=(((n=(0|(n=s[e>>2]))!=s[e+4>>2]?i[0|n]:0)<<24>>24)-48&255)>>>0>9))for(;;){if((((n=(0|(n=s[e>>2]))!=s[e+4>>2]?i[0|n]:0)<<24>>24)-48&255)>>>0>9)break e;s[t>>2]=m(o,10),o=(Vt(e)+s[t>>2]|0)-48|0,s[t>>2]=o}return r}function Le(e){var t,n=0;x=t=x-16|0;e:if(Wt(e,104)){if(n=1,We(t+8|0,e,1),s[t+8>>2]==s[t+12>>2])break e;n=1^Wt(e,95)}else n=1,Wt(e,118)&&(We(t+8|0,e,1),s[t+8>>2]!=s[t+12>>2]&&Wt(e,95)&&(We(t,e,1),s[t>>2]!=s[t+4>>2]&&(n=1^Wt(e,95))));return x=t+16|0,n}function Ue(e){var t,n=0;x=t=x-16|0;e:{t:{if(68!=(0|(n=(n=(0|(n=s[e>>2]))!=s[e+4>>2]?i[0|n]:0)<<24>>24))){if(84!=(255&n))break t;if(n=ge(e),s[t+12>>2]=n,!n)break e;Qt(e+148|0,t+12|0);break e}if(n=st(e),s[t+8>>2]=n,!n)break e;Qt(e+148|0,t+8|0);break e}n=oe(e)}return x=t+16|0,n}function Ge(e,t){var n,r,o,i=0,a=0;return x=n=x-16|0,s[n+12>>2]=0,s[n+8>>2]=s[e+4>>2]-s[e>>2],x=a=x-16|0,x=a+16|0,a=-1,o=n+12|0,(r=s[e+4>>2]-s[e>>2]|0)>>>0<=(i=s[(p[(i=n+8|0)>>2]<p[o>>2]?i:o)>>2])>>>0||(t=Be(i+s[e>>2]|0,t,r-i|0))&&(a=t-s[e>>2]|0),x=n+16|0,a}function je(e,t){t|=0;var n,r,o=0;x=n=x-16|0,o=s[8+(e|=0)>>2],Jn[s[s[o>>2]+16>>2]](o,t),1!=A[o+5|0]&&Jn[s[s[o>>2]+20>>2]](o,t),o=on(n+8|0,5904),r=s[o+4>>2],s[n>>2]=s[o>>2],s[n+4>>2]=r,Gt(t,n),e=s[e+12>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),x=n+16|0}function ze(e,t,n){var r=0,o=0,a=0;if(t>>>0<1)r=e;else for(;r=zn(e,t,10),a=o=w,o=Tn(r,o,10,0),i[0|(n=n-1|0)]=e-o|48,o=t>>>0>9,e=r,t=a,o;);if(r)for(;e=(r>>>0)/10|0,i[0|(n=n-1|0)]=r-m(e,10)|48,t=r>>>0>9,r=e,t;);return n}function He(e,t){var n,r=0,o=0;x=n=x-16|0,s[n+12>>2]=0,!Ne(t,n+12|0)&&(r=s[n+12>>2])>>>0<=s[t+4>>2]-s[t>>2]>>>0?(o=s[t>>2],s[n+4>>2]=o+r,s[n>>2]=o,s[t>>2]=s[t>>2]+r,t=s[n+4>>2],s[e>>2]=s[n>>2],s[e+4>>2]=t):(s[e>>2]=0,s[e+4>>2]=0),x=n+16|0}function Ve(e){var t,n=0;return p[e+20>>2]<=p[e+28>>2]||(Jn[s[e+36>>2]](e,0,0),s[e+20>>2])?((n=s[e+4>>2])>>>0<(t=s[e+8>>2])>>>0&&(n=n-t|0,Jn[s[e+40>>2]](e,n,n>>31,1)),s[e+28>>2]=0,s[e+16>>2]=0,s[e+20>>2]=0,s[e+4>>2]=0,s[e+8>>2]=0,0):-1}function qe(e,t){var n;return e=Rt(e),s[t>>2]==(t+12|0)?(Dn(s[t>>2],s[t+4>>2],s[e>>2]),s[e+4>>2]=s[e>>2]+(s[t+4>>2]-s[t>>2]>>2<<2),s[t+4>>2]=s[t>>2],e):(s[e>>2]=s[t>>2],s[e+4>>2]=s[t+4>>2],s[e+8>>2]=s[t+8>>2],s[t+8>>2]=t+28,n=t+12|0,s[t+4>>2]=n,s[t>>2]=n,e)}function Ye(e){var t=0,n=0;return e=s[e>>2],!(t=s[e+4>>2]-s[e>>2]|0)||(255&(e=((e=(0|(n=s[e>>2]))!=s[e+4>>2]?i[0|n]:0)<<24>>24)-46|0))>>>0>49?!t:(t=31&e,1&((63&e)>>>0>=32?131072>>>t:((1<<t)-1&131072)<<32-t|8388609>>>t))}function Xe(e,t){var n,r,o=0;if(d(+e),o=0|l(1),n=0|l(0),r=o,2047!=(0|(o=o>>>20&2047))){if(!o)return o=t,0==e?t=0:(e=Xe(0x10000000000000000*e,t),t=s[t>>2]+-64|0),s[o>>2]=t,e;s[t>>2]=o-1022,c(0,0|n),c(1,-2146435073&r|1071644672),e=+u()}return e}function We(e,t,n){var r;if(r=s[t>>2],n&&Wt(t,110),s[t+4>>2]!=s[t>>2]&&(n=s[t>>2],!(i[0|n]-48>>>0>=10))){for(;!(s[t+4>>2]==s[t>>2]|i[0|n]-48>>>0>9);)n=n+1|0,s[t>>2]=n;return s[e+4>>2]=n,void(s[e>>2]=r)}s[e>>2]=0,s[e+4>>2]=0}function Ke(e,t){var n,r=0;return x=n=x-16|0,s[n+12>>2]=t,t?(r=s[e>>2],s[r>>2]?(t=function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=23,s[e>>2]=5508,s[e+12>>2]=n,s[e+8>>2]=t,s[e>>2]=5808,e}(ct(s[e+4>>2]+416|0,16),s[r>>2],s[n+12>>2]),s[s[e>>2]>>2]=t):s[r>>2]=t,(t=s[s[e+8>>2]>>2])&&(i[t+1|0]=0),e=0!=s[s[e>>2]>>2]):e=0,x=n+16|0,e}function Je(e,t){var n,r,o=0,i=0;return x=n=x-32|0,i=s[e>>2],s[4+(o=n+24|0)>>2]=s[e+4>>2],s[o>>2]=i,i=s[t+4>>2],r=s[t>>2],s[n+8>>2]=r,s[n+12>>2]=i,s[n+16>>2]=r,s[n+20>>2]=i,(o=zt(o,n+8|0))&&(s[e>>2]=s[e>>2]+(s[t+4>>2]-s[t>>2]|0)),x=n+32|0,o}function Ze(e,t){var n=0,r=0;return e?t>>>0>=4294967232?(s[4041]=48,0):(n=function(e,t){var n,r,o=0,i=0,a=0,l=0,c=0,u=0,d=0,A=0,f=0;n=(i=-8&(r=s[e+4>>2]))+e|0;e:{if(!(o=3&r)){if(o=0,t>>>0<256)break e;if(i>>>0>=t+4>>>0&&(o=e,i-t>>>0<=s[4162]<<1>>>0))break e;return 0}t:if(t>>>0<=i>>>0){if((o=i-t|0)>>>0<16)break t;s[e+4>>2]=1&r|t|2,s[4+(t=e+t|0)>>2]=3|o,s[n+4>>2]=1|s[n+4>>2],H(t,o)}else if(o=0,s[4048]!=(0|n))if(s[4047]!=(0|n)){if(2&(a=s[n+4>>2]))break e;if((l=i+(-8&a)|0)>>>0<t>>>0)break e;u=l-t|0;n:if(a>>>0<=255){if(o=s[n+8>>2],a=a>>>3|0,(0|(i=s[n+12>>2]))==(0|o)){A=16168,f=s[4042]&sn(a),s[A>>2]=f;break n}s[o+12>>2]=i,s[i+8>>2]=o}else{if(c=s[n+24>>2],(0|n)==(0|(i=s[n+12>>2])))if((a=s[(o=n+20|0)>>2])||(a=s[(o=n+16|0)>>2])){for(;d=o,(a=s[(o=(i=a)+20|0)>>2])||(o=i+16|0,a=s[i+16>>2]););s[d>>2]=0}else i=0;else o=s[n+8>>2],s[o+12>>2]=i,s[i+8>>2]=o;if(c){o=s[n+28>>2];r:{if(s[(a=16472+(o<<2)|0)>>2]==(0|n)){if(s[a>>2]=i,i)break r;A=16172,f=s[4043]&sn(o),s[A>>2]=f;break n}if(s[c+(s[c+16>>2]==(0|n)?16:20)>>2]=i,!i)break n}s[i+24>>2]=c,(o=s[n+16>>2])&&(s[i+16>>2]=o,s[o+24>>2]=i),(o=s[n+20>>2])&&(s[i+20>>2]=o,s[o+24>>2]=i)}}u>>>0<=15?(s[e+4>>2]=1&r|l|2,s[4+(t=e+l|0)>>2]=1|s[t+4>>2]):(s[e+4>>2]=1&r|t|2,s[4+(t=e+t|0)>>2]=3|u,s[4+(o=e+l|0)>>2]=1|s[o+4>>2],H(t,u))}else{if((i=i+s[4044]|0)>>>0<t>>>0)break e;(o=i-t|0)>>>0>=16?(s[e+4>>2]=1&r|t|2,s[4+(t=e+t|0)>>2]=1|o,s[(i=e+i|0)>>2]=o,s[i+4>>2]=-2&s[i+4>>2]):(s[e+4>>2]=i|1&r|2,s[4+(t=e+i|0)>>2]=1|s[t+4>>2],o=0,t=0),s[4047]=t,s[4044]=o}else{if((i=i+s[4045]|0)>>>0<=t>>>0)break e;s[e+4>>2]=1&r|t|2,o=e+t|0,t=i-t|0,s[o+4>>2]=1|t,s[4045]=t,s[4048]=o}o=e}return o}(e-8|0,t>>>0<11?16:t+11&-8))?n+8|0:(n=D(t))?(te(n,e,t>>>0>(r=(3&(r=s[e-4>>2])?-4:-8)+(-8&r)|0)>>>0?r:t),z(e),n):0:D(t)}function $e(e){var t,n=0,r=0;return x=t=x-16|0,n=Pe(e),s[t+12>>2]=n,n?73==(255&(r=(0|(r=s[e>>2]))!=s[e+4>>2]?A[0|r]:0))&&(n=be(e,0),s[t+8>>2]=n,n=n?An(e,t+12|0,t+8|0):0):n=0,x=t+16|0,n}function et(e,t){var n,r=0,o=0;x=n=x-16|0,s[n+12>>2]=t;e:{t:{for(;;){if(!Wt(e,66))break t;if(He(n,e),s[n>>2]==s[n+4>>2])break;r=n,o=mt(e+416|0,n+12|0,n),s[r+12>>2]=o}e=0;break e}e=s[n+12>>2]}return x=n+16|0,e}function tt(e,t){var n,r;return x=n=x-16|0,s[n+12>>2]=t,e=s[e>>2],t=s[396+(r=e+(t<<2)|0)>>2],s[r+396>>2]=t+1,s[n+8>>2]=t,t=function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=27,s[e>>2]=5508,s[e+12>>2]=n,s[e+8>>2]=t,s[e>>2]=7276,e}(ct(e+416|0,16),s[n+12>>2],s[n+8>>2]),s[n+4>>2]=t,Qt(s[s[e+336>>2]-4>>2],n+4|0),x=n+16|0,t}function nt(e,t,n){var r,o,a;return x=r=x-32|0,o=ct(e,28),e=on(r+24|0,t),n=s[n>>2],t=on(r+16|0,6042),a=s[e+4>>2],s[r+8>>2]=s[e>>2],s[r+12>>2]=a,e=s[t+4>>2],s[r>>2]=s[t>>2],s[r+4>>2]=e,e=function(e,t,n,r){var o;return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=52,s[e>>2]=5508,s[e>>2]=11256,o=s[t+4>>2],t=s[t>>2],s[e+16>>2]=n,s[e+8>>2]=t,s[e+12>>2]=o,t=s[r+4>>2],s[e+20>>2]=s[r>>2],s[e+24>>2]=t,e}(o,r+8|0,n,r),x=r+32|0,e}function rt(e,t,n,r,o,a,l){var c,u;return x=c=x-16|0,u=ct(e,36),n=s[n>>2],t=s[t>>2],e=s[r+4>>2],r=s[r>>2],s[c+8>>2]=r,s[c+12>>2]=e,l=A[0|l],a=s[a>>2],o=s[o>>2],s[c>>2]=r,s[c+4>>2]=e,e=function(e,t,n,r,o,a,l){return i[e+7|0]=0,i[e+6|0]=1,i[e+5|0]=0,i[e+4|0]=18,s[e>>2]=5508,s[e+12>>2]=n,s[e+8>>2]=t,s[e>>2]=13740,t=s[r+4>>2],n=s[r>>2],i[e+32|0]=l,s[e+28>>2]=a,s[e+24>>2]=o,s[e+16>>2]=n,s[e+20>>2]=t,e}(u,t,n,c,o,a,l),x=c+16|0,e}function ot(e,t,n){var r=0;for(s[e>>2]=s[t+12>>2],s[e+4>>2]=s[t+8>>2],t=s[e+4>>2];r=0|Jn[s[s[t>>2]+12>>2]](t,n),12==A[r+4|0];)t=s[r+8>>2],s[e+4>>2]=t,r=r+12|0,s[e>>2]=s[(s[r>>2]<s[e>>2]?r:e)>>2]}function it(e,t,n){var r;if(!(r=s[e+16>>2]))return s[e+36>>2]=1,s[e+24>>2]=n,void(s[e+16>>2]=t);e:{if((0|t)==(0|r)){if(2!=s[e+24>>2])break e;return void(s[e+24>>2]=n)}i[e+54|0]=1,s[e+24>>2]=2,s[e+36>>2]=s[e+36>>2]+1}}function at(e,t,n,r,o,a){var l,c;return x=l=x-16|0,c=ct(e,32),t=s[t>>2],e=s[n+4>>2],n=s[n>>2],s[l+8>>2]=n,s[l+12>>2]=e,a=s[a>>2],o=A[0|o],r=s[r>>2],s[l>>2]=n,s[l+4>>2]=e,e=function(e,t,n,r,o,a){return i[e+7|0]=0,i[e+6|0]=1,i[e+5|0]=0,i[e+4|0]=15,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=14492,t=s[n+4>>2],n=s[n>>2],s[e+28>>2]=a,i[e+24|0]=o,s[e+20>>2]=r,s[e+12>>2]=n,s[e+16>>2]=t,e}(c,t,l,r,o,a),x=l+16|0,e}function st(e){var t,n=0,r=0;return x=t=x-16|0,Wt(e,68)&&(Wt(e,116)||Wt(e,84))&&(n=S(e),s[t+12>>2]=n,n&&Wt(e,69)&&(r=Qn(e,6032,t+12|0))),x=t+16|0,r}function lt(e,t,n,r,o){var i;if(x=i=x-256|0,!(73728&o|(0|n)<=(0|r))){if(fe(i,255&t,(r=(n=n-r|0)>>>0<256)?n:256),!r)for(;_n(e,i,256),(n=n-256|0)>>>0>255;);_n(e,i,n)}x=i+256|0}function ct(e,t){var n=0,r=0,o=0;if(n=s[e+4096>>2],(o=(r=s[n+4>>2])+(t=t+15&-16)|0)>>>0>=4088){if(t>>>0>=4089)return function(e,t){var n;return(t=D(t+8|0))||(Jn[s[3983]](),b()),e=s[e+4096>>2],n=s[e>>2],s[t+4>>2]=0,s[t>>2]=n,s[e>>2]=t,t+8|0}(e,t);!function(e){var t,n;(t=D(4096))||(Jn[s[3983]](),b()),n=s[e+4096>>2],s[t+4>>2]=0,s[t>>2]=n,s[e+4096>>2]=t}(e),n=s[e+4096>>2],o=t+(r=s[n+4>>2])|0}return s[n+4>>2]=o,8+(n+r|0)|0}function ut(e){var t,n,r=0;x=t=x-16|0,r=s[e+4>>2],an(s[e>>2],40),r=Yt(t,s[r+8>>2]),n=s[e>>2],Jn[s[s[r>>2]+16>>2]](r,n),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,n),an(s[e>>2],41),x=t+16|0}function dt(e){var t;return x=t=x-16|0,s[t+12>>2]=0,Wt(e,114)&&(s[t+12>>2]=4|s[t+12>>2]),Wt(e,86)&&(s[t+12>>2]=2|s[t+12>>2]),Wt(e,75)&&(s[t+12>>2]=1|s[t+12>>2]),x=t+16|0,s[t+12>>2]}function At(e){var t;return s[e+12>>2]=0,s[e+16>>2]=0,s[e+8>>2]=e+44,t=e+12|0,s[e+4>>2]=t,s[e>>2]=t,s[e+20>>2]=0,s[e+24>>2]=0,s[e+28>>2]=0,s[e+32>>2]=0,s[e+36>>2]=0,s[e+40>>2]=0,e}function ft(e){var t,n;return(e=(t=s[3982])+(n=e+3&-4)|0)>>>0<=t>>>0&&(0|n)>=1||e>>>0>Zn()<<16>>>0&&!(0|C(0|e))?(s[4041]=48,-1):(s[3982]=e,t)}function pt(e,t){var n=0;(t=s[e+4>>2]+t|0)>>>0<(n=s[e+8>>2])>>>0||(t=t>>>0>(n<<=1)>>>0?t:n,s[e+8>>2]=t,n=e,e=Ze(s[e>>2],t),s[n>>2]=e,e||(Jn[s[3983]](),b()))}function ht(e,t){var n,r=0;return x=n=x-16|0,r=S(e),s[n+12>>2]=r,e=r&&(r=S(e),s[n+8>>2]=r,r)?function(e,t,n,r){var o,a;return x=o=x-16|0,a=ct(e,24),t=s[t>>2],e=s[n+4>>2],n=s[n>>2],s[o+8>>2]=n,s[o+12>>2]=e,r=s[r>>2],s[o>>2]=n,s[o+4>>2]=e,e=function(e,t,n,r){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=47,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=8708,t=s[n+4>>2],n=s[n>>2],s[e+20>>2]=r,s[e+12>>2]=n,s[e+16>>2]=t,e}(a,t,o,r),x=o+16|0,e}(e+416|0,n+12|0,t,n+8|0):0,x=n+16|0,e}function gt(e){var t=0,n=0,r=0;if(i[s[e>>2]]-48>>>0<10)for(;t=s[e>>2],r=i[0|t],s[e>>2]=t+1,n=(m(n,10)+r|0)-48|0,i[t+1|0]-48>>>0<10;);return n}function mt(e,t,n){var r,o;return x=r=x-16|0,o=ct(e,20),t=s[t>>2],e=s[n+4>>2],n=s[n>>2],s[r>>2]=n,s[r+4>>2]=e,s[r+8>>2]=n,s[r+12>>2]=e,e=function(e,t,n){var r,o;return r=A[t+5|0],o=A[t+6|0],i[e+7|0]=A[t+7|0],i[e+6|0]=o,i[e+5|0]=r,i[e+4|0]=8,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=12496,t=s[n+4>>2],s[e+12>>2]=s[n>>2],s[e+16>>2]=t,e}(o,t,r),x=r+16|0,e}function yt(e,t,n,r){var o,a;return x=o=x-16|0,a=ct(e,24),t=s[t>>2],e=on(o+8|0,n),n=s[r>>2],r=s[e+4>>2],s[o>>2]=s[e>>2],s[o+4>>2]=r,e=function(e,t,n,r){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=51,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=10468,t=s[n+4>>2],n=s[n>>2],s[e+20>>2]=r,s[e+12>>2]=n,s[e+16>>2]=t,e}(a,t,o,n),x=o+16|0,e}function vt(e,t,n,r){var o,a;return x=o=x-16|0,a=ct(e,24),e=on(o+8|0,t),t=s[r>>2],n=s[n>>2],r=s[e+4>>2],s[o>>2]=s[e>>2],s[o+4>>2]=r,e=function(e,t,n,r){var o;return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=53,s[e>>2]=5508,s[e>>2]=8924,o=s[t+4>>2],t=s[t>>2],s[e+20>>2]=r,s[e+16>>2]=n,s[e+8>>2]=t,s[e+12>>2]=o,e}(a,o,n,t),x=o+16|0,e}function bt(e,t){var n,r,o;return x=n=x-16|0,s[e>>2]=t,t=t+332|0,s[e+4>>2]=s[t+4>>2]-s[t>>2]>>2,r=n,o=At(e+8|0),s[r+12>>2]=o,Qt(t,n+12|0),x=n+16|0,e}function Ct(e){var t,n=0;return x=t=x-16|0,e=s[e+8>>2],7==A[e+4|0]&&(n=s[e+12>>2],s[t+8>>2]=s[e+8>>2],s[t+12>>2]=n,n=jt(t+8|0,on(t,15644))),x=t+16|0,n}function It(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=61,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=10916,t=s[n+4>>2],s[e+12>>2]=s[n>>2],s[e+16>>2]=t,e}function Et(e,t){var n,r=0;return x=n=x-16|0,We(n+8|0,e,1),s[n+8>>2]!=s[n+12>>2]&&Wt(e,69)&&(r=function(e,t,n){var r,o,a,l;return x=r=x-32|0,l=ct(e,24),o=s[t+4>>2],t=s[t>>2],s[r+24>>2]=t,s[r+28>>2]=o,a=s[n+4>>2],e=s[n>>2],s[r+16>>2]=e,s[r+20>>2]=a,s[r+8>>2]=t,s[r+12>>2]=o,s[r>>2]=e,s[r+4>>2]=a,e=function(e,t,n){var r;return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=69,s[e>>2]=5508,s[e>>2]=6416,r=s[t+4>>2],s[e+8>>2]=s[t>>2],s[e+12>>2]=r,t=s[n+4>>2],s[e+16>>2]=s[n>>2],s[e+20>>2]=t,e}(l,r+8|0,r),x=r+32|0,e}(e+416|0,t,n+8|0)),x=n+16|0,r}function xt(e,t){var n,r;return x=n=x-16|0,r=ct(e,16),e=s[t+4>>2],t=s[t>>2],s[n>>2]=t,s[n+4>>2]=e,s[n+8>>2]=t,s[n+12>>2]=e,e=function(e,t){var n,r,o;return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=32,s[e>>2]=5508,s[e>>2]=13044,n=s[t+4>>2],t=s[t>>2],i[e+7|0]=2,s[e+8>>2]=t,s[e+12>>2]=n,i[e+5|0]=2,i[e+6|0]=2,r=e,o=function(e,t){for(var n=0,r=0;!(n=(0|e)==(0|t))&&(r=s[e>>2],e=e+4|0,1==A[r+6|0]););return n}(s[(t=e+8|0)>>2],s[t>>2]+(s[t+4>>2]<<2)|0)?1:2,i[r+6|0]=o,function(e,t){for(var n=0,r=0;!(n=(0|e)==(0|t))&&(r=s[e>>2],e=e+4|0,1==A[r+7|0]););return n}(s[t>>2],s[t>>2]+(s[t+4>>2]<<2)|0)&&(i[e+7|0]=1),function(e,t){for(var n=0,r=0;!(n=(0|e)==(0|t))&&(r=s[e>>2],e=e+4|0,1==A[r+5|0]););return n}(s[t>>2],s[t>>2]+(s[t+4>>2]<<2)|0)&&(i[e+5|0]=1),e}(r,n),x=n+16|0,e}function Bt(e,t,n){var r,o;return x=r=x-16|0,o=ct(e,20),e=on(r+8|0,t),t=s[n>>2],n=s[e+4>>2],s[r>>2]=s[e>>2],s[r+4>>2]=n,e=function(e,t,n){var r;return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=20,s[e>>2]=5508,s[e>>2]=5356,r=s[t+4>>2],t=s[t>>2],s[e+16>>2]=n,s[e+8>>2]=t,s[e+12>>2]=r,e}(o,r,t),x=r+16|0,e}function wt(e,t,n){var r,o;return x=r=x-16|0,e=ct(e,20),t=s[t>>2],n=on(r+8|0,n),o=s[n+4>>2],s[r>>2]=s[n>>2],s[r+4>>2]=o,e=function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=5,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=15772,t=s[n+4>>2],s[e+12>>2]=s[n>>2],s[e+16>>2]=t,e}(e,t,r),x=r+16|0,e}function _t(e,t){var n;return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=7,s[e>>2]=5508,s[e>>2]=5708,n=s[t+4>>2],s[e+8>>2]=s[t>>2],s[e+12>>2]=n,e}function St(e,t,n){var r;return x=r=x-16|0,s[r+12>>2]=n,s[e>>2]=t,t=s[t>>2],i[e+8|0]=1,s[e+4>>2]=t,s[s[e>>2]>>2]=s[r+12>>2],x=r+16|0,e}function Dt(e,t){var n;return x=n=x-16|0,s[n+12>>2]=-1,s[e>>2]=t,t=s[t>>2],i[e+8|0]=1,s[e+4>>2]=t,s[s[e>>2]>>2]=s[n+12>>2],x=n+16|0,e}function Tt(e,t){var n,r;return x=n=x-16|0,e=ct(e,16),t=on(n+8|0,t),r=s[t+4>>2],s[n>>2]=s[t>>2],s[n+4>>2]=r,e=_t(e,n),x=n+16|0,e}function kt(e,t,n,r){if(e|t)for(;i[0|(n=n-1|0)]=A[4544+(15&e)|0]|r,(e=(15&t)<<28|e>>>4)|(t=t>>>4|0););return n}function Qt(e,t){var n=0;(0|(n=s[e+4>>2]))==s[e+8>>2]&&(function(e,t){var n,r=0;n=s[e+4>>2]-s[e>>2]>>2;e:{if(s[e>>2]!=(e+12|0)){if(r=Ze(s[e>>2],t<<2),s[e>>2]=r,!r)break e}else{if(!(r=D(t<<2)))break e;Dn(s[e>>2],s[e+4>>2],r),s[e>>2]=r}return s[e+8>>2]=(t<<2)+r,void(s[e+4>>2]=(n<<2)+r)}Jn[s[3983]](),b()}(e,s[e+4>>2]-s[e>>2]>>2<<1),n=s[e+4>>2]),t=s[t>>2],s[e+4>>2]=n+4,s[n>>2]=t}function Mt(e,t,n){var r;return x=r=x-16|0,i[r+15|0]=n,s[e>>2]=t,t=A[0|t],i[e+5|0]=1,i[e+4|0]=t,i[s[e>>2]]=A[r+15|0],x=r+16|0,e}function Rt(e){var t;return s[e+12>>2]=0,s[e+16>>2]=0,s[e+8>>2]=e+28,t=e+12|0,s[e+4>>2]=t,s[e>>2]=t,s[e+20>>2]=0,s[e+24>>2]=0,e}function Pt(e,t){var n,r;x=n=x-16|0,r=s[t+4>>2],t=s[t>>2],s[n>>2]=t,s[n+4>>2]=r,s[n+8>>2]=t,s[n+12>>2]=r,Gt(e,n),x=n+16|0}function Ot(e,t){var n;return t|=0,e=s[12+(e|=0)>>2],0|(2==(0|(n=A[e+5|0]))?0|Jn[s[s[e>>2]>>2]](e,t):!n)}function Ft(e,t){var n;return t|=0,e=s[8+(e|=0)>>2],0|(2==(0|(n=A[e+5|0]))?0|Jn[s[s[e>>2]>>2]](e,t):!n)}function Nt(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=25,s[e>>2]=5508,s[e+12>>2]=n,s[e+8>>2]=t,s[e>>2]=15060,e}function Lt(e,t,n){if(e|t)for(;i[0|(n=n-1|0)]=7&e|48,(e=(7&t)<<29|e>>>3)|(t=t>>>3|0););return n}function Ut(e,t){var n,r;return x=n=x-16|0,r=S(e),s[n+12>>2]=r,e=r?function(e,t,n){var r,o;return x=r=x-16|0,o=ct(e,20),e=s[t+4>>2],t=s[t>>2],s[r+8>>2]=t,s[r+12>>2]=e,n=s[n>>2],s[r>>2]=t,s[r+4>>2]=e,e=function(e,t,n){var r;return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=58,s[e>>2]=5508,s[e>>2]=8820,r=s[t+4>>2],t=s[t>>2],s[e+16>>2]=n,s[e+8>>2]=t,s[e+12>>2]=r,e}(o,r,n),x=r+16|0,e}(e+416|0,t,n+12|0):0,x=n+16|0,e}function Gt(e,t){var n;(n=s[t+4>>2]-s[t>>2]|0)&&(pt(e,n),de(s[e>>2]+s[e+4>>2]|0,s[t>>2],n),s[e+4>>2]=s[e+4>>2]+n)}function jt(e,t){return(s[e+4>>2]-s[e>>2]|0)==(s[t+4>>2]-s[t>>2]|0)?jn(s[e>>2],s[e+4>>2],s[t>>2]):0}function zt(e,t){return s[t+4>>2]-s[t>>2]>>>0<=s[e+4>>2]-s[e>>2]>>>0?jn(s[t>>2],s[t+4>>2],s[e>>2]):0}function Ht(e,t,n){return n?(0|e)==(0|t)?1:!function(e,t){var n=0,r=0;e:if(!(!(n=A[0|e])|(0|n)!=(0|(r=A[0|t]))))for(;;){if(r=A[t+1|0],!(n=A[e+1|0]))break e;if(t=t+1|0,e=e+1|0,(0|n)!=(0|r))break}return n-r|0}(s[e+4>>2],s[t+4>>2]):s[e+4>>2]==s[t+4>>2]}function Vt(e){var t,n=0;return n=0,(0|(t=s[e>>2]))!=s[e+4>>2]&&(s[e>>2]=t+1,n=A[0|t]),n<<24>>24}function qt(e,t,n){var r;r=s[t+4>>2]-s[t>>2]|0,n=s[t>>2]+(n>>>0<r>>>0?n:r)|0,s[e+4>>2]=s[t+4>>2],s[e>>2]=n}function Yt(e,t){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=34,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=8592,e}function Xt(e,t){t|=0,e=s[8+(e|=0)>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t)}function Wt(e,t){var n,r=0;return(0|(n=s[e>>2]))==s[e+4>>2]|i[0|n]!=(255&t)||(s[e>>2]=n+1,r=1),r}function Kt(e,t,n,r){Dn(n,r,n=ct(t+416|0,(t=r-n>>2)<<2)),s[e+4>>2]=t,s[e>>2]=n}function Jt(e,t,n){Kt(e,t,s[(e=t+8|0)>>2]+(n<<2)|0,s[e+4>>2]),s[e+4>>2]=s[e>>2]+(n<<2)}function Zt(e,t){var n;x=n=x-16|0,i[n+15|0]=A[0|e],i[0|e]=A[0|t],i[0|t]=A[n+15|0],x=n+16|0}function $t(e,t,n,r){var o;return x=o=x-16|0,s[o+12>>2]=r,e=function(e,t,n,r){var o,a=0;x=o=x-160|0,te(o+8|0,4600,144);e:{t:{if(t-1>>>0>=2147483647){if(t)break t;t=1,e=o+159|0}if(s[o+52>>2]=e,s[o+28>>2]=e,t=t>>>0>(a=-2-e|0)>>>0?a:t,s[o+56>>2]=t,e=e+t|0,s[o+36>>2]=e,s[o+24>>2]=e,e=function(e,t,n){var r,o=0,a=0;return x=r=x-208|0,s[r+204>>2]=n,fe(r+160|0,0,40),s[r+200>>2]=s[r+204>>2],(0|O(0,t,r+200|0,r+80|0,r+160|0))<0?t=-1:(s[e+76>>2],n=s[e>>2],i[e+74|0]<=0&&(s[e>>2]=-33&n),a=32&n,s[e+48>>2]?t=O(e,t,r+200|0,r+80|0,r+160|0):(s[e+48>>2]=80,s[e+16>>2]=r+80,s[e+28>>2]=r,s[e+20>>2]=r,n=s[e+44>>2],s[e+44>>2]=r,t=o=O(e,t,r+200|0,r+80|0,r+160|0),n&&(Jn[s[e+36>>2]](e,0,0),s[e+48>>2]=0,s[e+44>>2]=n,s[e+28>>2]=0,s[e+16>>2]=0,t=s[e+20>>2],s[e+20>>2]=0,t=t?o:-1)),n=e,e=s[e>>2],s[n>>2]=e|a,t=32&e?-1:t),x=r+208|0,t}(o+8|0,n,r),!t)break e;t=s[o+28>>2],i[t-((0|t)==s[o+24>>2])|0]=0;break e}s[4041]=61,e=-1}return x=o+160|0,e}(e,t,n,r),x=o+16|0,e}function en(e){var t;t=s[e>>2],s[t+336>>2]=s[t+332>>2]+(s[e+4>>2]<<2),Bn(e+8|0)}function tn(e){var t;s[e+8>>2]=e+140,t=e+12|0,s[e+4>>2]=t,s[e>>2]=t,fe(t,0,128)}function nn(e,t){var n;n=e|=0,e=s[12+(t|=0)>>2],Jn[s[s[e>>2]+24>>2]](n,e)}function rn(e,t){var n;n=e|=0,e=s[8+(t|=0)>>2],Jn[s[s[e>>2]+24>>2]](n,e)}function on(e,t){var n,r;return s[e>>2]=t,n=e,r=Oe(t)+t|0,s[n+4>>2]=r,e}function an(e,t){var n;pt(e,1),n=s[e+4>>2],s[e+4>>2]=n+1,i[s[e>>2]+n|0]=t}function sn(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function ln(e,t,n,r){return function(e,t,n,r){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=42,s[e>>2]=5508,s[e+16>>2]=r,i[e+12|0]=n,s[e+8>>2]=t,s[e>>2]=12388,e}(ct(e+416|0,20),s[t>>2],A[0|n],s[r>>2])}function cn(e,t,n,r){return function(e,t,n,r){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=73,s[e>>2]=5508,i[e+16|0]=r,s[e+12>>2]=n,s[e+8>>2]=t,s[e>>2]=10692,e}(ct(e+416|0,20),s[t>>2],s[n>>2],A[0|r])}function un(e,t,n,r){return function(e,t,n,r){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=57,s[e>>2]=5508,i[e+13|0]=r,i[e+12|0]=n,s[e+8>>2]=t,s[e>>2]=9244,e}(ct(e+416|0,16),s[t>>2],A[0|n],A[0|r])}function dn(e,t,n){return function(e,t,n){var r;return r=A[t+5|0],i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=r,i[e+4|0]=12,s[e>>2]=5508,i[e+16|0]=0,s[e+12>>2]=n,s[e+8>>2]=t,s[e>>2]=15664,e}(ct(e+416|0,20),s[t>>2],s[n>>2])}function An(e,t,n){return function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=37,s[e>>2]=5508,s[e+12>>2]=n,s[e+8>>2]=t,s[e>>2]=13260,e}(ct(e+416|0,16),s[t>>2],s[n>>2])}function fn(e,t,n){return function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=22,s[e>>2]=5508,s[e+12>>2]=n,s[e+8>>2]=t,s[e>>2]=9400,e}(ct(e+416|0,16),s[t>>2],s[n>>2])}function pn(e,t,n){return Nt(ct(e+416|0,16),s[t>>2],s[n>>2])}function hn(e,t,n){return function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=24,s[e>>2]=5508,s[e+12>>2]=n,s[e+8>>2]=t,s[e>>2]=12744,e}(ct(e+416|0,16),s[t>>2],s[n>>2])}function gn(e,t,n,r,o,i,a){return rt(e+416|0,t,n,r,o,i,a)}function mn(e,t,n,r,o,i){return Fe(e+416|0,t,n,r,o,i)}function yn(e,t){return function(e,t){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=65,s[e>>2]=5508,i[e+8|0]=t,s[e>>2]=6528,e}(ct(e+416|0,12),0!=s[t>>2])}function vn(e){return e?31-v(e-1^e)|0:32}function bn(e,t){return Yt(ct(e+416|0,12),s[t>>2])}function Cn(e,t){return function(e,t){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=41,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=12848,e}(ct(e+416|0,12),s[t>>2])}function In(e,t){return function(e,t){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=64,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=11828,e}(ct(e+416|0,12),s[t>>2])}function En(e,t){return function(e,t){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=4,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=10108,e}(ct(e+416|0,12),s[t>>2])}function xn(e,t){return function(e,t){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=38,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=10356,e}(ct(e+416|0,12),s[t>>2])}function Bn(e){s[e>>2]!=(e+12|0)&&z(s[e>>2])}function wn(e,t){return e?function(e,t){e:{if(e){if(t>>>0<=127)break e;if(s[s[4027]>>2]){if(t>>>0<=2047)return i[e+1|0]=63&t|128,i[0|e]=t>>>6|192,2;if(!(57344!=(-8192&t)&&t>>>0>=55296))return i[e+2|0]=63&t|128,i[0|e]=t>>>12|224,i[e+1|0]=t>>>6&63|128,3;if(t-65536>>>0<=1048575)return i[e+3|0]=63&t|128,i[0|e]=t>>>18|240,i[e+2|0]=t>>>6&63|128,i[e+1|0]=t>>>12&63|128,4}else if(57216==(-128&t))break e;s[4041]=25,e=-1}else e=1;return e}return i[0|e]=t,1}(e,t):0}function _n(e,t,n){32&A[0|e]||function(e,t,n){var r=0,o=0,a=0;e:{if(r=t,!(o=s[n+16>>2])){if(function(e){var t=0;return t=A[e+74|0],i[e+74|0]=t-1|t,8&(t=s[e>>2])?(s[e>>2]=32|t,-1):(s[e+4>>2]=0,s[e+8>>2]=0,t=s[e+44>>2],s[e+28>>2]=t,s[e+20>>2]=t,s[e+16>>2]=t+s[e+48>>2],0)}(n))break e;o=s[n+16>>2]}if(o-(a=s[n+20>>2])>>>0<r>>>0)return void Jn[s[n+36>>2]](n,e,t);t:if(!(i[n+75|0]<0)){for(o=t;;){if(!(r=o))break t;if(10==A[(o=r-1|0)+e|0])break}if(Jn[s[n+36>>2]](n,e,r)>>>0<r>>>0)break e;e=e+r|0,t=t-r|0,a=s[n+20>>2]}te(a,e,t),s[n+20>>2]=s[n+20>>2]+t}}(t,n,e)}function Sn(e,t,n,r){return yt(e+416|0,t,n,r)}function Dn(e,t,n){(t=t-e|0)&&de(n,e,t)}function Tn(e,t,n,r){return function(e,t,n,r){var o,i,a,s,l=0,c=0;return s=m(l=n>>>16|0,c=e>>>16|0),l=(65535&(c=((a=m(o=65535&n,i=65535&e))>>>16|0)+m(c,o)|0))+m(l,i)|0,e=(m(t,n)+s|0)+m(e,r)+(c>>>16)+(l>>>16)|0,w=e,65535&a|l<<16}(e,t,n,r)}function kn(e,t){return nt(e+416|0,6232,t)}function Qn(e,t,n){return nt(e+416|0,t,n)}function Mn(e,t,n){return function(e,t,n){var r,o;return x=r=x-16|0,o=ct(e,20),t=s[t>>2],e=s[n+4>>2],n=s[n>>2],s[r>>2]=n,s[r+4>>2]=e,s[r+8>>2]=n,s[r+12>>2]=e,e=function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=60,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=9132,t=s[n+4>>2],s[e+12>>2]=s[n>>2],s[e+16>>2]=t,e}(o,t,r),x=r+16|0,e}(e+416|0,t,n)}function Rn(e,t,n){return Bt(e+416|0,t,n)}function Pn(e,t,n){return function(e,t,n){var r,o;return x=r=x-16|0,e=ct(e,20),t=s[t>>2],n=on(r+8|0,n),o=s[n+4>>2],s[r>>2]=s[n>>2],s[r+4>>2]=o,e=function(e,t,n){return i[e+7|0]=1,i[e+6|0]=1,i[e+5|0]=1,i[e+4|0]=49,s[e>>2]=5508,s[e+8>>2]=t,s[e>>2]=11024,t=s[n+4>>2],s[e+12>>2]=s[n>>2],s[e+16>>2]=t,e}(e,t,r),x=r+16|0,e}(e+416|0,t,n)}function On(e,t){Me(8+(e|=0)|0,t|=0)}function Fn(e,t){return function(e,t){var n,r;return x=n=x-16|0,r=ct(e,16),e=s[t+4>>2],t=s[t>>2],s[n>>2]=t,s[n+4>>2]=e,s[n+8>>2]=t,s[n+12>>2]=e,e=_t(r,n),x=n+16|0,e}(e+416|0,t)}function Nn(e,t){return Tt(e+416|0,t)}function Ln(e,t){return 1}function Un(e,t){return function(e,t){var n,r,o;return x=r=x-16|0,n=ct(e,16),o=s[t+4>>2],e=s[t>>2],s[r>>2]=e,s[r+4>>2]=o,s[r+8>>2]=e,s[r+12>>2]=o,i[n+7|0]=1,i[n+6|0]=1,i[n+5|0]=1,i[n+4|0]=59,s[n>>2]=5508,s[n>>2]=8276,e=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=e,x=r+16|0,n}(e+416|0,t)}function Gn(e,t){return 0}function jn(e,t,n){return function(e,t,n){var r,o=0;for(x=r=x-16|0;!((o=(0|e)==(0|t))|A[0|e]!=A[0|n]);)n=n+1|0,e=e+1|0;return x=r+16|0,o}(e,t,n)}function zn(e,t,n){return function(e,t,n){var r=0,o=0,i=0,a=0,s=0,l=0,c=0,u=0,d=0;e:{t:{n:{r:{o:{i:{a:{s:{l:{if(r=t){if(!(o=n))break l;break s}return w=0,(e>>>0)/(n>>>0)|0}if(!e)break a;break i}if(!(o-1&o))break o;l=0-(s=(v(o)+33|0)-v(r)|0)|0;break n}return w=0,(r>>>0)/0|0}if((r=32-v(r)|0)>>>0<31)break r;break t}if(1==(0|o))break e;return n=31&(r=vn(o)),(63&r)>>>0>=32?(o=0,e=t>>>n|0):(o=t>>>n|0,e=((1<<n)-1&t)<<32-n|e>>>n),w=o,e}s=r+1|0,l=63-r|0}if(r=t,i=31&(o=63&s),o>>>0>=32?(o=0,i=r>>>i|0):(o=r>>>i|0,i=((1<<i)-1&r)<<32-i|e>>>i),r=31&(l&=63),l>>>0>=32?(t=e<<r,e=0):(t=(1<<r)-1&e>>>32-r|t<<r,e<<=r),s)for(l=-1!=(0|(r=n-1|0))?0:-1;i=(c=a=i<<1|t>>>31)-(u=n&(a=l-((o=o<<1|i>>>31)+(r>>>0<a>>>0)|0)>>31))|0,o=o-(c>>>0<u>>>0)|0,t=t<<1|e>>>31,e=d|e<<1,d=a&=1,s=s-1|0;);return w=t<<1|e>>>31,a|e<<1}e=0,t=0}return w=t,e}(e,t,n)}function Hn(e){return 0|e}function Vn(e){z(e|=0)}function qn(e,t){!function(e,t){e:if((0|e)!=(0|t))for(;;){if((t=t-1|0)>>>0<=e>>>0)break e;Zt(e,t),e=e+1|0}}(e,t)}function Yn(){B=16752}function Xn(e){}function Wn(){b()}o(t=A,1024,"RXJyb3Igc3RyaW5ncyBzdHJpcHBlZA=="),o(t,1064,"AQAAAAEAAAACAAAAAg=="),o(t,1088,"AQAAAAEAAAACAAAAAgAAACYAAACCAAAAIQUAAEoAAABnCAAAJgAAAMABAACAAAAASQUAAEoAAAC+CAAAKQAAACwCAACAAAAASQUAAEoAAAC+CAAALwAAAMoCAACAAAAAigUAAEoAAACECQAANQAAAHMDAACAAAAAnQUAAEoAAACgCQAAPQAAAIEDAACAAAAA6wUAAEsAAAA+CgAARAAAAJ4DAACAAAAATQYAAEsAAACqCgAASwAAALMDAACAAAAAwQYAAE0AAAAfDQAATQAAAFMEAACAAAAAIwgAAFEAAACmDwAAVAAAAJkEAACAAAAASwkAAFcAAACxEgAAWAAAANoEAACAAAAAbwkAAF0AAAAjFAAAVAAAAEUFAACAAAAAVAoAAGoAAACMFAAAagAAAK8FAACAAAAAdgkAAHwAAABOEAAAfAAAANICAACAAAAAYwcAAJEAAACQBwAAkgAAAAAAAAABAAAAAQAAAAUAAAANAAAAHQAAAD0AAAB9AAAA/QAAAP0BAAD9AwAA/QcAAP0PAAD9HwAA/T8AAP1/AAD9/wAA/f8BAP3/AwD9/wcA/f8PAP3/HwD9/z8A/f9/AP3//wD9//8B/f//A/3//wf9//8P/f//H/3//z/9//9/AAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAAAARAAAAEgAAABMAAAAUAAAAFQAAABYAAAAXAAAAGAAAABkAAAAaAAAAGwAAABwAAAAdAAAAHgAAAB8AAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAACAAAAAhAAAAIgAAACMAAAAlAAAAJwAAACkAAAArAAAALwAAADMAAAA7AAAAQwAAAFMAAABjAAAAgwAAAAMBAAADAgAAAwQAAAMIAAADEAAAAyAAAANAAAADgAAAAwAB"),o(t,2048,"AQAAAAEAAAABAAAAAQAAAAIAAAACAAAAAwAAAAMAAAAEAAAABAAAAAUAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQ"),o(t,2148,"AQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQ=="),o(t,2352,"AQAAAAEAAAABAAAAAQAAAAIAAAACAAAAAwAAAAMAAAAEAAAABgAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAAAABAAAABAAAAAgAAAAAAAAAAQABAQYAAAAAAAAEAAAAABAAAAQAAAAAIAAABQEAAAAAAAAFAwAAAAAAAAUEAAAAAAAABQYAAAAAAAAFBwAAAAAAAAUJAAAAAAAABQoAAAAAAAAFDAAAAAAAAAYOAAAAAAABBRAAAAAAAAEFFAAAAAAAAQUWAAAAAAACBRwAAAAAAAMFIAAAAAAABAUwAAAAIAAGBUAAAAAAAAcFgAAAAAAACAYAAQAAAAAKBgAEAAAAAAwGABAAACAAAAQAAAAAAAAABAEAAAAAAAAFAgAAACAAAAUEAAAAAAAABQUAAAAgAAAFBwAAAAAAAAUIAAAAIAAABQoAAAAAAAAFCwAAAAAAAAYNAAAAIAABBRAAAAAAAAEFEgAAACAAAQUWAAAAAAACBRgAAAAgAAMFIAAAAAAAAwUoAAAAAAAGBEAAAAAQAAYEQAAAACAABwWAAAAAAAAJBgACAAAAAAsGAAgAADAAAAQAAAAAEAAABAEAAAAgAAAFAgAAACAAAAUDAAAAIAAABQUAAAAgAAAFBgAAACAAAAUIAAAAIAAABQkAAAAgAAAFCwAAACAAAAUMAAAAAAAABg8AAAAgAAEFEgAAACAAAQUUAAAAIAACBRgAAAAgAAIFHAAAACAAAwUoAAAAIAAEBTAAAAAAABAGAAABAAAADwYAgAAAAAAOBgBAAAAAAA0GACA="),o(t,2976,"AQABAQUAAAAAAAAFAAAAAAAABgQ9AAAAAAAJBf0BAAAAAA8F/X8AAAAAFQX9/x8AAAADBQUAAAAAAAcEfQAAAAAADAX9DwAAAAASBf3/AwAAABcF/f9/AAAABQUdAAAAAAAIBP0AAAAAAA4F/T8AAAAAFAX9/w8AAAACBQEAAAAQAAcEfQAAAAAACwX9BwAAAAARBf3/AQAAABYF/f8/AAAABAUNAAAAEAAIBP0AAAAAAA0F/R8AAAAAEwX9/wcAAAABBQEAAAAQAAYEPQAAAAAACgX9AwAAAAAQBf3/AAAAABwF/f//DwAAGwX9//8HAAAaBf3//wMAABkF/f//AQAAGAX9//8="),o(t,3248,"AQABAQYAAAAAAAAGAwAAAAAAAAQEAAAAIAAABQUAAAAAAAAFBgAAAAAAAAUIAAAAAAAABQkAAAAAAAAFCwAAAAAAAAYNAAAAAAAABhAAAAAAAAAGEwAAAAAAAAYWAAAAAAAABhkAAAAAAAAGHAAAAAAAAAYfAAAAAAAABiIAAAAAAAEGJQAAAAAAAQYpAAAAAAACBi8AAAAAAAMGOwAAAAAABAZTAAAAAAAHBoMAAAAAAAkGAwIAABAAAAQEAAAAAAAABAUAAAAgAAAFBgAAAAAAAAUHAAAAIAAABQkAAAAAAAAFCgAAAAAAAAYMAAAAAAAABg8AAAAAAAAGEgAAAAAAAAYVAAAAAAAABhgAAAAAAAAGGwAAAAAAAAYeAAAAAAAABiEAAAAAAAEGIwAAAAAAAQYnAAAAAAACBisAAAAAAAMGMwAAAAAABAZDAAAAAAAFBmMAAAAAAAgGAwEAACAAAAQEAAAAMAAABAQAAAAQAAAEBQAAACAAAAUHAAAAIAAABQgAAAAgAAAFCgAAACAAAAULAAAAAAAABg4AAAAAAAAGEQAAAAAAAAYUAAAAAAAABhcAAAAAAAAGGgAAAAAAAAYdAAAAAAAABiAAAAAAABAGAwABAAAADwYDgAAAAAAOBgNAAAAAAA0GAyAAAAAADAYDEAAAAAALBgMIAAAAAAoGAwQ="),o(t,3780,"AQAAAAMAAAAHAAAADwAAAB8AAAA/AAAAfwAAAP8AAAD/AQAA/wMAAP8HAAD/DwAA/x8AAP8/AAD/fwAA//8AAP//AQD//wMA//8HAP//DwD//x8A//8/AP//fwD///8A////Af///wP///8H////D////x////8/////fwAAAAABAAAAAgAAAAQAAAAAAAAAAgAAAAQAAAAIAAAAAAAAAAEAAAACAAAAAQAAAAQAAAAEAAAABAAAAAQAAAAIAAAACAAAAAgAAAAHAAAACAAAAAkAAAAKAAAACwAAAHRlcm1pbmF0aW5nAHRlcm1pbmF0ZV9oYW5kbGVyIHVuZXhwZWN0ZWRseSByZXR1cm5lZAAtKyAgIDBYMHgAKG51bGwp"),o(t,4080,"EQAKABEREQAAAAAFAAAAAAAACQAAAAALAAAAAAAAAAARAA8KERERAwoHAAEACQsLAAAJBgsAAAsABhEAAAARERE="),o(t,4161,"CwAAAAAAAAAAEQAKChEREQAKAAACAAkLAAAACQALAAAL"),o(t,4219,"DA=="),o(t,4231,"DAAAAAAMAAAAAAkMAAAAAAAMAAAM"),o(t,4277,"Dg=="),o(t,4289,"DQAAAAQNAAAAAAkOAAAAAAAOAAAO"),o(t,4335,"EA=="),o(t,4347,"DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"),o(t,4402,"EgAAABISEgAAAAAAAAk="),o(t,4451,"Cw=="),o(t,4463,"CgAAAAAKAAAAAAkLAAAAAAALAAAL"),o(t,4509,"DA=="),o(t,4521,"DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVGLTBYKzBYIDBYLTB4KzB4IDB4AGluZgBJTkYAbmFuAE5BTgAu"),o(t,4636,"BA=="),o(t,4675,"//////8="),o(t,4744,"U3Q5dHlwZV9pbmZvAAAAACQTAACIEgAAUHVyZSB2aXJ0dWFsIGZ1bmN0aW9uIGNhbGxlZCEATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAEwTAAC+EgAAmBIAAE4xMF9fY3h4YWJpdjExN19fY2xhc3NfdHlwZV9pbmZvRQAAAEwTAADsEgAA4BIAAAAAAAAQEwAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAAAAAAAlBMAAAUAAAANAAAABwAAAAgAAAAJAAAADgAAAA8AAAAQAAAATjEwX19jeHhhYml2MTIwX19zaV9jbGFzc190eXBlX2luZm9FAAAAAEwTAABsEwAAEBMAAF9aAF9fWgBfX19aAF9fX19aAF9ibG9ja19pbnZva2UAaW52b2NhdGlvbiBmdW5jdGlvbiBmb3IgYmxvY2sgaW4gAFVhOWVuYWJsZV9pZkkAdnRhYmxlIGZvciAAVlRUIGZvciAAdHlwZWluZm8gZm9yIAB0eXBlaW5mbyBuYW1lIGZvciAAY292YXJpYW50IHJldHVybiB0aHVuayB0byAAdGhyZWFkLWxvY2FsIHdyYXBwZXIgcm91dGluZSBmb3IgAHRocmVhZC1sb2NhbCBpbml0aWFsaXphdGlvbiByb3V0aW5lIGZvciAAdmlydHVhbCB0aHVuayB0byAAbm9uLXZpcnR1YWwgdGh1bmsgdG8gAGd1YXJkIHZhcmlhYmxlIGZvciAAcmVmZXJlbmNlIHRlbXBvcmFyeSBmb3IgAAAAAAAAAABwFQAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTFTcGVjaWFsTmFtZUUATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlNE5vZGVFACQTAABAFQAATBMAABAVAABoFQAAAAAAAGgVAAARAAAAEgAAABMAAAAUAAAAGgAAABYAAAAXAAAAGAAAABsAAAAAAAAAEBYAABEAAAASAAAAEwAAABQAAAAcAAAAFgAAABcAAAAYAAAAHQAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTIxQ3RvclZ0YWJsZVNwZWNpYWxOYW1l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EQAAABIAAAATAAAAFAAAAF0AAAAWAAAAFwAAABgAAABeAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTBEZWxldGVFeHByRQAATBMAAEAkAABoFQAAZGVsZXRlAFtdIABzck4Ac3IAX0dMT0JBTF9fTgAoYW5vbnltb3VzIG5hbWVzcGFjZSkAAAAAAAAQJQAAEQAAABIAAAATAAAAFAAAAF8AAAAWAAAAYAAAABgAAABhAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTNRdWFsaWZpZWROYW1lRQAAAEwTAADcJAAAaBUAAGRuAG9uAAAAAAAAAHwlAAARAAAAEgAAABMAAAAUAAAAYgAAABYAAAAXAAAAGAAAAGMAAABOMTJfR0xPQkFMX19OXzExNml0YW5pdW1fZGVtYW5nbGU4RHRvck5hbWVFAEwTAABQJQAAaBUAAG9wZXJhdG9yJiYAb3BlcmF0b3ImAG9wZXJhdG9yJj0Ab3BlcmF0b3I9AG9wZXJhdG9yKCkAb3BlcmF0b3IsAG9wZXJhdG9yfgBvcGVyYXRvciBkZWxldGVbXQBvcGVyYXRvcioAb3BlcmF0b3IgZGVsZXRlAG9wZXJhdG9yLwBvcGVyYXRvci89AG9wZXJhdG9yXgBvcGVyYXRvcl49AG9wZXJhdG9yPT0Ab3BlcmF0b3I+PQBvcGVyYXRvcj4Ab3BlcmF0b3JbXQBvcGVyYXRvcjw9AG9wZXJhdG9yPDwAb3BlcmF0b3I8PD0Ab3BlcmF0b3I8AG9wZXJhdG9yLQBvcGVyYXRvci09AG9wZXJhdG9yKj0Ab3BlcmF0b3ItLQBvcGVyYXRvciBuZXdbXQBvcGVyYXRvciE9AG9wZXJhdG9yIQBvcGVyYXRvciBuZXcAb3BlcmF0b3J8fABvcGVyYXRvcnwAb3BlcmF0b3J8PQBvcGVyYXRvci0+KgBvcGVyYXRvcisAb3BlcmF0b3IrPQBvcGVyYXRvcisrAG9wZXJhdG9yLT4Ab3BlcmF0b3I/AG9wZXJhdG9yJQBvcGVyYXRvciU9AG9wZXJhdG9yPj4Ab3BlcmF0b3I+Pj0Ab3BlcmF0b3I8PT4AAAAAAADcJwAAEQAAABIAAAATAAAAFAAAAGQAAAAWAAAAFwAAABgAAABlAAAA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EQAAABIAAAATAAAAFAAAAIUAAAAWAAAAhgAAABgAAACHAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMjdFeHBhbmRlZFNwZWNpYWxTdWJzdGl0dXRpb25FAEwTAADMLgAAaBUAAHN0ZDo6YWxsb2NhdG9yAHN0ZDo6YmFzaWNfc3RyaW5nAHN0ZDo6YmFzaWNfc3RyaW5nPGNoYXIsIHN0ZDo6Y2hhcl90cmFpdHM8Y2hhcj4sIHN0ZDo6YWxsb2NhdG9yPGNoYXI+ID4Ac3RkOjpiYXNpY19pc3RyZWFtPGNoYXIsIHN0ZDo6Y2hhcl90cmFpdHM8Y2hhcj4gPgBzdGQ6OmJhc2ljX29zdHJlYW08Y2hhciwgc3RkOjpjaGFyX3RyYWl0czxjaGFyPiA+AHN0ZDo6YmFzaWNfaW9zdHJlYW08Y2hhciwgc3RkOjpjaGFyX3RyYWl0czxjaGFyPiA+AGFsbG9jYXRvcgBiYXNpY19zdHJpbmcAYmFzaWNfaXN0cmVhbQBiYXNpY19vc3RyZWFtAGJhc2ljX2lvc3RyZWFtAAAAAAAAAAC8MAAAEQAAABIAAAATAAAAFAAAAIgAAAAWAAAAFwAAABgAAACJAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTJDdG9yRHRvck5hbWVFAAAAAEwTAACIMAAAaBUAAAAAAAAkMQAAEQAAABIAAAATAAAAFAAAAIoAAAAWAAAAFwAAABgAAACLAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTBBYmlUYWdBdHRyRQAATBMAAPQwAABoFQAAW2FiaToAREMAAAAAAAAAAKQxAAARAAAAEgAAABMAAAAUAAAAjAAAABYAAAAXAAAAGAAAAI0AAABOMTJfR0xPQkFMX19OXzExNml0YW5pdW1fZGVtYW5nbGUyMVN0cnVjdHVyZWRCaW5kaW5nTmFtZUUAAABMEwAAaDEAAGgVAABzdHJpbmcgbGl0ZXJhbAAAAAAAABwyAAARAAAAEgAAABMAAAAUAAAAjgAAABYAAAAXAAAAGAAAAI8AAABOMTJfR0xPQkFMX19OXzExNml0YW5pdW1fZGVtYW5nbGU5TG9jYWxOYW1lRQAAAABMEwAA7DEAAGgVAAAAAAAAjDIAABEAAAASAAAAEwAAABQAAACQAAAAFgAAAJEAAAAYAAAAkgAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTE5U3BlY2lhbFN1YnN0aXR1dGlvbkUATBMAAFQyAABoFQAAc3RkOjpzdHJpbmcAc3RkOjppc3RyZWFtAHN0ZDo6b3N0cmVhbQBzdGQ6Omlvc3RyZWFtAHN0cmluZwBpc3RyZWFtAG9zdHJlYW0AaW9zdHJlYW0AAAAAAEwzAACTAAAAlAAAAJUAAACWAAAAlwAAAJgAAAAXAAAAGAAAAJkAAABOMTJfR0xPQkFMX19OXzExNml0YW5pdW1fZGVtYW5nbGUxM1BhcmFtZXRlclBhY2tFAAAATBMAABgzAABoFQAAAAAAALgzAAARAAAAEgAAABMAAAAUAAAAmgAAABYAAAAXAAAAGAAAAJsAAABOMTJfR0xPQkFMX19OXzExNml0YW5pdW1fZGVtYW5nbGUxMlRlbXBsYXRlQXJnc0UAAAAATBMAAIQzAABoFQAAAAAAACw0AAARAAAAEgAAABMAAAAUAAAAnAAAABYAAACdAAAAGAAAAJ4AAABOMTJfR0xPQkFMX19OXzExNml0YW5pdW1fZGVtYW5nbGUyME5hbWVXaXRoVGVtcGxhdGVBcmdzRQAAAABMEwAA8DMAAGgVAABTdEwAAAAAAKA0AAARAAAAEgAAABMAAAAUAAAAnwAAABYAAACgAAAAGAAAAKEAAABOMTJfR0xPQkFMX19OXzExNml0YW5pdW1fZGVtYW5nbGUxNlN0ZFF1YWxpZmllZE5hbWVFAAAAAEwTAABoNAAAaBUAAHN0ZDo6AAAAAAAAABw1AAARAAAAEgAAABMAAAAUAAAAogAAABYAAAAXAAAAGAAAAKMAAABOMTJfR0xPQkFMX19OXzExNml0YW5pdW1fZGVtYW5nbGUyMFRlbXBsYXRlQXJndW1lbnRQYWNrRQAAAABMEwAA4DQAAGgVAAAAAAAAiDUAABEAAAASAAAAEwAAABQAAACkAAAAFgAAABcAAAAYAAAApQAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTEyRW5hYmxlSWZBdHRyRQAAAABMEwAAVDUAAGgVAAAgW2VuYWJsZV9pZjoAAAAAAAAAAAg2AACmAAAAEgAAAKcAAAAUAAAAqAAAAKkAAAAXAAAAGAAAAKoAAABOMTJfR0xPQkFMX19OXzExNml0YW5pdW1fZGVtYW5nbGUxNkZ1bmN0aW9uRW5jb2RpbmdFAAAAAEwTAADQNQAAaBUAACBjb25zdAAgdm9sYXRpbGUAIHJlc3RyaWN0ACAmACAmJgAAAAAAAACUNgAAEQAAABIAAAATAAAAFAAAAKsAAAAWAAAAFwAAABgAAACsAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlOURvdFN1ZmZpeEUAAAAATBMAAGQ2AABoFQAAdm9pZABib29sAGludAB1bnNpZ25lZCBpbnQAbG9uZwB1bnNpZ25lZCBsb25nAGxvbmcgbG9uZwB1bnNpZ25lZCBsb25nIGxvbmcAZmxvYXQAZG91YmxlAGxvbmcgZG91YmxlAF9fZmxvYXQxMjgAZGVjaW1hbDY0AGRlY2ltYWwxMjgAZGVjaW1hbDMyAGRlY2ltYWwxNgBjaGFyMzJfdABjaGFyMTZfdABjaGFyOF90AGRlY2x0eXBlKGF1dG8pAHN0ZDo6bnVsbHB0cl90ACBjb21wbGV4ACBpbWFnaW5hcnkARG8Abm9leGNlcHQARE8ARHcARHgAUkUAT0UAAAAAAAAAOAAAEQAAABIAAAATAAAAFAAAAK0AAAAWAAAAFwAAABgAAACuAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTJOb2V4Y2VwdFNwZWNFAAAAAEwTAADMNwAAaBUAAG5vZXhjZXB0KAAAAAAAAACAOAAAEQAAABIAAAATAAAAFAAAAK8AAAAWAAAAFwAAABgAAACwAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMjBEeW5hbWljRXhjZXB0aW9uU3BlY0UAAAAATBMAAEQ4AABoFQAAdGhyb3coAAAAAAAA9DgAALEAAAASAAAAsgAAABQAAACzAAAAtAAAABcAAAAYAAAAtQAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTEyRnVuY3Rpb25UeXBlRQAAAABMEwAAwDgAAGgVAABvYmpjcHJvdG8AAAAAAAAAbDkAABEAAAASAAAAEwAAABQAAAC2AAAAFgAAABcAAAAYAAAAtwAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTEzT2JqQ1Byb3RvTmFtZUUAAABMEwAAODkAAGgVAAAAAAAA3DkAABEAAAASAAAAEwAAABQAAAC4AAAAFgAAABcAAAAYAAAAuQAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTE3VmVuZG9yRXh0UXVhbFR5cGVFAAAATBMAAKQ5AABoFQAAAAAAAEA6AAC6AAAAuwAAALwAAAAUAAAAvQAAAL4AAAAXAAAAGAAAAL8AAABOMTJfR0xPQkFMX19OXzExNml0YW5pdW1fZGVtYW5nbGU4UXVhbFR5cGVFAEwTAAAUOgAAaBUAAER2AAAAAAAAsDoAABEAAAASAAAAEwAAABQAAADAAAAAFgAAABcAAAAYAAAAwQAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTE1UGl4ZWxWZWN0b3JUeXBlRQBMEwAAfDoAAGgVAABwaXhlbCB2ZWN0b3JbAAAAAAAAACg7AAARAAAAEgAAABMAAAAUAAAAwgAAABYAAAAXAAAAGAAAAMMAAABOMTJfR0xPQkFMX19OXzExNml0YW5pdW1fZGVtYW5nbGUxMFZlY3RvclR5cGVFAABMEwAA+DoAAGgVAAAgdmVjdG9yWwAAAAAAAAAAnDsAAMQAAADFAAAAEwAAABQAAADGAAAAxwAAABcAAAAYAAAAyAAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTlBcnJheVR5cGVFAAAAAEwTAABsOwAAaBUAAFsAAAAAAAAAEDwAAMkAAAASAAAAEwAAABQAAADKAAAAywAAABcAAAAYAAAAzAAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTE5UG9pbnRlclRvTWVtYmVyVHlwZUUATBMAANg7AABoFQAAOjoqAFRzAHN0cnVjdABUdQB1bmlvbgBUZQBlbnVtAAAAAAAApDwAABEAAAASAAAAEwAAABQAAADNAAAAFgAAABcAAAAYAAAAzgAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTIyRWxhYm9yYXRlZFR5cGVTcGVmVHlwZUUAAEwTAABoPAAAaBUAAAAAAAAMPQAAzwAAABIAAAATAAAAFAAAANAAAADRAAAAFwAAABgAAADSAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTFQb2ludGVyVHlwZUUATBMAANw8AABoFQAAaWQ8AG9iamNfb2JqZWN0AAAAAACIPQAA0wAAABIAAAATAAAAFAAAANQAAADVAAAAFwAAABgAAADWAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTNSZWZlcmVuY2VUeXBlRQAAAEwTAABUPQAAaBUAAAAAAAD8PQAAEQAAABIAAAATAAAAFAAAANcAAAAWAAAAFwAAABgAAADYAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMjBQb3N0Zml4UXVhbGlmaWVkVHlwZUUAAAAATBMAAMA9AABoFQAAFzAAACEwAAAhMAAALjAAADwwAABKMAAAFzAAACEwAADMMgAA0zIAANsyAADjMg=="),o(t,15928,"cEFQAAE="),o(t,16108,"QEE=");var Kn,Jn=((Kn=[null,Wn,function(e,t,n,r,o,a){e|=0,t=+t,n|=0,r|=0,o|=0,a|=0;var c,u=0,f=0,p=0,h=0,g=0,v=0,b=0,C=0,I=0,E=0,B=0,_=0,S=0,D=0,T=0,k=0,Q=0,M=0,R=0;x=c=x-560|0,s[c+44>>2]=0,d(+t),(0|(u=0|l(1)))<-1||(0|u)<=-1?(k=1,d(+(t=-t)),u=0|l(1),B=4560):(k=1,B=4563,2048&o||(B=4566,1&o||(k=0,T=1,B=4561)));e:if(2146435072!=(2146435072&u)){_=c+16|0;t:{n:{r:{if(t=Xe(t,c+44|0),0!=(t+=t)){if(u=s[c+44>>2],s[c+44>>2]=u-1,97!=(0|(Q=32|a)))break r;break t}if(97==(0|(Q=32|a)))break t;g=s[c+44>>2],v=(0|r)<0?6:r;break n}g=u-29|0,s[c+44>>2]=g,t*=268435456,v=(0|r)<0?6:r}for(h=b=(0|g)<0?c+48|0:c+336|0;u=t<4294967296&t>=0?~~t>>>0:0,s[(r=h)>>2]=u,h=h+4|0,0!=(t=1e9*(t-+(u>>>0))););if((0|g)<1)r=g,u=h,f=b;else for(f=b,r=g;;){if(C=(0|r)<29?r:29,!(f>>>0>(u=h-4|0)>>>0)){for(r=C,p=0;E=u,M=p,R=s[u>>2],I=31&r,(63&r)>>>0>=32?(p=R<<I,R=0):(p=(1<<I)-1&R>>>32-I,R<<=I),I=M+R|0,p=p+0|0,M=E,E=Tn(p=zn(I,p=I>>>0<R>>>0?p+1|0:p,1e9),w,1e9,0),s[M>>2]=I-E,f>>>0<=(u=u-4|0)>>>0;);p&&(s[(f=f-4|0)>>2]=p)}for(;f>>>0<(u=h)>>>0&&!s[(h=u-4|0)>>2];);if(r=s[c+44>>2]-C|0,s[c+44>>2]=r,h=u,!((0|r)>0))break}if((0|r)<=-1)for(S=1+((v+25|0)/9|0)|0,C=102==(0|Q);;){if(p=(0|r)<-9?9:0-r|0,u>>>0<=f>>>0)f=s[f>>2]?f:f+4|0;else{for(E=1e9>>>p|0,I=~(-1<<p),r=0,h=f;M=r,r=s[h>>2],s[h>>2]=M+(r>>>p|0),r=m(E,r&I),(h=h+4|0)>>>0<u>>>0;);f=s[f>>2]?f:f+4|0,r&&(s[u>>2]=r,u=u+4|0)}if(r=s[c+44>>2]+p|0,s[c+44>>2]=r,u=u-(h=C?b:f)>>2>(0|S)?h+(S<<2)|0:u,!((0|r)<0))break}if(h=0,!(u>>>0<=f>>>0||(h=m(b-f>>2,9),r=10,(p=s[f>>2])>>>0<10)))for(;h=h+1|0,p>>>0>=(r=m(r,10))>>>0;);if((0|(r=(v-(102==(0|Q)?0:h)|0)-(103==(0|Q)&0!=(0|v))|0))<(m(u-b>>2,9)-9|0)){if(g=(((C=(0|(p=r+9216|0))/9|0)<<2)+((0|g)<0?c+48|4:c+340|0)|0)-4096|0,r=10,(0|(p=p-m(C,9)|0))<=7)for(;r=m(r,10),8!=(0|(p=p+1|0)););if(S=g+4|0,((p=(C=s[g>>2])-m(r,E=(C>>>0)/(r>>>0)|0)|0)||(0|S)!=(0|u))&&(D=p>>>0<(I=r>>>1|0)>>>0?.5:(0|u)==(0|S)&&(0|I)==(0|p)?1:1.5,t=1&E?9007199254740994:9007199254740992,45!=A[0|B]|T||(D=-D,t=-t),p=C-p|0,s[g>>2]=p,t+D!=t)){if(r=r+p|0,s[g>>2]=r,r>>>0>=1e9)for(;s[g>>2]=0,(g=g-4|0)>>>0<f>>>0&&(s[(f=f-4|0)>>2]=0),r=s[g>>2]+1|0,s[g>>2]=r,r>>>0>999999999;);if(h=m(b-f>>2,9),r=10,!((p=s[f>>2])>>>0<10))for(;h=h+1|0,p>>>0>=(r=m(r,10))>>>0;);}u=(r=g+4|0)>>>0<u>>>0?r:u}for(;r=u,!(g=u>>>0<=f>>>0)&&!s[(u=r-4|0)>>2];);if(103==(0|Q)){if(v=((p=(0|(u=v||1))>(0|h)&(0|h)>-5)?~h:-1)+u|0,a=(p?-1:-2)+a|0,!(T=8&o)){if(u=-9,!g&&(C=s[r-4>>2])&&(p=10,u=0,!((C>>>0)%10|0))){for(;g=u,u=u+1|0,!((C>>>0)%((p=m(p,10))>>>0)|0););u=~g}g=m(r-b>>2,9),70!=(-33&a)?(T=0,v=(0|(u=(0|(u=((h+g|0)+u|0)-9|0))>0?u:0))>(0|v)?v:u):(T=0,v=(0|(u=(0|(u=(u+g|0)-9|0))>0?u:0))>(0|v)?v:u)}}else T=8&o;if(E=0!=(0|(C=v|T)),M=e,p=n,u=(0|h)>0?h:0,70!=(0|(I=-33&a))){if((_-(u=ze((u=h>>31)+h^u,0,_))|0)<=1)for(;i[0|(u=u-1|0)]=48,(_-u|0)<2;);i[0|(S=u-2|0)]=a,i[u-1|0]=(0|h)<0?45:43,u=_-S|0}lt(M,32,p,g=1+(u+(E+(v+k|0)|0)|0)|0,o),_n(e,B,k),lt(e,48,n,g,65536^o);n:{r:{o:{if(70==(0|I)){for(a=c+16|8,h=c+16|9,f=p=f>>>0>b>>>0?b:f;;){u=ze(s[f>>2],0,h);i:if((0|f)==(0|p))(0|u)==(0|h)&&(i[c+24|0]=48,u=a);else{if(c+16>>>0>=u>>>0)break i;for(;i[0|(u=u-1|0)]=48,c+16>>>0<u>>>0;);}if(_n(e,u,h-u|0),!(b>>>0>=(f=f+4|0)>>>0))break}if(C&&_n(e,4595,1),(0|v)<1|r>>>0<=f>>>0)break o;for(;;){if((u=ze(s[f>>2],0,h))>>>0>c+16>>>0)for(;i[0|(u=u-1|0)]=48,c+16>>>0<u>>>0;);if(_n(e,u,(0|v)<9?v:9),u=v-9|0,r>>>0<=(f=f+4|0)>>>0)break r;if(a=(0|v)>9,v=u,!a)break}break r}i:if(!((0|v)<0))for(b=r>>>0>f>>>0?r:f+4|0,r=c+16|8,a=c+16|9,h=f;;){(0|a)==(0|(u=ze(s[h>>2],0,a)))&&(i[c+24|0]=48,u=r);a:if((0|f)==(0|h))_n(e,u,1),u=u+1|0,(0|v)<1&&!T||_n(e,4595,1);else{if(c+16>>>0>=u>>>0)break a;for(;i[0|(u=u-1|0)]=48,c+16>>>0<u>>>0;);}if(_n(e,E=u,(0|(u=a-u|0))<(0|v)?u:v),v=v-u|0,b>>>0<=(h=h+4|0)>>>0)break i;if(!((0|v)>-1))break}lt(e,48,v+18|0,18,0),_n(e,S,_-S|0);break n}u=v}lt(e,48,u+9|0,9,0)}break e}if(p=(v=32&a)?B+9|0:B,!(r>>>0>11)&&(u=12-r|0)){for(D=8;D*=16,u=u-1|0;);t=45!=A[0|p]?t+D-D:-(D+(-t-D))}for((0|_)==(0|(u=ze((u=(f=s[c+44>>2])>>31)^u+f,0,_)))&&(i[c+15|0]=48,u=c+15|0),h=2|k,f=s[c+44>>2],i[0|(b=u-2|0)]=a+15,i[u-1|0]=(0|f)<0?45:43,g=8&o,f=c+16|0;a=f,E=f,f=v,u=y(t)<2147483648?~~t:-2147483648,i[0|E]=f|A[u+4544|0],1!=((f=a+1|0)-(c+16|0)|0)|(0==(t=16*(t-+(0|u)))?!((0|r)>0|g):0)||(i[a+1|0]=46,f=a+2|0),0!=t;);lt(u=e,32,a=n,g=(r=v=!r|((f-c|0)-18|0)>=(0|r)?((_-(c+16|0)|0)-b|0)+f|0:2+((r+_|0)-b|0)|0)+h|0,o),_n(e,p,h),lt(e,48,n,g,65536^o),_n(e,c+16|0,a=f-(c+16|0)|0),lt(e,48,v-((r=_-b|0)+a|0)|0,0,0),_n(e,b,r)}else lt(e,32,n,g=k+3|0,-65537&o),_n(e,B,k),r=32&a,_n(e,t!=t?r?4587:4591:r?4579:4583,3);return lt(e,32,n,g,8192^o),x=c+560|0,0|((0|n)>(0|g)?n:g)},function(e,t){var n,r,o;e|=0,n=t|=0,t=s[t>>2]+15&-16,s[n>>2]=t+16,r=e,o=function(e,t,n,r){var o,i,a=0,l=0,d=0;x=o=x-32|0,d=a=2147483647&r,i=n;e:if((0|(l=a-1006698496|0))==(0|(a=a-1140785152|0))&n>>>0>n>>>0|a>>>0>l>>>0){if(a=r<<4|n>>>28,n=n<<4|t>>>28,d=t&=268435455,134217728==(0|t)&e>>>0>=1|t>>>0>134217728){a=a+1073741824|0,a=(e=n+1|0)>>>0<1?a+1|0:a,l=e;break e}if(l=n,a=a+1073741824|0,e|134217728^d)break e;a=(e=(t=1&n)+l|0)>>>0<t>>>0?a+1|0:a,l=e}else(!i&2147418112==(0|d)?!(e|t):d>>>0<2147418112)?(l=0,a=2146435072,d>>>0>1140785151||(a=0,(d=d>>>16|0)>>>0<15249||(function(e,t,n,r,o,i){var a=0,l=0,c=0,u=0;64&i?(r=t,t=31&(o=i+-64|0),(63&o)>>>0>=32?(o=r<<t,r=0):(o=(1<<t)-1&r>>>32-t|n<<t,r<<=t),t=0,n=0):i&&(a=r,c=i,r=31&i,(63&i)>>>0>=32?(l=a<<r,u=0):(l=(1<<r)-1&a>>>32-r|o<<r,u=a<<r),r=n,a=t,o=31&(i=64-i|0),(63&i)>>>0>=32?(i=0,r=r>>>o|0):(i=r>>>o|0,r=((1<<o)-1&r)<<32-o|a>>>o),r|=u,o=i|l,i=t,t=31&c,(63&c)>>>0>=32?(l=i<<t,t=0):(l=(1<<t)-1&i>>>32-t|n<<t,t=i<<t),n=l),s[e>>2]=t,s[e+4>>2]=n,s[e+8>>2]=r,s[e+12>>2]=o}(o+16|0,e,t,n,a=65535&r|65536,d-15233|0),function(e,t,n,r,o,i){var a=0,l=0,c=0,u=0;64&i?(t=31&(n=i+-64|0),(63&n)>>>0>=32?(n=0,t=o>>>t|0):(n=o>>>t|0,t=((1<<t)-1&o)<<32-t|r>>>t),r=0,o=0):i&&(l=o,c=r,a=31&(u=64-i|0),(63&u)>>>0>=32?(l=c<<a,u=0):(l=(1<<a)-1&c>>>32-a|l<<a,u=c<<a),c=t,t=31&(a=i),(63&a)>>>0>=32?(a=0,t=n>>>t|0):(a=n>>>t|0,t=((1<<t)-1&n)<<32-t|c>>>t),t|=u,n=a|l,a=r,r=31&i,(63&i)>>>0>=32?(l=0,r=o>>>r|0):(l=o>>>r|0,r=((1<<r)-1&o)<<32-r|a>>>r),o=l),s[e>>2]=t,s[e+4>>2]=n,s[e+8>>2]=r,s[e+12>>2]=o}(o,e,t,n,a,15361-d|0),d=a=s[o+4>>2],l=(e=s[o+8>>2])<<4|a>>>28,a=n=s[o+12>>2]<<4|e>>>28,n=e=268435455&d,134217728==(0|e)&(t=s[o>>2]|0!=(s[o+16>>2]|s[o+24>>2])|0!=(s[o+20>>2]|s[o+28>>2]))>>>0>=1|e>>>0>134217728?(a=(e=l+1|0)>>>0<1?a+1|0:a,l=e):t|134217728^n||(a=(e=l+(1&l)|0)>>>0<l>>>0?a+1|0:a,l=e)))):(l=(l=n)<<4|t>>>28,a=524287&(n=r<<4|n>>>28)|2146959360);return x=o+32|0,c(0,0|l),c(1,-2147483648&r|a),+u()}(s[t>>2],s[t+4>>2],s[t+8>>2],s[t+12>>2]),g[r>>3]=o},function(e,t,n){t|=0,n|=0;var r,o=0;return te(r=s[20+(e|=0)>>2],t,o=n>>>0<(o=s[e+16>>2]-r|0)>>>0?n:o),s[e+20>>2]=o+s[e+20>>2],0|n},Hn,Vn,Xn,Xn,function(e,t,n){n|=0;var r,o=0;return x=r=x+-64|0,o=1,Ht(e|=0,t|=0,0)||(o=0,t&&(t=function(e){var t,n,r,o=0;x=t=x+-64|0,o=s[e>>2],n=s[o-4>>2],r=s[o-8>>2],s[t+20>>2]=0,s[t+16>>2]=4832,s[t+12>>2]=e,s[t+8>>2]=4880,o=0,fe(t+24|0,0,39),e=e+r|0;e:if(Ht(n,4880,0))s[t+56>>2]=1,Jn[s[s[n>>2]+20>>2]](n,t+8|0,e,e,1,0),o=1==s[t+32>>2]?e:0;else{Jn[s[s[n>>2]+24>>2]](n,t+8|0,e,1,0);t:switch(s[t+44>>2]){case 0:o=1==s[t+48>>2]&&1==s[t+36>>2]&&1==s[t+40>>2]?s[t+28>>2]:0;break e;case 1:break t;default:break e}1!=s[t+32>>2]&&s[t+48>>2]|1!=s[t+36>>2]|1!=s[t+40>>2]||(o=s[t+24>>2])}return x=t- -64|0,o}(t),o=0,t&&(fe(r+8|4,0,52),s[r+56>>2]=1,s[r+20>>2]=-1,s[r+16>>2]=e,s[r+8>>2]=t,Jn[s[s[t>>2]+28>>2]](t,r+8|0,s[n>>2],1),1==(0|(e=s[r+32>>2]))&&(s[n>>2]=s[r+24>>2]),o=1==(0|e)))),x=r- -64|0,0|o},function(e,t,n,r,o,i){n|=0,r|=0,o|=0,i|=0,Ht(e|=0,s[8+(t|=0)>>2],i)&&Re(t,n,r,o)},function(e,t,n,r,o){if(n|=0,r|=0,o|=0,Ht(e|=0,s[8+(t|=0)>>2],o))1==s[t+28>>2]|s[t+4>>2]!=(0|n)||(s[t+28>>2]=r);else e:if(Ht(e,s[t>>2],o)){if(s[t+20>>2]==(0|n)||s[t+16>>2]==(0|n)){if(1!=(0|r))break e;return void(s[t+32>>2]=1)}s[t+20>>2]=n,s[t+32>>2]=r,s[t+40>>2]=s[t+40>>2]+1,1!=s[t+36>>2]|2!=s[t+24>>2]||(i[t+54|0]=1),s[t+44>>2]=4}},function(e,t,n,r){n|=0,r|=0,Ht(e|=0,s[8+(t|=0)>>2],0)&&it(t,n,r)},Vn,function(e,t,n,r,o,i){n|=0,r|=0,o|=0,i|=0,Ht(e|=0,s[8+(t|=0)>>2],i)?Re(t,n,r,o):(e=s[e+8>>2],Jn[s[s[e>>2]+20>>2]](e,t,n,r,o,i))},function(e,t,n,r,o){if(n|=0,r|=0,o|=0,Ht(e|=0,s[8+(t|=0)>>2],o))1==s[t+28>>2]|s[t+4>>2]!=(0|n)||(s[t+28>>2]=r);else e:{if(Ht(e,s[t>>2],o)){if(s[t+20>>2]==(0|n)||s[t+16>>2]==(0|n)){if(1!=(0|r))break e;return void(s[t+32>>2]=1)}s[t+32>>2]=r;t:if(4!=s[t+44>>2]){if(a[t+52>>1]=0,e=s[e+8>>2],Jn[s[s[e>>2]+20>>2]](e,t,n,n,1,o),A[t+53|0]){if(s[t+44>>2]=3,!A[t+52|0])break t;break e}s[t+44>>2]=4}if(s[t+20>>2]=n,s[t+40>>2]=s[t+40>>2]+1,1!=s[t+36>>2]|2!=s[t+24>>2])break e;return void(i[t+54|0]=1)}e=s[e+8>>2],Jn[s[s[e>>2]+24>>2]](e,t,n,r,o)}},function(e,t,n,r){n|=0,r|=0,Ht(e|=0,s[8+(t|=0)>>2],0)?it(t,n,r):(e=s[e+8>>2],Jn[s[s[e>>2]+28>>2]](e,t,n,r))},Gn,Gn,Gn,function(e,t){return 0|e},function(e,t){var n,r,o;t|=0,x=n=x-16|0,r=s[12+(e|=0)>>2],o=s[e+8>>2],s[n>>2]=o,s[n+4>>2]=r,s[n+8>>2]=o,s[n+12>>2]=r,Gt(t,n),e=s[e+16>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),x=n+16|0},function(e,t){},function(e,t){s[(e|=0)>>2]=0,s[e+4>>2]=0},Hn,Vn,Wn,function(e){b()},function(e,t){e|=0,t|=0;var n,r=0,o=0;x=n=x-32|0,r=on(n+24|0,5660),o=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=o,Gt(t,n+8|0),r=s[e+8>>2],Jn[s[s[r>>2]+16>>2]](r,t),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,t),r=on(n+16|0,5685),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n),e=s[e+12>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),x=n+32|0},Vn,function(e,t){var n,r;t|=0,x=n=x-16|0,r=s[12+(e|=0)>>2],e=s[e+8>>2],s[n>>2]=e,s[n+4>>2]=r,s[n+8>>2]=e,s[n+12>>2]=r,Gt(t,n),x=n+16|0},function(e,t){var n;e|=0,n=s[12+(t|=0)>>2],s[e>>2]=s[t+8>>2],s[e+4>>2]=n},Vn,je,nn,Vn,function(e,t){t|=0;var n,r=0,o=0;return x=n=x-16|0,A[16+(e|=0)|0]||(o=Mt(n+8|0,e+16|0,1),r=s[e+12>>2],r=2==(0|(e=A[r+5|0]))?0|Jn[s[s[r>>2]>>2]](r,t):!e,A[o+5|0]&&(i[s[o>>2]]=A[o+4|0])),x=n+16|0,0|r},function(e,t){t|=0;var n,r=0,o=0;return x=n=x-16|0,A[16+(e|=0)|0]||(o=Mt(n+8|0,e+16|0,1),r=s[e+12>>2],r=2==(0|(e=A[r+6|0]))?0|Jn[s[s[r>>2]+4>>2]](r,t):!e,A[o+5|0]&&(i[s[o>>2]]=A[o+4|0])),x=n+16|0,0|r},function(e,t){t|=0;var n,r=0,o=0;return x=n=x-16|0,A[16+(e|=0)|0]||(o=Mt(n+8|0,e+16|0,1),r=s[e+12>>2],r=2==(0|(e=A[r+7|0]))?0|Jn[s[s[r>>2]+8>>2]](r,t):!e,A[o+5|0]&&(i[s[o>>2]]=A[o+4|0])),x=n+16|0,0|r},function(e,t){t|=0;var n,r=0;return x=n=x-16|0,A[16+(e|=0)|0]||(r=Mt(n+8|0,e+16|0,1),e=s[e+12>>2],e=0|Jn[s[s[e>>2]+12>>2]](e,t),A[r+5|0]&&(i[s[r>>2]]=A[r+4|0])),x=n+16|0,0|e},function(e,t){t|=0;var n,r=0;x=n=x-16|0,A[16+(e|=0)|0]||(r=Mt(n+8|0,e+16|0,1),e=s[e+12>>2],Jn[s[s[e>>2]+16>>2]](e,t),A[r+5|0]&&(i[s[r>>2]]=A[r+4|0])),x=n+16|0},function(e,t){t|=0;var n,r=0;x=n=x-16|0,A[16+(e|=0)|0]||(r=Mt(n+8|0,e+16|0,1),e=s[e+12>>2],Jn[s[s[e>>2]+20>>2]](e,t),A[r+5|0]&&(i[s[r>>2]]=A[r+4|0])),x=n+16|0},Vn,function(e,t){t|=0;var n,r,o=0,i=0;x=n=x-112|0,s[12+(e|=0)>>2]-s[e+8>>2]>>>0>=4&&(i=on(n+104|0,6516),o=s[i+4>>2],s[n+48>>2]=s[i>>2],s[n+52>>2]=o,Gt(t,n+48|0),i=s[e+12>>2],o=s[e+8>>2],s[n+40>>2]=o,s[n+44>>2]=i,s[n+96>>2]=o,s[n+100>>2]=i,Gt(t,n+40|0),i=on(n+88|0,6042),o=s[i+4>>2],s[n+32>>2]=s[i>>2],s[n+36>>2]=o,Gt(t,n+32|0)),110!=A[s[(r=e+16|0)>>2]]?(i=s[r+4>>2],s[n+64>>2]=s[r>>2],s[n+68>>2]=i,o=n- -64|0):(o=on(n+80|0,6132),i=s[o+4>>2],s[n+24>>2]=s[o>>2],s[n+28>>2]=i,Gt(t,n+24|0),qt(n+72|0,r,1),o=n+72|0),i=s[o+4>>2],s[n+16>>2]=s[o>>2],s[n+20>>2]=i,Gt(t,n+16|0),s[e+12>>2]-s[e+8>>2]>>>0<=3&&(o=s[e+12>>2],e=s[e+8>>2],s[n+8>>2]=e,s[n+12>>2]=o,s[n+56>>2]=e,s[n+60>>2]=o,Gt(t,n+8|0)),x=n+112|0},Vn,function(e,t){var n,r;t|=0,x=n=x-16|0,e=on(n+8|0,A[8+(e|=0)|0]?6620:6625),r=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=r,Gt(t,n),x=n+16|0},Vn,function(e,t){t|=0;var n,r,o=0,a=0,l=0,c=0,u=0;if(x=n=x+-64|0,r=s[(e=8+(e|=0)|0)>>2],1+(s[e+4>>2]-r|0)>>>0>=9){for(o=n+56|0,e=0;8!=(0|e);)l=((a=i[(1|e)+r|0])-48>>>0<10?-48:-87)+a|0,a=i[e+r|0],i[0|o]=l+((a-48>>>0<10?0:9)+a<<4),o=o+1|0,e=e+2|0;qn(n+56|0,o),s[n+48>>2]=0,s[n+52>>2]=0,s[n+40>>2]=0,s[n+44>>2]=0,s[n+32>>2]=0,s[n+36>>2]=0,g[n+16>>3]=h[n+56>>2],c=e=n+24|0,u=$t(n+32|0,24,6744,n+16|0)+(n+32|0)|0,s[c+4>>2]=u,s[e>>2]=n+32,o=s[e+4>>2],s[n+8>>2]=s[e>>2],s[n+12>>2]=o,Gt(t,n+8|0)}x=n- -64|0},Vn,function(e,t){t|=0;var n,r,o=0,a=0,l=0,c=0,u=0;if(x=n=x-80|0,r=s[(e=8+(e|=0)|0)>>2],1+(s[e+4>>2]-r|0)>>>0>=17){for(o=n+72|0,e=0;16!=(0|e);)l=((a=i[(1|e)+r|0])-48>>>0<10?-48:-87)+a|0,a=i[e+r|0],i[0|o]=l+((a-48>>>0<10?0:9)+a<<4),o=o+1|0,e=e+2|0;qn(n+72|0,o),s[n+56>>2]=0,s[n+60>>2]=0,s[n+48>>2]=0,s[n+52>>2]=0,s[n+40>>2]=0,s[n+44>>2]=0,s[n+32>>2]=0,s[n+36>>2]=0,g[n+16>>3]=g[n+72>>3],c=e=n+24|0,u=$t(n+32|0,32,6860,n+16|0)+(n+32|0)|0,s[c+4>>2]=u,s[e>>2]=n+32,o=s[e+4>>2],s[n+8>>2]=s[e>>2],s[n+12>>2]=o,Gt(t,n+8|0)}x=n+80|0},Vn,function(e,t){t|=0;var n,r,o=0,a=0,l=0,c=0,u=0;if(x=n=x-112|0,r=s[(e=8+(e|=0)|0)>>2],1+(s[e+4>>2]-r|0)>>>0>=33){for(o=n+96|0,e=0;32!=(0|e);)l=((a=i[(1|e)+r|0])-48>>>0<10?-48:-87)+a|0,a=i[e+r|0],i[0|o]=l+((a-48>>>0<10?0:9)+a<<4),o=o+1|0,e=e+2|0;qn(n+96|0,o),fe(n+48|0,0,40),e=s[n+100>>2],s[n+16>>2]=s[n+96>>2],s[n+20>>2]=e,e=s[n+108>>2],s[n+24>>2]=s[n+104>>2],s[n+28>>2]=e,c=e=n+40|0,u=$t(n+48|0,40,6976,n+16|0)+(n+48|0)|0,s[c+4>>2]=u,s[e>>2]=n+48,o=s[e+4>>2],s[n+8>>2]=s[e>>2],s[n+12>>2]=o,Gt(t,n+8|0)}x=n+112|0},Vn,function(e,t){e|=0,t|=0;var n,r,o=0;x=n=x-32|0,o=on(n+24|0,7092),r=s[o+4>>2],s[n+8>>2]=s[o>>2],s[n+12>>2]=r,Gt(t,n+8|0),e=s[e+8>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),e=on(n+16|0,7095),o=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=o,Gt(t,n),x=n+32|0},Vn,function(e,t){e|=0,t|=0;var n,r,o=0;x=n=x-48|0,o=on(n+40|0,7240),r=s[o+4>>2],s[n+16>>2]=s[o>>2],s[n+20>>2]=r,Gt(t,n+16|0),o=s[e+12>>2],e=s[e+8>>2],s[n+8>>2]=e,s[n+12>>2]=o,s[n+32>>2]=e,s[n+36>>2]=o,Gt(t,n+8|0),e=on(n+24|0,7249),o=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=o,Gt(t,n),x=n+48|0},Vn,function(e,t){t|=0;var n,r,o,a=0,l=0;x=n=x-32|0,r=n,o=n;e:{t:{n:switch(s[8+(e|=0)>>2]){case 0:a=on(n+24|0,7388);break t;case 1:a=on(n+16|0,7391);break t;case 2:break n;default:break e}a=on(n+8|0,7394)}l=s[a+4>>2],s[o>>2]=s[a>>2],s[r+4>>2]=l,Gt(t,n)}(e=s[e+12>>2])&&function(e,t){var n,r=0,o=0,a=0,l=0,c=0;if(x=n=x-48|0,t){for(r=n+37|0;t|o;)l=r=r-1|0,c=(a=t)-Tn(t=zn(t,o,10),o=w,10,0)|48,i[0|l]=c;s[4+(t=n+8|0)>>2]=n+37,s[t>>2]=r,a=s[t+4>>2],s[n>>2]=s[t>>2],s[n+4>>2]=a,Pt(e,n)}else an(e,48);x=n+48|0}(t,e-1|0),x=n+32|0},Vn,function(e,t){var n,r;e|=0,t|=0,x=e=x-16|0,n=on(e+8|0,7516),r=s[n+4>>2],s[e>>2]=s[n>>2],s[e+4>>2]=r,Gt(t,e),x=e+16|0},Xt,Vn,function(e,t){t|=0;var n,r=0;x=n=x-16|0,r=s[12+(e|=0)>>2],Jn[s[s[r>>2]+16>>2]](r,t),e=s[e+12>>2],(e=2==(0|(r=A[e+5|0]))?0|Jn[s[s[e>>2]>>2]](e,t):!r)||(e=on(n+8|0,7648),r=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=r,Gt(t,n)),x=n+16|0},function(e,t){var n;t|=0,n=s[8+(e|=0)>>2],Jn[s[s[n>>2]+16>>2]](n,t),1!=A[n+5|0]&&Jn[s[s[n>>2]+20>>2]](n,t),e=s[e+12>>2],Jn[s[s[e>>2]+20>>2]](e,t)},Vn,function(e,t){e|=0,t|=0;var n,r,o=0;x=n=x-32|0,o=on(n+24|0,7772),r=s[o+4>>2],s[n+8>>2]=s[o>>2],s[n+12>>2]=r,Gt(t,n+8|0),Me(e+12|0,t),e=on(n+16|0,7782),o=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=o,Gt(t,n),x=n+32|0},Xt,Vn,function(e,t){var n,r;t|=0,x=n=x-16|0,e=s[8+(e|=0)>>2],Jn[s[s[e>>2]+16>>2]](e,t),e=on(n+8|0,7916),r=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=r,Gt(t,n),x=n+16|0},function(e,t){t|=0,e=s[8+(e|=0)>>2],Jn[s[s[e>>2]+20>>2]](e,t)},Vn,function(e,t){e|=0,t|=0;var n,r=0,o=0;x=n=x-48|0,r=on(n+40|0,8028),o=s[r+4>>2],s[n+16>>2]=s[r>>2],s[n+20>>2]=o,Gt(t,n+16|0),r=s[e+28>>2],o=s[e+24>>2],s[n+8>>2]=o,s[n+12>>2]=r,s[n+32>>2]=o,s[n+36>>2]=r,Gt(t,n+8|0),r=on(n+24|0,7249),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n),Te(e,t),x=n+48|0},Vn,function(e,t){e|=0,t|=0;var n,r,o=0;x=n=x-32|0,o=on(n+24|0,8140),r=s[o+4>>2],s[n+8>>2]=s[o>>2],s[n+12>>2]=r,Gt(t,n+8|0),e=s[e+8>>2],45==A[e+4|0]&&Te(e,t),e=on(n+16|0,8143),o=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=o,Gt(t,n),x=n+32|0},Vn,Qe,Vn,function(e,t){e|=0,t|=0;var n,r,o=0;x=n=x-32|0,o=on(n+24|0,8260),r=s[o+4>>2],s[n+8>>2]=s[o>>2],s[n+12>>2]=r,Gt(t,n+8|0),o=s[e+12>>2],e=s[e+8>>2],s[n>>2]=e,s[n+4>>2]=o,s[n+16>>2]=e,s[n+20>>2]=o,Gt(t,n),x=n+32|0},Vn,function(e,t){e|=0,t|=0;var n,r=0,o=0;x=n=x-112|0,s[n+108>>2]=e,s[n+104>>2]=t,an(t,40),A[e+24|0]?((r=s[e+12>>2])&&(Jn[s[s[r>>2]+16>>2]](r,t),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,t),an(t,32),r=s[e+20>>2],o=s[e+16>>2],s[n+48>>2]=o,s[n+52>>2]=r,s[n+96>>2]=o,s[n+100>>2]=r,Gt(t,n+48|0),an(t,32)),r=on(n+88|0,8572),o=s[r+4>>2],s[n+40>>2]=s[r>>2],s[n+44>>2]=o,Gt(t,n+40|0),r=s[e+20>>2],e=s[e+16>>2],s[n+32>>2]=e,s[n+36>>2]=r,s[n+80>>2]=e,s[n+84>>2]=r,Gt(t,n+32|0),an(t,32),ut(n+104|0)):(ut(n+104|0),an(t,32),r=s[e+20>>2],o=s[e+16>>2],s[n+24>>2]=o,s[n+28>>2]=r,s[n+72>>2]=o,s[n+76>>2]=r,Gt(t,n+24|0),r=on(n- -64|0,8577),o=s[r+4>>2],s[n+16>>2]=s[r>>2],s[n+20>>2]=o,Gt(t,n+16|0),s[e+12>>2]&&(an(t,32),r=s[e+20>>2],o=s[e+16>>2],s[n+8>>2]=o,s[n+12>>2]=r,s[n+56>>2]=o,s[n+60>>2]=r,Gt(t,n+8|0),an(t,32),e=s[e+12>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t))),an(t,41),x=n+112|0},Vn,he,Vn,function(e,t){t|=0;var n,r,o=0,i=0;x=n=x-128|0,jt(r=12+(e|=0)|0,on(n+120|0,6118))&&(o=on(n+112|0,6516),i=s[o+4>>2],s[n+56>>2]=s[o>>2],s[n+60>>2]=i,Gt(t,n+56|0)),o=on(n+104|0,6516),i=s[o+4>>2],s[n+48>>2]=s[o>>2],s[n+52>>2]=i,Gt(t,n+48|0),o=s[e+8>>2],Jn[s[s[o>>2]+16>>2]](o,t),1!=A[o+5|0]&&Jn[s[s[o>>2]+20>>2]](o,t),o=on(n+96|0,8804),i=s[o+4>>2],s[n+40>>2]=s[o>>2],s[n+44>>2]=i,Gt(t,n+40|0),o=s[e+16>>2],i=s[e+12>>2],s[n+32>>2]=i,s[n+36>>2]=o,s[n+88>>2]=i,s[n+92>>2]=o,Gt(t,n+32|0),o=on(n+80|0,8807),i=s[o+4>>2],s[n+24>>2]=s[o>>2],s[n+28>>2]=i,Gt(t,n+24|0),e=s[e+20>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),e=on(n+72|0,6042),o=s[e+4>>2],s[n+16>>2]=s[e>>2],s[n+20>>2]=o,Gt(t,n+16|0),jt(r,on(n+120|0,6118))&&(e=on(n- -64|0,6042),o=s[e+4>>2],s[n+8>>2]=s[e>>2],s[n+12>>2]=o,Gt(t,n+8|0)),x=n+128|0},Vn,function(e,t){t|=0;var n,r=0,o=0;x=n=x-48|0,r=s[12+(e|=0)>>2],o=s[e+8>>2],s[n+16>>2]=o,s[n+20>>2]=r,s[n+40>>2]=o,s[n+44>>2]=r,Gt(t,n+16|0),r=on(n+32|0,6516),o=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=o,Gt(t,n+8|0),e=s[e+16>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),e=on(n+24|0,6042),r=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=r,Gt(t,n),x=n+48|0},Vn,function(e,t){t|=0;var n,r=0,o=0;x=n=x+-64|0,r=s[12+(e|=0)>>2],o=s[e+8>>2],s[n+24>>2]=o,s[n+28>>2]=r,s[n+56>>2]=o,s[n+60>>2]=r,Gt(t,n+24|0),r=on(n+48|0,6130),o=s[r+4>>2],s[n+16>>2]=s[r>>2],s[n+20>>2]=o,Gt(t,n+16|0),r=s[e+16>>2],Jn[s[s[r>>2]+16>>2]](r,t),r=on(n+40|0,9016),o=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=o,Gt(t,n+8|0),e=s[e+20>>2],Jn[s[s[e>>2]+16>>2]](e,t),e=on(n+32|0,6042),r=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=r,Gt(t,n),x=n- -64|0},Vn,function(e,t){t|=0;var n,r,o=0;x=n=x-32|0,o=s[8+(e|=0)>>2],Jn[s[s[o>>2]+16>>2]](o,t),1!=A[o+5|0]&&Jn[s[s[o>>2]+20>>2]](o,t),o=on(n+24|0,6516),r=s[o+4>>2],s[n+8>>2]=s[o>>2],s[n+12>>2]=r,Gt(t,n+8|0),Me(e+12|0,t),e=on(n+16|0,6042),o=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=o,Gt(t,n),x=n+32|0},Vn,function(e,t){e|=0,t|=0;var n,r=0,o=0;x=n=x-48|0,r=on(n+40|0,6516),o=s[r+4>>2],s[n+16>>2]=s[r>>2],s[n+20>>2]=o,Gt(t,n+16|0),r=s[e+8>>2],Jn[s[s[r>>2]+16>>2]](r,t),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,t),r=on(n+32|0,9232),o=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=o,Gt(t,n+8|0),Me(e+12|0,t),e=on(n+24|0,6042),r=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=r,Gt(t,n),x=n+48|0},Vn,function(e,t){t|=0;var n,r=0,o=0;x=n=x-48|0,A[12+(e|=0)|0]&&(r=on(n+40|0,5904),o=s[r+4>>2],s[n+16>>2]=s[r>>2],s[n+20>>2]=o,Gt(t,n+16|0)),r=on(n+32|0,9340),o=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=o,Gt(t,n+8|0),A[e+13|0]&&(r=on(n+24|0,9347),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n)),e=s[e+8>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),x=n+48|0},Vn,je,nn,Vn,function(e,t){var n,r,o;e|=0,t|=0,x=n=x-16|0,r=on(n+8|0,6080),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n),e=s[e+8>>2],Jn[s[s[e>>2]+16>>2]](e,t),x=n+16|0},Vn,function(e,t){var n,r,o;e|=0,t|=0,x=n=x-16|0,r=on(n+8|0,10216),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n),e=s[e+8>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),x=n+16|0},Vn,function(e,t){var n,r,o;e|=0,t|=0,x=n=x-16|0,r=on(n+8|0,10336),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n),e=s[e+8>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),x=n+16|0},Vn,function(e,t){var n,r,o;e|=0,t|=0,x=n=x-16|0,r=on(n+8|0,5904),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n),e=s[e+8>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),x=n+16|0},rn,Vn,function(e,t){t|=0;var n,r,o=0;x=n=x-16|0,o=s[8+(e|=0)>>2],Jn[s[s[o>>2]+16>>2]](o,t),1!=A[o+5|0]&&Jn[s[s[o>>2]+20>>2]](o,t),o=s[e+16>>2],r=s[e+12>>2],s[n>>2]=r,s[n+4>>2]=o,s[n+8>>2]=r,s[n+12>>2]=o,Gt(t,n),e=s[e+20>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),x=n+16|0},Vn,function(e,t){e|=0,t|=0;var n,r=0,o=0;x=n=x-48|0,r=on(n+40|0,6516),o=s[r+4>>2],s[n+16>>2]=s[r>>2],s[n+20>>2]=o,Gt(t,n+16|0),r=s[e+8>>2],Jn[s[s[r>>2]+16>>2]](r,t),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,t),r=on(n+32|0,10676),o=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=o,Gt(t,n+8|0),e=s[e+12>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),e=on(n+24|0,10679),r=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=r,Gt(t,n),x=n+48|0},Vn,function(e,t){t|=0;var n,r=0,o=0;x=n=x-16|0,A[16+(e|=0)|0]?(an(t,91),r=s[e+8>>2],Jn[s[s[r>>2]+16>>2]](r,t),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,t),an(t,93)):(an(t,46),r=s[e+8>>2],Jn[s[s[r>>2]+16>>2]](r,t),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,t)),r=s[e+12>>2],(A[r+4|0]-73&255)>>>0>=2&&(r=on(n+8|0,10788),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n),r=s[e+12>>2]),Jn[s[s[r>>2]+16>>2]](r,t),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,t),x=n+16|0},Vn,function(e,t){e|=0;var n,r=0,o=0;x=n=x-32|0,an(t|=0,91),r=s[e+8>>2],Jn[s[s[r>>2]+16>>2]](r,t),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,t),r=on(n+24|0,10900),o=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=o,Gt(t,n+8|0),r=s[e+12>>2],Jn[s[s[r>>2]+16>>2]](r,t),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,t),an(t,93),r=s[e+16>>2],(A[r+4|0]-73&255)>>>0>=2&&(r=on(n+16|0,10788),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n),r=s[e+16>>2]),Jn[s[s[r>>2]+16>>2]](r,t),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,t),x=n+32|0},Vn,function(e,t){var n;t|=0,(n=s[8+(e|=0)>>2])&&(Jn[s[s[n>>2]+16>>2]](n,t),1!=A[n+5|0]&&Jn[s[s[n>>2]+20>>2]](n,t)),an(t,123),Me(e+12|0,t),an(t,125)},Vn,Qe,Vn,function(e,t){t|=0;var n,r=0,o=0,i=0;x=n=x-112|0,A[28+(e|=0)|0]&&(r=on(n+104|0,11232),o=s[r+4>>2],s[n+48>>2]=s[r>>2],s[n+52>>2]=o,Gt(t,n+48|0)),r=on(n+96|0,11244),o=s[r+4>>2],s[n+40>>2]=s[r>>2],s[n+44>>2]=o,Gt(t,n+40|0),A[e+29|0]&&(r=on(n+88|0,8140),o=s[r+4>>2],s[n+32>>2]=s[r>>2],s[n+36>>2]=o,Gt(t,n+32|0)),an(t,32),s[4+(r=e+8|0)>>2]&&(o=on(n+80|0,6516),i=s[o+4>>2],s[n+24>>2]=s[o>>2],s[n+28>>2]=i,Gt(t,n+24|0),Me(r,t),r=on(n+72|0,6042),o=s[r+4>>2],s[n+16>>2]=s[r>>2],s[n+20>>2]=o,Gt(t,n+16|0)),r=s[e+16>>2],Jn[s[s[r>>2]+16>>2]](r,t),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,t),s[4+(e=e+20|0)>>2]&&(r=on(n- -64|0,6516),o=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=o,Gt(t,n+8|0),Me(e,t),e=on(n+56|0,6042),r=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=r,Gt(t,n)),x=n+112|0},Vn,function(e,t){t|=0;var n,r,o,i=0;x=n=x-32|0,r=s[12+(e|=0)>>2],i=n,o=s[e+8>>2],s[i+8>>2]=o,s[i+12>>2]=r,s[i+24>>2]=o,s[i+28>>2]=r,Gt(t,i+8|0),i=s[e+16>>2],Jn[s[s[i>>2]+16>>2]](i,t),1!=A[i+5|0]&&Jn[s[s[i>>2]+20>>2]](i,t),i=s[e+24>>2],e=s[e+20>>2],s[n>>2]=e,s[n+4>>2]=i,s[n+16>>2]=e,s[n+20>>2]=i,Gt(t,n),x=n+32|0},Vn,function(e,t){e|=0,t|=0;var n,r=0,o=0;x=n=x+-64|0,r=on(n+56|0,6516),o=s[r+4>>2],s[n+24>>2]=s[r>>2],s[n+28>>2]=o,Gt(t,n+24|0),r=s[e+8>>2],Jn[s[s[r>>2]+16>>2]](r,t),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,t),r=on(n+48|0,11464),o=s[r+4>>2],s[n+16>>2]=s[r>>2],s[n+20>>2]=o,Gt(t,n+16|0),r=s[e+12>>2],Jn[s[s[r>>2]+16>>2]](r,t),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,t),r=on(n+40|0,11470),o=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=o,Gt(t,n+8|0),e=s[e+16>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),e=on(n+32|0,6042),r=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=r,Gt(t,n),x=n- -64|0},Vn,function(e,t){e|=0,t|=0;var n,r,o=0;x=n=x-48|0,o=on(n+40|0,11588),r=s[o+4>>2],s[n+8>>2]=s[o>>2],s[n+12>>2]=r,Gt(t,n+8|0),he(Yt(n+24|0,s[e+8>>2]),t),e=on(n+16|0,6042),o=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=o,Gt(t,n),x=n+48|0},Vn,On,Vn,function(e,t){var n,r,o;e|=0,t|=0,x=n=x-16|0,r=on(n+8|0,11812),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n),e=s[e+8>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),x=n+16|0},Vn,function(e,t){e|=0,t|=0;var n,r,o=0;x=n=x-32|0,o=on(n+24|0,11924),r=s[o+4>>2],s[n+8>>2]=s[o>>2],s[n+12>>2]=r,Pt(t,n+8|0),e=s[e+8>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),e=on(n+16|0,6042),o=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=o,Pt(t,n),x=n+32|0},Vn,function(e,t){t|=0;var n,r,o,i=0;x=n=x+-64|0,r=n,o=n;e:{t:{n:switch(s[8+(e|=0)>>2]){case 0:e=on(n+56|0,12056);break t;case 1:e=on(n+48|0,12071);break t;case 2:e=on(n+40|0,12089);break t;case 3:e=on(n+32|0,12160);break t;case 4:e=on(n+24|0,12210);break t;case 5:break n;default:break e}e=on(n+16|0,12260)}e=s[(i=e)+4>>2],s[o+8>>2]=s[i>>2],s[r+12>>2]=e,Gt(t,n+8|0)}x=n- -64|0},function(e,t){on(e|=0,s[15880+(s[8+(t|=0)>>2]<<2)>>2])},Vn,function(e,t){t|=0;var n,r=0,o=0;x=n=x-32|0,A[12+(e|=0)|0]&&(r=on(n+24|0,6080),o=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=o,Gt(t,n+8|0)),e=s[e+8>>2],Jn[s[s[e>>2]+24>>2]](n+16|0,e),e=s[n+20>>2],s[n>>2]=s[n+16>>2],s[n+4>>2]=e,Gt(t,n),x=n+32|0},Vn,function(e,t){t|=0;var n,r,o=0;x=n=x-48|0,o=s[8+(e|=0)>>2],Jn[s[s[o>>2]+16>>2]](o,t),o=on(n+40|0,12592),r=s[o+4>>2],s[n+16>>2]=s[o>>2],s[n+20>>2]=r,Gt(t,n+16|0),o=s[e+16>>2],e=s[e+12>>2],s[n+8>>2]=e,s[n+12>>2]=o,s[n+32>>2]=e,s[n+36>>2]=o,Gt(t,n+8|0),e=on(n+24|0,10679),o=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=o,Gt(t,n),x=n+48|0},Vn,function(e,t){e|=0,an(t|=0,91),Me(e+8|0,t),an(t,93)},Vn,je,Vn,function(e,t){t|=0;var n,r,o,i=0;x=n=x+-64|0,r=n,o=n;e:{t:{n:switch(s[8+(e|=0)>>2]){case 0:e=on(n+56|0,12056);break t;case 1:e=on(n+48|0,12071);break t;case 2:e=on(n+40|0,12952);break t;case 3:e=on(n+32|0,12964);break t;case 4:e=on(n+24|0,12977);break t;case 5:break n;default:break e}e=on(n+16|0,12990)}e=s[(i=e)+4>>2],s[o+8>>2]=s[i>>2],s[r+12>>2]=e,Gt(t,n+8|0)}x=n- -64|0},function(e,t){on(e|=0,s[15904+(s[8+(t|=0)>>2]<<2)>>2])},Vn,function(e,t){e|=0;var n=0;return-1==s[16+(t|=0)>>2]&&(n=s[e+12>>2],s[t+12>>2]=0,s[t+16>>2]=n),(n=s[t+12>>2])>>>0<p[e+12>>2]?(e=s[s[e+8>>2]+(n<<2)>>2],e=2==(0|(n=A[e+5|0]))?0|Jn[s[s[e>>2]>>2]](e,t):!n):e=0,0|e},function(e,t){e|=0;var n=0;return-1==s[16+(t|=0)>>2]&&(n=s[e+12>>2],s[t+12>>2]=0,s[t+16>>2]=n),(n=s[t+12>>2])>>>0<p[e+12>>2]?(e=s[s[e+8>>2]+(n<<2)>>2],e=2==(0|(n=A[e+6|0]))?0|Jn[s[s[e>>2]+4>>2]](e,t):!n):e=0,0|e},function(e,t){e|=0;var n=0;return-1==s[16+(t|=0)>>2]&&(n=s[e+12>>2],s[t+12>>2]=0,s[t+16>>2]=n),(n=s[t+12>>2])>>>0<p[e+12>>2]?(e=s[s[e+8>>2]+(n<<2)>>2],e=2==(0|(n=A[e+7|0]))?0|Jn[s[s[e>>2]+8>>2]](e,t):!n):e=0,0|e},function(e,t){e|=0;var n=0;return-1==s[16+(t|=0)>>2]&&(n=s[e+12>>2],s[t+12>>2]=0,s[t+16>>2]=n),(n=s[t+12>>2])>>>0<p[e+12>>2]&&(e=s[s[e+8>>2]+(n<<2)>>2],e=0|Jn[s[s[e>>2]+12>>2]](e,t)),0|e},function(e,t){e|=0;var n=0;-1==s[16+(t|=0)>>2]&&(n=s[e+12>>2],s[t+12>>2]=0,s[t+16>>2]=n),(n=s[t+12>>2])>>>0<p[e+12>>2]&&(e=s[s[e+8>>2]+(n<<2)>>2],Jn[s[s[e>>2]+16>>2]](e,t))},function(e,t){e|=0;var n=0;-1==s[16+(t|=0)>>2]&&(n=s[e+12>>2],s[t+12>>2]=0,s[t+16>>2]=n),(n=s[t+12>>2])>>>0<p[e+12>>2]&&(e=s[s[e+8>>2]+(n<<2)>>2],Jn[s[s[e>>2]+20>>2]](e,t))},Vn,function(e,t){e|=0,t|=0;var n,r,o=0;x=n=x-48|0,o=on(n+40|0,6130),r=s[o+4>>2],s[n+16>>2]=s[o>>2],s[n+20>>2]=r,Gt(t,n+16|0),Me(e+8|0,t),e=0,(o=s[t+4>>2])&&(e=A[(o+s[t>>2]|0)-1|0]),62==(0|e)&&(e=on(n+32|0,7648),o=s[e+4>>2],s[n+8>>2]=s[e>>2],s[n+12>>2]=o,Gt(t,n+8|0)),e=on(n+24|0,6118),o=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=o,Gt(t,n),x=n+48|0},Vn,function(e,t){var n;t|=0,n=s[8+(e|=0)>>2],Jn[s[s[n>>2]+16>>2]](n,t),1!=A[n+5|0]&&Jn[s[s[n>>2]+20>>2]](n,t),e=s[e+12>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t)},rn,Vn,function(e,t){var n,r,o;e|=0,t|=0,x=n=x-16|0,r=on(n+8|0,13484),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n),e=s[e+8>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),x=n+16|0},rn,Vn,On,Vn,function(e,t){var n,r,o;e|=0,t|=0,x=n=x-16|0,r=on(n+8|0,13716),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n),Me(e+8|0,t),an(t,93),x=n+16|0},Vn,Ln,Ln,function(e,t){t|=0;var n,r=0,o=0;x=n=x-16|0,(r=s[8+(e|=0)>>2])&&(Jn[s[s[r>>2]+16>>2]](r,t),r=s[e+8>>2],(r=2==(0|(o=A[r+5|0]))?0|Jn[s[s[r>>2]>>2]](r,t):!o)||(r=on(n+8|0,7648),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n))),e=s[e+12>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),x=n+16|0},function(e,t){e|=0,t|=0;var n,r,o=0,i=0,a=0;x=n=x-112|0,i=on(n+104|0,6516),o=s[i+4>>2],s[n+48>>2]=s[i>>2],s[n+52>>2]=o,Gt(t,n+48|0),Me(e+16|0,t),i=on(n+96|0,6042),o=s[i+4>>2],s[n+40>>2]=s[i>>2],s[n+44>>2]=o,Gt(t,n+40|0),(o=s[e+8>>2])&&Jn[s[s[o>>2]+20>>2]](o,t),1&(o=s[e+28>>2])&&(i=on(n+88|0,13844),o=s[i+4>>2],s[n+32>>2]=s[i>>2],s[n+36>>2]=o,Gt(t,n+32|0),o=s[e+28>>2]),2&o&&(i=on(n+80|0,13851),o=s[i+4>>2],s[n+24>>2]=s[i>>2],s[n+28>>2]=o,Gt(t,n+24|0),o=s[e+28>>2]),4&o&&(i=on(n+72|0,13861),o=s[i+4>>2],s[n+16>>2]=s[i>>2],s[n+20>>2]=o,Gt(t,n+16|0)),o=n,r=n;e:{t:{n:switch(A[e+32|0]-1|0){case 0:a=on(n- -64|0,13871);break t;case 1:break n;default:break e}a=on(n+56|0,13874)}i=s[a+4>>2],s[r+8>>2]=s[a>>2],s[o+12>>2]=i,Gt(t,n+8|0)}(e=s[e+24>>2])&&(Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t)),x=n+112|0},Vn,function(e,t){t|=0;var n,r,o=0;x=n=x-48|0,o=s[8+(e|=0)>>2],Jn[s[s[o>>2]+16>>2]](o,t),1!=A[o+5|0]&&Jn[s[s[o>>2]+20>>2]](o,t),o=on(n+40|0,8807),r=s[o+4>>2],s[n+16>>2]=s[o>>2],s[n+20>>2]=r,Gt(t,n+16|0),o=s[e+16>>2],e=s[e+12>>2],s[n+8>>2]=e,s[n+12>>2]=o,s[n+32>>2]=e,s[n+36>>2]=o,Gt(t,n+8|0),e=on(n+24|0,6042),o=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=o,Gt(t,n),x=n+48|0},Vn,function(e,t){e|=0,t|=0;var n,r,o=0;x=n=x-32|0,o=on(n+24|0,14348),r=s[o+4>>2],s[n+8>>2]=s[o>>2],s[n+12>>2]=r,Gt(t,n+8|0),e=s[e+8>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),e=on(n+16|0,6042),o=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=o,Gt(t,n),x=n+32|0},Vn,function(e,t){var n,r,o;e|=0,t|=0,x=n=x-16|0,r=on(n+8|0,14476),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n),Me(e+8|0,t),an(t,41),x=n+16|0},Vn,Ln,Ln,function(e,t){var n,r;t|=0,x=n=x-16|0,e=s[8+(e|=0)>>2],Jn[s[s[e>>2]+16>>2]](e,t),e=on(n+8|0,7648),r=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=r,Gt(t,n),x=n+16|0},function(e,t){e|=0,t|=0;var n,r,o=0,i=0,a=0;x=n=x-112|0,i=on(n+104|0,6516),o=s[i+4>>2],s[n+48>>2]=s[i>>2],s[n+52>>2]=o,Gt(t,n+48|0),Me(e+12|0,t),i=on(n+96|0,6042),o=s[i+4>>2],s[n+40>>2]=s[i>>2],s[n+44>>2]=o,Gt(t,n+40|0),o=s[e+8>>2],Jn[s[s[o>>2]+20>>2]](o,t),1&(o=s[e+20>>2])&&(i=on(n+88|0,13844),o=s[i+4>>2],s[n+32>>2]=s[i>>2],s[n+36>>2]=o,Gt(t,n+32|0),o=s[e+20>>2]),2&o&&(i=on(n+80|0,13851),o=s[i+4>>2],s[n+24>>2]=s[i>>2],s[n+28>>2]=o,Gt(t,n+24|0),o=s[e+20>>2]),4&o&&(i=on(n+72|0,13861),o=s[i+4>>2],s[n+16>>2]=s[i>>2],s[n+20>>2]=o,Gt(t,n+16|0)),o=n,r=n;e:{t:{n:switch(A[e+24|0]-1|0){case 0:a=on(n- -64|0,13871);break t;case 1:break n;default:break e}a=on(n+56|0,13874)}i=s[a+4>>2],s[r+8>>2]=s[a>>2],s[o+12>>2]=i,Gt(t,n+8|0)}s[e+28>>2]&&(an(t,32),e=s[e+28>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t)),x=n+112|0},Vn,function(e,t){t|=0;var n,r,o=0;x=n=x-48|0,o=s[8+(e|=0)>>2],Jn[s[s[o>>2]+16>>2]](o,t),1!=A[o+5|0]&&Jn[s[s[o>>2]+20>>2]](o,t),o=on(n+40|0,6130),r=s[o+4>>2],s[n+16>>2]=s[o>>2],s[n+20>>2]=r,Gt(t,n+16|0),o=s[e+16>>2],e=s[e+12>>2],s[n+8>>2]=e,s[n+12>>2]=o,s[n+32>>2]=e,s[n+36>>2]=o,Gt(t,n+8|0),e=on(n+24|0,6118),o=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=o,Gt(t,n),x=n+48|0},Vn,function(e,t){t|=0;var n,r,o=0;x=n=x-32|0,o=s[8+(e|=0)>>2],Jn[s[s[o>>2]+16>>2]](o,t),1!=A[o+5|0]&&Jn[s[s[o>>2]+20>>2]](o,t),o=on(n+24|0,7648),r=s[o+4>>2],s[n+8>>2]=s[o>>2],s[n+12>>2]=r,Gt(t,n+8|0),o=s[e+16>>2],e=s[e+12>>2],s[n>>2]=e,s[n+4>>2]=o,s[n+16>>2]=e,s[n+20>>2]=o,Gt(t,n),x=n+32|0},Vn,Ot,function(e,t){var n;return t|=0,e=s[12+(e|=0)>>2],0|(2==(0|(n=A[e+6|0]))?0|Jn[s[s[e>>2]+4>>2]](e,t):!n)},function(e,t){var n;return t|=0,e=s[12+(e|=0)>>2],0|(2==(0|(n=A[e+7|0]))?0|Jn[s[s[e>>2]+8>>2]](e,t):!n)},function(e,t){var n;t|=0,n=s[12+(e|=0)>>2],Jn[s[s[n>>2]+16>>2]](n,t),function(e,t){var n,r=0,o=0;x=n=x-48|0,1&(r=s[e+8>>2])&&(r=on(n+40|0,13844),o=s[r+4>>2],s[n+16>>2]=s[r>>2],s[n+20>>2]=o,Gt(t,n+16|0),r=s[e+8>>2]),2&r&&(r=on(n+32|0,13851),o=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=o,Gt(t,n+8|0),r=s[e+8>>2]),4&r&&(e=on(n+24|0,13861),r=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=r,Gt(t,n)),x=n+48|0}(e,t)},function(e,t){t|=0,e=s[12+(e|=0)>>2],Jn[s[s[e>>2]+20>>2]](e,t)},Vn,function(e,t){e|=0,t|=0;var n,r,o=0;x=n=x-32|0,o=on(n+24|0,15036),r=s[o+4>>2],s[n+8>>2]=s[o>>2],s[n+12>>2]=r,Gt(t,n+8|0),e=s[e+8>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),e=on(n+16|0,10679),o=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=o,Gt(t,n),x=n+32|0},Vn,function(e,t){t|=0;var n,r,o=0;x=n=x-32|0,o=s[8+(e|=0)>>2],Jn[s[s[o>>2]+16>>2]](o,t),1!=A[o+5|0]&&Jn[s[s[o>>2]+20>>2]](o,t),o=on(n+24|0,15156),r=s[o+4>>2],s[n+8>>2]=s[o>>2],s[n+12>>2]=r,Gt(t,n+8|0),(e=s[e+12>>2])&&(Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t)),e=on(n+16|0,10679),o=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=o,Gt(t,n),x=n+32|0},Vn,Ln,Ln,function(e,t){t|=0,e=s[8+(e|=0)>>2],Jn[s[s[e>>2]+16>>2]](e,t)},function(e,t){e|=0;var n,r=0,o=0;x=n=x-48|0,r=0,(o=s[4+(t|=0)>>2])&&(r=A[(o+s[t>>2]|0)-1|0]),93!=(0|r)&&(r=on(n+40|0,7648),o=s[r+4>>2],s[n+16>>2]=s[r>>2],s[n+20>>2]=o,Gt(t,n+16|0)),r=on(n+32|0,15272),o=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=o,Gt(t,n+8|0),(r=s[e+12>>2])&&(Jn[s[s[r>>2]+16>>2]](r,t),1!=A[r+5|0]&&Jn[s[s[r>>2]+20>>2]](r,t)),r=on(n+24|0,10679),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n),e=s[e+8>>2],Jn[s[s[e>>2]+20>>2]](e,t),x=n+48|0},Vn,Ot,function(e,t){t|=0;var n,r=0,o=0;x=n=x-48|0,r=s[12+(e|=0)>>2],Jn[s[s[r>>2]+16>>2]](r,t),r=s[e+12>>2],r=(r=2==(0|(o=A[r+6|0]))?0|Jn[s[s[r>>2]+4>>2]](r,t):!o)||(r=s[e+12>>2],r=2==(0|(o=A[r+7|0]))?0|Jn[s[s[r>>2]+8>>2]](r,t):!o)?on(n+40|0,6516):on(n+32|0,7648),o=s[r+4>>2],s[n+16>>2]=s[r>>2],s[n+20>>2]=o,Gt(t,n+16|0),e=s[e+8>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),r=on(n+24|0,15388),e=s[r+4>>2],s[n+8>>2]=s[r>>2],s[n+12>>2]=e,Gt(t,n+8|0),x=n+48|0},function(e,t){t|=0;var n,r=0,o=0;x=n=x-16|0,r=s[12+(e|=0)>>2],((r=2==(0|(o=A[r+6|0]))?0|Jn[s[s[r>>2]+4>>2]](r,t):!o)||(r=s[e+12>>2],r=2==(0|(o=A[r+7|0]))?0|Jn[s[s[r>>2]+8>>2]](r,t):!o))&&(r=on(n+8|0,6042),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n)),e=s[e+12>>2],Jn[s[s[e>>2]+20>>2]](e,t),x=n+16|0},Vn,function(e,t){var n,r,o;t|=0,x=n=x-16|0,r=s[12+(e|=0)>>2],o=s[e+8>>2],s[n>>2]=o,s[n+4>>2]=r,s[n+8>>2]=o,s[n+12>>2]=r,Gt(t,n),an(t,32),e=s[e+16>>2],Jn[s[s[e>>2]+16>>2]](e,t),1!=A[e+5|0]&&Jn[s[s[e>>2]+20>>2]](e,t),x=n+16|0},Vn,Ft,function(e,t){t|=0;var n,r=0,o=0,i=0;x=n=x-96|0;e:{t:{if(r=s[8+(e|=0)>>2],10==A[r+4|0]){if(Ct(r))break t;r=s[e+8>>2]}Jn[s[s[r>>2]+16>>2]](r,t),r=t,o=s[e+8>>2],(o=2==(0|(i=A[o+6|0]))?0|Jn[s[s[o>>2]+4>>2]](o,r):!i)&&(o=on(n+88|0,7648),i=s[o+4>>2],s[n+40>>2]=s[o>>2],s[n+44>>2]=i,Gt(r,n+40|0)),r=s[e+8>>2],((r=2==(0|(o=A[r+6|0]))?0|Jn[s[s[r>>2]+4>>2]](r,t):!o)||(e=s[e+8>>2],e=2==(0|(r=A[e+7|0]))?0|Jn[s[s[e>>2]+8>>2]](e,t):!r))&&(e=on(n+80|0,6516),r=s[e+4>>2],s[n+32>>2]=s[e>>2],s[n+36>>2]=r,Gt(t,n+32|0)),e=on(n+72|0,6095);break e}e=s[e+8>>2],r=on(n- -64|0,15640),o=s[r+4>>2],s[n+24>>2]=s[r>>2],s[n+28>>2]=o,Gt(t,n+24|0),r=s[e+16>>2],e=s[e+12>>2],s[n+16>>2]=e,s[n+20>>2]=r,s[n+56>>2]=e,s[n+60>>2]=r,Gt(t,n+16|0),e=on(n+48|0,6118)}r=s[e+4>>2],s[n+8>>2]=s[e>>2],s[n+12>>2]=r,Gt(t,n+8|0),x=n+96|0},function(e,t){t|=0;var n,r=0,o=0;x=n=x-16|0,r=s[8+(e|=0)>>2];e:{if(10==A[r+4|0]){if(Ct(r))break e;r=s[e+8>>2]}((r=2==(0|(o=A[r+6|0]))?0|Jn[s[s[r>>2]+4>>2]](r,t):!o)||(r=s[e+8>>2],r=2==(0|(o=A[r+7|0]))?0|Jn[s[s[r>>2]+8>>2]](r,t):!o))&&(r=on(n+8|0,6042),o=s[r+4>>2],s[n>>2]=s[r>>2],s[n+4>>2]=o,Gt(t,n)),e=s[e+8>>2],Jn[s[s[e>>2]+20>>2]](e,t)}x=n+16|0},Vn,Ft,function(e,t){t|=0;var n,r=0,o=0;x=n=x+-64|0,A[16+(e|=0)|0]||(o=Mt(n+56|0,e+16|0,1),ot(n+48|0,e,t),e=s[n+52>>2],Jn[s[s[e>>2]+16>>2]](e,t),e=s[n+52>>2],(e=2==(0|(r=A[e+6|0]))?0|Jn[s[s[e>>2]+4>>2]](e,t):!r)&&(e=on(n+40|0,7648),r=s[e+4>>2],s[n+16>>2]=s[e>>2],s[n+20>>2]=r,Gt(t,n+16|0)),e=s[n+52>>2],((e=2==(0|(r=A[e+6|0]))?0|Jn[s[s[e>>2]+4>>2]](e,t):!r)||(e=s[n+52>>2],e=2==(0|(r=A[e+7|0]))?0|Jn[s[s[e>>2]+8>>2]](e,t):!r))&&(e=on(n+32|0,6516),r=s[e+4>>2],s[n+8>>2]=s[e>>2],s[n+12>>2]=r,Gt(t,n+8|0)),e=on(n+24|0,s[n+48>>2]?6047:6050),r=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=r,Gt(t,n),A[o+5|0]&&(i[s[o>>2]]=A[o+4|0])),x=n- -64|0},function(e,t){t|=0;var n,r=0,o=0;x=n=x-32|0,A[16+(e|=0)|0]||(o=Mt(n+24|0,e+16|0,1),ot(n+16|0,e,t),e=s[n+20>>2],((e=2==(0|(r=A[e+6|0]))?0|Jn[s[s[e>>2]+4>>2]](e,t):!r)||(e=s[n+20>>2],e=2==(0|(r=A[e+7|0]))?0|Jn[s[s[e>>2]+8>>2]](e,t):!r))&&(e=on(n+8|0,6042),r=s[e+4>>2],s[n>>2]=s[e>>2],s[n+4>>2]=r,Gt(t,n)),e=s[n+20>>2],Jn[s[s[e>>2]+20>>2]](e,t),A[o+5|0]&&(i[s[o>>2]]=A[o+4|0])),x=n+32|0},Vn,function(e,t){t|=0;var n,r=0;x=n=x-16|0,r=s[8+(e|=0)>>2],Jn[s[s[r>>2]+16>>2]](r,t),r=s[e+16>>2],e=s[e+12>>2],s[n>>2]=e,s[n+4>>2]=r,s[n+8>>2]=e,s[n+12>>2]=r,Gt(t,n),x=n+16|0},Vn]).set=function(e,t){this[e]=t},Kn.get=function(e){return this[e]},Kn);function Zn(){return r.byteLength/65536|0}return{__wasm_call_ctors:Yn,malloc:D,free:z,ZSTD_isError:function(e){return(e|=0)>>>0>4294967176|0},ZSTD_getErrorName:function(e){return 1024},ZSTD_getFrameContentSize:function(e,t){return e=function(e,t){var n,r=0,o=0;return x=n=x-48|0,o=-1,r=-2,Y(n+8|0,e,t,0)||(o=0,r=0,1!=s[n+28>>2]&&(o=s[n+12>>2],r=s[n+8>>2])),x=n+48|0,w=o,r}(e|=0,t|=0),E(0|w),0|e},ZSTD_decompress:function(e,t,n,r){e|=0,t|=0,n|=0,r|=0;var o,i=0;return(o=D(160800))?(s[o+29556>>2]=0,s[o+29548>>2]=0,s[o+29552>>2]=0,s[o+160796>>2]=0,s[o+29636>>2]=0,s[o+29640>>2]=0,s[o+29620>>2]=0,s[o+29368>>2]=0,s[o+29568>>2]=0,s[o+29572>>2]=0,s[o+29532>>2]=0,s[o+29588>>2]=0,s[o+29592>>2]=0,s[o+29652>>2]=0,s[o+29656>>2]=0,s[o+29612>>2]=134217729,s[o+29536>>2]=0,s[o+29540>>2]=1,s[(i=o+29576|0)>>2]=0,s[i+4>>2]=0,s[(i=o+29596|0)>>2]=0,s[i+4>>2]=0,s[o+29604>>2]=0,e=function(e,t,n,r,o){var i,a,l,c,u;i=e,a=t,l=n,c=r,u=o;e:{switch(s[e+29592>>2]+1|0){default:t:if(t=s[e+29576>>2]){r=s[t+27320>>2],n=s[t+27316>>2];n:{r:{if(o=s[t>>2]){if(!n)break r;Jn[0|n](r,o),Jn[0|n](r,t);break t}if(!n)break n;Jn[0|n](r,t);break t}z(o)}z(t)}s[e+29592>>2]=0,s[e+29576>>2]=0,s[e+29580>>2]=0,e=0;break e;case 2:s[e+29592>>2]=0;case 0:}e=s[e+29580>>2]}return N(i,a,l,c,u,e)}(o,e,t,n,r),Ce(o),0|e):-64},ZSTD_createDStream:function(){var e,t=0;return(e=D(160800))?(s[e+29556>>2]=0,s[e+29548>>2]=0,s[e+29552>>2]=0,s[e+160796>>2]=0,s[e+29636>>2]=0,s[e+29640>>2]=0,s[e+29620>>2]=0,s[e+29368>>2]=0,s[e+29568>>2]=0,s[e+29572>>2]=0,s[e+29532>>2]=0,s[e+29588>>2]=0,s[e+29592>>2]=0,s[e+29652>>2]=0,s[e+29656>>2]=0,s[e+29612>>2]=134217729,s[e+29536>>2]=0,s[e+29540>>2]=1,s[(t=e+29576|0)>>2]=0,s[t+4>>2]=0,s[(t=e+29596|0)>>2]=0,s[t+4>>2]=0,s[e+29604>>2]=0,0|e):0},ZSTD_freeDStream:function(e){return 0|Ce(e|=0)},ZSTD_DStreamInSize:function(){return 131075},ZSTD_DStreamOutSize:function(){return 131072},ZSTD_initDStream:function(e){var t,n=0,r=0,o=0;s[29652+(e|=0)>>2]=0,s[e+29596>>2]=0;e:if(t=s[e+29576>>2]){r=s[t+27320>>2],n=s[t+27316>>2];t:{n:{if(o=s[t>>2]){if(!n)break n;Jn[0|n](r,o),Jn[0|n](r,t);break e}if(!n)break t;Jn[0|n](r,t);break e}z(o)}z(t)}return s[e+29592>>2]=0,s[e+29576>>2]=0,s[e+29580>>2]=0,0|(s[e+29532>>2]?1:5)},ZSTD_decompressStream_simpleArgs:function(e,t,n,r,o,i,a){var l;return e|=0,t|=0,n|=0,r|=0,o|=0,i|=0,a|=0,x=l=x-32|0,s[l+20>>2]=n,s[l+16>>2]=t,s[l+24>>2]=s[r>>2],s[l+4>>2]=i,s[l>>2]=o,s[l+8>>2]=s[a>>2],e=function(e,t,n){var r,o=0,i=0,a=0,l=0,c=0,u=0,d=0,f=0,h=0,g=0,y=0,v=0,b=0,C=0,I=0,E=0,B=0,w=0,_=0,S=0,T=0,k=0,Q=0,M=0,R=0,P=0,O=0,F=0,L=0,G=0;x=r=x-16|0;e:if((h=s[n+8>>2])>>>0>(g=s[n+4>>2])>>>0)o=-72;else if((i=s[t+8>>2])>>>0>(c=s[t+4>>2])>>>0)o=-70;else if(u=s[t>>2],y=s[n>>2],!s[e+29596>>2]|1!=s[e+29656>>2]||(o=-104,!((0|c)!=s[e+29664>>2]|(0|u)!=s[e+29660>>2]|(0|i)!=s[e+29668>>2]))){for(C=c+u|0,P=e+4120|0,O=e+6176|0,F=e+16|0,_=e+26668|0,L=e+10280|0,G=e+29356|0,T=(g=g+y|0)-(y=h+y|0)|0,I=e+160776|0,h=e+29376|0,E=e+29660|0,B=e+29428|0,w=e+29604|0,v=e+29620|0,k=e+160796|0,Q=b=e+29480|0,c=y,u=S=i+u|0;;){t:{o=-1,i=h,a=I;n:{r:{o:{i:{a:{s:{l:{c:switch(s[e+29596>>2]){case 3:l=s[B>>2],i=s[e+29372>>2];break r;case 1:o=s[e+29632>>2];break l;case 4:break a;case 2:break s;case 0:break c;default:break e}s[e+29596>>2]=1,s[e+29624>>2]=0,s[e+29628>>2]=0,s[e+29644>>2]=0,s[e+29648>>2]=0,s[e+29632>>2]=0,s[e+29608>>2]=0,o=s[t+4>>2],s[E>>2]=s[t>>2],s[E+4>>2]=o,s[E+8>>2]=s[t+8>>2],o=0}if((o=Y(i,a,o,s[e+29532>>2]))>>>0>4294967176)break e;if(o){if((l=o-(i=s[e+29632>>2])|0)>>>0>(a=g-c|0)>>>0){a&&(te(160776+(e+i|0)|0,c,a),i=a+s[e+29632>>2]|0,s[e+29632>>2]=i),s[n+8>>2]=s[n+4>>2],o=3+(((e=s[e+29532>>2]?2:6)>>>0>o>>>0?e:o)-i|0)|0;break e}te(160776+(e+i|0)|0,c,l),s[e+29632>>2]=o,c=l+c|0,i=1;break n}if(!(-1==(0|(a=s[h>>2]))&-1==(0|(i=s[h+4>>2]))|1==s[e+29396>>2]||!i&(o=a)>>>0>(a=C-u|0)>>>0|i||(ae(r,y,T),(i=s[r>>2])>>>0>T>>>0))){c=e,d=u,h=y,f=i;l:{switch(s[e+29592>>2]+1|0){default:c:if(b=s[e+29576>>2]){l=s[b+27320>>2],o=s[b+27316>>2];u:{d:{if(v=s[b>>2]){if(!o)break d;Jn[0|o](l,v),Jn[0|o](l,b);break c}if(!o)break u;Jn[0|o](l,b);break c}z(v)}z(b)}s[e+29592>>2]=0,s[e+29576>>2]=0,s[e+29580>>2]=0,o=0;break l;case 2:s[e+29592>>2]=0;case 0:}o=s[e+29580>>2]}if((o=N(c,d,a,h,f,o))>>>0>4294967176)break e;s[e+29596>>2]=0,s[e+29372>>2]=0,u=o+u|0,c=i+y|0;break t}if(!(1==s[e+29396>>2]|1!=s[e+29656>>2]||-1==(0|(i=s[h>>2]))&-1==(0|(a=s[h+4>>2]))|!a&C-u>>>0>=i>>>0)){o=-70;break e}l:{switch(s[e+29592>>2]+1|0){default:c:if(i=s[e+29576>>2]){o=s[i+27320>>2],a=s[i+27316>>2];u:{d:{if(l=s[i>>2]){if(!a)break d;Jn[0|a](o,l),Jn[0|a](o,i);break c}if(!a)break u;Jn[0|a](o,i);break c}z(l)}z(i)}o=0,s[e+29592>>2]=0,s[e+29576>>2]=0,s[e+29580>>2]=0,a=1;break l;case 2:s[e+29592>>2]=0;case 0:}(o=s[e+29580>>2])?(s[e+29588>>2]=s[e+29368>>2]!=(s[o+4>>2]+s[o+8>>2]|0),a=0):(o=0,a=1)}if(s[e+29416>>2]=0,s[e+29420>>2]=0,s[B>>2]=0,l=s[e+29532>>2],s[e+29372>>2]=l?1:5,s[(i=G)+8>>2]=0,s[i+12>>2]=0,s[i>>2]=0,s[i+4>>2]=0,s[e+10280>>2]=201326604,s[e+29584>>2]=0,s[e+29432>>2]=0,s[e+29436>>2]=0,s[e+29424>>2]=3,s[_+8>>2]=s[610],i=s[609],s[_>>2]=s[608],s[_+4>>2]=i,s[e+12>>2]=L,s[e+8>>2]=P,s[e+4>>2]=O,s[e>>2]=F,a||(s[e+29584>>2]=s[o+27304>>2],i=s[o+4>>2],s[e+29364>>2]=i,s[e+29360>>2]=i,i=i+s[o+8>>2]|0,s[e+29356>>2]=i,s[e+29368>>2]=i,s[o+27308>>2]?(s[e+29432>>2]=1,s[e+29436>>2]=1,s[e+12>>2]=o+10276,s[e+8>>2]=o+4116,s[e+4>>2]=o+6172,s[e>>2]=o+12,s[e+26668>>2]=s[o+26664>>2],s[e+26672>>2]=s[o+26668>>2],s[e+26676>>2]=s[o+26672>>2]):(s[e+29432>>2]=0,s[e+29436>>2]=0)),407710288!=(-16&(A[0|I]|A[I+1|0]<<8|A[I+2|0]<<16|A[I+3|0]<<24))){if((o=Y(h,I,s[e+29632>>2],l))>>>0>4294967176)break e;if(o){o=-72;break e}if(!(!(i=s[e+29404>>2])|(0|i)==s[e+29584>>2])){o=-32;break e}s[e+29408>>2]?(i=s[e+29536>>2],s[e+29540>>2]=!i,l=2,o=3,i||(s[e+29472>>2]=2048144761,s[e+29476>>2]=1640531534,s[e+29464>>2]=0,s[e+29468>>2]=0,s[e+29456>>2]=668265295,s[e+29460>>2]=-1028477379,s[e+29448>>2]=-1379879466,s[e+29452>>2]=1625958382,s[e+29440>>2]=0,s[e+29444>>2]=0,s[Q+32>>2]=0,s[Q+36>>2]=0,s[(i=b)+24>>2]=0,s[i+28>>2]=0,s[i+16>>2]=0,s[i+20>>2]=0,s[i+8>>2]=0,s[i+12>>2]=0,s[i>>2]=0,s[i+4>>2]=0)):(s[e+29540>>2]=0,l=2,o=3)}else o=A[e+160780|0]|A[e+160781|0]<<8|A[e+160782|0]<<16|A[e+160783|0]<<24,l=7;if(s[e+29372>>2]=o,s[B>>2]=l,a=s[e+29384>>2],a=(o=!(i=s[e+29388>>2])&a>>>0>1024|0!=(0|i))?a:1024,o=i=o?i:0,s[e+29384>>2]=a,s[e+29388>>2]=i,!i&a>>>0>p[e+29612>>2]|i){o=-16;break e}if(d=(i=s[e+29392>>2])>>>0>4?i:4,i=0,l=0,s[e+29656>>2]||(f=a,R=(a=!o&a>>>0<131072)?f:131072,a=(a?o:0)+o|0,l=((o=(0|(l=s[h+4>>2]))==(0|(a=(a=(f=f+R|0)>>>0<R>>>0?a+1|0:a)-(((o=f)>>>0<4294967232)-1|0)|0))&(f=o- -64|0)>>>0>(M=s[h>>2])>>>0|a>>>0>l>>>0)?l:a)>>>0<1?o?M:f:-16),i=(a=s[w>>2])+(f=s[v>>2])>>>0>=m(o=l+d|0,3)>>>0?s[k>>2]+1|0:i,s[k>>2]=i,!(i>>>0<128)||a>>>0<d>>>0|l>>>0>f>>>0){l:{c:{if(i=s[e+29568>>2]){if(o>>>0<=i-160800>>>0)break c;o=-64;break e}if((i=s[e+29600>>2])&&((a=A[e+29552|0]|A[e+29553|0]<<8|A[e+29554|0]<<16|A[e+29555|0]<<24)?Jn[0|a](A[e+29556|0]|A[e+29557|0]<<8|A[e+29558|0]<<16|A[e+29559|0]<<24,i):z(i)),s[v>>2]=0,s[w>>2]=0,a=e,i=(i=A[e+29548|0]|A[e+29549|0]<<8|A[e+29550|0]<<16|A[e+29551|0]<<24)?0|Jn[0|i](A[e+29556|0]|A[e+29557|0]<<8|A[e+29558|0]<<16|A[e+29559|0]<<24,o):D(o),s[a+29600>>2]=i,i)break l;o=-64;break e}i=s[e+29600>>2]}s[v>>2]=l,s[e+29616>>2]=i+d,s[w>>2]=d}s[e+29596>>2]=2}if(o=g-c|0,l=s[B>>2],s[e+29424>>2]|l-3>>>0>=2)break i;a=o>>>0>1?o:1,a=(i=s[e+29372>>2])>>>0>a>>>0?a:i;break o}a=e,l=C-u|0,i=s[e+29624>>2],(o=(f=l>>>0<(d=s[e+29628>>2]-i|0)>>>0)?l:d)&&(te(u,i+s[e+29616>>2]|0,o),i=s[e+29624>>2]),i=o+i|0,s[a+29624>>2]=i,f||(s[e+29596>>2]=2,a=s[v>>2],!s[e+29380>>2]&a>>>0>=p[e+29376>>2]|a>>>0>=i+s[e+29392>>2]>>>0||(s[e+29624>>2]=0,s[e+29628>>2]=0)),u=o+u|0,i=l>>>0>=d>>>0;break n}a=i=s[e+29372>>2]}if(!a){s[e+29596>>2]=0;break t}if(o>>>0>=a>>>0){d=7==(0|l),i=e;o:{i:{if(!s[e+29656>>2]){if(7!=(0|l)?(o=s[e+29624>>2],l=s[v>>2]-o|0):(o=s[e+29624>>2],l=0),(o=U(e,s[e+29616>>2]+o|0,l,c,a))>>>0>4294967176)break e;if(!(o|d))break i;s[e+29628>>2]=s[e+29624>>2]+o,o=4;break o}if((o=U(e,u,d?0:C-u|0,c,a))>>>0>4294967176)break e;u=o+u|0}o=2}s[i+29596>>2]=o,c=a+c|0,i=1;break n}if((0|c)==(0|g)){c=g;break t}s[e+29596>>2]=3}if(a=i-(o=s[e+29608>>2])|0,7!=(0|l)){if(a>>>0>s[w>>2]-o>>>0){o=-20;break e}(l=a>>>0<(l=g-c|0)>>>0?a:l)?(te(s[e+29600>>2]+o|0,c,l),o=s[e+29608>>2]):l=0}else l=a>>>0<(l=g-c|0)>>>0?a:l;if(s[e+29608>>2]=o+l,c=l+c|0,a>>>0>l>>>0)break t;if(s[e+29608>>2]=0,a=7==(0|(l=s[B>>2])),o=s[e+29600>>2],s[e+29656>>2]){if((o=U(e,u,a?0:C-u|0,o,i))>>>0>4294967176)break e;s[e+29596>>2]=2,u=o+u|0,i=1}else{if(7!=(0|l)?(l=s[e+29624>>2],d=s[v>>2]-l|0):(l=s[e+29624>>2],d=0),(o=U(e,s[e+29616>>2]+l|0,d,o,i))>>>0>4294967176)break e;if(!(o|a)){s[e+29596>>2]=2,i=1;break n}s[e+29596>>2]=4,s[e+29628>>2]=s[e+29624>>2]+o,i=1}}if(i)continue}break}s[n+8>>2]=c-s[n>>2],i=u-s[t>>2]|0,s[t+8>>2]=i,s[E+8>>2]=i,i=s[t+4>>2],s[E>>2]=s[t>>2],s[E+4>>2]=i;t:{if(!((0|u)!=(0|S)|(0|c)!=(0|y))){if(t=s[e+29652>>2],s[e+29652>>2]=t+1,(0|t)<15)break t;if(o=-70,(0|C)==(0|S))break e;if(o=-72,(0|g)!=(0|y))break t;break e}s[e+29652>>2]=0}if(t=s[e+29372>>2])o=(t-s[e+29608>>2]|0)+(3==s[e+29428>>2]?3:0)|0;else{if(t=s[e+29648>>2],s[e+29628>>2]==s[e+29624>>2]){if(o=0,!t)break e;if((t=s[n+8>>2])>>>0>=p[n+4>>2]){s[e+29596>>2]=2,o=1;break e}s[n+8>>2]=t+1;break e}if(o=1,t)break e;s[n+8>>2]=s[n+8>>2]-1,s[e+29648>>2]=1}}return x=r+16|0,o}(e,l+16|0,l),s[r>>2]=s[l+24>>2],s[a>>2]=s[l+8>>2],x=l+32|0,0|e},__indirect_function_table:Jn,__errno_location:function(){return 16164},fflush:function e(t){var n=0;if(t|=0)return s[t+76>>2],0|Ve(t);if(s[4185]&&(n=e(s[4185])),t=s[4184])for(;p[t+20>>2]>p[t+28>>2]&&(n=Ve(t)|n),t=s[t+56>>2];);return 0|n},stackSave:function(){return 0|x},stackRestore:function(e){x=e|=0},stackAlloc:function(e){return x=e=x-(e|=0)&-16,0|e},emscripten_stack_init:Yn,emscripten_stack_get_free:function(){return x-B|0},emscripten_stack_get_end:function(){return 0|B},__cxa_demangle:function(e,t,n,r){e|=0,r|=0;var o,i=0,l=0,c=0,u=0;x=o=x-4560|0;e:if((n|=0)|!(t|=0)&&e)(function(e,t,n){s[e+4>>2]=n,s[e>>2]=t,tn(e+8|0),tn(e+148|0),At(e+288|0),Rt(e+332|0),Rt(e+360|0),s[e+396>>2]=0,s[e+400>>2]=0,s[e+392>>2]=-1,a[e+388>>1]=1,s[e+404>>2]=0,s[e+416>>2]=0,s[e+420>>2]=0,s[4096+(e=e+416|0)>>2]=e})(c=o+32|0,e,Oe(e)+e|0),e=0,s[8+(i=o+8|0)>>2]=0,s[i>>2]=0,s[i+4>>2]=0,s[i+12>>2]=-1,s[i+16>>2]=-1,(l=ne(c))?(u=-1,function(e,t,n){var r;r=n;t:{if(!e){if(t=1024,e=D(1024))break t;return 0}t=s[t>>2]}return s[r+8>>2]=t,s[n>>2]=e,s[n+4>>2]=0,1}(t,n,i)&&(Jn[s[s[l>>2]+16>>2]](l,i),1!=A[l+5|0]&&Jn[s[s[l>>2]+20>>2]](l,i),u=0,an(i,0),n&&(s[n>>2]=s[i+4>>2]),e=s[i>>2])):u=-2,r&&(s[r>>2]=u),function(e){(function(e){for(var t=0;t=s[e+4096>>2];)s[e+4096>>2]=s[t>>2],(0|e)!=(0|t)&&z(t);s[e>>2]=0,s[e+4>>2]=0,s[e+4096>>2]=e})(e+416|0),Bn(e+360|0),Bn(e+332|0),Bn(e+288|0),Bn(e+148|0),Bn(e+8|0)}(c);else{if(e=0,!r)break e;s[r>>2]=-3}return x=o+4560|0,0|e}}}(e)}(ve)},instantiate:function(e,t){return{then:function(t){var n=new x.Module(e);return t({instance:new x.Instance(n)}),{catch:function(){}}}}},RuntimeError:Error};C=[],"object"!=typeof x&&te("no native wasm support detected");var B=!1;function w(e,t){e||te("Assertion failed: "+t)}function _(e,n,r,o,i){var a={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);N(e,t=xe(n),n)}return t},array:function(e){var t=xe(e.length);return function(e,t){w(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),D.set(e,t)}(e,t),t}},s=function(e){var n=t["_"+e];return w(n,"Cannot call unknown function "+e+", make sure it is exported"),n}(e),l=[],c=0;if(w("array"!==n,'Return type should not be "array".'),o)for(var u=0;u<o.length;u++){var d=a[r[u]];d?(0===c&&(c=Ie()),l[u]=d(o[u])):l[u]=o[u]}var A=s.apply(null,l);return A=function(e){return"string"===n?F(e):"boolean"===n?Boolean(e):e}(A),0!==c&&Ee(c),A}var S,D,T,k,Q,M,R,P,O="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function F(e,t){return e?function(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&O)return O.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var l=63&e[t++];if(224==(240&a)?a=(15&a)<<12|s<<6|l:(240!=(248&a)&&b("Invalid UTF-8 leading byte 0x"+a.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),a=(7&a)<<18|s<<12|l<<6|63&e[t++]),a<65536)i+=String.fromCharCode(a);else{var c=a-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i}(T,e,t):""}function N(e,t,n){return w("number"==typeof n,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),function(e,t,n,r){if(!(r>0))return 0;for(var o=n,i=n+r-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;s>=2097152&&b("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-o}(e,T,t,n)}function L(e){S=e,t.HEAP8=D=new Int8Array(e),t.HEAP16=k=new Int16Array(e),t.HEAP32=Q=new Int32Array(e),t.HEAPU8=T=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=M=new Uint32Array(e),t.HEAPF32=R=new Float32Array(e),t.HEAPF64=P=new Float64Array(e)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var U=5242880;t.TOTAL_STACK&&w(U===t.TOTAL_STACK,"the stack size can no longer be determined at runtime");var G,j=t.INITIAL_MEMORY||16777216;function z(){var e=_e();w(0==(3&e)),M[1+(e>>2)]=34821223,M[2+(e>>2)]=2310721022,Q[0]=1668509029}function H(){if(!B){var e=_e(),t=M[1+(e>>2)],n=M[2+(e>>2)];34821223==t&&2310721022==n||te("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+n.toString(16)+" "+t.toString(16)),1668509029!==Q[0]&&te("Runtime error: The application has corrupted its heap memory area (address zero)!")}}Object.getOwnPropertyDescriptor(t,"INITIAL_MEMORY")||Object.defineProperty(t,"INITIAL_MEMORY",{configurable:!0,get:function(){te("Module.INITIAL_MEMORY has been replaced with plain INITIAL_MEMORY (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),w(j>=U,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+j+"! (TOTAL_STACK=5242880)"),w("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&void 0!==Int32Array.prototype.subarray&&void 0!==Int32Array.prototype.set,"JS engine does not provide full typed array support"),(E=t.wasmMemory?t.wasmMemory:new x.Memory({initial:j/65536,maximum:32768}))&&(S=E.buffer),w((j=S.byteLength)%65536==0),L(S),function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian!"}();var V=[],q=[],Y=[],X=[],W=!1;if(q.push({func:function(){be()}}),Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(e,t){var n=65535&e,r=65535&t;return n*r+((e>>>16)*r+n*(t>>>16)<<16)|0}),!Math.fround){var K=new Float32Array(1);Math.fround=function(e){return K[0]=e,K[0]}}Math.clz32||(Math.clz32=function(e){var t=32,n=e>>16;return n&&(t-=16,e=n),(n=e>>8)&&(t-=8,e=n),(n=e>>4)&&(t-=4,e=n),(n=e>>2)&&(t-=2,e=n),(n=e>>1)?t-2:t-e}),Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),w(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),w(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),w(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),w(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var J=0,Z=null,$=null,ee={};function te(e){var n,r;t.onAbort&&t.onAbort(e),v(e+=""),B=!0,e="abort("+e+") at "+(r=function(){var e=new Error;if(!e.stack){try{throw new Error}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}(),t.extraStackTrace&&(r+="\n"+t.extraStackTrace()),n=/\b_Z[\w\d_]+/g,r.replace(n,(function(e){var t=fe(e);return e===t?e:t+" ["+e+"]"})));var o=new x.RuntimeError(e);throw i(o),o}t.preloadedImages={},t.preloadedAudios={};var ne={error:function(){te("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1")},init:function(){ne.error()},createDataFile:function(){ne.error()},createPreloadedFile:function(){ne.error()},createLazyFile:function(){ne.error()},open:function(){ne.error()},mkdev:function(){ne.error()},registerDevice:function(){ne.error()},analyzePath:function(){ne.error()},loadFilesFromDB:function(){ne.error()},ErrnoError:function(){ne.error()}};function re(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}t.FS_createDataFile=ne.createDataFile,t.FS_createPreloadedFile=ne.createPreloadedFile;var oe="data:application/octet-stream;base64,";function ie(e){return re(e,oe)}function ae(e){return re(e,"file://")}function se(e,n){return function(){var r=e,o=n;return n||(o=t.asm),w(W,"native function `"+r+"` called before runtime initialization"),w(!0,"native function `"+r+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o[e]||w(o[e],"exported native function `"+r+"` not found"),o[e].apply(null,arguments)}}var le,ce,ue="<<< WASM_BINARY_FILE >>>";function de(e){try{if(e==ue&&C)return new Uint8Array(C);var t=ye(e);if(t)return t;if(h)return h(e);throw"both async and sync fetching of the wasm failed"}catch(e){te(e)}}function Ae(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?G.get(r)():G.get(r)(n.arg):r(void 0===n.arg?null:n.arg)}else n(t)}}function fe(e){if(fe.recursionGuard=1+(0|fe.recursionGuard),fe.recursionGuard>1)return e;var n=t.___cxa_demangle||t.__cxa_demangle;w(n);var r=Ie();try{var o=e;o.startsWith("__Z")&&(o=o.substr(1));var i=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(o)+1,a=xe(i);N(o,a,i);var s=xe(4),l=n(a,0,0,s);if(0===Q[s>>2]&&l)return F(l)}catch(e){}finally{Ce(l),Ee(r),fe.recursionGuard<2&&--fe.recursionGuard}return e}ie(ue)||(ue=function(e){return t.locateFile?t.locateFile(e,y):y+e}(ue));var pe=Uint8Array.prototype.copyWithin?function(e,t,n){T.copyWithin(e,t,t+n)}:function(e,t,n){T.set(T.subarray(t,t+n),e)};function he(e){try{return E.grow(e-S.byteLength+65535>>>16),L(E.buffer),1}catch(t){console.error("emscripten_realloc_buffer: Attempted to grow heap from "+S.byteLength+" bytes to "+e+" bytes, but got error: "+t)}}function ge(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r>255&&(w(!1,"Character code "+r+" ("+String.fromCharCode(r)+")  at offset "+n+" not in 0x00-0xFF."),r&=255),t.push(String.fromCharCode(r))}return t.join("")}var me="function"==typeof atob?atob:function(e){var t,n,r,o,i,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=s.indexOf(e.charAt(c++))<<2|(o=s.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(i=s.indexOf(e.charAt(c++)))>>2,r=(3&i)<<6|(a=s.indexOf(e.charAt(c++))),l+=String.fromCharCode(t),64!==i&&(l+=String.fromCharCode(n)),64!==a&&(l+=String.fromCharCode(r))}while(c<e.length);return l};function ye(e){if(ie(e))return function(e){if("boolean"==typeof u&&u){var t;try{t=Buffer.from(e,"base64")}catch(n){t=new Buffer(e,"base64")}return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}try{for(var n=me(e),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}catch(e){throw new Error("Converting base64 string to bytes failed.")}}(e.slice(oe.length))}var ve={emscripten_memcpy_big:pe,emscripten_resize_heap:function(e){var t=T.length;w(e>t);var n,r=2147483648;if(e>r)return v("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is 2147483648 bytes!"),!1;for(var o=1;o<=4;o*=2){var i=t*(1+.2/o);i=Math.min(i,e+100663296);var a=Math.min(r,((n=Math.max(e,i))%65536>0&&(n+=65536-n%65536),n));if(he(a))return v("Warning: Enlarging memory arrays, this is not fast! "+[t,a]),!0}return v("Failed to grow the heap from "+t+" bytes to "+a+" bytes, not enough memory!"),!1},getTempRet0:function(){return I},memory:E,setTempRet0:function(e){I=e}};!function(){var e={env:ve,wasi_snapshot_preview1:ve};function n(e,n){var r=e.exports;t.asm=r,w(G=t.asm.__indirect_function_table,"table not found in wasm exports"),function(e){if(J--,t.monitorRunDependencies&&t.monitorRunDependencies(J),e?(w(ee[e]),delete ee[e]):v("warning: run dependency removed without ID"),0==J&&(null!==Z&&(clearInterval(Z),Z=null),$)){var n=$;$=null,n()}}("wasm-instantiate")}!function(e){J++,t.monitorRunDependencies&&t.monitorRunDependencies(J),e?(w(!ee[e]),ee[e]=1,null===Z&&"undefined"!=typeof setInterval&&(Z=setInterval((function(){if(B)return clearInterval(Z),void(Z=null);var e=!1;for(var t in ee)e||(e=!0,v("still waiting on run dependencies:")),v("dependency: "+t);e&&v("(end of list)")}),1e4))):v("warning: run dependency added without ID")}("wasm-instantiate");var r=t;function o(e){w(t===r,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),r=null,n(e.instance)}function s(t){return function(){if(!C&&(l||c)){if("function"==typeof fetch&&!ae(ue))return fetch(ue,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ue+"'";return e.arrayBuffer()})).catch((function(){return de(ue)}));if(p)return new a((function(e,t){p(ue,(function(t){e(new Uint8Array(t))}),t)}))}return a.resolve().then((function(){return de(ue)}))}().then((function(t){return x.instantiate(t,e)})).then(t,(function(e){v("failed to asynchronously prepare wasm: "+e),ae(ue)&&v("warning: Loading from a file URI ("+ue+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),te(e)}))}if(t.instantiateWasm)try{return t.instantiateWasm(e,n)}catch(e){return v("Module.instantiateWasm callback failed with error: "+e),!1}(C||"function"!=typeof x.instantiateStreaming||ie(ue)||ae(ue)||"function"!=typeof fetch?s(o):fetch(ue,{credentials:"same-origin"}).then((function(t){return x.instantiateStreaming(t,e).then(o,(function(e){return v("wasm streaming compile failed: "+e),v("falling back to ArrayBuffer instantiation"),s(o)}))}))).catch(i)}();var be=t.___wasm_call_ctors=se("__wasm_call_ctors");t._malloc=se("malloc");var Ce=t._free=se("free");t._ZSTD_isError=se("ZSTD_isError"),t._ZSTD_getErrorName=se("ZSTD_getErrorName"),t._ZSTD_getFrameContentSize=se("ZSTD_getFrameContentSize"),t._ZSTD_decompress=se("ZSTD_decompress"),t._ZSTD_createDStream=se("ZSTD_createDStream"),t._ZSTD_freeDStream=se("ZSTD_freeDStream"),t._ZSTD_DStreamInSize=se("ZSTD_DStreamInSize"),t._ZSTD_DStreamOutSize=se("ZSTD_DStreamOutSize"),t._ZSTD_initDStream=se("ZSTD_initDStream"),t._ZSTD_decompressStream_simpleArgs=se("ZSTD_decompressStream_simpleArgs"),t.___errno_location=se("__errno_location"),t._fflush=se("fflush");var Ie=t.stackSave=se("stackSave"),Ee=t.stackRestore=se("stackRestore"),xe=t.stackAlloc=se("stackAlloc"),Be=t._emscripten_stack_init=function(){return(Be=t._emscripten_stack_init=t.asm.emscripten_stack_init).apply(null,arguments)};t._emscripten_stack_get_free=function(){return(t._emscripten_stack_get_free=t.asm.emscripten_stack_get_free).apply(null,arguments)};var we,_e=t._emscripten_stack_get_end=function(){return(_e=t._emscripten_stack_get_end=t.asm.emscripten_stack_get_end).apply(null,arguments)};function Se(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function De(e){function n(){we||(we=!0,t.calledRun=!0,B||(H(),w(!W),W=!0,Ae(q),H(),Ae(Y),o(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),w(!t._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(H(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)e=t.postRun.shift(),X.unshift(e);var e;Ae(X)}()))}J>0||(Be(),z(),function(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)e=t.preRun.shift(),V.unshift(e);var e;Ae(V)}(),J>0||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),n()}),1)):n(),H()))}if(t.___cxa_demangle=se("__cxa_demangle"),Object.getOwnPropertyDescriptor(t,"intArrayFromString")||(t.intArrayFromString=function(){te("'intArrayFromString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"intArrayToString")||(t.intArrayToString=function(){te("'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ccall")||(t.ccall=function(){te("'ccall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.cwrap=function(e,t,n,r){return function(){return _(e,t,n,arguments)}},t.setValue=function(e,t,n,r){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":D[e|0]=t;break;case"i16":k[e>>1]=t;break;case"i32":Q[e>>2]=t;break;case"i64":ce=[t>>>0,(le=t,+Math.abs(le)>=1?le>0?(0|Math.min(+Math.floor(le/4294967296),4294967295))>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],Q[e>>2]=ce[0],Q[e+4>>2]=ce[1];break;case"float":R[e>>2]=t;break;case"double":P[e>>3]=t;break;default:te("invalid type for setValue: "+n)}},t.getValue=function(e,t,n){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return D[e|0];case"i16":return k[e>>1];case"i32":case"i64":return Q[e>>2];case"float":return R[e>>2];case"double":return P[e>>3];default:te("invalid type for getValue: "+t)}return null},Object.getOwnPropertyDescriptor(t,"allocate")||(t.allocate=function(){te("'allocate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF8ArrayToString")||(t.UTF8ArrayToString=function(){te("'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF8ToString")||(t.UTF8ToString=function(){te("'UTF8ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF8Array")||(t.stringToUTF8Array=function(){te("'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF8")||(t.stringToUTF8=function(){te("'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF8")||(t.lengthBytesUTF8=function(){te("'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackTrace")||(t.stackTrace=function(){te("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnPreRun")||(t.addOnPreRun=function(){te("'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.addOnInit=function(e){q.unshift(e)},Object.getOwnPropertyDescriptor(t,"addOnPreMain")||(t.addOnPreMain=function(){te("'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnExit")||(t.addOnExit=function(){te("'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnPostRun")||(t.addOnPostRun=function(){te("'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeStringToMemory")||(t.writeStringToMemory=function(){te("'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeArrayToMemory")||(t.writeArrayToMemory=function(){te("'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeAsciiToMemory")||(t.writeAsciiToMemory=function(){te("'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addRunDependency")||(t.addRunDependency=function(){te("'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"removeRunDependency")||(t.removeRunDependency=function(){te("'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createFolder")||(t.FS_createFolder=function(){te("'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"FS_createPath")||(t.FS_createPath=function(){te("'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createDataFile")||(t.FS_createDataFile=function(){te("'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createPreloadedFile")||(t.FS_createPreloadedFile=function(){te("'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createLazyFile")||(t.FS_createLazyFile=function(){te("'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createLink")||(t.FS_createLink=function(){te("'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"FS_createDevice")||(t.FS_createDevice=function(){te("'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_unlink")||(t.FS_unlink=function(){te("'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"getLEB")||(t.getLEB=function(){te("'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getFunctionTables")||(t.getFunctionTables=function(){te("'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"alignFunctionTables")||(t.alignFunctionTables=function(){te("'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerFunctions")||(t.registerFunctions=function(){te("'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addFunction")||(t.addFunction=function(){te("'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"removeFunction")||(t.removeFunction=function(){te("'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getFuncWrapper")||(t.getFuncWrapper=function(){te("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"prettyPrint")||(t.prettyPrint=function(){te("'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"makeBigInt")||(t.makeBigInt=function(){te("'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"dynCall")||(t.dynCall=function(){te("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getCompilerSetting")||(t.getCompilerSetting=function(){te("'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"print")||(t.print=function(){te("'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"printErr")||(t.printErr=function(){te("'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getTempRet0")||(t.getTempRet0=function(){te("'getTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setTempRet0")||(t.setTempRet0=function(){te("'setTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"callMain")||(t.callMain=function(){te("'callMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"abort")||(t.abort=function(){te("'abort' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToNewUTF8")||(t.stringToNewUTF8=function(){te("'stringToNewUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setFileTime")||(t.setFileTime=function(){te("'setFileTime' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscripten_realloc_buffer")||(t.emscripten_realloc_buffer=function(){te("'emscripten_realloc_buffer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ENV")||(t.ENV=function(){te("'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ERRNO_CODES")||(t.ERRNO_CODES=function(){te("'ERRNO_CODES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ERRNO_MESSAGES")||(t.ERRNO_MESSAGES=function(){te("'ERRNO_MESSAGES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setErrNo")||(t.setErrNo=function(){te("'setErrNo' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readSockaddr")||(t.readSockaddr=function(){te("'readSockaddr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeSockaddr")||(t.writeSockaddr=function(){te("'writeSockaddr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"DNS")||(t.DNS=function(){te("'DNS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getHostByName")||(t.getHostByName=function(){te("'getHostByName' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GAI_ERRNO_MESSAGES")||(t.GAI_ERRNO_MESSAGES=function(){te("'GAI_ERRNO_MESSAGES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"Protocols")||(t.Protocols=function(){te("'Protocols' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"Sockets")||(t.Sockets=function(){te("'Sockets' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getRandomDevice")||(t.getRandomDevice=function(){te("'getRandomDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"traverseStack")||(t.traverseStack=function(){te("'traverseStack' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UNWIND_CACHE")||(t.UNWIND_CACHE=function(){te("'UNWIND_CACHE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"withBuiltinMalloc")||(t.withBuiltinMalloc=function(){te("'withBuiltinMalloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readAsmConstArgsArray")||(t.readAsmConstArgsArray=function(){te("'readAsmConstArgsArray' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readAsmConstArgs")||(t.readAsmConstArgs=function(){te("'readAsmConstArgs' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"mainThreadEM_ASM")||(t.mainThreadEM_ASM=function(){te("'mainThreadEM_ASM' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"jstoi_q")||(t.jstoi_q=function(){te("'jstoi_q' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"jstoi_s")||(t.jstoi_s=function(){te("'jstoi_s' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getExecutableName")||(t.getExecutableName=function(){te("'getExecutableName' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"listenOnce")||(t.listenOnce=function(){te("'listenOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"autoResumeAudioContext")||(t.autoResumeAudioContext=function(){te("'autoResumeAudioContext' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"dynCallLegacy")||(t.dynCallLegacy=function(){te("'dynCallLegacy' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getDynCaller")||(t.getDynCaller=function(){te("'getDynCaller' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"dynCall")||(t.dynCall=function(){te("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"callRuntimeCallbacks")||(t.callRuntimeCallbacks=function(){te("'callRuntimeCallbacks' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"abortStackOverflow")||(t.abortStackOverflow=function(){te("'abortStackOverflow' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"reallyNegative")||(t.reallyNegative=function(){te("'reallyNegative' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"unSign")||(t.unSign=function(){te("'unSign' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"reSign")||(t.reSign=function(){te("'reSign' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"formatString")||(t.formatString=function(){te("'formatString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"PATH")||(t.PATH=function(){te("'PATH' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"PATH_FS")||(t.PATH_FS=function(){te("'PATH_FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SYSCALLS")||(t.SYSCALLS=function(){te("'SYSCALLS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"syscallMmap2")||(t.syscallMmap2=function(){te("'syscallMmap2' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"syscallMunmap")||(t.syscallMunmap=function(){te("'syscallMunmap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getSocketFromFD")||(t.getSocketFromFD=function(){te("'getSocketFromFD' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getSocketAddress")||(t.getSocketAddress=function(){te("'getSocketAddress' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"JSEvents")||(t.JSEvents=function(){te("'JSEvents' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerKeyEventCallback")||(t.registerKeyEventCallback=function(){te("'registerKeyEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"specialHTMLTargets")||(t.specialHTMLTargets=function(){te("'specialHTMLTargets' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"maybeCStringToJsString")||(t.maybeCStringToJsString=function(){te("'maybeCStringToJsString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"findEventTarget")||(t.findEventTarget=function(){te("'findEventTarget' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"findCanvasEventTarget")||(t.findCanvasEventTarget=function(){te("'findCanvasEventTarget' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getBoundingClientRect")||(t.getBoundingClientRect=function(){te("'getBoundingClientRect' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillMouseEventData")||(t.fillMouseEventData=function(){te("'fillMouseEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerMouseEventCallback")||(t.registerMouseEventCallback=function(){te("'registerMouseEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerWheelEventCallback")||(t.registerWheelEventCallback=function(){te("'registerWheelEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerUiEventCallback")||(t.registerUiEventCallback=function(){te("'registerUiEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerFocusEventCallback")||(t.registerFocusEventCallback=function(){te("'registerFocusEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillDeviceOrientationEventData")||(t.fillDeviceOrientationEventData=function(){te("'fillDeviceOrientationEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerDeviceOrientationEventCallback")||(t.registerDeviceOrientationEventCallback=function(){te("'registerDeviceOrientationEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillDeviceMotionEventData")||(t.fillDeviceMotionEventData=function(){te("'fillDeviceMotionEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerDeviceMotionEventCallback")||(t.registerDeviceMotionEventCallback=function(){te("'registerDeviceMotionEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"screenOrientation")||(t.screenOrientation=function(){te("'screenOrientation' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillOrientationChangeEventData")||(t.fillOrientationChangeEventData=function(){te("'fillOrientationChangeEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerOrientationChangeEventCallback")||(t.registerOrientationChangeEventCallback=function(){te("'registerOrientationChangeEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillFullscreenChangeEventData")||(t.fillFullscreenChangeEventData=function(){te("'fillFullscreenChangeEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerFullscreenChangeEventCallback")||(t.registerFullscreenChangeEventCallback=function(){te("'registerFullscreenChangeEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerRestoreOldStyle")||(t.registerRestoreOldStyle=function(){te("'registerRestoreOldStyle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"hideEverythingExceptGivenElement")||(t.hideEverythingExceptGivenElement=function(){te("'hideEverythingExceptGivenElement' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"restoreHiddenElements")||(t.restoreHiddenElements=function(){te("'restoreHiddenElements' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setLetterbox")||(t.setLetterbox=function(){te("'setLetterbox' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"currentFullscreenStrategy")||(t.currentFullscreenStrategy=function(){te("'currentFullscreenStrategy' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"restoreOldWindowedStyle")||(t.restoreOldWindowedStyle=function(){te("'restoreOldWindowedStyle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"softFullscreenResizeWebGLRenderTarget")||(t.softFullscreenResizeWebGLRenderTarget=function(){te("'softFullscreenResizeWebGLRenderTarget' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"doRequestFullscreen")||(t.doRequestFullscreen=function(){te("'doRequestFullscreen' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillPointerlockChangeEventData")||(t.fillPointerlockChangeEventData=function(){te("'fillPointerlockChangeEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerPointerlockChangeEventCallback")||(t.registerPointerlockChangeEventCallback=function(){te("'registerPointerlockChangeEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerPointerlockErrorEventCallback")||(t.registerPointerlockErrorEventCallback=function(){te("'registerPointerlockErrorEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"requestPointerLock")||(t.requestPointerLock=function(){te("'requestPointerLock' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillVisibilityChangeEventData")||(t.fillVisibilityChangeEventData=function(){te("'fillVisibilityChangeEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerVisibilityChangeEventCallback")||(t.registerVisibilityChangeEventCallback=function(){te("'registerVisibilityChangeEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerTouchEventCallback")||(t.registerTouchEventCallback=function(){te("'registerTouchEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillGamepadEventData")||(t.fillGamepadEventData=function(){te("'fillGamepadEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerGamepadEventCallback")||(t.registerGamepadEventCallback=function(){te("'registerGamepadEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerBeforeUnloadEventCallback")||(t.registerBeforeUnloadEventCallback=function(){te("'registerBeforeUnloadEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillBatteryEventData")||(t.fillBatteryEventData=function(){te("'fillBatteryEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"battery")||(t.battery=function(){te("'battery' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerBatteryEventCallback")||(t.registerBatteryEventCallback=function(){te("'registerBatteryEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setCanvasElementSize")||(t.setCanvasElementSize=function(){te("'setCanvasElementSize' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getCanvasElementSize")||(t.getCanvasElementSize=function(){te("'getCanvasElementSize' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"polyfillSetImmediate")||(t.polyfillSetImmediate=function(){te("'polyfillSetImmediate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"demangle")||(t.demangle=function(){te("'demangle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"demangleAll")||(t.demangleAll=function(){te("'demangleAll' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"jsStackTrace")||(t.jsStackTrace=function(){te("'jsStackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackTrace")||(t.stackTrace=function(){te("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getEnvStrings")||(t.getEnvStrings=function(){te("'getEnvStrings' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"checkWasiClock")||(t.checkWasiClock=function(){te("'checkWasiClock' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"flush_NO_FILESYSTEM")||(t.flush_NO_FILESYSTEM=function(){te("'flush_NO_FILESYSTEM' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToI64")||(t.writeI53ToI64=function(){te("'writeI53ToI64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToI64Clamped")||(t.writeI53ToI64Clamped=function(){te("'writeI53ToI64Clamped' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToI64Signaling")||(t.writeI53ToI64Signaling=function(){te("'writeI53ToI64Signaling' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToU64Clamped")||(t.writeI53ToU64Clamped=function(){te("'writeI53ToU64Clamped' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToU64Signaling")||(t.writeI53ToU64Signaling=function(){te("'writeI53ToU64Signaling' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readI53FromI64")||(t.readI53FromI64=function(){te("'readI53FromI64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readI53FromU64")||(t.readI53FromU64=function(){te("'readI53FromU64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"convertI32PairToI53")||(t.convertI32PairToI53=function(){te("'convertI32PairToI53' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"convertU32PairToI53")||(t.convertU32PairToI53=function(){te("'convertU32PairToI53' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"uncaughtExceptionCount")||(t.uncaughtExceptionCount=function(){te("'uncaughtExceptionCount' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exceptionLast")||(t.exceptionLast=function(){te("'exceptionLast' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exceptionCaught")||(t.exceptionCaught=function(){te("'exceptionCaught' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ExceptionInfoAttrs")||(t.ExceptionInfoAttrs=function(){te("'ExceptionInfoAttrs' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ExceptionInfo")||(t.ExceptionInfo=function(){te("'ExceptionInfo' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"CatchInfo")||(t.CatchInfo=function(){te("'CatchInfo' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exception_addRef")||(t.exception_addRef=function(){te("'exception_addRef' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exception_decRef")||(t.exception_decRef=function(){te("'exception_decRef' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"Browser")||(t.Browser=function(){te("'Browser' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"funcWrappers")||(t.funcWrappers=function(){te("'funcWrappers' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getFuncWrapper")||(t.getFuncWrapper=function(){te("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setMainLoop")||(t.setMainLoop=function(){te("'setMainLoop' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"FS")||(t.FS=function(){te("'FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"mmapAlloc")||(t.mmapAlloc=function(){te("'mmapAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"MEMFS")||(t.MEMFS=function(){te("'MEMFS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"TTY")||(t.TTY=function(){te("'TTY' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"PIPEFS")||(t.PIPEFS=function(){te("'PIPEFS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SOCKFS")||(t.SOCKFS=function(){te("'SOCKFS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"_setNetworkCallback")||(t._setNetworkCallback=function(){te("'_setNetworkCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"tempFixedLengthArray")||(t.tempFixedLengthArray=function(){te("'tempFixedLengthArray' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"miniTempWebGLFloatBuffers")||(t.miniTempWebGLFloatBuffers=function(){te("'miniTempWebGLFloatBuffers' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"heapObjectForWebGLType")||(t.heapObjectForWebGLType=function(){te("'heapObjectForWebGLType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"heapAccessShiftForWebGLHeap")||(t.heapAccessShiftForWebGLHeap=function(){te("'heapAccessShiftForWebGLHeap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GL")||(t.GL=function(){te("'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscriptenWebGLGet")||(t.emscriptenWebGLGet=function(){te("'emscriptenWebGLGet' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"computeUnpackAlignedImageSize")||(t.computeUnpackAlignedImageSize=function(){te("'computeUnpackAlignedImageSize' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscriptenWebGLGetTexPixelData")||(t.emscriptenWebGLGetTexPixelData=function(){te("'emscriptenWebGLGetTexPixelData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscriptenWebGLGetUniform")||(t.emscriptenWebGLGetUniform=function(){te("'emscriptenWebGLGetUniform' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscriptenWebGLGetVertexAttrib")||(t.emscriptenWebGLGetVertexAttrib=function(){te("'emscriptenWebGLGetVertexAttrib' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeGLArray")||(t.writeGLArray=function(){te("'writeGLArray' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"AL")||(t.AL=function(){te("'AL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL_unicode")||(t.SDL_unicode=function(){te("'SDL_unicode' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL_ttfContext")||(t.SDL_ttfContext=function(){te("'SDL_ttfContext' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL_audio")||(t.SDL_audio=function(){te("'SDL_audio' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL")||(t.SDL=function(){te("'SDL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL_gfx")||(t.SDL_gfx=function(){te("'SDL_gfx' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GLUT")||(t.GLUT=function(){te("'GLUT' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"EGL")||(t.EGL=function(){te("'EGL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GLFW_Window")||(t.GLFW_Window=function(){te("'GLFW_Window' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GLFW")||(t.GLFW=function(){te("'GLFW' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GLEW")||(t.GLEW=function(){te("'GLEW' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"IDBStore")||(t.IDBStore=function(){te("'IDBStore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"runAndAbortIfError")||(t.runAndAbortIfError=function(){te("'runAndAbortIfError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"warnOnce")||(t.warnOnce=function(){te("'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackSave")||(t.stackSave=function(){te("'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackRestore")||(t.stackRestore=function(){te("'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackAlloc")||(t.stackAlloc=function(){te("'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"AsciiToString")||(t.AsciiToString=function(){te("'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToAscii")||(t.stringToAscii=function(){te("'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF16ToString")||(t.UTF16ToString=function(){te("'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF16")||(t.stringToUTF16=function(){te("'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF16")||(t.lengthBytesUTF16=function(){te("'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF32ToString")||(t.UTF32ToString=function(){te("'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF32")||(t.stringToUTF32=function(){te("'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF32")||(t.lengthBytesUTF32=function(){te("'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"allocateUTF8")||(t.allocateUTF8=function(){te("'allocateUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"allocateUTF8OnStack")||(t.allocateUTF8OnStack=function(){te("'allocateUTF8OnStack' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.writeStackCookie=z,t.checkStackCookie=H,Object.getOwnPropertyDescriptor(t,"intArrayFromBase64")||(t.intArrayFromBase64=function(){te("'intArrayFromBase64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"tryParseAsDataURI")||(t.tryParseAsDataURI=function(){te("'tryParseAsDataURI' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.ALLOC_NORMAL=0,t.ALLOC_STACK=1,$=function e(){we||De(),we||($=e)},t.run=De,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return De(),e.ready});e.exports=o})),WYe=Object.freeze(Object.assign(Object.create(null),XYe,{default:XYe})),KYe=eze((function(e,t){var r,o=(r=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||Zje,function(e){var t,o,i;e=e||{},t||(t=void 0!==e?e:{}),t.ready=new Promise((function(e,t){o=e,i=t})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_getErrorName")||(Object.defineProperty(t.ready,"_ZSTD_getErrorName",{configurable:!0,get:function(){J("You are getting _ZSTD_getErrorName on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_getErrorName",{configurable:!0,set:function(){J("You are setting _ZSTD_getErrorName on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_isError")||(Object.defineProperty(t.ready,"_ZSTD_isError",{configurable:!0,get:function(){J("You are getting _ZSTD_isError on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_isError",{configurable:!0,set:function(){J("You are setting _ZSTD_isError on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_DStreamInSize")||(Object.defineProperty(t.ready,"_ZSTD_DStreamInSize",{configurable:!0,get:function(){J("You are getting _ZSTD_DStreamInSize on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_DStreamInSize",{configurable:!0,set:function(){J("You are setting _ZSTD_DStreamInSize on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_DStreamOutSize")||(Object.defineProperty(t.ready,"_ZSTD_DStreamOutSize",{configurable:!0,get:function(){J("You are getting _ZSTD_DStreamOutSize on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_DStreamOutSize",{configurable:!0,set:function(){J("You are setting _ZSTD_DStreamOutSize on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_createDStream")||(Object.defineProperty(t.ready,"_ZSTD_createDStream",{configurable:!0,get:function(){J("You are getting _ZSTD_createDStream on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_createDStream",{configurable:!0,set:function(){J("You are setting _ZSTD_createDStream on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_initDStream")||(Object.defineProperty(t.ready,"_ZSTD_initDStream",{configurable:!0,get:function(){J("You are getting _ZSTD_initDStream on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_initDStream",{configurable:!0,set:function(){J("You are setting _ZSTD_initDStream on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_decompressStream_simpleArgs")||(Object.defineProperty(t.ready,"_ZSTD_decompressStream_simpleArgs",{configurable:!0,get:function(){J("You are getting _ZSTD_decompressStream_simpleArgs on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_decompressStream_simpleArgs",{configurable:!0,set:function(){J("You are setting _ZSTD_decompressStream_simpleArgs on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_freeDStream")||(Object.defineProperty(t.ready,"_ZSTD_freeDStream",{configurable:!0,get:function(){J("You are getting _ZSTD_freeDStream on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_freeDStream",{configurable:!0,set:function(){J("You are setting _ZSTD_freeDStream on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_decompress")||(Object.defineProperty(t.ready,"_ZSTD_decompress",{configurable:!0,get:function(){J("You are getting _ZSTD_decompress on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_decompress",{configurable:!0,set:function(){J("You are setting _ZSTD_decompress on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_ZSTD_getFrameContentSize")||(Object.defineProperty(t.ready,"_ZSTD_getFrameContentSize",{configurable:!0,get:function(){J("You are getting _ZSTD_getFrameContentSize on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_ZSTD_getFrameContentSize",{configurable:!0,set:function(){J("You are setting _ZSTD_getFrameContentSize on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_emscripten_stack_get_end")||(Object.defineProperty(t.ready,"_emscripten_stack_get_end",{configurable:!0,get:function(){J("You are getting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_emscripten_stack_get_end",{configurable:!0,set:function(){J("You are setting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_emscripten_stack_get_free")||(Object.defineProperty(t.ready,"_emscripten_stack_get_free",{configurable:!0,get:function(){J("You are getting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_emscripten_stack_get_free",{configurable:!0,set:function(){J("You are setting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_emscripten_stack_init")||(Object.defineProperty(t.ready,"_emscripten_stack_init",{configurable:!0,get:function(){J("You are getting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_emscripten_stack_init",{configurable:!0,set:function(){J("You are setting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"___cxa_demangle")||(Object.defineProperty(t.ready,"___cxa_demangle",{configurable:!0,get:function(){J("You are getting ___cxa_demangle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"___cxa_demangle",{configurable:!0,set:function(){J("You are setting ___cxa_demangle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_stackSave")||(Object.defineProperty(t.ready,"_stackSave",{configurable:!0,get:function(){J("You are getting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_stackSave",{configurable:!0,set:function(){J("You are setting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_stackRestore")||(Object.defineProperty(t.ready,"_stackRestore",{configurable:!0,get:function(){J("You are getting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_stackRestore",{configurable:!0,set:function(){J("You are setting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_stackAlloc")||(Object.defineProperty(t.ready,"_stackAlloc",{configurable:!0,get:function(){J("You are getting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_stackAlloc",{configurable:!0,set:function(){J("You are setting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"___wasm_call_ctors")||(Object.defineProperty(t.ready,"___wasm_call_ctors",{configurable:!0,get:function(){J("You are getting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"___wasm_call_ctors",{configurable:!0,set:function(){J("You are setting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_fflush")||(Object.defineProperty(t.ready,"_fflush",{configurable:!0,get:function(){J("You are getting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_fflush",{configurable:!0,set:function(){J("You are setting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"___errno_location")||(Object.defineProperty(t.ready,"___errno_location",{configurable:!0,get:function(){J("You are getting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"___errno_location",{configurable:!0,set:function(){J("You are setting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_malloc")||(Object.defineProperty(t.ready,"_malloc",{configurable:!0,get:function(){J("You are getting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_malloc",{configurable:!0,set:function(){J("You are setting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_free")||(Object.defineProperty(t.ready,"_free",{configurable:!0,get:function(){J("You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_free",{configurable:!0,set:function(){J("You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"onRuntimeInitialized")||(Object.defineProperty(t.ready,"onRuntimeInitialized",{configurable:!0,get:function(){J("You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"onRuntimeInitialized",{configurable:!0,set:function(){J("You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}));var a,s,l,c,u,d={};for(a in t)t.hasOwnProperty(a)&&(d[a]=t[a]);if(s="object"==typeof window,l="function"==typeof importScripts,c="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,u=!s&&!c&&!l,t.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var A,f,p,h,g,m="";if(c)m=l?n(46).dirname(m)+"/":"//",A=function(e,t){var r=fe(e);return r?t?r:r.toString():(h||(h=n(862)),g||(g=n(46)),e=g.normalize(e),h.readFileSync(e,t?null:"utf8"))},p=function(e){var t=A(e,!0);return t.buffer||(t=new Uint8Array(t)),E(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof Ee))throw e})),process.on("unhandledRejection",J),t.inspect=function(){return"[Emscripten Module object]"};else if(u)"undefined"!=typeof read&&(A=function(e){var t=fe(e);return t?de(t):read(e)}),p=function(e){var t;return(t=fe(e))?t:"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(E("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs&&scriptArgs,"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print);else{if(!s&&!l)throw new Error("environment detection error");l?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),r&&(m=r),m=0!==m.indexOf("blob:")?m.substr(0,m.lastIndexOf("/")+1):"",A=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}catch(t){var n=fe(e);if(n)return de(n);throw t}},l&&(p=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}catch(t){var n=fe(e);if(n)return n;throw t}}),f=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||0==r.status&&r.response)t(r.response);else{var o=fe(e);o?t(o.buffer):n()}},r.onerror=n,r.send(null)}}t.print||console.log.bind(console);var y,v,b=t.printErr||console.warn.bind(console);for(a in d)d.hasOwnProperty(a)&&(t[a]=d[a]);function C(e){C.shown||(C.shown={}),C.shown[e]||(C.shown[e]=1,b(e))}d=null,t.arguments&&t.arguments,Object.getOwnPropertyDescriptor(t,"arguments")||Object.defineProperty(t,"arguments",{configurable:!0,get:function(){J("Module.arguments has been replaced with plain arguments_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),t.thisProgram&&t.thisProgram,Object.getOwnPropertyDescriptor(t,"thisProgram")||Object.defineProperty(t,"thisProgram",{configurable:!0,get:function(){J("Module.thisProgram has been replaced with plain thisProgram (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),t.quit&&t.quit,Object.getOwnPropertyDescriptor(t,"quit")||Object.defineProperty(t,"quit",{configurable:!0,get:function(){J("Module.quit has been replaced with plain quit_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),E(void 0===t.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),E(void 0===t.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),E(void 0===t.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),E(void 0===t.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),E(void 0===t.read,"Module.read option was removed (modify read_ in JS)"),E(void 0===t.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),E(void 0===t.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),E(void 0===t.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),E(void 0===t.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Object.getOwnPropertyDescriptor(t,"read")||Object.defineProperty(t,"read",{configurable:!0,get:function(){J("Module.read has been replaced with plain read_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(t,"readAsync")||Object.defineProperty(t,"readAsync",{configurable:!0,get:function(){J("Module.readAsync has been replaced with plain readAsync (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(t,"readBinary")||Object.defineProperty(t,"readBinary",{configurable:!0,get:function(){J("Module.readBinary has been replaced with plain readBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(t,"setWindowTitle")||Object.defineProperty(t,"setWindowTitle",{configurable:!0,get:function(){J("Module.setWindowTitle has been replaced with plain setWindowTitle (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),t.wasmBinary&&(y=t.wasmBinary),Object.getOwnPropertyDescriptor(t,"wasmBinary")||Object.defineProperty(t,"wasmBinary",{configurable:!0,get:function(){J("Module.wasmBinary has been replaced with plain wasmBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),t.noExitRuntime,Object.getOwnPropertyDescriptor(t,"noExitRuntime")||Object.defineProperty(t,"noExitRuntime",{configurable:!0,get:function(){J("Module.noExitRuntime has been replaced with plain noExitRuntime (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),"object"!=typeof WebAssembly&&J("no native wasm support detected");var I=!1;function E(e,t){e||J("Assertion failed: "+t)}function x(e,n,r,o,i){var a={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);P(e,t=ve(n),n)}return t},array:function(e){var t=ve(e.length);return function(e,t){E(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),w.set(e,t)}(e,t),t}},s=function(e){var n=t["_"+e];return E(n,"Cannot call unknown function "+e+", make sure it is exported"),n}(e),l=[],c=0;if(E("array"!==n,'Return type should not be "array".'),o)for(var u=0;u<o.length;u++){var d=a[r[u]];d?(0===c&&(c=me()),l[u]=d(o[u])):l[u]=o[u]}var A=s.apply(null,l);return A=function(e){return"string"===n?R(e):"boolean"===n?Boolean(e):e}(A),0!==c&&ye(c),A}var B,w,_,S,D,T,k,Q,M="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(e,t){return e?function(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&M)return M.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var l=63&e[t++];if(224==(240&a)?a=(15&a)<<12|s<<6|l:(240!=(248&a)&&C("Invalid UTF-8 leading byte 0x"+a.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),a=(7&a)<<18|s<<12|l<<6|63&e[t++]),a<65536)i+=String.fromCharCode(a);else{var c=a-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i}(_,e,t):""}function P(e,t,n){return E("number"==typeof n,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),function(e,t,n,r){if(!(r>0))return 0;for(var o=n,i=n+r-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;s>=2097152&&C("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-o}(e,_,t,n)}function O(e){B=e,t.HEAP8=w=new Int8Array(e),t.HEAP16=S=new Int16Array(e),t.HEAP32=D=new Int32Array(e),t.HEAPU8=_=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=T=new Uint32Array(e),t.HEAPF32=k=new Float32Array(e),t.HEAPF64=Q=new Float64Array(e)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var F=5242880;t.TOTAL_STACK&&E(F===t.TOTAL_STACK,"the stack size can no longer be determined at runtime");var N,L=t.INITIAL_MEMORY||16777216;function U(){var e=Ie();E(0==(3&e)),T[1+(e>>2)]=34821223,T[2+(e>>2)]=2310721022,D[0]=1668509029}function G(){if(!I){var e=Ie(),t=T[1+(e>>2)],n=T[2+(e>>2)];34821223==t&&2310721022==n||J("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+n.toString(16)+" "+t.toString(16)),1668509029!==D[0]&&J("Runtime error: The application has corrupted its heap memory area (address zero)!")}}Object.getOwnPropertyDescriptor(t,"INITIAL_MEMORY")||Object.defineProperty(t,"INITIAL_MEMORY",{configurable:!0,get:function(){J("Module.INITIAL_MEMORY has been replaced with plain INITIAL_MEMORY (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),E(L>=F,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+L+"! (TOTAL_STACK=5242880)"),E("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&void 0!==Int32Array.prototype.subarray&&void 0!==Int32Array.prototype.set,"JS engine does not provide full typed array support"),E(!t.wasmMemory,"Use of `wasmMemory` detected.  Use -s IMPORTED_MEMORY to define wasmMemory externally"),E(16777216==L,"Detected runtime INITIAL_MEMORY setting.  Use -s IMPORTED_MEMORY to define wasmMemory dynamically"),function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian!"}();var j=[],z=[],H=[],V=[],q=!1;z.push({func:function(){he()}}),E(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),E(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),E(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),E(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var Y=0,X=null,W=null,K={};function J(e){var n,r;t.onAbort&&t.onAbort(e),b(e+=""),I=!0,e="abort("+e+") at "+(r=function(){var e=new Error;if(!e.stack){try{throw new Error}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}(),t.extraStackTrace&&(r+="\n"+t.extraStackTrace()),n=/\b_Z[\w\d_]+/g,r.replace(n,(function(e){var t=ce(e);return e===t?e:t+" ["+e+"]"})));var o=new WebAssembly.RuntimeError(e);throw i(o),o}t.preloadedImages={},t.preloadedAudios={};var Z={error:function(){J("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1")},init:function(){Z.error()},createDataFile:function(){Z.error()},createPreloadedFile:function(){Z.error()},createLazyFile:function(){Z.error()},open:function(){Z.error()},mkdev:function(){Z.error()},registerDevice:function(){Z.error()},analyzePath:function(){Z.error()},loadFilesFromDB:function(){Z.error()},ErrnoError:function(){Z.error()}};function $(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}t.FS_createDataFile=Z.createDataFile,t.FS_createPreloadedFile=Z.createPreloadedFile;var ee="data:application/octet-stream;base64,";function te(e){return $(e,ee)}function ne(e){return $(e,"file://")}function re(e,n){return function(){var r=e,o=n;return n||(o=t.asm),E(q,"native function `"+r+"` called before runtime initialization"),E(!0,"native function `"+r+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o[e]||E(o[e],"exported native function `"+r+"` not found"),o[e].apply(null,arguments)}}var oe,ie,ae="data:application/octet-stream;base64,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AWpCADcCACAAQajQAGoiBEGMgIDgADYCACAAQQFBBSAAKALc5gEbNgK85QEgACAENgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgAgAEGs0AFqQYATKQIANwIAIABBtNABakGIEygCADYCAAJAAkAgAUUNACACRQ0AIAJBB00EQAwCCyABKAAAQbfIwuF+RwRADAILIAAgASgABDYCkOcBQWIhAyAAQRBqIAEgAhARIgRBiH9LDQAgAEKBgICAEDcD+OUBIAAgACgCrOUBIgM2ArjlASAAKAKw5QEhBSAAIAEgBGogASAEQYl/SRsiATYCsOUBIAAgASACIARrajYCrOUBIAAgASAFIANrajYCtOUBQQAhAwsgAw8LIAAgATYCtOUBIABBADYCuOUBIAAgATYCsOUBIAAgASACajYCrOUBQQAL100CH38FfiMAQeABayIFJAAgAEHI5QFqKQMAQoCAgBBWIR1BuH8hCwJAIARB//8HSw0AIAAgAyAEEB4iC0GIf0sNACAAKAKU5wEhBiAAIAVBNGogAyALaiADIAtBiX9JIgMbIgggBCALQQAgAxtrIgQQHyIDQYh/SwRAIAMhCwwBCyAFKAI0IRMgAUUEQEG6fyELIBNBAEoNAQsgBCADayEHIAMgCGohCgJAAkACQCAGBEAgAEEANgKU5wEMAQsgE0EFSA0BIABByOUBaikDAEKAgIAIWARADAILIAAoAggiA0EIaiEGIAMoAgQhA0EAIQtBACEEA0AgCyAGIARBA3RqLQACQRZLaiELIARBAWoiBCADdkUNAAsgAEEANgKU5wEgC0EIIANrdEEUSQ0CCyAFIAAoAujmASIENgLMASABIAJqIRcgBCAAKAL45gFqIRggASEDIBMEQCAAKAK45QEhFSAAKAK05QEhGyAAKAKw5QEhEiAAQQE2AvzlASAFIABBtNABaigCADYCbCAFIABBrNABaiIgKQIANwJkIAUgFTYCdCAFIBI2AnAgBSABIBJrIho2AnhBbCELIAdFDQMgBSAKNgJEIAUgCkEEajYCSAJ/IAdBBE8EQCAFIAogB0EEayIDaiICNgJAIAUgAigAACIENgI4IAcgCmpBAWstAAAiAkUNBSAHQYh/Sw0FIAJnQRdrDAELIAUgCjYCQCAFIAotAAAiBDYCOAJAAkACQCAHQQJr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A3YiAiAJIAJrIA5JGyIJayICNgJAIAUgAigAACICNgI4IAAgCUEDdGshAAsgBSAAICanIglBGHYiDmoiADYCPCAFIA5BAnRBwB1qKAIAIAJBACAAa3ZxIAlB//8DcWo2AlQgBSAENgKAASAFKALQASEAIAUgBzYCiAEgBSAGNgKEAQJAAkACQCADIAQgBmoiCWogF0sNACAAIARqIg4gEksNACAJQSBqIA0gA2tNDQELIAUgBSkDiAE3AwggBSAFKQOAATcDACADIA0gBSAFQdABaiASIAggECAPECAhCQwBCyADIARqIQIgAyAAKQAANwAAIAMgACkACDcACAJAIARBEUkNACADIAApABA3ABAgAyAAKQAYNwAYIARBEGtBEUgNACAAQRBqIQAgA0EgaiEEA0AgBCAAKQAQNwAAIAQgACkAGDcACCAEIAApACA3ABAgBCAAKQAoNwAYIABBIGohACAEQSBqIgQgAkkNAAsLIAIgB2shACAFIA42AtABIAIgCGsgB0kEQCACIBBrIAdJBEBBbCEJDAILIA8gDyAAIAhrIgBqIgQgBmpPBEAgAiAEIAYQMxoMAgsgAiAEQQAgAGsQMyECIAUgACAGaiIGNgKEASACIABrIQIgCCEACyAHQRBPBEAgAiAAKQAANwAAIAIgACkACDcACCAGQRFIDQEgAiAGaiEGIAJBEGohBANAIAQgACkAEDcAACAEIAApABg3AAggBCAAKQAgNwAQIAQgACkAKDcAGCAAQSBqIQAgBEEgaiIEIAZJDQALDAELAkAgB0EHTQRAIAIgAC0AADoAACACIAAtAAE6AAEgAiAALQACOgACIAIgAC0AAzoAAyACIAAgB0ECdCIEQeAeaigCAGoiACgAADYABCAAIARBgB9qKAIAayEADAELIAIgACkAADcAAAsgBkEJSQ0AIAIgBmohByACQQhqIgQgAEEIaiIAa0EPTARAA0AgBCAAKQAANwAAIABBCGohACAEQQhqIgQgB0kNAAwCCwALIAQgACkAADcAACAEIAApAAg3AAggBkEZSA0AIAJBGGohBANAIAQgACkAEDcAACAEIAApABg3AAggBCAAKQAgNwAQIAQgACkAKDcAGCAAQSBqIQAgBEEgaiIEIAdJDQALCwJAIAUoAjwiAEEgSwRAIAAhBgwBCyAFKAJAIgIgBSgCSE8EQCAFIABBB3EiBjYCPCAFIAIgAEEDdmsiADYCQCAFIAAoAAA2AjgMAQsgBSgCRCIEIAJGBEAgACEGDAELIAUgACACIARrIABBA3YiACACIABrIARJGyIAQQN0ayIGNgI8IAUgAiAAayIANgJAIAUgACgAADYCOAsgE0EBayIAIBMgCUGJf0kiAhshEyALIAkgAhshCyADIAlqIQMCQCAARQ0AIAlBiH9LDQAgBSgCVCEMIAUoAlghDiAFKAJcIQAgBSgCYCEHIAUoAkwhBCAFKAJQIQIMAQsLIAtBiH9LDQEgEwRAQWwhCwwCCyAGQSBNBEAgBkEgRwRAQWwhCwwDCyAFKAJAIgAgBSgCSE8EQEFsIQsMAwtBbCELIAAgBSgCREcNAgsgFSAFKQJkNwIAIBUgBSgCbDYCCCAFKALQASEEC0G6fyELIBIgBGsiACANIANrSw0AIAMEfyADIAQgABAxIABqBUEACyABayELCyAFQeABaiQAIAsLuAQCAn8EfiAAIAApAwAgAq18NwMAAkACQCAAKAJIIgMgAmoiBEEfTQRAIAFFDQEgACADakEoaiABIAIQMRogACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIANqIAFBICADaxAxGiAAKAJIIQMgAEEANgJIIAAgACkDCCAAKQAoQs/W077Sx6vZQn58Qh+JQoeVr6+Ytt6bnn9+NwMIIAAgACkDECAAKQAwQs/W077Sx6vZQn58Qh+JQoeVr6+Ytt6bnn9+NwMQIAAgACkDGCAAKQA4Qs/W077Sx6vZQn58Qh+JQoeVr6+Ytt6bnn9+NwMYIAAgACkDICAAQUBrKQAAQs/W077Sx6vZQn58Qh+JQoeVr6+Ytt6bnn9+NwMgIAEgA2tBIGohAQsgAiABQSBqTwsEQCACQSBrIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgASkAGELP1tO+0ser2UJ+IAV8Qh+JQoeVr6+Ytt6bnn9+IQUgASkAEELP1tO+0ser2UJ+IAZ8Qh+JQoeVr6+Ytt6bnn9+IQYgASkACELP1tO+0ser2UJ+IAd8Qh+JQoeVr6+Ytt6bnn9+IQcgASkAAELP1tO+0ser2UJ+IAh8Qh+JQoeVr6+Ytt6bnn9+IQggAUEgaiIBIANNDQALIAAgBTcDICAAIAY3AxggACAHNwMQIAAgCDcDCAsgASACTw0BIABBKGogASACIAFrIgQQMRoLIAAgBDYCSAsL3QQCBX8FfiAAQShqIgEgACgCSCIFaiECAn4gACkDACIHQiBaBEAgACkDECIGQgeJIAApAwgiCEIBiXwgACkDGCIJQgyJfCAAKQMgIgpCEol8IAhCz9bTvtLHq9lCfkIfiUKHla+vmLbem55/foVCh5Wvr5i23puef35CnaO16oOxjYr6AH0gBkLP1tO+0ser2UJ+Qh+JQoeVr6+Ytt6bnn9+hUKHla+vmLbem55/fkKdo7Xqg7GNivoAfSAJQs/W077Sx6vZQn5CH4lCh5Wvr5i23puef36FQoeVr6+Ytt6bnn9+Qp2jteqDsY2K+gB9IApCz9bTvtLHq9lCfkIfiUKHla+vmLbem55/foVCh5Wvr5i23puef35CnaO16oOxjYr6AH0MAQsgACkDGELFz9my8eW66id8CyAHfCEGAkAgAEEwaiIEIAJLBEAgASEDDAELA0AgASkAAELP1tO+0ser2UJ+Qh+JQoeVr6+Ytt6bnn9+IAaFQhuJQoeVr6+Ytt6bnn9+Qp2jteqDsY2K+gB9IQYgBCIDIgFBCGoiBCACTQ0ACwsCQCACIANBBGoiAUkEQCADIQEMAQsgAzUAAEKHla+vmLbem55/fiAGhUIXiULP1tO+0ser2UJ+Qvnz3fGZ9pmrFnwhBgsgASACSQRAIAAgBWpBKGohAANAIAExAABCxc/ZsvHluuonfiAGhUILiUKHla+vmLbem55/fiEGIAFBAWoiASAARw0ACwsgBkIhiCAGhULP1tO+0ser2UJ+IgZCHYggBoVC+fPd8Zn2masWfiIGQiCIIAaFC7gBACAAIAEgAiADIAQCfwJAAkACQCAAKAKY5wFBAWoOAwIAAQALAkAgACgCiOcBIgFFDQAgAUG41QFqKAIAIQMgAUG01QFqKAIAIQICQAJAIAEoAgAiBARAIAJFDQEgAyAEIAIRAAAgAyABIAIRAAAMAwsgAkUNASADIAEgAhEAAAwCCyAEECwLIAEQLAsgAEEANgKY5wEgAEIANwOI5wFBAAwCCyAAQQA2ApjnAQsgACgCjOcBCxAWC8ABAQF/QaDoCRArIgRFBEBBQA8LIARBADYC9OYBIARCADcC7OYBIARBADYCnOgJIARCADcCxOcBIARBADYCtOcBIARBADYCuOUBIARCADcDgOcBIARBADYC3OYBIARCADcClOcBIARCADcC1OcBIARBgYCAwAA2AqznASAEQoCAgIAQNwPg5gEgBEGI5wFqQgA3AwAgBEGc5wFqQgA3AgAgBEGk5wFqQQA2AgAgBCAAIAEgAiADEBshACAEEBIaIAALkQsCA38BfgJ/IAAoAvTlASIHQQNrQQJPBEAgACgCvOUBDAELIAAoAvDlAQRAIAAoArzlAQwBCyAEQQEgBEEBSxsiBSAAKAK85QEiBiAFIAZJGwshBkG4fyEFAkACQAJAIAQgBkcNAAJAIAJFDQAgACgCrOUBIgUgAUYNACAAIAU2ArjlASAAIAE2AqzlASAAKAKw5QEhBiAAIAE2ArDlASAAIAEgBiAFa2o2ArTlAQtBfyEFAkACQAJAAkACQAJAAkACQAJAIAcOCAABAgMDBAYFCQtBASEFAkAgACgC3OYBDQBBBSEFIAMoAABBcHFB0NS0wgFHDQAgAEGI6AlqIAMgBBAxGiAAQQY2AvTlASAAQQggBGs2ArzlAQwLCyAEIAVJBEAgAEG4fzYC2OYBQbh/DwsgACADIAVqQQFrLQAAIgFBA3FBAnRBwB5qKAIAIAVqIAFBBnYiAkECdEHQHmooAgBqIAFBIHEiAUVqIAJFIAFBBXZxaiIFNgLY5gEgBUGIf0sNCCAAQYjoCWogAyAEEDEaIABBATYC9OUBIAAgBSAEazYCvOUBDAoLIABBiOgJaiIBIAAoAtjmASAEa2ogAyAEEDEaIABBwOUBaiABIAAoAtjmASAAKALc5gEQEyIBQYh/SwRAIAEPC0G4fyEFIAENByAAQdzlAWooAgAiAQRAQWAhBSAAKAKQ5wEgAUcNCAsCQCAAQeDlAWooAgBFBEAgAEEANgLk5gEMAQsgACAAKALg5gEiAUU2AuTmASABDQAgAEIANwOA5gEgAEGo5gFqQgA3AwAgAEGg5gFqQvnq0NDnyaHk4QA3AwAgAEGY5gFqQgA3AwAgAEGQ5gFqQs/W077Sx6vZQjcDACAAQYjmAWpC1uuC7ur9ifXgADcDACAAQbDmAWpCADcDACAAQbjmAWpCADcDACAAQcDmAWpCADcDACAAQcjmAWpCADcDAAsMCAsgAy8AACICIAMtAAJBEHRyQQN2IQFBbCEFIAJBAXZBA3EiAyEEAkACQCADQQFrDgMBAAgACyABIQQLIAQgAEHQ5QFqKAIASw0GIAJBAXEhAiAAIAE2AvzmASAAIAM2AvDlASAAIAQ2ArzlASAEBEAgAEEEQQMgAhs2AvTlAQwJCyACBEAgAEHg5QFqKAIARQ0DIABBBTYC9OUBIABBBDYCvOUBDAkLDAcLQWwhBQJ/AkACQAJAIAAoAvDlAQ4DAQIACQsgACABIAIgAyAEEBgMAgtBun8hBSACIARJDQcgAUUEQEG2fyEFIAQNCAwGCyABIAMgBBAxGiAEQYh/TQ0FIAQPC0G6fyACIAAoAvzmASICSQ0AGkG2f0EAIAIbIAFFDQAaIAEgAy0AACACEDIaIAILIQVBACEGIABBADYCvOUBIAVBiH9LDQUMBAsgACgC5OYBRQ0AQWohBSADKAAAIABBgOYBahAap0cNBAtBACEFIABBADYC9OUBIABBADYCvOUBDAMLIAAgBGtBkOgJaiADIAQQMRogAEEHNgL05QEgACAAQYzoCWooAAA2ArzlAQwECyAAIAAoArzlASAEayIGNgK85QEgBCEFCyAFIgIgAEHQ5QFqKAIASwRAQWwPCyAAIAApA+jlASACrXw3A+jlASAAKALk5gEEQCAAQYDmAWogASACEBkgACgCvOUBIQYLIAAgASACajYCrOUBIAYEQCACDwsgACgC9OUBQQRGBEAgACkDwOUBIghCf1IEQEFsIQUgACkD6OUBIAhSDQILIABB4OUBaigCAARAIABBBTYC9OUBIABBBDYCvOUBIAIPCyAAQQA2AvTlASAAQQA2ArzlASACDwsgAEEDNgK85QEgAEECNgL05QEgAg8LIAUPCyAAQQI2AvTlASAAQQM2ArzlAQtBAAu7BwEIf0FsIQcCQCACQQNJDQACQAJAAkACQAJAIAEtAAAiBkEDcSIIQQFrDgMCAQADCyAAKAL45QENAEFiDwsgAkEFSQ0DQQMhBSABKAAAIQMCfwJ/AkACQAJAIAZBAnZBA3EiBkECaw4CAQIACyADQQ52Qf8HcSEEIANBBHZB/wdxIQMgBkUMAwsgA0ESdiEEQQQhBSADQQR2Qf//AHEMAQsgAS0ABEEKdCADQRZ2ciEEQQUhBSADQQR2Qf//D3ELIQNBAAshBiADQYCACEsNAyAEIAVqIgogAksNAyADQYEGSQ0CIAAoApTnAUUNAkEAIQIDQCACQcT/AE8NAyACQYAEaiECDAALAAtBAiEEAn8CQAJAAkAgBkECdkEDcUEBaw4DAQACAAtBASEEIAZBA3YMAgsgAS8AAEEEdgwBCyACQQRJDQMgAS8AACABLQACQRB0ciICQY+AgAFLDQNBAyEEIAJBBHYLIQIgAEHo5wFqIAEgBGotAAAgAkEgahAyIQEgACACNgL45gEgACABNgLo5gEgBEEBaiEHDAILQQIhBCACAn8CQAJAAkAgBkECdkEDcUEBaw4DAQACAAtBASEEIAZBA3YMAgsgAS8AAEEEdgwBC0EDIQQgAS8AACABLQACQRB0ckEEdgsiAyAEaiIFQSBqSQRAIAIgBUkNAiAAQejnAWogASAEaiADEDEhASAAIAM2AvjmASAAIAE2AujmASABIANqIgBCADcAGCAAQgA3ABAgAEIANwAIIABCADcAACAFDwsgACADNgL45gEgACABIARqNgLo5gEgBQ8LAn8gCEEDRgRAIAEgBWohASAAQejnAWohAiAAKAIMIgUoAgBBCHYhCSAGBEAgCUH/AXEEQCACIAMgASAEIAUQDgwDCyACIAMgASAEIAUQCwwCCyAJQf8BcQRAIAIgAyABIAQgBRAPDAILIAIgAyABIAQgBRAMDAELIABBqNAAaiECIAYEQCACIAEgBWoiBSAEIABBrNUBahAKIgFBiH9LDQIgASAETw0CIABB6OcBaiADIAEgBWogBCABayACEAsMAQsgAiAAQejnAWogAyABIAVqIAQgAEGs1QFqIAAoAoTnARAQC0GIf0sNACAAIAM2AvjmASAAQQE2AvjlASAAIABB6OcBajYC6OYBIAhBAkYEQCAAIABBqNAAajYCDAsgACADaiIAQYDoAWpCADcAACAAQfjnAWpCADcAACAAQfDnAWpCADcAACAAQejnAWpCADcAACAKDwsgBwuyAwEFf0G4fyEHAkACQCADRQ0AIAItAAAiBEUNAQJ/IAJBAWogBEEYdEEYdSIFQX9KDQAaIAVBf0YEQCADQQNIDQIgAi8AAUGA/gFqIQQgAkEDagwBCyADQQJIDQEgAi0AASAEQQh0ckGAgAJrIQQgAkECagshBSABIAQ2AgAgBUEBaiIBIAIgA2oiA0sNAEFsIQcgAEEQaiAAIAUtAAAiBUEGdkEjQQkgASADIAFrQeAQQfARQZATIAAoAvzlASAAKAKU5wEgBCAAQazVAWoiCCAAKAKE5wEQKSIGQYh/Sw0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASAGaiABIAZBiX9JGyIBIAMgAWtBoAtBoAxBoBcgACgC/OUBIAAoApTnASAEIAggACgChOcBECkiBkGIf0sNACAAQaAwaiAAQQRqIAVBAnZBA3FBNEEJIAEgBmogASAGQYl/SRsiASADIAFrQaANQYAPQbAZIAAoAvzlASAAKAKU5wEgBCAIIAAoAoTnARApIgBBiH9LDQAgACABaiACayEHCyAHDwsgAUEANgIAQQFBuH8gA0EBRhsL2QgBB39Bun8hDAJAIAIoAgAiCiACKAIEaiINIAEgAGtLDQBBbCEMIAogBCADKAIAIghrSw0AIAFBIGshBCAIIApqIQ4gACAKaiEBIAIoAgghCwJ/IApBB0wEQCALIApBAUgNARoDQCAAIAgtAAA6AAAgCEEBaiEIIABBAWoiACABSQ0ACyALDAELIAEgBE0EQCAAIAgpAAA3AAAgACAIKQAINwAIIAsgCkERSA0BGiAAQRBqIQADQCAAIAgpABA3AAAgACAIKQAYNwAIIAAgCCkAIDcAECAAIAgpACg3ABggCEEgaiEIIABBIGoiACABSQ0ACyALDAELIAAgBE0EQCAAIAgpAAA3AAAgACAIKQAINwAIIAQgAGsiCkERTgRAIABBEGohACAIIQkDQCAAIAkpABA3AAAgACAJKQAYNwAIIAAgCSkAIDcAECAAIAkpACg3ABggCUEgaiEJIABBIGoiACAESQ0ACwsgCCAKaiEIIAQhAAsgCyAAIAFPDQAaA0AgACAILQAAOgAAIAhBAWohCCAAQQFqIgAgAUcNAAsgAigCCAshCSABIAtrIQAgAyAONgIAAkACQCABIAVrIAlJBEAgCSABIAZrSw0DIAcgByAAIAVrIgBqIgMgAigCBCIGak8EQCABIAMgBhAzGgwDCyABIANBACAAaxAzIQEgAiAAIAZqIgk2AgQgASAAayEBDAELIAIoAgQhCSAAIQULIAEgCWohAiAJQQdMBEAgCUEBSA0BA0AgASAFLQAAOgAAIAVBAWohBSABQQFqIgEgAkkNAAsMAQsCQCABIAVrIgBBB00EQCABIAUtAAA6AAAgASAFLQABOgABIAEgBS0AAjoAAiABIAUtAAM6AAMgASAFIABBAnQiAEHgHmooAgBqIgMoAAA2AAQgAyAAQYAfaigCAGshBQwBCyABIAUpAAA3AAALIAFBCGohACAFQQhqIQggAiAETQRAIAAgCWohAiAAIAhrQQ9MBEADQCAAIAgpAAA3AAAgCEEIaiEIIABBCGoiACACSQ0ADAMLAAsgACAIKQAANwAAIAAgCCkACDcACCAJQRFIDQEgAUEYaiEAA0AgACAIKQAQNwAAIAAgCCkAGDcACCAAIAgpACA3ABAgACAIKQAoNwAYIAhBIGohCCAAQSBqIgAgAkkNAAsMAQsCQCAAIARLBEAgACEEDAELIAQgAGshAwJAIAAgCGtBD0wEQCAIIQEDQCAAIAEpAAA3AAAgAUEIaiEBIABBCGoiACAESQ0ACwwBCyAAIAgpAAA3AAAgACAIKQAINwAIIANBEUgNACABQRhqIQAgCCEBA0AgACABKQAQNwAAIAAgASkAGDcACCAAIAEpACA3ABAgACABKQAoNwAYIAFBIGohASAAQSBqIgAgBEkNAAsLIAMgCGohCAsgAiAETQ0AA0AgBCAILQAAOgAAIAhBAWohCCAEQQFqIgQgAkcNAAsLIA0hDAsgDAvOCAINfwF+IAZB6gBqIRIgAEEIaiEOQQEhC0EBIAV0Ig9BAWshDAJAAkACfyACQX9GBEAgACAFNgIEIABBATYCACAPQQN2IA9BAXZqQQNqDAELIAJBAWoiCEEBcSERQYCABCAFQQFrdEEQdSETAkAgAkUEQCAMIQgMAQsgCEF+cSEJIAwhCANAAkAgASAHQQF0Ig1qLwEAIgpB//8DRgRAIA4gCEEDdGogBzYCBCAIQQFrIQhBASEKDAELIAtBACATIApBEHRBEHVKGyELCyAGIA1qIAo7AQACQCABIAdBAXIiEEEBdCINai8BACIKQf//A0cEQCALQQAgEyAKQRB0QRB1ShshCwwBCyAOIAhBA3RqIBA2AgQgCEEBayEIQQEhCgsgBiANaiAKOwEAIAdBAmohByAJQQJrIgkNAAsLIBEEQAJAIAEgB0EBdGovAQAiCkH//wNHBEAgC0EAIBMgCkEQdEEQdUobIQsMAQsgDiAIQQN0aiAHNgIEIAhBAWshCEEBIQoLIAYgB0EBdGogCjsBAAsgACAFNgIEIAAgCzYCACAPQQN2IRAgCCAMRw0BQQAhC0EAIQcDQCABIAciAEEBdGouAQAhESALIBJqIg0gFDcAAAJAIBFBCUgNACARQQlrIgdBA3ZBAWoiCUEHcSEKQQghCCAHQThPBEAgCUH4////A3EhCQNAIAggDWoiByAUNwAAIAcgFDcAOCAHIBQ3ADAgByAUNwAoIAcgFDcAICAHIBQ3ABggByAUNwAQIAcgFDcACCAIQUBrIQggCUEIayIJDQALCyAKRQ0AA0AgCCANaiAUNwAAIAhBCGohCCAKQQFrIgoNAAsLIBRCgYKEiJCgwIABfCEUIABBAWohByALIBFqIQsgACACRw0ACyAQIA9BAXZqQQNqCyIBQQF0IQBBACEHQQAhCANAIA4gCCAMcUEDdGogByASai0AADYCBCAOIAEgCGogDHFBA3RqIBIgB0EBcmotAAA2AgQgACAIaiAMcSEIIAdBAmoiByAPSQ0ACwwBCyAQIA9BAXZqQQNqIRBBACEHQQAhCQNAAkAgASAJIgBBAXRqLgEAIg1BAUgNACANQQFHBEAgDUF+cSEJA0AgDiAHQQN0aiAANgIEA0AgByAQaiAMcSIHIAhLDQALIA4gB0EDdGogADYCBANAIAcgEGogDHEiByAISw0ACyAJQQJrIgkNAAsLIA1BAXFFDQAgDiAHQQN0aiAANgIEA0AgByAQaiAMcSIHIAhLDQALCyAAQQFqIQkgACACRw0ACwsgD0EBIA9BAUsbIQwgBUEBaiEFQQAhAQNAIAYgDiABQQN0aiIJKAIEIgJBAXRqIgAgAC8BACIIQQFqOwEAIAkgBSAIZ0Fgc2oiADoAAyAJIAggAHQgD2s7AQAgCSAEIAJBAnQiAGooAgA6AAIgCSAAIANqKAIANgIEIAFBAWoiASAMRw0ACwutAQEBf0Gg6AkQKyIARQRAQQAPCyAAQQA2AvTmASAAQgA3AuzmASAAQQA2ApzoCSAAQgA3AsTnASAAQQA2ArTnASAAQQA2ArjlASAAQgA3A4DnASAAQQA2AtzmASAAQgA3ApTnASAAQgA3AtTnASAAQYGAgMAANgKs5wEgAEKAgICAEDcD4OYBIABBiOcBakIANwMAIABBnOcBakIANwIAIABBpOcBakEANgIAIAALBgAgABASCwYAQYOACAsGAEGAgAgLnAEBBH8gAEEANgLU5wEgAEEANgKc5wECQCAAKAKI5wEiAUUNACABQbjVAWooAgAhAyABQbTVAWooAgAhAgJAAkAgASgCACIEBEAgAkUNASADIAQgAhEAACADIAEgAhEAAAwDCyACRQ0BIAMgASACEQAADAILIAQQLAsgARAsCyAAQQA2ApjnASAAQgA3A4jnAUEBQQUgACgC3OYBGwvyGQIdfwJ+IwBBEGsiEyQAAkAgAigCCCIIIAIoAgQiCksEQEG4fyEDDAELIAEoAggiBSABKAIEIgZLBEBBun8hAwwBCyABKAIAIQQgAigCACELAkAgACgC2OcBQQFHDQAgACgCnOcBRQ0AQZh/IQMgAEHg5wFqKAIAIAZHDQEgACgC3OcBIARHDQEgAEHk5wFqKAIAIAVHDQELIAQgBmohDCAAQZggaiEaIABBoDBqIRsgAEEQaiEcIABBrNABaiEVIABBqNAAaiEdIABBrOUBaiEWIAogC2oiCiAIIAtqIgtrIRcgAEGI6AlqIRQgAEHA5QFqIQ4gAEHc5wFqIRAgAEH05QFqIQ8gAEGk5wFqIREgAEG05wFqIQ0gAEGc6AlqIRggAEGo5gFqIhIhHiALIQYgBCAFaiIZIQgDQAJAQX8hAwJ/AkACfwJAAkACQCAOIBQCfwJAAkACQCAAKAKc5wEOBQIBBAAFDAsgDygCACEHIAAoArzlASEFDAcLIAAoAsDnAQwBCyAAQQE2ApznASAAQgA3A7jnASAAQgA3AsznASAAQQA2AsDnASAAQQA2AqjnASAQIAEpAgA3AgAgECABKAIINgIIQQALIAAoAtzmARATIgNBiH9LDQggAwRAIAMgACgCwOcBIgVrIgcgCiAGayIESwRAIAQEQCAAIAVqQYjoCWogBiAEEDEaIAAgACgCwOcBIARqIgU2AsDnAQsgAiACKAIENgIIQQJBBiAAKALc5gEbIgAgAyAAIANLGyAFa0EDaiEDDAoLIAAgBWpBiOgJaiAGIAcQMRogACADNgLA5wEgBiAHaiEGQQEMBgsCQCAOKQMAIiBCf1ENACAAKALU5QFBAUYNACAgIAwgCGsiCa1WDQAgEyALIBcQFSATKAIAIgUgF0sNACAAIAggCSALIAUCfwJAAkACQCAAKAKY5wFBAWoOAwIAAQALAkAgACgCiOcBIgZFDQAgBkG41QFqKAIAIQQgBkG01QFqKAIAIQMCQAJAIAYoAgAiBwRAIANFDQEgBCAHIAMRAAAgBCAGIAMRAAAMAwsgA0UNASAEIAYgAxEAAAwCCyAHECwLIAYQLAsgAEEANgKY5wEgAEIANwOI5wFBAAwCCyAAQQA2ApjnAQsgACgCjOcBCxAWIgNBiH9LDQkgAEEANgKc5wEgAEEANgK85QEgAyAIaiEIIAUgC2ohBgwHCwJAIAAoAtjnAUEBRw0AIAAoAtTlAUEBRg0AIA4pAwAiIEJ/UQ0AICAgDCAIa61YDQBBun8hAwwJCwJ/AkACQAJAIAAoApjnAUEBag4DAgABAAsCQCAAKAKI5wEiA0UNACADQbjVAWooAgAhBSADQbTVAWooAgAhBAJAAkAgAygCACIHBEAgBEUNASAFIAcgBBEAACAFIAMgBBEAAAwDCyAERQ0BIAUgAyAEEQAADAILIAcQLAsgAxAsC0EAIQMgAEEANgKY5wEgAEIANwOI5wFBAQwCCyAAQQA2ApjnAQsgACgCjOcBIgNFBEBBACEDQQEMAQsgACAAKAK45QEgAygCBCADKAIIakc2ApTnAUEACyEEIABCADcD6OUBIA9BADYCACAAQQFBBSAAKALc5gEiBRs2ArzlASAWQgA3AgggFkIANwIAIABBjICA4AA2AqhQIABBADYCkOcBIABCADcD+OUBIABBAzYC8OUBIBVBiBMoAgA2AgggFUGAEykCADcCACAAIB02AgwgACAaNgIIIAAgGzYCBCAAIBw2AgACQCAEDQAgACADKAKo1QE2ApDnASAAIAMoAgQiBDYCtOUBIAAgBDYCsOUBIAAgBCADKAIIaiIENgKs5QEgACAENgK45QEgAygCrNUBBEAgAEKBgICAEDcD+OUBIAAgA0Gk0ABqNgIMIAAgA0GUIGo2AgggACADQZwwajYCBCAAIANBDGo2AgAgACADQajQAWooAgA2AqzQASAAIANBrNABaigCADYCsNABIAAgA0Gw0AFqKAIANgK00AEMAQsgAEIANwP45QELAkAgFCgAAEFwcUHQ1LTCAUYEQCAAKACM6AkhA0EHIQQMAQsgDiAUIAAoAsDnASAFEBMiA0GIf0sNCSADBEBBuH8hAwwKCwJAIAAoAtzlASIDRQ0AIAAoApDnASADRg0AQWAhAwwKCyAAKALg5QFFBEAgAEEANgLk5gFBAiEEQQMhAwwBCyAAIAAoAuDmASIFRTYC5OYBQQIhBEEDIQMgBQ0AIABC+erQ0OfJoeThADcDoOYBIABCADcDmOYBIABCz9bTvtLHq9lCNwOQ5gEgAELW64Lu6v2J9eAANwOI5gEgAEIANwOA5gEgHkIANwMgIBJCADcDGCASQgA3AxAgEkIANwMIIBJCADcDAAsgACADNgK85QEgDyAENgIAIAAgACkDyOUBIiBCgAggIEKACFYbIiA3A8jlASAANQKs5wEgIFQEQEFwIQMMCQsgACgC0OUBIgNBBCADQQRLGyEDQQAhBUEAIQQCfyAAKALY5wFFBEAgDikDACIhICAgIEKAgAggIEKAgAhUG3xCQH0iICAgICFWGyIgp0FwICBCgICAgBBUGyEECyANKAIAIgkgESgCACIfaiADIARqIgdBA2xPCwRAIBgoAgBBAWohBQsgGCAFNgIAAkACQCADIB9LDQAgBCAJSw0AIAVBgAFJDQELAkACQCAAKAKA5wEiBQRAIAcgBUGg6AlrTQ0BQUAhAwwMCwJAIAAoAqDnASIFRQ0AIAAoAPDmASIJBEAgACgA9OYBIAUgCREAAAwBCyAFECwLIA1BADYCACARQQA2AgAgAAJ/IAAoAOzmASIFBEAgACgA9OYBIAcgBREBAAwBCyAHECsLIgU2AqDnASAFDQFBQCEDDAsLIAAoAqDnASEFCyANIAQ2AgAgACADIAVqNgKw5wEgESADNgIACyAAQQI2ApznAQsgCiAGayEDIA8oAgAiB0EDa0ECTw0BIAAoAvDlAQ0BIANBASADQQFLGyIEIAAoArzlASIFIAQgBUkbDAILIAAgDCAIayIFIAAoArznASAAKAK45wEiBGsiByAFIAdJIgkbIgMEfyAIIAAoArDnASAEaiADEDEaIAAoArjnAQUgBAsgA2oiBDYCuOcBAkAgCQ0AIABBAjYCnOcBIAApA8DlASANKAIAIgmtWA0AIAAoAtDlASAEaiAJTQ0AIABCADcDuOcBCyADIAhqIQggBSAHTwwDCyAAKAK85QEiBQsiBEUEQCAAQQA2ApznAQwDCyADIARPBEAgB0EHRiEFIAACfwJAIAAoAtjnAUUEQAJ/IAdBB0YEQCAAKAK45wEhA0EADAELIA0oAgAgACgCuOcBIgNrCyEHIAAgACgCsOcBIANqIAcgBiAEEB0iA0GIf0sNCCADIAVyRQ0BIAAgACgCuOcBIANqNgK85wFBBAwCCyAAIAhBACAMIAhrIAUbIAYgBBAdIgNBiH9LDQcgAyAIaiEIC0ECCzYCnOcBIAQgBmohBkEBDAILIAYgCkYEQCAKIQYMAwsgAEEDNgKc5wELIAUgACgCqOcBIgNrIQkCQCAHQQdGBEAgCSAKIAZrIgQgBCAJSxshBAwBCyARKAIAIANrIAlJBEBBbCEDDAULIAkgCiAGayIEIAQgCUsbIgRFBEBBACEEDAELIAAoAqDnASADaiAGIAQQMRogACgCqOcBIQMLIAAgAyAEajYCqOcBIAQgBmohBiAEIAlJDQEgAEEANgKo5wEgDygCACIDQQdGIQQgACgCoOcBIQkgACgC2OcBRQRAAn8gA0EHRgRAIAAoArjnASEHQQAMAQsgDSgCACAAKAK45wEiB2sLIQMgACAAKAKw5wEgB2ogAyAJIAUQHSIDQYh/Sw0EIAMgBHJFBEAgAEECNgKc5wFBAQwCCyAAQQQ2ApznASAAIAAoArjnASADajYCvOcBQQEMAQsgACAIQQAgDCAIayAEGyAJIAUQHSIDQYh/Sw0DIABBAjYCnOcBIAMgCGohCEEBCw0BCwsgAiAGIAIoAgBrNgIIIAEgCCABKAIAayIDNgIIIBAgAzYCCCAQIAEpAgA3AgACQAJAIAggGUcNACAGIAtHDQAgACAAKALU5wEiAUEBajYC1OcBIAFBD0gNAUG6fyEDIAwgGUYNAkG4fyEDIAogC0cNAQwCCyAAQQA2AtTnAQsgACgCvOUBIgFFBEAgACgC0OcBIQEgACgCvOcBIAAoArjnAUYEQEEAIQMgAUUNAiACKAIIIgEgAigCBE8EQCAAQQI2ApznAUEBIQMMAwsgAiABQQFqNgIIDAILQQEhAyABDQEgAiACKAIIQQFrNgIIIABBATYC0OcBDAELIAEgACgCqOcBa0EDQQAgAEH05QFqKAIAQQNGG2ohAwsgE0EQaiQAIAMLZwEBfyMAQSBrIgckACAHIAI2AhQgByABNgIQIAcgAygCADYCGCAHIAU2AgQgByAENgIAIAcgBigCADYCCCAAIAdBEGogBxAnIQAgAyAHKAIYNgIAIAYgBygCCDYCACAHQSBqJAAgAAu2AgEBfyMAQYABayIPJAAgDyADNgJ8QX8hDgJAAkACQAJAAkAgAg4EAQADAgQLIAZFBEBBuH8hDgwEC0FsIQ4gBS0AACICIANLDQMgCCACQQJ0IgJqKAIAIQMgAiAHaigCACECIABBADoACyAAQgA3AgAgACACNgIMIAAgAzoACiAAQQA7AQggASAANgIAQQEhDgwDCyABIAk2AgBBACEODAILIApFBEBBbCEODAILQQAhDiALRQ0BIAxBGUgNAUEIIAR0QQhqIgBFDQFBACEDA0AgA0FAayIDIABJDQALDAELQWwhDiAPIA9B/ABqIA9B+ABqIAUgBhAEIgJBiH9LDQAgDygCeCIDIARLDQAgACAPIA8oAnwgByAIIAMgDRAhIAEgADYCACACIQ4LIA9BgAFqJAAgDgsGAEGk/gAL0C4BDH8jAEEQayIMJAACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAEH0AU0EQEGo/gAoAgAiBUEQIABBC2pBeHEgAEELSRsiCEEDdiICdiIBQQNxBEAgAUF/c0EBcSACaiIDQQN0IgFB2P4AaigCACIEQQhqIQACQCAEKAIIIgIgAUHQ/gBqIgFGBEBBqP4AIAVBfiADd3E2AgAMAQtBuP4AKAIAGiACIAE2AgwgASACNgIICyAEIANBA3QiAUEDcjYCBCABIARqIgEgASgCBEEBcjYCBAwNCyAIQbD+ACgCACIKTQ0BIAEEQAJAQQIgAnQiAEEAIABrciABIAJ0cSIAQQAgAGtxQQFrIgAgAEEMdkEQcSICdiIBQQV2QQhxIgAgAnIgASAAdiIBQQJ2QQRxIgByIAEgAHYiAUEBdkECcSIAciABIAB2IgFBAXZBAXEiAHIgASAAdmoiA0EDdCIAQdj+AGooAgAiBCgCCCIBIABB0P4AaiIARgRAQaj+ACAFQX4gA3dxIgU2AgAMAQtBuP4AKAIAGiABIAA2AgwgACABNgIICyAEQQhqIQAgBCAIQQNyNgIEIAQgCGoiAiADQQN0IgEgCGsiA0EBcjYCBCABIARqIAM2AgAgCgRAIApBA3YiAUEDdEHQ/gBqIQdBvP4AKAIAIQQCfyAFQQEgAXQiAXFFBEBBqP4AIAEgBXI2AgAgBwwBCyAHKAIICyEBIAcgBDYCCCABIAQ2AgwgBCAHNgIMIAQgATYCCAtBvP4AIAI2AgBBsP4AIAM2AgAMDQtBrP4AKAIAIgZFDQEgBkEAIAZrcUEBayIAIABBDHZBEHEiAnYiAUEFdkEIcSIAIAJyIAEgAHYiAUECdkEEcSIAciABIAB2IgFBAXZBAnEiAHIgASAAdiIBQQF2QQFxIgByIAEgAHZqQQJ0QdiAAWooAgAiASgCBEF4cSAIayEEIAEhAgNAAkAgAigCECIARQRAIAIoAhQiAEUNAQsgACgCBEF4cSAIayICIAQgAiAESSICGyEEIAAgASACGyEBIAAhAgwBCwsgASAIaiIJIAFNDQIgASgCGCELIAEgASgCDCIDRwRAIAEoAggiAEG4/gAoAgBPBEAgACgCDBoLIAAgAzYCDCADIAA2AggMDAsgAUEUaiICKAIAIgBFBEAgASgCECIARQ0EIAFBEGohAgsDQCACIQcgACIDQRRqIgIoAgAiAA0AIANBEGohAiADKAIQIgANAAsgB0EANgIADAsLQX8hCCAAQb9/Sw0AIABBC2oiAEF4cSEIQaz+ACgCACIJRQ0AQR8hBUEAIAhrIQQCQAJAAkACfyAIQf///wdNBEAgAEEIdiIAIABBgP4/akEQdkEIcSICdCIAIABBgOAfakEQdkEEcSIBdCIAIABBgIAPakEQdkECcSIAdEEPdiABIAJyIAByayIAQQF0IAggAEEVanZBAXFyQRxqIQULIAVBAnRB2IABaigCACICRQsEQEEAIQAMAQtBACEAIAhBAEEZIAVBAXZrIAVBH0YbdCEBA0ACQCACKAIEQXhxIAhrIgcgBE8NACACIQMgByIEDQBBACEEIAIhAAwDCyAAIAIoAhQiByAHIAIgAUEddkEEcWooAhAiAkYbIAAgBxshACABQQF0IQEgAg0ACwsgACADckUEQEECIAV0IgBBACAAa3IgCXEiAEUNAyAAQQAgAGtxQQFrIgAgAEEMdkEQcSICdiIBQQV2QQhxIgAgAnIgASAAdiIBQQJ2QQRxIgByIAEgAHYiAUEBdkECcSIAciABIAB2IgFBAXZBAXEiAHIgASAAdmpBAnRB2IABaigCACEACyAARQ0BCwNAIAAoAgRBeHEgCGsiASAESSECIAEgBCACGyEEIAAgAyACGyEDIAAoAhAiAQR/IAEFIAAoAhQLIgANAAsLIANFDQAgBEGw/gAoAgAgCGtPDQAgAyAIaiIGIANNDQEgAygCGCEFIAMgAygCDCIBRwRAIAMoAggiAEG4/gAoAgBPBEAgACgCDBoLIAAgATYCDCABIAA2AggMCgsgA0EUaiICKAIAIgBFBEAgAygCECIARQ0EIANBEGohAgsDQCACIQcgACIBQRRqIgIoAgAiAA0AIAFBEGohAiABKAIQIgANAAsgB0EANgIADAkLIAhBsP4AKAIAIgJNBEBBvP4AKAIAIQMCQCACIAhrIgFBEE8EQEGw/gAgATYCAEG8/gAgAyAIaiIANgIAIAAgAUEBcjYCBCACIANqIAE2AgAgAyAIQQNyNgIEDAELQbz+AEEANgIAQbD+AEEANgIAIAMgAkEDcjYCBCACIANqIgAgACgCBEEBcjYCBAsgA0EIaiEADAsLIAhBtP4AKAIAIgZJBEBBtP4AIAYgCGsiATYCAEHA/gBBwP4AKAIAIgIgCGoiADYCACAAIAFBAXI2AgQgAiAIQQNyNgIEIAJBCGohAAwLC0EAIQAgCEEvaiIJAn9BgIIBKAIABEBBiIIBKAIADAELQYyCAUJ/NwIAQYSCAUKAoICAgIAENwIAQYCCASAMQQxqQXBxQdiq1aoFczYCAEGUggFBADYCAEHkgQFBADYCAEGAIAsiAWoiBUEAIAFrIgdxIgIgCE0NCkHggQEoAgAiBARAQdiBASgCACIDIAJqIgEgA00NCyABIARLDQsLQeSBAS0AAEEEcQ0FAkACQEHA/gAoAgAiAwRAQeiBASEAA0AgAyAAKAIAIgFPBEAgASAAKAIEaiADSw0DCyAAKAIIIgANAAsLQQAQMCIBQX9GDQYgAiEFQYSCASgCACIDQQFrIgAgAXEEQCACIAFrIAAgAWpBACADa3FqIQULIAUgCE0NBiAFQf7///8HSw0GQeCBASgCACIEBEBB2IEBKAIAIgMgBWoiACADTQ0HIAAgBEsNBwsgBRAwIgAgAUcNAQwICyAFIAZrIAdxIgVB/v///wdLDQUgBRAwIgEgACgCACAAKAIEakYNBCABIQALAkAgCEEwaiAFTQ0AIABBf0YNAEGIggEoAgAiASAJIAVrakEAIAFrcSIBQf7///8HSwRAIAAhAQwICyABEDBBf0cEQCABIAVqIQUgACEBDAgLQQAgBWsQMBoMBQsgACIBQX9HDQYMBAsAC0EAIQMMBwtBACEBDAULIAFBf0cNAgtB5IEBQeSBASgCAEEEcjYCAAsgAkH+////B0sNASACEDAiAUEAEDAiAE8NASABQX9GDQEgAEF/Rg0BIAAgAWsiBSAIQShqTQ0BC0HYgQFB2IEBKAIAIAVqIgA2AgBB3IEBKAIAIABJBEBB3IEBIAA2AgALAkACQAJAQcD+ACgCACIHBEBB6IEBIQADQCABIAAoAgAiAyAAKAIEIgJqRg0CIAAoAggiAA0ACwwCC0G4/gAoAgAiAEEAIAAgAU0bRQRAQbj+ACABNgIAC0EAIQBB7IEBIAU2AgBB6IEBIAE2AgBByP4AQX82AgBBzP4AQYCCASgCADYCAEH0gQFBADYCAANAIABBA3QiA0HY/gBqIANB0P4AaiICNgIAIANB3P4AaiACNgIAIABBAWoiAEEgRw0AC0G0/gAgBUEoayIDQXggAWtBB3FBACABQQhqQQdxGyIAayICNgIAQcD+ACAAIAFqIgA2AgAgACACQQFyNgIEIAEgA2pBKDYCBEHE/gBBkIIBKAIANgIADAILIAEgB00NACADIAdLDQAgACgCDEEIcQ0AIAAgAiAFajYCBEHA/gAgB0F4IAdrQQdxQQAgB0EIakEHcRsiAGoiAjYCAEG0/gBBtP4AKAIAIAVqIgEgAGsiADYCACACIABBAXI2AgQgASAHakEoNgIEQcT+AEGQggEoAgA2AgAMAQtBuP4AKAIAIgMgAUsEQEG4/gAgATYCACABIQMLIAEgBWohAkHogQEhAAJAAkACQAJAAkACQANAIAIgACgCAEcEQCAAKAIIIgANAQwCCwsgAC0ADEEIcUUNAQtB6IEBIQADQCAHIAAoAgAiAk8EQCACIAAoAgRqIgQgB0sNAwsgACgCCCEADAALAAsgACABNgIAIAAgACgCBCAFajYCBCABQXggAWtBB3FBACABQQhqQQdxG2oiCSAIQQNyNgIEIAJBeCACa0EHcUEAIAJBCGpBB3EbaiIFIAlrIAhrIQIgCCAJaiEGIAUgB0YEQEHA/gAgBjYCAEG0/gBBtP4AKAIAIAJqIgA2AgAgBiAAQQFyNgIEDAMLIAVBvP4AKAIARgRAQbz+ACAGNgIAQbD+AEGw/gAoAgAgAmoiADYCACAGIABBAXI2AgQgACAGaiAANgIADAMLIAUoAgQiAEEDcUEBRgRAIABBeHEhBwJAIABB/wFNBEAgBSgCCCIDIABBA3YiAEEDdEHQ/gBqRxogAyAFKAIMIgFGBEBBqP4AQaj+ACgCAEF+IAB3cTYCAAwCCyADIAE2AgwgASADNgIIDAELIAUoAhghCAJAIAUgBSgCDCIBRwRAIAUoAggiACADTwRAIAAoAgwaCyAAIAE2AgwgASAANgIIDAELAkAgBUEUaiIAKAIAIgQNACAFQRBqIgAoAgAiBA0AQQAhAQwBCwNAIAAhAyAEIgFBFGoiACgCACIEDQAgAUEQaiEAIAEoAhAiBA0ACyADQQA2AgALIAhFDQACQCAFIAUoAhwiA0ECdEHYgAFqIgAoAgBGBEAgACABNgIAIAENAUGs/gBBrP4AKAIAQX4gA3dxNgIADAILIAhBEEEUIAgoAhAgBUYbaiABNgIAIAFFDQELIAEgCDYCGCAFKAIQIgAEQCABIAA2AhAgACABNgIYCyAFKAIUIgBFDQAgASAANgIUIAAgATYCGAsgBSAHaiEFIAIgB2ohAgsgBSAFKAIEQX5xNgIEIAYgAkEBcjYCBCACIAZqIAI2AgAgAkH/AU0EQCACQQN2IgBBA3RB0P4AaiECAn9BqP4AKAIAIgFBASAAdCIAcUUEQEGo/gAgACABcjYCACACDAELIAIoAggLIQAgAiAGNgIIIAAgBjYCDCAGIAI2AgwgBiAANgIIDAMLQR8hACACQf///wdNBEAgAkEIdiIAIABBgP4/akEQdkEIcSIDdCIAIABBgOAfakEQdkEEcSIBdCIAIABBgIAPakEQdkECcSIAdEEPdiABIANyIAByayIAQQF0IAIgAEEVanZBAXFyQRxqIQALIAYgADYCHCAGQgA3AhAgAEECdEHYgAFqIQQCQEGs/gAoAgAiA0EBIAB0IgFxRQRAQaz+ACABIANyNgIAIAQgBjYCACAGIAQ2AhgMAQsgAkEAQRkgAEEBdmsgAEEfRht0IQAgBCgCACEBA0AgASIDKAIEQXhxIAJGDQMgAEEddiEBIABBAXQhACADIAFBBHFqIgQoAhAiAQ0ACyAEIAY2AhAgBiADNgIYCyAGIAY2AgwgBiAGNgIIDAILQbT+ACAFQShrIgNBeCABa0EHcUEAIAFBCGpBB3EbIgBrIgI2AgBBwP4AIAAgAWoiADYCACAAIAJBAXI2AgQgASADakEoNgIEQcT+AEGQggEoAgA2AgAgByAEQScgBGtBB3FBACAEQSdrQQdxG2pBL2siACAAIAdBEGpJGyICQRs2AgQgAkHwgQEpAgA3AhAgAkHogQEpAgA3AghB8IEBIAJBCGo2AgBB7IEBIAU2AgBB6IEBIAE2AgBB9IEBQQA2AgAgAkEYaiEAA0AgAEEHNgIEIABBCGohASAAQQRqIQAgASAESQ0ACyACIAdGDQMgAiACKAIEQX5xNgIEIAcgAiAHayIEQQFyNgIEIAIgBDYCACAEQf8BTQRAIARBA3YiAEEDdEHQ/gBqIQICf0Go/gAoAgAiAUEBIAB0IgBxRQRAQaj+ACAAIAFyNgIAIAIMAQsgAigCCAshACACIAc2AgggACAHNgIMIAcgAjYCDCAHIAA2AggMBAtBHyEAIAdCADcCECAEQf///wdNBEAgBEEIdiIAIABBgP4/akEQdkEIcSICdCIAIABBgOAfakEQdkEEcSIBdCIAIABBgIAPakEQdkECcSIAdEEPdiABIAJyIAByayIAQQF0IAQgAEEVanZBAXFyQRxqIQALIAcgADYCHCAAQQJ0QdiAAWohAwJAQaz+ACgCACICQQEgAHQiAXFFBEBBrP4AIAEgAnI2AgAgAyAHNgIAIAcgAzYCGAwBCyAEQQBBGSAAQQF2ayAAQR9GG3QhACADKAIAIQEDQCABIgIoAgRBeHEgBEYNBCAAQR12IQEgAEEBdCEAIAIgAUEEcWoiAygCECIBDQALIAMgBzYCECAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAwsgAygCCCIAIAY2AgwgAyAGNgIIIAZBADYCGCAGIAM2AgwgBiAANgIICyAJQQhqIQAMBQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIIC0G0/gAoAgAiACAITQ0AQbT+ACAAIAhrIgE2AgBBwP4AQcD+ACgCACICIAhqIgA2AgAgACABQQFyNgIEIAIgCEEDcjYCBCACQQhqIQAMAwtBpP4AQTA2AgBBACEADAILAkAgBUUNAAJAIAMoAhwiAkECdEHYgAFqIgAoAgAgA0YEQCAAIAE2AgAgAQ0BQaz+ACAJQX4gAndxIgk2AgAMAgsgBUEQQRQgBSgCECADRhtqIAE2AgAgAUUNAQsgASAFNgIYIAMoAhAiAARAIAEgADYCECAAIAE2AhgLIAMoAhQiAEUNACABIAA2AhQgACABNgIYCwJAIARBD00EQCADIAQgCGoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIAhBA3I2AgQgBiAEQQFyNgIEIAQgBmogBDYCACAEQf8BTQRAIARBA3YiAEEDdEHQ/gBqIQICf0Go/gAoAgAiAUEBIAB0IgBxRQRAQaj+ACAAIAFyNgIAIAIMAQsgAigCCAshACACIAY2AgggACAGNgIMIAYgAjYCDCAGIAA2AggMAQtBHyEAIARB////B00EQCAEQQh2IgAgAEGA/j9qQRB2QQhxIgJ0IgAgAEGA4B9qQRB2QQRxIgF0IgAgAEGAgA9qQRB2QQJxIgB0QQ92IAEgAnIgAHJrIgBBAXQgBCAAQRVqdkEBcXJBHGohAAsgBiAANgIcIAZCADcCECAAQQJ0QdiAAWohAgJAAkAgCUEBIAB0IgFxRQRAQaz+ACABIAlyNgIAIAIgBjYCACAGIAI2AhgMAQsgBEEAQRkgAEEBdmsgAEEfRht0IQAgAigCACEIA0AgCCIBKAIEQXhxIARGDQIgAEEddiECIABBAXQhACABIAJBBHFqIgIoAhAiCA0ACyACIAY2AhAgBiABNgIYCyAGIAY2AgwgBiAGNgIIDAELIAEoAggiACAGNgIMIAEgBjYCCCAGQQA2AhggBiABNgIMIAYgADYCCAsgA0EIaiEADAELAkAgC0UNAAJAIAEoAhwiAkECdEHYgAFqIgAoAgAgAUYEQCAAIAM2AgAgAw0BQaz+ACAGQX4gAndxNgIADAILIAtBEEEUIAsoAhAgAUYbaiADNgIAIANFDQELIAMgCzYCGCABKAIQIgAEQCADIAA2AhAgACADNgIYCyABKAIUIgBFDQAgAyAANgIUIAAgAzYCGAsCQCAEQQ9NBEAgASAEIAhqIgBBA3I2AgQgACABaiIAIAAoAgRBAXI2AgQMAQsgASAIQQNyNgIEIAkgBEEBcjYCBCAEIAlqIAQ2AgAgCgRAIApBA3YiAEEDdEHQ/gBqIQNBvP4AKAIAIQICf0EBIAB0IgAgBXFFBEBBqP4AIAAgBXI2AgAgAwwBCyADKAIICyEAIAMgAjYCCCAAIAI2AgwgAiADNgIMIAIgADYCCAtBvP4AIAk2AgBBsP4AIAQ2AgALIAFBCGohAAsgDEEQaiQAIAALgg0BB38CQCAARQ0AIABBCGsiAyAAQQRrKAIAIgFBeHEiAGohBQJAIAFBAXENACABQQNxRQ0BIAMgAygCACICayIDQbj+ACgCACIESQ0BIAAgAmohACADQbz+ACgCAEcEQCACQf8BTQRAIAMoAggiBCACQQN2IgJBA3RB0P4AakcaIAQgAygCDCIBRgRAQaj+AEGo/gAoAgBBfiACd3E2AgAMAwsgBCABNgIMIAEgBDYCCAwCCyADKAIYIQYCQCADIAMoAgwiAUcEQCADKAIIIgIgBE8EQCACKAIMGgsgAiABNgIMIAEgAjYCCAwBCwJAIANBFGoiAigCACIEDQAgA0EQaiICKAIAIgQNAEEAIQEMAQsDQCACIQcgBCIBQRRqIgIoAgAiBA0AIAFBEGohAiABKAIQIgQNAAsgB0EANgIACyAGRQ0BAkAgAyADKAIcIgJBAnRB2IABaiIEKAIARgRAIAQgATYCACABDQFBrP4AQaz+ACgCAEF+IAJ3cTYCAAwDCyAGQRBBFCAGKAIQIANGG2ogATYCACABRQ0CCyABIAY2AhggAygCECICBEAgASACNgIQIAIgATYCGAsgAygCFCICRQ0BIAEgAjYCFCACIAE2AhgMAQsgBSgCBCIBQQNxQQNHDQBBsP4AIAA2AgAgBSABQX5xNgIEIAMgAEEBcjYCBCAAIANqIAA2AgAPCyADIAVPDQAgBSgCBCIBQQFxRQ0AAkAgAUECcUUEQCAFQcD+ACgCAEYEQEHA/gAgAzYCAEG0/gBBtP4AKAIAIABqIgA2AgAgAyAAQQFyNgIEIANBvP4AKAIARw0DQbD+AEEANgIAQbz+AEEANgIADwsgBUG8/gAoAgBGBEBBvP4AIAM2AgBBsP4AQbD+ACgCACAAaiIANgIAIAMgAEEBcjYCBCAAIANqIAA2AgAPCyABQXhxIABqIQACQCABQf8BTQRAIAUoAgwhAiAFKAIIIgQgAUEDdiIBQQN0QdD+AGoiB0cEQEG4/gAoAgAaCyACIARGBEBBqP4AQaj+ACgCAEF+IAF3cTYCAAwCCyACIAdHBEBBuP4AKAIAGgsgBCACNgIMIAIgBDYCCAwBCyAFKAIYIQYCQCAFIAUoAgwiAUcEQCAFKAIIIgJBuP4AKAIATwRAIAIoAgwaCyACIAE2AgwgASACNgIIDAELAkAgBUEUaiICKAIAIgQNACAFQRBqIgIoAgAiBA0AQQAhAQwBCwNAIAIhByAEIgFBFGoiAigCACIEDQAgAUEQaiECIAEoAhAiBA0ACyAHQQA2AgALIAZFDQACQCAFIAUoAhwiAkECdEHYgAFqIgQoAgBGBEAgBCABNgIAIAENAUGs/gBBrP4AKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiABNgIAIAFFDQELIAEgBjYCGCAFKAIQIgIEQCABIAI2AhAgAiABNgIYCyAFKAIUIgJFDQAgASACNgIUIAIgATYCGAsgAyAAQQFyNgIEIAAgA2ogADYCACADQbz+ACgCAEcNAUGw/gAgADYCAA8LIAUgAUF+cTYCBCADIABBAXI2AgQgACADaiAANgIACyAAQf8BTQRAIABBA3YiAUEDdEHQ/gBqIQACf0Go/gAoAgAiAkEBIAF0IgFxRQRAQaj+ACABIAJyNgIAIAAMAQsgACgCCAshAiAAIAM2AgggAiADNgIMIAMgADYCDCADIAI2AggPC0EfIQIgA0IANwIQIABB////B00EQCAAQQh2IgEgAUGA/j9qQRB2QQhxIgF0IgIgAkGA4B9qQRB2QQRxIgJ0IgQgBEGAgA9qQRB2QQJxIgR0QQ92IAEgAnIgBHJrIgFBAXQgACABQRVqdkEBcXJBHGohAgsgAyACNgIcIAJBAnRB2IABaiEBAkACQAJAQaz+ACgCACIEQQEgAnQiB3FFBEBBrP4AIAQgB3I2AgAgASADNgIAIAMgATYCGAwBCyAAQQBBGSACQQF2ayACQR9GG3QhAiABKAIAIQEDQCABIgQoAgRBeHEgAEYNAiACQR12IQEgAkEBdCECIAQgAUEEcWoiB0EQaigCACIBDQALIAcgAzYCECADIAQ2AhgLIAMgAzYCDCADIAM2AggMAQsgBCgCCCIAIAM2AgwgBCADNgIIIANBADYCGCADIAQ2AgwgAyAANgIIC0HI/gBByP4AKAIAQQFrIgBBfyAAGzYCAAsLgQEBAn8gAEUEQCABECsPCyABQUBPBEBBpP4AQTA2AgBBAA8LIABBCGtBECABQQtqQXhxIAFBC0kbEC4iAgRAIAJBCGoPCyABECsiAkUEQEEADwsgAiAAQXxBeCAAQQRrKAIAIgNBA3EbIANBeHFqIgMgASABIANLGxAxGiAAECwgAgu7BwEJfyAAKAIEIgdBA3EhAiAAIAdBeHEiBmohBAJAQbj+ACgCACIFIABLDQAgAkEBRg0ACwJAIAJFBEBBACECIAFBgAJJDQEgAUEEaiAGTQRAIAAhAiAGIAFrQYiCASgCAEEBdE0NAgtBAA8LAkAgASAGTQRAIAYgAWsiAkEQSQ0BIAAgB0EBcSABckECcjYCBCAAIAFqIgEgAkEDcjYCBCAEIAQoAgRBAXI2AgQgASACEC8MAQtBACECIARBwP4AKAIARgRAQbT+ACgCACAGaiIFIAFNDQIgACAHQQFxIAFyQQJyNgIEIAAgAWoiAiAFIAFrIgFBAXI2AgRBtP4AIAE2AgBBwP4AIAI2AgAMAQsgBEG8/gAoAgBGBEBBsP4AKAIAIAZqIgUgAUkNAgJAIAUgAWsiAkEQTwRAIAAgB0EBcSABckECcjYCBCAAIAFqIgEgAkEBcjYCBCAAIAVqIgUgAjYCACAFIAUoAgRBfnE2AgQMAQsgACAHQQFxIAVyQQJyNgIEIAAgBWoiASABKAIEQQFyNgIEQQAhAkEAIQELQbz+ACABNgIAQbD+ACACNgIADAELIAQoAgQiA0ECcQ0BIANBeHEgBmoiCSABSQ0BIAkgAWshCgJAIANB/wFNBEAgBCgCCCIGIANBA3YiBUEDdEHQ/gBqRxogBiAEKAIMIghGBEBBqP4AQaj+ACgCAEF+IAV3cTYCAAwCCyAGIAg2AgwgCCAGNgIIDAELIAQoAhghCAJAIAQgBCgCDCIDRwRAIAQoAggiAiAFTwRAIAIoAgwaCyACIAM2AgwgAyACNgIIDAELAkAgBEEUaiICKAIAIgYNACAEQRBqIgIoAgAiBg0AQQAhAwwBCwNAIAIhBSAGIgNBFGoiAigCACIGDQAgA0EQaiECIAMoAhAiBg0ACyAFQQA2AgALIAhFDQACQCAEIAQoAhwiBUECdEHYgAFqIgIoAgBGBEAgAiADNgIAIAMNAUGs/gBBrP4AKAIAQX4gBXdxNgIADAILIAhBEEEUIAgoAhAgBEYbaiADNgIAIANFDQELIAMgCDYCGCAEKAIQIgIEQCADIAI2AhAgAiADNgIYCyAEKAIUIgJFDQAgAyACNgIUIAIgAzYCGAsgCkEPTQRAIAAgB0EBcSAJckECcjYCBCAAIAlqIgEgASgCBEEBcjYCBAwBCyAAIAdBAXEgAXJBAnI2AgQgACABaiICIApBA3I2AgQgACAJaiIBIAEoAgRBAXI2AgQgAiAKEC8LIAAhAgsgAgujDAEGfyAAIAFqIQUCQAJAIAAoAgQiAkEBcQ0AIAJBA3FFDQEgACgCACIDIAFqIQEgACADayIAQbz+ACgCAEcEQEG4/gAoAgAhAiADQf8BTQRAIAAoAggiBCADQQN2IgNBA3RB0P4AakcaIAQgACgCDCIGRgRAQaj+AEGo/gAoAgBBfiADd3E2AgAMAwsgBCAGNgIMIAYgBDYCCAwCCyAAKAIYIQcCQCAAIAAoAgwiA0cEQCACIAAoAggiAk0EQCACKAIMGgsgAiADNgIMIAMgAjYCCAwBCwJAIABBFGoiAigCACIEDQAgAEEQaiICKAIAIgQNAEEAIQMMAQsDQCACIQYgBCIDQRRqIgIoAgAiBA0AIANBEGohAiADKAIQIgQNAAsgBkEANgIACyAHRQ0BAkAgACAAKAIcIgRBAnRB2IABaiICKAIARgRAIAIgAzYCACADDQFBrP4AQaz+ACgCAEF+IAR3cTYCAAwDCyAHQRBBFCAHKAIQIABGG2ogAzYCACADRQ0CCyADIAc2AhggACgCECICBEAgAyACNgIQIAIgAzYCGAsgACgCFCICRQ0BIAMgAjYCFCACIAM2AhgMAQsgBSgCBCICQQNxQQNHDQBBsP4AIAE2AgAgBSACQX5xNgIEIAAgAUEBcjYCBCAFIAE2AgAPCwJAIAUoAgQiA0ECcUUEQCAFQcD+ACgCAEYEQEHA/gAgADYCAEG0/gBBtP4AKAIAIAFqIgE2AgAgACABQQFyNgIEIABBvP4AKAIARw0DQbD+AEEANgIAQbz+AEEANgIADwsgBUG8/gAoAgBGBEBBvP4AIAA2AgBBsP4AQbD+ACgCACABaiIBNgIAIAAgAUEBcjYCBCAAIAFqIAE2AgAPC0G4/gAoAgAhAiADQXhxIAFqIQECQCADQf8BTQRAIAUoAggiBCADQQN2IgNBA3RB0P4AakcaIAQgBSgCDCIGRgRAQaj+AEGo/gAoAgBBfiADd3E2AgAMAgsgBCAGNgIMIAYgBDYCCAwBCyAFKAIYIQcCQCAFIAUoAgwiA0cEQCACIAUoAggiAk0EQCACKAIMGgsgAiADNgIMIAMgAjYCCAwBCwJAIAVBFGoiBCgCACICDQAgBUEQaiIEKAIAIgINAEEAIQMMAQsDQCAEIQYgAiIDQRRqIgQoAgAiAg0AIANBEGohBCADKAIQIgINAAsgBkEANgIACyAHRQ0AAkAgBSAFKAIcIgRBAnRB2IABaiICKAIARgRAIAIgAzYCACADDQFBrP4AQaz+ACgCAEF+IAR3cTYCAAwCCyAHQRBBFCAHKAIQIAVGG2ogAzYCACADRQ0BCyADIAc2AhggBSgCECICBEAgAyACNgIQIAIgAzYCGAsgBSgCFCICRQ0AIAMgAjYCFCACIAM2AhgLIAAgAUEBcjYCBCAAIAFqIAE2AgAgAEG8/gAoAgBHDQFBsP4AIAE2AgAPCyAFIANBfnE2AgQgACABQQFyNgIEIAAgAWogATYCAAsgAUH/AU0EQCABQQN2IgJBA3RB0P4AaiEBAn9BqP4AKAIAIgNBASACdCICcUUEQEGo/gAgAiADcjYCACABDAELIAEoAggLIQIgASAANgIIIAIgADYCDCAAIAE2AgwgACACNgIIDwtBHyECIABCADcCECABQf///wdNBEAgAUEIdiICIAJBgP4/akEQdkEIcSIEdCICIAJBgOAfakEQdkEEcSIDdCICIAJBgIAPakEQdkECcSICdEEPdiADIARyIAJyayICQQF0IAEgAkEVanZBAXFyQRxqIQILIAAgAjYCHCACQQJ0QdiAAWohBgJAAkBBrP4AKAIAIgRBASACdCIDcUUEQEGs/gAgAyAEcjYCACAGIAA2AgAgACAGNgIYDAELIAFBAEEZIAJBAXZrIAJBH0YbdCECIAYoAgAhAwNAIAMiBCgCBEF4cSABRg0CIAJBHXYhAyACQQF0IQIgBCADQQRxaiIGQRBqKAIAIgMNAAsgBiAANgIQIAAgBDYCGAsgACAANgIMIAAgADYCCA8LIAQoAggiASAANgIMIAQgADYCCCAAQQA2AhggACAENgIMIAAgATYCCAsLVQECf0G4/AAoAgAiASAAQQNqQXxxIgJqIQACQCACQQFOQQAgACABTRsNAD8AQRB0IABJBEAgABAARQ0BC0G4/AAgADYCACABDwtBpP4AQTA2AgBBfwuCBAEDfyACQYAETwRAIAAgASACEAEaIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgACADQQRrIgRLBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAvyAgICfwF+AkAgAkUNACAAIAJqIgNBAWsgAToAACAAIAE6AAAgAkEDSQ0AIANBAmsgAToAACAAIAE6AAEgA0EDayABOgAAIAAgAToAAiACQQdJDQAgA0EEayABOgAAIAAgAToAAyACQQlJDQAgAEEAIABrQQNxIgRqIgMgAUH/AXFBgYKECGwiATYCACADIAIgBGtBfHEiBGoiAkEEayABNgIAIARBCUkNACADIAE2AgggAyABNgIEIAJBCGsgATYCACACQQxrIAE2AgAgBEEZSQ0AIAMgATYCGCADIAE2AhQgAyABNgIQIAMgATYCDCACQRBrIAE2AgAgAkEUayABNgIAIAJBGGsgATYCACACQRxrIAE2AgAgBCADQQRxQRhyIgRrIgJBIEkNACABrUKBgICAEH4hBSADIARqIQEDQCABIAU3AxggASAFNwMQIAEgBTcDCCABIAU3AwAgAUEgaiEBIAJBIGsiAkEfSw0ACwsgAAvpAgEBfwJAIAAgAUYNACABIABrIAJrQQAgAkEBdGtNBEAgACABIAIQMQ8LIAAgAXNBA3EhAwJAAkAgACABSQRAIAMEQCAAIQMMAwsgAEEDcUUEQCAAIQMMAgsgACEDA0AgAkUNBCADIAEtAAA6AAAgAUEBaiEBIAJBAWshAiADQQFqIgNBA3ENAAsMAQsCQCADDQAgACACakEDcQRAA0AgAkUNBSAAIAJBAWsiAmoiAyABIAJqLQAAOgAAIANBA3ENAAsLIAJBA00NAANAIAAgAkEEayICaiABIAJqKAIANgIAIAJBA0sNAAsLIAJFDQIDQCAAIAJBAWsiAmogASACai0AADoAACACDQALDAILIAJBA00NAANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIAJBBGsiAkEDSw0ACwsgAkUNAANAIAMgAS0AADoAACADQQFqIQMgAUEBaiEBIAJBAWsiAg0ACwsgAAsHACMAIwFrCwQAIwELkAEBA38gACEBAkACQCAAQQNxRQ0AIAAtAABFBEBBAA8LA0AgAUEBaiIBQQNxRQ0BIAEtAAANAAsMAQsDQCABIgJBBGohASACKAIAIgNBf3MgA0GBgoQIa3FBgIGChHhxRQ0ACyADQf8BcUUEQCACIABrDwsDQCACLQABIQMgAkEBaiIBIQIgAw0ACwsgASAAawsDAAALAwABC+UBAQJ/IAJBAEchAwJAAkACQCACRQ0AIABBA3FFDQAgAUH/AXEhBANAIAAtAAAgBEYNAiAAQQFqIQAgAkEBayICQQBHIQMgAkUNASAAQQNxDQALCyADRQ0BCwJAIAAtAAAgAUH/AXFGDQAgAkEESQ0AIAFB/wFxQYGChAhsIQMDQCAAKAIAIANzIgRBf3MgBEGBgoQIa3FBgIGChHhxDQEgAEEEaiEAIAJBBGsiAkEDSw0ACwsgAkUNACABQf8BcSEBA0AgASAALQAARgRAIAAPCyAAQQFqIQAgAkEBayICDQALC0EAC4sCAAJAIAAEfyABQf8ATQ0BAkBB7P0AKAIAKAIARQRAIAFBgH9xQYC/A0YNAwwBCyABQf8PTQRAIAAgAUE/cUGAAXI6AAEgACABQQZ2QcABcjoAAEECDwsgAUGAsANPQQAgAUGAQHFBgMADRxtFBEAgACABQT9xQYABcjoAAiAAIAFBDHZB4AFyOgAAIAAgAUEGdkE/cUGAAXI6AAFBAw8LIAFBgIAEa0H//z9NBEAgACABQT9xQYABcjoAAyAAIAFBEnZB8AFyOgAAIAAgAUEGdkE/cUGAAXI6AAIgACABQQx2QT9xQYABcjoAAUEEDwsLQaT+AEEZNgIAQX8FQQELDwsgACABOgAAQQELEQAgAEUEQEEADwsgACABEDoLfgIBfwF+IAC9IgNCNIinQf8PcSICQf8PRwR8IAJFBEAgASAARAAAAAAAAAAAYQR/QQAFIABEAAAAAAAA8EOiIAEQPCEAIAEoAgBBQGoLNgIAIAAPCyABIAJB/gdrNgIAIANC/////////4eAf4NCgICAgICAgPA/hL8FIAALC1ABAX4CQCADQcAAcQRAIAEgA0FAaq2GIQJCACEBDAELIANFDQAgAiADrSIEhiABQcAAIANrrYiEIQIgASAEhiEBCyAAIAE3AwAgACACNwMIC1ABAX4CQCADQcAAcQRAIAIgA0FAaq2IIQFCACECDAELIANFDQAgAkHAACADa62GIAEgA60iBIiEIQEgAiAEiCECCyAAIAE3AwAgACACNwMIC9cDAgJ/An4jAEEgayICJAACQCABQv///////////wCDIgVCgICAgICAwIA8fSAFQoCAgICAgMD/wwB9VARAIAFCBIYgAEI8iIQhBSAAQv//////////D4MiAEKBgICAgICAgAhaBEAgBUKBgICAgICAgMAAfCEEDAILIAVCgICAgICAgIBAfSEEIABCgICAgICAgIAIhUIAUg0BIAQgBUIBg3whBAwBCyAAUCAFQoCAgICAgMD//wBUIAVCgICAgICAwP//AFEbRQRAIAFCBIYgAEI8iIRC/////////wODQoCAgICAgID8/wCEIQQMAQtCgICAgICAgPj/ACEEIAVC////////v//DAFYNAEIAIQQgBUIwiKciA0GR9wBJDQAgAkEQaiAAIAFC////////P4NCgICAgICAwACEIgQgA0GB9wBrED0gAiAAIARBgfgAIANrED4gAikDCEIEhiACKQMAIgBCPIiEIQQgAikDECACKQMYhEIAUq0gAEL//////////w+DhCIAQoGAgICAgICACFoEQCAEQgF8IQQMAQsgAEKAgICAgICAgAiFQgBSDQAgBEIBgyAEfCEECyACQSBqJAAgBCABQoCAgICAgICAgH+DhL8LWQEBfyAAIAAtAEoiAUEBayABcjoASiAAKAIAIgFBCHEEQCAAIAFBIHI2AgBBfw8LIABCADcCBCAAIAAoAiwiATYCHCAAIAE2AhQgACABIAAoAjBqNgIQQQALqAEBA38CQCABIAIoAhAiBAR/IAQFIAIQQA0BIAIoAhALIAIoAhQiBWtLBEAgAiAAIAEgAigCJBECABoP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AkACQAJAAkACQAJAAkACQCAAKAIEIAAoAgAiA2tBAUsEfyADLAABBUEAC0EYdEEYdSIDQdMAaw4FBAIJAQYACyADQcMAaw4HBAgICAgGAgcLIAAgACgCAEECajYCACABIAAQaiICNgIAIAJFDQogAEGgA2pB8CcgARB7IQIMCwsgACAAKAIAQQJqNgIAIAEgABBqIgI2AgAgAkUNCSAAQaADakH8JyABEHshAgwKCyAAIAAoAgBBAmo2AgAgASAAEGoiAjYCACACRQ0IIABBoANqQYUoIAEQeyECDAkLIAAgACgCAEECajYCACABIAAQaiICNgIAIAJFDQcgAEGgA2pBkyggARB7IQIMCAsgACAAKAIAQQJqNgIAIAEgABBqIgM2AgwgA0UNByABIABBARBoIAEoAgAgASgCBEYNByAAQd8AEGdFDQcgASAAEGoiAjYCACACRQ0GIABBoANqQRAQmQEgASgCACABKAIMEKQBIQIMBwsgACAAKAIAQQJqNgIAIAEgAEEAEHMiAzYCACADRQ0GIABBwSggARBpIQIMBgsgACAAKAIAQQJqNgIAIAEgAEEAEHMiAzYCACADRQ0FIABBoANqQeMoIAEQeyECDAULIANB4wBGDQILIAAgACgCAEEBajYCACAAKAIAIgMgACgCBEcEfyADLAAABUEAC0EYdEEYdSEDIAAQjgENAyABIAAQZiICNgIAIAJFDQIgA0H2AEYEQCAAQaADakGMKSABEHshAgwECyAAQaADakGeKSABEHshAgwDCwJAAkAgACgCBCAAKAIAIgNrQQFLBH8gAywAAQVBAAtBGHRBGHVB0gBrDgUBBAQEAAQLIAAgACgCAEECajYCACABIABBABBzIgM2AgAgA0UNAyAAQaADakG0KSABEHshAgwDCyAAIAAoAgBBAmo2AgAgASAAQQAQcyIDNgIAIANFDQIgACABQQxqEI8BIQIgAEHfABBnIQMgAkUEQEEAIQIgA0UNAwsgAEGgA2pByCkgARB7IQIMAgsgACAAKAIAQQJqNgIAIAAQjgENASAAEI4BDQEgASAAEGYiAjYCACACRQ0AIABBoANqQaYoIAEQeyECDAELQQAhAgsgAUEQaiQAIAILjAMBA38jAEEQayIDJAAgAEHMABBnGgJAAkACQAJAIAAoAgAiAiAAKAIERwR/IAIsAAAF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ABB2IgM2AhAgA0UNAyAGIAJBEGoQdwwBCwsgAkEQaiAAIAcQeCAAQaADaiACQRBqEOsCIQgMAQsgBRBsCyACQTBqJAAgCAsaACAAQaADakEQEJkBIAEoAgAgAigCABD3AgsaACAAQaADakEUEJkBIAEoAgAgAigCABCsAwvqAwEEfyMAQRBrIgEkAAJAIABB0wAQZ0UNACAAKAIAIgIgACgCBEcEfyACLAAABUEAC0EYdEEYdSICQeEAa0EaSQRAIAEgAAJ/AkACQAJAAkACQAJAAkAgAkHhAGsOCQECCQYJCQkJBAALIAJB7wBrDgUECAgIAggLIAAgACgCAEEBajYCACABQQA2AgwgACABQQxqEK0BDAULIAAgACgCAEEBajYCACABQQE2AgwgACABQQxqEK0BDAQLIAAgACgCAEEBajYCACABQQI2AgwgACABQQxqEK0BDAMLIAAgACgCAEEBajYCACABQQM2AgwgACABQQxqEK0BDAILIAAgACgCAEEBajYCACABQQQ2AgwgACABQQxqEK0BDAELIAAgACgCAEEBajYCACABQQU2AgwgACABQQxqEK0BCyIDEKkBIgI2AgwgAiADRg0BIABBlAFqIAFBDGoQdyACIQMMAQsgAEHfABBnBEAgAEGUAWoiACICKAIAIAIoAgRGDQEgACgCACgCACEDDAELIAFBADYCDCAAIAFBDGoQjwENACABKAIMIQIgAEHfABBnRQ0AIAJBAWoiAiAAQZQBaiIAIgQoAgQgBCgCAGtBAnVPDQAgACgCACACQQJ0aigCACEDCyABQRBqJAAgAwv/AgEEfyMAQdAAayIBJAACQAJAIABB1QAQZwRAIAFByABqIAAQfSABKAJIIAEoAkxGDQIgASABQUBrQYDyABBkKQIANwMAIAFByABqIAEQcQRAIAFBOGogAUHIAGpBCRD3ASABQTBqIgNCADcCACABQSBqIAAgASgCOBDtASEEIAFBEGogAEEEaiABKAI8EO0BIQIgAUEIaiAAEH0gASABKQMINwMwIAItAAgEQCACKAIAIAIoAgQ2AgALIAQiAi0ACARAIAIoAgAgAigCBDYCAAtBACECIAMoAgAgAygCBEYNAyABIAAQiwEiAjYCICACRQ0CIABBoANqIAFBIGogAxCOAyECDAMLIAEgABCLASIDNgIgIANFDQEg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IgMsAAAiBEHMAGsOKQATExMTExMTARMTExMTExMTExMTEwMTBAUGAgcTCBMTCQoLDA0ODxAREgsgABCUASECDBULIAAQhgEhAgwUCwJAIAAoAgQgACgCACICa0EBSwR/IAIsAAEFQQALQRh0QRh1IgJB8ABHBEAgAkH/AXFBzABHDQEgACgCBCAAKAIAIgJrQQJLBH8gAiwAAgVBAAtBGHRBGHVBMGtBCUsNAQsgABDHASECDBQLIAAQyAEhAgwTCwJAAkACQAJAAkACQAJAIAMsAAEiBEHhAGsOBAEZGQIACyAEQc4ARg0DIARB0wBGDQQgBEHuAEYNAiAEQfQARg0FIARB+gBHDRggACADQQJqNgIAIAEgABCTASICNgL4BCACRQ0XIABBqS8gAUH4BGoQswEhAgwYCyAAIANBAmo2AgAgASABQagFakGfLxBkKQIANwMQIAAgAUEQahDJASECDBcLIAAgA0ECajYCACABIAFBoAVqQaIvEGQpAgA3AxggACABQRhqEMoBIQIMFgsgACADQQJqNgIAIAEgAUGYBWpBoi8QZCkCADcDICAAIAFBIGoQyQEhAgwVCyAAIANBAmo2AgAgASABQZAFakGkLxBkKQIANwMoIAAgAUEoahDJASECDBQLIAAgA0ECajYCACABIAFBiAVqQacvEGQpAgA3AzAgACABQTBqEMkBIQIMEwsgACADQQJqNgIAIAEgABBqIgI2AvgEIAJFDREgAEGpLyABQfgEahCzASECDBILAkACQAJAAkACQCADLAABIgRB7ABrDgQBAhYDAAsgBEH2AEYNAyAEQeMARw0VIAAgA0ECajYCACABIAAQaiICNgL4BCACRQ0UIAEgABCTASICNgKEBSACRQ0UIABBoANqQbMvIAFB+ARqIAFBhAVqENsBIQIMFQsgACADQQJqNgIAIAEgABCTASIDNgKEBSADRQ0UIABBCGoiAyIEKAIEIAQoAgBrQQJ1IQQDQCAAQcUAEGdFBEAgASAAEJMBIgU2AvgEIAVFDRYgAyABQfgEahB3DAELCyABQfgEaiAAIAQQeCAAQaADaiABQYQFaiABQfgEahDcASECDBQLIAAgA0ECajYCACABIAFB8ARqQb4vEGQpAgA3AzggACABQThqEMkBIQIMEwsgACADQQJqNgIAIAEgAUHoBGpBwC8QZCkCADcDQCAAIAFBQGsQygEhAgwSCyAAEMsBIQIMEQsCQAJAAkACQAJAAkACQCADLAABIgRB7ABrDgsBFwIXFxcXAwQXBQALAkACQAJAIARB4QBrDgUAGQEZAggLIAAgA0ECajYCACABIAAQkwEiAjYC+AQgAkUNFyABQQE6AIQFIAAgAUH4BGogAUG/BWogAUGEBWoQzAEhAgwYCyAAIANBAmo2AgAgASAAEGoiAjYC+AQgAkUNFiABIAAQkwEiAjYChAUgAkUNFiAAQaADakHCLyABQfgEaiABQYQFahDbASECDBcLIAAgA0ECajYCACABIAFB4ARqQc8vEGQpAgA3A0ggACABQcgAahDKASECDBYLIAAgA0ECajYCACABIAAQkwEiAjYC+AQgAkUNFCABQQA6AIQFIAAgAUH4BGogAUG/BWogAUGEBWoQzAEhAgwVCyAAEM0BIQIMFAsgACADQQJqNgIAIAEgABCTASICNgL4BCACRQ0SIAEgABCTASICNgKEBSACRQ0SIAAgAUH4BGpB0S8gAUGEBWoQzgEhAgwTCyAAIANBAmo2AgAgASAAEJMBIgI2AvgEIAJFDREgASAAEJMBIgI2AoQFIAJFDREgAEGgA2ogAUH4BGpB1C8gAUGEBWoQ4wEhAgwSCyAAIANBAmo2AgAgASABQdgEakHWLxBkKQIANwNQIAAgAUHQAGoQyQEhAgwRCyAEQdYARw0QIAAgA0ECajYCACABIAFB0ARqQdgvEGQpAgA3A1ggACABQdgAahDJASECDBALAkACQAJAIAMsAAEiBEHvAGsOAwASAgELIAAgA0ECajYCACABIAFByARqQdsvEGQpAgA3A2AgACABQeAAahDJASECDBELIARBzwBHDRAgACADQQJqNgIAIAEgAUHABGpB3S8QZCkCADcDaCAAIAFB6ABqEMkBIQIMEAsgACADQQJqNgIAIAEgAUG4BGpB4C8QZCkCADcDcCAAIAFB8ABqEMkBIQIMDwsgAywAASIEQfQARwRAIARB5QBHDQ8gACADQQJqNgIAIAEgAUGwBGpB4y8QZCkCADcDeCAAIAFB+ABqEMkBIQIMDwsgACADQQJqNgIAIAEgAUGoBGpB5i8QZCkCADcDgAEgACABQYABahDJASECDA4LIAMsAAEiBEHsAEcEQCAEQfgARw0OIAAgA0ECajYCACABIAAQkwEiAjYC+AQgAkUNDSABIAAQkwEiAjYChAUgAkUNDSAAQaADakEQEJkBIAEoAvgEIAEoAoQFEMcCIQIMDgsgACADQQJqNgIAIABBCGoiAyIEKAIEIAQoAgBrQQJ1IQQDQCAAQcUAEGdFBEAgASAAEM8BIgU2AvgEIAVFDQ8gAyABQfgEahB3DAELCyABQQA2AoQFIAFB+ARqIAAgBBB4IABBoANqIAFBhAVqIAFB+ARqEOUBIQIMDQsCQAJAAkACQCADLAABIgRB8wBrDgIBAwALIARB0wBGDQEgBEHlAEcNDyAAIANBAmo2AgAgASABQaAEakHoLxBkKQIANwOIASAAIAFBiAFqEMkBIQIMDwsgACADQQJqNgIAIAEgAUGYBGpB6y8QZCkCADcDkAEgACABQZABahDJASECDA4LIAAgA0ECajYCACABIAFBkARqQe4vEGQpAgA3A5gBIAAgAUGYAWoQyQEhAgwNCyAAIANBAmo2AgAgASABQYgEakHyLxBkKQIANwOgASAAIAFBoAFqEMkBIQIMDAsCQAJAAkACQAJAAkAgAywAASIEQekAaw4FARERAwUACyAEQckAaw4EARAQAxALIAAgA0ECajYCACABIAFBgARqQfQvEGQpAgA3A6gBIAAgAUGoAWoQyQEhAgwPCyAAIANBAmo2AgAgASABQfgDakH2LxBkKQIANwOwASAAIAFBsAFqEMkBIQIMDgsgACADQQJqNgIAIAEgAUHwA2pBzy8QZCkCADcDuAEgACABQbgBahDJASECDA0LIAAgA0ECajYCACABIAFB6ANqQfkvEGQpAgA3A8ABIAAgAUHAAWoQyQEhAgwMCyAAIANBAmo2AgAgAEHfABBnBEAgASABQeADakH8LxBkKQIANwPIASAAIAFByAFqEMoBIQIMDAsgASAAEJMBIgI2AvgEIAJFDQogACABQfgEakH8LxDQASECDAsLAkACQAJAAkACQAJAIAMsAAEiBEHhAGsOBwEQEBACEAMACyAEQfQAaw4FAw8PAAQPCyAAENEBIQIMDgsgACADQQJqNgIAIAEgAUHYA2pB/y8QZCkCADcD0AEgACABQdABahDJASECDA0LIAAgA0ECajYCACABIAFB0ANqQfQvEGQpAgA3A9gBIAAgAUHYAWoQygEhAgwMCyAAIANBAmo2AgAgASABQcgDakGCMBBkKQIANwPgASAAIAFB4AFqEMoBIQIMCwsgACADQQJqNgIAIAEgABCTASICNgL4BCACRQ0JIABBoANqQYQwIAFB+ARqQZovENQBIQIMCgsCQAJAAkACQCADLAABIgRB7gBrDgUAAQ0NAgMLIAAQzQEhAgwMCyAAIANBAmo2AgAgASABQcADakGPMBBkKQIANwPoASAAIAFB6AFqEMkBIQIMCwsgACADQQJqNgIAIAEgAUG4A2pBkjAQZCkCADcD8AEgACABQfABahDJASECDAoLIARB0gBHDQkgACADQQJqNgIAIAEgAUGwA2pBlDAQZCkCADcD+AEgACABQfgBahDJASECDAkLAkACQAJAAkACQAJAIAMsAAEiBEHsAGsOCQEADg4DDg4EBQILIAAgA0ECajYCACABIAFBqANqQZcwEGQpAgA3A4ACIAAgAUGAAmoQyQEhAgwNCyAAIANBAmo2AgAgASABQaADakGbMBBkKQIANwOIAiAAIAFBiAJqEMkBIQIMDAsgBEHMAEcNCyAAIANBAmo2AgAgASABQZgDakGdMBBkKQIANwOQAiAAIAFBkAJqEMkBIQIMCwsgACADQQJqNgIAIABB3wAQZwRAIAEgAUGQA2pBoDAQZCkCADcDmAIgACABQZgCahDKASECDAsLIAEgABCTASICNgL4BCACRQ0JIAAgAUH4BGpBoDAQ0AEhAgwKCyAAIANBAmo2AgAgASABQYgDakGbMBBkKQIANwOgAiAAIAFBoAJqEMoBIQIMCQsgACADQQJqNgIAIAEgABCTASICNgL4BCACRQ0HIAEgABCTASICNgKEBSACRQ0HIAAgAUH4BGpBozAgAUGEBWoQzgEhAgwICyADLQABQfUARw0HIAAgA0ECajYCACABIAAQkwEiAjYC+AQgAkUNBiABIAAQkwEiAjYChAUgAkUNBiABIAAQkwEiAjYChAMgAkUNBiAAQaADakEUEJkBIAEoAvgEIAEoAoQFIAEoAoQDENUCIQIMBwsCQAJAIAMsAAEiBEHNAEcEQCAEQdMARg0CIARB8wBGDQEgBEHtAEcEQCAEQeMARw0KIAAgA0ECajYCACABIAAQaiICNgL4BCACRQ0JIAEgABCTASICNgKEBSACRQ0JIABBoANqQaYwIAFB+ARqIAFBhAVqENsBIQIMCgsgACADQQJqNgIAIAEgAUH4AmpBtzAQZCkCADcDqAIgACABQagCahDJASECDAkLIAAgA0ECajYCACABIAFB8AJqQbkwEGQpAgA3A7ACIAAgAUGwAmoQyQEhAgwICyAAIANBAmo2AgAgASABQegCakG8MBBkKQIANwO4AiAAIAFBuAJqEMkBIQIMBwsgACADQQJqNgIAIAEgAUHgAmpBvzAQZCkCADcDwAIgACABQcACahDJASECDAYLAkACQAJAAkACQAJAAkAgAywAASIEQfAAaw4FAQwCDAMACyAEQdAARg0FIARB2gBGDQQgBEH6AEYNAyAEQeMARw0LIAAgA0ECajYCACABIAAQaiICNgL4BCACRQ0KIAEgABCTASICNgKEBSACRQ0KIABBoANqQcMwIAFB+ARqIAFBhAVqENsBIQIMCwsgACADQQJqNgIAIAEgABCTASICNgL4BCACRQ0JIAAgAUH4BGoQgQEhAgwKCyAAEM0BIQIMCQsgACADQQJqNgIAIAEgABBqIgI2AvgEIAJFDQcgAEHPMCABQfgEahCzASECDAgLIAAgA0ECajYCACABIAAQkwEiAjYC+AQgAkUNBiAAQc8wIAFB+ARqELMBIQIMBwsgACADQQJqNgIAIAAoAgAiAyAAKAIERwR/IAMsAAAFQQALQRh0QRh1IgNB5gBHBEAgA0H/AXFB1ABHDQcgASAAEIYBIgI2AvgEIAJFDQYgAEGgA2ogAUH4BGoQ6AEhAgwHCyABIAAQxwEiAjYC+AQgAkUNBSAAIAFB+ARqENIBIQIMBgsgACADQQJqNgIAIABBCGoiAyIEKAIEIAQoAgBrQQJ1IQQDQCAAQcUAEGdFBEAgASAAEHYiBTYC+AQgBUUNByADIAFB+ARqEHcMAQsLIAFB+ARqIAAgBBB4IAEgAEGgA2ogAUH4BGoQ6QE2AoQFIAAgAUGEBWoQ0gEhAgwFCwJAAkACQAJAAkAgAywAASIEQekAaw4EAQkJAgALIARB9wBGDQMgBEHyAEYNAiAEQeUARw0IIAAgA0ECajYCACABIAAQkwEiAjYC+AQgAkUNByAAQeQwIAFB+ARqELMBIQIMCAsgACADQQJqNgIAIAEgABBqIgI2AvgEIAJFDQYgAEHkMCABQfgEahCzASECDAcLIAAgA0ECajYCACABIAAQaiICNgKEBSACRQ0FIABBCGoiAiIDKAIEIAMoAgBrQQJ1IQMDQCAAQcUAEGdFBEAgASAAEM8BIgQ2AvgEIARFDQcgAiABQfgEahB3DAELCyABQfgEaiAAIAMQeCAAQaADaiABQYQFaiABQfgEahDqASECDAYLIAAgA0ECajYCACAAQe0wEHwhAgwFCyAAIANBAmo2AgAgASAAEJMBIgI2AvgEIAJFDQMgAEGgA2ogAUH4BGoQ6wEhAgwECyAEQTFrQQlJDQELIAEgAUHYAmpB8zAQZCkCADcDCCAAIAFBCGoQZQRAIAEgABBqIgI2AvgEIAJFDQIgACABQfgEahDTASECDAMLIAEgAUHQAmpB/zAQZCkCADcDACAAIAEQZUUNAiABIAAQkwEiAjYC+AQgAkUNASAAIAFB+ARqENMBIQIMAgsgABDNASECDAELQQAhAgsgAUHABWokACACC7cKAQN/IwBBsAJrIgEkAAJAIABBzAAQZ0UNAAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgACgCACIDIAAoAgRHBH8gAywAAAVBAAtBGHRBGHVBwQBrDjkTFhYUFhYWFhYWFhYWFhYWFhYWFxUWFhYWFhYWFhYSFgMBAhARDxYEBwgWCQoNDhYWFgUGFhYACwwWCyAAIAAoAgBBAWo2AgAgASABQagCakGLMRBkKQIANwMAIAAgARDVASECDBYLIAEgAUGgAmpBkzEQZCkCADcDECAAIAFBEGoQZQRAIAFBADYCkAEgACABQZABahDWASECDBYLIAEgAUGYAmpBlzEQZCkCADcDCCAAIAFBCGoQZUUNFSABQQE2ApABIAAgAUGQAWoQ1gEhAgwVCyAAIAAoAgBBAWo2AgAgASABQZACakGbMRBkKQIANwMYIAAgAUEYahDVASECDBQLIAAgACgCAEEBajYCACABIAFBiAJqQaAxEGQpAgA3AyAgACABQSBqENUBIQIMEwsgACAAKAIAQQFqNgIAIAEgAUGAAmpBrDEQZCkCADcDKCAAIAFBKGoQ1QEhAgwSCyAAIAAoAgBBAWo2AgAgASABQfgBakG6MRBkKQIANwMwIAAgAUEwahDVASECDBELIAAgACgCAEEBajYCACABIAFB8AFqQcAxEGQpAgA3AzggACABQThqENUBIQIMEAsgACAAKAIAQQFqNgIAIAEgAUHoAWpBzzEQZCkCADcDQCAAIAFBQGsQ1QEhAgwPCyAAIAAoAgBBAWo2AgAgASABQeABakHQMRBkKQIANwNIIAAgAUHIAGoQ1QEhAgwOCyAAIAAoAgBBAWo2AgAgASABQdgBakHSMRBkKQIANwNQIAAgAUHQAGoQ1QEhAgwNCyAAIAAoAgBBAWo2AgAgASABQdABakHUMRBkKQIANwNYIAAgAUHYAGoQ1QEhAgwMCyAAIAAoAgBBAWo2AgAgASABQcgBakHXMRBkKQIANwNgIAAgAUHgAGoQ1QEhAgwLCyAAIAAoAgBBAWo2AgAgASABQcABakHaMRBkKQIANwNoIAAgAUHoAGoQ1QEhAgwKCyAAIAAoAgBBAWo2AgAgASABQbgBakHeMRBkKQIANwNwIAAgAUHwAGoQ1QEhAgwJCyAAIAAoAgBBAWo2AgAgASABQbABakHnMRBkKQIANwN4IAAgAUH4AGoQ1QEhAgwICyAAIAAoAgBBAWo2AgAgABDXASECDAcLIAAgACgCAEEBajYCACAAENgBIQIMBgsgACAAKAIAQQFqNgIAIAAQ2QEhAgwFCyABIAFBqAFqQaAnEGQpAgA3A4ABAkAgACABQYABahBlRQ0AIAAQZiICRQ0AIABBxQAQZw0FC0EAIQIMBAsgASAAEGoiAzYCkAEgA0UNAyAAQcUAEGdFDQMgAEGgA2ogAUGQAWoQ7AEhAgwDCyABIAFBoAFqQfkxEGQpAgA3A4gBIAAgAUGIAWoQZUUNAiAAQf0xEHwhAgwCCyAAKAIEIAAoAgAiA2tBAUsEfyADLAABBUEAC0H/AXFB7ABHDQEgASAAQQAQtQEiAzYCkAEgA0UNASAAQcUAEGdFDQEgAEGgA2ogAUGQAWoQ8gEhAgwBCyABIAAQaiIDNgKcASADRQ0AIAFBkAFqIABBABBoIAEoApABIAEoApQBRg0AIABBxQAQZ0UNACAAQaADaiABQZwBaiABQZABahDzASECCyABQbACaiQAIAILigEBAn8gACgCBCAAKAIAa0ECdSEDAkACQCAAKAIAIABBDGpGBEAgAUECdBArIgJFDQIgACgCACAAKAIEIAIQxgEgACACNgIADAELIAAgACgCACABQQJ0EC0iAjYCACACRQ0BCyAAIAIgAUECdGo2AgggACACIANBAnRqNgIEDwtBvPwAKAIAEQoAAAtrAgF/AX4jAEEQayICJAAgAEEQEJkBIQAgAiABKQIAIgM3AwAgAiADNwMIIABBAToAByAAQQE6AAYgAEEBOgAFIABBCToABCAAQYQrNgIAIABBsOoANgIAIAAgAikCADcCCCACQRBqJAAgAAsvACACIAMgAUGgA2ogAyACa0ECdSIBQQJ0EJkBIgIQxgEgACABNgIEIAAgAjYCAAtqAgF/AX4jAEEQayIHJAAgAEEkEJkBIQAgAigCACECIAEoAgAhASAHIAMpAgAiCDcDCCAGLQAAIQMgBSgCACEFIAQoAgAhBCAHIAg3AwAgACABIAIgByAEIAUgAxD9AiEAIAdBEGokACAAC1wBA38gACgCgCAiAigCBCIEIAFBD2pBcHEiAWoiA0H4H08EQCABQfkfTwRAIAAgARCbAQ8LIAAQnAEgACgCgCAiAigCBCIEIAFqIQMLIAIgAzYCBCACIARqQQhqC0cBAX4gAEEBOgAHIABBAToABiAAQQE6AAUgAEEUOgAEIABBhCs2AgAgAEHsKTYCACABKQIAIQMgACACNgIQIAAgAzcCCCAAC0MBAX8gAUEIahArIgFFBEBBvPwAKAIAEQoAAAsgACgCgCAiACgCACECIAFBADYCBCABIAI2AgAgACABNgIAIAFBCGoLOAECf0GAIBArIgFFBEBBvPwAKAIAEQoAAAsgACgCgCAhAiABQQA2AgQgASACNgIAIAAgATYCgCALBABBAAsEACAAC14CAX8BfiMAQRBrIgIkACACIAApAggiAzcDACACIAM3AwggASACEKABIAAoAhAiACABIAAoAgAoAhARAAAgAC0ABUEBRwRAIAAgASAAKAIAKAIUEQAACyACQRBqJAALPAEBfyABKAIEIAEoAgBrIgIEQCAAIAIQayAAKAIAIAAoAgRqIAEoAgAgAhAzGiAAIAAoAgQgAmo2AgQLCwMAAQsJACAAQgA3AgALAwAACz4AIABBAToAByAAQQE6AAYgAEEBOgAFIABBFToABCAAQYQrNgIAIAAgAjYCDCAAIAE2AgggAEGwKzYCACAAC6UBAQJ/IwBBIGsiAiQAIAIgAkEYakGcLBBkKQIANwMIIAEgAkEIahCgASAAKAIIIgMgASADKAIAKAIQEQAAIAMtAAVBAUcEQCADIAEgAygCACgCFBEAAAsgAiACQRBqQbUsEGQpAgA3AwAgASACEKABIAAoAgwiACABIAAoAgAoAhARAAAgAC0ABUEBRwRAIAAgASAAKAIAKAIUEQAACyACQSBqJAALaQEBfyMAQRBrIgEkACABQQA2AgwgAEHyABBnBEAgASABKAIMQQRyNgIMCyAAQdYAEGcEQCABIAEoAgxBAnI2AgwLIABBywAQZwRAIAEgASgCDEEBcjYCDAsgASgCDCEAIAFBEGokACAAC4YBAQJ/IwBBEGsiAiQAIAIgATYCDCABBH8CQCAAKAIAIgMoAgAEQCAAKAIEQaADakEQEJkBIAMoAgAgAigCDBC6ASEBIAAoAgAgATYCAAwBCyADIAE2AgALIAAoAggoAgAiAQRAIAFBADoAAQsgACgCACgCAEEARwVBAAshACACQRBqJAAgAAu6AwEEfyMAQSBrIgMkAAJAIAEoAgAiBC0ABEEpRw0AIAMgBCgCCCIENgIcIARBAmtBA0sNACABIABBoANqIANBHGoQ3AI2AgALAkAgAEHDABBnBEBBACEEIABByQAQZyEFIAAoAgAiBiAAKAIERwR/IAYsAAAFQQALQRh0QRh1QTFrQf8BcUEESw0BIAMgACgCACIGIAAoAgRHBH8gBiwAAAVBAAtBGHRBGHVBMGs2AhggACAAKAIAQQFqNgIAIAIEQCACQQE6AAALAkAgBUUNACAAIAIQcw0ADAILIANBADoAFyAAIAEgA0EXaiADQRhqELQBIQQMAQtBACEEIAAoAgAiBSAAKAIERwR/IAUsAAAFQQALQf8BcUHEAEcNACAAKAIEIAAoAgAiBWtBAUsEfyAFLAABBUEAC0EYdEEYdUH/AXFBMGsiBUEFSw0AIAVBA0YNACADIAAoAgQgACgCACIEa0EBSwR/IAQsAAEFQQALQRh0QRh1QTBrNgIQIAAgACgCAEECajYCACACBEAgAkEBOgAACyADQQE6AA8gACABIANBD2ogA0EQahC0ASEECyADQSBqJAAgBAtmAQF/IwBBEGsiAiQAIAIgATYCDAJ/AkADQCAAQcIAEGdFDQEgAiAAEH0gAigCACACKAIERwRAIAIgAEGgA2ogAkEMaiACEOECNgIMDAELC0EADAELIAIoAgwLIQAgAkEQaiQAIAAL+gEBA38jAEEgayICJAACfwJAAkACfyAAKAIAIgMgACgCBEcEfyADLAAABUEAC0EYdEEYdSIDQdUARgRAIAAgARC1AQwBCyADQTFrQf8BcUEITQRAIAAQtgEMAQsgAiACQRhqQbbiABBkKQIANwMIIAAgAkEIahBlBEAgAEEIaiIBIgMoAgQgAygCAGtBAnUhAwNAIAIgABC2ASIENgIQIARFDQMgASACQRBqEHcgAEHFABBnRQ0ACyACQRBqIAAgAxB4IABBoANqIAJBEGoQ5AIhAQwDCyAAIAEQtwELIgENAQtBAAwBCyAAIAEQqQELIQAgAkEgaiQAIAALrQEBAn8CQCAAIAFGDQAgACwAACICQd8ARgRAIABBAWogAUYNASAALAABIgJBMGtBCU0EQCAAQQJqDwsgAkHfAEcNASAAQQJqIQIDQCABIAJGDQIgAiwAACIDQTBrQQlNBEAgAkEBaiECDAELCyACQQFqIAAgA0HfAEYbDwsgAkEwa0EJSw0AIAAhAgNAIAEgAkEBaiICRgRAIAEPCyACLAAAQTBrQQpJDQALCyAACxoAIABBoANqQRAQmQEgASgCACACKAIAEOYCCxUAIABBoANqQQwQmQEgASgCABDnAguQAQEBfyAAEG8hACABKAIAIAFBDGpGBEAgASgCACABKAIEIAAoAgAQxgEgACAAKAIAIAEoAgQgASgCAGtBAnVBAnRqNgIEIAEgASgCADYCBCAADwsgACABKAIANgIAIAAgASgCBDYCBCAAIAEoAgg2AgggASABQRxqNgIIIAEgAUEMaiICNgIEIAEgAjYCACAAC48CAQF/IAAoAgAgAEEMakYhAgJAIAEoAgAgAUEMakYEQCACRQRAIAAoAgAQLCAAIABBHGo2AgggACAAQQxqIgI2AgQgACACNgIACyABKAIAIAEoAgQgACgCABDGASAAIAAoAgAgASgCBCABKAIAa0ECdUECdGo2AgQMAQsgAgRAIAAgASgCADYCACAAIAEoAgQ2AgQgACABKAIINgIIIAEgAUEcajYCCCABIAFBDGoiADYCBCABIAA2AgAPCyAAKAIAIQIgACABKAIANgIAIAEgAjYCACAAKAIEIQIgACABKAIENgIEIAEgAjYCBCAAKAIIIQIgACABKAIINgIIIAEgAjYCCAsgASABKAIANgIECwwAIAAgASkCCDcCAAs5AQF/IwBBEGsiAiQAIABBEBCZASEA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dEEYdUEwa0EJTQRAIAAQ3wEMAQsgASABQShqQZzKABBkKQIANwMQIAAgAUEQahBlBEAgABC4AgwBCyABIAFBIGpBn8oAEGQpAgA3AwggACABQQhqEGUaIAEgAEEAELcBIgI2AhxBACACRQ0AGiACIAAoAgAiAiAAKAIERwR/IAIsAAAFQQALQf8BcUHJAEcNABogASAAQQAQhwEiAjYCGCACBH8gACABQRxqIAFBGGoQiAEFQQALCyEAIAFBMGokACAACxUAIABBoANqQQwQmQEgASgCABDCAgtPAQF/IwBBEGsiBCQAIABBGBCZASEAIAEoAgAhASAEQQhqIAIQZCECIAMoAgAhAyAEIAIpAgA3AwAgACABIAQgAxDFAiEAIARBEGokACAACx8AIABBoANqQRQQmQEgASgCACACKAIAIAMtAAAQyQILPQEBfiMAQRBrIgEkACAAQRQQmQEhACABIAIpAgAiAzcDACABIAM3AwggAEEAIAEQzQIhACABQRBqJAAgAAtCAQF/IwBBEGsiAyQAIABBFBCZASEAIAEoAgAhASADIANBCGogAhBkKQIANwMAIAAgASADEM8CIQAgA0EQaiQAIAALFQAgAEGgA2ogASACIAMgBCAFENACC0gAIABBDBCZASEAIAEoAgAhASAAQQE6AAcgAEEBOgAGIABBAToABSAAQTY6AAQgAEGEKzYCACAAIAE2AgggAEHc2QA2AgAgAAtrAgF/AX4jAEEQayICJAAgAEEQEJkBIQAgAiABKQIAIgM3AwAgAiADNwMIIABBAToAByAAQQE6AAYgAEEBOgAFIABBADoABCAAQYQrNgIAIABB2NoANgIAIAAgAikCADcCCCACQRBqJAAgAAtGAgF/AX4jAEEQayIDJAAgAEEUEJkBIQAgASgCACEBIAMgAikCACIENwMAIAMgBDcDCCAAIAEgAxDNAiEAIANBEGokACAAC0gAIABBDBCZASEAIAEoAgAhASAAQQE6AAcgAEEBOgAGIABBAToABSAAQT86AAQgAEGEKzYCACAAIAE2AgggAEHE2wA2AgAgAAtIACAAQQwQmQEhACABKAIAIQEgAEEBOgAHIABBAToABiAAQQE6AAUgAEHCADoABCAAQYQrNgIAIAAgATYCCCAAQdA2NgIAIAALSQEBfyMAQRBrIgMkACADIAI2AgwgACABNgIAIAEoAgAhASAAQQE6AAggACABNgIEIAAoAgAgA0EMaigCADYCACADQRBqJAAgAAtNAQJ/IwBBEGsiAiQAIAAgATYCACAAIAFBzAJqIgEiAygCBCADKAIAa0ECdTYCBCACIABBCGoQbjYCDCABIAJBDGoQdyACQRBqJAAgAAubAQEFfyMAQRBrIgMkACADQQA2AgwgAyAAKAIEIAAoAgBrNgIIIwBBEGsiBCQAIANBCGoiAigCACADQQxqIgUoAgBJIQYgBEEQaiQAIAIgBSAGGyECQX8hBAJAIAAoAgQgACgCAGsiBSACKAIAIgJNDQAgACgCACACaiABIAUgAmsQOSIBRQ0AIAEgACgCAGshBAsgA0EQaiQAIAQL4gMBBX8jAEGgAWsiASQAIAEgADYCmAEgASABQZABakHTOBBkKQIANwMoAkAgACABQShqEGUEQCABIAFBmAFqQQAQhQIiAzYCSCADRQ0BIABBoANqIAFByABqEIgCIQIMAQsgASABQYgBakHWOBBkKQIANwMgAkAgACABQSBqEGUEQCABIAFBmAFqQQEQhQIiAjYCSCACRQ0BIAEgABBqIgI2AjggAkUNASAAQaADakEQEJkBIAEoAkggASgCOBCRAiECDAILIAEgAUGAAWpB2TgQZCkCADcDGCAAIAFBGGoQZQRAIAEgAUGYAWpBAhCFAiICNgJ8IAJFDQEgAEEIaiICIgMoAgQgAygCAGtBAnUhAyABQcgAaiAAEO4BIQQCfwJAA0ACQCABIAFBQGtB3DgQZCkCADcDCCAAIAFBCGoQZQ0AIAEgABDwASIFNgI4IAVFDQIgAiABQThqEHcMAQsLIAFBOGogACADEHggAEGgA2ogAUH8AGogAUE4ahCJAgwBC0EACyECIAQQ8QEMAgsgASABQTBqQd44EGQpAgA3AxAgACABQRBqEGVFDQEgASAAEPABIgI2AkggAkUNACAAQaADaiABQcgAahCKAiECDAELQQAhAgsgAUGgAWokACACCyUBAX8gACgCACIBIAEoAswCIAAoAgRBAnRqNgLQAiAAQQhqEGwLSAAgAEEMEJkBIQAgASgCACEBIABBAToAByAAQQE6AAYgAEEBOgAFIABBwwA6AAQgAEGEKzYCACAAIAE2AgggAEHsPjYCACAAC0YCAX8BfiMAQRBrIgMkACAAQRQQmQEhACABKAIAIQEgAyACKQIAIgQ3AwAgAyAENwMIIAAgASADEJ0CIQAgA0EQaiQAIAALVQIBfwJ+IwBBIGsiAyQAIABBGBCZASEAIAMgASkCACIENwMYIAMgAikCACIFNwMQIAMgBDcDCCADIAU3AwAgACADQQhqIAMQ9QEhACADQSBqJAAgAAtFACAAQQE6AAcgAEEBOgAGIABBAToABSAAQcUAOgAEIABBhCs2AgAgAEGQMjYCACAAIAEpAgA3AgggACACKQIANwIQIAALmAICAn8BfiMAQfAAayICJAAgACgCDCAAKAIIa0EETwRAIAIgAkHoAGpB9DIQZCkCADcDMCABIAJBMGoQoAEgAiAAKQIIIgQ3AyggAiAENwNgIAEgAkEoahCgASACIAJB2ABqQZovEGQpAgA3AyAgASACQSBqEKABCyACAn8gAEEQaiIDKAIALQAAQe4ARgRAIAIgAkHQAGpB9C8QZCkCADcDGCABIAJBGGoQoAEgAkHIAGogA0EBEPcBIAJByABqDAELIAIgAykCADcDQCACQUBrCykCADcDECABIAJBEGoQoAEgACgCDCAAKAIIa0EDTQRAIAIgACkCCCIENwMIIAIgBDcDOCABIAJBCGoQoAELIAJB8ABqJAALMgEBfyABKAIAIAIgASgCBCABKAIAayIDIAIgA0kbaiECIAAgASgCBDYCBCAAIAI2AgALOAAgAEEBOgAHIABBAToABiAAQQE6AAUgAEHBADoABCAAQYQrNgIAIAAgAToACCAAQYAzNgIAIAALNgEBfyMAQRBrIgIkACACIAJBCGpB3DNB4TMgAC0ACBsQZCkCADcDACABIAIQoAEgAkEQaiQAC2sCAX8BfiMAQRBrIgIkACAAQRAQmQEhACACIAEpAgAiAzcDACACIAM3AwggAEEBOgAHIABBAToABiAAQQE6AAUgAEHGADoABCAAQYQrNgIAIABB8DM2AgAgACACKQIANwIIIAJBEGokACAAC/0BAQR/IwBBQGoiAiQAIABBCGoiACgCACEEIAAoAgQgBGtBAWpBCU8EQCACQThqIQNBACEAA0AgAEEIRwRAIANBUEGpfyAEIABBAXJqLAAAIgVBMGtBCkkbIAVqQQBBCSAAIARqLAAAIgVBMGtBCkkbIAVqQQR0ajoAACADQQFqIQMgAEECaiEADAELCyACQThqIAMQ/AEgAkIANwMwIAJCADcDKCACQgA3AyAgAiACKgI4uzkDECACQRhqIgAgAkEgakEYQdg0IAJBEGoQTyACQSBqajYCBCAAIAJBIGo2AgAgAiAAKQIANwMIIAEgAkEIahCgAQsgAkFAayQACwkAIAAgARD9AQssAAJAIAAgAUYNAANAIAAgAUEBayIBTw0BIAAgARD+ASAAQQFqIQAMAAsACws1AQF/IwBBEGsiAiQAIAIgAC0AADoADyAAIAEtAAA6AAAgASACQQ9qLQAAOgAAIAJBEGokAAtrAgF/AX4jAEEQayICJAAgAEEQEJkBIQAgAiABKQIAIgM3AwAgAiADNwMIIABBAToAByAAQQE6AAYgAEEBOgAFIABBxwA6AAQgAEGEKzYCACAAQeQ0NgIAIAAgAikCADcCCCACQRBqJAAgAAuHAgEEfyMAQdAAayICJAAgAEEIaiIAKAIAIQQgACgCBCAEa0EBakERTwRAIAJByABqIQNBACEAA0AgAEEQRwRAIANBUEGpfyAEIABBAXJqLAAAIgVBMGtBCkkbIAVqQQBBCSAAIARqLAAAIgVBMGtBCkkbIAVqQQR0ajoAACADQQFqIQMgAEECaiEADAELCyACQcgAaiADEPwBIAJCADcDOCACQgA3AzAgAkIANwMoIAJCADcDICACIAIrA0g5AxAgAkEYaiIAIAJBIGpBIEHMNSACQRBqEE8gAkEgamo2AgQgACACQSBqNgIAIAIgACkCADcDCCABIAJBCGoQoAELIAJB0ABqJAALawIBfwF+IwBBEGsiAiQAIABBEBCZASEAIAIgASkCACIDNwMAIAIgAzcDCCAAQQE6AAcgAEEBOgAGIABBAToABSAAQcgAOgAEIABBhCs2AgAgAEHYNTYCACAAIAIpAgA3AgggAkEQaiQAIAALgQIBBH8jAEHwAGsiAiQAIABBCGoiACgCACEEIAAoAgQgBGtBAWpBIU8EQCACQeAAaiEDQQAhAANAIABBIEcEQCADQVBBqX8gBCAAQQFyaiwAACIFQTBrQQpJGyAFakEAQQkgACAEaiwAACIFQTBrQQpJGyAFakEEdGo6AAAgA0EBaiEDIABBAmohAAwBCwsgAkHgAGogAxD8ASACQTBqQQBBKBAyGiACIAIpA2A3AxAgAiACKQNoNwMYIAJBKGoiACACQTBqQShBwDYgAkEQahBPIAJBMGpqNgIEIAAgAkEwajYCACACIAApAgA3AwggASACQQhqEKABCyACQfAAaiQAC3cBAX8jAEEgayICJAAgAiACQRhqQbQ3EGQpAgA3AwggASACQQhqEKABIAAoAggiACABIAAoAgAoAhARAAAgAC0ABUEBRwRAIAAgASAAKAIAKAIUEQAACyACIAJBEGpBtzcQZCkCADcDACABIAIQoAEgAkEgaiQAC2oCAX8BfiMAQRBrIgIkACAAQRAQmQEhACACIAEpAgAiAzcDACACIAM3AwggAEEBOgAHIABBAToABiAAQQE6AAUgAEEsOgAEIABBhCs2AgAgAEHkNzYCACAAIAIpAgA3AgggAkEQaiQAIAALdwEBfyMAQRBrIgIkACACIAE2AgwgACgCACIAIAFBAnRqIgEgASgCjAMiAUEBajYCjAMgAiABNgIIIAIgAEGgA2pBEBCZASACKAIMIAJBCGooAgAQiwIiATYCBCAAKALQAkEEaygCACACQQRqEHcgAkEQaiQAIAELbQIBfwN+IwBBMGsiBCQAIABBIBCZASEAIAQgASkCACIFNwMoIAQgAikCACIGNwMgIAQgAykCACIHNwMYIAQgBTcDECAEIAY3AwggBCAHNwMAIAAgBEEQaiAEQQhqIAQQmQIhACAEQTBqJAAgAAtoAgF/AX4jAEEwayICJAAgAiACQShqQcg4EGQpAgA3AxAgASACQRBqEKABIAIgACkCCCIDNwMIIAIgAzcDICABIAJBCGoQoAEgAiACQRhqQdE4EGQpAgA3AwAgASACEKABIAJBMGokAAtHACAAQQwQmQEhACABKAIAIQEgAEEBOgAHIABBAToABiAAQQA6AAUgAEEcOgAEIABBhCs2AgAgACABNgIIIABB8Dk2AgAgAAtGAgF/AX4jAEEQayIDJAAgAEEUEJkBIQAgASgCACEBIAMgAikCACIENwMAIAMgBDcDCCAAIAEgAxCUAiEAIANBEGokACAAC0cAIABBDBCZASEAIAEoAgAhASAAQQE6AAcgAEEBOgAGIABBADoABSAAQR86AAQgAEGEKzYCACAAIAE2AgggAEGAPTYCACAACz4AIABBAToAByAAQQE6AAYgAEEBOgAFIABBGzoABCAAQYQrNgIAIAAgAjYCDCAAIAE2AgggAEHsODYCACAAC3QBAX8jAEEgayICJAACQCACAn8CQAJAAkAgACgCCA4DAAECBAsgAkEYakHcORBkDAILIAJBEGpB3zkQZAwBCyACQQhqQeI5EGQLKQIANwMAIAEgAhCgAQsgACgCDCIABEAgASAAQQFrrRCNAgsgAkEgaiQAC3oBA38jAEEwayICJAACQCABUARAIABBMBBhDAELIAJBJWohAwNAIAFQRQRAIANBAWsiAyABIAFCCoAiAUIKfn2nQTByOgAADAELCyACQQhqIgQgAkElajYCBCAEIAM2AgAgAiAEKQIANwMAIAAgAhCOAgsgAkEwaiQACzACAX8BfiMAQRBrIgIkACACIAEpAgAiAzcDACACIAM3AwggACACEKABIAJBEGokAAsrACMAQRBrIgAkACAAIABBCGpB3DoQZCkCADcDACABIAAQoAEgAEEQaiQACzAAIAAoAggiACABIAAoAgAoAhARAAAgAC0ABUEBRwRAIAAgASAAKAIAKAIUEQAACws+ACAAQQE6AAcgAEEBOgAGIABBADoABSAAQR06AAQgAEGEKzYCACAAIAI2AgwgACABNgIIIABB8Do2AgAgAAtuAQJ/IwBBEGsiAiQAIAAoAgwiAyABIAMoAgAoAhARAAACfyAAKAIMIgAtAAUiA0ECRwRAIANFDAELIAAgASAAKAIAKAIAEQEAC0UEQCACIAJBCGpB4DsQZCkCADcDACABIAIQoAELIAJBEGokAAtGAQF/IAAoAggiAiABIAIoAgAoAhARAAAgAi0ABUEBRwRAIAIgASACKAIAKAIUEQAACyAAKAIMIgAgASAAKAIAKAIUEQAAC0EAIABBAToAByAAQQE6AAYgAEEAOgAFIABBHjoABCAAQYQrNgIAIAAgATYCCCAAQew7NgIAIAAgAikCADcCDCAAC1MBAX8jAEEgayICJAAgAiACQRhqQdw8EGQpAgA3AwggASACQQhqEKABIABBDGogARCWAiACIAJBEGpB5jwQZCkCADcDACABIAIQoAEgAkEgaiQAC68BAQZ/IwBBEGsiAiQAQQEhBANAIAAoAgQgBUcEQCABKAIEIQYgBEEBcUUEQCACIAJBCGpB8jwQZCkCADcDACABIAIQoAELIAEoAgQhByAAKAIAIAVBAnRqKAIAIgMgASADKAIAKAIQEQAAIAMtAAVBAUcEQCADIAEgAygCACgCFBEAAAsgBUEBaiEFIAcgASgCBEYEfyABIAY2AgQgBAVBAAshBAwBCwsgAkEQaiQAC0EBAX8jAEEQayICJAAgACgCCCIAIAEgACgCACgCEBEAACACIAJBCGpB7D0QZCkCADcDACABIAIQoAEgAkEQaiQACxYAIAAoAggiACABIAAoAgAoAhQRAAALTgAgAEEBOgAHIABBAToABiAAQQE6AAUgAEEtOgAEIABBhCs2AgAgAEH4PTYCACAAIAEpAgA3AgggACACKQIANwIQIAAgAykCADcCGCAAC28CAX8BfiMAQTBrIgIkACACIAJBKGpB3D4QZCkCADcDECABIAJBEGoQoAEgAiAAKQIYIgM3AwggAiADNwMgIAEgAkEIahCgASACIAJBGGpB0TgQZCkCADcDACABIAIQoAEgACABEJsCIAJBMGokAAufAQECfyMAQUBqIgIkACAAQQhqIgMoAgQEQCACIAJBOGpB8i8QZCkCADcDGCABIAJBGGoQoAEgAyABEJYCIAIgAkEwakHmLxBkKQIANwMQIAEgAkEQahCgAQsgAiACQShqQfQyEGQpAgA3AwggASACQQhqEKABIABBEGogARCWAiACIAJBIGpBmi8QZCkCADcDACABIAIQoAEgAkFAayQAC2ABAX8jAEEgayICJAAgAiACQRhqQcw/EGQpAgA3AwggASACQQhqEKABIAAoAggiAC0ABEEtRgRAIAAgARCbAgsgAiACQRBqQc8/EGQpAgA3AwAgASACEKABIAJBIGokAAtCACAAQQE6AAcgAEEBOgAGIABBAToABSAAQcQAOgAEIABBhCs2AgAgACABNgIIIABB4D82AgAgACACKQIANwIMIAALlgECAn8BfiMAQTBrIgIkACACIAJBKGpB9DIQZCkCADcDECABIAJBEGoQoAEgACgCCCIDIAEgAygCACgCEBEAACADLQAFQQFHBEAgAyABIAMoAgAoAhQRAAALIAIgAkEgakGaLxBkKQIANwMIIAEgAkEIahCgASACIAApAgwiBDcDACACIAQ3AxggASACEKABIAJBMGokAAtrAgF/AX4jAEEQayICJAAgAEEQEJkBIQAgAiABKQIAIgM3AwAgAiADNwMIIABBAToAByAAQQE6AAYgAEEBOgAFIABBOzoABCAAQYQrNgIAIABB1MAANgIAIAAgAikCADcCCCACQRBqJAAgAAtNAgF/AX4jAEEgayICJAAgAiACQRhqQcTAABBkKQIANwMIIAEgAkEIahCgASACIAApAggiAzcDACACIAM3AxAgASACEKABIAJBIGokAAtYAgF/AX4jAEEQayIFJAAgAEEcEJkBIQAgAS0AACEBIAUgAikCACIGNwMIIAQoAgAhAiADKAIAIQMgBSAGNwMAIAAgASAFIAMgAhCiAiEAIAVBEGokACAAC1YBAX4gAEEBOgAHIABBAToABiAAQQE6AAUgAEE+OgAEIABBhCs2AgAgACAENgIMIAAgAzYCCCAAQaDCADYCACACKQIAIQUgACABOgAYIAAgBTcCECAAC40DAgJ/AX4jAEHwAGsiAiQAIAIgADYCbCACIAE2AmggAUEoEGECQCAALQAYBEAgACgCDCIDBEAgAyABIAMoAgAoAhARAAAgAy0ABUEBRwRAIAMgASADKAIAKAIUEQAACyABQSAQYSACIAApAhAiBDcDMCACIAQ3A2AgASACQTBqEKABIAFBIBBhCyACIAJB2ABqQfzCABBkKQIANwMoIAEgAkEoahCgASACIAApAhAiBDcDICACIAQ3A1AgASACQSBqEKABIAFBIBBhIAJB6ABqEKQCDAELIAJB6ABqEKQCIAFBIBBhIAIgACkCECIENwMYIAIgBDcDSCABIAJBGGoQoAEgAiACQUBrQYHDABBkKQIANwMQIAEgAkEQahCgASAAKAIMRQ0AIAFBIBBhIAIgACkCECIENwMIIAIgBDcDOCABIAJBCGoQoAEgAUEgEGEgACgCDCIAIAEgACgCACgCEBEAACAALQAFQQFHBEAgACABIAAoAgAoAhQRAAALCyABQSkQYSACQfAAaiQAC2UBA38jAEEQayICJAAgACgCBCEBIAAoAgBBKBBhIAIgASgCCBClAiIBIAAoAgAiAyABKAIAKAIQEQAAIAEtAAVBAUcEQCABIAMgASgCACgCFBEAAAsgACgCAEEpEGEgAkEQaiQACzgAIABBAToAByAAQQE6AAYgAEEBOgAFIABBIjoABCAAQYQrNgIAIAAgATYCCCAAQZDDADYCACAAC8MCAQZ/IwBBQGoiAyQAIANBMGogAUEMahCnAiEFIANBIGogAUEQahCnAiEGIAEoAgQhByAAKAIIIgIgASACKAIAKAIQEQAAIAItAAVBAUcEQCACIAEgAigCACgCFBEAAAsCQAJAAkACQCABKAIQIgJBAWoOAgIAAQsgASAHNgIEDAILIAJBASACQQFLGyEHQQEhBANAIAQgB0YNAiADIANBEGpB8jwQZCkCADcDACABIAMQoAEgASAENgIMIAAoAggiAiABIAIoAgAoAhARAAAgAi0ABUEBRwRAIAIgASACKAIAKAIUEQAACyAEQQFqIQQMAAsACyADIANBGGpB7D0QZCkCADcDCCABIANBCGoQoAELIAYtAAgEQCAGKAIAIAYoAgQ2AgALIAUtAAgEQCAFKAIAIAUoAgQ2AgALIANBQGskAAtJAQF/IwBBEGsiAiQAIAJBfzYCDCAAIAE2AgAgASgCACEBIABBAToACCAAIAE2AgQgACgCACACQQxqKAIANgIAIAJBEGokACAAC08CAX8BfiMAQRBrIgQkACAAQRgQmQEhACABKAIAIQEgBCACKQIAIgU3AwggAygCACECIAQgBTcDACAAIAEgBCACEKkCIQAgBEEQaiQAIAALTwEBfiAAQQE6AAcgAEEBOgAGIABBAToABSAAQS86AAQgAEGEKzYCACAAIAE2AgggAEGExAA2AgAgAikCACEEIAAgAzYCFCAAIAQ3AgwgAAvrAgIDfwF+IwBBgAFrIgIkACAAQQxqIgQgAkH4AGpB5i8QZBCrAgRAIAIgAkHwAGpB9DIQZCkCADcDOCABIAJBOGoQoAELIAIgAkHoAGpB9DIQZCkCADcDMCABIAJBMGoQoAEgACgCCCIDIAEgAygCACgCEBEAACADLQAFQQFHBEAgAyABIAMoAgAoAhQRAAALIAIgAkHgAGpB5MQAEGQpAgA3AyggASACQShqEKABIAIgACkCDCIFNwMgIAIgBTcDWCABIAJBIGoQoAEgAiACQdAAakHnxAAQZCkCADcDGCABIAJBGGoQoAEgACgCFCIAIAEgACgCACgCEBEAACAALQAFQQFHBEAgACABIAAoAgAoAhQRAAALIAIgAkHIAGpBmi8QZCkCADcDECABIAJBEGoQoAEgBCACQfgAakHmLxBkEKsCBEAgAiACQUBrQZovEGQpAgA3AwggASACQQhqEKABCyACQYABaiQACzEAIAAoAgQgACgCAGsgASgCBCABKAIAa0YEfyAAKAIAIAAoAgQgASgCABCMAQVBAAsLRgIBfwF+IwBBEGsiAyQAIABBFBCZASEAIAMgASkCACIENwMIIAIoAgAhASADIAQ3AwAgACADIAEQrQIhACADQRBqJAAgAAtIAQF+IABBAToAByAAQQE6AAYgAEEBOgAFIABBOjoABCAAQYQrNgIAIABB9MQANgIAIAEpAgAhAyAAIAI2AhAgACADNwIIIAALlgECAX8BfiMAQTBrIgIkACACIAApAggiAzcDECACIAM3AyggASACQRBqEKABIAIgAkEgakH0MhBkKQIANwMIIAEgAkEIahCgASAAKAIQIgAgASAAKAIAKAIQEQAAIAAtAAVBAUcEQCAAIAEgACgCACgCFBEAAAsgAiACQRhqQZovEGQpAgA3AwAgASACEKABIAJBMGokAAtPAQF+IABBAToAByAAQQE6AAYgAEEBOgAFIABBNToABCAAQYQrNgIAIABB3MUANgIAIAEpAgAhBCAAIAM2AhQgACACNgIQIAAgBDcCCCAAC60BAgJ/AX4jAEFAaiICJAAgAiAAKQIIIgQ3AxggAiAENwM4IAEgAkEYahCgASACIAJBMGpB8i8QZCkCADcDECABIAJBEGoQoAEgACgCECIDIAEgAygCACgCEBEAACACIAJBKGpBuMYAEGQpAgA3AwggASACQQhqEKABIAAoAhQiACABIAAoAgAoAhARAAAgAiACQSBqQZovEGQpAgA3AwAgASACEKABIAJBQGskAAtCACAAQQE6AAcgAEEBOgAGIABBAToABSAAQTc6AAQgAEGEKzYCACAAIAE2AgggAEHExgA2AgAgACACKQIANwIMIAALgQEBAn8jAEEgayICJAAgACgCCCIDIAEgAygCACgCEBEAACADLQAFQQFHBEAgAyABIAMoAgAoAhQRAAALIAIgAkEYakH0MhBkKQIANwMIIAEgAkEIahCgASAAQQxqIAEQlgIgAiACQRBqQZovEGQpAgA3AwAgASACEKABIAJBIGokAAtGAgF/AX4jAEEQayIDJAAgAEEUEJkBIQAgASgCACEBIAMgAikCACIENwMAIAMgBDcDCCAAIAEgAxC0AiEAIANBEGokACAAC0IAIABBAToAByAAQQE6AAYgAEEBOgAFIABBPDoABCAAQYQrNgIAIAAgATYCCCAAQazHADYCACAAIAIpAgA3AgwgAAueAQECfyMAQTBrIgIkACACIAJBKGpB9DIQZCkCADcDECABIAJBEGoQoAEgACgCCCIDIAEgAygCACgCEBEAACADLQAFQQFHBEAgAyABIAMoAgAoAhQRAAALIAIgAkEgakGQyAAQZCkCADcDCCABIAJBCGoQoAEgAEEMaiABEJYCIAIgAkEYakGaLxBkKQIANwMAIAEgAhCgASACQTBqJAALRgAgAEEBOgAHIABBAToABiAAQQE6AAUgAEE5OgAEIABBhCs2AgAgACADOgANIAAgAjoADCAAIAE2AgggAEGcyAA2AgAgAAulAQEBfyMAQTBrIgIkACAALQAMBEAgAiACQShqQZAuEGQpAgA3AxAgASACQRBqEKABCyACIAJBIGpB/MgAEGQpAgA3AwggASACQQhqEKABIAAtAA0EQCACIAJBGGpBg8kAEGQpAgA3AwAgASACEKABCyAAKAIIIgAgASAAKAIAKAIQEQAAIAAtAAVBAUcEQCAAIAEgACgCACgCFBEAAAsgAkEwaiQAC2sBAn8jAEEQayIBJAAgAQJ/IAAoAgAiAiAAKAIERwR/IAIsAAAFQQALQRh0QRh1QTBrQQlNBEAgABDfAQwBCyAAEN4BCyICNgIMIAIEfyAAQaADaiABQQxqELwCBUEACyEAIAFBEGokACAACz0CAX8BfiMAQRBrIgIkACAAQRAQmQEhACACIAEpAgAiAzcDACACIAM3AwggACACELgBIQAgAkEQaiQAIAALPwAgAEEBOgAHIABBAToABiAAQQE6AAUgAEEWOgAEIABBhCs2AgAgACACNgIMIAAgATYCCCAAQbjJADYCACAACxUAIABBoANqQQwQmQEgASgCABC/AgtIACAAQQwQmQEhACABKAIAIQEgAEEBOgAHIABBAToABiAAQQE6AAUgAEErOgAEIABBhCs2AgAgACABNgIIIABBrMoANgIAIAALQQEBfyMAQRBrIgIkACACIAJBCGpBwC8QZCkCADcDACABIAIQoAEgACgCCCIAIAEgACgCACgCEBEAACACQRBqJAALSAAgAEEMEJkBIQAgASgCACEBIABBAToAByAAQQE6AAYgAEEBOgAFIABBEzoABCAAQYQrNgIAIAAgATYCCCAAQfzPADYCACAACzgAIABBAToAByAAQQE6AAYgAEEBOgAFIABBBDoABCAAQYQrNgIAIAAgATYCCCAAQfzOADYCACAAC1wBAX8jAEEQayICJAAgAiACQQhqQejPABBkKQIANwMAIAEgAhCgASAAKAIIIgAgASAAKAIAKAIQEQAAIAAtAAVBAUcEQCAAIAEgACgCACgCFBEAAAsgAkEQaiQAC1wBAX8jAEEQayICJAAgAiACQQhqQeDQABBkKQIANwMAIAEgAhCgASAAKAIIIgAgASAAKAIAKAIQEQAAIAAtAAVBAUcEQCAAIAEgACgCACgCFBEAAAsgAkEQaiQACzgAIABBAToAByAAQQE6AAYgAEEBOgAFIABBJjoABCAAQYQrNgIAIAAgATYCCCAAQfTQADYCACAAC1sBAX8jAEEQayICJAAgAiACQQhqQZAuEGQpAgA3AwAgASACEKABIAAoAggiACABIAAoAgAoAhARAAAgAC0ABUEBRwRAIAAgASAAKAIAKAIUEQAACyACQRBqJAALFgAgACABKAIIIgAgACgCACgCGBEAAAtPAQF+IABBAToAByAAQQE6AAYgAEEBOgAFIABBMzoABCAAQYQrNgIAIAAgATYCCCAAQeTRADYCACACKQIAIQQgACADNgIUIAAgBDcCDCAAC4wBAgJ/AX4jAEEQayICJAAgACgCCCIDIAEgAygCACgCEBEAACADLQAFQQFHBEAgAyABIAMoAgAoAhQRAAALIAIgACkCDCIENwMAIAIgBDcDCCABIAIQoAEgACgCFCIAIAEgACgCACgCEBEAACAALQAFQQFHBEAgACABIAAoAgAoAhQRAAALIAJBEGokAAs/ACAAQQE6AAcgAEEBOgAGIABBAToABSAAQTA6AAQgAEGEKzYCACAAIAI2AgwgACABNgIIIABBzNIANgIAIAALwwEBAn8jAEEwayICJAAgAiACQShqQfQyEGQpAgA3AxAgASACQRBqEKABIAAoAggiAyABIAMoAgAoAhARAAAgAy0ABUEBRwRAIAMgASADKAIAKAIUEQAACyACIAJBIGpBtNMAEGQpAgA3AwggASACQQhqEKABIAAoAgwiACABIAAoAgAoAhARAAAgAC0ABUEBRwRAIAAgASAAKAIAKAIUEQAACyACIAJBGGpBt9MAEGQpAgA3AwAgASACEKABIAJBMGokAAtHACAAQQE6AAcgAEEBOgAGIABBAToABSAAQckAOgAEIABBhCs2AgAgACADOgAQIAAgAjYCDCAAIAE2AgggAEHE0wA2AgAgAAv2AQECfyMAQRBrIgMkAAJAIAAtABAEQCABQdsAEGEgACgCCCICIAEgAigCACgCEBEAACACLQAFQQFHBEAgAiABIAIoAgAoAhQRAAALIAFB3QAQYQwBCyABQS4QYSAAKAIIIgIgASACKAIAKAIQEQAAIAItAAVBAUcEQCACIAEgAigCACgCFBEAAAsLAn8gACgCDCICLQAEQckAa0H/AXFBAk8EQCADIANBCGpBpNQAEGQpAgA3AwAgASADEKABIAAoAgwhAgsgAgsgASACKAIAKAIQEQAAIAItAAVBAUcEQCACIAEgAigCACgCFBEAAAsgA0EQaiQAC0cAIABBAToAByAAQQE6AAYgAEEBOgAFIABBygA6AAQgAEGEKzYCACAAIAM2AhAgACACNgIMIAAgATYCCCAAQbDUADYCACAAC4ACAQJ/IwBBIGsiAyQAIAFB2wAQYSAAKAIIIgIgASACKAIAKAIQEQAAIAItAAVBAUcEQCACIAEgAigCACgCFBEAAAsgAyADQRhqQZTVABBkKQIANwMIIAEgA0EIahCgASAAKAIMIgIgASACKAIAKAIQEQAAIAItAAVBAUcEQCACIAEgAigCACgCFBEAAAsgAUHdABBhAn8gACgCECICLQAEQckAa0H/AXFBAk8EQCADIANBEGpBpNQAEGQpAgA3AwAgASADEKABIAAoAhAhAgsgAgsgASACKAIAKAIQEQAAIAItAAVBAUcEQCACIAEgAigCACgCFBEAAAsgA0EgaiQAC0IAIABBAToAByAAQQE6AAYgAEEBOgAFIABBPToABCAAQYQrNgIAIAAgATYCCCAAQaTVADYCACAAIAIpAgA3AgwgAAtPAQF/IAAoAggiAgRAIAIgASACKAIAKAIQEQAAIAItAAVBAUcEQCACIAEgAigCACgCFBEAAAsLIAFB+wAQYSAAQQxqIAEQlgIgAUH9ABBhC0IAIABBAToAByAAQQE6AAYgAEEBOgAFIABBMToABCAAQYQrNgIAIAAgATYCCCAAQZDWADYCACAAIAIpAgA3AgwgAAtwAQF/IwBBIGsiBiQAIABBIBCZASEAIAYgASkCADcDGCACKAIAIQEgBiADKQIANwMQIAQtAAAhAiAFLQAAIQMgBiAGKQMYNwMIIAYgBikDEDcDACAAIAZBCGogASAGIAIgAxDRAiEAIAZBIGokACAAC2QBAX4gAEEBOgAHIABBAToABiAAQQE6AAUgAEE4OgAEIABBhCs2AgAgAEGE1wA2AgAgASkCACEGIAAgAjYCECAAIAY3AgggAykCACEGIAAgBToAHSAAIAQ6ABwgACAGNwIUIAALygIBAn8jAEHwAGsiAiQAIAAtABwEQCACIAJB6ABqQeDXABBkKQIANwMwIAEgAkEwahCgAQsgAiACQeAAakHs1wAQZCkCADcDKCABIAJBKGoQoAEgAC0AHQRAIAIgAkHYAGpBzD8QZCkCADcDICABIAJBIGoQoAELIAFBIBBhIABBCGoiAygCBARAIAIgAkHQAGpB9DIQZCkCADcDGCABIAJBGGoQoAEgAyABEJYCIAIgAkHIAGpBmi8QZCkCADcDECABIAJBEGoQoAELIAAoAhAiAyABIAMoAgAoAhARAAAgAy0ABUEBRwRAIAMgASADKAIAKAIUEQAACyAAQRRqIgAoAgQEQCACIAJBQGtB9DIQZCkCADcDCCABIAJBCGoQoAEgACABEJYCIAIgAkE4akGaLxBkKQIANwMAIAEgAhCgAQsgAkHwAGokAAtSAQF+IABBAToAByAAQQE6AAYgAEEBOgAFIABBNDoABCAAQYQrNgIAIABB+NcANgIAIAEpAgAhBCAAIAI2AhAgACAENwIIIAAgAykCADcCFCAAC3sCAn8BfiMAQSBrIgIkACACIAApAggiBDcDCCACIAQ3AxggASACQQhqEKABIAAoAhAiAyABIAMoAgAoAhARAAAgAy0ABUEBRwRAIAMgASADKAIAKAIUEQAACyACIAApAhQiBDcDACACIAQ3AxAgASACEKABIAJBIGokAAtGACAAQQE6AAcgAEEBOgAGIABBAToABSAAQTI6AAQgAEGEKzYCACAAIAM2AhAgACACNgIMIAAgATYCCCAAQeTYADYCACAAC40CAQJ/IwBBQGoiAiQAIAIgAkE4akH0MhBkKQIANwMYIAEgAkEYahCgASAAKAIIIgMgASADKAIAKAIQEQAAIAMtAAVBAUcEQCADIAEgAygCACgCFBEAAAsgAiACQTBqQcjZABBkKQIANwMQIAEgAkEQahCgASAAKAIMIgMgASADKAIAKAIQEQAAIAMtAAVBAUcEQCADIAEgAygCACgCFBEAAAsgAiACQShqQc7ZABBkKQIANwMIIAEgAkEIahCgASAAKAIQIgAgASAAKAIAKAIQEQAAIAAtAAVBAUcEQCAAIAEgACgCACgCFBEAAAsgAiACQSBqQZovEGQpAgA3AwAgASACEKABIAJBQGskAAtcAQF/IwBBMGsiAiQAIAIgAkEoakHE2gAQZCkCADcDCCABIAJBCGoQoAEgAkEYaiAAKAIIEKUCIAEQpgIgAiACQRBqQZovEGQpAgA3AwAgASACEKABIAJBMGokAAsMACAAQQhqIAEQlgILXAEBfyMAQRBrIgIkACACIAJBCGpBpNwAEGQpAgA3AwAgASACEKABIAAoAggiACABIAAoAgAoAhARAAAgAC0ABUEBRwRAIAAgASAAKAIAKAIUEQAACyACQRBqJAALOQAgAEEBOgAHIABBAToABiAAQQE6AAUgAEHAADoABCAAQYQrNgIAIAAgATYCCCAAQbTcADYCACAAC3gBAX8jAEEgayICJAAgAiACQRhqQZTdABBkKQIANwMIIAEgAkEIahCOAiAAKAIIIgAgASAAKAIAKAIQEQAAIAAtAAVBAUcEQCAAIAEgACgCACgCFBEAAAsgAiACQRBqQZovEGQpAgA3AwAgASACEI4CIAJBIGokAAtIACAAQQwQmQEhACABKAIAIQEgAEEBOgAHIABBAToABiAAQQE6AAUgAEEoOgAEIABBhCs2AgAgACABNgIIIABBqN0ANgIAIAALmAEBAX8jAEFAaiICJAACQCACAn8CQAJAAkACQAJAAkAgACgCCA4GAAECAwQFBwsgAkE4akGY3gAQZAwFCyACQTBqQafeABBkDAQLIAJBKGpBud4AEGQMAwsgAkEgakGA3wAQZAwCCyACQRhqQbLfABBkDAELIAJBEGpB5N8AEGQLKQIANwMIIAEgAkEIahCgAQsgAkFAayQACxcAIAAgASgCCEECdEGI/ABqKAIAEGQaC0YAIABBAToAByAAQQE6AAYgAEEBOgAFIABBKjoABCAAQYQrNgIAIAAgAzYCECAAIAI6AAwgACABNgIIIABB5OAANgIAIAALYAEBfyMAQSBrIgIkACAALQAMBEAgAiACQRhqQcAvEGQpAgA3AwggASACQQhqEKABCyACQRBqIAAoAggiACAAKAIAKAIYEQAAIAIgAikDEDcDACABIAIQoAEgAkEgaiQAC0YCAX8BfiMAQRBrIgMkACAAQRQQmQEhACABKAIAIQEgAyACKQIAIgQ3AwAgAyAENwMIIAAgASADEOICIQAgA0EQaiQAIAALVQECfyABLQAFIQMgAS0ABiEEIAAgAS0ABzoAByAAIAQ6AAYgACADOgAFIABBCDoABCAAQYQrNgIAIAAgATYCCCAAQdDhADYCACAAIAIpAgA3AgwgAAt+AgJ/AX4jAEEwayICJAAgACgCCCIDIAEgAygCACgCEBEAACACIAJBKGpBsOIAEGQpAgA3AxAgASACQRBqEKABIAIgACkCDCIENwMIIAIgBDcDICABIAJBCGoQoAEgAiACQRhqQbfTABBkKQIANwMAIAEgAhCgASACQTBqJAALawIBfwF+IwBBEGsiAiQAIABBEBCZASEAIAIgASkCACIDNwMAIAIgAzcDCCAAQQE6AAcgAEEBOgAGIABBAToABSAAQS46AAQgAEGEKzYCACAAQcTiADYCACAAIAIpAgA3AgggAkEQaiQAIAALGgAgAUHbABBhIABBCGogARCWAiABQd0AEGELPwAgAEEBOgAHIABBAToABiAAQQE6AAUgAEEYOgAEIABBhCs2AgAgACACNgIMIAAgATYCCCAAQcjjADYCACAACzgAIABBAToAByAAQQE6AAYgAEEBOgAFIABBKToABCAAQYQrNgIAIAAgATYCCCAAQbDkADYCACAAC5gBAQF/IwBBQGoiAiQAAkAgAgJ/AkACQAJAAkACQAJAIAAoAggOBgABAgMEBQcLIAJBOGpBmN4AEGQMBQsgAkEwakGn3gAQZAwECyACQShqQZjlABBkDAMLIAJBIGpBpOUAEGQMAgsgAkEYakGx5QAQZAwBCyACQRBqQb7lABBkCykCADcDCCABIAJBCGoQoAELIAJBQGskAAsXACAAIAEoAghBAnRBoPwAaigCABBkGgs9AgF/AX4jAEEQayICJAAgAEEQEJkBIQAgAiABKQIAIgM3AwAgAiADNwMIIAAgAhDsAiEAIAJBEGokACAAC2sCAX8BfiMAQRBrIgIkACAAQRAQmQEhACACIAEpAgAiAzcDACACIAM3AwggAEEBOgAHIABBAToABiAAQQE6AAUgAEEjOgAEIABBhCs2AgAgAEHg5gA2AgAgACACKQIANwIIIAJBEGokACAAC7UBAQF+IABBAToAByAAQQE6AAYgAEEBOgAFIABBIDoABCAAQYQrNgIAIABB9OUANgIAIAEpAgAhAiAAQQI6AAcgACACNwIIIABBggQ7AAUgAEEBQQIgAEEIaiIBKAIAIAEoAgAgASgCBEECdGoQ7QIbOgAGIAEoAgAgASgCACABKAIEQQJ0ahDuAgRAIABBAToABwsgASgCACABKAIAIAEoAgRBAnRqEO8CBEAgAEEBOgAFCyAACywBAn8DQCAAIAFGIgJFBEAgACgCACEDIABBBGohACADLQAGQQFGDQELCyACCywBAn8DQCAAIAFGIgJFBEAgACgCACEDIABBBGohACADLQAHQQFGDQELCyACCywBAn8DQCAAIAFGIgJFBEAgACgCACEDIABBBGohACADLQAFQQFGDQELCyACC2kBAX8gASgCEEF/RgRAIAAoAgwhAiABQQA2AgwgASACNgIQCyABKAIMIgIgACgCDEkEfwJ/IAAoAgggAkECdGooAgAiAC0ABSICQQJHBEAgAkUMAQsgACABIAAoAgAoAgARAQALBUEACwtpAQF/IAEoAhBBf0YEQCAAKAIMIQIgAUEANgIMIAEgAjYCEAsgASgCDCICIAAoAgxJBH8CfyAAKAIIIAJBAnRqKAIAIgAtAAYiAkECRwRAIAJFDAELIAAgASAAKAIAKAIEEQEACwVBAAsLaQEBfyABKAIQQX9GBEAgACgCDCECIAFBADYCDCABIAI2AhALIAEoAgwiAiAAKAIMSQR/An8gACgCCCACQQJ0aigCACIALQAHIgJBAkcEQCACRQwBCyAAIAEgACgCACgCCBEBAAsFQQALC1QBAX8gASgCEEF/RgRAIAAoAgwhAiABQQA2AgwgASACNgIQCyABKAIMIgIgACgCDEkEfyAAKAIIIAJBAnRqKAIAIgAgASAAKAIAKAIMEQEABSAACwtRAQF/IAEoAhBBf0YEQCAAKAIMIQIgAUEANgIMIAEgAjYCEAsgASgCDCICIAAoAgxJBEAgACgCCCACQQJ0aigCACIAIAEgACgCACgCEBEAAAsLUQEBfyABKAIQQX9GBEAgACgCDCECIAFBADYCDCABIAI2AhALIAEoAgwiAiAAKAIMSQRAIAAoAgggAkECdGooAgAiACABIAAoAgAoAhQRAAALC5cBAQF/IwBBMGsiAiQAIAIgAkEoakHyLxBkKQIANwMQIAEgAkEQahCgASAAQQhqIAEQlgICf0EAIAEoAgQiAEUNABogACABKAIAakEBay0AAAtB/wFxQT5GBEAgAiACQSBqQeA7EGQpAgA3AwggASACQQhqEKABCyACIAJBGGpB5i8QZCkCADcDACABIAIQoAEgAkEwaiQACz8AIABBAToAByAAQQE6AAYgAEEBOgAFIABBJToABCAAQYQrNgIAIAAgAjYCDCAAIAE2AgggAEHM5wA2AgAgAAtgAQF/IAAoAggiAiABIAIoAgAoAhARAAAgAi0ABUEBRwRAIAIgASACKAIAKAIUEQAACyAAKAIMIgAgASAAKAIAKAIQEQAAIAAtAAVBAUcEQCAAIAEgACgCACgCFBEAAAsLSAAgAEEMEJkBIQAgASgCACEBIABBAToAByAAQQE6AAYgAEEBOgAFIABBJzoABCAAQYQrNgIAIAAgATYCCCAAQcToADYCACAAC1wBAX8jAEEQayICJAAgAiACQQhqQazpABBkKQIANwMAIAEgAhCgASAAKAIIIgAgASAAKAIAKAIQEQAAIAAtAAVBAUcEQCAAIAEgACgCACgCFBEAAAsgAkEQaiQAC2sCAX8BfiMAQRBrIgIkACAAQRAQmQEhACACIAEpAgAiAzcDACACIAM3AwggAEEBOgAHIABBAToABiAAQQE6AAUgAEEhOgAEIABBhCs2AgAgAEG86QA2AgAgACACKQIANwIIIAJBEGokACAACz8BAX8jAEEQayICJAAgAiACQQhqQZTrABBkKQIANwMAIAEgAhCgASAAQQhqIAEQlgIgAUHdABBhIAJBEGokAAtkAQF+IABBADoAByAAQQE6AAYgAEEAOgAFIABBEjoABCAAQYQrNgIAIAAgAjYCDCAAIAE2AgggAEGs6wA2AgAgAykCACEHIAAgBjoAICAAIAU2AhwgACAENgIYIAAgBzcCECAACwQAQQELogEBA38jAEEQayIDJAACQCAAKAIIIgJFDQAgAiABIAIoAgAoAhARAAACfyAAKAIIIgItAAUiBEECRwRAIARFDAELIAIgASACKAIAKAIAEQEACw0AIAMgA0EIakHgOxBkKQIANwMAIAEgAxCgAQsgACgCDCIAIAEgACgCACgCEBEAACAALQAFQQFHBEAgACABIAAoAgAoAhQRAAALIANBEGokAAvwAgECfyMAQfAAayICJAAgAiACQegAakH0MhBkKQIANwMwIAEgAkEwahCgASAAQRBqIAEQlgIgAiACQeAAakGaLxBkKQIANwMoIAEgAkEoahCgASAAKAIIIgMEQCADIAEgAygCACgCFBEAAAsCfyAAKAIcIgNBAXEEQCACIAJB2ABqQZTsABBkKQIANwMgIAEgAkEgahCgASAAKAIcIQMLIANBAnELBH8gAiACQdAAakGb7AAQZCkCADcDGCABIAJBGGoQoAEgACgCHAUgAwtBBHEEQCACIAJByABqQaXsABBkKQIANwMQIAEgAkEQahCgAQsCQCACAn8CQAJAIAAtACBBAWsOAgABAwsgAkFAa0Gv7AAQZAwBCyACQThqQbLsABBkCykCADcDCCABIAJBCGoQoAELIAAoAhgiAARAIAAgASAAKAIAKAIQEQAAIAAtAAVBAUcEQCAAIAEgACgCACgCFBEAAAsLIAJB8ABqJAALQgAgAEEBOgAHIABBAToABiAAQQE6AAUgAEEBOgAEIABBhCs2AgAgACABNgIIIABBwOwANgIAIAAgAikCADcCDCAAC5cBAgJ/AX4jAEEwayICJAAgACgCCCIDIAEgAygCACgCEBEAACADLQAFQQFHBEAgAyABIAMoAgAoAhQRAAALIAIgAkEoakHnxAAQZCkCADcDECABIAJBEGoQoAEgAiAAKQIMIgQ3AwggAiAENwMgIAEgAkEIahCgASACIAJBGGpBmi8QZCkCADcDACABIAIQoAEgAkEwaiQACxoAIABBoANqQRAQmQEgASgCACACKAIAEJ0DC1EBAn8gAEEMEJkBIgIhACABKAIAIgEtAAUhAyAAQQE6AAcgAEEBOgAGIAAgAzoABSAAQQs6AAQgAEGEKzYCACACIAE2AgggAkG4+QA2AgAgAgtCAQF/IwBBEGsiAyQAIABBFBCZASEAIAEoAgAhASADIANBCGogAhBkKQIANwMAIAAgASADELADIQAgA0EQaiQAIAALSAAgAEEMEJkBIQAgASgCACEBIABBAToAByAAQQE6AAYgAEEBOgAFIABBEDoABCAAQYQrNgIAIAAgATYCCCAAQajvADYCACAAC2sCAX8BfiMAQRBrIgIkACAAQRAQmQEhACACIAEpAgAiAzcDACACIAM3AwggAEEBOgAHIABBAToABiAAQQE6AAUgAEEROgAEIABBhCs2AgAgAEGg8AA2AgAgACACKQIANwIIIAJBEGokACAAC2ECAX8BfiMAQRBrIgYkACAAQSAQmQEhACABKAIAIQEgBiACKQIAIgc3AwggBSgCACECIAQtAAAhBCADKAIAIQMgBiAHNwMAIAAgASAGIAMgBCACEIsDIQAgBkEQaiQAIAALeAEBfyMAQSBrIgIkACACIAJBGGpBjPAAEGQpAgA3AwggASACQQhqEKABIAAoAggiACABIAAoAgAoAhARAAAgAC0ABUEBRwRAIAAgASAAKAIAKAIUEQAACyACIAJBEGpBmi8QZCkCADcDACABIAIQoAEgAkEgaiQACz4BAX8jAEEQayICJAAgAiACQQhqQYzxABBkKQIANwMAIAEgAhCgASAAQQhqIAEQlgIgAUEpEGEgAkEQaiQAC10BAX4gAEEAOgAHIABBAToABiAAQQA6AAUgAEEPOgAEIABBhCs2AgAgACABNgIIIABBnPEANgIAIAIpAgAhBiAAIAU2AhwgACAEOgAYIAAgAzYCFCAAIAY3AgwgAAtBAQF/IwBBEGsiAiQAIAAoAggiACABIAAoAgAoAhARAAAgAiACQQhqQeA7EGQpAgA3AwAgASACEKABIAJBEGokAAv0AgECfyMAQfAAayICJAAgAiACQegAakH0MhBkKQIANwMwIAEgAkEwahCgASAAQQxqIAEQlgIgAiACQeAAakGaLxBkKQIANwMoIAEgAkEoahCgASAAKAIIIgMgASADKAIAKAIUEQAAAn8gACgCFCIDQQFxBEAgAiACQdgAakGU7AAQZCkCADcDICABIAJBIGoQoAEgACgCFCEDCyADQQJxCwR/IAIgAkHQAGpBm+wAEGQpAgA3AxggASACQRhqEKABIAAoAhQFIAMLQQRxBEAgAiACQcgAakGl7AAQZCkCADcDECABIAJBEGoQoAELAkAgAgJ/AkACQCAALQAYQQFrDgIAAQMLIAJBQGtBr+wAEGQMAQsgAkE4akGy7AAQZAspAgA3AwggASACQQhqEKABCyAAKAIcBEAgAUEgEGEgACgCHCIAIAEgACgCACgCEBEAACAALQAFQQFHBEAgACABIAAoAgAoAhQRAAALCyACQfAAaiQAC0YCAX8BfiMAQRBrIgMkACAAQRQQmQEhACABKAIAIQEgAyACKQIAIgQ3AwAgAyAENwMIIAAgASADEJADIQAgA0EQaiQAIAALRgIBfwF+IwBBEGsiAyQAIABBFBCZASEAIAEoAgAhASADIAIpAgAiBDcDACADIAQ3AwggACABIAMQkgMhACADQRBqJAAgAAtCACAAQQE6AAcgAEEBOgAGIABBAToABSAAQQo6AAQgAEGEKzYCACAAIAE2AgggAEGU8gA2AgAgACACKQIANwIMIAALlgECAn8BfiMAQTBrIgIkACAAKAIIIgMgASADKAIAKAIQEQAAIAMtAAVBAUcEQCADIAEgAygCACgCFBEAAAsgAiACQShqQfIvEGQpAgA3AxAgASACQRBqEKABIAIgACkCDCIENwMIIAIgBDcDICABIAJBCGoQoAEgAiACQRhqQeYvEGQpAgA3AwAgASACEKABIAJBMGokAAtCACAAQQE6AAcgAEEBOgAGIABBAToABSAAQQI6AAQgAEGEKzYCACAAIAE2AgggAEGA8wA2AgAgACACKQIANwIMIAALegICfwF+IwBBIGsiAiQAIAAoAggiAyABIAMoAgAoAhARAAAgAy0ABUEBRwRAIAMgASADKAIAKAIUEQAACyACIAJBGGpB4DsQZCkCADcDCCABIAJBCGoQoAEgAiAAKQIMIgQ3AwAgAiAENwMQIAEgAhCgASACQSBqJAALUgECfyABLQAFIQMgAS0ABiEEIAAgAS0ABzoAByAAIAQ6AAYgACADOgAFIABBAzoABCAAQYQrNgIAIAAgATYCDCAAIAI2AgggAEHw8wA2AgAgAAstAQF/An8gACgCDCIALQAFIgJBAkcEQCACRQwBCyAAIAEgACgCACgCABEBAAsLLQEBfwJ/IAAoAgwiAC0ABiICQQJHBEAgAkUMAQsgACABIAAoAgAoAgQRAQALCy0BAX8CfyAAKAIMIgAtAAciAkECRwRAIAJFDAELIAAgASAAKAIAKAIIEQEACwsfAQF/IAAoAgwiAiABIAIoAgAoAhARAAAgACABEJkDC5UBAQJ/IwBBMGsiAiQAAn8gACgCCCIDQQFxBEAgAiACQShqQZTsABBkKQIANwMQIAEgAkEQahCgASAAKAIIIQMLIANBAnELBH8gAiACQSBqQZvsABBkKQIANwMIIAEgAkEIahCgASAAKAIIBSADC0EEcQRAIAIgAkEYakGl7AAQZCkCADcDACABIAIQoAELIAJBMGokAAsWACAAKAIMIgAgASAAKAIAKAIUEQAAC0gAIABBDBCZASEAIAEoAgAhASAAQQE6AAcgAEEBOgAGIABBAToABSAAQRo6AAQgAEGEKzYCACAAIAE2AgggAEHY9AA2AgAgAAt5AQF/IwBBIGsiAiQAIAIgAkEYakG89QAQZCkCADcDCCABIAJBCGoQoAEgACgCCCIAIAEgACgCACgCEBEAACAALQAFQQFHBEAgACABIAAoAgAoAhQRAAALIAIgAkEQakG30wAQZCkCADcDACABIAIQoAEgAkEgaiQACz8AIABBAToAByAAQQE6AAYgAEEBOgAFIABBGToABCAAQYQrNgIAIAAgAjYCDCAAIAE2AgggAEHU9QA2AgAgAAusAQECfyMAQSBrIgIkACAAKAIIIgMgASADKAIAKAIQEQAAIAMtAAVBAUcEQCADIAEgAygCACgCFBEAAAsgAiACQRhqQbT2ABBkKQIANwMIIAEgAkEIahCgASAAKAIMIgAEQCAAIAEgACgCACgCEBEAACAALQAFQQFHBEAgACABIAAoAgAoAhQRAAALCyACIAJBEGpBt9MAEGQpAgA3AwAgASACEKABIAJBIGokAAs/ACAAQQE6AAcgAEEAOgAGIABBADoABSAAQQ46AAQgAEGEKzYCACAAIAI2AgwgACABNgIIIABByPYANgIAIAALFgAgACgCCCIAIAEgACgCACgCEBEAAAvXAQECfyMAQTBrIgIkAAJ/QQAgASgCBCIDRQ0AGiADIAEoAgBqQQFrLQAAC0H/AXFB3QBHBEAgAiACQShqQeA7EGQpAgA3AxAgASACQRBqEKABCyACIAJBIGpBqPcAEGQpAgA3AwggASACQQhqEKABIAAoAgwiAwRAIAMgASADKAIAKAIQEQAAIAMtAAVBAUcEQCADIAEgAygCACgCFBEAAAsLIAIgAkEYakG30wAQZCkCADcDACABIAIQoAEgACgCCCIAIAEgACgCACgCFBEAACACQTBqJAALSAEBfyACLQAFIQMgAEEBOgAHIABBAToABiAAIAM6AAUgAEENOgAEIABBhCs2AgAgACACNgIMIAAgATYCCCAAQbT3ADYCACAAC/oBAQN/IwBBMGsiAiQAIAAoAgwiAyABIAMoAgAoAhARAAAg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Q2FzdEV4cHJFAEwTAAAAIwAAaBUAAD4oAAAAAAAAlCMAABEAAAASAAAAEwAAABQAAABZAAAAFgAAABcAAAAYAAAAWgAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZThDYWxsRXhwckUATBMAAGgjAABoFQAAY3YAAAAAAAAEJAAAEQAAABIAAAATAAAAFAAAAFsAAAAWAAAAFwAAABgAAABcAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTRDb252ZXJzaW9uRXhwckUAAEwTAADQIwAAaBUAACkoAAAAAAAAcCQAABEAAAASAAAAEwAAABQAAABdAAAAFgAAABcAAAAYAAAAXgAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTEwRGVsZXRlRXhwckUAAEwTAABAJAAAaBUAAGRlbGV0ZQBbXSAAc3JOAHNyAF9HTE9CQUxfX04AKGFub255bW91cyBuYW1lc3BhY2UpAAAAAAAAECUAABEAAAASAAAAEwAAABQAAABfAAAAFgAAAGAAAAAYAAAAYQAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTEzUXVhbGlmaWVkTmFtZUUAAABMEwAA3CQAAGgVAABkbgBvbgAAAAAAAAB8JQAAEQAAABIAAAATAAAAFAAAAGIAAAAWAAAAFwAAABgAAABjAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlOER0b3JOYW1lRQBMEwAAUCUAAGgVAABvcGVyYXRvciYmAG9wZXJhdG9yJgBvcGVyYXRvciY9AG9wZXJhdG9yPQBvcGVyYXRvcigpAG9wZXJhdG9yLABvcGVyYXRvcn4Ab3BlcmF0b3IgZGVsZXRlW10Ab3BlcmF0b3IqAG9wZXJhdG9yIGRlbGV0ZQBvcGVyYXRvci8Ab3BlcmF0b3IvPQBvcGVyYXRvcl4Ab3BlcmF0b3JePQBvcGVyYXRvcj09AG9wZXJhdG9yPj0Ab3BlcmF0b3I+AG9wZXJhdG9yW10Ab3BlcmF0b3I8PQBvcGVyYXRvcjw8AG9wZXJhdG9yPDw9AG9wZXJhdG9yPABvcGVyYXRvci0Ab3BlcmF0b3ItPQBvcGVyYXRvcio9AG9wZXJhdG9yLS0Ab3BlcmF0b3IgbmV3W10Ab3BlcmF0b3IhPQBvcGVyYXRvciEAb3BlcmF0b3IgbmV3AG9wZXJhdG9yfHwAb3BlcmF0b3J8AG9wZXJhdG9yfD0Ab3BlcmF0b3ItPioAb3BlcmF0b3IrAG9wZXJhdG9yKz0Ab3BlcmF0b3IrKwBvcGVyYXRvci0+AG9wZXJhdG9yPwBvcGVyYXRvciUAb3BlcmF0b3IlPQBvcGVyYXRvcj4+AG9wZXJhdG9yPj49AG9wZXJhdG9yPD0+AAAAAAAA3CcAABEAAAASAAAAEwAAABQAAABkAAAAFgAAABcAAAAYAAAAZQAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTIyQ29udmVyc2lvbk9wZXJhdG9yVHlwZUUAAEwTAACgJwAAaBUAAG9wZXJhdG9yIAAAAAAAAABUKAAAEQAAABIAAAATAAAAFAAAAGYAAAAWAAAAFwAAABgAAABnAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTVMaXRlcmFsT3BlcmF0b3JFAEwTAAAgKAAAaBUAAG9wZXJhdG9yIiIgAAAAAADQKAAAEQAAABIAAAATAAAAFAAAAGgAAAAWAAAAaQAAABgAAABqAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTlHbG9iYWxRdWFsaWZpZWROYW1lRQBMEwAAmCgAAGgVAAAAAAAAOCkAABEAAAASAAAAEwAAABQAAABrAAAAFgAAABcAAAAYAAAAbAAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTEwTWVtYmVyRXhwckUAAEwTAAAIKQAAaBUAAAAAAACoKQAAEQAAABIAAAATAAAAFAAAAG0AAAAWAAAAFwAAABgAAABuAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMThBcnJheVN1YnNjcmlwdEV4cHJFAABMEwAAcCkAAGgVAAApWwBdAAAAAAAAAAAYKgAAEQAAABIAAAATAAAAFAAAAG8AAAAWAAAAFwAAABgAAABwAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTBCcmFjZWRFeHByRQAATBMAAOgpAABoFQAAID0gAAAAAACIKgAAEQAAABIAAAATAAAAFAAAAHEAAAAWAAAAFwAAABgAAAByAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTVCcmFjZWRSYW5nZUV4cHJFAEwTAABUKgAAaBUAACAuLi4gAAAAAAAAAPwqAAARAAAAEgAAABMAAAAUAAAAcwAAABYAAAAXAAAAGAAAAHQAAABOMTJfR0xPQkFMX19OXzExNml0YW5pdW1fZGVtYW5nbGUxMkluaXRMaXN0RXhwckUAAAAATBMAAMgqAABoFQAAAAAAAGQrAAARAAAAEgAAABMAAAAUAAAAdQAAABYAAAAXAAAAGAAAAHYAAABOMTJfR0xPQkFMX19OXzExNml0YW5pdW1fZGVtYW5nbGUxMVBvc3RmaXhFeHByRQBMEwAANCsAAGgVAABudwBuYQBwaQAAAAAAAAAA1CsAABEAAAASAAAAEwAAABQAAAB3AAAAFgAAABcAAAAYAAAAeAAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTdOZXdFeHByRQAATBMAAKgrAABoFQAAOjpvcGVyYXRvciAAbmV3AAAAAABQLAAAEQAAABIAAAATAAAAFAAAAHkAAAAWAAAAFwAAABgAAAB6AAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTNFbmNsb3NpbmdFeHByRQAAAEwTAAAcLAAAaBUAAAAAAAC8LAAAEQAAABIAAAATAAAAFAAAAHsAAAAWAAAAFwAAABgAAAB8AAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTVDb25kaXRpb25hbEV4cHJFAEwTAACILAAAaBUAACkgPyAoACkgOiAoAAAAAAA4LQAAEQAAABIAAAATAAAAFAAAAH0AAAAWAAAAFwAAABgAAAB+AAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTlTaXplb2ZQYXJhbVBhY2tFeHByRQBMEwAAAC0AAGgVAABzaXplb2YuLi4oAAAAAAAAsC0AABEAAAASAAAAEwAAABQAAAB/AAAAFgAAABcAAAAYAAAAgAAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTEzTm9kZUFycmF5Tm9kZUUAAABMEwAAfC0AAGgVAAAAAAAAGC4AABEAAAASAAAAEwAAABQAAACBAAAAFgAAABcAAAAYAAAAggAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTlUaHJvd0V4cHJFAAAAAEwTAADoLQAAaBUAAHRocm93IAAAAAAAAIguAAARAAAAEgAAABMAAAAUAAAAgwAAABYAAAAXAAAAGAAAAIQAAABOMTJfR0xPQkFMX19OXzExNml0YW5pdW1fZGVtYW5nbGUxMFVVSURPZkV4cHJFAABMEwAAWC4AAGgVAABfX3V1aWRvZigAAAAAAAAADC8AABEAAAASAAAAEwAAABQAAACFAAAAFgAAAIYAAAAYAAAAhwAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTI3RXhwYW5kZWRTcGVjaWFsU3Vic3RpdHV0aW9uRQBMEwAAzC4AAGgVAABzdGQ6OmFsbG9jYXRvcgBzdGQ6OmJhc2ljX3N0cmluZwBzdGQ6OmJhc2ljX3N0cmluZzxjaGFyLCBzdGQ6OmNoYXJfdHJhaXRzPGNoYXI+LCBzdGQ6OmFsbG9jYXRvcjxjaGFyPiA+AHN0ZDo6YmFzaWNfaXN0cmVhbTxjaGFyLCBzdGQ6OmNoYXJfdHJhaXRzPGNoYXI+ID4Ac3RkOjpiYXNpY19vc3RyZWFtPGNoYXIsIHN0ZDo6Y2hhcl90cmFpdHM8Y2hhcj4gPgBzdGQ6OmJhc2ljX2lvc3RyZWFtPGNoYXIsIHN0ZDo6Y2hhcl90cmFpdHM8Y2hhcj4gPgBhbGxvY2F0b3IAYmFzaWNfc3RyaW5nAGJhc2ljX2lzdHJlYW0AYmFzaWNfb3N0cmVhbQBiYXNpY19pb3N0cmVhbQAAAAAAAAAAvDAAABEAAAASAAAAEwAAABQAAACIAAAAFgAAABcAAAAYAAAAiQAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTEyQ3RvckR0b3JOYW1lRQAAAABMEwAAiDAAAGgVAAAAAAAAJDEAABEAAAASAAAAEwAAABQAAACKAAAAFgAAABcAAAAYAAAAiwAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTEwQWJpVGFnQXR0ckUAAEwTAAD0MAAAaBUAAFthYmk6AERDAAAAAAAAAACkMQAAEQAAABIAAAATAAAAFAAAAIwAAAAWAAAAFwAAABgAAACNAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMjFTdHJ1Y3R1cmVkQmluZGluZ05hbWVFAAAATBMAAGgxAABoFQAAc3RyaW5nIGxpdGVyYWwAAAAAAAAcMgAAEQAAABIAAAATAAAAFAAAAI4AAAAWAAAAFwAAABgAAACPAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlOUxvY2FsTmFtZUUAAAAATBMAAOwxAABoFQAAAAAAAIwyAAARAAAAEgAAABMAAAAUAAAAkAAAABYAAACRAAAAGAAAAJIAAABOMTJfR0xPQkFMX19OXzExNml0YW5pdW1fZGVtYW5nbGUxOVNwZWNpYWxTdWJzdGl0dXRpb25FAEwTAABUMgAAaBUAAHN0ZDo6c3RyaW5nAHN0ZDo6aXN0cmVhbQBzdGQ6Om9zdHJlYW0Ac3RkOjppb3N0cmVhbQBzdHJpbmcAaXN0cmVhbQBvc3RyZWFtAGlvc3RyZWFtAAAAAABMMwAAkwAAAJQAAACVAAAAlgAAAJcAAACYAAAAFwAAABgAAACZAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTNQYXJhbWV0ZXJQYWNrRQAAAEwTAAAYMwAAaBUAAAAAAAC4MwAAEQAAABIAAAATAAAAFAAAAJoAAAAWAAAAFwAAABgAAACbAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTJUZW1wbGF0ZUFyZ3NFAAAAAEwTAACEMwAAaBUAAAAAAAAsNAAAEQAAABIAAAATAAAAFAAAAJwAAAAWAAAAnQAAABgAAACeAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMjBOYW1lV2l0aFRlbXBsYXRlQXJnc0UAAAAATBMAAPAzAABoFQAAU3RMAAAAAACgNAAAEQAAABIAAAATAAAAFAAAAJ8AAAAWAAAAoAAAABgAAAChAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTZTdGRRdWFsaWZpZWROYW1lRQAAAABMEwAAaDQAAGgVAABzdGQ6OgAAAAAAAAAcNQAAEQAAABIAAAATAAAAFAAAAKIAAAAWAAAAFwAAABgAAACjAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMjBUZW1wbGF0ZUFyZ3VtZW50UGFja0UAAAAATBMAAOA0AABoFQAAAAAAAIg1AAARAAAAEgAAABMAAAAUAAAApAAAABYAAAAXAAAAGAAAAKUAAABOMTJfR0xPQkFMX19OXzExNml0YW5pdW1fZGVtYW5nbGUxMkVuYWJsZUlmQXR0ckUAAAAATBMAAFQ1AABoFQAAIFtlbmFibGVfaWY6AAAAAAAAAAAINgAApgAAABIAAACnAAAAFAAAAKgAAACpAAAAFwAAABgAAACqAAAATjEyX0dMT0JBTF9fTl8xMTZpdGFuaXVtX2RlbWFuZ2xlMTZGdW5jdGlvbkVuY29kaW5nRQAAAABMEwAA0DUAAGgVAAAgY29uc3QAIHZvbGF0aWxlACByZXN0cmljdAAgJgAgJiYAAAAAAAAAlDYAABEAAAASAAAAEwAAABQAAACrAAAAFgAAABcAAAAYAAAArAAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTlEb3RTdWZmaXhFAAAAAEwTAABkNgAAaBUAAHZvaWQAYm9vbABpbnQAdW5zaWduZWQgaW50AGxvbmcAdW5zaWduZWQgbG9uZwBsb25nIGxvbmcAdW5zaWduZWQgbG9uZyBsb25nAGZsb2F0AGRvdWJsZQBsb25nIGRvdWJsZQBfX2Zsb2F0MTI4AGRlY2ltYWw2NABkZWNpbWFsMTI4AGRlY2ltYWwzMgBkZWNpbWFsMTYAY2hhcjMyX3QAY2hhcjE2X3QAY2hhcjhfdABkZWNsdHlwZShhdXRvKQBzdGQ6Om51bGxwdHJfdAAgY29tcGxleAAgaW1hZ2luYXJ5AERvAG5vZXhjZXB0AERPAER3AER4AFJFAE9FAAAAAAAAADgAABEAAAASAAAAEwAAABQAAACtAAAAFgAAABcAAAAYAAAArgAAAE4xMl9HTE9CQUxfX05fMTE2aXRhbml1bV9kZW1hbmdsZTEyTm9leGNlcHRTcGVjRQAAAABMEwAAzDcAAGgVAABub2V4Y2VwdCgAAAAAAAAAgDgAABEAAAASAAAAEwAAABQAAACvAAAAFgAAABcA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";function se(e){try{if(e==ae&&y)return new Uint8Array(y);var t=fe(e);if(t)return t;if(p)return p(e);throw"both async and sync fetching of the wasm failed"}catch(e){J(e)}}function le(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?N.get(r)():N.get(r)(n.arg):r(void 0===n.arg?null:n.arg)}else n(t)}}function ce(e){if(ce.recursionGuard=1+(0|ce.recursionGuard),ce.recursionGuard>1)return e;var n=t.___cxa_demangle||t.__cxa_demangle;E(n);var r=me();try{var o=e;o.startsWith("__Z")&&(o=o.substr(1));var i=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(o)+1,a=ve(i);P(o,a,i);var s=ve(4),l=n(a,0,0,s);if(0===D[s>>2]&&l)return R(l)}catch(e){}finally{ge(l),ye(r),ce.recursionGuard<2&&--ce.recursionGuard}return e}function ue(e){try{return v.grow(e-B.byteLength+65535>>>16),O(v.buffer),1}catch(t){console.error("emscripten_realloc_buffer: Attempted to grow heap from "+B.byteLength+" bytes to "+e+" bytes, but got error: "+t)}}function de(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r>255&&(E(!1,"Character code "+r+" ("+String.fromCharCode(r)+")  at offset "+n+" not in 0x00-0xFF."),r&=255),t.push(String.fromCharCode(r))}return t.join("")}te(ae)||(ae=function(e){return t.locateFile?t.locateFile(e,m):m+e}(ae));var Ae="function"==typeof atob?atob:function(e){var t,n,r,o,i,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=s.indexOf(e.charAt(c++))<<2|(o=s.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(i=s.indexOf(e.charAt(c++)))>>2,r=(3&i)<<6|(a=s.indexOf(e.charAt(c++))),l+=String.fromCharCode(t),64!==i&&(l+=String.fromCharCode(n)),64!==a&&(l+=String.fromCharCode(r))}while(c<e.length);return l};function fe(e){if(te(e))return function(e){if("boolean"==typeof c&&c){var t;try{t=Buffer.from(e,"base64")}catch(n){t=new Buffer(e,"base64")}return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}try{for(var n=Ae(e),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}catch(e){throw new Error("Converting base64 string to bytes failed.")}}(e.slice(ee.length))}var pe={emscripten_memcpy_big:function(e,t,n){_.copyWithin(e,t,t+n)},emscripten_resize_heap:function(e){var t=_.length;E(e>t);var n,r=2147483648;if(e>r)return b("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is 2147483648 bytes!"),!1;for(var o=1;o<=4;o*=2){var i=t*(1+.2/o);i=Math.min(i,e+100663296);var a=Math.min(r,((n=Math.max(e,i))%65536>0&&(n+=65536-n%65536),n));if(ue(a))return!0}return b("Failed to grow the heap from "+t+" bytes to "+a+" bytes, not enough memory!"),!1},setTempRet0:function(e){}};!function(){var e={env:pe,wasi_snapshot_preview1:pe};function n(e,n){var r=e.exports;t.asm=r,E(v=t.asm.memory,"memory not found in wasm exports"),O(v.buffer),E(N=t.asm.__indirect_function_table,"table not found in wasm exports"),function(e){if(Y--,t.monitorRunDependencies&&t.monitorRunDependencies(Y),e?(E(K[e]),delete K[e]):b("warning: run dependency removed without ID"),0==Y&&(null!==X&&(clearInterval(X),X=null),W)){var n=W;W=null,n()}}("wasm-instantiate")}!function(e){Y++,t.monitorRunDependencies&&t.monitorRunDependencies(Y),e?(E(!K[e]),K[e]=1,null===X&&"undefined"!=typeof setInterval&&(X=setInterval((function(){if(I)return clearInterval(X),void(X=null);var e=!1;for(var t in K)e||(e=!0,b("still waiting on run dependencies:")),b("dependency: "+t);e&&b("(end of list)")}),1e4))):b("warning: run dependency added without ID")}("wasm-instantiate");var r=t;function o(e){E(t===r,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),r=null,n(e.instance)}function a(t){return function(){if(!y&&(s||l)){if("function"==typeof fetch&&!ne(ae))return fetch(ae,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ae+"'";return e.arrayBuffer()})).catch((function(){return se(ae)}));if(f)return new Promise((function(e,t){f(ae,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return se(ae)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){b("failed to asynchronously prepare wasm: "+e),ne(ae)&&b("warning: Loading from a file URI ("+ae+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),J(e)}))}if(t.instantiateWasm)try{return t.instantiateWasm(e,n)}catch(e){return b("Module.instantiateWasm callback failed with error: "+e),!1}(y||"function"!=typeof WebAssembly.instantiateStreaming||te(ae)||ne(ae)||"function"!=typeof fetch?a(o):fetch(ae,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(o,(function(e){return b("wasm streaming compile failed: "+e),b("falling back to ArrayBuffer instantiation"),a(o)}))}))).catch(i)}();var he=t.___wasm_call_ctors=re("__wasm_call_ctors");t._malloc=re("malloc");var ge=t._free=re("free");t._ZSTD_isError=re("ZSTD_isError"),t._ZSTD_getErrorName=re("ZSTD_getErrorName"),t._ZSTD_getFrameContentSize=re("ZSTD_getFrameContentSize"),t._ZSTD_decompress=re("ZSTD_decompress"),t._ZSTD_createDStream=re("ZSTD_createDStream"),t._ZSTD_freeDStream=re("ZSTD_freeDStream"),t._ZSTD_DStreamInSize=re("ZSTD_DStreamInSize"),t._ZSTD_DStreamOutSize=re("ZSTD_DStreamOutSize"),t._ZSTD_initDStream=re("ZSTD_initDStream"),t._ZSTD_decompressStream_simpleArgs=re("ZSTD_decompressStream_simpleArgs"),t.___errno_location=re("__errno_location"),t._fflush=re("fflush");var me=t.stackSave=re("stackSave"),ye=t.stackRestore=re("stackRestore"),ve=t.stackAlloc=re("stackAlloc"),be=t._emscripten_stack_init=function(){return(be=t._emscripten_stack_init=t.asm.emscripten_stack_init).apply(null,arguments)};t._emscripten_stack_get_free=function(){return(t._emscripten_stack_get_free=t.asm.emscripten_stack_get_free).apply(null,arguments)};var Ce,Ie=t._emscripten_stack_get_end=function(){return(Ie=t._emscripten_stack_get_end=t.asm.emscripten_stack_get_end).apply(null,arguments)};function Ee(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function xe(e){function n(){Ce||(Ce=!0,t.calledRun=!0,I||(G(),E(!q),q=!0,le(z),G(),le(H),o(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),E(!t._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(G(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)e=t.postRun.shift(),V.unshift(e);var e;le(V)}()))}Y>0||(be(),U(),function(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)e=t.preRun.shift(),j.unshift(e);var e;le(j)}(),Y>0||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),n()}),1)):n(),G()))}if(t.___cxa_demangle=re("__cxa_demangle"),Object.getOwnPropertyDescriptor(t,"intArrayFromString")||(t.intArrayFromString=function(){J("'intArrayFromString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"intArrayToString")||(t.intArrayToString=function(){J("'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ccall")||(t.ccall=function(){J("'ccall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.cwrap=function(e,t,n,r){return function(){return x(e,t,n,arguments)}},t.setValue=function(e,t,n,r){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":w[e|0]=t;break;case"i16":S[e>>1]=t;break;case"i32":D[e>>2]=t;break;case"i64":ie=[t>>>0,(oe=t,+Math.abs(oe)>=1?oe>0?(0|Math.min(+Math.floor(oe/4294967296),4294967295))>>>0:~~+Math.ceil((oe-+(~~oe>>>0))/4294967296)>>>0:0)],D[e>>2]=ie[0],D[e+4>>2]=ie[1];break;case"float":k[e>>2]=t;break;case"double":Q[e>>3]=t;break;default:J("invalid type for setValue: "+n)}},t.getValue=function(e,t,n){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return w[e|0];case"i16":return S[e>>1];case"i32":case"i64":return D[e>>2];case"float":return k[e>>2];case"double":return Q[e>>3];default:J("invalid type for getValue: "+t)}return null},Object.getOwnPropertyDescriptor(t,"allocate")||(t.allocate=function(){J("'allocate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF8ArrayToString")||(t.UTF8ArrayToString=function(){J("'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF8ToString")||(t.UTF8ToString=function(){J("'UTF8ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF8Array")||(t.stringToUTF8Array=function(){J("'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF8")||(t.stringToUTF8=function(){J("'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF8")||(t.lengthBytesUTF8=function(){J("'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackTrace")||(t.stackTrace=function(){J("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnPreRun")||(t.addOnPreRun=function(){J("'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.addOnInit=function(e){z.unshift(e)},Object.getOwnPropertyDescriptor(t,"addOnPreMain")||(t.addOnPreMain=function(){J("'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnExit")||(t.addOnExit=function(){J("'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnPostRun")||(t.addOnPostRun=function(){J("'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeStringToMemory")||(t.writeStringToMemory=function(){J("'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeArrayToMemory")||(t.writeArrayToMemory=function(){J("'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeAsciiToMemory")||(t.writeAsciiToMemory=function(){J("'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addRunDependency")||(t.addRunDependency=function(){J("'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"removeRunDependency")||(t.removeRunDependency=function(){J("'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createFolder")||(t.FS_createFolder=function(){J("'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"FS_createPath")||(t.FS_createPath=function(){J("'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createDataFile")||(t.FS_createDataFile=function(){J("'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createPreloadedFile")||(t.FS_createPreloadedFile=function(){J("'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createLazyFile")||(t.FS_createLazyFile=function(){J("'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createLink")||(t.FS_createLink=function(){J("'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"FS_createDevice")||(t.FS_createDevice=function(){J("'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_unlink")||(t.FS_unlink=function(){J("'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"getLEB")||(t.getLEB=function(){J("'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getFunctionTables")||(t.getFunctionTables=function(){J("'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"alignFunctionTables")||(t.alignFunctionTables=function(){J("'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerFunctions")||(t.registerFunctions=function(){J("'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addFunction")||(t.addFunction=function(){J("'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"removeFunction")||(t.removeFunction=function(){J("'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getFuncWrapper")||(t.getFuncWrapper=function(){J("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"prettyPrint")||(t.prettyPrint=function(){J("'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"makeBigInt")||(t.makeBigInt=function(){J("'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"dynCall")||(t.dynCall=function(){J("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getCompilerSetting")||(t.getCompilerSetting=function(){J("'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"print")||(t.print=function(){J("'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"printErr")||(t.printErr=function(){J("'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getTempRet0")||(t.getTempRet0=function(){J("'getTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setTempRet0")||(t.setTempRet0=function(){J("'setTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"callMain")||(t.callMain=function(){J("'callMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"abort")||(t.abort=function(){J("'abort' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToNewUTF8")||(t.stringToNewUTF8=function(){J("'stringToNewUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setFileTime")||(t.setFileTime=function(){J("'setFileTime' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscripten_realloc_buffer")||(t.emscripten_realloc_buffer=function(){J("'emscripten_realloc_buffer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ENV")||(t.ENV=function(){J("'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ERRNO_CODES")||(t.ERRNO_CODES=function(){J("'ERRNO_CODES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ERRNO_MESSAGES")||(t.ERRNO_MESSAGES=function(){J("'ERRNO_MESSAGES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setErrNo")||(t.setErrNo=function(){J("'setErrNo' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readSockaddr")||(t.readSockaddr=function(){J("'readSockaddr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeSockaddr")||(t.writeSockaddr=function(){J("'writeSockaddr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"DNS")||(t.DNS=function(){J("'DNS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getHostByName")||(t.getHostByName=function(){J("'getHostByName' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GAI_ERRNO_MESSAGES")||(t.GAI_ERRNO_MESSAGES=function(){J("'GAI_ERRNO_MESSAGES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"Protocols")||(t.Protocols=function(){J("'Protocols' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"Sockets")||(t.Sockets=function(){J("'Sockets' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getRandomDevice")||(t.getRandomDevice=function(){J("'getRandomDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"traverseStack")||(t.traverseStack=function(){J("'traverseStack' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UNWIND_CACHE")||(t.UNWIND_CACHE=function(){J("'UNWIND_CACHE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"withBuiltinMalloc")||(t.withBuiltinMalloc=function(){J("'withBuiltinMalloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readAsmConstArgsArray")||(t.readAsmConstArgsArray=function(){J("'readAsmConstArgsArray' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readAsmConstArgs")||(t.readAsmConstArgs=function(){J("'readAsmConstArgs' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"mainThreadEM_ASM")||(t.mainThreadEM_ASM=function(){J("'mainThreadEM_ASM' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"jstoi_q")||(t.jstoi_q=function(){J("'jstoi_q' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"jstoi_s")||(t.jstoi_s=function(){J("'jstoi_s' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getExecutableName")||(t.getExecutableName=function(){J("'getExecutableName' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"listenOnce")||(t.listenOnce=function(){J("'listenOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"autoResumeAudioContext")||(t.autoResumeAudioContext=function(){J("'autoResumeAudioContext' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"dynCallLegacy")||(t.dynCallLegacy=function(){J("'dynCallLegacy' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getDynCaller")||(t.getDynCaller=function(){J("'getDynCaller' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"dynCall")||(t.dynCall=function(){J("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"callRuntimeCallbacks")||(t.callRuntimeCallbacks=function(){J("'callRuntimeCallbacks' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"abortStackOverflow")||(t.abortStackOverflow=function(){J("'abortStackOverflow' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"reallyNegative")||(t.reallyNegative=function(){J("'reallyNegative' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"unSign")||(t.unSign=function(){J("'unSign' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"reSign")||(t.reSign=function(){J("'reSign' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"formatString")||(t.formatString=function(){J("'formatString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"PATH")||(t.PATH=function(){J("'PATH' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"PATH_FS")||(t.PATH_FS=function(){J("'PATH_FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SYSCALLS")||(t.SYSCALLS=function(){J("'SYSCALLS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"syscallMmap2")||(t.syscallMmap2=function(){J("'syscallMmap2' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"syscallMunmap")||(t.syscallMunmap=function(){J("'syscallMunmap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getSocketFromFD")||(t.getSocketFromFD=function(){J("'getSocketFromFD' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getSocketAddress")||(t.getSocketAddress=function(){J("'getSocketAddress' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"JSEvents")||(t.JSEvents=function(){J("'JSEvents' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerKeyEventCallback")||(t.registerKeyEventCallback=function(){J("'registerKeyEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"specialHTMLTargets")||(t.specialHTMLTargets=function(){J("'specialHTMLTargets' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"maybeCStringToJsString")||(t.maybeCStringToJsString=function(){J("'maybeCStringToJsString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"findEventTarget")||(t.findEventTarget=function(){J("'findEventTarget' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"findCanvasEventTarget")||(t.findCanvasEventTarget=function(){J("'findCanvasEventTarget' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getBoundingClientRect")||(t.getBoundingClientRect=function(){J("'getBoundingClientRect' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillMouseEventData")||(t.fillMouseEventData=function(){J("'fillMouseEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerMouseEventCallback")||(t.registerMouseEventCallback=function(){J("'registerMouseEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerWheelEventCallback")||(t.registerWheelEventCallback=function(){J("'registerWheelEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerUiEventCallback")||(t.registerUiEventCallback=function(){J("'registerUiEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerFocusEventCallback")||(t.registerFocusEventCallback=function(){J("'registerFocusEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillDeviceOrientationEventData")||(t.fillDeviceOrientationEventData=function(){J("'fillDeviceOrientationEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerDeviceOrientationEventCallback")||(t.registerDeviceOrientationEventCallback=function(){J("'registerDeviceOrientationEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillDeviceMotionEventData")||(t.fillDeviceMotionEventData=function(){J("'fillDeviceMotionEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerDeviceMotionEventCallback")||(t.registerDeviceMotionEventCallback=function(){J("'registerDeviceMotionEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"screenOrientation")||(t.screenOrientation=function(){J("'screenOrientation' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillOrientationChangeEventData")||(t.fillOrientationChangeEventData=function(){J("'fillOrientationChangeEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerOrientationChangeEventCallback")||(t.registerOrientationChangeEventCallback=function(){J("'registerOrientationChangeEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillFullscreenChangeEventData")||(t.fillFullscreenChangeEventData=function(){J("'fillFullscreenChangeEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerFullscreenChangeEventCallback")||(t.registerFullscreenChangeEventCallback=function(){J("'registerFullscreenChangeEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerRestoreOldStyle")||(t.registerRestoreOldStyle=function(){J("'registerRestoreOldStyle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"hideEverythingExceptGivenElement")||(t.hideEverythingExceptGivenElement=function(){J("'hideEverythingExceptGivenElement' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"restoreHiddenElements")||(t.restoreHiddenElements=function(){J("'restoreHiddenElements' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setLetterbox")||(t.setLetterbox=function(){J("'setLetterbox' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"currentFullscreenStrategy")||(t.currentFullscreenStrategy=function(){J("'currentFullscreenStrategy' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"restoreOldWindowedStyle")||(t.restoreOldWindowedStyle=function(){J("'restoreOldWindowedStyle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"softFullscreenResizeWebGLRenderTarget")||(t.softFullscreenResizeWebGLRenderTarget=function(){J("'softFullscreenResizeWebGLRenderTarget' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"doRequestFullscreen")||(t.doRequestFullscreen=function(){J("'doRequestFullscreen' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillPointerlockChangeEventData")||(t.fillPointerlockChangeEventData=function(){J("'fillPointerlockChangeEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerPointerlockChangeEventCallback")||(t.registerPointerlockChangeEventCallback=function(){J("'registerPointerlockChangeEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerPointerlockErrorEventCallback")||(t.registerPointerlockErrorEventCallback=function(){J("'registerPointerlockErrorEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"requestPointerLock")||(t.requestPointerLock=function(){J("'requestPointerLock' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillVisibilityChangeEventData")||(t.fillVisibilityChangeEventData=function(){J("'fillVisibilityChangeEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerVisibilityChangeEventCallback")||(t.registerVisibilityChangeEventCallback=function(){J("'registerVisibilityChangeEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerTouchEventCallback")||(t.registerTouchEventCallback=function(){J("'registerTouchEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillGamepadEventData")||(t.fillGamepadEventData=function(){J("'fillGamepadEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerGamepadEventCallback")||(t.registerGamepadEventCallback=function(){J("'registerGamepadEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerBeforeUnloadEventCallback")||(t.registerBeforeUnloadEventCallback=function(){J("'registerBeforeUnloadEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillBatteryEventData")||(t.fillBatteryEventData=function(){J("'fillBatteryEventData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"battery")||(t.battery=function(){J("'battery' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerBatteryEventCallback")||(t.registerBatteryEventCallback=function(){J("'registerBatteryEventCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setCanvasElementSize")||(t.setCanvasElementSize=function(){J("'setCanvasElementSize' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getCanvasElementSize")||(t.getCanvasElementSize=function(){J("'getCanvasElementSize' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"polyfillSetImmediate")||(t.polyfillSetImmediate=function(){J("'polyfillSetImmediate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"demangle")||(t.demangle=function(){J("'demangle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"demangleAll")||(t.demangleAll=function(){J("'demangleAll' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"jsStackTrace")||(t.jsStackTrace=function(){J("'jsStackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackTrace")||(t.stackTrace=function(){J("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getEnvStrings")||(t.getEnvStrings=function(){J("'getEnvStrings' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"checkWasiClock")||(t.checkWasiClock=function(){J("'checkWasiClock' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"flush_NO_FILESYSTEM")||(t.flush_NO_FILESYSTEM=function(){J("'flush_NO_FILESYSTEM' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToI64")||(t.writeI53ToI64=function(){J("'writeI53ToI64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToI64Clamped")||(t.writeI53ToI64Clamped=function(){J("'writeI53ToI64Clamped' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToI64Signaling")||(t.writeI53ToI64Signaling=function(){J("'writeI53ToI64Signaling' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToU64Clamped")||(t.writeI53ToU64Clamped=function(){J("'writeI53ToU64Clamped' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToU64Signaling")||(t.writeI53ToU64Signaling=function(){J("'writeI53ToU64Signaling' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readI53FromI64")||(t.readI53FromI64=function(){J("'readI53FromI64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readI53FromU64")||(t.readI53FromU64=function(){J("'readI53FromU64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"convertI32PairToI53")||(t.convertI32PairToI53=function(){J("'convertI32PairToI53' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"convertU32PairToI53")||(t.convertU32PairToI53=function(){J("'convertU32PairToI53' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"uncaughtExceptionCount")||(t.uncaughtExceptionCount=function(){J("'uncaughtExceptionCount' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exceptionLast")||(t.exceptionLast=function(){J("'exceptionLast' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exceptionCaught")||(t.exceptionCaught=function(){J("'exceptionCaught' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ExceptionInfoAttrs")||(t.ExceptionInfoAttrs=function(){J("'ExceptionInfoAttrs' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ExceptionInfo")||(t.ExceptionInfo=function(){J("'ExceptionInfo' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"CatchInfo")||(t.CatchInfo=function(){J("'CatchInfo' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exception_addRef")||(t.exception_addRef=function(){J("'exception_addRef' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exception_decRef")||(t.exception_decRef=function(){J("'exception_decRef' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"Browser")||(t.Browser=function(){J("'Browser' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"funcWrappers")||(t.funcWrappers=function(){J("'funcWrappers' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getFuncWrapper")||(t.getFuncWrapper=function(){J("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setMainLoop")||(t.setMainLoop=function(){J("'setMainLoop' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"FS")||(t.FS=function(){J("'FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"mmapAlloc")||(t.mmapAlloc=function(){J("'mmapAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"MEMFS")||(t.MEMFS=function(){J("'MEMFS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"TTY")||(t.TTY=function(){J("'TTY' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"PIPEFS")||(t.PIPEFS=function(){J("'PIPEFS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SOCKFS")||(t.SOCKFS=function(){J("'SOCKFS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"_setNetworkCallback")||(t._setNetworkCallback=function(){J("'_setNetworkCallback' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"tempFixedLengthArray")||(t.tempFixedLengthArray=function(){J("'tempFixedLengthArray' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"miniTempWebGLFloatBuffers")||(t.miniTempWebGLFloatBuffers=function(){J("'miniTempWebGLFloatBuffers' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"heapObjectForWebGLType")||(t.heapObjectForWebGLType=function(){J("'heapObjectForWebGLType' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"heapAccessShiftForWebGLHeap")||(t.heapAccessShiftForWebGLHeap=function(){J("'heapAccessShiftForWebGLHeap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GL")||(t.GL=function(){J("'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscriptenWebGLGet")||(t.emscriptenWebGLGet=function(){J("'emscriptenWebGLGet' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"computeUnpackAlignedImageSize")||(t.computeUnpackAlignedImageSize=function(){J("'computeUnpackAlignedImageSize' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscriptenWebGLGetTexPixelData")||(t.emscriptenWebGLGetTexPixelData=function(){J("'emscriptenWebGLGetTexPixelData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscriptenWebGLGetUniform")||(t.emscriptenWebGLGetUniform=function(){J("'emscriptenWebGLGetUniform' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscriptenWebGLGetVertexAttrib")||(t.emscriptenWebGLGetVertexAttrib=function(){J("'emscriptenWebGLGetVertexAttrib' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeGLArray")||(t.writeGLArray=function(){J("'writeGLArray' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"AL")||(t.AL=function(){J("'AL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL_unicode")||(t.SDL_unicode=function(){J("'SDL_unicode' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL_ttfContext")||(t.SDL_ttfContext=function(){J("'SDL_ttfContext' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL_audio")||(t.SDL_audio=function(){J("'SDL_audio' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL")||(t.SDL=function(){J("'SDL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL_gfx")||(t.SDL_gfx=function(){J("'SDL_gfx' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GLUT")||(t.GLUT=function(){J("'GLUT' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"EGL")||(t.EGL=function(){J("'EGL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GLFW_Window")||(t.GLFW_Window=function(){J("'GLFW_Window' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GLFW")||(t.GLFW=function(){J("'GLFW' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GLEW")||(t.GLEW=function(){J("'GLEW' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"IDBStore")||(t.IDBStore=function(){J("'IDBStore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"runAndAbortIfError")||(t.runAndAbortIfError=function(){J("'runAndAbortIfError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"warnOnce")||(t.warnOnce=function(){J("'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackSave")||(t.stackSave=function(){J("'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackRestore")||(t.stackRestore=function(){J("'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackAlloc")||(t.stackAlloc=function(){J("'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"AsciiToString")||(t.AsciiToString=function(){J("'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToAscii")||(t.stringToAscii=function(){J("'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF16ToString")||(t.UTF16ToString=function(){J("'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF16")||(t.stringToUTF16=function(){J("'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF16")||(t.lengthBytesUTF16=function(){J("'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF32ToString")||(t.UTF32ToString=function(){J("'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF32")||(t.stringToUTF32=function(){J("'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF32")||(t.lengthBytesUTF32=function(){J("'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"allocateUTF8")||(t.allocateUTF8=function(){J("'allocateUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"allocateUTF8OnStack")||(t.allocateUTF8OnStack=function(){J("'allocateUTF8OnStack' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.writeStackCookie=U,t.checkStackCookie=G,Object.getOwnPropertyDescriptor(t,"intArrayFromBase64")||(t.intArrayFromBase64=function(){J("'intArrayFromBase64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"tryParseAsDataURI")||(t.tryParseAsDataURI=function(){J("'tryParseAsDataURI' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.ALLOC_NORMAL=0,t.ALLOC_STACK=1,W=function e(){Ce||xe(),Ce||(W=e)},t.run=xe,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return xe(),e.ready});e.exports=o})),JYe=Object.freeze(Object.assign(Object.create(null),KYe,{default:KYe})),ZYe=function(e,t,n){this.positionPtr=e,this.size=t,this.dataPtr=n},$Ye=(function(){function e(e){this.zstdGetErrorName=e.cwrap("ZSTD_getErrorName","string",["number"]),this.zstdIsError=e.cwrap("ZSTD_isError","number",["number"])}e.prototype.checkError=function(e){if(e<0)throw new Error("ZSTD_ERROR: "+this.zstdGetErrorName(e)+",  error code: "+e)}}(),null),eXe=null,tXe=function(){return!!$Ye&&!!eXe},nXe=function(){function e(){}return e.decompress=function(t){if(!tXe())throw new Error("Error: Zstd library not initialized. Please call the ZstdInit before usages");e.isDecompressInit||(e.initDecompressFunctions(),e.isDecompressInit=!0);var n,r=$Ye._malloc(e.inputSize*t.BYTES_PER_ELEMENT),o=$Ye._malloc(e.outputSize*t.BYTES_PER_ELEMENT),i=e.zstdCreateDStream();if(!i)throw $Ye._free(r),$Ye._free(o),new Error("ZSTD Stream decompress initialization failed.");n=e.zstdInitDStream(i);var a=0,s=$Ye._malloc(e.positionSize),l=$Ye._malloc(e.positionSize),c=new Uint8Array([]);try{for(;a<t.length;){var u=e.calculateReadBytes(a,n,t);$Ye.HEAPU8.set(t.subarray(a,a+u),r),a+=u;for(var d=u<n,A=new ZYe(s,u,r);$Ye.getValue(A.positionPtr,"i32")<A.size;){var f=new ZYe(l,e.outputSize,o);$Ye.setValue(f.positionPtr,0,"i32"),$Ye.setValue(A.positionPtr,0,"i32"),n=e.zstdDecompressStreamSimpleArgs(i,f.dataPtr,f.size,f.positionPtr,A.dataPtr,A.size,A.positionPtr),eXe.checkError(n),c=e.getDataFromTransformation(f,c)}if($Ye.setValue(A.positionPtr,0,"i32"),d)break}}finally{e.zstdFreeDStream(i),$Ye._free(r),$Ye._free(o),$Ye._free(s),$Ye._free(l)}return c},e.getDataFromTransformation=function(e,t){var n=$Ye.HEAPU8.subarray(e.dataPtr,e.dataPtr+$Ye.getValue(e.positionPtr,"i32")),r=new Uint8Array(t.length+n.length);return r.set(t),r.set(n,t.length),r},e.initDecompressFunctions=function(){e.zstdDStreamInSize=$Ye.cwrap("ZSTD_DStreamInSize","number",[]),e.zstdDStreamOutSize=$Ye.cwrap("ZSTD_DStreamOutSize","number",[]),e.zstdCreateDStream=$Ye.cwrap("ZSTD_createDStream","number",[]),e.zstdInitDStream=$Ye.cwrap("ZSTD_initDStream","number",["number"]),e.zstdDecompressStreamSimpleArgs=$Ye.cwrap("ZSTD_decompressStream_simpleArgs","number",["number","number","number","number","number","number"]),e.zstdFreeDStream=$Ye.cwrap("ZSTD_freeDStream","number",["number"]),e.inputSize=e.zstdDStreamInSize(),e.outputSize=e.zstdDStreamOutSize()},e.positionSize=4,e.isDecompressInit=!1,e.calculateReadBytes=function(e,t,n){return Math.min(e+t,n.length)-e},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}YYe(t,e),t.compress=function(e,n,r){if(void 0===n&&(n=3),void 0===r&&(r=!1),!tXe())throw new Error("Error: Zstd library not initialized. Please call the ZstdInit before usages");t.isCompressInit||(t.initCompressFunctions(),t.isCompressInit=!0);var o,i=$Ye._malloc(t.inputSizeCo),a=$Ye._malloc(t.outputSizeCo);try{o=t.initCompressStream()}catch(e){throw $Ye._free(i),$Ye._free(a),new Error(e)}t.setCompressionLevel(o,n,r);var s=$Ye._malloc(t.positionSize),l=$Ye._malloc(t.positionSize),c=new Uint8Array([]),u=t.inputSizeCo,d=0;try{for(;d<e.length;){var A=t.calculateReadBytes(d,u,e);$Ye.HEAPU8.set(e.subarray(d,d+A),i),d+=A;var f=A<u,p=f?t.zstdEEnd:t.zstdEContinue,h=new ZYe(s,A,i),g=void 0;do{var m=new ZYe(l,t.outputSizeCo,a);$Ye.setValue(m.positionPtr,0,"i32"),$Ye.setValue(h.positionPtr,0,"i32");var y=t.zstdCompressStream2SimpleArgs(o,m.dataPtr,m.size,m.positionPtr,h.dataPtr,h.size,h.positionPtr,p);eXe.checkError(y),c=t.getDataFromTransformation(m,c),g=f?0===y:$Ye.getValue(h.positionPtr,"i32")===h.size}while(!g);if($Ye.setValue(h.positionPtr,0,"i32"),f)break}}finally{t.zstdFreeCStream(o),$Ye._free(i),$Ye._free(a),$Ye._free(s),$Ye._free(l)}return c},t.setCompressionLevel=function(e,n,r){eXe.checkError(t.zstdCCtxSetParameter(e,t.zstdCCompressionLevel,n)),eXe.checkError(t.zstdCCtxSetParameter(e,t.zstdCChecksumFlag,r)),t.zstdCCtxSetParameter(e,t.zstdCNbWorkers,4)},t.initCompressStream=function(){var e=t.zstdCreateCStream();if(t.zstdInitCStream(e),!e)throw new Error("ZSTD Stream compress initialization failed.");return e},t.initCompressFunctions=function(){t.zstdCStreamInSize=$Ye.cwrap("ZSTD_CStreamInSize","number",[]),t.zstdCStreamOutSize=$Ye.cwrap("ZSTD_CStreamOutSize","number",[]),t.zstdCreateCStream=$Ye.cwrap("ZSTD_createCStream","number",[]),t.zstdInitCStream=$Ye.cwrap("ZSTD_initCStream","number",["number"]),t.zstdCCtxSetParameter=$Ye.cwrap("ZSTD_CCtx_setParameter","number",["number","number","number"]),t.zstdCompressStream2SimpleArgs=$Ye.cwrap("ZSTD_compressStream2_simpleArgs","number",["number","number","number","number","number","number","number"]),t.zstdFreeCStream=$Ye.cwrap("ZSTD_freeCStream","number",["number"]),t.inputSizeCo=t.zstdCStreamInSize(),t.outputSizeCo=t.zstdCStreamOutSize()},t.zstdEContinue=1,t.zstdEEnd=2,t.zstdCCompressionLevel=100,t.zstdCChecksumFlag=201,t.zstdCNbWorkers=400,t.isCompressInit=!1}(nXe);var rXe=function(){function e(){}return e.decompress=function(t){if(!tXe())throw new Error("Error: Zstd library not initialized. Please call the ZstdInit before usages");e.isDecompressInit||(e.initDecompressFunctions(),e.isDecompressInit=!0);var n=t.length,r=e.createArrayPointer(t,n),o=e.zstdGetFrameContentSize(r,n),i=$Ye._malloc(o);eXe.checkError(o);try{var a=e.zstdDecompress(i,o,r,n);return eXe.checkError(a),new Uint8Array($Ye.HEAPU8.subarray(i,i+a-e.zstdFrameHeaderSizeMax))}finally{$Ye._free(r),$Ye._free(i)}},e.initDecompressFunctions=function(){e.zstdDecompress=$Ye.cwrap("ZSTD_decompress","number",["number","number","number","number"]),e.zstdGetFrameContentSize=$Ye.cwrap("ZSTD_getFrameContentSize","number",["number","number"])},e.createArrayPointer=function(e,t){var n=$Ye._malloc(t);return $Ye.HEAPU8.set(e,n),n},e.zstdFrameHeaderSizeMax=18,e.isDecompressInit=!1,e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}YYe(t,e),t.compress=function(e,n){if(void 0===n&&(n=3),!tXe())throw new Error("Error: Zstd library not initialized. Please call the ZstdInit before usages");if(t.isCompressInit||(t.initCompressFunctions(),t.isCompressInit=!0),e.length<=100)throw new Error("Length of the payload is too small. (Min length: >100)");var r=e.byteLength+t.zstdFrameHeaderSizeMax,o=t.createArrayPointer(e,r),i=$Ye._malloc(t.zstdCompressBound(e.length));try{var a=t.zstdCompress(i,t.zstdCompressBound(e.length),o,r,n);return eXe.checkError(a),new Uint8Array($Ye.HEAPU8.subarray(i,i+a))}finally{$Ye._free(o),$Ye._free(i)}},t.initCompressFunctions=function(){t.zstdCompress=$Ye.cwrap("ZSTD_compress","number",["number","number","number","number","number"]),t.zstdCompressBound=$Ye.cwrap("ZSTD_compressBound","number",["number"])},t.isCompressInit=!1}(rXe);"object"==typeof WebAssembly&&WebAssembly.instantiate;const oXe=e=>{const t={systemProps:{},otherProps:{}},n=e?.theme?.unstable_sxConfig??bMe;return Object.keys(e).forEach((r=>{n[r]?t.systemProps[r]=e[r]:t.otherProps[r]=e[r]})),t};function iXe(e){const{sx:t,...n}=e,{systemProps:r,otherProps:o}=oXe(n);let i;return i=Array.isArray(t)?[r,...t]:"function"===typeof t?function(){const e=t(...arguments);return hQe(e)?{...r,...e}:r}:{...r,...t},{...o,sx:i}}n(219);var aXe=rQe((function(e,t){var n=Zke([e.styles],void 0,F.useContext(oQe)),r=F.useRef();return tQe((function(){var e=t.key+"-global",o=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),i=!1,a=document.querySelector('style[data-emotion="'+e+" "+n.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),null!==a&&(i=!0,a.setAttribute("data-emotion",e),o.hydrate([a])),r.current=[o,i],function(){o.flush()}}),[t]),tQe((function(){var e=r.current,o=e[0];if(e[1])e[1]=!1;else{if(void 0!==n.next&&aQe(t,n.next,!0),o.tags.length){var i=o.tags[o.tags.length-1].nextElementSibling;o.before=i,o.flush()}t.insert("",n,o,!1)}}),[t,n.name]),null}));function sXe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zke(t)}var lXe=function(){var e=sXe.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function cXe(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,ct.jsx)(aXe,{styles:r})}const uXe=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const o=DPe(r),i="function"===typeof t?t(n&&o[n]||o):t;return(0,ct.jsx)(cXe,{styles:i})};const dXe=function(e){return(0,ct.jsx)(uXe,{...e,defaultTheme:VRe,themeId:qRe})};function AXe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t=>{let[,n]=t;return n&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!function(e){return"string"===typeof e.main}(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||"string"!==typeof e[n])return!1;return!0}(n,e)}}function fXe(e){return lPe("MuiTypography",e)}cPe("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const pXe={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},hXe=iXe,gXe=KRe("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t[`align${MTe(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})($Re((e=>{let{theme:t}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter((e=>{let[t,n]=e;return"inherit"!==t&&n&&"object"===typeof n})).map((e=>{let[t,n]=e;return{props:{variant:t},style:n}})),...Object.entries(t.palette).filter(AXe()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}})),...Object.entries(t.palette?.text||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[n]=e;return{props:{color:`text${MTe(n)}`},style:{color:(t.vars||t).palette.text[n]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),mXe={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},yXe=F.forwardRef((function(e,t){const{color:n,...r}=rPe({props:e,name:"MuiTypography"}),o=hXe({...r,...!pXe[n]&&{color:n}}),{align:i="inherit",className:a,component:s,gutterBottom:l=!1,noWrap:c=!1,paragraph:u=!1,variant:d="body1",variantMapping:A=mXe,...f}=o,p={...o,align:i,color:n,className:a,component:s,gutterBottom:l,noWrap:c,paragraph:u,variant:d,variantMapping:A},h=s||(u?"p":A[d]||mXe[d])||"span",g=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:o,variant:i,classes:a}=e;return TTe({root:["root",i,"inherit"!==e.align&&`align${MTe(t)}`,n&&"gutterBottom",r&&"noWrap",o&&"paragraph"]},fXe,a)})(p);return(0,ct.jsx)(gXe,{as:h,ref:t,className:DTe(g.root,a),...f,ownerState:p,style:{..."inherit"!==i&&{"--Typography-textAlign":i},...f.style}})})),vXe=yXe;function bXe(e){return lPe("MuiDialogTitle",e)}cPe("MuiDialogTitle",["root"]);const CXe=F.createContext({}),IXe=KRe(vXe,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),EXe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiDialogTitle"}),{className:r,id:o,...i}=n,a=n,s=(e=>{const{classes:t}=e;return TTe({root:["root"]},bXe,t)})(a),{titleId:l=o}=F.useContext(CXe);return(0,ct.jsx)(IXe,{component:"h2",className:DTe(s.root,r),ownerState:a,ref:t,variant:"h6",id:o??l,...i})})),xXe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function BXe(e){const t=[],n=[];return Array.from(e.querySelectorAll(xXe)).forEach(((e,r)=>{const o=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==o&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}(e))}(e)&&(0===o?t.push(e):n.push({documentOrder:r,tabIndex:o,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function wXe(){return!0}const _Xe=function(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:o=!1,getTabbable:i=BXe,isEnabled:a=wXe,open:s}=e,l=F.useRef(!1),c=F.useRef(null),u=F.useRef(null),d=F.useRef(null),A=F.useRef(null),f=F.useRef(!1),p=F.useRef(null),h=YPe(wPe(t),p),g=F.useRef(null);F.useEffect((()=>{s&&p.current&&(f.current=!n)}),[n,s]),F.useEffect((()=>{if(!s||!p.current)return;const e=tOe(p.current);return p.current.contains(e.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),f.current&&p.current.focus()),()=>{o||(d.current&&d.current.focus&&(l.current=!0,d.current.focus()),d.current=null)}}),[s]),F.useEffect((()=>{if(!s||!p.current)return;const e=tOe(p.current),t=t=>{g.current=t,!r&&a()&&"Tab"===t.key&&e.activeElement===p.current&&t.shiftKey&&(l.current=!0,u.current&&u.current.focus())},n=()=>{const t=p.current;if(null===t)return;if(!e.hasFocus()||!a()||l.current)return void(l.current=!1);if(t.contains(e.activeElement))return;if(r&&e.activeElement!==c.current&&e.activeElement!==u.current)return;if(e.activeElement!==A.current)A.current=null;else if(null!==A.current)return;if(!f.current)return;let n=[];if(e.activeElement!==c.current&&e.activeElement!==u.current||(n=i(p.current)),n.length>0){const e=Boolean(g.current?.shiftKey&&"Tab"===g.current?.key),t=n[0],r=n[n.length-1];"string"!==typeof t&&"string"!==typeof r&&(e?r.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const o=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(o),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[n,r,o,a,s,i]);const m=e=>{null===d.current&&(d.current=e.relatedTarget),f.current=!0};return(0,ct.jsxs)(F.Fragment,{children:[(0,ct.jsx)("div",{tabIndex:s?0:-1,onFocus:m,ref:c,"data-testid":"sentinelStart"}),F.cloneElement(t,{ref:h,onFocus:e=>{null===d.current&&(d.current=e.relatedTarget),f.current=!0,A.current=e.target;const n=t.props.onFocus;n&&n(e)}}),(0,ct.jsx)("div",{tabIndex:s?0:-1,onFocus:m,ref:u,"data-testid":"sentinelEnd"})]})},SXe={entering:{opacity:1},entered:{opacity:1}},DXe=F.forwardRef((function(e,t){const n=TPe(),r={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:i=!0,children:a,easing:s,in:l,onEnter:c,onEntered:u,onEntering:d,onExit:A,onExited:f,onExiting:p,style:h,timeout:g=r,TransitionComponent:m=zPe,...y}=e,v=F.useRef(null),b=XPe(v,wPe(a),t),C=e=>t=>{if(e){const n=v.current;void 0===t?e(n):e(n,t)}},I=C(d),E=C(((e,t)=>{HPe(e);const r=VPe({style:h,timeout:g,easing:s},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),c&&c(e,t)})),x=C(u),B=C(p),w=C((e=>{const t=VPe({style:h,timeout:g,easing:s},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),A&&A(e)})),_=C(f);return(0,ct.jsx)(m,{appear:i,in:l,nodeRef:v,onEnter:E,onEntered:x,onEntering:I,onExit:w,onExited:_,onExiting:B,addEndListener:e=>{o&&o(v.current,e)},timeout:g,...y,children:(e,t)=>F.cloneElement(a,{style:{opacity:0,visibility:"exited"!==e||l?void 0:"hidden",...SXe[e],...h,...a.props.style},ref:b,...t})})})),TXe=DXe;function kXe(e){return lPe("MuiBackdrop",e)}cPe("MuiBackdrop",["root","invisible"]);const QXe=KRe("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),MXe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiBackdrop"}),{children:r,className:o,component:i="div",invisible:a=!1,open:s,components:l={},componentsProps:c={},slotProps:u={},slots:d={},TransitionComponent:A,transitionDuration:f,...p}=n,h={...n,component:i,invisible:a},g=(e=>{const{classes:t,invisible:n}=e;return TTe({root:["root",n&&"invisible"]},kXe,t)})(h),m={slots:{transition:A,root:l.Root,...d},slotProps:{...c,...u}},[y,v]=YFe("root",{elementType:QXe,externalForwardedProps:m,className:DTe(g.root,o),ownerState:h}),[b,C]=YFe("transition",{elementType:TXe,externalForwardedProps:m,ownerState:h}),I=(e=>{const{ownerState:t,...n}=e;return n})(C);return(0,ct.jsx)(b,{in:s,timeout:f,...p,...I,children:(0,ct.jsx)(y,{"aria-hidden":!0,...v,classes:g,ref:t,children:r})})})),RXe=MXe;function PXe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e.apply(this,r),t.apply(this,r)}),(()=>{}))}function OXe(e){return tOe(e).defaultView||window}function FXe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function NXe(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function LXe(e){return parseInt(OXe(e).getComputedStyle(e).paddingRight,10)||0}function UXe(e,t,n,r,o){const i=[t,n,...r];[].forEach.call(e.children,(e=>{const t=!i.includes(e),n=!function(e){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&NXe(e,o)}))}function GXe(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function jXe(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=tOe(e);return t.body===e?OXe(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=FXe(OXe(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${LXe(r)+e}px`;const t=tOe(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${LXe(t)+e}px`}))}let e;if(r.parentNode instanceof DocumentFragment)e=tOe(r).body;else{const t=r.parentElement,n=OXe(r);e="HTML"===t?.nodeName&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const zXe=()=>{},HXe=new class{constructor(){this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&NXe(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);UXe(t,e.mount,e.modalRef,r,!0);const o=GXe(this.containers,(e=>e.container===t));return-1!==o?(this.containers[o].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=GXe(this.containers,(t=>t.modals.includes(e))),r=this.containers[n];r.restore||(r.restore=jXe(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=GXe(this.containers,(t=>t.modals.includes(e))),o=this.containers[r];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(n,1),0===o.modals.length)o.restore&&o.restore(),e.modalRef&&NXe(e.modalRef,t),UXe(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=o.modals[o.modals.length-1];e.modalRef&&NXe(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const VXe=function(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:o=!1,onTransitionEnter:i,onTransitionExited:a,children:s,onClose:l,open:c,rootRef:u}=e,d=F.useRef({}),A=F.useRef(null),f=F.useRef(null),p=YPe(f,u),[h,g]=F.useState(!c),m=function(e){return!!e&&e.props.hasOwnProperty("in")}(s);let y=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(y=!1);const v=()=>(d.current.modalRef=f.current,d.current.mount=A.current,d.current),b=()=>{HXe.mount(v(),{disableScrollLock:r}),f.current&&(f.current.scrollTop=0)},C=LFe((()=>{const e=function(e){return"function"===typeof e?e():e}(t)||tOe(A.current).body;HXe.add(v(),e),f.current&&b()})),I=()=>HXe.isTopModal(v()),E=LFe((e=>{A.current=e,e&&(c&&I()?b():f.current&&NXe(f.current,y))})),x=F.useCallback((()=>{HXe.remove(v(),y)}),[y]);F.useEffect((()=>()=>{x()}),[x]),F.useEffect((()=>{c?C():m&&o||x()}),[c,x,m,o,C]);const B=e=>t=>{e.onKeyDown?.(t),"Escape"===t.key&&229!==t.which&&I()&&(n||(t.stopPropagation(),l&&l(t,"escapeKeyDown")))},w=e=>t=>{e.onClick?.(t),t.target===t.currentTarget&&l&&l(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=EFe(e);delete n.onTransitionEnter,delete n.onTransitionExited;const r={...n,...t};return{role:"presentation",...r,onKeyDown:B(r),ref:p}},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"aria-hidden":!0,...e,onClick:w(e),open:c}},getTransitionProps:()=>({onEnter:PXe((()=>{g(!1),i&&i()}),s?.props.onEnter??zXe),onExited:PXe((()=>{g(!0),a&&a(),o&&x()}),s?.props.onExited??zXe)}),rootRef:p,portalRef:E,isTopModal:I,exited:h,hasTransition:m}};function qXe(e){return lPe("MuiModal",e)}cPe("MuiModal",["root","hidden","backdrop"]);const YXe=KRe("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})($Re((e=>{let{theme:t}=e;return{position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:e=>{let{ownerState:t}=e;return!t.open&&t.exited},style:{visibility:"hidden"}}]}}))),XXe=KRe(RXe,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),WXe=F.forwardRef((function(e,t){const n=rPe({name:"MuiModal",props:e}),{BackdropComponent:r=XXe,BackdropProps:o,classes:i,className:a,closeAfterTransition:s=!1,children:l,container:c,component:u,components:d={},componentsProps:A={},disableAutoFocus:f=!1,disableEnforceFocus:p=!1,disableEscapeKeyDown:h=!1,disablePortal:g=!1,disableRestoreFocus:m=!1,disableScrollLock:y=!1,hideBackdrop:v=!1,keepMounted:b=!1,onBackdropClick:C,onClose:I,onTransitionEnter:E,onTransitionExited:x,open:B,slotProps:w={},slots:_={},theme:S,...D}=n,T={...n,closeAfterTransition:s,disableAutoFocus:f,disableEnforceFocus:p,disableEscapeKeyDown:h,disablePortal:g,disableRestoreFocus:m,disableScrollLock:y,hideBackdrop:v,keepMounted:b},{getRootProps:k,getBackdropProps:Q,getTransitionProps:M,portalRef:R,isTopModal:P,exited:O,hasTransition:N}=VXe({...T,rootRef:t}),L={...T,exited:O},U=(e=>{const{open:t,exited:n,classes:r}=e;return TTe({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},qXe,r)})(L),G={};if(void 0===l.props.tabIndex&&(G.tabIndex="-1"),N){const{onEnter:e,onExited:t}=M();G.onEnter=e,G.onExited=t}const j={...D,slots:{root:d.Root,backdrop:d.Backdrop,..._},slotProps:{...A,...w}},[z,H]=YFe("root",{elementType:YXe,externalForwardedProps:j,getSlotProps:k,additionalProps:{ref:t,as:u},ownerState:L,className:DTe(a,U?.root,!L.open&&L.exited&&U?.hidden)}),[V,q]=YFe("backdrop",{elementType:r,externalForwardedProps:j,additionalProps:o,getSlotProps:e=>Q({...e,onClick:t=>{C&&C(t),e?.onClick&&e.onClick(t)}}),className:DTe(o?.className,U?.backdrop),ownerState:L}),Y=XPe(o?.ref,q.ref);return b||B||N&&!O?(0,ct.jsx)(DFe,{ref:R,container:c,disablePortal:g,children:(0,ct.jsxs)(z,{...H,children:[!v&&r?(0,ct.jsx)(V,{...q,ref:Y}):null,(0,ct.jsx)(_Xe,{disableEnforceFocus:p,disableAutoFocus:f,disableRestoreFocus:m,isEnabled:P,open:B,children:F.cloneElement(l,G)})]})}):null})),KXe=WXe;function JXe(e){return lPe("MuiPaper",e)}cPe("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const ZXe=KRe("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t[`elevation${n.elevation}`]]}})($Re((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:e=>{let{ownerState:t}=e;return!t.square},style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}}))),$Xe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiPaper"}),r=TPe(),{className:o,component:i="div",elevation:a=1,square:s=!1,variant:l="elevation",...c}=n,u={...n,component:i,elevation:a,square:s,variant:l},d=(e=>{const{square:t,elevation:n,variant:r,classes:o}=e;return TTe({root:["root",r,!t&&"rounded","elevation"===r&&`elevation${n}`]},JXe,o)})(u);return(0,ct.jsx)(ZXe,{as:i,ownerState:u,className:DTe(d.root,o),ref:t,...c,style:{..."elevation"===l&&{"--Paper-shadow":(r.vars||r).shadows[a],...r.vars&&{"--Paper-overlay":r.vars.overlays?.[a]},...!r.vars&&"dark"===r.palette.mode&&{"--Paper-overlay":`linear-gradient(${UMe("#fff",TRe(a))}, ${UMe("#fff",TRe(a))})`}},...c.style}})}));function eWe(e){return lPe("MuiDialog",e)}const tWe=cPe("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),nWe=KRe(RXe,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),rWe=KRe(KXe,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),oWe=KRe("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${MTe(n.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),iWe=KRe($Xe,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${MTe(n.scroll)}`],t[`paperWidth${MTe(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})($Re((e=>{let{theme:t}=e;return{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:e=>{let{ownerState:t}=e;return!t.maxWidth},style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${tWe.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter((e=>"xs"!==e)).map((e=>({props:{maxWidth:e},style:{maxWidth:`${t.breakpoints.values[e]}${t.breakpoints.unit}`,[`&.${tWe.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}}))),{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"calc(100% - 64px)"}},{props:e=>{let{ownerState:t}=e;return t.fullScreen},style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${tWe.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}}))),aWe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiDialog"}),r=TPe(),o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{"aria-describedby":i,"aria-labelledby":a,"aria-modal":s=!0,BackdropComponent:l,BackdropProps:c,children:u,className:d,disableEscapeKeyDown:A=!1,fullScreen:f=!1,fullWidth:p=!1,maxWidth:h="sm",onBackdropClick:g,onClick:m,onClose:y,open:v,PaperComponent:b=$Xe,PaperProps:C={},scroll:I="paper",TransitionComponent:E=TXe,transitionDuration:x=o,TransitionProps:B,...w}=n,_={...n,disableEscapeKeyDown:A,fullScreen:f,fullWidth:p,maxWidth:h,scroll:I},S=(e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:o,fullScreen:i}=e;return TTe({root:["root"],container:["container",`scroll${MTe(n)}`],paper:["paper",`paperScroll${MTe(n)}`,`paperWidth${MTe(String(r))}`,o&&"paperFullWidth",i&&"paperFullScreen"]},eWe,t)})(_),D=F.useRef(),T=zFe(a),k=F.useMemo((()=>({titleId:T})),[T]);return(0,ct.jsx)(rWe,{className:DTe(S.root,d),closeAfterTransition:!0,components:{Backdrop:nWe},componentsProps:{backdrop:{transitionDuration:x,as:l,...c}},disableEscapeKeyDown:A,onClose:y,open:v,ref:t,onClick:e=>{m&&m(e),D.current&&(D.current=null,g&&g(e),y&&y(e,"backdropClick"))},ownerState:_,...w,children:(0,ct.jsx)(E,{appear:!0,in:v,timeout:x,role:"presentation",...B,children:(0,ct.jsx)(oWe,{className:DTe(S.container),onMouseDown:e=>{D.current=e.target===e.currentTarget},ownerState:_,children:(0,ct.jsx)(iWe,{as:b,elevation:24,role:"dialog","aria-describedby":i,"aria-labelledby":T,"aria-modal":s,...C,className:DTe(S.paper,C.className),ownerState:_,children:(0,ct.jsx)(CXe.Provider,{value:k,children:u})})})})})})),sWe=aWe,lWe={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};const cWe=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))};function uWe(e,t){return e-t}function dWe(e,t){const{index:n}=e.reduce(((e,n,r)=>{const o=Math.abs(t-n);return null===e||o<e.distance||o===e.distance?{distance:o,index:r}:e}),null)??{};return n}function AWe(e,t){if(void 0!==t.current&&e.changedTouches){const n=e;for(let e=0;e<n.changedTouches.length;e+=1){const r=n.changedTouches[e];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function fWe(e,t,n){return 100*(e-t)/(n-t)}function pWe(e,t,n){const r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(function(e){if(Math.abs(e)<1){const t=e.toExponential().split("e-"),n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}(t)))}function hWe(e){let{values:t,newValue:n,index:r}=e;const o=t.slice();return o[r]=n,o.sort(uWe)}function gWe(e){let{sliderRef:t,activeIndex:n,setActive:r}=e;const o=tOe(t.current);t.current?.contains(o.activeElement)&&Number(o?.activeElement?.getAttribute("data-index"))===n||t.current?.querySelector(`[type="range"][data-index="${n}"]`).focus(),r&&r(n)}function mWe(e,t){return"number"===typeof e&&"number"===typeof t?e===t:"object"===typeof e&&"object"===typeof t&&cWe(e,t)}const yWe={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},vWe=e=>e;let bWe;function CWe(){return void 0===bWe&&(bWe="undefined"===typeof CSS||"function"!==typeof CSS.supports||CSS.supports("touch-action","none")),bWe}function IWe(e){const{"aria-labelledby":t,defaultValue:n,disabled:r=!1,disableSwap:o=!1,isRtl:i=!1,marks:a=!1,max:s=100,min:l=0,name:c,onChange:u,onChangeCommitted:d,orientation:A="horizontal",rootRef:f,scale:p=vWe,step:h=1,shiftStep:g=10,tabIndex:m,value:y}=e,v=F.useRef(void 0),[b,C]=F.useState(-1),[I,E]=F.useState(-1),[x,B]=F.useState(!1),w=F.useRef(0),[_,S]=VFe({controlled:y,default:n??l,name:"Slider"}),D=u&&((e,t,n)=>{const r=e.nativeEvent||e,o=new r.constructor(r.type,r);Object.defineProperty(o,"target",{writable:!0,value:{value:t,name:c}}),u(o,t,n)}),T=Array.isArray(_);let k=T?_.slice().sort(uWe):[_];k=k.map((e=>null==e?l:MMe(e,l,s)));const Q=!0===a&&null!==h?[...Array(Math.floor((s-l)/h)+1)].map(((e,t)=>({value:l+h*t}))):a||[],M=Q.map((e=>e.value)),[R,P]=F.useState(-1),O=F.useRef(null),N=YPe(f,O),L=e=>t=>{const n=Number(t.currentTarget.getAttribute("data-index"));BPe(t.target)&&P(n),E(n),e?.onFocus?.(t)},U=e=>t=>{BPe(t.target)||P(-1),E(-1),e?.onBlur?.(t)},G=(e,t)=>{const n=Number(e.currentTarget.getAttribute("data-index")),r=k[n],i=M.indexOf(r);let a=t;if(Q&&null==h){const e=M[M.length-1];a=a>e?e:a<M[0]?M[0]:a<r?M[i-1]:M[i+1]}if(a=MMe(a,l,s),T){o&&(a=MMe(a,k[n-1]||-1/0,k[n+1]||1/0));const e=a;a=hWe({values:k,newValue:a,index:n});let t=n;o||(t=a.indexOf(e)),gWe({sliderRef:O,activeIndex:t})}S(a),P(n),D&&!mWe(a,_)&&D(e,a,n),d&&d(e,a)},j=e=>t=>{if(null!==h){const e=Number(t.currentTarget.getAttribute("data-index")),n=k[e];let r=null;("ArrowLeft"===t.key||"ArrowDown"===t.key)&&t.shiftKey||"PageDown"===t.key?r=Math.max(n-g,l):(("ArrowRight"===t.key||"ArrowUp"===t.key)&&t.shiftKey||"PageUp"===t.key)&&(r=Math.min(n+g,s)),null!==r&&(G(t,r),t.preventDefault())}e?.onKeyDown?.(t)};eOe((()=>{r&&O.current.contains(document.activeElement)&&document.activeElement?.blur()}),[r]),r&&-1!==b&&C(-1),r&&-1!==R&&P(-1);const z=F.useRef(void 0);let H=A;i&&"horizontal"===A&&(H+="-reverse");const V=e=>{let{finger:t,move:n=!1}=e;const{current:r}=O,{width:i,height:a,bottom:c,left:u}=r.getBoundingClientRect();let d,A;if(d=H.startsWith("vertical")?(c-t.y)/a:(t.x-u)/i,H.includes("-reverse")&&(d=1-d),A=function(e,t,n){return(n-t)*e+t}(d,l,s),h)A=pWe(A,h,l);else{const e=dWe(M,A);A=M[e]}A=MMe(A,l,s);let f=0;if(T){f=n?z.current:dWe(k,A),o&&(A=MMe(A,k[f-1]||-1/0,k[f+1]||1/0));const e=A;A=hWe({values:k,newValue:A,index:f}),o&&n||(f=A.indexOf(e),z.current=f)}return{newValue:A,activeIndex:f}},q=LFe((e=>{const t=AWe(e,v);if(!t)return;if(w.current+=1,"mousemove"===e.type&&0===e.buttons)return void Y(e);const{newValue:n,activeIndex:r}=V({finger:t,move:!0});gWe({sliderRef:O,activeIndex:r,setActive:C}),S(n),!x&&w.current>2&&B(!0),D&&!mWe(n,_)&&D(e,n,r)})),Y=LFe((e=>{const t=AWe(e,v);if(B(!1),!t)return;const{newValue:n}=V({finger:t,move:!0});C(-1),"touchend"===e.type&&E(-1),d&&d(e,n),v.current=void 0,W()})),X=LFe((e=>{if(r)return;CWe()||e.preventDefault();const t=e.changedTouches[0];null!=t&&(v.current=t.identifier);const n=AWe(e,v);if(!1!==n){const{newValue:t,activeIndex:r}=V({finger:n});gWe({sliderRef:O,activeIndex:r,setActive:C}),S(t),D&&!mWe(t,_)&&D(e,t,r)}w.current=0;const o=tOe(O.current);o.addEventListener("touchmove",q,{passive:!0}),o.addEventListener("touchend",Y,{passive:!0})})),W=F.useCallback((()=>{const e=tOe(O.current);e.removeEventListener("mousemove",q),e.removeEventListener("mouseup",Y),e.removeEventListener("touchmove",q),e.removeEventListener("touchend",Y)}),[Y,q]);F.useEffect((()=>{const{current:e}=O;return e.addEventListener("touchstart",X,{passive:CWe()}),()=>{e.removeEventListener("touchstart",X),W()}}),[W,X]),F.useEffect((()=>{r&&W()}),[r,W]);const K=fWe(T?k[0]:l,l,s),J=fWe(k[k.length-1],l,s)-K,Z=e=>t=>{e.onMouseLeave?.(t),E(-1)};return{active:b,axis:H,axisProps:yWe,dragging:x,focusedThumbIndex:R,getHiddenInputProps:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=EFe(n),a={onChange:(u=o||{},e=>{u.onChange?.(e),G(e,e.target.valueAsNumber)}),onFocus:L(o||{}),onBlur:U(o||{}),onKeyDown:j(o||{})};var u;const d={...o,...a};return{tabIndex:m,"aria-labelledby":t,"aria-orientation":A,"aria-valuemax":p(s),"aria-valuemin":p(l),name:c,type:"range",min:e.min,max:e.max,step:null===e.step&&e.marks?"any":e.step??void 0,disabled:r,...n,...d,style:{...lWe,direction:i?"rtl":"ltr",width:"100%",height:"100%"}}},getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=EFe(e),n={onMouseDown:(o=t||{},e=>{if(o.onMouseDown?.(e),r)return;if(e.defaultPrevented)return;if(0!==e.button)return;e.preventDefault();const t=AWe(e,v);if(!1!==t){const{newValue:n,activeIndex:r}=V({finger:t});gWe({sliderRef:O,activeIndex:r,setActive:C}),S(n),D&&!mWe(n,_)&&D(e,n,r)}w.current=0;const n=tOe(O.current);n.addEventListener("mousemove",q,{passive:!0}),n.addEventListener("mouseup",Y)})};var o;const i={...t,...n};return{...e,ref:N,...i}},getThumbProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=EFe(e),n={onMouseOver:(r=t||{},e=>{r.onMouseOver?.(e);const t=Number(e.currentTarget.getAttribute("data-index"));E(t)}),onMouseLeave:Z(t||{})};var r;return{...e,...t,...n}},marks:Q,open:I,range:T,rootRef:N,trackLeap:J,trackOffset:K,values:k,getThumbStyle:e=>({pointerEvents:-1!==b&&b!==e?"none":void 0})}}const EWe=function(e){return"string"===typeof e},xWe=e=>!e||!EWe(e);function BWe(e){return lPe("MuiSlider",e)}const wWe=cPe("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]);function _We(e){return e}const SWe=KRe("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${MTe(n.color)}`],"medium"!==n.size&&t[`size${MTe(n.size)}`],n.marked&&t.marked,"vertical"===n.orientation&&t.vertical,"inverted"===n.track&&t.trackInverted,!1===n.track&&t.trackFalse]}})($Re((e=>{let{theme:t}=e;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${wWe.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${wWe.dragging}`]:{[`& .${wWe.thumb}, & .${wWe.track}`]:{transition:"none"}},variants:[...Object.entries(t.palette).filter(AXe()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}}))),DWe=KRe("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),TWe=KRe("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})($Re((e=>{let{theme:t}=e;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(t.palette).filter(AXe()).map((e=>{let[n]=e;return{props:{color:n,track:"inverted"},style:{...t.vars?{backgroundColor:t.vars.palette.Slider[`${n}Track`],borderColor:t.vars.palette.Slider[`${n}Track`]}:{backgroundColor:HMe(t.palette[n].main,.62),borderColor:HMe(t.palette[n].main,.62),...t.applyStyles("dark",{backgroundColor:jMe(t.palette[n].main,.5)}),...t.applyStyles("dark",{borderColor:jMe(t.palette[n].main,.5)})}}}}))]}}))),kWe=KRe("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t[`thumbColor${MTe(n.color)}`],"medium"!==n.size&&t[`thumbSize${MTe(n.size)}`]]}})($Re((e=>{let{theme:t}=e;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${wWe.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(t.palette).filter(AXe()).map((e=>{let[n]=e;return{props:{color:n},style:{[`&:hover, &.${wWe.focusVisible}`]:{...t.vars?{boxShadow:`0px 0px 0px 8px rgba(${t.vars.palette[n].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${UMe(t.palette[n].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${wWe.active}`]:{...t.vars?{boxShadow:`0px 0px 0px 14px rgba(${t.vars.palette[n].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${UMe(t.palette[n].main,.16)}`}}}}}))]}}))),QWe=KRe((function(e){const{children:t,className:n,value:r}=e,o=(e=>{const{open:t}=e;return{offset:DTe(t&&wWe.valueLabelOpen),circle:wWe.valueLabelCircle,label:wWe.valueLabelLabel}})(e);return t?F.cloneElement(t,{className:DTe(t.props.className)},(0,ct.jsxs)(F.Fragment,{children:[t.props.children,(0,ct.jsx)("span",{className:DTe(o.offset,n),"aria-hidden":!0,children:(0,ct.jsx)("span",{className:o.circle,children:(0,ct.jsx)("span",{className:o.label,children:r})})})]})):null}),{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})($Re((e=>{let{theme:t}=e;return{zIndex:1,whiteSpace:"nowrap",...t.typography.body2,fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${wWe.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${wWe.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}}))),MWe=KRe("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>YRe(e)&&"markActive"!==e,overridesResolver:(e,t)=>{const{markActive:n}=e;return[t.mark,n&&t.markActive]}})($Re((e=>{let{theme:t}=e;return{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]}}))),RWe=KRe("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>YRe(e)&&"markLabelActive"!==e,overridesResolver:(e,t)=>t.markLabel})($Re((e=>{let{theme:t}=e;return{...t.typography.body2,color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]}}))),PWe=e=>{let{children:t}=e;return t},OWe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiSlider"}),r=xPe(),{"aria-label":o,"aria-valuetext":i,"aria-labelledby":a,component:s="span",components:l={},componentsProps:c={},color:u="primary",classes:d,className:A,disableSwap:f=!1,disabled:p=!1,getAriaLabel:h,getAriaValueText:g,marks:m=!1,max:y=100,min:v=0,name:b,onChange:C,onChangeCommitted:I,orientation:E="horizontal",shiftStep:x=10,size:B="medium",step:w=1,scale:_=_We,slotProps:S,slots:D,tabIndex:T,track:k="normal",value:Q,valueLabelDisplay:M="off",valueLabelFormat:R=_We,...P}=n,O={...n,isRtl:r,max:y,min:v,classes:d,disabled:p,disableSwap:f,orientation:E,marks:m,color:u,size:B,step:w,shiftStep:x,scale:_,track:k,valueLabelDisplay:M,valueLabelFormat:R},{axisProps:N,getRootProps:L,getHiddenInputProps:U,getThumbProps:G,open:j,active:z,axis:H,focusedThumbIndex:V,range:q,dragging:Y,marks:X,values:W,trackOffset:K,trackLeap:J,getThumbStyle:Z}=IWe({...O,rootRef:t});O.marked=X.length>0&&X.some((e=>e.label)),O.dragging=Y,O.focusedThumbIndex=V;const $=(e=>{const{disabled:t,dragging:n,marked:r,orientation:o,track:i,classes:a,color:s,size:l}=e;return TTe({root:["root",t&&"disabled",n&&"dragging",r&&"marked","vertical"===o&&"vertical","inverted"===i&&"trackInverted",!1===i&&"trackFalse",s&&`color${MTe(s)}`,l&&`size${MTe(l)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",l&&`thumbSize${MTe(l)}`,s&&`thumbColor${MTe(s)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]},BWe,a)})(O),ee=D?.root??l.Root??SWe,te=D?.rail??l.Rail??DWe,ne=D?.track??l.Track??TWe,re=D?.thumb??l.Thumb??kWe,oe=D?.valueLabel??l.ValueLabel??QWe,ie=D?.mark??l.Mark??MWe,ae=D?.markLabel??l.MarkLabel??RWe,se=D?.input??l.Input??"input",le=S?.root??c.root,ce=S?.rail??c.rail,ue=S?.track??c.track,de=S?.thumb??c.thumb,Ae=S?.valueLabel??c.valueLabel,fe=S?.mark??c.mark,pe=S?.markLabel??c.markLabel,he=S?.input??c.input,ge=_Fe({elementType:ee,getSlotProps:L,externalSlotProps:le,externalForwardedProps:P,additionalProps:{...xWe(ee)&&{as:s}},ownerState:{...O,...le?.ownerState},className:[$.root,A]}),me=_Fe({elementType:te,externalSlotProps:ce,ownerState:O,className:$.rail}),ye=_Fe({elementType:ne,externalSlotProps:ue,additionalProps:{style:{...N[H].offset(K),...N[H].leap(J)}},ownerState:{...O,...ue?.ownerState},className:$.track}),ve=_Fe({elementType:re,getSlotProps:G,externalSlotProps:de,ownerState:{...O,...de?.ownerState},className:$.thumb}),be=_Fe({elementType:oe,externalSlotProps:Ae,ownerState:{...O,...Ae?.ownerState},className:$.valueLabel}),Ce=_Fe({elementType:ie,externalSlotProps:fe,ownerState:O,className:$.mark}),Ie=_Fe({elementType:ae,externalSlotProps:pe,ownerState:O,className:$.markLabel}),Ee=_Fe({elementType:se,getSlotProps:U,externalSlotProps:he,ownerState:O});return(0,ct.jsxs)(ee,{...ge,children:[(0,ct.jsx)(te,{...me}),(0,ct.jsx)(ne,{...ye}),X.filter((e=>e.value>=v&&e.value<=y)).map(((e,t)=>{const n=fWe(e.value,v,y),r=N[H].offset(n);let o;return o=!1===k?W.includes(e.value):"normal"===k&&(q?e.value>=W[0]&&e.value<=W[W.length-1]:e.value<=W[0])||"inverted"===k&&(q?e.value<=W[0]||e.value>=W[W.length-1]:e.value>=W[0]),(0,ct.jsxs)(F.Fragment,{children:[(0,ct.jsx)(ie,{"data-index":t,...Ce,...!EWe(ie)&&{markActive:o},style:{...r,...Ce.style},className:DTe(Ce.className,o&&$.markActive)}),null!=e.label?(0,ct.jsx)(ae,{"aria-hidden":!0,"data-index":t,...Ie,...!EWe(ae)&&{markLabelActive:o},style:{...r,...Ie.style},className:DTe($.markLabel,Ie.className,o&&$.markLabelActive),children:e.label}):null]},t)})),W.map(((e,t)=>{const n=fWe(e,v,y),r=N[H].offset(n),s="off"===M?PWe:oe;return(0,ct.jsx)(s,{...!EWe(s)&&{valueLabelFormat:R,valueLabelDisplay:M,value:"function"===typeof R?R(_(e),t):R,index:t,open:j===t||z===t||"on"===M,disabled:p},...be,children:(0,ct.jsx)(re,{"data-index":t,...ve,className:DTe($.thumb,ve.className,z===t&&$.active,V===t&&$.focusVisible),style:{...r,...Z(t),...ve.style},children:(0,ct.jsx)(se,{"data-index":t,"aria-label":h?h(t):o,"aria-valuenow":_(e),"aria-labelledby":a,"aria-valuetext":g?g(_(e),t):i,value:W[t],...Ee})})},t)}))]})})),FWe=OWe;class NWe{static create(){return new NWe}static use(){const e=vPe(NWe.create).current,[t,n]=F.useState(!1);return e.shouldMount=t,e.setShouldMount=n,F.useEffect(e.mountEffect,[t]),e}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=function(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n}(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&null!==this.ref.current&&(this.didMount=!0,this.mounted.resolve())};start(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>this.ref.current?.start(...t)))}stop(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>this.ref.current?.stop(...t)))}pulsate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>this.ref.current?.pulsate(...t)))}}function LWe(e,t){var n=Object.create(null);return e&&F.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,F.isValidElement)(e)?t(e):e}(e)})),n}function UWe(e,t,n){return null!=n[t]?n[t]:e.props[t]}function GWe(e,t,n){var r=LWe(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,o=Object.create(null),i=[];for(var a in e)a in t?i.length&&(o[a]=i,i=[]):i.push(a);var s={};for(var l in t){if(o[l])for(r=0;r<o[l].length;r++){var c=o[l][r];s[o[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<i.length;r++)s[i[r]]=n(i[r]);return s}(t,r);return Object.keys(o).forEach((function(i){var a=o[i];if((0,F.isValidElement)(a)){var s=i in t,l=i in r,c=t[i],u=(0,F.isValidElement)(c)&&!c.props.in;!l||s&&!u?l||!s||u?l&&s&&(0,F.isValidElement)(c)&&(o[i]=(0,F.cloneElement)(a,{onExited:n.bind(null,a),in:c.props.in,exit:UWe(a,"exit",e),enter:UWe(a,"enter",e)})):o[i]=(0,F.cloneElement)(a,{in:!1}):o[i]=(0,F.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:UWe(a,"exit",e),enter:UWe(a,"enter",e)})}})),o}var jWe=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},zWe=function(e){function t(t,n){var r,o=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},r}MPe(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,o=t.children,i=t.handleExited;return{children:t.firstRender?(n=e,r=i,LWe(n.children,(function(e){return(0,F.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:UWe(e,"appear",n),enter:UWe(e,"enter",n),exit:UWe(e,"exit",n)})}))):GWe(e,o,i),firstRender:!1}},n.handleExited=function(e,t){var n=LWe(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=RTe({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=kPe(e,["component","childFactory"]),o=this.state.contextValue,i=jWe(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?F.createElement(PPe.Provider,{value:o},i):F.createElement(PPe.Provider,{value:o},F.createElement(t,r,i))},t}(F.Component);zWe.propTypes={},zWe.defaultProps={component:"div",childFactory:function(e){return e}};const HWe=zWe;const VWe=function(e){const{className:t,classes:n,pulsate:r=!1,rippleX:o,rippleY:i,rippleSize:a,in:s,onExited:l,timeout:c}=e,[u,d]=F.useState(!1),A=DTe(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),f={width:a,height:a,top:-a/2+i,left:-a/2+o},p=DTe(n.child,u&&n.childLeaving,r&&n.childPulsate);return s||u||d(!0),F.useEffect((()=>{if(!s&&null!=l){const e=setTimeout(l,c);return()=>{clearTimeout(e)}}}),[l,s,c]),(0,ct.jsx)("span",{className:A,style:f,children:(0,ct.jsx)("span",{className:p})})};const qWe=cPe("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),YWe=lXe`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,XWe=lXe`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,WWe=lXe`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,KWe=KRe("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),JWe=KRe(VWe,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${qWe.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${YWe};
    animation-duration: ${550}ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
  }

  &.${qWe.ripplePulsate} {
    animation-duration: ${e=>{let{theme:t}=e;return t.transitions.duration.shorter}}ms;
  }

  & .${qWe.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${qWe.childLeaving} {
    opacity: 0;
    animation-name: ${XWe};
    animation-duration: ${550}ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
  }

  & .${qWe.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${WWe};
    animation-duration: 2500ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,ZWe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiTouchRipple"}),{center:r=!1,classes:o={},className:i,...a}=n,[s,l]=F.useState([]),c=F.useRef(0),u=F.useRef(null);F.useEffect((()=>{u.current&&(u.current(),u.current=null)}),[s]);const d=F.useRef(!1),A=IPe(),f=F.useRef(null),p=F.useRef(null),h=F.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:a}=e;l((e=>[...e,(0,ct.jsx)(JWe,{classes:{ripple:DTe(o.ripple,qWe.ripple),rippleVisible:DTe(o.rippleVisible,qWe.rippleVisible),ripplePulsate:DTe(o.ripplePulsate,qWe.ripplePulsate),child:DTe(o.child,qWe.child),childLeaving:DTe(o.childLeaving,qWe.childLeaving),childPulsate:DTe(o.childPulsate,qWe.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},c.current)])),c.current+=1,u.current=a}),[o]),g=F.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:o=!1,center:i=r||t.pulsate,fakeElement:a=!1}=t;if("mousedown"===e?.type&&d.current)return void(d.current=!1);"touchstart"===e?.type&&(d.current=!0);const s=a?null:p.current,l=s?s.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,g;if(i||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(i)g=Math.sqrt((2*l.width**2+l.height**2)/3),g%2===0&&(g+=1);else{const e=2*Math.max(Math.abs((s?s.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((s?s.clientHeight:0)-u),u)+2;g=Math.sqrt(e**2+t**2)}e?.touches?null===f.current&&(f.current=()=>{h({pulsate:o,rippleX:c,rippleY:u,rippleSize:g,cb:n})},A.start(80,(()=>{f.current&&(f.current(),f.current=null)}))):h({pulsate:o,rippleX:c,rippleY:u,rippleSize:g,cb:n})}),[r,h,A]),m=F.useCallback((()=>{g({},{pulsate:!0})}),[g]),y=F.useCallback(((e,t)=>{if(A.clear(),"touchend"===e?.type&&f.current)return f.current(),f.current=null,void A.start(0,(()=>{y(e,t)}));f.current=null,l((e=>e.length>0?e.slice(1):e)),u.current=t}),[A]);return F.useImperativeHandle(t,(()=>({pulsate:m,start:g,stop:y})),[m,g,y]),(0,ct.jsx)(KWe,{className:DTe(qWe.root,o.root,i),ref:p,...a,children:(0,ct.jsx)(HWe,{component:null,exit:!0,children:s})})})),$We=ZWe;function eKe(e){return lPe("MuiButtonBase",e)}const tKe=cPe("MuiButtonBase",["root","disabled","focusVisible"]),nKe=KRe("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${tKe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),rKe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiButtonBase"}),{action:r,centerRipple:o=!1,children:i,className:a,component:s="button",disabled:l=!1,disableRipple:c=!1,disableTouchRipple:u=!1,focusRipple:d=!1,focusVisibleClassName:A,LinkComponent:f="a",onBlur:p,onClick:h,onContextMenu:g,onDragLeave:m,onFocus:y,onFocusVisible:v,onKeyDown:b,onKeyUp:C,onMouseDown:I,onMouseLeave:E,onMouseUp:x,onTouchEnd:B,onTouchMove:w,onTouchStart:_,tabIndex:S=0,TouchRippleProps:D,touchRippleRef:T,type:k,...Q}=n,M=F.useRef(null),R=NWe.use(),P=XPe(R.ref,T),[O,N]=F.useState(!1);l&&O&&N(!1),F.useImperativeHandle(r,(()=>({focusVisible:()=>{N(!0),M.current.focus()}})),[]);const L=R.shouldMount&&!c&&!l;F.useEffect((()=>{O&&d&&!c&&R.pulsate()}),[c,d,O,R]);const U=oKe(R,"start",I,u),G=oKe(R,"stop",g,u),j=oKe(R,"stop",m,u),z=oKe(R,"stop",x,u),H=oKe(R,"stop",(e=>{O&&e.preventDefault(),E&&E(e)}),u),V=oKe(R,"start",_,u),q=oKe(R,"stop",B,u),Y=oKe(R,"stop",w,u),X=oKe(R,"stop",(e=>{BPe(e.target)||N(!1),p&&p(e)}),!1),W=UFe((e=>{M.current||(M.current=e.currentTarget),BPe(e.target)&&(N(!0),v&&v(e)),y&&y(e)})),K=()=>{const e=M.current;return s&&"button"!==s&&!("A"===e.tagName&&e.href)},J=UFe((e=>{d&&!e.repeat&&O&&" "===e.key&&R.stop(e,(()=>{R.start(e)})),e.target===e.currentTarget&&K()&&" "===e.key&&e.preventDefault(),b&&b(e),e.target===e.currentTarget&&K()&&"Enter"===e.key&&!l&&(e.preventDefault(),h&&h(e))})),Z=UFe((e=>{d&&" "===e.key&&O&&!e.defaultPrevented&&R.stop(e,(()=>{R.pulsate(e)})),C&&C(e),h&&e.target===e.currentTarget&&K()&&" "===e.key&&!e.defaultPrevented&&h(e)}));let $=s;"button"===$&&(Q.href||Q.to)&&($=f);const ee={};"button"===$?(ee.type=void 0===k?"button":k,ee.disabled=l):(Q.href||Q.to||(ee.role="button"),l&&(ee["aria-disabled"]=l));const te=XPe(t,M),ne={...n,centerRipple:o,component:s,disabled:l,disableRipple:c,disableTouchRipple:u,focusRipple:d,tabIndex:S,focusVisible:O},re=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:o}=e,i=TTe({root:["root",t&&"disabled",n&&"focusVisible"]},eKe,o);return n&&r&&(i.root+=` ${r}`),i})(ne);return(0,ct.jsxs)(nKe,{as:$,className:DTe(re.root,a),ownerState:ne,onBlur:X,onClick:h,onContextMenu:G,onFocus:W,onKeyDown:J,onKeyUp:Z,onMouseDown:U,onMouseLeave:H,onMouseUp:z,onDragLeave:j,onTouchEnd:q,onTouchMove:Y,onTouchStart:V,ref:te,tabIndex:l?-1:S,type:k,...ee,...Q,children:[i,L?(0,ct.jsx)($We,{ref:P,center:o,...D}):null]})}));function oKe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return UFe((o=>(n&&n(o),r||e[t](o),!0)))}const iKe=rKe;function aKe(e){return lPe("MuiButton",e)}const sKe=cPe("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const lKe=F.createContext({});const cKe=F.createContext(void 0),uKe=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],dKe=KRe(iKe,{shouldForwardProp:e=>XRe(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${MTe(n.color)}`],t[`size${MTe(n.size)}`],t[`${n.variant}Size${MTe(n.size)}`],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})($Re((e=>{let{theme:t}=e;const n="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],r="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${sKe.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${sKe.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${sKe.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${sKe.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(AXe()).map((e=>{let[n]=e;return{props:{color:n},style:{"--variant-textColor":(t.vars||t).palette[n].main,"--variant-outlinedColor":(t.vars||t).palette[n].main,"--variant-outlinedBorder":t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.5)`:UMe(t.palette[n].main,.5),"--variant-containedColor":(t.vars||t).palette[n].contrastText,"--variant-containedBg":(t.vars||t).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[n].dark,"--variant-textBg":t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:UMe(t.palette[n].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[n].main,"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:UMe(t.palette[n].main,t.palette.action.hoverOpacity)}}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:n,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:UMe(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:UMe(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${sKe.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${sKe.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}}]}}))),AKe=KRe("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${MTe(n.size)}`]]}})({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},...uKe]}),fKe=KRe("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${MTe(n.size)}`]]}})({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},...uKe]}),pKe=F.forwardRef((function(e,t){const n=F.useContext(lKe),r=F.useContext(cKe),o=rPe({props:ePe(n,e),name:"MuiButton"}),{children:i,color:a="primary",component:s="button",className:l,disabled:c=!1,disableElevation:u=!1,disableFocusRipple:d=!1,endIcon:A,focusVisibleClassName:f,fullWidth:p=!1,size:h="medium",startIcon:g,type:m,variant:y="text",...v}=o,b={...o,color:a,component:s,disabled:c,disableElevation:u,disableFocusRipple:d,fullWidth:p,size:h,type:m,variant:y},C=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:o,variant:i,classes:a}=e,s=TTe({root:["root",i,`${i}${MTe(t)}`,`size${MTe(o)}`,`${i}Size${MTe(o)}`,`color${MTe(t)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${MTe(o)}`],endIcon:["icon","endIcon",`iconSize${MTe(o)}`]},aKe,a);return{...a,...s}})(b),I=g&&(0,ct.jsx)(AKe,{className:C.startIcon,ownerState:b,children:g}),E=A&&(0,ct.jsx)(fKe,{className:C.endIcon,ownerState:b,children:A}),x=r||"";return(0,ct.jsxs)(dKe,{ownerState:b,className:DTe(n.className,C.root,l,x),component:s,disabled:c,focusRipple:!d,focusVisibleClassName:DTe(C.focusVisible,f),ref:t,type:m,...v,classes:C,children:[I,i,E]})})),hKe=pKe;function gKe(e){const{onClose:t,open:n,seqLength:r}=e,[o,i]=F.useState([0,10]);return(0,ct.jsxs)(sWe,{onClose:()=>{t("")},open:n,fullWidth:!0,children:[(0,ct.jsx)(EXe,{children:"Download Range:"}),(0,ct.jsx)("div",{style:{padding:"30px"},children:(0,ct.jsx)(FWe,{value:o,onChange:(e,t)=>{i(t)},valueLabelDisplay:"on",disableSwap:!0,max:r,min:1})}),(0,ct.jsx)("br",{}),(0,ct.jsx)(hKe,{variant:"outlined",onClick:()=>{t(""),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const n=document.querySelectorAll("#logo-stack svg");if(0===n.length)return void console.error("No SVG elements found!");const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("xmlns","http://www.w3.org/2000/svg");let o=0;n.forEach(((n,i)=>{const a=n.getBoundingClientRect().height,s=document.createElementNS("http://www.w3.org/2000/svg","g");s.setAttribute("transform",`translate(0, ${o})`);const l=n.cloneNode(!0),c=Array.from(l.children[0].children),u=Array.from(l.children[1].children[0].children),d=l.getAttribute("viewBox").split(" "),A=a*(parseFloat(d[2])/parseFloat(d[3]));l.setAttribute("width",A.toString());const f=[...Array(c.length).keys()].filter((n=>n<e||n>t));f.reverse().forEach((e=>{c[e].remove(),u[e].remove()}));const p=c[e].getAttribute("transform").match(/translate\(([^,]+),/);if(!p)return void console.error("Transform attribute is missing or does not match the expected pattern.");const h=p[1],g=u[e].getAttribute("y");0!==e&&(l.children[0].setAttribute("transform",`translate(-${parseFloat(h)-80}, 0)`),l.children[1].setAttribute("transform",`translate(-${parseFloat(g)-130}, 452.2)`)),s.appendChild(l),r.appendChild(s),o+=parseFloat(a.toString())}));const i=n[0].getBBox();r.setAttribute("width",i.width.toString()),r.setAttribute("height","100%");let a=(new XMLSerializer).serializeToString(r);a=a.replace("</svg>","\n  <style>\n      .glyphrect {\n          fill-opacity: 0.0;\n      }\n      svg {\n          overflow: visible !important;\n      }\n      * {\n          overflow: visible !important;\n      }\n  </style></svg>");const s=new Blob([a],{type:"image/svg+xml"}),l=document.createElement("a");l.href=URL.createObjectURL(s),l.download="combined.svg",document.body.appendChild(l),l.click(),document.body.removeChild(l)}(o[0]-1,o[1]-1)},children:"Download"})]})}function mKe(e){let{seqLength:t}=e;const[n,r]=F.useState(!1),o=()=>{r(!0)};return F.useEffect((()=>{const e=document.getElementById("download-stack-btn");return e&&e.addEventListener("click",o),()=>{e&&e.removeEventListener("click",o)}}),[]),(0,ct.jsx)("div",{children:(0,ct.jsx)(gKe,{open:n,onClose:()=>r(!1),seqLength:t})})}const yKe=e=>{const t=F.useRef({});return F.useEffect((()=>{t.current=e})),t.current};function vKe(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const bKe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:r,matchFrom:o="any",stringify:i,trim:a=!1}=e;return(e,s)=>{let{inputValue:l,getOptionLabel:c}=s,u=a?l.trim():l;n&&(u=u.toLowerCase()),t&&(u=vKe(u));const d=u?e.filter((e=>{let r=(i||c)(e);return n&&(r=r.toLowerCase()),t&&(r=vKe(r)),"start"===o?r.startsWith(u):r.includes(u)})):e;return"number"===typeof r?d.slice(0,r):d}}(),CKe=e=>null!==e.current&&e.current.parentElement?.contains(document.activeElement),IKe=[];const EKe=function(e){const{unstable_isActiveElementInListbox:t=CKe,unstable_classNamePrefix:n="Mui",autoComplete:r=!1,autoHighlight:o=!1,autoSelect:i=!1,blurOnSelect:a=!1,clearOnBlur:s=!e.freeSolo,clearOnEscape:l=!1,componentName:c="useAutocomplete",defaultValue:u=(e.multiple?IKe:null),disableClearable:d=!1,disableCloseOnSelect:A=!1,disabled:f,disabledItemsFocusable:p=!1,disableListWrap:h=!1,filterOptions:g=bKe,filterSelectedOptions:m=!1,freeSolo:y=!1,getOptionDisabled:v,getOptionKey:b,getOptionLabel:C=e=>e.label??e,groupBy:I,handleHomeEndKeys:E=!e.freeSolo,id:x,includeInputInList:B=!1,inputValue:w,isOptionEqualToValue:_=(e,t)=>e===t,multiple:S=!1,onChange:D,onClose:T,onHighlightChange:k,onInputChange:Q,onOpen:M,open:R,openOnFocus:P=!1,options:O,readOnly:N=!1,selectOnFocus:L=!e.freeSolo,value:U}=e,G=zFe(x);let j=C;j=e=>{const t=C(e);return"string"!==typeof t?String(t):t};const z=F.useRef(!1),H=F.useRef(!0),V=F.useRef(null),q=F.useRef(null),[Y,X]=F.useState(null),[W,K]=F.useState(-1),J=o?0:-1,Z=F.useRef(J),[$,ee]=VFe({controlled:U,default:u,name:c}),[te,ne]=VFe({controlled:w,default:"",name:c,state:"inputValue"}),[re,oe]=F.useState(!1),ie=F.useCallback(((e,t,n)=>{if(!(S?$.length<t.length:null!==t)&&!s)return;let r;if(S)r="";else if(null==t)r="";else{const e=j(t);r="string"===typeof e?e:""}te!==r&&(ne(r),Q&&Q(e,r,n))}),[j,te,S,Q,ne,s,$]),[ae,se]=VFe({controlled:R,default:!1,name:c,state:"open"}),[le,ce]=F.useState(!0),ue=!S&&null!=$&&te===j($),de=ae&&!N,Ae=de?g(O.filter((e=>!m||!(S?$:[$]).some((t=>null!==t&&_(e,t))))),{inputValue:ue&&le?"":te,getOptionLabel:j}):[],fe=yKe({filteredOptions:Ae,value:$,inputValue:te});F.useEffect((()=>{const e=$!==fe.value;re&&!e||y&&!e||ie(null,$,"reset")}),[$,ie,re,fe.value,y]);const pe=ae&&Ae.length>0&&!N,he=LFe((e=>{-1===e?V.current.focus():Y.querySelector(`[data-tag-index="${e}"]`).focus()}));F.useEffect((()=>{S&&W>$.length-1&&(K(-1),he(-1))}),[$,S,W,he]);const ge=LFe((e=>{let{event:t,index:r,reason:o="auto"}=e;if(Z.current=r,-1===r?V.current.removeAttribute("aria-activedescendant"):V.current.setAttribute("aria-activedescendant",`${G}-option-${r}`),k&&k(t,-1===r?null:Ae[r],o),!q.current)return;const i=q.current.querySelector(`[role="option"].${n}-focused`);i&&(i.classList.remove(`${n}-focused`),i.classList.remove(`${n}-focusVisible`));let a=q.current;if("listbox"!==q.current.getAttribute("role")&&(a=q.current.parentElement.querySelector('[role="listbox"]')),!a)return;if(-1===r)return void(a.scrollTop=0);const s=q.current.querySelector(`[data-option-index="${r}"]`);if(s&&(s.classList.add(`${n}-focused`),"keyboard"===o&&s.classList.add(`${n}-focusVisible`),a.scrollHeight>a.clientHeight&&"mouse"!==o&&"touch"!==o)){const e=s,t=a.clientHeight+a.scrollTop,n=e.offsetTop+e.offsetHeight;n>t?a.scrollTop=n-a.clientHeight:e.offsetTop-e.offsetHeight*(I?1.3:0)<a.scrollTop&&(a.scrollTop=e.offsetTop-e.offsetHeight*(I?1.3:0))}})),me=LFe((e=>{let{event:t,diff:n,direction:o="next",reason:i="auto"}=e;if(!de)return;const a=function(e,t){if(!q.current||e<0||e>=Ae.length)return-1;let n=e;for(;;){const r=q.current.querySelector(`[data-option-index="${n}"]`),o=!p&&(!r||r.disabled||"true"===r.getAttribute("aria-disabled"));if(r&&r.hasAttribute("tabindex")&&!o)return n;if(n="next"===t?(n+1)%Ae.length:(n-1+Ae.length)%Ae.length,n===e)return-1}}((()=>{const e=Ae.length-1;if("reset"===n)return J;if("start"===n)return 0;if("end"===n)return e;const t=Z.current+n;return t<0?-1===t&&B?-1:h&&-1!==Z.current||Math.abs(n)>1?0:e:t>e?t===e+1&&B?-1:h||Math.abs(n)>1?e:0:t})(),o);if(ge({index:a,reason:i,event:t}),r&&"reset"!==n)if(-1===a)V.current.value=te;else{const e=j(Ae[a]);V.current.value=e;0===e.toLowerCase().indexOf(te.toLowerCase())&&te.length>0&&V.current.setSelectionRange(te.length,e.length)}})),ye=F.useCallback((()=>{if(!de)return;const e=(()=>{if(-1!==Z.current&&fe.filteredOptions&&fe.filteredOptions.length!==Ae.length&&fe.inputValue===te&&(S?$.length===fe.value.length&&fe.value.every(((e,t)=>j($[t])===j(e))):(e=fe.value,t=$,(e?j(e):"")===(t?j(t):"")))){const e=fe.filteredOptions[Z.current];if(e)return Ae.findIndex((t=>j(t)===j(e)))}var e,t;return-1})();if(-1!==e)return void(Z.current=e);const t=S?$[0]:$;if(0!==Ae.length&&null!=t){if(q.current)if(null==t)Z.current>=Ae.length-1?ge({index:Ae.length-1}):ge({index:Z.current});else{const e=Ae[Z.current];if(S&&e&&-1!==$.findIndex((t=>_(e,t))))return;const n=Ae.findIndex((e=>_(e,t)));-1===n?me({diff:"reset"}):ge({index:n})}}else me({diff:"reset"})}),[Ae.length,!S&&$,m,me,ge,de,te,S]),ve=LFe((e=>{qPe(q,e),e&&ye()}));F.useEffect((()=>{ye()}),[ye]);const be=e=>{ae||(se(!0),ce(!0),M&&M(e))},Ce=(e,t)=>{ae&&(se(!1),T&&T(e,t))},Ie=(e,t,n,r)=>{if(S){if($.length===t.length&&$.every(((e,n)=>e===t[n])))return}else if($===t)return;D&&D(e,t,n,r),ee(t)},Ee=F.useRef(!1),xe=function(e,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selectOption",o=t;if(S){o=Array.isArray($)?$.slice():[];const e=o.findIndex((e=>_(t,e)));-1===e?o.push(t):"freeSolo"!==n&&(o.splice(e,1),r="removeOption")}ie(e,o,r),Ie(e,o,r,{option:t}),A||e&&(e.ctrlKey||e.metaKey)||Ce(e,r),(!0===a||"touch"===a&&Ee.current||"mouse"===a&&!Ee.current)&&V.current.blur()},Be=(e,t)=>{if(!S)return;""===te&&Ce(e,"toggleInput");let n=W;-1===W?""===te&&"previous"===t&&(n=$.length-1):(n+="next"===t?1:-1,n<0&&(n=0),n===$.length&&(n=-1)),n=function(e,t){if(-1===e)return-1;let n=e;for(;;){if("next"===t&&n===$.length||"previous"===t&&-1===n)return-1;const e=Y.querySelector(`[data-tag-index="${n}"]`);if(e&&e.hasAttribute("tabindex")&&!e.disabled&&"true"!==e.getAttribute("aria-disabled"))return n;n+="next"===t?1:-1}}(n,t),K(n),he(n)},we=e=>{z.current=!0,ne(""),Q&&Q(e,"","clear"),Ie(e,S?[]:null,"clear")},_e=e=>t=>{if(e.onKeyDown&&e.onKeyDown(t),!t.defaultMuiPrevented&&(-1===W||["ArrowLeft","ArrowRight"].includes(t.key)||(K(-1),he(-1)),229!==t.which))switch(t.key){case"Home":de&&E&&(t.preventDefault(),me({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":de&&E&&(t.preventDefault(),me({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),me({diff:-5,direction:"previous",reason:"keyboard",event:t}),be(t);break;case"PageDown":t.preventDefault(),me({diff:5,direction:"next",reason:"keyboard",event:t}),be(t);break;case"ArrowDown":t.preventDefault(),me({diff:1,direction:"next",reason:"keyboard",event:t}),be(t);break;case"ArrowUp":t.preventDefault(),me({diff:-1,direction:"previous",reason:"keyboard",event:t}),be(t);break;case"ArrowLeft":Be(t,"previous");break;case"ArrowRight":Be(t,"next");break;case"Enter":if(-1!==Z.current&&de){const e=Ae[Z.current],n=!!v&&v(e);if(t.preventDefault(),n)return;xe(t,e,"selectOption"),r&&V.current.setSelectionRange(V.current.value.length,V.current.value.length)}else y&&""!==te&&!1===ue&&(S&&t.preventDefault(),xe(t,te,"createOption","freeSolo"));break;case"Escape":de?(t.preventDefault(),t.stopPropagation(),Ce(t,"escape")):l&&(""!==te||S&&$.length>0)&&(t.preventDefault(),t.stopPropagation(),we(t));break;case"Backspace":if(S&&!N&&""===te&&$.length>0){const e=-1===W?$.length-1:W,n=$.slice();n.splice(e,1),Ie(t,n,"removeOption",{option:$[e]})}break;case"Delete":if(S&&!N&&""===te&&$.length>0&&-1!==W){const e=W,n=$.slice();n.splice(e,1),Ie(t,n,"removeOption",{option:$[e]})}}},Se=e=>{oe(!0),P&&!z.current&&be(e)},De=e=>{t(q)?V.current.focus():(oe(!1),H.current=!0,z.current=!1,i&&-1!==Z.current&&de?xe(e,Ae[Z.current],"blur"):i&&y&&""!==te?xe(e,te,"blur","freeSolo"):s&&ie(e,$,"blur"),Ce(e,"blur"))},Te=e=>{const t=e.target.value;te!==t&&(ne(t),ce(!1),Q&&Q(e,t,"input")),""===t?d||S||Ie(e,null,"clear"):be(e)},ke=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));Z.current!==t&&ge({event:e,index:t,reason:"mouse"})},Qe=e=>{ge({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Ee.current=!0},Me=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));xe(e,Ae[t],"selectOption"),Ee.current=!1},Re=e=>t=>{const n=$.slice();n.splice(e,1),Ie(t,n,"removeOption",{option:$[e]})},Pe=e=>{ae?Ce(e,"toggleInput"):be(e)},Oe=e=>{e.currentTarget.contains(e.target)&&e.target.getAttribute("id")!==G&&e.preventDefault()},Fe=e=>{e.currentTarget.contains(e.target)&&(V.current.focus(),L&&H.current&&V.current.selectionEnd-V.current.selectionStart===0&&V.current.select(),H.current=!1)},Ne=e=>{f||""!==te&&ae||Pe(e)};let Le=y&&te.length>0;Le=Le||(S?$.length>0:null!==$);let Ue=Ae;if(I){new Map;Ue=Ae.reduce(((e,t,n)=>{const r=I(t);return e.length>0&&e[e.length-1].group===r?e[e.length-1].options.push(t):e.push({key:n,index:n,group:r,options:[t]}),e}),[])}return f&&re&&De(),{getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"aria-owns":pe?`${G}-listbox`:null,...e,onKeyDown:_e(e),onMouseDown:Oe,onClick:Fe}},getInputLabelProps:()=>({id:`${G}-label`,htmlFor:G}),getInputProps:()=>({id:G,value:te,onBlur:De,onFocus:Se,onChange:Te,onMouseDown:Ne,"aria-activedescendant":de?"":null,"aria-autocomplete":r?"both":"list","aria-controls":pe?`${G}-listbox`:void 0,"aria-expanded":pe,autoComplete:"off",ref:V,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:f}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:we}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Pe}),getTagProps:e=>{let{index:t}=e;return{key:t,"data-tag-index":t,tabIndex:-1,...!N&&{onDelete:Re(t)}}},getListboxProps:()=>({role:"listbox",id:`${G}-listbox`,"aria-labelledby":`${G}-label`,ref:ve,onMouseDown:e=>{e.preventDefault()}}),getOptionProps:e=>{let{index:t,option:n}=e;const r=(S?$:[$]).some((e=>null!=e&&_(n,e))),o=!!v&&v(n);return{key:b?.(n)??j(n),tabIndex:-1,role:"option",id:`${G}-option-${t}`,onMouseMove:ke,onClick:Me,onTouchStart:Qe,"data-option-index":t,"aria-disabled":o,"aria-selected":r}},id:G,inputValue:te,value:$,dirty:Le,expanded:de&&Y,popupOpen:de,focused:re||-1!==W,anchorEl:Y,setAnchorEl:X,focusedTag:W,groupedOptions:Ue}};function xKe(e){return lPe("MuiListSubheader",e)}cPe("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const BKe=KRe("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${MTe(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})($Re((e=>{let{theme:t}=e;return{boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(t.vars||t).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.inset},style:{paddingLeft:72}},{props:e=>{let{ownerState:t}=e;return!t.disableSticky},style:{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper}}]}}))),wKe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiListSubheader"}),{className:r,color:o="default",component:i="li",disableGutters:a=!1,disableSticky:s=!1,inset:l=!1,...c}=n,u={...n,color:o,component:i,disableGutters:a,disableSticky:s,inset:l},d=(e=>{const{classes:t,color:n,disableGutters:r,inset:o,disableSticky:i}=e;return TTe({root:["root","default"!==n&&`color${MTe(n)}`,!r&&"gutters",o&&"inset",!i&&"sticky"]},xKe,t)})(u);return(0,ct.jsx)(BKe,{as:i,className:DTe(d.root,r),ref:t,ownerState:u,...c})}));wKe&&(wKe.muiSkipListHighlight=!0);const _Ke=wKe;function SKe(e){return lPe("MuiIconButton",e)}const DKe=cPe("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),TKe=KRe(iKe,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${MTe(n.color)}`],n.edge&&t[`edge${MTe(n.edge)}`],t[`size${MTe(n.size)}`]]}})($Re((e=>{let{theme:t}=e;return{textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:UMe(t.palette.action.active,t.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]}})),$Re((e=>{let{theme:t}=e;return{variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(AXe()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}})),...Object.entries(t.palette).filter(AXe()).map((e=>{let[n]=e;return{props:{color:n},style:{"--IconButton-hoverBg":t.vars?`rgba(${(t.vars||t).palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:UMe((t.vars||t).palette[n].main,t.palette.action.hoverOpacity)}}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${DKe.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}}}))),kKe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiIconButton"}),{edge:r=!1,children:o,className:i,color:a="default",disabled:s=!1,disableFocusRipple:l=!1,size:c="medium",...u}=n,d={...n,edge:r,color:a,disabled:s,disableFocusRipple:l,size:c},A=(e=>{const{classes:t,disabled:n,color:r,edge:o,size:i}=e;return TTe({root:["root",n&&"disabled","default"!==r&&`color${MTe(r)}`,o&&`edge${MTe(o)}`,`size${MTe(i)}`]},SKe,t)})(d);return(0,ct.jsx)(TKe,{className:DTe(A.root,i),centerRipple:!0,focusRipple:!l,disabled:s,ref:t,...u,ownerState:d,children:o})})),QKe=kKe,MKe=pPe((0,ct.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function RKe(e){return lPe("MuiChip",e)}const PKe=cPe("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),OKe=KRe("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:o,clickable:i,onDelete:a,size:s,variant:l}=n;return[{[`& .${PKe.avatar}`]:t.avatar},{[`& .${PKe.avatar}`]:t[`avatar${MTe(s)}`]},{[`& .${PKe.avatar}`]:t[`avatarColor${MTe(r)}`]},{[`& .${PKe.icon}`]:t.icon},{[`& .${PKe.icon}`]:t[`icon${MTe(s)}`]},{[`& .${PKe.icon}`]:t[`iconColor${MTe(o)}`]},{[`& .${PKe.deleteIcon}`]:t.deleteIcon},{[`& .${PKe.deleteIcon}`]:t[`deleteIcon${MTe(s)}`]},{[`& .${PKe.deleteIcon}`]:t[`deleteIconColor${MTe(r)}`]},{[`& .${PKe.deleteIcon}`]:t[`deleteIcon${MTe(l)}Color${MTe(r)}`]},t.root,t[`size${MTe(s)}`],t[`color${MTe(r)}`],i&&t.clickable,i&&"default"!==r&&t[`clickableColor${MTe(r)})`],a&&t.deletable,a&&"default"!==r&&t[`deletableColor${MTe(r)}`],t[l],t[`${l}${MTe(r)}`]]}})($Re((e=>{let{theme:t}=e;const n="light"===t.palette.mode?t.palette.grey[700]:t.palette.grey[300];return{maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${PKe.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${PKe.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:n,fontSize:t.typography.pxToRem(12)},[`& .${PKe.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${PKe.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${PKe.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${PKe.icon}`]:{marginLeft:5,marginRight:-6},[`& .${PKe.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:UMe(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:UMe(t.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${PKe.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${PKe.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(t.palette).filter(AXe(["contrastText"])).map((e=>{let[n]=e;return{props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText,[`& .${PKe.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[n].contrastTextChannel} / 0.7)`:UMe(t.palette[n].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].contrastText}}}}})),{props:e=>e.iconColor===e.color,style:{[`& .${PKe.icon}`]:{color:t.vars?t.vars.palette.Chip.defaultIconColor:n}}},{props:e=>e.iconColor===e.color&&"default"!==e.color,style:{[`& .${PKe.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${PKe.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:UMe(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}},...Object.entries(t.palette).filter(AXe(["dark"])).map((e=>{let[n]=e;return{props:{color:n,onDelete:!0},style:{[`&.${PKe.focusVisible}`]:{background:(t.vars||t).palette[n].dark}}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:UMe(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${PKe.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:UMe(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}}},...Object.entries(t.palette).filter(AXe(["dark"])).map((e=>{let[n]=e;return{props:{color:n,clickable:!0},style:{[`&:hover, &.${PKe.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n].dark}}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${PKe.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${PKe.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${PKe.avatar}`]:{marginLeft:4},[`& .${PKe.avatarSmall}`]:{marginLeft:2},[`& .${PKe.icon}`]:{marginLeft:4},[`& .${PKe.iconSmall}`]:{marginLeft:2},[`& .${PKe.deleteIcon}`]:{marginRight:5},[`& .${PKe.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(t.palette).filter(AXe()).map((e=>{let[n]=e;return{props:{variant:"outlined",color:n},style:{color:(t.vars||t).palette[n].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.7)`:UMe(t.palette[n].main,.7)}`,[`&.${PKe.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:UMe(t.palette[n].main,t.palette.action.hoverOpacity)},[`&.${PKe.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.focusOpacity})`:UMe(t.palette[n].main,t.palette.action.focusOpacity)},[`& .${PKe.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.7)`:UMe(t.palette[n].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].main}}}}}))]}}))),FKe=KRe("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${MTe(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function NKe(e){return"Backspace"===e.key||"Delete"===e.key}const LKe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiChip"}),{avatar:r,className:o,clickable:i,color:a="default",component:s,deleteIcon:l,disabled:c=!1,icon:u,label:d,onClick:A,onDelete:f,onKeyDown:p,onKeyUp:h,size:g="medium",variant:m="filled",tabIndex:y,skipFocusWhenDisabled:v=!1,...b}=n,C=F.useRef(null),I=XPe(C,t),E=e=>{e.stopPropagation(),f&&f(e)},x=!(!1===i||!A)||i,B=x||f?iKe:s||"div",w={...n,component:B,disabled:c,size:g,color:a,iconColor:F.isValidElement(u)&&u.props.color||a,onDelete:!!f,clickable:x,variant:m},_=(e=>{const{classes:t,disabled:n,size:r,color:o,iconColor:i,onDelete:a,clickable:s,variant:l}=e;return TTe({root:["root",l,n&&"disabled",`size${MTe(r)}`,`color${MTe(o)}`,s&&"clickable",s&&`clickableColor${MTe(o)}`,a&&"deletable",a&&`deletableColor${MTe(o)}`,`${l}${MTe(o)}`],label:["label",`label${MTe(r)}`],avatar:["avatar",`avatar${MTe(r)}`,`avatarColor${MTe(o)}`],icon:["icon",`icon${MTe(r)}`,`iconColor${MTe(i)}`],deleteIcon:["deleteIcon",`deleteIcon${MTe(r)}`,`deleteIconColor${MTe(o)}`,`deleteIcon${MTe(l)}Color${MTe(o)}`]},RKe,t)})(w),S=B===iKe?{component:s||"div",focusVisibleClassName:_.focusVisible,...f&&{disableRipple:!0}}:{};let D=null;f&&(D=l&&F.isValidElement(l)?F.cloneElement(l,{className:DTe(l.props.className,_.deleteIcon),onClick:E}):(0,ct.jsx)(MKe,{className:DTe(_.deleteIcon),onClick:E}));let T=null;r&&F.isValidElement(r)&&(T=F.cloneElement(r,{className:DTe(_.avatar,r.props.className)}));let k=null;return u&&F.isValidElement(u)&&(k=F.cloneElement(u,{className:DTe(_.icon,u.props.className)})),(0,ct.jsxs)(OKe,{as:B,className:DTe(_.root,o),disabled:!(!x||!c)||void 0,onClick:A,onKeyDown:e=>{e.currentTarget===e.target&&NKe(e)&&e.preventDefault(),p&&p(e)},onKeyUp:e=>{e.currentTarget===e.target&&f&&NKe(e)&&f(e),h&&h(e)},ref:I,tabIndex:v&&c?-1:y,ownerState:w,...S,...b,children:[T||k,(0,ct.jsx)(FKe,{className:DTe(_.label),ownerState:w,children:d}),D]})})),UKe=LKe;function GKe(e){return lPe("MuiInputBase",e)}const jKe=cPe("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);function zKe(e){return lPe("MuiInput",e)}const HKe={...jKe,...cPe("MuiInput",["root","underline","input"])};function VKe(e){return lPe("MuiOutlinedInput",e)}const qKe={...jKe,...cPe("MuiOutlinedInput",["root","notchedOutline","input"])};function YKe(e){return lPe("MuiFilledInput",e)}const XKe={...jKe,...cPe("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},WKe=pPe((0,ct.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),KKe=pPe((0,ct.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function JKe(e){return lPe("MuiAutocomplete",e)}const ZKe=cPe("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var $Ke,eJe;const tJe=KRe("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:r,hasClearIcon:o,hasPopupIcon:i,inputFocused:a,size:s}=n;return[{[`& .${ZKe.tag}`]:t.tag},{[`& .${ZKe.tag}`]:t[`tagSize${MTe(s)}`]},{[`& .${ZKe.inputRoot}`]:t.inputRoot},{[`& .${ZKe.input}`]:t.input},{[`& .${ZKe.input}`]:a&&t.inputFocused},t.root,r&&t.fullWidth,i&&t.hasPopupIcon,o&&t.hasClearIcon]}})({[`&.${ZKe.focused} .${ZKe.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${ZKe.clearIndicator}`]:{visibility:"visible"}},[`& .${ZKe.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${ZKe.inputRoot}`]:{[`.${ZKe.hasPopupIcon}&, .${ZKe.hasClearIcon}&`]:{paddingRight:30},[`.${ZKe.hasPopupIcon}.${ZKe.hasClearIcon}&`]:{paddingRight:56},[`& .${ZKe.input}`]:{width:0,minWidth:30}},[`& .${HKe.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${HKe.root}.${jKe.sizeSmall}`]:{[`& .${HKe.input}`]:{padding:"2px 4px 3px 0"}},[`& .${qKe.root}`]:{padding:9,[`.${ZKe.hasPopupIcon}&, .${ZKe.hasClearIcon}&`]:{paddingRight:39},[`.${ZKe.hasPopupIcon}.${ZKe.hasClearIcon}&`]:{paddingRight:65},[`& .${ZKe.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${ZKe.endAdornment}`]:{right:9}},[`& .${qKe.root}.${jKe.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${ZKe.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${XKe.root}`]:{paddingTop:19,paddingLeft:8,[`.${ZKe.hasPopupIcon}&, .${ZKe.hasClearIcon}&`]:{paddingRight:39},[`.${ZKe.hasPopupIcon}.${ZKe.hasClearIcon}&`]:{paddingRight:65},[`& .${XKe.input}`]:{padding:"7px 4px"},[`& .${ZKe.endAdornment}`]:{right:9}},[`& .${XKe.root}.${jKe.sizeSmall}`]:{paddingBottom:1,[`& .${XKe.input}`]:{padding:"2.5px 4px"}},[`& .${jKe.hiddenLabel}`]:{paddingTop:8},[`& .${XKe.root}.${jKe.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${ZKe.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${XKe.root}.${jKe.hiddenLabel}.${jKe.sizeSmall}`]:{[`& .${ZKe.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${ZKe.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${ZKe.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${ZKe.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${ZKe.inputRoot}`]:{flexWrap:"wrap"}}}]}),nJe=KRe("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),rJe=KRe(QKe,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),oJe=KRe(QKe,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>{let{ownerState:n}=e;return{...t.popupIndicator,...n.popupOpen&&t.popupIndicatorOpen}}})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),iJe=KRe(NFe,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${ZKe.option}`]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})($Re((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}}))),aJe=KRe($Xe,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})($Re((e=>{let{theme:t}=e;return{...t.typography.body1,overflow:"auto"}}))),sJe=KRe("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})($Re((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}}))),lJe=KRe("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})($Re((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}}))),cJe=KRe("ul",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})($Re((e=>{let{theme:t}=e;return{listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${ZKe.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[t.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${ZKe.focused}`]:{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${ZKe.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:UMe(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${ZKe.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:UMe(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${ZKe.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:UMe(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}}}}))),uJe=KRe(_Ke,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})($Re((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,top:-8}}))),dJe=KRe("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${ZKe.option}`]:{paddingLeft:24}}),AJe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiAutocomplete"}),{autoComplete:r=!1,autoHighlight:o=!1,autoSelect:i=!1,blurOnSelect:a=!1,ChipProps:s,className:l,clearIcon:c=$Ke||($Ke=(0,ct.jsx)(WKe,{fontSize:"small"})),clearOnBlur:u=!n.freeSolo,clearOnEscape:d=!1,clearText:A="Clear",closeText:f="Close",componentsProps:p,defaultValue:h=(n.multiple?[]:null),disableClearable:g=!1,disableCloseOnSelect:m=!1,disabled:y=!1,disabledItemsFocusable:v=!1,disableListWrap:b=!1,disablePortal:C=!1,filterOptions:I,filterSelectedOptions:E=!1,forcePopupIcon:x="auto",freeSolo:B=!1,fullWidth:w=!1,getLimitTagsText:_=e=>`+${e}`,getOptionDisabled:S,getOptionKey:D,getOptionLabel:T,isOptionEqualToValue:k,groupBy:Q,handleHomeEndKeys:M=!n.freeSolo,id:R,includeInputInList:P=!1,inputValue:O,limitTags:N=-1,ListboxComponent:L,ListboxProps:U,loading:G=!1,loadingText:j="Loading\u2026",multiple:z=!1,noOptionsText:H="No options",onChange:V,onClose:q,onHighlightChange:Y,onInputChange:X,onOpen:W,open:K,openOnFocus:J=!1,openText:Z="Open",options:$,PaperComponent:ee,PopperComponent:te,popupIcon:ne=eJe||(eJe=(0,ct.jsx)(KKe,{})),readOnly:re=!1,renderGroup:oe,renderInput:ie,renderOption:ae,renderTags:se,selectOnFocus:le=!n.freeSolo,size:ce="medium",slots:ue={},slotProps:de={},value:Ae,...fe}=n,{getRootProps:pe,getInputProps:he,getInputLabelProps:ge,getPopupIndicatorProps:me,getClearProps:ye,getTagProps:ve,getListboxProps:be,getOptionProps:Ce,value:Ie,dirty:Ee,expanded:xe,id:Be,popupOpen:we,focused:_e,focusedTag:Se,anchorEl:De,setAnchorEl:Te,inputValue:ke,groupedOptions:Qe}=EKe({...n,componentName:"Autocomplete"}),Me=!g&&!y&&Ee&&!re,Re=(!B||!0===x)&&!1!==x,{onMouseDown:Pe}=he(),{ref:Oe,...Fe}=be(),Ne=T||(e=>e.label??e),Le={...n,disablePortal:C,expanded:xe,focused:_e,fullWidth:w,getOptionLabel:Ne,hasClearIcon:Me,hasPopupIcon:Re,inputFocused:-1===Se,popupOpen:we,size:ce},Ue=(e=>{const{classes:t,disablePortal:n,expanded:r,focused:o,fullWidth:i,hasClearIcon:a,hasPopupIcon:s,inputFocused:l,popupOpen:c,size:u}=e;return TTe({root:["root",r&&"expanded",o&&"focused",i&&"fullWidth",a&&"hasClearIcon",s&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",l&&"inputFocused"],tag:["tag",`tagSize${MTe(u)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",c&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]},JKe,t)})(Le),Ge={slots:{paper:ee,popper:te,...ue},slotProps:{chip:s,listbox:U,...p,...de}},[je,ze]=YFe("listbox",{elementType:cJe,externalForwardedProps:Ge,ownerState:Le,className:Ue.listbox,additionalProps:Fe,ref:Oe}),[He,Ve]=YFe("paper",{elementType:$Xe,externalForwardedProps:Ge,ownerState:Le,className:Ue.paper}),[qe,Ye]=YFe("popper",{elementType:NFe,externalForwardedProps:Ge,ownerState:Le,className:Ue.popper,additionalProps:{disablePortal:C,style:{width:De?De.clientWidth:null},role:"presentation",anchorEl:De,open:we}});let Xe;if(z&&Ie.length>0){const e=e=>({className:Ue.tag,disabled:y,...ve(e)});Xe=se?se(Ie,e,Le):Ie.map(((t,n)=>{const{key:r,...o}=e({index:n});return(0,ct.jsx)(UKe,{label:Ne(t),size:ce,...o,...Ge.slotProps.chip},r)}))}if(N>-1&&Array.isArray(Xe)){const e=Xe.length-N;!_e&&e>0&&(Xe=Xe.splice(0,N),Xe.push((0,ct.jsx)("span",{className:Ue.tag,children:_(e)},Xe.length)))}const We=oe||(e=>(0,ct.jsxs)("li",{children:[(0,ct.jsx)(uJe,{className:Ue.groupLabel,ownerState:Le,component:"div",children:e.group}),(0,ct.jsx)(dJe,{className:Ue.groupUl,ownerState:Le,children:e.children})]},e.key)),Ke=ae||((e,t)=>{const{key:n,...r}=e;return(0,ct.jsx)("li",{...r,children:Ne(t)},n)}),Je=(e,t)=>{const n=Ce({option:e,index:t});return Ke({...n,className:Ue.option},e,{selected:n["aria-selected"],index:t,inputValue:ke},Le)},Ze=Ge.slotProps.clearIndicator,$e=Ge.slotProps.popupIndicator,et=e=>(0,ct.jsx)(iJe,{as:qe,...Ye,children:(0,ct.jsx)(aJe,{as:He,...Ve,children:e})});let tt=null;return Qe.length>0?tt=et((0,ct.jsx)(je,{as:L,...ze,children:Qe.map(((e,t)=>Q?We({key:e.key,group:e.group,children:e.options.map(((t,n)=>Je(t,e.index+n)))}):Je(e,t)))})):G&&0===Qe.length?tt=et((0,ct.jsx)(sJe,{className:Ue.loading,ownerState:Le,children:j})):0!==Qe.length||B||G||(tt=et((0,ct.jsx)(lJe,{className:Ue.noOptions,ownerState:Le,role:"presentation",onMouseDown:e=>{e.preventDefault()},children:H}))),(0,ct.jsxs)(F.Fragment,{children:[(0,ct.jsx)(tJe,{ref:t,className:DTe(Ue.root,l),ownerState:Le,...pe(fe),children:ie({id:Be,disabled:y,fullWidth:!0,size:"small"===ce?"small":void 0,InputLabelProps:ge(),InputProps:{ref:Te,className:Ue.inputRoot,startAdornment:Xe,onMouseDown:e=>{e.target===e.currentTarget&&Pe(e)},...(Me||Re)&&{endAdornment:(0,ct.jsxs)(nJe,{className:Ue.endAdornment,ownerState:Le,children:[Me?(0,ct.jsx)(rJe,{...ye(),"aria-label":A,title:A,ownerState:Le,...Ze,className:DTe(Ue.clearIndicator,Ze?.className),children:c}):null,Re?(0,ct.jsx)(oJe,{...me(),disabled:y,"aria-label":we?f:Z,title:we?f:Z,ownerState:Le,...$e,className:DTe(Ue.popupIndicator,$e?.className),children:ne}):null]})}},inputProps:{className:Ue.input,disabled:y,readOnly:re,...he()}})}),De?tt:null]})})),fJe=AJe;function pJe(e){return lPe("MuiButtonGroup",e)}const hJe=cPe("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","horizontal","vertical","colorPrimary","colorSecondary","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),gJe=KRe("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${hJe.grouped}`]:t.grouped},{[`& .${hJe.grouped}`]:t[`grouped${MTe(n.orientation)}`]},{[`& .${hJe.grouped}`]:t[`grouped${MTe(n.variant)}`]},{[`& .${hJe.grouped}`]:t[`grouped${MTe(n.variant)}${MTe(n.orientation)}`]},{[`& .${hJe.grouped}`]:t[`grouped${MTe(n.variant)}${MTe(n.color)}`]},{[`& .${hJe.firstButton}`]:t.firstButton},{[`& .${hJe.lastButton}`]:t.lastButton},{[`& .${hJe.middleButton}`]:t.middleButton},t.root,t[n.variant],!0===n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,"vertical"===n.orientation&&t.vertical]}})($Re((e=>{let{theme:t}=e;return{display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius,variants:[{props:{variant:"contained"},style:{boxShadow:(t.vars||t).shadows[2]}},{props:{disableElevation:!0},style:{boxShadow:"none"}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${hJe.lastButton},& .${hJe.middleButton}`]:{borderTopRightRadius:0,borderTopLeftRadius:0},[`& .${hJe.firstButton},& .${hJe.middleButton}`]:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},{props:{orientation:"horizontal"},style:{[`& .${hJe.firstButton},& .${hJe.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${hJe.lastButton},& .${hJe.middleButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},{props:{variant:"text",orientation:"horizontal"},style:{[`& .${hJe.firstButton},& .${hJe.middleButton}`]:{borderRight:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:"1px solid "+("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),[`&.${hJe.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}}}},{props:{variant:"text",orientation:"vertical"},style:{[`& .${hJe.firstButton},& .${hJe.middleButton}`]:{borderBottom:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:"1px solid "+("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),[`&.${hJe.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}}}},...Object.entries(t.palette).filter(AXe()).flatMap((e=>{let[n]=e;return[{props:{variant:"text",color:n},style:{[`& .${hJe.firstButton},& .${hJe.middleButton}`]:{borderColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.5)`:UMe(t.palette[n].main,.5)}}}]})),{props:{variant:"outlined",orientation:"horizontal"},style:{[`& .${hJe.firstButton},& .${hJe.middleButton}`]:{borderRightColor:"transparent","&:hover":{borderRightColor:"currentColor"}},[`& .${hJe.lastButton},& .${hJe.middleButton}`]:{marginLeft:-1}}},{props:{variant:"outlined",orientation:"vertical"},style:{[`& .${hJe.firstButton},& .${hJe.middleButton}`]:{borderBottomColor:"transparent","&:hover":{borderBottomColor:"currentColor"}},[`& .${hJe.lastButton},& .${hJe.middleButton}`]:{marginTop:-1}}},{props:{variant:"contained",orientation:"horizontal"},style:{[`& .${hJe.firstButton},& .${hJe.middleButton}`]:{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${hJe.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}}}},{props:{variant:"contained",orientation:"vertical"},style:{[`& .${hJe.firstButton},& .${hJe.middleButton}`]:{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${hJe.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}}}},...Object.entries(t.palette).filter(AXe(["dark"])).map((e=>{let[n]=e;return{props:{variant:"contained",color:n},style:{[`& .${hJe.firstButton},& .${hJe.middleButton}`]:{borderColor:(t.vars||t).palette[n].dark}}}}))],[`& .${hJe.grouped}`]:{minWidth:40,boxShadow:"none",props:{variant:"contained"},style:{"&:hover":{boxShadow:"none"}}}}}))),mJe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiButtonGroup"}),{children:r,className:o,color:i="primary",component:a="div",disabled:s=!1,disableElevation:l=!1,disableFocusRipple:c=!1,disableRipple:u=!1,fullWidth:d=!1,orientation:A="horizontal",size:f="medium",variant:p="outlined",...h}=n,g={...n,color:i,component:a,disabled:s,disableElevation:l,disableFocusRipple:c,disableRipple:u,fullWidth:d,orientation:A,size:f,variant:p},m=(e=>{const{classes:t,color:n,disabled:r,disableElevation:o,fullWidth:i,orientation:a,variant:s}=e;return TTe({root:["root",s,a,i&&"fullWidth",o&&"disableElevation",`color${MTe(n)}`],grouped:["grouped",`grouped${MTe(a)}`,`grouped${MTe(s)}`,`grouped${MTe(s)}${MTe(a)}`,`grouped${MTe(s)}${MTe(n)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]},pJe,t)})(g),y=F.useMemo((()=>({className:m.grouped,color:i,disabled:s,disableElevation:l,disableFocusRipple:c,disableRipple:u,fullWidth:d,size:f,variant:p})),[i,s,l,c,u,d,f,p,m.grouped]),v=function(e){return F.Children.toArray(e).filter((e=>F.isValidElement(e)))}(r),b=v.length,C=e=>{const t=0===e,n=e===b-1;return t&&n?"":t?m.firstButton:n?m.lastButton:m.middleButton};return(0,ct.jsx)(gJe,{as:a,role:"group",className:DTe(m.root,o),ref:t,ownerState:g,...h,children:(0,ct.jsx)(lKe.Provider,{value:y,children:v.map(((e,t)=>(0,ct.jsx)(cKe.Provider,{value:C(t),children:e},t)))})})})),yJe=mJe;function vJe(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function bJe(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(vJe(e.value)&&""!==e.value||t&&vJe(e.defaultValue)&&""!==e.defaultValue)}const CJe=function(e,t){return F.isValidElement(e)&&-1!==t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)};const IJe=F.createContext(void 0);function EJe(e){return lPe("MuiFormControl",e)}cPe("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const xJe=KRe("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return{...t.root,...t[`margin${MTe(n.margin)}`],...n.fullWidth&&t.fullWidth}}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),BJe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiFormControl"}),{children:r,className:o,color:i="primary",component:a="div",disabled:s=!1,error:l=!1,focused:c,fullWidth:u=!1,hiddenLabel:d=!1,margin:A="none",required:f=!1,size:p="medium",variant:h="outlined",...g}=n,m={...n,color:i,component:a,disabled:s,error:l,fullWidth:u,hiddenLabel:d,margin:A,required:f,size:p,variant:h},y=(e=>{const{classes:t,margin:n,fullWidth:r}=e;return TTe({root:["root","none"!==n&&`margin${MTe(n)}`,r&&"fullWidth"]},EJe,t)})(m),[v,b]=F.useState((()=>{let e=!1;return r&&F.Children.forEach(r,(t=>{if(!CJe(t,["Input","Select"]))return;const n=CJe(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[C,I]=F.useState((()=>{let e=!1;return r&&F.Children.forEach(r,(t=>{CJe(t,["Input","Select"])&&(bJe(t.props,!0)||bJe(t.props.inputProps,!0))&&(e=!0)})),e})),[E,x]=F.useState(!1);s&&E&&x(!1);const B=void 0===c||s?E:c;let w;F.useRef(!1);const _=F.useMemo((()=>({adornedStart:v,setAdornedStart:b,color:i,disabled:s,error:l,filled:C,focused:B,fullWidth:u,hiddenLabel:d,size:p,onBlur:()=>{x(!1)},onEmpty:()=>{I(!1)},onFilled:()=>{I(!0)},onFocus:()=>{x(!0)},registerEffect:w,required:f,variant:h})),[v,i,s,l,C,B,u,d,w,f,p,h]);return(0,ct.jsx)(IJe.Provider,{value:_,children:(0,ct.jsx)(xJe,{as:a,ownerState:m,className:DTe(y.root,o),ref:t,...g,children:r})})})),wJe=BJe;function _Je(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}function SJe(){return F.useContext(IJe)}function DJe(e){return lPe("MuiFormLabel",e)}const TJe=cPe("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),kJe=KRe("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return{...t.root,..."secondary"===n.color&&t.colorSecondary,...n.filled&&t.filled}}})($Re((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(AXe()).map((e=>{let[n]=e;return{props:{color:n},style:{[`&.${TJe.focused}`]:{color:(t.vars||t).palette[n].main}}}})),{props:{},style:{[`&.${TJe.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${TJe.error}`]:{color:(t.vars||t).palette.error.main}}}]}}))),QJe=KRe("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})($Re((e=>{let{theme:t}=e;return{[`&.${TJe.error}`]:{color:(t.vars||t).palette.error.main}}}))),MJe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiFormLabel"}),{children:r,className:o,color:i,component:a="label",disabled:s,error:l,filled:c,focused:u,required:d,...A}=n,f=_Je({props:n,muiFormControl:SJe(),states:["color","required","focused","disabled","error","filled"]}),p={...n,color:f.color||"primary",component:a,disabled:f.disabled,error:f.error,filled:f.filled,focused:f.focused,required:f.required},h=(e=>{const{classes:t,color:n,focused:r,disabled:o,error:i,filled:a,required:s}=e;return TTe({root:["root",`color${MTe(n)}`,o&&"disabled",i&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",i&&"error"]},DJe,t)})(p);return(0,ct.jsxs)(kJe,{as:a,ownerState:p,className:DTe(h.root,o),ref:t,...A,children:[r,f.required&&(0,ct.jsxs)(QJe,{ownerState:p,"aria-hidden":!0,className:h.asterisk,children:["\u2009","*"]})]})})),RJe=MJe;function PJe(e){return lPe("MuiInputLabel",e)}cPe("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const OJe=KRe(RJe,{shouldForwardProp:e=>XRe(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${TJe.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})($Re((e=>{let{theme:t}=e;return{display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:e=>{let{ownerState:t}=e;return t.shrink},style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:e=>{let{ownerState:t}=e;return!t.disableAnimation},style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:e=>{let{variant:t,ownerState:n}=e;return"filled"===t&&n.shrink},style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:e=>{let{variant:t,ownerState:n,size:r}=e;return"filled"===t&&n.shrink&&"small"===r},style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:e=>{let{variant:t,ownerState:n}=e;return"outlined"===t&&n.shrink},style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}}))),FJe=F.forwardRef((function(e,t){const n=rPe({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,margin:o,shrink:i,variant:a,className:s,...l}=n,c=SJe();let u=i;"undefined"===typeof u&&c&&(u=c.filled||c.focused||c.adornedStart);const d=_Je({props:n,muiFormControl:c,states:["size","variant","required","focused"]}),A={...n,disableAnimation:r,formControl:c,shrink:u,size:d.size,variant:d.variant,required:d.required,focused:d.focused},f=(e=>{const{classes:t,formControl:n,size:r,shrink:o,disableAnimation:i,variant:a,required:s}=e,l=TTe({root:["root",n&&"formControl",!i&&"animated",o&&"shrink",r&&"normal"!==r&&`size${MTe(r)}`,a],asterisk:[s&&"asterisk"]},PJe,t);return{...t,...l}})(A);return(0,ct.jsx)(OJe,{"data-shrink":u,ref:t,className:DTe(f.root,s),...l,ownerState:A,classes:f})})),NJe=FJe;n(186);const LJe=tOe;const UJe=F.createContext({});function GJe(e){return lPe("MuiList",e)}cPe("MuiList",["root","padding","dense","subheader"]);const jJe=KRe("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return t.subheader},style:{paddingTop:0}}]}),zJe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiList"}),{children:r,className:o,component:i="ul",dense:a=!1,disablePadding:s=!1,subheader:l,...c}=n,u=F.useMemo((()=>({dense:a})),[a]),d={...n,component:i,dense:a,disablePadding:s},A=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:o}=e;return TTe({root:["root",!n&&"padding",r&&"dense",o&&"subheader"]},GJe,t)})(d);return(0,ct.jsx)(UJe.Provider,{value:u,children:(0,ct.jsxs)(jJe,{as:i,className:DTe(A.root,o),ref:t,ownerState:d,...c,children:[l,r]})})})),HJe=zJe,VJe=FXe,qJe=eOe,YJe=OXe;function XJe(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function WJe(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function KJe(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join("")))}function JJe(e,t,n,r,o,i){let a=!1,s=o(e,t,!!t&&n);for(;s;){if(s===e.firstChild){if(a)return!1;a=!0}const t=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&KJe(s,i)&&!t)return s.focus(),!0;s=o(e,s,n)}return!1}const ZJe=F.forwardRef((function(e,t){const{actions:n,autoFocus:r=!1,autoFocusItem:o=!1,children:i,className:a,disabledItemsFocusable:s=!1,disableListWrap:l=!1,onKeyDown:c,variant:u="selectedMenu",...d}=e,A=F.useRef(null),f=F.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});qJe((()=>{r&&A.current.focus()}),[r]),F.useImperativeHandle(n,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const r=!A.current.style.width;if(e.clientHeight<A.current.clientHeight&&r){const t=`${VJe(YJe(e))}px`;A.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,A.current.style.width=`calc(100% + ${t})`}return A.current}})),[]);const p=XPe(A,t);let h=-1;F.Children.forEach(i,((e,t)=>{F.isValidElement(e)?(e.props.disabled||("selectedMenu"===u&&e.props.selected||-1===h)&&(h=t),h===t&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(h+=1,h>=i.length&&(h=-1))):h===t&&(h+=1,h>=i.length&&(h=-1))}));const g=F.Children.map(i,((e,t)=>{if(t===h){const t={};return o&&(t.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===u&&(t.tabIndex=0),F.cloneElement(e,t)}return e}));return(0,ct.jsx)(HJe,{role:"menu",ref:p,className:a,onKeyDown:e=>{const t=A.current,n=e.key;if(e.ctrlKey||e.metaKey||e.altKey)return void(c&&c(e));const r=LJe(t).activeElement;if("ArrowDown"===n)e.preventDefault(),JJe(t,r,l,s,XJe);else if("ArrowUp"===n)e.preventDefault(),JJe(t,r,l,s,WJe);else if("Home"===n)e.preventDefault(),JJe(t,null,l,s,XJe);else if("End"===n)e.preventDefault(),JJe(t,null,l,s,WJe);else if(1===n.length){const o=f.current,i=n.toLowerCase(),a=performance.now();o.keys.length>0&&(a-o.lastTime>500?(o.keys=[],o.repeating=!0,o.previousKeyMatched=!0):o.repeating&&i!==o.keys[0]&&(o.repeating=!1)),o.lastTime=a,o.keys.push(i);const l=r&&!o.repeating&&KJe(r,o);o.previousKeyMatched&&(l||JJe(t,r,!1,s,XJe,o))?e.preventDefault():o.previousKeyMatched=!1}c&&c(e)},tabIndex:r?0:-1,...d,children:g})})),$Je=ZJe;function eZe(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];clearTimeout(t),t=setTimeout((()=>{e.apply(this,o)}),n)}return r.clear=()=>{clearTimeout(t)},r}const tZe=eZe;function nZe(e){return lPe("MuiPopover",e)}cPe("MuiPopover",["root","paper"]);function rZe(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function oZe(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function iZe(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?`${e}px`:e)).join(" ")}function aZe(e){return"function"===typeof e?e():e}const sZe=KRe(KXe,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),lZe=KRe($Xe,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),cZe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiPopover"}),{action:r,anchorEl:o,anchorOrigin:i={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:s="anchorEl",children:l,className:c,container:u,elevation:d=8,marginThreshold:A=16,open:f,PaperProps:p={},slots:h={},slotProps:g={},transformOrigin:m={vertical:"top",horizontal:"left"},TransitionComponent:y=$Pe,transitionDuration:v="auto",TransitionProps:{onEntering:b,...C}={},disableScrollLock:I=!1,...E}=n,x=g?.paper??p,B=F.useRef(),w={...n,anchorOrigin:i,anchorReference:s,elevation:d,marginThreshold:A,externalPaperSlotProps:x,transformOrigin:m,TransitionComponent:y,transitionDuration:v,TransitionProps:C},_=(e=>{const{classes:t}=e;return TTe({root:["root"],paper:["paper"]},nZe,t)})(w),S=F.useCallback((()=>{if("anchorPosition"===s)return a;const e=aZe(o),t=(e&&1===e.nodeType?e:LJe(B.current).body).getBoundingClientRect();return{top:t.top+rZe(t,i.vertical),left:t.left+oZe(t,i.horizontal)}}),[o,i.horizontal,i.vertical,a,s]),D=F.useCallback((e=>({vertical:rZe(e,m.vertical),horizontal:oZe(e,m.horizontal)})),[m.horizontal,m.vertical]),T=F.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=D(t);if("none"===s)return{top:null,left:null,transformOrigin:iZe(n)};const r=S();let i=r.top-n.vertical,a=r.left-n.horizontal;const l=i+t.height,c=a+t.width,u=YJe(aZe(o)),d=u.innerHeight-A,f=u.innerWidth-A;if(null!==A&&i<A){const e=i-A;i-=e,n.vertical+=e}else if(null!==A&&l>d){const e=l-d;i-=e,n.vertical+=e}if(null!==A&&a<A){const e=a-A;a-=e,n.horizontal+=e}else if(c>f){const e=c-f;a-=e,n.horizontal+=e}return{top:`${Math.round(i)}px`,left:`${Math.round(a)}px`,transformOrigin:iZe(n)}}),[o,s,S,D,A]),[k,Q]=F.useState(f),M=F.useCallback((()=>{const e=B.current;if(!e)return;const t=T(e);null!==t.top&&e.style.setProperty("top",t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,Q(!0)}),[T]);F.useEffect((()=>(I&&window.addEventListener("scroll",M),()=>window.removeEventListener("scroll",M))),[o,I,M]);F.useEffect((()=>{f&&M()})),F.useImperativeHandle(r,(()=>f?{updatePosition:()=>{M()}}:null),[f,M]),F.useEffect((()=>{if(!f)return;const e=tZe((()=>{M()})),t=YJe(o);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[o,f,M]);let R=v;"auto"!==v||y.muiSupportAuto||(R=void 0);const P=u||(o?LJe(aZe(o)).body:void 0),O={slots:h,slotProps:{...g,paper:x}},[N,L]=YFe("paper",{elementType:lZe,externalForwardedProps:O,additionalProps:{elevation:d,className:DTe(_.paper,x?.className),style:k?x.style:{...x.style,opacity:0}},ownerState:w}),[U,{slotProps:G,...j}]=YFe("root",{elementType:sZe,externalForwardedProps:O,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:P,open:f},ownerState:w,className:DTe(_.root,c)}),z=XPe(B,L.ref);return(0,ct.jsx)(U,{...j,...!EWe(U)&&{slotProps:G,disableScrollLock:I},...E,ref:t,children:(0,ct.jsx)(y,{appear:!0,in:f,onEntering:(e,t)=>{b&&b(e,t),M()},onExited:()=>{Q(!1)},timeout:R,...C,children:(0,ct.jsx)(N,{...L,ref:z,children:l})})})})),uZe=cZe;function dZe(e){return lPe("MuiMenu",e)}cPe("MuiMenu",["root","paper","list"]);const AZe={vertical:"top",horizontal:"right"},fZe={vertical:"top",horizontal:"left"},pZe=KRe(uZe,{shouldForwardProp:e=>XRe(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),hZe=KRe(lZe,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),gZe=KRe($Je,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),mZe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiMenu"}),{autoFocus:r=!0,children:o,className:i,disableAutoFocusItem:a=!1,MenuListProps:s={},onClose:l,open:c,PaperProps:u={},PopoverClasses:d,transitionDuration:A="auto",TransitionProps:{onEntering:f,...p}={},variant:h="selectedMenu",slots:g={},slotProps:m={},...y}=n,v=xPe(),b={...n,autoFocus:r,disableAutoFocusItem:a,MenuListProps:s,onEntering:f,PaperProps:u,transitionDuration:A,TransitionProps:p,variant:h},C=(e=>{const{classes:t}=e;return TTe({root:["root"],paper:["paper"],list:["list"]},dZe,t)})(b),I=r&&!a&&c,E=F.useRef(null);let x=-1;F.Children.map(o,((e,t)=>{F.isValidElement(e)&&(e.props.disabled||("selectedMenu"===h&&e.props.selected||-1===x)&&(x=t))}));const B=g.paper??hZe,w=m.paper??u,_=_Fe({elementType:g.root,externalSlotProps:m.root,ownerState:b,className:[C.root,i]}),S=_Fe({elementType:B,externalSlotProps:w,ownerState:b,className:C.paper});return(0,ct.jsx)(pZe,{onClose:l,anchorOrigin:{vertical:"bottom",horizontal:v?"right":"left"},transformOrigin:v?AZe:fZe,slots:{paper:B,root:g.root},slotProps:{root:_,paper:S},open:c,ref:t,transitionDuration:A,TransitionProps:{onEntering:(e,t)=>{E.current&&E.current.adjustStyleForScrollbar(e,{direction:v?"rtl":"ltr"}),f&&f(e,t)},...p},ownerState:b,...y,classes:d,children:(0,ct.jsx)(gZe,{onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),l&&l(e,"tabKeyDown"))},actions:E,autoFocus:r&&(-1===x||a),autoFocusItem:I,variant:h,...s,className:DTe(C.list,s.className),children:o})})})),yZe=mZe;const vZe=cPe("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const bZe=cPe("MuiListItemIcon",["root","alignItemsFlexStart"]);const CZe=cPe("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function IZe(e){return lPe("MuiMenuItem",e)}const EZe=cPe("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),xZe=KRe(iKe,{shouldForwardProp:e=>XRe(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})($Re((e=>{let{theme:t}=e;return{...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${EZe.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:UMe(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${EZe.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:UMe(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${EZe.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:UMe(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:UMe(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${EZe.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${EZe.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${vZe.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${vZe.inset}`]:{marginLeft:52},[`& .${CZe.root}`]:{marginTop:0,marginBottom:0},[`& .${CZe.inset}`]:{paddingLeft:36},[`& .${bZe.root}`]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${bZe.root} svg`]:{fontSize:"1.25rem"}}}]}}))),BZe=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiMenuItem"}),{autoFocus:r=!1,component:o="li",dense:i=!1,divider:a=!1,disableGutters:s=!1,focusVisibleClassName:l,role:c="menuitem",tabIndex:u,className:d,...A}=n,f=F.useContext(UJe),p=F.useMemo((()=>({dense:i||f.dense||!1,disableGutters:s})),[f.dense,i,s]),h=F.useRef(null);qJe((()=>{r&&h.current&&h.current.focus()}),[r]);const g={...n,dense:p.dense,divider:a,disableGutters:s},m=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:o,selected:i,classes:a}=e,s=TTe({root:["root",n&&"dense",t&&"disabled",!o&&"gutters",r&&"divider",i&&"selected"]},IZe,a);return{...a,...s}})(n),y=XPe(h,t);let v;return n.disabled||(v=void 0!==u?u:-1),(0,ct.jsx)(UJe.Provider,{value:p,children:(0,ct.jsx)(xZe,{ref:y,role:c,tabIndex:v,component:o,focusVisibleClassName:DTe(m.focusVisible,l),className:DTe(m.root,d),...A,ownerState:g,classes:m})})})),wZe=BZe;function _Ze(e){return lPe("MuiNativeSelect",e)}const SZe=cPe("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),DZe=KRe("select")((e=>{let{theme:t}=e;return{MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${SZe.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:e=>{let{ownerState:t}=e;return"filled"!==t.variant&&"outlined"!==t.variant},style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]}})),TZe=KRe(DZe,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:XRe,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${SZe.multiple}`]:t.multiple}]}})({}),kZe=KRe("svg")((e=>{let{theme:t}=e;return{position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${SZe.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:e=>{let{ownerState:t}=e;return t.open},style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]}})),QZe=KRe(kZe,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${MTe(n.variant)}`],n.open&&t.iconOpen]}})({}),MZe=F.forwardRef((function(e,t){const{className:n,disabled:r,error:o,IconComponent:i,inputRef:a,variant:s="standard",...l}=e,c={...e,disabled:r,variant:s,error:o},u=(e=>{const{classes:t,variant:n,disabled:r,multiple:o,open:i,error:a}=e;return TTe({select:["select",n,r&&"disabled",o&&"multiple",a&&"error"],icon:["icon",`icon${MTe(n)}`,i&&"iconOpen",r&&"disabled"]},_Ze,t)})(c);return(0,ct.jsxs)(F.Fragment,{children:[(0,ct.jsx)(TZe,{ownerState:c,className:DTe(u.select,n),disabled:r,ref:a||t,...l}),e.multiple?null:(0,ct.jsx)(QZe,{as:i,ownerState:c,className:u.icon})]})})),RZe=MZe;function PZe(e){return lPe("MuiSelect",e)}const OZe=cPe("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var FZe;const NZe=KRe(DZe,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${OZe.select}`]:t.select},{[`&.${OZe.select}`]:t[n.variant]},{[`&.${OZe.error}`]:t.error},{[`&.${OZe.multiple}`]:t.multiple}]}})({[`&.${OZe.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),LZe=KRe(kZe,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${MTe(n.variant)}`],n.open&&t.iconOpen]}})({}),UZe=KRe("input",{shouldForwardProp:e=>YRe(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function GZe(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function jZe(e){return null==e||"string"===typeof e&&!e.trim()}const zZe=F.forwardRef((function(e,t){const{"aria-describedby":n,"aria-label":r,autoFocus:o,autoWidth:i,children:a,className:s,defaultOpen:l,defaultValue:c,disabled:u,displayEmpty:d,error:A=!1,IconComponent:f,inputRef:p,labelId:h,MenuProps:g={},multiple:m,name:y,onBlur:v,onChange:b,onClose:C,onFocus:I,onOpen:E,open:x,readOnly:B,renderValue:w,SelectDisplayProps:_={},tabIndex:S,type:D,value:T,variant:k="standard",...Q}=e,[M,R]=qFe({controlled:T,default:c,name:"Select"}),[P,O]=qFe({controlled:x,default:l,name:"Select"}),N=F.useRef(null),L=F.useRef(null),[U,G]=F.useState(null),{current:j}=F.useRef(null!=x),[z,H]=F.useState(),V=XPe(t,p),q=F.useCallback((e=>{L.current=e,e&&G(e)}),[]),Y=U?.parentNode;F.useImperativeHandle(V,(()=>({focus:()=>{L.current.focus()},node:N.current,value:M})),[M]),F.useEffect((()=>{l&&P&&U&&!j&&(H(i?null:Y.clientWidth),L.current.focus())}),[U,i]),F.useEffect((()=>{o&&L.current.focus()}),[o]),F.useEffect((()=>{if(!h)return;const e=LJe(L.current).getElementById(h);if(e){const t=()=>{getSelection().isCollapsed&&L.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[h]);const X=(e,t)=>{e?E&&E(t):C&&C(t),j||(H(i?null:Y.clientWidth),O(e))},W=F.Children.toArray(a),K=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(m){n=Array.isArray(M)?M.slice():[];const t=M.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),M!==n&&(R(n),b)){const r=t.nativeEvent||t,o=new r.constructor(r.type,r);Object.defineProperty(o,"target",{writable:!0,value:{value:n,name:y}}),b(o,e)}m||X(!1,t)}},J=null!==U&&P;let Z,$;delete Q["aria-invalid"];const ee=[];let te=!1,ne=!1;(bJe({value:M})||d)&&(w?Z=w(M):te=!0);const re=W.map((e=>{if(!F.isValidElement(e))return null;let t;if(m){if(!Array.isArray(M))throw new Error(kTe(2));t=M.some((t=>GZe(t,e.props.value))),t&&te&&ee.push(e.props.children)}else t=GZe(M,e.props.value),t&&te&&($=e.props.children);return t&&(ne=!0),F.cloneElement(e,{"aria-selected":t?"true":"false",onClick:K(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));te&&(Z=m?0===ee.length?null:ee.reduce(((e,t,n)=>(e.push(t),n<ee.length-1&&e.push(", "),e)),[]):$);let oe,ie=z;!i&&j&&U&&(ie=Y.clientWidth),oe="undefined"!==typeof S?S:u?null:0;const ae=_.id||(y?`mui-component-select-${y}`:void 0),se={...e,variant:k,value:M,open:J,error:A},le=(e=>{const{classes:t,variant:n,disabled:r,multiple:o,open:i,error:a}=e;return TTe({select:["select",n,r&&"disabled",o&&"multiple",a&&"error"],icon:["icon",`icon${MTe(n)}`,i&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]},PZe,t)})(se),ce={...g.PaperProps,...g.slotProps?.paper},ue=zFe();return(0,ct.jsxs)(F.Fragment,{children:[(0,ct.jsx)(NZe,{as:"div",ref:q,tabIndex:oe,role:"combobox","aria-controls":ue,"aria-disabled":u?"true":void 0,"aria-expanded":J?"true":"false","aria-haspopup":"listbox","aria-label":r,"aria-labelledby":[h,ae].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:e=>{if(!B){[" ","ArrowUp","ArrowDown","Enter"].includes(e.key)&&(e.preventDefault(),X(!0,e))}},onMouseDown:u||B?null:e=>{0===e.button&&(e.preventDefault(),L.current.focus(),X(!0,e))},onBlur:e=>{!J&&v&&(Object.defineProperty(e,"target",{writable:!0,value:{value:M,name:y}}),v(e))},onFocus:I,..._,ownerState:se,className:DTe(_.className,le.select,s),id:ae,children:jZe(Z)?FZe||(FZe=(0,ct.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):Z}),(0,ct.jsx)(UZe,{"aria-invalid":A,value:Array.isArray(M)?M.join(","):M,name:y,ref:N,"aria-hidden":!0,onChange:e=>{const t=W.find((t=>t.props.value===e.target.value));void 0!==t&&(R(t.props.value),b&&b(e,t))},tabIndex:-1,disabled:u,className:le.nativeInput,autoFocus:o,...Q,ownerState:se}),(0,ct.jsx)(LZe,{as:f,className:le.icon,ownerState:se}),(0,ct.jsx)(yZe,{id:`menu-${y||""}`,anchorEl:Y,open:J,onClose:e=>{X(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...g,MenuListProps:{"aria-labelledby":h,role:"listbox","aria-multiselectable":m?"true":void 0,disableListWrap:!0,id:ue,...g.MenuListProps},slotProps:{...g.slotProps,paper:{...ce,style:{minWidth:ie,...null!=ce?ce.style:null}}},children:re})]})})),HZe=zZe;function VZe(e){return parseInt(e,10)||0}const qZe={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};const YZe=F.forwardRef((function(e,t){const{onChange:n,maxRows:r,minRows:o=1,style:i,value:a,...s}=e,{current:l}=F.useRef(null!=a),c=F.useRef(null),u=YPe(t,c),d=F.useRef(null),A=F.useRef(null),f=F.useCallback((()=>{const t=c.current,n=OXe(t).getComputedStyle(t);if("0px"===n.width)return{outerHeightStyle:0,overflowing:!1};const i=A.current;i.style.width=n.width,i.value=t.value||e.placeholder||"x","\n"===i.value.slice(-1)&&(i.value+=" ");const a=n.boxSizing,s=VZe(n.paddingBottom)+VZe(n.paddingTop),l=VZe(n.borderBottomWidth)+VZe(n.borderTopWidth),u=i.scrollHeight;i.value="x";const d=i.scrollHeight;let f=u;o&&(f=Math.max(Number(o)*d,f)),r&&(f=Math.min(Number(r)*d,f)),f=Math.max(f,d);return{outerHeightStyle:f+("border-box"===a?s+l:0),overflowing:Math.abs(f-u)<=1}}),[r,o,e.placeholder]),p=F.useCallback((()=>{const e=f();if(void 0===(t=e)||null===t||0===Object.keys(t).length||0===t.outerHeightStyle&&!t.overflowing)return;var t;const n=e.outerHeightStyle,r=c.current;d.current!==n&&(d.current=n,r.style.height=`${n}px`),r.style.overflow=e.overflowing?"hidden":""}),[f]);eOe((()=>{const e=()=>{p()};let t;const n=eZe(e),r=c.current,o=OXe(r);let i;return o.addEventListener("resize",n),"undefined"!==typeof ResizeObserver&&(i=new ResizeObserver(e),i.observe(r)),()=>{n.clear(),cancelAnimationFrame(t),o.removeEventListener("resize",n),i&&i.disconnect()}}),[f,p]),eOe((()=>{p()}));return(0,ct.jsxs)(F.Fragment,{children:[(0,ct.jsx)("textarea",{value:a,onChange:e=>{l||p(),n&&n(e)},ref:u,rows:o,style:i,...s}),(0,ct.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:A,tabIndex:-1,style:{...qZe,...i,paddingTop:0,paddingBottom:0}})]})})),XZe=YZe;var WZe;const KZe=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${MTe(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},JZe=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},ZZe=KRe("div",{name:"MuiInputBase",slot:"Root",overridesResolver:KZe})($Re((e=>{let{theme:t}=e;return{...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${jKe.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"4px 0 5px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"100%"}}]}}))),$Ze=KRe("input",{name:"MuiInputBase",slot:"Input",overridesResolver:JZe})($Re((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},o={opacity:"0 !important"},i=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${jKe.formControl} &`]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${jKe.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableInjectingGlobalStyles},style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}}))),e$e=function(e){return function(t){return(0,ct.jsx)(dXe,{styles:"function"===typeof e?n=>e({theme:n,...t}):e})}}({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),t$e=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiInputBase"}),{"aria-describedby":r,autoComplete:o,autoFocus:i,className:a,color:s,components:l={},componentsProps:c={},defaultValue:u,disabled:d,disableInjectingGlobalStyles:A,endAdornment:f,error:p,fullWidth:h=!1,id:g,inputComponent:m="input",inputProps:y={},inputRef:v,margin:b,maxRows:C,minRows:I,multiline:E=!1,name:x,onBlur:B,onChange:w,onClick:_,onFocus:S,onKeyDown:D,onKeyUp:T,placeholder:k,readOnly:Q,renderSuffix:M,rows:R,size:P,slotProps:O={},slots:N={},startAdornment:L,type:U="text",value:G,...j}=n,z=null!=y.value?y.value:G,{current:H}=F.useRef(null!=z),V=F.useRef(),q=F.useCallback((e=>{0}),[]),Y=XPe(V,v,y.ref,q),[X,W]=F.useState(!1),K=SJe();const J=_Je({props:n,muiFormControl:K,states:["color","disabled","error","hiddenLabel","size","required","filled"]});J.focused=K?K.focused:X,F.useEffect((()=>{!K&&d&&X&&(W(!1),B&&B())}),[K,d,X,B]);const Z=K&&K.onFilled,$=K&&K.onEmpty,ee=F.useCallback((e=>{bJe(e)?Z&&Z():$&&$()}),[Z,$]);qJe((()=>{H&&ee({value:z})}),[z,ee,H]);F.useEffect((()=>{ee(V.current)}),[]);let te=m,ne=y;E&&"input"===te&&(ne=R?{type:void 0,minRows:R,maxRows:R,...ne}:{type:void 0,maxRows:C,minRows:I,...ne},te=XZe);F.useEffect((()=>{K&&K.setAdornedStart(Boolean(L))}),[K,L]);const re={...n,color:J.color||"primary",disabled:J.disabled,endAdornment:f,error:J.error,focused:J.focused,formControl:K,fullWidth:h,hiddenLabel:J.hiddenLabel,multiline:E,size:J.size,startAdornment:L,type:U},oe=(e=>{const{classes:t,color:n,disabled:r,error:o,endAdornment:i,focused:a,formControl:s,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:A,startAdornment:f,type:p}=e;return TTe({root:["root",`color${MTe(n)}`,r&&"disabled",o&&"error",l&&"fullWidth",a&&"focused",s&&"formControl",A&&"medium"!==A&&`size${MTe(A)}`,u&&"multiline",f&&"adornedStart",i&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled","search"===p&&"inputTypeSearch",u&&"inputMultiline","small"===A&&"inputSizeSmall",c&&"inputHiddenLabel",f&&"inputAdornedStart",i&&"inputAdornedEnd",d&&"readOnly"]},GKe,t)})(re),ie=N.root||l.Root||ZZe,ae=O.root||c.root||{},se=N.input||l.Input||$Ze;return ne={...ne,...O.input??c.input},(0,ct.jsxs)(F.Fragment,{children:[!A&&"function"===typeof e$e&&(WZe||(WZe=(0,ct.jsx)(e$e,{}))),(0,ct.jsxs)(ie,{...ae,ref:t,onClick:e=>{V.current&&e.currentTarget===e.target&&V.current.focus(),_&&_(e)},...j,...!EWe(ie)&&{ownerState:{...re,...ae.ownerState}},className:DTe(oe.root,ae.className,a,Q&&"MuiInputBase-readOnly"),children:[L,(0,ct.jsx)(IJe.Provider,{value:null,children:(0,ct.jsx)(se,{"aria-invalid":J.error,"aria-describedby":r,autoComplete:o,autoFocus:i,defaultValue:u,disabled:J.disabled,id:g,onAnimationStart:e=>{ee("mui-auto-fill-cancel"===e.animationName?V.current:{value:"x"})},name:x,placeholder:k,readOnly:Q,required:J.required,rows:R,value:z,onKeyDown:D,onKeyUp:T,type:U,...ne,...!EWe(se)&&{as:te,ownerState:{...re,...ne.ownerState}},ref:Y,className:DTe(oe.input,ne.className,Q&&"MuiInputBase-readOnly"),onBlur:e=>{B&&B(e),y.onBlur&&y.onBlur(e),K&&K.onBlur?K.onBlur(e):W(!1)},onChange:function(e){if(!H){const t=e.target||V.current;if(null==t)throw new Error(kTe(1));ee({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];y.onChange&&y.onChange(e,...n),w&&w(e,...n)},onFocus:e=>{S&&S(e),y.onFocus&&y.onFocus(e),K&&K.onFocus?K.onFocus(e):W(!0)}})}),f,M?M({...J,startAdornment:L}):null]})]})})),n$e=t$e,r$e=KRe(ZZe,{shouldForwardProp:e=>XRe(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...KZe(e,t),!n.disableUnderline&&t.underline]}})($Re((e=>{let{theme:t}=e;let n="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{"label + &":{marginTop:16}}},{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${HKe.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${HKe.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${HKe.disabled}, .${HKe.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${HKe.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(AXe()).map((e=>{let[n]=e;return{props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[n].main}`}}}}))]}}))),o$e=KRe($Ze,{name:"MuiInput",slot:"Input",overridesResolver:JZe})({}),i$e=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiInput"}),{disableUnderline:r=!1,components:o={},componentsProps:i,fullWidth:a=!1,inputComponent:s="input",multiline:l=!1,slotProps:c,slots:u={},type:d="text",...A}=n,f=(e=>{const{classes:t,disableUnderline:n}=e,r=TTe({root:["root",!n&&"underline"],input:["input"]},zKe,t);return{...t,...r}})(n),p={root:{ownerState:{disableUnderline:r}}},h=c??i?mQe(c??i,p):p,g=u.root??o.Root??r$e,m=u.input??o.Input??o$e;return(0,ct.jsx)(n$e,{slots:{root:g,input:m},slotProps:h,fullWidth:a,inputComponent:s,multiline:l,ref:t,type:d,...A,classes:f})}));i$e&&(i$e.muiName="Input");const a$e=i$e,s$e=KRe(ZZe,{shouldForwardProp:e=>XRe(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...KZe(e,t),!n.disableUnderline&&t.underline]}})($Re((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o}},[`&.${XKe.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o},[`&.${XKe.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${XKe.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${XKe.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${XKe.disabled}, .${XKe.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${XKe.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(AXe()).map((e=>{let[n]=e;return{props:{disableUnderline:!1,color:n},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[n]?.main}`}}}})),{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:12}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:12}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"25px 12px 8px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}}]}}))),l$e=KRe($Ze,{name:"MuiFilledInput",slot:"Input",overridesResolver:JZe})($Re((e=>{let{theme:t}=e;return{paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}}))),c$e=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiFilledInput"}),{disableUnderline:r=!1,components:o={},componentsProps:i,fullWidth:a=!1,hiddenLabel:s,inputComponent:l="input",multiline:c=!1,slotProps:u,slots:d={},type:A="text",...f}=n,p={...n,disableUnderline:r,fullWidth:a,inputComponent:l,multiline:c,type:A},h=(e=>{const{classes:t,disableUnderline:n,startAdornment:r,endAdornment:o,size:i,hiddenLabel:a,multiline:s}=e,l=TTe({root:["root",!n&&"underline",r&&"adornedStart",o&&"adornedEnd","small"===i&&`size${MTe(i)}`,a&&"hiddenLabel",s&&"multiline"],input:["input"]},YKe,t);return{...t,...l}})(n),g={root:{ownerState:p},input:{ownerState:p}},m=u??i?mQe(g,u??i):g,y=d.root??o.Root??s$e,v=d.input??o.Input??l$e;return(0,ct.jsx)(n$e,{slots:{root:y,input:v},slotProps:m,fullWidth:a,inputComponent:l,multiline:c,ref:t,type:A,...f,classes:h})}));c$e&&(c$e.muiName="Input");const u$e=c$e;var d$e;const A$e=KRe("fieldset",{shouldForwardProp:XRe})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),f$e=KRe("legend",{shouldForwardProp:XRe})($Re((e=>{let{theme:t}=e;return{float:"unset",width:"auto",overflow:"hidden",variants:[{props:e=>{let{ownerState:t}=e;return!t.withLabel},style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:e=>{let{ownerState:t}=e;return t.withLabel},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:e=>{let{ownerState:t}=e;return t.withLabel&&t.notched},style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]}})));const p$e=KRe(ZZe,{shouldForwardProp:e=>XRe(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:KZe})($Re((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${qKe.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${qKe.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${qKe.focused} .${qKe.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(AXe()).map((e=>{let[n]=e;return{props:{color:n},style:{[`&.${qKe.focused} .${qKe.notchedOutline}`]:{borderColor:(t.vars||t).palette[n].main}}}})),{props:{},style:{[`&.${qKe.error} .${qKe.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${qKe.disabled} .${qKe.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:14}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:14}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"16.5px 14px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{padding:"8.5px 14px"}}]}}))),h$e=KRe((function(e){const{children:t,classes:n,className:r,label:o,notched:i,...a}=e,s=null!=o&&""!==o,l={...e,notched:i,withLabel:s};return(0,ct.jsx)(A$e,{"aria-hidden":!0,className:r,ownerState:l,...a,children:(0,ct.jsx)(f$e,{ownerState:l,children:s?(0,ct.jsx)("span",{children:o}):d$e||(d$e=(0,ct.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"}))})})}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})($Re((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}}))),g$e=KRe($Ze,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:JZe})($Re((e=>{let{theme:t}=e;return{padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:0}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}}]}}))),m$e=F.forwardRef((function(e,t){var n;const r=rPe({props:e,name:"MuiOutlinedInput"}),{components:o={},fullWidth:i=!1,inputComponent:a="input",label:s,multiline:l=!1,notched:c,slots:u={},type:d="text",...A}=r,f=(e=>{const{classes:t}=e,n=TTe({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},VKe,t);return{...t,...n}})(r),p=SJe(),h=_Je({props:r,muiFormControl:p,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),g={...r,color:h.color||"primary",disabled:h.disabled,error:h.error,focused:h.focused,formControl:p,fullWidth:i,hiddenLabel:h.hiddenLabel,multiline:l,size:h.size,type:d},m=u.root??o.Root??p$e,y=u.input??o.Input??g$e;return(0,ct.jsx)(n$e,{slots:{root:m,input:y},renderSuffix:e=>(0,ct.jsx)(h$e,{ownerState:g,className:f.notchedOutline,label:null!=s&&""!==s&&h.required?n||(n=(0,ct.jsxs)(F.Fragment,{children:[s,"\u2009","*"]})):s,notched:"undefined"!==typeof c?c:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:i,inputComponent:a,multiline:l,ref:t,type:d,...A,classes:{...f,notchedOutline:null}})}));m$e&&(m$e.muiName="Input");const y$e=m$e,v$e={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>XRe(e)&&"variant"!==e,slot:"Root"},b$e=KRe(a$e,v$e)(""),C$e=KRe(y$e,v$e)(""),I$e=KRe(u$e,v$e)(""),E$e=F.forwardRef((function(e,t){const n=rPe({name:"MuiSelect",props:e}),{autoWidth:r=!1,children:o,classes:i={},className:a,defaultOpen:s=!1,displayEmpty:l=!1,IconComponent:c=KKe,id:u,input:d,inputProps:A,label:f,labelId:p,MenuProps:h,multiple:g=!1,native:m=!1,onClose:y,onOpen:v,open:b,renderValue:C,SelectDisplayProps:I,variant:E="outlined",...x}=n,B=m?RZe:HZe,w=_Je({props:n,muiFormControl:SJe(),states:["variant","error"]}),_=w.variant||E,S={...n,variant:_,classes:i},D=(e=>{const{classes:t}=e;return t})(S),{root:T,...k}=D,Q=d||{standard:(0,ct.jsx)(b$e,{ownerState:S}),outlined:(0,ct.jsx)(C$e,{label:f,ownerState:S}),filled:(0,ct.jsx)(I$e,{ownerState:S})}[_],M=XPe(t,wPe(Q));return(0,ct.jsx)(F.Fragment,{children:F.cloneElement(Q,{inputComponent:B,inputProps:{children:o,error:w.error,IconComponent:c,variant:_,type:void 0,multiple:g,...m?{id:u}:{autoWidth:r,defaultOpen:s,displayEmpty:l,labelId:p,MenuProps:h,onClose:y,onOpen:v,open:b,renderValue:C,SelectDisplayProps:{id:u,...I}},...A,classes:A?mQe(k,A.classes):k,...d?d.props.inputProps:{}},...(g&&m||l)&&"outlined"===_?{notched:!0}:{},ref:M,className:DTe(Q.props.className,a,D.root),...!d&&{variant:_},...x})})}));E$e.muiName="Select";const x$e=E$e;function B$e(e){return lPe("MuiFormHelperText",e)}const w$e=cPe("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var _$e;const S$e=KRe("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${MTe(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})($Re((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${w$e.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${w$e.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:e=>{let{ownerState:t}=e;return t.contained},style:{marginLeft:14,marginRight:14}}]}}))),D$e=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiFormHelperText"}),{children:r,className:o,component:i="p",disabled:a,error:s,filled:l,focused:c,margin:u,required:d,variant:A,...f}=n,p=_Je({props:n,muiFormControl:SJe(),states:["variant","size","disabled","error","filled","focused","required"]}),h={...n,component:i,contained:"filled"===p.variant||"outlined"===p.variant,variant:p.variant,size:p.size,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required};delete h.ownerState;const g=(e=>{const{classes:t,contained:n,size:r,disabled:o,error:i,filled:a,focused:s,required:l}=e;return TTe({root:["root",o&&"disabled",i&&"error",r&&`size${MTe(r)}`,n&&"contained",s&&"focused",a&&"filled",l&&"required"]},B$e,t)})(h);return(0,ct.jsx)(S$e,{as:i,className:DTe(g.root,o),ref:t,...f,ownerState:h,children:" "===r?_$e||(_$e=(0,ct.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):r})})),T$e=D$e;function k$e(e){return lPe("MuiTextField",e)}cPe("MuiTextField",["root"]);const Q$e={standard:a$e,filled:u$e,outlined:y$e},M$e=KRe(wJe,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),R$e=F.forwardRef((function(e,t){const n=rPe({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:o=!1,children:i,className:a,color:s="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:d,fullWidth:A=!1,helperText:f,id:p,InputLabelProps:h,inputProps:g,InputProps:m,inputRef:y,label:v,maxRows:b,minRows:C,multiline:I=!1,name:E,onBlur:x,onChange:B,onFocus:w,placeholder:_,required:S=!1,rows:D,select:T=!1,SelectProps:k,slots:Q={},slotProps:M={},type:R,value:P,variant:O="outlined",...F}=n,N={...n,autoFocus:o,color:s,disabled:c,error:u,fullWidth:A,multiline:I,required:S,select:T,variant:O},L=(e=>{const{classes:t}=e;return TTe({root:["root"]},k$e,t)})(N);const U=zFe(p),G=f&&U?`${U}-helper-text`:void 0,j=v&&U?`${U}-label`:void 0,z=Q$e[O],H={slots:Q,slotProps:{input:m,inputLabel:h,htmlInput:g,formHelperText:d,select:k,...M}},V={},q=H.slotProps.inputLabel;"outlined"===O&&(q&&"undefined"!==typeof q.shrink&&(V.notched=q.shrink),V.label=v),T&&(k&&k.native||(V.id=void 0),V["aria-describedby"]=void 0);const[Y,X]=YFe("input",{elementType:z,externalForwardedProps:H,additionalProps:V,ownerState:N}),[W,K]=YFe("inputLabel",{elementType:NJe,externalForwardedProps:H,ownerState:N}),[J,Z]=YFe("htmlInput",{elementType:"input",externalForwardedProps:H,ownerState:N}),[$,ee]=YFe("formHelperText",{elementType:T$e,externalForwardedProps:H,ownerState:N}),[te,ne]=YFe("select",{elementType:x$e,externalForwardedProps:H,ownerState:N}),re=(0,ct.jsx)(Y,{"aria-describedby":G,autoComplete:r,autoFocus:o,defaultValue:l,fullWidth:A,multiline:I,name:E,rows:D,maxRows:b,minRows:C,type:R,value:P,id:U,inputRef:y,onBlur:x,onChange:B,onFocus:w,placeholder:_,inputProps:Z,slots:{input:Q.htmlInput?J:void 0},...X});return(0,ct.jsxs)(M$e,{className:DTe(L.root,a),disabled:c,error:u,fullWidth:A,ref:t,required:S,color:s,variant:O,ownerState:N,...F,children:[null!=v&&""!==v&&(0,ct.jsx)(W,{htmlFor:U,id:j,...K,children:v}),T?(0,ct.jsx)(te,{"aria-describedby":G,id:U,labelId:j,value:P,input:re,...ne,children:i}):re,f&&(0,ct.jsx)($,{id:G,...ee,children:f})]})})),P$e=R$e,O$e=pPe((0,ct.jsx)("path",{d:"M5 15H3v4c0 1.1.9 2 2 2h4v-2H5zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2m0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2zM12 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"FilterCenterFocus"),F$e=pPe((0,ct.jsx)("path",{d:"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12z"}),"Label"),N$e=pPe((0,ct.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"Restore"),L$e=async e=>{const t={},n=e.split("\n");let r=null;return n.forEach((e=>{e.startsWith(">")?(r=e.slice(1).trim(),t[r]=""):r&&(t[r]+=e.trim())})),t},U$e=async e=>{const t=Math.log2(20),n=e.map((e=>{const n=((e,t,n)=>(e-t)/(n-t))(e,0,t);return(e=>{const t=[{r:160,g:36,b:96},{r:240,g:125,b:171},{r:250,g:201,b:222},{r:252,g:237,b:244},{r:255,g:255,b:255},{r:234,g:255,b:255},{r:214,g:255,b:255},{r:140,g:255,b:255},{r:17,g:200,b:209}],n=1/(t.length-1),r=Math.min(Math.floor(e/n),t.length-2),o=(e-r*n)/n;return`0x${((1<<24)+(Math.round(t[r].r+(t[r+1].r-t[r].r)*o)<<16)+(Math.round(t[r].g+(t[r+1].g-t[r].g)*o)<<8)+Math.round(t[r].b+(t[r+1].b-t[r].b)*o)).toString(16).slice(1)}`})(n)}));return n},G$e=e=>e?{name:e.name||"",value:e.length||0,children:e.branchset?e.branchset.map((e=>G$e(e))).filter((e=>null!==e)):[]}:null;function j$e(e){var t=(e=e.replace(/\s+$/g,"").replace(/[\r\n]+/g,"").replace(/\s+/g,"")).split(/(;|\(|\)|,)/),n={parent:null,branchset:[]},r=n,o=0;for(const a of t)if(""!==a&&";"!==a)if("("===a){let e={parent:r,branchset:[]};r.branchset.push(e),r=e}else if(","===a){if(!r.parent)throw new Error("Parent node is undefined");let e={parent:r=r.parent,branchset:[]};r.branchset.push(e),r=e}else if(")"===a){if(!r.parent)throw new Error("Parent node is undefined");if(null===(r=r.parent))break}else{var i=a.split(":");1===i.length?a.startsWith(":")?(r.name="",r.length=parseFloat(i[0])):(r.name=i[0],r.length=void 0):2===i.length?(r.name=i[0],r.length=parseFloat(i[1])):console.warn(a,"I don't know what to do with two colons!"),r.id=o++}return r.id=o,n}function z$e(e){const t=[];return function e(n){if(n.children){(n.children||[]).forEach((t=>e(t)))}else t.push(n)}(e),t}function H$e(e,t){var n,r,o,i;let a={minX:null!==(n=e.x)&&void 0!==n?n:0,maxX:null!==(r=e.x)&&void 0!==r?r:0,minY:t?null!==(o=e.radius)&&void 0!==o?o:0:null!==(i=e.y)&&void 0!==i?i:0};return e.children&&e.children.forEach((e=>{const n=H$e(e,t);a.minX=Math.min(a.minX,n.minX),a.maxX=Math.max(a.maxX,n.maxX),a.minY=Math.min(a.minY,n.minY)})),a}const V$e=e=>e.children&&0!==e.children.length?e.children.reduce(((e,t)=>e+V$e(t)),0):1;function q$e(e,t,n,r,o){const i=H$e(e,n);r.selectAll(".highlight-box").remove(),t&&r.insert("path",":first-child").attr("class","highlight-box").attr("d",wje()({innerRadius:i.minY,outerRadius:o+170,startAngle:i.minX*(Math.PI/180),endAngle:i.maxX*(Math.PI/180)})).style("fill","rgba(255, 255, 0, 0.2)").style("stroke","none")}function Y$e(e,t){e.children&&e.children.forEach((e=>{Y$e(e,t)})),t(e)}function X$e(e){e.children&&e.children.forEach((e=>{Y$e(e,(e=>{if(e.linkNode){const t=$Ge(e.linkNode).classed("link--highlight");$Ge(e.linkNode).classed("link--highlight",!t)}}))}))}function W$e(e){e.children&&e.children.forEach((e=>{Y$e(e,(e=>{if(!e.children&&e.linkNode){const t=$Ge(e.linkNode).classed("link--highlight");$Ge(e.linkNode).classed("link--highlight",!t)}}))}))}function K$e(e){let t=e;do{if(t.linkNode){const e=$Ge(t.linkNode).classed("link--highlight");$Ge(t.linkNode).classed("link--highlight",!e).raise()}}while(t.parent&&(t=t.parent))}function J$e(e,t,n){e&&$Ge(e).classed(t,n)}function Z$e(e){if(e.nodeElement){const t=$Ge(e.nodeElement).select("circle").classed("node--collapsed");$Ge(e.nodeElement).select("circle").classed("node--collapsed",!t),e.children&&e.children.forEach((e=>{Y$e(e,(e=>{J$e(e.linkNode,"link--hidden",!t),J$e(e.nodeElement,"link--hidden",!t),J$e(e.linkExtensionNode,"link--hidden",!t),J$e(e.labelElement,"link--hidden",!t),e.nodeElement&&$Ge(e.nodeElement).select("circle").classed("node--collapsed",!t)}))}))}}function $$e(e,t){if(!e.parent)return e;const n=ZGe();let r=[t],o=!1;for(var i=t;r.length>0&&!o;){const t=r.shift();if(null!==t&&void 0!==t&&t.branchset){for(const r of t.branchset)if(r.name===e.data.name){o=!0;const e=t.branchset.indexOf(r);t.branchset.splice(e,1),i=r;let a=r,s=t;for(;s;){const e=s.branchset.indexOf(a);e>-1&&s.branchset.splice(e,1),a.branchset.push(s),a=s,s=s.parent||null}const l=G$e(i);if(!l)throw new Error("Failed to convert new root to D3 format");return n(UGe(l))}r.push(...t.branchset)}}return console.log(e),e}const e0e=(0,F.forwardRef)(((e,t)=>{let{data:n,width:r=1e3,onNodeClick:o,onLinkClick:i,onLeafClick:a,onNodeMouseOver:s,onNodeMouseOut:l,onLeafMouseOver:c,onLeafMouseOut:u,onLinkMouseOver:d,onLinkMouseOut:A,customNodeMenuItems:f,nodeStyler:p,linkStyler:h,leafStyler:g}=e;const[m,y]=(0,F.useState)(!1),[v,b]=(0,F.useState)(!0),[C,I]=(0,F.useState)(!0),E=(0,F.useRef)(null),x=(0,F.useRef)(null),B=(0,F.useRef)(null),w=(0,F.useRef)(null),_=(0,F.useRef)(null),S=(0,F.useRef)(null),D=(0,F.useRef)(null),T=(0,F.useRef)(!1),[k,Q]=(0,F.useState)(0),[M,R]=(0,F.useState)(null),P=r/2,O=P-170;(0,F.useEffect)((()=>{if(!n)return;const e=G$e(j$e(n));if(!e)return;const t=UGe(e),r=ZGe()(t);R(r)}),[n,k]);const N=e=>(e.data.value||0)+(e.children&&sNe(e.children,N)||0),U=(e,t,n)=>{e.radius=(t+=e.data.value||0)*n,e.children&&e.children.forEach((e=>U(e,t,n)))};function G(e,t,n,r){const o=Math.cos(e=(e-90)/180*Math.PI),i=Math.sin(e),a=Math.cos(n=(n-90)/180*Math.PI),s=Math.sin(n);return"M"+t*o+","+t*i+(n===e?"":"A"+t+","+t+" 0 0 "+(n>e?1:0)+" "+t*a+","+t*s)+"L"+r*a+","+r*s}function j(e){var t,n,r,o;return G(null!==(t=e.source.x)&&void 0!==t?t:0,null!==(n=e.source.radius)&&void 0!==n?n:0,null!==(r=e.target.x)&&void 0!==r?r:0,null!==(o=e.target.radius)&&void 0!==o?o:0)}function z(e){var t,n,r,o;return G(null!==(t=e.source.x)&&void 0!==t?t:0,null!==(n=e.source.y)&&void 0!==n?n:0,null!==(r=e.target.x)&&void 0!==r?r:0,null!==(o=e.target.y)&&void 0!==o?o:0)}function H(e){var t,n,r;return G(null!==(t=e.target.x)&&void 0!==t?t:0,null!==(n=e.target.radius)&&void 0!==n?n:0,null!==(r=e.target.x)&&void 0!==r?r:0,O)}function V(e){var t,n,r;return G(null!==(t=e.target.x)&&void 0!==t?t:0,null!==(n=e.target.y)&&void 0!==n?n:0,null!==(r=e.target.x)&&void 0!==r?r:0,O)}function q(e){var t,n;return`\n      rotate(${(null!==(t=e.x)&&void 0!==t?t:0)-90}) \n      translate(${e.radius||e.y},0)\n      ${(null!==(n=e.x)&&void 0!==n?n:0)>=180?"rotate(180)":""}\n    `}function Y(e){var t,n;return`\n      rotate(${(null!==(t=e.x)&&void 0!==t?t:0)-90}) \n      translate(${e.y},0)\n      ${(null!==(n=e.x)&&void 0!==n?n:0)>=180?"rotate(180)":""}\n    `}(0,F.useEffect)((()=>{if(!w.current||!M)return;const e=Hje().scaleExtent([.5,5]).on("zoom",(e=>{t.select("g").attr("transform",e.transform)}));$Ge(w.current).selectAll("*").remove();const t=$Ge(w.current).append("svg").attr("viewBox",[-P,-P,r,r]).attr("font-family","sans-serif").attr("font-size",5).call(e),m=t.append("g").attr("class","tree");m.append("style").text("\n      .link--active {\n        stroke: #000 !important;\n        stroke-width: 2px;\n      }\n\n      .link--important {\n        stroke: #00F !important;\n        stroke-width: 1.5px;\n      }\n\n      .link-extension--active {\n        stroke-opacity: .6;\n      }\n\n      .label--active {\n        font-weight: bold;\n      }\n\n      .node--active {\n        stroke: #003366 !important;\n        fill: #0066cc !important;\n      }\n\n      .link--highlight {\n        stroke: #FF0000 !important;\n        stroke-width: 1.5px;\n      }\n\n      .link--hidden {\n        display: none;\n      }\n\n      .node--collapsed {\n        r: 4px !important; \n        fill: #0066cc !important;\n      }\n\n      .tooltip-node {\n        position: absolute;\n        background: white;\n        padding: 5px;\n        border: 1px solid #ccc;\n        border-radius: 4px;\n        font-size: 12px;\n        z-index: 10;\n      }\n    ");function y(e){return function(t,n){e?null===d||void 0===d||d(t,n.source,n.target):null===A||void 0===A||A(t,n.source,n.target),$Ge(this).classed("link--active",e),n.target.linkExtensionNode&&$Ge(n.target.linkExtensionNode).classed("link-extension--active",e).raise(),q$e(n.target,e,T.current,m,O)}}NGe().size([355,O]).separation(((e,t)=>1))(M),U(M,0,O/N(M));const v=m.append("g").attr("class","link-extensions").attr("fill","none").attr("stroke","#000").attr("stroke-opacity",.25).attr("stroke-dasharray","4,4").selectAll("path").data(M.links().filter((e=>!e.target.children))).join("path").each((function(e){e.target.linkExtensionNode=this})).attr("d",V),b=m.append("g").attr("class","links").attr("fill","none").attr("stroke","#444").selectAll("path").data(M.links()).join("path").each((function(e){e.target.linkNode=this})).attr("d",z).attr("stroke",(e=>e.target.color||"#000")).style("cursor","pointer").on("mouseover",y(!0)).on("mouseout",y(!1)).on("click",(function(e,t){const n=$Ge(e.target),r=n.classed("link--highlight");n.classed("link--highlight",!r).raise(),null===i||void 0===i||i(e,t.source,t.target)}));function C(e){return function(t,n){e?null===c||void 0===c||c(t,n):null===u||void 0===u||u(t,n),$Ge(this).classed("label--active",e),n.linkExtensionNode&&$Ge(n.linkExtensionNode).classed("link-extension--active",e).raise();do{n.linkNode&&$Ge(n.linkNode).classed("link--active",e).raise()}while(n.parent&&(n=n.parent))}}h&&b.each((e=>h(e.source,e.target)));const I=m.append("g").attr("class","leaves").selectAll("text").data(M.leaves()).join("text").each((function(e){e.labelElement=this})).attr("dy",".31em").attr("transform",(e=>{var t,n;return`rotate(${(null!==(t=e.x)&&void 0!==t?t:0)-90}) translate(${O+4},0)${(null!==(n=e.x)&&void 0!==n?n:0)<180?"":" rotate(180)"}`})).attr("text-anchor",(e=>{var t;return(null!==(t=e.x)&&void 0!==t?t:0)<180?"start":"end"})).text((e=>e.data.name.replace(/_/g," "))).on("mouseover",C(!0)).on("mouseout",C(!1)).on("click",(function(e,t){null===a||void 0===a||a(e,t)}));function k(e){return function(t,n){e?null===s||void 0===s||s(t,n):null===l||void 0===l||l(t,n),$Ge(this).classed("node--active",e),n.linkExtensionNode&&$Ge(n.linkExtensionNode).classed("link-extension--active",e).raise();let r=n;do{r.linkNode&&$Ge(r.linkNode).classed("link--important",e).raise()}while(r.parent&&(r=r.parent));q$e(n,e,T.current,m,O)}}g&&I.each((e=>g(e)));const Q=m.append("g").attr("class","nodes").selectAll(".node").data(M.descendants().filter((e=>e.children))).join("g").each((function(e){e.nodeElement=this})).attr("class","inner-node").attr("transform",(e=>{var t,n;return`\n        rotate(${(null!==(t=e.x)&&void 0!==t?t:0)-90}) \n        translate(${e.y},0)\n        ${(null!==(n=e.x)&&void 0!==n?n:0)>=180?"rotate(180)":""}\n    `}));Q.append("circle").attr("r",3).style("fill","#fff").style("stroke","steelblue").style("stroke-width",1.5).on("click",(function(e,t){eje(".tooltip-node").remove();const r=$Ge(w.current).append("div").attr("class","menu-node").style("position","fixed").style("left",`${e.clientX+10}px`).style("top",e.clientY-10+"px").style("opacity",1).node(),i=(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)("div",{className:"menu-header",children:t.data.name}),(0,ct.jsxs)("div",{className:"menu-buttons",children:[(0,ct.jsx)("a",{className:"dropdown-item",onClick:()=>Z$e(t),children:"Collapse Clade"}),(0,ct.jsx)("div",{className:"dropdown-divider"}),(0,ct.jsx)("div",{className:"dropdown-header",children:"Toggle Selections"}),(0,ct.jsx)("a",{className:"dropdown-item",onClick:()=>X$e(t),children:"Descendant Links"}),(0,ct.jsx)("a",{className:"dropdown-item",onClick:()=>W$e(t),children:"Terminal Links"}),(0,ct.jsx)("a",{className:"dropdown-item",onClick:()=>K$e(t),children:"Path to Root"}),(0,ct.jsx)("div",{className:"dropdown-divider"}),(0,ct.jsx)("a",{className:"dropdown-item",onClick:()=>{R($$e(t,j$e(n)))},children:"Reroot Here"}),(0,ct.jsx)("div",{className:"dropdown-divider"}),null===f||void 0===f?void 0:f.map((e=>{if(e.toShow(t))return(0,ct.jsx)("a",{className:"dropdown-item",onClick:()=>{e.onClick(t),null===r||void 0===r||r.remove()},children:e.label(t)})}))]})]});if(r){(0,L.H)(r).render(i),setTimeout((()=>{const e=t=>{if(r&&!r.contains(t.target)){try{r.remove()}catch(t){console.error(t)}window.removeEventListener("click",e)}};window.addEventListener("click",e)}),5)}null===o||void 0===o||o(e,t)})).on("mouseover",k(!0)).on("mouseout",k(!1)).on("mouseenter",(function(e,t){eje(".tooltip-node").remove(),S.current=$Ge(w.current).append("div").attr("class","tooltip-node").style("position","fixed").style("left",`${e.clientX+10}px`).style("top",e.clientY-10+"px").style("opacity",0).html(`${t.data.name}<br/>Leaves: ${V$e(t)}`),S.current.transition().duration(200).style("opacity",1)})).on("mouseleave",(function(){S.current&&S.current.transition().duration(200).style("opacity",0).remove()})),p&&Q.each((e=>p(e))),E.current=v,x.current=b,B.current=Q,_.current=I,D.current=t.node()}),[M,r]),(0,F.useEffect)((()=>{var e,t,n;const r=xGe().duration(750);var o,i;C?null===(o=E.current)||void 0===o||o.transition(r).style("display","none"):null===(i=E.current)||void 0===i||i.transition(r).attr("d",m?H:V).style("display",null);null===(e=x.current)||void 0===e||e.transition(r).attr("d",m?j:z),null===(t=B.current)||void 0===t||t.transition(r).attr("transform",m?q:Y),T.current=m,null===(n=_.current)||void 0===n||n.transition(r).attr("transform",(e=>{var t,n;return`rotate(${(null!==(t=e.x)&&void 0!==t?t:0)-90}) translate(${C&&T.current?e.radius:O+4},0)${(null!==(n=e.x)&&void 0!==n?n:0)<180?"":" rotate(180)"}`}))}),[m,C]),(0,F.useEffect)((()=>{var e,t;null===(e=_.current)||void 0===e||e.style("display",v?"block":"none"),null===(t=E.current)||void 0===t||t.style("display",v?"block":"none")}),[v]);return(0,F.useImperativeHandle)(t,(()=>({getLinkExtensions:()=>E.current,getLinks:()=>x.current,getInnerNodes:()=>B.current,getLeaves:()=>_.current,setVariableLinks:e=>y(e),setDisplayLeaves:e=>b(e),setTipAlign:e=>I(e),recenterView:()=>{$Ge(w.current).select("svg").select("g").transition().duration(750).attr("transform","translate(0,0)")},refresh:()=>Q((e=>e+1)),getRoot:()=>M,getContainer:()=>w.current,findAndZoom:(e,t)=>{D.current&&function(e,t,n){const r=t.select("g.nodes").selectAll("g.inner-node").filter((t=>t.data.name===e));if(!r.empty()){const e=r.node(),o=r.data()[0],i=(o.radius,o.y,n.current.clientWidth,n.current.clientHeight,Hje().on("zoom",(e=>{t.select("g").attr("transform",e.transform)})));t.transition().duration(750).call(i.transform,Pje.translate(0,-400).scale(1));const a=$Ge(e).select("circle"),s=a.attr("r"),l=a.style("fill"),c=(2*parseFloat(s)).toString();a.transition().delay(1e3).style("fill","red").style("r",c).transition().duration(500).style("fill",l).style("r",s).transition().duration(500).style("fill","red").style("r",c).transition().duration(500).style("fill",l).style("r",s)}const o=t.select("g.leaves").selectAll("g.leaf").filter((t=>t.data.name===e));o.empty()||console.log("Found leaf",o)}(e,$Ge(D.current),t)}}))),(0,ct.jsx)("div",{className:"radial-tree",children:(0,ct.jsx)("div",{ref:w,style:{width:"100%",height:"100%",overflow:"show"}})})}));function t0e(e,t){var n,r,o,i;let a={minX:null!==(n=e.x)&&void 0!==n?n:0,maxX:null!==(r=e.x)&&void 0!==r?r:0,minY:t?null!==(o=e.radius)&&void 0!==o?o:0:null!==(i=e.y)&&void 0!==i?i:0};return e.children&&e.children.forEach((e=>{const n=t0e(e,t);a.minX=Math.min(a.minX,n.minX),a.maxX=Math.max(a.maxX,n.maxX),a.minY=Math.min(a.minY,n.minY)})),a}function n0e(e,t,n,r,o){const i=t0e(e,n);r.selectAll(".highlight-box").remove(),t&&r.insert("path",":first-child").attr("class","highlight-box").attr("d",`M ${i.minY} ${i.minX} \n                L ${o+170} ${i.minX} \n                L ${o+170} ${i.maxX} \n                L ${i.minY} ${i.maxX} \n                Z`).style("fill","rgba(255, 255, 0, 0.2)").style("stroke","rgba(255, 255, 0, 0.8)")}const r0e=(0,F.forwardRef)(((e,t)=>{let{data:n,width:r=1e3,onNodeClick:o,onLinkClick:i,onLeafClick:a,onNodeMouseOver:s,onNodeMouseOut:l,onLeafMouseOver:c,onLeafMouseOut:u,onLinkMouseOver:d,onLinkMouseOut:A,customNodeMenuItems:f,nodeStyler:p,linkStyler:h,leafStyler:g}=e;const[m,y]=(0,F.useState)(!0),[v,b]=(0,F.useState)(!0),[C,I]=(0,F.useState)(!1),E=(0,F.useRef)(null),x=(0,F.useRef)(null),B=(0,F.useRef)(null),w=(0,F.useRef)(null),_=(0,F.useRef)(null),S=(0,F.useRef)(null),D=(0,F.useRef)(null),T=(0,F.useRef)(!1),[k,Q]=(0,F.useState)(0),[M,R]=(0,F.useState)(null);(0,F.useEffect)((()=>{if(!n)return;const e=G$e(j$e(n));if(!e)return;const t=UGe(e),r=ZGe()(t);R(r)}),[n,k]);const P=e=>(e.data.value||0)+(e.children&&sNe(e.children,P)||0),O=(e,t,n)=>{e.radius=(t+=e.data.value||0)*n,e.children&&e.children.forEach((e=>O(e,t,n)))};function N(e,t,n,r){return"M"+t+","+e+"V"+n+"H"+r}function U(e){var t,n,r,o;return N(null!==(t=e.source.x)&&void 0!==t?t:0,null!==(n=e.source.radius)&&void 0!==n?n:0,null!==(r=e.target.x)&&void 0!==r?r:0,null!==(o=e.target.radius)&&void 0!==o?o:0)}function G(e){var t,n,r,o;return N(null!==(t=e.source.x)&&void 0!==t?t:0,null!==(n=e.source.y)&&void 0!==n?n:0,null!==(r=e.target.x)&&void 0!==r?r:0,null!==(o=e.target.y)&&void 0!==o?o:0)}function j(e){var t,n,r,o;return N(null!==(t=e.target.x)&&void 0!==t?t:0,null!==(n=e.target.radius)&&void 0!==n?n:0,null!==(r=e.target.x)&&void 0!==r?r:0,null!==(o=null===M||void 0===M?void 0:M.leaves()[0].y)&&void 0!==o?o:0)}function z(e){var t,n,r,o;return N(null!==(t=e.target.x)&&void 0!==t?t:0,null!==(n=e.target.y)&&void 0!==n?n:0,null!==(r=e.target.x)&&void 0!==r?r:0,null!==(o=null===M||void 0===M?void 0:M.leaves()[0].y)&&void 0!==o?o:0)}function H(e){return`translate(${e.radius},${e.x})`}function V(e){return`translate(${e.y},${e.x})`}(0,F.useEffect)((()=>{var e;if(!w.current||!M)return;const t=Hje().scaleExtent([.5,5]).on("zoom",(e=>{m.select("g").attr("transform",e.transform)}));$Ge(w.current).selectAll("*").remove();const m=$Ge(w.current).append("svg").attr("viewBox",[0,0,r,r]).attr("font-family","sans-serif").attr("font-size",10).call(t),y=m.append("g").attr("transform","translate(50,0)");y.append("style").text("\n            .link--active {\n              stroke: #000 !important;\n              stroke-width: 2px;\n            }\n            \n            .link--important {\n              stroke: #00F !important;\n              stroke-width: 1.5px;\n            }\n            \n            .link-extension--active {\n              stroke-opacity: .6;\n            }\n            \n            .label--active {\n              font-weight: bold;\n            }\n            \n            .node--active {\n              stroke: #003366 !important;\n              fill: #0066cc !important;\n            }\n            \n            .link--highlight {\n              stroke: #FF0000 !important;\n              stroke-width: 1.5px;\n            }\n            \n            .link--hidden {\n              display: none;\n            }\n            \n            .node--collapsed {\n              r: 4px !important; \n              fill: #0066cc !important;\n            }\n            \n            .tooltip-node {\n              position: absolute;\n              background: white;\n              padding: 5px;\n              border: 1px solid #ccc;\n              border-radius: 4px;\n              font-size: 12px;\n              z-index: 10;\n            }\n        ");function v(e){return function(t,n){var r;e?null===d||void 0===d||d(t,n.source,n.target):null===A||void 0===A||A(t,n.source,n.target),$Ge(this).classed("link--active",e),n.target.linkExtensionNode&&$Ge(n.target.linkExtensionNode).classed("link-extension--active",e).raise(),n0e(n.target,e,T.current,y,null!==(r=null===M||void 0===M?void 0:M.leaves()[0].y)&&void 0!==r?r:0)}}NGe().nodeSize([10,20]).separation(((e,t)=>2))(M),O(M,0,(null!==(e=M.leaves()[0].y)&&void 0!==e?e:0)/P(M));const b=y.append("g").attr("class","link-extensions").attr("fill","none").attr("stroke","#000").attr("stroke-opacity",.25).attr("stroke-dasharray","4,4").selectAll("path").data(M.links().filter((e=>!e.target.children))).join("path").each((function(e){e.target.linkExtensionNode=this})).attr("d",j),C=y.append("g").attr("class","links").attr("fill","none").attr("stroke","#444").selectAll("path").data(M.links()).join("path").each((function(e){e.target.linkNode=this})).attr("d",U).attr("stroke",(e=>e.target.color||"#000")).style("cursor","pointer").on("mouseover",v(!0)).on("mouseout",v(!1)).on("click",(function(e,t){const n=$Ge(e.target),r=n.classed("link--highlight");n.classed("link--highlight",!r).raise(),null===i||void 0===i||i(e,t.source,t.target)}));function I(e){return function(t,n){e?null===c||void 0===c||c(t,n):null===u||void 0===u||u(t,n),$Ge(this).classed("label--active",e),n.linkExtensionNode&&$Ge(n.linkExtensionNode).classed("link-extension--active",e).raise();do{n.linkNode&&$Ge(n.linkNode).classed("link--active",e).raise()}while(n.parent&&(n=n.parent))}}h&&C.each((e=>h(e.source,e.target)));const k=y.append("g").attr("class","leaves").selectAll("text").data(M.leaves()).join("text").each((function(e){e.labelElement=this})).attr("dy",".31em").attr("transform",(e=>{var t;return`translate(${(null!==(t=e.y)&&void 0!==t?t:0)+4},${e.x})`})).text((e=>e.data.name.replace(/_/g," "))).on("mouseover",I(!0)).on("mouseout",I(!1)).on("click",(function(e,t){null===a||void 0===a||a(e,t)}));function Q(e){return function(t,n){var r;e?null===s||void 0===s||s(t,n):null===l||void 0===l||l(t,n),$Ge(this).classed("node--active",e),n.linkExtensionNode&&$Ge(n.linkExtensionNode).classed("link-extension--active",e).raise();let o=n;do{o.linkNode&&$Ge(o.linkNode).classed("link--important",e).raise()}while(o.parent&&(o=o.parent));n0e(n,e,T.current,y,null!==(r=null===M||void 0===M?void 0:M.leaves()[0].y)&&void 0!==r?r:0)}}g&&k.each((e=>g(e)));const F=y.append("g").attr("class","nodes").selectAll(".node").data(M.descendants().filter((e=>e.children))).join("g").each((function(e){e.nodeElement=this})).attr("class","inner-node").attr("transform",(e=>`translate(${e.radius},${e.x})`));F.append("circle").attr("r",3).style("fill","#fff").style("stroke","steelblue").style("stroke-width",1.5).on("click",(function(e,t){eje(".tooltip-node").remove();const r=$Ge(w.current).append("div").attr("class","menu-node").style("position","fixed").style("left",`${e.clientX+10}px`).style("top",e.clientY-10+"px").style("opacity",1).node(),i=(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)("div",{className:"menu-header",children:t.data.name}),(0,ct.jsxs)("div",{className:"menu-buttons",children:[(0,ct.jsx)("a",{className:"dropdown-item",onClick:()=>Z$e(t),children:"Collapse Clade"}),(0,ct.jsx)("div",{className:"dropdown-divider"}),(0,ct.jsx)("div",{className:"dropdown-header",children:"Toggle Selections"}),(0,ct.jsx)("a",{className:"dropdown-item",onClick:()=>X$e(t),children:"Descendant Links"}),(0,ct.jsx)("a",{className:"dropdown-item",onClick:()=>W$e(t),children:"Terminal Links"}),(0,ct.jsx)("a",{className:"dropdown-item",onClick:()=>K$e(t),children:"Path to Root"}),(0,ct.jsx)("div",{className:"dropdown-divider"}),(0,ct.jsx)("a",{className:"dropdown-item",onClick:()=>{R($$e(t,j$e(n)))},children:"Reroot Here"}),(0,ct.jsx)("div",{className:"dropdown-divider"}),null===f||void 0===f?void 0:f.map((e=>{if(e.toShow(t))return(0,ct.jsx)("a",{className:"dropdown-item",onClick:()=>{e.onClick(t),null===r||void 0===r||r.remove()},children:e.label(t)})}))]})]});if(r){(0,L.H)(r).render(i),setTimeout((()=>{const e=t=>{if(r&&!r.contains(t.target)){try{r.remove()}catch(t){console.error(t)}window.removeEventListener("click",e)}};window.addEventListener("click",e)}),5)}null===o||void 0===o||o(e,t)})).on("mouseover",Q(!0)).on("mouseout",Q(!1)).on("mouseenter",(function(e,t){eje(".tooltip-node").remove(),S.current=$Ge(w.current).append("div").attr("class","tooltip-node").style("position","fixed").style("left",`${e.clientX+10}px`).style("top",e.clientY-10+"px").style("opacity",0).html(`${t.data.name}<br/>Leaves: ${V$e(t)}`),S.current.transition().duration(200).style("opacity",1)})).on("mouseleave",(function(){S.current&&S.current.transition().duration(200).style("opacity",0).remove()})),p&&F.each((e=>p(e))),E.current=b,x.current=C,B.current=F,_.current=k,D.current=m.node()}),[M,r]),(0,F.useEffect)((()=>{var e,t,n,r;const o=xGe().duration(750);var i,a;C?null===(i=E.current)||void 0===i||i.transition(o).style("display","none"):null===(a=E.current)||void 0===a||a.transition(o).attr("d",m?j:z).style("display",null);null===(e=x.current)||void 0===e||e.transition(o).attr("d",m?U:G),null===(t=B.current)||void 0===t||t.transition(o).attr("transform",m?H:V),T.current=m;const s=null!==(n=null===M||void 0===M?void 0:M.leaves()[0].y)&&void 0!==n?n:0;null===(r=_.current)||void 0===r||r.transition(o).attr("transform",(e=>`translate(${C&&T.current?e.radius:s+4},${e.x})`))}),[m,C]),(0,F.useEffect)((()=>{var e,t;null===(e=_.current)||void 0===e||e.style("display",v?"block":"none"),null===(t=E.current)||void 0===t||t.style("display",v?"block":"none")}),[v]);return(0,F.useImperativeHandle)(t,(()=>({getLinkExtensions:()=>E.current,getLinks:()=>x.current,getInnerNodes:()=>B.current,getLeaves:()=>_.current,getSvgRef:()=>D.current,setVariableLinks:e=>y(e),setDisplayLeaves:e=>b(e),setTipAlign:e=>I(e),recenterView:()=>{$Ge(w.current).select("svg").select("g").transition().duration(750).attr("transform","translate(0,0)")},refresh:()=>Q((e=>e+1)),getNodePosition:e=>{if(D.current)return function(e,t){const n=t.select("g.nodes").selectAll("g.inner-node").filter((t=>t.data.name===e));if(!n.empty()){var r,o;const e=n.data()[0];return[null!==(r=e.x)&&void 0!==r?r:0,null!==(o=e.y)&&void 0!==o?o:0]}const i=t.select("g.leaves").selectAll("g.leaf").filter((t=>t.data.name===e));return i.empty()||console.log("Found leaf",i),[0,0]}(e,$Ge(D.current))},getRoot:()=>M,getContainer:()=>w.current,findAndZoom:(e,t)=>{D.current&&function(e,t,n){const r=t.select("g.nodes").selectAll("g.inner-node").filter((t=>t.data.name===e));if(!r.empty()){var o,i;const e=r.node(),a=r.data()[0],s=null!==(o=a.x)&&void 0!==o?o:0,l=null!==(i=a.y)&&void 0!==i?i:0,c=n.current.clientWidth/2,u=n.current.clientHeight/2,d=Hje().on("zoom",(e=>{t.select("g").attr("transform",e.transform)}));t.transition().duration(750).call(d.transform,Pje.translate(-l+c,-s+u).scale(1));const A=$Ge(e).select("circle"),f=A.attr("r"),p=A.style("fill"),h=(2*parseFloat(f)).toString();A.transition().delay(1e3).style("fill","red").style("r",h).transition().duration(500).style("fill",p).style("r",f).transition().duration(500).style("fill","red").style("r",h).transition().duration(500).style("fill",p).style("r",f)}const a=t.select("g.leaves").selectAll("g.leaf").filter((t=>t.data.name===e));a.empty()||console.log("Found leaf",a)}(e,$Ge(D.current),t)}}))),(0,ct.jsx)("div",{className:"radial-tree",children:(0,ct.jsx)("div",{ref:w,style:{width:"100%",height:"100%",overflow:"show"}})})})),o0e=()=>{const[e,t]=(0,F.useState)({}),[n,r]=(0,F.useState)(null),[o,i]=(0,F.useState)(null),[a,s]=(0,F.useState)(null),[l,c]=(0,F.useState)({}),[u,d]=(0,F.useState)({}),[A,f]=(0,F.useState)(null),[p,h]=(0,F.useState)(null),{scrollPosition:g,setScrollPosition:m,seqLength:y,setSeqLength:v,logoContent:b,setLogoContent:C,logoAlphabet:I,setLogoAlphabet:E}=(0,F.useContext)(dt),[x,B]=(0,F.useState)(null),[w,_]=(0,F.useState)(null),[S,D]=(0,F.useState)("radial"),T=["radial","rectangular","unrooted"],[k,Q]=(0,F.useState)(!1),[M,R]=(0,F.useState)(!1),[P,O]=(0,F.useState)(!1),[N,L]=(0,F.useState)(!1),[U,G]=(0,F.useState)(""),[j,z]=(0,F.useState)(null),H=Boolean(j),[V,q]=(0,F.useState)([]),Y=(0,F.useRef)(null),X=(0,F.useRef)(null),W=(0,F.useRef)(null),K=(0,F.useRef)(null),J=(0,F.useRef)(null),[Z,$]=(0,F.useState)([]),[ee,te]=(0,F.useState)(0);function ne(e){u&&e.data.name in u&&element.select("circle").style("fill","green").attr("r",5)}function re(e){"bilR"===e.data.name&&$Ge(e.labelElement).style("fill","red").style("font-size",(()=>{const t=$Ge(e.labelElement).style("font-size");return parseFloat(t)+2+"px"}))}function oe(e,t){if(A&&t.children){$Ge(t.linkNode).on("click",(async(n,r)=>{r.selected?(r.selected=!1,n.target.classList.remove("link--highlight"),console.log("removing from compare"),se(e),se(t)):(r.selected=!0,console.log("adding to compare"),n.target.classList.add("link--highlight"),le(e),le(t))}))}}function ie(e,t){console.log(t)}const ae=(0,F.useMemo)((()=>[{label:function(e){return e["compare-descendants"]?"Remove descendants":"Compare descendants"},onClick:function(e){e["compare-descendants"]?(se(e,!0),ue(e.data.name,null)):ce(e)},toShow:function(e){return e.children.length>0}},{label:function(e){return e["compare-node"]?"Remove from compare":"Compare ancestral state"},onClick:function(e){e["compare-node"]?(se(e,!1),ue(e.data.name,null)):le(e)},toShow:function(e){return e.children.length>0}}]),[A,e]);(0,F.useEffect)((()=>{te((e=>e+1)),q(A&&e?Object.keys(A).concat(Object.keys(e)):e?Object.keys(e):A?Object.keys(A):[])}),[n,A,e]);const se=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];C((n=>{const r={...n};return t?(e["compare-descendants"]=!1,delete r["Information Logo of Clade "+e.data.name]):(e["compare-node"]=!1,delete r["ASR Probability Logo for "+e.data.name]),ue(e.data.name,null),r}))},le=e=>{A?($([]),C((t=>{const n={...t};return e["compare-node"]=!0,n["ASR Probability Logo for "+e.data.name]=A[`${e.data.name}`],ue(e.data.name,"red"),n})),Q(!0),O(!1)):console.warn("ASR data not loaded yet")},ce=(0,F.useCallback)((t=>{$([]),C((n=>{const r={...n};console.log(e),console.log("Node name:",t.data.name);var o=z$e(t),i="";for(var a of o)i+=`>${a.data.name}\n${e[a.data.name]}\n`;return""===i?(console.log("No descendants found for node:",t.data.name),r):(t["compare-descendants"]=!0,r["Information Logo of Clade "+t.data.name]=i,ue(t.data.name,"green"),r)})),Q(!0),O(!1)}),[e]),ue=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;eje(".inner-node").each((function(){if($Ge(this).data()[0].data.name===e)if(null==t){const e=$Ge(this).selectAll("circle");2===e.size()&&e.filter((function(e,t){return 0===t})).remove()}else{if(2===$Ge(this).selectAll("circle").size())console.log("Attempted to add circle to node with existing circle");else{const e=parseInt($Ge(this).select("circle").attr("r"));$Ge(this).insert("circle",":first-child").attr("r",e+2).style("fill",t)}}}))};(0,F.useEffect)((()=>{0==Object.keys(b).length?(R(!1),Q(!1)):(Q(!0),h(null))}),[b]);return(0,ct.jsx)("div",{style:{height:"100%",display:"flex",flexDirection:"column",maxWidth:"100vw",flexGrow:"1"},children:(0,ct.jsxs)("div",{style:{display:"flex",flexGrow:"1"},children:[(0,ct.jsxs)("div",{className:"sidebar",style:{width:N?"220px":"50px",flexGrow:"0"},children:[(0,ct.jsxs)("div",{className:"sidebar-item nodes-label",children:[(0,ct.jsx)("div",{children:(0,ct.jsx)("button",{className:"dropbtn-search dropbtn",onClick:()=>{document.querySelector(".nodes-dropdown-content").classList.contains("visible")?L(!0):L(!N)},children:(0,ct.jsxs)("svg",{width:"25px",height:"25px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ct.jsx)("title",{children:"Search for node"}),(0,ct.jsx)("path",{d:"M11 6C13.7614 6 16 8.23858 16 11M16.6588 16.6549L21 21M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z",stroke:"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})}),N&&(0,ct.jsx)(fJe,{className:"zoomInput",id:"search",clearOnBlur:!0,selectOnFocus:!0,freeSolo:!0,size:"small",options:V,getOptionLabel:e=>e,style:{width:150},renderInput:e=>(0,ct.jsx)(P$e,{...e,label:"Search for node",variant:"filled",style:{backgroundColor:"white",borderTopLeftRadius:"5px",borderTopRightRadius:"5px",fontSize:"8px"},slotProps:{inputLabel:{style:{fontSize:"14px"}}}}),onChange:(e,t)=>Y.current.findAndZoom(t,X)}),U&&(0,ct.jsx)("div",{className:"notification",children:U})]}),(0,ct.jsx)("div",{className:"sidebar-item nodes-label",children:(0,ct.jsxs)("div",{className:"dropdown",onClick:()=>{const e=document.querySelector(".nodes-dropdown-content"),t=document.querySelector(".dropbtn-nodes");t.classList.contains("selected")?t.classList.remove("selected"):t.classList.add("selected"),e.classList.contains("visible")?(e.classList.remove("visible"),L(!1)):(e.classList.add("visible"),L(!0))},children:[(0,ct.jsx)("button",{className:"dropbtn-nodes dropbtn",children:(0,ct.jsxs)("svg",{fill:"#FFFFFF",width:"25px",height:"25px",xmlns:"http://www.w3.org/2000/svg",children:[(0,ct.jsx)("title",{children:"Upload files for visualization"}),(0,ct.jsx)("path",{d:"M20,9H16a1,1,0,0,0-1,1v1H7V7H8A1,1,0,0,0,9,6V2A1,1,0,0,0,8,1H4A1,1,0,0,0,3,2V6A1,1,0,0,0,4,7H5V20a1,1,0,0,0,1,1h9v1a1,1,0,0,0,1,1h4a1,1,0,0,0,1-1V18a1,1,0,0,0-1-1H16a1,1,0,0,0-1,1v1H7V13h8v1a1,1,0,0,0,1,1h4a1,1,0,0,0,1-1V10A1,1,0,0,0,20,9ZM5,3H7V5H5ZM17,19h2v2H17Zm2-6H17V11h2Z"})]})}),N&&(0,ct.jsx)("span",{className:"sidebar-label",children:"Upload"})]})}),(0,ct.jsxs)("div",{className:"nodes-dropdown-content dropdown-content transition-element",children:[(0,ct.jsxs)("button",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start"},children:[(0,ct.jsx)("span",{style:{fontWeight:"bold",minWidth:"60px"},children:"Tree"}),(0,ct.jsx)("input",{type:"file",accept:".nwk,.newick,.tree",onChange:e=>{const t=e.target.files[0],n=new FileReader;n.onload=e=>{var t;const n=null===(t=e.target)||void 0===t?void 0:t.result;r(n),te((e=>e+1))},n.readAsText(t)}})]}),(0,ct.jsx)("button",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start"},children:(0,ct.jsx)("span",{style:{fontWeight:"bold",minWidth:"60px"},children:"ASR"})}),(0,ct.jsxs)("button",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start"},children:[(0,ct.jsx)("span",{style:{fontWeight:"bold",minWidth:"60px"},children:"Sequences"}),(0,ct.jsx)("input",{type:"file",accept:".fa,.fasta,.afa,.fna,.mfa,.fas,.faa,.txt",onChange:e=>{const n=e.target.files[0],r=new FileReader;r.onload=e=>{var n;const r=null===(n=e.target)||void 0===n?void 0:n.result;L$e(r).then((e=>{t(e),v(Object.values(e)[0].length)})),te((e=>e+1))},r.readAsText(n)}})]}),(0,ct.jsx)("button",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start"},children:(0,ct.jsx)("span",{style:{fontWeight:"bold",minWidth:"60px"},children:"Node Info (JSON)"})})]})]}),(0,ct.jsxs)("div",{className:"view",children:[(0,ct.jsxs)("div",{className:"tree-div",ref:X,onDrop:()=>{var e;e.preventDefault()},style:{width:M?"2%":k?"50%":"100%",textAlign:"center"},children:[(0,ct.jsxs)(yJe,{variant:"contained","aria-label":"Basic button group",children:[(0,ct.jsx)(iNe,{title:"Recenter on root",placement:"top",children:(0,ct.jsx)(hKe,{onClick:()=>{Y.current&&Y.current.findAndZoom("Node1",X)},children:(0,ct.jsx)(O$e,{})})}),(0,ct.jsxs)(iNe,{title:"Labels",placement:"top",children:[(0,ct.jsx)(hKe,{"aria-controls":H?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":H?"true":void 0,onClick:e=>{z(e.currentTarget)},children:(0,ct.jsx)(F$e,{})}),(0,ct.jsxs)(yZe,{id:"basic-menu",anchorEl:j,open:H,onClose:()=>{z(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,ct.jsx)(wZe,{onClick:()=>Y.current&&Y.current.setVariableLinks((e=>!e)),children:"Variable Links"}),(0,ct.jsx)(wZe,{onClick:()=>Y.current&&Y.current.setTipAlign((e=>!e)),children:"Align Tips"}),(0,ct.jsx)(wZe,{onClick:()=>Y.current&&Y.current.setDisplayLeaves((e=>!e)),children:"Toggle Labels"})]})]}),(0,ct.jsx)(iNe,{title:"Reset tree",placement:"top",children:(0,ct.jsx)(hKe,{onClick:()=>Y.current&&Y.current.refresh(),children:(0,ct.jsx)(N$e,{})})}),(0,ct.jsx)(hKe,{"aria-controls":H?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":H?"true":void 0,onClick:()=>{const e=(T.indexOf(S)+1)%T.length;D(T[e])},children:S})]}),(()=>{if(n)return"radial"===S?(0,ct.jsx)(e0e,{ref:Y,data:n,nodeStyler:ne,customNodeMenuItems:ae,leafStyler:re,width:1500,linkStyler:oe,onNodeClick:ie},ee):"rectangular"===S?(0,ct.jsx)(r0e,{ref:Y,data:n,nodeStyler:ne,customNodeMenuItems:ae,leafStyler:re,width:1500,linkStyler:oe,onNodeClick:ie},ee):(0,ct.jsx)("text",{children:"Unrooted Not Implemented"})})()]}),Object.keys(b).length>0&&(0,ct.jsxs)("div",{className:"center-console",children:[!P&&(0,ct.jsx)("div",{children:(0,ct.jsx)(iNe,{title:M?"Expand Left":"Collapse Left",placement:"top",children:(0,ct.jsx)("button",{className:"triangle-button",onClick:()=>{R(!M)},children:M?(0,ct.jsxs)("svg",{width:"25px",height:"25px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ct.jsx)("title",{children:"Expand Left"}),(0,ct.jsx)("path",{d:"M21 6H13M9 6V18M21 10H13M21 14H13M21 18H13M3 10L5 12L3 14",stroke:"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}):(0,ct.jsxs)("svg",{width:"25px",height:"25px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(180)",children:[(0,ct.jsx)("title",{children:"Collapse Left"}),(0,ct.jsx)("path",{d:"M21 6H13M9 6V18M21 10H13M21 14H13M21 18H13M3 10L5 12L3 14",stroke:"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})})}),!M&&(0,ct.jsx)(iNe,{title:P?"Expand Right":"Collapse Right",placement:"bottom",children:(0,ct.jsx)("button",{className:"triangle-button",onClick:()=>{O(!P),Q(!!P)},children:P?(0,ct.jsxs)("svg",{width:"25px",height:"25px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(180)",children:[(0,ct.jsx)("title",{children:"Expand Right"}),(0,ct.jsx)("path",{d:"M21 6H13M9 6V18M21 10H13M21 14H13M21 18H13M3 10L5 12L3 14",stroke:"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}):(0,ct.jsxs)("svg",{width:"25px",height:"25px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ct.jsx)("title",{children:"Collapse Right"}),(0,ct.jsx)("path",{d:"M21 6H13M9 6V18M21 10H13M21 14H13M21 18H13M3 10L5 12L3 14",stroke:"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})})]}),k&&b&&(0,ct.jsxs)("div",{className:"right-div",style:{display:"flex",width:P?"2%":M?"100%":"50%",userSelect:"none",flexDirection:M?"row":"column"},children:[(0,ct.jsxs)("div",{className:"expandedRight",style:{width:M?"50%":"100%",display:"flex",flexDirection:"column"},children:[(0,ct.jsxs)("div",{style:{display:"flex",overflowY:"show",alignItems:"center",justifyContent:"space-between"},children:[(0,ct.jsx)("input",{className:"scrollInput zoomInput",ref:J,placeholder:g+1,onKeyDown:e=>{if("Enter"===e.key){try{K.current.scrollToHighlightIndex(J.current.value)}catch(e){G("Position not found"),setTimeout((()=>{G("")}),2e3)}J.current.value=""}},style:{width:"40px"}}),(0,ct.jsx)(FWe,{size:"small","aria-label":"default",valueLabelDisplay:"off",min:0,max:y-1,value:g,onChange:(e,t)=>{m(t+1),K.current.scrollToIndex(t)},track:!1,style:{width:"100%",margin:"0px 2em"},marks:[{value:1,label:"1"},{value:y-1,label:`${y}`}]}),(0,ct.jsx)(iNe,{title:"Download Stack",placement:"bottom",children:(0,ct.jsx)("button",{id:"download-stack-btn",className:"download-stack-btn",style:{borderRadius:"3px",backgroundColor:"#def2b3",border:"none",cursor:"pointer"},children:(0,ct.jsxs)("svg",{width:"25px",height:"25px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",version:"1.1",fill:"none",stroke:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",children:[(0,ct.jsx)("path",{d:"m3.25 7.25-1.5.75 6.25 3.25 6.25-3.25-1.5-.75m-11 3.75 6.25 3.25 6.25-3.25"}),(0,ct.jsx)("path",{d:"m8 8.25v-6.5m-2.25 4.5 2.25 2 2.25-2"})]})})}),(0,ct.jsx)(mKe,{seqLength:y}),(0,ct.jsx)("div",{style:{width:"400px"},children:(0,ct.jsxs)(wJe,{fullWidth:!0,size:"small",children:[(0,ct.jsx)(NJe,{children:"Color Scheme"}),(0,ct.jsxs)(x$e,{size:"small",labelId:"demo-simple-select-label",id:"demo-simple-select",value:I,label:"Color Scheme",onChange:e=>{E(e.target.value)},children:[(0,ct.jsx)(wZe,{value:0,children:"Acidity"}),(0,ct.jsx)(wZe,{value:1,children:"Unique"}),(0,ct.jsx)(wZe,{value:2,children:"Shapely"}),(0,ct.jsx)(wZe,{value:3,children:"Clustal"}),(0,ct.jsx)(wZe,{value:4,children:"Clustal2"}),(0,ct.jsx)(wZe,{value:5,children:"Hydrophobicity"}),(0,ct.jsx)(wZe,{value:6,children:"Cinema"}),(0,ct.jsx)(wZe,{value:7,children:"Helix"}),(0,ct.jsx)(wZe,{value:8,children:"Lesk"}),(0,ct.jsx)(wZe,{value:9,children:"Mae"}),(0,ct.jsx)(wZe,{value:10,children:"Strand"}),(0,ct.jsx)(wZe,{value:11,children:"Taylor"}),(0,ct.jsx)(wZe,{value:12,children:"Turn"}),(0,ct.jsx)(wZe,{value:13,children:"Zappo"})]})]})})]}),(0,ct.jsxs)("div",{className:"logodiv",style:{flexGrow:"1",width:"100%",height:M?"100%":Object.keys(b).length>2?"570px":Object.keys(b).length>1?"380px":"190px"},children:[(0,ct.jsx)(iNe,{title:"Clear All",placement:"top",children:(0,ct.jsx)("button",{className:"logo-close-btn",onClick:()=>{!function(){Q(!1),B(null),R(!1),O(!1),h(null),C({});var e=function(e){const t=[];return function e(n){t.push(n),n.children&&n.children.forEach((t=>e(t)))}(e),t}(Y.current.getRoot());e.forEach((e=>{e["compare-node"]=!1,e["compare-descendants"]=!1,ue(e.data.name,null)})),eje(".link--highlight").classed(".link--highlight",!1)}()},children:(0,ct.jsx)("svg",{fill:"#000000",width:"25px",height:"25px",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:(0,ct.jsx)("path",{d:"M16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13zM21.961 12.209c0.244-0.244 0.244-0.641 0-0.885l-1.328-1.327c-0.244-0.244-0.641-0.244-0.885 0l-3.761 3.761-3.761-3.761c-0.244-0.244-0.641-0.244-0.885 0l-1.328 1.327c-0.244 0.244-0.244 0.641 0 0.885l3.762 3.762-3.762 3.76c-0.244 0.244-0.244 0.641 0 0.885l1.328 1.328c0.244 0.244 0.641 0.244 0.885 0l3.761-3.762 3.761 3.762c0.244 0.244 0.641 0.244 0.885 0l1.328-1.328c0.244-0.244 0.244-0.641 0-0.885l-3.762-3.76 3.762-3.762z"})})})}),(0,ct.jsx)(Jje,{data:b,onColumnClick:e=>{B(e+1)},onColumnHover:e=>{_(e+1)},importantResiduesList:Z,removeNodeHandle:e=>{const t={...b};delete t[e],C(t),eje(".inner-node").each((function(){var t=$Ge(this).data()[0];if(t.data.name===e.replace("ASR Probability Logo for ","")||t.data.name===e.replace("Information Logo of Clade ","")){t["compare-node"]=!1,t["compare-descendants"]=!1;const e=$Ge(this).selectAll("circle");2===e.size()&&e.filter((function(e,t){return 0===t})).remove()}}))},applyEntropyStructColor:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?h(null):eje(".internal-node").each((function(){var n=$Ge(this).data()[0];if(n.data.name===t){var r=z$e(n),o="";for(var i of r)o+=`>${i.data.name}\n${e[i.data.name]}\n`;(async e=>{const t=Object.values(await L$e(e)),n=t.length,r=t[0].length,o=Array(r).fill(0);for(let i=0;i<r;i++){const e=t.map((e=>e[i])).reduce(((e,t)=>(e[t]=(e[t]||0)+1,e)),{}),r=Object.values(e).map((e=>e/n));o[i]=r.reduce(((e,t)=>e-t*Math.log2(t)),0)}return o})(o).then((e=>U$e(e))).then((e=>{h(e)}))}}))},applyImportantStructColor:(e,t)=>{var n=Array(y).fill(65280);for(var r of t)n[r]=16711680;h(n)},findAndZoom:function(e){Y.current.findAndZoom(e,X)},ref:K})]})]}),(0,ct.jsx)("div",{style:{width:M?"1px":"100%",height:M?"100%":"1px",backgroundColor:"#ccc",margin:"3px 3px"}}),(0,ct.jsxs)("div",{style:{flex:"1",display:"flex",flexDirection:"column"},children:[p&&(0,ct.jsx)("img",{src:"/EzSEA-web-lab/gradient.png",alt:"Gradient Legend",style:{width:"100%",height:"20px",marginTop:"10px",borderRadius:"4px"}}),(0,ct.jsx)("div",{style:{display:"flex",height:"100%",flexGrow:"1",flexDirection:M?"column":"row"},children:(0,ct.jsx)("div",{className:"pvdiv",ref:W,style:{height:"100%",flexGrow:"1"}})})]})]})]})]})})};const i0e=function(){return(0,ct.jsx)(At,{children:(0,ct.jsx)(o0e,{})})},a0e=()=>(0,ct.jsxs)("div",{style:{flexGrow:1},children:[(0,ct.jsx)(ut,{}),(0,ct.jsx)("h1",{children:"404 - Page Not Found"}),(0,ct.jsx)("p",{children:"The page you are looking for does not exist."})]});const s0e=()=>(0,ct.jsxs)(Je,{children:[(0,ct.jsx)(We,{path:"/*",element:(0,ct.jsxs)(Je,{children:[(0,ct.jsx)(We,{path:"/test",element:(0,ct.jsx)(i0e,{})}),(0,ct.jsx)(We,{path:"*",element:(0,ct.jsx)(a0e,{})})]})}),(0,ct.jsx)(We,{path:"/ezsea/*",element:(0,ct.jsx)(Je,{children:(0,ct.jsx)(We,{path:"/test",element:(0,ct.jsx)(i0e,{})})})})]});(0,L.H)(document.getElementById("root")).render((0,ct.jsx)(F.StrictMode,{children:(0,ct.jsx)(rt,{basename:"/ezsea",children:(0,ct.jsx)(s0e,{})})}))})()})();
//# sourceMappingURL=main.f4414168.js.map